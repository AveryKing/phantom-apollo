"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@langchain";
exports.ids = ["vendor-chunks/@langchain"];
exports.modules = {

/***/ "(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js":
/*!************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   __export: () => (/* binding */ __export)\n/* harmony export */ });\n//#region rolldown:runtime\nvar __defProp = Object.defineProperty;\nvar __export = (target, all) => {\n\tfor (var name in all) __defProp(target, name, {\n\t\tget: all[name],\n\t\tenumerable: true\n\t});\n};\n\n//#endregion\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvX3ZpcnR1YWwvcm9sbGRvd25fcnVudGltZS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvX3ZpcnR1YWwvcm9sbGRvd25fcnVudGltZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gcm9sbGRvd246cnVudGltZVxudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2V4cG9ydCA9ICh0YXJnZXQsIGFsbCkgPT4ge1xuXHRmb3IgKHZhciBuYW1lIGluIGFsbCkgX19kZWZQcm9wKHRhcmdldCwgbmFtZSwge1xuXHRcdGdldDogYWxsW25hbWVdLFxuXHRcdGVudW1lcmFibGU6IHRydWVcblx0fSk7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IF9fZXhwb3J0IH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/agents.js":
/*!*****************************************************!*\
  !*** ./node_modules/@langchain/core/dist/agents.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   agents_exports: () => (/* binding */ agents_exports)\n/* harmony export */ });\n//#region src/agents.ts\nvar agents_exports = {};\n\n//#endregion\n\n//# sourceMappingURL=agents.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvYWdlbnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBOztBQUVBO0FBQzBCO0FBQzFCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvYWdlbnRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvYWdlbnRzLnRzXG52YXIgYWdlbnRzX2V4cG9ydHMgPSB7fTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBhZ2VudHNfZXhwb3J0cyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWdlbnRzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/agents.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/caches/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/caches/index.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCache: () => (/* binding */ BaseCache),\n/* harmony export */   InMemoryCache: () => (/* binding */ InMemoryCache),\n/* harmony export */   caches_exports: () => (/* binding */ caches_exports),\n/* harmony export */   defaultHashKeyEncoder: () => (/* binding */ defaultHashKeyEncoder),\n/* harmony export */   deserializeStoredGeneration: () => (/* binding */ deserializeStoredGeneration),\n/* harmony export */   serializeGeneration: () => (/* binding */ serializeGeneration)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _messages_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../messages/utils.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/utils.js\");\n/* harmony import */ var _utils_js_sha256_hash_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/js-sha256/hash.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/js-sha256/hash.js\");\n/* harmony import */ var _utils_hash_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/hash.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/hash.js\");\n\n\n\n\n\n//#region src/caches/index.ts\nvar caches_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(caches_exports, {\n\tBaseCache: () => BaseCache,\n\tInMemoryCache: () => InMemoryCache,\n\tdefaultHashKeyEncoder: () => defaultHashKeyEncoder,\n\tdeserializeStoredGeneration: () => deserializeStoredGeneration,\n\tserializeGeneration: () => serializeGeneration\n});\nconst defaultHashKeyEncoder = (...strings) => (0,_utils_js_sha256_hash_js__WEBPACK_IMPORTED_MODULE_2__.sha256)(strings.join(\"_\"));\nfunction deserializeStoredGeneration(storedGeneration) {\n\tif (storedGeneration.message !== void 0) return {\n\t\ttext: storedGeneration.text,\n\t\tmessage: (0,_messages_utils_js__WEBPACK_IMPORTED_MODULE_1__.mapStoredMessageToChatMessage)(storedGeneration.message)\n\t};\n\telse return { text: storedGeneration.text };\n}\nfunction serializeGeneration(generation) {\n\tconst serializedValue = { text: generation.text };\n\tif (generation.message !== void 0) serializedValue.message = generation.message.toDict();\n\treturn serializedValue;\n}\n/**\n* Base class for all caches. All caches should extend this class.\n*/\nvar BaseCache = class {\n\tkeyEncoder = defaultHashKeyEncoder;\n\t/**\n\t* Sets a custom key encoder function for the cache.\n\t* This function should take a prompt and an LLM key and return a string\n\t* that will be used as the cache key.\n\t* @param keyEncoderFn The custom key encoder function.\n\t*/\n\tmakeDefaultKeyEncoder(keyEncoderFn) {\n\t\tthis.keyEncoder = keyEncoderFn;\n\t}\n};\nconst GLOBAL_MAP = /* @__PURE__ */ new Map();\n/**\n* A cache for storing LLM generations that stores data in memory.\n*/\nvar InMemoryCache = class InMemoryCache extends BaseCache {\n\tcache;\n\tconstructor(map) {\n\t\tsuper();\n\t\tthis.cache = map ?? /* @__PURE__ */ new Map();\n\t}\n\t/**\n\t* Retrieves data from the cache using a prompt and an LLM key. If the\n\t* data is not found, it returns null.\n\t* @param prompt The prompt used to find the data.\n\t* @param llmKey The LLM key used to find the data.\n\t* @returns The data corresponding to the prompt and LLM key, or null if not found.\n\t*/\n\tlookup(prompt, llmKey) {\n\t\treturn Promise.resolve(this.cache.get(this.keyEncoder(prompt, llmKey)) ?? null);\n\t}\n\t/**\n\t* Updates the cache with new data using a prompt and an LLM key.\n\t* @param prompt The prompt used to store the data.\n\t* @param llmKey The LLM key used to store the data.\n\t* @param value The data to be stored.\n\t*/\n\tasync update(prompt, llmKey, value) {\n\t\tthis.cache.set(this.keyEncoder(prompt, llmKey), value);\n\t}\n\t/**\n\t* Returns a global instance of InMemoryCache using a predefined global\n\t* map as the initial cache.\n\t* @returns A global instance of InMemoryCache.\n\t*/\n\tstatic global() {\n\t\treturn new InMemoryCache(GLOBAL_MAP);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FjaGVzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBMkQ7QUFDVTtBQUNqQjtBQUMxQjs7QUFFMUI7QUFDQTtBQUNBLHNFQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCw4Q0FBOEMsZ0VBQU07QUFDcEQ7QUFDQTtBQUNBO0FBQ0EsV0FBVyxpRkFBNkI7QUFDeEM7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzZIO0FBQzdIIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FjaGVzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IG1hcFN0b3JlZE1lc3NhZ2VUb0NoYXRNZXNzYWdlIH0gZnJvbSBcIi4uL21lc3NhZ2VzL3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBzaGEyNTYgfSBmcm9tIFwiLi4vdXRpbHMvanMtc2hhMjU2L2hhc2guanNcIjtcbmltcG9ydCBcIi4uL3V0aWxzL2hhc2guanNcIjtcblxuLy8jcmVnaW9uIHNyYy9jYWNoZXMvaW5kZXgudHNcbnZhciBjYWNoZXNfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQoY2FjaGVzX2V4cG9ydHMsIHtcblx0QmFzZUNhY2hlOiAoKSA9PiBCYXNlQ2FjaGUsXG5cdEluTWVtb3J5Q2FjaGU6ICgpID0+IEluTWVtb3J5Q2FjaGUsXG5cdGRlZmF1bHRIYXNoS2V5RW5jb2RlcjogKCkgPT4gZGVmYXVsdEhhc2hLZXlFbmNvZGVyLFxuXHRkZXNlcmlhbGl6ZVN0b3JlZEdlbmVyYXRpb246ICgpID0+IGRlc2VyaWFsaXplU3RvcmVkR2VuZXJhdGlvbixcblx0c2VyaWFsaXplR2VuZXJhdGlvbjogKCkgPT4gc2VyaWFsaXplR2VuZXJhdGlvblxufSk7XG5jb25zdCBkZWZhdWx0SGFzaEtleUVuY29kZXIgPSAoLi4uc3RyaW5ncykgPT4gc2hhMjU2KHN0cmluZ3Muam9pbihcIl9cIikpO1xuZnVuY3Rpb24gZGVzZXJpYWxpemVTdG9yZWRHZW5lcmF0aW9uKHN0b3JlZEdlbmVyYXRpb24pIHtcblx0aWYgKHN0b3JlZEdlbmVyYXRpb24ubWVzc2FnZSAhPT0gdm9pZCAwKSByZXR1cm4ge1xuXHRcdHRleHQ6IHN0b3JlZEdlbmVyYXRpb24udGV4dCxcblx0XHRtZXNzYWdlOiBtYXBTdG9yZWRNZXNzYWdlVG9DaGF0TWVzc2FnZShzdG9yZWRHZW5lcmF0aW9uLm1lc3NhZ2UpXG5cdH07XG5cdGVsc2UgcmV0dXJuIHsgdGV4dDogc3RvcmVkR2VuZXJhdGlvbi50ZXh0IH07XG59XG5mdW5jdGlvbiBzZXJpYWxpemVHZW5lcmF0aW9uKGdlbmVyYXRpb24pIHtcblx0Y29uc3Qgc2VyaWFsaXplZFZhbHVlID0geyB0ZXh0OiBnZW5lcmF0aW9uLnRleHQgfTtcblx0aWYgKGdlbmVyYXRpb24ubWVzc2FnZSAhPT0gdm9pZCAwKSBzZXJpYWxpemVkVmFsdWUubWVzc2FnZSA9IGdlbmVyYXRpb24ubWVzc2FnZS50b0RpY3QoKTtcblx0cmV0dXJuIHNlcmlhbGl6ZWRWYWx1ZTtcbn1cbi8qKlxuKiBCYXNlIGNsYXNzIGZvciBhbGwgY2FjaGVzLiBBbGwgY2FjaGVzIHNob3VsZCBleHRlbmQgdGhpcyBjbGFzcy5cbiovXG52YXIgQmFzZUNhY2hlID0gY2xhc3Mge1xuXHRrZXlFbmNvZGVyID0gZGVmYXVsdEhhc2hLZXlFbmNvZGVyO1xuXHQvKipcblx0KiBTZXRzIGEgY3VzdG9tIGtleSBlbmNvZGVyIGZ1bmN0aW9uIGZvciB0aGUgY2FjaGUuXG5cdCogVGhpcyBmdW5jdGlvbiBzaG91bGQgdGFrZSBhIHByb21wdCBhbmQgYW4gTExNIGtleSBhbmQgcmV0dXJuIGEgc3RyaW5nXG5cdCogdGhhdCB3aWxsIGJlIHVzZWQgYXMgdGhlIGNhY2hlIGtleS5cblx0KiBAcGFyYW0ga2V5RW5jb2RlckZuIFRoZSBjdXN0b20ga2V5IGVuY29kZXIgZnVuY3Rpb24uXG5cdCovXG5cdG1ha2VEZWZhdWx0S2V5RW5jb2RlcihrZXlFbmNvZGVyRm4pIHtcblx0XHR0aGlzLmtleUVuY29kZXIgPSBrZXlFbmNvZGVyRm47XG5cdH1cbn07XG5jb25zdCBHTE9CQUxfTUFQID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbi8qKlxuKiBBIGNhY2hlIGZvciBzdG9yaW5nIExMTSBnZW5lcmF0aW9ucyB0aGF0IHN0b3JlcyBkYXRhIGluIG1lbW9yeS5cbiovXG52YXIgSW5NZW1vcnlDYWNoZSA9IGNsYXNzIEluTWVtb3J5Q2FjaGUgZXh0ZW5kcyBCYXNlQ2FjaGUge1xuXHRjYWNoZTtcblx0Y29uc3RydWN0b3IobWFwKSB7XG5cdFx0c3VwZXIoKTtcblx0XHR0aGlzLmNhY2hlID0gbWFwID8/IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5cdH1cblx0LyoqXG5cdCogUmV0cmlldmVzIGRhdGEgZnJvbSB0aGUgY2FjaGUgdXNpbmcgYSBwcm9tcHQgYW5kIGFuIExMTSBrZXkuIElmIHRoZVxuXHQqIGRhdGEgaXMgbm90IGZvdW5kLCBpdCByZXR1cm5zIG51bGwuXG5cdCogQHBhcmFtIHByb21wdCBUaGUgcHJvbXB0IHVzZWQgdG8gZmluZCB0aGUgZGF0YS5cblx0KiBAcGFyYW0gbGxtS2V5IFRoZSBMTE0ga2V5IHVzZWQgdG8gZmluZCB0aGUgZGF0YS5cblx0KiBAcmV0dXJucyBUaGUgZGF0YSBjb3JyZXNwb25kaW5nIHRvIHRoZSBwcm9tcHQgYW5kIExMTSBrZXksIG9yIG51bGwgaWYgbm90IGZvdW5kLlxuXHQqL1xuXHRsb29rdXAocHJvbXB0LCBsbG1LZXkpIHtcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuY2FjaGUuZ2V0KHRoaXMua2V5RW5jb2Rlcihwcm9tcHQsIGxsbUtleSkpID8/IG51bGwpO1xuXHR9XG5cdC8qKlxuXHQqIFVwZGF0ZXMgdGhlIGNhY2hlIHdpdGggbmV3IGRhdGEgdXNpbmcgYSBwcm9tcHQgYW5kIGFuIExMTSBrZXkuXG5cdCogQHBhcmFtIHByb21wdCBUaGUgcHJvbXB0IHVzZWQgdG8gc3RvcmUgdGhlIGRhdGEuXG5cdCogQHBhcmFtIGxsbUtleSBUaGUgTExNIGtleSB1c2VkIHRvIHN0b3JlIHRoZSBkYXRhLlxuXHQqIEBwYXJhbSB2YWx1ZSBUaGUgZGF0YSB0byBiZSBzdG9yZWQuXG5cdCovXG5cdGFzeW5jIHVwZGF0ZShwcm9tcHQsIGxsbUtleSwgdmFsdWUpIHtcblx0XHR0aGlzLmNhY2hlLnNldCh0aGlzLmtleUVuY29kZXIocHJvbXB0LCBsbG1LZXkpLCB2YWx1ZSk7XG5cdH1cblx0LyoqXG5cdCogUmV0dXJucyBhIGdsb2JhbCBpbnN0YW5jZSBvZiBJbk1lbW9yeUNhY2hlIHVzaW5nIGEgcHJlZGVmaW5lZCBnbG9iYWxcblx0KiBtYXAgYXMgdGhlIGluaXRpYWwgY2FjaGUuXG5cdCogQHJldHVybnMgQSBnbG9iYWwgaW5zdGFuY2Ugb2YgSW5NZW1vcnlDYWNoZS5cblx0Ki9cblx0c3RhdGljIGdsb2JhbCgpIHtcblx0XHRyZXR1cm4gbmV3IEluTWVtb3J5Q2FjaGUoR0xPQkFMX01BUCk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQmFzZUNhY2hlLCBJbk1lbW9yeUNhY2hlLCBjYWNoZXNfZXhwb3J0cywgZGVmYXVsdEhhc2hLZXlFbmNvZGVyLCBkZXNlcmlhbGl6ZVN0b3JlZEdlbmVyYXRpb24sIHNlcmlhbGl6ZUdlbmVyYXRpb24gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/caches/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/callbacks/base.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/callbacks/base.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCallbackHandler: () => (/* binding */ BaseCallbackHandler),\n/* harmony export */   base_exports: () => (/* binding */ base_exports),\n/* harmony export */   callbackHandlerPrefersStreaming: () => (/* binding */ callbackHandlerPrefersStreaming),\n/* harmony export */   isBaseCallbackHandler: () => (/* binding */ isBaseCallbackHandler)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../load/serializable.js */ \"(ssr)/./node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/env.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! uuid */ \"(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/v7.js\");\n\n\n\n\n\n//#region src/callbacks/base.ts\nvar base_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(base_exports, {\n\tBaseCallbackHandler: () => BaseCallbackHandler,\n\tcallbackHandlerPrefersStreaming: () => callbackHandlerPrefersStreaming,\n\tisBaseCallbackHandler: () => isBaseCallbackHandler\n});\n/**\n* Abstract class that provides a set of optional methods that can be\n* overridden in derived classes to handle various events during the\n* execution of a LangChain application.\n*/\nvar BaseCallbackHandlerMethodsClass = class {};\nfunction callbackHandlerPrefersStreaming(x) {\n\treturn \"lc_prefer_streaming\" in x && x.lc_prefer_streaming;\n}\n/**\n* Abstract base class for creating callback handlers in the LangChain\n* framework. It provides a set of optional methods that can be overridden\n* in derived classes to handle various events during the execution of a\n* LangChain application.\n*/\nvar BaseCallbackHandler = class extends BaseCallbackHandlerMethodsClass {\n\tlc_serializable = false;\n\tget lc_namespace() {\n\t\treturn [\n\t\t\t\"langchain_core\",\n\t\t\t\"callbacks\",\n\t\t\tthis.name\n\t\t];\n\t}\n\tget lc_secrets() {\n\t\treturn void 0;\n\t}\n\tget lc_attributes() {\n\t\treturn void 0;\n\t}\n\tget lc_aliases() {\n\t\treturn void 0;\n\t}\n\tget lc_serializable_keys() {\n\t\treturn void 0;\n\t}\n\t/**\n\t* The name of the serializable. Override to provide an alias or\n\t* to preserve the serialized module name in minified environments.\n\t*\n\t* Implemented as a static method to support loading logic.\n\t*/\n\tstatic lc_name() {\n\t\treturn this.name;\n\t}\n\t/**\n\t* The final serialized identifier for the module.\n\t*/\n\tget lc_id() {\n\t\treturn [...this.lc_namespace, (0,_load_serializable_js__WEBPACK_IMPORTED_MODULE_1__.get_lc_unique_name)(this.constructor)];\n\t}\n\tlc_kwargs;\n\tignoreLLM = false;\n\tignoreChain = false;\n\tignoreAgent = false;\n\tignoreRetriever = false;\n\tignoreCustomEvent = false;\n\traiseError = false;\n\tawaitHandlers = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_2__.getEnvironmentVariable)(\"LANGCHAIN_CALLBACKS_BACKGROUND\") === \"false\";\n\tconstructor(input) {\n\t\tsuper();\n\t\tthis.lc_kwargs = input || {};\n\t\tif (input) {\n\t\t\tthis.ignoreLLM = input.ignoreLLM ?? this.ignoreLLM;\n\t\t\tthis.ignoreChain = input.ignoreChain ?? this.ignoreChain;\n\t\t\tthis.ignoreAgent = input.ignoreAgent ?? this.ignoreAgent;\n\t\t\tthis.ignoreRetriever = input.ignoreRetriever ?? this.ignoreRetriever;\n\t\t\tthis.ignoreCustomEvent = input.ignoreCustomEvent ?? this.ignoreCustomEvent;\n\t\t\tthis.raiseError = input.raiseError ?? this.raiseError;\n\t\t\tthis.awaitHandlers = this.raiseError || (input._awaitHandler ?? this.awaitHandlers);\n\t\t}\n\t}\n\tcopy() {\n\t\treturn new this.constructor(this);\n\t}\n\ttoJSON() {\n\t\treturn _load_serializable_js__WEBPACK_IMPORTED_MODULE_1__.Serializable.prototype.toJSON.call(this);\n\t}\n\ttoJSONNotImplemented() {\n\t\treturn _load_serializable_js__WEBPACK_IMPORTED_MODULE_1__.Serializable.prototype.toJSONNotImplemented.call(this);\n\t}\n\tstatic fromMethods(methods) {\n\t\tclass Handler extends BaseCallbackHandler {\n\t\t\tname = uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"]();\n\t\t\tconstructor() {\n\t\t\t\tsuper();\n\t\t\t\tObject.assign(this, methods);\n\t\t\t}\n\t\t}\n\t\treturn new Handler();\n\t}\n};\nconst isBaseCallbackHandler = (x) => {\n\tconst callbackHandler = x;\n\treturn callbackHandler !== void 0 && typeof callbackHandler.copy === \"function\" && typeof callbackHandler.name === \"string\" && typeof callbackHandler.awaitHandlers === \"boolean\";\n};\n\n//#endregion\n\n//# sourceMappingURL=base.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FsbGJhY2tzL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBMkQ7QUFDZ0I7QUFDbEI7QUFDNUI7O0FBRTdCO0FBQ0E7QUFDQSxzRUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyx5RUFBa0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixxRUFBc0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsK0RBQVk7QUFDckI7QUFDQTtBQUNBLFNBQVMsK0RBQVk7QUFDckI7QUFDQTtBQUNBO0FBQ0EsVUFBVSw0Q0FBTztBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDcUc7QUFDckciLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9jYWxsYmFja3MvYmFzZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4cG9ydCB9IGZyb20gXCIuLi9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyBTZXJpYWxpemFibGUsIGdldF9sY191bmlxdWVfbmFtZSB9IGZyb20gXCIuLi9sb2FkL3NlcmlhbGl6YWJsZS5qc1wiO1xuaW1wb3J0IHsgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSB9IGZyb20gXCIuLi91dGlscy9lbnYuanNcIjtcbmltcG9ydCAqIGFzIHV1aWQgZnJvbSBcInV1aWRcIjtcblxuLy8jcmVnaW9uIHNyYy9jYWxsYmFja3MvYmFzZS50c1xudmFyIGJhc2VfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQoYmFzZV9leHBvcnRzLCB7XG5cdEJhc2VDYWxsYmFja0hhbmRsZXI6ICgpID0+IEJhc2VDYWxsYmFja0hhbmRsZXIsXG5cdGNhbGxiYWNrSGFuZGxlclByZWZlcnNTdHJlYW1pbmc6ICgpID0+IGNhbGxiYWNrSGFuZGxlclByZWZlcnNTdHJlYW1pbmcsXG5cdGlzQmFzZUNhbGxiYWNrSGFuZGxlcjogKCkgPT4gaXNCYXNlQ2FsbGJhY2tIYW5kbGVyXG59KTtcbi8qKlxuKiBBYnN0cmFjdCBjbGFzcyB0aGF0IHByb3ZpZGVzIGEgc2V0IG9mIG9wdGlvbmFsIG1ldGhvZHMgdGhhdCBjYW4gYmVcbiogb3ZlcnJpZGRlbiBpbiBkZXJpdmVkIGNsYXNzZXMgdG8gaGFuZGxlIHZhcmlvdXMgZXZlbnRzIGR1cmluZyB0aGVcbiogZXhlY3V0aW9uIG9mIGEgTGFuZ0NoYWluIGFwcGxpY2F0aW9uLlxuKi9cbnZhciBCYXNlQ2FsbGJhY2tIYW5kbGVyTWV0aG9kc0NsYXNzID0gY2xhc3Mge307XG5mdW5jdGlvbiBjYWxsYmFja0hhbmRsZXJQcmVmZXJzU3RyZWFtaW5nKHgpIHtcblx0cmV0dXJuIFwibGNfcHJlZmVyX3N0cmVhbWluZ1wiIGluIHggJiYgeC5sY19wcmVmZXJfc3RyZWFtaW5nO1xufVxuLyoqXG4qIEFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIGNyZWF0aW5nIGNhbGxiYWNrIGhhbmRsZXJzIGluIHRoZSBMYW5nQ2hhaW5cbiogZnJhbWV3b3JrLiBJdCBwcm92aWRlcyBhIHNldCBvZiBvcHRpb25hbCBtZXRob2RzIHRoYXQgY2FuIGJlIG92ZXJyaWRkZW5cbiogaW4gZGVyaXZlZCBjbGFzc2VzIHRvIGhhbmRsZSB2YXJpb3VzIGV2ZW50cyBkdXJpbmcgdGhlIGV4ZWN1dGlvbiBvZiBhXG4qIExhbmdDaGFpbiBhcHBsaWNhdGlvbi5cbiovXG52YXIgQmFzZUNhbGxiYWNrSGFuZGxlciA9IGNsYXNzIGV4dGVuZHMgQmFzZUNhbGxiYWNrSGFuZGxlck1ldGhvZHNDbGFzcyB7XG5cdGxjX3NlcmlhbGl6YWJsZSA9IGZhbHNlO1xuXHRnZXQgbGNfbmFtZXNwYWNlKCkge1xuXHRcdHJldHVybiBbXG5cdFx0XHRcImxhbmdjaGFpbl9jb3JlXCIsXG5cdFx0XHRcImNhbGxiYWNrc1wiLFxuXHRcdFx0dGhpcy5uYW1lXG5cdFx0XTtcblx0fVxuXHRnZXQgbGNfc2VjcmV0cygpIHtcblx0XHRyZXR1cm4gdm9pZCAwO1xuXHR9XG5cdGdldCBsY19hdHRyaWJ1dGVzKCkge1xuXHRcdHJldHVybiB2b2lkIDA7XG5cdH1cblx0Z2V0IGxjX2FsaWFzZXMoKSB7XG5cdFx0cmV0dXJuIHZvaWQgMDtcblx0fVxuXHRnZXQgbGNfc2VyaWFsaXphYmxlX2tleXMoKSB7XG5cdFx0cmV0dXJuIHZvaWQgMDtcblx0fVxuXHQvKipcblx0KiBUaGUgbmFtZSBvZiB0aGUgc2VyaWFsaXphYmxlLiBPdmVycmlkZSB0byBwcm92aWRlIGFuIGFsaWFzIG9yXG5cdCogdG8gcHJlc2VydmUgdGhlIHNlcmlhbGl6ZWQgbW9kdWxlIG5hbWUgaW4gbWluaWZpZWQgZW52aXJvbm1lbnRzLlxuXHQqXG5cdCogSW1wbGVtZW50ZWQgYXMgYSBzdGF0aWMgbWV0aG9kIHRvIHN1cHBvcnQgbG9hZGluZyBsb2dpYy5cblx0Ki9cblx0c3RhdGljIGxjX25hbWUoKSB7XG5cdFx0cmV0dXJuIHRoaXMubmFtZTtcblx0fVxuXHQvKipcblx0KiBUaGUgZmluYWwgc2VyaWFsaXplZCBpZGVudGlmaWVyIGZvciB0aGUgbW9kdWxlLlxuXHQqL1xuXHRnZXQgbGNfaWQoKSB7XG5cdFx0cmV0dXJuIFsuLi50aGlzLmxjX25hbWVzcGFjZSwgZ2V0X2xjX3VuaXF1ZV9uYW1lKHRoaXMuY29uc3RydWN0b3IpXTtcblx0fVxuXHRsY19rd2FyZ3M7XG5cdGlnbm9yZUxMTSA9IGZhbHNlO1xuXHRpZ25vcmVDaGFpbiA9IGZhbHNlO1xuXHRpZ25vcmVBZ2VudCA9IGZhbHNlO1xuXHRpZ25vcmVSZXRyaWV2ZXIgPSBmYWxzZTtcblx0aWdub3JlQ3VzdG9tRXZlbnQgPSBmYWxzZTtcblx0cmFpc2VFcnJvciA9IGZhbHNlO1xuXHRhd2FpdEhhbmRsZXJzID0gZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9DQUxMQkFDS1NfQkFDS0dST1VORFwiKSA9PT0gXCJmYWxzZVwiO1xuXHRjb25zdHJ1Y3RvcihpbnB1dCkge1xuXHRcdHN1cGVyKCk7XG5cdFx0dGhpcy5sY19rd2FyZ3MgPSBpbnB1dCB8fCB7fTtcblx0XHRpZiAoaW5wdXQpIHtcblx0XHRcdHRoaXMuaWdub3JlTExNID0gaW5wdXQuaWdub3JlTExNID8/IHRoaXMuaWdub3JlTExNO1xuXHRcdFx0dGhpcy5pZ25vcmVDaGFpbiA9IGlucHV0Lmlnbm9yZUNoYWluID8/IHRoaXMuaWdub3JlQ2hhaW47XG5cdFx0XHR0aGlzLmlnbm9yZUFnZW50ID0gaW5wdXQuaWdub3JlQWdlbnQgPz8gdGhpcy5pZ25vcmVBZ2VudDtcblx0XHRcdHRoaXMuaWdub3JlUmV0cmlldmVyID0gaW5wdXQuaWdub3JlUmV0cmlldmVyID8/IHRoaXMuaWdub3JlUmV0cmlldmVyO1xuXHRcdFx0dGhpcy5pZ25vcmVDdXN0b21FdmVudCA9IGlucHV0Lmlnbm9yZUN1c3RvbUV2ZW50ID8/IHRoaXMuaWdub3JlQ3VzdG9tRXZlbnQ7XG5cdFx0XHR0aGlzLnJhaXNlRXJyb3IgPSBpbnB1dC5yYWlzZUVycm9yID8/IHRoaXMucmFpc2VFcnJvcjtcblx0XHRcdHRoaXMuYXdhaXRIYW5kbGVycyA9IHRoaXMucmFpc2VFcnJvciB8fCAoaW5wdXQuX2F3YWl0SGFuZGxlciA/PyB0aGlzLmF3YWl0SGFuZGxlcnMpO1xuXHRcdH1cblx0fVxuXHRjb3B5KCkge1xuXHRcdHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzKTtcblx0fVxuXHR0b0pTT04oKSB7XG5cdFx0cmV0dXJuIFNlcmlhbGl6YWJsZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7XG5cdH1cblx0dG9KU09OTm90SW1wbGVtZW50ZWQoKSB7XG5cdFx0cmV0dXJuIFNlcmlhbGl6YWJsZS5wcm90b3R5cGUudG9KU09OTm90SW1wbGVtZW50ZWQuY2FsbCh0aGlzKTtcblx0fVxuXHRzdGF0aWMgZnJvbU1ldGhvZHMobWV0aG9kcykge1xuXHRcdGNsYXNzIEhhbmRsZXIgZXh0ZW5kcyBCYXNlQ2FsbGJhY2tIYW5kbGVyIHtcblx0XHRcdG5hbWUgPSB1dWlkLnY3KCk7XG5cdFx0XHRjb25zdHJ1Y3RvcigpIHtcblx0XHRcdFx0c3VwZXIoKTtcblx0XHRcdFx0T2JqZWN0LmFzc2lnbih0aGlzLCBtZXRob2RzKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIG5ldyBIYW5kbGVyKCk7XG5cdH1cbn07XG5jb25zdCBpc0Jhc2VDYWxsYmFja0hhbmRsZXIgPSAoeCkgPT4ge1xuXHRjb25zdCBjYWxsYmFja0hhbmRsZXIgPSB4O1xuXHRyZXR1cm4gY2FsbGJhY2tIYW5kbGVyICE9PSB2b2lkIDAgJiYgdHlwZW9mIGNhbGxiYWNrSGFuZGxlci5jb3B5ID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIGNhbGxiYWNrSGFuZGxlci5uYW1lID09PSBcInN0cmluZ1wiICYmIHR5cGVvZiBjYWxsYmFja0hhbmRsZXIuYXdhaXRIYW5kbGVycyA9PT0gXCJib29sZWFuXCI7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEJhc2VDYWxsYmFja0hhbmRsZXIsIGJhc2VfZXhwb3J0cywgY2FsbGJhY2tIYW5kbGVyUHJlZmVyc1N0cmVhbWluZywgaXNCYXNlQ2FsbGJhY2tIYW5kbGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iYXNlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/callbacks/base.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/callbacks/manager.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/callbacks/manager.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCallbackManager: () => (/* binding */ BaseCallbackManager),\n/* harmony export */   BaseRunManager: () => (/* binding */ BaseRunManager),\n/* harmony export */   CallbackManager: () => (/* binding */ CallbackManager),\n/* harmony export */   CallbackManagerForChainRun: () => (/* binding */ CallbackManagerForChainRun),\n/* harmony export */   CallbackManagerForLLMRun: () => (/* binding */ CallbackManagerForLLMRun),\n/* harmony export */   CallbackManagerForRetrieverRun: () => (/* binding */ CallbackManagerForRetrieverRun),\n/* harmony export */   CallbackManagerForToolRun: () => (/* binding */ CallbackManagerForToolRun),\n/* harmony export */   ensureHandler: () => (/* binding */ ensureHandler),\n/* harmony export */   manager_exports: () => (/* binding */ manager_exports),\n/* harmony export */   parseCallbackConfigArg: () => (/* binding */ parseCallbackConfigArg)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _messages_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../messages/utils.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/utils.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/env.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/callbacks/base.js\");\n/* harmony import */ var _tracers_base_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../tracers/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/tracers/base.js\");\n/* harmony import */ var _tracers_console_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../tracers/console.js */ \"(ssr)/./node_modules/@langchain/core/dist/tracers/console.js\");\n/* harmony import */ var _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../tracers/tracer_langchain.js */ \"(ssr)/./node_modules/@langchain/core/dist/tracers/tracer_langchain.js\");\n/* harmony import */ var _singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../singletons/callbacks.js */ \"(ssr)/./node_modules/@langchain/core/dist/singletons/callbacks.js\");\n/* harmony import */ var _promises_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./promises.js */ \"(ssr)/./node_modules/@langchain/core/dist/callbacks/promises.js\");\n/* harmony import */ var _utils_callbacks_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils/callbacks.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/callbacks.js\");\n/* harmony import */ var _singletons_async_local_storage_context_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../singletons/async_local_storage/context.js */ \"(ssr)/./node_modules/@langchain/core/dist/singletons/async_local_storage/context.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! uuid */ \"(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/v7.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/callbacks/manager.ts\nvar manager_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(manager_exports, {\n\tBaseCallbackManager: () => BaseCallbackManager,\n\tBaseRunManager: () => BaseRunManager,\n\tCallbackManager: () => CallbackManager,\n\tCallbackManagerForChainRun: () => CallbackManagerForChainRun,\n\tCallbackManagerForLLMRun: () => CallbackManagerForLLMRun,\n\tCallbackManagerForRetrieverRun: () => CallbackManagerForRetrieverRun,\n\tCallbackManagerForToolRun: () => CallbackManagerForToolRun,\n\tensureHandler: () => ensureHandler,\n\tparseCallbackConfigArg: () => parseCallbackConfigArg\n});\nfunction parseCallbackConfigArg(arg) {\n\tif (!arg) return {};\n\telse if (Array.isArray(arg) || \"name\" in arg) return { callbacks: arg };\n\telse return arg;\n}\n/**\n* Manage callbacks from different components of LangChain.\n*/\nvar BaseCallbackManager = class {\n\tsetHandler(handler) {\n\t\treturn this.setHandlers([handler]);\n\t}\n};\n/**\n* Base class for run manager in LangChain.\n*/\nvar BaseRunManager = class {\n\tconstructor(runId, handlers, inheritableHandlers, tags, inheritableTags, metadata, inheritableMetadata, _parentRunId) {\n\t\tthis.runId = runId;\n\t\tthis.handlers = handlers;\n\t\tthis.inheritableHandlers = inheritableHandlers;\n\t\tthis.tags = tags;\n\t\tthis.inheritableTags = inheritableTags;\n\t\tthis.metadata = metadata;\n\t\tthis.inheritableMetadata = inheritableMetadata;\n\t\tthis._parentRunId = _parentRunId;\n\t}\n\tget parentRunId() {\n\t\treturn this._parentRunId;\n\t}\n\tasync handleText(text) {\n\t\tawait Promise.all(this.handlers.map((handler) => (0,_singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_7__.consumeCallback)(async () => {\n\t\t\ttry {\n\t\t\t\tawait handler.handleText?.(text, this.runId, this._parentRunId, this.tags);\n\t\t\t} catch (err) {\n\t\t\t\tconst logFunction = handler.raiseError ? console.error : console.warn;\n\t\t\t\tlogFunction(`Error in handler ${handler.constructor.name}, handleText: ${err}`);\n\t\t\t\tif (handler.raiseError) throw err;\n\t\t\t}\n\t\t}, handler.awaitHandlers)));\n\t}\n\tasync handleCustomEvent(eventName, data, _runId, _tags, _metadata) {\n\t\tawait Promise.all(this.handlers.map((handler) => (0,_singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_7__.consumeCallback)(async () => {\n\t\t\ttry {\n\t\t\t\tawait handler.handleCustomEvent?.(eventName, data, this.runId, this.tags, this.metadata);\n\t\t\t} catch (err) {\n\t\t\t\tconst logFunction = handler.raiseError ? console.error : console.warn;\n\t\t\t\tlogFunction(`Error in handler ${handler.constructor.name}, handleCustomEvent: ${err}`);\n\t\t\t\tif (handler.raiseError) throw err;\n\t\t\t}\n\t\t}, handler.awaitHandlers)));\n\t}\n};\n/**\n* Manages callbacks for retriever runs.\n*/\nvar CallbackManagerForRetrieverRun = class extends BaseRunManager {\n\tgetChild(tag) {\n\t\tconst manager = new CallbackManager(this.runId);\n\t\tmanager.setHandlers(this.inheritableHandlers);\n\t\tmanager.addTags(this.inheritableTags);\n\t\tmanager.addMetadata(this.inheritableMetadata);\n\t\tif (tag) manager.addTags([tag], false);\n\t\treturn manager;\n\t}\n\tasync handleRetrieverEnd(documents) {\n\t\tawait Promise.all(this.handlers.map((handler) => (0,_singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_7__.consumeCallback)(async () => {\n\t\t\tif (!handler.ignoreRetriever) try {\n\t\t\t\tawait handler.handleRetrieverEnd?.(documents, this.runId, this._parentRunId, this.tags);\n\t\t\t} catch (err) {\n\t\t\t\tconst logFunction = handler.raiseError ? console.error : console.warn;\n\t\t\t\tlogFunction(`Error in handler ${handler.constructor.name}, handleRetriever`);\n\t\t\t\tif (handler.raiseError) throw err;\n\t\t\t}\n\t\t}, handler.awaitHandlers)));\n\t}\n\tasync handleRetrieverError(err) {\n\t\tawait Promise.all(this.handlers.map((handler) => (0,_singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_7__.consumeCallback)(async () => {\n\t\t\tif (!handler.ignoreRetriever) try {\n\t\t\t\tawait handler.handleRetrieverError?.(err, this.runId, this._parentRunId, this.tags);\n\t\t\t} catch (error) {\n\t\t\t\tconst logFunction = handler.raiseError ? console.error : console.warn;\n\t\t\t\tlogFunction(`Error in handler ${handler.constructor.name}, handleRetrieverError: ${error}`);\n\t\t\t\tif (handler.raiseError) throw err;\n\t\t\t}\n\t\t}, handler.awaitHandlers)));\n\t}\n};\nvar CallbackManagerForLLMRun = class extends BaseRunManager {\n\tasync handleLLMNewToken(token, idx, _runId, _parentRunId, _tags, fields) {\n\t\tawait Promise.all(this.handlers.map((handler) => (0,_singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_7__.consumeCallback)(async () => {\n\t\t\tif (!handler.ignoreLLM) try {\n\t\t\t\tawait handler.handleLLMNewToken?.(token, idx ?? {\n\t\t\t\t\tprompt: 0,\n\t\t\t\t\tcompletion: 0\n\t\t\t\t}, this.runId, this._parentRunId, this.tags, fields);\n\t\t\t} catch (err) {\n\t\t\t\tconst logFunction = handler.raiseError ? console.error : console.warn;\n\t\t\t\tlogFunction(`Error in handler ${handler.constructor.name}, handleLLMNewToken: ${err}`);\n\t\t\t\tif (handler.raiseError) throw err;\n\t\t\t}\n\t\t}, handler.awaitHandlers)));\n\t}\n\tasync handleLLMError(err, _runId, _parentRunId, _tags, extraParams) {\n\t\tawait Promise.all(this.handlers.map((handler) => (0,_singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_7__.consumeCallback)(async () => {\n\t\t\tif (!handler.ignoreLLM) try {\n\t\t\t\tawait handler.handleLLMError?.(err, this.runId, this._parentRunId, this.tags, extraParams);\n\t\t\t} catch (err$1) {\n\t\t\t\tconst logFunction = handler.raiseError ? console.error : console.warn;\n\t\t\t\tlogFunction(`Error in handler ${handler.constructor.name}, handleLLMError: ${err$1}`);\n\t\t\t\tif (handler.raiseError) throw err$1;\n\t\t\t}\n\t\t}, handler.awaitHandlers)));\n\t}\n\tasync handleLLMEnd(output, _runId, _parentRunId, _tags, extraParams) {\n\t\tawait Promise.all(this.handlers.map((handler) => (0,_singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_7__.consumeCallback)(async () => {\n\t\t\tif (!handler.ignoreLLM) try {\n\t\t\t\tawait handler.handleLLMEnd?.(output, this.runId, this._parentRunId, this.tags, extraParams);\n\t\t\t} catch (err) {\n\t\t\t\tconst logFunction = handler.raiseError ? console.error : console.warn;\n\t\t\t\tlogFunction(`Error in handler ${handler.constructor.name}, handleLLMEnd: ${err}`);\n\t\t\t\tif (handler.raiseError) throw err;\n\t\t\t}\n\t\t}, handler.awaitHandlers)));\n\t}\n};\nvar CallbackManagerForChainRun = class extends BaseRunManager {\n\tgetChild(tag) {\n\t\tconst manager = new CallbackManager(this.runId);\n\t\tmanager.setHandlers(this.inheritableHandlers);\n\t\tmanager.addTags(this.inheritableTags);\n\t\tmanager.addMetadata(this.inheritableMetadata);\n\t\tif (tag) manager.addTags([tag], false);\n\t\treturn manager;\n\t}\n\tasync handleChainError(err, _runId, _parentRunId, _tags, kwargs) {\n\t\tawait Promise.all(this.handlers.map((handler) => (0,_singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_7__.consumeCallback)(async () => {\n\t\t\tif (!handler.ignoreChain) try {\n\t\t\t\tawait handler.handleChainError?.(err, this.runId, this._parentRunId, this.tags, kwargs);\n\t\t\t} catch (err$1) {\n\t\t\t\tconst logFunction = handler.raiseError ? console.error : console.warn;\n\t\t\t\tlogFunction(`Error in handler ${handler.constructor.name}, handleChainError: ${err$1}`);\n\t\t\t\tif (handler.raiseError) throw err$1;\n\t\t\t}\n\t\t}, handler.awaitHandlers)));\n\t}\n\tasync handleChainEnd(output, _runId, _parentRunId, _tags, kwargs) {\n\t\tawait Promise.all(this.handlers.map((handler) => (0,_singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_7__.consumeCallback)(async () => {\n\t\t\tif (!handler.ignoreChain) try {\n\t\t\t\tawait handler.handleChainEnd?.(output, this.runId, this._parentRunId, this.tags, kwargs);\n\t\t\t} catch (err) {\n\t\t\t\tconst logFunction = handler.raiseError ? console.error : console.warn;\n\t\t\t\tlogFunction(`Error in handler ${handler.constructor.name}, handleChainEnd: ${err}`);\n\t\t\t\tif (handler.raiseError) throw err;\n\t\t\t}\n\t\t}, handler.awaitHandlers)));\n\t}\n\tasync handleAgentAction(action) {\n\t\tawait Promise.all(this.handlers.map((handler) => (0,_singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_7__.consumeCallback)(async () => {\n\t\t\tif (!handler.ignoreAgent) try {\n\t\t\t\tawait handler.handleAgentAction?.(action, this.runId, this._parentRunId, this.tags);\n\t\t\t} catch (err) {\n\t\t\t\tconst logFunction = handler.raiseError ? console.error : console.warn;\n\t\t\t\tlogFunction(`Error in handler ${handler.constructor.name}, handleAgentAction: ${err}`);\n\t\t\t\tif (handler.raiseError) throw err;\n\t\t\t}\n\t\t}, handler.awaitHandlers)));\n\t}\n\tasync handleAgentEnd(action) {\n\t\tawait Promise.all(this.handlers.map((handler) => (0,_singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_7__.consumeCallback)(async () => {\n\t\t\tif (!handler.ignoreAgent) try {\n\t\t\t\tawait handler.handleAgentEnd?.(action, this.runId, this._parentRunId, this.tags);\n\t\t\t} catch (err) {\n\t\t\t\tconst logFunction = handler.raiseError ? console.error : console.warn;\n\t\t\t\tlogFunction(`Error in handler ${handler.constructor.name}, handleAgentEnd: ${err}`);\n\t\t\t\tif (handler.raiseError) throw err;\n\t\t\t}\n\t\t}, handler.awaitHandlers)));\n\t}\n};\nvar CallbackManagerForToolRun = class extends BaseRunManager {\n\tgetChild(tag) {\n\t\tconst manager = new CallbackManager(this.runId);\n\t\tmanager.setHandlers(this.inheritableHandlers);\n\t\tmanager.addTags(this.inheritableTags);\n\t\tmanager.addMetadata(this.inheritableMetadata);\n\t\tif (tag) manager.addTags([tag], false);\n\t\treturn manager;\n\t}\n\tasync handleToolError(err) {\n\t\tawait Promise.all(this.handlers.map((handler) => (0,_singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_7__.consumeCallback)(async () => {\n\t\t\tif (!handler.ignoreAgent) try {\n\t\t\t\tawait handler.handleToolError?.(err, this.runId, this._parentRunId, this.tags);\n\t\t\t} catch (err$1) {\n\t\t\t\tconst logFunction = handler.raiseError ? console.error : console.warn;\n\t\t\t\tlogFunction(`Error in handler ${handler.constructor.name}, handleToolError: ${err$1}`);\n\t\t\t\tif (handler.raiseError) throw err$1;\n\t\t\t}\n\t\t}, handler.awaitHandlers)));\n\t}\n\tasync handleToolEnd(output) {\n\t\tawait Promise.all(this.handlers.map((handler) => (0,_singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_7__.consumeCallback)(async () => {\n\t\t\tif (!handler.ignoreAgent) try {\n\t\t\t\tawait handler.handleToolEnd?.(output, this.runId, this._parentRunId, this.tags);\n\t\t\t} catch (err) {\n\t\t\t\tconst logFunction = handler.raiseError ? console.error : console.warn;\n\t\t\t\tlogFunction(`Error in handler ${handler.constructor.name}, handleToolEnd: ${err}`);\n\t\t\t\tif (handler.raiseError) throw err;\n\t\t\t}\n\t\t}, handler.awaitHandlers)));\n\t}\n};\n/**\n* @example\n* ```typescript\n* const prompt = PromptTemplate.fromTemplate(\"What is the answer to {question}?\");\n*\n* // Example of using LLMChain with OpenAI and a simple prompt\n* const chain = new LLMChain({\n*   llm: new ChatOpenAI({ model: \"gpt-4o-mini\", temperature: 0.9 }),\n*   prompt,\n* });\n*\n* // Running the chain with a single question\n* const result = await chain.call({\n*   question: \"What is the airspeed velocity of an unladen swallow?\",\n* });\n* console.log(\"The answer is:\", result);\n* ```\n*/\nvar CallbackManager = class CallbackManager extends BaseCallbackManager {\n\thandlers = [];\n\tinheritableHandlers = [];\n\ttags = [];\n\tinheritableTags = [];\n\tmetadata = {};\n\tinheritableMetadata = {};\n\tname = \"callback_manager\";\n\t_parentRunId;\n\tconstructor(parentRunId, options) {\n\t\tsuper();\n\t\tthis.handlers = options?.handlers ?? this.handlers;\n\t\tthis.inheritableHandlers = options?.inheritableHandlers ?? this.inheritableHandlers;\n\t\tthis.tags = options?.tags ?? this.tags;\n\t\tthis.inheritableTags = options?.inheritableTags ?? this.inheritableTags;\n\t\tthis.metadata = options?.metadata ?? this.metadata;\n\t\tthis.inheritableMetadata = options?.inheritableMetadata ?? this.inheritableMetadata;\n\t\tthis._parentRunId = parentRunId;\n\t}\n\t/**\n\t* Gets the parent run ID, if any.\n\t*\n\t* @returns The parent run ID.\n\t*/\n\tgetParentRunId() {\n\t\treturn this._parentRunId;\n\t}\n\tasync handleLLMStart(llm, prompts, runId = void 0, _parentRunId = void 0, extraParams = void 0, _tags = void 0, _metadata = void 0, runName = void 0) {\n\t\treturn Promise.all(prompts.map(async (prompt, idx) => {\n\t\t\tconst runId_ = idx === 0 && runId ? runId : (0,uuid__WEBPACK_IMPORTED_MODULE_11__[\"default\"])();\n\t\t\tawait Promise.all(this.handlers.map((handler) => {\n\t\t\t\tif (handler.ignoreLLM) return;\n\t\t\t\tif ((0,_tracers_base_js__WEBPACK_IMPORTED_MODULE_4__.isBaseTracer)(handler)) handler._createRunForLLMStart(llm, [prompt], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n\t\t\t\treturn (0,_singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_7__.consumeCallback)(async () => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait handler.handleLLMStart?.(llm, [prompt], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tconst logFunction = handler.raiseError ? console.error : console.warn;\n\t\t\t\t\t\tlogFunction(`Error in handler ${handler.constructor.name}, handleLLMStart: ${err}`);\n\t\t\t\t\t\tif (handler.raiseError) throw err;\n\t\t\t\t\t}\n\t\t\t\t}, handler.awaitHandlers);\n\t\t\t}));\n\t\t\treturn new CallbackManagerForLLMRun(runId_, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n\t\t}));\n\t}\n\tasync handleChatModelStart(llm, messages, runId = void 0, _parentRunId = void 0, extraParams = void 0, _tags = void 0, _metadata = void 0, runName = void 0) {\n\t\treturn Promise.all(messages.map(async (messageGroup, idx) => {\n\t\t\tconst runId_ = idx === 0 && runId ? runId : (0,uuid__WEBPACK_IMPORTED_MODULE_11__[\"default\"])();\n\t\t\tawait Promise.all(this.handlers.map((handler) => {\n\t\t\t\tif (handler.ignoreLLM) return;\n\t\t\t\tif ((0,_tracers_base_js__WEBPACK_IMPORTED_MODULE_4__.isBaseTracer)(handler)) handler._createRunForChatModelStart(llm, [messageGroup], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n\t\t\t\treturn (0,_singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_7__.consumeCallback)(async () => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (handler.handleChatModelStart) await handler.handleChatModelStart?.(llm, [messageGroup], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n\t\t\t\t\t\telse if (handler.handleLLMStart) {\n\t\t\t\t\t\t\tconst messageString = (0,_messages_utils_js__WEBPACK_IMPORTED_MODULE_1__.getBufferString)(messageGroup);\n\t\t\t\t\t\t\tawait handler.handleLLMStart?.(llm, [messageString], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tconst logFunction = handler.raiseError ? console.error : console.warn;\n\t\t\t\t\t\tlogFunction(`Error in handler ${handler.constructor.name}, handleLLMStart: ${err}`);\n\t\t\t\t\t\tif (handler.raiseError) throw err;\n\t\t\t\t\t}\n\t\t\t\t}, handler.awaitHandlers);\n\t\t\t}));\n\t\t\treturn new CallbackManagerForLLMRun(runId_, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n\t\t}));\n\t}\n\tasync handleChainStart(chain, inputs, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(), runType = void 0, _tags = void 0, _metadata = void 0, runName = void 0, _parentRunId = void 0, extra = void 0) {\n\t\tawait Promise.all(this.handlers.map((handler) => {\n\t\t\tif (handler.ignoreChain) return;\n\t\t\tif ((0,_tracers_base_js__WEBPACK_IMPORTED_MODULE_4__.isBaseTracer)(handler)) handler._createRunForChainStart(chain, inputs, runId, this._parentRunId, this.tags, this.metadata, runType, runName, extra);\n\t\t\treturn (0,_singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_7__.consumeCallback)(async () => {\n\t\t\t\ttry {\n\t\t\t\t\tawait handler.handleChainStart?.(chain, inputs, runId, this._parentRunId, this.tags, this.metadata, runType, runName, extra);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tconst logFunction = handler.raiseError ? console.error : console.warn;\n\t\t\t\t\tlogFunction(`Error in handler ${handler.constructor.name}, handleChainStart: ${err}`);\n\t\t\t\t\tif (handler.raiseError) throw err;\n\t\t\t\t}\n\t\t\t}, handler.awaitHandlers);\n\t\t}));\n\t\treturn new CallbackManagerForChainRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n\t}\n\tasync handleToolStart(tool, input, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(), _parentRunId = void 0, _tags = void 0, _metadata = void 0, runName = void 0) {\n\t\tawait Promise.all(this.handlers.map((handler) => {\n\t\t\tif (handler.ignoreAgent) return;\n\t\t\tif ((0,_tracers_base_js__WEBPACK_IMPORTED_MODULE_4__.isBaseTracer)(handler)) handler._createRunForToolStart(tool, input, runId, this._parentRunId, this.tags, this.metadata, runName);\n\t\t\treturn (0,_singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_7__.consumeCallback)(async () => {\n\t\t\t\ttry {\n\t\t\t\t\tawait handler.handleToolStart?.(tool, input, runId, this._parentRunId, this.tags, this.metadata, runName);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tconst logFunction = handler.raiseError ? console.error : console.warn;\n\t\t\t\t\tlogFunction(`Error in handler ${handler.constructor.name}, handleToolStart: ${err}`);\n\t\t\t\t\tif (handler.raiseError) throw err;\n\t\t\t\t}\n\t\t\t}, handler.awaitHandlers);\n\t\t}));\n\t\treturn new CallbackManagerForToolRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n\t}\n\tasync handleRetrieverStart(retriever, query, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(), _parentRunId = void 0, _tags = void 0, _metadata = void 0, runName = void 0) {\n\t\tawait Promise.all(this.handlers.map((handler) => {\n\t\t\tif (handler.ignoreRetriever) return;\n\t\t\tif ((0,_tracers_base_js__WEBPACK_IMPORTED_MODULE_4__.isBaseTracer)(handler)) handler._createRunForRetrieverStart(retriever, query, runId, this._parentRunId, this.tags, this.metadata, runName);\n\t\t\treturn (0,_singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_7__.consumeCallback)(async () => {\n\t\t\t\ttry {\n\t\t\t\t\tawait handler.handleRetrieverStart?.(retriever, query, runId, this._parentRunId, this.tags, this.metadata, runName);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tconst logFunction = handler.raiseError ? console.error : console.warn;\n\t\t\t\t\tlogFunction(`Error in handler ${handler.constructor.name}, handleRetrieverStart: ${err}`);\n\t\t\t\t\tif (handler.raiseError) throw err;\n\t\t\t\t}\n\t\t\t}, handler.awaitHandlers);\n\t\t}));\n\t\treturn new CallbackManagerForRetrieverRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n\t}\n\tasync handleCustomEvent(eventName, data, runId, _tags, _metadata) {\n\t\tawait Promise.all(this.handlers.map((handler) => (0,_singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_7__.consumeCallback)(async () => {\n\t\t\tif (!handler.ignoreCustomEvent) try {\n\t\t\t\tawait handler.handleCustomEvent?.(eventName, data, runId, this.tags, this.metadata);\n\t\t\t} catch (err) {\n\t\t\t\tconst logFunction = handler.raiseError ? console.error : console.warn;\n\t\t\t\tlogFunction(`Error in handler ${handler.constructor.name}, handleCustomEvent: ${err}`);\n\t\t\t\tif (handler.raiseError) throw err;\n\t\t\t}\n\t\t}, handler.awaitHandlers)));\n\t}\n\taddHandler(handler, inherit = true) {\n\t\tthis.handlers.push(handler);\n\t\tif (inherit) this.inheritableHandlers.push(handler);\n\t}\n\tremoveHandler(handler) {\n\t\tthis.handlers = this.handlers.filter((_handler) => _handler !== handler);\n\t\tthis.inheritableHandlers = this.inheritableHandlers.filter((_handler) => _handler !== handler);\n\t}\n\tsetHandlers(handlers, inherit = true) {\n\t\tthis.handlers = [];\n\t\tthis.inheritableHandlers = [];\n\t\tfor (const handler of handlers) this.addHandler(handler, inherit);\n\t}\n\taddTags(tags, inherit = true) {\n\t\tthis.removeTags(tags);\n\t\tthis.tags.push(...tags);\n\t\tif (inherit) this.inheritableTags.push(...tags);\n\t}\n\tremoveTags(tags) {\n\t\tthis.tags = this.tags.filter((tag) => !tags.includes(tag));\n\t\tthis.inheritableTags = this.inheritableTags.filter((tag) => !tags.includes(tag));\n\t}\n\taddMetadata(metadata, inherit = true) {\n\t\tthis.metadata = {\n\t\t\t...this.metadata,\n\t\t\t...metadata\n\t\t};\n\t\tif (inherit) this.inheritableMetadata = {\n\t\t\t...this.inheritableMetadata,\n\t\t\t...metadata\n\t\t};\n\t}\n\tremoveMetadata(metadata) {\n\t\tfor (const key of Object.keys(metadata)) {\n\t\t\tdelete this.metadata[key];\n\t\t\tdelete this.inheritableMetadata[key];\n\t\t}\n\t}\n\tcopy(additionalHandlers = [], inherit = true) {\n\t\tconst manager = new CallbackManager(this._parentRunId);\n\t\tfor (const handler of this.handlers) {\n\t\t\tconst inheritable = this.inheritableHandlers.includes(handler);\n\t\t\tmanager.addHandler(handler, inheritable);\n\t\t}\n\t\tfor (const tag of this.tags) {\n\t\t\tconst inheritable = this.inheritableTags.includes(tag);\n\t\t\tmanager.addTags([tag], inheritable);\n\t\t}\n\t\tfor (const key of Object.keys(this.metadata)) {\n\t\t\tconst inheritable = Object.keys(this.inheritableMetadata).includes(key);\n\t\t\tmanager.addMetadata({ [key]: this.metadata[key] }, inheritable);\n\t\t}\n\t\tfor (const handler of additionalHandlers) {\n\t\t\tif (manager.handlers.filter((h) => h.name === \"console_callback_handler\").some((h) => h.name === handler.name)) continue;\n\t\t\tmanager.addHandler(handler, inherit);\n\t\t}\n\t\treturn manager;\n\t}\n\tstatic fromHandlers(handlers) {\n\t\tclass Handler extends _base_js__WEBPACK_IMPORTED_MODULE_3__.BaseCallbackHandler {\n\t\t\tname = (0,uuid__WEBPACK_IMPORTED_MODULE_11__[\"default\"])();\n\t\t\tconstructor() {\n\t\t\t\tsuper();\n\t\t\t\tObject.assign(this, handlers);\n\t\t\t}\n\t\t}\n\t\tconst manager = new this();\n\t\tmanager.addHandler(new Handler());\n\t\treturn manager;\n\t}\n\tstatic configure(inheritableHandlers, localHandlers, inheritableTags, localTags, inheritableMetadata, localMetadata, options) {\n\t\treturn this._configureSync(inheritableHandlers, localHandlers, inheritableTags, localTags, inheritableMetadata, localMetadata, options);\n\t}\n\tstatic _configureSync(inheritableHandlers, localHandlers, inheritableTags, localTags, inheritableMetadata, localMetadata, options) {\n\t\tlet callbackManager;\n\t\tif (inheritableHandlers || localHandlers) {\n\t\t\tif (Array.isArray(inheritableHandlers) || !inheritableHandlers) {\n\t\t\t\tcallbackManager = new CallbackManager();\n\t\t\t\tcallbackManager.setHandlers(inheritableHandlers?.map(ensureHandler) ?? [], true);\n\t\t\t} else callbackManager = inheritableHandlers;\n\t\t\tcallbackManager = callbackManager.copy(Array.isArray(localHandlers) ? localHandlers.map(ensureHandler) : localHandlers?.handlers, false);\n\t\t}\n\t\tconst verboseEnabled = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_2__.getEnvironmentVariable)(\"LANGCHAIN_VERBOSE\") === \"true\" || options?.verbose;\n\t\tconst tracingV2Enabled = _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_6__.LangChainTracer.getTraceableRunTree()?.tracingEnabled || (0,_utils_callbacks_js__WEBPACK_IMPORTED_MODULE_9__.isTracingEnabled)();\n\t\tconst tracingEnabled = tracingV2Enabled || ((0,_utils_env_js__WEBPACK_IMPORTED_MODULE_2__.getEnvironmentVariable)(\"LANGCHAIN_TRACING\") ?? false);\n\t\tif (verboseEnabled || tracingEnabled) {\n\t\t\tif (!callbackManager) callbackManager = new CallbackManager();\n\t\t\tif (verboseEnabled && !callbackManager.handlers.some((handler) => handler.name === _tracers_console_js__WEBPACK_IMPORTED_MODULE_5__.ConsoleCallbackHandler.prototype.name)) {\n\t\t\t\tconst consoleHandler = new _tracers_console_js__WEBPACK_IMPORTED_MODULE_5__.ConsoleCallbackHandler();\n\t\t\t\tcallbackManager.addHandler(consoleHandler, true);\n\t\t\t}\n\t\t\tif (tracingEnabled && !callbackManager.handlers.some((handler) => handler.name === \"langchain_tracer\")) {\n\t\t\t\tif (tracingV2Enabled) {\n\t\t\t\t\tconst tracerV2 = new _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_6__.LangChainTracer();\n\t\t\t\t\tcallbackManager.addHandler(tracerV2, true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (tracingV2Enabled) {\n\t\t\t\tconst implicitRunTree = _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_6__.LangChainTracer.getTraceableRunTree();\n\t\t\t\tif (implicitRunTree && callbackManager._parentRunId === void 0) {\n\t\t\t\t\tcallbackManager._parentRunId = implicitRunTree.id;\n\t\t\t\t\tconst tracerV2 = callbackManager.handlers.find((handler) => handler.name === \"langchain_tracer\");\n\t\t\t\t\ttracerV2?.updateFromRunTree(implicitRunTree);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor (const { contextVar, inheritable = true, handlerClass, envVar } of (0,_singletons_async_local_storage_context_js__WEBPACK_IMPORTED_MODULE_10__._getConfigureHooks)()) {\n\t\t\tconst createIfNotInContext = envVar && (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_2__.getEnvironmentVariable)(envVar) === \"true\" && handlerClass;\n\t\t\tlet handler;\n\t\t\tconst contextVarValue = contextVar !== void 0 ? (0,_singletons_async_local_storage_context_js__WEBPACK_IMPORTED_MODULE_10__.getContextVariable)(contextVar) : void 0;\n\t\t\tif (contextVarValue && (0,_base_js__WEBPACK_IMPORTED_MODULE_3__.isBaseCallbackHandler)(contextVarValue)) handler = contextVarValue;\n\t\t\telse if (createIfNotInContext) handler = new handlerClass({});\n\t\t\tif (handler !== void 0) {\n\t\t\t\tif (!callbackManager) callbackManager = new CallbackManager();\n\t\t\t\tif (!callbackManager.handlers.some((h) => h.name === handler.name)) callbackManager.addHandler(handler, inheritable);\n\t\t\t}\n\t\t}\n\t\tif (inheritableTags || localTags) {\n\t\t\tif (callbackManager) {\n\t\t\t\tcallbackManager.addTags(inheritableTags ?? []);\n\t\t\t\tcallbackManager.addTags(localTags ?? [], false);\n\t\t\t}\n\t\t}\n\t\tif (inheritableMetadata || localMetadata) {\n\t\t\tif (callbackManager) {\n\t\t\t\tcallbackManager.addMetadata(inheritableMetadata ?? {});\n\t\t\t\tcallbackManager.addMetadata(localMetadata ?? {}, false);\n\t\t\t}\n\t\t}\n\t\treturn callbackManager;\n\t}\n};\nfunction ensureHandler(handler) {\n\tif (\"name\" in handler) return handler;\n\treturn _base_js__WEBPACK_IMPORTED_MODULE_3__.BaseCallbackHandler.fromMethods(handler);\n}\n\n//#endregion\n\n//# sourceMappingURL=manager.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FsbGJhY2tzL21hbmFnZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEyRDtBQUNKO0FBQ0U7QUFDYztBQUNyQjtBQUNhO0FBQ0U7QUFDSjtBQUN0QztBQUNrQztBQUM2QztBQUM1RTs7QUFFMUI7QUFDQTtBQUNBLHNFQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSx3REFBd0Q7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQseUVBQWU7QUFDbEU7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLG9DQUFvQyx5QkFBeUIsZ0JBQWdCLElBQUk7QUFDakY7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsbURBQW1ELHlFQUFlO0FBQ2xFO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxvQ0FBb0MseUJBQXlCLHVCQUF1QixJQUFJO0FBQ3hGO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELHlFQUFlO0FBQ2xFO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxvQ0FBb0MseUJBQXlCO0FBQzdEO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLG1EQUFtRCx5RUFBZTtBQUNsRTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0Esb0NBQW9DLHlCQUF5QiwwQkFBMEIsTUFBTTtBQUM3RjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELHlFQUFlO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEtBQUs7QUFDTDtBQUNBLG9DQUFvQyx5QkFBeUIsdUJBQXVCLElBQUk7QUFDeEY7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsbURBQW1ELHlFQUFlO0FBQ2xFO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxvQ0FBb0MseUJBQXlCLG9CQUFvQixNQUFNO0FBQ3ZGO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLG1EQUFtRCx5RUFBZTtBQUNsRTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0Esb0NBQW9DLHlCQUF5QixrQkFBa0IsSUFBSTtBQUNuRjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCx5RUFBZTtBQUNsRTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0Esb0NBQW9DLHlCQUF5QixzQkFBc0IsTUFBTTtBQUN6RjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxtREFBbUQseUVBQWU7QUFDbEU7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLG9DQUFvQyx5QkFBeUIsb0JBQW9CLElBQUk7QUFDckY7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsbURBQW1ELHlFQUFlO0FBQ2xFO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxvQ0FBb0MseUJBQXlCLHVCQUF1QixJQUFJO0FBQ3hGO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLG1EQUFtRCx5RUFBZTtBQUNsRTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0Esb0NBQW9DLHlCQUF5QixvQkFBb0IsSUFBSTtBQUNyRjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCx5RUFBZTtBQUNsRTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0Esb0NBQW9DLHlCQUF5QixxQkFBcUIsTUFBTTtBQUN4RjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxtREFBbUQseUVBQWU7QUFDbEU7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLG9DQUFvQyx5QkFBeUIsbUJBQW1CLElBQUk7QUFDcEY7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFLFNBQVM7QUFDOUU7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHdDQUF3QztBQUNsRTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLGlEQUFFO0FBQ2pEO0FBQ0E7QUFDQSxRQUFRLDhEQUFZO0FBQ3BCLFdBQVcseUVBQWU7QUFDMUI7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLHNDQUFzQyx5QkFBeUIsb0JBQW9CLElBQUk7QUFDdkY7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLGlEQUFFO0FBQ2pEO0FBQ0E7QUFDQSxRQUFRLDhEQUFZO0FBQ3BCLFdBQVcseUVBQWU7QUFDMUI7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG1FQUFlO0FBQzVDO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxzQ0FBc0MseUJBQXlCLG9CQUFvQixJQUFJO0FBQ3ZGO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0EsR0FBRztBQUNIO0FBQ0EsK0NBQStDLGlEQUFFO0FBQ2pEO0FBQ0E7QUFDQSxPQUFPLDhEQUFZO0FBQ25CLFVBQVUseUVBQWU7QUFDekI7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLHFDQUFxQyx5QkFBeUIsc0JBQXNCLElBQUk7QUFDeEY7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBLDRDQUE0QyxpREFBRTtBQUM5QztBQUNBO0FBQ0EsT0FBTyw4REFBWTtBQUNuQixVQUFVLHlFQUFlO0FBQ3pCO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxxQ0FBcUMseUJBQXlCLHFCQUFxQixJQUFJO0FBQ3ZGO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQSxzREFBc0QsaURBQUU7QUFDeEQ7QUFDQTtBQUNBLE9BQU8sOERBQVk7QUFDbkIsVUFBVSx5RUFBZTtBQUN6QjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EscUNBQXFDLHlCQUF5QiwwQkFBMEIsSUFBSTtBQUM1RjtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxtREFBbUQseUVBQWU7QUFDbEU7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLG9DQUFvQyx5QkFBeUIsdUJBQXVCLElBQUk7QUFDeEY7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsMkJBQTJCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseURBQW1CO0FBQzNDLFVBQVUsaURBQUU7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLHlCQUF5QixxRUFBc0I7QUFDL0MsMkJBQTJCLHlFQUFlLDBDQUEwQyxxRUFBZ0I7QUFDcEcsOENBQThDLHFFQUFzQjtBQUNwRTtBQUNBO0FBQ0Esc0ZBQXNGLHVFQUFzQjtBQUM1RywrQkFBK0IsdUVBQXNCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHlFQUFlO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHlFQUFlO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx1REFBdUQsR0FBRywrRkFBa0I7QUFDM0YsMENBQTBDLHFFQUFzQjtBQUNoRTtBQUNBLG1EQUFtRCwrRkFBa0I7QUFDckUsMEJBQTBCLCtEQUFxQjtBQUMvQywrREFBK0Q7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQ7QUFDekQsbURBQW1EO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSx5REFBbUI7QUFDM0I7O0FBRUE7QUFDeU87QUFDek8iLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9jYWxsYmFja3MvbWFuYWdlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4cG9ydCB9IGZyb20gXCIuLi9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyBnZXRCdWZmZXJTdHJpbmcgfSBmcm9tIFwiLi4vbWVzc2FnZXMvdXRpbHMuanNcIjtcbmltcG9ydCB7IGdldEVudmlyb25tZW50VmFyaWFibGUgfSBmcm9tIFwiLi4vdXRpbHMvZW52LmpzXCI7XG5pbXBvcnQgeyBCYXNlQ2FsbGJhY2tIYW5kbGVyLCBpc0Jhc2VDYWxsYmFja0hhbmRsZXIgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBpc0Jhc2VUcmFjZXIgfSBmcm9tIFwiLi4vdHJhY2Vycy9iYXNlLmpzXCI7XG5pbXBvcnQgeyBDb25zb2xlQ2FsbGJhY2tIYW5kbGVyIH0gZnJvbSBcIi4uL3RyYWNlcnMvY29uc29sZS5qc1wiO1xuaW1wb3J0IHsgTGFuZ0NoYWluVHJhY2VyIH0gZnJvbSBcIi4uL3RyYWNlcnMvdHJhY2VyX2xhbmdjaGFpbi5qc1wiO1xuaW1wb3J0IHsgY29uc3VtZUNhbGxiYWNrIH0gZnJvbSBcIi4uL3NpbmdsZXRvbnMvY2FsbGJhY2tzLmpzXCI7XG5pbXBvcnQgXCIuL3Byb21pc2VzLmpzXCI7XG5pbXBvcnQgeyBpc1RyYWNpbmdFbmFibGVkIH0gZnJvbSBcIi4uL3V0aWxzL2NhbGxiYWNrcy5qc1wiO1xuaW1wb3J0IHsgX2dldENvbmZpZ3VyZUhvb2tzLCBnZXRDb250ZXh0VmFyaWFibGUgfSBmcm9tIFwiLi4vc2luZ2xldG9ucy9hc3luY19sb2NhbF9zdG9yYWdlL2NvbnRleHQuanNcIjtcbmltcG9ydCB7IHY3IH0gZnJvbSBcInV1aWRcIjtcblxuLy8jcmVnaW9uIHNyYy9jYWxsYmFja3MvbWFuYWdlci50c1xudmFyIG1hbmFnZXJfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQobWFuYWdlcl9leHBvcnRzLCB7XG5cdEJhc2VDYWxsYmFja01hbmFnZXI6ICgpID0+IEJhc2VDYWxsYmFja01hbmFnZXIsXG5cdEJhc2VSdW5NYW5hZ2VyOiAoKSA9PiBCYXNlUnVuTWFuYWdlcixcblx0Q2FsbGJhY2tNYW5hZ2VyOiAoKSA9PiBDYWxsYmFja01hbmFnZXIsXG5cdENhbGxiYWNrTWFuYWdlckZvckNoYWluUnVuOiAoKSA9PiBDYWxsYmFja01hbmFnZXJGb3JDaGFpblJ1bixcblx0Q2FsbGJhY2tNYW5hZ2VyRm9yTExNUnVuOiAoKSA9PiBDYWxsYmFja01hbmFnZXJGb3JMTE1SdW4sXG5cdENhbGxiYWNrTWFuYWdlckZvclJldHJpZXZlclJ1bjogKCkgPT4gQ2FsbGJhY2tNYW5hZ2VyRm9yUmV0cmlldmVyUnVuLFxuXHRDYWxsYmFja01hbmFnZXJGb3JUb29sUnVuOiAoKSA9PiBDYWxsYmFja01hbmFnZXJGb3JUb29sUnVuLFxuXHRlbnN1cmVIYW5kbGVyOiAoKSA9PiBlbnN1cmVIYW5kbGVyLFxuXHRwYXJzZUNhbGxiYWNrQ29uZmlnQXJnOiAoKSA9PiBwYXJzZUNhbGxiYWNrQ29uZmlnQXJnXG59KTtcbmZ1bmN0aW9uIHBhcnNlQ2FsbGJhY2tDb25maWdBcmcoYXJnKSB7XG5cdGlmICghYXJnKSByZXR1cm4ge307XG5cdGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSB8fCBcIm5hbWVcIiBpbiBhcmcpIHJldHVybiB7IGNhbGxiYWNrczogYXJnIH07XG5cdGVsc2UgcmV0dXJuIGFyZztcbn1cbi8qKlxuKiBNYW5hZ2UgY2FsbGJhY2tzIGZyb20gZGlmZmVyZW50IGNvbXBvbmVudHMgb2YgTGFuZ0NoYWluLlxuKi9cbnZhciBCYXNlQ2FsbGJhY2tNYW5hZ2VyID0gY2xhc3Mge1xuXHRzZXRIYW5kbGVyKGhhbmRsZXIpIHtcblx0XHRyZXR1cm4gdGhpcy5zZXRIYW5kbGVycyhbaGFuZGxlcl0pO1xuXHR9XG59O1xuLyoqXG4qIEJhc2UgY2xhc3MgZm9yIHJ1biBtYW5hZ2VyIGluIExhbmdDaGFpbi5cbiovXG52YXIgQmFzZVJ1bk1hbmFnZXIgPSBjbGFzcyB7XG5cdGNvbnN0cnVjdG9yKHJ1bklkLCBoYW5kbGVycywgaW5oZXJpdGFibGVIYW5kbGVycywgdGFncywgaW5oZXJpdGFibGVUYWdzLCBtZXRhZGF0YSwgaW5oZXJpdGFibGVNZXRhZGF0YSwgX3BhcmVudFJ1bklkKSB7XG5cdFx0dGhpcy5ydW5JZCA9IHJ1bklkO1xuXHRcdHRoaXMuaGFuZGxlcnMgPSBoYW5kbGVycztcblx0XHR0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMgPSBpbmhlcml0YWJsZUhhbmRsZXJzO1xuXHRcdHRoaXMudGFncyA9IHRhZ3M7XG5cdFx0dGhpcy5pbmhlcml0YWJsZVRhZ3MgPSBpbmhlcml0YWJsZVRhZ3M7XG5cdFx0dGhpcy5tZXRhZGF0YSA9IG1ldGFkYXRhO1xuXHRcdHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSA9IGluaGVyaXRhYmxlTWV0YWRhdGE7XG5cdFx0dGhpcy5fcGFyZW50UnVuSWQgPSBfcGFyZW50UnVuSWQ7XG5cdH1cblx0Z2V0IHBhcmVudFJ1bklkKCkge1xuXHRcdHJldHVybiB0aGlzLl9wYXJlbnRSdW5JZDtcblx0fVxuXHRhc3luYyBoYW5kbGVUZXh0KHRleHQpIHtcblx0XHRhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IGhhbmRsZXIuaGFuZGxlVGV4dD8uKHRleHQsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnN0IGxvZ0Z1bmN0aW9uID0gaGFuZGxlci5yYWlzZUVycm9yID8gY29uc29sZS5lcnJvciA6IGNvbnNvbGUud2Fybjtcblx0XHRcdFx0bG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVUZXh0OiAke2Vycn1gKTtcblx0XHRcdFx0aWYgKGhhbmRsZXIucmFpc2VFcnJvcikgdGhyb3cgZXJyO1xuXHRcdFx0fVxuXHRcdH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcblx0fVxuXHRhc3luYyBoYW5kbGVDdXN0b21FdmVudChldmVudE5hbWUsIGRhdGEsIF9ydW5JZCwgX3RhZ3MsIF9tZXRhZGF0YSkge1xuXHRcdGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgaGFuZGxlci5oYW5kbGVDdXN0b21FdmVudD8uKGV2ZW50TmFtZSwgZGF0YSwgdGhpcy5ydW5JZCwgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvciA/IGNvbnNvbGUuZXJyb3IgOiBjb25zb2xlLndhcm47XG5cdFx0XHRcdGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlQ3VzdG9tRXZlbnQ6ICR7ZXJyfWApO1xuXHRcdFx0XHRpZiAoaGFuZGxlci5yYWlzZUVycm9yKSB0aHJvdyBlcnI7XG5cdFx0XHR9XG5cdFx0fSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuXHR9XG59O1xuLyoqXG4qIE1hbmFnZXMgY2FsbGJhY2tzIGZvciByZXRyaWV2ZXIgcnVucy5cbiovXG52YXIgQ2FsbGJhY2tNYW5hZ2VyRm9yUmV0cmlldmVyUnVuID0gY2xhc3MgZXh0ZW5kcyBCYXNlUnVuTWFuYWdlciB7XG5cdGdldENoaWxkKHRhZykge1xuXHRcdGNvbnN0IG1hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKHRoaXMucnVuSWQpO1xuXHRcdG1hbmFnZXIuc2V0SGFuZGxlcnModGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzKTtcblx0XHRtYW5hZ2VyLmFkZFRhZ3ModGhpcy5pbmhlcml0YWJsZVRhZ3MpO1xuXHRcdG1hbmFnZXIuYWRkTWV0YWRhdGEodGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhKTtcblx0XHRpZiAodGFnKSBtYW5hZ2VyLmFkZFRhZ3MoW3RhZ10sIGZhbHNlKTtcblx0XHRyZXR1cm4gbWFuYWdlcjtcblx0fVxuXHRhc3luYyBoYW5kbGVSZXRyaWV2ZXJFbmQoZG9jdW1lbnRzKSB7XG5cdFx0YXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIWhhbmRsZXIuaWdub3JlUmV0cmlldmVyKSB0cnkge1xuXHRcdFx0XHRhd2FpdCBoYW5kbGVyLmhhbmRsZVJldHJpZXZlckVuZD8uKGRvY3VtZW50cywgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc3QgbG9nRnVuY3Rpb24gPSBoYW5kbGVyLnJhaXNlRXJyb3IgPyBjb25zb2xlLmVycm9yIDogY29uc29sZS53YXJuO1xuXHRcdFx0XHRsb2dGdW5jdGlvbihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZVJldHJpZXZlcmApO1xuXHRcdFx0XHRpZiAoaGFuZGxlci5yYWlzZUVycm9yKSB0aHJvdyBlcnI7XG5cdFx0XHR9XG5cdFx0fSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuXHR9XG5cdGFzeW5jIGhhbmRsZVJldHJpZXZlckVycm9yKGVycikge1xuXHRcdGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFoYW5kbGVyLmlnbm9yZVJldHJpZXZlcikgdHJ5IHtcblx0XHRcdFx0YXdhaXQgaGFuZGxlci5oYW5kbGVSZXRyaWV2ZXJFcnJvcj8uKGVyciwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvciA/IGNvbnNvbGUuZXJyb3IgOiBjb25zb2xlLndhcm47XG5cdFx0XHRcdGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlUmV0cmlldmVyRXJyb3I6ICR7ZXJyb3J9YCk7XG5cdFx0XHRcdGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHRocm93IGVycjtcblx0XHRcdH1cblx0XHR9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG5cdH1cbn07XG52YXIgQ2FsbGJhY2tNYW5hZ2VyRm9yTExNUnVuID0gY2xhc3MgZXh0ZW5kcyBCYXNlUnVuTWFuYWdlciB7XG5cdGFzeW5jIGhhbmRsZUxMTU5ld1Rva2VuKHRva2VuLCBpZHgsIF9ydW5JZCwgX3BhcmVudFJ1bklkLCBfdGFncywgZmllbGRzKSB7XG5cdFx0YXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIWhhbmRsZXIuaWdub3JlTExNKSB0cnkge1xuXHRcdFx0XHRhd2FpdCBoYW5kbGVyLmhhbmRsZUxMTU5ld1Rva2VuPy4odG9rZW4sIGlkeCA/PyB7XG5cdFx0XHRcdFx0cHJvbXB0OiAwLFxuXHRcdFx0XHRcdGNvbXBsZXRpb246IDBcblx0XHRcdFx0fSwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncywgZmllbGRzKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvciA/IGNvbnNvbGUuZXJyb3IgOiBjb25zb2xlLndhcm47XG5cdFx0XHRcdGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlTExNTmV3VG9rZW46ICR7ZXJyfWApO1xuXHRcdFx0XHRpZiAoaGFuZGxlci5yYWlzZUVycm9yKSB0aHJvdyBlcnI7XG5cdFx0XHR9XG5cdFx0fSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuXHR9XG5cdGFzeW5jIGhhbmRsZUxMTUVycm9yKGVyciwgX3J1bklkLCBfcGFyZW50UnVuSWQsIF90YWdzLCBleHRyYVBhcmFtcykge1xuXHRcdGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFoYW5kbGVyLmlnbm9yZUxMTSkgdHJ5IHtcblx0XHRcdFx0YXdhaXQgaGFuZGxlci5oYW5kbGVMTE1FcnJvcj8uKGVyciwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncywgZXh0cmFQYXJhbXMpO1xuXHRcdFx0fSBjYXRjaCAoZXJyJDEpIHtcblx0XHRcdFx0Y29uc3QgbG9nRnVuY3Rpb24gPSBoYW5kbGVyLnJhaXNlRXJyb3IgPyBjb25zb2xlLmVycm9yIDogY29uc29sZS53YXJuO1xuXHRcdFx0XHRsb2dGdW5jdGlvbihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUxMTUVycm9yOiAke2VyciQxfWApO1xuXHRcdFx0XHRpZiAoaGFuZGxlci5yYWlzZUVycm9yKSB0aHJvdyBlcnIkMTtcblx0XHRcdH1cblx0XHR9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG5cdH1cblx0YXN5bmMgaGFuZGxlTExNRW5kKG91dHB1dCwgX3J1bklkLCBfcGFyZW50UnVuSWQsIF90YWdzLCBleHRyYVBhcmFtcykge1xuXHRcdGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFoYW5kbGVyLmlnbm9yZUxMTSkgdHJ5IHtcblx0XHRcdFx0YXdhaXQgaGFuZGxlci5oYW5kbGVMTE1FbmQ/LihvdXRwdXQsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MsIGV4dHJhUGFyYW1zKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvciA/IGNvbnNvbGUuZXJyb3IgOiBjb25zb2xlLndhcm47XG5cdFx0XHRcdGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlTExNRW5kOiAke2Vycn1gKTtcblx0XHRcdFx0aWYgKGhhbmRsZXIucmFpc2VFcnJvcikgdGhyb3cgZXJyO1xuXHRcdFx0fVxuXHRcdH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcblx0fVxufTtcbnZhciBDYWxsYmFja01hbmFnZXJGb3JDaGFpblJ1biA9IGNsYXNzIGV4dGVuZHMgQmFzZVJ1bk1hbmFnZXIge1xuXHRnZXRDaGlsZCh0YWcpIHtcblx0XHRjb25zdCBtYW5hZ2VyID0gbmV3IENhbGxiYWNrTWFuYWdlcih0aGlzLnJ1bklkKTtcblx0XHRtYW5hZ2VyLnNldEhhbmRsZXJzKHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycyk7XG5cdFx0bWFuYWdlci5hZGRUYWdzKHRoaXMuaW5oZXJpdGFibGVUYWdzKTtcblx0XHRtYW5hZ2VyLmFkZE1ldGFkYXRhKHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSk7XG5cdFx0aWYgKHRhZykgbWFuYWdlci5hZGRUYWdzKFt0YWddLCBmYWxzZSk7XG5cdFx0cmV0dXJuIG1hbmFnZXI7XG5cdH1cblx0YXN5bmMgaGFuZGxlQ2hhaW5FcnJvcihlcnIsIF9ydW5JZCwgX3BhcmVudFJ1bklkLCBfdGFncywga3dhcmdzKSB7XG5cdFx0YXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIWhhbmRsZXIuaWdub3JlQ2hhaW4pIHRyeSB7XG5cdFx0XHRcdGF3YWl0IGhhbmRsZXIuaGFuZGxlQ2hhaW5FcnJvcj8uKGVyciwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncywga3dhcmdzKTtcblx0XHRcdH0gY2F0Y2ggKGVyciQxKSB7XG5cdFx0XHRcdGNvbnN0IGxvZ0Z1bmN0aW9uID0gaGFuZGxlci5yYWlzZUVycm9yID8gY29uc29sZS5lcnJvciA6IGNvbnNvbGUud2Fybjtcblx0XHRcdFx0bG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVDaGFpbkVycm9yOiAke2VyciQxfWApO1xuXHRcdFx0XHRpZiAoaGFuZGxlci5yYWlzZUVycm9yKSB0aHJvdyBlcnIkMTtcblx0XHRcdH1cblx0XHR9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG5cdH1cblx0YXN5bmMgaGFuZGxlQ2hhaW5FbmQob3V0cHV0LCBfcnVuSWQsIF9wYXJlbnRSdW5JZCwgX3RhZ3MsIGt3YXJncykge1xuXHRcdGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFoYW5kbGVyLmlnbm9yZUNoYWluKSB0cnkge1xuXHRcdFx0XHRhd2FpdCBoYW5kbGVyLmhhbmRsZUNoYWluRW5kPy4ob3V0cHV0LCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCBrd2FyZ3MpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnN0IGxvZ0Z1bmN0aW9uID0gaGFuZGxlci5yYWlzZUVycm9yID8gY29uc29sZS5lcnJvciA6IGNvbnNvbGUud2Fybjtcblx0XHRcdFx0bG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVDaGFpbkVuZDogJHtlcnJ9YCk7XG5cdFx0XHRcdGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHRocm93IGVycjtcblx0XHRcdH1cblx0XHR9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG5cdH1cblx0YXN5bmMgaGFuZGxlQWdlbnRBY3Rpb24oYWN0aW9uKSB7XG5cdFx0YXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIWhhbmRsZXIuaWdub3JlQWdlbnQpIHRyeSB7XG5cdFx0XHRcdGF3YWl0IGhhbmRsZXIuaGFuZGxlQWdlbnRBY3Rpb24/LihhY3Rpb24sIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnN0IGxvZ0Z1bmN0aW9uID0gaGFuZGxlci5yYWlzZUVycm9yID8gY29uc29sZS5lcnJvciA6IGNvbnNvbGUud2Fybjtcblx0XHRcdFx0bG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVBZ2VudEFjdGlvbjogJHtlcnJ9YCk7XG5cdFx0XHRcdGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHRocm93IGVycjtcblx0XHRcdH1cblx0XHR9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG5cdH1cblx0YXN5bmMgaGFuZGxlQWdlbnRFbmQoYWN0aW9uKSB7XG5cdFx0YXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIWhhbmRsZXIuaWdub3JlQWdlbnQpIHRyeSB7XG5cdFx0XHRcdGF3YWl0IGhhbmRsZXIuaGFuZGxlQWdlbnRFbmQ/LihhY3Rpb24sIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnN0IGxvZ0Z1bmN0aW9uID0gaGFuZGxlci5yYWlzZUVycm9yID8gY29uc29sZS5lcnJvciA6IGNvbnNvbGUud2Fybjtcblx0XHRcdFx0bG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVBZ2VudEVuZDogJHtlcnJ9YCk7XG5cdFx0XHRcdGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHRocm93IGVycjtcblx0XHRcdH1cblx0XHR9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG5cdH1cbn07XG52YXIgQ2FsbGJhY2tNYW5hZ2VyRm9yVG9vbFJ1biA9IGNsYXNzIGV4dGVuZHMgQmFzZVJ1bk1hbmFnZXIge1xuXHRnZXRDaGlsZCh0YWcpIHtcblx0XHRjb25zdCBtYW5hZ2VyID0gbmV3IENhbGxiYWNrTWFuYWdlcih0aGlzLnJ1bklkKTtcblx0XHRtYW5hZ2VyLnNldEhhbmRsZXJzKHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycyk7XG5cdFx0bWFuYWdlci5hZGRUYWdzKHRoaXMuaW5oZXJpdGFibGVUYWdzKTtcblx0XHRtYW5hZ2VyLmFkZE1ldGFkYXRhKHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSk7XG5cdFx0aWYgKHRhZykgbWFuYWdlci5hZGRUYWdzKFt0YWddLCBmYWxzZSk7XG5cdFx0cmV0dXJuIG1hbmFnZXI7XG5cdH1cblx0YXN5bmMgaGFuZGxlVG9vbEVycm9yKGVycikge1xuXHRcdGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFoYW5kbGVyLmlnbm9yZUFnZW50KSB0cnkge1xuXHRcdFx0XHRhd2FpdCBoYW5kbGVyLmhhbmRsZVRvb2xFcnJvcj8uKGVyciwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG5cdFx0XHR9IGNhdGNoIChlcnIkMSkge1xuXHRcdFx0XHRjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvciA/IGNvbnNvbGUuZXJyb3IgOiBjb25zb2xlLndhcm47XG5cdFx0XHRcdGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlVG9vbEVycm9yOiAke2VyciQxfWApO1xuXHRcdFx0XHRpZiAoaGFuZGxlci5yYWlzZUVycm9yKSB0aHJvdyBlcnIkMTtcblx0XHRcdH1cblx0XHR9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG5cdH1cblx0YXN5bmMgaGFuZGxlVG9vbEVuZChvdXRwdXQpIHtcblx0XHRhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghaGFuZGxlci5pZ25vcmVBZ2VudCkgdHJ5IHtcblx0XHRcdFx0YXdhaXQgaGFuZGxlci5oYW5kbGVUb29sRW5kPy4ob3V0cHV0LCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvciA/IGNvbnNvbGUuZXJyb3IgOiBjb25zb2xlLndhcm47XG5cdFx0XHRcdGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlVG9vbEVuZDogJHtlcnJ9YCk7XG5cdFx0XHRcdGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHRocm93IGVycjtcblx0XHRcdH1cblx0XHR9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG5cdH1cbn07XG4vKipcbiogQGV4YW1wbGVcbiogYGBgdHlwZXNjcmlwdFxuKiBjb25zdCBwcm9tcHQgPSBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXCJXaGF0IGlzIHRoZSBhbnN3ZXIgdG8ge3F1ZXN0aW9ufT9cIik7XG4qXG4qIC8vIEV4YW1wbGUgb2YgdXNpbmcgTExNQ2hhaW4gd2l0aCBPcGVuQUkgYW5kIGEgc2ltcGxlIHByb21wdFxuKiBjb25zdCBjaGFpbiA9IG5ldyBMTE1DaGFpbih7XG4qICAgbGxtOiBuZXcgQ2hhdE9wZW5BSSh7IG1vZGVsOiBcImdwdC00by1taW5pXCIsIHRlbXBlcmF0dXJlOiAwLjkgfSksXG4qICAgcHJvbXB0LFxuKiB9KTtcbipcbiogLy8gUnVubmluZyB0aGUgY2hhaW4gd2l0aCBhIHNpbmdsZSBxdWVzdGlvblxuKiBjb25zdCByZXN1bHQgPSBhd2FpdCBjaGFpbi5jYWxsKHtcbiogICBxdWVzdGlvbjogXCJXaGF0IGlzIHRoZSBhaXJzcGVlZCB2ZWxvY2l0eSBvZiBhbiB1bmxhZGVuIHN3YWxsb3c/XCIsXG4qIH0pO1xuKiBjb25zb2xlLmxvZyhcIlRoZSBhbnN3ZXIgaXM6XCIsIHJlc3VsdCk7XG4qIGBgYFxuKi9cbnZhciBDYWxsYmFja01hbmFnZXIgPSBjbGFzcyBDYWxsYmFja01hbmFnZXIgZXh0ZW5kcyBCYXNlQ2FsbGJhY2tNYW5hZ2VyIHtcblx0aGFuZGxlcnMgPSBbXTtcblx0aW5oZXJpdGFibGVIYW5kbGVycyA9IFtdO1xuXHR0YWdzID0gW107XG5cdGluaGVyaXRhYmxlVGFncyA9IFtdO1xuXHRtZXRhZGF0YSA9IHt9O1xuXHRpbmhlcml0YWJsZU1ldGFkYXRhID0ge307XG5cdG5hbWUgPSBcImNhbGxiYWNrX21hbmFnZXJcIjtcblx0X3BhcmVudFJ1bklkO1xuXHRjb25zdHJ1Y3RvcihwYXJlbnRSdW5JZCwgb3B0aW9ucykge1xuXHRcdHN1cGVyKCk7XG5cdFx0dGhpcy5oYW5kbGVycyA9IG9wdGlvbnM/LmhhbmRsZXJzID8/IHRoaXMuaGFuZGxlcnM7XG5cdFx0dGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzID0gb3B0aW9ucz8uaW5oZXJpdGFibGVIYW5kbGVycyA/PyB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnM7XG5cdFx0dGhpcy50YWdzID0gb3B0aW9ucz8udGFncyA/PyB0aGlzLnRhZ3M7XG5cdFx0dGhpcy5pbmhlcml0YWJsZVRhZ3MgPSBvcHRpb25zPy5pbmhlcml0YWJsZVRhZ3MgPz8gdGhpcy5pbmhlcml0YWJsZVRhZ3M7XG5cdFx0dGhpcy5tZXRhZGF0YSA9IG9wdGlvbnM/Lm1ldGFkYXRhID8/IHRoaXMubWV0YWRhdGE7XG5cdFx0dGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhID0gb3B0aW9ucz8uaW5oZXJpdGFibGVNZXRhZGF0YSA/PyB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGE7XG5cdFx0dGhpcy5fcGFyZW50UnVuSWQgPSBwYXJlbnRSdW5JZDtcblx0fVxuXHQvKipcblx0KiBHZXRzIHRoZSBwYXJlbnQgcnVuIElELCBpZiBhbnkuXG5cdCpcblx0KiBAcmV0dXJucyBUaGUgcGFyZW50IHJ1biBJRC5cblx0Ki9cblx0Z2V0UGFyZW50UnVuSWQoKSB7XG5cdFx0cmV0dXJuIHRoaXMuX3BhcmVudFJ1bklkO1xuXHR9XG5cdGFzeW5jIGhhbmRsZUxMTVN0YXJ0KGxsbSwgcHJvbXB0cywgcnVuSWQgPSB2b2lkIDAsIF9wYXJlbnRSdW5JZCA9IHZvaWQgMCwgZXh0cmFQYXJhbXMgPSB2b2lkIDAsIF90YWdzID0gdm9pZCAwLCBfbWV0YWRhdGEgPSB2b2lkIDAsIHJ1bk5hbWUgPSB2b2lkIDApIHtcblx0XHRyZXR1cm4gUHJvbWlzZS5hbGwocHJvbXB0cy5tYXAoYXN5bmMgKHByb21wdCwgaWR4KSA9PiB7XG5cdFx0XHRjb25zdCBydW5JZF8gPSBpZHggPT09IDAgJiYgcnVuSWQgPyBydW5JZCA6IHY3KCk7XG5cdFx0XHRhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4ge1xuXHRcdFx0XHRpZiAoaGFuZGxlci5pZ25vcmVMTE0pIHJldHVybjtcblx0XHRcdFx0aWYgKGlzQmFzZVRyYWNlcihoYW5kbGVyKSkgaGFuZGxlci5fY3JlYXRlUnVuRm9yTExNU3RhcnQobGxtLCBbcHJvbXB0XSwgcnVuSWRfLCB0aGlzLl9wYXJlbnRSdW5JZCwgZXh0cmFQYXJhbXMsIHRoaXMudGFncywgdGhpcy5tZXRhZGF0YSwgcnVuTmFtZSk7XG5cdFx0XHRcdHJldHVybiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRhd2FpdCBoYW5kbGVyLmhhbmRsZUxMTVN0YXJ0Py4obGxtLCBbcHJvbXB0XSwgcnVuSWRfLCB0aGlzLl9wYXJlbnRSdW5JZCwgZXh0cmFQYXJhbXMsIHRoaXMudGFncywgdGhpcy5tZXRhZGF0YSwgcnVuTmFtZSk7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvciA/IGNvbnNvbGUuZXJyb3IgOiBjb25zb2xlLndhcm47XG5cdFx0XHRcdFx0XHRsb2dGdW5jdGlvbihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUxMTVN0YXJ0OiAke2Vycn1gKTtcblx0XHRcdFx0XHRcdGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHRocm93IGVycjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycyk7XG5cdFx0XHR9KSk7XG5cdFx0XHRyZXR1cm4gbmV3IENhbGxiYWNrTWFuYWdlckZvckxMTVJ1bihydW5JZF8sIHRoaXMuaGFuZGxlcnMsIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycywgdGhpcy50YWdzLCB0aGlzLmluaGVyaXRhYmxlVGFncywgdGhpcy5tZXRhZGF0YSwgdGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG5cdFx0fSkpO1xuXHR9XG5cdGFzeW5jIGhhbmRsZUNoYXRNb2RlbFN0YXJ0KGxsbSwgbWVzc2FnZXMsIHJ1bklkID0gdm9pZCAwLCBfcGFyZW50UnVuSWQgPSB2b2lkIDAsIGV4dHJhUGFyYW1zID0gdm9pZCAwLCBfdGFncyA9IHZvaWQgMCwgX21ldGFkYXRhID0gdm9pZCAwLCBydW5OYW1lID0gdm9pZCAwKSB7XG5cdFx0cmV0dXJuIFByb21pc2UuYWxsKG1lc3NhZ2VzLm1hcChhc3luYyAobWVzc2FnZUdyb3VwLCBpZHgpID0+IHtcblx0XHRcdGNvbnN0IHJ1bklkXyA9IGlkeCA9PT0gMCAmJiBydW5JZCA/IHJ1bklkIDogdjcoKTtcblx0XHRcdGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiB7XG5cdFx0XHRcdGlmIChoYW5kbGVyLmlnbm9yZUxMTSkgcmV0dXJuO1xuXHRcdFx0XHRpZiAoaXNCYXNlVHJhY2VyKGhhbmRsZXIpKSBoYW5kbGVyLl9jcmVhdGVSdW5Gb3JDaGF0TW9kZWxTdGFydChsbG0sIFttZXNzYWdlR3JvdXBdLCBydW5JZF8sIHRoaXMuX3BhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcblx0XHRcdFx0cmV0dXJuIGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGlmIChoYW5kbGVyLmhhbmRsZUNoYXRNb2RlbFN0YXJ0KSBhd2FpdCBoYW5kbGVyLmhhbmRsZUNoYXRNb2RlbFN0YXJ0Py4obGxtLCBbbWVzc2FnZUdyb3VwXSwgcnVuSWRfLCB0aGlzLl9wYXJlbnRSdW5JZCwgZXh0cmFQYXJhbXMsIHRoaXMudGFncywgdGhpcy5tZXRhZGF0YSwgcnVuTmFtZSk7XG5cdFx0XHRcdFx0XHRlbHNlIGlmIChoYW5kbGVyLmhhbmRsZUxMTVN0YXJ0KSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IG1lc3NhZ2VTdHJpbmcgPSBnZXRCdWZmZXJTdHJpbmcobWVzc2FnZUdyb3VwKTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgaGFuZGxlci5oYW5kbGVMTE1TdGFydD8uKGxsbSwgW21lc3NhZ2VTdHJpbmddLCBydW5JZF8sIHRoaXMuX3BhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGxvZ0Z1bmN0aW9uID0gaGFuZGxlci5yYWlzZUVycm9yID8gY29uc29sZS5lcnJvciA6IGNvbnNvbGUud2Fybjtcblx0XHRcdFx0XHRcdGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlTExNU3RhcnQ6ICR7ZXJyfWApO1xuXHRcdFx0XHRcdFx0aWYgKGhhbmRsZXIucmFpc2VFcnJvcikgdGhyb3cgZXJyO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKTtcblx0XHRcdH0pKTtcblx0XHRcdHJldHVybiBuZXcgQ2FsbGJhY2tNYW5hZ2VyRm9yTExNUnVuKHJ1bklkXywgdGhpcy5oYW5kbGVycywgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLCB0aGlzLnRhZ3MsIHRoaXMuaW5oZXJpdGFibGVUYWdzLCB0aGlzLm1ldGFkYXRhLCB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEsIHRoaXMuX3BhcmVudFJ1bklkKTtcblx0XHR9KSk7XG5cdH1cblx0YXN5bmMgaGFuZGxlQ2hhaW5TdGFydChjaGFpbiwgaW5wdXRzLCBydW5JZCA9IHY3KCksIHJ1blR5cGUgPSB2b2lkIDAsIF90YWdzID0gdm9pZCAwLCBfbWV0YWRhdGEgPSB2b2lkIDAsIHJ1bk5hbWUgPSB2b2lkIDAsIF9wYXJlbnRSdW5JZCA9IHZvaWQgMCwgZXh0cmEgPSB2b2lkIDApIHtcblx0XHRhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4ge1xuXHRcdFx0aWYgKGhhbmRsZXIuaWdub3JlQ2hhaW4pIHJldHVybjtcblx0XHRcdGlmIChpc0Jhc2VUcmFjZXIoaGFuZGxlcikpIGhhbmRsZXIuX2NyZWF0ZVJ1bkZvckNoYWluU3RhcnQoY2hhaW4sIGlucHV0cywgcnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MsIHRoaXMubWV0YWRhdGEsIHJ1blR5cGUsIHJ1bk5hbWUsIGV4dHJhKTtcblx0XHRcdHJldHVybiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGF3YWl0IGhhbmRsZXIuaGFuZGxlQ2hhaW5TdGFydD8uKGNoYWluLCBpbnB1dHMsIHJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5UeXBlLCBydW5OYW1lLCBleHRyYSk7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdGNvbnN0IGxvZ0Z1bmN0aW9uID0gaGFuZGxlci5yYWlzZUVycm9yID8gY29uc29sZS5lcnJvciA6IGNvbnNvbGUud2Fybjtcblx0XHRcdFx0XHRsb2dGdW5jdGlvbihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUNoYWluU3RhcnQ6ICR7ZXJyfWApO1xuXHRcdFx0XHRcdGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHRocm93IGVycjtcblx0XHRcdFx0fVxuXHRcdFx0fSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKTtcblx0XHR9KSk7XG5cdFx0cmV0dXJuIG5ldyBDYWxsYmFja01hbmFnZXJGb3JDaGFpblJ1bihydW5JZCwgdGhpcy5oYW5kbGVycywgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLCB0aGlzLnRhZ3MsIHRoaXMuaW5oZXJpdGFibGVUYWdzLCB0aGlzLm1ldGFkYXRhLCB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEsIHRoaXMuX3BhcmVudFJ1bklkKTtcblx0fVxuXHRhc3luYyBoYW5kbGVUb29sU3RhcnQodG9vbCwgaW5wdXQsIHJ1bklkID0gdjcoKSwgX3BhcmVudFJ1bklkID0gdm9pZCAwLCBfdGFncyA9IHZvaWQgMCwgX21ldGFkYXRhID0gdm9pZCAwLCBydW5OYW1lID0gdm9pZCAwKSB7XG5cdFx0YXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IHtcblx0XHRcdGlmIChoYW5kbGVyLmlnbm9yZUFnZW50KSByZXR1cm47XG5cdFx0XHRpZiAoaXNCYXNlVHJhY2VyKGhhbmRsZXIpKSBoYW5kbGVyLl9jcmVhdGVSdW5Gb3JUb29sU3RhcnQodG9vbCwgaW5wdXQsIHJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcblx0XHRcdHJldHVybiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGF3YWl0IGhhbmRsZXIuaGFuZGxlVG9vbFN0YXJ0Py4odG9vbCwgaW5wdXQsIHJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0Y29uc3QgbG9nRnVuY3Rpb24gPSBoYW5kbGVyLnJhaXNlRXJyb3IgPyBjb25zb2xlLmVycm9yIDogY29uc29sZS53YXJuO1xuXHRcdFx0XHRcdGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlVG9vbFN0YXJ0OiAke2Vycn1gKTtcblx0XHRcdFx0XHRpZiAoaGFuZGxlci5yYWlzZUVycm9yKSB0aHJvdyBlcnI7XG5cdFx0XHRcdH1cblx0XHRcdH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycyk7XG5cdFx0fSkpO1xuXHRcdHJldHVybiBuZXcgQ2FsbGJhY2tNYW5hZ2VyRm9yVG9vbFJ1bihydW5JZCwgdGhpcy5oYW5kbGVycywgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLCB0aGlzLnRhZ3MsIHRoaXMuaW5oZXJpdGFibGVUYWdzLCB0aGlzLm1ldGFkYXRhLCB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEsIHRoaXMuX3BhcmVudFJ1bklkKTtcblx0fVxuXHRhc3luYyBoYW5kbGVSZXRyaWV2ZXJTdGFydChyZXRyaWV2ZXIsIHF1ZXJ5LCBydW5JZCA9IHY3KCksIF9wYXJlbnRSdW5JZCA9IHZvaWQgMCwgX3RhZ3MgPSB2b2lkIDAsIF9tZXRhZGF0YSA9IHZvaWQgMCwgcnVuTmFtZSA9IHZvaWQgMCkge1xuXHRcdGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiB7XG5cdFx0XHRpZiAoaGFuZGxlci5pZ25vcmVSZXRyaWV2ZXIpIHJldHVybjtcblx0XHRcdGlmIChpc0Jhc2VUcmFjZXIoaGFuZGxlcikpIGhhbmRsZXIuX2NyZWF0ZVJ1bkZvclJldHJpZXZlclN0YXJ0KHJldHJpZXZlciwgcXVlcnksIHJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcblx0XHRcdHJldHVybiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGF3YWl0IGhhbmRsZXIuaGFuZGxlUmV0cmlldmVyU3RhcnQ/LihyZXRyaWV2ZXIsIHF1ZXJ5LCBydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncywgdGhpcy5tZXRhZGF0YSwgcnVuTmFtZSk7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdGNvbnN0IGxvZ0Z1bmN0aW9uID0gaGFuZGxlci5yYWlzZUVycm9yID8gY29uc29sZS5lcnJvciA6IGNvbnNvbGUud2Fybjtcblx0XHRcdFx0XHRsb2dGdW5jdGlvbihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZVJldHJpZXZlclN0YXJ0OiAke2Vycn1gKTtcblx0XHRcdFx0XHRpZiAoaGFuZGxlci5yYWlzZUVycm9yKSB0aHJvdyBlcnI7XG5cdFx0XHRcdH1cblx0XHRcdH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycyk7XG5cdFx0fSkpO1xuXHRcdHJldHVybiBuZXcgQ2FsbGJhY2tNYW5hZ2VyRm9yUmV0cmlldmVyUnVuKHJ1bklkLCB0aGlzLmhhbmRsZXJzLCB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMsIHRoaXMudGFncywgdGhpcy5pbmhlcml0YWJsZVRhZ3MsIHRoaXMubWV0YWRhdGEsIHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSwgdGhpcy5fcGFyZW50UnVuSWQpO1xuXHR9XG5cdGFzeW5jIGhhbmRsZUN1c3RvbUV2ZW50KGV2ZW50TmFtZSwgZGF0YSwgcnVuSWQsIF90YWdzLCBfbWV0YWRhdGEpIHtcblx0XHRhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghaGFuZGxlci5pZ25vcmVDdXN0b21FdmVudCkgdHJ5IHtcblx0XHRcdFx0YXdhaXQgaGFuZGxlci5oYW5kbGVDdXN0b21FdmVudD8uKGV2ZW50TmFtZSwgZGF0YSwgcnVuSWQsIHRoaXMudGFncywgdGhpcy5tZXRhZGF0YSk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc3QgbG9nRnVuY3Rpb24gPSBoYW5kbGVyLnJhaXNlRXJyb3IgPyBjb25zb2xlLmVycm9yIDogY29uc29sZS53YXJuO1xuXHRcdFx0XHRsb2dGdW5jdGlvbihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUN1c3RvbUV2ZW50OiAke2Vycn1gKTtcblx0XHRcdFx0aWYgKGhhbmRsZXIucmFpc2VFcnJvcikgdGhyb3cgZXJyO1xuXHRcdFx0fVxuXHRcdH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcblx0fVxuXHRhZGRIYW5kbGVyKGhhbmRsZXIsIGluaGVyaXQgPSB0cnVlKSB7XG5cdFx0dGhpcy5oYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xuXHRcdGlmIChpbmhlcml0KSB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMucHVzaChoYW5kbGVyKTtcblx0fVxuXHRyZW1vdmVIYW5kbGVyKGhhbmRsZXIpIHtcblx0XHR0aGlzLmhhbmRsZXJzID0gdGhpcy5oYW5kbGVycy5maWx0ZXIoKF9oYW5kbGVyKSA9PiBfaGFuZGxlciAhPT0gaGFuZGxlcik7XG5cdFx0dGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzID0gdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLmZpbHRlcigoX2hhbmRsZXIpID0+IF9oYW5kbGVyICE9PSBoYW5kbGVyKTtcblx0fVxuXHRzZXRIYW5kbGVycyhoYW5kbGVycywgaW5oZXJpdCA9IHRydWUpIHtcblx0XHR0aGlzLmhhbmRsZXJzID0gW107XG5cdFx0dGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzID0gW107XG5cdFx0Zm9yIChjb25zdCBoYW5kbGVyIG9mIGhhbmRsZXJzKSB0aGlzLmFkZEhhbmRsZXIoaGFuZGxlciwgaW5oZXJpdCk7XG5cdH1cblx0YWRkVGFncyh0YWdzLCBpbmhlcml0ID0gdHJ1ZSkge1xuXHRcdHRoaXMucmVtb3ZlVGFncyh0YWdzKTtcblx0XHR0aGlzLnRhZ3MucHVzaCguLi50YWdzKTtcblx0XHRpZiAoaW5oZXJpdCkgdGhpcy5pbmhlcml0YWJsZVRhZ3MucHVzaCguLi50YWdzKTtcblx0fVxuXHRyZW1vdmVUYWdzKHRhZ3MpIHtcblx0XHR0aGlzLnRhZ3MgPSB0aGlzLnRhZ3MuZmlsdGVyKCh0YWcpID0+ICF0YWdzLmluY2x1ZGVzKHRhZykpO1xuXHRcdHRoaXMuaW5oZXJpdGFibGVUYWdzID0gdGhpcy5pbmhlcml0YWJsZVRhZ3MuZmlsdGVyKCh0YWcpID0+ICF0YWdzLmluY2x1ZGVzKHRhZykpO1xuXHR9XG5cdGFkZE1ldGFkYXRhKG1ldGFkYXRhLCBpbmhlcml0ID0gdHJ1ZSkge1xuXHRcdHRoaXMubWV0YWRhdGEgPSB7XG5cdFx0XHQuLi50aGlzLm1ldGFkYXRhLFxuXHRcdFx0Li4ubWV0YWRhdGFcblx0XHR9O1xuXHRcdGlmIChpbmhlcml0KSB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEgPSB7XG5cdFx0XHQuLi50aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEsXG5cdFx0XHQuLi5tZXRhZGF0YVxuXHRcdH07XG5cdH1cblx0cmVtb3ZlTWV0YWRhdGEobWV0YWRhdGEpIHtcblx0XHRmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhtZXRhZGF0YSkpIHtcblx0XHRcdGRlbGV0ZSB0aGlzLm1ldGFkYXRhW2tleV07XG5cdFx0XHRkZWxldGUgdGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhW2tleV07XG5cdFx0fVxuXHR9XG5cdGNvcHkoYWRkaXRpb25hbEhhbmRsZXJzID0gW10sIGluaGVyaXQgPSB0cnVlKSB7XG5cdFx0Y29uc3QgbWFuYWdlciA9IG5ldyBDYWxsYmFja01hbmFnZXIodGhpcy5fcGFyZW50UnVuSWQpO1xuXHRcdGZvciAoY29uc3QgaGFuZGxlciBvZiB0aGlzLmhhbmRsZXJzKSB7XG5cdFx0XHRjb25zdCBpbmhlcml0YWJsZSA9IHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycy5pbmNsdWRlcyhoYW5kbGVyKTtcblx0XHRcdG1hbmFnZXIuYWRkSGFuZGxlcihoYW5kbGVyLCBpbmhlcml0YWJsZSk7XG5cdFx0fVxuXHRcdGZvciAoY29uc3QgdGFnIG9mIHRoaXMudGFncykge1xuXHRcdFx0Y29uc3QgaW5oZXJpdGFibGUgPSB0aGlzLmluaGVyaXRhYmxlVGFncy5pbmNsdWRlcyh0YWcpO1xuXHRcdFx0bWFuYWdlci5hZGRUYWdzKFt0YWddLCBpbmhlcml0YWJsZSk7XG5cdFx0fVxuXHRcdGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHRoaXMubWV0YWRhdGEpKSB7XG5cdFx0XHRjb25zdCBpbmhlcml0YWJsZSA9IE9iamVjdC5rZXlzKHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSkuaW5jbHVkZXMoa2V5KTtcblx0XHRcdG1hbmFnZXIuYWRkTWV0YWRhdGEoeyBba2V5XTogdGhpcy5tZXRhZGF0YVtrZXldIH0sIGluaGVyaXRhYmxlKTtcblx0XHR9XG5cdFx0Zm9yIChjb25zdCBoYW5kbGVyIG9mIGFkZGl0aW9uYWxIYW5kbGVycykge1xuXHRcdFx0aWYgKG1hbmFnZXIuaGFuZGxlcnMuZmlsdGVyKChoKSA9PiBoLm5hbWUgPT09IFwiY29uc29sZV9jYWxsYmFja19oYW5kbGVyXCIpLnNvbWUoKGgpID0+IGgubmFtZSA9PT0gaGFuZGxlci5uYW1lKSkgY29udGludWU7XG5cdFx0XHRtYW5hZ2VyLmFkZEhhbmRsZXIoaGFuZGxlciwgaW5oZXJpdCk7XG5cdFx0fVxuXHRcdHJldHVybiBtYW5hZ2VyO1xuXHR9XG5cdHN0YXRpYyBmcm9tSGFuZGxlcnMoaGFuZGxlcnMpIHtcblx0XHRjbGFzcyBIYW5kbGVyIGV4dGVuZHMgQmFzZUNhbGxiYWNrSGFuZGxlciB7XG5cdFx0XHRuYW1lID0gdjcoKTtcblx0XHRcdGNvbnN0cnVjdG9yKCkge1xuXHRcdFx0XHRzdXBlcigpO1xuXHRcdFx0XHRPYmplY3QuYXNzaWduKHRoaXMsIGhhbmRsZXJzKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0Y29uc3QgbWFuYWdlciA9IG5ldyB0aGlzKCk7XG5cdFx0bWFuYWdlci5hZGRIYW5kbGVyKG5ldyBIYW5kbGVyKCkpO1xuXHRcdHJldHVybiBtYW5hZ2VyO1xuXHR9XG5cdHN0YXRpYyBjb25maWd1cmUoaW5oZXJpdGFibGVIYW5kbGVycywgbG9jYWxIYW5kbGVycywgaW5oZXJpdGFibGVUYWdzLCBsb2NhbFRhZ3MsIGluaGVyaXRhYmxlTWV0YWRhdGEsIGxvY2FsTWV0YWRhdGEsIG9wdGlvbnMpIHtcblx0XHRyZXR1cm4gdGhpcy5fY29uZmlndXJlU3luYyhpbmhlcml0YWJsZUhhbmRsZXJzLCBsb2NhbEhhbmRsZXJzLCBpbmhlcml0YWJsZVRhZ3MsIGxvY2FsVGFncywgaW5oZXJpdGFibGVNZXRhZGF0YSwgbG9jYWxNZXRhZGF0YSwgb3B0aW9ucyk7XG5cdH1cblx0c3RhdGljIF9jb25maWd1cmVTeW5jKGluaGVyaXRhYmxlSGFuZGxlcnMsIGxvY2FsSGFuZGxlcnMsIGluaGVyaXRhYmxlVGFncywgbG9jYWxUYWdzLCBpbmhlcml0YWJsZU1ldGFkYXRhLCBsb2NhbE1ldGFkYXRhLCBvcHRpb25zKSB7XG5cdFx0bGV0IGNhbGxiYWNrTWFuYWdlcjtcblx0XHRpZiAoaW5oZXJpdGFibGVIYW5kbGVycyB8fCBsb2NhbEhhbmRsZXJzKSB7XG5cdFx0XHRpZiAoQXJyYXkuaXNBcnJheShpbmhlcml0YWJsZUhhbmRsZXJzKSB8fCAhaW5oZXJpdGFibGVIYW5kbGVycykge1xuXHRcdFx0XHRjYWxsYmFja01hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKCk7XG5cdFx0XHRcdGNhbGxiYWNrTWFuYWdlci5zZXRIYW5kbGVycyhpbmhlcml0YWJsZUhhbmRsZXJzPy5tYXAoZW5zdXJlSGFuZGxlcikgPz8gW10sIHRydWUpO1xuXHRcdFx0fSBlbHNlIGNhbGxiYWNrTWFuYWdlciA9IGluaGVyaXRhYmxlSGFuZGxlcnM7XG5cdFx0XHRjYWxsYmFja01hbmFnZXIgPSBjYWxsYmFja01hbmFnZXIuY29weShBcnJheS5pc0FycmF5KGxvY2FsSGFuZGxlcnMpID8gbG9jYWxIYW5kbGVycy5tYXAoZW5zdXJlSGFuZGxlcikgOiBsb2NhbEhhbmRsZXJzPy5oYW5kbGVycywgZmFsc2UpO1xuXHRcdH1cblx0XHRjb25zdCB2ZXJib3NlRW5hYmxlZCA9IGdldEVudmlyb25tZW50VmFyaWFibGUoXCJMQU5HQ0hBSU5fVkVSQk9TRVwiKSA9PT0gXCJ0cnVlXCIgfHwgb3B0aW9ucz8udmVyYm9zZTtcblx0XHRjb25zdCB0cmFjaW5nVjJFbmFibGVkID0gTGFuZ0NoYWluVHJhY2VyLmdldFRyYWNlYWJsZVJ1blRyZWUoKT8udHJhY2luZ0VuYWJsZWQgfHwgaXNUcmFjaW5nRW5hYmxlZCgpO1xuXHRcdGNvbnN0IHRyYWNpbmdFbmFibGVkID0gdHJhY2luZ1YyRW5hYmxlZCB8fCAoZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9UUkFDSU5HXCIpID8/IGZhbHNlKTtcblx0XHRpZiAodmVyYm9zZUVuYWJsZWQgfHwgdHJhY2luZ0VuYWJsZWQpIHtcblx0XHRcdGlmICghY2FsbGJhY2tNYW5hZ2VyKSBjYWxsYmFja01hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKCk7XG5cdFx0XHRpZiAodmVyYm9zZUVuYWJsZWQgJiYgIWNhbGxiYWNrTWFuYWdlci5oYW5kbGVycy5zb21lKChoYW5kbGVyKSA9PiBoYW5kbGVyLm5hbWUgPT09IENvbnNvbGVDYWxsYmFja0hhbmRsZXIucHJvdG90eXBlLm5hbWUpKSB7XG5cdFx0XHRcdGNvbnN0IGNvbnNvbGVIYW5kbGVyID0gbmV3IENvbnNvbGVDYWxsYmFja0hhbmRsZXIoKTtcblx0XHRcdFx0Y2FsbGJhY2tNYW5hZ2VyLmFkZEhhbmRsZXIoY29uc29sZUhhbmRsZXIsIHRydWUpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRyYWNpbmdFbmFibGVkICYmICFjYWxsYmFja01hbmFnZXIuaGFuZGxlcnMuc29tZSgoaGFuZGxlcikgPT4gaGFuZGxlci5uYW1lID09PSBcImxhbmdjaGFpbl90cmFjZXJcIikpIHtcblx0XHRcdFx0aWYgKHRyYWNpbmdWMkVuYWJsZWQpIHtcblx0XHRcdFx0XHRjb25zdCB0cmFjZXJWMiA9IG5ldyBMYW5nQ2hhaW5UcmFjZXIoKTtcblx0XHRcdFx0XHRjYWxsYmFja01hbmFnZXIuYWRkSGFuZGxlcih0cmFjZXJWMiwgdHJ1ZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmICh0cmFjaW5nVjJFbmFibGVkKSB7XG5cdFx0XHRcdGNvbnN0IGltcGxpY2l0UnVuVHJlZSA9IExhbmdDaGFpblRyYWNlci5nZXRUcmFjZWFibGVSdW5UcmVlKCk7XG5cdFx0XHRcdGlmIChpbXBsaWNpdFJ1blRyZWUgJiYgY2FsbGJhY2tNYW5hZ2VyLl9wYXJlbnRSdW5JZCA9PT0gdm9pZCAwKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2tNYW5hZ2VyLl9wYXJlbnRSdW5JZCA9IGltcGxpY2l0UnVuVHJlZS5pZDtcblx0XHRcdFx0XHRjb25zdCB0cmFjZXJWMiA9IGNhbGxiYWNrTWFuYWdlci5oYW5kbGVycy5maW5kKChoYW5kbGVyKSA9PiBoYW5kbGVyLm5hbWUgPT09IFwibGFuZ2NoYWluX3RyYWNlclwiKTtcblx0XHRcdFx0XHR0cmFjZXJWMj8udXBkYXRlRnJvbVJ1blRyZWUoaW1wbGljaXRSdW5UcmVlKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRmb3IgKGNvbnN0IHsgY29udGV4dFZhciwgaW5oZXJpdGFibGUgPSB0cnVlLCBoYW5kbGVyQ2xhc3MsIGVudlZhciB9IG9mIF9nZXRDb25maWd1cmVIb29rcygpKSB7XG5cdFx0XHRjb25zdCBjcmVhdGVJZk5vdEluQ29udGV4dCA9IGVudlZhciAmJiBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKGVudlZhcikgPT09IFwidHJ1ZVwiICYmIGhhbmRsZXJDbGFzcztcblx0XHRcdGxldCBoYW5kbGVyO1xuXHRcdFx0Y29uc3QgY29udGV4dFZhclZhbHVlID0gY29udGV4dFZhciAhPT0gdm9pZCAwID8gZ2V0Q29udGV4dFZhcmlhYmxlKGNvbnRleHRWYXIpIDogdm9pZCAwO1xuXHRcdFx0aWYgKGNvbnRleHRWYXJWYWx1ZSAmJiBpc0Jhc2VDYWxsYmFja0hhbmRsZXIoY29udGV4dFZhclZhbHVlKSkgaGFuZGxlciA9IGNvbnRleHRWYXJWYWx1ZTtcblx0XHRcdGVsc2UgaWYgKGNyZWF0ZUlmTm90SW5Db250ZXh0KSBoYW5kbGVyID0gbmV3IGhhbmRsZXJDbGFzcyh7fSk7XG5cdFx0XHRpZiAoaGFuZGxlciAhPT0gdm9pZCAwKSB7XG5cdFx0XHRcdGlmICghY2FsbGJhY2tNYW5hZ2VyKSBjYWxsYmFja01hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKCk7XG5cdFx0XHRcdGlmICghY2FsbGJhY2tNYW5hZ2VyLmhhbmRsZXJzLnNvbWUoKGgpID0+IGgubmFtZSA9PT0gaGFuZGxlci5uYW1lKSkgY2FsbGJhY2tNYW5hZ2VyLmFkZEhhbmRsZXIoaGFuZGxlciwgaW5oZXJpdGFibGUpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoaW5oZXJpdGFibGVUYWdzIHx8IGxvY2FsVGFncykge1xuXHRcdFx0aWYgKGNhbGxiYWNrTWFuYWdlcikge1xuXHRcdFx0XHRjYWxsYmFja01hbmFnZXIuYWRkVGFncyhpbmhlcml0YWJsZVRhZ3MgPz8gW10pO1xuXHRcdFx0XHRjYWxsYmFja01hbmFnZXIuYWRkVGFncyhsb2NhbFRhZ3MgPz8gW10sIGZhbHNlKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKGluaGVyaXRhYmxlTWV0YWRhdGEgfHwgbG9jYWxNZXRhZGF0YSkge1xuXHRcdFx0aWYgKGNhbGxiYWNrTWFuYWdlcikge1xuXHRcdFx0XHRjYWxsYmFja01hbmFnZXIuYWRkTWV0YWRhdGEoaW5oZXJpdGFibGVNZXRhZGF0YSA/PyB7fSk7XG5cdFx0XHRcdGNhbGxiYWNrTWFuYWdlci5hZGRNZXRhZGF0YShsb2NhbE1ldGFkYXRhID8/IHt9LCBmYWxzZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBjYWxsYmFja01hbmFnZXI7XG5cdH1cbn07XG5mdW5jdGlvbiBlbnN1cmVIYW5kbGVyKGhhbmRsZXIpIHtcblx0aWYgKFwibmFtZVwiIGluIGhhbmRsZXIpIHJldHVybiBoYW5kbGVyO1xuXHRyZXR1cm4gQmFzZUNhbGxiYWNrSGFuZGxlci5mcm9tTWV0aG9kcyhoYW5kbGVyKTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBCYXNlQ2FsbGJhY2tNYW5hZ2VyLCBCYXNlUnVuTWFuYWdlciwgQ2FsbGJhY2tNYW5hZ2VyLCBDYWxsYmFja01hbmFnZXJGb3JDaGFpblJ1biwgQ2FsbGJhY2tNYW5hZ2VyRm9yTExNUnVuLCBDYWxsYmFja01hbmFnZXJGb3JSZXRyaWV2ZXJSdW4sIENhbGxiYWNrTWFuYWdlckZvclRvb2xSdW4sIGVuc3VyZUhhbmRsZXIsIG1hbmFnZXJfZXhwb3J0cywgcGFyc2VDYWxsYmFja0NvbmZpZ0FyZyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFuYWdlci5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/callbacks/manager.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/callbacks/promises.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/callbacks/promises.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   awaitAllCallbacks: () => (/* reexport safe */ _singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_1__.awaitAllCallbacks),\n/* harmony export */   consumeCallback: () => (/* reexport safe */ _singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_1__.consumeCallback),\n/* harmony export */   promises_exports: () => (/* binding */ promises_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../singletons/callbacks.js */ \"(ssr)/./node_modules/@langchain/core/dist/singletons/callbacks.js\");\n\n\n\n//#region src/callbacks/promises.ts\nvar promises_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(promises_exports, {\n\tawaitAllCallbacks: () => _singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_1__.awaitAllCallbacks,\n\tconsumeCallback: () => _singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_1__.consumeCallback\n});\n\n//#endregion\n\n//# sourceMappingURL=promises.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FsbGJhY2tzL3Byb21pc2VzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTJEO0FBQ3FCOztBQUVoRjtBQUNBO0FBQ0Esc0VBQVE7QUFDUiwwQkFBMEIsdUVBQWlCO0FBQzNDLHdCQUF3QixxRUFBZTtBQUN2QyxDQUFDOztBQUVEO0FBQ2dFO0FBQ2hFIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FsbGJhY2tzL3Byb21pc2VzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IGF3YWl0QWxsQ2FsbGJhY2tzLCBjb25zdW1lQ2FsbGJhY2sgfSBmcm9tIFwiLi4vc2luZ2xldG9ucy9jYWxsYmFja3MuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9jYWxsYmFja3MvcHJvbWlzZXMudHNcbnZhciBwcm9taXNlc19leHBvcnRzID0ge307XG5fX2V4cG9ydChwcm9taXNlc19leHBvcnRzLCB7XG5cdGF3YWl0QWxsQ2FsbGJhY2tzOiAoKSA9PiBhd2FpdEFsbENhbGxiYWNrcyxcblx0Y29uc3VtZUNhbGxiYWNrOiAoKSA9PiBjb25zdW1lQ2FsbGJhY2tcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGF3YWl0QWxsQ2FsbGJhY2tzLCBjb25zdW1lQ2FsbGJhY2ssIHByb21pc2VzX2V4cG9ydHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb21pc2VzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/callbacks/promises.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/chat_history.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/chat_history.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseChatMessageHistory: () => (/* binding */ BaseChatMessageHistory),\n/* harmony export */   BaseListChatMessageHistory: () => (/* binding */ BaseListChatMessageHistory),\n/* harmony export */   InMemoryChatMessageHistory: () => (/* binding */ InMemoryChatMessageHistory),\n/* harmony export */   chat_history_exports: () => (/* binding */ chat_history_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./load/serializable.js */ \"(ssr)/./node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _messages_human_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./messages/human.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/human.js\");\n/* harmony import */ var _messages_ai_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./messages/ai.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./messages/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/index.js\");\n\n\n\n\n\n\n//#region src/chat_history.ts\nvar chat_history_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(chat_history_exports, {\n\tBaseChatMessageHistory: () => BaseChatMessageHistory,\n\tBaseListChatMessageHistory: () => BaseListChatMessageHistory,\n\tInMemoryChatMessageHistory: () => InMemoryChatMessageHistory\n});\n/**\n* Base class for all chat message histories. All chat message histories\n* should extend this class.\n*/\nvar BaseChatMessageHistory = class extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_1__.Serializable {\n\t/**\n\t* Add a list of messages.\n\t*\n\t* Implementations should override this method to handle bulk addition of messages\n\t* in an efficient manner to avoid unnecessary round-trips to the underlying store.\n\t*\n\t* @param messages - A list of BaseMessage objects to store.\n\t*/\n\tasync addMessages(messages) {\n\t\tfor (const message of messages) await this.addMessage(message);\n\t}\n};\n/**\n* Base class for all list chat message histories. All list chat message\n* histories should extend this class.\n*/\nvar BaseListChatMessageHistory = class extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_1__.Serializable {\n\t/**\n\t* This is a convenience method for adding a human message string to the store.\n\t* Please note that this is a convenience method. Code should favor the\n\t* bulk addMessages interface instead to save on round-trips to the underlying\n\t* persistence layer.\n\t* This method may be deprecated in a future release.\n\t*/\n\taddUserMessage(message) {\n\t\treturn this.addMessage(new _messages_human_js__WEBPACK_IMPORTED_MODULE_2__.HumanMessage(message));\n\t}\n\t/**\n\t* This is a convenience method for adding an AI message string to the store.\n\t* Please note that this is a convenience method. Code should favor the bulk\n\t* addMessages interface instead to save on round-trips to the underlying\n\t* persistence layer.\n\t* This method may be deprecated in a future release.\n\t*/\n\taddAIMessage(message) {\n\t\treturn this.addMessage(new _messages_ai_js__WEBPACK_IMPORTED_MODULE_3__.AIMessage(message));\n\t}\n\t/**\n\t* Add a list of messages.\n\t*\n\t* Implementations should override this method to handle bulk addition of messages\n\t* in an efficient manner to avoid unnecessary round-trips to the underlying store.\n\t*\n\t* @param messages - A list of BaseMessage objects to store.\n\t*/\n\tasync addMessages(messages) {\n\t\tfor (const message of messages) await this.addMessage(message);\n\t}\n\t/**\n\t* Remove all messages from the store.\n\t*/\n\tclear() {\n\t\tthrow new Error(\"Not implemented.\");\n\t}\n};\n/**\n* Class for storing chat message history in-memory. It extends the\n* BaseListChatMessageHistory class and provides methods to get, add, and\n* clear messages.\n*/\nvar InMemoryChatMessageHistory = class extends BaseListChatMessageHistory {\n\tlc_namespace = [\n\t\t\"langchain\",\n\t\t\"stores\",\n\t\t\"message\",\n\t\t\"in_memory\"\n\t];\n\tmessages = [];\n\tconstructor(messages) {\n\t\tsuper(...arguments);\n\t\tthis.messages = messages ?? [];\n\t}\n\t/**\n\t* Method to get all the messages stored in the ChatMessageHistory\n\t* instance.\n\t* @returns Array of stored BaseMessage instances.\n\t*/\n\tasync getMessages() {\n\t\treturn this.messages;\n\t}\n\t/**\n\t* Method to add a new message to the ChatMessageHistory instance.\n\t* @param message The BaseMessage instance to add.\n\t* @returns A promise that resolves when the message has been added.\n\t*/\n\tasync addMessage(message) {\n\t\tthis.messages.push(message);\n\t}\n\t/**\n\t* Method to clear all the messages from the ChatMessageHistory instance.\n\t* @returns A promise that resolves when all messages have been cleared.\n\t*/\n\tasync clear() {\n\t\tthis.messages = [];\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=chat_history.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2hhdF9oaXN0b3J5LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUEwRDtBQUNKO0FBQ0g7QUFDTjtBQUNoQjs7QUFFN0I7QUFDQTtBQUNBLHNFQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLCtEQUFZO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLCtEQUFZO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNERBQVk7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHNEQUFTO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNnSDtBQUNoSCIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2NoYXRfaGlzdG9yeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4cG9ydCB9IGZyb20gXCIuL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IFNlcmlhbGl6YWJsZSB9IGZyb20gXCIuL2xvYWQvc2VyaWFsaXphYmxlLmpzXCI7XG5pbXBvcnQgeyBIdW1hbk1lc3NhZ2UgfSBmcm9tIFwiLi9tZXNzYWdlcy9odW1hbi5qc1wiO1xuaW1wb3J0IHsgQUlNZXNzYWdlIH0gZnJvbSBcIi4vbWVzc2FnZXMvYWkuanNcIjtcbmltcG9ydCBcIi4vbWVzc2FnZXMvaW5kZXguanNcIjtcblxuLy8jcmVnaW9uIHNyYy9jaGF0X2hpc3RvcnkudHNcbnZhciBjaGF0X2hpc3RvcnlfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQoY2hhdF9oaXN0b3J5X2V4cG9ydHMsIHtcblx0QmFzZUNoYXRNZXNzYWdlSGlzdG9yeTogKCkgPT4gQmFzZUNoYXRNZXNzYWdlSGlzdG9yeSxcblx0QmFzZUxpc3RDaGF0TWVzc2FnZUhpc3Rvcnk6ICgpID0+IEJhc2VMaXN0Q2hhdE1lc3NhZ2VIaXN0b3J5LFxuXHRJbk1lbW9yeUNoYXRNZXNzYWdlSGlzdG9yeTogKCkgPT4gSW5NZW1vcnlDaGF0TWVzc2FnZUhpc3Rvcnlcbn0pO1xuLyoqXG4qIEJhc2UgY2xhc3MgZm9yIGFsbCBjaGF0IG1lc3NhZ2UgaGlzdG9yaWVzLiBBbGwgY2hhdCBtZXNzYWdlIGhpc3Rvcmllc1xuKiBzaG91bGQgZXh0ZW5kIHRoaXMgY2xhc3MuXG4qL1xudmFyIEJhc2VDaGF0TWVzc2FnZUhpc3RvcnkgPSBjbGFzcyBleHRlbmRzIFNlcmlhbGl6YWJsZSB7XG5cdC8qKlxuXHQqIEFkZCBhIGxpc3Qgb2YgbWVzc2FnZXMuXG5cdCpcblx0KiBJbXBsZW1lbnRhdGlvbnMgc2hvdWxkIG92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIGhhbmRsZSBidWxrIGFkZGl0aW9uIG9mIG1lc3NhZ2VzXG5cdCogaW4gYW4gZWZmaWNpZW50IG1hbm5lciB0byBhdm9pZCB1bm5lY2Vzc2FyeSByb3VuZC10cmlwcyB0byB0aGUgdW5kZXJseWluZyBzdG9yZS5cblx0KlxuXHQqIEBwYXJhbSBtZXNzYWdlcyAtIEEgbGlzdCBvZiBCYXNlTWVzc2FnZSBvYmplY3RzIHRvIHN0b3JlLlxuXHQqL1xuXHRhc3luYyBhZGRNZXNzYWdlcyhtZXNzYWdlcykge1xuXHRcdGZvciAoY29uc3QgbWVzc2FnZSBvZiBtZXNzYWdlcykgYXdhaXQgdGhpcy5hZGRNZXNzYWdlKG1lc3NhZ2UpO1xuXHR9XG59O1xuLyoqXG4qIEJhc2UgY2xhc3MgZm9yIGFsbCBsaXN0IGNoYXQgbWVzc2FnZSBoaXN0b3JpZXMuIEFsbCBsaXN0IGNoYXQgbWVzc2FnZVxuKiBoaXN0b3JpZXMgc2hvdWxkIGV4dGVuZCB0aGlzIGNsYXNzLlxuKi9cbnZhciBCYXNlTGlzdENoYXRNZXNzYWdlSGlzdG9yeSA9IGNsYXNzIGV4dGVuZHMgU2VyaWFsaXphYmxlIHtcblx0LyoqXG5cdCogVGhpcyBpcyBhIGNvbnZlbmllbmNlIG1ldGhvZCBmb3IgYWRkaW5nIGEgaHVtYW4gbWVzc2FnZSBzdHJpbmcgdG8gdGhlIHN0b3JlLlxuXHQqIFBsZWFzZSBub3RlIHRoYXQgdGhpcyBpcyBhIGNvbnZlbmllbmNlIG1ldGhvZC4gQ29kZSBzaG91bGQgZmF2b3IgdGhlXG5cdCogYnVsayBhZGRNZXNzYWdlcyBpbnRlcmZhY2UgaW5zdGVhZCB0byBzYXZlIG9uIHJvdW5kLXRyaXBzIHRvIHRoZSB1bmRlcmx5aW5nXG5cdCogcGVyc2lzdGVuY2UgbGF5ZXIuXG5cdCogVGhpcyBtZXRob2QgbWF5IGJlIGRlcHJlY2F0ZWQgaW4gYSBmdXR1cmUgcmVsZWFzZS5cblx0Ki9cblx0YWRkVXNlck1lc3NhZ2UobWVzc2FnZSkge1xuXHRcdHJldHVybiB0aGlzLmFkZE1lc3NhZ2UobmV3IEh1bWFuTWVzc2FnZShtZXNzYWdlKSk7XG5cdH1cblx0LyoqXG5cdCogVGhpcyBpcyBhIGNvbnZlbmllbmNlIG1ldGhvZCBmb3IgYWRkaW5nIGFuIEFJIG1lc3NhZ2Ugc3RyaW5nIHRvIHRoZSBzdG9yZS5cblx0KiBQbGVhc2Ugbm90ZSB0aGF0IHRoaXMgaXMgYSBjb252ZW5pZW5jZSBtZXRob2QuIENvZGUgc2hvdWxkIGZhdm9yIHRoZSBidWxrXG5cdCogYWRkTWVzc2FnZXMgaW50ZXJmYWNlIGluc3RlYWQgdG8gc2F2ZSBvbiByb3VuZC10cmlwcyB0byB0aGUgdW5kZXJseWluZ1xuXHQqIHBlcnNpc3RlbmNlIGxheWVyLlxuXHQqIFRoaXMgbWV0aG9kIG1heSBiZSBkZXByZWNhdGVkIGluIGEgZnV0dXJlIHJlbGVhc2UuXG5cdCovXG5cdGFkZEFJTWVzc2FnZShtZXNzYWdlKSB7XG5cdFx0cmV0dXJuIHRoaXMuYWRkTWVzc2FnZShuZXcgQUlNZXNzYWdlKG1lc3NhZ2UpKTtcblx0fVxuXHQvKipcblx0KiBBZGQgYSBsaXN0IG9mIG1lc3NhZ2VzLlxuXHQqXG5cdCogSW1wbGVtZW50YXRpb25zIHNob3VsZCBvdmVycmlkZSB0aGlzIG1ldGhvZCB0byBoYW5kbGUgYnVsayBhZGRpdGlvbiBvZiBtZXNzYWdlc1xuXHQqIGluIGFuIGVmZmljaWVudCBtYW5uZXIgdG8gYXZvaWQgdW5uZWNlc3Nhcnkgcm91bmQtdHJpcHMgdG8gdGhlIHVuZGVybHlpbmcgc3RvcmUuXG5cdCpcblx0KiBAcGFyYW0gbWVzc2FnZXMgLSBBIGxpc3Qgb2YgQmFzZU1lc3NhZ2Ugb2JqZWN0cyB0byBzdG9yZS5cblx0Ki9cblx0YXN5bmMgYWRkTWVzc2FnZXMobWVzc2FnZXMpIHtcblx0XHRmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgbWVzc2FnZXMpIGF3YWl0IHRoaXMuYWRkTWVzc2FnZShtZXNzYWdlKTtcblx0fVxuXHQvKipcblx0KiBSZW1vdmUgYWxsIG1lc3NhZ2VzIGZyb20gdGhlIHN0b3JlLlxuXHQqL1xuXHRjbGVhcigpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWQuXCIpO1xuXHR9XG59O1xuLyoqXG4qIENsYXNzIGZvciBzdG9yaW5nIGNoYXQgbWVzc2FnZSBoaXN0b3J5IGluLW1lbW9yeS4gSXQgZXh0ZW5kcyB0aGVcbiogQmFzZUxpc3RDaGF0TWVzc2FnZUhpc3RvcnkgY2xhc3MgYW5kIHByb3ZpZGVzIG1ldGhvZHMgdG8gZ2V0LCBhZGQsIGFuZFxuKiBjbGVhciBtZXNzYWdlcy5cbiovXG52YXIgSW5NZW1vcnlDaGF0TWVzc2FnZUhpc3RvcnkgPSBjbGFzcyBleHRlbmRzIEJhc2VMaXN0Q2hhdE1lc3NhZ2VIaXN0b3J5IHtcblx0bGNfbmFtZXNwYWNlID0gW1xuXHRcdFwibGFuZ2NoYWluXCIsXG5cdFx0XCJzdG9yZXNcIixcblx0XHRcIm1lc3NhZ2VcIixcblx0XHRcImluX21lbW9yeVwiXG5cdF07XG5cdG1lc3NhZ2VzID0gW107XG5cdGNvbnN0cnVjdG9yKG1lc3NhZ2VzKSB7XG5cdFx0c3VwZXIoLi4uYXJndW1lbnRzKTtcblx0XHR0aGlzLm1lc3NhZ2VzID0gbWVzc2FnZXMgPz8gW107XG5cdH1cblx0LyoqXG5cdCogTWV0aG9kIHRvIGdldCBhbGwgdGhlIG1lc3NhZ2VzIHN0b3JlZCBpbiB0aGUgQ2hhdE1lc3NhZ2VIaXN0b3J5XG5cdCogaW5zdGFuY2UuXG5cdCogQHJldHVybnMgQXJyYXkgb2Ygc3RvcmVkIEJhc2VNZXNzYWdlIGluc3RhbmNlcy5cblx0Ki9cblx0YXN5bmMgZ2V0TWVzc2FnZXMoKSB7XG5cdFx0cmV0dXJuIHRoaXMubWVzc2FnZXM7XG5cdH1cblx0LyoqXG5cdCogTWV0aG9kIHRvIGFkZCBhIG5ldyBtZXNzYWdlIHRvIHRoZSBDaGF0TWVzc2FnZUhpc3RvcnkgaW5zdGFuY2UuXG5cdCogQHBhcmFtIG1lc3NhZ2UgVGhlIEJhc2VNZXNzYWdlIGluc3RhbmNlIHRvIGFkZC5cblx0KiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBtZXNzYWdlIGhhcyBiZWVuIGFkZGVkLlxuXHQqL1xuXHRhc3luYyBhZGRNZXNzYWdlKG1lc3NhZ2UpIHtcblx0XHR0aGlzLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG5cdH1cblx0LyoqXG5cdCogTWV0aG9kIHRvIGNsZWFyIGFsbCB0aGUgbWVzc2FnZXMgZnJvbSB0aGUgQ2hhdE1lc3NhZ2VIaXN0b3J5IGluc3RhbmNlLlxuXHQqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gYWxsIG1lc3NhZ2VzIGhhdmUgYmVlbiBjbGVhcmVkLlxuXHQqL1xuXHRhc3luYyBjbGVhcigpIHtcblx0XHR0aGlzLm1lc3NhZ2VzID0gW107XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQmFzZUNoYXRNZXNzYWdlSGlzdG9yeSwgQmFzZUxpc3RDaGF0TWVzc2FnZUhpc3RvcnksIEluTWVtb3J5Q2hhdE1lc3NhZ2VIaXN0b3J5LCBjaGF0X2hpc3RvcnlfZXhwb3J0cyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2hhdF9oaXN0b3J5LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/chat_history.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/document_loaders/base.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/document_loaders/base.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseDocumentLoader: () => (/* binding */ BaseDocumentLoader),\n/* harmony export */   base_exports: () => (/* binding */ base_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n\n\n//#region src/document_loaders/base.ts\nvar base_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(base_exports, { BaseDocumentLoader: () => BaseDocumentLoader });\n/**\n* Abstract class that provides a default implementation for the\n* loadAndSplit() method from the DocumentLoader interface. The load()\n* method is left abstract and needs to be implemented by subclasses.\n*/\nvar BaseDocumentLoader = class {};\n\n//#endregion\n\n//# sourceMappingURL=base.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZG9jdW1lbnRfbG9hZGVycy9iYXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEyRDs7QUFFM0Q7QUFDQTtBQUNBLHNFQUFRLGlCQUFpQiw4Q0FBOEM7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzRDO0FBQzVDIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZG9jdW1lbnRfbG9hZGVycy9iYXNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9kb2N1bWVudF9sb2FkZXJzL2Jhc2UudHNcbnZhciBiYXNlX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KGJhc2VfZXhwb3J0cywgeyBCYXNlRG9jdW1lbnRMb2FkZXI6ICgpID0+IEJhc2VEb2N1bWVudExvYWRlciB9KTtcbi8qKlxuKiBBYnN0cmFjdCBjbGFzcyB0aGF0IHByb3ZpZGVzIGEgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBmb3IgdGhlXG4qIGxvYWRBbmRTcGxpdCgpIG1ldGhvZCBmcm9tIHRoZSBEb2N1bWVudExvYWRlciBpbnRlcmZhY2UuIFRoZSBsb2FkKClcbiogbWV0aG9kIGlzIGxlZnQgYWJzdHJhY3QgYW5kIG5lZWRzIHRvIGJlIGltcGxlbWVudGVkIGJ5IHN1YmNsYXNzZXMuXG4qL1xudmFyIEJhc2VEb2N1bWVudExvYWRlciA9IGNsYXNzIHt9O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEJhc2VEb2N1bWVudExvYWRlciwgYmFzZV9leHBvcnRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iYXNlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/document_loaders/base.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/document_loaders/langsmith.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/document_loaders/langsmith.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LangSmithLoader: () => (/* binding */ LangSmithLoader),\n/* harmony export */   langsmith_exports: () => (/* binding */ langsmith_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/document_loaders/base.js\");\n/* harmony import */ var langsmith__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! langsmith */ \"(ssr)/./node_modules/langsmith/index.js\");\n\n\n\n\n//#region src/document_loaders/langsmith.ts\nvar langsmith_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(langsmith_exports, { LangSmithLoader: () => LangSmithLoader });\n/**\n* Document loader integration with LangSmith.\n*\n* ## [Constructor args](https://api.js.langchain.com/interfaces/_langchain_core.document_loaders_langsmith.LangSmithLoaderFields.html)\n*\n* <details open>\n* <summary><strong>Load</strong></summary>\n*\n* ```typescript\n* import { LangSmithLoader } from '@langchain/core/document_loaders/langsmith';\n* import { Client } from 'langsmith';\n*\n* const langSmithClient = new Client({\n*   apiKey: process.env.LANGSMITH_API_KEY,\n* })\n*\n* const loader = new LangSmithLoader({\n*   datasetId: \"9a3b36f7-b308-40a5-9b46-6613853b6330\",\n*   limit: 1,\n* });\n*\n* const docs = await loader.load();\n* ```\n*\n* ```txt\n* [\n*   {\n*     pageContent: '{\\n  \"input_key_str\": \"string\",\\n  \"input_key_bool\": true\\n}',\n*     metadata: {\n*       id: '8523d9e9-c123-4b23-9b46-21021nds289e',\n*       created_at: '2024-08-19T17:09:14.806441+00:00',\n*       modified_at: '2024-08-19T17:09:14.806441+00:00',\n*       name: '#8517 @ brace-test-dataset',\n*       dataset_id: '9a3b36f7-b308-40a5-9b46-6613853b6330',\n*       source_run_id: null,\n*       metadata: [Object],\n*       inputs: [Object],\n*       outputs: [Object]\n*     }\n*   }\n* ]\n* ```\n* </details>\n*/\nvar LangSmithLoader = class extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseDocumentLoader {\n\tdatasetId;\n\tdatasetName;\n\texampleIds;\n\tasOf;\n\tsplits;\n\tinlineS3Urls;\n\toffset;\n\tlimit;\n\tmetadata;\n\tfilter;\n\tcontentKey;\n\tformatContent;\n\tclient;\n\tconstructor(fields) {\n\t\tsuper();\n\t\tif (fields.client && fields.clientConfig) throw new Error(\"client and clientConfig cannot both be provided.\");\n\t\tthis.client = fields.client ?? new langsmith__WEBPACK_IMPORTED_MODULE_2__.Client(fields?.clientConfig);\n\t\tthis.contentKey = fields.contentKey ? fields.contentKey.split(\".\") : [];\n\t\tthis.formatContent = fields.formatContent ?? _stringify;\n\t\tthis.datasetId = fields.datasetId;\n\t\tthis.datasetName = fields.datasetName;\n\t\tthis.exampleIds = fields.exampleIds;\n\t\tthis.asOf = fields.asOf;\n\t\tthis.splits = fields.splits;\n\t\tthis.inlineS3Urls = fields.inlineS3Urls;\n\t\tthis.offset = fields.offset;\n\t\tthis.limit = fields.limit;\n\t\tthis.metadata = fields.metadata;\n\t\tthis.filter = fields.filter;\n\t}\n\tasync load() {\n\t\tconst documents = [];\n\t\tfor await (const example of this.client.listExamples({\n\t\t\tdatasetId: this.datasetId,\n\t\t\tdatasetName: this.datasetName,\n\t\t\texampleIds: this.exampleIds,\n\t\t\tasOf: this.asOf,\n\t\t\tsplits: this.splits,\n\t\t\tinlineS3Urls: this.inlineS3Urls,\n\t\t\toffset: this.offset,\n\t\t\tlimit: this.limit,\n\t\t\tmetadata: this.metadata,\n\t\t\tfilter: this.filter\n\t\t})) {\n\t\t\tlet content = example.inputs;\n\t\t\tfor (const key of this.contentKey) content = content[key];\n\t\t\tconst contentStr = this.formatContent(content);\n\t\t\tconst metadata = example;\n\t\t\t[\"created_at\", \"modified_at\"].forEach((k) => {\n\t\t\t\tif (k in metadata) {\n\t\t\t\t\tif (typeof metadata[k] === \"object\") metadata[k] = metadata[k].toString();\n\t\t\t\t}\n\t\t\t});\n\t\t\tdocuments.push({\n\t\t\t\tpageContent: contentStr,\n\t\t\t\tmetadata\n\t\t\t});\n\t\t}\n\t\treturn documents;\n\t}\n};\nfunction _stringify(x) {\n\tif (typeof x === \"string\") return x;\n\telse try {\n\t\treturn JSON.stringify(x, null, 2);\n\t} catch {\n\t\treturn String(x);\n\t}\n}\n\n//#endregion\n\n//# sourceMappingURL=langsmith.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZG9jdW1lbnRfbG9hZGVycy9sYW5nc21pdGguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBMkQ7QUFDWjtBQUNaOztBQUVuQztBQUNBO0FBQ0Esc0VBQVEsc0JBQXNCLHdDQUF3QztBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGtCQUFrQjtBQUM3QixXQUFXLFNBQVM7QUFDcEI7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDJEQUEyRDtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyx3REFBa0I7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsNkNBQU07QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUM4QztBQUM5QyIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2RvY3VtZW50X2xvYWRlcnMvbGFuZ3NtaXRoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IEJhc2VEb2N1bWVudExvYWRlciB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IENsaWVudCB9IGZyb20gXCJsYW5nc21pdGhcIjtcblxuLy8jcmVnaW9uIHNyYy9kb2N1bWVudF9sb2FkZXJzL2xhbmdzbWl0aC50c1xudmFyIGxhbmdzbWl0aF9leHBvcnRzID0ge307XG5fX2V4cG9ydChsYW5nc21pdGhfZXhwb3J0cywgeyBMYW5nU21pdGhMb2FkZXI6ICgpID0+IExhbmdTbWl0aExvYWRlciB9KTtcbi8qKlxuKiBEb2N1bWVudCBsb2FkZXIgaW50ZWdyYXRpb24gd2l0aCBMYW5nU21pdGguXG4qXG4qICMjIFtDb25zdHJ1Y3RvciBhcmdzXShodHRwczovL2FwaS5qcy5sYW5nY2hhaW4uY29tL2ludGVyZmFjZXMvX2xhbmdjaGFpbl9jb3JlLmRvY3VtZW50X2xvYWRlcnNfbGFuZ3NtaXRoLkxhbmdTbWl0aExvYWRlckZpZWxkcy5odG1sKVxuKlxuKiA8ZGV0YWlscyBvcGVuPlxuKiA8c3VtbWFyeT48c3Ryb25nPkxvYWQ8L3N0cm9uZz48L3N1bW1hcnk+XG4qXG4qIGBgYHR5cGVzY3JpcHRcbiogaW1wb3J0IHsgTGFuZ1NtaXRoTG9hZGVyIH0gZnJvbSAnQGxhbmdjaGFpbi9jb3JlL2RvY3VtZW50X2xvYWRlcnMvbGFuZ3NtaXRoJztcbiogaW1wb3J0IHsgQ2xpZW50IH0gZnJvbSAnbGFuZ3NtaXRoJztcbipcbiogY29uc3QgbGFuZ1NtaXRoQ2xpZW50ID0gbmV3IENsaWVudCh7XG4qICAgYXBpS2V5OiBwcm9jZXNzLmVudi5MQU5HU01JVEhfQVBJX0tFWSxcbiogfSlcbipcbiogY29uc3QgbG9hZGVyID0gbmV3IExhbmdTbWl0aExvYWRlcih7XG4qICAgZGF0YXNldElkOiBcIjlhM2IzNmY3LWIzMDgtNDBhNS05YjQ2LTY2MTM4NTNiNjMzMFwiLFxuKiAgIGxpbWl0OiAxLFxuKiB9KTtcbipcbiogY29uc3QgZG9jcyA9IGF3YWl0IGxvYWRlci5sb2FkKCk7XG4qIGBgYFxuKlxuKiBgYGB0eHRcbiogW1xuKiAgIHtcbiogICAgIHBhZ2VDb250ZW50OiAne1xcbiAgXCJpbnB1dF9rZXlfc3RyXCI6IFwic3RyaW5nXCIsXFxuICBcImlucHV0X2tleV9ib29sXCI6IHRydWVcXG59JyxcbiogICAgIG1ldGFkYXRhOiB7XG4qICAgICAgIGlkOiAnODUyM2Q5ZTktYzEyMy00YjIzLTliNDYtMjEwMjFuZHMyODllJyxcbiogICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDgtMTlUMTc6MDk6MTQuODA2NDQxKzAwOjAwJyxcbiogICAgICAgbW9kaWZpZWRfYXQ6ICcyMDI0LTA4LTE5VDE3OjA5OjE0LjgwNjQ0MSswMDowMCcsXG4qICAgICAgIG5hbWU6ICcjODUxNyBAIGJyYWNlLXRlc3QtZGF0YXNldCcsXG4qICAgICAgIGRhdGFzZXRfaWQ6ICc5YTNiMzZmNy1iMzA4LTQwYTUtOWI0Ni02NjEzODUzYjYzMzAnLFxuKiAgICAgICBzb3VyY2VfcnVuX2lkOiBudWxsLFxuKiAgICAgICBtZXRhZGF0YTogW09iamVjdF0sXG4qICAgICAgIGlucHV0czogW09iamVjdF0sXG4qICAgICAgIG91dHB1dHM6IFtPYmplY3RdXG4qICAgICB9XG4qICAgfVxuKiBdXG4qIGBgYFxuKiA8L2RldGFpbHM+XG4qL1xudmFyIExhbmdTbWl0aExvYWRlciA9IGNsYXNzIGV4dGVuZHMgQmFzZURvY3VtZW50TG9hZGVyIHtcblx0ZGF0YXNldElkO1xuXHRkYXRhc2V0TmFtZTtcblx0ZXhhbXBsZUlkcztcblx0YXNPZjtcblx0c3BsaXRzO1xuXHRpbmxpbmVTM1VybHM7XG5cdG9mZnNldDtcblx0bGltaXQ7XG5cdG1ldGFkYXRhO1xuXHRmaWx0ZXI7XG5cdGNvbnRlbnRLZXk7XG5cdGZvcm1hdENvbnRlbnQ7XG5cdGNsaWVudDtcblx0Y29uc3RydWN0b3IoZmllbGRzKSB7XG5cdFx0c3VwZXIoKTtcblx0XHRpZiAoZmllbGRzLmNsaWVudCAmJiBmaWVsZHMuY2xpZW50Q29uZmlnKSB0aHJvdyBuZXcgRXJyb3IoXCJjbGllbnQgYW5kIGNsaWVudENvbmZpZyBjYW5ub3QgYm90aCBiZSBwcm92aWRlZC5cIik7XG5cdFx0dGhpcy5jbGllbnQgPSBmaWVsZHMuY2xpZW50ID8/IG5ldyBDbGllbnQoZmllbGRzPy5jbGllbnRDb25maWcpO1xuXHRcdHRoaXMuY29udGVudEtleSA9IGZpZWxkcy5jb250ZW50S2V5ID8gZmllbGRzLmNvbnRlbnRLZXkuc3BsaXQoXCIuXCIpIDogW107XG5cdFx0dGhpcy5mb3JtYXRDb250ZW50ID0gZmllbGRzLmZvcm1hdENvbnRlbnQgPz8gX3N0cmluZ2lmeTtcblx0XHR0aGlzLmRhdGFzZXRJZCA9IGZpZWxkcy5kYXRhc2V0SWQ7XG5cdFx0dGhpcy5kYXRhc2V0TmFtZSA9IGZpZWxkcy5kYXRhc2V0TmFtZTtcblx0XHR0aGlzLmV4YW1wbGVJZHMgPSBmaWVsZHMuZXhhbXBsZUlkcztcblx0XHR0aGlzLmFzT2YgPSBmaWVsZHMuYXNPZjtcblx0XHR0aGlzLnNwbGl0cyA9IGZpZWxkcy5zcGxpdHM7XG5cdFx0dGhpcy5pbmxpbmVTM1VybHMgPSBmaWVsZHMuaW5saW5lUzNVcmxzO1xuXHRcdHRoaXMub2Zmc2V0ID0gZmllbGRzLm9mZnNldDtcblx0XHR0aGlzLmxpbWl0ID0gZmllbGRzLmxpbWl0O1xuXHRcdHRoaXMubWV0YWRhdGEgPSBmaWVsZHMubWV0YWRhdGE7XG5cdFx0dGhpcy5maWx0ZXIgPSBmaWVsZHMuZmlsdGVyO1xuXHR9XG5cdGFzeW5jIGxvYWQoKSB7XG5cdFx0Y29uc3QgZG9jdW1lbnRzID0gW107XG5cdFx0Zm9yIGF3YWl0IChjb25zdCBleGFtcGxlIG9mIHRoaXMuY2xpZW50Lmxpc3RFeGFtcGxlcyh7XG5cdFx0XHRkYXRhc2V0SWQ6IHRoaXMuZGF0YXNldElkLFxuXHRcdFx0ZGF0YXNldE5hbWU6IHRoaXMuZGF0YXNldE5hbWUsXG5cdFx0XHRleGFtcGxlSWRzOiB0aGlzLmV4YW1wbGVJZHMsXG5cdFx0XHRhc09mOiB0aGlzLmFzT2YsXG5cdFx0XHRzcGxpdHM6IHRoaXMuc3BsaXRzLFxuXHRcdFx0aW5saW5lUzNVcmxzOiB0aGlzLmlubGluZVMzVXJscyxcblx0XHRcdG9mZnNldDogdGhpcy5vZmZzZXQsXG5cdFx0XHRsaW1pdDogdGhpcy5saW1pdCxcblx0XHRcdG1ldGFkYXRhOiB0aGlzLm1ldGFkYXRhLFxuXHRcdFx0ZmlsdGVyOiB0aGlzLmZpbHRlclxuXHRcdH0pKSB7XG5cdFx0XHRsZXQgY29udGVudCA9IGV4YW1wbGUuaW5wdXRzO1xuXHRcdFx0Zm9yIChjb25zdCBrZXkgb2YgdGhpcy5jb250ZW50S2V5KSBjb250ZW50ID0gY29udGVudFtrZXldO1xuXHRcdFx0Y29uc3QgY29udGVudFN0ciA9IHRoaXMuZm9ybWF0Q29udGVudChjb250ZW50KTtcblx0XHRcdGNvbnN0IG1ldGFkYXRhID0gZXhhbXBsZTtcblx0XHRcdFtcImNyZWF0ZWRfYXRcIiwgXCJtb2RpZmllZF9hdFwiXS5mb3JFYWNoKChrKSA9PiB7XG5cdFx0XHRcdGlmIChrIGluIG1ldGFkYXRhKSB7XG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBtZXRhZGF0YVtrXSA9PT0gXCJvYmplY3RcIikgbWV0YWRhdGFba10gPSBtZXRhZGF0YVtrXS50b1N0cmluZygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdGRvY3VtZW50cy5wdXNoKHtcblx0XHRcdFx0cGFnZUNvbnRlbnQ6IGNvbnRlbnRTdHIsXG5cdFx0XHRcdG1ldGFkYXRhXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0cmV0dXJuIGRvY3VtZW50cztcblx0fVxufTtcbmZ1bmN0aW9uIF9zdHJpbmdpZnkoeCkge1xuXHRpZiAodHlwZW9mIHggPT09IFwic3RyaW5nXCIpIHJldHVybiB4O1xuXHRlbHNlIHRyeSB7XG5cdFx0cmV0dXJuIEpTT04uc3RyaW5naWZ5KHgsIG51bGwsIDIpO1xuXHR9IGNhdGNoIHtcblx0XHRyZXR1cm4gU3RyaW5nKHgpO1xuXHR9XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgTGFuZ1NtaXRoTG9hZGVyLCBsYW5nc21pdGhfZXhwb3J0cyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGFuZ3NtaXRoLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/document_loaders/langsmith.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/documents/document.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/documents/document.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Document: () => (/* binding */ Document)\n/* harmony export */ });\n//#region src/documents/document.ts\n/**\n* Interface for interacting with a document.\n*/\nvar Document = class {\n\tpageContent;\n\tmetadata;\n\t/**\n\t* An optional identifier for the document.\n\t*\n\t* Ideally this should be unique across the document collection and formatted\n\t* as a UUID, but this will not be enforced.\n\t*/\n\tid;\n\tconstructor(fields) {\n\t\tthis.pageContent = fields.pageContent !== void 0 ? fields.pageContent.toString() : \"\";\n\t\tthis.metadata = fields.metadata ?? {};\n\t\tthis.id = fields.id;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=document.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZG9jdW1lbnRzL2RvY3VtZW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ29CO0FBQ3BCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZG9jdW1lbnRzL2RvY3VtZW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvZG9jdW1lbnRzL2RvY3VtZW50LnRzXG4vKipcbiogSW50ZXJmYWNlIGZvciBpbnRlcmFjdGluZyB3aXRoIGEgZG9jdW1lbnQuXG4qL1xudmFyIERvY3VtZW50ID0gY2xhc3Mge1xuXHRwYWdlQ29udGVudDtcblx0bWV0YWRhdGE7XG5cdC8qKlxuXHQqIEFuIG9wdGlvbmFsIGlkZW50aWZpZXIgZm9yIHRoZSBkb2N1bWVudC5cblx0KlxuXHQqIElkZWFsbHkgdGhpcyBzaG91bGQgYmUgdW5pcXVlIGFjcm9zcyB0aGUgZG9jdW1lbnQgY29sbGVjdGlvbiBhbmQgZm9ybWF0dGVkXG5cdCogYXMgYSBVVUlELCBidXQgdGhpcyB3aWxsIG5vdCBiZSBlbmZvcmNlZC5cblx0Ki9cblx0aWQ7XG5cdGNvbnN0cnVjdG9yKGZpZWxkcykge1xuXHRcdHRoaXMucGFnZUNvbnRlbnQgPSBmaWVsZHMucGFnZUNvbnRlbnQgIT09IHZvaWQgMCA/IGZpZWxkcy5wYWdlQ29udGVudC50b1N0cmluZygpIDogXCJcIjtcblx0XHR0aGlzLm1ldGFkYXRhID0gZmllbGRzLm1ldGFkYXRhID8/IHt9O1xuXHRcdHRoaXMuaWQgPSBmaWVsZHMuaWQ7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgRG9jdW1lbnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRvY3VtZW50LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/documents/document.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/documents/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/documents/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseDocumentTransformer: () => (/* reexport safe */ _transformers_js__WEBPACK_IMPORTED_MODULE_2__.BaseDocumentTransformer),\n/* harmony export */   Document: () => (/* reexport safe */ _document_js__WEBPACK_IMPORTED_MODULE_1__.Document),\n/* harmony export */   MappingDocumentTransformer: () => (/* reexport safe */ _transformers_js__WEBPACK_IMPORTED_MODULE_2__.MappingDocumentTransformer),\n/* harmony export */   documents_exports: () => (/* binding */ documents_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _document_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./document.js */ \"(ssr)/./node_modules/@langchain/core/dist/documents/document.js\");\n/* harmony import */ var _transformers_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./transformers.js */ \"(ssr)/./node_modules/@langchain/core/dist/documents/transformers.js\");\n\n\n\n\n//#region src/documents/index.ts\nvar documents_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(documents_exports, {\n\tBaseDocumentTransformer: () => _transformers_js__WEBPACK_IMPORTED_MODULE_2__.BaseDocumentTransformer,\n\tDocument: () => _document_js__WEBPACK_IMPORTED_MODULE_1__.Document,\n\tMappingDocumentTransformer: () => _transformers_js__WEBPACK_IMPORTED_MODULE_2__.MappingDocumentTransformer\n});\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZG9jdW1lbnRzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBMkQ7QUFDbEI7QUFDK0M7O0FBRXhGO0FBQ0E7QUFDQSxzRUFBUTtBQUNSLGdDQUFnQyxxRUFBdUI7QUFDdkQsaUJBQWlCLGtEQUFRO0FBQ3pCLG1DQUFtQyx3RUFBMEI7QUFDN0QsQ0FBQzs7QUFFRDtBQUM0RjtBQUM1RiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2RvY3VtZW50cy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4cG9ydCB9IGZyb20gXCIuLi9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyBEb2N1bWVudCB9IGZyb20gXCIuL2RvY3VtZW50LmpzXCI7XG5pbXBvcnQgeyBCYXNlRG9jdW1lbnRUcmFuc2Zvcm1lciwgTWFwcGluZ0RvY3VtZW50VHJhbnNmb3JtZXIgfSBmcm9tIFwiLi90cmFuc2Zvcm1lcnMuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9kb2N1bWVudHMvaW5kZXgudHNcbnZhciBkb2N1bWVudHNfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQoZG9jdW1lbnRzX2V4cG9ydHMsIHtcblx0QmFzZURvY3VtZW50VHJhbnNmb3JtZXI6ICgpID0+IEJhc2VEb2N1bWVudFRyYW5zZm9ybWVyLFxuXHREb2N1bWVudDogKCkgPT4gRG9jdW1lbnQsXG5cdE1hcHBpbmdEb2N1bWVudFRyYW5zZm9ybWVyOiAoKSA9PiBNYXBwaW5nRG9jdW1lbnRUcmFuc2Zvcm1lclxufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQmFzZURvY3VtZW50VHJhbnNmb3JtZXIsIERvY3VtZW50LCBNYXBwaW5nRG9jdW1lbnRUcmFuc2Zvcm1lciwgZG9jdW1lbnRzX2V4cG9ydHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/documents/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/documents/transformers.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/documents/transformers.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseDocumentTransformer: () => (/* binding */ BaseDocumentTransformer),\n/* harmony export */   MappingDocumentTransformer: () => (/* binding */ MappingDocumentTransformer)\n/* harmony export */ });\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runnables/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/base.js\");\n\n\n//#region src/documents/transformers.ts\n/**\n* Abstract base class for document transformation systems.\n*\n* A document transformation system takes an array of Documents and returns an\n* array of transformed Documents. These arrays do not necessarily have to have\n* the same length.\n*\n* One example of this is a text splitter that splits a large document into\n* many smaller documents.\n*/\nvar BaseDocumentTransformer = class extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__.Runnable {\n\tlc_namespace = [\n\t\t\"langchain_core\",\n\t\t\"documents\",\n\t\t\"transformers\"\n\t];\n\t/**\n\t* Method to invoke the document transformation. This method calls the\n\t* transformDocuments method with the provided input.\n\t* @param input The input documents to be transformed.\n\t* @param _options Optional configuration object to customize the behavior of callbacks.\n\t* @returns A Promise that resolves to the transformed documents.\n\t*/\n\tinvoke(input, _options) {\n\t\treturn this.transformDocuments(input);\n\t}\n};\n/**\n* Class for document transformers that return exactly one transformed document\n* for each input document.\n*/\nvar MappingDocumentTransformer = class extends BaseDocumentTransformer {\n\tasync transformDocuments(documents) {\n\t\tconst newDocuments = [];\n\t\tfor (const document of documents) {\n\t\t\tconst transformedDocument = await this._transformDocument(document);\n\t\t\tnewDocuments.push(transformedDocument);\n\t\t}\n\t\treturn newDocuments;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=transformers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZG9jdW1lbnRzL3RyYW5zZm9ybWVycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0Q7O0FBRWhEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsd0RBQVE7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQytEO0FBQy9EIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZG9jdW1lbnRzL3RyYW5zZm9ybWVycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSdW5uYWJsZSB9IGZyb20gXCIuLi9ydW5uYWJsZXMvYmFzZS5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL2RvY3VtZW50cy90cmFuc2Zvcm1lcnMudHNcbi8qKlxuKiBBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBkb2N1bWVudCB0cmFuc2Zvcm1hdGlvbiBzeXN0ZW1zLlxuKlxuKiBBIGRvY3VtZW50IHRyYW5zZm9ybWF0aW9uIHN5c3RlbSB0YWtlcyBhbiBhcnJheSBvZiBEb2N1bWVudHMgYW5kIHJldHVybnMgYW5cbiogYXJyYXkgb2YgdHJhbnNmb3JtZWQgRG9jdW1lbnRzLiBUaGVzZSBhcnJheXMgZG8gbm90IG5lY2Vzc2FyaWx5IGhhdmUgdG8gaGF2ZVxuKiB0aGUgc2FtZSBsZW5ndGguXG4qXG4qIE9uZSBleGFtcGxlIG9mIHRoaXMgaXMgYSB0ZXh0IHNwbGl0dGVyIHRoYXQgc3BsaXRzIGEgbGFyZ2UgZG9jdW1lbnQgaW50b1xuKiBtYW55IHNtYWxsZXIgZG9jdW1lbnRzLlxuKi9cbnZhciBCYXNlRG9jdW1lbnRUcmFuc2Zvcm1lciA9IGNsYXNzIGV4dGVuZHMgUnVubmFibGUge1xuXHRsY19uYW1lc3BhY2UgPSBbXG5cdFx0XCJsYW5nY2hhaW5fY29yZVwiLFxuXHRcdFwiZG9jdW1lbnRzXCIsXG5cdFx0XCJ0cmFuc2Zvcm1lcnNcIlxuXHRdO1xuXHQvKipcblx0KiBNZXRob2QgdG8gaW52b2tlIHRoZSBkb2N1bWVudCB0cmFuc2Zvcm1hdGlvbi4gVGhpcyBtZXRob2QgY2FsbHMgdGhlXG5cdCogdHJhbnNmb3JtRG9jdW1lbnRzIG1ldGhvZCB3aXRoIHRoZSBwcm92aWRlZCBpbnB1dC5cblx0KiBAcGFyYW0gaW5wdXQgVGhlIGlucHV0IGRvY3VtZW50cyB0byBiZSB0cmFuc2Zvcm1lZC5cblx0KiBAcGFyYW0gX29wdGlvbnMgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBvYmplY3QgdG8gY3VzdG9taXplIHRoZSBiZWhhdmlvciBvZiBjYWxsYmFja3MuXG5cdCogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIHRyYW5zZm9ybWVkIGRvY3VtZW50cy5cblx0Ki9cblx0aW52b2tlKGlucHV0LCBfb3B0aW9ucykge1xuXHRcdHJldHVybiB0aGlzLnRyYW5zZm9ybURvY3VtZW50cyhpbnB1dCk7XG5cdH1cbn07XG4vKipcbiogQ2xhc3MgZm9yIGRvY3VtZW50IHRyYW5zZm9ybWVycyB0aGF0IHJldHVybiBleGFjdGx5IG9uZSB0cmFuc2Zvcm1lZCBkb2N1bWVudFxuKiBmb3IgZWFjaCBpbnB1dCBkb2N1bWVudC5cbiovXG52YXIgTWFwcGluZ0RvY3VtZW50VHJhbnNmb3JtZXIgPSBjbGFzcyBleHRlbmRzIEJhc2VEb2N1bWVudFRyYW5zZm9ybWVyIHtcblx0YXN5bmMgdHJhbnNmb3JtRG9jdW1lbnRzKGRvY3VtZW50cykge1xuXHRcdGNvbnN0IG5ld0RvY3VtZW50cyA9IFtdO1xuXHRcdGZvciAoY29uc3QgZG9jdW1lbnQgb2YgZG9jdW1lbnRzKSB7XG5cdFx0XHRjb25zdCB0cmFuc2Zvcm1lZERvY3VtZW50ID0gYXdhaXQgdGhpcy5fdHJhbnNmb3JtRG9jdW1lbnQoZG9jdW1lbnQpO1xuXHRcdFx0bmV3RG9jdW1lbnRzLnB1c2godHJhbnNmb3JtZWREb2N1bWVudCk7XG5cdFx0fVxuXHRcdHJldHVybiBuZXdEb2N1bWVudHM7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQmFzZURvY3VtZW50VHJhbnNmb3JtZXIsIE1hcHBpbmdEb2N1bWVudFRyYW5zZm9ybWVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFuc2Zvcm1lcnMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/documents/transformers.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/embeddings.js":
/*!*********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/embeddings.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Embeddings: () => (/* binding */ Embeddings),\n/* harmony export */   embeddings_exports: () => (/* binding */ embeddings_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/async_caller.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/async_caller.js\");\n\n\n\n//#region src/embeddings.ts\nvar embeddings_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(embeddings_exports, { Embeddings: () => Embeddings });\n/**\n* An abstract class that provides methods for embedding documents and\n* queries using LangChain.\n*/\nvar Embeddings = class {\n\t/**\n\t* The async caller should be used by subclasses to make any async calls,\n\t* which will thus benefit from the concurrency and retry logic.\n\t*/\n\tcaller;\n\tconstructor(params) {\n\t\tthis.caller = new _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_1__.AsyncCaller(params ?? {});\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=embeddings.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZW1iZWRkaW5ncy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTBEO0FBQ0o7O0FBRXREO0FBQ0E7QUFDQSxzRUFBUSx1QkFBdUIsOEJBQThCO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsK0RBQVcsYUFBYTtBQUM1QztBQUNBOztBQUVBO0FBQzBDO0FBQzFDIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZW1iZWRkaW5ncy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4cG9ydCB9IGZyb20gXCIuL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IEFzeW5jQ2FsbGVyIH0gZnJvbSBcIi4vdXRpbHMvYXN5bmNfY2FsbGVyLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvZW1iZWRkaW5ncy50c1xudmFyIGVtYmVkZGluZ3NfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQoZW1iZWRkaW5nc19leHBvcnRzLCB7IEVtYmVkZGluZ3M6ICgpID0+IEVtYmVkZGluZ3MgfSk7XG4vKipcbiogQW4gYWJzdHJhY3QgY2xhc3MgdGhhdCBwcm92aWRlcyBtZXRob2RzIGZvciBlbWJlZGRpbmcgZG9jdW1lbnRzIGFuZFxuKiBxdWVyaWVzIHVzaW5nIExhbmdDaGFpbi5cbiovXG52YXIgRW1iZWRkaW5ncyA9IGNsYXNzIHtcblx0LyoqXG5cdCogVGhlIGFzeW5jIGNhbGxlciBzaG91bGQgYmUgdXNlZCBieSBzdWJjbGFzc2VzIHRvIG1ha2UgYW55IGFzeW5jIGNhbGxzLFxuXHQqIHdoaWNoIHdpbGwgdGh1cyBiZW5lZml0IGZyb20gdGhlIGNvbmN1cnJlbmN5IGFuZCByZXRyeSBsb2dpYy5cblx0Ki9cblx0Y2FsbGVyO1xuXHRjb25zdHJ1Y3RvcihwYXJhbXMpIHtcblx0XHR0aGlzLmNhbGxlciA9IG5ldyBBc3luY0NhbGxlcihwYXJhbXMgPz8ge30pO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEVtYmVkZGluZ3MsIGVtYmVkZGluZ3NfZXhwb3J0cyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW1iZWRkaW5ncy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/embeddings.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/errors/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/errors/index.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addLangChainErrorFields: () => (/* binding */ addLangChainErrorFields)\n/* harmony export */ });\n//#region src/errors/index.ts\nfunction addLangChainErrorFields(error, lc_error_code) {\n\terror.lc_error_code = lc_error_code;\n\terror.message = `${error.message}\\n\\nTroubleshooting URL: https://docs.langchain.com/oss/javascript/langchain/errors/${lc_error_code}/\\n`;\n\treturn error;\n}\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZXJyb3JzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsY0FBYyxzRkFBc0YsY0FBYztBQUN0STtBQUNBOztBQUVBO0FBQ21DO0FBQ25DIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZXJyb3JzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvZXJyb3JzL2luZGV4LnRzXG5mdW5jdGlvbiBhZGRMYW5nQ2hhaW5FcnJvckZpZWxkcyhlcnJvciwgbGNfZXJyb3JfY29kZSkge1xuXHRlcnJvci5sY19lcnJvcl9jb2RlID0gbGNfZXJyb3JfY29kZTtcblx0ZXJyb3IubWVzc2FnZSA9IGAke2Vycm9yLm1lc3NhZ2V9XFxuXFxuVHJvdWJsZXNob290aW5nIFVSTDogaHR0cHM6Ly9kb2NzLmxhbmdjaGFpbi5jb20vb3NzL2phdmFzY3JpcHQvbGFuZ2NoYWluL2Vycm9ycy8ke2xjX2Vycm9yX2NvZGV9L1xcbmA7XG5cdHJldHVybiBlcnJvcjtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBhZGRMYW5nQ2hhaW5FcnJvckZpZWxkcyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/errors/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/example_selectors/base.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/example_selectors/base.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseExampleSelector: () => (/* binding */ BaseExampleSelector)\n/* harmony export */ });\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../load/serializable.js */ \"(ssr)/./node_modules/@langchain/core/dist/load/serializable.js\");\n\n\n//#region src/example_selectors/base.ts\n/**\n* Base class for example selectors.\n*/\nvar BaseExampleSelector = class extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable {\n\tlc_namespace = [\n\t\t\"langchain_core\",\n\t\t\"example_selectors\",\n\t\t\"base\"\n\t];\n};\n\n//#endregion\n\n//# sourceMappingURL=base.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZXhhbXBsZV9zZWxlY3RvcnMvYmFzZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF1RDs7QUFFdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsK0RBQVk7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQytCO0FBQy9CIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZXhhbXBsZV9zZWxlY3RvcnMvYmFzZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTZXJpYWxpemFibGUgfSBmcm9tIFwiLi4vbG9hZC9zZXJpYWxpemFibGUuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9leGFtcGxlX3NlbGVjdG9ycy9iYXNlLnRzXG4vKipcbiogQmFzZSBjbGFzcyBmb3IgZXhhbXBsZSBzZWxlY3RvcnMuXG4qL1xudmFyIEJhc2VFeGFtcGxlU2VsZWN0b3IgPSBjbGFzcyBleHRlbmRzIFNlcmlhbGl6YWJsZSB7XG5cdGxjX25hbWVzcGFjZSA9IFtcblx0XHRcImxhbmdjaGFpbl9jb3JlXCIsXG5cdFx0XCJleGFtcGxlX3NlbGVjdG9yc1wiLFxuXHRcdFwiYmFzZVwiXG5cdF07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEJhc2VFeGFtcGxlU2VsZWN0b3IgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJhc2UuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/example_selectors/base.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/example_selectors/conditional.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/example_selectors/conditional.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BasePromptSelector: () => (/* binding */ BasePromptSelector),\n/* harmony export */   ConditionalPromptSelector: () => (/* binding */ ConditionalPromptSelector),\n/* harmony export */   isChatModel: () => (/* binding */ isChatModel),\n/* harmony export */   isLLM: () => (/* binding */ isLLM)\n/* harmony export */ });\n//#region src/example_selectors/conditional.ts\n/**\n* Abstract class that defines the interface for selecting a prompt for a\n* given language model.\n*/\nvar BasePromptSelector = class {\n\t/**\n\t* Asynchronous version of `getPrompt` that also accepts an options object\n\t* for partial variables.\n\t* @param llm The language model for which to get a prompt.\n\t* @param options Optional object for partial variables.\n\t* @returns A Promise that resolves to a prompt template.\n\t*/\n\tasync getPromptAsync(llm, options) {\n\t\tconst prompt = this.getPrompt(llm);\n\t\treturn prompt.partial(options?.partialVariables ?? {});\n\t}\n};\n/**\n* Concrete implementation of `BasePromptSelector` that selects a prompt\n* based on a set of conditions. It has a default prompt that it returns\n* if none of the conditions are met.\n*/\nvar ConditionalPromptSelector = class extends BasePromptSelector {\n\tdefaultPrompt;\n\tconditionals;\n\tconstructor(default_prompt, conditionals = []) {\n\t\tsuper();\n\t\tthis.defaultPrompt = default_prompt;\n\t\tthis.conditionals = conditionals;\n\t}\n\t/**\n\t* Method that selects a prompt based on a set of conditions. If none of\n\t* the conditions are met, it returns the default prompt.\n\t* @param llm The language model for which to get a prompt.\n\t* @returns A prompt template.\n\t*/\n\tgetPrompt(llm) {\n\t\tfor (const [condition, prompt] of this.conditionals) if (condition(llm)) return prompt;\n\t\treturn this.defaultPrompt;\n\t}\n};\n/**\n* Type guard function that checks if a given language model is of type\n* `BaseLLM`.\n*/\nfunction isLLM(llm) {\n\treturn llm._modelType() === \"base_llm\";\n}\n/**\n* Type guard function that checks if a given language model is of type\n* `BaseChatModel`.\n*/\nfunction isChatModel(llm) {\n\treturn llm._modelType() === \"base_chat_model\";\n}\n\n//#endregion\n\n//# sourceMappingURL=conditional.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZXhhbXBsZV9zZWxlY3RvcnMvY29uZGl0aW9uYWwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RDtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUM2RTtBQUM3RSIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2V4YW1wbGVfc2VsZWN0b3JzL2NvbmRpdGlvbmFsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvZXhhbXBsZV9zZWxlY3RvcnMvY29uZGl0aW9uYWwudHNcbi8qKlxuKiBBYnN0cmFjdCBjbGFzcyB0aGF0IGRlZmluZXMgdGhlIGludGVyZmFjZSBmb3Igc2VsZWN0aW5nIGEgcHJvbXB0IGZvciBhXG4qIGdpdmVuIGxhbmd1YWdlIG1vZGVsLlxuKi9cbnZhciBCYXNlUHJvbXB0U2VsZWN0b3IgPSBjbGFzcyB7XG5cdC8qKlxuXHQqIEFzeW5jaHJvbm91cyB2ZXJzaW9uIG9mIGBnZXRQcm9tcHRgIHRoYXQgYWxzbyBhY2NlcHRzIGFuIG9wdGlvbnMgb2JqZWN0XG5cdCogZm9yIHBhcnRpYWwgdmFyaWFibGVzLlxuXHQqIEBwYXJhbSBsbG0gVGhlIGxhbmd1YWdlIG1vZGVsIGZvciB3aGljaCB0byBnZXQgYSBwcm9tcHQuXG5cdCogQHBhcmFtIG9wdGlvbnMgT3B0aW9uYWwgb2JqZWN0IGZvciBwYXJ0aWFsIHZhcmlhYmxlcy5cblx0KiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIHByb21wdCB0ZW1wbGF0ZS5cblx0Ki9cblx0YXN5bmMgZ2V0UHJvbXB0QXN5bmMobGxtLCBvcHRpb25zKSB7XG5cdFx0Y29uc3QgcHJvbXB0ID0gdGhpcy5nZXRQcm9tcHQobGxtKTtcblx0XHRyZXR1cm4gcHJvbXB0LnBhcnRpYWwob3B0aW9ucz8ucGFydGlhbFZhcmlhYmxlcyA/PyB7fSk7XG5cdH1cbn07XG4vKipcbiogQ29uY3JldGUgaW1wbGVtZW50YXRpb24gb2YgYEJhc2VQcm9tcHRTZWxlY3RvcmAgdGhhdCBzZWxlY3RzIGEgcHJvbXB0XG4qIGJhc2VkIG9uIGEgc2V0IG9mIGNvbmRpdGlvbnMuIEl0IGhhcyBhIGRlZmF1bHQgcHJvbXB0IHRoYXQgaXQgcmV0dXJuc1xuKiBpZiBub25lIG9mIHRoZSBjb25kaXRpb25zIGFyZSBtZXQuXG4qL1xudmFyIENvbmRpdGlvbmFsUHJvbXB0U2VsZWN0b3IgPSBjbGFzcyBleHRlbmRzIEJhc2VQcm9tcHRTZWxlY3RvciB7XG5cdGRlZmF1bHRQcm9tcHQ7XG5cdGNvbmRpdGlvbmFscztcblx0Y29uc3RydWN0b3IoZGVmYXVsdF9wcm9tcHQsIGNvbmRpdGlvbmFscyA9IFtdKSB7XG5cdFx0c3VwZXIoKTtcblx0XHR0aGlzLmRlZmF1bHRQcm9tcHQgPSBkZWZhdWx0X3Byb21wdDtcblx0XHR0aGlzLmNvbmRpdGlvbmFscyA9IGNvbmRpdGlvbmFscztcblx0fVxuXHQvKipcblx0KiBNZXRob2QgdGhhdCBzZWxlY3RzIGEgcHJvbXB0IGJhc2VkIG9uIGEgc2V0IG9mIGNvbmRpdGlvbnMuIElmIG5vbmUgb2Zcblx0KiB0aGUgY29uZGl0aW9ucyBhcmUgbWV0LCBpdCByZXR1cm5zIHRoZSBkZWZhdWx0IHByb21wdC5cblx0KiBAcGFyYW0gbGxtIFRoZSBsYW5ndWFnZSBtb2RlbCBmb3Igd2hpY2ggdG8gZ2V0IGEgcHJvbXB0LlxuXHQqIEByZXR1cm5zIEEgcHJvbXB0IHRlbXBsYXRlLlxuXHQqL1xuXHRnZXRQcm9tcHQobGxtKSB7XG5cdFx0Zm9yIChjb25zdCBbY29uZGl0aW9uLCBwcm9tcHRdIG9mIHRoaXMuY29uZGl0aW9uYWxzKSBpZiAoY29uZGl0aW9uKGxsbSkpIHJldHVybiBwcm9tcHQ7XG5cdFx0cmV0dXJuIHRoaXMuZGVmYXVsdFByb21wdDtcblx0fVxufTtcbi8qKlxuKiBUeXBlIGd1YXJkIGZ1bmN0aW9uIHRoYXQgY2hlY2tzIGlmIGEgZ2l2ZW4gbGFuZ3VhZ2UgbW9kZWwgaXMgb2YgdHlwZVxuKiBgQmFzZUxMTWAuXG4qL1xuZnVuY3Rpb24gaXNMTE0obGxtKSB7XG5cdHJldHVybiBsbG0uX21vZGVsVHlwZSgpID09PSBcImJhc2VfbGxtXCI7XG59XG4vKipcbiogVHlwZSBndWFyZCBmdW5jdGlvbiB0aGF0IGNoZWNrcyBpZiBhIGdpdmVuIGxhbmd1YWdlIG1vZGVsIGlzIG9mIHR5cGVcbiogYEJhc2VDaGF0TW9kZWxgLlxuKi9cbmZ1bmN0aW9uIGlzQ2hhdE1vZGVsKGxsbSkge1xuXHRyZXR1cm4gbGxtLl9tb2RlbFR5cGUoKSA9PT0gXCJiYXNlX2NoYXRfbW9kZWxcIjtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBCYXNlUHJvbXB0U2VsZWN0b3IsIENvbmRpdGlvbmFsUHJvbXB0U2VsZWN0b3IsIGlzQ2hhdE1vZGVsLCBpc0xMTSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uZGl0aW9uYWwuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/example_selectors/conditional.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/example_selectors/index.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/example_selectors/index.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseExampleSelector: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseExampleSelector),\n/* harmony export */   BasePromptSelector: () => (/* reexport safe */ _conditional_js__WEBPACK_IMPORTED_MODULE_2__.BasePromptSelector),\n/* harmony export */   ConditionalPromptSelector: () => (/* reexport safe */ _conditional_js__WEBPACK_IMPORTED_MODULE_2__.ConditionalPromptSelector),\n/* harmony export */   LengthBasedExampleSelector: () => (/* reexport safe */ _length_based_js__WEBPACK_IMPORTED_MODULE_3__.LengthBasedExampleSelector),\n/* harmony export */   SemanticSimilarityExampleSelector: () => (/* reexport safe */ _semantic_similarity_js__WEBPACK_IMPORTED_MODULE_4__.SemanticSimilarityExampleSelector),\n/* harmony export */   example_selectors_exports: () => (/* binding */ example_selectors_exports),\n/* harmony export */   isChatModel: () => (/* reexport safe */ _conditional_js__WEBPACK_IMPORTED_MODULE_2__.isChatModel),\n/* harmony export */   isLLM: () => (/* reexport safe */ _conditional_js__WEBPACK_IMPORTED_MODULE_2__.isLLM)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/example_selectors/base.js\");\n/* harmony import */ var _conditional_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./conditional.js */ \"(ssr)/./node_modules/@langchain/core/dist/example_selectors/conditional.js\");\n/* harmony import */ var _length_based_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./length_based.js */ \"(ssr)/./node_modules/@langchain/core/dist/example_selectors/length_based.js\");\n/* harmony import */ var _semantic_similarity_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./semantic_similarity.js */ \"(ssr)/./node_modules/@langchain/core/dist/example_selectors/semantic_similarity.js\");\n\n\n\n\n\n\n//#region src/example_selectors/index.ts\nvar example_selectors_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(example_selectors_exports, {\n\tBaseExampleSelector: () => _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseExampleSelector,\n\tBasePromptSelector: () => _conditional_js__WEBPACK_IMPORTED_MODULE_2__.BasePromptSelector,\n\tConditionalPromptSelector: () => _conditional_js__WEBPACK_IMPORTED_MODULE_2__.ConditionalPromptSelector,\n\tLengthBasedExampleSelector: () => _length_based_js__WEBPACK_IMPORTED_MODULE_3__.LengthBasedExampleSelector,\n\tSemanticSimilarityExampleSelector: () => _semantic_similarity_js__WEBPACK_IMPORTED_MODULE_4__.SemanticSimilarityExampleSelector,\n\tisChatModel: () => _conditional_js__WEBPACK_IMPORTED_MODULE_2__.isChatModel,\n\tisLLM: () => _conditional_js__WEBPACK_IMPORTED_MODULE_2__.isLLM\n});\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZXhhbXBsZV9zZWxlY3RvcnMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUEyRDtBQUNYO0FBQ3FEO0FBQ3RDO0FBQ2M7O0FBRTdFO0FBQ0E7QUFDQSxzRUFBUTtBQUNSLDRCQUE0Qix5REFBbUI7QUFDL0MsMkJBQTJCLCtEQUFrQjtBQUM3QyxrQ0FBa0Msc0VBQXlCO0FBQzNELG1DQUFtQyx3RUFBMEI7QUFDN0QsMENBQTBDLHNGQUFpQztBQUMzRSxvQkFBb0Isd0RBQVc7QUFDL0IsY0FBYyxrREFBSztBQUNuQixDQUFDOztBQUVEO0FBQzRMO0FBQzVMIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZXhhbXBsZV9zZWxlY3RvcnMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19leHBvcnQgfSBmcm9tIFwiLi4vX3ZpcnR1YWwvcm9sbGRvd25fcnVudGltZS5qc1wiO1xuaW1wb3J0IHsgQmFzZUV4YW1wbGVTZWxlY3RvciB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IEJhc2VQcm9tcHRTZWxlY3RvciwgQ29uZGl0aW9uYWxQcm9tcHRTZWxlY3RvciwgaXNDaGF0TW9kZWwsIGlzTExNIH0gZnJvbSBcIi4vY29uZGl0aW9uYWwuanNcIjtcbmltcG9ydCB7IExlbmd0aEJhc2VkRXhhbXBsZVNlbGVjdG9yIH0gZnJvbSBcIi4vbGVuZ3RoX2Jhc2VkLmpzXCI7XG5pbXBvcnQgeyBTZW1hbnRpY1NpbWlsYXJpdHlFeGFtcGxlU2VsZWN0b3IgfSBmcm9tIFwiLi9zZW1hbnRpY19zaW1pbGFyaXR5LmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvZXhhbXBsZV9zZWxlY3RvcnMvaW5kZXgudHNcbnZhciBleGFtcGxlX3NlbGVjdG9yc19leHBvcnRzID0ge307XG5fX2V4cG9ydChleGFtcGxlX3NlbGVjdG9yc19leHBvcnRzLCB7XG5cdEJhc2VFeGFtcGxlU2VsZWN0b3I6ICgpID0+IEJhc2VFeGFtcGxlU2VsZWN0b3IsXG5cdEJhc2VQcm9tcHRTZWxlY3RvcjogKCkgPT4gQmFzZVByb21wdFNlbGVjdG9yLFxuXHRDb25kaXRpb25hbFByb21wdFNlbGVjdG9yOiAoKSA9PiBDb25kaXRpb25hbFByb21wdFNlbGVjdG9yLFxuXHRMZW5ndGhCYXNlZEV4YW1wbGVTZWxlY3RvcjogKCkgPT4gTGVuZ3RoQmFzZWRFeGFtcGxlU2VsZWN0b3IsXG5cdFNlbWFudGljU2ltaWxhcml0eUV4YW1wbGVTZWxlY3RvcjogKCkgPT4gU2VtYW50aWNTaW1pbGFyaXR5RXhhbXBsZVNlbGVjdG9yLFxuXHRpc0NoYXRNb2RlbDogKCkgPT4gaXNDaGF0TW9kZWwsXG5cdGlzTExNOiAoKSA9PiBpc0xMTVxufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQmFzZUV4YW1wbGVTZWxlY3RvciwgQmFzZVByb21wdFNlbGVjdG9yLCBDb25kaXRpb25hbFByb21wdFNlbGVjdG9yLCBMZW5ndGhCYXNlZEV4YW1wbGVTZWxlY3RvciwgU2VtYW50aWNTaW1pbGFyaXR5RXhhbXBsZVNlbGVjdG9yLCBleGFtcGxlX3NlbGVjdG9yc19leHBvcnRzLCBpc0NoYXRNb2RlbCwgaXNMTE0gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/example_selectors/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/example_selectors/length_based.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/example_selectors/length_based.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LengthBasedExampleSelector: () => (/* binding */ LengthBasedExampleSelector)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/example_selectors/base.js\");\n\n\n//#region src/example_selectors/length_based.ts\n/**\n* Calculates the length of a text based on the number of words and lines.\n*/\nfunction getLengthBased(text) {\n\treturn text.split(/\\n| /).length;\n}\n/**\n* A specialized example selector that selects examples based on their\n* length, ensuring that the total length of the selected examples does\n* not exceed a specified maximum length.\n* @example\n* ```typescript\n* const exampleSelector = new LengthBasedExampleSelector(\n*   [\n*     { input: \"happy\", output: \"sad\" },\n*     { input: \"tall\", output: \"short\" },\n*     { input: \"energetic\", output: \"lethargic\" },\n*     { input: \"sunny\", output: \"gloomy\" },\n*     { input: \"windy\", output: \"calm\" },\n*   ],\n*   {\n*     examplePrompt: new PromptTemplate({\n*       inputVariables: [\"input\", \"output\"],\n*       template: \"Input: {input}\\nOutput: {output}\",\n*     }),\n*     maxLength: 25,\n*   },\n* );\n* const dynamicPrompt = new FewShotPromptTemplate({\n*   exampleSelector,\n*   examplePrompt: new PromptTemplate({\n*     inputVariables: [\"input\", \"output\"],\n*     template: \"Input: {input}\\nOutput: {output}\",\n*   }),\n*   prefix: \"Give the antonym of every input\",\n*   suffix: \"Input: {adjective}\\nOutput:\",\n*   inputVariables: [\"adjective\"],\n* });\n* console.log(dynamicPrompt.format({ adjective: \"big\" }));\n* console.log(\n*   dynamicPrompt.format({\n*     adjective:\n*       \"big and huge and massive and large and gigantic and tall and much much much much much bigger than everything else\",\n*   }),\n* );\n* ```\n*/\nvar LengthBasedExampleSelector = class LengthBasedExampleSelector extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseExampleSelector {\n\texamples = [];\n\texamplePrompt;\n\tgetTextLength = getLengthBased;\n\tmaxLength = 2048;\n\texampleTextLengths = [];\n\tconstructor(data) {\n\t\tsuper(data);\n\t\tthis.examplePrompt = data.examplePrompt;\n\t\tthis.maxLength = data.maxLength ?? 2048;\n\t\tthis.getTextLength = data.getTextLength ?? getLengthBased;\n\t}\n\t/**\n\t* Adds an example to the list of examples and calculates its length.\n\t* @param example The example to be added.\n\t* @returns Promise that resolves when the example has been added and its length calculated.\n\t*/\n\tasync addExample(example) {\n\t\tthis.examples.push(example);\n\t\tconst stringExample = await this.examplePrompt.format(example);\n\t\tthis.exampleTextLengths.push(this.getTextLength(stringExample));\n\t}\n\t/**\n\t* Calculates the lengths of the examples.\n\t* @param v Array of lengths of the examples.\n\t* @param values Instance of LengthBasedExampleSelector.\n\t* @returns Promise that resolves with an array of lengths of the examples.\n\t*/\n\tasync calculateExampleTextLengths(v, values) {\n\t\tif (v.length > 0) return v;\n\t\tconst { examples, examplePrompt } = values;\n\t\tconst stringExamples = await Promise.all(examples.map((eg) => examplePrompt.format(eg)));\n\t\treturn stringExamples.map((eg) => this.getTextLength(eg));\n\t}\n\t/**\n\t* Selects examples until the total length of the selected examples\n\t* reaches the maxLength.\n\t* @param inputVariables The input variables for the examples.\n\t* @returns Promise that resolves with an array of selected examples.\n\t*/\n\tasync selectExamples(inputVariables) {\n\t\tconst inputs = Object.values(inputVariables).join(\" \");\n\t\tlet remainingLength = this.maxLength - this.getTextLength(inputs);\n\t\tlet i = 0;\n\t\tconst examples = [];\n\t\twhile (remainingLength > 0 && i < this.examples.length) {\n\t\t\tconst newLength = remainingLength - this.exampleTextLengths[i];\n\t\t\tif (newLength < 0) break;\n\t\t\telse {\n\t\t\t\texamples.push(this.examples[i]);\n\t\t\t\tremainingLength = newLength;\n\t\t\t}\n\t\t\ti += 1;\n\t\t}\n\t\treturn examples;\n\t}\n\t/**\n\t* Creates a new instance of LengthBasedExampleSelector and adds a list of\n\t* examples to it.\n\t* @param examples Array of examples to be added.\n\t* @param args Input parameters for the LengthBasedExampleSelector.\n\t* @returns Promise that resolves with a new instance of LengthBasedExampleSelector with the examples added.\n\t*/\n\tstatic async fromExamples(examples, args) {\n\t\tconst selector = new LengthBasedExampleSelector(args);\n\t\tawait Promise.all(examples.map((eg) => selector.addExample(eg)));\n\t\treturn selector;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=length_based.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZXhhbXBsZV9zZWxlY3RvcnMvbGVuZ3RoX2Jhc2VkLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWdEOztBQUVoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLCtCQUErQjtBQUN2QyxRQUFRLGdDQUFnQztBQUN4QyxRQUFRLHlDQUF5QztBQUNqRCxRQUFRLGtDQUFrQztBQUMxQyxRQUFRLGdDQUFnQztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixNQUFNLFdBQVcsT0FBTztBQUNuRCxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixNQUFNLFdBQVcsT0FBTztBQUNqRCxLQUFLO0FBQ0w7QUFDQSxxQkFBcUIsVUFBVTtBQUMvQjtBQUNBLEdBQUc7QUFDSCxxQ0FBcUMsa0JBQWtCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLDBFQUEwRSx5REFBbUI7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsMEJBQTBCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDc0M7QUFDdEMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9leGFtcGxlX3NlbGVjdG9ycy9sZW5ndGhfYmFzZWQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZUV4YW1wbGVTZWxlY3RvciB9IGZyb20gXCIuL2Jhc2UuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9leGFtcGxlX3NlbGVjdG9ycy9sZW5ndGhfYmFzZWQudHNcbi8qKlxuKiBDYWxjdWxhdGVzIHRoZSBsZW5ndGggb2YgYSB0ZXh0IGJhc2VkIG9uIHRoZSBudW1iZXIgb2Ygd29yZHMgYW5kIGxpbmVzLlxuKi9cbmZ1bmN0aW9uIGdldExlbmd0aEJhc2VkKHRleHQpIHtcblx0cmV0dXJuIHRleHQuc3BsaXQoL1xcbnwgLykubGVuZ3RoO1xufVxuLyoqXG4qIEEgc3BlY2lhbGl6ZWQgZXhhbXBsZSBzZWxlY3RvciB0aGF0IHNlbGVjdHMgZXhhbXBsZXMgYmFzZWQgb24gdGhlaXJcbiogbGVuZ3RoLCBlbnN1cmluZyB0aGF0IHRoZSB0b3RhbCBsZW5ndGggb2YgdGhlIHNlbGVjdGVkIGV4YW1wbGVzIGRvZXNcbiogbm90IGV4Y2VlZCBhIHNwZWNpZmllZCBtYXhpbXVtIGxlbmd0aC5cbiogQGV4YW1wbGVcbiogYGBgdHlwZXNjcmlwdFxuKiBjb25zdCBleGFtcGxlU2VsZWN0b3IgPSBuZXcgTGVuZ3RoQmFzZWRFeGFtcGxlU2VsZWN0b3IoXG4qICAgW1xuKiAgICAgeyBpbnB1dDogXCJoYXBweVwiLCBvdXRwdXQ6IFwic2FkXCIgfSxcbiogICAgIHsgaW5wdXQ6IFwidGFsbFwiLCBvdXRwdXQ6IFwic2hvcnRcIiB9LFxuKiAgICAgeyBpbnB1dDogXCJlbmVyZ2V0aWNcIiwgb3V0cHV0OiBcImxldGhhcmdpY1wiIH0sXG4qICAgICB7IGlucHV0OiBcInN1bm55XCIsIG91dHB1dDogXCJnbG9vbXlcIiB9LFxuKiAgICAgeyBpbnB1dDogXCJ3aW5keVwiLCBvdXRwdXQ6IFwiY2FsbVwiIH0sXG4qICAgXSxcbiogICB7XG4qICAgICBleGFtcGxlUHJvbXB0OiBuZXcgUHJvbXB0VGVtcGxhdGUoe1xuKiAgICAgICBpbnB1dFZhcmlhYmxlczogW1wiaW5wdXRcIiwgXCJvdXRwdXRcIl0sXG4qICAgICAgIHRlbXBsYXRlOiBcIklucHV0OiB7aW5wdXR9XFxuT3V0cHV0OiB7b3V0cHV0fVwiLFxuKiAgICAgfSksXG4qICAgICBtYXhMZW5ndGg6IDI1LFxuKiAgIH0sXG4qICk7XG4qIGNvbnN0IGR5bmFtaWNQcm9tcHQgPSBuZXcgRmV3U2hvdFByb21wdFRlbXBsYXRlKHtcbiogICBleGFtcGxlU2VsZWN0b3IsXG4qICAgZXhhbXBsZVByb21wdDogbmV3IFByb21wdFRlbXBsYXRlKHtcbiogICAgIGlucHV0VmFyaWFibGVzOiBbXCJpbnB1dFwiLCBcIm91dHB1dFwiXSxcbiogICAgIHRlbXBsYXRlOiBcIklucHV0OiB7aW5wdXR9XFxuT3V0cHV0OiB7b3V0cHV0fVwiLFxuKiAgIH0pLFxuKiAgIHByZWZpeDogXCJHaXZlIHRoZSBhbnRvbnltIG9mIGV2ZXJ5IGlucHV0XCIsXG4qICAgc3VmZml4OiBcIklucHV0OiB7YWRqZWN0aXZlfVxcbk91dHB1dDpcIixcbiogICBpbnB1dFZhcmlhYmxlczogW1wiYWRqZWN0aXZlXCJdLFxuKiB9KTtcbiogY29uc29sZS5sb2coZHluYW1pY1Byb21wdC5mb3JtYXQoeyBhZGplY3RpdmU6IFwiYmlnXCIgfSkpO1xuKiBjb25zb2xlLmxvZyhcbiogICBkeW5hbWljUHJvbXB0LmZvcm1hdCh7XG4qICAgICBhZGplY3RpdmU6XG4qICAgICAgIFwiYmlnIGFuZCBodWdlIGFuZCBtYXNzaXZlIGFuZCBsYXJnZSBhbmQgZ2lnYW50aWMgYW5kIHRhbGwgYW5kIG11Y2ggbXVjaCBtdWNoIG11Y2ggbXVjaCBiaWdnZXIgdGhhbiBldmVyeXRoaW5nIGVsc2VcIixcbiogICB9KSxcbiogKTtcbiogYGBgXG4qL1xudmFyIExlbmd0aEJhc2VkRXhhbXBsZVNlbGVjdG9yID0gY2xhc3MgTGVuZ3RoQmFzZWRFeGFtcGxlU2VsZWN0b3IgZXh0ZW5kcyBCYXNlRXhhbXBsZVNlbGVjdG9yIHtcblx0ZXhhbXBsZXMgPSBbXTtcblx0ZXhhbXBsZVByb21wdDtcblx0Z2V0VGV4dExlbmd0aCA9IGdldExlbmd0aEJhc2VkO1xuXHRtYXhMZW5ndGggPSAyMDQ4O1xuXHRleGFtcGxlVGV4dExlbmd0aHMgPSBbXTtcblx0Y29uc3RydWN0b3IoZGF0YSkge1xuXHRcdHN1cGVyKGRhdGEpO1xuXHRcdHRoaXMuZXhhbXBsZVByb21wdCA9IGRhdGEuZXhhbXBsZVByb21wdDtcblx0XHR0aGlzLm1heExlbmd0aCA9IGRhdGEubWF4TGVuZ3RoID8/IDIwNDg7XG5cdFx0dGhpcy5nZXRUZXh0TGVuZ3RoID0gZGF0YS5nZXRUZXh0TGVuZ3RoID8/IGdldExlbmd0aEJhc2VkO1xuXHR9XG5cdC8qKlxuXHQqIEFkZHMgYW4gZXhhbXBsZSB0byB0aGUgbGlzdCBvZiBleGFtcGxlcyBhbmQgY2FsY3VsYXRlcyBpdHMgbGVuZ3RoLlxuXHQqIEBwYXJhbSBleGFtcGxlIFRoZSBleGFtcGxlIHRvIGJlIGFkZGVkLlxuXHQqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBleGFtcGxlIGhhcyBiZWVuIGFkZGVkIGFuZCBpdHMgbGVuZ3RoIGNhbGN1bGF0ZWQuXG5cdCovXG5cdGFzeW5jIGFkZEV4YW1wbGUoZXhhbXBsZSkge1xuXHRcdHRoaXMuZXhhbXBsZXMucHVzaChleGFtcGxlKTtcblx0XHRjb25zdCBzdHJpbmdFeGFtcGxlID0gYXdhaXQgdGhpcy5leGFtcGxlUHJvbXB0LmZvcm1hdChleGFtcGxlKTtcblx0XHR0aGlzLmV4YW1wbGVUZXh0TGVuZ3Rocy5wdXNoKHRoaXMuZ2V0VGV4dExlbmd0aChzdHJpbmdFeGFtcGxlKSk7XG5cdH1cblx0LyoqXG5cdCogQ2FsY3VsYXRlcyB0aGUgbGVuZ3RocyBvZiB0aGUgZXhhbXBsZXMuXG5cdCogQHBhcmFtIHYgQXJyYXkgb2YgbGVuZ3RocyBvZiB0aGUgZXhhbXBsZXMuXG5cdCogQHBhcmFtIHZhbHVlcyBJbnN0YW5jZSBvZiBMZW5ndGhCYXNlZEV4YW1wbGVTZWxlY3Rvci5cblx0KiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBhbiBhcnJheSBvZiBsZW5ndGhzIG9mIHRoZSBleGFtcGxlcy5cblx0Ki9cblx0YXN5bmMgY2FsY3VsYXRlRXhhbXBsZVRleHRMZW5ndGhzKHYsIHZhbHVlcykge1xuXHRcdGlmICh2Lmxlbmd0aCA+IDApIHJldHVybiB2O1xuXHRcdGNvbnN0IHsgZXhhbXBsZXMsIGV4YW1wbGVQcm9tcHQgfSA9IHZhbHVlcztcblx0XHRjb25zdCBzdHJpbmdFeGFtcGxlcyA9IGF3YWl0IFByb21pc2UuYWxsKGV4YW1wbGVzLm1hcCgoZWcpID0+IGV4YW1wbGVQcm9tcHQuZm9ybWF0KGVnKSkpO1xuXHRcdHJldHVybiBzdHJpbmdFeGFtcGxlcy5tYXAoKGVnKSA9PiB0aGlzLmdldFRleHRMZW5ndGgoZWcpKTtcblx0fVxuXHQvKipcblx0KiBTZWxlY3RzIGV4YW1wbGVzIHVudGlsIHRoZSB0b3RhbCBsZW5ndGggb2YgdGhlIHNlbGVjdGVkIGV4YW1wbGVzXG5cdCogcmVhY2hlcyB0aGUgbWF4TGVuZ3RoLlxuXHQqIEBwYXJhbSBpbnB1dFZhcmlhYmxlcyBUaGUgaW5wdXQgdmFyaWFibGVzIGZvciB0aGUgZXhhbXBsZXMuXG5cdCogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYW4gYXJyYXkgb2Ygc2VsZWN0ZWQgZXhhbXBsZXMuXG5cdCovXG5cdGFzeW5jIHNlbGVjdEV4YW1wbGVzKGlucHV0VmFyaWFibGVzKSB7XG5cdFx0Y29uc3QgaW5wdXRzID0gT2JqZWN0LnZhbHVlcyhpbnB1dFZhcmlhYmxlcykuam9pbihcIiBcIik7XG5cdFx0bGV0IHJlbWFpbmluZ0xlbmd0aCA9IHRoaXMubWF4TGVuZ3RoIC0gdGhpcy5nZXRUZXh0TGVuZ3RoKGlucHV0cyk7XG5cdFx0bGV0IGkgPSAwO1xuXHRcdGNvbnN0IGV4YW1wbGVzID0gW107XG5cdFx0d2hpbGUgKHJlbWFpbmluZ0xlbmd0aCA+IDAgJiYgaSA8IHRoaXMuZXhhbXBsZXMubGVuZ3RoKSB7XG5cdFx0XHRjb25zdCBuZXdMZW5ndGggPSByZW1haW5pbmdMZW5ndGggLSB0aGlzLmV4YW1wbGVUZXh0TGVuZ3Roc1tpXTtcblx0XHRcdGlmIChuZXdMZW5ndGggPCAwKSBicmVhaztcblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRleGFtcGxlcy5wdXNoKHRoaXMuZXhhbXBsZXNbaV0pO1xuXHRcdFx0XHRyZW1haW5pbmdMZW5ndGggPSBuZXdMZW5ndGg7XG5cdFx0XHR9XG5cdFx0XHRpICs9IDE7XG5cdFx0fVxuXHRcdHJldHVybiBleGFtcGxlcztcblx0fVxuXHQvKipcblx0KiBDcmVhdGVzIGEgbmV3IGluc3RhbmNlIG9mIExlbmd0aEJhc2VkRXhhbXBsZVNlbGVjdG9yIGFuZCBhZGRzIGEgbGlzdCBvZlxuXHQqIGV4YW1wbGVzIHRvIGl0LlxuXHQqIEBwYXJhbSBleGFtcGxlcyBBcnJheSBvZiBleGFtcGxlcyB0byBiZSBhZGRlZC5cblx0KiBAcGFyYW0gYXJncyBJbnB1dCBwYXJhbWV0ZXJzIGZvciB0aGUgTGVuZ3RoQmFzZWRFeGFtcGxlU2VsZWN0b3IuXG5cdCogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYSBuZXcgaW5zdGFuY2Ugb2YgTGVuZ3RoQmFzZWRFeGFtcGxlU2VsZWN0b3Igd2l0aCB0aGUgZXhhbXBsZXMgYWRkZWQuXG5cdCovXG5cdHN0YXRpYyBhc3luYyBmcm9tRXhhbXBsZXMoZXhhbXBsZXMsIGFyZ3MpIHtcblx0XHRjb25zdCBzZWxlY3RvciA9IG5ldyBMZW5ndGhCYXNlZEV4YW1wbGVTZWxlY3RvcihhcmdzKTtcblx0XHRhd2FpdCBQcm9taXNlLmFsbChleGFtcGxlcy5tYXAoKGVnKSA9PiBzZWxlY3Rvci5hZGRFeGFtcGxlKGVnKSkpO1xuXHRcdHJldHVybiBzZWxlY3Rvcjtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBMZW5ndGhCYXNlZEV4YW1wbGVTZWxlY3RvciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGVuZ3RoX2Jhc2VkLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/example_selectors/length_based.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/example_selectors/semantic_similarity.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/example_selectors/semantic_similarity.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SemanticSimilarityExampleSelector: () => (/* binding */ SemanticSimilarityExampleSelector)\n/* harmony export */ });\n/* harmony import */ var _documents_document_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../documents/document.js */ \"(ssr)/./node_modules/@langchain/core/dist/documents/document.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/example_selectors/base.js\");\n\n\n\n//#region src/example_selectors/semantic_similarity.ts\nfunction sortedValues(values) {\n\treturn Object.keys(values).sort().map((key) => values[key]);\n}\n/**\n* Class that selects examples based on semantic similarity. It extends\n* the BaseExampleSelector class.\n* @example\n* ```typescript\n* const exampleSelector = await SemanticSimilarityExampleSelector.fromExamples(\n*   [\n*     { input: \"happy\", output: \"sad\" },\n*     { input: \"tall\", output: \"short\" },\n*     { input: \"energetic\", output: \"lethargic\" },\n*     { input: \"sunny\", output: \"gloomy\" },\n*     { input: \"windy\", output: \"calm\" },\n*   ],\n*   new OpenAIEmbeddings(),\n*   HNSWLib,\n*   { k: 1 },\n* );\n* const dynamicPrompt = new FewShotPromptTemplate({\n*   exampleSelector,\n*   examplePrompt: PromptTemplate.fromTemplate(\n*     \"Input: {input}\\nOutput: {output}\",\n*   ),\n*   prefix: \"Give the antonym of every input\",\n*   suffix: \"Input: {adjective}\\nOutput:\",\n*   inputVariables: [\"adjective\"],\n* });\n* console.log(await dynamicPrompt.format({ adjective: \"rainy\" }));\n* ```\n*/\nvar SemanticSimilarityExampleSelector = class SemanticSimilarityExampleSelector extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseExampleSelector {\n\tvectorStoreRetriever;\n\texampleKeys;\n\tinputKeys;\n\tconstructor(data) {\n\t\tsuper(data);\n\t\tthis.exampleKeys = data.exampleKeys;\n\t\tthis.inputKeys = data.inputKeys;\n\t\tif (data.vectorStore !== void 0) this.vectorStoreRetriever = data.vectorStore.asRetriever({\n\t\t\tk: data.k ?? 4,\n\t\t\tfilter: data.filter\n\t\t});\n\t\telse if (data.vectorStoreRetriever) this.vectorStoreRetriever = data.vectorStoreRetriever;\n\t\telse throw new Error(`You must specify one of \"vectorStore\" and \"vectorStoreRetriever\".`);\n\t}\n\t/**\n\t* Method that adds a new example to the vectorStore. The example is\n\t* converted to a string and added to the vectorStore as a document.\n\t* @param example The example to be added to the vectorStore.\n\t* @returns Promise that resolves when the example has been added to the vectorStore.\n\t*/\n\tasync addExample(example) {\n\t\tconst inputKeys = this.inputKeys ?? Object.keys(example);\n\t\tconst stringExample = sortedValues(inputKeys.reduce((acc, key) => ({\n\t\t\t...acc,\n\t\t\t[key]: example[key]\n\t\t}), {})).join(\" \");\n\t\tawait this.vectorStoreRetriever.addDocuments([new _documents_document_js__WEBPACK_IMPORTED_MODULE_0__.Document({\n\t\t\tpageContent: stringExample,\n\t\t\tmetadata: example\n\t\t})]);\n\t}\n\t/**\n\t* Method that selects which examples to use based on semantic similarity.\n\t* It performs a similarity search in the vectorStore using the input\n\t* variables and returns the examples with the highest similarity.\n\t* @param inputVariables The input variables used for the similarity search.\n\t* @returns Promise that resolves with an array of the selected examples.\n\t*/\n\tasync selectExamples(inputVariables) {\n\t\tconst inputKeys = this.inputKeys ?? Object.keys(inputVariables);\n\t\tconst query = sortedValues(inputKeys.reduce((acc, key) => ({\n\t\t\t...acc,\n\t\t\t[key]: inputVariables[key]\n\t\t}), {})).join(\" \");\n\t\tconst exampleDocs = await this.vectorStoreRetriever.invoke(query);\n\t\tconst examples = exampleDocs.map((doc) => doc.metadata);\n\t\tif (this.exampleKeys) return examples.map((example) => this.exampleKeys.reduce((acc, key) => ({\n\t\t\t...acc,\n\t\t\t[key]: example[key]\n\t\t}), {}));\n\t\treturn examples;\n\t}\n\t/**\n\t* Static method that creates a new instance of\n\t* SemanticSimilarityExampleSelector. It takes a list of examples, an\n\t* instance of Embeddings, a VectorStore class, and an options object as\n\t* parameters. It converts the examples to strings, creates a VectorStore\n\t* from the strings and the embeddings, and returns a new\n\t* SemanticSimilarityExampleSelector with the created VectorStore and the\n\t* options provided.\n\t* @param examples The list of examples to be used.\n\t* @param embeddings The instance of Embeddings to be used.\n\t* @param vectorStoreCls The VectorStore class to be used.\n\t* @param options The options object for the SemanticSimilarityExampleSelector.\n\t* @returns Promise that resolves with a new instance of SemanticSimilarityExampleSelector.\n\t*/\n\tstatic async fromExamples(examples, embeddings, vectorStoreCls, options = {}) {\n\t\tconst inputKeys = options.inputKeys ?? null;\n\t\tconst stringExamples = examples.map((example) => sortedValues(inputKeys ? inputKeys.reduce((acc, key) => ({\n\t\t\t...acc,\n\t\t\t[key]: example[key]\n\t\t}), {}) : example).join(\" \"));\n\t\tconst vectorStore = await vectorStoreCls.fromTexts(stringExamples, examples, embeddings, options);\n\t\treturn new SemanticSimilarityExampleSelector({\n\t\t\tvectorStore,\n\t\t\tk: options.k ?? 4,\n\t\t\texampleKeys: options.exampleKeys,\n\t\t\tinputKeys: options.inputKeys\n\t\t});\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=semantic_similarity.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZXhhbXBsZV9zZWxlY3RvcnMvc2VtYW50aWNfc2ltaWxhcml0eS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBb0Q7QUFDSjs7QUFFaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsK0JBQStCO0FBQ3ZDLFFBQVEsZ0NBQWdDO0FBQ3hDLFFBQVEseUNBQXlDO0FBQ2pELFFBQVEsa0NBQWtDO0FBQzFDLFFBQVEsZ0NBQWdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLE1BQU0sTUFBTTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxNQUFNLFdBQVcsT0FBTztBQUN2QztBQUNBO0FBQ0EscUJBQXFCLFVBQVU7QUFDL0I7QUFDQSxHQUFHO0FBQ0gsMkNBQTJDLG9CQUFvQjtBQUMvRDtBQUNBO0FBQ0Esd0ZBQXdGLHlEQUFtQjtBQUMzRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxLQUFLO0FBQ1Isb0RBQW9ELDREQUFRO0FBQzVEO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLEtBQUs7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxLQUFLO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2RUFBNkU7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLEtBQUs7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUM2QztBQUM3QyIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2V4YW1wbGVfc2VsZWN0b3JzL3NlbWFudGljX3NpbWlsYXJpdHkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRG9jdW1lbnQgfSBmcm9tIFwiLi4vZG9jdW1lbnRzL2RvY3VtZW50LmpzXCI7XG5pbXBvcnQgeyBCYXNlRXhhbXBsZVNlbGVjdG9yIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL2V4YW1wbGVfc2VsZWN0b3JzL3NlbWFudGljX3NpbWlsYXJpdHkudHNcbmZ1bmN0aW9uIHNvcnRlZFZhbHVlcyh2YWx1ZXMpIHtcblx0cmV0dXJuIE9iamVjdC5rZXlzKHZhbHVlcykuc29ydCgpLm1hcCgoa2V5KSA9PiB2YWx1ZXNba2V5XSk7XG59XG4vKipcbiogQ2xhc3MgdGhhdCBzZWxlY3RzIGV4YW1wbGVzIGJhc2VkIG9uIHNlbWFudGljIHNpbWlsYXJpdHkuIEl0IGV4dGVuZHNcbiogdGhlIEJhc2VFeGFtcGxlU2VsZWN0b3IgY2xhc3MuXG4qIEBleGFtcGxlXG4qIGBgYHR5cGVzY3JpcHRcbiogY29uc3QgZXhhbXBsZVNlbGVjdG9yID0gYXdhaXQgU2VtYW50aWNTaW1pbGFyaXR5RXhhbXBsZVNlbGVjdG9yLmZyb21FeGFtcGxlcyhcbiogICBbXG4qICAgICB7IGlucHV0OiBcImhhcHB5XCIsIG91dHB1dDogXCJzYWRcIiB9LFxuKiAgICAgeyBpbnB1dDogXCJ0YWxsXCIsIG91dHB1dDogXCJzaG9ydFwiIH0sXG4qICAgICB7IGlucHV0OiBcImVuZXJnZXRpY1wiLCBvdXRwdXQ6IFwibGV0aGFyZ2ljXCIgfSxcbiogICAgIHsgaW5wdXQ6IFwic3VubnlcIiwgb3V0cHV0OiBcImdsb29teVwiIH0sXG4qICAgICB7IGlucHV0OiBcIndpbmR5XCIsIG91dHB1dDogXCJjYWxtXCIgfSxcbiogICBdLFxuKiAgIG5ldyBPcGVuQUlFbWJlZGRpbmdzKCksXG4qICAgSE5TV0xpYixcbiogICB7IGs6IDEgfSxcbiogKTtcbiogY29uc3QgZHluYW1pY1Byb21wdCA9IG5ldyBGZXdTaG90UHJvbXB0VGVtcGxhdGUoe1xuKiAgIGV4YW1wbGVTZWxlY3RvcixcbiogICBleGFtcGxlUHJvbXB0OiBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXG4qICAgICBcIklucHV0OiB7aW5wdXR9XFxuT3V0cHV0OiB7b3V0cHV0fVwiLFxuKiAgICksXG4qICAgcHJlZml4OiBcIkdpdmUgdGhlIGFudG9ueW0gb2YgZXZlcnkgaW5wdXRcIixcbiogICBzdWZmaXg6IFwiSW5wdXQ6IHthZGplY3RpdmV9XFxuT3V0cHV0OlwiLFxuKiAgIGlucHV0VmFyaWFibGVzOiBbXCJhZGplY3RpdmVcIl0sXG4qIH0pO1xuKiBjb25zb2xlLmxvZyhhd2FpdCBkeW5hbWljUHJvbXB0LmZvcm1hdCh7IGFkamVjdGl2ZTogXCJyYWlueVwiIH0pKTtcbiogYGBgXG4qL1xudmFyIFNlbWFudGljU2ltaWxhcml0eUV4YW1wbGVTZWxlY3RvciA9IGNsYXNzIFNlbWFudGljU2ltaWxhcml0eUV4YW1wbGVTZWxlY3RvciBleHRlbmRzIEJhc2VFeGFtcGxlU2VsZWN0b3Ige1xuXHR2ZWN0b3JTdG9yZVJldHJpZXZlcjtcblx0ZXhhbXBsZUtleXM7XG5cdGlucHV0S2V5cztcblx0Y29uc3RydWN0b3IoZGF0YSkge1xuXHRcdHN1cGVyKGRhdGEpO1xuXHRcdHRoaXMuZXhhbXBsZUtleXMgPSBkYXRhLmV4YW1wbGVLZXlzO1xuXHRcdHRoaXMuaW5wdXRLZXlzID0gZGF0YS5pbnB1dEtleXM7XG5cdFx0aWYgKGRhdGEudmVjdG9yU3RvcmUgIT09IHZvaWQgMCkgdGhpcy52ZWN0b3JTdG9yZVJldHJpZXZlciA9IGRhdGEudmVjdG9yU3RvcmUuYXNSZXRyaWV2ZXIoe1xuXHRcdFx0azogZGF0YS5rID8/IDQsXG5cdFx0XHRmaWx0ZXI6IGRhdGEuZmlsdGVyXG5cdFx0fSk7XG5cdFx0ZWxzZSBpZiAoZGF0YS52ZWN0b3JTdG9yZVJldHJpZXZlcikgdGhpcy52ZWN0b3JTdG9yZVJldHJpZXZlciA9IGRhdGEudmVjdG9yU3RvcmVSZXRyaWV2ZXI7XG5cdFx0ZWxzZSB0aHJvdyBuZXcgRXJyb3IoYFlvdSBtdXN0IHNwZWNpZnkgb25lIG9mIFwidmVjdG9yU3RvcmVcIiBhbmQgXCJ2ZWN0b3JTdG9yZVJldHJpZXZlclwiLmApO1xuXHR9XG5cdC8qKlxuXHQqIE1ldGhvZCB0aGF0IGFkZHMgYSBuZXcgZXhhbXBsZSB0byB0aGUgdmVjdG9yU3RvcmUuIFRoZSBleGFtcGxlIGlzXG5cdCogY29udmVydGVkIHRvIGEgc3RyaW5nIGFuZCBhZGRlZCB0byB0aGUgdmVjdG9yU3RvcmUgYXMgYSBkb2N1bWVudC5cblx0KiBAcGFyYW0gZXhhbXBsZSBUaGUgZXhhbXBsZSB0byBiZSBhZGRlZCB0byB0aGUgdmVjdG9yU3RvcmUuXG5cdCogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGV4YW1wbGUgaGFzIGJlZW4gYWRkZWQgdG8gdGhlIHZlY3RvclN0b3JlLlxuXHQqL1xuXHRhc3luYyBhZGRFeGFtcGxlKGV4YW1wbGUpIHtcblx0XHRjb25zdCBpbnB1dEtleXMgPSB0aGlzLmlucHV0S2V5cyA/PyBPYmplY3Qua2V5cyhleGFtcGxlKTtcblx0XHRjb25zdCBzdHJpbmdFeGFtcGxlID0gc29ydGVkVmFsdWVzKGlucHV0S2V5cy5yZWR1Y2UoKGFjYywga2V5KSA9PiAoe1xuXHRcdFx0Li4uYWNjLFxuXHRcdFx0W2tleV06IGV4YW1wbGVba2V5XVxuXHRcdH0pLCB7fSkpLmpvaW4oXCIgXCIpO1xuXHRcdGF3YWl0IHRoaXMudmVjdG9yU3RvcmVSZXRyaWV2ZXIuYWRkRG9jdW1lbnRzKFtuZXcgRG9jdW1lbnQoe1xuXHRcdFx0cGFnZUNvbnRlbnQ6IHN0cmluZ0V4YW1wbGUsXG5cdFx0XHRtZXRhZGF0YTogZXhhbXBsZVxuXHRcdH0pXSk7XG5cdH1cblx0LyoqXG5cdCogTWV0aG9kIHRoYXQgc2VsZWN0cyB3aGljaCBleGFtcGxlcyB0byB1c2UgYmFzZWQgb24gc2VtYW50aWMgc2ltaWxhcml0eS5cblx0KiBJdCBwZXJmb3JtcyBhIHNpbWlsYXJpdHkgc2VhcmNoIGluIHRoZSB2ZWN0b3JTdG9yZSB1c2luZyB0aGUgaW5wdXRcblx0KiB2YXJpYWJsZXMgYW5kIHJldHVybnMgdGhlIGV4YW1wbGVzIHdpdGggdGhlIGhpZ2hlc3Qgc2ltaWxhcml0eS5cblx0KiBAcGFyYW0gaW5wdXRWYXJpYWJsZXMgVGhlIGlucHV0IHZhcmlhYmxlcyB1c2VkIGZvciB0aGUgc2ltaWxhcml0eSBzZWFyY2guXG5cdCogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYW4gYXJyYXkgb2YgdGhlIHNlbGVjdGVkIGV4YW1wbGVzLlxuXHQqL1xuXHRhc3luYyBzZWxlY3RFeGFtcGxlcyhpbnB1dFZhcmlhYmxlcykge1xuXHRcdGNvbnN0IGlucHV0S2V5cyA9IHRoaXMuaW5wdXRLZXlzID8/IE9iamVjdC5rZXlzKGlucHV0VmFyaWFibGVzKTtcblx0XHRjb25zdCBxdWVyeSA9IHNvcnRlZFZhbHVlcyhpbnB1dEtleXMucmVkdWNlKChhY2MsIGtleSkgPT4gKHtcblx0XHRcdC4uLmFjYyxcblx0XHRcdFtrZXldOiBpbnB1dFZhcmlhYmxlc1trZXldXG5cdFx0fSksIHt9KSkuam9pbihcIiBcIik7XG5cdFx0Y29uc3QgZXhhbXBsZURvY3MgPSBhd2FpdCB0aGlzLnZlY3RvclN0b3JlUmV0cmlldmVyLmludm9rZShxdWVyeSk7XG5cdFx0Y29uc3QgZXhhbXBsZXMgPSBleGFtcGxlRG9jcy5tYXAoKGRvYykgPT4gZG9jLm1ldGFkYXRhKTtcblx0XHRpZiAodGhpcy5leGFtcGxlS2V5cykgcmV0dXJuIGV4YW1wbGVzLm1hcCgoZXhhbXBsZSkgPT4gdGhpcy5leGFtcGxlS2V5cy5yZWR1Y2UoKGFjYywga2V5KSA9PiAoe1xuXHRcdFx0Li4uYWNjLFxuXHRcdFx0W2tleV06IGV4YW1wbGVba2V5XVxuXHRcdH0pLCB7fSkpO1xuXHRcdHJldHVybiBleGFtcGxlcztcblx0fVxuXHQvKipcblx0KiBTdGF0aWMgbWV0aG9kIHRoYXQgY3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBvZlxuXHQqIFNlbWFudGljU2ltaWxhcml0eUV4YW1wbGVTZWxlY3Rvci4gSXQgdGFrZXMgYSBsaXN0IG9mIGV4YW1wbGVzLCBhblxuXHQqIGluc3RhbmNlIG9mIEVtYmVkZGluZ3MsIGEgVmVjdG9yU3RvcmUgY2xhc3MsIGFuZCBhbiBvcHRpb25zIG9iamVjdCBhc1xuXHQqIHBhcmFtZXRlcnMuIEl0IGNvbnZlcnRzIHRoZSBleGFtcGxlcyB0byBzdHJpbmdzLCBjcmVhdGVzIGEgVmVjdG9yU3RvcmVcblx0KiBmcm9tIHRoZSBzdHJpbmdzIGFuZCB0aGUgZW1iZWRkaW5ncywgYW5kIHJldHVybnMgYSBuZXdcblx0KiBTZW1hbnRpY1NpbWlsYXJpdHlFeGFtcGxlU2VsZWN0b3Igd2l0aCB0aGUgY3JlYXRlZCBWZWN0b3JTdG9yZSBhbmQgdGhlXG5cdCogb3B0aW9ucyBwcm92aWRlZC5cblx0KiBAcGFyYW0gZXhhbXBsZXMgVGhlIGxpc3Qgb2YgZXhhbXBsZXMgdG8gYmUgdXNlZC5cblx0KiBAcGFyYW0gZW1iZWRkaW5ncyBUaGUgaW5zdGFuY2Ugb2YgRW1iZWRkaW5ncyB0byBiZSB1c2VkLlxuXHQqIEBwYXJhbSB2ZWN0b3JTdG9yZUNscyBUaGUgVmVjdG9yU3RvcmUgY2xhc3MgdG8gYmUgdXNlZC5cblx0KiBAcGFyYW0gb3B0aW9ucyBUaGUgb3B0aW9ucyBvYmplY3QgZm9yIHRoZSBTZW1hbnRpY1NpbWlsYXJpdHlFeGFtcGxlU2VsZWN0b3IuXG5cdCogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYSBuZXcgaW5zdGFuY2Ugb2YgU2VtYW50aWNTaW1pbGFyaXR5RXhhbXBsZVNlbGVjdG9yLlxuXHQqL1xuXHRzdGF0aWMgYXN5bmMgZnJvbUV4YW1wbGVzKGV4YW1wbGVzLCBlbWJlZGRpbmdzLCB2ZWN0b3JTdG9yZUNscywgb3B0aW9ucyA9IHt9KSB7XG5cdFx0Y29uc3QgaW5wdXRLZXlzID0gb3B0aW9ucy5pbnB1dEtleXMgPz8gbnVsbDtcblx0XHRjb25zdCBzdHJpbmdFeGFtcGxlcyA9IGV4YW1wbGVzLm1hcCgoZXhhbXBsZSkgPT4gc29ydGVkVmFsdWVzKGlucHV0S2V5cyA/IGlucHV0S2V5cy5yZWR1Y2UoKGFjYywga2V5KSA9PiAoe1xuXHRcdFx0Li4uYWNjLFxuXHRcdFx0W2tleV06IGV4YW1wbGVba2V5XVxuXHRcdH0pLCB7fSkgOiBleGFtcGxlKS5qb2luKFwiIFwiKSk7XG5cdFx0Y29uc3QgdmVjdG9yU3RvcmUgPSBhd2FpdCB2ZWN0b3JTdG9yZUNscy5mcm9tVGV4dHMoc3RyaW5nRXhhbXBsZXMsIGV4YW1wbGVzLCBlbWJlZGRpbmdzLCBvcHRpb25zKTtcblx0XHRyZXR1cm4gbmV3IFNlbWFudGljU2ltaWxhcml0eUV4YW1wbGVTZWxlY3Rvcih7XG5cdFx0XHR2ZWN0b3JTdG9yZSxcblx0XHRcdGs6IG9wdGlvbnMuayA/PyA0LFxuXHRcdFx0ZXhhbXBsZUtleXM6IG9wdGlvbnMuZXhhbXBsZUtleXMsXG5cdFx0XHRpbnB1dEtleXM6IG9wdGlvbnMuaW5wdXRLZXlzXG5cdFx0fSk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgU2VtYW50aWNTaW1pbGFyaXR5RXhhbXBsZVNlbGVjdG9yIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZW1hbnRpY19zaW1pbGFyaXR5LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/example_selectors/semantic_similarity.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/index.js":
/*!****************************************************!*\
  !*** ./node_modules/@langchain/core/dist/index.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   src_exports: () => (/* binding */ src_exports)\n/* harmony export */ });\n//#region src/index.ts\nvar src_exports = {};\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7O0FBRUE7QUFDdUI7QUFDdkIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2luZGV4LnRzXG52YXIgc3JjX2V4cG9ydHMgPSB7fTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBzcmNfZXhwb3J0cyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/indexing/base.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/indexing/base.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _HashedDocument: () => (/* binding */ _HashedDocument),\n/* harmony export */   _batch: () => (/* binding */ _batch),\n/* harmony export */   _deduplicateInOrder: () => (/* binding */ _deduplicateInOrder),\n/* harmony export */   _getSourceIdAssigner: () => (/* binding */ _getSourceIdAssigner),\n/* harmony export */   _isBaseDocumentLoader: () => (/* binding */ _isBaseDocumentLoader),\n/* harmony export */   index: () => (/* binding */ index)\n/* harmony export */ });\n/* harmony import */ var _utils_js_sha256_hash_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/js-sha256/hash.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/js-sha256/hash.js\");\n/* harmony import */ var _utils_hash_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/hash.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/hash.js\");\n/* harmony import */ var _documents_document_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../documents/document.js */ \"(ssr)/./node_modules/@langchain/core/dist/documents/document.js\");\n/* harmony import */ var _record_manager_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./record_manager.js */ \"(ssr)/./node_modules/@langchain/core/dist/indexing/record_manager.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! uuid */ \"(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/v5.js\");\n\n\n\n\n\n\n//#region src/indexing/base.ts\n/**\n* HashedDocument is a Document with hashes calculated.\n* Hashes are calculated based on page content and metadata.\n* It is used for indexing.\n*/\nvar _HashedDocument = class {\n\tuid;\n\thash_;\n\tcontentHash;\n\tmetadataHash;\n\tpageContent;\n\tmetadata;\n\tkeyEncoder = _utils_js_sha256_hash_js__WEBPACK_IMPORTED_MODULE_0__.sha256;\n\tconstructor(fields) {\n\t\tthis.uid = fields.uid;\n\t\tthis.pageContent = fields.pageContent;\n\t\tthis.metadata = fields.metadata;\n\t}\n\tmakeDefaultKeyEncoder(keyEncoderFn) {\n\t\tthis.keyEncoder = keyEncoderFn;\n\t}\n\tcalculateHashes() {\n\t\tconst forbiddenKeys = [\n\t\t\t\"hash_\",\n\t\t\t\"content_hash\",\n\t\t\t\"metadata_hash\"\n\t\t];\n\t\tfor (const key of forbiddenKeys) if (key in this.metadata) throw new Error(`Metadata cannot contain key ${key} as it is reserved for internal use. Restricted keys: [${forbiddenKeys.join(\", \")}]`);\n\t\tconst contentHash = this._hashStringToUUID(this.pageContent);\n\t\ttry {\n\t\t\tconst metadataHash = this._hashNestedDictToUUID(this.metadata);\n\t\t\tthis.contentHash = contentHash;\n\t\t\tthis.metadataHash = metadataHash;\n\t\t} catch (e) {\n\t\t\tthrow new Error(`Failed to hash metadata: ${e}. Please use a dict that can be serialized using json.`);\n\t\t}\n\t\tthis.hash_ = this._hashStringToUUID(this.contentHash + this.metadataHash);\n\t\tif (!this.uid) this.uid = this.hash_;\n\t}\n\ttoDocument() {\n\t\treturn new _documents_document_js__WEBPACK_IMPORTED_MODULE_2__.Document({\n\t\t\tpageContent: this.pageContent,\n\t\t\tmetadata: this.metadata\n\t\t});\n\t}\n\tstatic fromDocument(document, uid) {\n\t\tconst doc = new this({\n\t\t\tpageContent: document.pageContent,\n\t\t\tmetadata: document.metadata,\n\t\t\tuid: uid || document.uid\n\t\t});\n\t\tdoc.calculateHashes();\n\t\treturn doc;\n\t}\n\t_hashStringToUUID(inputString) {\n\t\tconst hash_value = this.keyEncoder(inputString);\n\t\treturn (0,uuid__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(hash_value, _record_manager_js__WEBPACK_IMPORTED_MODULE_3__.UUIDV5_NAMESPACE);\n\t}\n\t_hashNestedDictToUUID(data) {\n\t\tconst serialized_data = JSON.stringify(data, Object.keys(data).sort());\n\t\tconst hash_value = this.keyEncoder(serialized_data);\n\t\treturn (0,uuid__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(hash_value, _record_manager_js__WEBPACK_IMPORTED_MODULE_3__.UUIDV5_NAMESPACE);\n\t}\n};\nfunction _batch(size, iterable) {\n\tconst batches = [];\n\tlet currentBatch = [];\n\titerable.forEach((item) => {\n\t\tcurrentBatch.push(item);\n\t\tif (currentBatch.length >= size) {\n\t\t\tbatches.push(currentBatch);\n\t\t\tcurrentBatch = [];\n\t\t}\n\t});\n\tif (currentBatch.length > 0) batches.push(currentBatch);\n\treturn batches;\n}\nfunction _deduplicateInOrder(hashedDocuments) {\n\tconst seen = /* @__PURE__ */ new Set();\n\tconst deduplicated = [];\n\tfor (const hashedDoc of hashedDocuments) {\n\t\tif (!hashedDoc.hash_) throw new Error(\"Hashed document does not have a hash\");\n\t\tif (!seen.has(hashedDoc.hash_)) {\n\t\t\tseen.add(hashedDoc.hash_);\n\t\t\tdeduplicated.push(hashedDoc);\n\t\t}\n\t}\n\treturn deduplicated;\n}\nfunction _getSourceIdAssigner(sourceIdKey) {\n\tif (sourceIdKey === null) return (_doc) => null;\n\telse if (typeof sourceIdKey === \"string\") return (doc) => doc.metadata[sourceIdKey];\n\telse if (typeof sourceIdKey === \"function\") return sourceIdKey;\n\telse throw new Error(`sourceIdKey should be null, a string or a function, got ${typeof sourceIdKey}`);\n}\nconst _isBaseDocumentLoader = (arg) => {\n\tif (\"load\" in arg && typeof arg.load === \"function\" && \"loadAndSplit\" in arg && typeof arg.loadAndSplit === \"function\") return true;\n\treturn false;\n};\n/**\n* Index data from the doc source into the vector store.\n*\n* Indexing functionality uses a manager to keep track of which documents\n* are in the vector store.\n*\n* This allows us to keep track of which documents were updated, and which\n* documents were deleted, which documents should be skipped.\n*\n* For the time being, documents are indexed using their hashes, and users\n*  are not able to specify the uid of the document.\n*\n* @param {IndexArgs} args\n* @param {BaseDocumentLoader | DocumentInterface[]} args.docsSource The source of documents to index. Can be a DocumentLoader or a list of Documents.\n* @param {RecordManagerInterface} args.recordManager The record manager to use for keeping track of indexed documents.\n* @param {VectorStore} args.vectorStore The vector store to use for storing the documents.\n* @param {IndexOptions | undefined} args.options Options for indexing.\n* @returns {Promise<IndexingResult>}\n*/\nasync function index(args) {\n\tconst { docsSource, recordManager, vectorStore, options } = args;\n\tconst { batchSize = 100, cleanup, sourceIdKey, cleanupBatchSize = 1e3, forceUpdate = false } = options ?? {};\n\tif (cleanup === \"incremental\" && !sourceIdKey) throw new Error(\"sourceIdKey is required when cleanup mode is incremental. Please provide through 'options.sourceIdKey'.\");\n\tconst docs = _isBaseDocumentLoader(docsSource) ? await docsSource.load() : docsSource;\n\tconst sourceIdAssigner = _getSourceIdAssigner(sourceIdKey ?? null);\n\tconst indexStartDt = await recordManager.getTime();\n\tlet numAdded = 0;\n\tlet numDeleted = 0;\n\tlet numUpdated = 0;\n\tlet numSkipped = 0;\n\tconst batches = _batch(batchSize ?? 100, docs);\n\tfor (const batch of batches) {\n\t\tconst hashedDocs = _deduplicateInOrder(batch.map((doc) => _HashedDocument.fromDocument(doc)));\n\t\tconst sourceIds = hashedDocs.map((doc) => sourceIdAssigner(doc));\n\t\tif (cleanup === \"incremental\") hashedDocs.forEach((_hashedDoc, index$1) => {\n\t\t\tconst source = sourceIds[index$1];\n\t\t\tif (source === null) throw new Error(\"sourceIdKey must be provided when cleanup is incremental\");\n\t\t});\n\t\tconst batchExists = await recordManager.exists(hashedDocs.map((doc) => doc.uid));\n\t\tconst uids = [];\n\t\tconst docsToIndex = [];\n\t\tconst docsToUpdate = [];\n\t\tconst seenDocs = /* @__PURE__ */ new Set();\n\t\thashedDocs.forEach((hashedDoc, i) => {\n\t\t\tconst docExists = batchExists[i];\n\t\t\tif (docExists) if (forceUpdate) seenDocs.add(hashedDoc.uid);\n\t\t\telse {\n\t\t\t\tdocsToUpdate.push(hashedDoc.uid);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tuids.push(hashedDoc.uid);\n\t\t\tdocsToIndex.push(hashedDoc.toDocument());\n\t\t});\n\t\tif (docsToUpdate.length > 0) {\n\t\t\tawait recordManager.update(docsToUpdate, { timeAtLeast: indexStartDt });\n\t\t\tnumSkipped += docsToUpdate.length;\n\t\t}\n\t\tif (docsToIndex.length > 0) {\n\t\t\tawait vectorStore.addDocuments(docsToIndex, { ids: uids });\n\t\t\tnumAdded += docsToIndex.length - seenDocs.size;\n\t\t\tnumUpdated += seenDocs.size;\n\t\t}\n\t\tawait recordManager.update(hashedDocs.map((doc) => doc.uid), {\n\t\t\ttimeAtLeast: indexStartDt,\n\t\t\tgroupIds: sourceIds\n\t\t});\n\t\tif (cleanup === \"incremental\") {\n\t\t\tsourceIds.forEach((sourceId) => {\n\t\t\t\tif (!sourceId) throw new Error(\"Source id cannot be null\");\n\t\t\t});\n\t\t\tconst uidsToDelete = await recordManager.listKeys({\n\t\t\t\tbefore: indexStartDt,\n\t\t\t\tgroupIds: sourceIds\n\t\t\t});\n\t\t\tif (uidsToDelete.length > 0) {\n\t\t\t\tawait vectorStore.delete({ ids: uidsToDelete });\n\t\t\t\tawait recordManager.deleteKeys(uidsToDelete);\n\t\t\t\tnumDeleted += uidsToDelete.length;\n\t\t\t}\n\t\t}\n\t}\n\tif (cleanup === \"full\") {\n\t\tlet uidsToDelete = await recordManager.listKeys({\n\t\t\tbefore: indexStartDt,\n\t\t\tlimit: cleanupBatchSize\n\t\t});\n\t\twhile (uidsToDelete.length > 0) {\n\t\t\tawait vectorStore.delete({ ids: uidsToDelete });\n\t\t\tawait recordManager.deleteKeys(uidsToDelete);\n\t\t\tnumDeleted += uidsToDelete.length;\n\t\t\tuidsToDelete = await recordManager.listKeys({\n\t\t\t\tbefore: indexStartDt,\n\t\t\t\tlimit: cleanupBatchSize\n\t\t\t});\n\t\t}\n\t}\n\treturn {\n\t\tnumAdded,\n\t\tnumDeleted,\n\t\tnumUpdated,\n\t\tnumSkipped\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=base.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvaW5kZXhpbmcvYmFzZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFvRDtBQUMxQjtBQUMwQjtBQUNHO0FBQzdCOztBQUUxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsNERBQU07QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRHQUE0RyxLQUFLLHdEQUF3RCx5QkFBeUI7QUFDbE07QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSiwrQ0FBK0MsRUFBRTtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSw0REFBUTtBQUNyQjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxnREFBRSxhQUFhLGdFQUFnQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsZ0RBQUUsYUFBYSxnRUFBZ0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlGQUFpRixtQkFBbUI7QUFDcEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsV0FBVztBQUNyQixVQUFVLDBDQUEwQztBQUNwRCxVQUFVLHdCQUF3QjtBQUNsQyxVQUFVLGFBQWE7QUFDdkIsVUFBVSwwQkFBMEI7QUFDcEMsWUFBWTtBQUNaO0FBQ0E7QUFDQSxTQUFTLGtEQUFrRDtBQUMzRCxTQUFTLHFGQUFxRjtBQUM5RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLDhDQUE4QywyQkFBMkI7QUFDekU7QUFDQTtBQUNBO0FBQ0EsaURBQWlELFdBQVc7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSwrQkFBK0IsbUJBQW1CO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLDhCQUE4QixtQkFBbUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDNEc7QUFDNUciLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9pbmRleGluZy9iYXNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNoYTI1NiB9IGZyb20gXCIuLi91dGlscy9qcy1zaGEyNTYvaGFzaC5qc1wiO1xuaW1wb3J0IFwiLi4vdXRpbHMvaGFzaC5qc1wiO1xuaW1wb3J0IHsgRG9jdW1lbnQgfSBmcm9tIFwiLi4vZG9jdW1lbnRzL2RvY3VtZW50LmpzXCI7XG5pbXBvcnQgeyBVVUlEVjVfTkFNRVNQQUNFIH0gZnJvbSBcIi4vcmVjb3JkX21hbmFnZXIuanNcIjtcbmltcG9ydCB7IHY1IH0gZnJvbSBcInV1aWRcIjtcblxuLy8jcmVnaW9uIHNyYy9pbmRleGluZy9iYXNlLnRzXG4vKipcbiogSGFzaGVkRG9jdW1lbnQgaXMgYSBEb2N1bWVudCB3aXRoIGhhc2hlcyBjYWxjdWxhdGVkLlxuKiBIYXNoZXMgYXJlIGNhbGN1bGF0ZWQgYmFzZWQgb24gcGFnZSBjb250ZW50IGFuZCBtZXRhZGF0YS5cbiogSXQgaXMgdXNlZCBmb3IgaW5kZXhpbmcuXG4qL1xudmFyIF9IYXNoZWREb2N1bWVudCA9IGNsYXNzIHtcblx0dWlkO1xuXHRoYXNoXztcblx0Y29udGVudEhhc2g7XG5cdG1ldGFkYXRhSGFzaDtcblx0cGFnZUNvbnRlbnQ7XG5cdG1ldGFkYXRhO1xuXHRrZXlFbmNvZGVyID0gc2hhMjU2O1xuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHR0aGlzLnVpZCA9IGZpZWxkcy51aWQ7XG5cdFx0dGhpcy5wYWdlQ29udGVudCA9IGZpZWxkcy5wYWdlQ29udGVudDtcblx0XHR0aGlzLm1ldGFkYXRhID0gZmllbGRzLm1ldGFkYXRhO1xuXHR9XG5cdG1ha2VEZWZhdWx0S2V5RW5jb2RlcihrZXlFbmNvZGVyRm4pIHtcblx0XHR0aGlzLmtleUVuY29kZXIgPSBrZXlFbmNvZGVyRm47XG5cdH1cblx0Y2FsY3VsYXRlSGFzaGVzKCkge1xuXHRcdGNvbnN0IGZvcmJpZGRlbktleXMgPSBbXG5cdFx0XHRcImhhc2hfXCIsXG5cdFx0XHRcImNvbnRlbnRfaGFzaFwiLFxuXHRcdFx0XCJtZXRhZGF0YV9oYXNoXCJcblx0XHRdO1xuXHRcdGZvciAoY29uc3Qga2V5IG9mIGZvcmJpZGRlbktleXMpIGlmIChrZXkgaW4gdGhpcy5tZXRhZGF0YSkgdGhyb3cgbmV3IEVycm9yKGBNZXRhZGF0YSBjYW5ub3QgY29udGFpbiBrZXkgJHtrZXl9IGFzIGl0IGlzIHJlc2VydmVkIGZvciBpbnRlcm5hbCB1c2UuIFJlc3RyaWN0ZWQga2V5czogWyR7Zm9yYmlkZGVuS2V5cy5qb2luKFwiLCBcIil9XWApO1xuXHRcdGNvbnN0IGNvbnRlbnRIYXNoID0gdGhpcy5faGFzaFN0cmluZ1RvVVVJRCh0aGlzLnBhZ2VDb250ZW50KTtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgbWV0YWRhdGFIYXNoID0gdGhpcy5faGFzaE5lc3RlZERpY3RUb1VVSUQodGhpcy5tZXRhZGF0YSk7XG5cdFx0XHR0aGlzLmNvbnRlbnRIYXNoID0gY29udGVudEhhc2g7XG5cdFx0XHR0aGlzLm1ldGFkYXRhSGFzaCA9IG1ldGFkYXRhSGFzaDtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBoYXNoIG1ldGFkYXRhOiAke2V9LiBQbGVhc2UgdXNlIGEgZGljdCB0aGF0IGNhbiBiZSBzZXJpYWxpemVkIHVzaW5nIGpzb24uYCk7XG5cdFx0fVxuXHRcdHRoaXMuaGFzaF8gPSB0aGlzLl9oYXNoU3RyaW5nVG9VVUlEKHRoaXMuY29udGVudEhhc2ggKyB0aGlzLm1ldGFkYXRhSGFzaCk7XG5cdFx0aWYgKCF0aGlzLnVpZCkgdGhpcy51aWQgPSB0aGlzLmhhc2hfO1xuXHR9XG5cdHRvRG9jdW1lbnQoKSB7XG5cdFx0cmV0dXJuIG5ldyBEb2N1bWVudCh7XG5cdFx0XHRwYWdlQ29udGVudDogdGhpcy5wYWdlQ29udGVudCxcblx0XHRcdG1ldGFkYXRhOiB0aGlzLm1ldGFkYXRhXG5cdFx0fSk7XG5cdH1cblx0c3RhdGljIGZyb21Eb2N1bWVudChkb2N1bWVudCwgdWlkKSB7XG5cdFx0Y29uc3QgZG9jID0gbmV3IHRoaXMoe1xuXHRcdFx0cGFnZUNvbnRlbnQ6IGRvY3VtZW50LnBhZ2VDb250ZW50LFxuXHRcdFx0bWV0YWRhdGE6IGRvY3VtZW50Lm1ldGFkYXRhLFxuXHRcdFx0dWlkOiB1aWQgfHwgZG9jdW1lbnQudWlkXG5cdFx0fSk7XG5cdFx0ZG9jLmNhbGN1bGF0ZUhhc2hlcygpO1xuXHRcdHJldHVybiBkb2M7XG5cdH1cblx0X2hhc2hTdHJpbmdUb1VVSUQoaW5wdXRTdHJpbmcpIHtcblx0XHRjb25zdCBoYXNoX3ZhbHVlID0gdGhpcy5rZXlFbmNvZGVyKGlucHV0U3RyaW5nKTtcblx0XHRyZXR1cm4gdjUoaGFzaF92YWx1ZSwgVVVJRFY1X05BTUVTUEFDRSk7XG5cdH1cblx0X2hhc2hOZXN0ZWREaWN0VG9VVUlEKGRhdGEpIHtcblx0XHRjb25zdCBzZXJpYWxpemVkX2RhdGEgPSBKU09OLnN0cmluZ2lmeShkYXRhLCBPYmplY3Qua2V5cyhkYXRhKS5zb3J0KCkpO1xuXHRcdGNvbnN0IGhhc2hfdmFsdWUgPSB0aGlzLmtleUVuY29kZXIoc2VyaWFsaXplZF9kYXRhKTtcblx0XHRyZXR1cm4gdjUoaGFzaF92YWx1ZSwgVVVJRFY1X05BTUVTUEFDRSk7XG5cdH1cbn07XG5mdW5jdGlvbiBfYmF0Y2goc2l6ZSwgaXRlcmFibGUpIHtcblx0Y29uc3QgYmF0Y2hlcyA9IFtdO1xuXHRsZXQgY3VycmVudEJhdGNoID0gW107XG5cdGl0ZXJhYmxlLmZvckVhY2goKGl0ZW0pID0+IHtcblx0XHRjdXJyZW50QmF0Y2gucHVzaChpdGVtKTtcblx0XHRpZiAoY3VycmVudEJhdGNoLmxlbmd0aCA+PSBzaXplKSB7XG5cdFx0XHRiYXRjaGVzLnB1c2goY3VycmVudEJhdGNoKTtcblx0XHRcdGN1cnJlbnRCYXRjaCA9IFtdO1xuXHRcdH1cblx0fSk7XG5cdGlmIChjdXJyZW50QmF0Y2gubGVuZ3RoID4gMCkgYmF0Y2hlcy5wdXNoKGN1cnJlbnRCYXRjaCk7XG5cdHJldHVybiBiYXRjaGVzO1xufVxuZnVuY3Rpb24gX2RlZHVwbGljYXRlSW5PcmRlcihoYXNoZWREb2N1bWVudHMpIHtcblx0Y29uc3Qgc2VlbiA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG5cdGNvbnN0IGRlZHVwbGljYXRlZCA9IFtdO1xuXHRmb3IgKGNvbnN0IGhhc2hlZERvYyBvZiBoYXNoZWREb2N1bWVudHMpIHtcblx0XHRpZiAoIWhhc2hlZERvYy5oYXNoXykgdGhyb3cgbmV3IEVycm9yKFwiSGFzaGVkIGRvY3VtZW50IGRvZXMgbm90IGhhdmUgYSBoYXNoXCIpO1xuXHRcdGlmICghc2Vlbi5oYXMoaGFzaGVkRG9jLmhhc2hfKSkge1xuXHRcdFx0c2Vlbi5hZGQoaGFzaGVkRG9jLmhhc2hfKTtcblx0XHRcdGRlZHVwbGljYXRlZC5wdXNoKGhhc2hlZERvYyk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBkZWR1cGxpY2F0ZWQ7XG59XG5mdW5jdGlvbiBfZ2V0U291cmNlSWRBc3NpZ25lcihzb3VyY2VJZEtleSkge1xuXHRpZiAoc291cmNlSWRLZXkgPT09IG51bGwpIHJldHVybiAoX2RvYykgPT4gbnVsbDtcblx0ZWxzZSBpZiAodHlwZW9mIHNvdXJjZUlkS2V5ID09PSBcInN0cmluZ1wiKSByZXR1cm4gKGRvYykgPT4gZG9jLm1ldGFkYXRhW3NvdXJjZUlkS2V5XTtcblx0ZWxzZSBpZiAodHlwZW9mIHNvdXJjZUlkS2V5ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBzb3VyY2VJZEtleTtcblx0ZWxzZSB0aHJvdyBuZXcgRXJyb3IoYHNvdXJjZUlkS2V5IHNob3VsZCBiZSBudWxsLCBhIHN0cmluZyBvciBhIGZ1bmN0aW9uLCBnb3QgJHt0eXBlb2Ygc291cmNlSWRLZXl9YCk7XG59XG5jb25zdCBfaXNCYXNlRG9jdW1lbnRMb2FkZXIgPSAoYXJnKSA9PiB7XG5cdGlmIChcImxvYWRcIiBpbiBhcmcgJiYgdHlwZW9mIGFyZy5sb2FkID09PSBcImZ1bmN0aW9uXCIgJiYgXCJsb2FkQW5kU3BsaXRcIiBpbiBhcmcgJiYgdHlwZW9mIGFyZy5sb2FkQW5kU3BsaXQgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7XG5cdHJldHVybiBmYWxzZTtcbn07XG4vKipcbiogSW5kZXggZGF0YSBmcm9tIHRoZSBkb2Mgc291cmNlIGludG8gdGhlIHZlY3RvciBzdG9yZS5cbipcbiogSW5kZXhpbmcgZnVuY3Rpb25hbGl0eSB1c2VzIGEgbWFuYWdlciB0byBrZWVwIHRyYWNrIG9mIHdoaWNoIGRvY3VtZW50c1xuKiBhcmUgaW4gdGhlIHZlY3RvciBzdG9yZS5cbipcbiogVGhpcyBhbGxvd3MgdXMgdG8ga2VlcCB0cmFjayBvZiB3aGljaCBkb2N1bWVudHMgd2VyZSB1cGRhdGVkLCBhbmQgd2hpY2hcbiogZG9jdW1lbnRzIHdlcmUgZGVsZXRlZCwgd2hpY2ggZG9jdW1lbnRzIHNob3VsZCBiZSBza2lwcGVkLlxuKlxuKiBGb3IgdGhlIHRpbWUgYmVpbmcsIGRvY3VtZW50cyBhcmUgaW5kZXhlZCB1c2luZyB0aGVpciBoYXNoZXMsIGFuZCB1c2Vyc1xuKiAgYXJlIG5vdCBhYmxlIHRvIHNwZWNpZnkgdGhlIHVpZCBvZiB0aGUgZG9jdW1lbnQuXG4qXG4qIEBwYXJhbSB7SW5kZXhBcmdzfSBhcmdzXG4qIEBwYXJhbSB7QmFzZURvY3VtZW50TG9hZGVyIHwgRG9jdW1lbnRJbnRlcmZhY2VbXX0gYXJncy5kb2NzU291cmNlIFRoZSBzb3VyY2Ugb2YgZG9jdW1lbnRzIHRvIGluZGV4LiBDYW4gYmUgYSBEb2N1bWVudExvYWRlciBvciBhIGxpc3Qgb2YgRG9jdW1lbnRzLlxuKiBAcGFyYW0ge1JlY29yZE1hbmFnZXJJbnRlcmZhY2V9IGFyZ3MucmVjb3JkTWFuYWdlciBUaGUgcmVjb3JkIG1hbmFnZXIgdG8gdXNlIGZvciBrZWVwaW5nIHRyYWNrIG9mIGluZGV4ZWQgZG9jdW1lbnRzLlxuKiBAcGFyYW0ge1ZlY3RvclN0b3JlfSBhcmdzLnZlY3RvclN0b3JlIFRoZSB2ZWN0b3Igc3RvcmUgdG8gdXNlIGZvciBzdG9yaW5nIHRoZSBkb2N1bWVudHMuXG4qIEBwYXJhbSB7SW5kZXhPcHRpb25zIHwgdW5kZWZpbmVkfSBhcmdzLm9wdGlvbnMgT3B0aW9ucyBmb3IgaW5kZXhpbmcuXG4qIEByZXR1cm5zIHtQcm9taXNlPEluZGV4aW5nUmVzdWx0Pn1cbiovXG5hc3luYyBmdW5jdGlvbiBpbmRleChhcmdzKSB7XG5cdGNvbnN0IHsgZG9jc1NvdXJjZSwgcmVjb3JkTWFuYWdlciwgdmVjdG9yU3RvcmUsIG9wdGlvbnMgfSA9IGFyZ3M7XG5cdGNvbnN0IHsgYmF0Y2hTaXplID0gMTAwLCBjbGVhbnVwLCBzb3VyY2VJZEtleSwgY2xlYW51cEJhdGNoU2l6ZSA9IDFlMywgZm9yY2VVcGRhdGUgPSBmYWxzZSB9ID0gb3B0aW9ucyA/PyB7fTtcblx0aWYgKGNsZWFudXAgPT09IFwiaW5jcmVtZW50YWxcIiAmJiAhc291cmNlSWRLZXkpIHRocm93IG5ldyBFcnJvcihcInNvdXJjZUlkS2V5IGlzIHJlcXVpcmVkIHdoZW4gY2xlYW51cCBtb2RlIGlzIGluY3JlbWVudGFsLiBQbGVhc2UgcHJvdmlkZSB0aHJvdWdoICdvcHRpb25zLnNvdXJjZUlkS2V5Jy5cIik7XG5cdGNvbnN0IGRvY3MgPSBfaXNCYXNlRG9jdW1lbnRMb2FkZXIoZG9jc1NvdXJjZSkgPyBhd2FpdCBkb2NzU291cmNlLmxvYWQoKSA6IGRvY3NTb3VyY2U7XG5cdGNvbnN0IHNvdXJjZUlkQXNzaWduZXIgPSBfZ2V0U291cmNlSWRBc3NpZ25lcihzb3VyY2VJZEtleSA/PyBudWxsKTtcblx0Y29uc3QgaW5kZXhTdGFydER0ID0gYXdhaXQgcmVjb3JkTWFuYWdlci5nZXRUaW1lKCk7XG5cdGxldCBudW1BZGRlZCA9IDA7XG5cdGxldCBudW1EZWxldGVkID0gMDtcblx0bGV0IG51bVVwZGF0ZWQgPSAwO1xuXHRsZXQgbnVtU2tpcHBlZCA9IDA7XG5cdGNvbnN0IGJhdGNoZXMgPSBfYmF0Y2goYmF0Y2hTaXplID8/IDEwMCwgZG9jcyk7XG5cdGZvciAoY29uc3QgYmF0Y2ggb2YgYmF0Y2hlcykge1xuXHRcdGNvbnN0IGhhc2hlZERvY3MgPSBfZGVkdXBsaWNhdGVJbk9yZGVyKGJhdGNoLm1hcCgoZG9jKSA9PiBfSGFzaGVkRG9jdW1lbnQuZnJvbURvY3VtZW50KGRvYykpKTtcblx0XHRjb25zdCBzb3VyY2VJZHMgPSBoYXNoZWREb2NzLm1hcCgoZG9jKSA9PiBzb3VyY2VJZEFzc2lnbmVyKGRvYykpO1xuXHRcdGlmIChjbGVhbnVwID09PSBcImluY3JlbWVudGFsXCIpIGhhc2hlZERvY3MuZm9yRWFjaCgoX2hhc2hlZERvYywgaW5kZXgkMSkgPT4ge1xuXHRcdFx0Y29uc3Qgc291cmNlID0gc291cmNlSWRzW2luZGV4JDFdO1xuXHRcdFx0aWYgKHNvdXJjZSA9PT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKFwic291cmNlSWRLZXkgbXVzdCBiZSBwcm92aWRlZCB3aGVuIGNsZWFudXAgaXMgaW5jcmVtZW50YWxcIik7XG5cdFx0fSk7XG5cdFx0Y29uc3QgYmF0Y2hFeGlzdHMgPSBhd2FpdCByZWNvcmRNYW5hZ2VyLmV4aXN0cyhoYXNoZWREb2NzLm1hcCgoZG9jKSA9PiBkb2MudWlkKSk7XG5cdFx0Y29uc3QgdWlkcyA9IFtdO1xuXHRcdGNvbnN0IGRvY3NUb0luZGV4ID0gW107XG5cdFx0Y29uc3QgZG9jc1RvVXBkYXRlID0gW107XG5cdFx0Y29uc3Qgc2VlbkRvY3MgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuXHRcdGhhc2hlZERvY3MuZm9yRWFjaCgoaGFzaGVkRG9jLCBpKSA9PiB7XG5cdFx0XHRjb25zdCBkb2NFeGlzdHMgPSBiYXRjaEV4aXN0c1tpXTtcblx0XHRcdGlmIChkb2NFeGlzdHMpIGlmIChmb3JjZVVwZGF0ZSkgc2VlbkRvY3MuYWRkKGhhc2hlZERvYy51aWQpO1xuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGRvY3NUb1VwZGF0ZS5wdXNoKGhhc2hlZERvYy51aWQpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR1aWRzLnB1c2goaGFzaGVkRG9jLnVpZCk7XG5cdFx0XHRkb2NzVG9JbmRleC5wdXNoKGhhc2hlZERvYy50b0RvY3VtZW50KCkpO1xuXHRcdH0pO1xuXHRcdGlmIChkb2NzVG9VcGRhdGUubGVuZ3RoID4gMCkge1xuXHRcdFx0YXdhaXQgcmVjb3JkTWFuYWdlci51cGRhdGUoZG9jc1RvVXBkYXRlLCB7IHRpbWVBdExlYXN0OiBpbmRleFN0YXJ0RHQgfSk7XG5cdFx0XHRudW1Ta2lwcGVkICs9IGRvY3NUb1VwZGF0ZS5sZW5ndGg7XG5cdFx0fVxuXHRcdGlmIChkb2NzVG9JbmRleC5sZW5ndGggPiAwKSB7XG5cdFx0XHRhd2FpdCB2ZWN0b3JTdG9yZS5hZGREb2N1bWVudHMoZG9jc1RvSW5kZXgsIHsgaWRzOiB1aWRzIH0pO1xuXHRcdFx0bnVtQWRkZWQgKz0gZG9jc1RvSW5kZXgubGVuZ3RoIC0gc2VlbkRvY3Muc2l6ZTtcblx0XHRcdG51bVVwZGF0ZWQgKz0gc2VlbkRvY3Muc2l6ZTtcblx0XHR9XG5cdFx0YXdhaXQgcmVjb3JkTWFuYWdlci51cGRhdGUoaGFzaGVkRG9jcy5tYXAoKGRvYykgPT4gZG9jLnVpZCksIHtcblx0XHRcdHRpbWVBdExlYXN0OiBpbmRleFN0YXJ0RHQsXG5cdFx0XHRncm91cElkczogc291cmNlSWRzXG5cdFx0fSk7XG5cdFx0aWYgKGNsZWFudXAgPT09IFwiaW5jcmVtZW50YWxcIikge1xuXHRcdFx0c291cmNlSWRzLmZvckVhY2goKHNvdXJjZUlkKSA9PiB7XG5cdFx0XHRcdGlmICghc291cmNlSWQpIHRocm93IG5ldyBFcnJvcihcIlNvdXJjZSBpZCBjYW5ub3QgYmUgbnVsbFwiKTtcblx0XHRcdH0pO1xuXHRcdFx0Y29uc3QgdWlkc1RvRGVsZXRlID0gYXdhaXQgcmVjb3JkTWFuYWdlci5saXN0S2V5cyh7XG5cdFx0XHRcdGJlZm9yZTogaW5kZXhTdGFydER0LFxuXHRcdFx0XHRncm91cElkczogc291cmNlSWRzXG5cdFx0XHR9KTtcblx0XHRcdGlmICh1aWRzVG9EZWxldGUubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRhd2FpdCB2ZWN0b3JTdG9yZS5kZWxldGUoeyBpZHM6IHVpZHNUb0RlbGV0ZSB9KTtcblx0XHRcdFx0YXdhaXQgcmVjb3JkTWFuYWdlci5kZWxldGVLZXlzKHVpZHNUb0RlbGV0ZSk7XG5cdFx0XHRcdG51bURlbGV0ZWQgKz0gdWlkc1RvRGVsZXRlLmxlbmd0aDtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0aWYgKGNsZWFudXAgPT09IFwiZnVsbFwiKSB7XG5cdFx0bGV0IHVpZHNUb0RlbGV0ZSA9IGF3YWl0IHJlY29yZE1hbmFnZXIubGlzdEtleXMoe1xuXHRcdFx0YmVmb3JlOiBpbmRleFN0YXJ0RHQsXG5cdFx0XHRsaW1pdDogY2xlYW51cEJhdGNoU2l6ZVxuXHRcdH0pO1xuXHRcdHdoaWxlICh1aWRzVG9EZWxldGUubGVuZ3RoID4gMCkge1xuXHRcdFx0YXdhaXQgdmVjdG9yU3RvcmUuZGVsZXRlKHsgaWRzOiB1aWRzVG9EZWxldGUgfSk7XG5cdFx0XHRhd2FpdCByZWNvcmRNYW5hZ2VyLmRlbGV0ZUtleXModWlkc1RvRGVsZXRlKTtcblx0XHRcdG51bURlbGV0ZWQgKz0gdWlkc1RvRGVsZXRlLmxlbmd0aDtcblx0XHRcdHVpZHNUb0RlbGV0ZSA9IGF3YWl0IHJlY29yZE1hbmFnZXIubGlzdEtleXMoe1xuXHRcdFx0XHRiZWZvcmU6IGluZGV4U3RhcnREdCxcblx0XHRcdFx0bGltaXQ6IGNsZWFudXBCYXRjaFNpemVcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4ge1xuXHRcdG51bUFkZGVkLFxuXHRcdG51bURlbGV0ZWQsXG5cdFx0bnVtVXBkYXRlZCxcblx0XHRudW1Ta2lwcGVkXG5cdH07XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgX0hhc2hlZERvY3VtZW50LCBfYmF0Y2gsIF9kZWR1cGxpY2F0ZUluT3JkZXIsIF9nZXRTb3VyY2VJZEFzc2lnbmVyLCBfaXNCYXNlRG9jdW1lbnRMb2FkZXIsIGluZGV4IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iYXNlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/indexing/base.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/indexing/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/indexing/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RecordManager: () => (/* reexport safe */ _record_manager_js__WEBPACK_IMPORTED_MODULE_1__.RecordManager),\n/* harmony export */   UUIDV5_NAMESPACE: () => (/* reexport safe */ _record_manager_js__WEBPACK_IMPORTED_MODULE_1__.UUIDV5_NAMESPACE),\n/* harmony export */   _HashedDocument: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_2__._HashedDocument),\n/* harmony export */   _batch: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_2__._batch),\n/* harmony export */   _deduplicateInOrder: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_2__._deduplicateInOrder),\n/* harmony export */   _getSourceIdAssigner: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_2__._getSourceIdAssigner),\n/* harmony export */   _isBaseDocumentLoader: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_2__._isBaseDocumentLoader),\n/* harmony export */   index: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_2__.index),\n/* harmony export */   indexing_exports: () => (/* binding */ indexing_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _record_manager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./record_manager.js */ \"(ssr)/./node_modules/@langchain/core/dist/indexing/record_manager.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/indexing/base.js\");\n\n\n\n\n//#region src/indexing/index.ts\nvar indexing_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(indexing_exports, {\n\tRecordManager: () => _record_manager_js__WEBPACK_IMPORTED_MODULE_1__.RecordManager,\n\tUUIDV5_NAMESPACE: () => _record_manager_js__WEBPACK_IMPORTED_MODULE_1__.UUIDV5_NAMESPACE,\n\t_HashedDocument: () => _base_js__WEBPACK_IMPORTED_MODULE_2__._HashedDocument,\n\t_batch: () => _base_js__WEBPACK_IMPORTED_MODULE_2__._batch,\n\t_deduplicateInOrder: () => _base_js__WEBPACK_IMPORTED_MODULE_2__._deduplicateInOrder,\n\t_getSourceIdAssigner: () => _base_js__WEBPACK_IMPORTED_MODULE_2__._getSourceIdAssigner,\n\t_isBaseDocumentLoader: () => _base_js__WEBPACK_IMPORTED_MODULE_2__._isBaseDocumentLoader,\n\tindex: () => _base_js__WEBPACK_IMPORTED_MODULE_2__.index\n});\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvaW5kZXhpbmcvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQTJEO0FBQ1c7QUFDdUQ7O0FBRTdIO0FBQ0E7QUFDQSxzRUFBUTtBQUNSLHNCQUFzQiw2REFBYTtBQUNuQyx5QkFBeUIsZ0VBQWdCO0FBQ3pDLHdCQUF3QixxREFBZTtBQUN2QyxlQUFlLDRDQUFNO0FBQ3JCLDRCQUE0Qix5REFBbUI7QUFDL0MsNkJBQTZCLDBEQUFvQjtBQUNqRCw4QkFBOEIsMkRBQXFCO0FBQ25ELGNBQWMsMkNBQUs7QUFDbkIsQ0FBQzs7QUFFRDtBQUMrSjtBQUMvSiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2luZGV4aW5nL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IFJlY29yZE1hbmFnZXIsIFVVSURWNV9OQU1FU1BBQ0UgfSBmcm9tIFwiLi9yZWNvcmRfbWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgX0hhc2hlZERvY3VtZW50LCBfYmF0Y2gsIF9kZWR1cGxpY2F0ZUluT3JkZXIsIF9nZXRTb3VyY2VJZEFzc2lnbmVyLCBfaXNCYXNlRG9jdW1lbnRMb2FkZXIsIGluZGV4IH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL2luZGV4aW5nL2luZGV4LnRzXG52YXIgaW5kZXhpbmdfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQoaW5kZXhpbmdfZXhwb3J0cywge1xuXHRSZWNvcmRNYW5hZ2VyOiAoKSA9PiBSZWNvcmRNYW5hZ2VyLFxuXHRVVUlEVjVfTkFNRVNQQUNFOiAoKSA9PiBVVUlEVjVfTkFNRVNQQUNFLFxuXHRfSGFzaGVkRG9jdW1lbnQ6ICgpID0+IF9IYXNoZWREb2N1bWVudCxcblx0X2JhdGNoOiAoKSA9PiBfYmF0Y2gsXG5cdF9kZWR1cGxpY2F0ZUluT3JkZXI6ICgpID0+IF9kZWR1cGxpY2F0ZUluT3JkZXIsXG5cdF9nZXRTb3VyY2VJZEFzc2lnbmVyOiAoKSA9PiBfZ2V0U291cmNlSWRBc3NpZ25lcixcblx0X2lzQmFzZURvY3VtZW50TG9hZGVyOiAoKSA9PiBfaXNCYXNlRG9jdW1lbnRMb2FkZXIsXG5cdGluZGV4OiAoKSA9PiBpbmRleFxufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgUmVjb3JkTWFuYWdlciwgVVVJRFY1X05BTUVTUEFDRSwgX0hhc2hlZERvY3VtZW50LCBfYmF0Y2gsIF9kZWR1cGxpY2F0ZUluT3JkZXIsIF9nZXRTb3VyY2VJZEFzc2lnbmVyLCBfaXNCYXNlRG9jdW1lbnRMb2FkZXIsIGluZGV4LCBpbmRleGluZ19leHBvcnRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/indexing/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/indexing/record_manager.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/indexing/record_manager.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RecordManager: () => (/* binding */ RecordManager),\n/* harmony export */   UUIDV5_NAMESPACE: () => (/* binding */ UUIDV5_NAMESPACE)\n/* harmony export */ });\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../load/serializable.js */ \"(ssr)/./node_modules/@langchain/core/dist/load/serializable.js\");\n\n\n//#region src/indexing/record_manager.ts\nconst UUIDV5_NAMESPACE = \"10f90ea3-90a4-4962-bf75-83a0f3c1c62a\";\nvar RecordManager = class extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable {\n\tlc_namespace = [\"langchain\", \"recordmanagers\"];\n};\n\n//#endregion\n\n//# sourceMappingURL=record_manager.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvaW5kZXhpbmcvcmVjb3JkX21hbmFnZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXVEOztBQUV2RDtBQUNBO0FBQ0Esa0NBQWtDLCtEQUFZO0FBQzlDO0FBQ0E7O0FBRUE7QUFDMkM7QUFDM0MiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9pbmRleGluZy9yZWNvcmRfbWFuYWdlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTZXJpYWxpemFibGUgfSBmcm9tIFwiLi4vbG9hZC9zZXJpYWxpemFibGUuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9pbmRleGluZy9yZWNvcmRfbWFuYWdlci50c1xuY29uc3QgVVVJRFY1X05BTUVTUEFDRSA9IFwiMTBmOTBlYTMtOTBhNC00OTYyLWJmNzUtODNhMGYzYzFjNjJhXCI7XG52YXIgUmVjb3JkTWFuYWdlciA9IGNsYXNzIGV4dGVuZHMgU2VyaWFsaXphYmxlIHtcblx0bGNfbmFtZXNwYWNlID0gW1wibGFuZ2NoYWluXCIsIFwicmVjb3JkbWFuYWdlcnNcIl07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IFJlY29yZE1hbmFnZXIsIFVVSURWNV9OQU1FU1BBQ0UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlY29yZF9tYW5hZ2VyLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/indexing/record_manager.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/language_models/base.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/language_models/base.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseLangChain: () => (/* binding */ BaseLangChain),\n/* harmony export */   BaseLanguageModel: () => (/* binding */ BaseLanguageModel),\n/* harmony export */   base_exports: () => (/* binding */ base_exports),\n/* harmony export */   calculateMaxTokens: () => (/* binding */ calculateMaxTokens),\n/* harmony export */   getEmbeddingContextSize: () => (/* binding */ getEmbeddingContextSize),\n/* harmony export */   getModelContextSize: () => (/* binding */ getModelContextSize),\n/* harmony export */   getModelNameForTiktoken: () => (/* binding */ getModelNameForTiktoken),\n/* harmony export */   isOpenAITool: () => (/* binding */ isOpenAITool)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _messages_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../messages/utils.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/utils.js\");\n/* harmony import */ var _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/async_caller.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/async_caller.js\");\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../runnables/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _prompt_values_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../prompt_values.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompt_values.js\");\n/* harmony import */ var _caches_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../caches/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/caches/index.js\");\n/* harmony import */ var _utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/tiktoken.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/tiktoken.js\");\n\n\n\n\n\n\n\n\n//#region src/language_models/base.ts\nvar base_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(base_exports, {\n\tBaseLangChain: () => BaseLangChain,\n\tBaseLanguageModel: () => BaseLanguageModel,\n\tcalculateMaxTokens: () => calculateMaxTokens,\n\tgetEmbeddingContextSize: () => getEmbeddingContextSize,\n\tgetModelContextSize: () => getModelContextSize,\n\tgetModelNameForTiktoken: () => getModelNameForTiktoken,\n\tisOpenAITool: () => isOpenAITool\n});\nconst getModelNameForTiktoken = (modelName) => {\n\tif (modelName.startsWith(\"gpt-5\")) return \"gpt-5\";\n\tif (modelName.startsWith(\"gpt-3.5-turbo-16k\")) return \"gpt-3.5-turbo-16k\";\n\tif (modelName.startsWith(\"gpt-3.5-turbo-\")) return \"gpt-3.5-turbo\";\n\tif (modelName.startsWith(\"gpt-4-32k\")) return \"gpt-4-32k\";\n\tif (modelName.startsWith(\"gpt-4-\")) return \"gpt-4\";\n\tif (modelName.startsWith(\"gpt-4o\")) return \"gpt-4o\";\n\treturn modelName;\n};\nconst getEmbeddingContextSize = (modelName) => {\n\tswitch (modelName) {\n\t\tcase \"text-embedding-ada-002\": return 8191;\n\t\tdefault: return 2046;\n\t}\n};\n/**\n* Get the context window size (max input tokens) for a given model.\n*\n* Context window sizes are sourced from official model documentation:\n* - OpenAI: https://platform.openai.com/docs/models\n* - Anthropic: https://docs.anthropic.com/claude/docs/models-overview\n* - Google: https://ai.google.dev/gemini/docs/models/gemini\n*\n* @param modelName - The name of the model\n* @returns The context window size in tokens\n*/\nconst getModelContextSize = (modelName) => {\n\tconst normalizedName = getModelNameForTiktoken(modelName);\n\tswitch (normalizedName) {\n\t\tcase \"gpt-5\":\n\t\tcase \"gpt-5-turbo\":\n\t\tcase \"gpt-5-turbo-preview\": return 4e5;\n\t\tcase \"gpt-4o\":\n\t\tcase \"gpt-4o-mini\":\n\t\tcase \"gpt-4o-2024-05-13\":\n\t\tcase \"gpt-4o-2024-08-06\": return 128e3;\n\t\tcase \"gpt-4-turbo\":\n\t\tcase \"gpt-4-turbo-preview\":\n\t\tcase \"gpt-4-turbo-2024-04-09\":\n\t\tcase \"gpt-4-0125-preview\":\n\t\tcase \"gpt-4-1106-preview\": return 128e3;\n\t\tcase \"gpt-4-32k\":\n\t\tcase \"gpt-4-32k-0314\":\n\t\tcase \"gpt-4-32k-0613\": return 32768;\n\t\tcase \"gpt-4\":\n\t\tcase \"gpt-4-0314\":\n\t\tcase \"gpt-4-0613\": return 8192;\n\t\tcase \"gpt-3.5-turbo-16k\":\n\t\tcase \"gpt-3.5-turbo-16k-0613\": return 16384;\n\t\tcase \"gpt-3.5-turbo\":\n\t\tcase \"gpt-3.5-turbo-0301\":\n\t\tcase \"gpt-3.5-turbo-0613\":\n\t\tcase \"gpt-3.5-turbo-1106\":\n\t\tcase \"gpt-3.5-turbo-0125\": return 4096;\n\t\tcase \"text-davinci-003\":\n\t\tcase \"text-davinci-002\": return 4097;\n\t\tcase \"text-davinci-001\": return 2049;\n\t\tcase \"text-curie-001\":\n\t\tcase \"text-babbage-001\":\n\t\tcase \"text-ada-001\": return 2048;\n\t\tcase \"code-davinci-002\":\n\t\tcase \"code-davinci-001\": return 8e3;\n\t\tcase \"code-cushman-001\": return 2048;\n\t\tcase \"claude-3-5-sonnet-20241022\":\n\t\tcase \"claude-3-5-sonnet-20240620\":\n\t\tcase \"claude-3-opus-20240229\":\n\t\tcase \"claude-3-sonnet-20240229\":\n\t\tcase \"claude-3-haiku-20240307\":\n\t\tcase \"claude-2.1\": return 2e5;\n\t\tcase \"claude-2.0\":\n\t\tcase \"claude-instant-1.2\": return 1e5;\n\t\tcase \"gemini-1.5-pro\":\n\t\tcase \"gemini-1.5-pro-latest\":\n\t\tcase \"gemini-1.5-flash\":\n\t\tcase \"gemini-1.5-flash-latest\": return 1e6;\n\t\tcase \"gemini-pro\":\n\t\tcase \"gemini-pro-vision\": return 32768;\n\t\tdefault: return 4097;\n\t}\n};\n/**\n* Whether or not the input matches the OpenAI tool definition.\n* @param {unknown} tool The input to check.\n* @returns {boolean} Whether the input is an OpenAI tool definition.\n*/\nfunction isOpenAITool(tool) {\n\tif (typeof tool !== \"object\" || !tool) return false;\n\tif (\"type\" in tool && tool.type === \"function\" && \"function\" in tool && typeof tool.function === \"object\" && tool.function && \"name\" in tool.function && \"parameters\" in tool.function) return true;\n\treturn false;\n}\nconst calculateMaxTokens = async ({ prompt, modelName }) => {\n\tlet numTokens;\n\ttry {\n\t\tnumTokens = (await (0,_utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_6__.encodingForModel)(getModelNameForTiktoken(modelName))).encode(prompt).length;\n\t} catch {\n\t\tconsole.warn(\"Failed to calculate number of tokens, falling back to approximate count\");\n\t\tnumTokens = Math.ceil(prompt.length / 4);\n\t}\n\tconst maxTokens = getModelContextSize(modelName);\n\treturn maxTokens - numTokens;\n};\nconst getVerbosity = () => false;\n/**\n* Base class for language models, chains, tools.\n*/\nvar BaseLangChain = class extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_3__.Runnable {\n\t/**\n\t* Whether to print out response text.\n\t*/\n\tverbose;\n\tcallbacks;\n\ttags;\n\tmetadata;\n\tget lc_attributes() {\n\t\treturn {\n\t\t\tcallbacks: void 0,\n\t\t\tverbose: void 0\n\t\t};\n\t}\n\tconstructor(params) {\n\t\tsuper(params);\n\t\tthis.verbose = params.verbose ?? getVerbosity();\n\t\tthis.callbacks = params.callbacks;\n\t\tthis.tags = params.tags ?? [];\n\t\tthis.metadata = params.metadata ?? {};\n\t}\n};\n/**\n* Base class for language models.\n*/\nvar BaseLanguageModel = class extends BaseLangChain {\n\t/**\n\t* Keys that the language model accepts as call options.\n\t*/\n\tget callKeys() {\n\t\treturn [\n\t\t\t\"stop\",\n\t\t\t\"timeout\",\n\t\t\t\"signal\",\n\t\t\t\"tags\",\n\t\t\t\"metadata\",\n\t\t\t\"callbacks\"\n\t\t];\n\t}\n\t/**\n\t* The async caller should be used by subclasses to make any async calls,\n\t* which will thus benefit from the concurrency and retry logic.\n\t*/\n\tcaller;\n\tcache;\n\tconstructor({ callbacks, callbackManager,...params }) {\n\t\tconst { cache,...rest } = params;\n\t\tsuper({\n\t\t\tcallbacks: callbacks ?? callbackManager,\n\t\t\t...rest\n\t\t});\n\t\tif (typeof cache === \"object\") this.cache = cache;\n\t\telse if (cache) this.cache = _caches_index_js__WEBPACK_IMPORTED_MODULE_5__.InMemoryCache.global();\n\t\telse this.cache = void 0;\n\t\tthis.caller = new _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_2__.AsyncCaller(params ?? {});\n\t}\n\t_encoding;\n\t/**\n\t* Get the number of tokens in the content.\n\t* @param content The content to get the number of tokens for.\n\t* @returns The number of tokens in the content.\n\t*/\n\tasync getNumTokens(content) {\n\t\tlet textContent;\n\t\tif (typeof content === \"string\") textContent = content;\n\t\telse\n /**\n\t\t* Content is an array of ContentBlock\n\t\t*\n\t\t* ToDo(@christian-bromann): This is a temporary fix to get the number of tokens for the content.\n\t\t* We need to find a better way to do this.\n\t\t* @see https://github.com/langchain-ai/langchainjs/pull/8341#pullrequestreview-2933713116\n\t\t*/\n\t\ttextContent = content.map((item) => {\n\t\t\tif (typeof item === \"string\") return item;\n\t\t\tif (item.type === \"text\" && \"text\" in item) return item.text;\n\t\t\treturn \"\";\n\t\t}).join(\"\");\n\t\tlet numTokens = Math.ceil(textContent.length / 4);\n\t\tif (!this._encoding) try {\n\t\t\tthis._encoding = await (0,_utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_6__.encodingForModel)(\"modelName\" in this ? getModelNameForTiktoken(this.modelName) : \"gpt2\");\n\t\t} catch (error) {\n\t\t\tconsole.warn(\"Failed to calculate number of tokens, falling back to approximate count\", error);\n\t\t}\n\t\tif (this._encoding) try {\n\t\t\tnumTokens = this._encoding.encode(textContent).length;\n\t\t} catch (error) {\n\t\t\tconsole.warn(\"Failed to calculate number of tokens, falling back to approximate count\", error);\n\t\t}\n\t\treturn numTokens;\n\t}\n\tstatic _convertInputToPromptValue(input) {\n\t\tif (typeof input === \"string\") return new _prompt_values_js__WEBPACK_IMPORTED_MODULE_4__.StringPromptValue(input);\n\t\telse if (Array.isArray(input)) return new _prompt_values_js__WEBPACK_IMPORTED_MODULE_4__.ChatPromptValue(input.map(_messages_utils_js__WEBPACK_IMPORTED_MODULE_1__.coerceMessageLikeToMessage));\n\t\telse return input;\n\t}\n\t/**\n\t* Get the identifying parameters of the LLM.\n\t*/\n\t_identifyingParams() {\n\t\treturn {};\n\t}\n\t/**\n\t* Create a unique cache key for a specific call to a specific language model.\n\t* @param callOptions Call options for the model\n\t* @returns A unique cache key.\n\t*/\n\t_getSerializedCacheKeyParametersForCall({ config,...callOptions }) {\n\t\tconst params = {\n\t\t\t...this._identifyingParams(),\n\t\t\t...callOptions,\n\t\t\t_type: this._llmType(),\n\t\t\t_model: this._modelType()\n\t\t};\n\t\tconst filteredEntries = Object.entries(params).filter(([_, value]) => value !== void 0);\n\t\tconst serializedEntries = filteredEntries.map(([key, value]) => `${key}:${JSON.stringify(value)}`).sort().join(\",\");\n\t\treturn serializedEntries;\n\t}\n\t/**\n\t* @deprecated\n\t* Return a json-like object representing this LLM.\n\t*/\n\tserialize() {\n\t\treturn {\n\t\t\t...this._identifyingParams(),\n\t\t\t_type: this._llmType(),\n\t\t\t_model: this._modelType()\n\t\t};\n\t}\n\t/**\n\t* @deprecated\n\t* Load an LLM from a json-like object describing it.\n\t*/\n\tstatic async deserialize(_data) {\n\t\tthrow new Error(\"Use .toJSON() instead\");\n\t}\n\t/**\n\t* Return profiling information for the model.\n\t*\n\t* @returns {ModelProfile} An object describing the model's capabilities and constraints\n\t*/\n\tget profile() {\n\t\treturn {};\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=base.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbGFuZ3VhZ2VfbW9kZWxzL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTJEO0FBQ087QUFDWDtBQUNQO0FBQ3lCO0FBQ3RCO0FBQ0s7O0FBRXhEO0FBQ0E7QUFDQSxzRUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxTQUFTO0FBQ25CLFlBQVksU0FBUztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsbUJBQW1CO0FBQ3ZEO0FBQ0E7QUFDQSxxQkFBcUIsb0VBQWdCO0FBQ3JDLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyx3REFBUTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxzQ0FBc0M7QUFDckQsVUFBVSxnQkFBZ0I7QUFDMUI7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsK0JBQStCLDJEQUFhO0FBQzVDO0FBQ0Esb0JBQW9CLCtEQUFXLGFBQWE7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLDBCQUEwQixvRUFBZ0I7QUFDMUMsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsZ0VBQWlCO0FBQzdELDRDQUE0Qyw4REFBZSxXQUFXLDBFQUEwQjtBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyx1QkFBdUI7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsSUFBSSxHQUFHLHNCQUFzQjtBQUNsRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxjQUFjO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDbUs7QUFDbksiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9sYW5ndWFnZV9tb2RlbHMvYmFzZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4cG9ydCB9IGZyb20gXCIuLi9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyBjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSB9IGZyb20gXCIuLi9tZXNzYWdlcy91dGlscy5qc1wiO1xuaW1wb3J0IHsgQXN5bmNDYWxsZXIgfSBmcm9tIFwiLi4vdXRpbHMvYXN5bmNfY2FsbGVyLmpzXCI7XG5pbXBvcnQgeyBSdW5uYWJsZSB9IGZyb20gXCIuLi9ydW5uYWJsZXMvYmFzZS5qc1wiO1xuaW1wb3J0IHsgQ2hhdFByb21wdFZhbHVlLCBTdHJpbmdQcm9tcHRWYWx1ZSB9IGZyb20gXCIuLi9wcm9tcHRfdmFsdWVzLmpzXCI7XG5pbXBvcnQgeyBJbk1lbW9yeUNhY2hlIH0gZnJvbSBcIi4uL2NhY2hlcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgZW5jb2RpbmdGb3JNb2RlbCB9IGZyb20gXCIuLi91dGlscy90aWt0b2tlbi5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL2xhbmd1YWdlX21vZGVscy9iYXNlLnRzXG52YXIgYmFzZV9leHBvcnRzID0ge307XG5fX2V4cG9ydChiYXNlX2V4cG9ydHMsIHtcblx0QmFzZUxhbmdDaGFpbjogKCkgPT4gQmFzZUxhbmdDaGFpbixcblx0QmFzZUxhbmd1YWdlTW9kZWw6ICgpID0+IEJhc2VMYW5ndWFnZU1vZGVsLFxuXHRjYWxjdWxhdGVNYXhUb2tlbnM6ICgpID0+IGNhbGN1bGF0ZU1heFRva2Vucyxcblx0Z2V0RW1iZWRkaW5nQ29udGV4dFNpemU6ICgpID0+IGdldEVtYmVkZGluZ0NvbnRleHRTaXplLFxuXHRnZXRNb2RlbENvbnRleHRTaXplOiAoKSA9PiBnZXRNb2RlbENvbnRleHRTaXplLFxuXHRnZXRNb2RlbE5hbWVGb3JUaWt0b2tlbjogKCkgPT4gZ2V0TW9kZWxOYW1lRm9yVGlrdG9rZW4sXG5cdGlzT3BlbkFJVG9vbDogKCkgPT4gaXNPcGVuQUlUb29sXG59KTtcbmNvbnN0IGdldE1vZGVsTmFtZUZvclRpa3Rva2VuID0gKG1vZGVsTmFtZSkgPT4ge1xuXHRpZiAobW9kZWxOYW1lLnN0YXJ0c1dpdGgoXCJncHQtNVwiKSkgcmV0dXJuIFwiZ3B0LTVcIjtcblx0aWYgKG1vZGVsTmFtZS5zdGFydHNXaXRoKFwiZ3B0LTMuNS10dXJiby0xNmtcIikpIHJldHVybiBcImdwdC0zLjUtdHVyYm8tMTZrXCI7XG5cdGlmIChtb2RlbE5hbWUuc3RhcnRzV2l0aChcImdwdC0zLjUtdHVyYm8tXCIpKSByZXR1cm4gXCJncHQtMy41LXR1cmJvXCI7XG5cdGlmIChtb2RlbE5hbWUuc3RhcnRzV2l0aChcImdwdC00LTMya1wiKSkgcmV0dXJuIFwiZ3B0LTQtMzJrXCI7XG5cdGlmIChtb2RlbE5hbWUuc3RhcnRzV2l0aChcImdwdC00LVwiKSkgcmV0dXJuIFwiZ3B0LTRcIjtcblx0aWYgKG1vZGVsTmFtZS5zdGFydHNXaXRoKFwiZ3B0LTRvXCIpKSByZXR1cm4gXCJncHQtNG9cIjtcblx0cmV0dXJuIG1vZGVsTmFtZTtcbn07XG5jb25zdCBnZXRFbWJlZGRpbmdDb250ZXh0U2l6ZSA9IChtb2RlbE5hbWUpID0+IHtcblx0c3dpdGNoIChtb2RlbE5hbWUpIHtcblx0XHRjYXNlIFwidGV4dC1lbWJlZGRpbmctYWRhLTAwMlwiOiByZXR1cm4gODE5MTtcblx0XHRkZWZhdWx0OiByZXR1cm4gMjA0Njtcblx0fVxufTtcbi8qKlxuKiBHZXQgdGhlIGNvbnRleHQgd2luZG93IHNpemUgKG1heCBpbnB1dCB0b2tlbnMpIGZvciBhIGdpdmVuIG1vZGVsLlxuKlxuKiBDb250ZXh0IHdpbmRvdyBzaXplcyBhcmUgc291cmNlZCBmcm9tIG9mZmljaWFsIG1vZGVsIGRvY3VtZW50YXRpb246XG4qIC0gT3BlbkFJOiBodHRwczovL3BsYXRmb3JtLm9wZW5haS5jb20vZG9jcy9tb2RlbHNcbiogLSBBbnRocm9waWM6IGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2NsYXVkZS9kb2NzL21vZGVscy1vdmVydmlld1xuKiAtIEdvb2dsZTogaHR0cHM6Ly9haS5nb29nbGUuZGV2L2dlbWluaS9kb2NzL21vZGVscy9nZW1pbmlcbipcbiogQHBhcmFtIG1vZGVsTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBtb2RlbFxuKiBAcmV0dXJucyBUaGUgY29udGV4dCB3aW5kb3cgc2l6ZSBpbiB0b2tlbnNcbiovXG5jb25zdCBnZXRNb2RlbENvbnRleHRTaXplID0gKG1vZGVsTmFtZSkgPT4ge1xuXHRjb25zdCBub3JtYWxpemVkTmFtZSA9IGdldE1vZGVsTmFtZUZvclRpa3Rva2VuKG1vZGVsTmFtZSk7XG5cdHN3aXRjaCAobm9ybWFsaXplZE5hbWUpIHtcblx0XHRjYXNlIFwiZ3B0LTVcIjpcblx0XHRjYXNlIFwiZ3B0LTUtdHVyYm9cIjpcblx0XHRjYXNlIFwiZ3B0LTUtdHVyYm8tcHJldmlld1wiOiByZXR1cm4gNGU1O1xuXHRcdGNhc2UgXCJncHQtNG9cIjpcblx0XHRjYXNlIFwiZ3B0LTRvLW1pbmlcIjpcblx0XHRjYXNlIFwiZ3B0LTRvLTIwMjQtMDUtMTNcIjpcblx0XHRjYXNlIFwiZ3B0LTRvLTIwMjQtMDgtMDZcIjogcmV0dXJuIDEyOGUzO1xuXHRcdGNhc2UgXCJncHQtNC10dXJib1wiOlxuXHRcdGNhc2UgXCJncHQtNC10dXJiby1wcmV2aWV3XCI6XG5cdFx0Y2FzZSBcImdwdC00LXR1cmJvLTIwMjQtMDQtMDlcIjpcblx0XHRjYXNlIFwiZ3B0LTQtMDEyNS1wcmV2aWV3XCI6XG5cdFx0Y2FzZSBcImdwdC00LTExMDYtcHJldmlld1wiOiByZXR1cm4gMTI4ZTM7XG5cdFx0Y2FzZSBcImdwdC00LTMya1wiOlxuXHRcdGNhc2UgXCJncHQtNC0zMmstMDMxNFwiOlxuXHRcdGNhc2UgXCJncHQtNC0zMmstMDYxM1wiOiByZXR1cm4gMzI3Njg7XG5cdFx0Y2FzZSBcImdwdC00XCI6XG5cdFx0Y2FzZSBcImdwdC00LTAzMTRcIjpcblx0XHRjYXNlIFwiZ3B0LTQtMDYxM1wiOiByZXR1cm4gODE5Mjtcblx0XHRjYXNlIFwiZ3B0LTMuNS10dXJiby0xNmtcIjpcblx0XHRjYXNlIFwiZ3B0LTMuNS10dXJiby0xNmstMDYxM1wiOiByZXR1cm4gMTYzODQ7XG5cdFx0Y2FzZSBcImdwdC0zLjUtdHVyYm9cIjpcblx0XHRjYXNlIFwiZ3B0LTMuNS10dXJiby0wMzAxXCI6XG5cdFx0Y2FzZSBcImdwdC0zLjUtdHVyYm8tMDYxM1wiOlxuXHRcdGNhc2UgXCJncHQtMy41LXR1cmJvLTExMDZcIjpcblx0XHRjYXNlIFwiZ3B0LTMuNS10dXJiby0wMTI1XCI6IHJldHVybiA0MDk2O1xuXHRcdGNhc2UgXCJ0ZXh0LWRhdmluY2ktMDAzXCI6XG5cdFx0Y2FzZSBcInRleHQtZGF2aW5jaS0wMDJcIjogcmV0dXJuIDQwOTc7XG5cdFx0Y2FzZSBcInRleHQtZGF2aW5jaS0wMDFcIjogcmV0dXJuIDIwNDk7XG5cdFx0Y2FzZSBcInRleHQtY3VyaWUtMDAxXCI6XG5cdFx0Y2FzZSBcInRleHQtYmFiYmFnZS0wMDFcIjpcblx0XHRjYXNlIFwidGV4dC1hZGEtMDAxXCI6IHJldHVybiAyMDQ4O1xuXHRcdGNhc2UgXCJjb2RlLWRhdmluY2ktMDAyXCI6XG5cdFx0Y2FzZSBcImNvZGUtZGF2aW5jaS0wMDFcIjogcmV0dXJuIDhlMztcblx0XHRjYXNlIFwiY29kZS1jdXNobWFuLTAwMVwiOiByZXR1cm4gMjA0ODtcblx0XHRjYXNlIFwiY2xhdWRlLTMtNS1zb25uZXQtMjAyNDEwMjJcIjpcblx0XHRjYXNlIFwiY2xhdWRlLTMtNS1zb25uZXQtMjAyNDA2MjBcIjpcblx0XHRjYXNlIFwiY2xhdWRlLTMtb3B1cy0yMDI0MDIyOVwiOlxuXHRcdGNhc2UgXCJjbGF1ZGUtMy1zb25uZXQtMjAyNDAyMjlcIjpcblx0XHRjYXNlIFwiY2xhdWRlLTMtaGFpa3UtMjAyNDAzMDdcIjpcblx0XHRjYXNlIFwiY2xhdWRlLTIuMVwiOiByZXR1cm4gMmU1O1xuXHRcdGNhc2UgXCJjbGF1ZGUtMi4wXCI6XG5cdFx0Y2FzZSBcImNsYXVkZS1pbnN0YW50LTEuMlwiOiByZXR1cm4gMWU1O1xuXHRcdGNhc2UgXCJnZW1pbmktMS41LXByb1wiOlxuXHRcdGNhc2UgXCJnZW1pbmktMS41LXByby1sYXRlc3RcIjpcblx0XHRjYXNlIFwiZ2VtaW5pLTEuNS1mbGFzaFwiOlxuXHRcdGNhc2UgXCJnZW1pbmktMS41LWZsYXNoLWxhdGVzdFwiOiByZXR1cm4gMWU2O1xuXHRcdGNhc2UgXCJnZW1pbmktcHJvXCI6XG5cdFx0Y2FzZSBcImdlbWluaS1wcm8tdmlzaW9uXCI6IHJldHVybiAzMjc2ODtcblx0XHRkZWZhdWx0OiByZXR1cm4gNDA5Nztcblx0fVxufTtcbi8qKlxuKiBXaGV0aGVyIG9yIG5vdCB0aGUgaW5wdXQgbWF0Y2hlcyB0aGUgT3BlbkFJIHRvb2wgZGVmaW5pdGlvbi5cbiogQHBhcmFtIHt1bmtub3dufSB0b29sIFRoZSBpbnB1dCB0byBjaGVjay5cbiogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGlucHV0IGlzIGFuIE9wZW5BSSB0b29sIGRlZmluaXRpb24uXG4qL1xuZnVuY3Rpb24gaXNPcGVuQUlUb29sKHRvb2wpIHtcblx0aWYgKHR5cGVvZiB0b29sICE9PSBcIm9iamVjdFwiIHx8ICF0b29sKSByZXR1cm4gZmFsc2U7XG5cdGlmIChcInR5cGVcIiBpbiB0b29sICYmIHRvb2wudHlwZSA9PT0gXCJmdW5jdGlvblwiICYmIFwiZnVuY3Rpb25cIiBpbiB0b29sICYmIHR5cGVvZiB0b29sLmZ1bmN0aW9uID09PSBcIm9iamVjdFwiICYmIHRvb2wuZnVuY3Rpb24gJiYgXCJuYW1lXCIgaW4gdG9vbC5mdW5jdGlvbiAmJiBcInBhcmFtZXRlcnNcIiBpbiB0b29sLmZ1bmN0aW9uKSByZXR1cm4gdHJ1ZTtcblx0cmV0dXJuIGZhbHNlO1xufVxuY29uc3QgY2FsY3VsYXRlTWF4VG9rZW5zID0gYXN5bmMgKHsgcHJvbXB0LCBtb2RlbE5hbWUgfSkgPT4ge1xuXHRsZXQgbnVtVG9rZW5zO1xuXHR0cnkge1xuXHRcdG51bVRva2VucyA9IChhd2FpdCBlbmNvZGluZ0Zvck1vZGVsKGdldE1vZGVsTmFtZUZvclRpa3Rva2VuKG1vZGVsTmFtZSkpKS5lbmNvZGUocHJvbXB0KS5sZW5ndGg7XG5cdH0gY2F0Y2gge1xuXHRcdGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBjYWxjdWxhdGUgbnVtYmVyIG9mIHRva2VucywgZmFsbGluZyBiYWNrIHRvIGFwcHJveGltYXRlIGNvdW50XCIpO1xuXHRcdG51bVRva2VucyA9IE1hdGguY2VpbChwcm9tcHQubGVuZ3RoIC8gNCk7XG5cdH1cblx0Y29uc3QgbWF4VG9rZW5zID0gZ2V0TW9kZWxDb250ZXh0U2l6ZShtb2RlbE5hbWUpO1xuXHRyZXR1cm4gbWF4VG9rZW5zIC0gbnVtVG9rZW5zO1xufTtcbmNvbnN0IGdldFZlcmJvc2l0eSA9ICgpID0+IGZhbHNlO1xuLyoqXG4qIEJhc2UgY2xhc3MgZm9yIGxhbmd1YWdlIG1vZGVscywgY2hhaW5zLCB0b29scy5cbiovXG52YXIgQmFzZUxhbmdDaGFpbiA9IGNsYXNzIGV4dGVuZHMgUnVubmFibGUge1xuXHQvKipcblx0KiBXaGV0aGVyIHRvIHByaW50IG91dCByZXNwb25zZSB0ZXh0LlxuXHQqL1xuXHR2ZXJib3NlO1xuXHRjYWxsYmFja3M7XG5cdHRhZ3M7XG5cdG1ldGFkYXRhO1xuXHRnZXQgbGNfYXR0cmlidXRlcygpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0Y2FsbGJhY2tzOiB2b2lkIDAsXG5cdFx0XHR2ZXJib3NlOiB2b2lkIDBcblx0XHR9O1xuXHR9XG5cdGNvbnN0cnVjdG9yKHBhcmFtcykge1xuXHRcdHN1cGVyKHBhcmFtcyk7XG5cdFx0dGhpcy52ZXJib3NlID0gcGFyYW1zLnZlcmJvc2UgPz8gZ2V0VmVyYm9zaXR5KCk7XG5cdFx0dGhpcy5jYWxsYmFja3MgPSBwYXJhbXMuY2FsbGJhY2tzO1xuXHRcdHRoaXMudGFncyA9IHBhcmFtcy50YWdzID8/IFtdO1xuXHRcdHRoaXMubWV0YWRhdGEgPSBwYXJhbXMubWV0YWRhdGEgPz8ge307XG5cdH1cbn07XG4vKipcbiogQmFzZSBjbGFzcyBmb3IgbGFuZ3VhZ2UgbW9kZWxzLlxuKi9cbnZhciBCYXNlTGFuZ3VhZ2VNb2RlbCA9IGNsYXNzIGV4dGVuZHMgQmFzZUxhbmdDaGFpbiB7XG5cdC8qKlxuXHQqIEtleXMgdGhhdCB0aGUgbGFuZ3VhZ2UgbW9kZWwgYWNjZXB0cyBhcyBjYWxsIG9wdGlvbnMuXG5cdCovXG5cdGdldCBjYWxsS2V5cygpIHtcblx0XHRyZXR1cm4gW1xuXHRcdFx0XCJzdG9wXCIsXG5cdFx0XHRcInRpbWVvdXRcIixcblx0XHRcdFwic2lnbmFsXCIsXG5cdFx0XHRcInRhZ3NcIixcblx0XHRcdFwibWV0YWRhdGFcIixcblx0XHRcdFwiY2FsbGJhY2tzXCJcblx0XHRdO1xuXHR9XG5cdC8qKlxuXHQqIFRoZSBhc3luYyBjYWxsZXIgc2hvdWxkIGJlIHVzZWQgYnkgc3ViY2xhc3NlcyB0byBtYWtlIGFueSBhc3luYyBjYWxscyxcblx0KiB3aGljaCB3aWxsIHRodXMgYmVuZWZpdCBmcm9tIHRoZSBjb25jdXJyZW5jeSBhbmQgcmV0cnkgbG9naWMuXG5cdCovXG5cdGNhbGxlcjtcblx0Y2FjaGU7XG5cdGNvbnN0cnVjdG9yKHsgY2FsbGJhY2tzLCBjYWxsYmFja01hbmFnZXIsLi4ucGFyYW1zIH0pIHtcblx0XHRjb25zdCB7IGNhY2hlLC4uLnJlc3QgfSA9IHBhcmFtcztcblx0XHRzdXBlcih7XG5cdFx0XHRjYWxsYmFja3M6IGNhbGxiYWNrcyA/PyBjYWxsYmFja01hbmFnZXIsXG5cdFx0XHQuLi5yZXN0XG5cdFx0fSk7XG5cdFx0aWYgKHR5cGVvZiBjYWNoZSA9PT0gXCJvYmplY3RcIikgdGhpcy5jYWNoZSA9IGNhY2hlO1xuXHRcdGVsc2UgaWYgKGNhY2hlKSB0aGlzLmNhY2hlID0gSW5NZW1vcnlDYWNoZS5nbG9iYWwoKTtcblx0XHRlbHNlIHRoaXMuY2FjaGUgPSB2b2lkIDA7XG5cdFx0dGhpcy5jYWxsZXIgPSBuZXcgQXN5bmNDYWxsZXIocGFyYW1zID8/IHt9KTtcblx0fVxuXHRfZW5jb2Rpbmc7XG5cdC8qKlxuXHQqIEdldCB0aGUgbnVtYmVyIG9mIHRva2VucyBpbiB0aGUgY29udGVudC5cblx0KiBAcGFyYW0gY29udGVudCBUaGUgY29udGVudCB0byBnZXQgdGhlIG51bWJlciBvZiB0b2tlbnMgZm9yLlxuXHQqIEByZXR1cm5zIFRoZSBudW1iZXIgb2YgdG9rZW5zIGluIHRoZSBjb250ZW50LlxuXHQqL1xuXHRhc3luYyBnZXROdW1Ub2tlbnMoY29udGVudCkge1xuXHRcdGxldCB0ZXh0Q29udGVudDtcblx0XHRpZiAodHlwZW9mIGNvbnRlbnQgPT09IFwic3RyaW5nXCIpIHRleHRDb250ZW50ID0gY29udGVudDtcblx0XHRlbHNlXG4gLyoqXG5cdFx0KiBDb250ZW50IGlzIGFuIGFycmF5IG9mIENvbnRlbnRCbG9ja1xuXHRcdCpcblx0XHQqIFRvRG8oQGNocmlzdGlhbi1icm9tYW5uKTogVGhpcyBpcyBhIHRlbXBvcmFyeSBmaXggdG8gZ2V0IHRoZSBudW1iZXIgb2YgdG9rZW5zIGZvciB0aGUgY29udGVudC5cblx0XHQqIFdlIG5lZWQgdG8gZmluZCBhIGJldHRlciB3YXkgdG8gZG8gdGhpcy5cblx0XHQqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2xhbmdjaGFpbi1haS9sYW5nY2hhaW5qcy9wdWxsLzgzNDEjcHVsbHJlcXVlc3RyZXZpZXctMjkzMzcxMzExNlxuXHRcdCovXG5cdFx0dGV4dENvbnRlbnQgPSBjb250ZW50Lm1hcCgoaXRlbSkgPT4ge1xuXHRcdFx0aWYgKHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiKSByZXR1cm4gaXRlbTtcblx0XHRcdGlmIChpdGVtLnR5cGUgPT09IFwidGV4dFwiICYmIFwidGV4dFwiIGluIGl0ZW0pIHJldHVybiBpdGVtLnRleHQ7XG5cdFx0XHRyZXR1cm4gXCJcIjtcblx0XHR9KS5qb2luKFwiXCIpO1xuXHRcdGxldCBudW1Ub2tlbnMgPSBNYXRoLmNlaWwodGV4dENvbnRlbnQubGVuZ3RoIC8gNCk7XG5cdFx0aWYgKCF0aGlzLl9lbmNvZGluZykgdHJ5IHtcblx0XHRcdHRoaXMuX2VuY29kaW5nID0gYXdhaXQgZW5jb2RpbmdGb3JNb2RlbChcIm1vZGVsTmFtZVwiIGluIHRoaXMgPyBnZXRNb2RlbE5hbWVGb3JUaWt0b2tlbih0aGlzLm1vZGVsTmFtZSkgOiBcImdwdDJcIik7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBjYWxjdWxhdGUgbnVtYmVyIG9mIHRva2VucywgZmFsbGluZyBiYWNrIHRvIGFwcHJveGltYXRlIGNvdW50XCIsIGVycm9yKTtcblx0XHR9XG5cdFx0aWYgKHRoaXMuX2VuY29kaW5nKSB0cnkge1xuXHRcdFx0bnVtVG9rZW5zID0gdGhpcy5fZW5jb2RpbmcuZW5jb2RlKHRleHRDb250ZW50KS5sZW5ndGg7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBjYWxjdWxhdGUgbnVtYmVyIG9mIHRva2VucywgZmFsbGluZyBiYWNrIHRvIGFwcHJveGltYXRlIGNvdW50XCIsIGVycm9yKTtcblx0XHR9XG5cdFx0cmV0dXJuIG51bVRva2Vucztcblx0fVxuXHRzdGF0aWMgX2NvbnZlcnRJbnB1dFRvUHJvbXB0VmFsdWUoaW5wdXQpIHtcblx0XHRpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKSByZXR1cm4gbmV3IFN0cmluZ1Byb21wdFZhbHVlKGlucHV0KTtcblx0XHRlbHNlIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkgcmV0dXJuIG5ldyBDaGF0UHJvbXB0VmFsdWUoaW5wdXQubWFwKGNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlKSk7XG5cdFx0ZWxzZSByZXR1cm4gaW5wdXQ7XG5cdH1cblx0LyoqXG5cdCogR2V0IHRoZSBpZGVudGlmeWluZyBwYXJhbWV0ZXJzIG9mIHRoZSBMTE0uXG5cdCovXG5cdF9pZGVudGlmeWluZ1BhcmFtcygpIHtcblx0XHRyZXR1cm4ge307XG5cdH1cblx0LyoqXG5cdCogQ3JlYXRlIGEgdW5pcXVlIGNhY2hlIGtleSBmb3IgYSBzcGVjaWZpYyBjYWxsIHRvIGEgc3BlY2lmaWMgbGFuZ3VhZ2UgbW9kZWwuXG5cdCogQHBhcmFtIGNhbGxPcHRpb25zIENhbGwgb3B0aW9ucyBmb3IgdGhlIG1vZGVsXG5cdCogQHJldHVybnMgQSB1bmlxdWUgY2FjaGUga2V5LlxuXHQqL1xuXHRfZ2V0U2VyaWFsaXplZENhY2hlS2V5UGFyYW1ldGVyc0ZvckNhbGwoeyBjb25maWcsLi4uY2FsbE9wdGlvbnMgfSkge1xuXHRcdGNvbnN0IHBhcmFtcyA9IHtcblx0XHRcdC4uLnRoaXMuX2lkZW50aWZ5aW5nUGFyYW1zKCksXG5cdFx0XHQuLi5jYWxsT3B0aW9ucyxcblx0XHRcdF90eXBlOiB0aGlzLl9sbG1UeXBlKCksXG5cdFx0XHRfbW9kZWw6IHRoaXMuX21vZGVsVHlwZSgpXG5cdFx0fTtcblx0XHRjb25zdCBmaWx0ZXJlZEVudHJpZXMgPSBPYmplY3QuZW50cmllcyhwYXJhbXMpLmZpbHRlcigoW18sIHZhbHVlXSkgPT4gdmFsdWUgIT09IHZvaWQgMCk7XG5cdFx0Y29uc3Qgc2VyaWFsaXplZEVudHJpZXMgPSBmaWx0ZXJlZEVudHJpZXMubWFwKChba2V5LCB2YWx1ZV0pID0+IGAke2tleX06JHtKU09OLnN0cmluZ2lmeSh2YWx1ZSl9YCkuc29ydCgpLmpvaW4oXCIsXCIpO1xuXHRcdHJldHVybiBzZXJpYWxpemVkRW50cmllcztcblx0fVxuXHQvKipcblx0KiBAZGVwcmVjYXRlZFxuXHQqIFJldHVybiBhIGpzb24tbGlrZSBvYmplY3QgcmVwcmVzZW50aW5nIHRoaXMgTExNLlxuXHQqL1xuXHRzZXJpYWxpemUoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdC4uLnRoaXMuX2lkZW50aWZ5aW5nUGFyYW1zKCksXG5cdFx0XHRfdHlwZTogdGhpcy5fbGxtVHlwZSgpLFxuXHRcdFx0X21vZGVsOiB0aGlzLl9tb2RlbFR5cGUoKVxuXHRcdH07XG5cdH1cblx0LyoqXG5cdCogQGRlcHJlY2F0ZWRcblx0KiBMb2FkIGFuIExMTSBmcm9tIGEganNvbi1saWtlIG9iamVjdCBkZXNjcmliaW5nIGl0LlxuXHQqL1xuXHRzdGF0aWMgYXN5bmMgZGVzZXJpYWxpemUoX2RhdGEpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJVc2UgLnRvSlNPTigpIGluc3RlYWRcIik7XG5cdH1cblx0LyoqXG5cdCogUmV0dXJuIHByb2ZpbGluZyBpbmZvcm1hdGlvbiBmb3IgdGhlIG1vZGVsLlxuXHQqXG5cdCogQHJldHVybnMge01vZGVsUHJvZmlsZX0gQW4gb2JqZWN0IGRlc2NyaWJpbmcgdGhlIG1vZGVsJ3MgY2FwYWJpbGl0aWVzIGFuZCBjb25zdHJhaW50c1xuXHQqL1xuXHRnZXQgcHJvZmlsZSgpIHtcblx0XHRyZXR1cm4ge307XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQmFzZUxhbmdDaGFpbiwgQmFzZUxhbmd1YWdlTW9kZWwsIGJhc2VfZXhwb3J0cywgY2FsY3VsYXRlTWF4VG9rZW5zLCBnZXRFbWJlZGRpbmdDb250ZXh0U2l6ZSwgZ2V0TW9kZWxDb250ZXh0U2l6ZSwgZ2V0TW9kZWxOYW1lRm9yVGlrdG9rZW4sIGlzT3BlbkFJVG9vbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmFzZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/language_models/base.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/language_models/chat_models.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/language_models/chat_models.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseChatModel: () => (/* binding */ BaseChatModel),\n/* harmony export */   SimpleChatModel: () => (/* binding */ SimpleChatModel),\n/* harmony export */   chat_models_exports: () => (/* binding */ chat_models_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _messages_content_data_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../messages/content/data.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/content/data.js\");\n/* harmony import */ var _messages_base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../messages/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _messages_utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../messages/utils.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/utils.js\");\n/* harmony import */ var _messages_ai_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../messages/ai.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/env.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _callbacks_base_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../callbacks/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/callbacks/base.js\");\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(ssr)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/stream.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _outputs_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../outputs.js */ \"(ssr)/./node_modules/@langchain/core/dist/outputs.js\");\n/* harmony import */ var _utils_types_zod_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../utils/types/zod.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/types/zod.js\");\n/* harmony import */ var _utils_json_schema_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../utils/json_schema.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/json_schema.js\");\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../runnables/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../messages/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/language_models/base.js\");\n/* harmony import */ var _runnables_passthrough_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../runnables/passthrough.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/passthrough.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./utils.js */ \"(ssr)/./node_modules/@langchain/core/dist/language_models/utils.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/language_models/chat_models.ts\nvar chat_models_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(chat_models_exports, {\n\tBaseChatModel: () => BaseChatModel,\n\tSimpleChatModel: () => SimpleChatModel\n});\nfunction _formatForTracing(messages) {\n\tconst messagesToTrace = [];\n\tfor (const message of messages) {\n\t\tlet messageToTrace = message;\n\t\tif (Array.isArray(message.content)) for (let idx = 0; idx < message.content.length; idx++) {\n\t\t\tconst block = message.content[idx];\n\t\t\tif ((0,_messages_content_data_js__WEBPACK_IMPORTED_MODULE_1__.isURLContentBlock)(block) || (0,_messages_content_data_js__WEBPACK_IMPORTED_MODULE_1__.isBase64ContentBlock)(block)) {\n\t\t\t\tif (messageToTrace === message) messageToTrace = new message.constructor({\n\t\t\t\t\t...messageToTrace,\n\t\t\t\t\tcontent: [\n\t\t\t\t\t\t...message.content.slice(0, idx),\n\t\t\t\t\t\t(0,_messages_content_data_js__WEBPACK_IMPORTED_MODULE_1__.convertToOpenAIImageBlock)(block),\n\t\t\t\t\t\t...message.content.slice(idx + 1)\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tmessagesToTrace.push(messageToTrace);\n\t}\n\treturn messagesToTrace;\n}\n/**\n* Base class for chat models. It extends the BaseLanguageModel class and\n* provides methods for generating chat based on input messages.\n*/\nvar BaseChatModel = class BaseChatModel extends _base_js__WEBPACK_IMPORTED_MODULE_14__.BaseLanguageModel {\n\tlc_namespace = [\n\t\t\"langchain\",\n\t\t\"chat_models\",\n\t\tthis._llmType()\n\t];\n\tdisableStreaming = false;\n\toutputVersion;\n\tget callKeys() {\n\t\treturn [...super.callKeys, \"outputVersion\"];\n\t}\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.outputVersion = (0,_utils_js__WEBPACK_IMPORTED_MODULE_16__.iife)(() => {\n\t\t\tconst outputVersion = fields.outputVersion ?? (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_5__.getEnvironmentVariable)(\"LC_OUTPUT_VERSION\");\n\t\t\tif (outputVersion && [\"v0\", \"v1\"].includes(outputVersion)) return outputVersion;\n\t\t\treturn \"v0\";\n\t\t});\n\t}\n\t_separateRunnableConfigFromCallOptionsCompat(options) {\n\t\tconst [runnableConfig, callOptions] = super._separateRunnableConfigFromCallOptions(options);\n\t\tcallOptions.signal = runnableConfig.signal;\n\t\treturn [runnableConfig, callOptions];\n\t}\n\t/**\n\t* Invokes the chat model with a single input.\n\t* @param input The input for the language model.\n\t* @param options The call options.\n\t* @returns A Promise that resolves to a BaseMessageChunk.\n\t*/\n\tasync invoke(input, options) {\n\t\tconst promptValue = BaseChatModel._convertInputToPromptValue(input);\n\t\tconst result = await this.generatePrompt([promptValue], options, options?.callbacks);\n\t\tconst chatGeneration = result.generations[0][0];\n\t\treturn chatGeneration.message;\n\t}\n\tasync *_streamResponseChunks(_messages, _options, _runManager) {\n\t\tthrow new Error(\"Not implemented.\");\n\t}\n\tasync *_streamIterator(input, options) {\n\t\tif (this._streamResponseChunks === BaseChatModel.prototype._streamResponseChunks || this.disableStreaming) yield this.invoke(input, options);\n\t\telse {\n\t\t\tconst prompt = BaseChatModel._convertInputToPromptValue(input);\n\t\t\tconst messages = prompt.toChatMessages();\n\t\t\tconst [runnableConfig, callOptions] = this._separateRunnableConfigFromCallOptionsCompat(options);\n\t\t\tconst inheritableMetadata = {\n\t\t\t\t...runnableConfig.metadata,\n\t\t\t\t...this.getLsParams(callOptions)\n\t\t\t};\n\t\t\tconst callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_7__.CallbackManager.configure(runnableConfig.callbacks, this.callbacks, runnableConfig.tags, this.tags, inheritableMetadata, this.metadata, { verbose: this.verbose });\n\t\t\tconst extra = {\n\t\t\t\toptions: callOptions,\n\t\t\t\tinvocation_params: this?.invocationParams(callOptions),\n\t\t\t\tbatch_size: 1\n\t\t\t};\n\t\t\tconst outputVersion = callOptions.outputVersion ?? this.outputVersion;\n\t\t\tconst runManagers = await callbackManager_?.handleChatModelStart(this.toJSON(), [_formatForTracing(messages)], runnableConfig.runId, void 0, extra, void 0, void 0, runnableConfig.runName);\n\t\t\tlet generationChunk;\n\t\t\tlet llmOutput;\n\t\t\ttry {\n\t\t\t\tfor await (const chunk of this._streamResponseChunks(messages, callOptions, runManagers?.[0])) {\n\t\t\t\t\tif (chunk.message.id == null) {\n\t\t\t\t\t\tconst runId = runManagers?.at(0)?.runId;\n\t\t\t\t\t\tif (runId != null) chunk.message._updateId(`run-${runId}`);\n\t\t\t\t\t}\n\t\t\t\t\tchunk.message.response_metadata = {\n\t\t\t\t\t\t...chunk.generationInfo,\n\t\t\t\t\t\t...chunk.message.response_metadata\n\t\t\t\t\t};\n\t\t\t\t\tif (outputVersion === \"v1\") yield (0,_utils_js__WEBPACK_IMPORTED_MODULE_16__.castStandardMessageContent)(chunk.message);\n\t\t\t\t\telse yield chunk.message;\n\t\t\t\t\tif (!generationChunk) generationChunk = chunk;\n\t\t\t\t\telse generationChunk = generationChunk.concat(chunk);\n\t\t\t\t\tif ((0,_messages_ai_js__WEBPACK_IMPORTED_MODULE_4__.isAIMessageChunk)(chunk.message) && chunk.message.usage_metadata !== void 0) llmOutput = { tokenUsage: {\n\t\t\t\t\t\tpromptTokens: chunk.message.usage_metadata.input_tokens,\n\t\t\t\t\t\tcompletionTokens: chunk.message.usage_metadata.output_tokens,\n\t\t\t\t\t\ttotalTokens: chunk.message.usage_metadata.total_tokens\n\t\t\t\t\t} };\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tawait Promise.all((runManagers ?? []).map((runManager) => runManager?.handleLLMError(err)));\n\t\t\t\tthrow err;\n\t\t\t}\n\t\t\tawait Promise.all((runManagers ?? []).map((runManager) => runManager?.handleLLMEnd({\n\t\t\t\tgenerations: [[generationChunk]],\n\t\t\t\tllmOutput\n\t\t\t})));\n\t\t}\n\t}\n\tgetLsParams(options) {\n\t\tconst providerName = this.getName().startsWith(\"Chat\") ? this.getName().replace(\"Chat\", \"\") : this.getName();\n\t\treturn {\n\t\t\tls_model_type: \"chat\",\n\t\t\tls_stop: options.stop,\n\t\t\tls_provider: providerName\n\t\t};\n\t}\n\t/** @ignore */\n\tasync _generateUncached(messages, parsedOptions, handledOptions, startedRunManagers) {\n\t\tconst baseMessages = messages.map((messageList) => messageList.map(_messages_utils_js__WEBPACK_IMPORTED_MODULE_3__.coerceMessageLikeToMessage));\n\t\tlet runManagers;\n\t\tif (startedRunManagers !== void 0 && startedRunManagers.length === baseMessages.length) runManagers = startedRunManagers;\n\t\telse {\n\t\t\tconst inheritableMetadata = {\n\t\t\t\t...handledOptions.metadata,\n\t\t\t\t...this.getLsParams(parsedOptions)\n\t\t\t};\n\t\t\tconst callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_7__.CallbackManager.configure(handledOptions.callbacks, this.callbacks, handledOptions.tags, this.tags, inheritableMetadata, this.metadata, { verbose: this.verbose });\n\t\t\tconst extra = {\n\t\t\t\toptions: parsedOptions,\n\t\t\t\tinvocation_params: this?.invocationParams(parsedOptions),\n\t\t\t\tbatch_size: 1\n\t\t\t};\n\t\t\trunManagers = await callbackManager_?.handleChatModelStart(this.toJSON(), baseMessages.map(_formatForTracing), handledOptions.runId, void 0, extra, void 0, void 0, handledOptions.runName);\n\t\t}\n\t\tconst outputVersion = parsedOptions.outputVersion ?? this.outputVersion;\n\t\tconst generations = [];\n\t\tconst llmOutputs = [];\n\t\tconst hasStreamingHandler = !!runManagers?.[0].handlers.find(_callbacks_base_js__WEBPACK_IMPORTED_MODULE_6__.callbackHandlerPrefersStreaming);\n\t\tif (hasStreamingHandler && !this.disableStreaming && baseMessages.length === 1 && this._streamResponseChunks !== BaseChatModel.prototype._streamResponseChunks) try {\n\t\t\tconst stream = await this._streamResponseChunks(baseMessages[0], parsedOptions, runManagers?.[0]);\n\t\t\tlet aggregated;\n\t\t\tlet llmOutput;\n\t\t\tfor await (const chunk of stream) {\n\t\t\t\tif (chunk.message.id == null) {\n\t\t\t\t\tconst runId = runManagers?.at(0)?.runId;\n\t\t\t\t\tif (runId != null) chunk.message._updateId(`run-${runId}`);\n\t\t\t\t}\n\t\t\t\tif (aggregated === void 0) aggregated = chunk;\n\t\t\t\telse aggregated = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_8__.concat)(aggregated, chunk);\n\t\t\t\tif ((0,_messages_ai_js__WEBPACK_IMPORTED_MODULE_4__.isAIMessageChunk)(chunk.message) && chunk.message.usage_metadata !== void 0) llmOutput = { tokenUsage: {\n\t\t\t\t\tpromptTokens: chunk.message.usage_metadata.input_tokens,\n\t\t\t\t\tcompletionTokens: chunk.message.usage_metadata.output_tokens,\n\t\t\t\t\ttotalTokens: chunk.message.usage_metadata.total_tokens\n\t\t\t\t} };\n\t\t\t}\n\t\t\tif (aggregated === void 0) throw new Error(\"Received empty response from chat model call.\");\n\t\t\tgenerations.push([aggregated]);\n\t\t\tawait runManagers?.[0].handleLLMEnd({\n\t\t\t\tgenerations,\n\t\t\t\tllmOutput\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tawait runManagers?.[0].handleLLMError(e);\n\t\t\tthrow e;\n\t\t}\n\t\telse {\n\t\t\tconst results = await Promise.allSettled(baseMessages.map(async (messageList, i) => {\n\t\t\t\tconst generateResults = await this._generate(messageList, {\n\t\t\t\t\t...parsedOptions,\n\t\t\t\t\tpromptIndex: i\n\t\t\t\t}, runManagers?.[i]);\n\t\t\t\tif (outputVersion === \"v1\") for (const generation of generateResults.generations) generation.message = (0,_utils_js__WEBPACK_IMPORTED_MODULE_16__.castStandardMessageContent)(generation.message);\n\t\t\t\treturn generateResults;\n\t\t\t}));\n\t\t\tawait Promise.all(results.map(async (pResult, i) => {\n\t\t\t\tif (pResult.status === \"fulfilled\") {\n\t\t\t\t\tconst result = pResult.value;\n\t\t\t\t\tfor (const generation of result.generations) {\n\t\t\t\t\t\tif (generation.message.id == null) {\n\t\t\t\t\t\t\tconst runId = runManagers?.at(0)?.runId;\n\t\t\t\t\t\t\tif (runId != null) generation.message._updateId(`run-${runId}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgeneration.message.response_metadata = {\n\t\t\t\t\t\t\t...generation.generationInfo,\n\t\t\t\t\t\t\t...generation.message.response_metadata\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tif (result.generations.length === 1) result.generations[0].message.response_metadata = {\n\t\t\t\t\t\t...result.llmOutput,\n\t\t\t\t\t\t...result.generations[0].message.response_metadata\n\t\t\t\t\t};\n\t\t\t\t\tgenerations[i] = result.generations;\n\t\t\t\t\tllmOutputs[i] = result.llmOutput;\n\t\t\t\t\treturn runManagers?.[i]?.handleLLMEnd({\n\t\t\t\t\t\tgenerations: [result.generations],\n\t\t\t\t\t\tllmOutput: result.llmOutput\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tawait runManagers?.[i]?.handleLLMError(pResult.reason);\n\t\t\t\t\treturn Promise.reject(pResult.reason);\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t\tconst output = {\n\t\t\tgenerations,\n\t\t\tllmOutput: llmOutputs.length ? this._combineLLMOutput?.(...llmOutputs) : void 0\n\t\t};\n\t\tObject.defineProperty(output, _outputs_js__WEBPACK_IMPORTED_MODULE_9__.RUN_KEY, {\n\t\t\tvalue: runManagers ? { runIds: runManagers?.map((manager) => manager.runId) } : void 0,\n\t\t\tconfigurable: true\n\t\t});\n\t\treturn output;\n\t}\n\tasync _generateCached({ messages, cache, llmStringKey, parsedOptions, handledOptions }) {\n\t\tconst baseMessages = messages.map((messageList) => messageList.map(_messages_utils_js__WEBPACK_IMPORTED_MODULE_3__.coerceMessageLikeToMessage));\n\t\tconst inheritableMetadata = {\n\t\t\t...handledOptions.metadata,\n\t\t\t...this.getLsParams(parsedOptions)\n\t\t};\n\t\tconst callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_7__.CallbackManager.configure(handledOptions.callbacks, this.callbacks, handledOptions.tags, this.tags, inheritableMetadata, this.metadata, { verbose: this.verbose });\n\t\tconst extra = {\n\t\t\toptions: parsedOptions,\n\t\t\tinvocation_params: this?.invocationParams(parsedOptions),\n\t\t\tbatch_size: 1\n\t\t};\n\t\tconst runManagers = await callbackManager_?.handleChatModelStart(this.toJSON(), baseMessages.map(_formatForTracing), handledOptions.runId, void 0, extra, void 0, void 0, handledOptions.runName);\n\t\tconst missingPromptIndices = [];\n\t\tconst results = await Promise.allSettled(baseMessages.map(async (baseMessage, index) => {\n\t\t\tconst prompt = BaseChatModel._convertInputToPromptValue(baseMessage).toString();\n\t\t\tconst result = await cache.lookup(prompt, llmStringKey);\n\t\t\tif (result == null) missingPromptIndices.push(index);\n\t\t\treturn result;\n\t\t}));\n\t\tconst cachedResults = results.map((result, index) => ({\n\t\t\tresult,\n\t\t\trunManager: runManagers?.[index]\n\t\t})).filter(({ result }) => result.status === \"fulfilled\" && result.value != null || result.status === \"rejected\");\n\t\tconst outputVersion = parsedOptions.outputVersion ?? this.outputVersion;\n\t\tconst generations = [];\n\t\tawait Promise.all(cachedResults.map(async ({ result: promiseResult, runManager }, i) => {\n\t\t\tif (promiseResult.status === \"fulfilled\") {\n\t\t\t\tconst result = promiseResult.value;\n\t\t\t\tgenerations[i] = result.map((result$1) => {\n\t\t\t\t\tif (\"message\" in result$1 && (0,_messages_base_js__WEBPACK_IMPORTED_MODULE_2__.isBaseMessage)(result$1.message) && (0,_messages_ai_js__WEBPACK_IMPORTED_MODULE_4__.isAIMessage)(result$1.message)) {\n\t\t\t\t\t\tresult$1.message.usage_metadata = {\n\t\t\t\t\t\t\tinput_tokens: 0,\n\t\t\t\t\t\t\toutput_tokens: 0,\n\t\t\t\t\t\t\ttotal_tokens: 0\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (outputVersion === \"v1\") result$1.message = (0,_utils_js__WEBPACK_IMPORTED_MODULE_16__.castStandardMessageContent)(result$1.message);\n\t\t\t\t\t}\n\t\t\t\t\tresult$1.generationInfo = {\n\t\t\t\t\t\t...result$1.generationInfo,\n\t\t\t\t\t\ttokenUsage: {}\n\t\t\t\t\t};\n\t\t\t\t\treturn result$1;\n\t\t\t\t});\n\t\t\t\tif (result.length) await runManager?.handleLLMNewToken(result[0].text);\n\t\t\t\treturn runManager?.handleLLMEnd({ generations: [result] }, void 0, void 0, void 0, { cached: true });\n\t\t\t} else {\n\t\t\t\tawait runManager?.handleLLMError(promiseResult.reason, void 0, void 0, void 0, { cached: true });\n\t\t\t\treturn Promise.reject(promiseResult.reason);\n\t\t\t}\n\t\t}));\n\t\tconst output = {\n\t\t\tgenerations,\n\t\t\tmissingPromptIndices,\n\t\t\tstartedRunManagers: runManagers\n\t\t};\n\t\tObject.defineProperty(output, _outputs_js__WEBPACK_IMPORTED_MODULE_9__.RUN_KEY, {\n\t\t\tvalue: runManagers ? { runIds: runManagers?.map((manager) => manager.runId) } : void 0,\n\t\t\tconfigurable: true\n\t\t});\n\t\treturn output;\n\t}\n\t/**\n\t* Generates chat based on the input messages.\n\t* @param messages An array of arrays of BaseMessage instances.\n\t* @param options The call options or an array of stop sequences.\n\t* @param callbacks The callbacks for the language model.\n\t* @returns A Promise that resolves to an LLMResult.\n\t*/\n\tasync generate(messages, options, callbacks) {\n\t\tlet parsedOptions;\n\t\tif (Array.isArray(options)) parsedOptions = { stop: options };\n\t\telse parsedOptions = options;\n\t\tconst baseMessages = messages.map((messageList) => messageList.map(_messages_utils_js__WEBPACK_IMPORTED_MODULE_3__.coerceMessageLikeToMessage));\n\t\tconst [runnableConfig, callOptions] = this._separateRunnableConfigFromCallOptionsCompat(parsedOptions);\n\t\trunnableConfig.callbacks = runnableConfig.callbacks ?? callbacks;\n\t\tif (!this.cache) return this._generateUncached(baseMessages, callOptions, runnableConfig);\n\t\tconst { cache } = this;\n\t\tconst llmStringKey = this._getSerializedCacheKeyParametersForCall(callOptions);\n\t\tconst { generations, missingPromptIndices, startedRunManagers } = await this._generateCached({\n\t\t\tmessages: baseMessages,\n\t\t\tcache,\n\t\t\tllmStringKey,\n\t\t\tparsedOptions: callOptions,\n\t\t\thandledOptions: runnableConfig\n\t\t});\n\t\tlet llmOutput = {};\n\t\tif (missingPromptIndices.length > 0) {\n\t\t\tconst results = await this._generateUncached(missingPromptIndices.map((i) => baseMessages[i]), callOptions, runnableConfig, startedRunManagers !== void 0 ? missingPromptIndices.map((i) => startedRunManagers?.[i]) : void 0);\n\t\t\tawait Promise.all(results.generations.map(async (generation, index) => {\n\t\t\t\tconst promptIndex = missingPromptIndices[index];\n\t\t\t\tgenerations[promptIndex] = generation;\n\t\t\t\tconst prompt = BaseChatModel._convertInputToPromptValue(baseMessages[promptIndex]).toString();\n\t\t\t\treturn cache.update(prompt, llmStringKey, generation);\n\t\t\t}));\n\t\t\tllmOutput = results.llmOutput ?? {};\n\t\t}\n\t\treturn {\n\t\t\tgenerations,\n\t\t\tllmOutput\n\t\t};\n\t}\n\t/**\n\t* Get the parameters used to invoke the model\n\t*/\n\tinvocationParams(_options) {\n\t\treturn {};\n\t}\n\t_modelType() {\n\t\treturn \"base_chat_model\";\n\t}\n\t/**\n\t* Generates a prompt based on the input prompt values.\n\t* @param promptValues An array of BasePromptValue instances.\n\t* @param options The call options or an array of stop sequences.\n\t* @param callbacks The callbacks for the language model.\n\t* @returns A Promise that resolves to an LLMResult.\n\t*/\n\tasync generatePrompt(promptValues, options, callbacks) {\n\t\tconst promptMessages = promptValues.map((promptValue) => promptValue.toChatMessages());\n\t\treturn this.generate(promptMessages, options, callbacks);\n\t}\n\twithStructuredOutput(outputSchema, config) {\n\t\tif (typeof this.bindTools !== \"function\") throw new Error(`Chat model must implement \".bindTools()\" to use withStructuredOutput.`);\n\t\tif (config?.strict) throw new Error(`\"strict\" mode is not supported for this model by default.`);\n\t\tconst schema = outputSchema;\n\t\tconst name = config?.name;\n\t\tconst description = (0,_utils_types_zod_js__WEBPACK_IMPORTED_MODULE_10__.getSchemaDescription)(schema) ?? \"A function available to call.\";\n\t\tconst method = config?.method;\n\t\tconst includeRaw = config?.includeRaw;\n\t\tif (method === \"jsonMode\") throw new Error(`Base withStructuredOutput implementation only supports \"functionCalling\" as a method.`);\n\t\tlet functionName = name ?? \"extract\";\n\t\tlet tools;\n\t\tif ((0,_utils_types_zod_js__WEBPACK_IMPORTED_MODULE_10__.isInteropZodSchema)(schema)) tools = [{\n\t\t\ttype: \"function\",\n\t\t\tfunction: {\n\t\t\t\tname: functionName,\n\t\t\t\tdescription,\n\t\t\t\tparameters: (0,_utils_json_schema_js__WEBPACK_IMPORTED_MODULE_11__.toJsonSchema)(schema)\n\t\t\t}\n\t\t}];\n\t\telse {\n\t\t\tif (\"name\" in schema) functionName = schema.name;\n\t\t\ttools = [{\n\t\t\t\ttype: \"function\",\n\t\t\t\tfunction: {\n\t\t\t\t\tname: functionName,\n\t\t\t\t\tdescription,\n\t\t\t\t\tparameters: schema\n\t\t\t\t}\n\t\t\t}];\n\t\t}\n\t\tconst llm = this.bindTools(tools);\n\t\tconst outputParser = _runnables_base_js__WEBPACK_IMPORTED_MODULE_12__.RunnableLambda.from((input) => {\n\t\t\tif (!_messages_ai_js__WEBPACK_IMPORTED_MODULE_4__.AIMessageChunk.isInstance(input)) throw new Error(\"Input is not an AIMessageChunk.\");\n\t\t\tif (!input.tool_calls || input.tool_calls.length === 0) throw new Error(\"No tool calls found in the response.\");\n\t\t\tconst toolCall = input.tool_calls.find((tc) => tc.name === functionName);\n\t\t\tif (!toolCall) throw new Error(`No tool call found with name ${functionName}.`);\n\t\t\treturn toolCall.args;\n\t\t});\n\t\tif (!includeRaw) return llm.pipe(outputParser).withConfig({ runName: \"StructuredOutput\" });\n\t\tconst parserAssign = _runnables_passthrough_js__WEBPACK_IMPORTED_MODULE_15__.RunnablePassthrough.assign({ parsed: (input, config$1) => outputParser.invoke(input.raw, config$1) });\n\t\tconst parserNone = _runnables_passthrough_js__WEBPACK_IMPORTED_MODULE_15__.RunnablePassthrough.assign({ parsed: () => null });\n\t\tconst parsedWithFallback = parserAssign.withFallbacks({ fallbacks: [parserNone] });\n\t\treturn _runnables_base_js__WEBPACK_IMPORTED_MODULE_12__.RunnableSequence.from([{ raw: llm }, parsedWithFallback]).withConfig({ runName: \"StructuredOutputRunnable\" });\n\t}\n};\n/**\n* An abstract class that extends BaseChatModel and provides a simple\n* implementation of _generate.\n*/\nvar SimpleChatModel = class extends BaseChatModel {\n\tasync _generate(messages, options, runManager) {\n\t\tconst text = await this._call(messages, options, runManager);\n\t\tconst message = new _messages_ai_js__WEBPACK_IMPORTED_MODULE_4__.AIMessage(text);\n\t\tif (typeof message.content !== \"string\") throw new Error(\"Cannot generate with a simple chat model when output is not a string.\");\n\t\treturn { generations: [{\n\t\t\ttext: message.content,\n\t\t\tmessage\n\t\t}] };\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=chat_models.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbGFuZ3VhZ2VfbW9kZWxzL2NoYXRfbW9kZWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTJEO0FBQ3NEO0FBQzdEO0FBQ2M7QUFDMkI7QUFDcEM7QUFDYztBQUNiO0FBQ2Q7QUFDSjtBQUN5QztBQUMxQjtBQUNpQjtBQUMxQztBQUNnQjtBQUNvQjtBQUNKOztBQUU5RDtBQUNBO0FBQ0Esc0VBQVE7QUFDUjtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELDhCQUE4QjtBQUN0RjtBQUNBLE9BQU8sNEVBQWlCLFdBQVcsK0VBQW9CO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxvRkFBeUI7QUFDL0I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCx3REFBaUI7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGdEQUFJO0FBQzNCLGlEQUFpRCxxRUFBc0I7QUFDdkU7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxrRUFBZSwySEFBMkgsdUJBQXVCO0FBQ25NO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELE1BQU07QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxzRUFBMEI7QUFDakU7QUFDQTtBQUNBO0FBQ0EsU0FBUyxpRUFBZ0IsMEVBQTBFO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSwwRUFBMEI7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msa0VBQWUsMkhBQTJILHVCQUF1QjtBQUNuTTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCwrRUFBK0I7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQsTUFBTTtBQUM3RDtBQUNBO0FBQ0Esc0JBQXNCLHdEQUFNO0FBQzVCLFFBQVEsaUVBQWdCLDBFQUEwRTtBQUNsRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCwyR0FBMkcsc0VBQTBCO0FBQ3JJO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RCxNQUFNO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsZ0RBQU87QUFDdkMsMEJBQTBCLHVEQUF1RDtBQUNqRjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EseUJBQXlCLDhEQUE4RDtBQUN2RixxRUFBcUUsMEVBQTBCO0FBQy9GO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGtFQUFlLDJIQUEySCx1QkFBdUI7QUFDbE07QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUcsYUFBYSxRQUFRO0FBQ3hCO0FBQ0E7QUFDQSwrQ0FBK0MsbUNBQW1DO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxnRUFBYSxzQkFBc0IsNERBQVc7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxzRUFBMEI7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0Esc0NBQXNDLHVCQUF1Qiw0QkFBNEIsY0FBYztBQUN2RyxLQUFLO0FBQ0wscUZBQXFGLGNBQWM7QUFDbkc7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGdEQUFPO0FBQ3ZDLDBCQUEwQix1REFBdUQ7QUFDakY7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRDtBQUNoRDtBQUNBLHFFQUFxRSwwRUFBMEI7QUFDL0Y7QUFDQTtBQUNBO0FBQ0EsVUFBVSxRQUFRO0FBQ2xCO0FBQ0EsVUFBVSx3REFBd0Q7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsMEVBQW9CO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHdFQUFrQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixvRUFBWTtBQUM1QjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLHVCQUF1QiwrREFBYztBQUNyQyxRQUFRLDJEQUFjO0FBQ3RCO0FBQ0E7QUFDQSxrRUFBa0UsYUFBYTtBQUMvRTtBQUNBLEdBQUc7QUFDSCw4REFBOEQsNkJBQTZCO0FBQzNGLHVCQUF1QiwyRUFBbUIsVUFBVSx1RUFBdUU7QUFDM0gscUJBQXFCLDJFQUFtQixVQUFVLG9CQUFvQjtBQUN0RSwwREFBMEQseUJBQXlCO0FBQ25GLFNBQVMsaUVBQWdCLFNBQVMsVUFBVSxvQ0FBb0MscUNBQXFDO0FBQ3JIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixzREFBUztBQUMvQjtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDK0Q7QUFDL0QiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9sYW5ndWFnZV9tb2RlbHMvY2hhdF9tb2RlbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19leHBvcnQgfSBmcm9tIFwiLi4vX3ZpcnR1YWwvcm9sbGRvd25fcnVudGltZS5qc1wiO1xuaW1wb3J0IHsgY29udmVydFRvT3BlbkFJSW1hZ2VCbG9jaywgaXNCYXNlNjRDb250ZW50QmxvY2ssIGlzVVJMQ29udGVudEJsb2NrIH0gZnJvbSBcIi4uL21lc3NhZ2VzL2NvbnRlbnQvZGF0YS5qc1wiO1xuaW1wb3J0IHsgaXNCYXNlTWVzc2FnZSB9IGZyb20gXCIuLi9tZXNzYWdlcy9iYXNlLmpzXCI7XG5pbXBvcnQgeyBjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSB9IGZyb20gXCIuLi9tZXNzYWdlcy91dGlscy5qc1wiO1xuaW1wb3J0IHsgQUlNZXNzYWdlLCBBSU1lc3NhZ2VDaHVuaywgaXNBSU1lc3NhZ2UsIGlzQUlNZXNzYWdlQ2h1bmsgfSBmcm9tIFwiLi4vbWVzc2FnZXMvYWkuanNcIjtcbmltcG9ydCB7IGdldEVudmlyb25tZW50VmFyaWFibGUgfSBmcm9tIFwiLi4vdXRpbHMvZW52LmpzXCI7XG5pbXBvcnQgeyBjYWxsYmFja0hhbmRsZXJQcmVmZXJzU3RyZWFtaW5nIH0gZnJvbSBcIi4uL2NhbGxiYWNrcy9iYXNlLmpzXCI7XG5pbXBvcnQgeyBDYWxsYmFja01hbmFnZXIgfSBmcm9tIFwiLi4vY2FsbGJhY2tzL21hbmFnZXIuanNcIjtcbmltcG9ydCB7IGNvbmNhdCB9IGZyb20gXCIuLi91dGlscy9zdHJlYW0uanNcIjtcbmltcG9ydCB7IFJVTl9LRVkgfSBmcm9tIFwiLi4vb3V0cHV0cy5qc1wiO1xuaW1wb3J0IHsgZ2V0U2NoZW1hRGVzY3JpcHRpb24sIGlzSW50ZXJvcFpvZFNjaGVtYSB9IGZyb20gXCIuLi91dGlscy90eXBlcy96b2QuanNcIjtcbmltcG9ydCB7IHRvSnNvblNjaGVtYSB9IGZyb20gXCIuLi91dGlscy9qc29uX3NjaGVtYS5qc1wiO1xuaW1wb3J0IHsgUnVubmFibGVMYW1iZGEsIFJ1bm5hYmxlU2VxdWVuY2UgfSBmcm9tIFwiLi4vcnVubmFibGVzL2Jhc2UuanNcIjtcbmltcG9ydCBcIi4uL21lc3NhZ2VzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBCYXNlTGFuZ3VhZ2VNb2RlbCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IFJ1bm5hYmxlUGFzc3Rocm91Z2ggfSBmcm9tIFwiLi4vcnVubmFibGVzL3Bhc3N0aHJvdWdoLmpzXCI7XG5pbXBvcnQgeyBjYXN0U3RhbmRhcmRNZXNzYWdlQ29udGVudCwgaWlmZSB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvbGFuZ3VhZ2VfbW9kZWxzL2NoYXRfbW9kZWxzLnRzXG52YXIgY2hhdF9tb2RlbHNfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQoY2hhdF9tb2RlbHNfZXhwb3J0cywge1xuXHRCYXNlQ2hhdE1vZGVsOiAoKSA9PiBCYXNlQ2hhdE1vZGVsLFxuXHRTaW1wbGVDaGF0TW9kZWw6ICgpID0+IFNpbXBsZUNoYXRNb2RlbFxufSk7XG5mdW5jdGlvbiBfZm9ybWF0Rm9yVHJhY2luZyhtZXNzYWdlcykge1xuXHRjb25zdCBtZXNzYWdlc1RvVHJhY2UgPSBbXTtcblx0Zm9yIChjb25zdCBtZXNzYWdlIG9mIG1lc3NhZ2VzKSB7XG5cdFx0bGV0IG1lc3NhZ2VUb1RyYWNlID0gbWVzc2FnZTtcblx0XHRpZiAoQXJyYXkuaXNBcnJheShtZXNzYWdlLmNvbnRlbnQpKSBmb3IgKGxldCBpZHggPSAwOyBpZHggPCBtZXNzYWdlLmNvbnRlbnQubGVuZ3RoOyBpZHgrKykge1xuXHRcdFx0Y29uc3QgYmxvY2sgPSBtZXNzYWdlLmNvbnRlbnRbaWR4XTtcblx0XHRcdGlmIChpc1VSTENvbnRlbnRCbG9jayhibG9jaykgfHwgaXNCYXNlNjRDb250ZW50QmxvY2soYmxvY2spKSB7XG5cdFx0XHRcdGlmIChtZXNzYWdlVG9UcmFjZSA9PT0gbWVzc2FnZSkgbWVzc2FnZVRvVHJhY2UgPSBuZXcgbWVzc2FnZS5jb25zdHJ1Y3Rvcih7XG5cdFx0XHRcdFx0Li4ubWVzc2FnZVRvVHJhY2UsXG5cdFx0XHRcdFx0Y29udGVudDogW1xuXHRcdFx0XHRcdFx0Li4ubWVzc2FnZS5jb250ZW50LnNsaWNlKDAsIGlkeCksXG5cdFx0XHRcdFx0XHRjb252ZXJ0VG9PcGVuQUlJbWFnZUJsb2NrKGJsb2NrKSxcblx0XHRcdFx0XHRcdC4uLm1lc3NhZ2UuY29udGVudC5zbGljZShpZHggKyAxKVxuXHRcdFx0XHRcdF1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdG1lc3NhZ2VzVG9UcmFjZS5wdXNoKG1lc3NhZ2VUb1RyYWNlKTtcblx0fVxuXHRyZXR1cm4gbWVzc2FnZXNUb1RyYWNlO1xufVxuLyoqXG4qIEJhc2UgY2xhc3MgZm9yIGNoYXQgbW9kZWxzLiBJdCBleHRlbmRzIHRoZSBCYXNlTGFuZ3VhZ2VNb2RlbCBjbGFzcyBhbmRcbiogcHJvdmlkZXMgbWV0aG9kcyBmb3IgZ2VuZXJhdGluZyBjaGF0IGJhc2VkIG9uIGlucHV0IG1lc3NhZ2VzLlxuKi9cbnZhciBCYXNlQ2hhdE1vZGVsID0gY2xhc3MgQmFzZUNoYXRNb2RlbCBleHRlbmRzIEJhc2VMYW5ndWFnZU1vZGVsIHtcblx0bGNfbmFtZXNwYWNlID0gW1xuXHRcdFwibGFuZ2NoYWluXCIsXG5cdFx0XCJjaGF0X21vZGVsc1wiLFxuXHRcdHRoaXMuX2xsbVR5cGUoKVxuXHRdO1xuXHRkaXNhYmxlU3RyZWFtaW5nID0gZmFsc2U7XG5cdG91dHB1dFZlcnNpb247XG5cdGdldCBjYWxsS2V5cygpIHtcblx0XHRyZXR1cm4gWy4uLnN1cGVyLmNhbGxLZXlzLCBcIm91dHB1dFZlcnNpb25cIl07XG5cdH1cblx0Y29uc3RydWN0b3IoZmllbGRzKSB7XG5cdFx0c3VwZXIoZmllbGRzKTtcblx0XHR0aGlzLm91dHB1dFZlcnNpb24gPSBpaWZlKCgpID0+IHtcblx0XHRcdGNvbnN0IG91dHB1dFZlcnNpb24gPSBmaWVsZHMub3V0cHV0VmVyc2lvbiA/PyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTENfT1VUUFVUX1ZFUlNJT05cIik7XG5cdFx0XHRpZiAob3V0cHV0VmVyc2lvbiAmJiBbXCJ2MFwiLCBcInYxXCJdLmluY2x1ZGVzKG91dHB1dFZlcnNpb24pKSByZXR1cm4gb3V0cHV0VmVyc2lvbjtcblx0XHRcdHJldHVybiBcInYwXCI7XG5cdFx0fSk7XG5cdH1cblx0X3NlcGFyYXRlUnVubmFibGVDb25maWdGcm9tQ2FsbE9wdGlvbnNDb21wYXQob3B0aW9ucykge1xuXHRcdGNvbnN0IFtydW5uYWJsZUNvbmZpZywgY2FsbE9wdGlvbnNdID0gc3VwZXIuX3NlcGFyYXRlUnVubmFibGVDb25maWdGcm9tQ2FsbE9wdGlvbnMob3B0aW9ucyk7XG5cdFx0Y2FsbE9wdGlvbnMuc2lnbmFsID0gcnVubmFibGVDb25maWcuc2lnbmFsO1xuXHRcdHJldHVybiBbcnVubmFibGVDb25maWcsIGNhbGxPcHRpb25zXTtcblx0fVxuXHQvKipcblx0KiBJbnZva2VzIHRoZSBjaGF0IG1vZGVsIHdpdGggYSBzaW5nbGUgaW5wdXQuXG5cdCogQHBhcmFtIGlucHV0IFRoZSBpbnB1dCBmb3IgdGhlIGxhbmd1YWdlIG1vZGVsLlxuXHQqIEBwYXJhbSBvcHRpb25zIFRoZSBjYWxsIG9wdGlvbnMuXG5cdCogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBCYXNlTWVzc2FnZUNodW5rLlxuXHQqL1xuXHRhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcblx0XHRjb25zdCBwcm9tcHRWYWx1ZSA9IEJhc2VDaGF0TW9kZWwuX2NvbnZlcnRJbnB1dFRvUHJvbXB0VmFsdWUoaW5wdXQpO1xuXHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVQcm9tcHQoW3Byb21wdFZhbHVlXSwgb3B0aW9ucywgb3B0aW9ucz8uY2FsbGJhY2tzKTtcblx0XHRjb25zdCBjaGF0R2VuZXJhdGlvbiA9IHJlc3VsdC5nZW5lcmF0aW9uc1swXVswXTtcblx0XHRyZXR1cm4gY2hhdEdlbmVyYXRpb24ubWVzc2FnZTtcblx0fVxuXHRhc3luYyAqX3N0cmVhbVJlc3BvbnNlQ2h1bmtzKF9tZXNzYWdlcywgX29wdGlvbnMsIF9ydW5NYW5hZ2VyKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkLlwiKTtcblx0fVxuXHRhc3luYyAqX3N0cmVhbUl0ZXJhdG9yKGlucHV0LCBvcHRpb25zKSB7XG5cdFx0aWYgKHRoaXMuX3N0cmVhbVJlc3BvbnNlQ2h1bmtzID09PSBCYXNlQ2hhdE1vZGVsLnByb3RvdHlwZS5fc3RyZWFtUmVzcG9uc2VDaHVua3MgfHwgdGhpcy5kaXNhYmxlU3RyZWFtaW5nKSB5aWVsZCB0aGlzLmludm9rZShpbnB1dCwgb3B0aW9ucyk7XG5cdFx0ZWxzZSB7XG5cdFx0XHRjb25zdCBwcm9tcHQgPSBCYXNlQ2hhdE1vZGVsLl9jb252ZXJ0SW5wdXRUb1Byb21wdFZhbHVlKGlucHV0KTtcblx0XHRcdGNvbnN0IG1lc3NhZ2VzID0gcHJvbXB0LnRvQ2hhdE1lc3NhZ2VzKCk7XG5cdFx0XHRjb25zdCBbcnVubmFibGVDb25maWcsIGNhbGxPcHRpb25zXSA9IHRoaXMuX3NlcGFyYXRlUnVubmFibGVDb25maWdGcm9tQ2FsbE9wdGlvbnNDb21wYXQob3B0aW9ucyk7XG5cdFx0XHRjb25zdCBpbmhlcml0YWJsZU1ldGFkYXRhID0ge1xuXHRcdFx0XHQuLi5ydW5uYWJsZUNvbmZpZy5tZXRhZGF0YSxcblx0XHRcdFx0Li4udGhpcy5nZXRMc1BhcmFtcyhjYWxsT3B0aW9ucylcblx0XHRcdH07XG5cdFx0XHRjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgQ2FsbGJhY2tNYW5hZ2VyLmNvbmZpZ3VyZShydW5uYWJsZUNvbmZpZy5jYWxsYmFja3MsIHRoaXMuY2FsbGJhY2tzLCBydW5uYWJsZUNvbmZpZy50YWdzLCB0aGlzLnRhZ3MsIGluaGVyaXRhYmxlTWV0YWRhdGEsIHRoaXMubWV0YWRhdGEsIHsgdmVyYm9zZTogdGhpcy52ZXJib3NlIH0pO1xuXHRcdFx0Y29uc3QgZXh0cmEgPSB7XG5cdFx0XHRcdG9wdGlvbnM6IGNhbGxPcHRpb25zLFxuXHRcdFx0XHRpbnZvY2F0aW9uX3BhcmFtczogdGhpcz8uaW52b2NhdGlvblBhcmFtcyhjYWxsT3B0aW9ucyksXG5cdFx0XHRcdGJhdGNoX3NpemU6IDFcblx0XHRcdH07XG5cdFx0XHRjb25zdCBvdXRwdXRWZXJzaW9uID0gY2FsbE9wdGlvbnMub3V0cHV0VmVyc2lvbiA/PyB0aGlzLm91dHB1dFZlcnNpb247XG5cdFx0XHRjb25zdCBydW5NYW5hZ2VycyA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYXRNb2RlbFN0YXJ0KHRoaXMudG9KU09OKCksIFtfZm9ybWF0Rm9yVHJhY2luZyhtZXNzYWdlcyldLCBydW5uYWJsZUNvbmZpZy5ydW5JZCwgdm9pZCAwLCBleHRyYSwgdm9pZCAwLCB2b2lkIDAsIHJ1bm5hYmxlQ29uZmlnLnJ1bk5hbWUpO1xuXHRcdFx0bGV0IGdlbmVyYXRpb25DaHVuaztcblx0XHRcdGxldCBsbG1PdXRwdXQ7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHRoaXMuX3N0cmVhbVJlc3BvbnNlQ2h1bmtzKG1lc3NhZ2VzLCBjYWxsT3B0aW9ucywgcnVuTWFuYWdlcnM/LlswXSkpIHtcblx0XHRcdFx0XHRpZiAoY2h1bmsubWVzc2FnZS5pZCA9PSBudWxsKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBydW5JZCA9IHJ1bk1hbmFnZXJzPy5hdCgwKT8ucnVuSWQ7XG5cdFx0XHRcdFx0XHRpZiAocnVuSWQgIT0gbnVsbCkgY2h1bmsubWVzc2FnZS5fdXBkYXRlSWQoYHJ1bi0ke3J1bklkfWApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjaHVuay5tZXNzYWdlLnJlc3BvbnNlX21ldGFkYXRhID0ge1xuXHRcdFx0XHRcdFx0Li4uY2h1bmsuZ2VuZXJhdGlvbkluZm8sXG5cdFx0XHRcdFx0XHQuLi5jaHVuay5tZXNzYWdlLnJlc3BvbnNlX21ldGFkYXRhXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRpZiAob3V0cHV0VmVyc2lvbiA9PT0gXCJ2MVwiKSB5aWVsZCBjYXN0U3RhbmRhcmRNZXNzYWdlQ29udGVudChjaHVuay5tZXNzYWdlKTtcblx0XHRcdFx0XHRlbHNlIHlpZWxkIGNodW5rLm1lc3NhZ2U7XG5cdFx0XHRcdFx0aWYgKCFnZW5lcmF0aW9uQ2h1bmspIGdlbmVyYXRpb25DaHVuayA9IGNodW5rO1xuXHRcdFx0XHRcdGVsc2UgZ2VuZXJhdGlvbkNodW5rID0gZ2VuZXJhdGlvbkNodW5rLmNvbmNhdChjaHVuayk7XG5cdFx0XHRcdFx0aWYgKGlzQUlNZXNzYWdlQ2h1bmsoY2h1bmsubWVzc2FnZSkgJiYgY2h1bmsubWVzc2FnZS51c2FnZV9tZXRhZGF0YSAhPT0gdm9pZCAwKSBsbG1PdXRwdXQgPSB7IHRva2VuVXNhZ2U6IHtcblx0XHRcdFx0XHRcdHByb21wdFRva2VuczogY2h1bmsubWVzc2FnZS51c2FnZV9tZXRhZGF0YS5pbnB1dF90b2tlbnMsXG5cdFx0XHRcdFx0XHRjb21wbGV0aW9uVG9rZW5zOiBjaHVuay5tZXNzYWdlLnVzYWdlX21ldGFkYXRhLm91dHB1dF90b2tlbnMsXG5cdFx0XHRcdFx0XHR0b3RhbFRva2VuczogY2h1bmsubWVzc2FnZS51c2FnZV9tZXRhZGF0YS50b3RhbF90b2tlbnNcblx0XHRcdFx0XHR9IH07XG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRhd2FpdCBQcm9taXNlLmFsbCgocnVuTWFuYWdlcnMgPz8gW10pLm1hcCgocnVuTWFuYWdlcikgPT4gcnVuTWFuYWdlcj8uaGFuZGxlTExNRXJyb3IoZXJyKSkpO1xuXHRcdFx0XHR0aHJvdyBlcnI7XG5cdFx0XHR9XG5cdFx0XHRhd2FpdCBQcm9taXNlLmFsbCgocnVuTWFuYWdlcnMgPz8gW10pLm1hcCgocnVuTWFuYWdlcikgPT4gcnVuTWFuYWdlcj8uaGFuZGxlTExNRW5kKHtcblx0XHRcdFx0Z2VuZXJhdGlvbnM6IFtbZ2VuZXJhdGlvbkNodW5rXV0sXG5cdFx0XHRcdGxsbU91dHB1dFxuXHRcdFx0fSkpKTtcblx0XHR9XG5cdH1cblx0Z2V0THNQYXJhbXMob3B0aW9ucykge1xuXHRcdGNvbnN0IHByb3ZpZGVyTmFtZSA9IHRoaXMuZ2V0TmFtZSgpLnN0YXJ0c1dpdGgoXCJDaGF0XCIpID8gdGhpcy5nZXROYW1lKCkucmVwbGFjZShcIkNoYXRcIiwgXCJcIikgOiB0aGlzLmdldE5hbWUoKTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0bHNfbW9kZWxfdHlwZTogXCJjaGF0XCIsXG5cdFx0XHRsc19zdG9wOiBvcHRpb25zLnN0b3AsXG5cdFx0XHRsc19wcm92aWRlcjogcHJvdmlkZXJOYW1lXG5cdFx0fTtcblx0fVxuXHQvKiogQGlnbm9yZSAqL1xuXHRhc3luYyBfZ2VuZXJhdGVVbmNhY2hlZChtZXNzYWdlcywgcGFyc2VkT3B0aW9ucywgaGFuZGxlZE9wdGlvbnMsIHN0YXJ0ZWRSdW5NYW5hZ2Vycykge1xuXHRcdGNvbnN0IGJhc2VNZXNzYWdlcyA9IG1lc3NhZ2VzLm1hcCgobWVzc2FnZUxpc3QpID0+IG1lc3NhZ2VMaXN0Lm1hcChjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSkpO1xuXHRcdGxldCBydW5NYW5hZ2Vycztcblx0XHRpZiAoc3RhcnRlZFJ1bk1hbmFnZXJzICE9PSB2b2lkIDAgJiYgc3RhcnRlZFJ1bk1hbmFnZXJzLmxlbmd0aCA9PT0gYmFzZU1lc3NhZ2VzLmxlbmd0aCkgcnVuTWFuYWdlcnMgPSBzdGFydGVkUnVuTWFuYWdlcnM7XG5cdFx0ZWxzZSB7XG5cdFx0XHRjb25zdCBpbmhlcml0YWJsZU1ldGFkYXRhID0ge1xuXHRcdFx0XHQuLi5oYW5kbGVkT3B0aW9ucy5tZXRhZGF0YSxcblx0XHRcdFx0Li4udGhpcy5nZXRMc1BhcmFtcyhwYXJzZWRPcHRpb25zKVxuXHRcdFx0fTtcblx0XHRcdGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBDYWxsYmFja01hbmFnZXIuY29uZmlndXJlKGhhbmRsZWRPcHRpb25zLmNhbGxiYWNrcywgdGhpcy5jYWxsYmFja3MsIGhhbmRsZWRPcHRpb25zLnRhZ3MsIHRoaXMudGFncywgaW5oZXJpdGFibGVNZXRhZGF0YSwgdGhpcy5tZXRhZGF0YSwgeyB2ZXJib3NlOiB0aGlzLnZlcmJvc2UgfSk7XG5cdFx0XHRjb25zdCBleHRyYSA9IHtcblx0XHRcdFx0b3B0aW9uczogcGFyc2VkT3B0aW9ucyxcblx0XHRcdFx0aW52b2NhdGlvbl9wYXJhbXM6IHRoaXM/Lmludm9jYXRpb25QYXJhbXMocGFyc2VkT3B0aW9ucyksXG5cdFx0XHRcdGJhdGNoX3NpemU6IDFcblx0XHRcdH07XG5cdFx0XHRydW5NYW5hZ2VycyA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYXRNb2RlbFN0YXJ0KHRoaXMudG9KU09OKCksIGJhc2VNZXNzYWdlcy5tYXAoX2Zvcm1hdEZvclRyYWNpbmcpLCBoYW5kbGVkT3B0aW9ucy5ydW5JZCwgdm9pZCAwLCBleHRyYSwgdm9pZCAwLCB2b2lkIDAsIGhhbmRsZWRPcHRpb25zLnJ1bk5hbWUpO1xuXHRcdH1cblx0XHRjb25zdCBvdXRwdXRWZXJzaW9uID0gcGFyc2VkT3B0aW9ucy5vdXRwdXRWZXJzaW9uID8/IHRoaXMub3V0cHV0VmVyc2lvbjtcblx0XHRjb25zdCBnZW5lcmF0aW9ucyA9IFtdO1xuXHRcdGNvbnN0IGxsbU91dHB1dHMgPSBbXTtcblx0XHRjb25zdCBoYXNTdHJlYW1pbmdIYW5kbGVyID0gISFydW5NYW5hZ2Vycz8uWzBdLmhhbmRsZXJzLmZpbmQoY2FsbGJhY2tIYW5kbGVyUHJlZmVyc1N0cmVhbWluZyk7XG5cdFx0aWYgKGhhc1N0cmVhbWluZ0hhbmRsZXIgJiYgIXRoaXMuZGlzYWJsZVN0cmVhbWluZyAmJiBiYXNlTWVzc2FnZXMubGVuZ3RoID09PSAxICYmIHRoaXMuX3N0cmVhbVJlc3BvbnNlQ2h1bmtzICE9PSBCYXNlQ2hhdE1vZGVsLnByb3RvdHlwZS5fc3RyZWFtUmVzcG9uc2VDaHVua3MpIHRyeSB7XG5cdFx0XHRjb25zdCBzdHJlYW0gPSBhd2FpdCB0aGlzLl9zdHJlYW1SZXNwb25zZUNodW5rcyhiYXNlTWVzc2FnZXNbMF0sIHBhcnNlZE9wdGlvbnMsIHJ1bk1hbmFnZXJzPy5bMF0pO1xuXHRcdFx0bGV0IGFnZ3JlZ2F0ZWQ7XG5cdFx0XHRsZXQgbGxtT3V0cHV0O1xuXHRcdFx0Zm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBzdHJlYW0pIHtcblx0XHRcdFx0aWYgKGNodW5rLm1lc3NhZ2UuaWQgPT0gbnVsbCkge1xuXHRcdFx0XHRcdGNvbnN0IHJ1bklkID0gcnVuTWFuYWdlcnM/LmF0KDApPy5ydW5JZDtcblx0XHRcdFx0XHRpZiAocnVuSWQgIT0gbnVsbCkgY2h1bmsubWVzc2FnZS5fdXBkYXRlSWQoYHJ1bi0ke3J1bklkfWApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChhZ2dyZWdhdGVkID09PSB2b2lkIDApIGFnZ3JlZ2F0ZWQgPSBjaHVuaztcblx0XHRcdFx0ZWxzZSBhZ2dyZWdhdGVkID0gY29uY2F0KGFnZ3JlZ2F0ZWQsIGNodW5rKTtcblx0XHRcdFx0aWYgKGlzQUlNZXNzYWdlQ2h1bmsoY2h1bmsubWVzc2FnZSkgJiYgY2h1bmsubWVzc2FnZS51c2FnZV9tZXRhZGF0YSAhPT0gdm9pZCAwKSBsbG1PdXRwdXQgPSB7IHRva2VuVXNhZ2U6IHtcblx0XHRcdFx0XHRwcm9tcHRUb2tlbnM6IGNodW5rLm1lc3NhZ2UudXNhZ2VfbWV0YWRhdGEuaW5wdXRfdG9rZW5zLFxuXHRcdFx0XHRcdGNvbXBsZXRpb25Ub2tlbnM6IGNodW5rLm1lc3NhZ2UudXNhZ2VfbWV0YWRhdGEub3V0cHV0X3Rva2Vucyxcblx0XHRcdFx0XHR0b3RhbFRva2VuczogY2h1bmsubWVzc2FnZS51c2FnZV9tZXRhZGF0YS50b3RhbF90b2tlbnNcblx0XHRcdFx0fSB9O1xuXHRcdFx0fVxuXHRcdFx0aWYgKGFnZ3JlZ2F0ZWQgPT09IHZvaWQgMCkgdGhyb3cgbmV3IEVycm9yKFwiUmVjZWl2ZWQgZW1wdHkgcmVzcG9uc2UgZnJvbSBjaGF0IG1vZGVsIGNhbGwuXCIpO1xuXHRcdFx0Z2VuZXJhdGlvbnMucHVzaChbYWdncmVnYXRlZF0pO1xuXHRcdFx0YXdhaXQgcnVuTWFuYWdlcnM/LlswXS5oYW5kbGVMTE1FbmQoe1xuXHRcdFx0XHRnZW5lcmF0aW9ucyxcblx0XHRcdFx0bGxtT3V0cHV0XG5cdFx0XHR9KTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRhd2FpdCBydW5NYW5hZ2Vycz8uWzBdLmhhbmRsZUxMTUVycm9yKGUpO1xuXHRcdFx0dGhyb3cgZTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKGJhc2VNZXNzYWdlcy5tYXAoYXN5bmMgKG1lc3NhZ2VMaXN0LCBpKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGdlbmVyYXRlUmVzdWx0cyA9IGF3YWl0IHRoaXMuX2dlbmVyYXRlKG1lc3NhZ2VMaXN0LCB7XG5cdFx0XHRcdFx0Li4ucGFyc2VkT3B0aW9ucyxcblx0XHRcdFx0XHRwcm9tcHRJbmRleDogaVxuXHRcdFx0XHR9LCBydW5NYW5hZ2Vycz8uW2ldKTtcblx0XHRcdFx0aWYgKG91dHB1dFZlcnNpb24gPT09IFwidjFcIikgZm9yIChjb25zdCBnZW5lcmF0aW9uIG9mIGdlbmVyYXRlUmVzdWx0cy5nZW5lcmF0aW9ucykgZ2VuZXJhdGlvbi5tZXNzYWdlID0gY2FzdFN0YW5kYXJkTWVzc2FnZUNvbnRlbnQoZ2VuZXJhdGlvbi5tZXNzYWdlKTtcblx0XHRcdFx0cmV0dXJuIGdlbmVyYXRlUmVzdWx0cztcblx0XHRcdH0pKTtcblx0XHRcdGF3YWl0IFByb21pc2UuYWxsKHJlc3VsdHMubWFwKGFzeW5jIChwUmVzdWx0LCBpKSA9PiB7XG5cdFx0XHRcdGlmIChwUmVzdWx0LnN0YXR1cyA9PT0gXCJmdWxmaWxsZWRcIikge1xuXHRcdFx0XHRcdGNvbnN0IHJlc3VsdCA9IHBSZXN1bHQudmFsdWU7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBnZW5lcmF0aW9uIG9mIHJlc3VsdC5nZW5lcmF0aW9ucykge1xuXHRcdFx0XHRcdFx0aWYgKGdlbmVyYXRpb24ubWVzc2FnZS5pZCA9PSBudWxsKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHJ1bklkID0gcnVuTWFuYWdlcnM/LmF0KDApPy5ydW5JZDtcblx0XHRcdFx0XHRcdFx0aWYgKHJ1bklkICE9IG51bGwpIGdlbmVyYXRpb24ubWVzc2FnZS5fdXBkYXRlSWQoYHJ1bi0ke3J1bklkfWApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Z2VuZXJhdGlvbi5tZXNzYWdlLnJlc3BvbnNlX21ldGFkYXRhID0ge1xuXHRcdFx0XHRcdFx0XHQuLi5nZW5lcmF0aW9uLmdlbmVyYXRpb25JbmZvLFxuXHRcdFx0XHRcdFx0XHQuLi5nZW5lcmF0aW9uLm1lc3NhZ2UucmVzcG9uc2VfbWV0YWRhdGFcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChyZXN1bHQuZ2VuZXJhdGlvbnMubGVuZ3RoID09PSAxKSByZXN1bHQuZ2VuZXJhdGlvbnNbMF0ubWVzc2FnZS5yZXNwb25zZV9tZXRhZGF0YSA9IHtcblx0XHRcdFx0XHRcdC4uLnJlc3VsdC5sbG1PdXRwdXQsXG5cdFx0XHRcdFx0XHQuLi5yZXN1bHQuZ2VuZXJhdGlvbnNbMF0ubWVzc2FnZS5yZXNwb25zZV9tZXRhZGF0YVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0Z2VuZXJhdGlvbnNbaV0gPSByZXN1bHQuZ2VuZXJhdGlvbnM7XG5cdFx0XHRcdFx0bGxtT3V0cHV0c1tpXSA9IHJlc3VsdC5sbG1PdXRwdXQ7XG5cdFx0XHRcdFx0cmV0dXJuIHJ1bk1hbmFnZXJzPy5baV0/LmhhbmRsZUxMTUVuZCh7XG5cdFx0XHRcdFx0XHRnZW5lcmF0aW9uczogW3Jlc3VsdC5nZW5lcmF0aW9uc10sXG5cdFx0XHRcdFx0XHRsbG1PdXRwdXQ6IHJlc3VsdC5sbG1PdXRwdXRcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRhd2FpdCBydW5NYW5hZ2Vycz8uW2ldPy5oYW5kbGVMTE1FcnJvcihwUmVzdWx0LnJlYXNvbik7XG5cdFx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVqZWN0KHBSZXN1bHQucmVhc29uKTtcblx0XHRcdFx0fVxuXHRcdFx0fSkpO1xuXHRcdH1cblx0XHRjb25zdCBvdXRwdXQgPSB7XG5cdFx0XHRnZW5lcmF0aW9ucyxcblx0XHRcdGxsbU91dHB1dDogbGxtT3V0cHV0cy5sZW5ndGggPyB0aGlzLl9jb21iaW5lTExNT3V0cHV0Py4oLi4ubGxtT3V0cHV0cykgOiB2b2lkIDBcblx0XHR9O1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvdXRwdXQsIFJVTl9LRVksIHtcblx0XHRcdHZhbHVlOiBydW5NYW5hZ2VycyA/IHsgcnVuSWRzOiBydW5NYW5hZ2Vycz8ubWFwKChtYW5hZ2VyKSA9PiBtYW5hZ2VyLnJ1bklkKSB9IDogdm9pZCAwLFxuXHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlXG5cdFx0fSk7XG5cdFx0cmV0dXJuIG91dHB1dDtcblx0fVxuXHRhc3luYyBfZ2VuZXJhdGVDYWNoZWQoeyBtZXNzYWdlcywgY2FjaGUsIGxsbVN0cmluZ0tleSwgcGFyc2VkT3B0aW9ucywgaGFuZGxlZE9wdGlvbnMgfSkge1xuXHRcdGNvbnN0IGJhc2VNZXNzYWdlcyA9IG1lc3NhZ2VzLm1hcCgobWVzc2FnZUxpc3QpID0+IG1lc3NhZ2VMaXN0Lm1hcChjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSkpO1xuXHRcdGNvbnN0IGluaGVyaXRhYmxlTWV0YWRhdGEgPSB7XG5cdFx0XHQuLi5oYW5kbGVkT3B0aW9ucy5tZXRhZGF0YSxcblx0XHRcdC4uLnRoaXMuZ2V0THNQYXJhbXMocGFyc2VkT3B0aW9ucylcblx0XHR9O1xuXHRcdGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBDYWxsYmFja01hbmFnZXIuY29uZmlndXJlKGhhbmRsZWRPcHRpb25zLmNhbGxiYWNrcywgdGhpcy5jYWxsYmFja3MsIGhhbmRsZWRPcHRpb25zLnRhZ3MsIHRoaXMudGFncywgaW5oZXJpdGFibGVNZXRhZGF0YSwgdGhpcy5tZXRhZGF0YSwgeyB2ZXJib3NlOiB0aGlzLnZlcmJvc2UgfSk7XG5cdFx0Y29uc3QgZXh0cmEgPSB7XG5cdFx0XHRvcHRpb25zOiBwYXJzZWRPcHRpb25zLFxuXHRcdFx0aW52b2NhdGlvbl9wYXJhbXM6IHRoaXM/Lmludm9jYXRpb25QYXJhbXMocGFyc2VkT3B0aW9ucyksXG5cdFx0XHRiYXRjaF9zaXplOiAxXG5cdFx0fTtcblx0XHRjb25zdCBydW5NYW5hZ2VycyA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYXRNb2RlbFN0YXJ0KHRoaXMudG9KU09OKCksIGJhc2VNZXNzYWdlcy5tYXAoX2Zvcm1hdEZvclRyYWNpbmcpLCBoYW5kbGVkT3B0aW9ucy5ydW5JZCwgdm9pZCAwLCBleHRyYSwgdm9pZCAwLCB2b2lkIDAsIGhhbmRsZWRPcHRpb25zLnJ1bk5hbWUpO1xuXHRcdGNvbnN0IG1pc3NpbmdQcm9tcHRJbmRpY2VzID0gW107XG5cdFx0Y29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChiYXNlTWVzc2FnZXMubWFwKGFzeW5jIChiYXNlTWVzc2FnZSwgaW5kZXgpID0+IHtcblx0XHRcdGNvbnN0IHByb21wdCA9IEJhc2VDaGF0TW9kZWwuX2NvbnZlcnRJbnB1dFRvUHJvbXB0VmFsdWUoYmFzZU1lc3NhZ2UpLnRvU3RyaW5nKCk7XG5cdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBjYWNoZS5sb29rdXAocHJvbXB0LCBsbG1TdHJpbmdLZXkpO1xuXHRcdFx0aWYgKHJlc3VsdCA9PSBudWxsKSBtaXNzaW5nUHJvbXB0SW5kaWNlcy5wdXNoKGluZGV4KTtcblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fSkpO1xuXHRcdGNvbnN0IGNhY2hlZFJlc3VsdHMgPSByZXN1bHRzLm1hcCgocmVzdWx0LCBpbmRleCkgPT4gKHtcblx0XHRcdHJlc3VsdCxcblx0XHRcdHJ1bk1hbmFnZXI6IHJ1bk1hbmFnZXJzPy5baW5kZXhdXG5cdFx0fSkpLmZpbHRlcigoeyByZXN1bHQgfSkgPT4gcmVzdWx0LnN0YXR1cyA9PT0gXCJmdWxmaWxsZWRcIiAmJiByZXN1bHQudmFsdWUgIT0gbnVsbCB8fCByZXN1bHQuc3RhdHVzID09PSBcInJlamVjdGVkXCIpO1xuXHRcdGNvbnN0IG91dHB1dFZlcnNpb24gPSBwYXJzZWRPcHRpb25zLm91dHB1dFZlcnNpb24gPz8gdGhpcy5vdXRwdXRWZXJzaW9uO1xuXHRcdGNvbnN0IGdlbmVyYXRpb25zID0gW107XG5cdFx0YXdhaXQgUHJvbWlzZS5hbGwoY2FjaGVkUmVzdWx0cy5tYXAoYXN5bmMgKHsgcmVzdWx0OiBwcm9taXNlUmVzdWx0LCBydW5NYW5hZ2VyIH0sIGkpID0+IHtcblx0XHRcdGlmIChwcm9taXNlUmVzdWx0LnN0YXR1cyA9PT0gXCJmdWxmaWxsZWRcIikge1xuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBwcm9taXNlUmVzdWx0LnZhbHVlO1xuXHRcdFx0XHRnZW5lcmF0aW9uc1tpXSA9IHJlc3VsdC5tYXAoKHJlc3VsdCQxKSA9PiB7XG5cdFx0XHRcdFx0aWYgKFwibWVzc2FnZVwiIGluIHJlc3VsdCQxICYmIGlzQmFzZU1lc3NhZ2UocmVzdWx0JDEubWVzc2FnZSkgJiYgaXNBSU1lc3NhZ2UocmVzdWx0JDEubWVzc2FnZSkpIHtcblx0XHRcdFx0XHRcdHJlc3VsdCQxLm1lc3NhZ2UudXNhZ2VfbWV0YWRhdGEgPSB7XG5cdFx0XHRcdFx0XHRcdGlucHV0X3Rva2VuczogMCxcblx0XHRcdFx0XHRcdFx0b3V0cHV0X3Rva2VuczogMCxcblx0XHRcdFx0XHRcdFx0dG90YWxfdG9rZW5zOiAwXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0aWYgKG91dHB1dFZlcnNpb24gPT09IFwidjFcIikgcmVzdWx0JDEubWVzc2FnZSA9IGNhc3RTdGFuZGFyZE1lc3NhZ2VDb250ZW50KHJlc3VsdCQxLm1lc3NhZ2UpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXN1bHQkMS5nZW5lcmF0aW9uSW5mbyA9IHtcblx0XHRcdFx0XHRcdC4uLnJlc3VsdCQxLmdlbmVyYXRpb25JbmZvLFxuXHRcdFx0XHRcdFx0dG9rZW5Vc2FnZToge31cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdHJldHVybiByZXN1bHQkMTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmIChyZXN1bHQubGVuZ3RoKSBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVMTE1OZXdUb2tlbihyZXN1bHRbMF0udGV4dCk7XG5cdFx0XHRcdHJldHVybiBydW5NYW5hZ2VyPy5oYW5kbGVMTE1FbmQoeyBnZW5lcmF0aW9uczogW3Jlc3VsdF0gfSwgdm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgeyBjYWNoZWQ6IHRydWUgfSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVMTE1FcnJvcihwcm9taXNlUmVzdWx0LnJlYXNvbiwgdm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgeyBjYWNoZWQ6IHRydWUgfSk7XG5cdFx0XHRcdHJldHVybiBQcm9taXNlLnJlamVjdChwcm9taXNlUmVzdWx0LnJlYXNvbik7XG5cdFx0XHR9XG5cdFx0fSkpO1xuXHRcdGNvbnN0IG91dHB1dCA9IHtcblx0XHRcdGdlbmVyYXRpb25zLFxuXHRcdFx0bWlzc2luZ1Byb21wdEluZGljZXMsXG5cdFx0XHRzdGFydGVkUnVuTWFuYWdlcnM6IHJ1bk1hbmFnZXJzXG5cdFx0fTtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkob3V0cHV0LCBSVU5fS0VZLCB7XG5cdFx0XHR2YWx1ZTogcnVuTWFuYWdlcnMgPyB7IHJ1bklkczogcnVuTWFuYWdlcnM/Lm1hcCgobWFuYWdlcikgPT4gbWFuYWdlci5ydW5JZCkgfSA6IHZvaWQgMCxcblx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHRcdH0pO1xuXHRcdHJldHVybiBvdXRwdXQ7XG5cdH1cblx0LyoqXG5cdCogR2VuZXJhdGVzIGNoYXQgYmFzZWQgb24gdGhlIGlucHV0IG1lc3NhZ2VzLlxuXHQqIEBwYXJhbSBtZXNzYWdlcyBBbiBhcnJheSBvZiBhcnJheXMgb2YgQmFzZU1lc3NhZ2UgaW5zdGFuY2VzLlxuXHQqIEBwYXJhbSBvcHRpb25zIFRoZSBjYWxsIG9wdGlvbnMgb3IgYW4gYXJyYXkgb2Ygc3RvcCBzZXF1ZW5jZXMuXG5cdCogQHBhcmFtIGNhbGxiYWNrcyBUaGUgY2FsbGJhY2tzIGZvciB0aGUgbGFuZ3VhZ2UgbW9kZWwuXG5cdCogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gTExNUmVzdWx0LlxuXHQqL1xuXHRhc3luYyBnZW5lcmF0ZShtZXNzYWdlcywgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG5cdFx0bGV0IHBhcnNlZE9wdGlvbnM7XG5cdFx0aWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucykpIHBhcnNlZE9wdGlvbnMgPSB7IHN0b3A6IG9wdGlvbnMgfTtcblx0XHRlbHNlIHBhcnNlZE9wdGlvbnMgPSBvcHRpb25zO1xuXHRcdGNvbnN0IGJhc2VNZXNzYWdlcyA9IG1lc3NhZ2VzLm1hcCgobWVzc2FnZUxpc3QpID0+IG1lc3NhZ2VMaXN0Lm1hcChjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSkpO1xuXHRcdGNvbnN0IFtydW5uYWJsZUNvbmZpZywgY2FsbE9wdGlvbnNdID0gdGhpcy5fc2VwYXJhdGVSdW5uYWJsZUNvbmZpZ0Zyb21DYWxsT3B0aW9uc0NvbXBhdChwYXJzZWRPcHRpb25zKTtcblx0XHRydW5uYWJsZUNvbmZpZy5jYWxsYmFja3MgPSBydW5uYWJsZUNvbmZpZy5jYWxsYmFja3MgPz8gY2FsbGJhY2tzO1xuXHRcdGlmICghdGhpcy5jYWNoZSkgcmV0dXJuIHRoaXMuX2dlbmVyYXRlVW5jYWNoZWQoYmFzZU1lc3NhZ2VzLCBjYWxsT3B0aW9ucywgcnVubmFibGVDb25maWcpO1xuXHRcdGNvbnN0IHsgY2FjaGUgfSA9IHRoaXM7XG5cdFx0Y29uc3QgbGxtU3RyaW5nS2V5ID0gdGhpcy5fZ2V0U2VyaWFsaXplZENhY2hlS2V5UGFyYW1ldGVyc0ZvckNhbGwoY2FsbE9wdGlvbnMpO1xuXHRcdGNvbnN0IHsgZ2VuZXJhdGlvbnMsIG1pc3NpbmdQcm9tcHRJbmRpY2VzLCBzdGFydGVkUnVuTWFuYWdlcnMgfSA9IGF3YWl0IHRoaXMuX2dlbmVyYXRlQ2FjaGVkKHtcblx0XHRcdG1lc3NhZ2VzOiBiYXNlTWVzc2FnZXMsXG5cdFx0XHRjYWNoZSxcblx0XHRcdGxsbVN0cmluZ0tleSxcblx0XHRcdHBhcnNlZE9wdGlvbnM6IGNhbGxPcHRpb25zLFxuXHRcdFx0aGFuZGxlZE9wdGlvbnM6IHJ1bm5hYmxlQ29uZmlnXG5cdFx0fSk7XG5cdFx0bGV0IGxsbU91dHB1dCA9IHt9O1xuXHRcdGlmIChtaXNzaW5nUHJvbXB0SW5kaWNlcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5fZ2VuZXJhdGVVbmNhY2hlZChtaXNzaW5nUHJvbXB0SW5kaWNlcy5tYXAoKGkpID0+IGJhc2VNZXNzYWdlc1tpXSksIGNhbGxPcHRpb25zLCBydW5uYWJsZUNvbmZpZywgc3RhcnRlZFJ1bk1hbmFnZXJzICE9PSB2b2lkIDAgPyBtaXNzaW5nUHJvbXB0SW5kaWNlcy5tYXAoKGkpID0+IHN0YXJ0ZWRSdW5NYW5hZ2Vycz8uW2ldKSA6IHZvaWQgMCk7XG5cdFx0XHRhd2FpdCBQcm9taXNlLmFsbChyZXN1bHRzLmdlbmVyYXRpb25zLm1hcChhc3luYyAoZ2VuZXJhdGlvbiwgaW5kZXgpID0+IHtcblx0XHRcdFx0Y29uc3QgcHJvbXB0SW5kZXggPSBtaXNzaW5nUHJvbXB0SW5kaWNlc1tpbmRleF07XG5cdFx0XHRcdGdlbmVyYXRpb25zW3Byb21wdEluZGV4XSA9IGdlbmVyYXRpb247XG5cdFx0XHRcdGNvbnN0IHByb21wdCA9IEJhc2VDaGF0TW9kZWwuX2NvbnZlcnRJbnB1dFRvUHJvbXB0VmFsdWUoYmFzZU1lc3NhZ2VzW3Byb21wdEluZGV4XSkudG9TdHJpbmcoKTtcblx0XHRcdFx0cmV0dXJuIGNhY2hlLnVwZGF0ZShwcm9tcHQsIGxsbVN0cmluZ0tleSwgZ2VuZXJhdGlvbik7XG5cdFx0XHR9KSk7XG5cdFx0XHRsbG1PdXRwdXQgPSByZXN1bHRzLmxsbU91dHB1dCA/PyB7fTtcblx0XHR9XG5cdFx0cmV0dXJuIHtcblx0XHRcdGdlbmVyYXRpb25zLFxuXHRcdFx0bGxtT3V0cHV0XG5cdFx0fTtcblx0fVxuXHQvKipcblx0KiBHZXQgdGhlIHBhcmFtZXRlcnMgdXNlZCB0byBpbnZva2UgdGhlIG1vZGVsXG5cdCovXG5cdGludm9jYXRpb25QYXJhbXMoX29wdGlvbnMpIHtcblx0XHRyZXR1cm4ge307XG5cdH1cblx0X21vZGVsVHlwZSgpIHtcblx0XHRyZXR1cm4gXCJiYXNlX2NoYXRfbW9kZWxcIjtcblx0fVxuXHQvKipcblx0KiBHZW5lcmF0ZXMgYSBwcm9tcHQgYmFzZWQgb24gdGhlIGlucHV0IHByb21wdCB2YWx1ZXMuXG5cdCogQHBhcmFtIHByb21wdFZhbHVlcyBBbiBhcnJheSBvZiBCYXNlUHJvbXB0VmFsdWUgaW5zdGFuY2VzLlxuXHQqIEBwYXJhbSBvcHRpb25zIFRoZSBjYWxsIG9wdGlvbnMgb3IgYW4gYXJyYXkgb2Ygc3RvcCBzZXF1ZW5jZXMuXG5cdCogQHBhcmFtIGNhbGxiYWNrcyBUaGUgY2FsbGJhY2tzIGZvciB0aGUgbGFuZ3VhZ2UgbW9kZWwuXG5cdCogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gTExNUmVzdWx0LlxuXHQqL1xuXHRhc3luYyBnZW5lcmF0ZVByb21wdChwcm9tcHRWYWx1ZXMsIG9wdGlvbnMsIGNhbGxiYWNrcykge1xuXHRcdGNvbnN0IHByb21wdE1lc3NhZ2VzID0gcHJvbXB0VmFsdWVzLm1hcCgocHJvbXB0VmFsdWUpID0+IHByb21wdFZhbHVlLnRvQ2hhdE1lc3NhZ2VzKCkpO1xuXHRcdHJldHVybiB0aGlzLmdlbmVyYXRlKHByb21wdE1lc3NhZ2VzLCBvcHRpb25zLCBjYWxsYmFja3MpO1xuXHR9XG5cdHdpdGhTdHJ1Y3R1cmVkT3V0cHV0KG91dHB1dFNjaGVtYSwgY29uZmlnKSB7XG5cdFx0aWYgKHR5cGVvZiB0aGlzLmJpbmRUb29scyAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgRXJyb3IoYENoYXQgbW9kZWwgbXVzdCBpbXBsZW1lbnQgXCIuYmluZFRvb2xzKClcIiB0byB1c2Ugd2l0aFN0cnVjdHVyZWRPdXRwdXQuYCk7XG5cdFx0aWYgKGNvbmZpZz8uc3RyaWN0KSB0aHJvdyBuZXcgRXJyb3IoYFwic3RyaWN0XCIgbW9kZSBpcyBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIG1vZGVsIGJ5IGRlZmF1bHQuYCk7XG5cdFx0Y29uc3Qgc2NoZW1hID0gb3V0cHV0U2NoZW1hO1xuXHRcdGNvbnN0IG5hbWUgPSBjb25maWc/Lm5hbWU7XG5cdFx0Y29uc3QgZGVzY3JpcHRpb24gPSBnZXRTY2hlbWFEZXNjcmlwdGlvbihzY2hlbWEpID8/IFwiQSBmdW5jdGlvbiBhdmFpbGFibGUgdG8gY2FsbC5cIjtcblx0XHRjb25zdCBtZXRob2QgPSBjb25maWc/Lm1ldGhvZDtcblx0XHRjb25zdCBpbmNsdWRlUmF3ID0gY29uZmlnPy5pbmNsdWRlUmF3O1xuXHRcdGlmIChtZXRob2QgPT09IFwianNvbk1vZGVcIikgdGhyb3cgbmV3IEVycm9yKGBCYXNlIHdpdGhTdHJ1Y3R1cmVkT3V0cHV0IGltcGxlbWVudGF0aW9uIG9ubHkgc3VwcG9ydHMgXCJmdW5jdGlvbkNhbGxpbmdcIiBhcyBhIG1ldGhvZC5gKTtcblx0XHRsZXQgZnVuY3Rpb25OYW1lID0gbmFtZSA/PyBcImV4dHJhY3RcIjtcblx0XHRsZXQgdG9vbHM7XG5cdFx0aWYgKGlzSW50ZXJvcFpvZFNjaGVtYShzY2hlbWEpKSB0b29scyA9IFt7XG5cdFx0XHR0eXBlOiBcImZ1bmN0aW9uXCIsXG5cdFx0XHRmdW5jdGlvbjoge1xuXHRcdFx0XHRuYW1lOiBmdW5jdGlvbk5hbWUsXG5cdFx0XHRcdGRlc2NyaXB0aW9uLFxuXHRcdFx0XHRwYXJhbWV0ZXJzOiB0b0pzb25TY2hlbWEoc2NoZW1hKVxuXHRcdFx0fVxuXHRcdH1dO1xuXHRcdGVsc2Uge1xuXHRcdFx0aWYgKFwibmFtZVwiIGluIHNjaGVtYSkgZnVuY3Rpb25OYW1lID0gc2NoZW1hLm5hbWU7XG5cdFx0XHR0b29scyA9IFt7XG5cdFx0XHRcdHR5cGU6IFwiZnVuY3Rpb25cIixcblx0XHRcdFx0ZnVuY3Rpb246IHtcblx0XHRcdFx0XHRuYW1lOiBmdW5jdGlvbk5hbWUsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb24sXG5cdFx0XHRcdFx0cGFyYW1ldGVyczogc2NoZW1hXG5cdFx0XHRcdH1cblx0XHRcdH1dO1xuXHRcdH1cblx0XHRjb25zdCBsbG0gPSB0aGlzLmJpbmRUb29scyh0b29scyk7XG5cdFx0Y29uc3Qgb3V0cHV0UGFyc2VyID0gUnVubmFibGVMYW1iZGEuZnJvbSgoaW5wdXQpID0+IHtcblx0XHRcdGlmICghQUlNZXNzYWdlQ2h1bmsuaXNJbnN0YW5jZShpbnB1dCkpIHRocm93IG5ldyBFcnJvcihcIklucHV0IGlzIG5vdCBhbiBBSU1lc3NhZ2VDaHVuay5cIik7XG5cdFx0XHRpZiAoIWlucHV0LnRvb2xfY2FsbHMgfHwgaW5wdXQudG9vbF9jYWxscy5sZW5ndGggPT09IDApIHRocm93IG5ldyBFcnJvcihcIk5vIHRvb2wgY2FsbHMgZm91bmQgaW4gdGhlIHJlc3BvbnNlLlwiKTtcblx0XHRcdGNvbnN0IHRvb2xDYWxsID0gaW5wdXQudG9vbF9jYWxscy5maW5kKCh0YykgPT4gdGMubmFtZSA9PT0gZnVuY3Rpb25OYW1lKTtcblx0XHRcdGlmICghdG9vbENhbGwpIHRocm93IG5ldyBFcnJvcihgTm8gdG9vbCBjYWxsIGZvdW5kIHdpdGggbmFtZSAke2Z1bmN0aW9uTmFtZX0uYCk7XG5cdFx0XHRyZXR1cm4gdG9vbENhbGwuYXJncztcblx0XHR9KTtcblx0XHRpZiAoIWluY2x1ZGVSYXcpIHJldHVybiBsbG0ucGlwZShvdXRwdXRQYXJzZXIpLndpdGhDb25maWcoeyBydW5OYW1lOiBcIlN0cnVjdHVyZWRPdXRwdXRcIiB9KTtcblx0XHRjb25zdCBwYXJzZXJBc3NpZ24gPSBSdW5uYWJsZVBhc3N0aHJvdWdoLmFzc2lnbih7IHBhcnNlZDogKGlucHV0LCBjb25maWckMSkgPT4gb3V0cHV0UGFyc2VyLmludm9rZShpbnB1dC5yYXcsIGNvbmZpZyQxKSB9KTtcblx0XHRjb25zdCBwYXJzZXJOb25lID0gUnVubmFibGVQYXNzdGhyb3VnaC5hc3NpZ24oeyBwYXJzZWQ6ICgpID0+IG51bGwgfSk7XG5cdFx0Y29uc3QgcGFyc2VkV2l0aEZhbGxiYWNrID0gcGFyc2VyQXNzaWduLndpdGhGYWxsYmFja3MoeyBmYWxsYmFja3M6IFtwYXJzZXJOb25lXSB9KTtcblx0XHRyZXR1cm4gUnVubmFibGVTZXF1ZW5jZS5mcm9tKFt7IHJhdzogbGxtIH0sIHBhcnNlZFdpdGhGYWxsYmFja10pLndpdGhDb25maWcoeyBydW5OYW1lOiBcIlN0cnVjdHVyZWRPdXRwdXRSdW5uYWJsZVwiIH0pO1xuXHR9XG59O1xuLyoqXG4qIEFuIGFic3RyYWN0IGNsYXNzIHRoYXQgZXh0ZW5kcyBCYXNlQ2hhdE1vZGVsIGFuZCBwcm92aWRlcyBhIHNpbXBsZVxuKiBpbXBsZW1lbnRhdGlvbiBvZiBfZ2VuZXJhdGUuXG4qL1xudmFyIFNpbXBsZUNoYXRNb2RlbCA9IGNsYXNzIGV4dGVuZHMgQmFzZUNoYXRNb2RlbCB7XG5cdGFzeW5jIF9nZW5lcmF0ZShtZXNzYWdlcywgb3B0aW9ucywgcnVuTWFuYWdlcikge1xuXHRcdGNvbnN0IHRleHQgPSBhd2FpdCB0aGlzLl9jYWxsKG1lc3NhZ2VzLCBvcHRpb25zLCBydW5NYW5hZ2VyKTtcblx0XHRjb25zdCBtZXNzYWdlID0gbmV3IEFJTWVzc2FnZSh0ZXh0KTtcblx0XHRpZiAodHlwZW9mIG1lc3NhZ2UuY29udGVudCAhPT0gXCJzdHJpbmdcIikgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGdlbmVyYXRlIHdpdGggYSBzaW1wbGUgY2hhdCBtb2RlbCB3aGVuIG91dHB1dCBpcyBub3QgYSBzdHJpbmcuXCIpO1xuXHRcdHJldHVybiB7IGdlbmVyYXRpb25zOiBbe1xuXHRcdFx0dGV4dDogbWVzc2FnZS5jb250ZW50LFxuXHRcdFx0bWVzc2FnZVxuXHRcdH1dIH07XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQmFzZUNoYXRNb2RlbCwgU2ltcGxlQ2hhdE1vZGVsLCBjaGF0X21vZGVsc19leHBvcnRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaGF0X21vZGVscy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/language_models/chat_models.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/language_models/llms.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/language_models/llms.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseLLM: () => (/* binding */ BaseLLM),\n/* harmony export */   LLM: () => (/* binding */ LLM),\n/* harmony export */   llms_exports: () => (/* binding */ llms_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _callbacks_base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../callbacks/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/callbacks/base.js\");\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(ssr)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/stream.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _outputs_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../outputs.js */ \"(ssr)/./node_modules/@langchain/core/dist/outputs.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/language_models/base.js\");\n\n\n\n\n\n\n\n//#region src/language_models/llms.ts\nvar llms_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(llms_exports, {\n\tBaseLLM: () => BaseLLM,\n\tLLM: () => LLM\n});\n/**\n* LLM Wrapper. Takes in a prompt (or prompts) and returns a string.\n*/\nvar BaseLLM = class BaseLLM extends _base_js__WEBPACK_IMPORTED_MODULE_5__.BaseLanguageModel {\n\tlc_namespace = [\n\t\t\"langchain\",\n\t\t\"llms\",\n\t\tthis._llmType()\n\t];\n\t/**\n\t* This method takes an input and options, and returns a string. It\n\t* converts the input to a prompt value and generates a result based on\n\t* the prompt.\n\t* @param input Input for the LLM.\n\t* @param options Options for the LLM call.\n\t* @returns A string result based on the prompt.\n\t*/\n\tasync invoke(input, options) {\n\t\tconst promptValue = BaseLLM._convertInputToPromptValue(input);\n\t\tconst result = await this.generatePrompt([promptValue], options, options?.callbacks);\n\t\treturn result.generations[0][0].text;\n\t}\n\tasync *_streamResponseChunks(_input, _options, _runManager) {\n\t\tthrow new Error(\"Not implemented.\");\n\t}\n\t_separateRunnableConfigFromCallOptionsCompat(options) {\n\t\tconst [runnableConfig, callOptions] = super._separateRunnableConfigFromCallOptions(options);\n\t\tcallOptions.signal = runnableConfig.signal;\n\t\treturn [runnableConfig, callOptions];\n\t}\n\tasync *_streamIterator(input, options) {\n\t\tif (this._streamResponseChunks === BaseLLM.prototype._streamResponseChunks) yield this.invoke(input, options);\n\t\telse {\n\t\t\tconst prompt = BaseLLM._convertInputToPromptValue(input);\n\t\t\tconst [runnableConfig, callOptions] = this._separateRunnableConfigFromCallOptionsCompat(options);\n\t\t\tconst callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_2__.CallbackManager.configure(runnableConfig.callbacks, this.callbacks, runnableConfig.tags, this.tags, runnableConfig.metadata, this.metadata, { verbose: this.verbose });\n\t\t\tconst extra = {\n\t\t\t\toptions: callOptions,\n\t\t\t\tinvocation_params: this?.invocationParams(callOptions),\n\t\t\t\tbatch_size: 1\n\t\t\t};\n\t\t\tconst runManagers = await callbackManager_?.handleLLMStart(this.toJSON(), [prompt.toString()], runnableConfig.runId, void 0, extra, void 0, void 0, runnableConfig.runName);\n\t\t\tlet generation = new _outputs_js__WEBPACK_IMPORTED_MODULE_4__.GenerationChunk({ text: \"\" });\n\t\t\ttry {\n\t\t\t\tfor await (const chunk of this._streamResponseChunks(prompt.toString(), callOptions, runManagers?.[0])) {\n\t\t\t\t\tif (!generation) generation = chunk;\n\t\t\t\t\telse generation = generation.concat(chunk);\n\t\t\t\t\tif (typeof chunk.text === \"string\") yield chunk.text;\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tawait Promise.all((runManagers ?? []).map((runManager) => runManager?.handleLLMError(err)));\n\t\t\t\tthrow err;\n\t\t\t}\n\t\t\tawait Promise.all((runManagers ?? []).map((runManager) => runManager?.handleLLMEnd({ generations: [[generation]] })));\n\t\t}\n\t}\n\t/**\n\t* This method takes prompt values, options, and callbacks, and generates\n\t* a result based on the prompts.\n\t* @param promptValues Prompt values for the LLM.\n\t* @param options Options for the LLM call.\n\t* @param callbacks Callbacks for the LLM call.\n\t* @returns An LLMResult based on the prompts.\n\t*/\n\tasync generatePrompt(promptValues, options, callbacks) {\n\t\tconst prompts = promptValues.map((promptValue) => promptValue.toString());\n\t\treturn this.generate(prompts, options, callbacks);\n\t}\n\t/**\n\t* Get the parameters used to invoke the model\n\t*/\n\tinvocationParams(_options) {\n\t\treturn {};\n\t}\n\t_flattenLLMResult(llmResult) {\n\t\tconst llmResults = [];\n\t\tfor (let i = 0; i < llmResult.generations.length; i += 1) {\n\t\t\tconst genList = llmResult.generations[i];\n\t\t\tif (i === 0) llmResults.push({\n\t\t\t\tgenerations: [genList],\n\t\t\t\tllmOutput: llmResult.llmOutput\n\t\t\t});\n\t\t\telse {\n\t\t\t\tconst llmOutput = llmResult.llmOutput ? {\n\t\t\t\t\t...llmResult.llmOutput,\n\t\t\t\t\ttokenUsage: {}\n\t\t\t\t} : void 0;\n\t\t\t\tllmResults.push({\n\t\t\t\t\tgenerations: [genList],\n\t\t\t\t\tllmOutput\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn llmResults;\n\t}\n\t/** @ignore */\n\tasync _generateUncached(prompts, parsedOptions, handledOptions, startedRunManagers) {\n\t\tlet runManagers;\n\t\tif (startedRunManagers !== void 0 && startedRunManagers.length === prompts.length) runManagers = startedRunManagers;\n\t\telse {\n\t\t\tconst callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_2__.CallbackManager.configure(handledOptions.callbacks, this.callbacks, handledOptions.tags, this.tags, handledOptions.metadata, this.metadata, { verbose: this.verbose });\n\t\t\tconst extra = {\n\t\t\t\toptions: parsedOptions,\n\t\t\t\tinvocation_params: this?.invocationParams(parsedOptions),\n\t\t\t\tbatch_size: prompts.length\n\t\t\t};\n\t\t\trunManagers = await callbackManager_?.handleLLMStart(this.toJSON(), prompts, handledOptions.runId, void 0, extra, void 0, void 0, handledOptions?.runName);\n\t\t}\n\t\tconst hasStreamingHandler = !!runManagers?.[0].handlers.find(_callbacks_base_js__WEBPACK_IMPORTED_MODULE_1__.callbackHandlerPrefersStreaming);\n\t\tlet output;\n\t\tif (hasStreamingHandler && prompts.length === 1 && this._streamResponseChunks !== BaseLLM.prototype._streamResponseChunks) try {\n\t\t\tconst stream = await this._streamResponseChunks(prompts[0], parsedOptions, runManagers?.[0]);\n\t\t\tlet aggregated;\n\t\t\tfor await (const chunk of stream) if (aggregated === void 0) aggregated = chunk;\n\t\t\telse aggregated = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_3__.concat)(aggregated, chunk);\n\t\t\tif (aggregated === void 0) throw new Error(\"Received empty response from chat model call.\");\n\t\t\toutput = {\n\t\t\t\tgenerations: [[aggregated]],\n\t\t\t\tllmOutput: {}\n\t\t\t};\n\t\t\tawait runManagers?.[0].handleLLMEnd(output);\n\t\t} catch (e) {\n\t\t\tawait runManagers?.[0].handleLLMError(e);\n\t\t\tthrow e;\n\t\t}\n\t\telse {\n\t\t\ttry {\n\t\t\t\toutput = await this._generate(prompts, parsedOptions, runManagers?.[0]);\n\t\t\t} catch (err) {\n\t\t\t\tawait Promise.all((runManagers ?? []).map((runManager) => runManager?.handleLLMError(err)));\n\t\t\t\tthrow err;\n\t\t\t}\n\t\t\tconst flattenedOutputs = this._flattenLLMResult(output);\n\t\t\tawait Promise.all((runManagers ?? []).map((runManager, i) => runManager?.handleLLMEnd(flattenedOutputs[i])));\n\t\t}\n\t\tconst runIds = runManagers?.map((manager) => manager.runId) || void 0;\n\t\tObject.defineProperty(output, _outputs_js__WEBPACK_IMPORTED_MODULE_4__.RUN_KEY, {\n\t\t\tvalue: runIds ? { runIds } : void 0,\n\t\t\tconfigurable: true\n\t\t});\n\t\treturn output;\n\t}\n\tasync _generateCached({ prompts, cache, llmStringKey, parsedOptions, handledOptions, runId }) {\n\t\tconst callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_2__.CallbackManager.configure(handledOptions.callbacks, this.callbacks, handledOptions.tags, this.tags, handledOptions.metadata, this.metadata, { verbose: this.verbose });\n\t\tconst extra = {\n\t\t\toptions: parsedOptions,\n\t\t\tinvocation_params: this?.invocationParams(parsedOptions),\n\t\t\tbatch_size: prompts.length\n\t\t};\n\t\tconst runManagers = await callbackManager_?.handleLLMStart(this.toJSON(), prompts, runId, void 0, extra, void 0, void 0, handledOptions?.runName);\n\t\tconst missingPromptIndices = [];\n\t\tconst results = await Promise.allSettled(prompts.map(async (prompt, index) => {\n\t\t\tconst result = await cache.lookup(prompt, llmStringKey);\n\t\t\tif (result == null) missingPromptIndices.push(index);\n\t\t\treturn result;\n\t\t}));\n\t\tconst cachedResults = results.map((result, index) => ({\n\t\t\tresult,\n\t\t\trunManager: runManagers?.[index]\n\t\t})).filter(({ result }) => result.status === \"fulfilled\" && result.value != null || result.status === \"rejected\");\n\t\tconst generations = [];\n\t\tawait Promise.all(cachedResults.map(async ({ result: promiseResult, runManager }, i) => {\n\t\t\tif (promiseResult.status === \"fulfilled\") {\n\t\t\t\tconst result = promiseResult.value;\n\t\t\t\tgenerations[i] = result.map((result$1) => {\n\t\t\t\t\tresult$1.generationInfo = {\n\t\t\t\t\t\t...result$1.generationInfo,\n\t\t\t\t\t\ttokenUsage: {}\n\t\t\t\t\t};\n\t\t\t\t\treturn result$1;\n\t\t\t\t});\n\t\t\t\tif (result.length) await runManager?.handleLLMNewToken(result[0].text);\n\t\t\t\treturn runManager?.handleLLMEnd({ generations: [result] }, void 0, void 0, void 0, { cached: true });\n\t\t\t} else {\n\t\t\t\tawait runManager?.handleLLMError(promiseResult.reason, void 0, void 0, void 0, { cached: true });\n\t\t\t\treturn Promise.reject(promiseResult.reason);\n\t\t\t}\n\t\t}));\n\t\tconst output = {\n\t\t\tgenerations,\n\t\t\tmissingPromptIndices,\n\t\t\tstartedRunManagers: runManagers\n\t\t};\n\t\tObject.defineProperty(output, _outputs_js__WEBPACK_IMPORTED_MODULE_4__.RUN_KEY, {\n\t\t\tvalue: runManagers ? { runIds: runManagers?.map((manager) => manager.runId) } : void 0,\n\t\t\tconfigurable: true\n\t\t});\n\t\treturn output;\n\t}\n\t/**\n\t* Run the LLM on the given prompts and input, handling caching.\n\t*/\n\tasync generate(prompts, options, callbacks) {\n\t\tif (!Array.isArray(prompts)) throw new Error(\"Argument 'prompts' is expected to be a string[]\");\n\t\tlet parsedOptions;\n\t\tif (Array.isArray(options)) parsedOptions = { stop: options };\n\t\telse parsedOptions = options;\n\t\tconst [runnableConfig, callOptions] = this._separateRunnableConfigFromCallOptionsCompat(parsedOptions);\n\t\trunnableConfig.callbacks = runnableConfig.callbacks ?? callbacks;\n\t\tif (!this.cache) return this._generateUncached(prompts, callOptions, runnableConfig);\n\t\tconst { cache } = this;\n\t\tconst llmStringKey = this._getSerializedCacheKeyParametersForCall(callOptions);\n\t\tconst { generations, missingPromptIndices, startedRunManagers } = await this._generateCached({\n\t\t\tprompts,\n\t\t\tcache,\n\t\t\tllmStringKey,\n\t\t\tparsedOptions: callOptions,\n\t\t\thandledOptions: runnableConfig,\n\t\t\trunId: runnableConfig.runId\n\t\t});\n\t\tlet llmOutput = {};\n\t\tif (missingPromptIndices.length > 0) {\n\t\t\tconst results = await this._generateUncached(missingPromptIndices.map((i) => prompts[i]), callOptions, runnableConfig, startedRunManagers !== void 0 ? missingPromptIndices.map((i) => startedRunManagers?.[i]) : void 0);\n\t\t\tawait Promise.all(results.generations.map(async (generation, index) => {\n\t\t\t\tconst promptIndex = missingPromptIndices[index];\n\t\t\t\tgenerations[promptIndex] = generation;\n\t\t\t\treturn cache.update(prompts[promptIndex], llmStringKey, generation);\n\t\t\t}));\n\t\t\tllmOutput = results.llmOutput ?? {};\n\t\t}\n\t\treturn {\n\t\t\tgenerations,\n\t\t\tllmOutput\n\t\t};\n\t}\n\t/**\n\t* Get the identifying parameters of the LLM.\n\t*/\n\t_identifyingParams() {\n\t\treturn {};\n\t}\n\t_modelType() {\n\t\treturn \"base_llm\";\n\t}\n};\n/**\n* LLM class that provides a simpler interface to subclass than {@link BaseLLM}.\n*\n* Requires only implementing a simpler {@link _call} method instead of {@link _generate}.\n*\n* @augments BaseLLM\n*/\nvar LLM = class extends BaseLLM {\n\tasync _generate(prompts, options, runManager) {\n\t\tconst generations = await Promise.all(prompts.map((prompt, promptIndex) => this._call(prompt, {\n\t\t\t...options,\n\t\t\tpromptIndex\n\t\t}, runManager).then((text) => [{ text }])));\n\t\treturn { generations };\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=llms.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbGFuZ3VhZ2VfbW9kZWxzL2xsbXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQTJEO0FBQ1k7QUFDYjtBQUNkO0FBQ2E7QUFDWDs7QUFFOUM7QUFDQTtBQUNBLHNFQUFRO0FBQ1I7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsdURBQWlCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGtFQUFlLCtIQUErSCx1QkFBdUI7QUFDdk07QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHdEQUFlLEdBQUcsVUFBVTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0Esd0ZBQXdGLDZCQUE2QjtBQUNySDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixrQ0FBa0M7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxrRUFBZSwrSEFBK0gsdUJBQXVCO0FBQ3ZNO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELCtFQUErQjtBQUM5RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHdEQUFNO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsZ0RBQU87QUFDdkMscUJBQXFCLFNBQVM7QUFDOUI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLHlCQUF5QixvRUFBb0U7QUFDN0YsaUNBQWlDLGtFQUFlLCtIQUErSCx1QkFBdUI7QUFDdE07QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHLGFBQWEsUUFBUTtBQUN4QjtBQUNBLCtDQUErQyxtQ0FBbUM7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLHNDQUFzQyx1QkFBdUIsNEJBQTRCLGNBQWM7QUFDdkcsS0FBSztBQUNMLHFGQUFxRixjQUFjO0FBQ25HO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxnREFBTztBQUN2QywwQkFBMEIsdURBQXVEO0FBQ2pGO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLFFBQVE7QUFDbEI7QUFDQSxVQUFVLHdEQUF3RDtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0VBQWdFLGNBQWM7QUFDOUU7QUFDQSx3Q0FBd0MsYUFBYSxtQkFBbUIsZ0JBQWdCO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLGdDQUFnQyxNQUFNO0FBQ3pDLFdBQVc7QUFDWDtBQUNBOztBQUVBO0FBQ3NDO0FBQ3RDIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbGFuZ3VhZ2VfbW9kZWxzL2xsbXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19leHBvcnQgfSBmcm9tIFwiLi4vX3ZpcnR1YWwvcm9sbGRvd25fcnVudGltZS5qc1wiO1xuaW1wb3J0IHsgY2FsbGJhY2tIYW5kbGVyUHJlZmVyc1N0cmVhbWluZyB9IGZyb20gXCIuLi9jYWxsYmFja3MvYmFzZS5qc1wiO1xuaW1wb3J0IHsgQ2FsbGJhY2tNYW5hZ2VyIH0gZnJvbSBcIi4uL2NhbGxiYWNrcy9tYW5hZ2VyLmpzXCI7XG5pbXBvcnQgeyBjb25jYXQgfSBmcm9tIFwiLi4vdXRpbHMvc3RyZWFtLmpzXCI7XG5pbXBvcnQgeyBHZW5lcmF0aW9uQ2h1bmssIFJVTl9LRVkgfSBmcm9tIFwiLi4vb3V0cHV0cy5qc1wiO1xuaW1wb3J0IHsgQmFzZUxhbmd1YWdlTW9kZWwgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvbGFuZ3VhZ2VfbW9kZWxzL2xsbXMudHNcbnZhciBsbG1zX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KGxsbXNfZXhwb3J0cywge1xuXHRCYXNlTExNOiAoKSA9PiBCYXNlTExNLFxuXHRMTE06ICgpID0+IExMTVxufSk7XG4vKipcbiogTExNIFdyYXBwZXIuIFRha2VzIGluIGEgcHJvbXB0IChvciBwcm9tcHRzKSBhbmQgcmV0dXJucyBhIHN0cmluZy5cbiovXG52YXIgQmFzZUxMTSA9IGNsYXNzIEJhc2VMTE0gZXh0ZW5kcyBCYXNlTGFuZ3VhZ2VNb2RlbCB7XG5cdGxjX25hbWVzcGFjZSA9IFtcblx0XHRcImxhbmdjaGFpblwiLFxuXHRcdFwibGxtc1wiLFxuXHRcdHRoaXMuX2xsbVR5cGUoKVxuXHRdO1xuXHQvKipcblx0KiBUaGlzIG1ldGhvZCB0YWtlcyBhbiBpbnB1dCBhbmQgb3B0aW9ucywgYW5kIHJldHVybnMgYSBzdHJpbmcuIEl0XG5cdCogY29udmVydHMgdGhlIGlucHV0IHRvIGEgcHJvbXB0IHZhbHVlIGFuZCBnZW5lcmF0ZXMgYSByZXN1bHQgYmFzZWQgb25cblx0KiB0aGUgcHJvbXB0LlxuXHQqIEBwYXJhbSBpbnB1dCBJbnB1dCBmb3IgdGhlIExMTS5cblx0KiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIGZvciB0aGUgTExNIGNhbGwuXG5cdCogQHJldHVybnMgQSBzdHJpbmcgcmVzdWx0IGJhc2VkIG9uIHRoZSBwcm9tcHQuXG5cdCovXG5cdGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuXHRcdGNvbnN0IHByb21wdFZhbHVlID0gQmFzZUxMTS5fY29udmVydElucHV0VG9Qcm9tcHRWYWx1ZShpbnB1dCk7XG5cdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5nZW5lcmF0ZVByb21wdChbcHJvbXB0VmFsdWVdLCBvcHRpb25zLCBvcHRpb25zPy5jYWxsYmFja3MpO1xuXHRcdHJldHVybiByZXN1bHQuZ2VuZXJhdGlvbnNbMF1bMF0udGV4dDtcblx0fVxuXHRhc3luYyAqX3N0cmVhbVJlc3BvbnNlQ2h1bmtzKF9pbnB1dCwgX29wdGlvbnMsIF9ydW5NYW5hZ2VyKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkLlwiKTtcblx0fVxuXHRfc2VwYXJhdGVSdW5uYWJsZUNvbmZpZ0Zyb21DYWxsT3B0aW9uc0NvbXBhdChvcHRpb25zKSB7XG5cdFx0Y29uc3QgW3J1bm5hYmxlQ29uZmlnLCBjYWxsT3B0aW9uc10gPSBzdXBlci5fc2VwYXJhdGVSdW5uYWJsZUNvbmZpZ0Zyb21DYWxsT3B0aW9ucyhvcHRpb25zKTtcblx0XHRjYWxsT3B0aW9ucy5zaWduYWwgPSBydW5uYWJsZUNvbmZpZy5zaWduYWw7XG5cdFx0cmV0dXJuIFtydW5uYWJsZUNvbmZpZywgY2FsbE9wdGlvbnNdO1xuXHR9XG5cdGFzeW5jICpfc3RyZWFtSXRlcmF0b3IoaW5wdXQsIG9wdGlvbnMpIHtcblx0XHRpZiAodGhpcy5fc3RyZWFtUmVzcG9uc2VDaHVua3MgPT09IEJhc2VMTE0ucHJvdG90eXBlLl9zdHJlYW1SZXNwb25zZUNodW5rcykgeWllbGQgdGhpcy5pbnZva2UoaW5wdXQsIG9wdGlvbnMpO1xuXHRcdGVsc2Uge1xuXHRcdFx0Y29uc3QgcHJvbXB0ID0gQmFzZUxMTS5fY29udmVydElucHV0VG9Qcm9tcHRWYWx1ZShpbnB1dCk7XG5cdFx0XHRjb25zdCBbcnVubmFibGVDb25maWcsIGNhbGxPcHRpb25zXSA9IHRoaXMuX3NlcGFyYXRlUnVubmFibGVDb25maWdGcm9tQ2FsbE9wdGlvbnNDb21wYXQob3B0aW9ucyk7XG5cdFx0XHRjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgQ2FsbGJhY2tNYW5hZ2VyLmNvbmZpZ3VyZShydW5uYWJsZUNvbmZpZy5jYWxsYmFja3MsIHRoaXMuY2FsbGJhY2tzLCBydW5uYWJsZUNvbmZpZy50YWdzLCB0aGlzLnRhZ3MsIHJ1bm5hYmxlQ29uZmlnLm1ldGFkYXRhLCB0aGlzLm1ldGFkYXRhLCB7IHZlcmJvc2U6IHRoaXMudmVyYm9zZSB9KTtcblx0XHRcdGNvbnN0IGV4dHJhID0ge1xuXHRcdFx0XHRvcHRpb25zOiBjYWxsT3B0aW9ucyxcblx0XHRcdFx0aW52b2NhdGlvbl9wYXJhbXM6IHRoaXM/Lmludm9jYXRpb25QYXJhbXMoY2FsbE9wdGlvbnMpLFxuXHRcdFx0XHRiYXRjaF9zaXplOiAxXG5cdFx0XHR9O1xuXHRcdFx0Y29uc3QgcnVuTWFuYWdlcnMgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVMTE1TdGFydCh0aGlzLnRvSlNPTigpLCBbcHJvbXB0LnRvU3RyaW5nKCldLCBydW5uYWJsZUNvbmZpZy5ydW5JZCwgdm9pZCAwLCBleHRyYSwgdm9pZCAwLCB2b2lkIDAsIHJ1bm5hYmxlQ29uZmlnLnJ1bk5hbWUpO1xuXHRcdFx0bGV0IGdlbmVyYXRpb24gPSBuZXcgR2VuZXJhdGlvbkNodW5rKHsgdGV4dDogXCJcIiB9KTtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgdGhpcy5fc3RyZWFtUmVzcG9uc2VDaHVua3MocHJvbXB0LnRvU3RyaW5nKCksIGNhbGxPcHRpb25zLCBydW5NYW5hZ2Vycz8uWzBdKSkge1xuXHRcdFx0XHRcdGlmICghZ2VuZXJhdGlvbikgZ2VuZXJhdGlvbiA9IGNodW5rO1xuXHRcdFx0XHRcdGVsc2UgZ2VuZXJhdGlvbiA9IGdlbmVyYXRpb24uY29uY2F0KGNodW5rKTtcblx0XHRcdFx0XHRpZiAodHlwZW9mIGNodW5rLnRleHQgPT09IFwic3RyaW5nXCIpIHlpZWxkIGNodW5rLnRleHQ7XG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRhd2FpdCBQcm9taXNlLmFsbCgocnVuTWFuYWdlcnMgPz8gW10pLm1hcCgocnVuTWFuYWdlcikgPT4gcnVuTWFuYWdlcj8uaGFuZGxlTExNRXJyb3IoZXJyKSkpO1xuXHRcdFx0XHR0aHJvdyBlcnI7XG5cdFx0XHR9XG5cdFx0XHRhd2FpdCBQcm9taXNlLmFsbCgocnVuTWFuYWdlcnMgPz8gW10pLm1hcCgocnVuTWFuYWdlcikgPT4gcnVuTWFuYWdlcj8uaGFuZGxlTExNRW5kKHsgZ2VuZXJhdGlvbnM6IFtbZ2VuZXJhdGlvbl1dIH0pKSk7XG5cdFx0fVxuXHR9XG5cdC8qKlxuXHQqIFRoaXMgbWV0aG9kIHRha2VzIHByb21wdCB2YWx1ZXMsIG9wdGlvbnMsIGFuZCBjYWxsYmFja3MsIGFuZCBnZW5lcmF0ZXNcblx0KiBhIHJlc3VsdCBiYXNlZCBvbiB0aGUgcHJvbXB0cy5cblx0KiBAcGFyYW0gcHJvbXB0VmFsdWVzIFByb21wdCB2YWx1ZXMgZm9yIHRoZSBMTE0uXG5cdCogQHBhcmFtIG9wdGlvbnMgT3B0aW9ucyBmb3IgdGhlIExMTSBjYWxsLlxuXHQqIEBwYXJhbSBjYWxsYmFja3MgQ2FsbGJhY2tzIGZvciB0aGUgTExNIGNhbGwuXG5cdCogQHJldHVybnMgQW4gTExNUmVzdWx0IGJhc2VkIG9uIHRoZSBwcm9tcHRzLlxuXHQqL1xuXHRhc3luYyBnZW5lcmF0ZVByb21wdChwcm9tcHRWYWx1ZXMsIG9wdGlvbnMsIGNhbGxiYWNrcykge1xuXHRcdGNvbnN0IHByb21wdHMgPSBwcm9tcHRWYWx1ZXMubWFwKChwcm9tcHRWYWx1ZSkgPT4gcHJvbXB0VmFsdWUudG9TdHJpbmcoKSk7XG5cdFx0cmV0dXJuIHRoaXMuZ2VuZXJhdGUocHJvbXB0cywgb3B0aW9ucywgY2FsbGJhY2tzKTtcblx0fVxuXHQvKipcblx0KiBHZXQgdGhlIHBhcmFtZXRlcnMgdXNlZCB0byBpbnZva2UgdGhlIG1vZGVsXG5cdCovXG5cdGludm9jYXRpb25QYXJhbXMoX29wdGlvbnMpIHtcblx0XHRyZXR1cm4ge307XG5cdH1cblx0X2ZsYXR0ZW5MTE1SZXN1bHQobGxtUmVzdWx0KSB7XG5cdFx0Y29uc3QgbGxtUmVzdWx0cyA9IFtdO1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbGxtUmVzdWx0LmdlbmVyYXRpb25zLmxlbmd0aDsgaSArPSAxKSB7XG5cdFx0XHRjb25zdCBnZW5MaXN0ID0gbGxtUmVzdWx0LmdlbmVyYXRpb25zW2ldO1xuXHRcdFx0aWYgKGkgPT09IDApIGxsbVJlc3VsdHMucHVzaCh7XG5cdFx0XHRcdGdlbmVyYXRpb25zOiBbZ2VuTGlzdF0sXG5cdFx0XHRcdGxsbU91dHB1dDogbGxtUmVzdWx0LmxsbU91dHB1dFxuXHRcdFx0fSk7XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0Y29uc3QgbGxtT3V0cHV0ID0gbGxtUmVzdWx0LmxsbU91dHB1dCA/IHtcblx0XHRcdFx0XHQuLi5sbG1SZXN1bHQubGxtT3V0cHV0LFxuXHRcdFx0XHRcdHRva2VuVXNhZ2U6IHt9XG5cdFx0XHRcdH0gOiB2b2lkIDA7XG5cdFx0XHRcdGxsbVJlc3VsdHMucHVzaCh7XG5cdFx0XHRcdFx0Z2VuZXJhdGlvbnM6IFtnZW5MaXN0XSxcblx0XHRcdFx0XHRsbG1PdXRwdXRcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBsbG1SZXN1bHRzO1xuXHR9XG5cdC8qKiBAaWdub3JlICovXG5cdGFzeW5jIF9nZW5lcmF0ZVVuY2FjaGVkKHByb21wdHMsIHBhcnNlZE9wdGlvbnMsIGhhbmRsZWRPcHRpb25zLCBzdGFydGVkUnVuTWFuYWdlcnMpIHtcblx0XHRsZXQgcnVuTWFuYWdlcnM7XG5cdFx0aWYgKHN0YXJ0ZWRSdW5NYW5hZ2VycyAhPT0gdm9pZCAwICYmIHN0YXJ0ZWRSdW5NYW5hZ2Vycy5sZW5ndGggPT09IHByb21wdHMubGVuZ3RoKSBydW5NYW5hZ2VycyA9IHN0YXJ0ZWRSdW5NYW5hZ2Vycztcblx0XHRlbHNlIHtcblx0XHRcdGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBDYWxsYmFja01hbmFnZXIuY29uZmlndXJlKGhhbmRsZWRPcHRpb25zLmNhbGxiYWNrcywgdGhpcy5jYWxsYmFja3MsIGhhbmRsZWRPcHRpb25zLnRhZ3MsIHRoaXMudGFncywgaGFuZGxlZE9wdGlvbnMubWV0YWRhdGEsIHRoaXMubWV0YWRhdGEsIHsgdmVyYm9zZTogdGhpcy52ZXJib3NlIH0pO1xuXHRcdFx0Y29uc3QgZXh0cmEgPSB7XG5cdFx0XHRcdG9wdGlvbnM6IHBhcnNlZE9wdGlvbnMsXG5cdFx0XHRcdGludm9jYXRpb25fcGFyYW1zOiB0aGlzPy5pbnZvY2F0aW9uUGFyYW1zKHBhcnNlZE9wdGlvbnMpLFxuXHRcdFx0XHRiYXRjaF9zaXplOiBwcm9tcHRzLmxlbmd0aFxuXHRcdFx0fTtcblx0XHRcdHJ1bk1hbmFnZXJzID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlTExNU3RhcnQodGhpcy50b0pTT04oKSwgcHJvbXB0cywgaGFuZGxlZE9wdGlvbnMucnVuSWQsIHZvaWQgMCwgZXh0cmEsIHZvaWQgMCwgdm9pZCAwLCBoYW5kbGVkT3B0aW9ucz8ucnVuTmFtZSk7XG5cdFx0fVxuXHRcdGNvbnN0IGhhc1N0cmVhbWluZ0hhbmRsZXIgPSAhIXJ1bk1hbmFnZXJzPy5bMF0uaGFuZGxlcnMuZmluZChjYWxsYmFja0hhbmRsZXJQcmVmZXJzU3RyZWFtaW5nKTtcblx0XHRsZXQgb3V0cHV0O1xuXHRcdGlmIChoYXNTdHJlYW1pbmdIYW5kbGVyICYmIHByb21wdHMubGVuZ3RoID09PSAxICYmIHRoaXMuX3N0cmVhbVJlc3BvbnNlQ2h1bmtzICE9PSBCYXNlTExNLnByb3RvdHlwZS5fc3RyZWFtUmVzcG9uc2VDaHVua3MpIHRyeSB7XG5cdFx0XHRjb25zdCBzdHJlYW0gPSBhd2FpdCB0aGlzLl9zdHJlYW1SZXNwb25zZUNodW5rcyhwcm9tcHRzWzBdLCBwYXJzZWRPcHRpb25zLCBydW5NYW5hZ2Vycz8uWzBdKTtcblx0XHRcdGxldCBhZ2dyZWdhdGVkO1xuXHRcdFx0Zm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBzdHJlYW0pIGlmIChhZ2dyZWdhdGVkID09PSB2b2lkIDApIGFnZ3JlZ2F0ZWQgPSBjaHVuaztcblx0XHRcdGVsc2UgYWdncmVnYXRlZCA9IGNvbmNhdChhZ2dyZWdhdGVkLCBjaHVuayk7XG5cdFx0XHRpZiAoYWdncmVnYXRlZCA9PT0gdm9pZCAwKSB0aHJvdyBuZXcgRXJyb3IoXCJSZWNlaXZlZCBlbXB0eSByZXNwb25zZSBmcm9tIGNoYXQgbW9kZWwgY2FsbC5cIik7XG5cdFx0XHRvdXRwdXQgPSB7XG5cdFx0XHRcdGdlbmVyYXRpb25zOiBbW2FnZ3JlZ2F0ZWRdXSxcblx0XHRcdFx0bGxtT3V0cHV0OiB7fVxuXHRcdFx0fTtcblx0XHRcdGF3YWl0IHJ1bk1hbmFnZXJzPy5bMF0uaGFuZGxlTExNRW5kKG91dHB1dCk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0YXdhaXQgcnVuTWFuYWdlcnM/LlswXS5oYW5kbGVMTE1FcnJvcihlKTtcblx0XHRcdHRocm93IGU7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0b3V0cHV0ID0gYXdhaXQgdGhpcy5fZ2VuZXJhdGUocHJvbXB0cywgcGFyc2VkT3B0aW9ucywgcnVuTWFuYWdlcnM/LlswXSk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0YXdhaXQgUHJvbWlzZS5hbGwoKHJ1bk1hbmFnZXJzID8/IFtdKS5tYXAoKHJ1bk1hbmFnZXIpID0+IHJ1bk1hbmFnZXI/LmhhbmRsZUxMTUVycm9yKGVycikpKTtcblx0XHRcdFx0dGhyb3cgZXJyO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgZmxhdHRlbmVkT3V0cHV0cyA9IHRoaXMuX2ZsYXR0ZW5MTE1SZXN1bHQob3V0cHV0KTtcblx0XHRcdGF3YWl0IFByb21pc2UuYWxsKChydW5NYW5hZ2VycyA/PyBbXSkubWFwKChydW5NYW5hZ2VyLCBpKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVMTE1FbmQoZmxhdHRlbmVkT3V0cHV0c1tpXSkpKTtcblx0XHR9XG5cdFx0Y29uc3QgcnVuSWRzID0gcnVuTWFuYWdlcnM/Lm1hcCgobWFuYWdlcikgPT4gbWFuYWdlci5ydW5JZCkgfHwgdm9pZCAwO1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvdXRwdXQsIFJVTl9LRVksIHtcblx0XHRcdHZhbHVlOiBydW5JZHMgPyB7IHJ1bklkcyB9IDogdm9pZCAwLFxuXHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlXG5cdFx0fSk7XG5cdFx0cmV0dXJuIG91dHB1dDtcblx0fVxuXHRhc3luYyBfZ2VuZXJhdGVDYWNoZWQoeyBwcm9tcHRzLCBjYWNoZSwgbGxtU3RyaW5nS2V5LCBwYXJzZWRPcHRpb25zLCBoYW5kbGVkT3B0aW9ucywgcnVuSWQgfSkge1xuXHRcdGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBDYWxsYmFja01hbmFnZXIuY29uZmlndXJlKGhhbmRsZWRPcHRpb25zLmNhbGxiYWNrcywgdGhpcy5jYWxsYmFja3MsIGhhbmRsZWRPcHRpb25zLnRhZ3MsIHRoaXMudGFncywgaGFuZGxlZE9wdGlvbnMubWV0YWRhdGEsIHRoaXMubWV0YWRhdGEsIHsgdmVyYm9zZTogdGhpcy52ZXJib3NlIH0pO1xuXHRcdGNvbnN0IGV4dHJhID0ge1xuXHRcdFx0b3B0aW9uczogcGFyc2VkT3B0aW9ucyxcblx0XHRcdGludm9jYXRpb25fcGFyYW1zOiB0aGlzPy5pbnZvY2F0aW9uUGFyYW1zKHBhcnNlZE9wdGlvbnMpLFxuXHRcdFx0YmF0Y2hfc2l6ZTogcHJvbXB0cy5sZW5ndGhcblx0XHR9O1xuXHRcdGNvbnN0IHJ1bk1hbmFnZXJzID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlTExNU3RhcnQodGhpcy50b0pTT04oKSwgcHJvbXB0cywgcnVuSWQsIHZvaWQgMCwgZXh0cmEsIHZvaWQgMCwgdm9pZCAwLCBoYW5kbGVkT3B0aW9ucz8ucnVuTmFtZSk7XG5cdFx0Y29uc3QgbWlzc2luZ1Byb21wdEluZGljZXMgPSBbXTtcblx0XHRjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKHByb21wdHMubWFwKGFzeW5jIChwcm9tcHQsIGluZGV4KSA9PiB7XG5cdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBjYWNoZS5sb29rdXAocHJvbXB0LCBsbG1TdHJpbmdLZXkpO1xuXHRcdFx0aWYgKHJlc3VsdCA9PSBudWxsKSBtaXNzaW5nUHJvbXB0SW5kaWNlcy5wdXNoKGluZGV4KTtcblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fSkpO1xuXHRcdGNvbnN0IGNhY2hlZFJlc3VsdHMgPSByZXN1bHRzLm1hcCgocmVzdWx0LCBpbmRleCkgPT4gKHtcblx0XHRcdHJlc3VsdCxcblx0XHRcdHJ1bk1hbmFnZXI6IHJ1bk1hbmFnZXJzPy5baW5kZXhdXG5cdFx0fSkpLmZpbHRlcigoeyByZXN1bHQgfSkgPT4gcmVzdWx0LnN0YXR1cyA9PT0gXCJmdWxmaWxsZWRcIiAmJiByZXN1bHQudmFsdWUgIT0gbnVsbCB8fCByZXN1bHQuc3RhdHVzID09PSBcInJlamVjdGVkXCIpO1xuXHRcdGNvbnN0IGdlbmVyYXRpb25zID0gW107XG5cdFx0YXdhaXQgUHJvbWlzZS5hbGwoY2FjaGVkUmVzdWx0cy5tYXAoYXN5bmMgKHsgcmVzdWx0OiBwcm9taXNlUmVzdWx0LCBydW5NYW5hZ2VyIH0sIGkpID0+IHtcblx0XHRcdGlmIChwcm9taXNlUmVzdWx0LnN0YXR1cyA9PT0gXCJmdWxmaWxsZWRcIikge1xuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBwcm9taXNlUmVzdWx0LnZhbHVlO1xuXHRcdFx0XHRnZW5lcmF0aW9uc1tpXSA9IHJlc3VsdC5tYXAoKHJlc3VsdCQxKSA9PiB7XG5cdFx0XHRcdFx0cmVzdWx0JDEuZ2VuZXJhdGlvbkluZm8gPSB7XG5cdFx0XHRcdFx0XHQuLi5yZXN1bHQkMS5nZW5lcmF0aW9uSW5mbyxcblx0XHRcdFx0XHRcdHRva2VuVXNhZ2U6IHt9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0JDE7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAocmVzdWx0Lmxlbmd0aCkgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlTExNTmV3VG9rZW4ocmVzdWx0WzBdLnRleHQpO1xuXHRcdFx0XHRyZXR1cm4gcnVuTWFuYWdlcj8uaGFuZGxlTExNRW5kKHsgZ2VuZXJhdGlvbnM6IFtyZXN1bHRdIH0sIHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIHsgY2FjaGVkOiB0cnVlIH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlTExNRXJyb3IocHJvbWlzZVJlc3VsdC5yZWFzb24sIHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIHsgY2FjaGVkOiB0cnVlIH0pO1xuXHRcdFx0XHRyZXR1cm4gUHJvbWlzZS5yZWplY3QocHJvbWlzZVJlc3VsdC5yZWFzb24pO1xuXHRcdFx0fVxuXHRcdH0pKTtcblx0XHRjb25zdCBvdXRwdXQgPSB7XG5cdFx0XHRnZW5lcmF0aW9ucyxcblx0XHRcdG1pc3NpbmdQcm9tcHRJbmRpY2VzLFxuXHRcdFx0c3RhcnRlZFJ1bk1hbmFnZXJzOiBydW5NYW5hZ2Vyc1xuXHRcdH07XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG91dHB1dCwgUlVOX0tFWSwge1xuXHRcdFx0dmFsdWU6IHJ1bk1hbmFnZXJzID8geyBydW5JZHM6IHJ1bk1hbmFnZXJzPy5tYXAoKG1hbmFnZXIpID0+IG1hbmFnZXIucnVuSWQpIH0gOiB2b2lkIDAsXG5cdFx0XHRjb25maWd1cmFibGU6IHRydWVcblx0XHR9KTtcblx0XHRyZXR1cm4gb3V0cHV0O1xuXHR9XG5cdC8qKlxuXHQqIFJ1biB0aGUgTExNIG9uIHRoZSBnaXZlbiBwcm9tcHRzIGFuZCBpbnB1dCwgaGFuZGxpbmcgY2FjaGluZy5cblx0Ki9cblx0YXN5bmMgZ2VuZXJhdGUocHJvbXB0cywgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG5cdFx0aWYgKCFBcnJheS5pc0FycmF5KHByb21wdHMpKSB0aHJvdyBuZXcgRXJyb3IoXCJBcmd1bWVudCAncHJvbXB0cycgaXMgZXhwZWN0ZWQgdG8gYmUgYSBzdHJpbmdbXVwiKTtcblx0XHRsZXQgcGFyc2VkT3B0aW9ucztcblx0XHRpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zKSkgcGFyc2VkT3B0aW9ucyA9IHsgc3RvcDogb3B0aW9ucyB9O1xuXHRcdGVsc2UgcGFyc2VkT3B0aW9ucyA9IG9wdGlvbnM7XG5cdFx0Y29uc3QgW3J1bm5hYmxlQ29uZmlnLCBjYWxsT3B0aW9uc10gPSB0aGlzLl9zZXBhcmF0ZVJ1bm5hYmxlQ29uZmlnRnJvbUNhbGxPcHRpb25zQ29tcGF0KHBhcnNlZE9wdGlvbnMpO1xuXHRcdHJ1bm5hYmxlQ29uZmlnLmNhbGxiYWNrcyA9IHJ1bm5hYmxlQ29uZmlnLmNhbGxiYWNrcyA/PyBjYWxsYmFja3M7XG5cdFx0aWYgKCF0aGlzLmNhY2hlKSByZXR1cm4gdGhpcy5fZ2VuZXJhdGVVbmNhY2hlZChwcm9tcHRzLCBjYWxsT3B0aW9ucywgcnVubmFibGVDb25maWcpO1xuXHRcdGNvbnN0IHsgY2FjaGUgfSA9IHRoaXM7XG5cdFx0Y29uc3QgbGxtU3RyaW5nS2V5ID0gdGhpcy5fZ2V0U2VyaWFsaXplZENhY2hlS2V5UGFyYW1ldGVyc0ZvckNhbGwoY2FsbE9wdGlvbnMpO1xuXHRcdGNvbnN0IHsgZ2VuZXJhdGlvbnMsIG1pc3NpbmdQcm9tcHRJbmRpY2VzLCBzdGFydGVkUnVuTWFuYWdlcnMgfSA9IGF3YWl0IHRoaXMuX2dlbmVyYXRlQ2FjaGVkKHtcblx0XHRcdHByb21wdHMsXG5cdFx0XHRjYWNoZSxcblx0XHRcdGxsbVN0cmluZ0tleSxcblx0XHRcdHBhcnNlZE9wdGlvbnM6IGNhbGxPcHRpb25zLFxuXHRcdFx0aGFuZGxlZE9wdGlvbnM6IHJ1bm5hYmxlQ29uZmlnLFxuXHRcdFx0cnVuSWQ6IHJ1bm5hYmxlQ29uZmlnLnJ1bklkXG5cdFx0fSk7XG5cdFx0bGV0IGxsbU91dHB1dCA9IHt9O1xuXHRcdGlmIChtaXNzaW5nUHJvbXB0SW5kaWNlcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5fZ2VuZXJhdGVVbmNhY2hlZChtaXNzaW5nUHJvbXB0SW5kaWNlcy5tYXAoKGkpID0+IHByb21wdHNbaV0pLCBjYWxsT3B0aW9ucywgcnVubmFibGVDb25maWcsIHN0YXJ0ZWRSdW5NYW5hZ2VycyAhPT0gdm9pZCAwID8gbWlzc2luZ1Byb21wdEluZGljZXMubWFwKChpKSA9PiBzdGFydGVkUnVuTWFuYWdlcnM/LltpXSkgOiB2b2lkIDApO1xuXHRcdFx0YXdhaXQgUHJvbWlzZS5hbGwocmVzdWx0cy5nZW5lcmF0aW9ucy5tYXAoYXN5bmMgKGdlbmVyYXRpb24sIGluZGV4KSA9PiB7XG5cdFx0XHRcdGNvbnN0IHByb21wdEluZGV4ID0gbWlzc2luZ1Byb21wdEluZGljZXNbaW5kZXhdO1xuXHRcdFx0XHRnZW5lcmF0aW9uc1twcm9tcHRJbmRleF0gPSBnZW5lcmF0aW9uO1xuXHRcdFx0XHRyZXR1cm4gY2FjaGUudXBkYXRlKHByb21wdHNbcHJvbXB0SW5kZXhdLCBsbG1TdHJpbmdLZXksIGdlbmVyYXRpb24pO1xuXHRcdFx0fSkpO1xuXHRcdFx0bGxtT3V0cHV0ID0gcmVzdWx0cy5sbG1PdXRwdXQgPz8ge307XG5cdFx0fVxuXHRcdHJldHVybiB7XG5cdFx0XHRnZW5lcmF0aW9ucyxcblx0XHRcdGxsbU91dHB1dFxuXHRcdH07XG5cdH1cblx0LyoqXG5cdCogR2V0IHRoZSBpZGVudGlmeWluZyBwYXJhbWV0ZXJzIG9mIHRoZSBMTE0uXG5cdCovXG5cdF9pZGVudGlmeWluZ1BhcmFtcygpIHtcblx0XHRyZXR1cm4ge307XG5cdH1cblx0X21vZGVsVHlwZSgpIHtcblx0XHRyZXR1cm4gXCJiYXNlX2xsbVwiO1xuXHR9XG59O1xuLyoqXG4qIExMTSBjbGFzcyB0aGF0IHByb3ZpZGVzIGEgc2ltcGxlciBpbnRlcmZhY2UgdG8gc3ViY2xhc3MgdGhhbiB7QGxpbmsgQmFzZUxMTX0uXG4qXG4qIFJlcXVpcmVzIG9ubHkgaW1wbGVtZW50aW5nIGEgc2ltcGxlciB7QGxpbmsgX2NhbGx9IG1ldGhvZCBpbnN0ZWFkIG9mIHtAbGluayBfZ2VuZXJhdGV9LlxuKlxuKiBAYXVnbWVudHMgQmFzZUxMTVxuKi9cbnZhciBMTE0gPSBjbGFzcyBleHRlbmRzIEJhc2VMTE0ge1xuXHRhc3luYyBfZ2VuZXJhdGUocHJvbXB0cywgb3B0aW9ucywgcnVuTWFuYWdlcikge1xuXHRcdGNvbnN0IGdlbmVyYXRpb25zID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbXB0cy5tYXAoKHByb21wdCwgcHJvbXB0SW5kZXgpID0+IHRoaXMuX2NhbGwocHJvbXB0LCB7XG5cdFx0XHQuLi5vcHRpb25zLFxuXHRcdFx0cHJvbXB0SW5kZXhcblx0XHR9LCBydW5NYW5hZ2VyKS50aGVuKCh0ZXh0KSA9PiBbeyB0ZXh0IH1dKSkpO1xuXHRcdHJldHVybiB7IGdlbmVyYXRpb25zIH07XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQmFzZUxMTSwgTExNLCBsbG1zX2V4cG9ydHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxsbXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/language_models/llms.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/language_models/profile.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/language_models/profile.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   profile_exports: () => (/* binding */ profile_exports)\n/* harmony export */ });\n//#region src/language_models/profile.ts\nvar profile_exports = {};\n\n//#endregion\n\n//# sourceMappingURL=profile.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbGFuZ3VhZ2VfbW9kZWxzL3Byb2ZpbGUuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7O0FBRUE7QUFDMkI7QUFDM0IiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9sYW5ndWFnZV9tb2RlbHMvcHJvZmlsZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2xhbmd1YWdlX21vZGVscy9wcm9maWxlLnRzXG52YXIgcHJvZmlsZV9leHBvcnRzID0ge307XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgcHJvZmlsZV9leHBvcnRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9maWxlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/language_models/profile.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/language_models/utils.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/language_models/utils.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   castStandardMessageContent: () => (/* binding */ castStandardMessageContent),\n/* harmony export */   iife: () => (/* binding */ iife)\n/* harmony export */ });\n//#region src/language_models/utils.ts\nconst iife = (fn) => fn();\nfunction castStandardMessageContent(message) {\n\tconst Cls = message.constructor;\n\treturn new Cls({\n\t\t...message,\n\t\tcontent: message.contentBlocks,\n\t\tresponse_metadata: {\n\t\t\t...message.response_metadata,\n\t\t\toutput_version: \"v1\"\n\t\t}\n\t});\n}\n\n//#endregion\n\n//# sourceMappingURL=utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbGFuZ3VhZ2VfbW9kZWxzL3V0aWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUM0QztBQUM1QyIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2xhbmd1YWdlX21vZGVscy91dGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2xhbmd1YWdlX21vZGVscy91dGlscy50c1xuY29uc3QgaWlmZSA9IChmbikgPT4gZm4oKTtcbmZ1bmN0aW9uIGNhc3RTdGFuZGFyZE1lc3NhZ2VDb250ZW50KG1lc3NhZ2UpIHtcblx0Y29uc3QgQ2xzID0gbWVzc2FnZS5jb25zdHJ1Y3Rvcjtcblx0cmV0dXJuIG5ldyBDbHMoe1xuXHRcdC4uLm1lc3NhZ2UsXG5cdFx0Y29udGVudDogbWVzc2FnZS5jb250ZW50QmxvY2tzLFxuXHRcdHJlc3BvbnNlX21ldGFkYXRhOiB7XG5cdFx0XHQuLi5tZXNzYWdlLnJlc3BvbnNlX21ldGFkYXRhLFxuXHRcdFx0b3V0cHV0X3ZlcnNpb246IFwidjFcIlxuXHRcdH1cblx0fSk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY2FzdFN0YW5kYXJkTWVzc2FnZUNvbnRlbnQsIGlpZmUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWxzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/language_models/utils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/load/import_constants.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/load/import_constants.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   optionalImportEntrypoints: () => (/* binding */ optionalImportEntrypoints)\n/* harmony export */ });\n//#region src/load/import_constants.ts\n/** Auto-generated by import-constants plugin. Do not edit manually */\nconst optionalImportEntrypoints = [];\n\n//#endregion\n\n//# sourceMappingURL=import_constants.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbG9hZC9pbXBvcnRfY29uc3RhbnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7O0FBRUE7QUFDcUM7QUFDckMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9sb2FkL2ltcG9ydF9jb25zdGFudHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9sb2FkL2ltcG9ydF9jb25zdGFudHMudHNcbi8qKiBBdXRvLWdlbmVyYXRlZCBieSBpbXBvcnQtY29uc3RhbnRzIHBsdWdpbi4gRG8gbm90IGVkaXQgbWFudWFsbHkgKi9cbmNvbnN0IG9wdGlvbmFsSW1wb3J0RW50cnlwb2ludHMgPSBbXTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBvcHRpb25hbEltcG9ydEVudHJ5cG9pbnRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbXBvcnRfY29uc3RhbnRzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/load/import_constants.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/load/import_map.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/load/import_map.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   import_map_exports: () => (/* binding */ import_map_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _agents_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../agents.js */ \"(ssr)/./node_modules/@langchain/core/dist/agents.js\");\n/* harmony import */ var _serializable_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./serializable.js */ \"(ssr)/./node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _messages_tool_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../messages/tool.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/tool.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/env.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _callbacks_base_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../callbacks/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/callbacks/base.js\");\n/* harmony import */ var _tracers_base_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../tracers/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/tracers/base.js\");\n/* harmony import */ var _tracers_console_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../tracers/console.js */ \"(ssr)/./node_modules/@langchain/core/dist/tracers/console.js\");\n/* harmony import */ var _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../tracers/tracer_langchain.js */ \"(ssr)/./node_modules/@langchain/core/dist/tracers/tracer_langchain.js\");\n/* harmony import */ var _callbacks_promises_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../callbacks/promises.js */ \"(ssr)/./node_modules/@langchain/core/dist/callbacks/promises.js\");\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(ssr)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../singletons/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/singletons/index.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../utils/stream.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../tracers/log_stream.js */ \"(ssr)/./node_modules/@langchain/core/dist/tracers/log_stream.js\");\n/* harmony import */ var _outputs_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../outputs.js */ \"(ssr)/./node_modules/@langchain/core/dist/outputs.js\");\n/* harmony import */ var _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../utils/async_caller.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/async_caller.js\");\n/* harmony import */ var _utils_json_schema_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../utils/json_schema.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/json_schema.js\");\n/* harmony import */ var _runnables_graph_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../runnables/graph.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/graph.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../messages/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _chat_history_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../chat_history.js */ \"(ssr)/./node_modules/@langchain/core/dist/chat_history.js\");\n/* harmony import */ var _embeddings_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../embeddings.js */ \"(ssr)/./node_modules/@langchain/core/dist/embeddings.js\");\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../index.js */ \"(ssr)/./node_modules/@langchain/core/dist/index.js\");\n/* harmony import */ var _memory_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../memory.js */ \"(ssr)/./node_modules/@langchain/core/dist/memory.js\");\n/* harmony import */ var _prompt_values_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../prompt_values.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompt_values.js\");\n/* harmony import */ var _stores_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../stores.js */ \"(ssr)/./node_modules/@langchain/core/dist/stores.js\");\n/* harmony import */ var _retrievers_index_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../retrievers/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/retrievers/index.js\");\n/* harmony import */ var _vectorstores_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../vectorstores.js */ \"(ssr)/./node_modules/@langchain/core/dist/vectorstores.js\");\n/* harmony import */ var _utils_hash_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../utils/hash.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/hash.js\");\n/* harmony import */ var _caches_index_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../caches/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/caches/index.js\");\n/* harmony import */ var _document_loaders_base_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../document_loaders/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/document_loaders/base.js\");\n/* harmony import */ var _document_loaders_langsmith_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../document_loaders/langsmith.js */ \"(ssr)/./node_modules/@langchain/core/dist/document_loaders/langsmith.js\");\n/* harmony import */ var _documents_index_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../documents/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/documents/index.js\");\n/* harmony import */ var _example_selectors_index_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../example_selectors/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/example_selectors/index.js\");\n/* harmony import */ var _indexing_index_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../indexing/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/indexing/index.js\");\n/* harmony import */ var _utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ../utils/tiktoken.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/tiktoken.js\");\n/* harmony import */ var _language_models_base_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ../language_models/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/language_models/base.js\");\n/* harmony import */ var _language_models_chat_models_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ../language_models/chat_models.js */ \"(ssr)/./node_modules/@langchain/core/dist/language_models/chat_models.js\");\n/* harmony import */ var _language_models_llms_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ../language_models/llms.js */ \"(ssr)/./node_modules/@langchain/core/dist/language_models/llms.js\");\n/* harmony import */ var _language_models_profile_js__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ../language_models/profile.js */ \"(ssr)/./node_modules/@langchain/core/dist/language_models/profile.js\");\n/* harmony import */ var _runnables_index_js__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ../runnables/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/index.js\");\n/* harmony import */ var _utils_json_patch_js__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ../utils/json_patch.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/json_patch.js\");\n/* harmony import */ var _output_parsers_index_js__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ../output_parsers/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/index.js\");\n/* harmony import */ var _output_parsers_openai_functions_index_js__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ../output_parsers/openai_functions/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/openai_functions/index.js\");\n/* harmony import */ var _output_parsers_openai_tools_index_js__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ../output_parsers/openai_tools/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/openai_tools/index.js\");\n/* harmony import */ var _prompts_index_js__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ../prompts/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/index.js\");\n/* harmony import */ var _retrievers_document_compressors_index_js__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ../retrievers/document_compressors/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/retrievers/document_compressors/index.js\");\n/* harmony import */ var _structured_query_index_js__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ../structured_query/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/structured_query/index.js\");\n/* harmony import */ var _tools_index_js__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ../tools/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/tools/index.js\");\n/* harmony import */ var _tracers_run_collector_js__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ../tracers/run_collector.js */ \"(ssr)/./node_modules/@langchain/core/dist/tracers/run_collector.js\");\n/* harmony import */ var _types_stream_js__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ../types/stream.js */ \"(ssr)/./node_modules/@langchain/core/dist/types/stream.js\");\n/* harmony import */ var _utils_chunk_array_js__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ../utils/chunk_array.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/chunk_array.js\");\n/* harmony import */ var _utils_context_js__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ../utils/context.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/context.js\");\n/* harmony import */ var _utils_event_source_parse_js__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ../utils/event_source_parse.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/event_source_parse.js\");\n/* harmony import */ var _utils_format_js__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! ../utils/format.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/format.js\");\n/* harmony import */ var _utils_function_calling_js__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! ../utils/function_calling.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/function_calling.js\");\n/* harmony import */ var _utils_math_js__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! ../utils/math.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/math.js\");\n/* harmony import */ var _utils_testing_index_js__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! ../utils/testing/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/testing/index.js\");\n/* harmony import */ var _utils_types_index_js__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! ../utils/types/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/types/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/load/import_map.ts\nvar import_map_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(import_map_exports, {\n\tagents: () => _agents_js__WEBPACK_IMPORTED_MODULE_1__.agents_exports,\n\tcaches: () => _caches_index_js__WEBPACK_IMPORTED_MODULE_28__.caches_exports,\n\tcallbacks__base: () => _callbacks_base_js__WEBPACK_IMPORTED_MODULE_5__.base_exports,\n\tcallbacks__manager: () => _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_10__.manager_exports,\n\tcallbacks__promises: () => _callbacks_promises_js__WEBPACK_IMPORTED_MODULE_9__.promises_exports,\n\tchat_history: () => _chat_history_js__WEBPACK_IMPORTED_MODULE_19__.chat_history_exports,\n\tdocument_loaders__base: () => _document_loaders_base_js__WEBPACK_IMPORTED_MODULE_29__.base_exports,\n\tdocument_loaders__langsmith: () => _document_loaders_langsmith_js__WEBPACK_IMPORTED_MODULE_30__.langsmith_exports,\n\tdocuments: () => _documents_index_js__WEBPACK_IMPORTED_MODULE_31__.documents_exports,\n\tembeddings: () => _embeddings_js__WEBPACK_IMPORTED_MODULE_20__.embeddings_exports,\n\texample_selectors: () => _example_selectors_index_js__WEBPACK_IMPORTED_MODULE_32__.example_selectors_exports,\n\tindex: () => _index_js__WEBPACK_IMPORTED_MODULE_21__.src_exports,\n\tindexing: () => _indexing_index_js__WEBPACK_IMPORTED_MODULE_33__.indexing_exports,\n\tlanguage_models__base: () => _language_models_base_js__WEBPACK_IMPORTED_MODULE_35__.base_exports,\n\tlanguage_models__chat_models: () => _language_models_chat_models_js__WEBPACK_IMPORTED_MODULE_36__.chat_models_exports,\n\tlanguage_models__llms: () => _language_models_llms_js__WEBPACK_IMPORTED_MODULE_37__.llms_exports,\n\tlanguage_models__profile: () => _language_models_profile_js__WEBPACK_IMPORTED_MODULE_38__.profile_exports,\n\tload__serializable: () => _serializable_js__WEBPACK_IMPORTED_MODULE_2__.serializable_exports,\n\tmemory: () => _memory_js__WEBPACK_IMPORTED_MODULE_22__.memory_exports,\n\tmessages: () => _messages_index_js__WEBPACK_IMPORTED_MODULE_18__.messages_exports,\n\tmessages__tool: () => _messages_tool_js__WEBPACK_IMPORTED_MODULE_3__.tool_exports,\n\toutput_parsers: () => _output_parsers_index_js__WEBPACK_IMPORTED_MODULE_41__.output_parsers_exports,\n\toutput_parsers__openai_functions: () => _output_parsers_openai_functions_index_js__WEBPACK_IMPORTED_MODULE_42__.openai_functions_exports,\n\toutput_parsers__openai_tools: () => _output_parsers_openai_tools_index_js__WEBPACK_IMPORTED_MODULE_43__.openai_tools_exports,\n\toutputs: () => _outputs_js__WEBPACK_IMPORTED_MODULE_14__.outputs_exports,\n\tprompt_values: () => _prompt_values_js__WEBPACK_IMPORTED_MODULE_23__.prompt_values_exports,\n\tprompts: () => _prompts_index_js__WEBPACK_IMPORTED_MODULE_44__.prompts_exports,\n\tretrievers: () => _retrievers_index_js__WEBPACK_IMPORTED_MODULE_25__.retrievers_exports,\n\tretrievers__document_compressors: () => _retrievers_document_compressors_index_js__WEBPACK_IMPORTED_MODULE_45__.document_compressors_exports,\n\trunnables: () => _runnables_index_js__WEBPACK_IMPORTED_MODULE_39__.runnables_exports,\n\trunnables__graph: () => _runnables_graph_js__WEBPACK_IMPORTED_MODULE_17__.graph_exports,\n\tsingletons: () => _singletons_index_js__WEBPACK_IMPORTED_MODULE_11__.singletons_exports,\n\tstores: () => _stores_js__WEBPACK_IMPORTED_MODULE_24__.stores_exports,\n\tstructured_query: () => _structured_query_index_js__WEBPACK_IMPORTED_MODULE_46__.structured_query_exports,\n\ttools: () => _tools_index_js__WEBPACK_IMPORTED_MODULE_47__.tools_exports,\n\ttracers__base: () => _tracers_base_js__WEBPACK_IMPORTED_MODULE_6__.base_exports,\n\ttracers__console: () => _tracers_console_js__WEBPACK_IMPORTED_MODULE_7__.console_exports,\n\ttracers__log_stream: () => _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_13__.log_stream_exports,\n\ttracers__run_collector: () => _tracers_run_collector_js__WEBPACK_IMPORTED_MODULE_48__.run_collector_exports,\n\ttracers__tracer_langchain: () => _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_8__.tracer_langchain_exports,\n\ttypes__stream: () => _types_stream_js__WEBPACK_IMPORTED_MODULE_49__.stream_exports,\n\tutils__async_caller: () => _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_15__.async_caller_exports,\n\tutils__chunk_array: () => _utils_chunk_array_js__WEBPACK_IMPORTED_MODULE_50__.chunk_array_exports,\n\tutils__context: () => _utils_context_js__WEBPACK_IMPORTED_MODULE_51__.context_exports,\n\tutils__env: () => _utils_env_js__WEBPACK_IMPORTED_MODULE_4__.env_exports,\n\tutils__event_source_parse: () => _utils_event_source_parse_js__WEBPACK_IMPORTED_MODULE_52__.event_source_parse_exports,\n\tutils__format: () => _utils_format_js__WEBPACK_IMPORTED_MODULE_53__.format_exports,\n\tutils__function_calling: () => _utils_function_calling_js__WEBPACK_IMPORTED_MODULE_54__.function_calling_exports,\n\tutils__hash: () => _utils_hash_js__WEBPACK_IMPORTED_MODULE_27__.hash_exports,\n\tutils__json_patch: () => _utils_json_patch_js__WEBPACK_IMPORTED_MODULE_40__.json_patch_exports,\n\tutils__json_schema: () => _utils_json_schema_js__WEBPACK_IMPORTED_MODULE_16__.json_schema_exports,\n\tutils__math: () => _utils_math_js__WEBPACK_IMPORTED_MODULE_55__.math_exports,\n\tutils__stream: () => _utils_stream_js__WEBPACK_IMPORTED_MODULE_12__.stream_exports,\n\tutils__testing: () => _utils_testing_index_js__WEBPACK_IMPORTED_MODULE_56__.testing_exports,\n\tutils__tiktoken: () => _utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_34__.tiktoken_exports,\n\tutils__types: () => _utils_types_index_js__WEBPACK_IMPORTED_MODULE_57__.types_exports,\n\tvectorstores: () => _vectorstores_js__WEBPACK_IMPORTED_MODULE_26__.vectorstores_exports\n});\n\n//#endregion\n\n//# sourceMappingURL=import_map.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbG9hZC9pbXBvcnRfbWFwLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTJEO0FBQ2I7QUFDVztBQUNOO0FBQ0w7QUFDTTtBQUNnQjtBQUNaO0FBQ2tCO0FBQ2Q7QUFDRjtBQUNFO0FBQ1I7QUFDVTtBQUNkO0FBQ2dCO0FBQ0Y7QUFDUjtBQUNFO0FBQ0U7QUFDSjtBQUNaO0FBQ0k7QUFDYztBQUNkO0FBQ2M7QUFDRjtBQUNWO0FBQ0k7QUFDeUI7QUFDUjtBQUNYO0FBQ2dCO0FBQ2xCO0FBQ0E7QUFDb0I7QUFDSjtBQUNkO0FBQ007QUFDTjtBQUNFO0FBQ1E7QUFDbUI7QUFDUjtBQUN6QjtBQUNxQztBQUNuQjtBQUN0QjtBQUNrQjtBQUNJO0FBQ1Y7QUFDUjtBQUNzQjtBQUN4QjtBQUNvQjtBQUN4QjtBQUNZO0FBQ0o7O0FBRXhEO0FBQ0E7QUFDQSxzRUFBUTtBQUNSLGVBQWUsc0RBQWM7QUFDN0IsZUFBZSw2REFBYztBQUM3Qix3QkFBd0IsNERBQVk7QUFDcEMsMkJBQTJCLG1FQUFlO0FBQzFDLDRCQUE0QixvRUFBZ0I7QUFDNUMscUJBQXFCLG1FQUFvQjtBQUN6QywrQkFBK0Isb0VBQWM7QUFDN0Msb0NBQW9DLDhFQUFpQjtBQUNyRCxrQkFBa0IsbUVBQWlCO0FBQ25DLG1CQUFtQiwrREFBa0I7QUFDckMsMEJBQTBCLG1GQUF5QjtBQUNuRCxjQUFjLG1EQUFXO0FBQ3pCLGlCQUFpQixpRUFBZ0I7QUFDakMsOEJBQThCLG1FQUFjO0FBQzVDLHFDQUFxQyxpRkFBbUI7QUFDeEQsOEJBQThCLG1FQUFZO0FBQzFDLGlDQUFpQyx5RUFBZTtBQUNoRCwyQkFBMkIsa0VBQW9CO0FBQy9DLGVBQWUsdURBQWM7QUFDN0IsaUJBQWlCLGlFQUFnQjtBQUNqQyx1QkFBdUIsMkRBQVk7QUFDbkMsdUJBQXVCLDZFQUFzQjtBQUM3Qyx5Q0FBeUMsZ0dBQXdCO0FBQ2pFLHFDQUFxQyx3RkFBb0I7QUFDekQsZ0JBQWdCLHlEQUFlO0FBQy9CLHNCQUFzQixxRUFBcUI7QUFDM0MsZ0JBQWdCLCtEQUFlO0FBQy9CLG1CQUFtQixxRUFBa0I7QUFDckMseUNBQXlDLG9HQUE0QjtBQUNyRSxrQkFBa0IsbUVBQWlCO0FBQ25DLHlCQUF5QiwrREFBYTtBQUN0QyxtQkFBbUIscUVBQWtCO0FBQ3JDLGVBQWUsdURBQWM7QUFDN0IseUJBQXlCLGlGQUF3QjtBQUNqRCxjQUFjLDJEQUFhO0FBQzNCLHNCQUFzQiwwREFBYztBQUNwQyx5QkFBeUIsZ0VBQWU7QUFDeEMsNEJBQTRCLHVFQUFrQjtBQUM5QywrQkFBK0IsNkVBQXFCO0FBQ3BELGtDQUFrQyxrRkFBd0I7QUFDMUQsc0JBQXNCLDZEQUFnQjtBQUN0Qyw0QkFBNEIseUVBQW9CO0FBQ2hELDJCQUEyQix1RUFBbUI7QUFDOUMsdUJBQXVCLCtEQUFlO0FBQ3RDLG1CQUFtQixzREFBVztBQUM5QixrQ0FBa0MscUZBQTBCO0FBQzVELHNCQUFzQiw2REFBYztBQUNwQyxnQ0FBZ0MsaUZBQXdCO0FBQ3hELG9CQUFvQix5REFBWTtBQUNoQywwQkFBMEIscUVBQWtCO0FBQzVDLDJCQUEyQix1RUFBbUI7QUFDOUMsb0JBQW9CLHlEQUFZO0FBQ2hDLHNCQUFzQiw2REFBYztBQUNwQyx1QkFBdUIscUVBQWU7QUFDdEMsd0JBQXdCLGlFQUFnQjtBQUN4QyxxQkFBcUIsaUVBQWE7QUFDbEMscUJBQXFCLG1FQUFvQjtBQUN6QyxDQUFDOztBQUVEO0FBQzhCO0FBQzlCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbG9hZC9pbXBvcnRfbWFwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IGFnZW50c19leHBvcnRzIH0gZnJvbSBcIi4uL2FnZW50cy5qc1wiO1xuaW1wb3J0IHsgc2VyaWFsaXphYmxlX2V4cG9ydHMgfSBmcm9tIFwiLi9zZXJpYWxpemFibGUuanNcIjtcbmltcG9ydCB7IHRvb2xfZXhwb3J0cyB9IGZyb20gXCIuLi9tZXNzYWdlcy90b29sLmpzXCI7XG5pbXBvcnQgeyBlbnZfZXhwb3J0cyB9IGZyb20gXCIuLi91dGlscy9lbnYuanNcIjtcbmltcG9ydCB7IGJhc2VfZXhwb3J0cyB9IGZyb20gXCIuLi9jYWxsYmFja3MvYmFzZS5qc1wiO1xuaW1wb3J0IHsgYmFzZV9leHBvcnRzIGFzIGJhc2VfZXhwb3J0cyQxIH0gZnJvbSBcIi4uL3RyYWNlcnMvYmFzZS5qc1wiO1xuaW1wb3J0IHsgY29uc29sZV9leHBvcnRzIH0gZnJvbSBcIi4uL3RyYWNlcnMvY29uc29sZS5qc1wiO1xuaW1wb3J0IHsgdHJhY2VyX2xhbmdjaGFpbl9leHBvcnRzIH0gZnJvbSBcIi4uL3RyYWNlcnMvdHJhY2VyX2xhbmdjaGFpbi5qc1wiO1xuaW1wb3J0IHsgcHJvbWlzZXNfZXhwb3J0cyB9IGZyb20gXCIuLi9jYWxsYmFja3MvcHJvbWlzZXMuanNcIjtcbmltcG9ydCB7IG1hbmFnZXJfZXhwb3J0cyB9IGZyb20gXCIuLi9jYWxsYmFja3MvbWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgc2luZ2xldG9uc19leHBvcnRzIH0gZnJvbSBcIi4uL3NpbmdsZXRvbnMvaW5kZXguanNcIjtcbmltcG9ydCB7IHN0cmVhbV9leHBvcnRzIH0gZnJvbSBcIi4uL3V0aWxzL3N0cmVhbS5qc1wiO1xuaW1wb3J0IHsgbG9nX3N0cmVhbV9leHBvcnRzIH0gZnJvbSBcIi4uL3RyYWNlcnMvbG9nX3N0cmVhbS5qc1wiO1xuaW1wb3J0IHsgb3V0cHV0c19leHBvcnRzIH0gZnJvbSBcIi4uL291dHB1dHMuanNcIjtcbmltcG9ydCB7IGFzeW5jX2NhbGxlcl9leHBvcnRzIH0gZnJvbSBcIi4uL3V0aWxzL2FzeW5jX2NhbGxlci5qc1wiO1xuaW1wb3J0IHsganNvbl9zY2hlbWFfZXhwb3J0cyB9IGZyb20gXCIuLi91dGlscy9qc29uX3NjaGVtYS5qc1wiO1xuaW1wb3J0IHsgZ3JhcGhfZXhwb3J0cyB9IGZyb20gXCIuLi9ydW5uYWJsZXMvZ3JhcGguanNcIjtcbmltcG9ydCB7IG1lc3NhZ2VzX2V4cG9ydHMgfSBmcm9tIFwiLi4vbWVzc2FnZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IGNoYXRfaGlzdG9yeV9leHBvcnRzIH0gZnJvbSBcIi4uL2NoYXRfaGlzdG9yeS5qc1wiO1xuaW1wb3J0IHsgZW1iZWRkaW5nc19leHBvcnRzIH0gZnJvbSBcIi4uL2VtYmVkZGluZ3MuanNcIjtcbmltcG9ydCB7IHNyY19leHBvcnRzIH0gZnJvbSBcIi4uL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBtZW1vcnlfZXhwb3J0cyB9IGZyb20gXCIuLi9tZW1vcnkuanNcIjtcbmltcG9ydCB7IHByb21wdF92YWx1ZXNfZXhwb3J0cyB9IGZyb20gXCIuLi9wcm9tcHRfdmFsdWVzLmpzXCI7XG5pbXBvcnQgeyBzdG9yZXNfZXhwb3J0cyB9IGZyb20gXCIuLi9zdG9yZXMuanNcIjtcbmltcG9ydCB7IHJldHJpZXZlcnNfZXhwb3J0cyB9IGZyb20gXCIuLi9yZXRyaWV2ZXJzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyB2ZWN0b3JzdG9yZXNfZXhwb3J0cyB9IGZyb20gXCIuLi92ZWN0b3JzdG9yZXMuanNcIjtcbmltcG9ydCB7IGhhc2hfZXhwb3J0cyB9IGZyb20gXCIuLi91dGlscy9oYXNoLmpzXCI7XG5pbXBvcnQgeyBjYWNoZXNfZXhwb3J0cyB9IGZyb20gXCIuLi9jYWNoZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IGJhc2VfZXhwb3J0cyBhcyBiYXNlX2V4cG9ydHMkMiB9IGZyb20gXCIuLi9kb2N1bWVudF9sb2FkZXJzL2Jhc2UuanNcIjtcbmltcG9ydCB7IGxhbmdzbWl0aF9leHBvcnRzIH0gZnJvbSBcIi4uL2RvY3VtZW50X2xvYWRlcnMvbGFuZ3NtaXRoLmpzXCI7XG5pbXBvcnQgeyBkb2N1bWVudHNfZXhwb3J0cyB9IGZyb20gXCIuLi9kb2N1bWVudHMvaW5kZXguanNcIjtcbmltcG9ydCB7IGV4YW1wbGVfc2VsZWN0b3JzX2V4cG9ydHMgfSBmcm9tIFwiLi4vZXhhbXBsZV9zZWxlY3RvcnMvaW5kZXguanNcIjtcbmltcG9ydCB7IGluZGV4aW5nX2V4cG9ydHMgfSBmcm9tIFwiLi4vaW5kZXhpbmcvaW5kZXguanNcIjtcbmltcG9ydCB7IHRpa3Rva2VuX2V4cG9ydHMgfSBmcm9tIFwiLi4vdXRpbHMvdGlrdG9rZW4uanNcIjtcbmltcG9ydCB7IGJhc2VfZXhwb3J0cyBhcyBiYXNlX2V4cG9ydHMkMyB9IGZyb20gXCIuLi9sYW5ndWFnZV9tb2RlbHMvYmFzZS5qc1wiO1xuaW1wb3J0IHsgY2hhdF9tb2RlbHNfZXhwb3J0cyB9IGZyb20gXCIuLi9sYW5ndWFnZV9tb2RlbHMvY2hhdF9tb2RlbHMuanNcIjtcbmltcG9ydCB7IGxsbXNfZXhwb3J0cyB9IGZyb20gXCIuLi9sYW5ndWFnZV9tb2RlbHMvbGxtcy5qc1wiO1xuaW1wb3J0IHsgcHJvZmlsZV9leHBvcnRzIH0gZnJvbSBcIi4uL2xhbmd1YWdlX21vZGVscy9wcm9maWxlLmpzXCI7XG5pbXBvcnQgeyBydW5uYWJsZXNfZXhwb3J0cyB9IGZyb20gXCIuLi9ydW5uYWJsZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IGpzb25fcGF0Y2hfZXhwb3J0cyB9IGZyb20gXCIuLi91dGlscy9qc29uX3BhdGNoLmpzXCI7XG5pbXBvcnQgeyBvdXRwdXRfcGFyc2Vyc19leHBvcnRzIH0gZnJvbSBcIi4uL291dHB1dF9wYXJzZXJzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBvcGVuYWlfZnVuY3Rpb25zX2V4cG9ydHMgfSBmcm9tIFwiLi4vb3V0cHV0X3BhcnNlcnMvb3BlbmFpX2Z1bmN0aW9ucy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgb3BlbmFpX3Rvb2xzX2V4cG9ydHMgfSBmcm9tIFwiLi4vb3V0cHV0X3BhcnNlcnMvb3BlbmFpX3Rvb2xzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBwcm9tcHRzX2V4cG9ydHMgfSBmcm9tIFwiLi4vcHJvbXB0cy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgZG9jdW1lbnRfY29tcHJlc3NvcnNfZXhwb3J0cyB9IGZyb20gXCIuLi9yZXRyaWV2ZXJzL2RvY3VtZW50X2NvbXByZXNzb3JzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBzdHJ1Y3R1cmVkX3F1ZXJ5X2V4cG9ydHMgfSBmcm9tIFwiLi4vc3RydWN0dXJlZF9xdWVyeS9pbmRleC5qc1wiO1xuaW1wb3J0IHsgdG9vbHNfZXhwb3J0cyB9IGZyb20gXCIuLi90b29scy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgcnVuX2NvbGxlY3Rvcl9leHBvcnRzIH0gZnJvbSBcIi4uL3RyYWNlcnMvcnVuX2NvbGxlY3Rvci5qc1wiO1xuaW1wb3J0IHsgc3RyZWFtX2V4cG9ydHMgYXMgc3RyZWFtX2V4cG9ydHMkMSB9IGZyb20gXCIuLi90eXBlcy9zdHJlYW0uanNcIjtcbmltcG9ydCB7IGNodW5rX2FycmF5X2V4cG9ydHMgfSBmcm9tIFwiLi4vdXRpbHMvY2h1bmtfYXJyYXkuanNcIjtcbmltcG9ydCB7IGNvbnRleHRfZXhwb3J0cyB9IGZyb20gXCIuLi91dGlscy9jb250ZXh0LmpzXCI7XG5pbXBvcnQgeyBldmVudF9zb3VyY2VfcGFyc2VfZXhwb3J0cyB9IGZyb20gXCIuLi91dGlscy9ldmVudF9zb3VyY2VfcGFyc2UuanNcIjtcbmltcG9ydCB7IGZvcm1hdF9leHBvcnRzIH0gZnJvbSBcIi4uL3V0aWxzL2Zvcm1hdC5qc1wiO1xuaW1wb3J0IHsgZnVuY3Rpb25fY2FsbGluZ19leHBvcnRzIH0gZnJvbSBcIi4uL3V0aWxzL2Z1bmN0aW9uX2NhbGxpbmcuanNcIjtcbmltcG9ydCB7IG1hdGhfZXhwb3J0cyB9IGZyb20gXCIuLi91dGlscy9tYXRoLmpzXCI7XG5pbXBvcnQgeyB0ZXN0aW5nX2V4cG9ydHMgfSBmcm9tIFwiLi4vdXRpbHMvdGVzdGluZy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgdHlwZXNfZXhwb3J0cyB9IGZyb20gXCIuLi91dGlscy90eXBlcy9pbmRleC5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL2xvYWQvaW1wb3J0X21hcC50c1xudmFyIGltcG9ydF9tYXBfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQoaW1wb3J0X21hcF9leHBvcnRzLCB7XG5cdGFnZW50czogKCkgPT4gYWdlbnRzX2V4cG9ydHMsXG5cdGNhY2hlczogKCkgPT4gY2FjaGVzX2V4cG9ydHMsXG5cdGNhbGxiYWNrc19fYmFzZTogKCkgPT4gYmFzZV9leHBvcnRzLFxuXHRjYWxsYmFja3NfX21hbmFnZXI6ICgpID0+IG1hbmFnZXJfZXhwb3J0cyxcblx0Y2FsbGJhY2tzX19wcm9taXNlczogKCkgPT4gcHJvbWlzZXNfZXhwb3J0cyxcblx0Y2hhdF9oaXN0b3J5OiAoKSA9PiBjaGF0X2hpc3RvcnlfZXhwb3J0cyxcblx0ZG9jdW1lbnRfbG9hZGVyc19fYmFzZTogKCkgPT4gYmFzZV9leHBvcnRzJDIsXG5cdGRvY3VtZW50X2xvYWRlcnNfX2xhbmdzbWl0aDogKCkgPT4gbGFuZ3NtaXRoX2V4cG9ydHMsXG5cdGRvY3VtZW50czogKCkgPT4gZG9jdW1lbnRzX2V4cG9ydHMsXG5cdGVtYmVkZGluZ3M6ICgpID0+IGVtYmVkZGluZ3NfZXhwb3J0cyxcblx0ZXhhbXBsZV9zZWxlY3RvcnM6ICgpID0+IGV4YW1wbGVfc2VsZWN0b3JzX2V4cG9ydHMsXG5cdGluZGV4OiAoKSA9PiBzcmNfZXhwb3J0cyxcblx0aW5kZXhpbmc6ICgpID0+IGluZGV4aW5nX2V4cG9ydHMsXG5cdGxhbmd1YWdlX21vZGVsc19fYmFzZTogKCkgPT4gYmFzZV9leHBvcnRzJDMsXG5cdGxhbmd1YWdlX21vZGVsc19fY2hhdF9tb2RlbHM6ICgpID0+IGNoYXRfbW9kZWxzX2V4cG9ydHMsXG5cdGxhbmd1YWdlX21vZGVsc19fbGxtczogKCkgPT4gbGxtc19leHBvcnRzLFxuXHRsYW5ndWFnZV9tb2RlbHNfX3Byb2ZpbGU6ICgpID0+IHByb2ZpbGVfZXhwb3J0cyxcblx0bG9hZF9fc2VyaWFsaXphYmxlOiAoKSA9PiBzZXJpYWxpemFibGVfZXhwb3J0cyxcblx0bWVtb3J5OiAoKSA9PiBtZW1vcnlfZXhwb3J0cyxcblx0bWVzc2FnZXM6ICgpID0+IG1lc3NhZ2VzX2V4cG9ydHMsXG5cdG1lc3NhZ2VzX190b29sOiAoKSA9PiB0b29sX2V4cG9ydHMsXG5cdG91dHB1dF9wYXJzZXJzOiAoKSA9PiBvdXRwdXRfcGFyc2Vyc19leHBvcnRzLFxuXHRvdXRwdXRfcGFyc2Vyc19fb3BlbmFpX2Z1bmN0aW9uczogKCkgPT4gb3BlbmFpX2Z1bmN0aW9uc19leHBvcnRzLFxuXHRvdXRwdXRfcGFyc2Vyc19fb3BlbmFpX3Rvb2xzOiAoKSA9PiBvcGVuYWlfdG9vbHNfZXhwb3J0cyxcblx0b3V0cHV0czogKCkgPT4gb3V0cHV0c19leHBvcnRzLFxuXHRwcm9tcHRfdmFsdWVzOiAoKSA9PiBwcm9tcHRfdmFsdWVzX2V4cG9ydHMsXG5cdHByb21wdHM6ICgpID0+IHByb21wdHNfZXhwb3J0cyxcblx0cmV0cmlldmVyczogKCkgPT4gcmV0cmlldmVyc19leHBvcnRzLFxuXHRyZXRyaWV2ZXJzX19kb2N1bWVudF9jb21wcmVzc29yczogKCkgPT4gZG9jdW1lbnRfY29tcHJlc3NvcnNfZXhwb3J0cyxcblx0cnVubmFibGVzOiAoKSA9PiBydW5uYWJsZXNfZXhwb3J0cyxcblx0cnVubmFibGVzX19ncmFwaDogKCkgPT4gZ3JhcGhfZXhwb3J0cyxcblx0c2luZ2xldG9uczogKCkgPT4gc2luZ2xldG9uc19leHBvcnRzLFxuXHRzdG9yZXM6ICgpID0+IHN0b3Jlc19leHBvcnRzLFxuXHRzdHJ1Y3R1cmVkX3F1ZXJ5OiAoKSA9PiBzdHJ1Y3R1cmVkX3F1ZXJ5X2V4cG9ydHMsXG5cdHRvb2xzOiAoKSA9PiB0b29sc19leHBvcnRzLFxuXHR0cmFjZXJzX19iYXNlOiAoKSA9PiBiYXNlX2V4cG9ydHMkMSxcblx0dHJhY2Vyc19fY29uc29sZTogKCkgPT4gY29uc29sZV9leHBvcnRzLFxuXHR0cmFjZXJzX19sb2dfc3RyZWFtOiAoKSA9PiBsb2dfc3RyZWFtX2V4cG9ydHMsXG5cdHRyYWNlcnNfX3J1bl9jb2xsZWN0b3I6ICgpID0+IHJ1bl9jb2xsZWN0b3JfZXhwb3J0cyxcblx0dHJhY2Vyc19fdHJhY2VyX2xhbmdjaGFpbjogKCkgPT4gdHJhY2VyX2xhbmdjaGFpbl9leHBvcnRzLFxuXHR0eXBlc19fc3RyZWFtOiAoKSA9PiBzdHJlYW1fZXhwb3J0cyQxLFxuXHR1dGlsc19fYXN5bmNfY2FsbGVyOiAoKSA9PiBhc3luY19jYWxsZXJfZXhwb3J0cyxcblx0dXRpbHNfX2NodW5rX2FycmF5OiAoKSA9PiBjaHVua19hcnJheV9leHBvcnRzLFxuXHR1dGlsc19fY29udGV4dDogKCkgPT4gY29udGV4dF9leHBvcnRzLFxuXHR1dGlsc19fZW52OiAoKSA9PiBlbnZfZXhwb3J0cyxcblx0dXRpbHNfX2V2ZW50X3NvdXJjZV9wYXJzZTogKCkgPT4gZXZlbnRfc291cmNlX3BhcnNlX2V4cG9ydHMsXG5cdHV0aWxzX19mb3JtYXQ6ICgpID0+IGZvcm1hdF9leHBvcnRzLFxuXHR1dGlsc19fZnVuY3Rpb25fY2FsbGluZzogKCkgPT4gZnVuY3Rpb25fY2FsbGluZ19leHBvcnRzLFxuXHR1dGlsc19faGFzaDogKCkgPT4gaGFzaF9leHBvcnRzLFxuXHR1dGlsc19fanNvbl9wYXRjaDogKCkgPT4ganNvbl9wYXRjaF9leHBvcnRzLFxuXHR1dGlsc19fanNvbl9zY2hlbWE6ICgpID0+IGpzb25fc2NoZW1hX2V4cG9ydHMsXG5cdHV0aWxzX19tYXRoOiAoKSA9PiBtYXRoX2V4cG9ydHMsXG5cdHV0aWxzX19zdHJlYW06ICgpID0+IHN0cmVhbV9leHBvcnRzLFxuXHR1dGlsc19fdGVzdGluZzogKCkgPT4gdGVzdGluZ19leHBvcnRzLFxuXHR1dGlsc19fdGlrdG9rZW46ICgpID0+IHRpa3Rva2VuX2V4cG9ydHMsXG5cdHV0aWxzX190eXBlczogKCkgPT4gdHlwZXNfZXhwb3J0cyxcblx0dmVjdG9yc3RvcmVzOiAoKSA9PiB2ZWN0b3JzdG9yZXNfZXhwb3J0c1xufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgaW1wb3J0X21hcF9leHBvcnRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbXBvcnRfbWFwLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/load/import_map.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/load/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/load/index.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   load: () => (/* binding */ load)\n/* harmony export */ });\n/* harmony import */ var _map_keys_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./map_keys.js */ \"(ssr)/./node_modules/@langchain/core/dist/load/map_keys.js\");\n/* harmony import */ var _validation_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./validation.js */ \"(ssr)/./node_modules/@langchain/core/dist/load/validation.js\");\n/* harmony import */ var _serializable_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./serializable.js */ \"(ssr)/./node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/env.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _import_constants_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./import_constants.js */ \"(ssr)/./node_modules/@langchain/core/dist/load/import_constants.js\");\n/* harmony import */ var _import_map_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./import_map.js */ \"(ssr)/./node_modules/@langchain/core/dist/load/import_map.js\");\n\n\n\n\n\n\n\n//#region src/load/index.ts\n/**\n* Default maximum recursion depth for deserialization.\n* This provides protection against DoS attacks via deeply nested structures.\n*/\nconst DEFAULT_MAX_DEPTH = 50;\nfunction combineAliasesAndInvert(constructor) {\n\tconst aliases = {};\n\tfor (let current = constructor; current && current.prototype; current = Object.getPrototypeOf(current)) Object.assign(aliases, Reflect.get(current.prototype, \"lc_aliases\"));\n\treturn Object.entries(aliases).reduce((acc, [key, value]) => {\n\t\tacc[value] = key;\n\t\treturn acc;\n\t}, {});\n}\n/**\n* Recursively revive a value, handling escape markers and LC objects.\n*\n* This function handles:\n* 1. Escaped dicts - unwrapped and returned as plain objects\n* 2. LC secret objects - resolved from secretsMap or env\n* 3. LC constructor objects - instantiated\n* 4. Regular objects/arrays - recursed into\n*/\nasync function reviver(value) {\n\tconst { optionalImportsMap, optionalImportEntrypoints: optionalImportEntrypoints$1, importMap, secretsMap, secretsFromEnv, path, depth, maxDepth } = this;\n\tconst pathStr = path.join(\".\");\n\tif (depth > maxDepth) throw new Error(`Maximum recursion depth (${maxDepth}) exceeded during deserialization. This may indicate a malicious payload or you may need to increase maxDepth.`);\n\tif (typeof value !== \"object\" || value == null) return value;\n\tif (Array.isArray(value)) return Promise.all(value.map((v, i) => reviver.call({\n\t\t...this,\n\t\tpath: [...path, `${i}`],\n\t\tdepth: depth + 1\n\t}, v)));\n\tconst record = value;\n\tif ((0,_validation_js__WEBPACK_IMPORTED_MODULE_1__.isEscapedObject)(record)) return (0,_validation_js__WEBPACK_IMPORTED_MODULE_1__.unescapeValue)(record);\n\tif (\"lc\" in record && \"type\" in record && \"id\" in record && record.lc === 1 && record.type === \"secret\") {\n\t\tconst serialized = record;\n\t\tconst [key] = serialized.id;\n\t\tif (key in secretsMap) return secretsMap[key];\n\t\telse if (secretsFromEnv) {\n\t\t\tconst secretValueInEnv = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_3__.getEnvironmentVariable)(key);\n\t\t\tif (secretValueInEnv) return secretValueInEnv;\n\t\t}\n\t\tthrow new Error(`Missing secret \"${key}\" at ${pathStr}`);\n\t}\n\tif (\"lc\" in record && \"type\" in record && \"id\" in record && record.lc === 1 && record.type === \"not_implemented\") {\n\t\tconst serialized = record;\n\t\tconst str = JSON.stringify(serialized);\n\t\tthrow new Error(`Trying to load an object that doesn't implement serialization: ${pathStr} -> ${str}`);\n\t}\n\tif (\"lc\" in record && \"type\" in record && \"id\" in record && \"kwargs\" in record && record.lc === 1 && record.type === \"constructor\") {\n\t\tconst serialized = record;\n\t\tconst str = JSON.stringify(serialized);\n\t\tconst [name, ...namespaceReverse] = serialized.id.slice().reverse();\n\t\tconst namespace = namespaceReverse.reverse();\n\t\tconst importMaps = {\n\t\t\tlangchain_core: _import_map_js__WEBPACK_IMPORTED_MODULE_5__.import_map_exports,\n\t\t\tlangchain: importMap\n\t\t};\n\t\tlet module = null;\n\t\tconst optionalImportNamespaceAliases = [namespace.join(\"/\")];\n\t\tif (namespace[0] === \"langchain_community\") optionalImportNamespaceAliases.push([\"langchain\", ...namespace.slice(1)].join(\"/\"));\n\t\tconst matchingNamespaceAlias = optionalImportNamespaceAliases.find((alias) => alias in optionalImportsMap);\n\t\tif (_import_constants_js__WEBPACK_IMPORTED_MODULE_4__.optionalImportEntrypoints.concat(optionalImportEntrypoints$1).includes(namespace.join(\"/\")) || matchingNamespaceAlias) if (matchingNamespaceAlias !== void 0) module = await optionalImportsMap[matchingNamespaceAlias];\n\t\telse throw new Error(`Missing key \"${namespace.join(\"/\")}\" for ${pathStr} in load(optionalImportsMap={})`);\n\t\telse {\n\t\t\tlet finalImportMap;\n\t\t\tif (namespace[0] === \"langchain\" || namespace[0] === \"langchain_core\") {\n\t\t\t\tfinalImportMap = importMaps[namespace[0]];\n\t\t\t\tnamespace.shift();\n\t\t\t} else throw new Error(`Invalid namespace: ${pathStr} -> ${str}`);\n\t\t\tif (namespace.length === 0) throw new Error(`Invalid namespace: ${pathStr} -> ${str}`);\n\t\t\tlet importMapKey;\n\t\t\tdo {\n\t\t\t\timportMapKey = namespace.join(\"__\");\n\t\t\t\tif (importMapKey in finalImportMap) break;\n\t\t\t\telse namespace.pop();\n\t\t\t} while (namespace.length > 0);\n\t\t\tif (importMapKey in finalImportMap) module = finalImportMap[importMapKey];\n\t\t}\n\t\tif (typeof module !== \"object\" || module === null) throw new Error(`Invalid namespace: ${pathStr} -> ${str}`);\n\t\tconst builder = module[name] ?? Object.values(module).find((v) => typeof v === \"function\" && (0,_serializable_js__WEBPACK_IMPORTED_MODULE_2__.get_lc_unique_name)(v) === name);\n\t\tif (typeof builder !== \"function\") throw new Error(`Invalid identifer: ${pathStr} -> ${str}`);\n\t\tconst kwargs = await reviver.call({\n\t\t\t...this,\n\t\t\tpath: [...path, \"kwargs\"],\n\t\t\tdepth: depth + 1\n\t\t}, serialized.kwargs);\n\t\tconst instance = new builder((0,_map_keys_js__WEBPACK_IMPORTED_MODULE_0__.mapKeys)(kwargs, _map_keys_js__WEBPACK_IMPORTED_MODULE_0__.keyFromJson, combineAliasesAndInvert(builder)));\n\t\tObject.defineProperty(instance.constructor, \"name\", { value: name });\n\t\treturn instance;\n\t}\n\tconst result = {};\n\tfor (const [key, val] of Object.entries(record)) result[key] = await reviver.call({\n\t\t...this,\n\t\tpath: [...path, key],\n\t\tdepth: depth + 1\n\t}, val);\n\treturn result;\n}\n/**\n* Load a LangChain object from a JSON string.\n*\n* @param text - The JSON string to parse and load.\n* @param options - Options for loading.\n* @returns The loaded LangChain object.\n*\n* @example\n* ```typescript\n* import { load } from \"@langchain/core/load\";\n* import { AIMessage } from \"@langchain/core/messages\";\n*\n* // Basic usage - secrets must be provided explicitly\n* const msg = await load<AIMessage>(jsonString);\n*\n* // With secrets from a map\n* const msg = await load<AIMessage>(jsonString, {\n*   secretsMap: { OPENAI_API_KEY: \"sk-...\" }\n* });\n*\n* // Allow loading secrets from environment (use with caution)\n* const msg = await load<AIMessage>(jsonString, {\n*   secretsFromEnv: true\n* });\n* ```\n*/\nasync function load(text, options) {\n\tconst json = JSON.parse(text);\n\tconst context = {\n\t\toptionalImportsMap: options?.optionalImportsMap ?? {},\n\t\toptionalImportEntrypoints: options?.optionalImportEntrypoints ?? [],\n\t\tsecretsMap: options?.secretsMap ?? {},\n\t\tsecretsFromEnv: options?.secretsFromEnv ?? false,\n\t\timportMap: options?.importMap ?? {},\n\t\tpath: [\"$\"],\n\t\tdepth: 0,\n\t\tmaxDepth: options?.maxDepth ?? DEFAULT_MAX_DEPTH\n\t};\n\treturn reviver.call(context, json);\n}\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbG9hZC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXFEO0FBQ1k7QUFDVjtBQUNFO0FBQ1M7QUFDYjs7QUFFckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyw4QkFBOEI7QUFDL0Q7QUFDQTtBQUNBO0FBQ0EsRUFBRSxJQUFJO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsMklBQTJJO0FBQ3BKO0FBQ0EsbUVBQW1FLFNBQVM7QUFDNUU7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLEVBQUU7QUFDdkI7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxLQUFLLCtEQUFlLGlCQUFpQiw2REFBYTtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHFFQUFzQjtBQUNsRDtBQUNBO0FBQ0EscUNBQXFDLElBQUksT0FBTyxRQUFRO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0ZBQW9GLFNBQVMsS0FBSyxJQUFJO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDhEQUFrQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLDJFQUF5QjtBQUMvQix1Q0FBdUMsb0JBQW9CLFFBQVEsU0FBUyw2QkFBNkI7QUFDekc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssMkNBQTJDLFNBQVMsS0FBSyxJQUFJO0FBQ2xFLHFFQUFxRSxTQUFTLEtBQUssSUFBSTtBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSwyRkFBMkYsU0FBUyxLQUFLLElBQUk7QUFDN0csK0ZBQStGLG9FQUFrQjtBQUNqSCwyRUFBMkUsU0FBUyxLQUFLLElBQUk7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsK0JBQStCLHFEQUFPLFNBQVMscURBQVc7QUFDMUQsd0RBQXdELGFBQWE7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLFlBQVk7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVEO0FBQ3ZEO0FBQ0EsdUNBQXVDO0FBQ3ZDO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNnQjtBQUNoQiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2xvYWQvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsga2V5RnJvbUpzb24sIG1hcEtleXMgfSBmcm9tIFwiLi9tYXBfa2V5cy5qc1wiO1xuaW1wb3J0IHsgaXNFc2NhcGVkT2JqZWN0LCB1bmVzY2FwZVZhbHVlIH0gZnJvbSBcIi4vdmFsaWRhdGlvbi5qc1wiO1xuaW1wb3J0IHsgZ2V0X2xjX3VuaXF1ZV9uYW1lIH0gZnJvbSBcIi4vc2VyaWFsaXphYmxlLmpzXCI7XG5pbXBvcnQgeyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlIH0gZnJvbSBcIi4uL3V0aWxzL2Vudi5qc1wiO1xuaW1wb3J0IHsgb3B0aW9uYWxJbXBvcnRFbnRyeXBvaW50cyB9IGZyb20gXCIuL2ltcG9ydF9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7IGltcG9ydF9tYXBfZXhwb3J0cyB9IGZyb20gXCIuL2ltcG9ydF9tYXAuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9sb2FkL2luZGV4LnRzXG4vKipcbiogRGVmYXVsdCBtYXhpbXVtIHJlY3Vyc2lvbiBkZXB0aCBmb3IgZGVzZXJpYWxpemF0aW9uLlxuKiBUaGlzIHByb3ZpZGVzIHByb3RlY3Rpb24gYWdhaW5zdCBEb1MgYXR0YWNrcyB2aWEgZGVlcGx5IG5lc3RlZCBzdHJ1Y3R1cmVzLlxuKi9cbmNvbnN0IERFRkFVTFRfTUFYX0RFUFRIID0gNTA7XG5mdW5jdGlvbiBjb21iaW5lQWxpYXNlc0FuZEludmVydChjb25zdHJ1Y3Rvcikge1xuXHRjb25zdCBhbGlhc2VzID0ge307XG5cdGZvciAobGV0IGN1cnJlbnQgPSBjb25zdHJ1Y3RvcjsgY3VycmVudCAmJiBjdXJyZW50LnByb3RvdHlwZTsgY3VycmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihjdXJyZW50KSkgT2JqZWN0LmFzc2lnbihhbGlhc2VzLCBSZWZsZWN0LmdldChjdXJyZW50LnByb3RvdHlwZSwgXCJsY19hbGlhc2VzXCIpKTtcblx0cmV0dXJuIE9iamVjdC5lbnRyaWVzKGFsaWFzZXMpLnJlZHVjZSgoYWNjLCBba2V5LCB2YWx1ZV0pID0+IHtcblx0XHRhY2NbdmFsdWVdID0ga2V5O1xuXHRcdHJldHVybiBhY2M7XG5cdH0sIHt9KTtcbn1cbi8qKlxuKiBSZWN1cnNpdmVseSByZXZpdmUgYSB2YWx1ZSwgaGFuZGxpbmcgZXNjYXBlIG1hcmtlcnMgYW5kIExDIG9iamVjdHMuXG4qXG4qIFRoaXMgZnVuY3Rpb24gaGFuZGxlczpcbiogMS4gRXNjYXBlZCBkaWN0cyAtIHVud3JhcHBlZCBhbmQgcmV0dXJuZWQgYXMgcGxhaW4gb2JqZWN0c1xuKiAyLiBMQyBzZWNyZXQgb2JqZWN0cyAtIHJlc29sdmVkIGZyb20gc2VjcmV0c01hcCBvciBlbnZcbiogMy4gTEMgY29uc3RydWN0b3Igb2JqZWN0cyAtIGluc3RhbnRpYXRlZFxuKiA0LiBSZWd1bGFyIG9iamVjdHMvYXJyYXlzIC0gcmVjdXJzZWQgaW50b1xuKi9cbmFzeW5jIGZ1bmN0aW9uIHJldml2ZXIodmFsdWUpIHtcblx0Y29uc3QgeyBvcHRpb25hbEltcG9ydHNNYXAsIG9wdGlvbmFsSW1wb3J0RW50cnlwb2ludHM6IG9wdGlvbmFsSW1wb3J0RW50cnlwb2ludHMkMSwgaW1wb3J0TWFwLCBzZWNyZXRzTWFwLCBzZWNyZXRzRnJvbUVudiwgcGF0aCwgZGVwdGgsIG1heERlcHRoIH0gPSB0aGlzO1xuXHRjb25zdCBwYXRoU3RyID0gcGF0aC5qb2luKFwiLlwiKTtcblx0aWYgKGRlcHRoID4gbWF4RGVwdGgpIHRocm93IG5ldyBFcnJvcihgTWF4aW11bSByZWN1cnNpb24gZGVwdGggKCR7bWF4RGVwdGh9KSBleGNlZWRlZCBkdXJpbmcgZGVzZXJpYWxpemF0aW9uLiBUaGlzIG1heSBpbmRpY2F0ZSBhIG1hbGljaW91cyBwYXlsb2FkIG9yIHlvdSBtYXkgbmVlZCB0byBpbmNyZWFzZSBtYXhEZXB0aC5gKTtcblx0aWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJvYmplY3RcIiB8fCB2YWx1ZSA9PSBudWxsKSByZXR1cm4gdmFsdWU7XG5cdGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgcmV0dXJuIFByb21pc2UuYWxsKHZhbHVlLm1hcCgodiwgaSkgPT4gcmV2aXZlci5jYWxsKHtcblx0XHQuLi50aGlzLFxuXHRcdHBhdGg6IFsuLi5wYXRoLCBgJHtpfWBdLFxuXHRcdGRlcHRoOiBkZXB0aCArIDFcblx0fSwgdikpKTtcblx0Y29uc3QgcmVjb3JkID0gdmFsdWU7XG5cdGlmIChpc0VzY2FwZWRPYmplY3QocmVjb3JkKSkgcmV0dXJuIHVuZXNjYXBlVmFsdWUocmVjb3JkKTtcblx0aWYgKFwibGNcIiBpbiByZWNvcmQgJiYgXCJ0eXBlXCIgaW4gcmVjb3JkICYmIFwiaWRcIiBpbiByZWNvcmQgJiYgcmVjb3JkLmxjID09PSAxICYmIHJlY29yZC50eXBlID09PSBcInNlY3JldFwiKSB7XG5cdFx0Y29uc3Qgc2VyaWFsaXplZCA9IHJlY29yZDtcblx0XHRjb25zdCBba2V5XSA9IHNlcmlhbGl6ZWQuaWQ7XG5cdFx0aWYgKGtleSBpbiBzZWNyZXRzTWFwKSByZXR1cm4gc2VjcmV0c01hcFtrZXldO1xuXHRcdGVsc2UgaWYgKHNlY3JldHNGcm9tRW52KSB7XG5cdFx0XHRjb25zdCBzZWNyZXRWYWx1ZUluRW52ID0gZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShrZXkpO1xuXHRcdFx0aWYgKHNlY3JldFZhbHVlSW5FbnYpIHJldHVybiBzZWNyZXRWYWx1ZUluRW52O1xuXHRcdH1cblx0XHR0aHJvdyBuZXcgRXJyb3IoYE1pc3Npbmcgc2VjcmV0IFwiJHtrZXl9XCIgYXQgJHtwYXRoU3RyfWApO1xuXHR9XG5cdGlmIChcImxjXCIgaW4gcmVjb3JkICYmIFwidHlwZVwiIGluIHJlY29yZCAmJiBcImlkXCIgaW4gcmVjb3JkICYmIHJlY29yZC5sYyA9PT0gMSAmJiByZWNvcmQudHlwZSA9PT0gXCJub3RfaW1wbGVtZW50ZWRcIikge1xuXHRcdGNvbnN0IHNlcmlhbGl6ZWQgPSByZWNvcmQ7XG5cdFx0Y29uc3Qgc3RyID0gSlNPTi5zdHJpbmdpZnkoc2VyaWFsaXplZCk7XG5cdFx0dGhyb3cgbmV3IEVycm9yKGBUcnlpbmcgdG8gbG9hZCBhbiBvYmplY3QgdGhhdCBkb2Vzbid0IGltcGxlbWVudCBzZXJpYWxpemF0aW9uOiAke3BhdGhTdHJ9IC0+ICR7c3RyfWApO1xuXHR9XG5cdGlmIChcImxjXCIgaW4gcmVjb3JkICYmIFwidHlwZVwiIGluIHJlY29yZCAmJiBcImlkXCIgaW4gcmVjb3JkICYmIFwia3dhcmdzXCIgaW4gcmVjb3JkICYmIHJlY29yZC5sYyA9PT0gMSAmJiByZWNvcmQudHlwZSA9PT0gXCJjb25zdHJ1Y3RvclwiKSB7XG5cdFx0Y29uc3Qgc2VyaWFsaXplZCA9IHJlY29yZDtcblx0XHRjb25zdCBzdHIgPSBKU09OLnN0cmluZ2lmeShzZXJpYWxpemVkKTtcblx0XHRjb25zdCBbbmFtZSwgLi4ubmFtZXNwYWNlUmV2ZXJzZV0gPSBzZXJpYWxpemVkLmlkLnNsaWNlKCkucmV2ZXJzZSgpO1xuXHRcdGNvbnN0IG5hbWVzcGFjZSA9IG5hbWVzcGFjZVJldmVyc2UucmV2ZXJzZSgpO1xuXHRcdGNvbnN0IGltcG9ydE1hcHMgPSB7XG5cdFx0XHRsYW5nY2hhaW5fY29yZTogaW1wb3J0X21hcF9leHBvcnRzLFxuXHRcdFx0bGFuZ2NoYWluOiBpbXBvcnRNYXBcblx0XHR9O1xuXHRcdGxldCBtb2R1bGUgPSBudWxsO1xuXHRcdGNvbnN0IG9wdGlvbmFsSW1wb3J0TmFtZXNwYWNlQWxpYXNlcyA9IFtuYW1lc3BhY2Uuam9pbihcIi9cIildO1xuXHRcdGlmIChuYW1lc3BhY2VbMF0gPT09IFwibGFuZ2NoYWluX2NvbW11bml0eVwiKSBvcHRpb25hbEltcG9ydE5hbWVzcGFjZUFsaWFzZXMucHVzaChbXCJsYW5nY2hhaW5cIiwgLi4ubmFtZXNwYWNlLnNsaWNlKDEpXS5qb2luKFwiL1wiKSk7XG5cdFx0Y29uc3QgbWF0Y2hpbmdOYW1lc3BhY2VBbGlhcyA9IG9wdGlvbmFsSW1wb3J0TmFtZXNwYWNlQWxpYXNlcy5maW5kKChhbGlhcykgPT4gYWxpYXMgaW4gb3B0aW9uYWxJbXBvcnRzTWFwKTtcblx0XHRpZiAob3B0aW9uYWxJbXBvcnRFbnRyeXBvaW50cy5jb25jYXQob3B0aW9uYWxJbXBvcnRFbnRyeXBvaW50cyQxKS5pbmNsdWRlcyhuYW1lc3BhY2Uuam9pbihcIi9cIikpIHx8IG1hdGNoaW5nTmFtZXNwYWNlQWxpYXMpIGlmIChtYXRjaGluZ05hbWVzcGFjZUFsaWFzICE9PSB2b2lkIDApIG1vZHVsZSA9IGF3YWl0IG9wdGlvbmFsSW1wb3J0c01hcFttYXRjaGluZ05hbWVzcGFjZUFsaWFzXTtcblx0XHRlbHNlIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBrZXkgXCIke25hbWVzcGFjZS5qb2luKFwiL1wiKX1cIiBmb3IgJHtwYXRoU3RyfSBpbiBsb2FkKG9wdGlvbmFsSW1wb3J0c01hcD17fSlgKTtcblx0XHRlbHNlIHtcblx0XHRcdGxldCBmaW5hbEltcG9ydE1hcDtcblx0XHRcdGlmIChuYW1lc3BhY2VbMF0gPT09IFwibGFuZ2NoYWluXCIgfHwgbmFtZXNwYWNlWzBdID09PSBcImxhbmdjaGFpbl9jb3JlXCIpIHtcblx0XHRcdFx0ZmluYWxJbXBvcnRNYXAgPSBpbXBvcnRNYXBzW25hbWVzcGFjZVswXV07XG5cdFx0XHRcdG5hbWVzcGFjZS5zaGlmdCgpO1xuXHRcdFx0fSBlbHNlIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBuYW1lc3BhY2U6ICR7cGF0aFN0cn0gLT4gJHtzdHJ9YCk7XG5cdFx0XHRpZiAobmFtZXNwYWNlLmxlbmd0aCA9PT0gMCkgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG5hbWVzcGFjZTogJHtwYXRoU3RyfSAtPiAke3N0cn1gKTtcblx0XHRcdGxldCBpbXBvcnRNYXBLZXk7XG5cdFx0XHRkbyB7XG5cdFx0XHRcdGltcG9ydE1hcEtleSA9IG5hbWVzcGFjZS5qb2luKFwiX19cIik7XG5cdFx0XHRcdGlmIChpbXBvcnRNYXBLZXkgaW4gZmluYWxJbXBvcnRNYXApIGJyZWFrO1xuXHRcdFx0XHRlbHNlIG5hbWVzcGFjZS5wb3AoKTtcblx0XHRcdH0gd2hpbGUgKG5hbWVzcGFjZS5sZW5ndGggPiAwKTtcblx0XHRcdGlmIChpbXBvcnRNYXBLZXkgaW4gZmluYWxJbXBvcnRNYXApIG1vZHVsZSA9IGZpbmFsSW1wb3J0TWFwW2ltcG9ydE1hcEtleV07XG5cdFx0fVxuXHRcdGlmICh0eXBlb2YgbW9kdWxlICE9PSBcIm9iamVjdFwiIHx8IG1vZHVsZSA9PT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG5hbWVzcGFjZTogJHtwYXRoU3RyfSAtPiAke3N0cn1gKTtcblx0XHRjb25zdCBidWlsZGVyID0gbW9kdWxlW25hbWVdID8/IE9iamVjdC52YWx1ZXMobW9kdWxlKS5maW5kKCh2KSA9PiB0eXBlb2YgdiA9PT0gXCJmdW5jdGlvblwiICYmIGdldF9sY191bmlxdWVfbmFtZSh2KSA9PT0gbmFtZSk7XG5cdFx0aWYgKHR5cGVvZiBidWlsZGVyICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBpZGVudGlmZXI6ICR7cGF0aFN0cn0gLT4gJHtzdHJ9YCk7XG5cdFx0Y29uc3Qga3dhcmdzID0gYXdhaXQgcmV2aXZlci5jYWxsKHtcblx0XHRcdC4uLnRoaXMsXG5cdFx0XHRwYXRoOiBbLi4ucGF0aCwgXCJrd2FyZ3NcIl0sXG5cdFx0XHRkZXB0aDogZGVwdGggKyAxXG5cdFx0fSwgc2VyaWFsaXplZC5rd2FyZ3MpO1xuXHRcdGNvbnN0IGluc3RhbmNlID0gbmV3IGJ1aWxkZXIobWFwS2V5cyhrd2FyZ3MsIGtleUZyb21Kc29uLCBjb21iaW5lQWxpYXNlc0FuZEludmVydChidWlsZGVyKSkpO1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpbnN0YW5jZS5jb25zdHJ1Y3RvciwgXCJuYW1lXCIsIHsgdmFsdWU6IG5hbWUgfSk7XG5cdFx0cmV0dXJuIGluc3RhbmNlO1xuXHR9XG5cdGNvbnN0IHJlc3VsdCA9IHt9O1xuXHRmb3IgKGNvbnN0IFtrZXksIHZhbF0gb2YgT2JqZWN0LmVudHJpZXMocmVjb3JkKSkgcmVzdWx0W2tleV0gPSBhd2FpdCByZXZpdmVyLmNhbGwoe1xuXHRcdC4uLnRoaXMsXG5cdFx0cGF0aDogWy4uLnBhdGgsIGtleV0sXG5cdFx0ZGVwdGg6IGRlcHRoICsgMVxuXHR9LCB2YWwpO1xuXHRyZXR1cm4gcmVzdWx0O1xufVxuLyoqXG4qIExvYWQgYSBMYW5nQ2hhaW4gb2JqZWN0IGZyb20gYSBKU09OIHN0cmluZy5cbipcbiogQHBhcmFtIHRleHQgLSBUaGUgSlNPTiBzdHJpbmcgdG8gcGFyc2UgYW5kIGxvYWQuXG4qIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgbG9hZGluZy5cbiogQHJldHVybnMgVGhlIGxvYWRlZCBMYW5nQ2hhaW4gb2JqZWN0LlxuKlxuKiBAZXhhbXBsZVxuKiBgYGB0eXBlc2NyaXB0XG4qIGltcG9ydCB7IGxvYWQgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL2xvYWRcIjtcbiogaW1wb3J0IHsgQUlNZXNzYWdlIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9tZXNzYWdlc1wiO1xuKlxuKiAvLyBCYXNpYyB1c2FnZSAtIHNlY3JldHMgbXVzdCBiZSBwcm92aWRlZCBleHBsaWNpdGx5XG4qIGNvbnN0IG1zZyA9IGF3YWl0IGxvYWQ8QUlNZXNzYWdlPihqc29uU3RyaW5nKTtcbipcbiogLy8gV2l0aCBzZWNyZXRzIGZyb20gYSBtYXBcbiogY29uc3QgbXNnID0gYXdhaXQgbG9hZDxBSU1lc3NhZ2U+KGpzb25TdHJpbmcsIHtcbiogICBzZWNyZXRzTWFwOiB7IE9QRU5BSV9BUElfS0VZOiBcInNrLS4uLlwiIH1cbiogfSk7XG4qXG4qIC8vIEFsbG93IGxvYWRpbmcgc2VjcmV0cyBmcm9tIGVudmlyb25tZW50ICh1c2Ugd2l0aCBjYXV0aW9uKVxuKiBjb25zdCBtc2cgPSBhd2FpdCBsb2FkPEFJTWVzc2FnZT4oanNvblN0cmluZywge1xuKiAgIHNlY3JldHNGcm9tRW52OiB0cnVlXG4qIH0pO1xuKiBgYGBcbiovXG5hc3luYyBmdW5jdGlvbiBsb2FkKHRleHQsIG9wdGlvbnMpIHtcblx0Y29uc3QganNvbiA9IEpTT04ucGFyc2UodGV4dCk7XG5cdGNvbnN0IGNvbnRleHQgPSB7XG5cdFx0b3B0aW9uYWxJbXBvcnRzTWFwOiBvcHRpb25zPy5vcHRpb25hbEltcG9ydHNNYXAgPz8ge30sXG5cdFx0b3B0aW9uYWxJbXBvcnRFbnRyeXBvaW50czogb3B0aW9ucz8ub3B0aW9uYWxJbXBvcnRFbnRyeXBvaW50cyA/PyBbXSxcblx0XHRzZWNyZXRzTWFwOiBvcHRpb25zPy5zZWNyZXRzTWFwID8/IHt9LFxuXHRcdHNlY3JldHNGcm9tRW52OiBvcHRpb25zPy5zZWNyZXRzRnJvbUVudiA/PyBmYWxzZSxcblx0XHRpbXBvcnRNYXA6IG9wdGlvbnM/LmltcG9ydE1hcCA/PyB7fSxcblx0XHRwYXRoOiBbXCIkXCJdLFxuXHRcdGRlcHRoOiAwLFxuXHRcdG1heERlcHRoOiBvcHRpb25zPy5tYXhEZXB0aCA/PyBERUZBVUxUX01BWF9ERVBUSFxuXHR9O1xuXHRyZXR1cm4gcmV2aXZlci5jYWxsKGNvbnRleHQsIGpzb24pO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGxvYWQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/load/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/load/map_keys.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/load/map_keys.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   keyFromJson: () => (/* binding */ keyFromJson),\n/* harmony export */   keyToJson: () => (/* binding */ keyToJson),\n/* harmony export */   mapKeys: () => (/* binding */ mapKeys)\n/* harmony export */ });\n/* harmony import */ var decamelize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! decamelize */ \"(ssr)/./node_modules/decamelize/index.js\");\n/* harmony import */ var camelcase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! camelcase */ \"(ssr)/./node_modules/camelcase/index.js\");\n\n\n\n//#region src/load/map_keys.ts\nfunction keyToJson(key, map) {\n\treturn map?.[key] || decamelize__WEBPACK_IMPORTED_MODULE_0__(key);\n}\nfunction keyFromJson(key, map) {\n\treturn map?.[key] || camelcase__WEBPACK_IMPORTED_MODULE_1__(key);\n}\nfunction mapKeys(fields, mapper, map) {\n\tconst mapped = {};\n\tfor (const key in fields) if (Object.hasOwn(fields, key)) mapped[mapper(key, map)] = fields[key];\n\treturn mapped;\n}\n\n//#endregion\n\n//# sourceMappingURL=map_keys.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbG9hZC9tYXBfa2V5cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFtQztBQUNEOztBQUVsQztBQUNBO0FBQ0Esc0JBQXNCLHVDQUFTO0FBQy9CO0FBQ0E7QUFDQSxzQkFBc0Isc0NBQVM7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzJDO0FBQzNDIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbG9hZC9tYXBfa2V5cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgc25ha2VDYXNlIGZyb20gXCJkZWNhbWVsaXplXCI7XG5pbXBvcnQgY2FtZWxDYXNlIGZyb20gXCJjYW1lbGNhc2VcIjtcblxuLy8jcmVnaW9uIHNyYy9sb2FkL21hcF9rZXlzLnRzXG5mdW5jdGlvbiBrZXlUb0pzb24oa2V5LCBtYXApIHtcblx0cmV0dXJuIG1hcD8uW2tleV0gfHwgc25ha2VDYXNlKGtleSk7XG59XG5mdW5jdGlvbiBrZXlGcm9tSnNvbihrZXksIG1hcCkge1xuXHRyZXR1cm4gbWFwPy5ba2V5XSB8fCBjYW1lbENhc2Uoa2V5KTtcbn1cbmZ1bmN0aW9uIG1hcEtleXMoZmllbGRzLCBtYXBwZXIsIG1hcCkge1xuXHRjb25zdCBtYXBwZWQgPSB7fTtcblx0Zm9yIChjb25zdCBrZXkgaW4gZmllbGRzKSBpZiAoT2JqZWN0Lmhhc093bihmaWVsZHMsIGtleSkpIG1hcHBlZFttYXBwZXIoa2V5LCBtYXApXSA9IGZpZWxkc1trZXldO1xuXHRyZXR1cm4gbWFwcGVkO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGtleUZyb21Kc29uLCBrZXlUb0pzb24sIG1hcEtleXMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hcF9rZXlzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/load/map_keys.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/load/serializable.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/load/serializable.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Serializable: () => (/* binding */ Serializable),\n/* harmony export */   get_lc_unique_name: () => (/* binding */ get_lc_unique_name),\n/* harmony export */   serializable_exports: () => (/* binding */ serializable_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _map_keys_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./map_keys.js */ \"(ssr)/./node_modules/@langchain/core/dist/load/map_keys.js\");\n/* harmony import */ var _validation_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./validation.js */ \"(ssr)/./node_modules/@langchain/core/dist/load/validation.js\");\n\n\n\n\n//#region src/load/serializable.ts\nvar serializable_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(serializable_exports, {\n\tSerializable: () => Serializable,\n\tget_lc_unique_name: () => get_lc_unique_name\n});\nfunction shallowCopy(obj) {\n\treturn Array.isArray(obj) ? [...obj] : { ...obj };\n}\nfunction replaceSecrets(root, secretsMap) {\n\tconst result = shallowCopy(root);\n\tfor (const [path, secretId] of Object.entries(secretsMap)) {\n\t\tconst [last, ...partsReverse] = path.split(\".\").reverse();\n\t\tlet current = result;\n\t\tfor (const part of partsReverse.reverse()) {\n\t\t\tif (current[part] === void 0) break;\n\t\t\tcurrent[part] = shallowCopy(current[part]);\n\t\t\tcurrent = current[part];\n\t\t}\n\t\tif (current[last] !== void 0) current[last] = {\n\t\t\tlc: 1,\n\t\t\ttype: \"secret\",\n\t\t\tid: [secretId]\n\t\t};\n\t}\n\treturn result;\n}\n/**\n* Get a unique name for the module, rather than parent class implementations.\n* Should not be subclassed, subclass lc_name above instead.\n*/\nfunction get_lc_unique_name(serializableClass) {\n\tconst parentClass = Object.getPrototypeOf(serializableClass);\n\tconst lcNameIsSubclassed = typeof serializableClass.lc_name === \"function\" && (typeof parentClass.lc_name !== \"function\" || serializableClass.lc_name() !== parentClass.lc_name());\n\tif (lcNameIsSubclassed) return serializableClass.lc_name();\n\telse return serializableClass.name;\n}\nvar Serializable = class Serializable {\n\tlc_serializable = false;\n\tlc_kwargs;\n\t/**\n\t* The name of the serializable. Override to provide an alias or\n\t* to preserve the serialized module name in minified environments.\n\t*\n\t* Implemented as a static method to support loading logic.\n\t*/\n\tstatic lc_name() {\n\t\treturn this.name;\n\t}\n\t/**\n\t* The final serialized identifier for the module.\n\t*/\n\tget lc_id() {\n\t\treturn [...this.lc_namespace, get_lc_unique_name(this.constructor)];\n\t}\n\t/**\n\t* A map of secrets, which will be omitted from serialization.\n\t* Keys are paths to the secret in constructor args, e.g. \"foo.bar.baz\".\n\t* Values are the secret ids, which will be used when deserializing.\n\t*/\n\tget lc_secrets() {\n\t\treturn void 0;\n\t}\n\t/**\n\t* A map of additional attributes to merge with constructor args.\n\t* Keys are the attribute names, e.g. \"foo\".\n\t* Values are the attribute values, which will be serialized.\n\t* These attributes need to be accepted by the constructor as arguments.\n\t*/\n\tget lc_attributes() {\n\t\treturn void 0;\n\t}\n\t/**\n\t* A map of aliases for constructor args.\n\t* Keys are the attribute names, e.g. \"foo\".\n\t* Values are the alias that will replace the key in serialization.\n\t* This is used to eg. make argument names match Python.\n\t*/\n\tget lc_aliases() {\n\t\treturn void 0;\n\t}\n\t/**\n\t* A manual list of keys that should be serialized.\n\t* If not overridden, all fields passed into the constructor will be serialized.\n\t*/\n\tget lc_serializable_keys() {\n\t\treturn void 0;\n\t}\n\tconstructor(kwargs, ..._args) {\n\t\tif (this.lc_serializable_keys !== void 0) this.lc_kwargs = Object.fromEntries(Object.entries(kwargs || {}).filter(([key]) => this.lc_serializable_keys?.includes(key)));\n\t\telse this.lc_kwargs = kwargs ?? {};\n\t}\n\ttoJSON() {\n\t\tif (!this.lc_serializable) return this.toJSONNotImplemented();\n\t\tif (this.lc_kwargs instanceof Serializable || typeof this.lc_kwargs !== \"object\" || Array.isArray(this.lc_kwargs)) return this.toJSONNotImplemented();\n\t\tconst aliases = {};\n\t\tconst secrets = {};\n\t\tconst kwargs = Object.keys(this.lc_kwargs).reduce((acc, key) => {\n\t\t\tacc[key] = key in this ? this[key] : this.lc_kwargs[key];\n\t\t\treturn acc;\n\t\t}, {});\n\t\tfor (let current = Object.getPrototypeOf(this); current; current = Object.getPrototypeOf(current)) {\n\t\t\tObject.assign(aliases, Reflect.get(current, \"lc_aliases\", this));\n\t\t\tObject.assign(secrets, Reflect.get(current, \"lc_secrets\", this));\n\t\t\tObject.assign(kwargs, Reflect.get(current, \"lc_attributes\", this));\n\t\t}\n\t\tObject.keys(secrets).forEach((keyPath) => {\n\t\t\tlet read = this;\n\t\t\tlet write = kwargs;\n\t\t\tconst [last, ...partsReverse] = keyPath.split(\".\").reverse();\n\t\t\tfor (const key of partsReverse.reverse()) {\n\t\t\t\tif (!(key in read) || read[key] === void 0) return;\n\t\t\t\tif (!(key in write) || write[key] === void 0) {\n\t\t\t\t\tif (typeof read[key] === \"object\" && read[key] != null) write[key] = {};\n\t\t\t\t\telse if (Array.isArray(read[key])) write[key] = [];\n\t\t\t\t}\n\t\t\t\tread = read[key];\n\t\t\t\twrite = write[key];\n\t\t\t}\n\t\t\tif (last in read && read[last] !== void 0) write[last] = write[last] || read[last];\n\t\t});\n\t\tconst escapedKwargs = {};\n\t\tconst pathSet = /* @__PURE__ */ new WeakSet();\n\t\tpathSet.add(this);\n\t\tfor (const [key, value] of Object.entries(kwargs)) escapedKwargs[key] = (0,_validation_js__WEBPACK_IMPORTED_MODULE_2__.escapeIfNeeded)(value, pathSet);\n\t\tconst kwargsWithSecrets = Object.keys(secrets).length ? replaceSecrets(escapedKwargs, secrets) : escapedKwargs;\n\t\tconst processedKwargs = (0,_map_keys_js__WEBPACK_IMPORTED_MODULE_1__.mapKeys)(kwargsWithSecrets, _map_keys_js__WEBPACK_IMPORTED_MODULE_1__.keyToJson, aliases);\n\t\treturn {\n\t\t\tlc: 1,\n\t\t\ttype: \"constructor\",\n\t\t\tid: this.lc_id,\n\t\t\tkwargs: processedKwargs\n\t\t};\n\t}\n\ttoJSONNotImplemented() {\n\t\treturn {\n\t\t\tlc: 1,\n\t\t\ttype: \"not_implemented\",\n\t\t\tid: this.lc_id\n\t\t};\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=serializable.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbG9hZC9zZXJpYWxpemFibGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTJEO0FBQ1I7QUFDRjs7QUFFakQ7QUFDQTtBQUNBLHNFQUFRO0FBQ1I7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyR0FBMkc7QUFDM0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLElBQUk7QUFDUCxrREFBa0QsU0FBUztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsMEVBQTBFLDhEQUFjO0FBQ3hGO0FBQ0EsMEJBQTBCLHFEQUFPLG9CQUFvQixtREFBUztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDa0U7QUFDbEUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9sb2FkL3NlcmlhbGl6YWJsZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4cG9ydCB9IGZyb20gXCIuLi9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyBrZXlUb0pzb24sIG1hcEtleXMgfSBmcm9tIFwiLi9tYXBfa2V5cy5qc1wiO1xuaW1wb3J0IHsgZXNjYXBlSWZOZWVkZWQgfSBmcm9tIFwiLi92YWxpZGF0aW9uLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvbG9hZC9zZXJpYWxpemFibGUudHNcbnZhciBzZXJpYWxpemFibGVfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQoc2VyaWFsaXphYmxlX2V4cG9ydHMsIHtcblx0U2VyaWFsaXphYmxlOiAoKSA9PiBTZXJpYWxpemFibGUsXG5cdGdldF9sY191bmlxdWVfbmFtZTogKCkgPT4gZ2V0X2xjX3VuaXF1ZV9uYW1lXG59KTtcbmZ1bmN0aW9uIHNoYWxsb3dDb3B5KG9iaikge1xuXHRyZXR1cm4gQXJyYXkuaXNBcnJheShvYmopID8gWy4uLm9ial0gOiB7IC4uLm9iaiB9O1xufVxuZnVuY3Rpb24gcmVwbGFjZVNlY3JldHMocm9vdCwgc2VjcmV0c01hcCkge1xuXHRjb25zdCByZXN1bHQgPSBzaGFsbG93Q29weShyb290KTtcblx0Zm9yIChjb25zdCBbcGF0aCwgc2VjcmV0SWRdIG9mIE9iamVjdC5lbnRyaWVzKHNlY3JldHNNYXApKSB7XG5cdFx0Y29uc3QgW2xhc3QsIC4uLnBhcnRzUmV2ZXJzZV0gPSBwYXRoLnNwbGl0KFwiLlwiKS5yZXZlcnNlKCk7XG5cdFx0bGV0IGN1cnJlbnQgPSByZXN1bHQ7XG5cdFx0Zm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzUmV2ZXJzZS5yZXZlcnNlKCkpIHtcblx0XHRcdGlmIChjdXJyZW50W3BhcnRdID09PSB2b2lkIDApIGJyZWFrO1xuXHRcdFx0Y3VycmVudFtwYXJ0XSA9IHNoYWxsb3dDb3B5KGN1cnJlbnRbcGFydF0pO1xuXHRcdFx0Y3VycmVudCA9IGN1cnJlbnRbcGFydF07XG5cdFx0fVxuXHRcdGlmIChjdXJyZW50W2xhc3RdICE9PSB2b2lkIDApIGN1cnJlbnRbbGFzdF0gPSB7XG5cdFx0XHRsYzogMSxcblx0XHRcdHR5cGU6IFwic2VjcmV0XCIsXG5cdFx0XHRpZDogW3NlY3JldElkXVxuXHRcdH07XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuKiBHZXQgYSB1bmlxdWUgbmFtZSBmb3IgdGhlIG1vZHVsZSwgcmF0aGVyIHRoYW4gcGFyZW50IGNsYXNzIGltcGxlbWVudGF0aW9ucy5cbiogU2hvdWxkIG5vdCBiZSBzdWJjbGFzc2VkLCBzdWJjbGFzcyBsY19uYW1lIGFib3ZlIGluc3RlYWQuXG4qL1xuZnVuY3Rpb24gZ2V0X2xjX3VuaXF1ZV9uYW1lKHNlcmlhbGl6YWJsZUNsYXNzKSB7XG5cdGNvbnN0IHBhcmVudENsYXNzID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHNlcmlhbGl6YWJsZUNsYXNzKTtcblx0Y29uc3QgbGNOYW1lSXNTdWJjbGFzc2VkID0gdHlwZW9mIHNlcmlhbGl6YWJsZUNsYXNzLmxjX25hbWUgPT09IFwiZnVuY3Rpb25cIiAmJiAodHlwZW9mIHBhcmVudENsYXNzLmxjX25hbWUgIT09IFwiZnVuY3Rpb25cIiB8fCBzZXJpYWxpemFibGVDbGFzcy5sY19uYW1lKCkgIT09IHBhcmVudENsYXNzLmxjX25hbWUoKSk7XG5cdGlmIChsY05hbWVJc1N1YmNsYXNzZWQpIHJldHVybiBzZXJpYWxpemFibGVDbGFzcy5sY19uYW1lKCk7XG5cdGVsc2UgcmV0dXJuIHNlcmlhbGl6YWJsZUNsYXNzLm5hbWU7XG59XG52YXIgU2VyaWFsaXphYmxlID0gY2xhc3MgU2VyaWFsaXphYmxlIHtcblx0bGNfc2VyaWFsaXphYmxlID0gZmFsc2U7XG5cdGxjX2t3YXJncztcblx0LyoqXG5cdCogVGhlIG5hbWUgb2YgdGhlIHNlcmlhbGl6YWJsZS4gT3ZlcnJpZGUgdG8gcHJvdmlkZSBhbiBhbGlhcyBvclxuXHQqIHRvIHByZXNlcnZlIHRoZSBzZXJpYWxpemVkIG1vZHVsZSBuYW1lIGluIG1pbmlmaWVkIGVudmlyb25tZW50cy5cblx0KlxuXHQqIEltcGxlbWVudGVkIGFzIGEgc3RhdGljIG1ldGhvZCB0byBzdXBwb3J0IGxvYWRpbmcgbG9naWMuXG5cdCovXG5cdHN0YXRpYyBsY19uYW1lKCkge1xuXHRcdHJldHVybiB0aGlzLm5hbWU7XG5cdH1cblx0LyoqXG5cdCogVGhlIGZpbmFsIHNlcmlhbGl6ZWQgaWRlbnRpZmllciBmb3IgdGhlIG1vZHVsZS5cblx0Ki9cblx0Z2V0IGxjX2lkKCkge1xuXHRcdHJldHVybiBbLi4udGhpcy5sY19uYW1lc3BhY2UsIGdldF9sY191bmlxdWVfbmFtZSh0aGlzLmNvbnN0cnVjdG9yKV07XG5cdH1cblx0LyoqXG5cdCogQSBtYXAgb2Ygc2VjcmV0cywgd2hpY2ggd2lsbCBiZSBvbWl0dGVkIGZyb20gc2VyaWFsaXphdGlvbi5cblx0KiBLZXlzIGFyZSBwYXRocyB0byB0aGUgc2VjcmV0IGluIGNvbnN0cnVjdG9yIGFyZ3MsIGUuZy4gXCJmb28uYmFyLmJhelwiLlxuXHQqIFZhbHVlcyBhcmUgdGhlIHNlY3JldCBpZHMsIHdoaWNoIHdpbGwgYmUgdXNlZCB3aGVuIGRlc2VyaWFsaXppbmcuXG5cdCovXG5cdGdldCBsY19zZWNyZXRzKCkge1xuXHRcdHJldHVybiB2b2lkIDA7XG5cdH1cblx0LyoqXG5cdCogQSBtYXAgb2YgYWRkaXRpb25hbCBhdHRyaWJ1dGVzIHRvIG1lcmdlIHdpdGggY29uc3RydWN0b3IgYXJncy5cblx0KiBLZXlzIGFyZSB0aGUgYXR0cmlidXRlIG5hbWVzLCBlLmcuIFwiZm9vXCIuXG5cdCogVmFsdWVzIGFyZSB0aGUgYXR0cmlidXRlIHZhbHVlcywgd2hpY2ggd2lsbCBiZSBzZXJpYWxpemVkLlxuXHQqIFRoZXNlIGF0dHJpYnV0ZXMgbmVlZCB0byBiZSBhY2NlcHRlZCBieSB0aGUgY29uc3RydWN0b3IgYXMgYXJndW1lbnRzLlxuXHQqL1xuXHRnZXQgbGNfYXR0cmlidXRlcygpIHtcblx0XHRyZXR1cm4gdm9pZCAwO1xuXHR9XG5cdC8qKlxuXHQqIEEgbWFwIG9mIGFsaWFzZXMgZm9yIGNvbnN0cnVjdG9yIGFyZ3MuXG5cdCogS2V5cyBhcmUgdGhlIGF0dHJpYnV0ZSBuYW1lcywgZS5nLiBcImZvb1wiLlxuXHQqIFZhbHVlcyBhcmUgdGhlIGFsaWFzIHRoYXQgd2lsbCByZXBsYWNlIHRoZSBrZXkgaW4gc2VyaWFsaXphdGlvbi5cblx0KiBUaGlzIGlzIHVzZWQgdG8gZWcuIG1ha2UgYXJndW1lbnQgbmFtZXMgbWF0Y2ggUHl0aG9uLlxuXHQqL1xuXHRnZXQgbGNfYWxpYXNlcygpIHtcblx0XHRyZXR1cm4gdm9pZCAwO1xuXHR9XG5cdC8qKlxuXHQqIEEgbWFudWFsIGxpc3Qgb2Yga2V5cyB0aGF0IHNob3VsZCBiZSBzZXJpYWxpemVkLlxuXHQqIElmIG5vdCBvdmVycmlkZGVuLCBhbGwgZmllbGRzIHBhc3NlZCBpbnRvIHRoZSBjb25zdHJ1Y3RvciB3aWxsIGJlIHNlcmlhbGl6ZWQuXG5cdCovXG5cdGdldCBsY19zZXJpYWxpemFibGVfa2V5cygpIHtcblx0XHRyZXR1cm4gdm9pZCAwO1xuXHR9XG5cdGNvbnN0cnVjdG9yKGt3YXJncywgLi4uX2FyZ3MpIHtcblx0XHRpZiAodGhpcy5sY19zZXJpYWxpemFibGVfa2V5cyAhPT0gdm9pZCAwKSB0aGlzLmxjX2t3YXJncyA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhrd2FyZ3MgfHwge30pLmZpbHRlcigoW2tleV0pID0+IHRoaXMubGNfc2VyaWFsaXphYmxlX2tleXM/LmluY2x1ZGVzKGtleSkpKTtcblx0XHRlbHNlIHRoaXMubGNfa3dhcmdzID0ga3dhcmdzID8/IHt9O1xuXHR9XG5cdHRvSlNPTigpIHtcblx0XHRpZiAoIXRoaXMubGNfc2VyaWFsaXphYmxlKSByZXR1cm4gdGhpcy50b0pTT05Ob3RJbXBsZW1lbnRlZCgpO1xuXHRcdGlmICh0aGlzLmxjX2t3YXJncyBpbnN0YW5jZW9mIFNlcmlhbGl6YWJsZSB8fCB0eXBlb2YgdGhpcy5sY19rd2FyZ3MgIT09IFwib2JqZWN0XCIgfHwgQXJyYXkuaXNBcnJheSh0aGlzLmxjX2t3YXJncykpIHJldHVybiB0aGlzLnRvSlNPTk5vdEltcGxlbWVudGVkKCk7XG5cdFx0Y29uc3QgYWxpYXNlcyA9IHt9O1xuXHRcdGNvbnN0IHNlY3JldHMgPSB7fTtcblx0XHRjb25zdCBrd2FyZ3MgPSBPYmplY3Qua2V5cyh0aGlzLmxjX2t3YXJncykucmVkdWNlKChhY2MsIGtleSkgPT4ge1xuXHRcdFx0YWNjW2tleV0gPSBrZXkgaW4gdGhpcyA/IHRoaXNba2V5XSA6IHRoaXMubGNfa3dhcmdzW2tleV07XG5cdFx0XHRyZXR1cm4gYWNjO1xuXHRcdH0sIHt9KTtcblx0XHRmb3IgKGxldCBjdXJyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpOyBjdXJyZW50OyBjdXJyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGN1cnJlbnQpKSB7XG5cdFx0XHRPYmplY3QuYXNzaWduKGFsaWFzZXMsIFJlZmxlY3QuZ2V0KGN1cnJlbnQsIFwibGNfYWxpYXNlc1wiLCB0aGlzKSk7XG5cdFx0XHRPYmplY3QuYXNzaWduKHNlY3JldHMsIFJlZmxlY3QuZ2V0KGN1cnJlbnQsIFwibGNfc2VjcmV0c1wiLCB0aGlzKSk7XG5cdFx0XHRPYmplY3QuYXNzaWduKGt3YXJncywgUmVmbGVjdC5nZXQoY3VycmVudCwgXCJsY19hdHRyaWJ1dGVzXCIsIHRoaXMpKTtcblx0XHR9XG5cdFx0T2JqZWN0LmtleXMoc2VjcmV0cykuZm9yRWFjaCgoa2V5UGF0aCkgPT4ge1xuXHRcdFx0bGV0IHJlYWQgPSB0aGlzO1xuXHRcdFx0bGV0IHdyaXRlID0ga3dhcmdzO1xuXHRcdFx0Y29uc3QgW2xhc3QsIC4uLnBhcnRzUmV2ZXJzZV0gPSBrZXlQYXRoLnNwbGl0KFwiLlwiKS5yZXZlcnNlKCk7XG5cdFx0XHRmb3IgKGNvbnN0IGtleSBvZiBwYXJ0c1JldmVyc2UucmV2ZXJzZSgpKSB7XG5cdFx0XHRcdGlmICghKGtleSBpbiByZWFkKSB8fCByZWFkW2tleV0gPT09IHZvaWQgMCkgcmV0dXJuO1xuXHRcdFx0XHRpZiAoIShrZXkgaW4gd3JpdGUpIHx8IHdyaXRlW2tleV0gPT09IHZvaWQgMCkge1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgcmVhZFtrZXldID09PSBcIm9iamVjdFwiICYmIHJlYWRba2V5XSAhPSBudWxsKSB3cml0ZVtrZXldID0ge307XG5cdFx0XHRcdFx0ZWxzZSBpZiAoQXJyYXkuaXNBcnJheShyZWFkW2tleV0pKSB3cml0ZVtrZXldID0gW107XG5cdFx0XHRcdH1cblx0XHRcdFx0cmVhZCA9IHJlYWRba2V5XTtcblx0XHRcdFx0d3JpdGUgPSB3cml0ZVtrZXldO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGxhc3QgaW4gcmVhZCAmJiByZWFkW2xhc3RdICE9PSB2b2lkIDApIHdyaXRlW2xhc3RdID0gd3JpdGVbbGFzdF0gfHwgcmVhZFtsYXN0XTtcblx0XHR9KTtcblx0XHRjb25zdCBlc2NhcGVkS3dhcmdzID0ge307XG5cdFx0Y29uc3QgcGF0aFNldCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha1NldCgpO1xuXHRcdHBhdGhTZXQuYWRkKHRoaXMpO1xuXHRcdGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGt3YXJncykpIGVzY2FwZWRLd2FyZ3Nba2V5XSA9IGVzY2FwZUlmTmVlZGVkKHZhbHVlLCBwYXRoU2V0KTtcblx0XHRjb25zdCBrd2FyZ3NXaXRoU2VjcmV0cyA9IE9iamVjdC5rZXlzKHNlY3JldHMpLmxlbmd0aCA/IHJlcGxhY2VTZWNyZXRzKGVzY2FwZWRLd2FyZ3MsIHNlY3JldHMpIDogZXNjYXBlZEt3YXJncztcblx0XHRjb25zdCBwcm9jZXNzZWRLd2FyZ3MgPSBtYXBLZXlzKGt3YXJnc1dpdGhTZWNyZXRzLCBrZXlUb0pzb24sIGFsaWFzZXMpO1xuXHRcdHJldHVybiB7XG5cdFx0XHRsYzogMSxcblx0XHRcdHR5cGU6IFwiY29uc3RydWN0b3JcIixcblx0XHRcdGlkOiB0aGlzLmxjX2lkLFxuXHRcdFx0a3dhcmdzOiBwcm9jZXNzZWRLd2FyZ3Ncblx0XHR9O1xuXHR9XG5cdHRvSlNPTk5vdEltcGxlbWVudGVkKCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRsYzogMSxcblx0XHRcdHR5cGU6IFwibm90X2ltcGxlbWVudGVkXCIsXG5cdFx0XHRpZDogdGhpcy5sY19pZFxuXHRcdH07XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgU2VyaWFsaXphYmxlLCBnZXRfbGNfdW5pcXVlX25hbWUsIHNlcmlhbGl6YWJsZV9leHBvcnRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXJpYWxpemFibGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/load/serializable.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/load/validation.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/load/validation.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   escapeIfNeeded: () => (/* binding */ escapeIfNeeded),\n/* harmony export */   isEscapedObject: () => (/* binding */ isEscapedObject),\n/* harmony export */   unescapeValue: () => (/* binding */ unescapeValue)\n/* harmony export */ });\n//#region src/load/validation.ts\n/**\n* Sentinel key used to mark escaped user objects during serialization.\n*\n* When a plain object contains 'lc' key (which could be confused with LC objects),\n* we wrap it as `{\"__lc_escaped__\": {...original...}}`.\n*/\nconst LC_ESCAPED_KEY = \"__lc_escaped__\";\n/**\n* Check if an object needs escaping to prevent confusion with LC objects.\n*\n* An object needs escaping if:\n* 1. It has an `'lc'` key (could be confused with LC serialization format)\n* 2. It has only the escape key (would be mistaken for an escaped object)\n*/\nfunction needsEscaping(obj) {\n\treturn \"lc\" in obj || Object.keys(obj).length === 1 && LC_ESCAPED_KEY in obj;\n}\n/**\n* Wrap an object in the escape marker.\n*\n* @example\n* ```typescript\n* {\"key\": \"value\"}  // becomes {\"__lc_escaped__\": {\"key\": \"value\"}}\n* ```\n*/\nfunction escapeObject(obj) {\n\treturn { [LC_ESCAPED_KEY]: obj };\n}\n/**\n* Check if an object is an escaped user object.\n*\n* @example\n* ```typescript\n* {\"__lc_escaped__\": {...}}  // is an escaped object\n* ```\n*/\nfunction isEscapedObject(obj) {\n\treturn Object.keys(obj).length === 1 && LC_ESCAPED_KEY in obj;\n}\n/**\n* Check if an object looks like a Serializable instance (duck typing).\n*/\nfunction isSerializableLike(obj) {\n\treturn obj !== null && typeof obj === \"object\" && \"lc_serializable\" in obj && typeof obj.toJSON === \"function\";\n}\n/**\n* Create a \"not_implemented\" serialization result for objects that cannot be serialized.\n*/\nfunction createNotImplemented(obj) {\n\tlet id;\n\tif (obj !== null && typeof obj === \"object\") if (\"lc_id\" in obj && Array.isArray(obj.lc_id)) id = obj.lc_id;\n\telse id = [obj.constructor?.name ?? \"Object\"];\n\telse id = [typeof obj];\n\treturn {\n\t\tlc: 1,\n\t\ttype: \"not_implemented\",\n\t\tid\n\t};\n}\n/**\n* Escape a value if it needs escaping (contains `lc` key).\n*\n* This is a simpler version of `serializeValue` that doesn't handle Serializable\n* objects - it's meant to be called on kwargs values that have already been\n* processed by `toJSON()`.\n*\n* @param value - The value to potentially escape.\n* @param pathSet - WeakSet to track ancestor objects in the current path to detect circular references.\n*                  Objects are removed after processing to allow shared references (same object in\n*                  multiple places) while still detecting true circular references (ancestor in descendant).\n* @returns The value with any `lc`-containing objects wrapped in escape markers.\n*/\nfunction escapeIfNeeded(value, pathSet = /* @__PURE__ */ new WeakSet()) {\n\tif (value !== null && typeof value === \"object\" && !Array.isArray(value)) {\n\t\tif (pathSet.has(value)) return createNotImplemented(value);\n\t\tif (isSerializableLike(value)) return value;\n\t\tpathSet.add(value);\n\t\tconst record = value;\n\t\tif (needsEscaping(record)) {\n\t\t\tpathSet.delete(value);\n\t\t\treturn escapeObject(record);\n\t\t}\n\t\tconst result = {};\n\t\tfor (const [key, val] of Object.entries(record)) result[key] = escapeIfNeeded(val, pathSet);\n\t\tpathSet.delete(value);\n\t\treturn result;\n\t}\n\tif (Array.isArray(value)) return value.map((item) => escapeIfNeeded(item, pathSet));\n\treturn value;\n}\n/**\n* Unescape a value, processing escape markers in object values and arrays.\n*\n* When an escaped object is encountered (`{\"__lc_escaped__\": ...}`), it's\n* unwrapped and the contents are returned AS-IS (no further processing).\n* The contents represent user data that should not be modified.\n*\n* For regular objects and arrays, we recurse to find any nested escape markers.\n*\n* @param obj - The value to unescape.\n* @returns The unescaped value.\n*/\nfunction unescapeValue(obj) {\n\tif (obj !== null && typeof obj === \"object\" && !Array.isArray(obj)) {\n\t\tconst record = obj;\n\t\tif (isEscapedObject(record)) return record[LC_ESCAPED_KEY];\n\t\tconst result = {};\n\t\tfor (const [key, value] of Object.entries(record)) result[key] = unescapeValue(value);\n\t\treturn result;\n\t}\n\tif (Array.isArray(obj)) return obj.map((item) => unescapeValue(item));\n\treturn obj;\n}\n\n//#endregion\n\n//# sourceMappingURL=validation.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbG9hZC92YWxpZGF0aW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsbUJBQW1CLGdCQUFnQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxpQkFBaUIsWUFBWSxtQkFBbUI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsbUJBQW1CLE9BQU87QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxzQkFBc0I7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDMEQ7QUFDMUQiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9sb2FkL3ZhbGlkYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9sb2FkL3ZhbGlkYXRpb24udHNcbi8qKlxuKiBTZW50aW5lbCBrZXkgdXNlZCB0byBtYXJrIGVzY2FwZWQgdXNlciBvYmplY3RzIGR1cmluZyBzZXJpYWxpemF0aW9uLlxuKlxuKiBXaGVuIGEgcGxhaW4gb2JqZWN0IGNvbnRhaW5zICdsYycga2V5ICh3aGljaCBjb3VsZCBiZSBjb25mdXNlZCB3aXRoIExDIG9iamVjdHMpLFxuKiB3ZSB3cmFwIGl0IGFzIGB7XCJfX2xjX2VzY2FwZWRfX1wiOiB7Li4ub3JpZ2luYWwuLi59fWAuXG4qL1xuY29uc3QgTENfRVNDQVBFRF9LRVkgPSBcIl9fbGNfZXNjYXBlZF9fXCI7XG4vKipcbiogQ2hlY2sgaWYgYW4gb2JqZWN0IG5lZWRzIGVzY2FwaW5nIHRvIHByZXZlbnQgY29uZnVzaW9uIHdpdGggTEMgb2JqZWN0cy5cbipcbiogQW4gb2JqZWN0IG5lZWRzIGVzY2FwaW5nIGlmOlxuKiAxLiBJdCBoYXMgYW4gYCdsYydgIGtleSAoY291bGQgYmUgY29uZnVzZWQgd2l0aCBMQyBzZXJpYWxpemF0aW9uIGZvcm1hdClcbiogMi4gSXQgaGFzIG9ubHkgdGhlIGVzY2FwZSBrZXkgKHdvdWxkIGJlIG1pc3Rha2VuIGZvciBhbiBlc2NhcGVkIG9iamVjdClcbiovXG5mdW5jdGlvbiBuZWVkc0VzY2FwaW5nKG9iaikge1xuXHRyZXR1cm4gXCJsY1wiIGluIG9iaiB8fCBPYmplY3Qua2V5cyhvYmopLmxlbmd0aCA9PT0gMSAmJiBMQ19FU0NBUEVEX0tFWSBpbiBvYmo7XG59XG4vKipcbiogV3JhcCBhbiBvYmplY3QgaW4gdGhlIGVzY2FwZSBtYXJrZXIuXG4qXG4qIEBleGFtcGxlXG4qIGBgYHR5cGVzY3JpcHRcbioge1wia2V5XCI6IFwidmFsdWVcIn0gIC8vIGJlY29tZXMge1wiX19sY19lc2NhcGVkX19cIjoge1wia2V5XCI6IFwidmFsdWVcIn19XG4qIGBgYFxuKi9cbmZ1bmN0aW9uIGVzY2FwZU9iamVjdChvYmopIHtcblx0cmV0dXJuIHsgW0xDX0VTQ0FQRURfS0VZXTogb2JqIH07XG59XG4vKipcbiogQ2hlY2sgaWYgYW4gb2JqZWN0IGlzIGFuIGVzY2FwZWQgdXNlciBvYmplY3QuXG4qXG4qIEBleGFtcGxlXG4qIGBgYHR5cGVzY3JpcHRcbioge1wiX19sY19lc2NhcGVkX19cIjogey4uLn19ICAvLyBpcyBhbiBlc2NhcGVkIG9iamVjdFxuKiBgYGBcbiovXG5mdW5jdGlvbiBpc0VzY2FwZWRPYmplY3Qob2JqKSB7XG5cdHJldHVybiBPYmplY3Qua2V5cyhvYmopLmxlbmd0aCA9PT0gMSAmJiBMQ19FU0NBUEVEX0tFWSBpbiBvYmo7XG59XG4vKipcbiogQ2hlY2sgaWYgYW4gb2JqZWN0IGxvb2tzIGxpa2UgYSBTZXJpYWxpemFibGUgaW5zdGFuY2UgKGR1Y2sgdHlwaW5nKS5cbiovXG5mdW5jdGlvbiBpc1NlcmlhbGl6YWJsZUxpa2Uob2JqKSB7XG5cdHJldHVybiBvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJiBcImxjX3NlcmlhbGl6YWJsZVwiIGluIG9iaiAmJiB0eXBlb2Ygb2JqLnRvSlNPTiA9PT0gXCJmdW5jdGlvblwiO1xufVxuLyoqXG4qIENyZWF0ZSBhIFwibm90X2ltcGxlbWVudGVkXCIgc2VyaWFsaXphdGlvbiByZXN1bHQgZm9yIG9iamVjdHMgdGhhdCBjYW5ub3QgYmUgc2VyaWFsaXplZC5cbiovXG5mdW5jdGlvbiBjcmVhdGVOb3RJbXBsZW1lbnRlZChvYmopIHtcblx0bGV0IGlkO1xuXHRpZiAob2JqICE9PSBudWxsICYmIHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIpIGlmIChcImxjX2lkXCIgaW4gb2JqICYmIEFycmF5LmlzQXJyYXkob2JqLmxjX2lkKSkgaWQgPSBvYmoubGNfaWQ7XG5cdGVsc2UgaWQgPSBbb2JqLmNvbnN0cnVjdG9yPy5uYW1lID8/IFwiT2JqZWN0XCJdO1xuXHRlbHNlIGlkID0gW3R5cGVvZiBvYmpdO1xuXHRyZXR1cm4ge1xuXHRcdGxjOiAxLFxuXHRcdHR5cGU6IFwibm90X2ltcGxlbWVudGVkXCIsXG5cdFx0aWRcblx0fTtcbn1cbi8qKlxuKiBFc2NhcGUgYSB2YWx1ZSBpZiBpdCBuZWVkcyBlc2NhcGluZyAoY29udGFpbnMgYGxjYCBrZXkpLlxuKlxuKiBUaGlzIGlzIGEgc2ltcGxlciB2ZXJzaW9uIG9mIGBzZXJpYWxpemVWYWx1ZWAgdGhhdCBkb2Vzbid0IGhhbmRsZSBTZXJpYWxpemFibGVcbiogb2JqZWN0cyAtIGl0J3MgbWVhbnQgdG8gYmUgY2FsbGVkIG9uIGt3YXJncyB2YWx1ZXMgdGhhdCBoYXZlIGFscmVhZHkgYmVlblxuKiBwcm9jZXNzZWQgYnkgYHRvSlNPTigpYC5cbipcbiogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHBvdGVudGlhbGx5IGVzY2FwZS5cbiogQHBhcmFtIHBhdGhTZXQgLSBXZWFrU2V0IHRvIHRyYWNrIGFuY2VzdG9yIG9iamVjdHMgaW4gdGhlIGN1cnJlbnQgcGF0aCB0byBkZXRlY3QgY2lyY3VsYXIgcmVmZXJlbmNlcy5cbiogICAgICAgICAgICAgICAgICBPYmplY3RzIGFyZSByZW1vdmVkIGFmdGVyIHByb2Nlc3NpbmcgdG8gYWxsb3cgc2hhcmVkIHJlZmVyZW5jZXMgKHNhbWUgb2JqZWN0IGluXG4qICAgICAgICAgICAgICAgICAgbXVsdGlwbGUgcGxhY2VzKSB3aGlsZSBzdGlsbCBkZXRlY3RpbmcgdHJ1ZSBjaXJjdWxhciByZWZlcmVuY2VzIChhbmNlc3RvciBpbiBkZXNjZW5kYW50KS5cbiogQHJldHVybnMgVGhlIHZhbHVlIHdpdGggYW55IGBsY2AtY29udGFpbmluZyBvYmplY3RzIHdyYXBwZWQgaW4gZXNjYXBlIG1hcmtlcnMuXG4qL1xuZnVuY3Rpb24gZXNjYXBlSWZOZWVkZWQodmFsdWUsIHBhdGhTZXQgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtTZXQoKSkge1xuXHRpZiAodmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmICFBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuXHRcdGlmIChwYXRoU2V0Lmhhcyh2YWx1ZSkpIHJldHVybiBjcmVhdGVOb3RJbXBsZW1lbnRlZCh2YWx1ZSk7XG5cdFx0aWYgKGlzU2VyaWFsaXphYmxlTGlrZSh2YWx1ZSkpIHJldHVybiB2YWx1ZTtcblx0XHRwYXRoU2V0LmFkZCh2YWx1ZSk7XG5cdFx0Y29uc3QgcmVjb3JkID0gdmFsdWU7XG5cdFx0aWYgKG5lZWRzRXNjYXBpbmcocmVjb3JkKSkge1xuXHRcdFx0cGF0aFNldC5kZWxldGUodmFsdWUpO1xuXHRcdFx0cmV0dXJuIGVzY2FwZU9iamVjdChyZWNvcmQpO1xuXHRcdH1cblx0XHRjb25zdCByZXN1bHQgPSB7fTtcblx0XHRmb3IgKGNvbnN0IFtrZXksIHZhbF0gb2YgT2JqZWN0LmVudHJpZXMocmVjb3JkKSkgcmVzdWx0W2tleV0gPSBlc2NhcGVJZk5lZWRlZCh2YWwsIHBhdGhTZXQpO1xuXHRcdHBhdGhTZXQuZGVsZXRlKHZhbHVlKTtcblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9XG5cdGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgcmV0dXJuIHZhbHVlLm1hcCgoaXRlbSkgPT4gZXNjYXBlSWZOZWVkZWQoaXRlbSwgcGF0aFNldCkpO1xuXHRyZXR1cm4gdmFsdWU7XG59XG4vKipcbiogVW5lc2NhcGUgYSB2YWx1ZSwgcHJvY2Vzc2luZyBlc2NhcGUgbWFya2VycyBpbiBvYmplY3QgdmFsdWVzIGFuZCBhcnJheXMuXG4qXG4qIFdoZW4gYW4gZXNjYXBlZCBvYmplY3QgaXMgZW5jb3VudGVyZWQgKGB7XCJfX2xjX2VzY2FwZWRfX1wiOiAuLi59YCksIGl0J3NcbiogdW53cmFwcGVkIGFuZCB0aGUgY29udGVudHMgYXJlIHJldHVybmVkIEFTLUlTIChubyBmdXJ0aGVyIHByb2Nlc3NpbmcpLlxuKiBUaGUgY29udGVudHMgcmVwcmVzZW50IHVzZXIgZGF0YSB0aGF0IHNob3VsZCBub3QgYmUgbW9kaWZpZWQuXG4qXG4qIEZvciByZWd1bGFyIG9iamVjdHMgYW5kIGFycmF5cywgd2UgcmVjdXJzZSB0byBmaW5kIGFueSBuZXN0ZWQgZXNjYXBlIG1hcmtlcnMuXG4qXG4qIEBwYXJhbSBvYmogLSBUaGUgdmFsdWUgdG8gdW5lc2NhcGUuXG4qIEByZXR1cm5zIFRoZSB1bmVzY2FwZWQgdmFsdWUuXG4qL1xuZnVuY3Rpb24gdW5lc2NhcGVWYWx1ZShvYmopIHtcblx0aWYgKG9iaiAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiICYmICFBcnJheS5pc0FycmF5KG9iaikpIHtcblx0XHRjb25zdCByZWNvcmQgPSBvYmo7XG5cdFx0aWYgKGlzRXNjYXBlZE9iamVjdChyZWNvcmQpKSByZXR1cm4gcmVjb3JkW0xDX0VTQ0FQRURfS0VZXTtcblx0XHRjb25zdCByZXN1bHQgPSB7fTtcblx0XHRmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhyZWNvcmQpKSByZXN1bHRba2V5XSA9IHVuZXNjYXBlVmFsdWUodmFsdWUpO1xuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblx0aWYgKEFycmF5LmlzQXJyYXkob2JqKSkgcmV0dXJuIG9iai5tYXAoKGl0ZW0pID0+IHVuZXNjYXBlVmFsdWUoaXRlbSkpO1xuXHRyZXR1cm4gb2JqO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGVzY2FwZUlmTmVlZGVkLCBpc0VzY2FwZWRPYmplY3QsIHVuZXNjYXBlVmFsdWUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZhbGlkYXRpb24uanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/load/validation.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/memory.js":
/*!*****************************************************!*\
  !*** ./node_modules/@langchain/core/dist/memory.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseMemory: () => (/* binding */ BaseMemory),\n/* harmony export */   getInputValue: () => (/* binding */ getInputValue),\n/* harmony export */   getOutputValue: () => (/* binding */ getOutputValue),\n/* harmony export */   getPromptInputKey: () => (/* binding */ getPromptInputKey),\n/* harmony export */   memory_exports: () => (/* binding */ memory_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n\n\n//#region src/memory.ts\nvar memory_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(memory_exports, {\n\tBaseMemory: () => BaseMemory,\n\tgetInputValue: () => getInputValue,\n\tgetOutputValue: () => getOutputValue,\n\tgetPromptInputKey: () => getPromptInputKey\n});\n/**\n* Abstract base class for memory in LangChain's Chains. Memory refers to\n* the state in Chains. It can be used to store information about past\n* executions of a Chain and inject that information into the inputs of\n* future executions of the Chain.\n*/\nvar BaseMemory = class {};\nconst getValue = (values, key) => {\n\tif (key !== void 0) return values[key];\n\tconst keys = Object.keys(values);\n\tif (keys.length === 1) return values[keys[0]];\n};\n/**\n* This function is used by memory classes to select the input value\n* to use for the memory. If there is only one input value, it is used.\n* If there are multiple input values, the inputKey must be specified.\n*/\nconst getInputValue = (inputValues, inputKey) => {\n\tconst value = getValue(inputValues, inputKey);\n\tif (!value) {\n\t\tconst keys = Object.keys(inputValues);\n\t\tthrow new Error(`input values have ${keys.length} keys, you must specify an input key or pass only 1 key as input`);\n\t}\n\treturn value;\n};\n/**\n* This function is used by memory classes to select the output value\n* to use for the memory. If there is only one output value, it is used.\n* If there are multiple output values, the outputKey must be specified.\n* If no outputKey is specified, an error is thrown.\n*/\nconst getOutputValue = (outputValues, outputKey) => {\n\tconst value = getValue(outputValues, outputKey);\n\tif (!value && value !== \"\") {\n\t\tconst keys = Object.keys(outputValues);\n\t\tthrow new Error(`output values have ${keys.length} keys, you must specify an output key or pass only 1 key as output`);\n\t}\n\treturn value;\n};\n/**\n* Function used by memory classes to get the key of the prompt input,\n* excluding any keys that are memory variables or the \"stop\" key. If\n* there is not exactly one prompt input key, an error is thrown.\n*/\nfunction getPromptInputKey(inputs, memoryVariables) {\n\tconst promptInputKeys = Object.keys(inputs).filter((key) => !memoryVariables.includes(key) && key !== \"stop\");\n\tif (promptInputKeys.length !== 1) throw new Error(`One input key expected, but got ${promptInputKeys.length}`);\n\treturn promptInputKeys[0];\n}\n\n//#endregion\n\n//# sourceMappingURL=memory.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVtb3J5LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUEwRDs7QUFFMUQ7QUFDQTtBQUNBLHNFQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLGFBQWE7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsYUFBYTtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNGQUFzRix1QkFBdUI7QUFDN0c7QUFDQTs7QUFFQTtBQUN3RjtBQUN4RiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lbW9yeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4cG9ydCB9IGZyb20gXCIuL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9tZW1vcnkudHNcbnZhciBtZW1vcnlfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQobWVtb3J5X2V4cG9ydHMsIHtcblx0QmFzZU1lbW9yeTogKCkgPT4gQmFzZU1lbW9yeSxcblx0Z2V0SW5wdXRWYWx1ZTogKCkgPT4gZ2V0SW5wdXRWYWx1ZSxcblx0Z2V0T3V0cHV0VmFsdWU6ICgpID0+IGdldE91dHB1dFZhbHVlLFxuXHRnZXRQcm9tcHRJbnB1dEtleTogKCkgPT4gZ2V0UHJvbXB0SW5wdXRLZXlcbn0pO1xuLyoqXG4qIEFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIG1lbW9yeSBpbiBMYW5nQ2hhaW4ncyBDaGFpbnMuIE1lbW9yeSByZWZlcnMgdG9cbiogdGhlIHN0YXRlIGluIENoYWlucy4gSXQgY2FuIGJlIHVzZWQgdG8gc3RvcmUgaW5mb3JtYXRpb24gYWJvdXQgcGFzdFxuKiBleGVjdXRpb25zIG9mIGEgQ2hhaW4gYW5kIGluamVjdCB0aGF0IGluZm9ybWF0aW9uIGludG8gdGhlIGlucHV0cyBvZlxuKiBmdXR1cmUgZXhlY3V0aW9ucyBvZiB0aGUgQ2hhaW4uXG4qL1xudmFyIEJhc2VNZW1vcnkgPSBjbGFzcyB7fTtcbmNvbnN0IGdldFZhbHVlID0gKHZhbHVlcywga2V5KSA9PiB7XG5cdGlmIChrZXkgIT09IHZvaWQgMCkgcmV0dXJuIHZhbHVlc1trZXldO1xuXHRjb25zdCBrZXlzID0gT2JqZWN0LmtleXModmFsdWVzKTtcblx0aWYgKGtleXMubGVuZ3RoID09PSAxKSByZXR1cm4gdmFsdWVzW2tleXNbMF1dO1xufTtcbi8qKlxuKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgYnkgbWVtb3J5IGNsYXNzZXMgdG8gc2VsZWN0IHRoZSBpbnB1dCB2YWx1ZVxuKiB0byB1c2UgZm9yIHRoZSBtZW1vcnkuIElmIHRoZXJlIGlzIG9ubHkgb25lIGlucHV0IHZhbHVlLCBpdCBpcyB1c2VkLlxuKiBJZiB0aGVyZSBhcmUgbXVsdGlwbGUgaW5wdXQgdmFsdWVzLCB0aGUgaW5wdXRLZXkgbXVzdCBiZSBzcGVjaWZpZWQuXG4qL1xuY29uc3QgZ2V0SW5wdXRWYWx1ZSA9IChpbnB1dFZhbHVlcywgaW5wdXRLZXkpID0+IHtcblx0Y29uc3QgdmFsdWUgPSBnZXRWYWx1ZShpbnB1dFZhbHVlcywgaW5wdXRLZXkpO1xuXHRpZiAoIXZhbHVlKSB7XG5cdFx0Y29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGlucHV0VmFsdWVzKTtcblx0XHR0aHJvdyBuZXcgRXJyb3IoYGlucHV0IHZhbHVlcyBoYXZlICR7a2V5cy5sZW5ndGh9IGtleXMsIHlvdSBtdXN0IHNwZWNpZnkgYW4gaW5wdXQga2V5IG9yIHBhc3Mgb25seSAxIGtleSBhcyBpbnB1dGApO1xuXHR9XG5cdHJldHVybiB2YWx1ZTtcbn07XG4vKipcbiogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGJ5IG1lbW9yeSBjbGFzc2VzIHRvIHNlbGVjdCB0aGUgb3V0cHV0IHZhbHVlXG4qIHRvIHVzZSBmb3IgdGhlIG1lbW9yeS4gSWYgdGhlcmUgaXMgb25seSBvbmUgb3V0cHV0IHZhbHVlLCBpdCBpcyB1c2VkLlxuKiBJZiB0aGVyZSBhcmUgbXVsdGlwbGUgb3V0cHV0IHZhbHVlcywgdGhlIG91dHB1dEtleSBtdXN0IGJlIHNwZWNpZmllZC5cbiogSWYgbm8gb3V0cHV0S2V5IGlzIHNwZWNpZmllZCwgYW4gZXJyb3IgaXMgdGhyb3duLlxuKi9cbmNvbnN0IGdldE91dHB1dFZhbHVlID0gKG91dHB1dFZhbHVlcywgb3V0cHV0S2V5KSA9PiB7XG5cdGNvbnN0IHZhbHVlID0gZ2V0VmFsdWUob3V0cHV0VmFsdWVzLCBvdXRwdXRLZXkpO1xuXHRpZiAoIXZhbHVlICYmIHZhbHVlICE9PSBcIlwiKSB7XG5cdFx0Y29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG91dHB1dFZhbHVlcyk7XG5cdFx0dGhyb3cgbmV3IEVycm9yKGBvdXRwdXQgdmFsdWVzIGhhdmUgJHtrZXlzLmxlbmd0aH0ga2V5cywgeW91IG11c3Qgc3BlY2lmeSBhbiBvdXRwdXQga2V5IG9yIHBhc3Mgb25seSAxIGtleSBhcyBvdXRwdXRgKTtcblx0fVxuXHRyZXR1cm4gdmFsdWU7XG59O1xuLyoqXG4qIEZ1bmN0aW9uIHVzZWQgYnkgbWVtb3J5IGNsYXNzZXMgdG8gZ2V0IHRoZSBrZXkgb2YgdGhlIHByb21wdCBpbnB1dCxcbiogZXhjbHVkaW5nIGFueSBrZXlzIHRoYXQgYXJlIG1lbW9yeSB2YXJpYWJsZXMgb3IgdGhlIFwic3RvcFwiIGtleS4gSWZcbiogdGhlcmUgaXMgbm90IGV4YWN0bHkgb25lIHByb21wdCBpbnB1dCBrZXksIGFuIGVycm9yIGlzIHRocm93bi5cbiovXG5mdW5jdGlvbiBnZXRQcm9tcHRJbnB1dEtleShpbnB1dHMsIG1lbW9yeVZhcmlhYmxlcykge1xuXHRjb25zdCBwcm9tcHRJbnB1dEtleXMgPSBPYmplY3Qua2V5cyhpbnB1dHMpLmZpbHRlcigoa2V5KSA9PiAhbWVtb3J5VmFyaWFibGVzLmluY2x1ZGVzKGtleSkgJiYga2V5ICE9PSBcInN0b3BcIik7XG5cdGlmIChwcm9tcHRJbnB1dEtleXMubGVuZ3RoICE9PSAxKSB0aHJvdyBuZXcgRXJyb3IoYE9uZSBpbnB1dCBrZXkgZXhwZWN0ZWQsIGJ1dCBnb3QgJHtwcm9tcHRJbnB1dEtleXMubGVuZ3RofWApO1xuXHRyZXR1cm4gcHJvbXB0SW5wdXRLZXlzWzBdO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEJhc2VNZW1vcnksIGdldElucHV0VmFsdWUsIGdldE91dHB1dFZhbHVlLCBnZXRQcm9tcHRJbnB1dEtleSwgbWVtb3J5X2V4cG9ydHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lbW9yeS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/memory.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/messages/ai.js":
/*!**********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/ai.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessage: () => (/* binding */ AIMessage),\n/* harmony export */   AIMessageChunk: () => (/* binding */ AIMessageChunk),\n/* harmony export */   isAIMessage: () => (/* binding */ isAIMessage),\n/* harmony export */   isAIMessageChunk: () => (/* binding */ isAIMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _block_translators_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./block_translators/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/index.js\");\n/* harmony import */ var _metadata_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./metadata.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/metadata.js\");\n/* harmony import */ var _tool_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./tool.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/tool.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/utils.js\");\n\n\n\n\n\n\n//#region src/messages/ai.ts\nvar AIMessage = class extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n\ttype = \"ai\";\n\ttool_calls = [];\n\tinvalid_tool_calls = [];\n\tusage_metadata;\n\tget lc_aliases() {\n\t\treturn {\n\t\t\t...super.lc_aliases,\n\t\t\ttool_calls: \"tool_calls\",\n\t\t\tinvalid_tool_calls: \"invalid_tool_calls\"\n\t\t};\n\t}\n\tconstructor(fields) {\n\t\tlet initParams;\n\t\tif (typeof fields === \"string\" || Array.isArray(fields)) initParams = {\n\t\t\tcontent: fields,\n\t\t\ttool_calls: [],\n\t\t\tinvalid_tool_calls: [],\n\t\t\tadditional_kwargs: {}\n\t\t};\n\t\telse {\n\t\t\tinitParams = fields;\n\t\t\tconst rawToolCalls = initParams.additional_kwargs?.tool_calls;\n\t\t\tconst toolCalls = initParams.tool_calls;\n\t\t\tif (!(rawToolCalls == null) && rawToolCalls.length > 0 && (toolCalls === void 0 || toolCalls.length === 0)) console.warn([\n\t\t\t\t\"New LangChain packages are available that more efficiently handle\",\n\t\t\t\t\"tool calling.\\n\\nPlease upgrade your packages to versions that set\",\n\t\t\t\t\"message tool calls. e.g., `pnpm install @langchain/anthropic`,\",\n\t\t\t\t\"pnpm install @langchain/openai`, etc.\"\n\t\t\t].join(\" \"));\n\t\t\ttry {\n\t\t\t\tif (!(rawToolCalls == null) && toolCalls === void 0) {\n\t\t\t\t\tconst [parsedToolCalls, invalidToolCalls] = (0,_tool_js__WEBPACK_IMPORTED_MODULE_3__.defaultToolCallParser)(rawToolCalls);\n\t\t\t\t\tinitParams.tool_calls = parsedToolCalls ?? [];\n\t\t\t\t\tinitParams.invalid_tool_calls = invalidToolCalls ?? [];\n\t\t\t\t} else {\n\t\t\t\t\tinitParams.tool_calls = initParams.tool_calls ?? [];\n\t\t\t\t\tinitParams.invalid_tool_calls = initParams.invalid_tool_calls ?? [];\n\t\t\t\t}\n\t\t\t} catch {\n\t\t\t\tinitParams.tool_calls = [];\n\t\t\t\tinitParams.invalid_tool_calls = [];\n\t\t\t}\n\t\t\tif (initParams.response_metadata !== void 0 && \"output_version\" in initParams.response_metadata && initParams.response_metadata.output_version === \"v1\") {\n\t\t\t\tinitParams.contentBlocks = initParams.content;\n\t\t\t\tinitParams.content = void 0;\n\t\t\t}\n\t\t\tif (initParams.contentBlocks !== void 0) {\n\t\t\t\tif (initParams.tool_calls) initParams.contentBlocks.push(...initParams.tool_calls.map((toolCall) => ({\n\t\t\t\t\ttype: \"tool_call\",\n\t\t\t\t\tid: toolCall.id,\n\t\t\t\t\tname: toolCall.name,\n\t\t\t\t\targs: toolCall.args\n\t\t\t\t})));\n\t\t\t\tconst missingToolCalls = initParams.contentBlocks.filter((block) => block.type === \"tool_call\").filter((block) => !initParams.tool_calls?.some((toolCall) => toolCall.id === block.id && toolCall.name === block.name));\n\t\t\t\tif (missingToolCalls.length > 0) initParams.tool_calls = missingToolCalls.map((block) => ({\n\t\t\t\t\ttype: \"tool_call\",\n\t\t\t\t\tid: block.id,\n\t\t\t\t\tname: block.name,\n\t\t\t\t\targs: block.args\n\t\t\t\t}));\n\t\t\t}\n\t\t}\n\t\tsuper(initParams);\n\t\tif (typeof initParams !== \"string\") {\n\t\t\tthis.tool_calls = initParams.tool_calls ?? this.tool_calls;\n\t\t\tthis.invalid_tool_calls = initParams.invalid_tool_calls ?? this.invalid_tool_calls;\n\t\t}\n\t\tthis.usage_metadata = initParams.usage_metadata;\n\t}\n\tstatic lc_name() {\n\t\treturn \"AIMessage\";\n\t}\n\tget contentBlocks() {\n\t\tif (this.response_metadata && \"output_version\" in this.response_metadata && this.response_metadata.output_version === \"v1\") return this.content;\n\t\tif (this.response_metadata && \"model_provider\" in this.response_metadata && typeof this.response_metadata.model_provider === \"string\") {\n\t\t\tconst translator = (0,_block_translators_index_js__WEBPACK_IMPORTED_MODULE_1__.getTranslator)(this.response_metadata.model_provider);\n\t\t\tif (translator) return translator.translateContent(this);\n\t\t}\n\t\tconst blocks = super.contentBlocks;\n\t\tif (this.tool_calls) {\n\t\t\tconst missingToolCalls = this.tool_calls.filter((block) => !blocks.some((b) => b.id === block.id && b.name === block.name));\n\t\t\tblocks.push(...missingToolCalls.map((block) => ({\n\t\t\t\ttype: \"tool_call\",\n\t\t\t\tid: block.id,\n\t\t\t\tname: block.name,\n\t\t\t\targs: block.args\n\t\t\t})));\n\t\t}\n\t\treturn blocks;\n\t}\n\tget _printableFields() {\n\t\treturn {\n\t\t\t...super._printableFields,\n\t\t\ttool_calls: this.tool_calls,\n\t\t\tinvalid_tool_calls: this.invalid_tool_calls,\n\t\t\tusage_metadata: this.usage_metadata\n\t\t};\n\t}\n\tstatic isInstance(obj) {\n\t\treturn super.isInstance(obj) && obj.type === \"ai\";\n\t}\n};\n/**\n* @deprecated Use {@link AIMessage.isInstance} instead\n*/\nfunction isAIMessage(x) {\n\treturn x._getType() === \"ai\";\n}\n/**\n* @deprecated Use {@link AIMessageChunk.isInstance} instead\n*/\nfunction isAIMessageChunk(x) {\n\treturn x._getType() === \"ai\";\n}\n/**\n* Represents a chunk of an AI message, which can be concatenated with\n* other AI message chunks.\n*/\nvar AIMessageChunk = class extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n\ttype = \"ai\";\n\ttool_calls = [];\n\tinvalid_tool_calls = [];\n\ttool_call_chunks = [];\n\tusage_metadata;\n\tconstructor(fields) {\n\t\tlet initParams;\n\t\tif (typeof fields === \"string\" || Array.isArray(fields)) initParams = {\n\t\t\tcontent: fields,\n\t\t\ttool_calls: [],\n\t\t\tinvalid_tool_calls: [],\n\t\t\ttool_call_chunks: []\n\t\t};\n\t\telse if (fields.tool_call_chunks === void 0 || fields.tool_call_chunks.length === 0) initParams = {\n\t\t\t...fields,\n\t\t\ttool_calls: fields.tool_calls ?? [],\n\t\t\tinvalid_tool_calls: [],\n\t\t\ttool_call_chunks: [],\n\t\t\tusage_metadata: fields.usage_metadata !== void 0 ? fields.usage_metadata : void 0\n\t\t};\n\t\telse {\n\t\t\tconst collapsed = (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.collapseToolCallChunks)(fields.tool_call_chunks ?? []);\n\t\t\tinitParams = {\n\t\t\t\t...fields,\n\t\t\t\ttool_call_chunks: collapsed.tool_call_chunks,\n\t\t\t\ttool_calls: collapsed.tool_calls,\n\t\t\t\tinvalid_tool_calls: collapsed.invalid_tool_calls,\n\t\t\t\tusage_metadata: fields.usage_metadata !== void 0 ? fields.usage_metadata : void 0\n\t\t\t};\n\t\t}\n\t\tsuper(initParams);\n\t\tthis.tool_call_chunks = initParams.tool_call_chunks ?? this.tool_call_chunks;\n\t\tthis.tool_calls = initParams.tool_calls ?? this.tool_calls;\n\t\tthis.invalid_tool_calls = initParams.invalid_tool_calls ?? this.invalid_tool_calls;\n\t\tthis.usage_metadata = initParams.usage_metadata;\n\t}\n\tget lc_aliases() {\n\t\treturn {\n\t\t\t...super.lc_aliases,\n\t\t\ttool_calls: \"tool_calls\",\n\t\t\tinvalid_tool_calls: \"invalid_tool_calls\",\n\t\t\ttool_call_chunks: \"tool_call_chunks\"\n\t\t};\n\t}\n\tstatic lc_name() {\n\t\treturn \"AIMessageChunk\";\n\t}\n\tget contentBlocks() {\n\t\tif (this.response_metadata && \"output_version\" in this.response_metadata && this.response_metadata.output_version === \"v1\") return this.content;\n\t\tif (this.response_metadata && \"model_provider\" in this.response_metadata && typeof this.response_metadata.model_provider === \"string\") {\n\t\t\tconst translator = (0,_block_translators_index_js__WEBPACK_IMPORTED_MODULE_1__.getTranslator)(this.response_metadata.model_provider);\n\t\t\tif (translator) return translator.translateContent(this);\n\t\t}\n\t\tconst blocks = super.contentBlocks;\n\t\tif (this.tool_calls) {\n\t\t\tif (typeof this.content !== \"string\") {\n\t\t\t\tconst contentToolCalls = this.content.filter((block) => block.type === \"tool_call\").map((block) => block.id);\n\t\t\t\tfor (const toolCall of this.tool_calls) if (toolCall.id && !contentToolCalls.includes(toolCall.id)) blocks.push({\n\t\t\t\t\t...toolCall,\n\t\t\t\t\ttype: \"tool_call\",\n\t\t\t\t\tid: toolCall.id,\n\t\t\t\t\tname: toolCall.name,\n\t\t\t\t\targs: toolCall.args\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn blocks;\n\t}\n\tget _printableFields() {\n\t\treturn {\n\t\t\t...super._printableFields,\n\t\t\ttool_calls: this.tool_calls,\n\t\t\ttool_call_chunks: this.tool_call_chunks,\n\t\t\tinvalid_tool_calls: this.invalid_tool_calls,\n\t\t\tusage_metadata: this.usage_metadata\n\t\t};\n\t}\n\tconcat(chunk) {\n\t\tconst combinedFields = {\n\t\t\tcontent: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n\t\t\tadditional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n\t\t\tresponse_metadata: (0,_metadata_js__WEBPACK_IMPORTED_MODULE_2__.mergeResponseMetadata)(this.response_metadata, chunk.response_metadata),\n\t\t\ttool_call_chunks: [],\n\t\t\tid: this.id ?? chunk.id\n\t\t};\n\t\tif (this.tool_call_chunks !== void 0 || chunk.tool_call_chunks !== void 0) {\n\t\t\tconst rawToolCalls = (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeLists)(this.tool_call_chunks, chunk.tool_call_chunks);\n\t\t\tif (rawToolCalls !== void 0 && rawToolCalls.length > 0) combinedFields.tool_call_chunks = rawToolCalls;\n\t\t}\n\t\tif (this.usage_metadata !== void 0 || chunk.usage_metadata !== void 0) combinedFields.usage_metadata = (0,_metadata_js__WEBPACK_IMPORTED_MODULE_2__.mergeUsageMetadata)(this.usage_metadata, chunk.usage_metadata);\n\t\tconst Cls = this.constructor;\n\t\treturn new Cls(combinedFields);\n\t}\n\tstatic isInstance(obj) {\n\t\treturn super.isInstance(obj) && obj.type === \"ai\";\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=ai.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvYWkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQWtHO0FBQ3JDO0FBQ2E7QUFDeEI7QUFDRTs7QUFFcEQ7QUFDQSw4QkFBOEIsaURBQVc7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsK0RBQXFCO0FBQ3RFO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsMEVBQWE7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNEJBQTRCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsaUNBQWlDO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsc0RBQWdCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixpRUFBc0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsMEVBQWE7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksc0RBQVk7QUFDeEIsc0JBQXNCLHFEQUFXO0FBQ2pDLHNCQUFzQixtRUFBcUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IscURBQVc7QUFDbkM7QUFDQTtBQUNBLHlHQUF5RyxnRUFBa0I7QUFDM0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDb0U7QUFDcEUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9haS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlTWVzc2FnZSwgQmFzZU1lc3NhZ2VDaHVuaywgX21lcmdlRGljdHMsIF9tZXJnZUxpc3RzLCBtZXJnZUNvbnRlbnQgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBnZXRUcmFuc2xhdG9yIH0gZnJvbSBcIi4vYmxvY2tfdHJhbnNsYXRvcnMvaW5kZXguanNcIjtcbmltcG9ydCB7IG1lcmdlUmVzcG9uc2VNZXRhZGF0YSwgbWVyZ2VVc2FnZU1ldGFkYXRhIH0gZnJvbSBcIi4vbWV0YWRhdGEuanNcIjtcbmltcG9ydCB7IGRlZmF1bHRUb29sQ2FsbFBhcnNlciB9IGZyb20gXCIuL3Rvb2wuanNcIjtcbmltcG9ydCB7IGNvbGxhcHNlVG9vbENhbGxDaHVua3MgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL21lc3NhZ2VzL2FpLnRzXG52YXIgQUlNZXNzYWdlID0gY2xhc3MgZXh0ZW5kcyBCYXNlTWVzc2FnZSB7XG5cdHR5cGUgPSBcImFpXCI7XG5cdHRvb2xfY2FsbHMgPSBbXTtcblx0aW52YWxpZF90b29sX2NhbGxzID0gW107XG5cdHVzYWdlX21ldGFkYXRhO1xuXHRnZXQgbGNfYWxpYXNlcygpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0Li4uc3VwZXIubGNfYWxpYXNlcyxcblx0XHRcdHRvb2xfY2FsbHM6IFwidG9vbF9jYWxsc1wiLFxuXHRcdFx0aW52YWxpZF90b29sX2NhbGxzOiBcImludmFsaWRfdG9vbF9jYWxsc1wiXG5cdFx0fTtcblx0fVxuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHRsZXQgaW5pdFBhcmFtcztcblx0XHRpZiAodHlwZW9mIGZpZWxkcyA9PT0gXCJzdHJpbmdcIiB8fCBBcnJheS5pc0FycmF5KGZpZWxkcykpIGluaXRQYXJhbXMgPSB7XG5cdFx0XHRjb250ZW50OiBmaWVsZHMsXG5cdFx0XHR0b29sX2NhbGxzOiBbXSxcblx0XHRcdGludmFsaWRfdG9vbF9jYWxsczogW10sXG5cdFx0XHRhZGRpdGlvbmFsX2t3YXJnczoge31cblx0XHR9O1xuXHRcdGVsc2Uge1xuXHRcdFx0aW5pdFBhcmFtcyA9IGZpZWxkcztcblx0XHRcdGNvbnN0IHJhd1Rvb2xDYWxscyA9IGluaXRQYXJhbXMuYWRkaXRpb25hbF9rd2FyZ3M/LnRvb2xfY2FsbHM7XG5cdFx0XHRjb25zdCB0b29sQ2FsbHMgPSBpbml0UGFyYW1zLnRvb2xfY2FsbHM7XG5cdFx0XHRpZiAoIShyYXdUb29sQ2FsbHMgPT0gbnVsbCkgJiYgcmF3VG9vbENhbGxzLmxlbmd0aCA+IDAgJiYgKHRvb2xDYWxscyA9PT0gdm9pZCAwIHx8IHRvb2xDYWxscy5sZW5ndGggPT09IDApKSBjb25zb2xlLndhcm4oW1xuXHRcdFx0XHRcIk5ldyBMYW5nQ2hhaW4gcGFja2FnZXMgYXJlIGF2YWlsYWJsZSB0aGF0IG1vcmUgZWZmaWNpZW50bHkgaGFuZGxlXCIsXG5cdFx0XHRcdFwidG9vbCBjYWxsaW5nLlxcblxcblBsZWFzZSB1cGdyYWRlIHlvdXIgcGFja2FnZXMgdG8gdmVyc2lvbnMgdGhhdCBzZXRcIixcblx0XHRcdFx0XCJtZXNzYWdlIHRvb2wgY2FsbHMuIGUuZy4sIGBwbnBtIGluc3RhbGwgQGxhbmdjaGFpbi9hbnRocm9waWNgLFwiLFxuXHRcdFx0XHRcInBucG0gaW5zdGFsbCBAbGFuZ2NoYWluL29wZW5haWAsIGV0Yy5cIlxuXHRcdFx0XS5qb2luKFwiIFwiKSk7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRpZiAoIShyYXdUb29sQ2FsbHMgPT0gbnVsbCkgJiYgdG9vbENhbGxzID09PSB2b2lkIDApIHtcblx0XHRcdFx0XHRjb25zdCBbcGFyc2VkVG9vbENhbGxzLCBpbnZhbGlkVG9vbENhbGxzXSA9IGRlZmF1bHRUb29sQ2FsbFBhcnNlcihyYXdUb29sQ2FsbHMpO1xuXHRcdFx0XHRcdGluaXRQYXJhbXMudG9vbF9jYWxscyA9IHBhcnNlZFRvb2xDYWxscyA/PyBbXTtcblx0XHRcdFx0XHRpbml0UGFyYW1zLmludmFsaWRfdG9vbF9jYWxscyA9IGludmFsaWRUb29sQ2FsbHMgPz8gW107XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aW5pdFBhcmFtcy50b29sX2NhbGxzID0gaW5pdFBhcmFtcy50b29sX2NhbGxzID8/IFtdO1xuXHRcdFx0XHRcdGluaXRQYXJhbXMuaW52YWxpZF90b29sX2NhbGxzID0gaW5pdFBhcmFtcy5pbnZhbGlkX3Rvb2xfY2FsbHMgPz8gW107XG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRpbml0UGFyYW1zLnRvb2xfY2FsbHMgPSBbXTtcblx0XHRcdFx0aW5pdFBhcmFtcy5pbnZhbGlkX3Rvb2xfY2FsbHMgPSBbXTtcblx0XHRcdH1cblx0XHRcdGlmIChpbml0UGFyYW1zLnJlc3BvbnNlX21ldGFkYXRhICE9PSB2b2lkIDAgJiYgXCJvdXRwdXRfdmVyc2lvblwiIGluIGluaXRQYXJhbXMucmVzcG9uc2VfbWV0YWRhdGEgJiYgaW5pdFBhcmFtcy5yZXNwb25zZV9tZXRhZGF0YS5vdXRwdXRfdmVyc2lvbiA9PT0gXCJ2MVwiKSB7XG5cdFx0XHRcdGluaXRQYXJhbXMuY29udGVudEJsb2NrcyA9IGluaXRQYXJhbXMuY29udGVudDtcblx0XHRcdFx0aW5pdFBhcmFtcy5jb250ZW50ID0gdm9pZCAwO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGluaXRQYXJhbXMuY29udGVudEJsb2NrcyAhPT0gdm9pZCAwKSB7XG5cdFx0XHRcdGlmIChpbml0UGFyYW1zLnRvb2xfY2FsbHMpIGluaXRQYXJhbXMuY29udGVudEJsb2Nrcy5wdXNoKC4uLmluaXRQYXJhbXMudG9vbF9jYWxscy5tYXAoKHRvb2xDYWxsKSA9PiAoe1xuXHRcdFx0XHRcdHR5cGU6IFwidG9vbF9jYWxsXCIsXG5cdFx0XHRcdFx0aWQ6IHRvb2xDYWxsLmlkLFxuXHRcdFx0XHRcdG5hbWU6IHRvb2xDYWxsLm5hbWUsXG5cdFx0XHRcdFx0YXJnczogdG9vbENhbGwuYXJnc1xuXHRcdFx0XHR9KSkpO1xuXHRcdFx0XHRjb25zdCBtaXNzaW5nVG9vbENhbGxzID0gaW5pdFBhcmFtcy5jb250ZW50QmxvY2tzLmZpbHRlcigoYmxvY2spID0+IGJsb2NrLnR5cGUgPT09IFwidG9vbF9jYWxsXCIpLmZpbHRlcigoYmxvY2spID0+ICFpbml0UGFyYW1zLnRvb2xfY2FsbHM/LnNvbWUoKHRvb2xDYWxsKSA9PiB0b29sQ2FsbC5pZCA9PT0gYmxvY2suaWQgJiYgdG9vbENhbGwubmFtZSA9PT0gYmxvY2submFtZSkpO1xuXHRcdFx0XHRpZiAobWlzc2luZ1Rvb2xDYWxscy5sZW5ndGggPiAwKSBpbml0UGFyYW1zLnRvb2xfY2FsbHMgPSBtaXNzaW5nVG9vbENhbGxzLm1hcCgoYmxvY2spID0+ICh7XG5cdFx0XHRcdFx0dHlwZTogXCJ0b29sX2NhbGxcIixcblx0XHRcdFx0XHRpZDogYmxvY2suaWQsXG5cdFx0XHRcdFx0bmFtZTogYmxvY2submFtZSxcblx0XHRcdFx0XHRhcmdzOiBibG9jay5hcmdzXG5cdFx0XHRcdH0pKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0c3VwZXIoaW5pdFBhcmFtcyk7XG5cdFx0aWYgKHR5cGVvZiBpbml0UGFyYW1zICE9PSBcInN0cmluZ1wiKSB7XG5cdFx0XHR0aGlzLnRvb2xfY2FsbHMgPSBpbml0UGFyYW1zLnRvb2xfY2FsbHMgPz8gdGhpcy50b29sX2NhbGxzO1xuXHRcdFx0dGhpcy5pbnZhbGlkX3Rvb2xfY2FsbHMgPSBpbml0UGFyYW1zLmludmFsaWRfdG9vbF9jYWxscyA/PyB0aGlzLmludmFsaWRfdG9vbF9jYWxscztcblx0XHR9XG5cdFx0dGhpcy51c2FnZV9tZXRhZGF0YSA9IGluaXRQYXJhbXMudXNhZ2VfbWV0YWRhdGE7XG5cdH1cblx0c3RhdGljIGxjX25hbWUoKSB7XG5cdFx0cmV0dXJuIFwiQUlNZXNzYWdlXCI7XG5cdH1cblx0Z2V0IGNvbnRlbnRCbG9ja3MoKSB7XG5cdFx0aWYgKHRoaXMucmVzcG9uc2VfbWV0YWRhdGEgJiYgXCJvdXRwdXRfdmVyc2lvblwiIGluIHRoaXMucmVzcG9uc2VfbWV0YWRhdGEgJiYgdGhpcy5yZXNwb25zZV9tZXRhZGF0YS5vdXRwdXRfdmVyc2lvbiA9PT0gXCJ2MVwiKSByZXR1cm4gdGhpcy5jb250ZW50O1xuXHRcdGlmICh0aGlzLnJlc3BvbnNlX21ldGFkYXRhICYmIFwibW9kZWxfcHJvdmlkZXJcIiBpbiB0aGlzLnJlc3BvbnNlX21ldGFkYXRhICYmIHR5cGVvZiB0aGlzLnJlc3BvbnNlX21ldGFkYXRhLm1vZGVsX3Byb3ZpZGVyID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRjb25zdCB0cmFuc2xhdG9yID0gZ2V0VHJhbnNsYXRvcih0aGlzLnJlc3BvbnNlX21ldGFkYXRhLm1vZGVsX3Byb3ZpZGVyKTtcblx0XHRcdGlmICh0cmFuc2xhdG9yKSByZXR1cm4gdHJhbnNsYXRvci50cmFuc2xhdGVDb250ZW50KHRoaXMpO1xuXHRcdH1cblx0XHRjb25zdCBibG9ja3MgPSBzdXBlci5jb250ZW50QmxvY2tzO1xuXHRcdGlmICh0aGlzLnRvb2xfY2FsbHMpIHtcblx0XHRcdGNvbnN0IG1pc3NpbmdUb29sQ2FsbHMgPSB0aGlzLnRvb2xfY2FsbHMuZmlsdGVyKChibG9jaykgPT4gIWJsb2Nrcy5zb21lKChiKSA9PiBiLmlkID09PSBibG9jay5pZCAmJiBiLm5hbWUgPT09IGJsb2NrLm5hbWUpKTtcblx0XHRcdGJsb2Nrcy5wdXNoKC4uLm1pc3NpbmdUb29sQ2FsbHMubWFwKChibG9jaykgPT4gKHtcblx0XHRcdFx0dHlwZTogXCJ0b29sX2NhbGxcIixcblx0XHRcdFx0aWQ6IGJsb2NrLmlkLFxuXHRcdFx0XHRuYW1lOiBibG9jay5uYW1lLFxuXHRcdFx0XHRhcmdzOiBibG9jay5hcmdzXG5cdFx0XHR9KSkpO1xuXHRcdH1cblx0XHRyZXR1cm4gYmxvY2tzO1xuXHR9XG5cdGdldCBfcHJpbnRhYmxlRmllbGRzKCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHQuLi5zdXBlci5fcHJpbnRhYmxlRmllbGRzLFxuXHRcdFx0dG9vbF9jYWxsczogdGhpcy50b29sX2NhbGxzLFxuXHRcdFx0aW52YWxpZF90b29sX2NhbGxzOiB0aGlzLmludmFsaWRfdG9vbF9jYWxscyxcblx0XHRcdHVzYWdlX21ldGFkYXRhOiB0aGlzLnVzYWdlX21ldGFkYXRhXG5cdFx0fTtcblx0fVxuXHRzdGF0aWMgaXNJbnN0YW5jZShvYmopIHtcblx0XHRyZXR1cm4gc3VwZXIuaXNJbnN0YW5jZShvYmopICYmIG9iai50eXBlID09PSBcImFpXCI7XG5cdH1cbn07XG4vKipcbiogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayBBSU1lc3NhZ2UuaXNJbnN0YW5jZX0gaW5zdGVhZFxuKi9cbmZ1bmN0aW9uIGlzQUlNZXNzYWdlKHgpIHtcblx0cmV0dXJuIHguX2dldFR5cGUoKSA9PT0gXCJhaVwiO1xufVxuLyoqXG4qIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgQUlNZXNzYWdlQ2h1bmsuaXNJbnN0YW5jZX0gaW5zdGVhZFxuKi9cbmZ1bmN0aW9uIGlzQUlNZXNzYWdlQ2h1bmsoeCkge1xuXHRyZXR1cm4geC5fZ2V0VHlwZSgpID09PSBcImFpXCI7XG59XG4vKipcbiogUmVwcmVzZW50cyBhIGNodW5rIG9mIGFuIEFJIG1lc3NhZ2UsIHdoaWNoIGNhbiBiZSBjb25jYXRlbmF0ZWQgd2l0aFxuKiBvdGhlciBBSSBtZXNzYWdlIGNodW5rcy5cbiovXG52YXIgQUlNZXNzYWdlQ2h1bmsgPSBjbGFzcyBleHRlbmRzIEJhc2VNZXNzYWdlQ2h1bmsge1xuXHR0eXBlID0gXCJhaVwiO1xuXHR0b29sX2NhbGxzID0gW107XG5cdGludmFsaWRfdG9vbF9jYWxscyA9IFtdO1xuXHR0b29sX2NhbGxfY2h1bmtzID0gW107XG5cdHVzYWdlX21ldGFkYXRhO1xuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHRsZXQgaW5pdFBhcmFtcztcblx0XHRpZiAodHlwZW9mIGZpZWxkcyA9PT0gXCJzdHJpbmdcIiB8fCBBcnJheS5pc0FycmF5KGZpZWxkcykpIGluaXRQYXJhbXMgPSB7XG5cdFx0XHRjb250ZW50OiBmaWVsZHMsXG5cdFx0XHR0b29sX2NhbGxzOiBbXSxcblx0XHRcdGludmFsaWRfdG9vbF9jYWxsczogW10sXG5cdFx0XHR0b29sX2NhbGxfY2h1bmtzOiBbXVxuXHRcdH07XG5cdFx0ZWxzZSBpZiAoZmllbGRzLnRvb2xfY2FsbF9jaHVua3MgPT09IHZvaWQgMCB8fCBmaWVsZHMudG9vbF9jYWxsX2NodW5rcy5sZW5ndGggPT09IDApIGluaXRQYXJhbXMgPSB7XG5cdFx0XHQuLi5maWVsZHMsXG5cdFx0XHR0b29sX2NhbGxzOiBmaWVsZHMudG9vbF9jYWxscyA/PyBbXSxcblx0XHRcdGludmFsaWRfdG9vbF9jYWxsczogW10sXG5cdFx0XHR0b29sX2NhbGxfY2h1bmtzOiBbXSxcblx0XHRcdHVzYWdlX21ldGFkYXRhOiBmaWVsZHMudXNhZ2VfbWV0YWRhdGEgIT09IHZvaWQgMCA/IGZpZWxkcy51c2FnZV9tZXRhZGF0YSA6IHZvaWQgMFxuXHRcdH07XG5cdFx0ZWxzZSB7XG5cdFx0XHRjb25zdCBjb2xsYXBzZWQgPSBjb2xsYXBzZVRvb2xDYWxsQ2h1bmtzKGZpZWxkcy50b29sX2NhbGxfY2h1bmtzID8/IFtdKTtcblx0XHRcdGluaXRQYXJhbXMgPSB7XG5cdFx0XHRcdC4uLmZpZWxkcyxcblx0XHRcdFx0dG9vbF9jYWxsX2NodW5rczogY29sbGFwc2VkLnRvb2xfY2FsbF9jaHVua3MsXG5cdFx0XHRcdHRvb2xfY2FsbHM6IGNvbGxhcHNlZC50b29sX2NhbGxzLFxuXHRcdFx0XHRpbnZhbGlkX3Rvb2xfY2FsbHM6IGNvbGxhcHNlZC5pbnZhbGlkX3Rvb2xfY2FsbHMsXG5cdFx0XHRcdHVzYWdlX21ldGFkYXRhOiBmaWVsZHMudXNhZ2VfbWV0YWRhdGEgIT09IHZvaWQgMCA/IGZpZWxkcy51c2FnZV9tZXRhZGF0YSA6IHZvaWQgMFxuXHRcdFx0fTtcblx0XHR9XG5cdFx0c3VwZXIoaW5pdFBhcmFtcyk7XG5cdFx0dGhpcy50b29sX2NhbGxfY2h1bmtzID0gaW5pdFBhcmFtcy50b29sX2NhbGxfY2h1bmtzID8/IHRoaXMudG9vbF9jYWxsX2NodW5rcztcblx0XHR0aGlzLnRvb2xfY2FsbHMgPSBpbml0UGFyYW1zLnRvb2xfY2FsbHMgPz8gdGhpcy50b29sX2NhbGxzO1xuXHRcdHRoaXMuaW52YWxpZF90b29sX2NhbGxzID0gaW5pdFBhcmFtcy5pbnZhbGlkX3Rvb2xfY2FsbHMgPz8gdGhpcy5pbnZhbGlkX3Rvb2xfY2FsbHM7XG5cdFx0dGhpcy51c2FnZV9tZXRhZGF0YSA9IGluaXRQYXJhbXMudXNhZ2VfbWV0YWRhdGE7XG5cdH1cblx0Z2V0IGxjX2FsaWFzZXMoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdC4uLnN1cGVyLmxjX2FsaWFzZXMsXG5cdFx0XHR0b29sX2NhbGxzOiBcInRvb2xfY2FsbHNcIixcblx0XHRcdGludmFsaWRfdG9vbF9jYWxsczogXCJpbnZhbGlkX3Rvb2xfY2FsbHNcIixcblx0XHRcdHRvb2xfY2FsbF9jaHVua3M6IFwidG9vbF9jYWxsX2NodW5rc1wiXG5cdFx0fTtcblx0fVxuXHRzdGF0aWMgbGNfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJBSU1lc3NhZ2VDaHVua1wiO1xuXHR9XG5cdGdldCBjb250ZW50QmxvY2tzKCkge1xuXHRcdGlmICh0aGlzLnJlc3BvbnNlX21ldGFkYXRhICYmIFwib3V0cHV0X3ZlcnNpb25cIiBpbiB0aGlzLnJlc3BvbnNlX21ldGFkYXRhICYmIHRoaXMucmVzcG9uc2VfbWV0YWRhdGEub3V0cHV0X3ZlcnNpb24gPT09IFwidjFcIikgcmV0dXJuIHRoaXMuY29udGVudDtcblx0XHRpZiAodGhpcy5yZXNwb25zZV9tZXRhZGF0YSAmJiBcIm1vZGVsX3Byb3ZpZGVyXCIgaW4gdGhpcy5yZXNwb25zZV9tZXRhZGF0YSAmJiB0eXBlb2YgdGhpcy5yZXNwb25zZV9tZXRhZGF0YS5tb2RlbF9wcm92aWRlciA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0Y29uc3QgdHJhbnNsYXRvciA9IGdldFRyYW5zbGF0b3IodGhpcy5yZXNwb25zZV9tZXRhZGF0YS5tb2RlbF9wcm92aWRlcik7XG5cdFx0XHRpZiAodHJhbnNsYXRvcikgcmV0dXJuIHRyYW5zbGF0b3IudHJhbnNsYXRlQ29udGVudCh0aGlzKTtcblx0XHR9XG5cdFx0Y29uc3QgYmxvY2tzID0gc3VwZXIuY29udGVudEJsb2Nrcztcblx0XHRpZiAodGhpcy50b29sX2NhbGxzKSB7XG5cdFx0XHRpZiAodHlwZW9mIHRoaXMuY29udGVudCAhPT0gXCJzdHJpbmdcIikge1xuXHRcdFx0XHRjb25zdCBjb250ZW50VG9vbENhbGxzID0gdGhpcy5jb250ZW50LmZpbHRlcigoYmxvY2spID0+IGJsb2NrLnR5cGUgPT09IFwidG9vbF9jYWxsXCIpLm1hcCgoYmxvY2spID0+IGJsb2NrLmlkKTtcblx0XHRcdFx0Zm9yIChjb25zdCB0b29sQ2FsbCBvZiB0aGlzLnRvb2xfY2FsbHMpIGlmICh0b29sQ2FsbC5pZCAmJiAhY29udGVudFRvb2xDYWxscy5pbmNsdWRlcyh0b29sQ2FsbC5pZCkpIGJsb2Nrcy5wdXNoKHtcblx0XHRcdFx0XHQuLi50b29sQ2FsbCxcblx0XHRcdFx0XHR0eXBlOiBcInRvb2xfY2FsbFwiLFxuXHRcdFx0XHRcdGlkOiB0b29sQ2FsbC5pZCxcblx0XHRcdFx0XHRuYW1lOiB0b29sQ2FsbC5uYW1lLFxuXHRcdFx0XHRcdGFyZ3M6IHRvb2xDYWxsLmFyZ3Ncblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBibG9ja3M7XG5cdH1cblx0Z2V0IF9wcmludGFibGVGaWVsZHMoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdC4uLnN1cGVyLl9wcmludGFibGVGaWVsZHMsXG5cdFx0XHR0b29sX2NhbGxzOiB0aGlzLnRvb2xfY2FsbHMsXG5cdFx0XHR0b29sX2NhbGxfY2h1bmtzOiB0aGlzLnRvb2xfY2FsbF9jaHVua3MsXG5cdFx0XHRpbnZhbGlkX3Rvb2xfY2FsbHM6IHRoaXMuaW52YWxpZF90b29sX2NhbGxzLFxuXHRcdFx0dXNhZ2VfbWV0YWRhdGE6IHRoaXMudXNhZ2VfbWV0YWRhdGFcblx0XHR9O1xuXHR9XG5cdGNvbmNhdChjaHVuaykge1xuXHRcdGNvbnN0IGNvbWJpbmVkRmllbGRzID0ge1xuXHRcdFx0Y29udGVudDogbWVyZ2VDb250ZW50KHRoaXMuY29udGVudCwgY2h1bmsuY29udGVudCksXG5cdFx0XHRhZGRpdGlvbmFsX2t3YXJnczogX21lcmdlRGljdHModGhpcy5hZGRpdGlvbmFsX2t3YXJncywgY2h1bmsuYWRkaXRpb25hbF9rd2FyZ3MpLFxuXHRcdFx0cmVzcG9uc2VfbWV0YWRhdGE6IG1lcmdlUmVzcG9uc2VNZXRhZGF0YSh0aGlzLnJlc3BvbnNlX21ldGFkYXRhLCBjaHVuay5yZXNwb25zZV9tZXRhZGF0YSksXG5cdFx0XHR0b29sX2NhbGxfY2h1bmtzOiBbXSxcblx0XHRcdGlkOiB0aGlzLmlkID8/IGNodW5rLmlkXG5cdFx0fTtcblx0XHRpZiAodGhpcy50b29sX2NhbGxfY2h1bmtzICE9PSB2b2lkIDAgfHwgY2h1bmsudG9vbF9jYWxsX2NodW5rcyAhPT0gdm9pZCAwKSB7XG5cdFx0XHRjb25zdCByYXdUb29sQ2FsbHMgPSBfbWVyZ2VMaXN0cyh0aGlzLnRvb2xfY2FsbF9jaHVua3MsIGNodW5rLnRvb2xfY2FsbF9jaHVua3MpO1xuXHRcdFx0aWYgKHJhd1Rvb2xDYWxscyAhPT0gdm9pZCAwICYmIHJhd1Rvb2xDYWxscy5sZW5ndGggPiAwKSBjb21iaW5lZEZpZWxkcy50b29sX2NhbGxfY2h1bmtzID0gcmF3VG9vbENhbGxzO1xuXHRcdH1cblx0XHRpZiAodGhpcy51c2FnZV9tZXRhZGF0YSAhPT0gdm9pZCAwIHx8IGNodW5rLnVzYWdlX21ldGFkYXRhICE9PSB2b2lkIDApIGNvbWJpbmVkRmllbGRzLnVzYWdlX21ldGFkYXRhID0gbWVyZ2VVc2FnZU1ldGFkYXRhKHRoaXMudXNhZ2VfbWV0YWRhdGEsIGNodW5rLnVzYWdlX21ldGFkYXRhKTtcblx0XHRjb25zdCBDbHMgPSB0aGlzLmNvbnN0cnVjdG9yO1xuXHRcdHJldHVybiBuZXcgQ2xzKGNvbWJpbmVkRmllbGRzKTtcblx0fVxuXHRzdGF0aWMgaXNJbnN0YW5jZShvYmopIHtcblx0XHRyZXR1cm4gc3VwZXIuaXNJbnN0YW5jZShvYmopICYmIG9iai50eXBlID09PSBcImFpXCI7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQUlNZXNzYWdlLCBBSU1lc3NhZ2VDaHVuaywgaXNBSU1lc3NhZ2UsIGlzQUlNZXNzYWdlQ2h1bmsgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFpLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/messages/ai.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/messages/base.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/base.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseMessage: () => (/* binding */ BaseMessage),\n/* harmony export */   BaseMessageChunk: () => (/* binding */ BaseMessageChunk),\n/* harmony export */   _isMessageFieldWithRole: () => (/* binding */ _isMessageFieldWithRole),\n/* harmony export */   _mergeDicts: () => (/* binding */ _mergeDicts),\n/* harmony export */   _mergeLists: () => (/* binding */ _mergeLists),\n/* harmony export */   _mergeObj: () => (/* binding */ _mergeObj),\n/* harmony export */   _mergeStatus: () => (/* binding */ _mergeStatus),\n/* harmony export */   isBaseMessage: () => (/* binding */ isBaseMessage),\n/* harmony export */   isBaseMessageChunk: () => (/* binding */ isBaseMessageChunk),\n/* harmony export */   isOpenAIToolCallArray: () => (/* binding */ isOpenAIToolCallArray),\n/* harmony export */   mergeContent: () => (/* binding */ mergeContent)\n/* harmony export */ });\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../load/serializable.js */ \"(ssr)/./node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _content_data_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./content/data.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/content/data.js\");\n/* harmony import */ var _block_translators_anthropic_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./block_translators/anthropic.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/anthropic.js\");\n/* harmony import */ var _block_translators_data_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./block_translators/data.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/data.js\");\n/* harmony import */ var _block_translators_openai_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./block_translators/openai.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/openai.js\");\n/* harmony import */ var _message_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./message.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/message.js\");\n/* harmony import */ var _format_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./format.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/format.js\");\n\n\n\n\n\n\n\n\n//#region src/messages/base.ts\n/** @internal */\nconst MESSAGE_SYMBOL = Symbol.for(\"langchain.message\");\nfunction mergeContent(firstContent, secondContent) {\n\tif (typeof firstContent === \"string\") {\n\t\tif (firstContent === \"\") return secondContent;\n\t\tif (typeof secondContent === \"string\") return firstContent + secondContent;\n\t\telse if (Array.isArray(secondContent) && secondContent.length === 0) return firstContent;\n\t\telse if (Array.isArray(secondContent) && secondContent.some((c) => (0,_content_data_js__WEBPACK_IMPORTED_MODULE_1__.isDataContentBlock)(c))) return [{\n\t\t\ttype: \"text\",\n\t\t\tsource_type: \"text\",\n\t\t\ttext: firstContent\n\t\t}, ...secondContent];\n\t\telse return [{\n\t\t\ttype: \"text\",\n\t\t\ttext: firstContent\n\t\t}, ...secondContent];\n\t} else if (Array.isArray(secondContent)) return _mergeLists(firstContent, secondContent) ?? [...firstContent, ...secondContent];\n\telse if (secondContent === \"\") return firstContent;\n\telse if (Array.isArray(firstContent) && firstContent.some((c) => (0,_content_data_js__WEBPACK_IMPORTED_MODULE_1__.isDataContentBlock)(c))) return [...firstContent, {\n\t\ttype: \"file\",\n\t\tsource_type: \"text\",\n\t\ttext: secondContent\n\t}];\n\telse return [...firstContent, {\n\t\ttype: \"text\",\n\t\ttext: secondContent\n\t}];\n}\n/**\n* 'Merge' two statuses. If either value passed is 'error', it will return 'error'. Else\n* it will return 'success'.\n*\n* @param {\"success\" | \"error\" | undefined} left The existing value to 'merge' with the new value.\n* @param {\"success\" | \"error\" | undefined} right The new value to 'merge' with the existing value\n* @returns {\"success\" | \"error\"} The 'merged' value.\n*/\nfunction _mergeStatus(left, right) {\n\tif (left === \"error\" || right === \"error\") return \"error\";\n\treturn \"success\";\n}\nfunction stringifyWithDepthLimit(obj, depthLimit) {\n\tfunction helper(obj$1, currentDepth) {\n\t\tif (typeof obj$1 !== \"object\" || obj$1 === null || obj$1 === void 0) return obj$1;\n\t\tif (currentDepth >= depthLimit) {\n\t\t\tif (Array.isArray(obj$1)) return \"[Array]\";\n\t\t\treturn \"[Object]\";\n\t\t}\n\t\tif (Array.isArray(obj$1)) return obj$1.map((item) => helper(item, currentDepth + 1));\n\t\tconst result = {};\n\t\tfor (const key of Object.keys(obj$1)) result[key] = helper(obj$1[key], currentDepth + 1);\n\t\treturn result;\n\t}\n\treturn JSON.stringify(helper(obj, 0), null, 2);\n}\n/**\n* Base class for all types of messages in a conversation. It includes\n* properties like `content`, `name`, and `additional_kwargs`. It also\n* includes methods like `toDict()` and `_getType()`.\n*/\nvar BaseMessage = class extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable {\n\tlc_namespace = [\"langchain_core\", \"messages\"];\n\tlc_serializable = true;\n\tget lc_aliases() {\n\t\treturn {\n\t\t\tadditional_kwargs: \"additional_kwargs\",\n\t\t\tresponse_metadata: \"response_metadata\"\n\t\t};\n\t}\n\t[MESSAGE_SYMBOL] = true;\n\tid;\n\t/** @inheritdoc */\n\tname;\n\tcontent;\n\tadditional_kwargs;\n\tresponse_metadata;\n\t/**\n\t* @deprecated Use .getType() instead or import the proper typeguard.\n\t* For example:\n\t*\n\t* ```ts\n\t* import { isAIMessage } from \"@langchain/core/messages\";\n\t*\n\t* const message = new AIMessage(\"Hello!\");\n\t* isAIMessage(message); // true\n\t* ```\n\t*/\n\t_getType() {\n\t\treturn this.type;\n\t}\n\t/**\n\t* @deprecated Use .type instead\n\t* The type of the message.\n\t*/\n\tgetType() {\n\t\treturn this._getType();\n\t}\n\tconstructor(arg) {\n\t\tconst fields = typeof arg === \"string\" || Array.isArray(arg) ? { content: arg } : arg;\n\t\tif (!fields.additional_kwargs) fields.additional_kwargs = {};\n\t\tif (!fields.response_metadata) fields.response_metadata = {};\n\t\tsuper(fields);\n\t\tthis.name = fields.name;\n\t\tif (fields.content === void 0 && fields.contentBlocks !== void 0) {\n\t\t\tthis.content = fields.contentBlocks;\n\t\t\tthis.response_metadata = {\n\t\t\t\toutput_version: \"v1\",\n\t\t\t\t...fields.response_metadata\n\t\t\t};\n\t\t} else if (fields.content !== void 0) {\n\t\t\tthis.content = fields.content ?? [];\n\t\t\tthis.response_metadata = fields.response_metadata;\n\t\t} else {\n\t\t\tthis.content = [];\n\t\t\tthis.response_metadata = fields.response_metadata;\n\t\t}\n\t\tthis.additional_kwargs = fields.additional_kwargs;\n\t\tthis.id = fields.id;\n\t}\n\t/** Get text content of the message. */\n\tget text() {\n\t\tif (typeof this.content === \"string\") return this.content;\n\t\tif (!Array.isArray(this.content)) return \"\";\n\t\treturn this.content.map((c) => {\n\t\t\tif (typeof c === \"string\") return c;\n\t\t\tif (c.type === \"text\") return c.text;\n\t\t\treturn \"\";\n\t\t}).join(\"\");\n\t}\n\tget contentBlocks() {\n\t\tconst blocks = typeof this.content === \"string\" ? [{\n\t\t\ttype: \"text\",\n\t\t\ttext: this.content\n\t\t}] : this.content;\n\t\tconst parsingSteps = [\n\t\t\t_block_translators_data_js__WEBPACK_IMPORTED_MODULE_3__.convertToV1FromDataContent,\n\t\t\t_block_translators_openai_js__WEBPACK_IMPORTED_MODULE_4__.convertToV1FromChatCompletionsInput,\n\t\t\t_block_translators_anthropic_js__WEBPACK_IMPORTED_MODULE_2__.convertToV1FromAnthropicInput\n\t\t];\n\t\tconst parsedBlocks = parsingSteps.reduce((blocks$1, step) => step(blocks$1), blocks);\n\t\treturn parsedBlocks;\n\t}\n\ttoDict() {\n\t\treturn {\n\t\t\ttype: this.getType(),\n\t\t\tdata: this.toJSON().kwargs\n\t\t};\n\t}\n\tstatic lc_name() {\n\t\treturn \"BaseMessage\";\n\t}\n\tget _printableFields() {\n\t\treturn {\n\t\t\tid: this.id,\n\t\t\tcontent: this.content,\n\t\t\tname: this.name,\n\t\t\tadditional_kwargs: this.additional_kwargs,\n\t\t\tresponse_metadata: this.response_metadata\n\t\t};\n\t}\n\tstatic isInstance(obj) {\n\t\treturn typeof obj === \"object\" && obj !== null && MESSAGE_SYMBOL in obj && obj[MESSAGE_SYMBOL] === true && (0,_message_js__WEBPACK_IMPORTED_MODULE_5__.isMessage)(obj);\n\t}\n\t_updateId(value) {\n\t\tthis.id = value;\n\t\tthis.lc_kwargs.id = value;\n\t}\n\tget [Symbol.toStringTag]() {\n\t\treturn this.constructor.lc_name();\n\t}\n\t[Symbol.for(\"nodejs.util.inspect.custom\")](depth) {\n\t\tif (depth === null) return this;\n\t\tconst printable = stringifyWithDepthLimit(this._printableFields, Math.max(4, depth));\n\t\treturn `${this.constructor.lc_name()} ${printable}`;\n\t}\n\ttoFormattedString(format = \"pretty\") {\n\t\treturn (0,_format_js__WEBPACK_IMPORTED_MODULE_6__.convertToFormattedString)(this, format);\n\t}\n};\nfunction isOpenAIToolCallArray(value) {\n\treturn Array.isArray(value) && value.every((v) => typeof v.index === \"number\");\n}\nfunction _mergeDicts(left, right) {\n\tif (left === void 0 && right === void 0) return void 0;\n\tif (left === void 0 || right === void 0) return left ?? right;\n\tconst merged = { ...left };\n\tfor (const [key, value] of Object.entries(right)) if (merged[key] == null) merged[key] = value;\n\telse if (value == null) continue;\n\telse if (typeof merged[key] !== typeof value || Array.isArray(merged[key]) !== Array.isArray(value)) throw new Error(`field[${key}] already exists in the message chunk, but with a different type.`);\n\telse if (typeof merged[key] === \"string\") if (key === \"type\") continue;\n\telse if ([\n\t\t\"id\",\n\t\t\"name\",\n\t\t\"output_version\",\n\t\t\"model_provider\"\n\t].includes(key)) {\n\t\tif (value) merged[key] = value;\n\t} else merged[key] += value;\n\telse if (typeof merged[key] === \"number\") merged[key] = merged[key] + value;\n\telse if (typeof merged[key] === \"object\" && !Array.isArray(merged[key])) merged[key] = _mergeDicts(merged[key], value);\n\telse if (Array.isArray(merged[key])) merged[key] = _mergeLists(merged[key], value);\n\telse if (merged[key] === value) continue;\n\telse console.warn(`field[${key}] already exists in this message chunk and value has unsupported type.`);\n\treturn merged;\n}\nfunction _mergeLists(left, right) {\n\tif (left === void 0 && right === void 0) return void 0;\n\telse if (left === void 0 || right === void 0) return left || right;\n\telse {\n\t\tconst merged = [...left];\n\t\tfor (const item of right) if (typeof item === \"object\" && item !== null && \"index\" in item && typeof item.index === \"number\") {\n\t\t\tconst toMerge = merged.findIndex((leftItem) => {\n\t\t\t\tconst isObject = typeof leftItem === \"object\";\n\t\t\t\tconst indiciesMatch = \"index\" in leftItem && leftItem.index === item.index;\n\t\t\t\tconst idsMatch = \"id\" in leftItem && \"id\" in item && leftItem?.id === item?.id;\n\t\t\t\tconst eitherItemMissingID = !(\"id\" in leftItem) || !leftItem?.id || !(\"id\" in item) || !item?.id;\n\t\t\t\treturn isObject && indiciesMatch && (idsMatch || eitherItemMissingID);\n\t\t\t});\n\t\t\tif (toMerge !== -1 && typeof merged[toMerge] === \"object\" && merged[toMerge] !== null) merged[toMerge] = _mergeDicts(merged[toMerge], item);\n\t\t\telse merged.push(item);\n\t\t} else if (typeof item === \"object\" && item !== null && \"text\" in item && item.text === \"\") continue;\n\t\telse merged.push(item);\n\t\treturn merged;\n\t}\n}\nfunction _mergeObj(left, right) {\n\tif (left === void 0 && right === void 0) return void 0;\n\tif (left === void 0 || right === void 0) return left ?? right;\n\telse if (typeof left !== typeof right) throw new Error(`Cannot merge objects of different types.\\nLeft ${typeof left}\\nRight ${typeof right}`);\n\telse if (typeof left === \"string\" && typeof right === \"string\") return left + right;\n\telse if (Array.isArray(left) && Array.isArray(right)) return _mergeLists(left, right);\n\telse if (typeof left === \"object\" && typeof right === \"object\") return _mergeDicts(left, right);\n\telse if (left === right) return left;\n\telse throw new Error(`Can not merge objects of different types.\\nLeft ${left}\\nRight ${right}`);\n}\n/**\n* Represents a chunk of a message, which can be concatenated with other\n* message chunks. It includes a method `_merge_kwargs_dict()` for merging\n* additional keyword arguments from another `BaseMessageChunk` into this\n* one. It also overrides the `__add__()` method to support concatenation\n* of `BaseMessageChunk` instances.\n*/\nvar BaseMessageChunk = class BaseMessageChunk extends BaseMessage {\n\tstatic isInstance(obj) {\n\t\tif (!super.isInstance(obj)) return false;\n\t\tlet proto = Object.getPrototypeOf(obj);\n\t\twhile (proto !== null) {\n\t\t\tif (proto === BaseMessageChunk.prototype) return true;\n\t\t\tproto = Object.getPrototypeOf(proto);\n\t\t}\n\t\treturn false;\n\t}\n};\nfunction _isMessageFieldWithRole(x) {\n\treturn typeof x.role === \"string\";\n}\n/**\n* @deprecated Use {@link BaseMessage.isInstance} instead\n*/\nfunction isBaseMessage(messageLike) {\n\treturn typeof messageLike?._getType === \"function\";\n}\n/**\n* @deprecated Use {@link BaseMessageChunk.isInstance} instead\n*/\nfunction isBaseMessageChunk(messageLike) {\n\treturn BaseMessageChunk.isInstance(messageLike);\n}\n\n//#endregion\n\n//# sourceMappingURL=base.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvYmFzZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBdUQ7QUFDQTtBQUMwQjtBQUNSO0FBQ1c7QUFDM0M7QUFDYzs7QUFFdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSxvRUFBa0I7QUFDdkY7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxHQUFHO0FBQ0g7QUFDQSxrRUFBa0Usb0VBQWtCO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsaUNBQWlDO0FBQzNDLFVBQVUsaUNBQWlDO0FBQzNDLFlBQVkscUJBQXFCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQywrREFBWTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxjQUFjO0FBQzFCO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRUFBbUUsZUFBZTtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUcsa0ZBQTBCO0FBQzdCLEdBQUcsNkZBQW1DO0FBQ3RDLEdBQUcsMEZBQTZCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2R0FBNkcsc0RBQVM7QUFDdEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksNEJBQTRCLEVBQUUsVUFBVTtBQUNwRDtBQUNBO0FBQ0EsU0FBUyxvRUFBd0I7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0EsK0hBQStILElBQUk7QUFDbkk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixJQUFJO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBHQUEwRyxZQUFZLFVBQVUsYUFBYTtBQUM3STtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RSxLQUFLLFVBQVUsTUFBTTtBQUM5RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDhCQUE4QjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLG1DQUFtQztBQUN0RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUM2TDtBQUM3TCIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2Jhc2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2VyaWFsaXphYmxlIH0gZnJvbSBcIi4uL2xvYWQvc2VyaWFsaXphYmxlLmpzXCI7XG5pbXBvcnQgeyBpc0RhdGFDb250ZW50QmxvY2sgfSBmcm9tIFwiLi9jb250ZW50L2RhdGEuanNcIjtcbmltcG9ydCB7IGNvbnZlcnRUb1YxRnJvbUFudGhyb3BpY0lucHV0IH0gZnJvbSBcIi4vYmxvY2tfdHJhbnNsYXRvcnMvYW50aHJvcGljLmpzXCI7XG5pbXBvcnQgeyBjb252ZXJ0VG9WMUZyb21EYXRhQ29udGVudCB9IGZyb20gXCIuL2Jsb2NrX3RyYW5zbGF0b3JzL2RhdGEuanNcIjtcbmltcG9ydCB7IGNvbnZlcnRUb1YxRnJvbUNoYXRDb21wbGV0aW9uc0lucHV0IH0gZnJvbSBcIi4vYmxvY2tfdHJhbnNsYXRvcnMvb3BlbmFpLmpzXCI7XG5pbXBvcnQgeyBpc01lc3NhZ2UgfSBmcm9tIFwiLi9tZXNzYWdlLmpzXCI7XG5pbXBvcnQgeyBjb252ZXJ0VG9Gb3JtYXR0ZWRTdHJpbmcgfSBmcm9tIFwiLi9mb3JtYXQuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9tZXNzYWdlcy9iYXNlLnRzXG4vKiogQGludGVybmFsICovXG5jb25zdCBNRVNTQUdFX1NZTUJPTCA9IFN5bWJvbC5mb3IoXCJsYW5nY2hhaW4ubWVzc2FnZVwiKTtcbmZ1bmN0aW9uIG1lcmdlQ29udGVudChmaXJzdENvbnRlbnQsIHNlY29uZENvbnRlbnQpIHtcblx0aWYgKHR5cGVvZiBmaXJzdENvbnRlbnQgPT09IFwic3RyaW5nXCIpIHtcblx0XHRpZiAoZmlyc3RDb250ZW50ID09PSBcIlwiKSByZXR1cm4gc2Vjb25kQ29udGVudDtcblx0XHRpZiAodHlwZW9mIHNlY29uZENvbnRlbnQgPT09IFwic3RyaW5nXCIpIHJldHVybiBmaXJzdENvbnRlbnQgKyBzZWNvbmRDb250ZW50O1xuXHRcdGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoc2Vjb25kQ29udGVudCkgJiYgc2Vjb25kQ29udGVudC5sZW5ndGggPT09IDApIHJldHVybiBmaXJzdENvbnRlbnQ7XG5cdFx0ZWxzZSBpZiAoQXJyYXkuaXNBcnJheShzZWNvbmRDb250ZW50KSAmJiBzZWNvbmRDb250ZW50LnNvbWUoKGMpID0+IGlzRGF0YUNvbnRlbnRCbG9jayhjKSkpIHJldHVybiBbe1xuXHRcdFx0dHlwZTogXCJ0ZXh0XCIsXG5cdFx0XHRzb3VyY2VfdHlwZTogXCJ0ZXh0XCIsXG5cdFx0XHR0ZXh0OiBmaXJzdENvbnRlbnRcblx0XHR9LCAuLi5zZWNvbmRDb250ZW50XTtcblx0XHRlbHNlIHJldHVybiBbe1xuXHRcdFx0dHlwZTogXCJ0ZXh0XCIsXG5cdFx0XHR0ZXh0OiBmaXJzdENvbnRlbnRcblx0XHR9LCAuLi5zZWNvbmRDb250ZW50XTtcblx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHNlY29uZENvbnRlbnQpKSByZXR1cm4gX21lcmdlTGlzdHMoZmlyc3RDb250ZW50LCBzZWNvbmRDb250ZW50KSA/PyBbLi4uZmlyc3RDb250ZW50LCAuLi5zZWNvbmRDb250ZW50XTtcblx0ZWxzZSBpZiAoc2Vjb25kQ29udGVudCA9PT0gXCJcIikgcmV0dXJuIGZpcnN0Q29udGVudDtcblx0ZWxzZSBpZiAoQXJyYXkuaXNBcnJheShmaXJzdENvbnRlbnQpICYmIGZpcnN0Q29udGVudC5zb21lKChjKSA9PiBpc0RhdGFDb250ZW50QmxvY2soYykpKSByZXR1cm4gWy4uLmZpcnN0Q29udGVudCwge1xuXHRcdHR5cGU6IFwiZmlsZVwiLFxuXHRcdHNvdXJjZV90eXBlOiBcInRleHRcIixcblx0XHR0ZXh0OiBzZWNvbmRDb250ZW50XG5cdH1dO1xuXHRlbHNlIHJldHVybiBbLi4uZmlyc3RDb250ZW50LCB7XG5cdFx0dHlwZTogXCJ0ZXh0XCIsXG5cdFx0dGV4dDogc2Vjb25kQ29udGVudFxuXHR9XTtcbn1cbi8qKlxuKiAnTWVyZ2UnIHR3byBzdGF0dXNlcy4gSWYgZWl0aGVyIHZhbHVlIHBhc3NlZCBpcyAnZXJyb3InLCBpdCB3aWxsIHJldHVybiAnZXJyb3InLiBFbHNlXG4qIGl0IHdpbGwgcmV0dXJuICdzdWNjZXNzJy5cbipcbiogQHBhcmFtIHtcInN1Y2Nlc3NcIiB8IFwiZXJyb3JcIiB8IHVuZGVmaW5lZH0gbGVmdCBUaGUgZXhpc3RpbmcgdmFsdWUgdG8gJ21lcmdlJyB3aXRoIHRoZSBuZXcgdmFsdWUuXG4qIEBwYXJhbSB7XCJzdWNjZXNzXCIgfCBcImVycm9yXCIgfCB1bmRlZmluZWR9IHJpZ2h0IFRoZSBuZXcgdmFsdWUgdG8gJ21lcmdlJyB3aXRoIHRoZSBleGlzdGluZyB2YWx1ZVxuKiBAcmV0dXJucyB7XCJzdWNjZXNzXCIgfCBcImVycm9yXCJ9IFRoZSAnbWVyZ2VkJyB2YWx1ZS5cbiovXG5mdW5jdGlvbiBfbWVyZ2VTdGF0dXMobGVmdCwgcmlnaHQpIHtcblx0aWYgKGxlZnQgPT09IFwiZXJyb3JcIiB8fCByaWdodCA9PT0gXCJlcnJvclwiKSByZXR1cm4gXCJlcnJvclwiO1xuXHRyZXR1cm4gXCJzdWNjZXNzXCI7XG59XG5mdW5jdGlvbiBzdHJpbmdpZnlXaXRoRGVwdGhMaW1pdChvYmosIGRlcHRoTGltaXQpIHtcblx0ZnVuY3Rpb24gaGVscGVyKG9iaiQxLCBjdXJyZW50RGVwdGgpIHtcblx0XHRpZiAodHlwZW9mIG9iaiQxICE9PSBcIm9iamVjdFwiIHx8IG9iaiQxID09PSBudWxsIHx8IG9iaiQxID09PSB2b2lkIDApIHJldHVybiBvYmokMTtcblx0XHRpZiAoY3VycmVudERlcHRoID49IGRlcHRoTGltaXQpIHtcblx0XHRcdGlmIChBcnJheS5pc0FycmF5KG9iaiQxKSkgcmV0dXJuIFwiW0FycmF5XVwiO1xuXHRcdFx0cmV0dXJuIFwiW09iamVjdF1cIjtcblx0XHR9XG5cdFx0aWYgKEFycmF5LmlzQXJyYXkob2JqJDEpKSByZXR1cm4gb2JqJDEubWFwKChpdGVtKSA9PiBoZWxwZXIoaXRlbSwgY3VycmVudERlcHRoICsgMSkpO1xuXHRcdGNvbnN0IHJlc3VsdCA9IHt9O1xuXHRcdGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKG9iaiQxKSkgcmVzdWx0W2tleV0gPSBoZWxwZXIob2JqJDFba2V5XSwgY3VycmVudERlcHRoICsgMSk7XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkoaGVscGVyKG9iaiwgMCksIG51bGwsIDIpO1xufVxuLyoqXG4qIEJhc2UgY2xhc3MgZm9yIGFsbCB0eXBlcyBvZiBtZXNzYWdlcyBpbiBhIGNvbnZlcnNhdGlvbi4gSXQgaW5jbHVkZXNcbiogcHJvcGVydGllcyBsaWtlIGBjb250ZW50YCwgYG5hbWVgLCBhbmQgYGFkZGl0aW9uYWxfa3dhcmdzYC4gSXQgYWxzb1xuKiBpbmNsdWRlcyBtZXRob2RzIGxpa2UgYHRvRGljdCgpYCBhbmQgYF9nZXRUeXBlKClgLlxuKi9cbnZhciBCYXNlTWVzc2FnZSA9IGNsYXNzIGV4dGVuZHMgU2VyaWFsaXphYmxlIHtcblx0bGNfbmFtZXNwYWNlID0gW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJtZXNzYWdlc1wiXTtcblx0bGNfc2VyaWFsaXphYmxlID0gdHJ1ZTtcblx0Z2V0IGxjX2FsaWFzZXMoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGFkZGl0aW9uYWxfa3dhcmdzOiBcImFkZGl0aW9uYWxfa3dhcmdzXCIsXG5cdFx0XHRyZXNwb25zZV9tZXRhZGF0YTogXCJyZXNwb25zZV9tZXRhZGF0YVwiXG5cdFx0fTtcblx0fVxuXHRbTUVTU0FHRV9TWU1CT0xdID0gdHJ1ZTtcblx0aWQ7XG5cdC8qKiBAaW5oZXJpdGRvYyAqL1xuXHRuYW1lO1xuXHRjb250ZW50O1xuXHRhZGRpdGlvbmFsX2t3YXJncztcblx0cmVzcG9uc2VfbWV0YWRhdGE7XG5cdC8qKlxuXHQqIEBkZXByZWNhdGVkIFVzZSAuZ2V0VHlwZSgpIGluc3RlYWQgb3IgaW1wb3J0IHRoZSBwcm9wZXIgdHlwZWd1YXJkLlxuXHQqIEZvciBleGFtcGxlOlxuXHQqXG5cdCogYGBgdHNcblx0KiBpbXBvcnQgeyBpc0FJTWVzc2FnZSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvbWVzc2FnZXNcIjtcblx0KlxuXHQqIGNvbnN0IG1lc3NhZ2UgPSBuZXcgQUlNZXNzYWdlKFwiSGVsbG8hXCIpO1xuXHQqIGlzQUlNZXNzYWdlKG1lc3NhZ2UpOyAvLyB0cnVlXG5cdCogYGBgXG5cdCovXG5cdF9nZXRUeXBlKCkge1xuXHRcdHJldHVybiB0aGlzLnR5cGU7XG5cdH1cblx0LyoqXG5cdCogQGRlcHJlY2F0ZWQgVXNlIC50eXBlIGluc3RlYWRcblx0KiBUaGUgdHlwZSBvZiB0aGUgbWVzc2FnZS5cblx0Ki9cblx0Z2V0VHlwZSgpIHtcblx0XHRyZXR1cm4gdGhpcy5fZ2V0VHlwZSgpO1xuXHR9XG5cdGNvbnN0cnVjdG9yKGFyZykge1xuXHRcdGNvbnN0IGZpZWxkcyA9IHR5cGVvZiBhcmcgPT09IFwic3RyaW5nXCIgfHwgQXJyYXkuaXNBcnJheShhcmcpID8geyBjb250ZW50OiBhcmcgfSA6IGFyZztcblx0XHRpZiAoIWZpZWxkcy5hZGRpdGlvbmFsX2t3YXJncykgZmllbGRzLmFkZGl0aW9uYWxfa3dhcmdzID0ge307XG5cdFx0aWYgKCFmaWVsZHMucmVzcG9uc2VfbWV0YWRhdGEpIGZpZWxkcy5yZXNwb25zZV9tZXRhZGF0YSA9IHt9O1xuXHRcdHN1cGVyKGZpZWxkcyk7XG5cdFx0dGhpcy5uYW1lID0gZmllbGRzLm5hbWU7XG5cdFx0aWYgKGZpZWxkcy5jb250ZW50ID09PSB2b2lkIDAgJiYgZmllbGRzLmNvbnRlbnRCbG9ja3MgIT09IHZvaWQgMCkge1xuXHRcdFx0dGhpcy5jb250ZW50ID0gZmllbGRzLmNvbnRlbnRCbG9ja3M7XG5cdFx0XHR0aGlzLnJlc3BvbnNlX21ldGFkYXRhID0ge1xuXHRcdFx0XHRvdXRwdXRfdmVyc2lvbjogXCJ2MVwiLFxuXHRcdFx0XHQuLi5maWVsZHMucmVzcG9uc2VfbWV0YWRhdGFcblx0XHRcdH07XG5cdFx0fSBlbHNlIGlmIChmaWVsZHMuY29udGVudCAhPT0gdm9pZCAwKSB7XG5cdFx0XHR0aGlzLmNvbnRlbnQgPSBmaWVsZHMuY29udGVudCA/PyBbXTtcblx0XHRcdHRoaXMucmVzcG9uc2VfbWV0YWRhdGEgPSBmaWVsZHMucmVzcG9uc2VfbWV0YWRhdGE7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuY29udGVudCA9IFtdO1xuXHRcdFx0dGhpcy5yZXNwb25zZV9tZXRhZGF0YSA9IGZpZWxkcy5yZXNwb25zZV9tZXRhZGF0YTtcblx0XHR9XG5cdFx0dGhpcy5hZGRpdGlvbmFsX2t3YXJncyA9IGZpZWxkcy5hZGRpdGlvbmFsX2t3YXJncztcblx0XHR0aGlzLmlkID0gZmllbGRzLmlkO1xuXHR9XG5cdC8qKiBHZXQgdGV4dCBjb250ZW50IG9mIHRoZSBtZXNzYWdlLiAqL1xuXHRnZXQgdGV4dCgpIHtcblx0XHRpZiAodHlwZW9mIHRoaXMuY29udGVudCA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHRoaXMuY29udGVudDtcblx0XHRpZiAoIUFycmF5LmlzQXJyYXkodGhpcy5jb250ZW50KSkgcmV0dXJuIFwiXCI7XG5cdFx0cmV0dXJuIHRoaXMuY29udGVudC5tYXAoKGMpID0+IHtcblx0XHRcdGlmICh0eXBlb2YgYyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIGM7XG5cdFx0XHRpZiAoYy50eXBlID09PSBcInRleHRcIikgcmV0dXJuIGMudGV4dDtcblx0XHRcdHJldHVybiBcIlwiO1xuXHRcdH0pLmpvaW4oXCJcIik7XG5cdH1cblx0Z2V0IGNvbnRlbnRCbG9ja3MoKSB7XG5cdFx0Y29uc3QgYmxvY2tzID0gdHlwZW9mIHRoaXMuY29udGVudCA9PT0gXCJzdHJpbmdcIiA/IFt7XG5cdFx0XHR0eXBlOiBcInRleHRcIixcblx0XHRcdHRleHQ6IHRoaXMuY29udGVudFxuXHRcdH1dIDogdGhpcy5jb250ZW50O1xuXHRcdGNvbnN0IHBhcnNpbmdTdGVwcyA9IFtcblx0XHRcdGNvbnZlcnRUb1YxRnJvbURhdGFDb250ZW50LFxuXHRcdFx0Y29udmVydFRvVjFGcm9tQ2hhdENvbXBsZXRpb25zSW5wdXQsXG5cdFx0XHRjb252ZXJ0VG9WMUZyb21BbnRocm9waWNJbnB1dFxuXHRcdF07XG5cdFx0Y29uc3QgcGFyc2VkQmxvY2tzID0gcGFyc2luZ1N0ZXBzLnJlZHVjZSgoYmxvY2tzJDEsIHN0ZXApID0+IHN0ZXAoYmxvY2tzJDEpLCBibG9ja3MpO1xuXHRcdHJldHVybiBwYXJzZWRCbG9ja3M7XG5cdH1cblx0dG9EaWN0KCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHR0eXBlOiB0aGlzLmdldFR5cGUoKSxcblx0XHRcdGRhdGE6IHRoaXMudG9KU09OKCkua3dhcmdzXG5cdFx0fTtcblx0fVxuXHRzdGF0aWMgbGNfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJCYXNlTWVzc2FnZVwiO1xuXHR9XG5cdGdldCBfcHJpbnRhYmxlRmllbGRzKCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRpZDogdGhpcy5pZCxcblx0XHRcdGNvbnRlbnQ6IHRoaXMuY29udGVudCxcblx0XHRcdG5hbWU6IHRoaXMubmFtZSxcblx0XHRcdGFkZGl0aW9uYWxfa3dhcmdzOiB0aGlzLmFkZGl0aW9uYWxfa3dhcmdzLFxuXHRcdFx0cmVzcG9uc2VfbWV0YWRhdGE6IHRoaXMucmVzcG9uc2VfbWV0YWRhdGFcblx0XHR9O1xuXHR9XG5cdHN0YXRpYyBpc0luc3RhbmNlKG9iaikge1xuXHRcdHJldHVybiB0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiICYmIG9iaiAhPT0gbnVsbCAmJiBNRVNTQUdFX1NZTUJPTCBpbiBvYmogJiYgb2JqW01FU1NBR0VfU1lNQk9MXSA9PT0gdHJ1ZSAmJiBpc01lc3NhZ2Uob2JqKTtcblx0fVxuXHRfdXBkYXRlSWQodmFsdWUpIHtcblx0XHR0aGlzLmlkID0gdmFsdWU7XG5cdFx0dGhpcy5sY19rd2FyZ3MuaWQgPSB2YWx1ZTtcblx0fVxuXHRnZXQgW1N5bWJvbC50b1N0cmluZ1RhZ10oKSB7XG5cdFx0cmV0dXJuIHRoaXMuY29uc3RydWN0b3IubGNfbmFtZSgpO1xuXHR9XG5cdFtTeW1ib2wuZm9yKFwibm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b21cIildKGRlcHRoKSB7XG5cdFx0aWYgKGRlcHRoID09PSBudWxsKSByZXR1cm4gdGhpcztcblx0XHRjb25zdCBwcmludGFibGUgPSBzdHJpbmdpZnlXaXRoRGVwdGhMaW1pdCh0aGlzLl9wcmludGFibGVGaWVsZHMsIE1hdGgubWF4KDQsIGRlcHRoKSk7XG5cdFx0cmV0dXJuIGAke3RoaXMuY29uc3RydWN0b3IubGNfbmFtZSgpfSAke3ByaW50YWJsZX1gO1xuXHR9XG5cdHRvRm9ybWF0dGVkU3RyaW5nKGZvcm1hdCA9IFwicHJldHR5XCIpIHtcblx0XHRyZXR1cm4gY29udmVydFRvRm9ybWF0dGVkU3RyaW5nKHRoaXMsIGZvcm1hdCk7XG5cdH1cbn07XG5mdW5jdGlvbiBpc09wZW5BSVRvb2xDYWxsQXJyYXkodmFsdWUpIHtcblx0cmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmV2ZXJ5KCh2KSA9PiB0eXBlb2Ygdi5pbmRleCA9PT0gXCJudW1iZXJcIik7XG59XG5mdW5jdGlvbiBfbWVyZ2VEaWN0cyhsZWZ0LCByaWdodCkge1xuXHRpZiAobGVmdCA9PT0gdm9pZCAwICYmIHJpZ2h0ID09PSB2b2lkIDApIHJldHVybiB2b2lkIDA7XG5cdGlmIChsZWZ0ID09PSB2b2lkIDAgfHwgcmlnaHQgPT09IHZvaWQgMCkgcmV0dXJuIGxlZnQgPz8gcmlnaHQ7XG5cdGNvbnN0IG1lcmdlZCA9IHsgLi4ubGVmdCB9O1xuXHRmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhyaWdodCkpIGlmIChtZXJnZWRba2V5XSA9PSBudWxsKSBtZXJnZWRba2V5XSA9IHZhbHVlO1xuXHRlbHNlIGlmICh2YWx1ZSA9PSBudWxsKSBjb250aW51ZTtcblx0ZWxzZSBpZiAodHlwZW9mIG1lcmdlZFtrZXldICE9PSB0eXBlb2YgdmFsdWUgfHwgQXJyYXkuaXNBcnJheShtZXJnZWRba2V5XSkgIT09IEFycmF5LmlzQXJyYXkodmFsdWUpKSB0aHJvdyBuZXcgRXJyb3IoYGZpZWxkWyR7a2V5fV0gYWxyZWFkeSBleGlzdHMgaW4gdGhlIG1lc3NhZ2UgY2h1bmssIGJ1dCB3aXRoIGEgZGlmZmVyZW50IHR5cGUuYCk7XG5cdGVsc2UgaWYgKHR5cGVvZiBtZXJnZWRba2V5XSA9PT0gXCJzdHJpbmdcIikgaWYgKGtleSA9PT0gXCJ0eXBlXCIpIGNvbnRpbnVlO1xuXHRlbHNlIGlmIChbXG5cdFx0XCJpZFwiLFxuXHRcdFwibmFtZVwiLFxuXHRcdFwib3V0cHV0X3ZlcnNpb25cIixcblx0XHRcIm1vZGVsX3Byb3ZpZGVyXCJcblx0XS5pbmNsdWRlcyhrZXkpKSB7XG5cdFx0aWYgKHZhbHVlKSBtZXJnZWRba2V5XSA9IHZhbHVlO1xuXHR9IGVsc2UgbWVyZ2VkW2tleV0gKz0gdmFsdWU7XG5cdGVsc2UgaWYgKHR5cGVvZiBtZXJnZWRba2V5XSA9PT0gXCJudW1iZXJcIikgbWVyZ2VkW2tleV0gPSBtZXJnZWRba2V5XSArIHZhbHVlO1xuXHRlbHNlIGlmICh0eXBlb2YgbWVyZ2VkW2tleV0gPT09IFwib2JqZWN0XCIgJiYgIUFycmF5LmlzQXJyYXkobWVyZ2VkW2tleV0pKSBtZXJnZWRba2V5XSA9IF9tZXJnZURpY3RzKG1lcmdlZFtrZXldLCB2YWx1ZSk7XG5cdGVsc2UgaWYgKEFycmF5LmlzQXJyYXkobWVyZ2VkW2tleV0pKSBtZXJnZWRba2V5XSA9IF9tZXJnZUxpc3RzKG1lcmdlZFtrZXldLCB2YWx1ZSk7XG5cdGVsc2UgaWYgKG1lcmdlZFtrZXldID09PSB2YWx1ZSkgY29udGludWU7XG5cdGVsc2UgY29uc29sZS53YXJuKGBmaWVsZFske2tleX1dIGFscmVhZHkgZXhpc3RzIGluIHRoaXMgbWVzc2FnZSBjaHVuayBhbmQgdmFsdWUgaGFzIHVuc3VwcG9ydGVkIHR5cGUuYCk7XG5cdHJldHVybiBtZXJnZWQ7XG59XG5mdW5jdGlvbiBfbWVyZ2VMaXN0cyhsZWZ0LCByaWdodCkge1xuXHRpZiAobGVmdCA9PT0gdm9pZCAwICYmIHJpZ2h0ID09PSB2b2lkIDApIHJldHVybiB2b2lkIDA7XG5cdGVsc2UgaWYgKGxlZnQgPT09IHZvaWQgMCB8fCByaWdodCA9PT0gdm9pZCAwKSByZXR1cm4gbGVmdCB8fCByaWdodDtcblx0ZWxzZSB7XG5cdFx0Y29uc3QgbWVyZ2VkID0gWy4uLmxlZnRdO1xuXHRcdGZvciAoY29uc3QgaXRlbSBvZiByaWdodCkgaWYgKHR5cGVvZiBpdGVtID09PSBcIm9iamVjdFwiICYmIGl0ZW0gIT09IG51bGwgJiYgXCJpbmRleFwiIGluIGl0ZW0gJiYgdHlwZW9mIGl0ZW0uaW5kZXggPT09IFwibnVtYmVyXCIpIHtcblx0XHRcdGNvbnN0IHRvTWVyZ2UgPSBtZXJnZWQuZmluZEluZGV4KChsZWZ0SXRlbSkgPT4ge1xuXHRcdFx0XHRjb25zdCBpc09iamVjdCA9IHR5cGVvZiBsZWZ0SXRlbSA9PT0gXCJvYmplY3RcIjtcblx0XHRcdFx0Y29uc3QgaW5kaWNpZXNNYXRjaCA9IFwiaW5kZXhcIiBpbiBsZWZ0SXRlbSAmJiBsZWZ0SXRlbS5pbmRleCA9PT0gaXRlbS5pbmRleDtcblx0XHRcdFx0Y29uc3QgaWRzTWF0Y2ggPSBcImlkXCIgaW4gbGVmdEl0ZW0gJiYgXCJpZFwiIGluIGl0ZW0gJiYgbGVmdEl0ZW0/LmlkID09PSBpdGVtPy5pZDtcblx0XHRcdFx0Y29uc3QgZWl0aGVySXRlbU1pc3NpbmdJRCA9ICEoXCJpZFwiIGluIGxlZnRJdGVtKSB8fCAhbGVmdEl0ZW0/LmlkIHx8ICEoXCJpZFwiIGluIGl0ZW0pIHx8ICFpdGVtPy5pZDtcblx0XHRcdFx0cmV0dXJuIGlzT2JqZWN0ICYmIGluZGljaWVzTWF0Y2ggJiYgKGlkc01hdGNoIHx8IGVpdGhlckl0ZW1NaXNzaW5nSUQpO1xuXHRcdFx0fSk7XG5cdFx0XHRpZiAodG9NZXJnZSAhPT0gLTEgJiYgdHlwZW9mIG1lcmdlZFt0b01lcmdlXSA9PT0gXCJvYmplY3RcIiAmJiBtZXJnZWRbdG9NZXJnZV0gIT09IG51bGwpIG1lcmdlZFt0b01lcmdlXSA9IF9tZXJnZURpY3RzKG1lcmdlZFt0b01lcmdlXSwgaXRlbSk7XG5cdFx0XHRlbHNlIG1lcmdlZC5wdXNoKGl0ZW0pO1xuXHRcdH0gZWxzZSBpZiAodHlwZW9mIGl0ZW0gPT09IFwib2JqZWN0XCIgJiYgaXRlbSAhPT0gbnVsbCAmJiBcInRleHRcIiBpbiBpdGVtICYmIGl0ZW0udGV4dCA9PT0gXCJcIikgY29udGludWU7XG5cdFx0ZWxzZSBtZXJnZWQucHVzaChpdGVtKTtcblx0XHRyZXR1cm4gbWVyZ2VkO1xuXHR9XG59XG5mdW5jdGlvbiBfbWVyZ2VPYmoobGVmdCwgcmlnaHQpIHtcblx0aWYgKGxlZnQgPT09IHZvaWQgMCAmJiByaWdodCA9PT0gdm9pZCAwKSByZXR1cm4gdm9pZCAwO1xuXHRpZiAobGVmdCA9PT0gdm9pZCAwIHx8IHJpZ2h0ID09PSB2b2lkIDApIHJldHVybiBsZWZ0ID8/IHJpZ2h0O1xuXHRlbHNlIGlmICh0eXBlb2YgbGVmdCAhPT0gdHlwZW9mIHJpZ2h0KSB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBtZXJnZSBvYmplY3RzIG9mIGRpZmZlcmVudCB0eXBlcy5cXG5MZWZ0ICR7dHlwZW9mIGxlZnR9XFxuUmlnaHQgJHt0eXBlb2YgcmlnaHR9YCk7XG5cdGVsc2UgaWYgKHR5cGVvZiBsZWZ0ID09PSBcInN0cmluZ1wiICYmIHR5cGVvZiByaWdodCA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIGxlZnQgKyByaWdodDtcblx0ZWxzZSBpZiAoQXJyYXkuaXNBcnJheShsZWZ0KSAmJiBBcnJheS5pc0FycmF5KHJpZ2h0KSkgcmV0dXJuIF9tZXJnZUxpc3RzKGxlZnQsIHJpZ2h0KTtcblx0ZWxzZSBpZiAodHlwZW9mIGxlZnQgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHJpZ2h0ID09PSBcIm9iamVjdFwiKSByZXR1cm4gX21lcmdlRGljdHMobGVmdCwgcmlnaHQpO1xuXHRlbHNlIGlmIChsZWZ0ID09PSByaWdodCkgcmV0dXJuIGxlZnQ7XG5cdGVsc2UgdGhyb3cgbmV3IEVycm9yKGBDYW4gbm90IG1lcmdlIG9iamVjdHMgb2YgZGlmZmVyZW50IHR5cGVzLlxcbkxlZnQgJHtsZWZ0fVxcblJpZ2h0ICR7cmlnaHR9YCk7XG59XG4vKipcbiogUmVwcmVzZW50cyBhIGNodW5rIG9mIGEgbWVzc2FnZSwgd2hpY2ggY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoIG90aGVyXG4qIG1lc3NhZ2UgY2h1bmtzLiBJdCBpbmNsdWRlcyBhIG1ldGhvZCBgX21lcmdlX2t3YXJnc19kaWN0KClgIGZvciBtZXJnaW5nXG4qIGFkZGl0aW9uYWwga2V5d29yZCBhcmd1bWVudHMgZnJvbSBhbm90aGVyIGBCYXNlTWVzc2FnZUNodW5rYCBpbnRvIHRoaXNcbiogb25lLiBJdCBhbHNvIG92ZXJyaWRlcyB0aGUgYF9fYWRkX18oKWAgbWV0aG9kIHRvIHN1cHBvcnQgY29uY2F0ZW5hdGlvblxuKiBvZiBgQmFzZU1lc3NhZ2VDaHVua2AgaW5zdGFuY2VzLlxuKi9cbnZhciBCYXNlTWVzc2FnZUNodW5rID0gY2xhc3MgQmFzZU1lc3NhZ2VDaHVuayBleHRlbmRzIEJhc2VNZXNzYWdlIHtcblx0c3RhdGljIGlzSW5zdGFuY2Uob2JqKSB7XG5cdFx0aWYgKCFzdXBlci5pc0luc3RhbmNlKG9iaikpIHJldHVybiBmYWxzZTtcblx0XHRsZXQgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqKTtcblx0XHR3aGlsZSAocHJvdG8gIT09IG51bGwpIHtcblx0XHRcdGlmIChwcm90byA9PT0gQmFzZU1lc3NhZ2VDaHVuay5wcm90b3R5cGUpIHJldHVybiB0cnVlO1xuXHRcdFx0cHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG8pO1xuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cbn07XG5mdW5jdGlvbiBfaXNNZXNzYWdlRmllbGRXaXRoUm9sZSh4KSB7XG5cdHJldHVybiB0eXBlb2YgeC5yb2xlID09PSBcInN0cmluZ1wiO1xufVxuLyoqXG4qIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgQmFzZU1lc3NhZ2UuaXNJbnN0YW5jZX0gaW5zdGVhZFxuKi9cbmZ1bmN0aW9uIGlzQmFzZU1lc3NhZ2UobWVzc2FnZUxpa2UpIHtcblx0cmV0dXJuIHR5cGVvZiBtZXNzYWdlTGlrZT8uX2dldFR5cGUgPT09IFwiZnVuY3Rpb25cIjtcbn1cbi8qKlxuKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIEJhc2VNZXNzYWdlQ2h1bmsuaXNJbnN0YW5jZX0gaW5zdGVhZFxuKi9cbmZ1bmN0aW9uIGlzQmFzZU1lc3NhZ2VDaHVuayhtZXNzYWdlTGlrZSkge1xuXHRyZXR1cm4gQmFzZU1lc3NhZ2VDaHVuay5pc0luc3RhbmNlKG1lc3NhZ2VMaWtlKTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBCYXNlTWVzc2FnZSwgQmFzZU1lc3NhZ2VDaHVuaywgX2lzTWVzc2FnZUZpZWxkV2l0aFJvbGUsIF9tZXJnZURpY3RzLCBfbWVyZ2VMaXN0cywgX21lcmdlT2JqLCBfbWVyZ2VTdGF0dXMsIGlzQmFzZU1lc3NhZ2UsIGlzQmFzZU1lc3NhZ2VDaHVuaywgaXNPcGVuQUlUb29sQ2FsbEFycmF5LCBtZXJnZUNvbnRlbnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJhc2UuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/messages/base.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/anthropic.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/block_translators/anthropic.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatAnthropicTranslator: () => (/* binding */ ChatAnthropicTranslator),\n/* harmony export */   convertToV1FromAnthropicInput: () => (/* binding */ convertToV1FromAnthropicInput)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/utils.js\");\n\n\n//#region src/messages/block_translators/anthropic.ts\nfunction convertAnthropicAnnotation(citation) {\n\tif (citation.type === \"char_location\" && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(citation.document_title) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isNumber)(citation.start_char_index) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isNumber)(citation.end_char_index) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(citation.cited_text)) {\n\t\tconst { document_title, start_char_index, end_char_index, cited_text,...rest } = citation;\n\t\treturn {\n\t\t\t...rest,\n\t\t\ttype: \"citation\",\n\t\t\tsource: \"char\",\n\t\t\ttitle: document_title ?? void 0,\n\t\t\tstartIndex: start_char_index,\n\t\t\tendIndex: end_char_index,\n\t\t\tcitedText: cited_text\n\t\t};\n\t}\n\tif (citation.type === \"page_location\" && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(citation.document_title) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isNumber)(citation.start_page_number) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isNumber)(citation.end_page_number) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(citation.cited_text)) {\n\t\tconst { document_title, start_page_number, end_page_number, cited_text,...rest } = citation;\n\t\treturn {\n\t\t\t...rest,\n\t\t\ttype: \"citation\",\n\t\t\tsource: \"page\",\n\t\t\ttitle: document_title ?? void 0,\n\t\t\tstartIndex: start_page_number,\n\t\t\tendIndex: end_page_number,\n\t\t\tcitedText: cited_text\n\t\t};\n\t}\n\tif (citation.type === \"content_block_location\" && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(citation.document_title) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isNumber)(citation.start_block_index) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isNumber)(citation.end_block_index) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(citation.cited_text)) {\n\t\tconst { document_title, start_block_index, end_block_index, cited_text,...rest } = citation;\n\t\treturn {\n\t\t\t...rest,\n\t\t\ttype: \"citation\",\n\t\t\tsource: \"block\",\n\t\t\ttitle: document_title ?? void 0,\n\t\t\tstartIndex: start_block_index,\n\t\t\tendIndex: end_block_index,\n\t\t\tcitedText: cited_text\n\t\t};\n\t}\n\tif (citation.type === \"web_search_result_location\" && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(citation.url) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(citation.title) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(citation.encrypted_index) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(citation.cited_text)) {\n\t\tconst { url, title, encrypted_index, cited_text,...rest } = citation;\n\t\treturn {\n\t\t\t...rest,\n\t\t\ttype: \"citation\",\n\t\t\tsource: \"url\",\n\t\t\turl,\n\t\t\ttitle,\n\t\t\tstartIndex: Number(encrypted_index),\n\t\t\tendIndex: Number(encrypted_index),\n\t\t\tcitedText: cited_text\n\t\t};\n\t}\n\tif (citation.type === \"search_result_location\" && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(citation.source) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(citation.title) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isNumber)(citation.start_block_index) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isNumber)(citation.end_block_index) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(citation.cited_text)) {\n\t\tconst { source, title, start_block_index, end_block_index, cited_text,...rest } = citation;\n\t\treturn {\n\t\t\t...rest,\n\t\t\ttype: \"citation\",\n\t\t\tsource: \"search\",\n\t\t\turl: source,\n\t\t\ttitle: title ?? void 0,\n\t\t\tstartIndex: start_block_index,\n\t\t\tendIndex: end_block_index,\n\t\t\tcitedText: cited_text\n\t\t};\n\t}\n\treturn void 0;\n}\n/**\n* Converts an Anthropic content block to a standard V1 content block.\n*\n* This function handles the conversion of Anthropic-specific content blocks\n* (document and image blocks) to the standardized V1 format. It supports\n* various source types including base64 data, URLs, file IDs, and text data.\n*\n* @param block - The Anthropic content block to convert\n* @returns A standard V1 content block if conversion is successful, undefined otherwise\n*\n* @example\n* ```typescript\n* const anthropicBlock = {\n*   type: \"image\",\n*   source: {\n*     type: \"base64\",\n*     media_type: \"image/png\",\n*     data: \"iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==\"\n*   }\n* };\n*\n* const standardBlock = convertToV1FromAnthropicContentBlock(anthropicBlock);\n* // Returns: { type: \"image\", mimeType: \"image/png\", data: \"...\" }\n* ```\n*/\nfunction convertToV1FromAnthropicContentBlock(block) {\n\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"document\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.source) && \"type\" in block.source) {\n\t\tif (block.source.type === \"base64\" && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.source.media_type) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.source.data)) return {\n\t\t\ttype: \"file\",\n\t\t\tmimeType: block.source.media_type,\n\t\t\tdata: block.source.data\n\t\t};\n\t\telse if (block.source.type === \"url\" && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.source.url)) return {\n\t\t\ttype: \"file\",\n\t\t\turl: block.source.url\n\t\t};\n\t\telse if (block.source.type === \"file\" && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.source.file_id)) return {\n\t\t\ttype: \"file\",\n\t\t\tfileId: block.source.file_id\n\t\t};\n\t\telse if (block.source.type === \"text\" && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.source.data)) return {\n\t\t\ttype: \"file\",\n\t\t\tmimeType: String(block.source.media_type ?? \"text/plain\"),\n\t\t\tdata: block.source.data\n\t\t};\n\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"image\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.source) && \"type\" in block.source) {\n\t\tif (block.source.type === \"base64\" && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.source.media_type) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.source.data)) return {\n\t\t\ttype: \"image\",\n\t\t\tmimeType: block.source.media_type,\n\t\t\tdata: block.source.data\n\t\t};\n\t\telse if (block.source.type === \"url\" && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.source.url)) return {\n\t\t\ttype: \"image\",\n\t\t\turl: block.source.url\n\t\t};\n\t\telse if (block.source.type === \"file\" && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.source.file_id)) return {\n\t\t\ttype: \"image\",\n\t\t\tfileId: block.source.file_id\n\t\t};\n\t}\n\treturn void 0;\n}\n/**\n* Converts an array of content blocks from Anthropic format to v1 standard format.\n*\n* This function processes each content block in the input array, attempting to convert\n* Anthropic-specific block formats (like image blocks with source objects, document blocks, etc.)\n* to the standardized v1 content block format. If a block cannot be converted, it is\n* passed through as-is with a type assertion to ContentBlock.Standard.\n*\n* @param content - Array of content blocks in Anthropic format to be converted\n* @returns Array of content blocks in v1 standard format\n*/\nfunction convertToV1FromAnthropicInput(content) {\n\tfunction* iterateContent() {\n\t\tfor (const block of content) {\n\t\t\tconst stdBlock = convertToV1FromAnthropicContentBlock(block);\n\t\t\tif (stdBlock) yield stdBlock;\n\t\t\telse yield block;\n\t\t}\n\t}\n\treturn Array.from(iterateContent());\n}\n/**\n* Converts an Anthropic AI message to an array of v1 standard content blocks.\n*\n* This function processes an AI message containing Anthropic-specific content blocks\n* and converts them to the standardized v1 content block format.\n*\n* @param message - The AI message containing Anthropic-formatted content blocks\n* @returns Array of content blocks in v1 standard format\n*\n* @example\n* ```typescript\n* const message = new AIMessage([\n*   { type: \"text\", text: \"Hello world\" },\n*   { type: \"thinking\", text: \"Let me think about this...\" },\n*   { type: \"tool_use\", id: \"123\", name: \"calculator\", input: { a: 1, b: 2 } }\n* ]);\n*\n* const standardBlocks = convertToV1FromAnthropicMessage(message);\n* // Returns:\n* // [\n* //   { type: \"text\", text: \"Hello world\" },\n* //   { type: \"reasoning\", reasoning: \"Let me think about this...\" },\n* //   { type: \"tool_call\", id: \"123\", name: \"calculator\", args: { a: 1, b: 2 } }\n* // ]\n* ```\n*/\nfunction convertToV1FromAnthropicMessage(message) {\n\tfunction* iterateContent() {\n\t\tconst content = typeof message.content === \"string\" ? [{\n\t\t\ttype: \"text\",\n\t\t\ttext: message.content\n\t\t}] : message.content;\n\t\tfor (const block of content) {\n\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"text\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.text)) {\n\t\t\t\tconst { text, citations,...rest } = block;\n\t\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isArray)(citations) && citations.length) {\n\t\t\t\t\tconst _citations = citations.reduce((acc, item) => {\n\t\t\t\t\t\tconst citation = convertAnthropicAnnotation(item);\n\t\t\t\t\t\tif (citation) return [...acc, citation];\n\t\t\t\t\t\treturn acc;\n\t\t\t\t\t}, []);\n\t\t\t\t\tyield {\n\t\t\t\t\t\t...rest,\n\t\t\t\t\t\ttype: \"text\",\n\t\t\t\t\t\ttext,\n\t\t\t\t\t\tannotations: _citations\n\t\t\t\t\t};\n\t\t\t\t\tcontinue;\n\t\t\t\t} else {\n\t\t\t\t\tyield {\n\t\t\t\t\t\t...rest,\n\t\t\t\t\t\ttype: \"text\",\n\t\t\t\t\t\ttext\n\t\t\t\t\t};\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"thinking\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.thinking)) {\n\t\t\t\tconst { thinking, signature,...rest } = block;\n\t\t\t\tyield {\n\t\t\t\t\t...rest,\n\t\t\t\t\ttype: \"reasoning\",\n\t\t\t\t\treasoning: thinking,\n\t\t\t\t\tsignature\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"redacted_thinking\")) {\n\t\t\t\tyield {\n\t\t\t\t\ttype: \"non_standard\",\n\t\t\t\t\tvalue: block\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"tool_use\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.name) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.id)) {\n\t\t\t\tyield {\n\t\t\t\t\ttype: \"tool_call\",\n\t\t\t\t\tid: block.id,\n\t\t\t\t\tname: block.name,\n\t\t\t\t\targs: block.input\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"input_json_delta\")) {\n\t\t\t\tif (_isAIMessageChunk(message) && message.tool_call_chunks?.length) {\n\t\t\t\t\tconst tool_call_chunk = message.tool_call_chunks[0];\n\t\t\t\t\tyield {\n\t\t\t\t\t\ttype: \"tool_call_chunk\",\n\t\t\t\t\t\tid: tool_call_chunk.id,\n\t\t\t\t\t\tname: tool_call_chunk.name,\n\t\t\t\t\t\targs: tool_call_chunk.args,\n\t\t\t\t\t\tindex: tool_call_chunk.index\n\t\t\t\t\t};\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"server_tool_use\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.name) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.id)) {\n\t\t\t\tconst { name, id } = block;\n\t\t\t\tif (name === \"web_search\") {\n\t\t\t\t\tconst query = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.iife)(() => {\n\t\t\t\t\t\tif (typeof block.input === \"string\") return block.input;\n\t\t\t\t\t\telse if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.input) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.input.query)) return block.input.query;\n\t\t\t\t\t\telse if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.partial_json)) {\n\t\t\t\t\t\t\tconst json = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.safeParseJson)(block.partial_json);\n\t\t\t\t\t\t\tif (json?.query) return json.query;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn \"\";\n\t\t\t\t\t});\n\t\t\t\t\tyield {\n\t\t\t\t\t\tid,\n\t\t\t\t\t\ttype: \"server_tool_call\",\n\t\t\t\t\t\tname: \"web_search\",\n\t\t\t\t\t\targs: { query }\n\t\t\t\t\t};\n\t\t\t\t\tcontinue;\n\t\t\t\t} else if (block.name === \"code_execution\") {\n\t\t\t\t\tconst code = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.iife)(() => {\n\t\t\t\t\t\tif (typeof block.input === \"string\") return block.input;\n\t\t\t\t\t\telse if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.input) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.input.code)) return block.input.code;\n\t\t\t\t\t\telse if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.partial_json)) {\n\t\t\t\t\t\t\tconst json = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.safeParseJson)(block.partial_json);\n\t\t\t\t\t\t\tif (json?.code) return json.code;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn \"\";\n\t\t\t\t\t});\n\t\t\t\t\tyield {\n\t\t\t\t\t\tid,\n\t\t\t\t\t\ttype: \"server_tool_call\",\n\t\t\t\t\t\tname: \"code_execution\",\n\t\t\t\t\t\targs: { code }\n\t\t\t\t\t};\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"web_search_tool_result\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.tool_use_id) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isArray)(block.content)) {\n\t\t\t\tconst { content: content$1, tool_use_id } = block;\n\t\t\t\tconst urls = content$1.reduce((acc, content$2) => {\n\t\t\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(content$2, \"web_search_result\")) return [...acc, content$2.url];\n\t\t\t\t\treturn acc;\n\t\t\t\t}, []);\n\t\t\t\tyield {\n\t\t\t\t\ttype: \"server_tool_call_result\",\n\t\t\t\t\tname: \"web_search\",\n\t\t\t\t\ttoolCallId: tool_use_id,\n\t\t\t\t\tstatus: \"success\",\n\t\t\t\t\toutput: { urls }\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"code_execution_tool_result\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.tool_use_id) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.content)) {\n\t\t\t\tyield {\n\t\t\t\t\ttype: \"server_tool_call_result\",\n\t\t\t\t\tname: \"code_execution\",\n\t\t\t\t\ttoolCallId: block.tool_use_id,\n\t\t\t\t\tstatus: \"success\",\n\t\t\t\t\toutput: block.content\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"mcp_tool_use\")) {\n\t\t\t\tyield {\n\t\t\t\t\tid: block.id,\n\t\t\t\t\ttype: \"server_tool_call\",\n\t\t\t\t\tname: \"mcp_tool_use\",\n\t\t\t\t\targs: block.input\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"mcp_tool_result\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.tool_use_id) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.content)) {\n\t\t\t\tyield {\n\t\t\t\t\ttype: \"server_tool_call_result\",\n\t\t\t\t\tname: \"mcp_tool_use\",\n\t\t\t\t\ttoolCallId: block.tool_use_id,\n\t\t\t\t\tstatus: \"success\",\n\t\t\t\t\toutput: block.content\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"container_upload\")) {\n\t\t\t\tyield {\n\t\t\t\t\ttype: \"server_tool_call\",\n\t\t\t\t\tname: \"container_upload\",\n\t\t\t\t\targs: block.input\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"search_result\")) {\n\t\t\t\tyield {\n\t\t\t\t\tid: block.id,\n\t\t\t\t\ttype: \"non_standard\",\n\t\t\t\t\tvalue: block\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"tool_result\")) {\n\t\t\t\tyield {\n\t\t\t\t\tid: block.id,\n\t\t\t\t\ttype: \"non_standard\",\n\t\t\t\t\tvalue: block\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else {\n\t\t\t\tconst stdBlock = convertToV1FromAnthropicContentBlock(block);\n\t\t\t\tif (stdBlock) {\n\t\t\t\t\tyield stdBlock;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tyield {\n\t\t\t\ttype: \"non_standard\",\n\t\t\t\tvalue: block\n\t\t\t};\n\t\t}\n\t}\n\treturn Array.from(iterateContent());\n}\nconst ChatAnthropicTranslator = {\n\ttranslateContent: convertToV1FromAnthropicMessage,\n\ttranslateContentChunk: convertToV1FromAnthropicMessage\n};\nfunction _isAIMessageChunk(message) {\n\treturn typeof message?._getType === \"function\" && typeof message.concat === \"function\" && message._getType() === \"ai\";\n}\n\n//#endregion\n\n//# sourceMappingURL=anthropic.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvYmxvY2tfdHJhbnNsYXRvcnMvYW50aHJvcGljLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2Rzs7QUFFN0c7QUFDQTtBQUNBLDBDQUEwQyxvREFBUyw2QkFBNkIsb0RBQVMsK0JBQStCLG9EQUFTLDZCQUE2QixvREFBUztBQUN2SyxVQUFVLHVFQUF1RTtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxvREFBUyw2QkFBNkIsb0RBQVMsZ0NBQWdDLG9EQUFTLDhCQUE4QixvREFBUztBQUN6SyxVQUFVLHlFQUF5RTtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxvREFBUyw2QkFBNkIsb0RBQVMsZ0NBQWdDLG9EQUFTLDhCQUE4QixvREFBUztBQUNsTCxVQUFVLHlFQUF5RTtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RCxvREFBUyxrQkFBa0Isb0RBQVMsb0JBQW9CLG9EQUFTLDhCQUE4QixvREFBUztBQUMvSixVQUFVLGtEQUFrRDtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELG9EQUFTLHFCQUFxQixvREFBUyxvQkFBb0Isb0RBQVMsZ0NBQWdDLG9EQUFTLDhCQUE4QixvREFBUztBQUN2TSxVQUFVLHdFQUF3RTtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBLEtBQUssMERBQWUsdUJBQXVCLG9EQUFTO0FBQ3BELHdDQUF3QyxvREFBUyw2QkFBNkIsb0RBQVM7QUFDdkY7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsb0RBQVM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLG9EQUFTO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxvREFBUztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsU0FBUywwREFBZSxvQkFBb0Isb0RBQVM7QUFDeEQsd0NBQXdDLG9EQUFTLDZCQUE2QixvREFBUztBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxvREFBUztBQUNuRDtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsb0RBQVM7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxtQ0FBbUM7QUFDekMsTUFBTSxzREFBc0Q7QUFDNUQsTUFBTSwwREFBMEQ7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsbUNBQW1DO0FBQzVDLFNBQVMsNERBQTREO0FBQ3JFLFNBQVMsMERBQTBEO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxPQUFPLDBEQUFlLG1CQUFtQixvREFBUztBQUNsRCxZQUFZLDBCQUEwQjtBQUN0QyxRQUFRLG1EQUFRO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxTQUFTLDBEQUFlLHVCQUF1QixvREFBUztBQUM3RCxZQUFZLDhCQUE4QjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssU0FBUywwREFBZTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxTQUFTLDBEQUFlLHVCQUF1QixvREFBUyxnQkFBZ0Isb0RBQVM7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLFNBQVMsMERBQWU7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssU0FBUywwREFBZSw4QkFBOEIsb0RBQVMsZ0JBQWdCLG9EQUFTO0FBQzdGLFlBQVksV0FBVztBQUN2QjtBQUNBLG1CQUFtQiwrQ0FBSTtBQUN2QjtBQUNBLGVBQWUsb0RBQVMsaUJBQWlCLG9EQUFTO0FBQ2xELGVBQWUsb0RBQVM7QUFDeEIsb0JBQW9CLHdEQUFhO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsTUFBTTtBQUNOLGtCQUFrQiwrQ0FBSTtBQUN0QjtBQUNBLGVBQWUsb0RBQVMsaUJBQWlCLG9EQUFTO0FBQ2xELGVBQWUsb0RBQVM7QUFDeEIsb0JBQW9CLHdEQUFhO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSxLQUFLLFNBQVMsMERBQWUscUNBQXFDLG9EQUFTLHVCQUF1QixtREFBUTtBQUMxRyxZQUFZLGtDQUFrQztBQUM5QztBQUNBLFNBQVMsMERBQWU7QUFDeEI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0EsS0FBSyxTQUFTLDBEQUFlLHlDQUF5QyxvREFBUyx1QkFBdUIsb0RBQVM7QUFDL0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssU0FBUywwREFBZTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssU0FBUywwREFBZSw4QkFBOEIsb0RBQVMsdUJBQXVCLG9EQUFTO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLFNBQVMsMERBQWU7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxTQUFTLDBEQUFlO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssU0FBUywwREFBZTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ2tFO0FBQ2xFIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvYmxvY2tfdHJhbnNsYXRvcnMvYW50aHJvcGljLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9pc0FycmF5LCBfaXNDb250ZW50QmxvY2ssIF9pc051bWJlciwgX2lzT2JqZWN0LCBfaXNTdHJpbmcsIGlpZmUsIHNhZmVQYXJzZUpzb24gfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL21lc3NhZ2VzL2Jsb2NrX3RyYW5zbGF0b3JzL2FudGhyb3BpYy50c1xuZnVuY3Rpb24gY29udmVydEFudGhyb3BpY0Fubm90YXRpb24oY2l0YXRpb24pIHtcblx0aWYgKGNpdGF0aW9uLnR5cGUgPT09IFwiY2hhcl9sb2NhdGlvblwiICYmIF9pc1N0cmluZyhjaXRhdGlvbi5kb2N1bWVudF90aXRsZSkgJiYgX2lzTnVtYmVyKGNpdGF0aW9uLnN0YXJ0X2NoYXJfaW5kZXgpICYmIF9pc051bWJlcihjaXRhdGlvbi5lbmRfY2hhcl9pbmRleCkgJiYgX2lzU3RyaW5nKGNpdGF0aW9uLmNpdGVkX3RleHQpKSB7XG5cdFx0Y29uc3QgeyBkb2N1bWVudF90aXRsZSwgc3RhcnRfY2hhcl9pbmRleCwgZW5kX2NoYXJfaW5kZXgsIGNpdGVkX3RleHQsLi4ucmVzdCB9ID0gY2l0YXRpb247XG5cdFx0cmV0dXJuIHtcblx0XHRcdC4uLnJlc3QsXG5cdFx0XHR0eXBlOiBcImNpdGF0aW9uXCIsXG5cdFx0XHRzb3VyY2U6IFwiY2hhclwiLFxuXHRcdFx0dGl0bGU6IGRvY3VtZW50X3RpdGxlID8/IHZvaWQgMCxcblx0XHRcdHN0YXJ0SW5kZXg6IHN0YXJ0X2NoYXJfaW5kZXgsXG5cdFx0XHRlbmRJbmRleDogZW5kX2NoYXJfaW5kZXgsXG5cdFx0XHRjaXRlZFRleHQ6IGNpdGVkX3RleHRcblx0XHR9O1xuXHR9XG5cdGlmIChjaXRhdGlvbi50eXBlID09PSBcInBhZ2VfbG9jYXRpb25cIiAmJiBfaXNTdHJpbmcoY2l0YXRpb24uZG9jdW1lbnRfdGl0bGUpICYmIF9pc051bWJlcihjaXRhdGlvbi5zdGFydF9wYWdlX251bWJlcikgJiYgX2lzTnVtYmVyKGNpdGF0aW9uLmVuZF9wYWdlX251bWJlcikgJiYgX2lzU3RyaW5nKGNpdGF0aW9uLmNpdGVkX3RleHQpKSB7XG5cdFx0Y29uc3QgeyBkb2N1bWVudF90aXRsZSwgc3RhcnRfcGFnZV9udW1iZXIsIGVuZF9wYWdlX251bWJlciwgY2l0ZWRfdGV4dCwuLi5yZXN0IH0gPSBjaXRhdGlvbjtcblx0XHRyZXR1cm4ge1xuXHRcdFx0Li4ucmVzdCxcblx0XHRcdHR5cGU6IFwiY2l0YXRpb25cIixcblx0XHRcdHNvdXJjZTogXCJwYWdlXCIsXG5cdFx0XHR0aXRsZTogZG9jdW1lbnRfdGl0bGUgPz8gdm9pZCAwLFxuXHRcdFx0c3RhcnRJbmRleDogc3RhcnRfcGFnZV9udW1iZXIsXG5cdFx0XHRlbmRJbmRleDogZW5kX3BhZ2VfbnVtYmVyLFxuXHRcdFx0Y2l0ZWRUZXh0OiBjaXRlZF90ZXh0XG5cdFx0fTtcblx0fVxuXHRpZiAoY2l0YXRpb24udHlwZSA9PT0gXCJjb250ZW50X2Jsb2NrX2xvY2F0aW9uXCIgJiYgX2lzU3RyaW5nKGNpdGF0aW9uLmRvY3VtZW50X3RpdGxlKSAmJiBfaXNOdW1iZXIoY2l0YXRpb24uc3RhcnRfYmxvY2tfaW5kZXgpICYmIF9pc051bWJlcihjaXRhdGlvbi5lbmRfYmxvY2tfaW5kZXgpICYmIF9pc1N0cmluZyhjaXRhdGlvbi5jaXRlZF90ZXh0KSkge1xuXHRcdGNvbnN0IHsgZG9jdW1lbnRfdGl0bGUsIHN0YXJ0X2Jsb2NrX2luZGV4LCBlbmRfYmxvY2tfaW5kZXgsIGNpdGVkX3RleHQsLi4ucmVzdCB9ID0gY2l0YXRpb247XG5cdFx0cmV0dXJuIHtcblx0XHRcdC4uLnJlc3QsXG5cdFx0XHR0eXBlOiBcImNpdGF0aW9uXCIsXG5cdFx0XHRzb3VyY2U6IFwiYmxvY2tcIixcblx0XHRcdHRpdGxlOiBkb2N1bWVudF90aXRsZSA/PyB2b2lkIDAsXG5cdFx0XHRzdGFydEluZGV4OiBzdGFydF9ibG9ja19pbmRleCxcblx0XHRcdGVuZEluZGV4OiBlbmRfYmxvY2tfaW5kZXgsXG5cdFx0XHRjaXRlZFRleHQ6IGNpdGVkX3RleHRcblx0XHR9O1xuXHR9XG5cdGlmIChjaXRhdGlvbi50eXBlID09PSBcIndlYl9zZWFyY2hfcmVzdWx0X2xvY2F0aW9uXCIgJiYgX2lzU3RyaW5nKGNpdGF0aW9uLnVybCkgJiYgX2lzU3RyaW5nKGNpdGF0aW9uLnRpdGxlKSAmJiBfaXNTdHJpbmcoY2l0YXRpb24uZW5jcnlwdGVkX2luZGV4KSAmJiBfaXNTdHJpbmcoY2l0YXRpb24uY2l0ZWRfdGV4dCkpIHtcblx0XHRjb25zdCB7IHVybCwgdGl0bGUsIGVuY3J5cHRlZF9pbmRleCwgY2l0ZWRfdGV4dCwuLi5yZXN0IH0gPSBjaXRhdGlvbjtcblx0XHRyZXR1cm4ge1xuXHRcdFx0Li4ucmVzdCxcblx0XHRcdHR5cGU6IFwiY2l0YXRpb25cIixcblx0XHRcdHNvdXJjZTogXCJ1cmxcIixcblx0XHRcdHVybCxcblx0XHRcdHRpdGxlLFxuXHRcdFx0c3RhcnRJbmRleDogTnVtYmVyKGVuY3J5cHRlZF9pbmRleCksXG5cdFx0XHRlbmRJbmRleDogTnVtYmVyKGVuY3J5cHRlZF9pbmRleCksXG5cdFx0XHRjaXRlZFRleHQ6IGNpdGVkX3RleHRcblx0XHR9O1xuXHR9XG5cdGlmIChjaXRhdGlvbi50eXBlID09PSBcInNlYXJjaF9yZXN1bHRfbG9jYXRpb25cIiAmJiBfaXNTdHJpbmcoY2l0YXRpb24uc291cmNlKSAmJiBfaXNTdHJpbmcoY2l0YXRpb24udGl0bGUpICYmIF9pc051bWJlcihjaXRhdGlvbi5zdGFydF9ibG9ja19pbmRleCkgJiYgX2lzTnVtYmVyKGNpdGF0aW9uLmVuZF9ibG9ja19pbmRleCkgJiYgX2lzU3RyaW5nKGNpdGF0aW9uLmNpdGVkX3RleHQpKSB7XG5cdFx0Y29uc3QgeyBzb3VyY2UsIHRpdGxlLCBzdGFydF9ibG9ja19pbmRleCwgZW5kX2Jsb2NrX2luZGV4LCBjaXRlZF90ZXh0LC4uLnJlc3QgfSA9IGNpdGF0aW9uO1xuXHRcdHJldHVybiB7XG5cdFx0XHQuLi5yZXN0LFxuXHRcdFx0dHlwZTogXCJjaXRhdGlvblwiLFxuXHRcdFx0c291cmNlOiBcInNlYXJjaFwiLFxuXHRcdFx0dXJsOiBzb3VyY2UsXG5cdFx0XHR0aXRsZTogdGl0bGUgPz8gdm9pZCAwLFxuXHRcdFx0c3RhcnRJbmRleDogc3RhcnRfYmxvY2tfaW5kZXgsXG5cdFx0XHRlbmRJbmRleDogZW5kX2Jsb2NrX2luZGV4LFxuXHRcdFx0Y2l0ZWRUZXh0OiBjaXRlZF90ZXh0XG5cdFx0fTtcblx0fVxuXHRyZXR1cm4gdm9pZCAwO1xufVxuLyoqXG4qIENvbnZlcnRzIGFuIEFudGhyb3BpYyBjb250ZW50IGJsb2NrIHRvIGEgc3RhbmRhcmQgVjEgY29udGVudCBibG9jay5cbipcbiogVGhpcyBmdW5jdGlvbiBoYW5kbGVzIHRoZSBjb252ZXJzaW9uIG9mIEFudGhyb3BpYy1zcGVjaWZpYyBjb250ZW50IGJsb2Nrc1xuKiAoZG9jdW1lbnQgYW5kIGltYWdlIGJsb2NrcykgdG8gdGhlIHN0YW5kYXJkaXplZCBWMSBmb3JtYXQuIEl0IHN1cHBvcnRzXG4qIHZhcmlvdXMgc291cmNlIHR5cGVzIGluY2x1ZGluZyBiYXNlNjQgZGF0YSwgVVJMcywgZmlsZSBJRHMsIGFuZCB0ZXh0IGRhdGEuXG4qXG4qIEBwYXJhbSBibG9jayAtIFRoZSBBbnRocm9waWMgY29udGVudCBibG9jayB0byBjb252ZXJ0XG4qIEByZXR1cm5zIEEgc3RhbmRhcmQgVjEgY29udGVudCBibG9jayBpZiBjb252ZXJzaW9uIGlzIHN1Y2Nlc3NmdWwsIHVuZGVmaW5lZCBvdGhlcndpc2VcbipcbiogQGV4YW1wbGVcbiogYGBgdHlwZXNjcmlwdFxuKiBjb25zdCBhbnRocm9waWNCbG9jayA9IHtcbiogICB0eXBlOiBcImltYWdlXCIsXG4qICAgc291cmNlOiB7XG4qICAgICB0eXBlOiBcImJhc2U2NFwiLFxuKiAgICAgbWVkaWFfdHlwZTogXCJpbWFnZS9wbmdcIixcbiogICAgIGRhdGE6IFwiaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFFQUFBQUJDQVlBQUFBZkZjU0pBQUFBRFVsRVFWUjQybVA4LzUraEhnQUhnZ0ovUGNoSTd3QUFBQUJKUlU1RXJrSmdnZz09XCJcbiogICB9XG4qIH07XG4qXG4qIGNvbnN0IHN0YW5kYXJkQmxvY2sgPSBjb252ZXJ0VG9WMUZyb21BbnRocm9waWNDb250ZW50QmxvY2soYW50aHJvcGljQmxvY2spO1xuKiAvLyBSZXR1cm5zOiB7IHR5cGU6IFwiaW1hZ2VcIiwgbWltZVR5cGU6IFwiaW1hZ2UvcG5nXCIsIGRhdGE6IFwiLi4uXCIgfVxuKiBgYGBcbiovXG5mdW5jdGlvbiBjb252ZXJ0VG9WMUZyb21BbnRocm9waWNDb250ZW50QmxvY2soYmxvY2spIHtcblx0aWYgKF9pc0NvbnRlbnRCbG9jayhibG9jaywgXCJkb2N1bWVudFwiKSAmJiBfaXNPYmplY3QoYmxvY2suc291cmNlKSAmJiBcInR5cGVcIiBpbiBibG9jay5zb3VyY2UpIHtcblx0XHRpZiAoYmxvY2suc291cmNlLnR5cGUgPT09IFwiYmFzZTY0XCIgJiYgX2lzU3RyaW5nKGJsb2NrLnNvdXJjZS5tZWRpYV90eXBlKSAmJiBfaXNTdHJpbmcoYmxvY2suc291cmNlLmRhdGEpKSByZXR1cm4ge1xuXHRcdFx0dHlwZTogXCJmaWxlXCIsXG5cdFx0XHRtaW1lVHlwZTogYmxvY2suc291cmNlLm1lZGlhX3R5cGUsXG5cdFx0XHRkYXRhOiBibG9jay5zb3VyY2UuZGF0YVxuXHRcdH07XG5cdFx0ZWxzZSBpZiAoYmxvY2suc291cmNlLnR5cGUgPT09IFwidXJsXCIgJiYgX2lzU3RyaW5nKGJsb2NrLnNvdXJjZS51cmwpKSByZXR1cm4ge1xuXHRcdFx0dHlwZTogXCJmaWxlXCIsXG5cdFx0XHR1cmw6IGJsb2NrLnNvdXJjZS51cmxcblx0XHR9O1xuXHRcdGVsc2UgaWYgKGJsb2NrLnNvdXJjZS50eXBlID09PSBcImZpbGVcIiAmJiBfaXNTdHJpbmcoYmxvY2suc291cmNlLmZpbGVfaWQpKSByZXR1cm4ge1xuXHRcdFx0dHlwZTogXCJmaWxlXCIsXG5cdFx0XHRmaWxlSWQ6IGJsb2NrLnNvdXJjZS5maWxlX2lkXG5cdFx0fTtcblx0XHRlbHNlIGlmIChibG9jay5zb3VyY2UudHlwZSA9PT0gXCJ0ZXh0XCIgJiYgX2lzU3RyaW5nKGJsb2NrLnNvdXJjZS5kYXRhKSkgcmV0dXJuIHtcblx0XHRcdHR5cGU6IFwiZmlsZVwiLFxuXHRcdFx0bWltZVR5cGU6IFN0cmluZyhibG9jay5zb3VyY2UubWVkaWFfdHlwZSA/PyBcInRleHQvcGxhaW5cIiksXG5cdFx0XHRkYXRhOiBibG9jay5zb3VyY2UuZGF0YVxuXHRcdH07XG5cdH0gZWxzZSBpZiAoX2lzQ29udGVudEJsb2NrKGJsb2NrLCBcImltYWdlXCIpICYmIF9pc09iamVjdChibG9jay5zb3VyY2UpICYmIFwidHlwZVwiIGluIGJsb2NrLnNvdXJjZSkge1xuXHRcdGlmIChibG9jay5zb3VyY2UudHlwZSA9PT0gXCJiYXNlNjRcIiAmJiBfaXNTdHJpbmcoYmxvY2suc291cmNlLm1lZGlhX3R5cGUpICYmIF9pc1N0cmluZyhibG9jay5zb3VyY2UuZGF0YSkpIHJldHVybiB7XG5cdFx0XHR0eXBlOiBcImltYWdlXCIsXG5cdFx0XHRtaW1lVHlwZTogYmxvY2suc291cmNlLm1lZGlhX3R5cGUsXG5cdFx0XHRkYXRhOiBibG9jay5zb3VyY2UuZGF0YVxuXHRcdH07XG5cdFx0ZWxzZSBpZiAoYmxvY2suc291cmNlLnR5cGUgPT09IFwidXJsXCIgJiYgX2lzU3RyaW5nKGJsb2NrLnNvdXJjZS51cmwpKSByZXR1cm4ge1xuXHRcdFx0dHlwZTogXCJpbWFnZVwiLFxuXHRcdFx0dXJsOiBibG9jay5zb3VyY2UudXJsXG5cdFx0fTtcblx0XHRlbHNlIGlmIChibG9jay5zb3VyY2UudHlwZSA9PT0gXCJmaWxlXCIgJiYgX2lzU3RyaW5nKGJsb2NrLnNvdXJjZS5maWxlX2lkKSkgcmV0dXJuIHtcblx0XHRcdHR5cGU6IFwiaW1hZ2VcIixcblx0XHRcdGZpbGVJZDogYmxvY2suc291cmNlLmZpbGVfaWRcblx0XHR9O1xuXHR9XG5cdHJldHVybiB2b2lkIDA7XG59XG4vKipcbiogQ29udmVydHMgYW4gYXJyYXkgb2YgY29udGVudCBibG9ja3MgZnJvbSBBbnRocm9waWMgZm9ybWF0IHRvIHYxIHN0YW5kYXJkIGZvcm1hdC5cbipcbiogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgZWFjaCBjb250ZW50IGJsb2NrIGluIHRoZSBpbnB1dCBhcnJheSwgYXR0ZW1wdGluZyB0byBjb252ZXJ0XG4qIEFudGhyb3BpYy1zcGVjaWZpYyBibG9jayBmb3JtYXRzIChsaWtlIGltYWdlIGJsb2NrcyB3aXRoIHNvdXJjZSBvYmplY3RzLCBkb2N1bWVudCBibG9ja3MsIGV0Yy4pXG4qIHRvIHRoZSBzdGFuZGFyZGl6ZWQgdjEgY29udGVudCBibG9jayBmb3JtYXQuIElmIGEgYmxvY2sgY2Fubm90IGJlIGNvbnZlcnRlZCwgaXQgaXNcbiogcGFzc2VkIHRocm91Z2ggYXMtaXMgd2l0aCBhIHR5cGUgYXNzZXJ0aW9uIHRvIENvbnRlbnRCbG9jay5TdGFuZGFyZC5cbipcbiogQHBhcmFtIGNvbnRlbnQgLSBBcnJheSBvZiBjb250ZW50IGJsb2NrcyBpbiBBbnRocm9waWMgZm9ybWF0IHRvIGJlIGNvbnZlcnRlZFxuKiBAcmV0dXJucyBBcnJheSBvZiBjb250ZW50IGJsb2NrcyBpbiB2MSBzdGFuZGFyZCBmb3JtYXRcbiovXG5mdW5jdGlvbiBjb252ZXJ0VG9WMUZyb21BbnRocm9waWNJbnB1dChjb250ZW50KSB7XG5cdGZ1bmN0aW9uKiBpdGVyYXRlQ29udGVudCgpIHtcblx0XHRmb3IgKGNvbnN0IGJsb2NrIG9mIGNvbnRlbnQpIHtcblx0XHRcdGNvbnN0IHN0ZEJsb2NrID0gY29udmVydFRvVjFGcm9tQW50aHJvcGljQ29udGVudEJsb2NrKGJsb2NrKTtcblx0XHRcdGlmIChzdGRCbG9jaykgeWllbGQgc3RkQmxvY2s7XG5cdFx0XHRlbHNlIHlpZWxkIGJsb2NrO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gQXJyYXkuZnJvbShpdGVyYXRlQ29udGVudCgpKTtcbn1cbi8qKlxuKiBDb252ZXJ0cyBhbiBBbnRocm9waWMgQUkgbWVzc2FnZSB0byBhbiBhcnJheSBvZiB2MSBzdGFuZGFyZCBjb250ZW50IGJsb2Nrcy5cbipcbiogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgYW4gQUkgbWVzc2FnZSBjb250YWluaW5nIEFudGhyb3BpYy1zcGVjaWZpYyBjb250ZW50IGJsb2Nrc1xuKiBhbmQgY29udmVydHMgdGhlbSB0byB0aGUgc3RhbmRhcmRpemVkIHYxIGNvbnRlbnQgYmxvY2sgZm9ybWF0LlxuKlxuKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBBSSBtZXNzYWdlIGNvbnRhaW5pbmcgQW50aHJvcGljLWZvcm1hdHRlZCBjb250ZW50IGJsb2Nrc1xuKiBAcmV0dXJucyBBcnJheSBvZiBjb250ZW50IGJsb2NrcyBpbiB2MSBzdGFuZGFyZCBmb3JtYXRcbipcbiogQGV4YW1wbGVcbiogYGBgdHlwZXNjcmlwdFxuKiBjb25zdCBtZXNzYWdlID0gbmV3IEFJTWVzc2FnZShbXG4qICAgeyB0eXBlOiBcInRleHRcIiwgdGV4dDogXCJIZWxsbyB3b3JsZFwiIH0sXG4qICAgeyB0eXBlOiBcInRoaW5raW5nXCIsIHRleHQ6IFwiTGV0IG1lIHRoaW5rIGFib3V0IHRoaXMuLi5cIiB9LFxuKiAgIHsgdHlwZTogXCJ0b29sX3VzZVwiLCBpZDogXCIxMjNcIiwgbmFtZTogXCJjYWxjdWxhdG9yXCIsIGlucHV0OiB7IGE6IDEsIGI6IDIgfSB9XG4qIF0pO1xuKlxuKiBjb25zdCBzdGFuZGFyZEJsb2NrcyA9IGNvbnZlcnRUb1YxRnJvbUFudGhyb3BpY01lc3NhZ2UobWVzc2FnZSk7XG4qIC8vIFJldHVybnM6XG4qIC8vIFtcbiogLy8gICB7IHR5cGU6IFwidGV4dFwiLCB0ZXh0OiBcIkhlbGxvIHdvcmxkXCIgfSxcbiogLy8gICB7IHR5cGU6IFwicmVhc29uaW5nXCIsIHJlYXNvbmluZzogXCJMZXQgbWUgdGhpbmsgYWJvdXQgdGhpcy4uLlwiIH0sXG4qIC8vICAgeyB0eXBlOiBcInRvb2xfY2FsbFwiLCBpZDogXCIxMjNcIiwgbmFtZTogXCJjYWxjdWxhdG9yXCIsIGFyZ3M6IHsgYTogMSwgYjogMiB9IH1cbiogLy8gXVxuKiBgYGBcbiovXG5mdW5jdGlvbiBjb252ZXJ0VG9WMUZyb21BbnRocm9waWNNZXNzYWdlKG1lc3NhZ2UpIHtcblx0ZnVuY3Rpb24qIGl0ZXJhdGVDb250ZW50KCkge1xuXHRcdGNvbnN0IGNvbnRlbnQgPSB0eXBlb2YgbWVzc2FnZS5jb250ZW50ID09PSBcInN0cmluZ1wiID8gW3tcblx0XHRcdHR5cGU6IFwidGV4dFwiLFxuXHRcdFx0dGV4dDogbWVzc2FnZS5jb250ZW50XG5cdFx0fV0gOiBtZXNzYWdlLmNvbnRlbnQ7XG5cdFx0Zm9yIChjb25zdCBibG9jayBvZiBjb250ZW50KSB7XG5cdFx0XHRpZiAoX2lzQ29udGVudEJsb2NrKGJsb2NrLCBcInRleHRcIikgJiYgX2lzU3RyaW5nKGJsb2NrLnRleHQpKSB7XG5cdFx0XHRcdGNvbnN0IHsgdGV4dCwgY2l0YXRpb25zLC4uLnJlc3QgfSA9IGJsb2NrO1xuXHRcdFx0XHRpZiAoX2lzQXJyYXkoY2l0YXRpb25zKSAmJiBjaXRhdGlvbnMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0Y29uc3QgX2NpdGF0aW9ucyA9IGNpdGF0aW9ucy5yZWR1Y2UoKGFjYywgaXRlbSkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgY2l0YXRpb24gPSBjb252ZXJ0QW50aHJvcGljQW5ub3RhdGlvbihpdGVtKTtcblx0XHRcdFx0XHRcdGlmIChjaXRhdGlvbikgcmV0dXJuIFsuLi5hY2MsIGNpdGF0aW9uXTtcblx0XHRcdFx0XHRcdHJldHVybiBhY2M7XG5cdFx0XHRcdFx0fSwgW10pO1xuXHRcdFx0XHRcdHlpZWxkIHtcblx0XHRcdFx0XHRcdC4uLnJlc3QsXG5cdFx0XHRcdFx0XHR0eXBlOiBcInRleHRcIixcblx0XHRcdFx0XHRcdHRleHQsXG5cdFx0XHRcdFx0XHRhbm5vdGF0aW9uczogX2NpdGF0aW9uc1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0eWllbGQge1xuXHRcdFx0XHRcdFx0Li4ucmVzdCxcblx0XHRcdFx0XHRcdHR5cGU6IFwidGV4dFwiLFxuXHRcdFx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoX2lzQ29udGVudEJsb2NrKGJsb2NrLCBcInRoaW5raW5nXCIpICYmIF9pc1N0cmluZyhibG9jay50aGlua2luZykpIHtcblx0XHRcdFx0Y29uc3QgeyB0aGlua2luZywgc2lnbmF0dXJlLC4uLnJlc3QgfSA9IGJsb2NrO1xuXHRcdFx0XHR5aWVsZCB7XG5cdFx0XHRcdFx0Li4ucmVzdCxcblx0XHRcdFx0XHR0eXBlOiBcInJlYXNvbmluZ1wiLFxuXHRcdFx0XHRcdHJlYXNvbmluZzogdGhpbmtpbmcsXG5cdFx0XHRcdFx0c2lnbmF0dXJlXG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fSBlbHNlIGlmIChfaXNDb250ZW50QmxvY2soYmxvY2ssIFwicmVkYWN0ZWRfdGhpbmtpbmdcIikpIHtcblx0XHRcdFx0eWllbGQge1xuXHRcdFx0XHRcdHR5cGU6IFwibm9uX3N0YW5kYXJkXCIsXG5cdFx0XHRcdFx0dmFsdWU6IGJsb2NrXG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fSBlbHNlIGlmIChfaXNDb250ZW50QmxvY2soYmxvY2ssIFwidG9vbF91c2VcIikgJiYgX2lzU3RyaW5nKGJsb2NrLm5hbWUpICYmIF9pc1N0cmluZyhibG9jay5pZCkpIHtcblx0XHRcdFx0eWllbGQge1xuXHRcdFx0XHRcdHR5cGU6IFwidG9vbF9jYWxsXCIsXG5cdFx0XHRcdFx0aWQ6IGJsb2NrLmlkLFxuXHRcdFx0XHRcdG5hbWU6IGJsb2NrLm5hbWUsXG5cdFx0XHRcdFx0YXJnczogYmxvY2suaW5wdXRcblx0XHRcdFx0fTtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9IGVsc2UgaWYgKF9pc0NvbnRlbnRCbG9jayhibG9jaywgXCJpbnB1dF9qc29uX2RlbHRhXCIpKSB7XG5cdFx0XHRcdGlmIChfaXNBSU1lc3NhZ2VDaHVuayhtZXNzYWdlKSAmJiBtZXNzYWdlLnRvb2xfY2FsbF9jaHVua3M/Lmxlbmd0aCkge1xuXHRcdFx0XHRcdGNvbnN0IHRvb2xfY2FsbF9jaHVuayA9IG1lc3NhZ2UudG9vbF9jYWxsX2NodW5rc1swXTtcblx0XHRcdFx0XHR5aWVsZCB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcInRvb2xfY2FsbF9jaHVua1wiLFxuXHRcdFx0XHRcdFx0aWQ6IHRvb2xfY2FsbF9jaHVuay5pZCxcblx0XHRcdFx0XHRcdG5hbWU6IHRvb2xfY2FsbF9jaHVuay5uYW1lLFxuXHRcdFx0XHRcdFx0YXJnczogdG9vbF9jYWxsX2NodW5rLmFyZ3MsXG5cdFx0XHRcdFx0XHRpbmRleDogdG9vbF9jYWxsX2NodW5rLmluZGV4XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChfaXNDb250ZW50QmxvY2soYmxvY2ssIFwic2VydmVyX3Rvb2xfdXNlXCIpICYmIF9pc1N0cmluZyhibG9jay5uYW1lKSAmJiBfaXNTdHJpbmcoYmxvY2suaWQpKSB7XG5cdFx0XHRcdGNvbnN0IHsgbmFtZSwgaWQgfSA9IGJsb2NrO1xuXHRcdFx0XHRpZiAobmFtZSA9PT0gXCJ3ZWJfc2VhcmNoXCIpIHtcblx0XHRcdFx0XHRjb25zdCBxdWVyeSA9IGlpZmUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKHR5cGVvZiBibG9jay5pbnB1dCA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIGJsb2NrLmlucHV0O1xuXHRcdFx0XHRcdFx0ZWxzZSBpZiAoX2lzT2JqZWN0KGJsb2NrLmlucHV0KSAmJiBfaXNTdHJpbmcoYmxvY2suaW5wdXQucXVlcnkpKSByZXR1cm4gYmxvY2suaW5wdXQucXVlcnk7XG5cdFx0XHRcdFx0XHRlbHNlIGlmIChfaXNTdHJpbmcoYmxvY2sucGFydGlhbF9qc29uKSkge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBqc29uID0gc2FmZVBhcnNlSnNvbihibG9jay5wYXJ0aWFsX2pzb24pO1xuXHRcdFx0XHRcdFx0XHRpZiAoanNvbj8ucXVlcnkpIHJldHVybiBqc29uLnF1ZXJ5O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cmV0dXJuIFwiXCI7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0eWllbGQge1xuXHRcdFx0XHRcdFx0aWQsXG5cdFx0XHRcdFx0XHR0eXBlOiBcInNlcnZlcl90b29sX2NhbGxcIixcblx0XHRcdFx0XHRcdG5hbWU6IFwid2ViX3NlYXJjaFwiLFxuXHRcdFx0XHRcdFx0YXJnczogeyBxdWVyeSB9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fSBlbHNlIGlmIChibG9jay5uYW1lID09PSBcImNvZGVfZXhlY3V0aW9uXCIpIHtcblx0XHRcdFx0XHRjb25zdCBjb2RlID0gaWlmZSgoKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAodHlwZW9mIGJsb2NrLmlucHV0ID09PSBcInN0cmluZ1wiKSByZXR1cm4gYmxvY2suaW5wdXQ7XG5cdFx0XHRcdFx0XHRlbHNlIGlmIChfaXNPYmplY3QoYmxvY2suaW5wdXQpICYmIF9pc1N0cmluZyhibG9jay5pbnB1dC5jb2RlKSkgcmV0dXJuIGJsb2NrLmlucHV0LmNvZGU7XG5cdFx0XHRcdFx0XHRlbHNlIGlmIChfaXNTdHJpbmcoYmxvY2sucGFydGlhbF9qc29uKSkge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBqc29uID0gc2FmZVBhcnNlSnNvbihibG9jay5wYXJ0aWFsX2pzb24pO1xuXHRcdFx0XHRcdFx0XHRpZiAoanNvbj8uY29kZSkgcmV0dXJuIGpzb24uY29kZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHJldHVybiBcIlwiO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHlpZWxkIHtcblx0XHRcdFx0XHRcdGlkLFxuXHRcdFx0XHRcdFx0dHlwZTogXCJzZXJ2ZXJfdG9vbF9jYWxsXCIsXG5cdFx0XHRcdFx0XHRuYW1lOiBcImNvZGVfZXhlY3V0aW9uXCIsXG5cdFx0XHRcdFx0XHRhcmdzOiB7IGNvZGUgfVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoX2lzQ29udGVudEJsb2NrKGJsb2NrLCBcIndlYl9zZWFyY2hfdG9vbF9yZXN1bHRcIikgJiYgX2lzU3RyaW5nKGJsb2NrLnRvb2xfdXNlX2lkKSAmJiBfaXNBcnJheShibG9jay5jb250ZW50KSkge1xuXHRcdFx0XHRjb25zdCB7IGNvbnRlbnQ6IGNvbnRlbnQkMSwgdG9vbF91c2VfaWQgfSA9IGJsb2NrO1xuXHRcdFx0XHRjb25zdCB1cmxzID0gY29udGVudCQxLnJlZHVjZSgoYWNjLCBjb250ZW50JDIpID0+IHtcblx0XHRcdFx0XHRpZiAoX2lzQ29udGVudEJsb2NrKGNvbnRlbnQkMiwgXCJ3ZWJfc2VhcmNoX3Jlc3VsdFwiKSkgcmV0dXJuIFsuLi5hY2MsIGNvbnRlbnQkMi51cmxdO1xuXHRcdFx0XHRcdHJldHVybiBhY2M7XG5cdFx0XHRcdH0sIFtdKTtcblx0XHRcdFx0eWllbGQge1xuXHRcdFx0XHRcdHR5cGU6IFwic2VydmVyX3Rvb2xfY2FsbF9yZXN1bHRcIixcblx0XHRcdFx0XHRuYW1lOiBcIndlYl9zZWFyY2hcIixcblx0XHRcdFx0XHR0b29sQ2FsbElkOiB0b29sX3VzZV9pZCxcblx0XHRcdFx0XHRzdGF0dXM6IFwic3VjY2Vzc1wiLFxuXHRcdFx0XHRcdG91dHB1dDogeyB1cmxzIH1cblx0XHRcdFx0fTtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9IGVsc2UgaWYgKF9pc0NvbnRlbnRCbG9jayhibG9jaywgXCJjb2RlX2V4ZWN1dGlvbl90b29sX3Jlc3VsdFwiKSAmJiBfaXNTdHJpbmcoYmxvY2sudG9vbF91c2VfaWQpICYmIF9pc09iamVjdChibG9jay5jb250ZW50KSkge1xuXHRcdFx0XHR5aWVsZCB7XG5cdFx0XHRcdFx0dHlwZTogXCJzZXJ2ZXJfdG9vbF9jYWxsX3Jlc3VsdFwiLFxuXHRcdFx0XHRcdG5hbWU6IFwiY29kZV9leGVjdXRpb25cIixcblx0XHRcdFx0XHR0b29sQ2FsbElkOiBibG9jay50b29sX3VzZV9pZCxcblx0XHRcdFx0XHRzdGF0dXM6IFwic3VjY2Vzc1wiLFxuXHRcdFx0XHRcdG91dHB1dDogYmxvY2suY29udGVudFxuXHRcdFx0XHR9O1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH0gZWxzZSBpZiAoX2lzQ29udGVudEJsb2NrKGJsb2NrLCBcIm1jcF90b29sX3VzZVwiKSkge1xuXHRcdFx0XHR5aWVsZCB7XG5cdFx0XHRcdFx0aWQ6IGJsb2NrLmlkLFxuXHRcdFx0XHRcdHR5cGU6IFwic2VydmVyX3Rvb2xfY2FsbFwiLFxuXHRcdFx0XHRcdG5hbWU6IFwibWNwX3Rvb2xfdXNlXCIsXG5cdFx0XHRcdFx0YXJnczogYmxvY2suaW5wdXRcblx0XHRcdFx0fTtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9IGVsc2UgaWYgKF9pc0NvbnRlbnRCbG9jayhibG9jaywgXCJtY3BfdG9vbF9yZXN1bHRcIikgJiYgX2lzU3RyaW5nKGJsb2NrLnRvb2xfdXNlX2lkKSAmJiBfaXNPYmplY3QoYmxvY2suY29udGVudCkpIHtcblx0XHRcdFx0eWllbGQge1xuXHRcdFx0XHRcdHR5cGU6IFwic2VydmVyX3Rvb2xfY2FsbF9yZXN1bHRcIixcblx0XHRcdFx0XHRuYW1lOiBcIm1jcF90b29sX3VzZVwiLFxuXHRcdFx0XHRcdHRvb2xDYWxsSWQ6IGJsb2NrLnRvb2xfdXNlX2lkLFxuXHRcdFx0XHRcdHN0YXR1czogXCJzdWNjZXNzXCIsXG5cdFx0XHRcdFx0b3V0cHV0OiBibG9jay5jb250ZW50XG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fSBlbHNlIGlmIChfaXNDb250ZW50QmxvY2soYmxvY2ssIFwiY29udGFpbmVyX3VwbG9hZFwiKSkge1xuXHRcdFx0XHR5aWVsZCB7XG5cdFx0XHRcdFx0dHlwZTogXCJzZXJ2ZXJfdG9vbF9jYWxsXCIsXG5cdFx0XHRcdFx0bmFtZTogXCJjb250YWluZXJfdXBsb2FkXCIsXG5cdFx0XHRcdFx0YXJnczogYmxvY2suaW5wdXRcblx0XHRcdFx0fTtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9IGVsc2UgaWYgKF9pc0NvbnRlbnRCbG9jayhibG9jaywgXCJzZWFyY2hfcmVzdWx0XCIpKSB7XG5cdFx0XHRcdHlpZWxkIHtcblx0XHRcdFx0XHRpZDogYmxvY2suaWQsXG5cdFx0XHRcdFx0dHlwZTogXCJub25fc3RhbmRhcmRcIixcblx0XHRcdFx0XHR2YWx1ZTogYmxvY2tcblx0XHRcdFx0fTtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9IGVsc2UgaWYgKF9pc0NvbnRlbnRCbG9jayhibG9jaywgXCJ0b29sX3Jlc3VsdFwiKSkge1xuXHRcdFx0XHR5aWVsZCB7XG5cdFx0XHRcdFx0aWQ6IGJsb2NrLmlkLFxuXHRcdFx0XHRcdHR5cGU6IFwibm9uX3N0YW5kYXJkXCIsXG5cdFx0XHRcdFx0dmFsdWU6IGJsb2NrXG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc3Qgc3RkQmxvY2sgPSBjb252ZXJ0VG9WMUZyb21BbnRocm9waWNDb250ZW50QmxvY2soYmxvY2spO1xuXHRcdFx0XHRpZiAoc3RkQmxvY2spIHtcblx0XHRcdFx0XHR5aWVsZCBzdGRCbG9jaztcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0eWllbGQge1xuXHRcdFx0XHR0eXBlOiBcIm5vbl9zdGFuZGFyZFwiLFxuXHRcdFx0XHR2YWx1ZTogYmxvY2tcblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cdHJldHVybiBBcnJheS5mcm9tKGl0ZXJhdGVDb250ZW50KCkpO1xufVxuY29uc3QgQ2hhdEFudGhyb3BpY1RyYW5zbGF0b3IgPSB7XG5cdHRyYW5zbGF0ZUNvbnRlbnQ6IGNvbnZlcnRUb1YxRnJvbUFudGhyb3BpY01lc3NhZ2UsXG5cdHRyYW5zbGF0ZUNvbnRlbnRDaHVuazogY29udmVydFRvVjFGcm9tQW50aHJvcGljTWVzc2FnZVxufTtcbmZ1bmN0aW9uIF9pc0FJTWVzc2FnZUNodW5rKG1lc3NhZ2UpIHtcblx0cmV0dXJuIHR5cGVvZiBtZXNzYWdlPy5fZ2V0VHlwZSA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBtZXNzYWdlLmNvbmNhdCA9PT0gXCJmdW5jdGlvblwiICYmIG1lc3NhZ2UuX2dldFR5cGUoKSA9PT0gXCJhaVwiO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IENoYXRBbnRocm9waWNUcmFuc2xhdG9yLCBjb252ZXJ0VG9WMUZyb21BbnRocm9waWNJbnB1dCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW50aHJvcGljLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/anthropic.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/bedrock_converse.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/block_translators/bedrock_converse.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatBedrockConverseTranslator: () => (/* binding */ ChatBedrockConverseTranslator)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/utils.js\");\n\n\n//#region src/messages/block_translators/bedrock_converse.ts\nfunction convertFileFormatToMimeType(format) {\n\tswitch (format) {\n\t\tcase \"csv\": return \"text/csv\";\n\t\tcase \"doc\": return \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\";\n\t\tcase \"docx\": return \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\";\n\t\tcase \"html\": return \"text/html\";\n\t\tcase \"md\": return \"text/markdown\";\n\t\tcase \"pdf\": return \"application/pdf\";\n\t\tcase \"txt\": return \"text/plain\";\n\t\tcase \"xls\": return \"application/vnd.ms-excel\";\n\t\tcase \"xlsx\": return \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\";\n\t\tcase \"gif\": return \"image/gif\";\n\t\tcase \"jpeg\": return \"image/jpeg\";\n\t\tcase \"jpg\": return \"image/jpeg\";\n\t\tcase \"png\": return \"image/png\";\n\t\tcase \"webp\": return \"image/webp\";\n\t\tcase \"flv\": return \"video/flv\";\n\t\tcase \"mkv\": return \"video/mkv\";\n\t\tcase \"mov\": return \"video/mov\";\n\t\tcase \"mp4\": return \"video/mp4\";\n\t\tcase \"mpeg\": return \"video/mpeg\";\n\t\tcase \"mpg\": return \"video/mpg\";\n\t\tcase \"three_gp\": return \"video/three_gp\";\n\t\tcase \"webm\": return \"video/webm\";\n\t\tcase \"wmv\": return \"video/wmv\";\n\t\tdefault: return \"application/octet-stream\";\n\t}\n}\nfunction convertConverseDocumentBlock(block) {\n\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.document) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.document.source)) {\n\t\tconst format = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.document) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.document.format) ? block.document.format : \"\";\n\t\tconst mimeType = convertFileFormatToMimeType(format);\n\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.document.source)) {\n\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.document.source.s3Location) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.document.source.s3Location.uri)) return {\n\t\t\t\ttype: \"file\",\n\t\t\t\tmimeType,\n\t\t\t\tfileId: block.document.source.s3Location.uri\n\t\t\t};\n\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isBytesArray)(block.document.source.bytes)) return {\n\t\t\t\ttype: \"file\",\n\t\t\t\tmimeType,\n\t\t\t\tdata: block.document.source.bytes\n\t\t\t};\n\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.document.source.text)) return {\n\t\t\t\ttype: \"file\",\n\t\t\t\tmimeType,\n\t\t\t\tdata: Buffer.from(block.document.source.text).toString(\"base64\")\n\t\t\t};\n\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isArray)(block.document.source.content)) {\n\t\t\t\tconst data = block.document.source.content.reduce((acc, item) => {\n\t\t\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(item) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(item.text)) return acc + item.text;\n\t\t\t\t\treturn acc;\n\t\t\t\t}, \"\");\n\t\t\t\treturn {\n\t\t\t\t\ttype: \"file\",\n\t\t\t\t\tmimeType,\n\t\t\t\t\tdata\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\treturn {\n\t\ttype: \"non_standard\",\n\t\tvalue: block\n\t};\n}\nfunction convertConverseImageBlock(block) {\n\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"image\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.image)) {\n\t\tconst format = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.image) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.image.format) ? block.image.format : \"\";\n\t\tconst mimeType = convertFileFormatToMimeType(format);\n\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.image.source)) {\n\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.image.source.s3Location) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.image.source.s3Location.uri)) return {\n\t\t\t\ttype: \"image\",\n\t\t\t\tmimeType,\n\t\t\t\tfileId: block.image.source.s3Location.uri\n\t\t\t};\n\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isBytesArray)(block.image.source.bytes)) return {\n\t\t\t\ttype: \"image\",\n\t\t\t\tmimeType,\n\t\t\t\tdata: block.image.source.bytes\n\t\t\t};\n\t\t}\n\t}\n\treturn {\n\t\ttype: \"non_standard\",\n\t\tvalue: block\n\t};\n}\nfunction convertConverseVideoBlock(block) {\n\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"video\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.video)) {\n\t\tconst format = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.video) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.video.format) ? block.video.format : \"\";\n\t\tconst mimeType = convertFileFormatToMimeType(format);\n\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.video.source)) {\n\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.video.source.s3Location) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.video.source.s3Location.uri)) return {\n\t\t\t\ttype: \"video\",\n\t\t\t\tmimeType,\n\t\t\t\tfileId: block.video.source.s3Location.uri\n\t\t\t};\n\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isBytesArray)(block.video.source.bytes)) return {\n\t\t\t\ttype: \"video\",\n\t\t\t\tmimeType,\n\t\t\t\tdata: block.video.source.bytes\n\t\t\t};\n\t\t}\n\t}\n\treturn {\n\t\ttype: \"non_standard\",\n\t\tvalue: block\n\t};\n}\nfunction convertToV1FromChatBedrockConverseMessage(message) {\n\tfunction* iterateContent() {\n\t\tconst content = typeof message.content === \"string\" ? [{\n\t\t\ttype: \"text\",\n\t\t\ttext: message.content\n\t\t}] : message.content;\n\t\tfor (const block of content) {\n\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"cache_point\")) {\n\t\t\t\tyield {\n\t\t\t\t\ttype: \"non_standard\",\n\t\t\t\t\tvalue: block\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"citations_content\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.citationsContent)) {\n\t\t\t\tconst text = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isArray)(block.citationsContent.content) ? block.citationsContent.content.reduce((acc, item) => {\n\t\t\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(item) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(item.text)) return acc + item.text;\n\t\t\t\t\treturn acc;\n\t\t\t\t}, \"\") : \"\";\n\t\t\t\tconst annotations = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isArray)(block.citationsContent.citations) ? block.citationsContent.citations.reduce((acc, item) => {\n\t\t\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(item)) {\n\t\t\t\t\t\tconst citedText = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isArray)(item.sourceContent) ? item.sourceContent.reduce((acc$1, item$1) => {\n\t\t\t\t\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(item$1) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(item$1.text)) return acc$1 + item$1.text;\n\t\t\t\t\t\t\treturn acc$1;\n\t\t\t\t\t\t}, \"\") : \"\";\n\t\t\t\t\t\tconst properties = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.iife)(() => {\n\t\t\t\t\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(item.location)) {\n\t\t\t\t\t\t\t\tconst location = item.location.documentChar || item.location.documentPage || item.location.documentChunk;\n\t\t\t\t\t\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(location)) return {\n\t\t\t\t\t\t\t\t\tsource: (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isNumber)(location.documentIndex) ? location.documentIndex.toString() : void 0,\n\t\t\t\t\t\t\t\t\tstartIndex: (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isNumber)(location.start) ? location.start : void 0,\n\t\t\t\t\t\t\t\t\tendIndex: (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isNumber)(location.end) ? location.end : void 0\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn {};\n\t\t\t\t\t\t});\n\t\t\t\t\t\tacc.push({\n\t\t\t\t\t\t\ttype: \"citation\",\n\t\t\t\t\t\t\tcitedText,\n\t\t\t\t\t\t\t...properties\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn acc;\n\t\t\t\t}, []) : [];\n\t\t\t\tyield {\n\t\t\t\t\ttype: \"text\",\n\t\t\t\t\ttext,\n\t\t\t\t\tannotations\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"document\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.document)) {\n\t\t\t\tyield convertConverseDocumentBlock(block);\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"guard_content\")) {\n\t\t\t\tyield {\n\t\t\t\t\ttype: \"non_standard\",\n\t\t\t\t\tvalue: block\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"image\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.image)) {\n\t\t\t\tyield convertConverseImageBlock(block);\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"reasoning_content\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.reasoningText)) {\n\t\t\t\tyield {\n\t\t\t\t\ttype: \"reasoning\",\n\t\t\t\t\treasoning: block.reasoningText\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"text\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.text)) {\n\t\t\t\tyield {\n\t\t\t\t\ttype: \"text\",\n\t\t\t\t\ttext: block.text\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"tool_result\")) {\n\t\t\t\tyield {\n\t\t\t\t\ttype: \"non_standard\",\n\t\t\t\t\tvalue: block\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"tool_call\")) continue;\n\t\t\telse if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"video\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.video)) {\n\t\t\t\tyield convertConverseVideoBlock(block);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tyield {\n\t\t\t\ttype: \"non_standard\",\n\t\t\t\tvalue: block\n\t\t\t};\n\t\t}\n\t}\n\treturn Array.from(iterateContent());\n}\nconst ChatBedrockConverseTranslator = {\n\ttranslateContent: convertToV1FromChatBedrockConverseMessage,\n\ttranslateContentChunk: convertToV1FromChatBedrockConverseMessage\n};\n\n//#endregion\n\n//# sourceMappingURL=bedrock_converse.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvYmxvY2tfdHJhbnNsYXRvcnMvYmVkcm9ja19jb252ZXJzZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE2Rzs7QUFFN0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxvREFBUyxvQkFBb0Isb0RBQVM7QUFDM0MsaUJBQWlCLG9EQUFTLG9CQUFvQixvREFBUztBQUN2RDtBQUNBLE1BQU0sb0RBQVM7QUFDZixPQUFPLG9EQUFTLHNDQUFzQyxvREFBUztBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sd0RBQWE7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLG9EQUFTO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxtREFBUTtBQUNmO0FBQ0EsU0FBUyxvREFBUyxVQUFVLG9EQUFTO0FBQ3JDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLDBEQUFlLG9CQUFvQixvREFBUztBQUNqRCxpQkFBaUIsb0RBQVMsaUJBQWlCLG9EQUFTO0FBQ3BEO0FBQ0EsTUFBTSxvREFBUztBQUNmLE9BQU8sb0RBQVMsbUNBQW1DLG9EQUFTO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyx3REFBYTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLDBEQUFlLG9CQUFvQixvREFBUztBQUNqRCxpQkFBaUIsb0RBQVMsaUJBQWlCLG9EQUFTO0FBQ3BEO0FBQ0EsTUFBTSxvREFBUztBQUNmLE9BQU8sb0RBQVMsbUNBQW1DLG9EQUFTO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyx3REFBYTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLE9BQU8sMERBQWU7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssU0FBUywwREFBZSxnQ0FBZ0Msb0RBQVM7QUFDdEUsaUJBQWlCLG1EQUFRO0FBQ3pCLFNBQVMsb0RBQVMsVUFBVSxvREFBUztBQUNyQztBQUNBLEtBQUs7QUFDTCx3QkFBd0IsbURBQVE7QUFDaEMsU0FBUyxvREFBUztBQUNsQix3QkFBd0IsbURBQVE7QUFDaEMsV0FBVyxvREFBUyxZQUFZLG9EQUFTO0FBQ3pDO0FBQ0EsT0FBTztBQUNQLHlCQUF5QiwrQ0FBSTtBQUM3QixXQUFXLG9EQUFTO0FBQ3BCO0FBQ0EsWUFBWSxvREFBUztBQUNyQixpQkFBaUIsb0RBQVM7QUFDMUIscUJBQXFCLG9EQUFTO0FBQzlCLG1CQUFtQixvREFBUztBQUM1QjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLFNBQVMsMERBQWUsdUJBQXVCLG9EQUFTO0FBQzdEO0FBQ0E7QUFDQSxLQUFLLFNBQVMsMERBQWU7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssU0FBUywwREFBZSxvQkFBb0Isb0RBQVM7QUFDMUQ7QUFDQTtBQUNBLEtBQUssU0FBUywwREFBZSxnQ0FBZ0Msb0RBQVM7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssU0FBUywwREFBZSxtQkFBbUIsb0RBQVM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssU0FBUywwREFBZTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxTQUFTLDBEQUFlO0FBQzdCLFlBQVksMERBQWUsb0JBQW9CLG9EQUFTO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUN5QztBQUN6QyIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2Jsb2NrX3RyYW5zbGF0b3JzL2JlZHJvY2tfY29udmVyc2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX2lzQXJyYXksIF9pc0J5dGVzQXJyYXksIF9pc0NvbnRlbnRCbG9jaywgX2lzTnVtYmVyLCBfaXNPYmplY3QsIF9pc1N0cmluZywgaWlmZSB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvbWVzc2FnZXMvYmxvY2tfdHJhbnNsYXRvcnMvYmVkcm9ja19jb252ZXJzZS50c1xuZnVuY3Rpb24gY29udmVydEZpbGVGb3JtYXRUb01pbWVUeXBlKGZvcm1hdCkge1xuXHRzd2l0Y2ggKGZvcm1hdCkge1xuXHRcdGNhc2UgXCJjc3ZcIjogcmV0dXJuIFwidGV4dC9jc3ZcIjtcblx0XHRjYXNlIFwiZG9jXCI6IHJldHVybiBcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50XCI7XG5cdFx0Y2FzZSBcImRvY3hcIjogcmV0dXJuIFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnRcIjtcblx0XHRjYXNlIFwiaHRtbFwiOiByZXR1cm4gXCJ0ZXh0L2h0bWxcIjtcblx0XHRjYXNlIFwibWRcIjogcmV0dXJuIFwidGV4dC9tYXJrZG93blwiO1xuXHRcdGNhc2UgXCJwZGZcIjogcmV0dXJuIFwiYXBwbGljYXRpb24vcGRmXCI7XG5cdFx0Y2FzZSBcInR4dFwiOiByZXR1cm4gXCJ0ZXh0L3BsYWluXCI7XG5cdFx0Y2FzZSBcInhsc1wiOiByZXR1cm4gXCJhcHBsaWNhdGlvbi92bmQubXMtZXhjZWxcIjtcblx0XHRjYXNlIFwieGxzeFwiOiByZXR1cm4gXCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldFwiO1xuXHRcdGNhc2UgXCJnaWZcIjogcmV0dXJuIFwiaW1hZ2UvZ2lmXCI7XG5cdFx0Y2FzZSBcImpwZWdcIjogcmV0dXJuIFwiaW1hZ2UvanBlZ1wiO1xuXHRcdGNhc2UgXCJqcGdcIjogcmV0dXJuIFwiaW1hZ2UvanBlZ1wiO1xuXHRcdGNhc2UgXCJwbmdcIjogcmV0dXJuIFwiaW1hZ2UvcG5nXCI7XG5cdFx0Y2FzZSBcIndlYnBcIjogcmV0dXJuIFwiaW1hZ2Uvd2VicFwiO1xuXHRcdGNhc2UgXCJmbHZcIjogcmV0dXJuIFwidmlkZW8vZmx2XCI7XG5cdFx0Y2FzZSBcIm1rdlwiOiByZXR1cm4gXCJ2aWRlby9ta3ZcIjtcblx0XHRjYXNlIFwibW92XCI6IHJldHVybiBcInZpZGVvL21vdlwiO1xuXHRcdGNhc2UgXCJtcDRcIjogcmV0dXJuIFwidmlkZW8vbXA0XCI7XG5cdFx0Y2FzZSBcIm1wZWdcIjogcmV0dXJuIFwidmlkZW8vbXBlZ1wiO1xuXHRcdGNhc2UgXCJtcGdcIjogcmV0dXJuIFwidmlkZW8vbXBnXCI7XG5cdFx0Y2FzZSBcInRocmVlX2dwXCI6IHJldHVybiBcInZpZGVvL3RocmVlX2dwXCI7XG5cdFx0Y2FzZSBcIndlYm1cIjogcmV0dXJuIFwidmlkZW8vd2VibVwiO1xuXHRcdGNhc2UgXCJ3bXZcIjogcmV0dXJuIFwidmlkZW8vd212XCI7XG5cdFx0ZGVmYXVsdDogcmV0dXJuIFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCI7XG5cdH1cbn1cbmZ1bmN0aW9uIGNvbnZlcnRDb252ZXJzZURvY3VtZW50QmxvY2soYmxvY2spIHtcblx0aWYgKF9pc09iamVjdChibG9jay5kb2N1bWVudCkgJiYgX2lzT2JqZWN0KGJsb2NrLmRvY3VtZW50LnNvdXJjZSkpIHtcblx0XHRjb25zdCBmb3JtYXQgPSBfaXNPYmplY3QoYmxvY2suZG9jdW1lbnQpICYmIF9pc1N0cmluZyhibG9jay5kb2N1bWVudC5mb3JtYXQpID8gYmxvY2suZG9jdW1lbnQuZm9ybWF0IDogXCJcIjtcblx0XHRjb25zdCBtaW1lVHlwZSA9IGNvbnZlcnRGaWxlRm9ybWF0VG9NaW1lVHlwZShmb3JtYXQpO1xuXHRcdGlmIChfaXNPYmplY3QoYmxvY2suZG9jdW1lbnQuc291cmNlKSkge1xuXHRcdFx0aWYgKF9pc09iamVjdChibG9jay5kb2N1bWVudC5zb3VyY2UuczNMb2NhdGlvbikgJiYgX2lzU3RyaW5nKGJsb2NrLmRvY3VtZW50LnNvdXJjZS5zM0xvY2F0aW9uLnVyaSkpIHJldHVybiB7XG5cdFx0XHRcdHR5cGU6IFwiZmlsZVwiLFxuXHRcdFx0XHRtaW1lVHlwZSxcblx0XHRcdFx0ZmlsZUlkOiBibG9jay5kb2N1bWVudC5zb3VyY2UuczNMb2NhdGlvbi51cmlcblx0XHRcdH07XG5cdFx0XHRpZiAoX2lzQnl0ZXNBcnJheShibG9jay5kb2N1bWVudC5zb3VyY2UuYnl0ZXMpKSByZXR1cm4ge1xuXHRcdFx0XHR0eXBlOiBcImZpbGVcIixcblx0XHRcdFx0bWltZVR5cGUsXG5cdFx0XHRcdGRhdGE6IGJsb2NrLmRvY3VtZW50LnNvdXJjZS5ieXRlc1xuXHRcdFx0fTtcblx0XHRcdGlmIChfaXNTdHJpbmcoYmxvY2suZG9jdW1lbnQuc291cmNlLnRleHQpKSByZXR1cm4ge1xuXHRcdFx0XHR0eXBlOiBcImZpbGVcIixcblx0XHRcdFx0bWltZVR5cGUsXG5cdFx0XHRcdGRhdGE6IEJ1ZmZlci5mcm9tKGJsb2NrLmRvY3VtZW50LnNvdXJjZS50ZXh0KS50b1N0cmluZyhcImJhc2U2NFwiKVxuXHRcdFx0fTtcblx0XHRcdGlmIChfaXNBcnJheShibG9jay5kb2N1bWVudC5zb3VyY2UuY29udGVudCkpIHtcblx0XHRcdFx0Y29uc3QgZGF0YSA9IGJsb2NrLmRvY3VtZW50LnNvdXJjZS5jb250ZW50LnJlZHVjZSgoYWNjLCBpdGVtKSA9PiB7XG5cdFx0XHRcdFx0aWYgKF9pc09iamVjdChpdGVtKSAmJiBfaXNTdHJpbmcoaXRlbS50ZXh0KSkgcmV0dXJuIGFjYyArIGl0ZW0udGV4dDtcblx0XHRcdFx0XHRyZXR1cm4gYWNjO1xuXHRcdFx0XHR9LCBcIlwiKTtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHR0eXBlOiBcImZpbGVcIixcblx0XHRcdFx0XHRtaW1lVHlwZSxcblx0XHRcdFx0XHRkYXRhXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiB7XG5cdFx0dHlwZTogXCJub25fc3RhbmRhcmRcIixcblx0XHR2YWx1ZTogYmxvY2tcblx0fTtcbn1cbmZ1bmN0aW9uIGNvbnZlcnRDb252ZXJzZUltYWdlQmxvY2soYmxvY2spIHtcblx0aWYgKF9pc0NvbnRlbnRCbG9jayhibG9jaywgXCJpbWFnZVwiKSAmJiBfaXNPYmplY3QoYmxvY2suaW1hZ2UpKSB7XG5cdFx0Y29uc3QgZm9ybWF0ID0gX2lzT2JqZWN0KGJsb2NrLmltYWdlKSAmJiBfaXNTdHJpbmcoYmxvY2suaW1hZ2UuZm9ybWF0KSA/IGJsb2NrLmltYWdlLmZvcm1hdCA6IFwiXCI7XG5cdFx0Y29uc3QgbWltZVR5cGUgPSBjb252ZXJ0RmlsZUZvcm1hdFRvTWltZVR5cGUoZm9ybWF0KTtcblx0XHRpZiAoX2lzT2JqZWN0KGJsb2NrLmltYWdlLnNvdXJjZSkpIHtcblx0XHRcdGlmIChfaXNPYmplY3QoYmxvY2suaW1hZ2Uuc291cmNlLnMzTG9jYXRpb24pICYmIF9pc1N0cmluZyhibG9jay5pbWFnZS5zb3VyY2UuczNMb2NhdGlvbi51cmkpKSByZXR1cm4ge1xuXHRcdFx0XHR0eXBlOiBcImltYWdlXCIsXG5cdFx0XHRcdG1pbWVUeXBlLFxuXHRcdFx0XHRmaWxlSWQ6IGJsb2NrLmltYWdlLnNvdXJjZS5zM0xvY2F0aW9uLnVyaVxuXHRcdFx0fTtcblx0XHRcdGlmIChfaXNCeXRlc0FycmF5KGJsb2NrLmltYWdlLnNvdXJjZS5ieXRlcykpIHJldHVybiB7XG5cdFx0XHRcdHR5cGU6IFwiaW1hZ2VcIixcblx0XHRcdFx0bWltZVR5cGUsXG5cdFx0XHRcdGRhdGE6IGJsb2NrLmltYWdlLnNvdXJjZS5ieXRlc1xuXHRcdFx0fTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHtcblx0XHR0eXBlOiBcIm5vbl9zdGFuZGFyZFwiLFxuXHRcdHZhbHVlOiBibG9ja1xuXHR9O1xufVxuZnVuY3Rpb24gY29udmVydENvbnZlcnNlVmlkZW9CbG9jayhibG9jaykge1xuXHRpZiAoX2lzQ29udGVudEJsb2NrKGJsb2NrLCBcInZpZGVvXCIpICYmIF9pc09iamVjdChibG9jay52aWRlbykpIHtcblx0XHRjb25zdCBmb3JtYXQgPSBfaXNPYmplY3QoYmxvY2sudmlkZW8pICYmIF9pc1N0cmluZyhibG9jay52aWRlby5mb3JtYXQpID8gYmxvY2sudmlkZW8uZm9ybWF0IDogXCJcIjtcblx0XHRjb25zdCBtaW1lVHlwZSA9IGNvbnZlcnRGaWxlRm9ybWF0VG9NaW1lVHlwZShmb3JtYXQpO1xuXHRcdGlmIChfaXNPYmplY3QoYmxvY2sudmlkZW8uc291cmNlKSkge1xuXHRcdFx0aWYgKF9pc09iamVjdChibG9jay52aWRlby5zb3VyY2UuczNMb2NhdGlvbikgJiYgX2lzU3RyaW5nKGJsb2NrLnZpZGVvLnNvdXJjZS5zM0xvY2F0aW9uLnVyaSkpIHJldHVybiB7XG5cdFx0XHRcdHR5cGU6IFwidmlkZW9cIixcblx0XHRcdFx0bWltZVR5cGUsXG5cdFx0XHRcdGZpbGVJZDogYmxvY2sudmlkZW8uc291cmNlLnMzTG9jYXRpb24udXJpXG5cdFx0XHR9O1xuXHRcdFx0aWYgKF9pc0J5dGVzQXJyYXkoYmxvY2sudmlkZW8uc291cmNlLmJ5dGVzKSkgcmV0dXJuIHtcblx0XHRcdFx0dHlwZTogXCJ2aWRlb1wiLFxuXHRcdFx0XHRtaW1lVHlwZSxcblx0XHRcdFx0ZGF0YTogYmxvY2sudmlkZW8uc291cmNlLmJ5dGVzXG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXHRyZXR1cm4ge1xuXHRcdHR5cGU6IFwibm9uX3N0YW5kYXJkXCIsXG5cdFx0dmFsdWU6IGJsb2NrXG5cdH07XG59XG5mdW5jdGlvbiBjb252ZXJ0VG9WMUZyb21DaGF0QmVkcm9ja0NvbnZlcnNlTWVzc2FnZShtZXNzYWdlKSB7XG5cdGZ1bmN0aW9uKiBpdGVyYXRlQ29udGVudCgpIHtcblx0XHRjb25zdCBjb250ZW50ID0gdHlwZW9mIG1lc3NhZ2UuY29udGVudCA9PT0gXCJzdHJpbmdcIiA/IFt7XG5cdFx0XHR0eXBlOiBcInRleHRcIixcblx0XHRcdHRleHQ6IG1lc3NhZ2UuY29udGVudFxuXHRcdH1dIDogbWVzc2FnZS5jb250ZW50O1xuXHRcdGZvciAoY29uc3QgYmxvY2sgb2YgY29udGVudCkge1xuXHRcdFx0aWYgKF9pc0NvbnRlbnRCbG9jayhibG9jaywgXCJjYWNoZV9wb2ludFwiKSkge1xuXHRcdFx0XHR5aWVsZCB7XG5cdFx0XHRcdFx0dHlwZTogXCJub25fc3RhbmRhcmRcIixcblx0XHRcdFx0XHR2YWx1ZTogYmxvY2tcblx0XHRcdFx0fTtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9IGVsc2UgaWYgKF9pc0NvbnRlbnRCbG9jayhibG9jaywgXCJjaXRhdGlvbnNfY29udGVudFwiKSAmJiBfaXNPYmplY3QoYmxvY2suY2l0YXRpb25zQ29udGVudCkpIHtcblx0XHRcdFx0Y29uc3QgdGV4dCA9IF9pc0FycmF5KGJsb2NrLmNpdGF0aW9uc0NvbnRlbnQuY29udGVudCkgPyBibG9jay5jaXRhdGlvbnNDb250ZW50LmNvbnRlbnQucmVkdWNlKChhY2MsIGl0ZW0pID0+IHtcblx0XHRcdFx0XHRpZiAoX2lzT2JqZWN0KGl0ZW0pICYmIF9pc1N0cmluZyhpdGVtLnRleHQpKSByZXR1cm4gYWNjICsgaXRlbS50ZXh0O1xuXHRcdFx0XHRcdHJldHVybiBhY2M7XG5cdFx0XHRcdH0sIFwiXCIpIDogXCJcIjtcblx0XHRcdFx0Y29uc3QgYW5ub3RhdGlvbnMgPSBfaXNBcnJheShibG9jay5jaXRhdGlvbnNDb250ZW50LmNpdGF0aW9ucykgPyBibG9jay5jaXRhdGlvbnNDb250ZW50LmNpdGF0aW9ucy5yZWR1Y2UoKGFjYywgaXRlbSkgPT4ge1xuXHRcdFx0XHRcdGlmIChfaXNPYmplY3QoaXRlbSkpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGNpdGVkVGV4dCA9IF9pc0FycmF5KGl0ZW0uc291cmNlQ29udGVudCkgPyBpdGVtLnNvdXJjZUNvbnRlbnQucmVkdWNlKChhY2MkMSwgaXRlbSQxKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGlmIChfaXNPYmplY3QoaXRlbSQxKSAmJiBfaXNTdHJpbmcoaXRlbSQxLnRleHQpKSByZXR1cm4gYWNjJDEgKyBpdGVtJDEudGV4dDtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGFjYyQxO1xuXHRcdFx0XHRcdFx0fSwgXCJcIikgOiBcIlwiO1xuXHRcdFx0XHRcdFx0Y29uc3QgcHJvcGVydGllcyA9IGlpZmUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRpZiAoX2lzT2JqZWN0KGl0ZW0ubG9jYXRpb24pKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgbG9jYXRpb24gPSBpdGVtLmxvY2F0aW9uLmRvY3VtZW50Q2hhciB8fCBpdGVtLmxvY2F0aW9uLmRvY3VtZW50UGFnZSB8fCBpdGVtLmxvY2F0aW9uLmRvY3VtZW50Q2h1bms7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKF9pc09iamVjdChsb2NhdGlvbikpIHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRzb3VyY2U6IF9pc051bWJlcihsb2NhdGlvbi5kb2N1bWVudEluZGV4KSA/IGxvY2F0aW9uLmRvY3VtZW50SW5kZXgudG9TdHJpbmcoKSA6IHZvaWQgMCxcblx0XHRcdFx0XHRcdFx0XHRcdHN0YXJ0SW5kZXg6IF9pc051bWJlcihsb2NhdGlvbi5zdGFydCkgPyBsb2NhdGlvbi5zdGFydCA6IHZvaWQgMCxcblx0XHRcdFx0XHRcdFx0XHRcdGVuZEluZGV4OiBfaXNOdW1iZXIobG9jYXRpb24uZW5kKSA/IGxvY2F0aW9uLmVuZCA6IHZvaWQgMFxuXHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0cmV0dXJuIHt9O1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRhY2MucHVzaCh7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwiY2l0YXRpb25cIixcblx0XHRcdFx0XHRcdFx0Y2l0ZWRUZXh0LFxuXHRcdFx0XHRcdFx0XHQuLi5wcm9wZXJ0aWVzXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIGFjYztcblx0XHRcdFx0fSwgW10pIDogW107XG5cdFx0XHRcdHlpZWxkIHtcblx0XHRcdFx0XHR0eXBlOiBcInRleHRcIixcblx0XHRcdFx0XHR0ZXh0LFxuXHRcdFx0XHRcdGFubm90YXRpb25zXG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fSBlbHNlIGlmIChfaXNDb250ZW50QmxvY2soYmxvY2ssIFwiZG9jdW1lbnRcIikgJiYgX2lzT2JqZWN0KGJsb2NrLmRvY3VtZW50KSkge1xuXHRcdFx0XHR5aWVsZCBjb252ZXJ0Q29udmVyc2VEb2N1bWVudEJsb2NrKGJsb2NrKTtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9IGVsc2UgaWYgKF9pc0NvbnRlbnRCbG9jayhibG9jaywgXCJndWFyZF9jb250ZW50XCIpKSB7XG5cdFx0XHRcdHlpZWxkIHtcblx0XHRcdFx0XHR0eXBlOiBcIm5vbl9zdGFuZGFyZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiBibG9ja1xuXHRcdFx0XHR9O1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH0gZWxzZSBpZiAoX2lzQ29udGVudEJsb2NrKGJsb2NrLCBcImltYWdlXCIpICYmIF9pc09iamVjdChibG9jay5pbWFnZSkpIHtcblx0XHRcdFx0eWllbGQgY29udmVydENvbnZlcnNlSW1hZ2VCbG9jayhibG9jayk7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fSBlbHNlIGlmIChfaXNDb250ZW50QmxvY2soYmxvY2ssIFwicmVhc29uaW5nX2NvbnRlbnRcIikgJiYgX2lzU3RyaW5nKGJsb2NrLnJlYXNvbmluZ1RleHQpKSB7XG5cdFx0XHRcdHlpZWxkIHtcblx0XHRcdFx0XHR0eXBlOiBcInJlYXNvbmluZ1wiLFxuXHRcdFx0XHRcdHJlYXNvbmluZzogYmxvY2sucmVhc29uaW5nVGV4dFxuXHRcdFx0XHR9O1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH0gZWxzZSBpZiAoX2lzQ29udGVudEJsb2NrKGJsb2NrLCBcInRleHRcIikgJiYgX2lzU3RyaW5nKGJsb2NrLnRleHQpKSB7XG5cdFx0XHRcdHlpZWxkIHtcblx0XHRcdFx0XHR0eXBlOiBcInRleHRcIixcblx0XHRcdFx0XHR0ZXh0OiBibG9jay50ZXh0XG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fSBlbHNlIGlmIChfaXNDb250ZW50QmxvY2soYmxvY2ssIFwidG9vbF9yZXN1bHRcIikpIHtcblx0XHRcdFx0eWllbGQge1xuXHRcdFx0XHRcdHR5cGU6IFwibm9uX3N0YW5kYXJkXCIsXG5cdFx0XHRcdFx0dmFsdWU6IGJsb2NrXG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fSBlbHNlIGlmIChfaXNDb250ZW50QmxvY2soYmxvY2ssIFwidG9vbF9jYWxsXCIpKSBjb250aW51ZTtcblx0XHRcdGVsc2UgaWYgKF9pc0NvbnRlbnRCbG9jayhibG9jaywgXCJ2aWRlb1wiKSAmJiBfaXNPYmplY3QoYmxvY2sudmlkZW8pKSB7XG5cdFx0XHRcdHlpZWxkIGNvbnZlcnRDb252ZXJzZVZpZGVvQmxvY2soYmxvY2spO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdHlpZWxkIHtcblx0XHRcdFx0dHlwZTogXCJub25fc3RhbmRhcmRcIixcblx0XHRcdFx0dmFsdWU6IGJsb2NrXG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gQXJyYXkuZnJvbShpdGVyYXRlQ29udGVudCgpKTtcbn1cbmNvbnN0IENoYXRCZWRyb2NrQ29udmVyc2VUcmFuc2xhdG9yID0ge1xuXHR0cmFuc2xhdGVDb250ZW50OiBjb252ZXJ0VG9WMUZyb21DaGF0QmVkcm9ja0NvbnZlcnNlTWVzc2FnZSxcblx0dHJhbnNsYXRlQ29udGVudENodW5rOiBjb252ZXJ0VG9WMUZyb21DaGF0QmVkcm9ja0NvbnZlcnNlTWVzc2FnZVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBDaGF0QmVkcm9ja0NvbnZlcnNlVHJhbnNsYXRvciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmVkcm9ja19jb252ZXJzZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/bedrock_converse.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/data.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/block_translators/data.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertToV1FromDataContent: () => (/* binding */ convertToV1FromDataContent),\n/* harmony export */   convertToV1FromOpenAIDataBlock: () => (/* binding */ convertToV1FromOpenAIDataBlock),\n/* harmony export */   isOpenAIDataBlock: () => (/* binding */ isOpenAIDataBlock)\n/* harmony export */ });\n/* harmony import */ var _content_data_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../content/data.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/content/data.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/utils.js\");\n\n\n\n//#region src/messages/block_translators/data.ts\nfunction convertToV1FromDataContentBlock(block) {\n\tif ((0,_content_data_js__WEBPACK_IMPORTED_MODULE_0__.isURLContentBlock)(block)) return {\n\t\ttype: block.type,\n\t\tmimeType: block.mime_type,\n\t\turl: block.url,\n\t\tmetadata: block.metadata\n\t};\n\tif ((0,_content_data_js__WEBPACK_IMPORTED_MODULE_0__.isBase64ContentBlock)(block)) return {\n\t\ttype: block.type,\n\t\tmimeType: block.mime_type ?? \"application/octet-stream\",\n\t\tdata: block.data,\n\t\tmetadata: block.metadata\n\t};\n\tif ((0,_content_data_js__WEBPACK_IMPORTED_MODULE_0__.isIDContentBlock)(block)) return {\n\t\ttype: block.type,\n\t\tmimeType: block.mime_type,\n\t\tfileId: block.id,\n\t\tmetadata: block.metadata\n\t};\n\treturn block;\n}\nfunction convertToV1FromDataContent(content) {\n\treturn content.map(convertToV1FromDataContentBlock);\n}\nfunction isOpenAIDataBlock(block) {\n\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__._isContentBlock)(block, \"image_url\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__._isObject)(block.image_url)) return true;\n\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__._isContentBlock)(block, \"input_audio\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__._isObject)(block.input_audio)) return true;\n\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__._isContentBlock)(block, \"file\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__._isObject)(block.file)) return true;\n\treturn false;\n}\nfunction convertToV1FromOpenAIDataBlock(block) {\n\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__._isContentBlock)(block, \"image_url\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__._isObject)(block.image_url) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__._isString)(block.image_url.url)) {\n\t\tconst parsed = (0,_content_data_js__WEBPACK_IMPORTED_MODULE_0__.parseBase64DataUrl)({ dataUrl: block.image_url.url });\n\t\tif (parsed) return {\n\t\t\ttype: \"image\",\n\t\t\tmimeType: parsed.mime_type,\n\t\t\tdata: parsed.data\n\t\t};\n\t\telse return {\n\t\t\ttype: \"image\",\n\t\t\turl: block.image_url.url\n\t\t};\n\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__._isContentBlock)(block, \"input_audio\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__._isObject)(block.input_audio) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__._isString)(block.input_audio.data) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__._isString)(block.input_audio.format)) return {\n\t\ttype: \"audio\",\n\t\tdata: block.input_audio.data,\n\t\tmimeType: `audio/${block.input_audio.format}`\n\t};\n\telse if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__._isContentBlock)(block, \"file\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__._isObject)(block.file) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__._isString)(block.file.data)) {\n\t\tconst parsed = (0,_content_data_js__WEBPACK_IMPORTED_MODULE_0__.parseBase64DataUrl)({ dataUrl: block.file.data });\n\t\tif (parsed) return {\n\t\t\ttype: \"file\",\n\t\t\tdata: parsed.data,\n\t\t\tmimeType: parsed.mime_type\n\t\t};\n\t\telse if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__._isString)(block.file.file_id)) return {\n\t\t\ttype: \"file\",\n\t\t\tfileId: block.file.file_id\n\t\t};\n\t}\n\treturn block;\n}\n\n//#endregion\n\n//# sourceMappingURL=data.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvYmxvY2tfdHJhbnNsYXRvcnMvZGF0YS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFtSDtBQUNoRDs7QUFFbkU7QUFDQTtBQUNBLEtBQUssbUVBQWlCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLHNFQUFvQjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxrRUFBZ0I7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssMERBQWUsd0JBQXdCLG9EQUFTO0FBQ3JELEtBQUssMERBQWUsMEJBQTBCLG9EQUFTO0FBQ3ZELEtBQUssMERBQWUsbUJBQW1CLG9EQUFTO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLEtBQUssMERBQWUsd0JBQXdCLG9EQUFTLHFCQUFxQixvREFBUztBQUNuRixpQkFBaUIsb0VBQWtCLEdBQUcsOEJBQThCO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsU0FBUywwREFBZSwwQkFBMEIsb0RBQVMsdUJBQXVCLG9EQUFTLDRCQUE0QixvREFBUztBQUNuSTtBQUNBO0FBQ0EscUJBQXFCLHlCQUF5QjtBQUM5QztBQUNBLFVBQVUsMERBQWUsbUJBQW1CLG9EQUFTLGdCQUFnQixvREFBUztBQUM5RSxpQkFBaUIsb0VBQWtCLEdBQUcsMEJBQTBCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLG9EQUFTO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUN5RjtBQUN6RiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2Jsb2NrX3RyYW5zbGF0b3JzL2RhdGEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNCYXNlNjRDb250ZW50QmxvY2ssIGlzSURDb250ZW50QmxvY2ssIGlzVVJMQ29udGVudEJsb2NrLCBwYXJzZUJhc2U2NERhdGFVcmwgfSBmcm9tIFwiLi4vY29udGVudC9kYXRhLmpzXCI7XG5pbXBvcnQgeyBfaXNDb250ZW50QmxvY2ssIF9pc09iamVjdCwgX2lzU3RyaW5nIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9tZXNzYWdlcy9ibG9ja190cmFuc2xhdG9ycy9kYXRhLnRzXG5mdW5jdGlvbiBjb252ZXJ0VG9WMUZyb21EYXRhQ29udGVudEJsb2NrKGJsb2NrKSB7XG5cdGlmIChpc1VSTENvbnRlbnRCbG9jayhibG9jaykpIHJldHVybiB7XG5cdFx0dHlwZTogYmxvY2sudHlwZSxcblx0XHRtaW1lVHlwZTogYmxvY2subWltZV90eXBlLFxuXHRcdHVybDogYmxvY2sudXJsLFxuXHRcdG1ldGFkYXRhOiBibG9jay5tZXRhZGF0YVxuXHR9O1xuXHRpZiAoaXNCYXNlNjRDb250ZW50QmxvY2soYmxvY2spKSByZXR1cm4ge1xuXHRcdHR5cGU6IGJsb2NrLnR5cGUsXG5cdFx0bWltZVR5cGU6IGJsb2NrLm1pbWVfdHlwZSA/PyBcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiLFxuXHRcdGRhdGE6IGJsb2NrLmRhdGEsXG5cdFx0bWV0YWRhdGE6IGJsb2NrLm1ldGFkYXRhXG5cdH07XG5cdGlmIChpc0lEQ29udGVudEJsb2NrKGJsb2NrKSkgcmV0dXJuIHtcblx0XHR0eXBlOiBibG9jay50eXBlLFxuXHRcdG1pbWVUeXBlOiBibG9jay5taW1lX3R5cGUsXG5cdFx0ZmlsZUlkOiBibG9jay5pZCxcblx0XHRtZXRhZGF0YTogYmxvY2subWV0YWRhdGFcblx0fTtcblx0cmV0dXJuIGJsb2NrO1xufVxuZnVuY3Rpb24gY29udmVydFRvVjFGcm9tRGF0YUNvbnRlbnQoY29udGVudCkge1xuXHRyZXR1cm4gY29udGVudC5tYXAoY29udmVydFRvVjFGcm9tRGF0YUNvbnRlbnRCbG9jayk7XG59XG5mdW5jdGlvbiBpc09wZW5BSURhdGFCbG9jayhibG9jaykge1xuXHRpZiAoX2lzQ29udGVudEJsb2NrKGJsb2NrLCBcImltYWdlX3VybFwiKSAmJiBfaXNPYmplY3QoYmxvY2suaW1hZ2VfdXJsKSkgcmV0dXJuIHRydWU7XG5cdGlmIChfaXNDb250ZW50QmxvY2soYmxvY2ssIFwiaW5wdXRfYXVkaW9cIikgJiYgX2lzT2JqZWN0KGJsb2NrLmlucHV0X2F1ZGlvKSkgcmV0dXJuIHRydWU7XG5cdGlmIChfaXNDb250ZW50QmxvY2soYmxvY2ssIFwiZmlsZVwiKSAmJiBfaXNPYmplY3QoYmxvY2suZmlsZSkpIHJldHVybiB0cnVlO1xuXHRyZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBjb252ZXJ0VG9WMUZyb21PcGVuQUlEYXRhQmxvY2soYmxvY2spIHtcblx0aWYgKF9pc0NvbnRlbnRCbG9jayhibG9jaywgXCJpbWFnZV91cmxcIikgJiYgX2lzT2JqZWN0KGJsb2NrLmltYWdlX3VybCkgJiYgX2lzU3RyaW5nKGJsb2NrLmltYWdlX3VybC51cmwpKSB7XG5cdFx0Y29uc3QgcGFyc2VkID0gcGFyc2VCYXNlNjREYXRhVXJsKHsgZGF0YVVybDogYmxvY2suaW1hZ2VfdXJsLnVybCB9KTtcblx0XHRpZiAocGFyc2VkKSByZXR1cm4ge1xuXHRcdFx0dHlwZTogXCJpbWFnZVwiLFxuXHRcdFx0bWltZVR5cGU6IHBhcnNlZC5taW1lX3R5cGUsXG5cdFx0XHRkYXRhOiBwYXJzZWQuZGF0YVxuXHRcdH07XG5cdFx0ZWxzZSByZXR1cm4ge1xuXHRcdFx0dHlwZTogXCJpbWFnZVwiLFxuXHRcdFx0dXJsOiBibG9jay5pbWFnZV91cmwudXJsXG5cdFx0fTtcblx0fSBlbHNlIGlmIChfaXNDb250ZW50QmxvY2soYmxvY2ssIFwiaW5wdXRfYXVkaW9cIikgJiYgX2lzT2JqZWN0KGJsb2NrLmlucHV0X2F1ZGlvKSAmJiBfaXNTdHJpbmcoYmxvY2suaW5wdXRfYXVkaW8uZGF0YSkgJiYgX2lzU3RyaW5nKGJsb2NrLmlucHV0X2F1ZGlvLmZvcm1hdCkpIHJldHVybiB7XG5cdFx0dHlwZTogXCJhdWRpb1wiLFxuXHRcdGRhdGE6IGJsb2NrLmlucHV0X2F1ZGlvLmRhdGEsXG5cdFx0bWltZVR5cGU6IGBhdWRpby8ke2Jsb2NrLmlucHV0X2F1ZGlvLmZvcm1hdH1gXG5cdH07XG5cdGVsc2UgaWYgKF9pc0NvbnRlbnRCbG9jayhibG9jaywgXCJmaWxlXCIpICYmIF9pc09iamVjdChibG9jay5maWxlKSAmJiBfaXNTdHJpbmcoYmxvY2suZmlsZS5kYXRhKSkge1xuXHRcdGNvbnN0IHBhcnNlZCA9IHBhcnNlQmFzZTY0RGF0YVVybCh7IGRhdGFVcmw6IGJsb2NrLmZpbGUuZGF0YSB9KTtcblx0XHRpZiAocGFyc2VkKSByZXR1cm4ge1xuXHRcdFx0dHlwZTogXCJmaWxlXCIsXG5cdFx0XHRkYXRhOiBwYXJzZWQuZGF0YSxcblx0XHRcdG1pbWVUeXBlOiBwYXJzZWQubWltZV90eXBlXG5cdFx0fTtcblx0XHRlbHNlIGlmIChfaXNTdHJpbmcoYmxvY2suZmlsZS5maWxlX2lkKSkgcmV0dXJuIHtcblx0XHRcdHR5cGU6IFwiZmlsZVwiLFxuXHRcdFx0ZmlsZUlkOiBibG9jay5maWxlLmZpbGVfaWRcblx0XHR9O1xuXHR9XG5cdHJldHVybiBibG9jaztcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjb252ZXJ0VG9WMUZyb21EYXRhQ29udGVudCwgY29udmVydFRvVjFGcm9tT3BlbkFJRGF0YUJsb2NrLCBpc09wZW5BSURhdGFCbG9jayB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/data.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/google_genai.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/block_translators/google_genai.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatGoogleGenAITranslator: () => (/* binding */ ChatGoogleGenAITranslator)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/utils.js\");\n\n\n//#region src/messages/block_translators/google_genai.ts\nfunction convertToV1FromChatGoogleMessage(message) {\n\tfunction* iterateContent() {\n\t\tconst content = typeof message.content === \"string\" ? [{\n\t\t\ttype: \"text\",\n\t\t\ttext: message.content\n\t\t}] : message.content;\n\t\tfor (const block of content) {\n\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"text\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.text)) {\n\t\t\t\tyield {\n\t\t\t\t\ttype: \"text\",\n\t\t\t\t\ttext: block.text\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"inlineData\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.inlineData) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.inlineData.mimeType) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.inlineData.data)) {\n\t\t\t\tyield {\n\t\t\t\t\ttype: \"file\",\n\t\t\t\t\tmimeType: block.inlineData.mimeType,\n\t\t\t\t\tdata: block.inlineData.data\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"functionCall\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.functionCall) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.functionCall.name) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.functionCall.args)) {\n\t\t\t\tyield {\n\t\t\t\t\ttype: \"tool_call\",\n\t\t\t\t\tid: message.id,\n\t\t\t\t\tname: block.functionCall.name,\n\t\t\t\t\targs: block.functionCall.args\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"functionResponse\")) {\n\t\t\t\tyield {\n\t\t\t\t\ttype: \"non_standard\",\n\t\t\t\t\tvalue: block\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"fileData\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(block.fileData) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.fileData.mimeType) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.fileData.fileUri)) {\n\t\t\t\tyield {\n\t\t\t\t\ttype: \"file\",\n\t\t\t\t\tmimeType: block.fileData.mimeType,\n\t\t\t\t\tfileId: block.fileData.fileUri\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"executableCode\")) {\n\t\t\t\tyield {\n\t\t\t\t\ttype: \"non_standard\",\n\t\t\t\t\tvalue: block\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"codeExecutionResult\")) {\n\t\t\t\tyield {\n\t\t\t\t\ttype: \"non_standard\",\n\t\t\t\t\tvalue: block\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tyield {\n\t\t\t\ttype: \"non_standard\",\n\t\t\t\tvalue: block\n\t\t\t};\n\t\t}\n\t}\n\treturn Array.from(iterateContent());\n}\nconst ChatGoogleGenAITranslator = {\n\ttranslateContent: convertToV1FromChatGoogleMessage,\n\ttranslateContentChunk: convertToV1FromChatGoogleMessage\n};\n\n//#endregion\n\n//# sourceMappingURL=google_genai.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvYmxvY2tfdHJhbnNsYXRvcnMvZ29vZ2xlX2dlbmFpLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQW1FOztBQUVuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxPQUFPLDBEQUFlLG1CQUFtQixvREFBUztBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxTQUFTLDBEQUFlLHlCQUF5QixvREFBUyxzQkFBc0Isb0RBQVMsK0JBQStCLG9EQUFTO0FBQ3RJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssU0FBUywwREFBZSwyQkFBMkIsb0RBQVMsd0JBQXdCLG9EQUFTLDZCQUE2QixvREFBUztBQUN4STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssU0FBUywwREFBZTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxTQUFTLDBEQUFlLHVCQUF1QixvREFBUyxvQkFBb0Isb0RBQVMsNkJBQTZCLG9EQUFTO0FBQ2hJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssU0FBUywwREFBZTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxTQUFTLDBEQUFlO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNxQztBQUNyQyIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2Jsb2NrX3RyYW5zbGF0b3JzL2dvb2dsZV9nZW5haS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfaXNDb250ZW50QmxvY2ssIF9pc09iamVjdCwgX2lzU3RyaW5nIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9tZXNzYWdlcy9ibG9ja190cmFuc2xhdG9ycy9nb29nbGVfZ2VuYWkudHNcbmZ1bmN0aW9uIGNvbnZlcnRUb1YxRnJvbUNoYXRHb29nbGVNZXNzYWdlKG1lc3NhZ2UpIHtcblx0ZnVuY3Rpb24qIGl0ZXJhdGVDb250ZW50KCkge1xuXHRcdGNvbnN0IGNvbnRlbnQgPSB0eXBlb2YgbWVzc2FnZS5jb250ZW50ID09PSBcInN0cmluZ1wiID8gW3tcblx0XHRcdHR5cGU6IFwidGV4dFwiLFxuXHRcdFx0dGV4dDogbWVzc2FnZS5jb250ZW50XG5cdFx0fV0gOiBtZXNzYWdlLmNvbnRlbnQ7XG5cdFx0Zm9yIChjb25zdCBibG9jayBvZiBjb250ZW50KSB7XG5cdFx0XHRpZiAoX2lzQ29udGVudEJsb2NrKGJsb2NrLCBcInRleHRcIikgJiYgX2lzU3RyaW5nKGJsb2NrLnRleHQpKSB7XG5cdFx0XHRcdHlpZWxkIHtcblx0XHRcdFx0XHR0eXBlOiBcInRleHRcIixcblx0XHRcdFx0XHR0ZXh0OiBibG9jay50ZXh0XG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fSBlbHNlIGlmIChfaXNDb250ZW50QmxvY2soYmxvY2ssIFwiaW5saW5lRGF0YVwiKSAmJiBfaXNPYmplY3QoYmxvY2suaW5saW5lRGF0YSkgJiYgX2lzU3RyaW5nKGJsb2NrLmlubGluZURhdGEubWltZVR5cGUpICYmIF9pc1N0cmluZyhibG9jay5pbmxpbmVEYXRhLmRhdGEpKSB7XG5cdFx0XHRcdHlpZWxkIHtcblx0XHRcdFx0XHR0eXBlOiBcImZpbGVcIixcblx0XHRcdFx0XHRtaW1lVHlwZTogYmxvY2suaW5saW5lRGF0YS5taW1lVHlwZSxcblx0XHRcdFx0XHRkYXRhOiBibG9jay5pbmxpbmVEYXRhLmRhdGFcblx0XHRcdFx0fTtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9IGVsc2UgaWYgKF9pc0NvbnRlbnRCbG9jayhibG9jaywgXCJmdW5jdGlvbkNhbGxcIikgJiYgX2lzT2JqZWN0KGJsb2NrLmZ1bmN0aW9uQ2FsbCkgJiYgX2lzU3RyaW5nKGJsb2NrLmZ1bmN0aW9uQ2FsbC5uYW1lKSAmJiBfaXNPYmplY3QoYmxvY2suZnVuY3Rpb25DYWxsLmFyZ3MpKSB7XG5cdFx0XHRcdHlpZWxkIHtcblx0XHRcdFx0XHR0eXBlOiBcInRvb2xfY2FsbFwiLFxuXHRcdFx0XHRcdGlkOiBtZXNzYWdlLmlkLFxuXHRcdFx0XHRcdG5hbWU6IGJsb2NrLmZ1bmN0aW9uQ2FsbC5uYW1lLFxuXHRcdFx0XHRcdGFyZ3M6IGJsb2NrLmZ1bmN0aW9uQ2FsbC5hcmdzXG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fSBlbHNlIGlmIChfaXNDb250ZW50QmxvY2soYmxvY2ssIFwiZnVuY3Rpb25SZXNwb25zZVwiKSkge1xuXHRcdFx0XHR5aWVsZCB7XG5cdFx0XHRcdFx0dHlwZTogXCJub25fc3RhbmRhcmRcIixcblx0XHRcdFx0XHR2YWx1ZTogYmxvY2tcblx0XHRcdFx0fTtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9IGVsc2UgaWYgKF9pc0NvbnRlbnRCbG9jayhibG9jaywgXCJmaWxlRGF0YVwiKSAmJiBfaXNPYmplY3QoYmxvY2suZmlsZURhdGEpICYmIF9pc1N0cmluZyhibG9jay5maWxlRGF0YS5taW1lVHlwZSkgJiYgX2lzU3RyaW5nKGJsb2NrLmZpbGVEYXRhLmZpbGVVcmkpKSB7XG5cdFx0XHRcdHlpZWxkIHtcblx0XHRcdFx0XHR0eXBlOiBcImZpbGVcIixcblx0XHRcdFx0XHRtaW1lVHlwZTogYmxvY2suZmlsZURhdGEubWltZVR5cGUsXG5cdFx0XHRcdFx0ZmlsZUlkOiBibG9jay5maWxlRGF0YS5maWxlVXJpXG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fSBlbHNlIGlmIChfaXNDb250ZW50QmxvY2soYmxvY2ssIFwiZXhlY3V0YWJsZUNvZGVcIikpIHtcblx0XHRcdFx0eWllbGQge1xuXHRcdFx0XHRcdHR5cGU6IFwibm9uX3N0YW5kYXJkXCIsXG5cdFx0XHRcdFx0dmFsdWU6IGJsb2NrXG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fSBlbHNlIGlmIChfaXNDb250ZW50QmxvY2soYmxvY2ssIFwiY29kZUV4ZWN1dGlvblJlc3VsdFwiKSkge1xuXHRcdFx0XHR5aWVsZCB7XG5cdFx0XHRcdFx0dHlwZTogXCJub25fc3RhbmRhcmRcIixcblx0XHRcdFx0XHR2YWx1ZTogYmxvY2tcblx0XHRcdFx0fTtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cdFx0XHR5aWVsZCB7XG5cdFx0XHRcdHR5cGU6IFwibm9uX3N0YW5kYXJkXCIsXG5cdFx0XHRcdHZhbHVlOiBibG9ja1xuXHRcdFx0fTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIEFycmF5LmZyb20oaXRlcmF0ZUNvbnRlbnQoKSk7XG59XG5jb25zdCBDaGF0R29vZ2xlR2VuQUlUcmFuc2xhdG9yID0ge1xuXHR0cmFuc2xhdGVDb250ZW50OiBjb252ZXJ0VG9WMUZyb21DaGF0R29vZ2xlTWVzc2FnZSxcblx0dHJhbnNsYXRlQ29udGVudENodW5rOiBjb252ZXJ0VG9WMUZyb21DaGF0R29vZ2xlTWVzc2FnZVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBDaGF0R29vZ2xlR2VuQUlUcmFuc2xhdG9yIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nb29nbGVfZ2VuYWkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/google_genai.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/google_vertexai.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/block_translators/google_vertexai.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatVertexTranslator: () => (/* binding */ ChatVertexTranslator)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/utils.js\");\n\n\n//#region src/messages/block_translators/google_vertexai.ts\nfunction convertToV1FromChatVertexMessage(message) {\n\tfunction* iterateContent() {\n\t\tconst content = typeof message.content === \"string\" ? [{\n\t\t\ttype: \"text\",\n\t\t\ttext: message.content\n\t\t}] : message.content;\n\t\tfor (const block of content) {\n\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"reasoning\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.reasoning)) {\n\t\t\t\tconst signature = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.iife)(() => {\n\t\t\t\t\tconst reasoningIndex = content.indexOf(block);\n\t\t\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isArray)(message.additional_kwargs?.signatures) && reasoningIndex >= 0) return message.additional_kwargs.signatures.at(reasoningIndex);\n\t\t\t\t\treturn void 0;\n\t\t\t\t});\n\t\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(signature)) yield {\n\t\t\t\t\ttype: \"reasoning\",\n\t\t\t\t\treasoning: block.reasoning,\n\t\t\t\t\tsignature\n\t\t\t\t};\n\t\t\t\telse yield {\n\t\t\t\t\ttype: \"reasoning\",\n\t\t\t\t\treasoning: block.reasoning\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"text\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.text)) {\n\t\t\t\tyield {\n\t\t\t\t\ttype: \"text\",\n\t\t\t\t\ttext: block.text\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"image_url\")) {\n\t\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.image_url)) if (block.image_url.startsWith(\"data:\")) {\n\t\t\t\t\tconst dataUrlRegex = /^data:([^;]+);base64,(.+)$/;\n\t\t\t\t\tconst match = block.image_url.match(dataUrlRegex);\n\t\t\t\t\tif (match) yield {\n\t\t\t\t\t\ttype: \"image\",\n\t\t\t\t\t\tdata: match[2],\n\t\t\t\t\t\tmimeType: match[1]\n\t\t\t\t\t};\n\t\t\t\t\telse yield {\n\t\t\t\t\t\ttype: \"image\",\n\t\t\t\t\t\turl: block.image_url\n\t\t\t\t\t};\n\t\t\t\t} else yield {\n\t\t\t\t\ttype: \"image\",\n\t\t\t\t\turl: block.image_url\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"media\") && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.mimeType) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(block.data)) {\n\t\t\t\tyield {\n\t\t\t\t\ttype: \"file\",\n\t\t\t\t\tmimeType: block.mimeType,\n\t\t\t\t\tdata: block.data\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tyield {\n\t\t\t\ttype: \"non_standard\",\n\t\t\t\tvalue: block\n\t\t\t};\n\t\t}\n\t}\n\treturn Array.from(iterateContent());\n}\nconst ChatVertexTranslator = {\n\ttranslateContent: convertToV1FromChatVertexMessage,\n\ttranslateContentChunk: convertToV1FromChatVertexMessage\n};\n\n//#endregion\n\n//# sourceMappingURL=google_vertexai.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvYmxvY2tfdHJhbnNsYXRvcnMvZ29vZ2xlX3ZlcnRleGFpLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXdFOztBQUV4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxPQUFPLDBEQUFlLHdCQUF3QixvREFBUztBQUN2RCxzQkFBc0IsK0NBQUk7QUFDMUI7QUFDQSxTQUFTLG1EQUFRO0FBQ2pCO0FBQ0EsS0FBSztBQUNMLFFBQVEsb0RBQVM7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxTQUFTLDBEQUFlLG1CQUFtQixvREFBUztBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxTQUFTLDBEQUFlO0FBQzdCLFFBQVEsb0RBQVM7QUFDakIscUNBQXFDLElBQUk7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLFNBQVMsMERBQWUsb0JBQW9CLG9EQUFTLG9CQUFvQixvREFBUztBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNnQztBQUNoQyIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2Jsb2NrX3RyYW5zbGF0b3JzL2dvb2dsZV92ZXJ0ZXhhaS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfaXNBcnJheSwgX2lzQ29udGVudEJsb2NrLCBfaXNTdHJpbmcsIGlpZmUgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL21lc3NhZ2VzL2Jsb2NrX3RyYW5zbGF0b3JzL2dvb2dsZV92ZXJ0ZXhhaS50c1xuZnVuY3Rpb24gY29udmVydFRvVjFGcm9tQ2hhdFZlcnRleE1lc3NhZ2UobWVzc2FnZSkge1xuXHRmdW5jdGlvbiogaXRlcmF0ZUNvbnRlbnQoKSB7XG5cdFx0Y29uc3QgY29udGVudCA9IHR5cGVvZiBtZXNzYWdlLmNvbnRlbnQgPT09IFwic3RyaW5nXCIgPyBbe1xuXHRcdFx0dHlwZTogXCJ0ZXh0XCIsXG5cdFx0XHR0ZXh0OiBtZXNzYWdlLmNvbnRlbnRcblx0XHR9XSA6IG1lc3NhZ2UuY29udGVudDtcblx0XHRmb3IgKGNvbnN0IGJsb2NrIG9mIGNvbnRlbnQpIHtcblx0XHRcdGlmIChfaXNDb250ZW50QmxvY2soYmxvY2ssIFwicmVhc29uaW5nXCIpICYmIF9pc1N0cmluZyhibG9jay5yZWFzb25pbmcpKSB7XG5cdFx0XHRcdGNvbnN0IHNpZ25hdHVyZSA9IGlpZmUoKCkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHJlYXNvbmluZ0luZGV4ID0gY29udGVudC5pbmRleE9mKGJsb2NrKTtcblx0XHRcdFx0XHRpZiAoX2lzQXJyYXkobWVzc2FnZS5hZGRpdGlvbmFsX2t3YXJncz8uc2lnbmF0dXJlcykgJiYgcmVhc29uaW5nSW5kZXggPj0gMCkgcmV0dXJuIG1lc3NhZ2UuYWRkaXRpb25hbF9rd2FyZ3Muc2lnbmF0dXJlcy5hdChyZWFzb25pbmdJbmRleCk7XG5cdFx0XHRcdFx0cmV0dXJuIHZvaWQgMDtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmIChfaXNTdHJpbmcoc2lnbmF0dXJlKSkgeWllbGQge1xuXHRcdFx0XHRcdHR5cGU6IFwicmVhc29uaW5nXCIsXG5cdFx0XHRcdFx0cmVhc29uaW5nOiBibG9jay5yZWFzb25pbmcsXG5cdFx0XHRcdFx0c2lnbmF0dXJlXG5cdFx0XHRcdH07XG5cdFx0XHRcdGVsc2UgeWllbGQge1xuXHRcdFx0XHRcdHR5cGU6IFwicmVhc29uaW5nXCIsXG5cdFx0XHRcdFx0cmVhc29uaW5nOiBibG9jay5yZWFzb25pbmdcblx0XHRcdFx0fTtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9IGVsc2UgaWYgKF9pc0NvbnRlbnRCbG9jayhibG9jaywgXCJ0ZXh0XCIpICYmIF9pc1N0cmluZyhibG9jay50ZXh0KSkge1xuXHRcdFx0XHR5aWVsZCB7XG5cdFx0XHRcdFx0dHlwZTogXCJ0ZXh0XCIsXG5cdFx0XHRcdFx0dGV4dDogYmxvY2sudGV4dFxuXHRcdFx0XHR9O1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH0gZWxzZSBpZiAoX2lzQ29udGVudEJsb2NrKGJsb2NrLCBcImltYWdlX3VybFwiKSkge1xuXHRcdFx0XHRpZiAoX2lzU3RyaW5nKGJsb2NrLmltYWdlX3VybCkpIGlmIChibG9jay5pbWFnZV91cmwuc3RhcnRzV2l0aChcImRhdGE6XCIpKSB7XG5cdFx0XHRcdFx0Y29uc3QgZGF0YVVybFJlZ2V4ID0gL15kYXRhOihbXjtdKyk7YmFzZTY0LCguKykkLztcblx0XHRcdFx0XHRjb25zdCBtYXRjaCA9IGJsb2NrLmltYWdlX3VybC5tYXRjaChkYXRhVXJsUmVnZXgpO1xuXHRcdFx0XHRcdGlmIChtYXRjaCkgeWllbGQge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJpbWFnZVwiLFxuXHRcdFx0XHRcdFx0ZGF0YTogbWF0Y2hbMl0sXG5cdFx0XHRcdFx0XHRtaW1lVHlwZTogbWF0Y2hbMV1cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdGVsc2UgeWllbGQge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJpbWFnZVwiLFxuXHRcdFx0XHRcdFx0dXJsOiBibG9jay5pbWFnZV91cmxcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9IGVsc2UgeWllbGQge1xuXHRcdFx0XHRcdHR5cGU6IFwiaW1hZ2VcIixcblx0XHRcdFx0XHR1cmw6IGJsb2NrLmltYWdlX3VybFxuXHRcdFx0XHR9O1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH0gZWxzZSBpZiAoX2lzQ29udGVudEJsb2NrKGJsb2NrLCBcIm1lZGlhXCIpICYmIF9pc1N0cmluZyhibG9jay5taW1lVHlwZSkgJiYgX2lzU3RyaW5nKGJsb2NrLmRhdGEpKSB7XG5cdFx0XHRcdHlpZWxkIHtcblx0XHRcdFx0XHR0eXBlOiBcImZpbGVcIixcblx0XHRcdFx0XHRtaW1lVHlwZTogYmxvY2subWltZVR5cGUsXG5cdFx0XHRcdFx0ZGF0YTogYmxvY2suZGF0YVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdHlpZWxkIHtcblx0XHRcdFx0dHlwZTogXCJub25fc3RhbmRhcmRcIixcblx0XHRcdFx0dmFsdWU6IGJsb2NrXG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gQXJyYXkuZnJvbShpdGVyYXRlQ29udGVudCgpKTtcbn1cbmNvbnN0IENoYXRWZXJ0ZXhUcmFuc2xhdG9yID0ge1xuXHR0cmFuc2xhdGVDb250ZW50OiBjb252ZXJ0VG9WMUZyb21DaGF0VmVydGV4TWVzc2FnZSxcblx0dHJhbnNsYXRlQ29udGVudENodW5rOiBjb252ZXJ0VG9WMUZyb21DaGF0VmVydGV4TWVzc2FnZVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBDaGF0VmVydGV4VHJhbnNsYXRvciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z29vZ2xlX3ZlcnRleGFpLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/google_vertexai.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/index.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/block_translators/index.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getTranslator: () => (/* binding */ getTranslator)\n/* harmony export */ });\n/* harmony import */ var _anthropic_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./anthropic.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/anthropic.js\");\n/* harmony import */ var _openai_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./openai.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/openai.js\");\n/* harmony import */ var _bedrock_converse_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./bedrock_converse.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/bedrock_converse.js\");\n/* harmony import */ var _google_genai_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./google_genai.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/google_genai.js\");\n/* harmony import */ var _google_vertexai_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./google_vertexai.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/google_vertexai.js\");\n\n\n\n\n\n\n//#region src/messages/block_translators/index.ts\nglobalThis.lc_block_translators_registry ??= new Map([\n\t[\"anthropic\", _anthropic_js__WEBPACK_IMPORTED_MODULE_0__.ChatAnthropicTranslator],\n\t[\"bedrock-converse\", _bedrock_converse_js__WEBPACK_IMPORTED_MODULE_2__.ChatBedrockConverseTranslator],\n\t[\"google-genai\", _google_genai_js__WEBPACK_IMPORTED_MODULE_3__.ChatGoogleGenAITranslator],\n\t[\"google-vertexai\", _google_vertexai_js__WEBPACK_IMPORTED_MODULE_4__.ChatVertexTranslator],\n\t[\"openai\", _openai_js__WEBPACK_IMPORTED_MODULE_1__.ChatOpenAITranslator]\n]);\nfunction getTranslator(modelProvider) {\n\treturn globalThis.lc_block_translators_registry.get(modelProvider);\n}\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvYmxvY2tfdHJhbnNsYXRvcnMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXlEO0FBQ047QUFDbUI7QUFDUjtBQUNGOztBQUU1RDtBQUNBO0FBQ0EsZUFBZSxrRUFBdUI7QUFDdEMsc0JBQXNCLCtFQUE2QjtBQUNuRCxrQkFBa0IsdUVBQXlCO0FBQzNDLHFCQUFxQixxRUFBb0I7QUFDekMsWUFBWSw0REFBb0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDeUI7QUFDekIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9ibG9ja190cmFuc2xhdG9ycy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGF0QW50aHJvcGljVHJhbnNsYXRvciB9IGZyb20gXCIuL2FudGhyb3BpYy5qc1wiO1xuaW1wb3J0IHsgQ2hhdE9wZW5BSVRyYW5zbGF0b3IgfSBmcm9tIFwiLi9vcGVuYWkuanNcIjtcbmltcG9ydCB7IENoYXRCZWRyb2NrQ29udmVyc2VUcmFuc2xhdG9yIH0gZnJvbSBcIi4vYmVkcm9ja19jb252ZXJzZS5qc1wiO1xuaW1wb3J0IHsgQ2hhdEdvb2dsZUdlbkFJVHJhbnNsYXRvciB9IGZyb20gXCIuL2dvb2dsZV9nZW5haS5qc1wiO1xuaW1wb3J0IHsgQ2hhdFZlcnRleFRyYW5zbGF0b3IgfSBmcm9tIFwiLi9nb29nbGVfdmVydGV4YWkuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9tZXNzYWdlcy9ibG9ja190cmFuc2xhdG9ycy9pbmRleC50c1xuZ2xvYmFsVGhpcy5sY19ibG9ja190cmFuc2xhdG9yc19yZWdpc3RyeSA/Pz0gbmV3IE1hcChbXG5cdFtcImFudGhyb3BpY1wiLCBDaGF0QW50aHJvcGljVHJhbnNsYXRvcl0sXG5cdFtcImJlZHJvY2stY29udmVyc2VcIiwgQ2hhdEJlZHJvY2tDb252ZXJzZVRyYW5zbGF0b3JdLFxuXHRbXCJnb29nbGUtZ2VuYWlcIiwgQ2hhdEdvb2dsZUdlbkFJVHJhbnNsYXRvcl0sXG5cdFtcImdvb2dsZS12ZXJ0ZXhhaVwiLCBDaGF0VmVydGV4VHJhbnNsYXRvcl0sXG5cdFtcIm9wZW5haVwiLCBDaGF0T3BlbkFJVHJhbnNsYXRvcl1cbl0pO1xuZnVuY3Rpb24gZ2V0VHJhbnNsYXRvcihtb2RlbFByb3ZpZGVyKSB7XG5cdHJldHVybiBnbG9iYWxUaGlzLmxjX2Jsb2NrX3RyYW5zbGF0b3JzX3JlZ2lzdHJ5LmdldChtb2RlbFByb3ZpZGVyKTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRUcmFuc2xhdG9yIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/openai.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/block_translators/openai.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatOpenAITranslator: () => (/* binding */ ChatOpenAITranslator),\n/* harmony export */   convertToV1FromChatCompletionsInput: () => (/* binding */ convertToV1FromChatCompletionsInput)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/utils.js\");\n/* harmony import */ var _data_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/data.js\");\n\n\n\n//#region src/messages/block_translators/openai.ts\n/**\n* Converts a ChatOpenAICompletions message to an array of v1 standard content blocks.\n*\n* This function processes an AI message from ChatOpenAICompletions API format\n* and converts it to the standardized v1 content block format. It handles both\n* string content and structured content blocks, as well as tool calls.\n*\n* @param message - The AI message containing ChatOpenAICompletions formatted content\n* @returns Array of content blocks in v1 standard format\n*\n* @example\n* ```typescript\n* const message = new AIMessage(\"Hello world\");\n* const standardBlocks = convertToV1FromChatCompletions(message);\n* // Returns: [{ type: \"text\", text: \"Hello world\" }]\n* ```\n*\n* @example\n* ```typescript\n* const message = new AIMessage([\n*   { type: \"text\", text: \"Hello\" },\n*   { type: \"image_url\", image_url: { url: \"https://example.com/image.png\" } }\n* ]);\n* message.tool_calls = [\n*   { id: \"call_123\", name: \"calculator\", args: { a: 1, b: 2 } }\n* ];\n*\n* const standardBlocks = convertToV1FromChatCompletions(message);\n* // Returns:\n* // [\n* //   { type: \"text\", text: \"Hello\" },\n* //   { type: \"image\", url: \"https://example.com/image.png\" },\n* //   { type: \"tool_call\", id: \"call_123\", name: \"calculator\", args: { a: 1, b: 2 } }\n* // ]\n* ```\n*/\nfunction convertToV1FromChatCompletions(message) {\n\tconst blocks = [];\n\tif (typeof message.content === \"string\") blocks.push({\n\t\ttype: \"text\",\n\t\ttext: message.content\n\t});\n\telse blocks.push(...convertToV1FromChatCompletionsInput(message.content));\n\tfor (const toolCall of message.tool_calls ?? []) blocks.push({\n\t\ttype: \"tool_call\",\n\t\tid: toolCall.id,\n\t\tname: toolCall.name,\n\t\targs: toolCall.args\n\t});\n\treturn blocks;\n}\n/**\n* Converts a ChatOpenAICompletions message chunk to an array of v1 standard content blocks.\n*\n* This function processes an AI message chunk from OpenAI's chat completions API and converts\n* it to the standardized v1 content block format. It handles both string and array content,\n* as well as tool calls that may be present in the chunk.\n*\n* @param message - The AI message chunk containing OpenAI-formatted content blocks\n* @returns Array of content blocks in v1 standard format\n*\n* @example\n* ```typescript\n* const chunk = new AIMessage(\"Hello\");\n* const standardBlocks = convertToV1FromChatCompletionsChunk(chunk);\n* // Returns: [{ type: \"text\", text: \"Hello\" }]\n* ```\n*\n* @example\n* ```typescript\n* const chunk = new AIMessage([\n*   { type: \"text\", text: \"Processing...\" }\n* ]);\n* chunk.tool_calls = [\n*   { id: \"call_456\", name: \"search\", args: { query: \"test\" } }\n* ];\n*\n* const standardBlocks = convertToV1FromChatCompletionsChunk(chunk);\n* // Returns:\n* // [\n* //   { type: \"text\", text: \"Processing...\" },\n* //   { type: \"tool_call\", id: \"call_456\", name: \"search\", args: { query: \"test\" } }\n* // ]\n* ```\n*/\nfunction convertToV1FromChatCompletionsChunk(message) {\n\tconst blocks = [];\n\tif (typeof message.content === \"string\") blocks.push({\n\t\ttype: \"text\",\n\t\ttext: message.content\n\t});\n\telse blocks.push(...convertToV1FromChatCompletionsInput(message.content));\n\tfor (const toolCall of message.tool_calls ?? []) blocks.push({\n\t\ttype: \"tool_call\",\n\t\tid: toolCall.id,\n\t\tname: toolCall.name,\n\t\targs: toolCall.args\n\t});\n\treturn blocks;\n}\n/**\n* Converts an array of ChatOpenAICompletions content blocks to v1 standard content blocks.\n*\n* This function processes content blocks from OpenAI's Chat Completions API format\n* and converts them to the standardized v1 content block format. It handles both\n* OpenAI-specific data blocks (which require conversion) and standard blocks\n* (which are passed through with type assertion).\n*\n* @param blocks - Array of content blocks in ChatOpenAICompletions format\n* @returns Array of content blocks in v1 standard format\n*\n* @example\n* ```typescript\n* const openaiBlocks = [\n*   { type: \"text\", text: \"Hello world\" },\n*   { type: \"image_url\", image_url: { url: \"https://example.com/image.png\" } }\n* ];\n*\n* const standardBlocks = convertToV1FromChatCompletionsInput(openaiBlocks);\n* // Returns:\n* // [\n* //   { type: \"text\", text: \"Hello world\" },\n* //   { type: \"image\", url: \"https://example.com/image.png\" }\n* // ]\n* ```\n*/\nfunction convertToV1FromChatCompletionsInput(blocks) {\n\tconst convertedBlocks = [];\n\tfor (const block of blocks) if ((0,_data_js__WEBPACK_IMPORTED_MODULE_1__.isOpenAIDataBlock)(block)) convertedBlocks.push((0,_data_js__WEBPACK_IMPORTED_MODULE_1__.convertToV1FromOpenAIDataBlock)(block));\n\telse convertedBlocks.push(block);\n\treturn convertedBlocks;\n}\nfunction convertResponsesAnnotation(annotation) {\n\tif (annotation.type === \"url_citation\") {\n\t\tconst { url, title, start_index, end_index } = annotation;\n\t\treturn {\n\t\t\ttype: \"citation\",\n\t\t\turl,\n\t\t\ttitle,\n\t\t\tstartIndex: start_index,\n\t\t\tendIndex: end_index\n\t\t};\n\t}\n\tif (annotation.type === \"file_citation\") {\n\t\tconst { file_id, filename, index } = annotation;\n\t\treturn {\n\t\t\ttype: \"citation\",\n\t\t\ttitle: filename,\n\t\t\tstartIndex: index,\n\t\t\tendIndex: index,\n\t\t\tfileId: file_id\n\t\t};\n\t}\n\treturn annotation;\n}\n/**\n* Converts a ChatOpenAIResponses message to an array of v1 standard content blocks.\n*\n* This function processes an AI message containing OpenAI Responses-specific content blocks\n* and converts them to the standardized v1 content block format. It handles reasoning summaries,\n* text content with annotations, tool calls, and various tool outputs including code interpreter,\n* web search, file search, computer calls, and MCP-related blocks.\n*\n* @param message - The AI message containing OpenAI Responses-formatted content blocks\n* @returns Array of content blocks in v1 standard format\n*\n* @example\n* ```typescript\n* const message = new AIMessage({\n*   content: [{ type: \"text\", text: \"Hello world\", annotations: [] }],\n*   tool_calls: [{ id: \"123\", name: \"calculator\", args: { a: 1, b: 2 } }],\n*   additional_kwargs: {\n*     reasoning: { summary: [{ text: \"Let me calculate this...\" }] },\n*     tool_outputs: [\n*       {\n*         type: \"code_interpreter_call\",\n*         code: \"print('hello')\",\n*         outputs: [{ type: \"logs\", logs: \"hello\" }]\n*       }\n*     ]\n*   }\n* });\n*\n* const standardBlocks = convertToV1FromResponses(message);\n* // Returns:\n* // [\n* //   { type: \"reasoning\", reasoning: \"Let me calculate this...\" },\n* //   { type: \"text\", text: \"Hello world\", annotations: [] },\n* //   { type: \"tool_call\", id: \"123\", name: \"calculator\", args: { a: 1, b: 2 } },\n* //   { type: \"code_interpreter_call\", code: \"print('hello')\" },\n* //   { type: \"code_interpreter_result\", output: [{ type: \"code_interpreter_output\", returnCode: 0, stdout: \"hello\" }] }\n* // ]\n* ```\n*/\nfunction convertToV1FromResponses(message) {\n\tfunction* iterateContent() {\n\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(message.additional_kwargs?.reasoning) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isArray)(message.additional_kwargs.reasoning.summary)) {\n\t\t\tconst summary = message.additional_kwargs.reasoning.summary.reduce((acc, item) => {\n\t\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(item) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(item.text)) return `${acc}${item.text}`;\n\t\t\t\treturn acc;\n\t\t\t}, \"\");\n\t\t\tyield {\n\t\t\t\ttype: \"reasoning\",\n\t\t\t\treasoning: summary\n\t\t\t};\n\t\t}\n\t\tconst content = typeof message.content === \"string\" ? [{\n\t\t\ttype: \"text\",\n\t\t\ttext: message.content\n\t\t}] : message.content;\n\t\tfor (const block of content) if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(block, \"text\")) {\n\t\t\tconst { text, annotations,...rest } = block;\n\t\t\tif (Array.isArray(annotations)) yield {\n\t\t\t\t...rest,\n\t\t\t\ttype: \"text\",\n\t\t\t\ttext: String(text),\n\t\t\t\tannotations: annotations.map(convertResponsesAnnotation)\n\t\t\t};\n\t\t\telse yield {\n\t\t\t\t...rest,\n\t\t\t\ttype: \"text\",\n\t\t\t\ttext: String(text)\n\t\t\t};\n\t\t}\n\t\tfor (const toolCall of message.tool_calls ?? []) yield {\n\t\t\ttype: \"tool_call\",\n\t\t\tid: toolCall.id,\n\t\t\tname: toolCall.name,\n\t\t\targs: toolCall.args\n\t\t};\n\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(message.additional_kwargs) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isArray)(message.additional_kwargs.tool_outputs)) for (const toolOutput of message.additional_kwargs.tool_outputs) {\n\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(toolOutput, \"web_search_call\")) {\n\t\t\t\tyield {\n\t\t\t\t\tid: toolOutput.id,\n\t\t\t\t\ttype: \"server_tool_call\",\n\t\t\t\t\tname: \"web_search\",\n\t\t\t\t\targs: { query: toolOutput.query }\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(toolOutput, \"file_search_call\")) {\n\t\t\t\tyield {\n\t\t\t\t\tid: toolOutput.id,\n\t\t\t\t\ttype: \"server_tool_call\",\n\t\t\t\t\tname: \"file_search\",\n\t\t\t\t\targs: { query: toolOutput.query }\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(toolOutput, \"computer_call\")) {\n\t\t\t\tyield {\n\t\t\t\t\ttype: \"non_standard\",\n\t\t\t\t\tvalue: toolOutput\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(toolOutput, \"code_interpreter_call\")) {\n\t\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isString)(toolOutput.code)) yield {\n\t\t\t\t\tid: toolOutput.id,\n\t\t\t\t\ttype: \"server_tool_call\",\n\t\t\t\t\tname: \"code_interpreter\",\n\t\t\t\t\targs: { code: toolOutput.code }\n\t\t\t\t};\n\t\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isArray)(toolOutput.outputs)) {\n\t\t\t\t\tconst returnCode = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.iife)(() => {\n\t\t\t\t\t\tif (toolOutput.status === \"in_progress\") return void 0;\n\t\t\t\t\t\tif (toolOutput.status === \"completed\") return 0;\n\t\t\t\t\t\tif (toolOutput.status === \"incomplete\") return 127;\n\t\t\t\t\t\tif (toolOutput.status === \"interpreting\") return void 0;\n\t\t\t\t\t\tif (toolOutput.status === \"failed\") return 1;\n\t\t\t\t\t\treturn void 0;\n\t\t\t\t\t});\n\t\t\t\t\tfor (const output of toolOutput.outputs) if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(output, \"logs\")) {\n\t\t\t\t\t\tyield {\n\t\t\t\t\t\t\ttype: \"server_tool_call_result\",\n\t\t\t\t\t\t\ttoolCallId: toolOutput.id ?? \"\",\n\t\t\t\t\t\t\tstatus: \"success\",\n\t\t\t\t\t\t\toutput: {\n\t\t\t\t\t\t\t\ttype: \"code_interpreter_output\",\n\t\t\t\t\t\t\t\treturnCode: returnCode ?? 0,\n\t\t\t\t\t\t\t\tstderr: [0, void 0].includes(returnCode) ? void 0 : String(output.logs),\n\t\t\t\t\t\t\t\tstdout: [0, void 0].includes(returnCode) ? String(output.logs) : void 0\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(toolOutput, \"mcp_call\")) {\n\t\t\t\tyield {\n\t\t\t\t\tid: toolOutput.id,\n\t\t\t\t\ttype: \"server_tool_call\",\n\t\t\t\t\tname: \"mcp_call\",\n\t\t\t\t\targs: toolOutput.input\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(toolOutput, \"mcp_list_tools\")) {\n\t\t\t\tyield {\n\t\t\t\t\tid: toolOutput.id,\n\t\t\t\t\ttype: \"server_tool_call\",\n\t\t\t\t\tname: \"mcp_list_tools\",\n\t\t\t\t\targs: toolOutput.input\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(toolOutput, \"mcp_approval_request\")) {\n\t\t\t\tyield {\n\t\t\t\t\ttype: \"non_standard\",\n\t\t\t\t\tvalue: toolOutput\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t} else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isContentBlock)(toolOutput, \"image_generation_call\")) {\n\t\t\t\tyield {\n\t\t\t\t\ttype: \"non_standard\",\n\t\t\t\t\tvalue: toolOutput\n\t\t\t\t};\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._isObject)(toolOutput)) yield {\n\t\t\t\ttype: \"non_standard\",\n\t\t\t\tvalue: toolOutput\n\t\t\t};\n\t\t}\n\t}\n\treturn Array.from(iterateContent());\n}\n/**\n* Converts a ChatOpenAIResponses message chunk to an array of v1 standard content blocks.\n*\n* This function processes an AI message chunk containing OpenAI-specific content blocks\n* and converts them to the standardized v1 content block format. It handles both the\n* regular message content and tool call chunks that are specific to streaming responses.\n*\n* @param message - The AI message chunk containing OpenAI-formatted content blocks\n* @returns Array of content blocks in v1 standard format\n*\n* @example\n* ```typescript\n* const messageChunk = new AIMessageChunk({\n*   content: [{ type: \"text\", text: \"Hello\" }],\n*   tool_call_chunks: [\n*     { id: \"call_123\", name: \"calculator\", args: '{\"a\": 1' }\n*   ]\n* });\n*\n* const standardBlocks = convertToV1FromResponsesChunk(messageChunk);\n* // Returns:\n* // [\n* //   { type: \"text\", text: \"Hello\" },\n* //   { type: \"tool_call_chunk\", id: \"call_123\", name: \"calculator\", args: '{\"a\": 1' }\n* // ]\n* ```\n*/\nfunction convertToV1FromResponsesChunk(message) {\n\tfunction* iterateContent() {\n\t\tyield* convertToV1FromResponses(message);\n\t\tfor (const toolCallChunk of message.tool_call_chunks ?? []) yield {\n\t\t\ttype: \"tool_call_chunk\",\n\t\t\tid: toolCallChunk.id,\n\t\t\tname: toolCallChunk.name,\n\t\t\targs: toolCallChunk.args\n\t\t};\n\t}\n\treturn Array.from(iterateContent());\n}\nconst ChatOpenAITranslator = {\n\ttranslateContent: (message) => {\n\t\tif (typeof message.content === \"string\") return convertToV1FromChatCompletions(message);\n\t\treturn convertToV1FromResponses(message);\n\t},\n\ttranslateContentChunk: (message) => {\n\t\tif (typeof message.content === \"string\") return convertToV1FromChatCompletionsChunk(message);\n\t\treturn convertToV1FromResponsesChunk(message);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=openai.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvYmxvY2tfdHJhbnNsYXRvcnMvb3BlbmFpLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBbUY7QUFDTDs7QUFFOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLG1DQUFtQztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSw2QkFBNkI7QUFDbkMsTUFBTSxnQ0FBZ0M7QUFDdEM7QUFDQTtBQUNBLE1BQU0sNENBQTRDO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDZCQUE2QjtBQUN0QyxTQUFTLHFEQUFxRDtBQUM5RCxTQUFTLCtEQUErRDtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw2QkFBNkI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsTUFBTSx3Q0FBd0M7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMscUNBQXFDO0FBQzlDLFNBQVMsMkRBQTJEO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxtQ0FBbUM7QUFDekMsTUFBTSxnQ0FBZ0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsbUNBQW1DO0FBQzVDLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLDJEQUFpQiw4QkFBOEIsd0VBQThCO0FBQzlHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHFDQUFxQztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLDJCQUEyQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isb0RBQW9EO0FBQ3BFLG1CQUFtQix1Q0FBdUMsY0FBYztBQUN4RTtBQUNBLG1CQUFtQixZQUFZLGtDQUFrQyxHQUFHO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDZCQUE2QjtBQUNuRDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDBEQUEwRDtBQUNuRSxTQUFTLG9EQUFvRDtBQUM3RCxTQUFTLDBEQUEwRCxjQUFjO0FBQ2pGLFNBQVMsdURBQXVEO0FBQ2hFLFNBQVMsNENBQTRDLGlFQUFpRTtBQUN0SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxvREFBUywwQ0FBMEMsbURBQVE7QUFDakU7QUFDQSxRQUFRLG9EQUFTLFVBQVUsb0RBQVMsdUJBQXVCLElBQUksRUFBRSxVQUFVO0FBQzNFO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsbUNBQW1DLDBEQUFlO0FBQ2xELFdBQVcsNEJBQTRCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sb0RBQVMsK0JBQStCLG1EQUFRO0FBQ3RELE9BQU8sMERBQWU7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLEtBQUssU0FBUywwREFBZTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsS0FBSyxTQUFTLDBEQUFlO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLFNBQVMsMERBQWU7QUFDN0IsUUFBUSxvREFBUztBQUNqQjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxRQUFRLG1EQUFRO0FBQ2hCLHdCQUF3QiwrQ0FBSTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sa0RBQWtELDBEQUFlO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssU0FBUywwREFBZTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssU0FBUywwREFBZTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssU0FBUywwREFBZTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxTQUFTLDBEQUFlO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sb0RBQVM7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiw2QkFBNkI7QUFDN0M7QUFDQSxRQUFRLDRDQUE0QztBQUNwRDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsNkJBQTZCO0FBQ3RDLFNBQVMscUVBQXFFO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDcUU7QUFDckUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9ibG9ja190cmFuc2xhdG9ycy9vcGVuYWkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX2lzQXJyYXksIF9pc0NvbnRlbnRCbG9jaywgX2lzT2JqZWN0LCBfaXNTdHJpbmcsIGlpZmUgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuaW1wb3J0IHsgY29udmVydFRvVjFGcm9tT3BlbkFJRGF0YUJsb2NrLCBpc09wZW5BSURhdGFCbG9jayB9IGZyb20gXCIuL2RhdGEuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9tZXNzYWdlcy9ibG9ja190cmFuc2xhdG9ycy9vcGVuYWkudHNcbi8qKlxuKiBDb252ZXJ0cyBhIENoYXRPcGVuQUlDb21wbGV0aW9ucyBtZXNzYWdlIHRvIGFuIGFycmF5IG9mIHYxIHN0YW5kYXJkIGNvbnRlbnQgYmxvY2tzLlxuKlxuKiBUaGlzIGZ1bmN0aW9uIHByb2Nlc3NlcyBhbiBBSSBtZXNzYWdlIGZyb20gQ2hhdE9wZW5BSUNvbXBsZXRpb25zIEFQSSBmb3JtYXRcbiogYW5kIGNvbnZlcnRzIGl0IHRvIHRoZSBzdGFuZGFyZGl6ZWQgdjEgY29udGVudCBibG9jayBmb3JtYXQuIEl0IGhhbmRsZXMgYm90aFxuKiBzdHJpbmcgY29udGVudCBhbmQgc3RydWN0dXJlZCBjb250ZW50IGJsb2NrcywgYXMgd2VsbCBhcyB0b29sIGNhbGxzLlxuKlxuKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBBSSBtZXNzYWdlIGNvbnRhaW5pbmcgQ2hhdE9wZW5BSUNvbXBsZXRpb25zIGZvcm1hdHRlZCBjb250ZW50XG4qIEByZXR1cm5zIEFycmF5IG9mIGNvbnRlbnQgYmxvY2tzIGluIHYxIHN0YW5kYXJkIGZvcm1hdFxuKlxuKiBAZXhhbXBsZVxuKiBgYGB0eXBlc2NyaXB0XG4qIGNvbnN0IG1lc3NhZ2UgPSBuZXcgQUlNZXNzYWdlKFwiSGVsbG8gd29ybGRcIik7XG4qIGNvbnN0IHN0YW5kYXJkQmxvY2tzID0gY29udmVydFRvVjFGcm9tQ2hhdENvbXBsZXRpb25zKG1lc3NhZ2UpO1xuKiAvLyBSZXR1cm5zOiBbeyB0eXBlOiBcInRleHRcIiwgdGV4dDogXCJIZWxsbyB3b3JsZFwiIH1dXG4qIGBgYFxuKlxuKiBAZXhhbXBsZVxuKiBgYGB0eXBlc2NyaXB0XG4qIGNvbnN0IG1lc3NhZ2UgPSBuZXcgQUlNZXNzYWdlKFtcbiogICB7IHR5cGU6IFwidGV4dFwiLCB0ZXh0OiBcIkhlbGxvXCIgfSxcbiogICB7IHR5cGU6IFwiaW1hZ2VfdXJsXCIsIGltYWdlX3VybDogeyB1cmw6IFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9pbWFnZS5wbmdcIiB9IH1cbiogXSk7XG4qIG1lc3NhZ2UudG9vbF9jYWxscyA9IFtcbiogICB7IGlkOiBcImNhbGxfMTIzXCIsIG5hbWU6IFwiY2FsY3VsYXRvclwiLCBhcmdzOiB7IGE6IDEsIGI6IDIgfSB9XG4qIF07XG4qXG4qIGNvbnN0IHN0YW5kYXJkQmxvY2tzID0gY29udmVydFRvVjFGcm9tQ2hhdENvbXBsZXRpb25zKG1lc3NhZ2UpO1xuKiAvLyBSZXR1cm5zOlxuKiAvLyBbXG4qIC8vICAgeyB0eXBlOiBcInRleHRcIiwgdGV4dDogXCJIZWxsb1wiIH0sXG4qIC8vICAgeyB0eXBlOiBcImltYWdlXCIsIHVybDogXCJodHRwczovL2V4YW1wbGUuY29tL2ltYWdlLnBuZ1wiIH0sXG4qIC8vICAgeyB0eXBlOiBcInRvb2xfY2FsbFwiLCBpZDogXCJjYWxsXzEyM1wiLCBuYW1lOiBcImNhbGN1bGF0b3JcIiwgYXJnczogeyBhOiAxLCBiOiAyIH0gfVxuKiAvLyBdXG4qIGBgYFxuKi9cbmZ1bmN0aW9uIGNvbnZlcnRUb1YxRnJvbUNoYXRDb21wbGV0aW9ucyhtZXNzYWdlKSB7XG5cdGNvbnN0IGJsb2NrcyA9IFtdO1xuXHRpZiAodHlwZW9mIG1lc3NhZ2UuY29udGVudCA9PT0gXCJzdHJpbmdcIikgYmxvY2tzLnB1c2goe1xuXHRcdHR5cGU6IFwidGV4dFwiLFxuXHRcdHRleHQ6IG1lc3NhZ2UuY29udGVudFxuXHR9KTtcblx0ZWxzZSBibG9ja3MucHVzaCguLi5jb252ZXJ0VG9WMUZyb21DaGF0Q29tcGxldGlvbnNJbnB1dChtZXNzYWdlLmNvbnRlbnQpKTtcblx0Zm9yIChjb25zdCB0b29sQ2FsbCBvZiBtZXNzYWdlLnRvb2xfY2FsbHMgPz8gW10pIGJsb2Nrcy5wdXNoKHtcblx0XHR0eXBlOiBcInRvb2xfY2FsbFwiLFxuXHRcdGlkOiB0b29sQ2FsbC5pZCxcblx0XHRuYW1lOiB0b29sQ2FsbC5uYW1lLFxuXHRcdGFyZ3M6IHRvb2xDYWxsLmFyZ3Ncblx0fSk7XG5cdHJldHVybiBibG9ja3M7XG59XG4vKipcbiogQ29udmVydHMgYSBDaGF0T3BlbkFJQ29tcGxldGlvbnMgbWVzc2FnZSBjaHVuayB0byBhbiBhcnJheSBvZiB2MSBzdGFuZGFyZCBjb250ZW50IGJsb2Nrcy5cbipcbiogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgYW4gQUkgbWVzc2FnZSBjaHVuayBmcm9tIE9wZW5BSSdzIGNoYXQgY29tcGxldGlvbnMgQVBJIGFuZCBjb252ZXJ0c1xuKiBpdCB0byB0aGUgc3RhbmRhcmRpemVkIHYxIGNvbnRlbnQgYmxvY2sgZm9ybWF0LiBJdCBoYW5kbGVzIGJvdGggc3RyaW5nIGFuZCBhcnJheSBjb250ZW50LFxuKiBhcyB3ZWxsIGFzIHRvb2wgY2FsbHMgdGhhdCBtYXkgYmUgcHJlc2VudCBpbiB0aGUgY2h1bmsuXG4qXG4qIEBwYXJhbSBtZXNzYWdlIC0gVGhlIEFJIG1lc3NhZ2UgY2h1bmsgY29udGFpbmluZyBPcGVuQUktZm9ybWF0dGVkIGNvbnRlbnQgYmxvY2tzXG4qIEByZXR1cm5zIEFycmF5IG9mIGNvbnRlbnQgYmxvY2tzIGluIHYxIHN0YW5kYXJkIGZvcm1hdFxuKlxuKiBAZXhhbXBsZVxuKiBgYGB0eXBlc2NyaXB0XG4qIGNvbnN0IGNodW5rID0gbmV3IEFJTWVzc2FnZShcIkhlbGxvXCIpO1xuKiBjb25zdCBzdGFuZGFyZEJsb2NrcyA9IGNvbnZlcnRUb1YxRnJvbUNoYXRDb21wbGV0aW9uc0NodW5rKGNodW5rKTtcbiogLy8gUmV0dXJuczogW3sgdHlwZTogXCJ0ZXh0XCIsIHRleHQ6IFwiSGVsbG9cIiB9XVxuKiBgYGBcbipcbiogQGV4YW1wbGVcbiogYGBgdHlwZXNjcmlwdFxuKiBjb25zdCBjaHVuayA9IG5ldyBBSU1lc3NhZ2UoW1xuKiAgIHsgdHlwZTogXCJ0ZXh0XCIsIHRleHQ6IFwiUHJvY2Vzc2luZy4uLlwiIH1cbiogXSk7XG4qIGNodW5rLnRvb2xfY2FsbHMgPSBbXG4qICAgeyBpZDogXCJjYWxsXzQ1NlwiLCBuYW1lOiBcInNlYXJjaFwiLCBhcmdzOiB7IHF1ZXJ5OiBcInRlc3RcIiB9IH1cbiogXTtcbipcbiogY29uc3Qgc3RhbmRhcmRCbG9ja3MgPSBjb252ZXJ0VG9WMUZyb21DaGF0Q29tcGxldGlvbnNDaHVuayhjaHVuayk7XG4qIC8vIFJldHVybnM6XG4qIC8vIFtcbiogLy8gICB7IHR5cGU6IFwidGV4dFwiLCB0ZXh0OiBcIlByb2Nlc3NpbmcuLi5cIiB9LFxuKiAvLyAgIHsgdHlwZTogXCJ0b29sX2NhbGxcIiwgaWQ6IFwiY2FsbF80NTZcIiwgbmFtZTogXCJzZWFyY2hcIiwgYXJnczogeyBxdWVyeTogXCJ0ZXN0XCIgfSB9XG4qIC8vIF1cbiogYGBgXG4qL1xuZnVuY3Rpb24gY29udmVydFRvVjFGcm9tQ2hhdENvbXBsZXRpb25zQ2h1bmsobWVzc2FnZSkge1xuXHRjb25zdCBibG9ja3MgPSBbXTtcblx0aWYgKHR5cGVvZiBtZXNzYWdlLmNvbnRlbnQgPT09IFwic3RyaW5nXCIpIGJsb2Nrcy5wdXNoKHtcblx0XHR0eXBlOiBcInRleHRcIixcblx0XHR0ZXh0OiBtZXNzYWdlLmNvbnRlbnRcblx0fSk7XG5cdGVsc2UgYmxvY2tzLnB1c2goLi4uY29udmVydFRvVjFGcm9tQ2hhdENvbXBsZXRpb25zSW5wdXQobWVzc2FnZS5jb250ZW50KSk7XG5cdGZvciAoY29uc3QgdG9vbENhbGwgb2YgbWVzc2FnZS50b29sX2NhbGxzID8/IFtdKSBibG9ja3MucHVzaCh7XG5cdFx0dHlwZTogXCJ0b29sX2NhbGxcIixcblx0XHRpZDogdG9vbENhbGwuaWQsXG5cdFx0bmFtZTogdG9vbENhbGwubmFtZSxcblx0XHRhcmdzOiB0b29sQ2FsbC5hcmdzXG5cdH0pO1xuXHRyZXR1cm4gYmxvY2tzO1xufVxuLyoqXG4qIENvbnZlcnRzIGFuIGFycmF5IG9mIENoYXRPcGVuQUlDb21wbGV0aW9ucyBjb250ZW50IGJsb2NrcyB0byB2MSBzdGFuZGFyZCBjb250ZW50IGJsb2Nrcy5cbipcbiogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgY29udGVudCBibG9ja3MgZnJvbSBPcGVuQUkncyBDaGF0IENvbXBsZXRpb25zIEFQSSBmb3JtYXRcbiogYW5kIGNvbnZlcnRzIHRoZW0gdG8gdGhlIHN0YW5kYXJkaXplZCB2MSBjb250ZW50IGJsb2NrIGZvcm1hdC4gSXQgaGFuZGxlcyBib3RoXG4qIE9wZW5BSS1zcGVjaWZpYyBkYXRhIGJsb2NrcyAod2hpY2ggcmVxdWlyZSBjb252ZXJzaW9uKSBhbmQgc3RhbmRhcmQgYmxvY2tzXG4qICh3aGljaCBhcmUgcGFzc2VkIHRocm91Z2ggd2l0aCB0eXBlIGFzc2VydGlvbikuXG4qXG4qIEBwYXJhbSBibG9ja3MgLSBBcnJheSBvZiBjb250ZW50IGJsb2NrcyBpbiBDaGF0T3BlbkFJQ29tcGxldGlvbnMgZm9ybWF0XG4qIEByZXR1cm5zIEFycmF5IG9mIGNvbnRlbnQgYmxvY2tzIGluIHYxIHN0YW5kYXJkIGZvcm1hdFxuKlxuKiBAZXhhbXBsZVxuKiBgYGB0eXBlc2NyaXB0XG4qIGNvbnN0IG9wZW5haUJsb2NrcyA9IFtcbiogICB7IHR5cGU6IFwidGV4dFwiLCB0ZXh0OiBcIkhlbGxvIHdvcmxkXCIgfSxcbiogICB7IHR5cGU6IFwiaW1hZ2VfdXJsXCIsIGltYWdlX3VybDogeyB1cmw6IFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9pbWFnZS5wbmdcIiB9IH1cbiogXTtcbipcbiogY29uc3Qgc3RhbmRhcmRCbG9ja3MgPSBjb252ZXJ0VG9WMUZyb21DaGF0Q29tcGxldGlvbnNJbnB1dChvcGVuYWlCbG9ja3MpO1xuKiAvLyBSZXR1cm5zOlxuKiAvLyBbXG4qIC8vICAgeyB0eXBlOiBcInRleHRcIiwgdGV4dDogXCJIZWxsbyB3b3JsZFwiIH0sXG4qIC8vICAgeyB0eXBlOiBcImltYWdlXCIsIHVybDogXCJodHRwczovL2V4YW1wbGUuY29tL2ltYWdlLnBuZ1wiIH1cbiogLy8gXVxuKiBgYGBcbiovXG5mdW5jdGlvbiBjb252ZXJ0VG9WMUZyb21DaGF0Q29tcGxldGlvbnNJbnB1dChibG9ja3MpIHtcblx0Y29uc3QgY29udmVydGVkQmxvY2tzID0gW107XG5cdGZvciAoY29uc3QgYmxvY2sgb2YgYmxvY2tzKSBpZiAoaXNPcGVuQUlEYXRhQmxvY2soYmxvY2spKSBjb252ZXJ0ZWRCbG9ja3MucHVzaChjb252ZXJ0VG9WMUZyb21PcGVuQUlEYXRhQmxvY2soYmxvY2spKTtcblx0ZWxzZSBjb252ZXJ0ZWRCbG9ja3MucHVzaChibG9jayk7XG5cdHJldHVybiBjb252ZXJ0ZWRCbG9ja3M7XG59XG5mdW5jdGlvbiBjb252ZXJ0UmVzcG9uc2VzQW5ub3RhdGlvbihhbm5vdGF0aW9uKSB7XG5cdGlmIChhbm5vdGF0aW9uLnR5cGUgPT09IFwidXJsX2NpdGF0aW9uXCIpIHtcblx0XHRjb25zdCB7IHVybCwgdGl0bGUsIHN0YXJ0X2luZGV4LCBlbmRfaW5kZXggfSA9IGFubm90YXRpb247XG5cdFx0cmV0dXJuIHtcblx0XHRcdHR5cGU6IFwiY2l0YXRpb25cIixcblx0XHRcdHVybCxcblx0XHRcdHRpdGxlLFxuXHRcdFx0c3RhcnRJbmRleDogc3RhcnRfaW5kZXgsXG5cdFx0XHRlbmRJbmRleDogZW5kX2luZGV4XG5cdFx0fTtcblx0fVxuXHRpZiAoYW5ub3RhdGlvbi50eXBlID09PSBcImZpbGVfY2l0YXRpb25cIikge1xuXHRcdGNvbnN0IHsgZmlsZV9pZCwgZmlsZW5hbWUsIGluZGV4IH0gPSBhbm5vdGF0aW9uO1xuXHRcdHJldHVybiB7XG5cdFx0XHR0eXBlOiBcImNpdGF0aW9uXCIsXG5cdFx0XHR0aXRsZTogZmlsZW5hbWUsXG5cdFx0XHRzdGFydEluZGV4OiBpbmRleCxcblx0XHRcdGVuZEluZGV4OiBpbmRleCxcblx0XHRcdGZpbGVJZDogZmlsZV9pZFxuXHRcdH07XG5cdH1cblx0cmV0dXJuIGFubm90YXRpb247XG59XG4vKipcbiogQ29udmVydHMgYSBDaGF0T3BlbkFJUmVzcG9uc2VzIG1lc3NhZ2UgdG8gYW4gYXJyYXkgb2YgdjEgc3RhbmRhcmQgY29udGVudCBibG9ja3MuXG4qXG4qIFRoaXMgZnVuY3Rpb24gcHJvY2Vzc2VzIGFuIEFJIG1lc3NhZ2UgY29udGFpbmluZyBPcGVuQUkgUmVzcG9uc2VzLXNwZWNpZmljIGNvbnRlbnQgYmxvY2tzXG4qIGFuZCBjb252ZXJ0cyB0aGVtIHRvIHRoZSBzdGFuZGFyZGl6ZWQgdjEgY29udGVudCBibG9jayBmb3JtYXQuIEl0IGhhbmRsZXMgcmVhc29uaW5nIHN1bW1hcmllcyxcbiogdGV4dCBjb250ZW50IHdpdGggYW5ub3RhdGlvbnMsIHRvb2wgY2FsbHMsIGFuZCB2YXJpb3VzIHRvb2wgb3V0cHV0cyBpbmNsdWRpbmcgY29kZSBpbnRlcnByZXRlcixcbiogd2ViIHNlYXJjaCwgZmlsZSBzZWFyY2gsIGNvbXB1dGVyIGNhbGxzLCBhbmQgTUNQLXJlbGF0ZWQgYmxvY2tzLlxuKlxuKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBBSSBtZXNzYWdlIGNvbnRhaW5pbmcgT3BlbkFJIFJlc3BvbnNlcy1mb3JtYXR0ZWQgY29udGVudCBibG9ja3NcbiogQHJldHVybnMgQXJyYXkgb2YgY29udGVudCBibG9ja3MgaW4gdjEgc3RhbmRhcmQgZm9ybWF0XG4qXG4qIEBleGFtcGxlXG4qIGBgYHR5cGVzY3JpcHRcbiogY29uc3QgbWVzc2FnZSA9IG5ldyBBSU1lc3NhZ2Uoe1xuKiAgIGNvbnRlbnQ6IFt7IHR5cGU6IFwidGV4dFwiLCB0ZXh0OiBcIkhlbGxvIHdvcmxkXCIsIGFubm90YXRpb25zOiBbXSB9XSxcbiogICB0b29sX2NhbGxzOiBbeyBpZDogXCIxMjNcIiwgbmFtZTogXCJjYWxjdWxhdG9yXCIsIGFyZ3M6IHsgYTogMSwgYjogMiB9IH1dLFxuKiAgIGFkZGl0aW9uYWxfa3dhcmdzOiB7XG4qICAgICByZWFzb25pbmc6IHsgc3VtbWFyeTogW3sgdGV4dDogXCJMZXQgbWUgY2FsY3VsYXRlIHRoaXMuLi5cIiB9XSB9LFxuKiAgICAgdG9vbF9vdXRwdXRzOiBbXG4qICAgICAgIHtcbiogICAgICAgICB0eXBlOiBcImNvZGVfaW50ZXJwcmV0ZXJfY2FsbFwiLFxuKiAgICAgICAgIGNvZGU6IFwicHJpbnQoJ2hlbGxvJylcIixcbiogICAgICAgICBvdXRwdXRzOiBbeyB0eXBlOiBcImxvZ3NcIiwgbG9nczogXCJoZWxsb1wiIH1dXG4qICAgICAgIH1cbiogICAgIF1cbiogICB9XG4qIH0pO1xuKlxuKiBjb25zdCBzdGFuZGFyZEJsb2NrcyA9IGNvbnZlcnRUb1YxRnJvbVJlc3BvbnNlcyhtZXNzYWdlKTtcbiogLy8gUmV0dXJuczpcbiogLy8gW1xuKiAvLyAgIHsgdHlwZTogXCJyZWFzb25pbmdcIiwgcmVhc29uaW5nOiBcIkxldCBtZSBjYWxjdWxhdGUgdGhpcy4uLlwiIH0sXG4qIC8vICAgeyB0eXBlOiBcInRleHRcIiwgdGV4dDogXCJIZWxsbyB3b3JsZFwiLCBhbm5vdGF0aW9uczogW10gfSxcbiogLy8gICB7IHR5cGU6IFwidG9vbF9jYWxsXCIsIGlkOiBcIjEyM1wiLCBuYW1lOiBcImNhbGN1bGF0b3JcIiwgYXJnczogeyBhOiAxLCBiOiAyIH0gfSxcbiogLy8gICB7IHR5cGU6IFwiY29kZV9pbnRlcnByZXRlcl9jYWxsXCIsIGNvZGU6IFwicHJpbnQoJ2hlbGxvJylcIiB9LFxuKiAvLyAgIHsgdHlwZTogXCJjb2RlX2ludGVycHJldGVyX3Jlc3VsdFwiLCBvdXRwdXQ6IFt7IHR5cGU6IFwiY29kZV9pbnRlcnByZXRlcl9vdXRwdXRcIiwgcmV0dXJuQ29kZTogMCwgc3Rkb3V0OiBcImhlbGxvXCIgfV0gfVxuKiAvLyBdXG4qIGBgYFxuKi9cbmZ1bmN0aW9uIGNvbnZlcnRUb1YxRnJvbVJlc3BvbnNlcyhtZXNzYWdlKSB7XG5cdGZ1bmN0aW9uKiBpdGVyYXRlQ29udGVudCgpIHtcblx0XHRpZiAoX2lzT2JqZWN0KG1lc3NhZ2UuYWRkaXRpb25hbF9rd2FyZ3M/LnJlYXNvbmluZykgJiYgX2lzQXJyYXkobWVzc2FnZS5hZGRpdGlvbmFsX2t3YXJncy5yZWFzb25pbmcuc3VtbWFyeSkpIHtcblx0XHRcdGNvbnN0IHN1bW1hcnkgPSBtZXNzYWdlLmFkZGl0aW9uYWxfa3dhcmdzLnJlYXNvbmluZy5zdW1tYXJ5LnJlZHVjZSgoYWNjLCBpdGVtKSA9PiB7XG5cdFx0XHRcdGlmIChfaXNPYmplY3QoaXRlbSkgJiYgX2lzU3RyaW5nKGl0ZW0udGV4dCkpIHJldHVybiBgJHthY2N9JHtpdGVtLnRleHR9YDtcblx0XHRcdFx0cmV0dXJuIGFjYztcblx0XHRcdH0sIFwiXCIpO1xuXHRcdFx0eWllbGQge1xuXHRcdFx0XHR0eXBlOiBcInJlYXNvbmluZ1wiLFxuXHRcdFx0XHRyZWFzb25pbmc6IHN1bW1hcnlcblx0XHRcdH07XG5cdFx0fVxuXHRcdGNvbnN0IGNvbnRlbnQgPSB0eXBlb2YgbWVzc2FnZS5jb250ZW50ID09PSBcInN0cmluZ1wiID8gW3tcblx0XHRcdHR5cGU6IFwidGV4dFwiLFxuXHRcdFx0dGV4dDogbWVzc2FnZS5jb250ZW50XG5cdFx0fV0gOiBtZXNzYWdlLmNvbnRlbnQ7XG5cdFx0Zm9yIChjb25zdCBibG9jayBvZiBjb250ZW50KSBpZiAoX2lzQ29udGVudEJsb2NrKGJsb2NrLCBcInRleHRcIikpIHtcblx0XHRcdGNvbnN0IHsgdGV4dCwgYW5ub3RhdGlvbnMsLi4ucmVzdCB9ID0gYmxvY2s7XG5cdFx0XHRpZiAoQXJyYXkuaXNBcnJheShhbm5vdGF0aW9ucykpIHlpZWxkIHtcblx0XHRcdFx0Li4ucmVzdCxcblx0XHRcdFx0dHlwZTogXCJ0ZXh0XCIsXG5cdFx0XHRcdHRleHQ6IFN0cmluZyh0ZXh0KSxcblx0XHRcdFx0YW5ub3RhdGlvbnM6IGFubm90YXRpb25zLm1hcChjb252ZXJ0UmVzcG9uc2VzQW5ub3RhdGlvbilcblx0XHRcdH07XG5cdFx0XHRlbHNlIHlpZWxkIHtcblx0XHRcdFx0Li4ucmVzdCxcblx0XHRcdFx0dHlwZTogXCJ0ZXh0XCIsXG5cdFx0XHRcdHRleHQ6IFN0cmluZyh0ZXh0KVxuXHRcdFx0fTtcblx0XHR9XG5cdFx0Zm9yIChjb25zdCB0b29sQ2FsbCBvZiBtZXNzYWdlLnRvb2xfY2FsbHMgPz8gW10pIHlpZWxkIHtcblx0XHRcdHR5cGU6IFwidG9vbF9jYWxsXCIsXG5cdFx0XHRpZDogdG9vbENhbGwuaWQsXG5cdFx0XHRuYW1lOiB0b29sQ2FsbC5uYW1lLFxuXHRcdFx0YXJnczogdG9vbENhbGwuYXJnc1xuXHRcdH07XG5cdFx0aWYgKF9pc09iamVjdChtZXNzYWdlLmFkZGl0aW9uYWxfa3dhcmdzKSAmJiBfaXNBcnJheShtZXNzYWdlLmFkZGl0aW9uYWxfa3dhcmdzLnRvb2xfb3V0cHV0cykpIGZvciAoY29uc3QgdG9vbE91dHB1dCBvZiBtZXNzYWdlLmFkZGl0aW9uYWxfa3dhcmdzLnRvb2xfb3V0cHV0cykge1xuXHRcdFx0aWYgKF9pc0NvbnRlbnRCbG9jayh0b29sT3V0cHV0LCBcIndlYl9zZWFyY2hfY2FsbFwiKSkge1xuXHRcdFx0XHR5aWVsZCB7XG5cdFx0XHRcdFx0aWQ6IHRvb2xPdXRwdXQuaWQsXG5cdFx0XHRcdFx0dHlwZTogXCJzZXJ2ZXJfdG9vbF9jYWxsXCIsXG5cdFx0XHRcdFx0bmFtZTogXCJ3ZWJfc2VhcmNoXCIsXG5cdFx0XHRcdFx0YXJnczogeyBxdWVyeTogdG9vbE91dHB1dC5xdWVyeSB9XG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fSBlbHNlIGlmIChfaXNDb250ZW50QmxvY2sodG9vbE91dHB1dCwgXCJmaWxlX3NlYXJjaF9jYWxsXCIpKSB7XG5cdFx0XHRcdHlpZWxkIHtcblx0XHRcdFx0XHRpZDogdG9vbE91dHB1dC5pZCxcblx0XHRcdFx0XHR0eXBlOiBcInNlcnZlcl90b29sX2NhbGxcIixcblx0XHRcdFx0XHRuYW1lOiBcImZpbGVfc2VhcmNoXCIsXG5cdFx0XHRcdFx0YXJnczogeyBxdWVyeTogdG9vbE91dHB1dC5xdWVyeSB9XG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fSBlbHNlIGlmIChfaXNDb250ZW50QmxvY2sodG9vbE91dHB1dCwgXCJjb21wdXRlcl9jYWxsXCIpKSB7XG5cdFx0XHRcdHlpZWxkIHtcblx0XHRcdFx0XHR0eXBlOiBcIm5vbl9zdGFuZGFyZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiB0b29sT3V0cHV0XG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fSBlbHNlIGlmIChfaXNDb250ZW50QmxvY2sodG9vbE91dHB1dCwgXCJjb2RlX2ludGVycHJldGVyX2NhbGxcIikpIHtcblx0XHRcdFx0aWYgKF9pc1N0cmluZyh0b29sT3V0cHV0LmNvZGUpKSB5aWVsZCB7XG5cdFx0XHRcdFx0aWQ6IHRvb2xPdXRwdXQuaWQsXG5cdFx0XHRcdFx0dHlwZTogXCJzZXJ2ZXJfdG9vbF9jYWxsXCIsXG5cdFx0XHRcdFx0bmFtZTogXCJjb2RlX2ludGVycHJldGVyXCIsXG5cdFx0XHRcdFx0YXJnczogeyBjb2RlOiB0b29sT3V0cHV0LmNvZGUgfVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRpZiAoX2lzQXJyYXkodG9vbE91dHB1dC5vdXRwdXRzKSkge1xuXHRcdFx0XHRcdGNvbnN0IHJldHVybkNvZGUgPSBpaWZlKCgpID0+IHtcblx0XHRcdFx0XHRcdGlmICh0b29sT3V0cHV0LnN0YXR1cyA9PT0gXCJpbl9wcm9ncmVzc1wiKSByZXR1cm4gdm9pZCAwO1xuXHRcdFx0XHRcdFx0aWYgKHRvb2xPdXRwdXQuc3RhdHVzID09PSBcImNvbXBsZXRlZFwiKSByZXR1cm4gMDtcblx0XHRcdFx0XHRcdGlmICh0b29sT3V0cHV0LnN0YXR1cyA9PT0gXCJpbmNvbXBsZXRlXCIpIHJldHVybiAxMjc7XG5cdFx0XHRcdFx0XHRpZiAodG9vbE91dHB1dC5zdGF0dXMgPT09IFwiaW50ZXJwcmV0aW5nXCIpIHJldHVybiB2b2lkIDA7XG5cdFx0XHRcdFx0XHRpZiAodG9vbE91dHB1dC5zdGF0dXMgPT09IFwiZmFpbGVkXCIpIHJldHVybiAxO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHZvaWQgMDtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IG91dHB1dCBvZiB0b29sT3V0cHV0Lm91dHB1dHMpIGlmIChfaXNDb250ZW50QmxvY2sob3V0cHV0LCBcImxvZ3NcIikpIHtcblx0XHRcdFx0XHRcdHlpZWxkIHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJzZXJ2ZXJfdG9vbF9jYWxsX3Jlc3VsdFwiLFxuXHRcdFx0XHRcdFx0XHR0b29sQ2FsbElkOiB0b29sT3V0cHV0LmlkID8/IFwiXCIsXG5cdFx0XHRcdFx0XHRcdHN0YXR1czogXCJzdWNjZXNzXCIsXG5cdFx0XHRcdFx0XHRcdG91dHB1dDoge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwiY29kZV9pbnRlcnByZXRlcl9vdXRwdXRcIixcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm5Db2RlOiByZXR1cm5Db2RlID8/IDAsXG5cdFx0XHRcdFx0XHRcdFx0c3RkZXJyOiBbMCwgdm9pZCAwXS5pbmNsdWRlcyhyZXR1cm5Db2RlKSA/IHZvaWQgMCA6IFN0cmluZyhvdXRwdXQubG9ncyksXG5cdFx0XHRcdFx0XHRcdFx0c3Rkb3V0OiBbMCwgdm9pZCAwXS5pbmNsdWRlcyhyZXR1cm5Db2RlKSA/IFN0cmluZyhvdXRwdXQubG9ncykgOiB2b2lkIDBcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH0gZWxzZSBpZiAoX2lzQ29udGVudEJsb2NrKHRvb2xPdXRwdXQsIFwibWNwX2NhbGxcIikpIHtcblx0XHRcdFx0eWllbGQge1xuXHRcdFx0XHRcdGlkOiB0b29sT3V0cHV0LmlkLFxuXHRcdFx0XHRcdHR5cGU6IFwic2VydmVyX3Rvb2xfY2FsbFwiLFxuXHRcdFx0XHRcdG5hbWU6IFwibWNwX2NhbGxcIixcblx0XHRcdFx0XHRhcmdzOiB0b29sT3V0cHV0LmlucHV0XG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fSBlbHNlIGlmIChfaXNDb250ZW50QmxvY2sodG9vbE91dHB1dCwgXCJtY3BfbGlzdF90b29sc1wiKSkge1xuXHRcdFx0XHR5aWVsZCB7XG5cdFx0XHRcdFx0aWQ6IHRvb2xPdXRwdXQuaWQsXG5cdFx0XHRcdFx0dHlwZTogXCJzZXJ2ZXJfdG9vbF9jYWxsXCIsXG5cdFx0XHRcdFx0bmFtZTogXCJtY3BfbGlzdF90b29sc1wiLFxuXHRcdFx0XHRcdGFyZ3M6IHRvb2xPdXRwdXQuaW5wdXRcblx0XHRcdFx0fTtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9IGVsc2UgaWYgKF9pc0NvbnRlbnRCbG9jayh0b29sT3V0cHV0LCBcIm1jcF9hcHByb3ZhbF9yZXF1ZXN0XCIpKSB7XG5cdFx0XHRcdHlpZWxkIHtcblx0XHRcdFx0XHR0eXBlOiBcIm5vbl9zdGFuZGFyZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiB0b29sT3V0cHV0XG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fSBlbHNlIGlmIChfaXNDb250ZW50QmxvY2sodG9vbE91dHB1dCwgXCJpbWFnZV9nZW5lcmF0aW9uX2NhbGxcIikpIHtcblx0XHRcdFx0eWllbGQge1xuXHRcdFx0XHRcdHR5cGU6IFwibm9uX3N0YW5kYXJkXCIsXG5cdFx0XHRcdFx0dmFsdWU6IHRvb2xPdXRwdXRcblx0XHRcdFx0fTtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cdFx0XHRpZiAoX2lzT2JqZWN0KHRvb2xPdXRwdXQpKSB5aWVsZCB7XG5cdFx0XHRcdHR5cGU6IFwibm9uX3N0YW5kYXJkXCIsXG5cdFx0XHRcdHZhbHVlOiB0b29sT3V0cHV0XG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gQXJyYXkuZnJvbShpdGVyYXRlQ29udGVudCgpKTtcbn1cbi8qKlxuKiBDb252ZXJ0cyBhIENoYXRPcGVuQUlSZXNwb25zZXMgbWVzc2FnZSBjaHVuayB0byBhbiBhcnJheSBvZiB2MSBzdGFuZGFyZCBjb250ZW50IGJsb2Nrcy5cbipcbiogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgYW4gQUkgbWVzc2FnZSBjaHVuayBjb250YWluaW5nIE9wZW5BSS1zcGVjaWZpYyBjb250ZW50IGJsb2Nrc1xuKiBhbmQgY29udmVydHMgdGhlbSB0byB0aGUgc3RhbmRhcmRpemVkIHYxIGNvbnRlbnQgYmxvY2sgZm9ybWF0LiBJdCBoYW5kbGVzIGJvdGggdGhlXG4qIHJlZ3VsYXIgbWVzc2FnZSBjb250ZW50IGFuZCB0b29sIGNhbGwgY2h1bmtzIHRoYXQgYXJlIHNwZWNpZmljIHRvIHN0cmVhbWluZyByZXNwb25zZXMuXG4qXG4qIEBwYXJhbSBtZXNzYWdlIC0gVGhlIEFJIG1lc3NhZ2UgY2h1bmsgY29udGFpbmluZyBPcGVuQUktZm9ybWF0dGVkIGNvbnRlbnQgYmxvY2tzXG4qIEByZXR1cm5zIEFycmF5IG9mIGNvbnRlbnQgYmxvY2tzIGluIHYxIHN0YW5kYXJkIGZvcm1hdFxuKlxuKiBAZXhhbXBsZVxuKiBgYGB0eXBlc2NyaXB0XG4qIGNvbnN0IG1lc3NhZ2VDaHVuayA9IG5ldyBBSU1lc3NhZ2VDaHVuayh7XG4qICAgY29udGVudDogW3sgdHlwZTogXCJ0ZXh0XCIsIHRleHQ6IFwiSGVsbG9cIiB9XSxcbiogICB0b29sX2NhbGxfY2h1bmtzOiBbXG4qICAgICB7IGlkOiBcImNhbGxfMTIzXCIsIG5hbWU6IFwiY2FsY3VsYXRvclwiLCBhcmdzOiAne1wiYVwiOiAxJyB9XG4qICAgXVxuKiB9KTtcbipcbiogY29uc3Qgc3RhbmRhcmRCbG9ja3MgPSBjb252ZXJ0VG9WMUZyb21SZXNwb25zZXNDaHVuayhtZXNzYWdlQ2h1bmspO1xuKiAvLyBSZXR1cm5zOlxuKiAvLyBbXG4qIC8vICAgeyB0eXBlOiBcInRleHRcIiwgdGV4dDogXCJIZWxsb1wiIH0sXG4qIC8vICAgeyB0eXBlOiBcInRvb2xfY2FsbF9jaHVua1wiLCBpZDogXCJjYWxsXzEyM1wiLCBuYW1lOiBcImNhbGN1bGF0b3JcIiwgYXJnczogJ3tcImFcIjogMScgfVxuKiAvLyBdXG4qIGBgYFxuKi9cbmZ1bmN0aW9uIGNvbnZlcnRUb1YxRnJvbVJlc3BvbnNlc0NodW5rKG1lc3NhZ2UpIHtcblx0ZnVuY3Rpb24qIGl0ZXJhdGVDb250ZW50KCkge1xuXHRcdHlpZWxkKiBjb252ZXJ0VG9WMUZyb21SZXNwb25zZXMobWVzc2FnZSk7XG5cdFx0Zm9yIChjb25zdCB0b29sQ2FsbENodW5rIG9mIG1lc3NhZ2UudG9vbF9jYWxsX2NodW5rcyA/PyBbXSkgeWllbGQge1xuXHRcdFx0dHlwZTogXCJ0b29sX2NhbGxfY2h1bmtcIixcblx0XHRcdGlkOiB0b29sQ2FsbENodW5rLmlkLFxuXHRcdFx0bmFtZTogdG9vbENhbGxDaHVuay5uYW1lLFxuXHRcdFx0YXJnczogdG9vbENhbGxDaHVuay5hcmdzXG5cdFx0fTtcblx0fVxuXHRyZXR1cm4gQXJyYXkuZnJvbShpdGVyYXRlQ29udGVudCgpKTtcbn1cbmNvbnN0IENoYXRPcGVuQUlUcmFuc2xhdG9yID0ge1xuXHR0cmFuc2xhdGVDb250ZW50OiAobWVzc2FnZSkgPT4ge1xuXHRcdGlmICh0eXBlb2YgbWVzc2FnZS5jb250ZW50ID09PSBcInN0cmluZ1wiKSByZXR1cm4gY29udmVydFRvVjFGcm9tQ2hhdENvbXBsZXRpb25zKG1lc3NhZ2UpO1xuXHRcdHJldHVybiBjb252ZXJ0VG9WMUZyb21SZXNwb25zZXMobWVzc2FnZSk7XG5cdH0sXG5cdHRyYW5zbGF0ZUNvbnRlbnRDaHVuazogKG1lc3NhZ2UpID0+IHtcblx0XHRpZiAodHlwZW9mIG1lc3NhZ2UuY29udGVudCA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIGNvbnZlcnRUb1YxRnJvbUNoYXRDb21wbGV0aW9uc0NodW5rKG1lc3NhZ2UpO1xuXHRcdHJldHVybiBjb252ZXJ0VG9WMUZyb21SZXNwb25zZXNDaHVuayhtZXNzYWdlKTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBDaGF0T3BlbkFJVHJhbnNsYXRvciwgY29udmVydFRvVjFGcm9tQ2hhdENvbXBsZXRpb25zSW5wdXQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wZW5haS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/openai.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/utils.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/block_translators/utils.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _isArray: () => (/* binding */ _isArray),\n/* harmony export */   _isBytesArray: () => (/* binding */ _isBytesArray),\n/* harmony export */   _isContentBlock: () => (/* binding */ _isContentBlock),\n/* harmony export */   _isNumber: () => (/* binding */ _isNumber),\n/* harmony export */   _isObject: () => (/* binding */ _isObject),\n/* harmony export */   _isString: () => (/* binding */ _isString),\n/* harmony export */   iife: () => (/* binding */ iife),\n/* harmony export */   safeParseJson: () => (/* binding */ safeParseJson)\n/* harmony export */ });\n//#region src/messages/block_translators/utils.ts\nfunction _isContentBlock(block, type) {\n\treturn _isObject(block) && block.type === type;\n}\nfunction _isObject(value) {\n\treturn typeof value === \"object\" && value !== null;\n}\nfunction _isArray(value) {\n\treturn Array.isArray(value);\n}\nfunction _isString(value) {\n\treturn typeof value === \"string\";\n}\nfunction _isNumber(value) {\n\treturn typeof value === \"number\";\n}\nfunction _isBytesArray(value) {\n\treturn value instanceof Uint8Array;\n}\nfunction safeParseJson(value) {\n\ttry {\n\t\treturn JSON.parse(value);\n\t} catch {\n\t\treturn void 0;\n\t}\n}\nconst iife = (fn) => fn();\n\n//#endregion\n\n//# sourceMappingURL=utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvYmxvY2tfdHJhbnNsYXRvcnMvdXRpbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUMwRztBQUMxRyIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2Jsb2NrX3RyYW5zbGF0b3JzL3V0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvbWVzc2FnZXMvYmxvY2tfdHJhbnNsYXRvcnMvdXRpbHMudHNcbmZ1bmN0aW9uIF9pc0NvbnRlbnRCbG9jayhibG9jaywgdHlwZSkge1xuXHRyZXR1cm4gX2lzT2JqZWN0KGJsb2NrKSAmJiBibG9jay50eXBlID09PSB0eXBlO1xufVxuZnVuY3Rpb24gX2lzT2JqZWN0KHZhbHVlKSB7XG5cdHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgIT09IG51bGw7XG59XG5mdW5jdGlvbiBfaXNBcnJheSh2YWx1ZSkge1xuXHRyZXR1cm4gQXJyYXkuaXNBcnJheSh2YWx1ZSk7XG59XG5mdW5jdGlvbiBfaXNTdHJpbmcodmFsdWUpIHtcblx0cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIjtcbn1cbmZ1bmN0aW9uIF9pc051bWJlcih2YWx1ZSkge1xuXHRyZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiO1xufVxuZnVuY3Rpb24gX2lzQnl0ZXNBcnJheSh2YWx1ZSkge1xuXHRyZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBVaW50OEFycmF5O1xufVxuZnVuY3Rpb24gc2FmZVBhcnNlSnNvbih2YWx1ZSkge1xuXHR0cnkge1xuXHRcdHJldHVybiBKU09OLnBhcnNlKHZhbHVlKTtcblx0fSBjYXRjaCB7XG5cdFx0cmV0dXJuIHZvaWQgMDtcblx0fVxufVxuY29uc3QgaWlmZSA9IChmbikgPT4gZm4oKTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBfaXNBcnJheSwgX2lzQnl0ZXNBcnJheSwgX2lzQ29udGVudEJsb2NrLCBfaXNOdW1iZXIsIF9pc09iamVjdCwgX2lzU3RyaW5nLCBpaWZlLCBzYWZlUGFyc2VKc29uIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/messages/block_translators/utils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/messages/chat.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/chat.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatMessage: () => (/* binding */ ChatMessage),\n/* harmony export */   ChatMessageChunk: () => (/* binding */ ChatMessageChunk),\n/* harmony export */   isChatMessage: () => (/* binding */ isChatMessage),\n/* harmony export */   isChatMessageChunk: () => (/* binding */ isChatMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/base.js\");\n\n\n//#region src/messages/chat.ts\n/**\n* Represents a chat message in a conversation.\n*/\nvar ChatMessage = class ChatMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n\tstatic lc_name() {\n\t\treturn \"ChatMessage\";\n\t}\n\ttype = \"generic\";\n\trole;\n\tstatic _chatMessageClass() {\n\t\treturn ChatMessage;\n\t}\n\tconstructor(fields, role) {\n\t\tif (typeof fields === \"string\" || Array.isArray(fields)) fields = {\n\t\t\tcontent: fields,\n\t\t\trole\n\t\t};\n\t\tsuper(fields);\n\t\tthis.role = fields.role;\n\t}\n\tstatic isInstance(obj) {\n\t\treturn super.isInstance(obj) && obj.type === \"generic\";\n\t}\n\tget _printableFields() {\n\t\treturn {\n\t\t\t...super._printableFields,\n\t\t\trole: this.role\n\t\t};\n\t}\n};\n/**\n* Represents a chunk of a chat message, which can be concatenated with\n* other chat message chunks.\n*/\nvar ChatMessageChunk = class extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n\tstatic lc_name() {\n\t\treturn \"ChatMessageChunk\";\n\t}\n\ttype = \"generic\";\n\trole;\n\tconstructor(fields, role) {\n\t\tif (typeof fields === \"string\" || Array.isArray(fields)) fields = {\n\t\t\tcontent: fields,\n\t\t\trole\n\t\t};\n\t\tsuper(fields);\n\t\tthis.role = fields.role;\n\t}\n\tconcat(chunk) {\n\t\tconst Cls = this.constructor;\n\t\treturn new Cls({\n\t\t\tcontent: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n\t\t\tadditional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n\t\t\tresponse_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n\t\t\trole: this.role,\n\t\t\tid: this.id ?? chunk.id\n\t\t});\n\t}\n\tstatic isInstance(obj) {\n\t\treturn super.isInstance(obj) && obj.type === \"generic\";\n\t}\n\tget _printableFields() {\n\t\treturn {\n\t\t\t...super._printableFields,\n\t\t\trole: this.role\n\t\t};\n\t}\n};\n/**\n* @deprecated Use {@link ChatMessage.isInstance} instead\n*/\nfunction isChatMessage(x) {\n\treturn x._getType() === \"generic\";\n}\n/**\n* @deprecated Use {@link ChatMessageChunk.isInstance} instead\n*/\nfunction isChatMessageChunk(x) {\n\treturn x._getType() === \"generic\";\n}\n\n//#endregion\n\n//# sourceMappingURL=chat.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvY2hhdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFxRjs7QUFFckY7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsaURBQVc7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLHNEQUFnQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksc0RBQVk7QUFDeEIsc0JBQXNCLHFEQUFXO0FBQ2pDLHNCQUFzQixxREFBVztBQUNqQztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiw4QkFBOEI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixtQ0FBbUM7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDNEU7QUFDNUUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9jaGF0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VNZXNzYWdlLCBCYXNlTWVzc2FnZUNodW5rLCBfbWVyZ2VEaWN0cywgbWVyZ2VDb250ZW50IH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL21lc3NhZ2VzL2NoYXQudHNcbi8qKlxuKiBSZXByZXNlbnRzIGEgY2hhdCBtZXNzYWdlIGluIGEgY29udmVyc2F0aW9uLlxuKi9cbnZhciBDaGF0TWVzc2FnZSA9IGNsYXNzIENoYXRNZXNzYWdlIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xuXHRzdGF0aWMgbGNfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJDaGF0TWVzc2FnZVwiO1xuXHR9XG5cdHR5cGUgPSBcImdlbmVyaWNcIjtcblx0cm9sZTtcblx0c3RhdGljIF9jaGF0TWVzc2FnZUNsYXNzKCkge1xuXHRcdHJldHVybiBDaGF0TWVzc2FnZTtcblx0fVxuXHRjb25zdHJ1Y3RvcihmaWVsZHMsIHJvbGUpIHtcblx0XHRpZiAodHlwZW9mIGZpZWxkcyA9PT0gXCJzdHJpbmdcIiB8fCBBcnJheS5pc0FycmF5KGZpZWxkcykpIGZpZWxkcyA9IHtcblx0XHRcdGNvbnRlbnQ6IGZpZWxkcyxcblx0XHRcdHJvbGVcblx0XHR9O1xuXHRcdHN1cGVyKGZpZWxkcyk7XG5cdFx0dGhpcy5yb2xlID0gZmllbGRzLnJvbGU7XG5cdH1cblx0c3RhdGljIGlzSW5zdGFuY2Uob2JqKSB7XG5cdFx0cmV0dXJuIHN1cGVyLmlzSW5zdGFuY2Uob2JqKSAmJiBvYmoudHlwZSA9PT0gXCJnZW5lcmljXCI7XG5cdH1cblx0Z2V0IF9wcmludGFibGVGaWVsZHMoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdC4uLnN1cGVyLl9wcmludGFibGVGaWVsZHMsXG5cdFx0XHRyb2xlOiB0aGlzLnJvbGVcblx0XHR9O1xuXHR9XG59O1xuLyoqXG4qIFJlcHJlc2VudHMgYSBjaHVuayBvZiBhIGNoYXQgbWVzc2FnZSwgd2hpY2ggY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoXG4qIG90aGVyIGNoYXQgbWVzc2FnZSBjaHVua3MuXG4qL1xudmFyIENoYXRNZXNzYWdlQ2h1bmsgPSBjbGFzcyBleHRlbmRzIEJhc2VNZXNzYWdlQ2h1bmsge1xuXHRzdGF0aWMgbGNfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJDaGF0TWVzc2FnZUNodW5rXCI7XG5cdH1cblx0dHlwZSA9IFwiZ2VuZXJpY1wiO1xuXHRyb2xlO1xuXHRjb25zdHJ1Y3RvcihmaWVsZHMsIHJvbGUpIHtcblx0XHRpZiAodHlwZW9mIGZpZWxkcyA9PT0gXCJzdHJpbmdcIiB8fCBBcnJheS5pc0FycmF5KGZpZWxkcykpIGZpZWxkcyA9IHtcblx0XHRcdGNvbnRlbnQ6IGZpZWxkcyxcblx0XHRcdHJvbGVcblx0XHR9O1xuXHRcdHN1cGVyKGZpZWxkcyk7XG5cdFx0dGhpcy5yb2xlID0gZmllbGRzLnJvbGU7XG5cdH1cblx0Y29uY2F0KGNodW5rKSB7XG5cdFx0Y29uc3QgQ2xzID0gdGhpcy5jb25zdHJ1Y3Rvcjtcblx0XHRyZXR1cm4gbmV3IENscyh7XG5cdFx0XHRjb250ZW50OiBtZXJnZUNvbnRlbnQodGhpcy5jb250ZW50LCBjaHVuay5jb250ZW50KSxcblx0XHRcdGFkZGl0aW9uYWxfa3dhcmdzOiBfbWVyZ2VEaWN0cyh0aGlzLmFkZGl0aW9uYWxfa3dhcmdzLCBjaHVuay5hZGRpdGlvbmFsX2t3YXJncyksXG5cdFx0XHRyZXNwb25zZV9tZXRhZGF0YTogX21lcmdlRGljdHModGhpcy5yZXNwb25zZV9tZXRhZGF0YSwgY2h1bmsucmVzcG9uc2VfbWV0YWRhdGEpLFxuXHRcdFx0cm9sZTogdGhpcy5yb2xlLFxuXHRcdFx0aWQ6IHRoaXMuaWQgPz8gY2h1bmsuaWRcblx0XHR9KTtcblx0fVxuXHRzdGF0aWMgaXNJbnN0YW5jZShvYmopIHtcblx0XHRyZXR1cm4gc3VwZXIuaXNJbnN0YW5jZShvYmopICYmIG9iai50eXBlID09PSBcImdlbmVyaWNcIjtcblx0fVxuXHRnZXQgX3ByaW50YWJsZUZpZWxkcygpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0Li4uc3VwZXIuX3ByaW50YWJsZUZpZWxkcyxcblx0XHRcdHJvbGU6IHRoaXMucm9sZVxuXHRcdH07XG5cdH1cbn07XG4vKipcbiogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayBDaGF0TWVzc2FnZS5pc0luc3RhbmNlfSBpbnN0ZWFkXG4qL1xuZnVuY3Rpb24gaXNDaGF0TWVzc2FnZSh4KSB7XG5cdHJldHVybiB4Ll9nZXRUeXBlKCkgPT09IFwiZ2VuZXJpY1wiO1xufVxuLyoqXG4qIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgQ2hhdE1lc3NhZ2VDaHVuay5pc0luc3RhbmNlfSBpbnN0ZWFkXG4qL1xuZnVuY3Rpb24gaXNDaGF0TWVzc2FnZUNodW5rKHgpIHtcblx0cmV0dXJuIHguX2dldFR5cGUoKSA9PT0gXCJnZW5lcmljXCI7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQ2hhdE1lc3NhZ2UsIENoYXRNZXNzYWdlQ2h1bmssIGlzQ2hhdE1lc3NhZ2UsIGlzQ2hhdE1lc3NhZ2VDaHVuayB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2hhdC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/messages/chat.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/messages/content/data.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/content/data.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertToOpenAIImageBlock: () => (/* binding */ convertToOpenAIImageBlock),\n/* harmony export */   convertToProviderContentBlock: () => (/* binding */ convertToProviderContentBlock),\n/* harmony export */   isBase64ContentBlock: () => (/* binding */ isBase64ContentBlock),\n/* harmony export */   isDataContentBlock: () => (/* binding */ isDataContentBlock),\n/* harmony export */   isIDContentBlock: () => (/* binding */ isIDContentBlock),\n/* harmony export */   isPlainTextContentBlock: () => (/* binding */ isPlainTextContentBlock),\n/* harmony export */   isURLContentBlock: () => (/* binding */ isURLContentBlock),\n/* harmony export */   parseBase64DataUrl: () => (/* binding */ parseBase64DataUrl),\n/* harmony export */   parseMimeType: () => (/* binding */ parseMimeType)\n/* harmony export */ });\n//#region src/messages/content/data.ts\n/**\n* @deprecated Don't use data content blocks. Use {@link ContentBlock.Multimodal.Data} instead.\n*/\nfunction isDataContentBlock(content_block) {\n\treturn typeof content_block === \"object\" && content_block !== null && \"type\" in content_block && typeof content_block.type === \"string\" && \"source_type\" in content_block && (content_block.source_type === \"url\" || content_block.source_type === \"base64\" || content_block.source_type === \"text\" || content_block.source_type === \"id\");\n}\n/**\n* @deprecated Don't use data content blocks. Use {@link ContentBlock.Multimodal.Data} instead.\n*/\nfunction isURLContentBlock(content_block) {\n\treturn isDataContentBlock(content_block) && content_block.source_type === \"url\" && \"url\" in content_block && typeof content_block.url === \"string\";\n}\n/**\n* @deprecated Don't use data content blocks. Use {@link ContentBlock.Multimodal.Data} instead.\n*/\nfunction isBase64ContentBlock(content_block) {\n\treturn isDataContentBlock(content_block) && content_block.source_type === \"base64\" && \"data\" in content_block && typeof content_block.data === \"string\";\n}\n/**\n* @deprecated Don't use data content blocks. Use {@link ContentBlock.Multimodal.Data} instead.\n*/\nfunction isPlainTextContentBlock(content_block) {\n\treturn isDataContentBlock(content_block) && content_block.source_type === \"text\" && \"text\" in content_block && typeof content_block.text === \"string\";\n}\n/**\n* @deprecated Don't use data content blocks. Use {@link ContentBlock.Multimodal.Data} instead.\n*/\nfunction isIDContentBlock(content_block) {\n\treturn isDataContentBlock(content_block) && content_block.source_type === \"id\" && \"id\" in content_block && typeof content_block.id === \"string\";\n}\n/**\n* @deprecated Don't use data content blocks. Use {@link ContentBlock.Multimodal.Data} instead.\n*/\nfunction convertToOpenAIImageBlock(content_block) {\n\tif (isDataContentBlock(content_block)) {\n\t\tif (content_block.source_type === \"url\") return {\n\t\t\ttype: \"image_url\",\n\t\t\timage_url: { url: content_block.url }\n\t\t};\n\t\tif (content_block.source_type === \"base64\") {\n\t\t\tif (!content_block.mime_type) throw new Error(\"mime_type key is required for base64 data.\");\n\t\t\tconst mime_type = content_block.mime_type;\n\t\t\treturn {\n\t\t\t\ttype: \"image_url\",\n\t\t\t\timage_url: { url: `data:${mime_type};base64,${content_block.data}` }\n\t\t\t};\n\t\t}\n\t}\n\tthrow new Error(\"Unsupported source type. Only 'url' and 'base64' are supported.\");\n}\n/**\n* Utility function for ChatModelProviders. Parses a mime type into a type, subtype, and parameters.\n*\n* @param mime_type - The mime type to parse.\n* @returns An object containing the type, subtype, and parameters.\n*\n* @deprecated Don't use data content blocks. Use {@link ContentBlock.Multimodal.Data} instead.\n*/\nfunction parseMimeType(mime_type) {\n\tconst parts = mime_type.split(\";\")[0].split(\"/\");\n\tif (parts.length !== 2) throw new Error(`Invalid mime type: \"${mime_type}\" - does not match type/subtype format.`);\n\tconst type = parts[0].trim();\n\tconst subtype = parts[1].trim();\n\tif (type === \"\" || subtype === \"\") throw new Error(`Invalid mime type: \"${mime_type}\" - type or subtype is empty.`);\n\tconst parameters = {};\n\tfor (const parameterKvp of mime_type.split(\";\").slice(1)) {\n\t\tconst parameterParts = parameterKvp.split(\"=\");\n\t\tif (parameterParts.length !== 2) throw new Error(`Invalid parameter syntax in mime type: \"${mime_type}\".`);\n\t\tconst key = parameterParts[0].trim();\n\t\tconst value = parameterParts[1].trim();\n\t\tif (key === \"\") throw new Error(`Invalid parameter syntax in mime type: \"${mime_type}\".`);\n\t\tparameters[key] = value;\n\t}\n\treturn {\n\t\ttype,\n\t\tsubtype,\n\t\tparameters\n\t};\n}\n/**\n* Utility function for ChatModelProviders. Parses a base64 data URL into a typed array or string.\n*\n* @param dataUrl - The base64 data URL to parse.\n* @param asTypedArray - Whether to return the data as a typed array.\n* @returns The parsed data and mime type, or undefined if the data URL is invalid.\n*\n* @deprecated Don't use data content blocks. Use {@link ContentBlock.Multimodal.Data} instead.\n*/\nfunction parseBase64DataUrl({ dataUrl: data_url, asTypedArray = false }) {\n\tconst formatMatch = data_url.match(/^data:(\\w+\\/\\w+);base64,([A-Za-z0-9+/]+=*)$/);\n\tlet mime_type;\n\tif (formatMatch) {\n\t\tmime_type = formatMatch[1].toLowerCase();\n\t\tconst data = asTypedArray ? Uint8Array.from(atob(formatMatch[2]), (c) => c.charCodeAt(0)) : formatMatch[2];\n\t\treturn {\n\t\t\tmime_type,\n\t\t\tdata\n\t\t};\n\t}\n\treturn void 0;\n}\n/**\n* Convert from a standard data content block to a provider's proprietary data content block format.\n*\n* Don't override this method. Instead, override the more specific conversion methods and use this\n* method unmodified.\n*\n* @param block - The standard data content block to convert.\n* @returns The provider data content block.\n* @throws An error if the standard data content block type is not supported.\n*\n* @deprecated Don't use data content blocks. Use {@link ContentBlock.Multimodal.Data} instead.\n*/\nfunction convertToProviderContentBlock(block, converter) {\n\tif (block.type === \"text\") {\n\t\tif (!converter.fromStandardTextBlock) throw new Error(`Converter for ${converter.providerName} does not implement \\`fromStandardTextBlock\\` method.`);\n\t\treturn converter.fromStandardTextBlock(block);\n\t}\n\tif (block.type === \"image\") {\n\t\tif (!converter.fromStandardImageBlock) throw new Error(`Converter for ${converter.providerName} does not implement \\`fromStandardImageBlock\\` method.`);\n\t\treturn converter.fromStandardImageBlock(block);\n\t}\n\tif (block.type === \"audio\") {\n\t\tif (!converter.fromStandardAudioBlock) throw new Error(`Converter for ${converter.providerName} does not implement \\`fromStandardAudioBlock\\` method.`);\n\t\treturn converter.fromStandardAudioBlock(block);\n\t}\n\tif (block.type === \"file\") {\n\t\tif (!converter.fromStandardFileBlock) throw new Error(`Converter for ${converter.providerName} does not implement \\`fromStandardFileBlock\\` method.`);\n\t\treturn converter.fromStandardFileBlock(block);\n\t}\n\tthrow new Error(`Unable to convert content block type '${block.type}' to provider-specific format: not recognized.`);\n}\n\n//#endregion\n\n//# sourceMappingURL=data.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvY29udGVudC9kYXRhLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQSxrREFBa0Qsb0NBQW9DO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Qsb0NBQW9DO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Qsb0NBQW9DO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Qsb0NBQW9DO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Qsb0NBQW9DO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Qsb0NBQW9DO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGFBQWEsV0FBVyxTQUFTLG1CQUFtQjtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELG9DQUFvQztBQUN0RjtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDLGdFQUFnRSxVQUFVO0FBQzFFO0FBQ0E7QUFDQSwyRUFBMkUsVUFBVTtBQUNyRjtBQUNBLDhDQUE4QztBQUM5QztBQUNBLDhGQUE4RixVQUFVO0FBQ3hHO0FBQ0E7QUFDQSw2RUFBNkUsVUFBVTtBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Qsb0NBQW9DO0FBQ3RGO0FBQ0EsOEJBQThCLHlDQUF5QztBQUN2RSxzREFBc0Q7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELG9DQUFvQztBQUN0RjtBQUNBO0FBQ0E7QUFDQSx5RUFBeUUsd0JBQXdCO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBLDBFQUEwRSx3QkFBd0I7QUFDbEc7QUFDQTtBQUNBO0FBQ0EsMEVBQTBFLHdCQUF3QjtBQUNsRztBQUNBO0FBQ0E7QUFDQSx5RUFBeUUsd0JBQXdCO0FBQ2pHO0FBQ0E7QUFDQSwwREFBMEQsV0FBVztBQUNyRTs7QUFFQTtBQUMrTTtBQUMvTSIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2NvbnRlbnQvZGF0YS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL21lc3NhZ2VzL2NvbnRlbnQvZGF0YS50c1xuLyoqXG4qIEBkZXByZWNhdGVkIERvbid0IHVzZSBkYXRhIGNvbnRlbnQgYmxvY2tzLiBVc2Uge0BsaW5rIENvbnRlbnRCbG9jay5NdWx0aW1vZGFsLkRhdGF9IGluc3RlYWQuXG4qL1xuZnVuY3Rpb24gaXNEYXRhQ29udGVudEJsb2NrKGNvbnRlbnRfYmxvY2spIHtcblx0cmV0dXJuIHR5cGVvZiBjb250ZW50X2Jsb2NrID09PSBcIm9iamVjdFwiICYmIGNvbnRlbnRfYmxvY2sgIT09IG51bGwgJiYgXCJ0eXBlXCIgaW4gY29udGVudF9ibG9jayAmJiB0eXBlb2YgY29udGVudF9ibG9jay50eXBlID09PSBcInN0cmluZ1wiICYmIFwic291cmNlX3R5cGVcIiBpbiBjb250ZW50X2Jsb2NrICYmIChjb250ZW50X2Jsb2NrLnNvdXJjZV90eXBlID09PSBcInVybFwiIHx8IGNvbnRlbnRfYmxvY2suc291cmNlX3R5cGUgPT09IFwiYmFzZTY0XCIgfHwgY29udGVudF9ibG9jay5zb3VyY2VfdHlwZSA9PT0gXCJ0ZXh0XCIgfHwgY29udGVudF9ibG9jay5zb3VyY2VfdHlwZSA9PT0gXCJpZFwiKTtcbn1cbi8qKlxuKiBAZGVwcmVjYXRlZCBEb24ndCB1c2UgZGF0YSBjb250ZW50IGJsb2Nrcy4gVXNlIHtAbGluayBDb250ZW50QmxvY2suTXVsdGltb2RhbC5EYXRhfSBpbnN0ZWFkLlxuKi9cbmZ1bmN0aW9uIGlzVVJMQ29udGVudEJsb2NrKGNvbnRlbnRfYmxvY2spIHtcblx0cmV0dXJuIGlzRGF0YUNvbnRlbnRCbG9jayhjb250ZW50X2Jsb2NrKSAmJiBjb250ZW50X2Jsb2NrLnNvdXJjZV90eXBlID09PSBcInVybFwiICYmIFwidXJsXCIgaW4gY29udGVudF9ibG9jayAmJiB0eXBlb2YgY29udGVudF9ibG9jay51cmwgPT09IFwic3RyaW5nXCI7XG59XG4vKipcbiogQGRlcHJlY2F0ZWQgRG9uJ3QgdXNlIGRhdGEgY29udGVudCBibG9ja3MuIFVzZSB7QGxpbmsgQ29udGVudEJsb2NrLk11bHRpbW9kYWwuRGF0YX0gaW5zdGVhZC5cbiovXG5mdW5jdGlvbiBpc0Jhc2U2NENvbnRlbnRCbG9jayhjb250ZW50X2Jsb2NrKSB7XG5cdHJldHVybiBpc0RhdGFDb250ZW50QmxvY2soY29udGVudF9ibG9jaykgJiYgY29udGVudF9ibG9jay5zb3VyY2VfdHlwZSA9PT0gXCJiYXNlNjRcIiAmJiBcImRhdGFcIiBpbiBjb250ZW50X2Jsb2NrICYmIHR5cGVvZiBjb250ZW50X2Jsb2NrLmRhdGEgPT09IFwic3RyaW5nXCI7XG59XG4vKipcbiogQGRlcHJlY2F0ZWQgRG9uJ3QgdXNlIGRhdGEgY29udGVudCBibG9ja3MuIFVzZSB7QGxpbmsgQ29udGVudEJsb2NrLk11bHRpbW9kYWwuRGF0YX0gaW5zdGVhZC5cbiovXG5mdW5jdGlvbiBpc1BsYWluVGV4dENvbnRlbnRCbG9jayhjb250ZW50X2Jsb2NrKSB7XG5cdHJldHVybiBpc0RhdGFDb250ZW50QmxvY2soY29udGVudF9ibG9jaykgJiYgY29udGVudF9ibG9jay5zb3VyY2VfdHlwZSA9PT0gXCJ0ZXh0XCIgJiYgXCJ0ZXh0XCIgaW4gY29udGVudF9ibG9jayAmJiB0eXBlb2YgY29udGVudF9ibG9jay50ZXh0ID09PSBcInN0cmluZ1wiO1xufVxuLyoqXG4qIEBkZXByZWNhdGVkIERvbid0IHVzZSBkYXRhIGNvbnRlbnQgYmxvY2tzLiBVc2Uge0BsaW5rIENvbnRlbnRCbG9jay5NdWx0aW1vZGFsLkRhdGF9IGluc3RlYWQuXG4qL1xuZnVuY3Rpb24gaXNJRENvbnRlbnRCbG9jayhjb250ZW50X2Jsb2NrKSB7XG5cdHJldHVybiBpc0RhdGFDb250ZW50QmxvY2soY29udGVudF9ibG9jaykgJiYgY29udGVudF9ibG9jay5zb3VyY2VfdHlwZSA9PT0gXCJpZFwiICYmIFwiaWRcIiBpbiBjb250ZW50X2Jsb2NrICYmIHR5cGVvZiBjb250ZW50X2Jsb2NrLmlkID09PSBcInN0cmluZ1wiO1xufVxuLyoqXG4qIEBkZXByZWNhdGVkIERvbid0IHVzZSBkYXRhIGNvbnRlbnQgYmxvY2tzLiBVc2Uge0BsaW5rIENvbnRlbnRCbG9jay5NdWx0aW1vZGFsLkRhdGF9IGluc3RlYWQuXG4qL1xuZnVuY3Rpb24gY29udmVydFRvT3BlbkFJSW1hZ2VCbG9jayhjb250ZW50X2Jsb2NrKSB7XG5cdGlmIChpc0RhdGFDb250ZW50QmxvY2soY29udGVudF9ibG9jaykpIHtcblx0XHRpZiAoY29udGVudF9ibG9jay5zb3VyY2VfdHlwZSA9PT0gXCJ1cmxcIikgcmV0dXJuIHtcblx0XHRcdHR5cGU6IFwiaW1hZ2VfdXJsXCIsXG5cdFx0XHRpbWFnZV91cmw6IHsgdXJsOiBjb250ZW50X2Jsb2NrLnVybCB9XG5cdFx0fTtcblx0XHRpZiAoY29udGVudF9ibG9jay5zb3VyY2VfdHlwZSA9PT0gXCJiYXNlNjRcIikge1xuXHRcdFx0aWYgKCFjb250ZW50X2Jsb2NrLm1pbWVfdHlwZSkgdGhyb3cgbmV3IEVycm9yKFwibWltZV90eXBlIGtleSBpcyByZXF1aXJlZCBmb3IgYmFzZTY0IGRhdGEuXCIpO1xuXHRcdFx0Y29uc3QgbWltZV90eXBlID0gY29udGVudF9ibG9jay5taW1lX3R5cGU7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR0eXBlOiBcImltYWdlX3VybFwiLFxuXHRcdFx0XHRpbWFnZV91cmw6IHsgdXJsOiBgZGF0YToke21pbWVfdHlwZX07YmFzZTY0LCR7Y29udGVudF9ibG9jay5kYXRhfWAgfVxuXHRcdFx0fTtcblx0XHR9XG5cdH1cblx0dGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgc291cmNlIHR5cGUuIE9ubHkgJ3VybCcgYW5kICdiYXNlNjQnIGFyZSBzdXBwb3J0ZWQuXCIpO1xufVxuLyoqXG4qIFV0aWxpdHkgZnVuY3Rpb24gZm9yIENoYXRNb2RlbFByb3ZpZGVycy4gUGFyc2VzIGEgbWltZSB0eXBlIGludG8gYSB0eXBlLCBzdWJ0eXBlLCBhbmQgcGFyYW1ldGVycy5cbipcbiogQHBhcmFtIG1pbWVfdHlwZSAtIFRoZSBtaW1lIHR5cGUgdG8gcGFyc2UuXG4qIEByZXR1cm5zIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSB0eXBlLCBzdWJ0eXBlLCBhbmQgcGFyYW1ldGVycy5cbipcbiogQGRlcHJlY2F0ZWQgRG9uJ3QgdXNlIGRhdGEgY29udGVudCBibG9ja3MuIFVzZSB7QGxpbmsgQ29udGVudEJsb2NrLk11bHRpbW9kYWwuRGF0YX0gaW5zdGVhZC5cbiovXG5mdW5jdGlvbiBwYXJzZU1pbWVUeXBlKG1pbWVfdHlwZSkge1xuXHRjb25zdCBwYXJ0cyA9IG1pbWVfdHlwZS5zcGxpdChcIjtcIilbMF0uc3BsaXQoXCIvXCIpO1xuXHRpZiAocGFydHMubGVuZ3RoICE9PSAyKSB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgbWltZSB0eXBlOiBcIiR7bWltZV90eXBlfVwiIC0gZG9lcyBub3QgbWF0Y2ggdHlwZS9zdWJ0eXBlIGZvcm1hdC5gKTtcblx0Y29uc3QgdHlwZSA9IHBhcnRzWzBdLnRyaW0oKTtcblx0Y29uc3Qgc3VidHlwZSA9IHBhcnRzWzFdLnRyaW0oKTtcblx0aWYgKHR5cGUgPT09IFwiXCIgfHwgc3VidHlwZSA9PT0gXCJcIikgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG1pbWUgdHlwZTogXCIke21pbWVfdHlwZX1cIiAtIHR5cGUgb3Igc3VidHlwZSBpcyBlbXB0eS5gKTtcblx0Y29uc3QgcGFyYW1ldGVycyA9IHt9O1xuXHRmb3IgKGNvbnN0IHBhcmFtZXRlckt2cCBvZiBtaW1lX3R5cGUuc3BsaXQoXCI7XCIpLnNsaWNlKDEpKSB7XG5cdFx0Y29uc3QgcGFyYW1ldGVyUGFydHMgPSBwYXJhbWV0ZXJLdnAuc3BsaXQoXCI9XCIpO1xuXHRcdGlmIChwYXJhbWV0ZXJQYXJ0cy5sZW5ndGggIT09IDIpIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBwYXJhbWV0ZXIgc3ludGF4IGluIG1pbWUgdHlwZTogXCIke21pbWVfdHlwZX1cIi5gKTtcblx0XHRjb25zdCBrZXkgPSBwYXJhbWV0ZXJQYXJ0c1swXS50cmltKCk7XG5cdFx0Y29uc3QgdmFsdWUgPSBwYXJhbWV0ZXJQYXJ0c1sxXS50cmltKCk7XG5cdFx0aWYgKGtleSA9PT0gXCJcIikgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHBhcmFtZXRlciBzeW50YXggaW4gbWltZSB0eXBlOiBcIiR7bWltZV90eXBlfVwiLmApO1xuXHRcdHBhcmFtZXRlcnNba2V5XSA9IHZhbHVlO1xuXHR9XG5cdHJldHVybiB7XG5cdFx0dHlwZSxcblx0XHRzdWJ0eXBlLFxuXHRcdHBhcmFtZXRlcnNcblx0fTtcbn1cbi8qKlxuKiBVdGlsaXR5IGZ1bmN0aW9uIGZvciBDaGF0TW9kZWxQcm92aWRlcnMuIFBhcnNlcyBhIGJhc2U2NCBkYXRhIFVSTCBpbnRvIGEgdHlwZWQgYXJyYXkgb3Igc3RyaW5nLlxuKlxuKiBAcGFyYW0gZGF0YVVybCAtIFRoZSBiYXNlNjQgZGF0YSBVUkwgdG8gcGFyc2UuXG4qIEBwYXJhbSBhc1R5cGVkQXJyYXkgLSBXaGV0aGVyIHRvIHJldHVybiB0aGUgZGF0YSBhcyBhIHR5cGVkIGFycmF5LlxuKiBAcmV0dXJucyBUaGUgcGFyc2VkIGRhdGEgYW5kIG1pbWUgdHlwZSwgb3IgdW5kZWZpbmVkIGlmIHRoZSBkYXRhIFVSTCBpcyBpbnZhbGlkLlxuKlxuKiBAZGVwcmVjYXRlZCBEb24ndCB1c2UgZGF0YSBjb250ZW50IGJsb2Nrcy4gVXNlIHtAbGluayBDb250ZW50QmxvY2suTXVsdGltb2RhbC5EYXRhfSBpbnN0ZWFkLlxuKi9cbmZ1bmN0aW9uIHBhcnNlQmFzZTY0RGF0YVVybCh7IGRhdGFVcmw6IGRhdGFfdXJsLCBhc1R5cGVkQXJyYXkgPSBmYWxzZSB9KSB7XG5cdGNvbnN0IGZvcm1hdE1hdGNoID0gZGF0YV91cmwubWF0Y2goL15kYXRhOihcXHcrXFwvXFx3Kyk7YmFzZTY0LChbQS1aYS16MC05Ky9dKz0qKSQvKTtcblx0bGV0IG1pbWVfdHlwZTtcblx0aWYgKGZvcm1hdE1hdGNoKSB7XG5cdFx0bWltZV90eXBlID0gZm9ybWF0TWF0Y2hbMV0udG9Mb3dlckNhc2UoKTtcblx0XHRjb25zdCBkYXRhID0gYXNUeXBlZEFycmF5ID8gVWludDhBcnJheS5mcm9tKGF0b2IoZm9ybWF0TWF0Y2hbMl0pLCAoYykgPT4gYy5jaGFyQ29kZUF0KDApKSA6IGZvcm1hdE1hdGNoWzJdO1xuXHRcdHJldHVybiB7XG5cdFx0XHRtaW1lX3R5cGUsXG5cdFx0XHRkYXRhXG5cdFx0fTtcblx0fVxuXHRyZXR1cm4gdm9pZCAwO1xufVxuLyoqXG4qIENvbnZlcnQgZnJvbSBhIHN0YW5kYXJkIGRhdGEgY29udGVudCBibG9jayB0byBhIHByb3ZpZGVyJ3MgcHJvcHJpZXRhcnkgZGF0YSBjb250ZW50IGJsb2NrIGZvcm1hdC5cbipcbiogRG9uJ3Qgb3ZlcnJpZGUgdGhpcyBtZXRob2QuIEluc3RlYWQsIG92ZXJyaWRlIHRoZSBtb3JlIHNwZWNpZmljIGNvbnZlcnNpb24gbWV0aG9kcyBhbmQgdXNlIHRoaXNcbiogbWV0aG9kIHVubW9kaWZpZWQuXG4qXG4qIEBwYXJhbSBibG9jayAtIFRoZSBzdGFuZGFyZCBkYXRhIGNvbnRlbnQgYmxvY2sgdG8gY29udmVydC5cbiogQHJldHVybnMgVGhlIHByb3ZpZGVyIGRhdGEgY29udGVudCBibG9jay5cbiogQHRocm93cyBBbiBlcnJvciBpZiB0aGUgc3RhbmRhcmQgZGF0YSBjb250ZW50IGJsb2NrIHR5cGUgaXMgbm90IHN1cHBvcnRlZC5cbipcbiogQGRlcHJlY2F0ZWQgRG9uJ3QgdXNlIGRhdGEgY29udGVudCBibG9ja3MuIFVzZSB7QGxpbmsgQ29udGVudEJsb2NrLk11bHRpbW9kYWwuRGF0YX0gaW5zdGVhZC5cbiovXG5mdW5jdGlvbiBjb252ZXJ0VG9Qcm92aWRlckNvbnRlbnRCbG9jayhibG9jaywgY29udmVydGVyKSB7XG5cdGlmIChibG9jay50eXBlID09PSBcInRleHRcIikge1xuXHRcdGlmICghY29udmVydGVyLmZyb21TdGFuZGFyZFRleHRCbG9jaykgdGhyb3cgbmV3IEVycm9yKGBDb252ZXJ0ZXIgZm9yICR7Y29udmVydGVyLnByb3ZpZGVyTmFtZX0gZG9lcyBub3QgaW1wbGVtZW50IFxcYGZyb21TdGFuZGFyZFRleHRCbG9ja1xcYCBtZXRob2QuYCk7XG5cdFx0cmV0dXJuIGNvbnZlcnRlci5mcm9tU3RhbmRhcmRUZXh0QmxvY2soYmxvY2spO1xuXHR9XG5cdGlmIChibG9jay50eXBlID09PSBcImltYWdlXCIpIHtcblx0XHRpZiAoIWNvbnZlcnRlci5mcm9tU3RhbmRhcmRJbWFnZUJsb2NrKSB0aHJvdyBuZXcgRXJyb3IoYENvbnZlcnRlciBmb3IgJHtjb252ZXJ0ZXIucHJvdmlkZXJOYW1lfSBkb2VzIG5vdCBpbXBsZW1lbnQgXFxgZnJvbVN0YW5kYXJkSW1hZ2VCbG9ja1xcYCBtZXRob2QuYCk7XG5cdFx0cmV0dXJuIGNvbnZlcnRlci5mcm9tU3RhbmRhcmRJbWFnZUJsb2NrKGJsb2NrKTtcblx0fVxuXHRpZiAoYmxvY2sudHlwZSA9PT0gXCJhdWRpb1wiKSB7XG5cdFx0aWYgKCFjb252ZXJ0ZXIuZnJvbVN0YW5kYXJkQXVkaW9CbG9jaykgdGhyb3cgbmV3IEVycm9yKGBDb252ZXJ0ZXIgZm9yICR7Y29udmVydGVyLnByb3ZpZGVyTmFtZX0gZG9lcyBub3QgaW1wbGVtZW50IFxcYGZyb21TdGFuZGFyZEF1ZGlvQmxvY2tcXGAgbWV0aG9kLmApO1xuXHRcdHJldHVybiBjb252ZXJ0ZXIuZnJvbVN0YW5kYXJkQXVkaW9CbG9jayhibG9jayk7XG5cdH1cblx0aWYgKGJsb2NrLnR5cGUgPT09IFwiZmlsZVwiKSB7XG5cdFx0aWYgKCFjb252ZXJ0ZXIuZnJvbVN0YW5kYXJkRmlsZUJsb2NrKSB0aHJvdyBuZXcgRXJyb3IoYENvbnZlcnRlciBmb3IgJHtjb252ZXJ0ZXIucHJvdmlkZXJOYW1lfSBkb2VzIG5vdCBpbXBsZW1lbnQgXFxgZnJvbVN0YW5kYXJkRmlsZUJsb2NrXFxgIG1ldGhvZC5gKTtcblx0XHRyZXR1cm4gY29udmVydGVyLmZyb21TdGFuZGFyZEZpbGVCbG9jayhibG9jayk7XG5cdH1cblx0dGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gY29udmVydCBjb250ZW50IGJsb2NrIHR5cGUgJyR7YmxvY2sudHlwZX0nIHRvIHByb3ZpZGVyLXNwZWNpZmljIGZvcm1hdDogbm90IHJlY29nbml6ZWQuYCk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY29udmVydFRvT3BlbkFJSW1hZ2VCbG9jaywgY29udmVydFRvUHJvdmlkZXJDb250ZW50QmxvY2ssIGlzQmFzZTY0Q29udGVudEJsb2NrLCBpc0RhdGFDb250ZW50QmxvY2ssIGlzSURDb250ZW50QmxvY2ssIGlzUGxhaW5UZXh0Q29udGVudEJsb2NrLCBpc1VSTENvbnRlbnRCbG9jaywgcGFyc2VCYXNlNjREYXRhVXJsLCBwYXJzZU1pbWVUeXBlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/messages/content/data.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/messages/content/index.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/content/index.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KNOWN_BLOCK_TYPES: () => (/* binding */ KNOWN_BLOCK_TYPES$2)\n/* harmony export */ });\n/* harmony import */ var _tools_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tools.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/content/tools.js\");\n/* harmony import */ var _multimodal_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./multimodal.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/content/multimodal.js\");\n\n\n\n//#region src/messages/content/index.ts\nconst KNOWN_BLOCK_TYPES$2 = [\n\t\"text\",\n\t\"reasoning\",\n\t..._tools_js__WEBPACK_IMPORTED_MODULE_0__.KNOWN_BLOCK_TYPES,\n\t..._multimodal_js__WEBPACK_IMPORTED_MODULE_1__.KNOWN_BLOCK_TYPES\n];\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvY29udGVudC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBK0M7QUFDNEI7O0FBRTNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSx3REFBaUI7QUFDckIsSUFBSSw2REFBbUI7QUFDdkI7O0FBRUE7QUFDb0Q7QUFDcEQiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9jb250ZW50L2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEtOT1dOX0JMT0NLX1RZUEVTIH0gZnJvbSBcIi4vdG9vbHMuanNcIjtcbmltcG9ydCB7IEtOT1dOX0JMT0NLX1RZUEVTIGFzIEtOT1dOX0JMT0NLX1RZUEVTJDEgfSBmcm9tIFwiLi9tdWx0aW1vZGFsLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvbWVzc2FnZXMvY29udGVudC9pbmRleC50c1xuY29uc3QgS05PV05fQkxPQ0tfVFlQRVMkMiA9IFtcblx0XCJ0ZXh0XCIsXG5cdFwicmVhc29uaW5nXCIsXG5cdC4uLktOT1dOX0JMT0NLX1RZUEVTLFxuXHQuLi5LTk9XTl9CTE9DS19UWVBFUyQxXG5dO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEtOT1dOX0JMT0NLX1RZUEVTJDIgYXMgS05PV05fQkxPQ0tfVFlQRVMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/messages/content/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/messages/content/multimodal.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/content/multimodal.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KNOWN_BLOCK_TYPES: () => (/* binding */ KNOWN_BLOCK_TYPES)\n/* harmony export */ });\n//#region src/messages/content/multimodal.ts\nconst KNOWN_BLOCK_TYPES = [\n\t\"image\",\n\t\"video\",\n\t\"audio\",\n\t\"text-plain\",\n\t\"file\"\n];\n\n//#endregion\n\n//# sourceMappingURL=multimodal.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvY29udGVudC9tdWx0aW1vZGFsLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzZCO0FBQzdCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvY29udGVudC9tdWx0aW1vZGFsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvbWVzc2FnZXMvY29udGVudC9tdWx0aW1vZGFsLnRzXG5jb25zdCBLTk9XTl9CTE9DS19UWVBFUyA9IFtcblx0XCJpbWFnZVwiLFxuXHRcInZpZGVvXCIsXG5cdFwiYXVkaW9cIixcblx0XCJ0ZXh0LXBsYWluXCIsXG5cdFwiZmlsZVwiXG5dO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEtOT1dOX0JMT0NLX1RZUEVTIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tdWx0aW1vZGFsLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/messages/content/multimodal.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/messages/content/tools.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/content/tools.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KNOWN_BLOCK_TYPES: () => (/* binding */ KNOWN_BLOCK_TYPES)\n/* harmony export */ });\n//#region src/messages/content/tools.ts\nconst KNOWN_BLOCK_TYPES = [\n\t\"tool_call\",\n\t\"tool_call_chunk\",\n\t\"invalid_tool_call\",\n\t\"server_tool_call\",\n\t\"server_tool_call_chunk\",\n\t\"server_tool_call_result\"\n];\n\n//#endregion\n\n//# sourceMappingURL=tools.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvY29udGVudC90b29scy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzZCO0FBQzdCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvY29udGVudC90b29scy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL21lc3NhZ2VzL2NvbnRlbnQvdG9vbHMudHNcbmNvbnN0IEtOT1dOX0JMT0NLX1RZUEVTID0gW1xuXHRcInRvb2xfY2FsbFwiLFxuXHRcInRvb2xfY2FsbF9jaHVua1wiLFxuXHRcImludmFsaWRfdG9vbF9jYWxsXCIsXG5cdFwic2VydmVyX3Rvb2xfY2FsbFwiLFxuXHRcInNlcnZlcl90b29sX2NhbGxfY2h1bmtcIixcblx0XCJzZXJ2ZXJfdG9vbF9jYWxsX3Jlc3VsdFwiXG5dO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEtOT1dOX0JMT0NLX1RZUEVTIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b29scy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/messages/content/tools.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/messages/format.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/format.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertToFormattedString: () => (/* binding */ convertToFormattedString)\n/* harmony export */ });\n//#region src/messages/format.ts\nfunction convertToFormattedString(message, format = \"pretty\") {\n\tif (format === \"pretty\") return convertToPrettyString(message);\n\treturn JSON.stringify(message);\n}\nfunction convertToPrettyString(message) {\n\tconst lines = [];\n\tconst title = ` ${message.type.charAt(0).toUpperCase() + message.type.slice(1)} Message `;\n\tconst sepLen = Math.floor((80 - title.length) / 2);\n\tconst sep = \"=\".repeat(sepLen);\n\tconst secondSep = title.length % 2 === 0 ? sep : `${sep}=`;\n\tlines.push(`${sep}${title}${secondSep}`);\n\tif (message.type === \"ai\") {\n\t\tconst aiMessage = message;\n\t\tif (aiMessage.tool_calls && aiMessage.tool_calls.length > 0) {\n\t\t\tlines.push(\"Tool Calls:\");\n\t\t\tfor (const tc of aiMessage.tool_calls) {\n\t\t\t\tlines.push(`  ${tc.name} (${tc.id})`);\n\t\t\t\tlines.push(` Call ID: ${tc.id}`);\n\t\t\t\tlines.push(\"  Args:\");\n\t\t\t\tfor (const [key, value] of Object.entries(tc.args)) lines.push(`    ${key}: ${typeof value === \"object\" ? JSON.stringify(value) : value}`);\n\t\t\t}\n\t\t}\n\t}\n\tif (message.type === \"tool\") {\n\t\tconst toolMessage = message;\n\t\tif (toolMessage.name) lines.push(`Name: ${toolMessage.name}`);\n\t}\n\tif (typeof message.content === \"string\" && message.content.trim()) {\n\t\tif (lines.length > 1) lines.push(\"\");\n\t\tlines.push(message.content);\n\t}\n\treturn lines.join(\"\\n\");\n}\n\n//#endregion\n\n//# sourceMappingURL=format.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvZm9ybWF0LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiw4REFBOEQ7QUFDakY7QUFDQTtBQUNBLHFEQUFxRCxJQUFJO0FBQ3pELGVBQWUsSUFBSSxFQUFFLE1BQU0sRUFBRSxVQUFVO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsU0FBUyxHQUFHLE1BQU07QUFDdEMsNEJBQTRCLE1BQU07QUFDbEM7QUFDQSwwRUFBMEUsSUFBSSxJQUFJLDBEQUEwRDtBQUM1STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLGlCQUFpQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNvQztBQUNwQyIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2Zvcm1hdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL21lc3NhZ2VzL2Zvcm1hdC50c1xuZnVuY3Rpb24gY29udmVydFRvRm9ybWF0dGVkU3RyaW5nKG1lc3NhZ2UsIGZvcm1hdCA9IFwicHJldHR5XCIpIHtcblx0aWYgKGZvcm1hdCA9PT0gXCJwcmV0dHlcIikgcmV0dXJuIGNvbnZlcnRUb1ByZXR0eVN0cmluZyhtZXNzYWdlKTtcblx0cmV0dXJuIEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpO1xufVxuZnVuY3Rpb24gY29udmVydFRvUHJldHR5U3RyaW5nKG1lc3NhZ2UpIHtcblx0Y29uc3QgbGluZXMgPSBbXTtcblx0Y29uc3QgdGl0bGUgPSBgICR7bWVzc2FnZS50eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbWVzc2FnZS50eXBlLnNsaWNlKDEpfSBNZXNzYWdlIGA7XG5cdGNvbnN0IHNlcExlbiA9IE1hdGguZmxvb3IoKDgwIC0gdGl0bGUubGVuZ3RoKSAvIDIpO1xuXHRjb25zdCBzZXAgPSBcIj1cIi5yZXBlYXQoc2VwTGVuKTtcblx0Y29uc3Qgc2Vjb25kU2VwID0gdGl0bGUubGVuZ3RoICUgMiA9PT0gMCA/IHNlcCA6IGAke3NlcH09YDtcblx0bGluZXMucHVzaChgJHtzZXB9JHt0aXRsZX0ke3NlY29uZFNlcH1gKTtcblx0aWYgKG1lc3NhZ2UudHlwZSA9PT0gXCJhaVwiKSB7XG5cdFx0Y29uc3QgYWlNZXNzYWdlID0gbWVzc2FnZTtcblx0XHRpZiAoYWlNZXNzYWdlLnRvb2xfY2FsbHMgJiYgYWlNZXNzYWdlLnRvb2xfY2FsbHMubGVuZ3RoID4gMCkge1xuXHRcdFx0bGluZXMucHVzaChcIlRvb2wgQ2FsbHM6XCIpO1xuXHRcdFx0Zm9yIChjb25zdCB0YyBvZiBhaU1lc3NhZ2UudG9vbF9jYWxscykge1xuXHRcdFx0XHRsaW5lcy5wdXNoKGAgICR7dGMubmFtZX0gKCR7dGMuaWR9KWApO1xuXHRcdFx0XHRsaW5lcy5wdXNoKGAgQ2FsbCBJRDogJHt0Yy5pZH1gKTtcblx0XHRcdFx0bGluZXMucHVzaChcIiAgQXJnczpcIik7XG5cdFx0XHRcdGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRjLmFyZ3MpKSBsaW5lcy5wdXNoKGAgICAgJHtrZXl9OiAke3R5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiA/IEpTT04uc3RyaW5naWZ5KHZhbHVlKSA6IHZhbHVlfWApO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRpZiAobWVzc2FnZS50eXBlID09PSBcInRvb2xcIikge1xuXHRcdGNvbnN0IHRvb2xNZXNzYWdlID0gbWVzc2FnZTtcblx0XHRpZiAodG9vbE1lc3NhZ2UubmFtZSkgbGluZXMucHVzaChgTmFtZTogJHt0b29sTWVzc2FnZS5uYW1lfWApO1xuXHR9XG5cdGlmICh0eXBlb2YgbWVzc2FnZS5jb250ZW50ID09PSBcInN0cmluZ1wiICYmIG1lc3NhZ2UuY29udGVudC50cmltKCkpIHtcblx0XHRpZiAobGluZXMubGVuZ3RoID4gMSkgbGluZXMucHVzaChcIlwiKTtcblx0XHRsaW5lcy5wdXNoKG1lc3NhZ2UuY29udGVudCk7XG5cdH1cblx0cmV0dXJuIGxpbmVzLmpvaW4oXCJcXG5cIik7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY29udmVydFRvRm9ybWF0dGVkU3RyaW5nIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mb3JtYXQuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/messages/format.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/messages/function.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/function.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FunctionMessage: () => (/* binding */ FunctionMessage),\n/* harmony export */   FunctionMessageChunk: () => (/* binding */ FunctionMessageChunk),\n/* harmony export */   isFunctionMessage: () => (/* binding */ isFunctionMessage),\n/* harmony export */   isFunctionMessageChunk: () => (/* binding */ isFunctionMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/base.js\");\n\n\n//#region src/messages/function.ts\n/**\n* Represents a function message in a conversation.\n*/\nvar FunctionMessage = class extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n\tstatic lc_name() {\n\t\treturn \"FunctionMessage\";\n\t}\n\ttype = \"function\";\n\tname;\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.name = fields.name;\n\t}\n};\n/**\n* Represents a chunk of a function message, which can be concatenated\n* with other function message chunks.\n*/\nvar FunctionMessageChunk = class extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n\tstatic lc_name() {\n\t\treturn \"FunctionMessageChunk\";\n\t}\n\ttype = \"function\";\n\tconcat(chunk) {\n\t\tconst Cls = this.constructor;\n\t\treturn new Cls({\n\t\t\tcontent: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n\t\t\tadditional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n\t\t\tresponse_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n\t\t\tname: this.name ?? \"\",\n\t\t\tid: this.id ?? chunk.id\n\t\t});\n\t}\n};\nfunction isFunctionMessage(x) {\n\treturn x._getType() === \"function\";\n}\nfunction isFunctionMessageChunk(x) {\n\treturn x._getType() === \"function\";\n}\n\n//#endregion\n\n//# sourceMappingURL=function.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvZnVuY3Rpb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBcUY7O0FBRXJGO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLGlEQUFXO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsc0RBQWdCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxzREFBWTtBQUN4QixzQkFBc0IscURBQVc7QUFDakMsc0JBQXNCLHFEQUFXO0FBQ2pDO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUM0RjtBQUM1RiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2Z1bmN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VNZXNzYWdlLCBCYXNlTWVzc2FnZUNodW5rLCBfbWVyZ2VEaWN0cywgbWVyZ2VDb250ZW50IH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL21lc3NhZ2VzL2Z1bmN0aW9uLnRzXG4vKipcbiogUmVwcmVzZW50cyBhIGZ1bmN0aW9uIG1lc3NhZ2UgaW4gYSBjb252ZXJzYXRpb24uXG4qL1xudmFyIEZ1bmN0aW9uTWVzc2FnZSA9IGNsYXNzIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xuXHRzdGF0aWMgbGNfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJGdW5jdGlvbk1lc3NhZ2VcIjtcblx0fVxuXHR0eXBlID0gXCJmdW5jdGlvblwiO1xuXHRuYW1lO1xuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHRzdXBlcihmaWVsZHMpO1xuXHRcdHRoaXMubmFtZSA9IGZpZWxkcy5uYW1lO1xuXHR9XG59O1xuLyoqXG4qIFJlcHJlc2VudHMgYSBjaHVuayBvZiBhIGZ1bmN0aW9uIG1lc3NhZ2UsIHdoaWNoIGNhbiBiZSBjb25jYXRlbmF0ZWRcbiogd2l0aCBvdGhlciBmdW5jdGlvbiBtZXNzYWdlIGNodW5rcy5cbiovXG52YXIgRnVuY3Rpb25NZXNzYWdlQ2h1bmsgPSBjbGFzcyBleHRlbmRzIEJhc2VNZXNzYWdlQ2h1bmsge1xuXHRzdGF0aWMgbGNfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJGdW5jdGlvbk1lc3NhZ2VDaHVua1wiO1xuXHR9XG5cdHR5cGUgPSBcImZ1bmN0aW9uXCI7XG5cdGNvbmNhdChjaHVuaykge1xuXHRcdGNvbnN0IENscyA9IHRoaXMuY29uc3RydWN0b3I7XG5cdFx0cmV0dXJuIG5ldyBDbHMoe1xuXHRcdFx0Y29udGVudDogbWVyZ2VDb250ZW50KHRoaXMuY29udGVudCwgY2h1bmsuY29udGVudCksXG5cdFx0XHRhZGRpdGlvbmFsX2t3YXJnczogX21lcmdlRGljdHModGhpcy5hZGRpdGlvbmFsX2t3YXJncywgY2h1bmsuYWRkaXRpb25hbF9rd2FyZ3MpLFxuXHRcdFx0cmVzcG9uc2VfbWV0YWRhdGE6IF9tZXJnZURpY3RzKHRoaXMucmVzcG9uc2VfbWV0YWRhdGEsIGNodW5rLnJlc3BvbnNlX21ldGFkYXRhKSxcblx0XHRcdG5hbWU6IHRoaXMubmFtZSA/PyBcIlwiLFxuXHRcdFx0aWQ6IHRoaXMuaWQgPz8gY2h1bmsuaWRcblx0XHR9KTtcblx0fVxufTtcbmZ1bmN0aW9uIGlzRnVuY3Rpb25NZXNzYWdlKHgpIHtcblx0cmV0dXJuIHguX2dldFR5cGUoKSA9PT0gXCJmdW5jdGlvblwiO1xufVxuZnVuY3Rpb24gaXNGdW5jdGlvbk1lc3NhZ2VDaHVuayh4KSB7XG5cdHJldHVybiB4Ll9nZXRUeXBlKCkgPT09IFwiZnVuY3Rpb25cIjtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBGdW5jdGlvbk1lc3NhZ2UsIEZ1bmN0aW9uTWVzc2FnZUNodW5rLCBpc0Z1bmN0aW9uTWVzc2FnZSwgaXNGdW5jdGlvbk1lc3NhZ2VDaHVuayB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnVuY3Rpb24uanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/messages/function.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/messages/human.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/human.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HumanMessage: () => (/* binding */ HumanMessage),\n/* harmony export */   HumanMessageChunk: () => (/* binding */ HumanMessageChunk),\n/* harmony export */   isHumanMessage: () => (/* binding */ isHumanMessage),\n/* harmony export */   isHumanMessageChunk: () => (/* binding */ isHumanMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/base.js\");\n\n\n//#region src/messages/human.ts\n/**\n* Represents a human message in a conversation.\n*/\nvar HumanMessage = class extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n\tstatic lc_name() {\n\t\treturn \"HumanMessage\";\n\t}\n\ttype = \"human\";\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t}\n\tstatic isInstance(obj) {\n\t\treturn super.isInstance(obj) && obj.type === \"human\";\n\t}\n};\n/**\n* Represents a chunk of a human message, which can be concatenated with\n* other human message chunks.\n*/\nvar HumanMessageChunk = class extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n\tstatic lc_name() {\n\t\treturn \"HumanMessageChunk\";\n\t}\n\ttype = \"human\";\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t}\n\tconcat(chunk) {\n\t\tconst Cls = this.constructor;\n\t\treturn new Cls({\n\t\t\tcontent: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n\t\t\tadditional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n\t\t\tresponse_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n\t\t\tid: this.id ?? chunk.id\n\t\t});\n\t}\n\tstatic isInstance(obj) {\n\t\treturn super.isInstance(obj) && obj.type === \"human\";\n\t}\n};\n/**\n* @deprecated Use {@link HumanMessage.isInstance} instead\n*/\nfunction isHumanMessage(x) {\n\treturn x.getType() === \"human\";\n}\n/**\n* @deprecated Use {@link HumanMessageChunk.isInstance} instead\n*/\nfunction isHumanMessageChunk(x) {\n\treturn x.getType() === \"human\";\n}\n\n//#endregion\n\n//# sourceMappingURL=human.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvaHVtYW4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBcUY7O0FBRXJGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGlEQUFXO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxzREFBZ0I7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHNEQUFZO0FBQ3hCLHNCQUFzQixxREFBVztBQUNqQyxzQkFBc0IscURBQVc7QUFDakM7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLCtCQUErQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLG9DQUFvQztBQUN2RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNnRjtBQUNoRiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2h1bWFuLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VNZXNzYWdlLCBCYXNlTWVzc2FnZUNodW5rLCBfbWVyZ2VEaWN0cywgbWVyZ2VDb250ZW50IH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL21lc3NhZ2VzL2h1bWFuLnRzXG4vKipcbiogUmVwcmVzZW50cyBhIGh1bWFuIG1lc3NhZ2UgaW4gYSBjb252ZXJzYXRpb24uXG4qL1xudmFyIEh1bWFuTWVzc2FnZSA9IGNsYXNzIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xuXHRzdGF0aWMgbGNfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJIdW1hbk1lc3NhZ2VcIjtcblx0fVxuXHR0eXBlID0gXCJodW1hblwiO1xuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHRzdXBlcihmaWVsZHMpO1xuXHR9XG5cdHN0YXRpYyBpc0luc3RhbmNlKG9iaikge1xuXHRcdHJldHVybiBzdXBlci5pc0luc3RhbmNlKG9iaikgJiYgb2JqLnR5cGUgPT09IFwiaHVtYW5cIjtcblx0fVxufTtcbi8qKlxuKiBSZXByZXNlbnRzIGEgY2h1bmsgb2YgYSBodW1hbiBtZXNzYWdlLCB3aGljaCBjYW4gYmUgY29uY2F0ZW5hdGVkIHdpdGhcbiogb3RoZXIgaHVtYW4gbWVzc2FnZSBjaHVua3MuXG4qL1xudmFyIEh1bWFuTWVzc2FnZUNodW5rID0gY2xhc3MgZXh0ZW5kcyBCYXNlTWVzc2FnZUNodW5rIHtcblx0c3RhdGljIGxjX25hbWUoKSB7XG5cdFx0cmV0dXJuIFwiSHVtYW5NZXNzYWdlQ2h1bmtcIjtcblx0fVxuXHR0eXBlID0gXCJodW1hblwiO1xuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHRzdXBlcihmaWVsZHMpO1xuXHR9XG5cdGNvbmNhdChjaHVuaykge1xuXHRcdGNvbnN0IENscyA9IHRoaXMuY29uc3RydWN0b3I7XG5cdFx0cmV0dXJuIG5ldyBDbHMoe1xuXHRcdFx0Y29udGVudDogbWVyZ2VDb250ZW50KHRoaXMuY29udGVudCwgY2h1bmsuY29udGVudCksXG5cdFx0XHRhZGRpdGlvbmFsX2t3YXJnczogX21lcmdlRGljdHModGhpcy5hZGRpdGlvbmFsX2t3YXJncywgY2h1bmsuYWRkaXRpb25hbF9rd2FyZ3MpLFxuXHRcdFx0cmVzcG9uc2VfbWV0YWRhdGE6IF9tZXJnZURpY3RzKHRoaXMucmVzcG9uc2VfbWV0YWRhdGEsIGNodW5rLnJlc3BvbnNlX21ldGFkYXRhKSxcblx0XHRcdGlkOiB0aGlzLmlkID8/IGNodW5rLmlkXG5cdFx0fSk7XG5cdH1cblx0c3RhdGljIGlzSW5zdGFuY2Uob2JqKSB7XG5cdFx0cmV0dXJuIHN1cGVyLmlzSW5zdGFuY2Uob2JqKSAmJiBvYmoudHlwZSA9PT0gXCJodW1hblwiO1xuXHR9XG59O1xuLyoqXG4qIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgSHVtYW5NZXNzYWdlLmlzSW5zdGFuY2V9IGluc3RlYWRcbiovXG5mdW5jdGlvbiBpc0h1bWFuTWVzc2FnZSh4KSB7XG5cdHJldHVybiB4LmdldFR5cGUoKSA9PT0gXCJodW1hblwiO1xufVxuLyoqXG4qIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgSHVtYW5NZXNzYWdlQ2h1bmsuaXNJbnN0YW5jZX0gaW5zdGVhZFxuKi9cbmZ1bmN0aW9uIGlzSHVtYW5NZXNzYWdlQ2h1bmsoeCkge1xuXHRyZXR1cm4geC5nZXRUeXBlKCkgPT09IFwiaHVtYW5cIjtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBIdW1hbk1lc3NhZ2UsIEh1bWFuTWVzc2FnZUNodW5rLCBpc0h1bWFuTWVzc2FnZSwgaXNIdW1hbk1lc3NhZ2VDaHVuayB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aHVtYW4uanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/messages/human.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/messages/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessage: () => (/* reexport safe */ _ai_js__WEBPACK_IMPORTED_MODULE_12__.AIMessage),\n/* harmony export */   AIMessageChunk: () => (/* reexport safe */ _ai_js__WEBPACK_IMPORTED_MODULE_12__.AIMessageChunk),\n/* harmony export */   BaseMessage: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_3__.BaseMessage),\n/* harmony export */   BaseMessageChunk: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_3__.BaseMessageChunk),\n/* harmony export */   ChatMessage: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_6__.ChatMessage),\n/* harmony export */   ChatMessageChunk: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_6__.ChatMessageChunk),\n/* harmony export */   FunctionMessage: () => (/* reexport safe */ _function_js__WEBPACK_IMPORTED_MODULE_7__.FunctionMessage),\n/* harmony export */   FunctionMessageChunk: () => (/* reexport safe */ _function_js__WEBPACK_IMPORTED_MODULE_7__.FunctionMessageChunk),\n/* harmony export */   HumanMessage: () => (/* reexport safe */ _human_js__WEBPACK_IMPORTED_MODULE_8__.HumanMessage),\n/* harmony export */   HumanMessageChunk: () => (/* reexport safe */ _human_js__WEBPACK_IMPORTED_MODULE_8__.HumanMessageChunk),\n/* harmony export */   KNOWN_BLOCK_TYPES: () => (/* reexport safe */ _content_index_js__WEBPACK_IMPORTED_MODULE_14__.KNOWN_BLOCK_TYPES),\n/* harmony export */   RemoveMessage: () => (/* reexport safe */ _modifier_js__WEBPACK_IMPORTED_MODULE_9__.RemoveMessage),\n/* harmony export */   SystemMessage: () => (/* reexport safe */ _system_js__WEBPACK_IMPORTED_MODULE_10__.SystemMessage),\n/* harmony export */   SystemMessageChunk: () => (/* reexport safe */ _system_js__WEBPACK_IMPORTED_MODULE_10__.SystemMessageChunk),\n/* harmony export */   ToolMessage: () => (/* reexport safe */ _tool_js__WEBPACK_IMPORTED_MODULE_5__.ToolMessage),\n/* harmony export */   ToolMessageChunk: () => (/* reexport safe */ _tool_js__WEBPACK_IMPORTED_MODULE_5__.ToolMessageChunk),\n/* harmony export */   _isMessageFieldWithRole: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_3__._isMessageFieldWithRole),\n/* harmony export */   _mergeDicts: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_3__._mergeDicts),\n/* harmony export */   _mergeLists: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_3__._mergeLists),\n/* harmony export */   _mergeObj: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_3__._mergeObj),\n/* harmony export */   _mergeStatus: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_3__._mergeStatus),\n/* harmony export */   coerceMessageLikeToMessage: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_11__.coerceMessageLikeToMessage),\n/* harmony export */   collapseToolCallChunks: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_11__.collapseToolCallChunks),\n/* harmony export */   convertToChunk: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_11__.convertToChunk),\n/* harmony export */   convertToOpenAIImageBlock: () => (/* reexport safe */ _content_data_js__WEBPACK_IMPORTED_MODULE_1__.convertToOpenAIImageBlock),\n/* harmony export */   convertToProviderContentBlock: () => (/* reexport safe */ _content_data_js__WEBPACK_IMPORTED_MODULE_1__.convertToProviderContentBlock),\n/* harmony export */   defaultTextSplitter: () => (/* reexport safe */ _transformers_js__WEBPACK_IMPORTED_MODULE_13__.defaultTextSplitter),\n/* harmony export */   defaultToolCallParser: () => (/* reexport safe */ _tool_js__WEBPACK_IMPORTED_MODULE_5__.defaultToolCallParser),\n/* harmony export */   filterMessages: () => (/* reexport safe */ _transformers_js__WEBPACK_IMPORTED_MODULE_13__.filterMessages),\n/* harmony export */   getBufferString: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_11__.getBufferString),\n/* harmony export */   iife: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_11__.iife),\n/* harmony export */   isAIMessage: () => (/* reexport safe */ _ai_js__WEBPACK_IMPORTED_MODULE_12__.isAIMessage),\n/* harmony export */   isAIMessageChunk: () => (/* reexport safe */ _ai_js__WEBPACK_IMPORTED_MODULE_12__.isAIMessageChunk),\n/* harmony export */   isBase64ContentBlock: () => (/* reexport safe */ _content_data_js__WEBPACK_IMPORTED_MODULE_1__.isBase64ContentBlock),\n/* harmony export */   isBaseMessage: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_3__.isBaseMessage),\n/* harmony export */   isBaseMessageChunk: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_3__.isBaseMessageChunk),\n/* harmony export */   isChatMessage: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_6__.isChatMessage),\n/* harmony export */   isChatMessageChunk: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_6__.isChatMessageChunk),\n/* harmony export */   isDataContentBlock: () => (/* reexport safe */ _content_data_js__WEBPACK_IMPORTED_MODULE_1__.isDataContentBlock),\n/* harmony export */   isDirectToolOutput: () => (/* reexport safe */ _tool_js__WEBPACK_IMPORTED_MODULE_5__.isDirectToolOutput),\n/* harmony export */   isFunctionMessage: () => (/* reexport safe */ _function_js__WEBPACK_IMPORTED_MODULE_7__.isFunctionMessage),\n/* harmony export */   isFunctionMessageChunk: () => (/* reexport safe */ _function_js__WEBPACK_IMPORTED_MODULE_7__.isFunctionMessageChunk),\n/* harmony export */   isHumanMessage: () => (/* reexport safe */ _human_js__WEBPACK_IMPORTED_MODULE_8__.isHumanMessage),\n/* harmony export */   isHumanMessageChunk: () => (/* reexport safe */ _human_js__WEBPACK_IMPORTED_MODULE_8__.isHumanMessageChunk),\n/* harmony export */   isIDContentBlock: () => (/* reexport safe */ _content_data_js__WEBPACK_IMPORTED_MODULE_1__.isIDContentBlock),\n/* harmony export */   isMessage: () => (/* reexport safe */ _message_js__WEBPACK_IMPORTED_MODULE_2__.isMessage),\n/* harmony export */   isOpenAIToolCallArray: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_3__.isOpenAIToolCallArray),\n/* harmony export */   isPlainTextContentBlock: () => (/* reexport safe */ _content_data_js__WEBPACK_IMPORTED_MODULE_1__.isPlainTextContentBlock),\n/* harmony export */   isSystemMessage: () => (/* reexport safe */ _system_js__WEBPACK_IMPORTED_MODULE_10__.isSystemMessage),\n/* harmony export */   isSystemMessageChunk: () => (/* reexport safe */ _system_js__WEBPACK_IMPORTED_MODULE_10__.isSystemMessageChunk),\n/* harmony export */   isToolMessage: () => (/* reexport safe */ _tool_js__WEBPACK_IMPORTED_MODULE_5__.isToolMessage),\n/* harmony export */   isToolMessageChunk: () => (/* reexport safe */ _tool_js__WEBPACK_IMPORTED_MODULE_5__.isToolMessageChunk),\n/* harmony export */   isURLContentBlock: () => (/* reexport safe */ _content_data_js__WEBPACK_IMPORTED_MODULE_1__.isURLContentBlock),\n/* harmony export */   mapChatMessagesToStoredMessages: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_11__.mapChatMessagesToStoredMessages),\n/* harmony export */   mapStoredMessageToChatMessage: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_11__.mapStoredMessageToChatMessage),\n/* harmony export */   mapStoredMessagesToChatMessages: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_11__.mapStoredMessagesToChatMessages),\n/* harmony export */   mergeContent: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_3__.mergeContent),\n/* harmony export */   mergeMessageRuns: () => (/* reexport safe */ _transformers_js__WEBPACK_IMPORTED_MODULE_13__.mergeMessageRuns),\n/* harmony export */   mergeResponseMetadata: () => (/* reexport safe */ _metadata_js__WEBPACK_IMPORTED_MODULE_4__.mergeResponseMetadata),\n/* harmony export */   mergeUsageMetadata: () => (/* reexport safe */ _metadata_js__WEBPACK_IMPORTED_MODULE_4__.mergeUsageMetadata),\n/* harmony export */   messages_exports: () => (/* binding */ messages_exports),\n/* harmony export */   parseBase64DataUrl: () => (/* reexport safe */ _content_data_js__WEBPACK_IMPORTED_MODULE_1__.parseBase64DataUrl),\n/* harmony export */   parseMimeType: () => (/* reexport safe */ _content_data_js__WEBPACK_IMPORTED_MODULE_1__.parseMimeType),\n/* harmony export */   trimMessages: () => (/* reexport safe */ _transformers_js__WEBPACK_IMPORTED_MODULE_13__.trimMessages)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _content_data_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./content/data.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/content/data.js\");\n/* harmony import */ var _message_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./message.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/message.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _metadata_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./metadata.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/metadata.js\");\n/* harmony import */ var _tool_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./tool.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/tool.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./chat.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/chat.js\");\n/* harmony import */ var _function_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./function.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/function.js\");\n/* harmony import */ var _human_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./human.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/human.js\");\n/* harmony import */ var _modifier_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./modifier.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/modifier.js\");\n/* harmony import */ var _system_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./system.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/system.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./utils.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/utils.js\");\n/* harmony import */ var _ai_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./ai.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _transformers_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./transformers.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/transformers.js\");\n/* harmony import */ var _content_index_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./content/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/content/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/messages/index.ts\nvar messages_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(messages_exports, {\n\tAIMessage: () => _ai_js__WEBPACK_IMPORTED_MODULE_12__.AIMessage,\n\tAIMessageChunk: () => _ai_js__WEBPACK_IMPORTED_MODULE_12__.AIMessageChunk,\n\tBaseMessage: () => _base_js__WEBPACK_IMPORTED_MODULE_3__.BaseMessage,\n\tBaseMessageChunk: () => _base_js__WEBPACK_IMPORTED_MODULE_3__.BaseMessageChunk,\n\tChatMessage: () => _chat_js__WEBPACK_IMPORTED_MODULE_6__.ChatMessage,\n\tChatMessageChunk: () => _chat_js__WEBPACK_IMPORTED_MODULE_6__.ChatMessageChunk,\n\tFunctionMessage: () => _function_js__WEBPACK_IMPORTED_MODULE_7__.FunctionMessage,\n\tFunctionMessageChunk: () => _function_js__WEBPACK_IMPORTED_MODULE_7__.FunctionMessageChunk,\n\tHumanMessage: () => _human_js__WEBPACK_IMPORTED_MODULE_8__.HumanMessage,\n\tHumanMessageChunk: () => _human_js__WEBPACK_IMPORTED_MODULE_8__.HumanMessageChunk,\n\tKNOWN_BLOCK_TYPES: () => _content_index_js__WEBPACK_IMPORTED_MODULE_14__.KNOWN_BLOCK_TYPES,\n\tRemoveMessage: () => _modifier_js__WEBPACK_IMPORTED_MODULE_9__.RemoveMessage,\n\tSystemMessage: () => _system_js__WEBPACK_IMPORTED_MODULE_10__.SystemMessage,\n\tSystemMessageChunk: () => _system_js__WEBPACK_IMPORTED_MODULE_10__.SystemMessageChunk,\n\tToolMessage: () => _tool_js__WEBPACK_IMPORTED_MODULE_5__.ToolMessage,\n\tToolMessageChunk: () => _tool_js__WEBPACK_IMPORTED_MODULE_5__.ToolMessageChunk,\n\t_isMessageFieldWithRole: () => _base_js__WEBPACK_IMPORTED_MODULE_3__._isMessageFieldWithRole,\n\t_mergeDicts: () => _base_js__WEBPACK_IMPORTED_MODULE_3__._mergeDicts,\n\t_mergeLists: () => _base_js__WEBPACK_IMPORTED_MODULE_3__._mergeLists,\n\t_mergeObj: () => _base_js__WEBPACK_IMPORTED_MODULE_3__._mergeObj,\n\t_mergeStatus: () => _base_js__WEBPACK_IMPORTED_MODULE_3__._mergeStatus,\n\tcoerceMessageLikeToMessage: () => _utils_js__WEBPACK_IMPORTED_MODULE_11__.coerceMessageLikeToMessage,\n\tcollapseToolCallChunks: () => _utils_js__WEBPACK_IMPORTED_MODULE_11__.collapseToolCallChunks,\n\tconvertToChunk: () => _utils_js__WEBPACK_IMPORTED_MODULE_11__.convertToChunk,\n\tconvertToOpenAIImageBlock: () => _content_data_js__WEBPACK_IMPORTED_MODULE_1__.convertToOpenAIImageBlock,\n\tconvertToProviderContentBlock: () => _content_data_js__WEBPACK_IMPORTED_MODULE_1__.convertToProviderContentBlock,\n\tdefaultTextSplitter: () => _transformers_js__WEBPACK_IMPORTED_MODULE_13__.defaultTextSplitter,\n\tdefaultToolCallParser: () => _tool_js__WEBPACK_IMPORTED_MODULE_5__.defaultToolCallParser,\n\tfilterMessages: () => _transformers_js__WEBPACK_IMPORTED_MODULE_13__.filterMessages,\n\tgetBufferString: () => _utils_js__WEBPACK_IMPORTED_MODULE_11__.getBufferString,\n\tiife: () => _utils_js__WEBPACK_IMPORTED_MODULE_11__.iife,\n\tisAIMessage: () => _ai_js__WEBPACK_IMPORTED_MODULE_12__.isAIMessage,\n\tisAIMessageChunk: () => _ai_js__WEBPACK_IMPORTED_MODULE_12__.isAIMessageChunk,\n\tisBase64ContentBlock: () => _content_data_js__WEBPACK_IMPORTED_MODULE_1__.isBase64ContentBlock,\n\tisBaseMessage: () => _base_js__WEBPACK_IMPORTED_MODULE_3__.isBaseMessage,\n\tisBaseMessageChunk: () => _base_js__WEBPACK_IMPORTED_MODULE_3__.isBaseMessageChunk,\n\tisChatMessage: () => _chat_js__WEBPACK_IMPORTED_MODULE_6__.isChatMessage,\n\tisChatMessageChunk: () => _chat_js__WEBPACK_IMPORTED_MODULE_6__.isChatMessageChunk,\n\tisDataContentBlock: () => _content_data_js__WEBPACK_IMPORTED_MODULE_1__.isDataContentBlock,\n\tisDirectToolOutput: () => _tool_js__WEBPACK_IMPORTED_MODULE_5__.isDirectToolOutput,\n\tisFunctionMessage: () => _function_js__WEBPACK_IMPORTED_MODULE_7__.isFunctionMessage,\n\tisFunctionMessageChunk: () => _function_js__WEBPACK_IMPORTED_MODULE_7__.isFunctionMessageChunk,\n\tisHumanMessage: () => _human_js__WEBPACK_IMPORTED_MODULE_8__.isHumanMessage,\n\tisHumanMessageChunk: () => _human_js__WEBPACK_IMPORTED_MODULE_8__.isHumanMessageChunk,\n\tisIDContentBlock: () => _content_data_js__WEBPACK_IMPORTED_MODULE_1__.isIDContentBlock,\n\tisMessage: () => _message_js__WEBPACK_IMPORTED_MODULE_2__.isMessage,\n\tisOpenAIToolCallArray: () => _base_js__WEBPACK_IMPORTED_MODULE_3__.isOpenAIToolCallArray,\n\tisPlainTextContentBlock: () => _content_data_js__WEBPACK_IMPORTED_MODULE_1__.isPlainTextContentBlock,\n\tisSystemMessage: () => _system_js__WEBPACK_IMPORTED_MODULE_10__.isSystemMessage,\n\tisSystemMessageChunk: () => _system_js__WEBPACK_IMPORTED_MODULE_10__.isSystemMessageChunk,\n\tisToolMessage: () => _tool_js__WEBPACK_IMPORTED_MODULE_5__.isToolMessage,\n\tisToolMessageChunk: () => _tool_js__WEBPACK_IMPORTED_MODULE_5__.isToolMessageChunk,\n\tisURLContentBlock: () => _content_data_js__WEBPACK_IMPORTED_MODULE_1__.isURLContentBlock,\n\tmapChatMessagesToStoredMessages: () => _utils_js__WEBPACK_IMPORTED_MODULE_11__.mapChatMessagesToStoredMessages,\n\tmapStoredMessageToChatMessage: () => _utils_js__WEBPACK_IMPORTED_MODULE_11__.mapStoredMessageToChatMessage,\n\tmapStoredMessagesToChatMessages: () => _utils_js__WEBPACK_IMPORTED_MODULE_11__.mapStoredMessagesToChatMessages,\n\tmergeContent: () => _base_js__WEBPACK_IMPORTED_MODULE_3__.mergeContent,\n\tmergeMessageRuns: () => _transformers_js__WEBPACK_IMPORTED_MODULE_13__.mergeMessageRuns,\n\tmergeResponseMetadata: () => _metadata_js__WEBPACK_IMPORTED_MODULE_4__.mergeResponseMetadata,\n\tmergeUsageMetadata: () => _metadata_js__WEBPACK_IMPORTED_MODULE_4__.mergeUsageMetadata,\n\tparseBase64DataUrl: () => _content_data_js__WEBPACK_IMPORTED_MODULE_1__.parseBase64DataUrl,\n\tparseMimeType: () => _content_data_js__WEBPACK_IMPORTED_MODULE_1__.parseMimeType,\n\ttrimMessages: () => _transformers_js__WEBPACK_IMPORTED_MODULE_13__.trimMessages\n});\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEyRDtBQUM2SztBQUMvTDtBQUNxSztBQUNwSTtBQUM4RDtBQUMzQztBQUNvQjtBQUNmO0FBQ3BEO0FBQ3lEO0FBQ2lIO0FBQ3JJO0FBQ3FCO0FBQ2pEOztBQUV2RDtBQUNBO0FBQ0Esc0VBQVE7QUFDUixrQkFBa0IsOENBQVM7QUFDM0IsdUJBQXVCLG1EQUFjO0FBQ3JDLG9CQUFvQixpREFBVztBQUMvQix5QkFBeUIsc0RBQWdCO0FBQ3pDLG9CQUFvQixpREFBVztBQUMvQix5QkFBeUIsc0RBQWdCO0FBQ3pDLHdCQUF3Qix5REFBZTtBQUN2Qyw2QkFBNkIsOERBQW9CO0FBQ2pELHFCQUFxQixtREFBWTtBQUNqQywwQkFBMEIsd0RBQWlCO0FBQzNDLDBCQUEwQixpRUFBaUI7QUFDM0Msc0JBQXNCLHVEQUFhO0FBQ25DLHNCQUFzQixzREFBYTtBQUNuQywyQkFBMkIsMkRBQWtCO0FBQzdDLG9CQUFvQixpREFBVztBQUMvQix5QkFBeUIsc0RBQWdCO0FBQ3pDLGdDQUFnQyw2REFBdUI7QUFDdkQsb0JBQW9CLGlEQUFXO0FBQy9CLG9CQUFvQixpREFBVztBQUMvQixrQkFBa0IsK0NBQVM7QUFDM0IscUJBQXFCLGtEQUFZO0FBQ2pDLG1DQUFtQyxrRUFBMEI7QUFDN0QsK0JBQStCLDhEQUFzQjtBQUNyRCx1QkFBdUIsc0RBQWM7QUFDckMsa0NBQWtDLHVFQUF5QjtBQUMzRCxzQ0FBc0MsMkVBQTZCO0FBQ25FLDRCQUE0QixrRUFBbUI7QUFDL0MsOEJBQThCLDJEQUFxQjtBQUNuRCx1QkFBdUIsNkRBQWM7QUFDckMsd0JBQXdCLHVEQUFlO0FBQ3ZDLGFBQWEsNENBQUk7QUFDakIsb0JBQW9CLGdEQUFXO0FBQy9CLHlCQUF5QixxREFBZ0I7QUFDekMsNkJBQTZCLGtFQUFvQjtBQUNqRCxzQkFBc0IsbURBQWE7QUFDbkMsMkJBQTJCLHdEQUFrQjtBQUM3QyxzQkFBc0IsbURBQWE7QUFDbkMsMkJBQTJCLHdEQUFrQjtBQUM3QywyQkFBMkIsZ0VBQWtCO0FBQzdDLDJCQUEyQix3REFBa0I7QUFDN0MsMEJBQTBCLDJEQUFpQjtBQUMzQywrQkFBK0IsZ0VBQXNCO0FBQ3JELHVCQUF1QixxREFBYztBQUNyQyw0QkFBNEIsMERBQW1CO0FBQy9DLHlCQUF5Qiw4REFBZ0I7QUFDekMsa0JBQWtCLGtEQUFTO0FBQzNCLDhCQUE4QiwyREFBcUI7QUFDbkQsZ0NBQWdDLHFFQUF1QjtBQUN2RCx3QkFBd0Isd0RBQWU7QUFDdkMsNkJBQTZCLDZEQUFvQjtBQUNqRCxzQkFBc0IsbURBQWE7QUFDbkMsMkJBQTJCLHdEQUFrQjtBQUM3QywwQkFBMEIsK0RBQWlCO0FBQzNDLHdDQUF3Qyx1RUFBK0I7QUFDdkUsc0NBQXNDLHFFQUE2QjtBQUNuRSx3Q0FBd0MsdUVBQStCO0FBQ3ZFLHFCQUFxQixrREFBWTtBQUNqQyx5QkFBeUIsK0RBQWdCO0FBQ3pDLDhCQUE4QiwrREFBcUI7QUFDbkQsMkJBQTJCLDREQUFrQjtBQUM3QywyQkFBMkIsZ0VBQWtCO0FBQzdDLHNCQUFzQiwyREFBYTtBQUNuQyxxQkFBcUIsMkRBQVk7QUFDakMsQ0FBQzs7QUFFRDtBQUN3ckM7QUFDeHJDIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19leHBvcnQgfSBmcm9tIFwiLi4vX3ZpcnR1YWwvcm9sbGRvd25fcnVudGltZS5qc1wiO1xuaW1wb3J0IHsgY29udmVydFRvT3BlbkFJSW1hZ2VCbG9jaywgY29udmVydFRvUHJvdmlkZXJDb250ZW50QmxvY2ssIGlzQmFzZTY0Q29udGVudEJsb2NrLCBpc0RhdGFDb250ZW50QmxvY2ssIGlzSURDb250ZW50QmxvY2ssIGlzUGxhaW5UZXh0Q29udGVudEJsb2NrLCBpc1VSTENvbnRlbnRCbG9jaywgcGFyc2VCYXNlNjREYXRhVXJsLCBwYXJzZU1pbWVUeXBlIH0gZnJvbSBcIi4vY29udGVudC9kYXRhLmpzXCI7XG5pbXBvcnQgeyBpc01lc3NhZ2UgfSBmcm9tIFwiLi9tZXNzYWdlLmpzXCI7XG5pbXBvcnQgeyBCYXNlTWVzc2FnZSwgQmFzZU1lc3NhZ2VDaHVuaywgX2lzTWVzc2FnZUZpZWxkV2l0aFJvbGUsIF9tZXJnZURpY3RzLCBfbWVyZ2VMaXN0cywgX21lcmdlT2JqLCBfbWVyZ2VTdGF0dXMsIGlzQmFzZU1lc3NhZ2UsIGlzQmFzZU1lc3NhZ2VDaHVuaywgaXNPcGVuQUlUb29sQ2FsbEFycmF5LCBtZXJnZUNvbnRlbnQgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBtZXJnZVJlc3BvbnNlTWV0YWRhdGEsIG1lcmdlVXNhZ2VNZXRhZGF0YSB9IGZyb20gXCIuL21ldGFkYXRhLmpzXCI7XG5pbXBvcnQgeyBUb29sTWVzc2FnZSwgVG9vbE1lc3NhZ2VDaHVuaywgZGVmYXVsdFRvb2xDYWxsUGFyc2VyLCBpc0RpcmVjdFRvb2xPdXRwdXQsIGlzVG9vbE1lc3NhZ2UsIGlzVG9vbE1lc3NhZ2VDaHVuayB9IGZyb20gXCIuL3Rvb2wuanNcIjtcbmltcG9ydCB7IENoYXRNZXNzYWdlLCBDaGF0TWVzc2FnZUNodW5rLCBpc0NoYXRNZXNzYWdlLCBpc0NoYXRNZXNzYWdlQ2h1bmsgfSBmcm9tIFwiLi9jaGF0LmpzXCI7XG5pbXBvcnQgeyBGdW5jdGlvbk1lc3NhZ2UsIEZ1bmN0aW9uTWVzc2FnZUNodW5rLCBpc0Z1bmN0aW9uTWVzc2FnZSwgaXNGdW5jdGlvbk1lc3NhZ2VDaHVuayB9IGZyb20gXCIuL2Z1bmN0aW9uLmpzXCI7XG5pbXBvcnQgeyBIdW1hbk1lc3NhZ2UsIEh1bWFuTWVzc2FnZUNodW5rLCBpc0h1bWFuTWVzc2FnZSwgaXNIdW1hbk1lc3NhZ2VDaHVuayB9IGZyb20gXCIuL2h1bWFuLmpzXCI7XG5pbXBvcnQgeyBSZW1vdmVNZXNzYWdlIH0gZnJvbSBcIi4vbW9kaWZpZXIuanNcIjtcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2UsIFN5c3RlbU1lc3NhZ2VDaHVuaywgaXNTeXN0ZW1NZXNzYWdlLCBpc1N5c3RlbU1lc3NhZ2VDaHVuayB9IGZyb20gXCIuL3N5c3RlbS5qc1wiO1xuaW1wb3J0IHsgY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UsIGNvbGxhcHNlVG9vbENhbGxDaHVua3MsIGNvbnZlcnRUb0NodW5rLCBnZXRCdWZmZXJTdHJpbmcsIGlpZmUsIG1hcENoYXRNZXNzYWdlc1RvU3RvcmVkTWVzc2FnZXMsIG1hcFN0b3JlZE1lc3NhZ2VUb0NoYXRNZXNzYWdlLCBtYXBTdG9yZWRNZXNzYWdlc1RvQ2hhdE1lc3NhZ2VzIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcbmltcG9ydCB7IEFJTWVzc2FnZSwgQUlNZXNzYWdlQ2h1bmssIGlzQUlNZXNzYWdlLCBpc0FJTWVzc2FnZUNodW5rIH0gZnJvbSBcIi4vYWkuanNcIjtcbmltcG9ydCB7IGRlZmF1bHRUZXh0U3BsaXR0ZXIsIGZpbHRlck1lc3NhZ2VzLCBtZXJnZU1lc3NhZ2VSdW5zLCB0cmltTWVzc2FnZXMgfSBmcm9tIFwiLi90cmFuc2Zvcm1lcnMuanNcIjtcbmltcG9ydCB7IEtOT1dOX0JMT0NLX1RZUEVTIH0gZnJvbSBcIi4vY29udGVudC9pbmRleC5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL21lc3NhZ2VzL2luZGV4LnRzXG52YXIgbWVzc2FnZXNfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQobWVzc2FnZXNfZXhwb3J0cywge1xuXHRBSU1lc3NhZ2U6ICgpID0+IEFJTWVzc2FnZSxcblx0QUlNZXNzYWdlQ2h1bms6ICgpID0+IEFJTWVzc2FnZUNodW5rLFxuXHRCYXNlTWVzc2FnZTogKCkgPT4gQmFzZU1lc3NhZ2UsXG5cdEJhc2VNZXNzYWdlQ2h1bms6ICgpID0+IEJhc2VNZXNzYWdlQ2h1bmssXG5cdENoYXRNZXNzYWdlOiAoKSA9PiBDaGF0TWVzc2FnZSxcblx0Q2hhdE1lc3NhZ2VDaHVuazogKCkgPT4gQ2hhdE1lc3NhZ2VDaHVuayxcblx0RnVuY3Rpb25NZXNzYWdlOiAoKSA9PiBGdW5jdGlvbk1lc3NhZ2UsXG5cdEZ1bmN0aW9uTWVzc2FnZUNodW5rOiAoKSA9PiBGdW5jdGlvbk1lc3NhZ2VDaHVuayxcblx0SHVtYW5NZXNzYWdlOiAoKSA9PiBIdW1hbk1lc3NhZ2UsXG5cdEh1bWFuTWVzc2FnZUNodW5rOiAoKSA9PiBIdW1hbk1lc3NhZ2VDaHVuayxcblx0S05PV05fQkxPQ0tfVFlQRVM6ICgpID0+IEtOT1dOX0JMT0NLX1RZUEVTLFxuXHRSZW1vdmVNZXNzYWdlOiAoKSA9PiBSZW1vdmVNZXNzYWdlLFxuXHRTeXN0ZW1NZXNzYWdlOiAoKSA9PiBTeXN0ZW1NZXNzYWdlLFxuXHRTeXN0ZW1NZXNzYWdlQ2h1bms6ICgpID0+IFN5c3RlbU1lc3NhZ2VDaHVuayxcblx0VG9vbE1lc3NhZ2U6ICgpID0+IFRvb2xNZXNzYWdlLFxuXHRUb29sTWVzc2FnZUNodW5rOiAoKSA9PiBUb29sTWVzc2FnZUNodW5rLFxuXHRfaXNNZXNzYWdlRmllbGRXaXRoUm9sZTogKCkgPT4gX2lzTWVzc2FnZUZpZWxkV2l0aFJvbGUsXG5cdF9tZXJnZURpY3RzOiAoKSA9PiBfbWVyZ2VEaWN0cyxcblx0X21lcmdlTGlzdHM6ICgpID0+IF9tZXJnZUxpc3RzLFxuXHRfbWVyZ2VPYmo6ICgpID0+IF9tZXJnZU9iaixcblx0X21lcmdlU3RhdHVzOiAoKSA9PiBfbWVyZ2VTdGF0dXMsXG5cdGNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlOiAoKSA9PiBjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSxcblx0Y29sbGFwc2VUb29sQ2FsbENodW5rczogKCkgPT4gY29sbGFwc2VUb29sQ2FsbENodW5rcyxcblx0Y29udmVydFRvQ2h1bms6ICgpID0+IGNvbnZlcnRUb0NodW5rLFxuXHRjb252ZXJ0VG9PcGVuQUlJbWFnZUJsb2NrOiAoKSA9PiBjb252ZXJ0VG9PcGVuQUlJbWFnZUJsb2NrLFxuXHRjb252ZXJ0VG9Qcm92aWRlckNvbnRlbnRCbG9jazogKCkgPT4gY29udmVydFRvUHJvdmlkZXJDb250ZW50QmxvY2ssXG5cdGRlZmF1bHRUZXh0U3BsaXR0ZXI6ICgpID0+IGRlZmF1bHRUZXh0U3BsaXR0ZXIsXG5cdGRlZmF1bHRUb29sQ2FsbFBhcnNlcjogKCkgPT4gZGVmYXVsdFRvb2xDYWxsUGFyc2VyLFxuXHRmaWx0ZXJNZXNzYWdlczogKCkgPT4gZmlsdGVyTWVzc2FnZXMsXG5cdGdldEJ1ZmZlclN0cmluZzogKCkgPT4gZ2V0QnVmZmVyU3RyaW5nLFxuXHRpaWZlOiAoKSA9PiBpaWZlLFxuXHRpc0FJTWVzc2FnZTogKCkgPT4gaXNBSU1lc3NhZ2UsXG5cdGlzQUlNZXNzYWdlQ2h1bms6ICgpID0+IGlzQUlNZXNzYWdlQ2h1bmssXG5cdGlzQmFzZTY0Q29udGVudEJsb2NrOiAoKSA9PiBpc0Jhc2U2NENvbnRlbnRCbG9jayxcblx0aXNCYXNlTWVzc2FnZTogKCkgPT4gaXNCYXNlTWVzc2FnZSxcblx0aXNCYXNlTWVzc2FnZUNodW5rOiAoKSA9PiBpc0Jhc2VNZXNzYWdlQ2h1bmssXG5cdGlzQ2hhdE1lc3NhZ2U6ICgpID0+IGlzQ2hhdE1lc3NhZ2UsXG5cdGlzQ2hhdE1lc3NhZ2VDaHVuazogKCkgPT4gaXNDaGF0TWVzc2FnZUNodW5rLFxuXHRpc0RhdGFDb250ZW50QmxvY2s6ICgpID0+IGlzRGF0YUNvbnRlbnRCbG9jayxcblx0aXNEaXJlY3RUb29sT3V0cHV0OiAoKSA9PiBpc0RpcmVjdFRvb2xPdXRwdXQsXG5cdGlzRnVuY3Rpb25NZXNzYWdlOiAoKSA9PiBpc0Z1bmN0aW9uTWVzc2FnZSxcblx0aXNGdW5jdGlvbk1lc3NhZ2VDaHVuazogKCkgPT4gaXNGdW5jdGlvbk1lc3NhZ2VDaHVuayxcblx0aXNIdW1hbk1lc3NhZ2U6ICgpID0+IGlzSHVtYW5NZXNzYWdlLFxuXHRpc0h1bWFuTWVzc2FnZUNodW5rOiAoKSA9PiBpc0h1bWFuTWVzc2FnZUNodW5rLFxuXHRpc0lEQ29udGVudEJsb2NrOiAoKSA9PiBpc0lEQ29udGVudEJsb2NrLFxuXHRpc01lc3NhZ2U6ICgpID0+IGlzTWVzc2FnZSxcblx0aXNPcGVuQUlUb29sQ2FsbEFycmF5OiAoKSA9PiBpc09wZW5BSVRvb2xDYWxsQXJyYXksXG5cdGlzUGxhaW5UZXh0Q29udGVudEJsb2NrOiAoKSA9PiBpc1BsYWluVGV4dENvbnRlbnRCbG9jayxcblx0aXNTeXN0ZW1NZXNzYWdlOiAoKSA9PiBpc1N5c3RlbU1lc3NhZ2UsXG5cdGlzU3lzdGVtTWVzc2FnZUNodW5rOiAoKSA9PiBpc1N5c3RlbU1lc3NhZ2VDaHVuayxcblx0aXNUb29sTWVzc2FnZTogKCkgPT4gaXNUb29sTWVzc2FnZSxcblx0aXNUb29sTWVzc2FnZUNodW5rOiAoKSA9PiBpc1Rvb2xNZXNzYWdlQ2h1bmssXG5cdGlzVVJMQ29udGVudEJsb2NrOiAoKSA9PiBpc1VSTENvbnRlbnRCbG9jayxcblx0bWFwQ2hhdE1lc3NhZ2VzVG9TdG9yZWRNZXNzYWdlczogKCkgPT4gbWFwQ2hhdE1lc3NhZ2VzVG9TdG9yZWRNZXNzYWdlcyxcblx0bWFwU3RvcmVkTWVzc2FnZVRvQ2hhdE1lc3NhZ2U6ICgpID0+IG1hcFN0b3JlZE1lc3NhZ2VUb0NoYXRNZXNzYWdlLFxuXHRtYXBTdG9yZWRNZXNzYWdlc1RvQ2hhdE1lc3NhZ2VzOiAoKSA9PiBtYXBTdG9yZWRNZXNzYWdlc1RvQ2hhdE1lc3NhZ2VzLFxuXHRtZXJnZUNvbnRlbnQ6ICgpID0+IG1lcmdlQ29udGVudCxcblx0bWVyZ2VNZXNzYWdlUnVuczogKCkgPT4gbWVyZ2VNZXNzYWdlUnVucyxcblx0bWVyZ2VSZXNwb25zZU1ldGFkYXRhOiAoKSA9PiBtZXJnZVJlc3BvbnNlTWV0YWRhdGEsXG5cdG1lcmdlVXNhZ2VNZXRhZGF0YTogKCkgPT4gbWVyZ2VVc2FnZU1ldGFkYXRhLFxuXHRwYXJzZUJhc2U2NERhdGFVcmw6ICgpID0+IHBhcnNlQmFzZTY0RGF0YVVybCxcblx0cGFyc2VNaW1lVHlwZTogKCkgPT4gcGFyc2VNaW1lVHlwZSxcblx0dHJpbU1lc3NhZ2VzOiAoKSA9PiB0cmltTWVzc2FnZXNcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEFJTWVzc2FnZSwgQUlNZXNzYWdlQ2h1bmssIEJhc2VNZXNzYWdlLCBCYXNlTWVzc2FnZUNodW5rLCBDaGF0TWVzc2FnZSwgQ2hhdE1lc3NhZ2VDaHVuaywgRnVuY3Rpb25NZXNzYWdlLCBGdW5jdGlvbk1lc3NhZ2VDaHVuaywgSHVtYW5NZXNzYWdlLCBIdW1hbk1lc3NhZ2VDaHVuaywgS05PV05fQkxPQ0tfVFlQRVMsIFJlbW92ZU1lc3NhZ2UsIFN5c3RlbU1lc3NhZ2UsIFN5c3RlbU1lc3NhZ2VDaHVuaywgVG9vbE1lc3NhZ2UsIFRvb2xNZXNzYWdlQ2h1bmssIF9pc01lc3NhZ2VGaWVsZFdpdGhSb2xlLCBfbWVyZ2VEaWN0cywgX21lcmdlTGlzdHMsIF9tZXJnZU9iaiwgX21lcmdlU3RhdHVzLCBjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSwgY29sbGFwc2VUb29sQ2FsbENodW5rcywgY29udmVydFRvQ2h1bmssIGNvbnZlcnRUb09wZW5BSUltYWdlQmxvY2ssIGNvbnZlcnRUb1Byb3ZpZGVyQ29udGVudEJsb2NrLCBkZWZhdWx0VGV4dFNwbGl0dGVyLCBkZWZhdWx0VG9vbENhbGxQYXJzZXIsIGZpbHRlck1lc3NhZ2VzLCBnZXRCdWZmZXJTdHJpbmcsIGlpZmUsIGlzQUlNZXNzYWdlLCBpc0FJTWVzc2FnZUNodW5rLCBpc0Jhc2U2NENvbnRlbnRCbG9jaywgaXNCYXNlTWVzc2FnZSwgaXNCYXNlTWVzc2FnZUNodW5rLCBpc0NoYXRNZXNzYWdlLCBpc0NoYXRNZXNzYWdlQ2h1bmssIGlzRGF0YUNvbnRlbnRCbG9jaywgaXNEaXJlY3RUb29sT3V0cHV0LCBpc0Z1bmN0aW9uTWVzc2FnZSwgaXNGdW5jdGlvbk1lc3NhZ2VDaHVuaywgaXNIdW1hbk1lc3NhZ2UsIGlzSHVtYW5NZXNzYWdlQ2h1bmssIGlzSURDb250ZW50QmxvY2ssIGlzTWVzc2FnZSwgaXNPcGVuQUlUb29sQ2FsbEFycmF5LCBpc1BsYWluVGV4dENvbnRlbnRCbG9jaywgaXNTeXN0ZW1NZXNzYWdlLCBpc1N5c3RlbU1lc3NhZ2VDaHVuaywgaXNUb29sTWVzc2FnZSwgaXNUb29sTWVzc2FnZUNodW5rLCBpc1VSTENvbnRlbnRCbG9jaywgbWFwQ2hhdE1lc3NhZ2VzVG9TdG9yZWRNZXNzYWdlcywgbWFwU3RvcmVkTWVzc2FnZVRvQ2hhdE1lc3NhZ2UsIG1hcFN0b3JlZE1lc3NhZ2VzVG9DaGF0TWVzc2FnZXMsIG1lcmdlQ29udGVudCwgbWVyZ2VNZXNzYWdlUnVucywgbWVyZ2VSZXNwb25zZU1ldGFkYXRhLCBtZXJnZVVzYWdlTWV0YWRhdGEsIG1lc3NhZ2VzX2V4cG9ydHMsIHBhcnNlQmFzZTY0RGF0YVVybCwgcGFyc2VNaW1lVHlwZSwgdHJpbU1lc3NhZ2VzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/messages/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/messages/message.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/message.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isMessage: () => (/* binding */ isMessage)\n/* harmony export */ });\n//#region src/messages/message.ts\n/**\n* Type guard to check if a value is a valid Message object.\n*\n* @param message - The value to check\n* @returns true if the value is a valid Message object, false otherwise\n*/\nfunction isMessage(message) {\n\treturn typeof message === \"object\" && message !== null && \"type\" in message && \"content\" in message && (typeof message.content === \"string\" || Array.isArray(message.content));\n}\n\n//#endregion\n\n//# sourceMappingURL=message.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvbWVzc2FnZS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDcUI7QUFDckIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9tZXNzYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvbWVzc2FnZXMvbWVzc2FnZS50c1xuLyoqXG4qIFR5cGUgZ3VhcmQgdG8gY2hlY2sgaWYgYSB2YWx1ZSBpcyBhIHZhbGlkIE1lc3NhZ2Ugb2JqZWN0LlxuKlxuKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSB2YWx1ZSB0byBjaGVja1xuKiBAcmV0dXJucyB0cnVlIGlmIHRoZSB2YWx1ZSBpcyBhIHZhbGlkIE1lc3NhZ2Ugb2JqZWN0LCBmYWxzZSBvdGhlcndpc2VcbiovXG5mdW5jdGlvbiBpc01lc3NhZ2UobWVzc2FnZSkge1xuXHRyZXR1cm4gdHlwZW9mIG1lc3NhZ2UgPT09IFwib2JqZWN0XCIgJiYgbWVzc2FnZSAhPT0gbnVsbCAmJiBcInR5cGVcIiBpbiBtZXNzYWdlICYmIFwiY29udGVudFwiIGluIG1lc3NhZ2UgJiYgKHR5cGVvZiBtZXNzYWdlLmNvbnRlbnQgPT09IFwic3RyaW5nXCIgfHwgQXJyYXkuaXNBcnJheShtZXNzYWdlLmNvbnRlbnQpKTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBpc01lc3NhZ2UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lc3NhZ2UuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/messages/message.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/messages/metadata.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/metadata.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mergeResponseMetadata: () => (/* binding */ mergeResponseMetadata),\n/* harmony export */   mergeUsageMetadata: () => (/* binding */ mergeUsageMetadata)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/base.js\");\n\n\n//#region src/messages/metadata.ts\nfunction mergeResponseMetadata(a, b) {\n\tconst output = (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(a, b) ?? {};\n\treturn output;\n}\nfunction mergeModalitiesTokenDetails(a, b) {\n\tconst output = {};\n\tif (a?.audio !== void 0 || b?.audio !== void 0) output.audio = (a?.audio ?? 0) + (b?.audio ?? 0);\n\tif (a?.image !== void 0 || b?.image !== void 0) output.image = (a?.image ?? 0) + (b?.image ?? 0);\n\tif (a?.video !== void 0 || b?.video !== void 0) output.video = (a?.video ?? 0) + (b?.video ?? 0);\n\tif (a?.document !== void 0 || b?.document !== void 0) output.document = (a?.document ?? 0) + (b?.document ?? 0);\n\tif (a?.text !== void 0 || b?.text !== void 0) output.text = (a?.text ?? 0) + (b?.text ?? 0);\n\treturn output;\n}\nfunction mergeInputTokenDetails(a, b) {\n\tconst output = { ...mergeModalitiesTokenDetails(a, b) };\n\tif (a?.cache_read !== void 0 || b?.cache_read !== void 0) output.cache_read = (a?.cache_read ?? 0) + (b?.cache_read ?? 0);\n\tif (a?.cache_creation !== void 0 || b?.cache_creation !== void 0) output.cache_creation = (a?.cache_creation ?? 0) + (b?.cache_creation ?? 0);\n\treturn output;\n}\nfunction mergeOutputTokenDetails(a, b) {\n\tconst output = { ...mergeModalitiesTokenDetails(a, b) };\n\tif (a?.reasoning !== void 0 || b?.reasoning !== void 0) output.reasoning = (a?.reasoning ?? 0) + (b?.reasoning ?? 0);\n\treturn output;\n}\nfunction mergeUsageMetadata(a, b) {\n\treturn {\n\t\tinput_tokens: (a?.input_tokens ?? 0) + (b?.input_tokens ?? 0),\n\t\toutput_tokens: (a?.output_tokens ?? 0) + (b?.output_tokens ?? 0),\n\t\ttotal_tokens: (a?.total_tokens ?? 0) + (b?.total_tokens ?? 0),\n\t\tinput_token_details: mergeInputTokenDetails(a?.input_token_details, b?.input_token_details),\n\t\toutput_token_details: mergeOutputTokenDetails(a?.output_token_details, b?.output_token_details)\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=metadata.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvbWV0YWRhdGEuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXdDOztBQUV4QztBQUNBO0FBQ0EsZ0JBQWdCLHFEQUFXO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNxRDtBQUNyRCIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL21ldGFkYXRhLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9tZXJnZURpY3RzIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL21lc3NhZ2VzL21ldGFkYXRhLnRzXG5mdW5jdGlvbiBtZXJnZVJlc3BvbnNlTWV0YWRhdGEoYSwgYikge1xuXHRjb25zdCBvdXRwdXQgPSBfbWVyZ2VEaWN0cyhhLCBiKSA/PyB7fTtcblx0cmV0dXJuIG91dHB1dDtcbn1cbmZ1bmN0aW9uIG1lcmdlTW9kYWxpdGllc1Rva2VuRGV0YWlscyhhLCBiKSB7XG5cdGNvbnN0IG91dHB1dCA9IHt9O1xuXHRpZiAoYT8uYXVkaW8gIT09IHZvaWQgMCB8fCBiPy5hdWRpbyAhPT0gdm9pZCAwKSBvdXRwdXQuYXVkaW8gPSAoYT8uYXVkaW8gPz8gMCkgKyAoYj8uYXVkaW8gPz8gMCk7XG5cdGlmIChhPy5pbWFnZSAhPT0gdm9pZCAwIHx8IGI/LmltYWdlICE9PSB2b2lkIDApIG91dHB1dC5pbWFnZSA9IChhPy5pbWFnZSA/PyAwKSArIChiPy5pbWFnZSA/PyAwKTtcblx0aWYgKGE/LnZpZGVvICE9PSB2b2lkIDAgfHwgYj8udmlkZW8gIT09IHZvaWQgMCkgb3V0cHV0LnZpZGVvID0gKGE/LnZpZGVvID8/IDApICsgKGI/LnZpZGVvID8/IDApO1xuXHRpZiAoYT8uZG9jdW1lbnQgIT09IHZvaWQgMCB8fCBiPy5kb2N1bWVudCAhPT0gdm9pZCAwKSBvdXRwdXQuZG9jdW1lbnQgPSAoYT8uZG9jdW1lbnQgPz8gMCkgKyAoYj8uZG9jdW1lbnQgPz8gMCk7XG5cdGlmIChhPy50ZXh0ICE9PSB2b2lkIDAgfHwgYj8udGV4dCAhPT0gdm9pZCAwKSBvdXRwdXQudGV4dCA9IChhPy50ZXh0ID8/IDApICsgKGI/LnRleHQgPz8gMCk7XG5cdHJldHVybiBvdXRwdXQ7XG59XG5mdW5jdGlvbiBtZXJnZUlucHV0VG9rZW5EZXRhaWxzKGEsIGIpIHtcblx0Y29uc3Qgb3V0cHV0ID0geyAuLi5tZXJnZU1vZGFsaXRpZXNUb2tlbkRldGFpbHMoYSwgYikgfTtcblx0aWYgKGE/LmNhY2hlX3JlYWQgIT09IHZvaWQgMCB8fCBiPy5jYWNoZV9yZWFkICE9PSB2b2lkIDApIG91dHB1dC5jYWNoZV9yZWFkID0gKGE/LmNhY2hlX3JlYWQgPz8gMCkgKyAoYj8uY2FjaGVfcmVhZCA/PyAwKTtcblx0aWYgKGE/LmNhY2hlX2NyZWF0aW9uICE9PSB2b2lkIDAgfHwgYj8uY2FjaGVfY3JlYXRpb24gIT09IHZvaWQgMCkgb3V0cHV0LmNhY2hlX2NyZWF0aW9uID0gKGE/LmNhY2hlX2NyZWF0aW9uID8/IDApICsgKGI/LmNhY2hlX2NyZWF0aW9uID8/IDApO1xuXHRyZXR1cm4gb3V0cHV0O1xufVxuZnVuY3Rpb24gbWVyZ2VPdXRwdXRUb2tlbkRldGFpbHMoYSwgYikge1xuXHRjb25zdCBvdXRwdXQgPSB7IC4uLm1lcmdlTW9kYWxpdGllc1Rva2VuRGV0YWlscyhhLCBiKSB9O1xuXHRpZiAoYT8ucmVhc29uaW5nICE9PSB2b2lkIDAgfHwgYj8ucmVhc29uaW5nICE9PSB2b2lkIDApIG91dHB1dC5yZWFzb25pbmcgPSAoYT8ucmVhc29uaW5nID8/IDApICsgKGI/LnJlYXNvbmluZyA/PyAwKTtcblx0cmV0dXJuIG91dHB1dDtcbn1cbmZ1bmN0aW9uIG1lcmdlVXNhZ2VNZXRhZGF0YShhLCBiKSB7XG5cdHJldHVybiB7XG5cdFx0aW5wdXRfdG9rZW5zOiAoYT8uaW5wdXRfdG9rZW5zID8/IDApICsgKGI/LmlucHV0X3Rva2VucyA/PyAwKSxcblx0XHRvdXRwdXRfdG9rZW5zOiAoYT8ub3V0cHV0X3Rva2VucyA/PyAwKSArIChiPy5vdXRwdXRfdG9rZW5zID8/IDApLFxuXHRcdHRvdGFsX3Rva2VuczogKGE/LnRvdGFsX3Rva2VucyA/PyAwKSArIChiPy50b3RhbF90b2tlbnMgPz8gMCksXG5cdFx0aW5wdXRfdG9rZW5fZGV0YWlsczogbWVyZ2VJbnB1dFRva2VuRGV0YWlscyhhPy5pbnB1dF90b2tlbl9kZXRhaWxzLCBiPy5pbnB1dF90b2tlbl9kZXRhaWxzKSxcblx0XHRvdXRwdXRfdG9rZW5fZGV0YWlsczogbWVyZ2VPdXRwdXRUb2tlbkRldGFpbHMoYT8ub3V0cHV0X3Rva2VuX2RldGFpbHMsIGI/Lm91dHB1dF90b2tlbl9kZXRhaWxzKVxuXHR9O1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IG1lcmdlUmVzcG9uc2VNZXRhZGF0YSwgbWVyZ2VVc2FnZU1ldGFkYXRhIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXRhZGF0YS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/messages/metadata.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/messages/modifier.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/modifier.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RemoveMessage: () => (/* binding */ RemoveMessage)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/base.js\");\n\n\n//#region src/messages/modifier.ts\n/**\n* Message responsible for deleting other messages.\n*/\nvar RemoveMessage = class extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n\ttype = \"remove\";\n\t/**\n\t* The ID of the message to remove.\n\t*/\n\tid;\n\tconstructor(fields) {\n\t\tsuper({\n\t\t\t...fields,\n\t\t\tcontent: []\n\t\t});\n\t\tthis.id = fields.id;\n\t}\n\tget _printableFields() {\n\t\treturn {\n\t\t\t...super._printableFields,\n\t\t\tid: this.id\n\t\t};\n\t}\n\tstatic isInstance(obj) {\n\t\treturn super.isInstance(obj) && obj.type === \"remove\";\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=modifier.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvbW9kaWZpZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBd0M7O0FBRXhDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGlEQUFXO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDeUI7QUFDekIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9tb2RpZmllci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlTWVzc2FnZSB9IGZyb20gXCIuL2Jhc2UuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9tZXNzYWdlcy9tb2RpZmllci50c1xuLyoqXG4qIE1lc3NhZ2UgcmVzcG9uc2libGUgZm9yIGRlbGV0aW5nIG90aGVyIG1lc3NhZ2VzLlxuKi9cbnZhciBSZW1vdmVNZXNzYWdlID0gY2xhc3MgZXh0ZW5kcyBCYXNlTWVzc2FnZSB7XG5cdHR5cGUgPSBcInJlbW92ZVwiO1xuXHQvKipcblx0KiBUaGUgSUQgb2YgdGhlIG1lc3NhZ2UgdG8gcmVtb3ZlLlxuXHQqL1xuXHRpZDtcblx0Y29uc3RydWN0b3IoZmllbGRzKSB7XG5cdFx0c3VwZXIoe1xuXHRcdFx0Li4uZmllbGRzLFxuXHRcdFx0Y29udGVudDogW11cblx0XHR9KTtcblx0XHR0aGlzLmlkID0gZmllbGRzLmlkO1xuXHR9XG5cdGdldCBfcHJpbnRhYmxlRmllbGRzKCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHQuLi5zdXBlci5fcHJpbnRhYmxlRmllbGRzLFxuXHRcdFx0aWQ6IHRoaXMuaWRcblx0XHR9O1xuXHR9XG5cdHN0YXRpYyBpc0luc3RhbmNlKG9iaikge1xuXHRcdHJldHVybiBzdXBlci5pc0luc3RhbmNlKG9iaikgJiYgb2JqLnR5cGUgPT09IFwicmVtb3ZlXCI7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgUmVtb3ZlTWVzc2FnZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bW9kaWZpZXIuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/messages/modifier.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/messages/system.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/system.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SystemMessage: () => (/* binding */ SystemMessage),\n/* harmony export */   SystemMessageChunk: () => (/* binding */ SystemMessageChunk),\n/* harmony export */   isSystemMessage: () => (/* binding */ isSystemMessage),\n/* harmony export */   isSystemMessageChunk: () => (/* binding */ isSystemMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/base.js\");\n\n\n//#region src/messages/system.ts\n/**\n* Represents a system message in a conversation.\n*/\nvar SystemMessage = class SystemMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n\tstatic lc_name() {\n\t\treturn \"SystemMessage\";\n\t}\n\ttype = \"system\";\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t}\n\t/**\n\t* Concatenates a string or another system message with the current system message.\n\t* @param chunk - The chunk to concatenate with the system message.\n\t* @returns A new system message with the concatenated content.\n\t*/\n\tconcat(chunk) {\n\t\tif (typeof chunk === \"string\") return new SystemMessage({\n\t\t\t...this,\n\t\t\tcontent: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk)\n\t\t});\n\t\tif (SystemMessage.isInstance(chunk)) return new SystemMessage({\n\t\t\t...this,\n\t\t\tadditional_kwargs: {\n\t\t\t\t...this.additional_kwargs,\n\t\t\t\t...chunk.additional_kwargs\n\t\t\t},\n\t\t\tresponse_metadata: {\n\t\t\t\t...this.response_metadata,\n\t\t\t\t...chunk.response_metadata\n\t\t\t},\n\t\t\tcontent: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content)\n\t\t});\n\t\tthrow new Error(\"Unexpected chunk type for system message\");\n\t}\n\tstatic isInstance(obj) {\n\t\treturn super.isInstance(obj) && obj.type === \"system\";\n\t}\n};\n/**\n* Represents a chunk of a system message, which can be concatenated with\n* other system message chunks.\n*/\nvar SystemMessageChunk = class extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n\tstatic lc_name() {\n\t\treturn \"SystemMessageChunk\";\n\t}\n\ttype = \"system\";\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t}\n\tconcat(chunk) {\n\t\tconst Cls = this.constructor;\n\t\treturn new Cls({\n\t\t\tcontent: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n\t\t\tadditional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n\t\t\tresponse_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n\t\t\tid: this.id ?? chunk.id\n\t\t});\n\t}\n\tstatic isInstance(obj) {\n\t\treturn super.isInstance(obj) && obj.type === \"system\";\n\t}\n};\n/**\n* @deprecated Use {@link SystemMessage.isInstance} instead\n*/\nfunction isSystemMessage(x) {\n\treturn x._getType() === \"system\";\n}\n/**\n* @deprecated Use {@link SystemMessageChunk.isInstance} instead\n*/\nfunction isSystemMessageChunk(x) {\n\treturn x._getType() === \"system\";\n}\n\n//#endregion\n\n//# sourceMappingURL=system.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvc3lzdGVtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXFGOztBQUVyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxpREFBVztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHNEQUFZO0FBQ3hCLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixZQUFZLHNEQUFZO0FBQ3hCLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxzREFBZ0I7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHNEQUFZO0FBQ3hCLHNCQUFzQixxREFBVztBQUNqQyxzQkFBc0IscURBQVc7QUFDakM7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGdDQUFnQztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHFDQUFxQztBQUN4RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNvRjtBQUNwRiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL3N5c3RlbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlTWVzc2FnZSwgQmFzZU1lc3NhZ2VDaHVuaywgX21lcmdlRGljdHMsIG1lcmdlQ29udGVudCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9tZXNzYWdlcy9zeXN0ZW0udHNcbi8qKlxuKiBSZXByZXNlbnRzIGEgc3lzdGVtIG1lc3NhZ2UgaW4gYSBjb252ZXJzYXRpb24uXG4qL1xudmFyIFN5c3RlbU1lc3NhZ2UgPSBjbGFzcyBTeXN0ZW1NZXNzYWdlIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xuXHRzdGF0aWMgbGNfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJTeXN0ZW1NZXNzYWdlXCI7XG5cdH1cblx0dHlwZSA9IFwic3lzdGVtXCI7XG5cdGNvbnN0cnVjdG9yKGZpZWxkcykge1xuXHRcdHN1cGVyKGZpZWxkcyk7XG5cdH1cblx0LyoqXG5cdCogQ29uY2F0ZW5hdGVzIGEgc3RyaW5nIG9yIGFub3RoZXIgc3lzdGVtIG1lc3NhZ2Ugd2l0aCB0aGUgY3VycmVudCBzeXN0ZW0gbWVzc2FnZS5cblx0KiBAcGFyYW0gY2h1bmsgLSBUaGUgY2h1bmsgdG8gY29uY2F0ZW5hdGUgd2l0aCB0aGUgc3lzdGVtIG1lc3NhZ2UuXG5cdCogQHJldHVybnMgQSBuZXcgc3lzdGVtIG1lc3NhZ2Ugd2l0aCB0aGUgY29uY2F0ZW5hdGVkIGNvbnRlbnQuXG5cdCovXG5cdGNvbmNhdChjaHVuaykge1xuXHRcdGlmICh0eXBlb2YgY2h1bmsgPT09IFwic3RyaW5nXCIpIHJldHVybiBuZXcgU3lzdGVtTWVzc2FnZSh7XG5cdFx0XHQuLi50aGlzLFxuXHRcdFx0Y29udGVudDogbWVyZ2VDb250ZW50KHRoaXMuY29udGVudCwgY2h1bmspXG5cdFx0fSk7XG5cdFx0aWYgKFN5c3RlbU1lc3NhZ2UuaXNJbnN0YW5jZShjaHVuaykpIHJldHVybiBuZXcgU3lzdGVtTWVzc2FnZSh7XG5cdFx0XHQuLi50aGlzLFxuXHRcdFx0YWRkaXRpb25hbF9rd2FyZ3M6IHtcblx0XHRcdFx0Li4udGhpcy5hZGRpdGlvbmFsX2t3YXJncyxcblx0XHRcdFx0Li4uY2h1bmsuYWRkaXRpb25hbF9rd2FyZ3Ncblx0XHRcdH0sXG5cdFx0XHRyZXNwb25zZV9tZXRhZGF0YToge1xuXHRcdFx0XHQuLi50aGlzLnJlc3BvbnNlX21ldGFkYXRhLFxuXHRcdFx0XHQuLi5jaHVuay5yZXNwb25zZV9tZXRhZGF0YVxuXHRcdFx0fSxcblx0XHRcdGNvbnRlbnQ6IG1lcmdlQ29udGVudCh0aGlzLmNvbnRlbnQsIGNodW5rLmNvbnRlbnQpXG5cdFx0fSk7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBjaHVuayB0eXBlIGZvciBzeXN0ZW0gbWVzc2FnZVwiKTtcblx0fVxuXHRzdGF0aWMgaXNJbnN0YW5jZShvYmopIHtcblx0XHRyZXR1cm4gc3VwZXIuaXNJbnN0YW5jZShvYmopICYmIG9iai50eXBlID09PSBcInN5c3RlbVwiO1xuXHR9XG59O1xuLyoqXG4qIFJlcHJlc2VudHMgYSBjaHVuayBvZiBhIHN5c3RlbSBtZXNzYWdlLCB3aGljaCBjYW4gYmUgY29uY2F0ZW5hdGVkIHdpdGhcbiogb3RoZXIgc3lzdGVtIG1lc3NhZ2UgY2h1bmtzLlxuKi9cbnZhciBTeXN0ZW1NZXNzYWdlQ2h1bmsgPSBjbGFzcyBleHRlbmRzIEJhc2VNZXNzYWdlQ2h1bmsge1xuXHRzdGF0aWMgbGNfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJTeXN0ZW1NZXNzYWdlQ2h1bmtcIjtcblx0fVxuXHR0eXBlID0gXCJzeXN0ZW1cIjtcblx0Y29uc3RydWN0b3IoZmllbGRzKSB7XG5cdFx0c3VwZXIoZmllbGRzKTtcblx0fVxuXHRjb25jYXQoY2h1bmspIHtcblx0XHRjb25zdCBDbHMgPSB0aGlzLmNvbnN0cnVjdG9yO1xuXHRcdHJldHVybiBuZXcgQ2xzKHtcblx0XHRcdGNvbnRlbnQ6IG1lcmdlQ29udGVudCh0aGlzLmNvbnRlbnQsIGNodW5rLmNvbnRlbnQpLFxuXHRcdFx0YWRkaXRpb25hbF9rd2FyZ3M6IF9tZXJnZURpY3RzKHRoaXMuYWRkaXRpb25hbF9rd2FyZ3MsIGNodW5rLmFkZGl0aW9uYWxfa3dhcmdzKSxcblx0XHRcdHJlc3BvbnNlX21ldGFkYXRhOiBfbWVyZ2VEaWN0cyh0aGlzLnJlc3BvbnNlX21ldGFkYXRhLCBjaHVuay5yZXNwb25zZV9tZXRhZGF0YSksXG5cdFx0XHRpZDogdGhpcy5pZCA/PyBjaHVuay5pZFxuXHRcdH0pO1xuXHR9XG5cdHN0YXRpYyBpc0luc3RhbmNlKG9iaikge1xuXHRcdHJldHVybiBzdXBlci5pc0luc3RhbmNlKG9iaikgJiYgb2JqLnR5cGUgPT09IFwic3lzdGVtXCI7XG5cdH1cbn07XG4vKipcbiogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayBTeXN0ZW1NZXNzYWdlLmlzSW5zdGFuY2V9IGluc3RlYWRcbiovXG5mdW5jdGlvbiBpc1N5c3RlbU1lc3NhZ2UoeCkge1xuXHRyZXR1cm4geC5fZ2V0VHlwZSgpID09PSBcInN5c3RlbVwiO1xufVxuLyoqXG4qIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgU3lzdGVtTWVzc2FnZUNodW5rLmlzSW5zdGFuY2V9IGluc3RlYWRcbiovXG5mdW5jdGlvbiBpc1N5c3RlbU1lc3NhZ2VDaHVuayh4KSB7XG5cdHJldHVybiB4Ll9nZXRUeXBlKCkgPT09IFwic3lzdGVtXCI7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgU3lzdGVtTWVzc2FnZSwgU3lzdGVtTWVzc2FnZUNodW5rLCBpc1N5c3RlbU1lc3NhZ2UsIGlzU3lzdGVtTWVzc2FnZUNodW5rIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zeXN0ZW0uanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/messages/system.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/messages/tool.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/tool.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ToolMessage: () => (/* binding */ ToolMessage),\n/* harmony export */   ToolMessageChunk: () => (/* binding */ ToolMessageChunk),\n/* harmony export */   defaultToolCallParser: () => (/* binding */ defaultToolCallParser),\n/* harmony export */   isDirectToolOutput: () => (/* binding */ isDirectToolOutput),\n/* harmony export */   isToolMessage: () => (/* binding */ isToolMessage),\n/* harmony export */   isToolMessageChunk: () => (/* binding */ isToolMessageChunk),\n/* harmony export */   tool_exports: () => (/* binding */ tool_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/base.js\");\n\n\n\n//#region src/messages/tool.ts\nvar tool_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(tool_exports, {\n\tToolMessage: () => ToolMessage,\n\tToolMessageChunk: () => ToolMessageChunk,\n\tdefaultToolCallParser: () => defaultToolCallParser,\n\tisDirectToolOutput: () => isDirectToolOutput,\n\tisToolMessage: () => isToolMessage,\n\tisToolMessageChunk: () => isToolMessageChunk\n});\nfunction isDirectToolOutput(x) {\n\treturn x != null && typeof x === \"object\" && \"lc_direct_tool_output\" in x && x.lc_direct_tool_output === true;\n}\n/**\n* Represents a tool message in a conversation.\n*/\nvar ToolMessage = class extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessage {\n\tstatic lc_name() {\n\t\treturn \"ToolMessage\";\n\t}\n\tget lc_aliases() {\n\t\treturn { tool_call_id: \"tool_call_id\" };\n\t}\n\tlc_direct_tool_output = true;\n\ttype = \"tool\";\n\t/**\n\t* Status of the tool invocation.\n\t* @version 0.2.19\n\t*/\n\tstatus;\n\ttool_call_id;\n\tmetadata;\n\t/**\n\t* Artifact of the Tool execution which is not meant to be sent to the model.\n\t*\n\t* Should only be specified if it is different from the message content, e.g. if only\n\t* a subset of the full tool output is being passed as message content but the full\n\t* output is needed in other parts of the code.\n\t*/\n\tartifact;\n\tconstructor(fields, tool_call_id, name) {\n\t\tconst toolMessageFields = typeof fields === \"string\" || Array.isArray(fields) ? {\n\t\t\tcontent: fields,\n\t\t\tname,\n\t\t\ttool_call_id\n\t\t} : fields;\n\t\tsuper(toolMessageFields);\n\t\tthis.tool_call_id = toolMessageFields.tool_call_id;\n\t\tthis.artifact = toolMessageFields.artifact;\n\t\tthis.status = toolMessageFields.status;\n\t\tthis.metadata = toolMessageFields.metadata;\n\t}\n\tstatic isInstance(message) {\n\t\treturn super.isInstance(message) && message.type === \"tool\";\n\t}\n\tget _printableFields() {\n\t\treturn {\n\t\t\t...super._printableFields,\n\t\t\ttool_call_id: this.tool_call_id,\n\t\t\tartifact: this.artifact\n\t\t};\n\t}\n};\n/**\n* Represents a chunk of a tool message, which can be concatenated\n* with other tool message chunks.\n*/\nvar ToolMessageChunk = class extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessageChunk {\n\ttype = \"tool\";\n\ttool_call_id;\n\t/**\n\t* Status of the tool invocation.\n\t* @version 0.2.19\n\t*/\n\tstatus;\n\t/**\n\t* Artifact of the Tool execution which is not meant to be sent to the model.\n\t*\n\t* Should only be specified if it is different from the message content, e.g. if only\n\t* a subset of the full tool output is being passed as message content but the full\n\t* output is needed in other parts of the code.\n\t*/\n\tartifact;\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.tool_call_id = fields.tool_call_id;\n\t\tthis.artifact = fields.artifact;\n\t\tthis.status = fields.status;\n\t}\n\tstatic lc_name() {\n\t\treturn \"ToolMessageChunk\";\n\t}\n\tconcat(chunk) {\n\t\tconst Cls = this.constructor;\n\t\treturn new Cls({\n\t\t\tcontent: (0,_base_js__WEBPACK_IMPORTED_MODULE_1__.mergeContent)(this.content, chunk.content),\n\t\t\tadditional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_1__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n\t\t\tresponse_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_1__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n\t\t\tartifact: (0,_base_js__WEBPACK_IMPORTED_MODULE_1__._mergeObj)(this.artifact, chunk.artifact),\n\t\t\ttool_call_id: this.tool_call_id,\n\t\t\tid: this.id ?? chunk.id,\n\t\t\tstatus: (0,_base_js__WEBPACK_IMPORTED_MODULE_1__._mergeStatus)(this.status, chunk.status)\n\t\t});\n\t}\n\tget _printableFields() {\n\t\treturn {\n\t\t\t...super._printableFields,\n\t\t\ttool_call_id: this.tool_call_id,\n\t\t\tartifact: this.artifact\n\t\t};\n\t}\n};\nfunction defaultToolCallParser(rawToolCalls) {\n\tconst toolCalls = [];\n\tconst invalidToolCalls = [];\n\tfor (const toolCall of rawToolCalls) if (!toolCall.function) continue;\n\telse {\n\t\tconst functionName = toolCall.function.name;\n\t\ttry {\n\t\t\tconst functionArgs = JSON.parse(toolCall.function.arguments);\n\t\t\ttoolCalls.push({\n\t\t\t\tname: functionName || \"\",\n\t\t\t\targs: functionArgs || {},\n\t\t\t\tid: toolCall.id\n\t\t\t});\n\t\t} catch {\n\t\t\tinvalidToolCalls.push({\n\t\t\t\tname: functionName,\n\t\t\t\targs: toolCall.function.arguments,\n\t\t\t\tid: toolCall.id,\n\t\t\t\terror: \"Malformed args.\"\n\t\t\t});\n\t\t}\n\t}\n\treturn [toolCalls, invalidToolCalls];\n}\n/**\n* @deprecated Use {@link ToolMessage.isInstance} instead\n*/\nfunction isToolMessage(x) {\n\treturn typeof x === \"object\" && x !== null && \"getType\" in x && typeof x.getType === \"function\" && x.getType() === \"tool\";\n}\n/**\n* @deprecated Use {@link ToolMessageChunk.isInstance} instead\n*/\nfunction isToolMessageChunk(x) {\n\treturn x._getType() === \"tool\";\n}\n\n//#endregion\n\n//# sourceMappingURL=tool.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvdG9vbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBMkQ7QUFDbUQ7O0FBRTlHO0FBQ0E7QUFDQSxzRUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsaURBQVc7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsc0RBQWdCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksc0RBQVk7QUFDeEIsc0JBQXNCLHFEQUFXO0FBQ2pDLHNCQUFzQixxREFBVztBQUNqQyxhQUFhLG1EQUFTO0FBQ3RCO0FBQ0E7QUFDQSxXQUFXLHNEQUFZO0FBQ3ZCLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBLElBQUk7QUFDSixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDhCQUE4QjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLG1DQUFtQztBQUN0RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNxSTtBQUNySSIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL3Rvb2wuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19leHBvcnQgfSBmcm9tIFwiLi4vX3ZpcnR1YWwvcm9sbGRvd25fcnVudGltZS5qc1wiO1xuaW1wb3J0IHsgQmFzZU1lc3NhZ2UsIEJhc2VNZXNzYWdlQ2h1bmssIF9tZXJnZURpY3RzLCBfbWVyZ2VPYmosIF9tZXJnZVN0YXR1cywgbWVyZ2VDb250ZW50IH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL21lc3NhZ2VzL3Rvb2wudHNcbnZhciB0b29sX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KHRvb2xfZXhwb3J0cywge1xuXHRUb29sTWVzc2FnZTogKCkgPT4gVG9vbE1lc3NhZ2UsXG5cdFRvb2xNZXNzYWdlQ2h1bms6ICgpID0+IFRvb2xNZXNzYWdlQ2h1bmssXG5cdGRlZmF1bHRUb29sQ2FsbFBhcnNlcjogKCkgPT4gZGVmYXVsdFRvb2xDYWxsUGFyc2VyLFxuXHRpc0RpcmVjdFRvb2xPdXRwdXQ6ICgpID0+IGlzRGlyZWN0VG9vbE91dHB1dCxcblx0aXNUb29sTWVzc2FnZTogKCkgPT4gaXNUb29sTWVzc2FnZSxcblx0aXNUb29sTWVzc2FnZUNodW5rOiAoKSA9PiBpc1Rvb2xNZXNzYWdlQ2h1bmtcbn0pO1xuZnVuY3Rpb24gaXNEaXJlY3RUb29sT3V0cHV0KHgpIHtcblx0cmV0dXJuIHggIT0gbnVsbCAmJiB0eXBlb2YgeCA9PT0gXCJvYmplY3RcIiAmJiBcImxjX2RpcmVjdF90b29sX291dHB1dFwiIGluIHggJiYgeC5sY19kaXJlY3RfdG9vbF9vdXRwdXQgPT09IHRydWU7XG59XG4vKipcbiogUmVwcmVzZW50cyBhIHRvb2wgbWVzc2FnZSBpbiBhIGNvbnZlcnNhdGlvbi5cbiovXG52YXIgVG9vbE1lc3NhZ2UgPSBjbGFzcyBleHRlbmRzIEJhc2VNZXNzYWdlIHtcblx0c3RhdGljIGxjX25hbWUoKSB7XG5cdFx0cmV0dXJuIFwiVG9vbE1lc3NhZ2VcIjtcblx0fVxuXHRnZXQgbGNfYWxpYXNlcygpIHtcblx0XHRyZXR1cm4geyB0b29sX2NhbGxfaWQ6IFwidG9vbF9jYWxsX2lkXCIgfTtcblx0fVxuXHRsY19kaXJlY3RfdG9vbF9vdXRwdXQgPSB0cnVlO1xuXHR0eXBlID0gXCJ0b29sXCI7XG5cdC8qKlxuXHQqIFN0YXR1cyBvZiB0aGUgdG9vbCBpbnZvY2F0aW9uLlxuXHQqIEB2ZXJzaW9uIDAuMi4xOVxuXHQqL1xuXHRzdGF0dXM7XG5cdHRvb2xfY2FsbF9pZDtcblx0bWV0YWRhdGE7XG5cdC8qKlxuXHQqIEFydGlmYWN0IG9mIHRoZSBUb29sIGV4ZWN1dGlvbiB3aGljaCBpcyBub3QgbWVhbnQgdG8gYmUgc2VudCB0byB0aGUgbW9kZWwuXG5cdCpcblx0KiBTaG91bGQgb25seSBiZSBzcGVjaWZpZWQgaWYgaXQgaXMgZGlmZmVyZW50IGZyb20gdGhlIG1lc3NhZ2UgY29udGVudCwgZS5nLiBpZiBvbmx5XG5cdCogYSBzdWJzZXQgb2YgdGhlIGZ1bGwgdG9vbCBvdXRwdXQgaXMgYmVpbmcgcGFzc2VkIGFzIG1lc3NhZ2UgY29udGVudCBidXQgdGhlIGZ1bGxcblx0KiBvdXRwdXQgaXMgbmVlZGVkIGluIG90aGVyIHBhcnRzIG9mIHRoZSBjb2RlLlxuXHQqL1xuXHRhcnRpZmFjdDtcblx0Y29uc3RydWN0b3IoZmllbGRzLCB0b29sX2NhbGxfaWQsIG5hbWUpIHtcblx0XHRjb25zdCB0b29sTWVzc2FnZUZpZWxkcyA9IHR5cGVvZiBmaWVsZHMgPT09IFwic3RyaW5nXCIgfHwgQXJyYXkuaXNBcnJheShmaWVsZHMpID8ge1xuXHRcdFx0Y29udGVudDogZmllbGRzLFxuXHRcdFx0bmFtZSxcblx0XHRcdHRvb2xfY2FsbF9pZFxuXHRcdH0gOiBmaWVsZHM7XG5cdFx0c3VwZXIodG9vbE1lc3NhZ2VGaWVsZHMpO1xuXHRcdHRoaXMudG9vbF9jYWxsX2lkID0gdG9vbE1lc3NhZ2VGaWVsZHMudG9vbF9jYWxsX2lkO1xuXHRcdHRoaXMuYXJ0aWZhY3QgPSB0b29sTWVzc2FnZUZpZWxkcy5hcnRpZmFjdDtcblx0XHR0aGlzLnN0YXR1cyA9IHRvb2xNZXNzYWdlRmllbGRzLnN0YXR1cztcblx0XHR0aGlzLm1ldGFkYXRhID0gdG9vbE1lc3NhZ2VGaWVsZHMubWV0YWRhdGE7XG5cdH1cblx0c3RhdGljIGlzSW5zdGFuY2UobWVzc2FnZSkge1xuXHRcdHJldHVybiBzdXBlci5pc0luc3RhbmNlKG1lc3NhZ2UpICYmIG1lc3NhZ2UudHlwZSA9PT0gXCJ0b29sXCI7XG5cdH1cblx0Z2V0IF9wcmludGFibGVGaWVsZHMoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdC4uLnN1cGVyLl9wcmludGFibGVGaWVsZHMsXG5cdFx0XHR0b29sX2NhbGxfaWQ6IHRoaXMudG9vbF9jYWxsX2lkLFxuXHRcdFx0YXJ0aWZhY3Q6IHRoaXMuYXJ0aWZhY3Rcblx0XHR9O1xuXHR9XG59O1xuLyoqXG4qIFJlcHJlc2VudHMgYSBjaHVuayBvZiBhIHRvb2wgbWVzc2FnZSwgd2hpY2ggY2FuIGJlIGNvbmNhdGVuYXRlZFxuKiB3aXRoIG90aGVyIHRvb2wgbWVzc2FnZSBjaHVua3MuXG4qL1xudmFyIFRvb2xNZXNzYWdlQ2h1bmsgPSBjbGFzcyBleHRlbmRzIEJhc2VNZXNzYWdlQ2h1bmsge1xuXHR0eXBlID0gXCJ0b29sXCI7XG5cdHRvb2xfY2FsbF9pZDtcblx0LyoqXG5cdCogU3RhdHVzIG9mIHRoZSB0b29sIGludm9jYXRpb24uXG5cdCogQHZlcnNpb24gMC4yLjE5XG5cdCovXG5cdHN0YXR1cztcblx0LyoqXG5cdCogQXJ0aWZhY3Qgb2YgdGhlIFRvb2wgZXhlY3V0aW9uIHdoaWNoIGlzIG5vdCBtZWFudCB0byBiZSBzZW50IHRvIHRoZSBtb2RlbC5cblx0KlxuXHQqIFNob3VsZCBvbmx5IGJlIHNwZWNpZmllZCBpZiBpdCBpcyBkaWZmZXJlbnQgZnJvbSB0aGUgbWVzc2FnZSBjb250ZW50LCBlLmcuIGlmIG9ubHlcblx0KiBhIHN1YnNldCBvZiB0aGUgZnVsbCB0b29sIG91dHB1dCBpcyBiZWluZyBwYXNzZWQgYXMgbWVzc2FnZSBjb250ZW50IGJ1dCB0aGUgZnVsbFxuXHQqIG91dHB1dCBpcyBuZWVkZWQgaW4gb3RoZXIgcGFydHMgb2YgdGhlIGNvZGUuXG5cdCovXG5cdGFydGlmYWN0O1xuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHRzdXBlcihmaWVsZHMpO1xuXHRcdHRoaXMudG9vbF9jYWxsX2lkID0gZmllbGRzLnRvb2xfY2FsbF9pZDtcblx0XHR0aGlzLmFydGlmYWN0ID0gZmllbGRzLmFydGlmYWN0O1xuXHRcdHRoaXMuc3RhdHVzID0gZmllbGRzLnN0YXR1cztcblx0fVxuXHRzdGF0aWMgbGNfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJUb29sTWVzc2FnZUNodW5rXCI7XG5cdH1cblx0Y29uY2F0KGNodW5rKSB7XG5cdFx0Y29uc3QgQ2xzID0gdGhpcy5jb25zdHJ1Y3Rvcjtcblx0XHRyZXR1cm4gbmV3IENscyh7XG5cdFx0XHRjb250ZW50OiBtZXJnZUNvbnRlbnQodGhpcy5jb250ZW50LCBjaHVuay5jb250ZW50KSxcblx0XHRcdGFkZGl0aW9uYWxfa3dhcmdzOiBfbWVyZ2VEaWN0cyh0aGlzLmFkZGl0aW9uYWxfa3dhcmdzLCBjaHVuay5hZGRpdGlvbmFsX2t3YXJncyksXG5cdFx0XHRyZXNwb25zZV9tZXRhZGF0YTogX21lcmdlRGljdHModGhpcy5yZXNwb25zZV9tZXRhZGF0YSwgY2h1bmsucmVzcG9uc2VfbWV0YWRhdGEpLFxuXHRcdFx0YXJ0aWZhY3Q6IF9tZXJnZU9iaih0aGlzLmFydGlmYWN0LCBjaHVuay5hcnRpZmFjdCksXG5cdFx0XHR0b29sX2NhbGxfaWQ6IHRoaXMudG9vbF9jYWxsX2lkLFxuXHRcdFx0aWQ6IHRoaXMuaWQgPz8gY2h1bmsuaWQsXG5cdFx0XHRzdGF0dXM6IF9tZXJnZVN0YXR1cyh0aGlzLnN0YXR1cywgY2h1bmsuc3RhdHVzKVxuXHRcdH0pO1xuXHR9XG5cdGdldCBfcHJpbnRhYmxlRmllbGRzKCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHQuLi5zdXBlci5fcHJpbnRhYmxlRmllbGRzLFxuXHRcdFx0dG9vbF9jYWxsX2lkOiB0aGlzLnRvb2xfY2FsbF9pZCxcblx0XHRcdGFydGlmYWN0OiB0aGlzLmFydGlmYWN0XG5cdFx0fTtcblx0fVxufTtcbmZ1bmN0aW9uIGRlZmF1bHRUb29sQ2FsbFBhcnNlcihyYXdUb29sQ2FsbHMpIHtcblx0Y29uc3QgdG9vbENhbGxzID0gW107XG5cdGNvbnN0IGludmFsaWRUb29sQ2FsbHMgPSBbXTtcblx0Zm9yIChjb25zdCB0b29sQ2FsbCBvZiByYXdUb29sQ2FsbHMpIGlmICghdG9vbENhbGwuZnVuY3Rpb24pIGNvbnRpbnVlO1xuXHRlbHNlIHtcblx0XHRjb25zdCBmdW5jdGlvbk5hbWUgPSB0b29sQ2FsbC5mdW5jdGlvbi5uYW1lO1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBmdW5jdGlvbkFyZ3MgPSBKU09OLnBhcnNlKHRvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50cyk7XG5cdFx0XHR0b29sQ2FsbHMucHVzaCh7XG5cdFx0XHRcdG5hbWU6IGZ1bmN0aW9uTmFtZSB8fCBcIlwiLFxuXHRcdFx0XHRhcmdzOiBmdW5jdGlvbkFyZ3MgfHwge30sXG5cdFx0XHRcdGlkOiB0b29sQ2FsbC5pZFxuXHRcdFx0fSk7XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHRpbnZhbGlkVG9vbENhbGxzLnB1c2goe1xuXHRcdFx0XHRuYW1lOiBmdW5jdGlvbk5hbWUsXG5cdFx0XHRcdGFyZ3M6IHRvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50cyxcblx0XHRcdFx0aWQ6IHRvb2xDYWxsLmlkLFxuXHRcdFx0XHRlcnJvcjogXCJNYWxmb3JtZWQgYXJncy5cIlxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBbdG9vbENhbGxzLCBpbnZhbGlkVG9vbENhbGxzXTtcbn1cbi8qKlxuKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIFRvb2xNZXNzYWdlLmlzSW5zdGFuY2V9IGluc3RlYWRcbiovXG5mdW5jdGlvbiBpc1Rvb2xNZXNzYWdlKHgpIHtcblx0cmV0dXJuIHR5cGVvZiB4ID09PSBcIm9iamVjdFwiICYmIHggIT09IG51bGwgJiYgXCJnZXRUeXBlXCIgaW4geCAmJiB0eXBlb2YgeC5nZXRUeXBlID09PSBcImZ1bmN0aW9uXCIgJiYgeC5nZXRUeXBlKCkgPT09IFwidG9vbFwiO1xufVxuLyoqXG4qIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgVG9vbE1lc3NhZ2VDaHVuay5pc0luc3RhbmNlfSBpbnN0ZWFkXG4qL1xuZnVuY3Rpb24gaXNUb29sTWVzc2FnZUNodW5rKHgpIHtcblx0cmV0dXJuIHguX2dldFR5cGUoKSA9PT0gXCJ0b29sXCI7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgVG9vbE1lc3NhZ2UsIFRvb2xNZXNzYWdlQ2h1bmssIGRlZmF1bHRUb29sQ2FsbFBhcnNlciwgaXNEaXJlY3RUb29sT3V0cHV0LCBpc1Rvb2xNZXNzYWdlLCBpc1Rvb2xNZXNzYWdlQ2h1bmssIHRvb2xfZXhwb3J0cyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9vbC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/messages/tool.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/messages/transformers.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/transformers.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defaultTextSplitter: () => (/* binding */ defaultTextSplitter),\n/* harmony export */   filterMessages: () => (/* binding */ filterMessages),\n/* harmony export */   mergeMessageRuns: () => (/* binding */ mergeMessageRuns),\n/* harmony export */   trimMessages: () => (/* binding */ trimMessages)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _tool_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tool.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/tool.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chat.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/chat.js\");\n/* harmony import */ var _function_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./function.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/function.js\");\n/* harmony import */ var _human_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./human.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/human.js\");\n/* harmony import */ var _modifier_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./modifier.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/modifier.js\");\n/* harmony import */ var _system_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./system.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/system.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/utils.js\");\n/* harmony import */ var _ai_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ai.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../runnables/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/base.js\");\n\n\n\n\n\n\n\n\n\n\n\n//#region src/messages/transformers.ts\nconst _isMessageType = (msg, types) => {\n\tconst typesAsStrings = [...new Set(types?.map((t) => {\n\t\tif (typeof t === \"string\") return t;\n\t\tconst instantiatedMsgClass = new t({});\n\t\tif (!(\"getType\" in instantiatedMsgClass) || typeof instantiatedMsgClass.getType !== \"function\") throw new Error(\"Invalid type provided.\");\n\t\treturn instantiatedMsgClass.getType();\n\t}))];\n\tconst msgType = msg.getType();\n\treturn typesAsStrings.some((t) => t === msgType);\n};\nfunction filterMessages(messagesOrOptions, options) {\n\tif (Array.isArray(messagesOrOptions)) return _filterMessages(messagesOrOptions, options);\n\treturn _runnables_base_js__WEBPACK_IMPORTED_MODULE_9__.RunnableLambda.from((input) => {\n\t\treturn _filterMessages(input, messagesOrOptions);\n\t});\n}\nfunction _filterMessages(messages, options = {}) {\n\tconst { includeNames, excludeNames, includeTypes, excludeTypes, includeIds, excludeIds } = options;\n\tconst filtered = [];\n\tfor (const msg of messages) {\n\t\tif (excludeNames && msg.name && excludeNames.includes(msg.name)) continue;\n\t\telse if (excludeTypes && _isMessageType(msg, excludeTypes)) continue;\n\t\telse if (excludeIds && msg.id && excludeIds.includes(msg.id)) continue;\n\t\tif (!(includeTypes || includeIds || includeNames)) filtered.push(msg);\n\t\telse if (includeNames && msg.name && includeNames.some((iName) => iName === msg.name)) filtered.push(msg);\n\t\telse if (includeTypes && _isMessageType(msg, includeTypes)) filtered.push(msg);\n\t\telse if (includeIds && msg.id && includeIds.some((id) => id === msg.id)) filtered.push(msg);\n\t}\n\treturn filtered;\n}\nfunction mergeMessageRuns(messages) {\n\tif (Array.isArray(messages)) return _mergeMessageRuns(messages);\n\treturn _runnables_base_js__WEBPACK_IMPORTED_MODULE_9__.RunnableLambda.from(_mergeMessageRuns);\n}\nfunction _mergeMessageRuns(messages) {\n\tif (!messages.length) return [];\n\tconst merged = [];\n\tfor (const msg of messages) {\n\t\tconst curr = msg;\n\t\tconst last = merged.pop();\n\t\tif (!last) merged.push(curr);\n\t\telse if (curr.getType() === \"tool\" || !(curr.getType() === last.getType())) merged.push(last, curr);\n\t\telse {\n\t\t\tconst lastChunk = (0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.convertToChunk)(last);\n\t\t\tconst currChunk = (0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.convertToChunk)(curr);\n\t\t\tconst mergedChunks = lastChunk.concat(currChunk);\n\t\t\tif (typeof lastChunk.content === \"string\" && typeof currChunk.content === \"string\") mergedChunks.content = `${lastChunk.content}\\n${currChunk.content}`;\n\t\t\tmerged.push(_chunkToMsg(mergedChunks));\n\t\t}\n\t}\n\treturn merged;\n}\nfunction trimMessages(messagesOrOptions, options) {\n\tif (Array.isArray(messagesOrOptions)) {\n\t\tconst messages = messagesOrOptions;\n\t\tif (!options) throw new Error(\"Options parameter is required when providing messages.\");\n\t\treturn _trimMessagesHelper(messages, options);\n\t} else {\n\t\tconst trimmerOptions = messagesOrOptions;\n\t\treturn _runnables_base_js__WEBPACK_IMPORTED_MODULE_9__.RunnableLambda.from((input) => _trimMessagesHelper(input, trimmerOptions)).withConfig({ runName: \"trim_messages\" });\n\t}\n}\nasync function _trimMessagesHelper(messages, options) {\n\tconst { maxTokens, tokenCounter, strategy = \"last\", allowPartial = false, endOn, startOn, includeSystem = false, textSplitter } = options;\n\tif (startOn && strategy === \"first\") throw new Error(\"`startOn` should only be specified if `strategy` is 'last'.\");\n\tif (includeSystem && strategy === \"first\") throw new Error(\"`includeSystem` should only be specified if `strategy` is 'last'.\");\n\tlet listTokenCounter;\n\tif (\"getNumTokens\" in tokenCounter) listTokenCounter = async (msgs) => {\n\t\tconst tokenCounts = await Promise.all(msgs.map((msg) => tokenCounter.getNumTokens(msg.content)));\n\t\treturn tokenCounts.reduce((sum, count) => sum + count, 0);\n\t};\n\telse listTokenCounter = async (msgs) => tokenCounter(msgs);\n\tlet textSplitterFunc = defaultTextSplitter;\n\tif (textSplitter) if (\"splitText\" in textSplitter) textSplitterFunc = textSplitter.splitText;\n\telse textSplitterFunc = async (text) => textSplitter(text);\n\tif (strategy === \"first\") return _firstMaxTokens(messages, {\n\t\tmaxTokens,\n\t\ttokenCounter: listTokenCounter,\n\t\ttextSplitter: textSplitterFunc,\n\t\tpartialStrategy: allowPartial ? \"first\" : void 0,\n\t\tendOn\n\t});\n\telse if (strategy === \"last\") return _lastMaxTokens(messages, {\n\t\tmaxTokens,\n\t\ttokenCounter: listTokenCounter,\n\t\ttextSplitter: textSplitterFunc,\n\t\tallowPartial,\n\t\tincludeSystem,\n\t\tstartOn,\n\t\tendOn\n\t});\n\telse throw new Error(`Unrecognized strategy: '${strategy}'. Must be one of 'first' or 'last'.`);\n}\nasync function _firstMaxTokens(messages, options) {\n\tconst { maxTokens, tokenCounter, textSplitter, partialStrategy, endOn } = options;\n\tlet messagesCopy = [...messages];\n\tlet idx = 0;\n\tfor (let i = 0; i < messagesCopy.length; i += 1) {\n\t\tconst remainingMessages = i > 0 ? messagesCopy.slice(0, -i) : messagesCopy;\n\t\tif (await tokenCounter(remainingMessages) <= maxTokens) {\n\t\t\tidx = messagesCopy.length - i;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (idx < messagesCopy.length && partialStrategy) {\n\t\tlet includedPartial = false;\n\t\tif (Array.isArray(messagesCopy[idx].content)) {\n\t\t\tconst excluded = messagesCopy[idx];\n\t\t\tif (typeof excluded.content === \"string\") throw new Error(\"Expected content to be an array.\");\n\t\t\tconst numBlock = excluded.content.length;\n\t\t\tconst reversedContent = partialStrategy === \"last\" ? [...excluded.content].reverse() : excluded.content;\n\t\t\tfor (let i = 1; i <= numBlock; i += 1) {\n\t\t\t\tconst partialContent = partialStrategy === \"first\" ? reversedContent.slice(0, i) : reversedContent.slice(-i);\n\t\t\t\tconst fields = Object.fromEntries(Object.entries(excluded).filter(([k]) => k !== \"type\" && !k.startsWith(\"lc_\")));\n\t\t\t\tconst updatedMessage = _switchTypeToMessage(excluded.getType(), {\n\t\t\t\t\t...fields,\n\t\t\t\t\tcontent: partialContent\n\t\t\t\t});\n\t\t\t\tconst slicedMessages = [...messagesCopy.slice(0, idx), updatedMessage];\n\t\t\t\tif (await tokenCounter(slicedMessages) <= maxTokens) {\n\t\t\t\t\tmessagesCopy = slicedMessages;\n\t\t\t\t\tidx += 1;\n\t\t\t\t\tincludedPartial = true;\n\t\t\t\t} else break;\n\t\t\t}\n\t\t\tif (includedPartial && partialStrategy === \"last\") excluded.content = [...reversedContent].reverse();\n\t\t}\n\t\tif (!includedPartial) {\n\t\t\tconst excluded = messagesCopy[idx];\n\t\t\tlet text;\n\t\t\tif (Array.isArray(excluded.content) && excluded.content.some((block) => typeof block === \"string\" || block.type === \"text\")) {\n\t\t\t\tconst textBlock = excluded.content.find((block) => block.type === \"text\" && block.text);\n\t\t\t\ttext = textBlock?.text;\n\t\t\t} else if (typeof excluded.content === \"string\") text = excluded.content;\n\t\t\tif (text) {\n\t\t\t\tconst splitTexts = await textSplitter(text);\n\t\t\t\tconst numSplits = splitTexts.length;\n\t\t\t\tif (partialStrategy === \"last\") splitTexts.reverse();\n\t\t\t\tfor (let _ = 0; _ < numSplits - 1; _ += 1) {\n\t\t\t\t\tsplitTexts.pop();\n\t\t\t\t\texcluded.content = splitTexts.join(\"\");\n\t\t\t\t\tif (await tokenCounter([...messagesCopy.slice(0, idx), excluded]) <= maxTokens) {\n\t\t\t\t\t\tif (partialStrategy === \"last\") excluded.content = [...splitTexts].reverse().join(\"\");\n\t\t\t\t\t\tmessagesCopy = [...messagesCopy.slice(0, idx), excluded];\n\t\t\t\t\t\tidx += 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif (endOn) {\n\t\tconst endOnArr = Array.isArray(endOn) ? endOn : [endOn];\n\t\twhile (idx > 0 && !_isMessageType(messagesCopy[idx - 1], endOnArr)) idx -= 1;\n\t}\n\treturn messagesCopy.slice(0, idx);\n}\nasync function _lastMaxTokens(messages, options) {\n\tconst { allowPartial = false, includeSystem = false, endOn, startOn,...rest } = options;\n\tlet messagesCopy = messages.map((message) => {\n\t\tconst fields = Object.fromEntries(Object.entries(message).filter(([k]) => k !== \"type\" && !k.startsWith(\"lc_\")));\n\t\treturn _switchTypeToMessage(message.getType(), fields, (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessageChunk)(message));\n\t});\n\tif (endOn) {\n\t\tconst endOnArr = Array.isArray(endOn) ? endOn : [endOn];\n\t\twhile (messagesCopy.length > 0 && !_isMessageType(messagesCopy[messagesCopy.length - 1], endOnArr)) messagesCopy = messagesCopy.slice(0, -1);\n\t}\n\tconst swappedSystem = includeSystem && messagesCopy[0]?.getType() === \"system\";\n\tlet reversed_ = swappedSystem ? messagesCopy.slice(0, 1).concat(messagesCopy.slice(1).reverse()) : messagesCopy.reverse();\n\treversed_ = await _firstMaxTokens(reversed_, {\n\t\t...rest,\n\t\tpartialStrategy: allowPartial ? \"last\" : void 0,\n\t\tendOn: startOn\n\t});\n\tif (swappedSystem) return [reversed_[0], ...reversed_.slice(1).reverse()];\n\telse return reversed_.reverse();\n}\nconst _MSG_CHUNK_MAP = {\n\thuman: {\n\t\tmessage: _human_js__WEBPACK_IMPORTED_MODULE_4__.HumanMessage,\n\t\tmessageChunk: _human_js__WEBPACK_IMPORTED_MODULE_4__.HumanMessageChunk\n\t},\n\tai: {\n\t\tmessage: _ai_js__WEBPACK_IMPORTED_MODULE_8__.AIMessage,\n\t\tmessageChunk: _ai_js__WEBPACK_IMPORTED_MODULE_8__.AIMessageChunk\n\t},\n\tsystem: {\n\t\tmessage: _system_js__WEBPACK_IMPORTED_MODULE_6__.SystemMessage,\n\t\tmessageChunk: _system_js__WEBPACK_IMPORTED_MODULE_6__.SystemMessageChunk\n\t},\n\tdeveloper: {\n\t\tmessage: _system_js__WEBPACK_IMPORTED_MODULE_6__.SystemMessage,\n\t\tmessageChunk: _system_js__WEBPACK_IMPORTED_MODULE_6__.SystemMessageChunk\n\t},\n\ttool: {\n\t\tmessage: _tool_js__WEBPACK_IMPORTED_MODULE_1__.ToolMessage,\n\t\tmessageChunk: _tool_js__WEBPACK_IMPORTED_MODULE_1__.ToolMessageChunk\n\t},\n\tfunction: {\n\t\tmessage: _function_js__WEBPACK_IMPORTED_MODULE_3__.FunctionMessage,\n\t\tmessageChunk: _function_js__WEBPACK_IMPORTED_MODULE_3__.FunctionMessageChunk\n\t},\n\tgeneric: {\n\t\tmessage: _chat_js__WEBPACK_IMPORTED_MODULE_2__.ChatMessage,\n\t\tmessageChunk: _chat_js__WEBPACK_IMPORTED_MODULE_2__.ChatMessageChunk\n\t},\n\tremove: {\n\t\tmessage: _modifier_js__WEBPACK_IMPORTED_MODULE_5__.RemoveMessage,\n\t\tmessageChunk: _modifier_js__WEBPACK_IMPORTED_MODULE_5__.RemoveMessage\n\t}\n};\nfunction _switchTypeToMessage(messageType, fields, returnChunk) {\n\tlet chunk;\n\tlet msg;\n\tswitch (messageType) {\n\t\tcase \"human\":\n\t\t\tif (returnChunk) chunk = new _human_js__WEBPACK_IMPORTED_MODULE_4__.HumanMessageChunk(fields);\n\t\t\telse msg = new _human_js__WEBPACK_IMPORTED_MODULE_4__.HumanMessage(fields);\n\t\t\tbreak;\n\t\tcase \"ai\":\n\t\t\tif (returnChunk) {\n\t\t\t\tlet aiChunkFields = { ...fields };\n\t\t\t\tif (\"tool_calls\" in aiChunkFields) aiChunkFields = {\n\t\t\t\t\t...aiChunkFields,\n\t\t\t\t\ttool_call_chunks: aiChunkFields.tool_calls?.map((tc) => ({\n\t\t\t\t\t\t...tc,\n\t\t\t\t\t\ttype: \"tool_call_chunk\",\n\t\t\t\t\t\tindex: void 0,\n\t\t\t\t\t\targs: JSON.stringify(tc.args)\n\t\t\t\t\t}))\n\t\t\t\t};\n\t\t\t\tchunk = new _ai_js__WEBPACK_IMPORTED_MODULE_8__.AIMessageChunk(aiChunkFields);\n\t\t\t} else msg = new _ai_js__WEBPACK_IMPORTED_MODULE_8__.AIMessage(fields);\n\t\t\tbreak;\n\t\tcase \"system\":\n\t\t\tif (returnChunk) chunk = new _system_js__WEBPACK_IMPORTED_MODULE_6__.SystemMessageChunk(fields);\n\t\t\telse msg = new _system_js__WEBPACK_IMPORTED_MODULE_6__.SystemMessage(fields);\n\t\t\tbreak;\n\t\tcase \"developer\":\n\t\t\tif (returnChunk) chunk = new _system_js__WEBPACK_IMPORTED_MODULE_6__.SystemMessageChunk({\n\t\t\t\t...fields,\n\t\t\t\tadditional_kwargs: {\n\t\t\t\t\t...fields.additional_kwargs,\n\t\t\t\t\t__openai_role__: \"developer\"\n\t\t\t\t}\n\t\t\t});\n\t\t\telse msg = new _system_js__WEBPACK_IMPORTED_MODULE_6__.SystemMessage({\n\t\t\t\t...fields,\n\t\t\t\tadditional_kwargs: {\n\t\t\t\t\t...fields.additional_kwargs,\n\t\t\t\t\t__openai_role__: \"developer\"\n\t\t\t\t}\n\t\t\t});\n\t\t\tbreak;\n\t\tcase \"tool\":\n\t\t\tif (\"tool_call_id\" in fields) if (returnChunk) chunk = new _tool_js__WEBPACK_IMPORTED_MODULE_1__.ToolMessageChunk(fields);\n\t\t\telse msg = new _tool_js__WEBPACK_IMPORTED_MODULE_1__.ToolMessage(fields);\n\t\t\telse throw new Error(\"Can not convert ToolMessage to ToolMessageChunk if 'tool_call_id' field is not defined.\");\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tif (returnChunk) chunk = new _function_js__WEBPACK_IMPORTED_MODULE_3__.FunctionMessageChunk(fields);\n\t\t\telse {\n\t\t\t\tif (!fields.name) throw new Error(\"FunctionMessage must have a 'name' field\");\n\t\t\t\tmsg = new _function_js__WEBPACK_IMPORTED_MODULE_3__.FunctionMessage(fields);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"generic\":\n\t\t\tif (\"role\" in fields) if (returnChunk) chunk = new _chat_js__WEBPACK_IMPORTED_MODULE_2__.ChatMessageChunk(fields);\n\t\t\telse msg = new _chat_js__WEBPACK_IMPORTED_MODULE_2__.ChatMessage(fields);\n\t\t\telse throw new Error(\"Can not convert ChatMessage to ChatMessageChunk if 'role' field is not defined.\");\n\t\t\tbreak;\n\t\tdefault: throw new Error(`Unrecognized message type ${messageType}`);\n\t}\n\tif (returnChunk && chunk) return chunk;\n\tif (msg) return msg;\n\tthrow new Error(`Unrecognized message type ${messageType}`);\n}\nfunction _chunkToMsg(chunk) {\n\tconst chunkType = chunk.getType();\n\tlet msg;\n\tconst fields = Object.fromEntries(Object.entries(chunk).filter(([k]) => ![\"type\", \"tool_call_chunks\"].includes(k) && !k.startsWith(\"lc_\")));\n\tif (chunkType in _MSG_CHUNK_MAP) msg = _switchTypeToMessage(chunkType, fields);\n\tif (!msg) throw new Error(`Unrecognized message chunk class ${chunkType}. Supported classes are ${Object.keys(_MSG_CHUNK_MAP)}`);\n\treturn msg;\n}\n/**\n* The default text splitter function that splits text by newlines.\n*\n* @param {string} text\n* @returns A promise that resolves to an array of strings split by newlines.\n*/\nfunction defaultTextSplitter(text) {\n\tconst splits = text.split(\"\\n\");\n\treturn Promise.resolve([...splits.slice(0, -1).map((s) => `${s}\\n`), splits[splits.length - 1]]);\n}\n\n//#endregion\n\n//# sourceMappingURL=transformers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvdHJhbnNmb3JtZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStDO0FBQ1c7QUFDQTtBQUNZO0FBQ1Q7QUFDZjtBQUNrQjtBQUNwQjtBQUNRO0FBQ0U7O0FBRXREO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsOERBQWM7QUFDdEI7QUFDQSxFQUFFO0FBQ0Y7QUFDQSwrQ0FBK0M7QUFDL0MsU0FBUyxpRkFBaUY7QUFDMUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsOERBQWM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIseURBQWM7QUFDbkMscUJBQXFCLHlEQUFjO0FBQ25DO0FBQ0EsaUhBQWlILGtCQUFrQixJQUFJLGtCQUFrQjtBQUN6SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLFNBQVMsOERBQWMsMEVBQTBFLDBCQUEwQjtBQUMzSDtBQUNBO0FBQ0E7QUFDQSxTQUFTLHdIQUF3SDtBQUNqSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsaURBQWlELFNBQVM7QUFDMUQ7QUFDQTtBQUNBLFNBQVMsZ0VBQWdFO0FBQ3pFO0FBQ0E7QUFDQSxpQkFBaUIseUJBQXlCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGVBQWU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixtQkFBbUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHNFQUFzRTtBQUMvRTtBQUNBO0FBQ0EseURBQXlELDREQUFrQjtBQUMzRSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsbURBQVk7QUFDdkIsZ0JBQWdCLHdEQUFpQjtBQUNqQyxFQUFFO0FBQ0Y7QUFDQSxXQUFXLDZDQUFTO0FBQ3BCLGdCQUFnQixrREFBYztBQUM5QixFQUFFO0FBQ0Y7QUFDQSxXQUFXLHFEQUFhO0FBQ3hCLGdCQUFnQiwwREFBa0I7QUFDbEMsRUFBRTtBQUNGO0FBQ0EsV0FBVyxxREFBYTtBQUN4QixnQkFBZ0IsMERBQWtCO0FBQ2xDLEVBQUU7QUFDRjtBQUNBLFdBQVcsaURBQVc7QUFDdEIsZ0JBQWdCLHNEQUFnQjtBQUNoQyxFQUFFO0FBQ0Y7QUFDQSxXQUFXLHlEQUFlO0FBQzFCLGdCQUFnQiw4REFBb0I7QUFDcEMsRUFBRTtBQUNGO0FBQ0EsV0FBVyxpREFBVztBQUN0QixnQkFBZ0Isc0RBQWdCO0FBQ2hDLEVBQUU7QUFDRjtBQUNBLFdBQVcsdURBQWE7QUFDeEIsZ0JBQWdCLHVEQUFhO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHdEQUFpQjtBQUNqRCxrQkFBa0IsbURBQVk7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsZ0JBQWdCLGtEQUFjO0FBQzlCLEtBQUssZUFBZSw2Q0FBUztBQUM3QjtBQUNBO0FBQ0EsZ0NBQWdDLDBEQUFrQjtBQUNsRCxrQkFBa0IscURBQWE7QUFDL0I7QUFDQTtBQUNBLGdDQUFnQywwREFBa0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixrQkFBa0IscURBQWE7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsOERBQThELHNEQUFnQjtBQUM5RSxrQkFBa0IsaURBQVc7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDhEQUFvQjtBQUNwRDtBQUNBO0FBQ0EsY0FBYyx5REFBZTtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxzREFBc0Qsc0RBQWdCO0FBQ3RFLGtCQUFrQixpREFBVztBQUM3QjtBQUNBO0FBQ0Esd0RBQXdELFlBQVk7QUFDcEU7QUFDQTtBQUNBO0FBQ0EsOENBQThDLFlBQVk7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELFVBQVUsMEJBQTBCLDRCQUE0QjtBQUMvSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxRQUFRO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBQThELEVBQUU7QUFDaEU7O0FBRUE7QUFDK0U7QUFDL0UiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy90cmFuc2Zvcm1lcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNCYXNlTWVzc2FnZUNodW5rIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgVG9vbE1lc3NhZ2UsIFRvb2xNZXNzYWdlQ2h1bmsgfSBmcm9tIFwiLi90b29sLmpzXCI7XG5pbXBvcnQgeyBDaGF0TWVzc2FnZSwgQ2hhdE1lc3NhZ2VDaHVuayB9IGZyb20gXCIuL2NoYXQuanNcIjtcbmltcG9ydCB7IEZ1bmN0aW9uTWVzc2FnZSwgRnVuY3Rpb25NZXNzYWdlQ2h1bmsgfSBmcm9tIFwiLi9mdW5jdGlvbi5qc1wiO1xuaW1wb3J0IHsgSHVtYW5NZXNzYWdlLCBIdW1hbk1lc3NhZ2VDaHVuayB9IGZyb20gXCIuL2h1bWFuLmpzXCI7XG5pbXBvcnQgeyBSZW1vdmVNZXNzYWdlIH0gZnJvbSBcIi4vbW9kaWZpZXIuanNcIjtcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2UsIFN5c3RlbU1lc3NhZ2VDaHVuayB9IGZyb20gXCIuL3N5c3RlbS5qc1wiO1xuaW1wb3J0IHsgY29udmVydFRvQ2h1bmsgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuaW1wb3J0IHsgQUlNZXNzYWdlLCBBSU1lc3NhZ2VDaHVuayB9IGZyb20gXCIuL2FpLmpzXCI7XG5pbXBvcnQgeyBSdW5uYWJsZUxhbWJkYSB9IGZyb20gXCIuLi9ydW5uYWJsZXMvYmFzZS5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL21lc3NhZ2VzL3RyYW5zZm9ybWVycy50c1xuY29uc3QgX2lzTWVzc2FnZVR5cGUgPSAobXNnLCB0eXBlcykgPT4ge1xuXHRjb25zdCB0eXBlc0FzU3RyaW5ncyA9IFsuLi5uZXcgU2V0KHR5cGVzPy5tYXAoKHQpID0+IHtcblx0XHRpZiAodHlwZW9mIHQgPT09IFwic3RyaW5nXCIpIHJldHVybiB0O1xuXHRcdGNvbnN0IGluc3RhbnRpYXRlZE1zZ0NsYXNzID0gbmV3IHQoe30pO1xuXHRcdGlmICghKFwiZ2V0VHlwZVwiIGluIGluc3RhbnRpYXRlZE1zZ0NsYXNzKSB8fCB0eXBlb2YgaW5zdGFudGlhdGVkTXNnQ2xhc3MuZ2V0VHlwZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHR5cGUgcHJvdmlkZWQuXCIpO1xuXHRcdHJldHVybiBpbnN0YW50aWF0ZWRNc2dDbGFzcy5nZXRUeXBlKCk7XG5cdH0pKV07XG5cdGNvbnN0IG1zZ1R5cGUgPSBtc2cuZ2V0VHlwZSgpO1xuXHRyZXR1cm4gdHlwZXNBc1N0cmluZ3Muc29tZSgodCkgPT4gdCA9PT0gbXNnVHlwZSk7XG59O1xuZnVuY3Rpb24gZmlsdGVyTWVzc2FnZXMobWVzc2FnZXNPck9wdGlvbnMsIG9wdGlvbnMpIHtcblx0aWYgKEFycmF5LmlzQXJyYXkobWVzc2FnZXNPck9wdGlvbnMpKSByZXR1cm4gX2ZpbHRlck1lc3NhZ2VzKG1lc3NhZ2VzT3JPcHRpb25zLCBvcHRpb25zKTtcblx0cmV0dXJuIFJ1bm5hYmxlTGFtYmRhLmZyb20oKGlucHV0KSA9PiB7XG5cdFx0cmV0dXJuIF9maWx0ZXJNZXNzYWdlcyhpbnB1dCwgbWVzc2FnZXNPck9wdGlvbnMpO1xuXHR9KTtcbn1cbmZ1bmN0aW9uIF9maWx0ZXJNZXNzYWdlcyhtZXNzYWdlcywgb3B0aW9ucyA9IHt9KSB7XG5cdGNvbnN0IHsgaW5jbHVkZU5hbWVzLCBleGNsdWRlTmFtZXMsIGluY2x1ZGVUeXBlcywgZXhjbHVkZVR5cGVzLCBpbmNsdWRlSWRzLCBleGNsdWRlSWRzIH0gPSBvcHRpb25zO1xuXHRjb25zdCBmaWx0ZXJlZCA9IFtdO1xuXHRmb3IgKGNvbnN0IG1zZyBvZiBtZXNzYWdlcykge1xuXHRcdGlmIChleGNsdWRlTmFtZXMgJiYgbXNnLm5hbWUgJiYgZXhjbHVkZU5hbWVzLmluY2x1ZGVzKG1zZy5uYW1lKSkgY29udGludWU7XG5cdFx0ZWxzZSBpZiAoZXhjbHVkZVR5cGVzICYmIF9pc01lc3NhZ2VUeXBlKG1zZywgZXhjbHVkZVR5cGVzKSkgY29udGludWU7XG5cdFx0ZWxzZSBpZiAoZXhjbHVkZUlkcyAmJiBtc2cuaWQgJiYgZXhjbHVkZUlkcy5pbmNsdWRlcyhtc2cuaWQpKSBjb250aW51ZTtcblx0XHRpZiAoIShpbmNsdWRlVHlwZXMgfHwgaW5jbHVkZUlkcyB8fCBpbmNsdWRlTmFtZXMpKSBmaWx0ZXJlZC5wdXNoKG1zZyk7XG5cdFx0ZWxzZSBpZiAoaW5jbHVkZU5hbWVzICYmIG1zZy5uYW1lICYmIGluY2x1ZGVOYW1lcy5zb21lKChpTmFtZSkgPT4gaU5hbWUgPT09IG1zZy5uYW1lKSkgZmlsdGVyZWQucHVzaChtc2cpO1xuXHRcdGVsc2UgaWYgKGluY2x1ZGVUeXBlcyAmJiBfaXNNZXNzYWdlVHlwZShtc2csIGluY2x1ZGVUeXBlcykpIGZpbHRlcmVkLnB1c2gobXNnKTtcblx0XHRlbHNlIGlmIChpbmNsdWRlSWRzICYmIG1zZy5pZCAmJiBpbmNsdWRlSWRzLnNvbWUoKGlkKSA9PiBpZCA9PT0gbXNnLmlkKSkgZmlsdGVyZWQucHVzaChtc2cpO1xuXHR9XG5cdHJldHVybiBmaWx0ZXJlZDtcbn1cbmZ1bmN0aW9uIG1lcmdlTWVzc2FnZVJ1bnMobWVzc2FnZXMpIHtcblx0aWYgKEFycmF5LmlzQXJyYXkobWVzc2FnZXMpKSByZXR1cm4gX21lcmdlTWVzc2FnZVJ1bnMobWVzc2FnZXMpO1xuXHRyZXR1cm4gUnVubmFibGVMYW1iZGEuZnJvbShfbWVyZ2VNZXNzYWdlUnVucyk7XG59XG5mdW5jdGlvbiBfbWVyZ2VNZXNzYWdlUnVucyhtZXNzYWdlcykge1xuXHRpZiAoIW1lc3NhZ2VzLmxlbmd0aCkgcmV0dXJuIFtdO1xuXHRjb25zdCBtZXJnZWQgPSBbXTtcblx0Zm9yIChjb25zdCBtc2cgb2YgbWVzc2FnZXMpIHtcblx0XHRjb25zdCBjdXJyID0gbXNnO1xuXHRcdGNvbnN0IGxhc3QgPSBtZXJnZWQucG9wKCk7XG5cdFx0aWYgKCFsYXN0KSBtZXJnZWQucHVzaChjdXJyKTtcblx0XHRlbHNlIGlmIChjdXJyLmdldFR5cGUoKSA9PT0gXCJ0b29sXCIgfHwgIShjdXJyLmdldFR5cGUoKSA9PT0gbGFzdC5nZXRUeXBlKCkpKSBtZXJnZWQucHVzaChsYXN0LCBjdXJyKTtcblx0XHRlbHNlIHtcblx0XHRcdGNvbnN0IGxhc3RDaHVuayA9IGNvbnZlcnRUb0NodW5rKGxhc3QpO1xuXHRcdFx0Y29uc3QgY3VyckNodW5rID0gY29udmVydFRvQ2h1bmsoY3Vycik7XG5cdFx0XHRjb25zdCBtZXJnZWRDaHVua3MgPSBsYXN0Q2h1bmsuY29uY2F0KGN1cnJDaHVuayk7XG5cdFx0XHRpZiAodHlwZW9mIGxhc3RDaHVuay5jb250ZW50ID09PSBcInN0cmluZ1wiICYmIHR5cGVvZiBjdXJyQ2h1bmsuY29udGVudCA9PT0gXCJzdHJpbmdcIikgbWVyZ2VkQ2h1bmtzLmNvbnRlbnQgPSBgJHtsYXN0Q2h1bmsuY29udGVudH1cXG4ke2N1cnJDaHVuay5jb250ZW50fWA7XG5cdFx0XHRtZXJnZWQucHVzaChfY2h1bmtUb01zZyhtZXJnZWRDaHVua3MpKTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIG1lcmdlZDtcbn1cbmZ1bmN0aW9uIHRyaW1NZXNzYWdlcyhtZXNzYWdlc09yT3B0aW9ucywgb3B0aW9ucykge1xuXHRpZiAoQXJyYXkuaXNBcnJheShtZXNzYWdlc09yT3B0aW9ucykpIHtcblx0XHRjb25zdCBtZXNzYWdlcyA9IG1lc3NhZ2VzT3JPcHRpb25zO1xuXHRcdGlmICghb3B0aW9ucykgdGhyb3cgbmV3IEVycm9yKFwiT3B0aW9ucyBwYXJhbWV0ZXIgaXMgcmVxdWlyZWQgd2hlbiBwcm92aWRpbmcgbWVzc2FnZXMuXCIpO1xuXHRcdHJldHVybiBfdHJpbU1lc3NhZ2VzSGVscGVyKG1lc3NhZ2VzLCBvcHRpb25zKTtcblx0fSBlbHNlIHtcblx0XHRjb25zdCB0cmltbWVyT3B0aW9ucyA9IG1lc3NhZ2VzT3JPcHRpb25zO1xuXHRcdHJldHVybiBSdW5uYWJsZUxhbWJkYS5mcm9tKChpbnB1dCkgPT4gX3RyaW1NZXNzYWdlc0hlbHBlcihpbnB1dCwgdHJpbW1lck9wdGlvbnMpKS53aXRoQ29uZmlnKHsgcnVuTmFtZTogXCJ0cmltX21lc3NhZ2VzXCIgfSk7XG5cdH1cbn1cbmFzeW5jIGZ1bmN0aW9uIF90cmltTWVzc2FnZXNIZWxwZXIobWVzc2FnZXMsIG9wdGlvbnMpIHtcblx0Y29uc3QgeyBtYXhUb2tlbnMsIHRva2VuQ291bnRlciwgc3RyYXRlZ3kgPSBcImxhc3RcIiwgYWxsb3dQYXJ0aWFsID0gZmFsc2UsIGVuZE9uLCBzdGFydE9uLCBpbmNsdWRlU3lzdGVtID0gZmFsc2UsIHRleHRTcGxpdHRlciB9ID0gb3B0aW9ucztcblx0aWYgKHN0YXJ0T24gJiYgc3RyYXRlZ3kgPT09IFwiZmlyc3RcIikgdGhyb3cgbmV3IEVycm9yKFwiYHN0YXJ0T25gIHNob3VsZCBvbmx5IGJlIHNwZWNpZmllZCBpZiBgc3RyYXRlZ3lgIGlzICdsYXN0Jy5cIik7XG5cdGlmIChpbmNsdWRlU3lzdGVtICYmIHN0cmF0ZWd5ID09PSBcImZpcnN0XCIpIHRocm93IG5ldyBFcnJvcihcImBpbmNsdWRlU3lzdGVtYCBzaG91bGQgb25seSBiZSBzcGVjaWZpZWQgaWYgYHN0cmF0ZWd5YCBpcyAnbGFzdCcuXCIpO1xuXHRsZXQgbGlzdFRva2VuQ291bnRlcjtcblx0aWYgKFwiZ2V0TnVtVG9rZW5zXCIgaW4gdG9rZW5Db3VudGVyKSBsaXN0VG9rZW5Db3VudGVyID0gYXN5bmMgKG1zZ3MpID0+IHtcblx0XHRjb25zdCB0b2tlbkNvdW50cyA9IGF3YWl0IFByb21pc2UuYWxsKG1zZ3MubWFwKChtc2cpID0+IHRva2VuQ291bnRlci5nZXROdW1Ub2tlbnMobXNnLmNvbnRlbnQpKSk7XG5cdFx0cmV0dXJuIHRva2VuQ291bnRzLnJlZHVjZSgoc3VtLCBjb3VudCkgPT4gc3VtICsgY291bnQsIDApO1xuXHR9O1xuXHRlbHNlIGxpc3RUb2tlbkNvdW50ZXIgPSBhc3luYyAobXNncykgPT4gdG9rZW5Db3VudGVyKG1zZ3MpO1xuXHRsZXQgdGV4dFNwbGl0dGVyRnVuYyA9IGRlZmF1bHRUZXh0U3BsaXR0ZXI7XG5cdGlmICh0ZXh0U3BsaXR0ZXIpIGlmIChcInNwbGl0VGV4dFwiIGluIHRleHRTcGxpdHRlcikgdGV4dFNwbGl0dGVyRnVuYyA9IHRleHRTcGxpdHRlci5zcGxpdFRleHQ7XG5cdGVsc2UgdGV4dFNwbGl0dGVyRnVuYyA9IGFzeW5jICh0ZXh0KSA9PiB0ZXh0U3BsaXR0ZXIodGV4dCk7XG5cdGlmIChzdHJhdGVneSA9PT0gXCJmaXJzdFwiKSByZXR1cm4gX2ZpcnN0TWF4VG9rZW5zKG1lc3NhZ2VzLCB7XG5cdFx0bWF4VG9rZW5zLFxuXHRcdHRva2VuQ291bnRlcjogbGlzdFRva2VuQ291bnRlcixcblx0XHR0ZXh0U3BsaXR0ZXI6IHRleHRTcGxpdHRlckZ1bmMsXG5cdFx0cGFydGlhbFN0cmF0ZWd5OiBhbGxvd1BhcnRpYWwgPyBcImZpcnN0XCIgOiB2b2lkIDAsXG5cdFx0ZW5kT25cblx0fSk7XG5cdGVsc2UgaWYgKHN0cmF0ZWd5ID09PSBcImxhc3RcIikgcmV0dXJuIF9sYXN0TWF4VG9rZW5zKG1lc3NhZ2VzLCB7XG5cdFx0bWF4VG9rZW5zLFxuXHRcdHRva2VuQ291bnRlcjogbGlzdFRva2VuQ291bnRlcixcblx0XHR0ZXh0U3BsaXR0ZXI6IHRleHRTcGxpdHRlckZ1bmMsXG5cdFx0YWxsb3dQYXJ0aWFsLFxuXHRcdGluY2x1ZGVTeXN0ZW0sXG5cdFx0c3RhcnRPbixcblx0XHRlbmRPblxuXHR9KTtcblx0ZWxzZSB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCBzdHJhdGVneTogJyR7c3RyYXRlZ3l9Jy4gTXVzdCBiZSBvbmUgb2YgJ2ZpcnN0JyBvciAnbGFzdCcuYCk7XG59XG5hc3luYyBmdW5jdGlvbiBfZmlyc3RNYXhUb2tlbnMobWVzc2FnZXMsIG9wdGlvbnMpIHtcblx0Y29uc3QgeyBtYXhUb2tlbnMsIHRva2VuQ291bnRlciwgdGV4dFNwbGl0dGVyLCBwYXJ0aWFsU3RyYXRlZ3ksIGVuZE9uIH0gPSBvcHRpb25zO1xuXHRsZXQgbWVzc2FnZXNDb3B5ID0gWy4uLm1lc3NhZ2VzXTtcblx0bGV0IGlkeCA9IDA7XG5cdGZvciAobGV0IGkgPSAwOyBpIDwgbWVzc2FnZXNDb3B5Lmxlbmd0aDsgaSArPSAxKSB7XG5cdFx0Y29uc3QgcmVtYWluaW5nTWVzc2FnZXMgPSBpID4gMCA/IG1lc3NhZ2VzQ29weS5zbGljZSgwLCAtaSkgOiBtZXNzYWdlc0NvcHk7XG5cdFx0aWYgKGF3YWl0IHRva2VuQ291bnRlcihyZW1haW5pbmdNZXNzYWdlcykgPD0gbWF4VG9rZW5zKSB7XG5cdFx0XHRpZHggPSBtZXNzYWdlc0NvcHkubGVuZ3RoIC0gaTtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxuXHRpZiAoaWR4IDwgbWVzc2FnZXNDb3B5Lmxlbmd0aCAmJiBwYXJ0aWFsU3RyYXRlZ3kpIHtcblx0XHRsZXQgaW5jbHVkZWRQYXJ0aWFsID0gZmFsc2U7XG5cdFx0aWYgKEFycmF5LmlzQXJyYXkobWVzc2FnZXNDb3B5W2lkeF0uY29udGVudCkpIHtcblx0XHRcdGNvbnN0IGV4Y2x1ZGVkID0gbWVzc2FnZXNDb3B5W2lkeF07XG5cdFx0XHRpZiAodHlwZW9mIGV4Y2x1ZGVkLmNvbnRlbnQgPT09IFwic3RyaW5nXCIpIHRocm93IG5ldyBFcnJvcihcIkV4cGVjdGVkIGNvbnRlbnQgdG8gYmUgYW4gYXJyYXkuXCIpO1xuXHRcdFx0Y29uc3QgbnVtQmxvY2sgPSBleGNsdWRlZC5jb250ZW50Lmxlbmd0aDtcblx0XHRcdGNvbnN0IHJldmVyc2VkQ29udGVudCA9IHBhcnRpYWxTdHJhdGVneSA9PT0gXCJsYXN0XCIgPyBbLi4uZXhjbHVkZWQuY29udGVudF0ucmV2ZXJzZSgpIDogZXhjbHVkZWQuY29udGVudDtcblx0XHRcdGZvciAobGV0IGkgPSAxOyBpIDw9IG51bUJsb2NrOyBpICs9IDEpIHtcblx0XHRcdFx0Y29uc3QgcGFydGlhbENvbnRlbnQgPSBwYXJ0aWFsU3RyYXRlZ3kgPT09IFwiZmlyc3RcIiA/IHJldmVyc2VkQ29udGVudC5zbGljZSgwLCBpKSA6IHJldmVyc2VkQ29udGVudC5zbGljZSgtaSk7XG5cdFx0XHRcdGNvbnN0IGZpZWxkcyA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhleGNsdWRlZCkuZmlsdGVyKChba10pID0+IGsgIT09IFwidHlwZVwiICYmICFrLnN0YXJ0c1dpdGgoXCJsY19cIikpKTtcblx0XHRcdFx0Y29uc3QgdXBkYXRlZE1lc3NhZ2UgPSBfc3dpdGNoVHlwZVRvTWVzc2FnZShleGNsdWRlZC5nZXRUeXBlKCksIHtcblx0XHRcdFx0XHQuLi5maWVsZHMsXG5cdFx0XHRcdFx0Y29udGVudDogcGFydGlhbENvbnRlbnRcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGNvbnN0IHNsaWNlZE1lc3NhZ2VzID0gWy4uLm1lc3NhZ2VzQ29weS5zbGljZSgwLCBpZHgpLCB1cGRhdGVkTWVzc2FnZV07XG5cdFx0XHRcdGlmIChhd2FpdCB0b2tlbkNvdW50ZXIoc2xpY2VkTWVzc2FnZXMpIDw9IG1heFRva2Vucykge1xuXHRcdFx0XHRcdG1lc3NhZ2VzQ29weSA9IHNsaWNlZE1lc3NhZ2VzO1xuXHRcdFx0XHRcdGlkeCArPSAxO1xuXHRcdFx0XHRcdGluY2x1ZGVkUGFydGlhbCA9IHRydWU7XG5cdFx0XHRcdH0gZWxzZSBicmVhaztcblx0XHRcdH1cblx0XHRcdGlmIChpbmNsdWRlZFBhcnRpYWwgJiYgcGFydGlhbFN0cmF0ZWd5ID09PSBcImxhc3RcIikgZXhjbHVkZWQuY29udGVudCA9IFsuLi5yZXZlcnNlZENvbnRlbnRdLnJldmVyc2UoKTtcblx0XHR9XG5cdFx0aWYgKCFpbmNsdWRlZFBhcnRpYWwpIHtcblx0XHRcdGNvbnN0IGV4Y2x1ZGVkID0gbWVzc2FnZXNDb3B5W2lkeF07XG5cdFx0XHRsZXQgdGV4dDtcblx0XHRcdGlmIChBcnJheS5pc0FycmF5KGV4Y2x1ZGVkLmNvbnRlbnQpICYmIGV4Y2x1ZGVkLmNvbnRlbnQuc29tZSgoYmxvY2spID0+IHR5cGVvZiBibG9jayA9PT0gXCJzdHJpbmdcIiB8fCBibG9jay50eXBlID09PSBcInRleHRcIikpIHtcblx0XHRcdFx0Y29uc3QgdGV4dEJsb2NrID0gZXhjbHVkZWQuY29udGVudC5maW5kKChibG9jaykgPT4gYmxvY2sudHlwZSA9PT0gXCJ0ZXh0XCIgJiYgYmxvY2sudGV4dCk7XG5cdFx0XHRcdHRleHQgPSB0ZXh0QmxvY2s/LnRleHQ7XG5cdFx0XHR9IGVsc2UgaWYgKHR5cGVvZiBleGNsdWRlZC5jb250ZW50ID09PSBcInN0cmluZ1wiKSB0ZXh0ID0gZXhjbHVkZWQuY29udGVudDtcblx0XHRcdGlmICh0ZXh0KSB7XG5cdFx0XHRcdGNvbnN0IHNwbGl0VGV4dHMgPSBhd2FpdCB0ZXh0U3BsaXR0ZXIodGV4dCk7XG5cdFx0XHRcdGNvbnN0IG51bVNwbGl0cyA9IHNwbGl0VGV4dHMubGVuZ3RoO1xuXHRcdFx0XHRpZiAocGFydGlhbFN0cmF0ZWd5ID09PSBcImxhc3RcIikgc3BsaXRUZXh0cy5yZXZlcnNlKCk7XG5cdFx0XHRcdGZvciAobGV0IF8gPSAwOyBfIDwgbnVtU3BsaXRzIC0gMTsgXyArPSAxKSB7XG5cdFx0XHRcdFx0c3BsaXRUZXh0cy5wb3AoKTtcblx0XHRcdFx0XHRleGNsdWRlZC5jb250ZW50ID0gc3BsaXRUZXh0cy5qb2luKFwiXCIpO1xuXHRcdFx0XHRcdGlmIChhd2FpdCB0b2tlbkNvdW50ZXIoWy4uLm1lc3NhZ2VzQ29weS5zbGljZSgwLCBpZHgpLCBleGNsdWRlZF0pIDw9IG1heFRva2Vucykge1xuXHRcdFx0XHRcdFx0aWYgKHBhcnRpYWxTdHJhdGVneSA9PT0gXCJsYXN0XCIpIGV4Y2x1ZGVkLmNvbnRlbnQgPSBbLi4uc3BsaXRUZXh0c10ucmV2ZXJzZSgpLmpvaW4oXCJcIik7XG5cdFx0XHRcdFx0XHRtZXNzYWdlc0NvcHkgPSBbLi4ubWVzc2FnZXNDb3B5LnNsaWNlKDAsIGlkeCksIGV4Y2x1ZGVkXTtcblx0XHRcdFx0XHRcdGlkeCArPSAxO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdGlmIChlbmRPbikge1xuXHRcdGNvbnN0IGVuZE9uQXJyID0gQXJyYXkuaXNBcnJheShlbmRPbikgPyBlbmRPbiA6IFtlbmRPbl07XG5cdFx0d2hpbGUgKGlkeCA+IDAgJiYgIV9pc01lc3NhZ2VUeXBlKG1lc3NhZ2VzQ29weVtpZHggLSAxXSwgZW5kT25BcnIpKSBpZHggLT0gMTtcblx0fVxuXHRyZXR1cm4gbWVzc2FnZXNDb3B5LnNsaWNlKDAsIGlkeCk7XG59XG5hc3luYyBmdW5jdGlvbiBfbGFzdE1heFRva2VucyhtZXNzYWdlcywgb3B0aW9ucykge1xuXHRjb25zdCB7IGFsbG93UGFydGlhbCA9IGZhbHNlLCBpbmNsdWRlU3lzdGVtID0gZmFsc2UsIGVuZE9uLCBzdGFydE9uLC4uLnJlc3QgfSA9IG9wdGlvbnM7XG5cdGxldCBtZXNzYWdlc0NvcHkgPSBtZXNzYWdlcy5tYXAoKG1lc3NhZ2UpID0+IHtcblx0XHRjb25zdCBmaWVsZHMgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMobWVzc2FnZSkuZmlsdGVyKChba10pID0+IGsgIT09IFwidHlwZVwiICYmICFrLnN0YXJ0c1dpdGgoXCJsY19cIikpKTtcblx0XHRyZXR1cm4gX3N3aXRjaFR5cGVUb01lc3NhZ2UobWVzc2FnZS5nZXRUeXBlKCksIGZpZWxkcywgaXNCYXNlTWVzc2FnZUNodW5rKG1lc3NhZ2UpKTtcblx0fSk7XG5cdGlmIChlbmRPbikge1xuXHRcdGNvbnN0IGVuZE9uQXJyID0gQXJyYXkuaXNBcnJheShlbmRPbikgPyBlbmRPbiA6IFtlbmRPbl07XG5cdFx0d2hpbGUgKG1lc3NhZ2VzQ29weS5sZW5ndGggPiAwICYmICFfaXNNZXNzYWdlVHlwZShtZXNzYWdlc0NvcHlbbWVzc2FnZXNDb3B5Lmxlbmd0aCAtIDFdLCBlbmRPbkFycikpIG1lc3NhZ2VzQ29weSA9IG1lc3NhZ2VzQ29weS5zbGljZSgwLCAtMSk7XG5cdH1cblx0Y29uc3Qgc3dhcHBlZFN5c3RlbSA9IGluY2x1ZGVTeXN0ZW0gJiYgbWVzc2FnZXNDb3B5WzBdPy5nZXRUeXBlKCkgPT09IFwic3lzdGVtXCI7XG5cdGxldCByZXZlcnNlZF8gPSBzd2FwcGVkU3lzdGVtID8gbWVzc2FnZXNDb3B5LnNsaWNlKDAsIDEpLmNvbmNhdChtZXNzYWdlc0NvcHkuc2xpY2UoMSkucmV2ZXJzZSgpKSA6IG1lc3NhZ2VzQ29weS5yZXZlcnNlKCk7XG5cdHJldmVyc2VkXyA9IGF3YWl0IF9maXJzdE1heFRva2VucyhyZXZlcnNlZF8sIHtcblx0XHQuLi5yZXN0LFxuXHRcdHBhcnRpYWxTdHJhdGVneTogYWxsb3dQYXJ0aWFsID8gXCJsYXN0XCIgOiB2b2lkIDAsXG5cdFx0ZW5kT246IHN0YXJ0T25cblx0fSk7XG5cdGlmIChzd2FwcGVkU3lzdGVtKSByZXR1cm4gW3JldmVyc2VkX1swXSwgLi4ucmV2ZXJzZWRfLnNsaWNlKDEpLnJldmVyc2UoKV07XG5cdGVsc2UgcmV0dXJuIHJldmVyc2VkXy5yZXZlcnNlKCk7XG59XG5jb25zdCBfTVNHX0NIVU5LX01BUCA9IHtcblx0aHVtYW46IHtcblx0XHRtZXNzYWdlOiBIdW1hbk1lc3NhZ2UsXG5cdFx0bWVzc2FnZUNodW5rOiBIdW1hbk1lc3NhZ2VDaHVua1xuXHR9LFxuXHRhaToge1xuXHRcdG1lc3NhZ2U6IEFJTWVzc2FnZSxcblx0XHRtZXNzYWdlQ2h1bms6IEFJTWVzc2FnZUNodW5rXG5cdH0sXG5cdHN5c3RlbToge1xuXHRcdG1lc3NhZ2U6IFN5c3RlbU1lc3NhZ2UsXG5cdFx0bWVzc2FnZUNodW5rOiBTeXN0ZW1NZXNzYWdlQ2h1bmtcblx0fSxcblx0ZGV2ZWxvcGVyOiB7XG5cdFx0bWVzc2FnZTogU3lzdGVtTWVzc2FnZSxcblx0XHRtZXNzYWdlQ2h1bms6IFN5c3RlbU1lc3NhZ2VDaHVua1xuXHR9LFxuXHR0b29sOiB7XG5cdFx0bWVzc2FnZTogVG9vbE1lc3NhZ2UsXG5cdFx0bWVzc2FnZUNodW5rOiBUb29sTWVzc2FnZUNodW5rXG5cdH0sXG5cdGZ1bmN0aW9uOiB7XG5cdFx0bWVzc2FnZTogRnVuY3Rpb25NZXNzYWdlLFxuXHRcdG1lc3NhZ2VDaHVuazogRnVuY3Rpb25NZXNzYWdlQ2h1bmtcblx0fSxcblx0Z2VuZXJpYzoge1xuXHRcdG1lc3NhZ2U6IENoYXRNZXNzYWdlLFxuXHRcdG1lc3NhZ2VDaHVuazogQ2hhdE1lc3NhZ2VDaHVua1xuXHR9LFxuXHRyZW1vdmU6IHtcblx0XHRtZXNzYWdlOiBSZW1vdmVNZXNzYWdlLFxuXHRcdG1lc3NhZ2VDaHVuazogUmVtb3ZlTWVzc2FnZVxuXHR9XG59O1xuZnVuY3Rpb24gX3N3aXRjaFR5cGVUb01lc3NhZ2UobWVzc2FnZVR5cGUsIGZpZWxkcywgcmV0dXJuQ2h1bmspIHtcblx0bGV0IGNodW5rO1xuXHRsZXQgbXNnO1xuXHRzd2l0Y2ggKG1lc3NhZ2VUeXBlKSB7XG5cdFx0Y2FzZSBcImh1bWFuXCI6XG5cdFx0XHRpZiAocmV0dXJuQ2h1bmspIGNodW5rID0gbmV3IEh1bWFuTWVzc2FnZUNodW5rKGZpZWxkcyk7XG5cdFx0XHRlbHNlIG1zZyA9IG5ldyBIdW1hbk1lc3NhZ2UoZmllbGRzKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJhaVwiOlxuXHRcdFx0aWYgKHJldHVybkNodW5rKSB7XG5cdFx0XHRcdGxldCBhaUNodW5rRmllbGRzID0geyAuLi5maWVsZHMgfTtcblx0XHRcdFx0aWYgKFwidG9vbF9jYWxsc1wiIGluIGFpQ2h1bmtGaWVsZHMpIGFpQ2h1bmtGaWVsZHMgPSB7XG5cdFx0XHRcdFx0Li4uYWlDaHVua0ZpZWxkcyxcblx0XHRcdFx0XHR0b29sX2NhbGxfY2h1bmtzOiBhaUNodW5rRmllbGRzLnRvb2xfY2FsbHM/Lm1hcCgodGMpID0+ICh7XG5cdFx0XHRcdFx0XHQuLi50Yyxcblx0XHRcdFx0XHRcdHR5cGU6IFwidG9vbF9jYWxsX2NodW5rXCIsXG5cdFx0XHRcdFx0XHRpbmRleDogdm9pZCAwLFxuXHRcdFx0XHRcdFx0YXJnczogSlNPTi5zdHJpbmdpZnkodGMuYXJncylcblx0XHRcdFx0XHR9KSlcblx0XHRcdFx0fTtcblx0XHRcdFx0Y2h1bmsgPSBuZXcgQUlNZXNzYWdlQ2h1bmsoYWlDaHVua0ZpZWxkcyk7XG5cdFx0XHR9IGVsc2UgbXNnID0gbmV3IEFJTWVzc2FnZShmaWVsZHMpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcInN5c3RlbVwiOlxuXHRcdFx0aWYgKHJldHVybkNodW5rKSBjaHVuayA9IG5ldyBTeXN0ZW1NZXNzYWdlQ2h1bmsoZmllbGRzKTtcblx0XHRcdGVsc2UgbXNnID0gbmV3IFN5c3RlbU1lc3NhZ2UoZmllbGRzKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJkZXZlbG9wZXJcIjpcblx0XHRcdGlmIChyZXR1cm5DaHVuaykgY2h1bmsgPSBuZXcgU3lzdGVtTWVzc2FnZUNodW5rKHtcblx0XHRcdFx0Li4uZmllbGRzLFxuXHRcdFx0XHRhZGRpdGlvbmFsX2t3YXJnczoge1xuXHRcdFx0XHRcdC4uLmZpZWxkcy5hZGRpdGlvbmFsX2t3YXJncyxcblx0XHRcdFx0XHRfX29wZW5haV9yb2xlX186IFwiZGV2ZWxvcGVyXCJcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRlbHNlIG1zZyA9IG5ldyBTeXN0ZW1NZXNzYWdlKHtcblx0XHRcdFx0Li4uZmllbGRzLFxuXHRcdFx0XHRhZGRpdGlvbmFsX2t3YXJnczoge1xuXHRcdFx0XHRcdC4uLmZpZWxkcy5hZGRpdGlvbmFsX2t3YXJncyxcblx0XHRcdFx0XHRfX29wZW5haV9yb2xlX186IFwiZGV2ZWxvcGVyXCJcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwidG9vbFwiOlxuXHRcdFx0aWYgKFwidG9vbF9jYWxsX2lkXCIgaW4gZmllbGRzKSBpZiAocmV0dXJuQ2h1bmspIGNodW5rID0gbmV3IFRvb2xNZXNzYWdlQ2h1bmsoZmllbGRzKTtcblx0XHRcdGVsc2UgbXNnID0gbmV3IFRvb2xNZXNzYWdlKGZpZWxkcyk7XG5cdFx0XHRlbHNlIHRocm93IG5ldyBFcnJvcihcIkNhbiBub3QgY29udmVydCBUb29sTWVzc2FnZSB0byBUb29sTWVzc2FnZUNodW5rIGlmICd0b29sX2NhbGxfaWQnIGZpZWxkIGlzIG5vdCBkZWZpbmVkLlwiKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJmdW5jdGlvblwiOlxuXHRcdFx0aWYgKHJldHVybkNodW5rKSBjaHVuayA9IG5ldyBGdW5jdGlvbk1lc3NhZ2VDaHVuayhmaWVsZHMpO1xuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGlmICghZmllbGRzLm5hbWUpIHRocm93IG5ldyBFcnJvcihcIkZ1bmN0aW9uTWVzc2FnZSBtdXN0IGhhdmUgYSAnbmFtZScgZmllbGRcIik7XG5cdFx0XHRcdG1zZyA9IG5ldyBGdW5jdGlvbk1lc3NhZ2UoZmllbGRzKTtcblx0XHRcdH1cblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJnZW5lcmljXCI6XG5cdFx0XHRpZiAoXCJyb2xlXCIgaW4gZmllbGRzKSBpZiAocmV0dXJuQ2h1bmspIGNodW5rID0gbmV3IENoYXRNZXNzYWdlQ2h1bmsoZmllbGRzKTtcblx0XHRcdGVsc2UgbXNnID0gbmV3IENoYXRNZXNzYWdlKGZpZWxkcyk7XG5cdFx0XHRlbHNlIHRocm93IG5ldyBFcnJvcihcIkNhbiBub3QgY29udmVydCBDaGF0TWVzc2FnZSB0byBDaGF0TWVzc2FnZUNodW5rIGlmICdyb2xlJyBmaWVsZCBpcyBub3QgZGVmaW5lZC5cIik7XG5cdFx0XHRicmVhaztcblx0XHRkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCBtZXNzYWdlIHR5cGUgJHttZXNzYWdlVHlwZX1gKTtcblx0fVxuXHRpZiAocmV0dXJuQ2h1bmsgJiYgY2h1bmspIHJldHVybiBjaHVuaztcblx0aWYgKG1zZykgcmV0dXJuIG1zZztcblx0dGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQgbWVzc2FnZSB0eXBlICR7bWVzc2FnZVR5cGV9YCk7XG59XG5mdW5jdGlvbiBfY2h1bmtUb01zZyhjaHVuaykge1xuXHRjb25zdCBjaHVua1R5cGUgPSBjaHVuay5nZXRUeXBlKCk7XG5cdGxldCBtc2c7XG5cdGNvbnN0IGZpZWxkcyA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhjaHVuaykuZmlsdGVyKChba10pID0+ICFbXCJ0eXBlXCIsIFwidG9vbF9jYWxsX2NodW5rc1wiXS5pbmNsdWRlcyhrKSAmJiAhay5zdGFydHNXaXRoKFwibGNfXCIpKSk7XG5cdGlmIChjaHVua1R5cGUgaW4gX01TR19DSFVOS19NQVApIG1zZyA9IF9zd2l0Y2hUeXBlVG9NZXNzYWdlKGNodW5rVHlwZSwgZmllbGRzKTtcblx0aWYgKCFtc2cpIHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIG1lc3NhZ2UgY2h1bmsgY2xhc3MgJHtjaHVua1R5cGV9LiBTdXBwb3J0ZWQgY2xhc3NlcyBhcmUgJHtPYmplY3Qua2V5cyhfTVNHX0NIVU5LX01BUCl9YCk7XG5cdHJldHVybiBtc2c7XG59XG4vKipcbiogVGhlIGRlZmF1bHQgdGV4dCBzcGxpdHRlciBmdW5jdGlvbiB0aGF0IHNwbGl0cyB0ZXh0IGJ5IG5ld2xpbmVzLlxuKlxuKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhbiBhcnJheSBvZiBzdHJpbmdzIHNwbGl0IGJ5IG5ld2xpbmVzLlxuKi9cbmZ1bmN0aW9uIGRlZmF1bHRUZXh0U3BsaXR0ZXIodGV4dCkge1xuXHRjb25zdCBzcGxpdHMgPSB0ZXh0LnNwbGl0KFwiXFxuXCIpO1xuXHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFsuLi5zcGxpdHMuc2xpY2UoMCwgLTEpLm1hcCgocykgPT4gYCR7c31cXG5gKSwgc3BsaXRzW3NwbGl0cy5sZW5ndGggLSAxXV0pO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGRlZmF1bHRUZXh0U3BsaXR0ZXIsIGZpbHRlck1lc3NhZ2VzLCBtZXJnZU1lc3NhZ2VSdW5zLCB0cmltTWVzc2FnZXMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zZm9ybWVycy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/messages/transformers.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/messages/utils.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/utils.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   coerceMessageLikeToMessage: () => (/* binding */ coerceMessageLikeToMessage),\n/* harmony export */   collapseToolCallChunks: () => (/* binding */ collapseToolCallChunks),\n/* harmony export */   convertToChunk: () => (/* binding */ convertToChunk),\n/* harmony export */   getBufferString: () => (/* binding */ getBufferString),\n/* harmony export */   iife: () => (/* binding */ iife),\n/* harmony export */   mapChatMessagesToStoredMessages: () => (/* binding */ mapChatMessagesToStoredMessages),\n/* harmony export */   mapStoredMessageToChatMessage: () => (/* binding */ mapStoredMessageToChatMessage),\n/* harmony export */   mapStoredMessagesToChatMessages: () => (/* binding */ mapStoredMessagesToChatMessages)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _tool_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tool.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/tool.js\");\n/* harmony import */ var _errors_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../errors/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/errors/index.js\");\n/* harmony import */ var _tools_utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../tools/utils.js */ \"(ssr)/./node_modules/@langchain/core/dist/tools/utils.js\");\n/* harmony import */ var _utils_json_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/json.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/json.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./chat.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/chat.js\");\n/* harmony import */ var _function_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./function.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/function.js\");\n/* harmony import */ var _human_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./human.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/human.js\");\n/* harmony import */ var _modifier_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./modifier.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/modifier.js\");\n/* harmony import */ var _system_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./system.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/system.js\");\n/* harmony import */ var _ai_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./ai.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/ai.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/messages/utils.ts\n/**\n* Immediately-invoked function expression.\n*\n* @param fn - The function to execute\n* @returns The result of the function\n*/\nconst iife = (fn) => fn();\nfunction _coerceToolCall(toolCall) {\n\tif ((0,_tools_utils_js__WEBPACK_IMPORTED_MODULE_3__._isToolCall)(toolCall)) return toolCall;\n\telse if (typeof toolCall.id === \"string\" && toolCall.type === \"function\" && typeof toolCall.function === \"object\" && toolCall.function !== null && \"arguments\" in toolCall.function && typeof toolCall.function.arguments === \"string\" && \"name\" in toolCall.function && typeof toolCall.function.name === \"string\") return {\n\t\tid: toolCall.id,\n\t\targs: JSON.parse(toolCall.function.arguments),\n\t\tname: toolCall.function.name,\n\t\ttype: \"tool_call\"\n\t};\n\telse return toolCall;\n}\nfunction isSerializedConstructor(x) {\n\treturn typeof x === \"object\" && x != null && x.lc === 1 && Array.isArray(x.id) && x.kwargs != null && typeof x.kwargs === \"object\";\n}\nfunction _constructMessageFromParams(params) {\n\tlet type;\n\tlet rest;\n\tif (isSerializedConstructor(params)) {\n\t\tconst className = params.id.at(-1);\n\t\tif (className === \"HumanMessage\" || className === \"HumanMessageChunk\") type = \"user\";\n\t\telse if (className === \"AIMessage\" || className === \"AIMessageChunk\") type = \"assistant\";\n\t\telse if (className === \"SystemMessage\" || className === \"SystemMessageChunk\") type = \"system\";\n\t\telse if (className === \"FunctionMessage\" || className === \"FunctionMessageChunk\") type = \"function\";\n\t\telse if (className === \"ToolMessage\" || className === \"ToolMessageChunk\") type = \"tool\";\n\t\telse type = \"unknown\";\n\t\trest = params.kwargs;\n\t} else {\n\t\tconst { type: extractedType,...otherParams } = params;\n\t\ttype = extractedType;\n\t\trest = otherParams;\n\t}\n\tif (type === \"human\" || type === \"user\") return new _human_js__WEBPACK_IMPORTED_MODULE_7__.HumanMessage(rest);\n\telse if (type === \"ai\" || type === \"assistant\") {\n\t\tconst { tool_calls: rawToolCalls,...other } = rest;\n\t\tif (!Array.isArray(rawToolCalls)) return new _ai_js__WEBPACK_IMPORTED_MODULE_10__.AIMessage(rest);\n\t\tconst tool_calls = rawToolCalls.map(_coerceToolCall);\n\t\treturn new _ai_js__WEBPACK_IMPORTED_MODULE_10__.AIMessage({\n\t\t\t...other,\n\t\t\ttool_calls\n\t\t});\n\t} else if (type === \"system\") return new _system_js__WEBPACK_IMPORTED_MODULE_9__.SystemMessage(rest);\n\telse if (type === \"developer\") return new _system_js__WEBPACK_IMPORTED_MODULE_9__.SystemMessage({\n\t\t...rest,\n\t\tadditional_kwargs: {\n\t\t\t...rest.additional_kwargs,\n\t\t\t__openai_role__: \"developer\"\n\t\t}\n\t});\n\telse if (type === \"tool\" && \"tool_call_id\" in rest) return new _tool_js__WEBPACK_IMPORTED_MODULE_1__.ToolMessage({\n\t\t...rest,\n\t\tcontent: rest.content,\n\t\ttool_call_id: rest.tool_call_id,\n\t\tname: rest.name\n\t});\n\telse if (type === \"remove\" && \"id\" in rest && typeof rest.id === \"string\") return new _modifier_js__WEBPACK_IMPORTED_MODULE_8__.RemoveMessage({\n\t\t...rest,\n\t\tid: rest.id\n\t});\n\telse {\n\t\tconst error = (0,_errors_index_js__WEBPACK_IMPORTED_MODULE_2__.addLangChainErrorFields)(/* @__PURE__ */ new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.\\n\\nReceived: ${JSON.stringify(params, null, 2)}`), \"MESSAGE_COERCION_FAILURE\");\n\t\tthrow error;\n\t}\n}\nfunction coerceMessageLikeToMessage(messageLike) {\n\tif (typeof messageLike === \"string\") return new _human_js__WEBPACK_IMPORTED_MODULE_7__.HumanMessage(messageLike);\n\telse if ((0,_base_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(messageLike)) return messageLike;\n\tif (Array.isArray(messageLike)) {\n\t\tconst [type, content] = messageLike;\n\t\treturn _constructMessageFromParams({\n\t\t\ttype,\n\t\t\tcontent\n\t\t});\n\t} else if ((0,_base_js__WEBPACK_IMPORTED_MODULE_0__._isMessageFieldWithRole)(messageLike)) {\n\t\tconst { role: type,...rest } = messageLike;\n\t\treturn _constructMessageFromParams({\n\t\t\t...rest,\n\t\t\ttype\n\t\t});\n\t} else return _constructMessageFromParams(messageLike);\n}\n/**\n* This function is used by memory classes to get a string representation\n* of the chat message history, based on the message content and role.\n*\n* Produces compact output like:\n* ```\n* Human: What's the weather?\n* AI: Let me check...[tool_calls]\n* Tool: 72F and sunny\n* ```\n*\n* This avoids token inflation from metadata when stringifying message objects directly.\n*/\nfunction getBufferString(messages, humanPrefix = \"Human\", aiPrefix = \"AI\") {\n\tconst string_messages = [];\n\tfor (const m of messages) {\n\t\tlet role;\n\t\tif (m.type === \"human\") role = humanPrefix;\n\t\telse if (m.type === \"ai\") role = aiPrefix;\n\t\telse if (m.type === \"system\") role = \"System\";\n\t\telse if (m.type === \"tool\") role = \"Tool\";\n\t\telse if (m.type === \"generic\") role = m.role;\n\t\telse throw new Error(`Got unsupported message type: ${m.type}`);\n\t\tconst nameStr = m.name ? `${m.name}, ` : \"\";\n\t\tconst readableContent = m.text;\n\t\tlet message = `${role}: ${nameStr}${readableContent}`;\n\t\tif (m.type === \"ai\") {\n\t\t\tconst aiMessage = m;\n\t\t\tif (aiMessage.tool_calls && aiMessage.tool_calls.length > 0) message += JSON.stringify(aiMessage.tool_calls);\n\t\t\telse if (aiMessage.additional_kwargs && \"function_call\" in aiMessage.additional_kwargs) message += JSON.stringify(aiMessage.additional_kwargs.function_call);\n\t\t}\n\t\tstring_messages.push(message);\n\t}\n\treturn string_messages.join(\"\\n\");\n}\n/**\n* Maps messages from an older format (V1) to the current `StoredMessage`\n* format. If the message is already in the `StoredMessage` format, it is\n* returned as is. Otherwise, it transforms the V1 message into a\n* `StoredMessage`. This function is important for maintaining\n* compatibility with older message formats.\n*/\nfunction mapV1MessageToStoredMessage(message) {\n\tif (message.data !== void 0) return message;\n\telse {\n\t\tconst v1Message = message;\n\t\treturn {\n\t\t\ttype: v1Message.type,\n\t\t\tdata: {\n\t\t\t\tcontent: v1Message.text,\n\t\t\t\trole: v1Message.role,\n\t\t\t\tname: void 0,\n\t\t\t\ttool_call_id: void 0\n\t\t\t}\n\t\t};\n\t}\n}\nfunction mapStoredMessageToChatMessage(message) {\n\tconst storedMessage = mapV1MessageToStoredMessage(message);\n\tswitch (storedMessage.type) {\n\t\tcase \"human\": return new _human_js__WEBPACK_IMPORTED_MODULE_7__.HumanMessage(storedMessage.data);\n\t\tcase \"ai\": return new _ai_js__WEBPACK_IMPORTED_MODULE_10__.AIMessage(storedMessage.data);\n\t\tcase \"system\": return new _system_js__WEBPACK_IMPORTED_MODULE_9__.SystemMessage(storedMessage.data);\n\t\tcase \"function\":\n\t\t\tif (storedMessage.data.name === void 0) throw new Error(\"Name must be defined for function messages\");\n\t\t\treturn new _function_js__WEBPACK_IMPORTED_MODULE_6__.FunctionMessage(storedMessage.data);\n\t\tcase \"tool\":\n\t\t\tif (storedMessage.data.tool_call_id === void 0) throw new Error(\"Tool call ID must be defined for tool messages\");\n\t\t\treturn new _tool_js__WEBPACK_IMPORTED_MODULE_1__.ToolMessage(storedMessage.data);\n\t\tcase \"generic\":\n\t\t\tif (storedMessage.data.role === void 0) throw new Error(\"Role must be defined for chat messages\");\n\t\t\treturn new _chat_js__WEBPACK_IMPORTED_MODULE_5__.ChatMessage(storedMessage.data);\n\t\tdefault: throw new Error(`Got unexpected type: ${storedMessage.type}`);\n\t}\n}\n/**\n* Transforms an array of `StoredMessage` instances into an array of\n* `BaseMessage` instances. It uses the `mapV1MessageToStoredMessage`\n* function to ensure all messages are in the `StoredMessage` format, then\n* creates new instances of the appropriate `BaseMessage` subclass based\n* on the type of each message. This function is used to prepare stored\n* messages for use in a chat context.\n*/\nfunction mapStoredMessagesToChatMessages(messages) {\n\treturn messages.map(mapStoredMessageToChatMessage);\n}\n/**\n* Transforms an array of `BaseMessage` instances into an array of\n* `StoredMessage` instances. It does this by calling the `toDict` method\n* on each `BaseMessage`, which returns a `StoredMessage`. This function\n* is used to prepare chat messages for storage.\n*/\nfunction mapChatMessagesToStoredMessages(messages) {\n\treturn messages.map((message) => message.toDict());\n}\nfunction convertToChunk(message) {\n\tconst type = message._getType();\n\tif (type === \"human\") return new _human_js__WEBPACK_IMPORTED_MODULE_7__.HumanMessageChunk({ ...message });\n\telse if (type === \"ai\") {\n\t\tlet aiChunkFields = { ...message };\n\t\tif (\"tool_calls\" in aiChunkFields) aiChunkFields = {\n\t\t\t...aiChunkFields,\n\t\t\ttool_call_chunks: aiChunkFields.tool_calls?.map((tc) => ({\n\t\t\t\t...tc,\n\t\t\t\ttype: \"tool_call_chunk\",\n\t\t\t\tindex: void 0,\n\t\t\t\targs: JSON.stringify(tc.args)\n\t\t\t}))\n\t\t};\n\t\treturn new _ai_js__WEBPACK_IMPORTED_MODULE_10__.AIMessageChunk({ ...aiChunkFields });\n\t} else if (type === \"system\") return new _system_js__WEBPACK_IMPORTED_MODULE_9__.SystemMessageChunk({ ...message });\n\telse if (type === \"function\") return new _function_js__WEBPACK_IMPORTED_MODULE_6__.FunctionMessageChunk({ ...message });\n\telse if (_chat_js__WEBPACK_IMPORTED_MODULE_5__.ChatMessage.isInstance(message)) return new _chat_js__WEBPACK_IMPORTED_MODULE_5__.ChatMessageChunk({ ...message });\n\telse throw new Error(\"Unknown message type.\");\n}\n/**\n* Collapses an array of tool call chunks into complete tool calls.\n*\n* This function groups tool call chunks by their id and/or index, then attempts to\n* parse and validate the accumulated arguments for each group. Successfully parsed\n* tool calls are returned as valid `ToolCall` objects, while malformed ones are\n* returned as `InvalidToolCall` objects.\n*\n* @param chunks - An array of `ToolCallChunk` objects to collapse\n* @returns An object containing:\n*   - `tool_call_chunks`: The original input chunks\n*   - `tool_calls`: An array of successfully parsed and validated tool calls\n*   - `invalid_tool_calls`: An array of tool calls that failed parsing or validation\n*\n* @remarks\n* Chunks are grouped using the following matching logic:\n* - If a chunk has both an id and index, it matches chunks with the same id and index\n* - If a chunk has only an id, it matches chunks with the same id\n* - If a chunk has only an index, it matches chunks with the same index\n*\n* For each group, the function:\n* 1. Concatenates all `args` strings from the chunks\n* 2. Attempts to parse the concatenated string as JSON\n* 3. Validates that the result is a non-null object with a valid id\n* 4. Creates either a `ToolCall` (if valid) or `InvalidToolCall` (if invalid)\n*/\nfunction collapseToolCallChunks(chunks) {\n\tconst groupedToolCallChunks = chunks.reduce((acc, chunk) => {\n\t\tconst matchedChunkIndex = acc.findIndex(([match]) => {\n\t\t\tif (\"id\" in chunk && chunk.id && \"index\" in chunk && chunk.index !== void 0) return chunk.id === match.id && chunk.index === match.index;\n\t\t\tif (\"id\" in chunk && chunk.id) return chunk.id === match.id;\n\t\t\tif (\"index\" in chunk && chunk.index !== void 0) return chunk.index === match.index;\n\t\t\treturn false;\n\t\t});\n\t\tif (matchedChunkIndex !== -1) acc[matchedChunkIndex].push(chunk);\n\t\telse acc.push([chunk]);\n\t\treturn acc;\n\t}, []);\n\tconst toolCalls = [];\n\tconst invalidToolCalls = [];\n\tfor (const chunks$1 of groupedToolCallChunks) {\n\t\tlet parsedArgs = null;\n\t\tconst name = chunks$1[0]?.name ?? \"\";\n\t\tconst joinedArgs = chunks$1.map((c) => c.args || \"\").join(\"\").trim();\n\t\tconst argsStr = joinedArgs.length ? joinedArgs : \"{}\";\n\t\tconst id = chunks$1[0]?.id;\n\t\ttry {\n\t\t\tparsedArgs = (0,_utils_json_js__WEBPACK_IMPORTED_MODULE_4__.parsePartialJson)(argsStr);\n\t\t\tif (!id || parsedArgs === null || typeof parsedArgs !== \"object\" || Array.isArray(parsedArgs)) throw new Error(\"Malformed tool call chunk args.\");\n\t\t\ttoolCalls.push({\n\t\t\t\tname,\n\t\t\t\targs: parsedArgs,\n\t\t\t\tid,\n\t\t\t\ttype: \"tool_call\"\n\t\t\t});\n\t\t} catch {\n\t\t\tinvalidToolCalls.push({\n\t\t\t\tname,\n\t\t\t\targs: argsStr,\n\t\t\t\tid,\n\t\t\t\terror: \"Malformed args.\",\n\t\t\t\ttype: \"invalid_tool_call\"\n\t\t\t});\n\t\t}\n\t}\n\treturn {\n\t\ttool_call_chunks: chunks,\n\t\ttool_calls: toolCalls,\n\t\tinvalid_tool_calls: invalidToolCalls\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvdXRpbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFtRTtBQUMzQjtBQUNxQjtBQUNiO0FBQ0k7QUFDTTtBQUNZO0FBQ1Q7QUFDZjtBQUNrQjtBQUNaOztBQUVwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLDREQUFXO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsVUFBVSxxQ0FBcUM7QUFDL0M7QUFDQTtBQUNBO0FBQ0EscURBQXFELG1EQUFZO0FBQ2pFO0FBQ0EsVUFBVSxvQ0FBb0M7QUFDOUMsK0NBQStDLDhDQUFTO0FBQ3hEO0FBQ0EsYUFBYSw4Q0FBUztBQUN0QjtBQUNBO0FBQ0EsR0FBRztBQUNILEdBQUcsdUNBQXVDLHFEQUFhO0FBQ3ZELDJDQUEyQyxxREFBYTtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLGdFQUFnRSxpREFBVztBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRix1RkFBdUYsdURBQWE7QUFDcEc7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLGdCQUFnQix5RUFBdUIsb0tBQW9LLGdDQUFnQztBQUMzTztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxtREFBWTtBQUM3RCxVQUFVLHVEQUFhO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsR0FBRyxTQUFTLGlFQUF1QjtBQUNuQyxVQUFVLHFCQUFxQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QsT0FBTztBQUMvRCw4QkFBOEIsT0FBTztBQUNyQztBQUNBLG1CQUFtQixLQUFLLElBQUksUUFBUSxFQUFFLGdCQUFnQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixtREFBWTtBQUN2Qyx3QkFBd0IsOENBQVM7QUFDakMsNEJBQTRCLHFEQUFhO0FBQ3pDO0FBQ0E7QUFDQSxjQUFjLHlEQUFlO0FBQzdCO0FBQ0E7QUFDQSxjQUFjLGlEQUFXO0FBQ3pCO0FBQ0E7QUFDQSxjQUFjLGlEQUFXO0FBQ3pCLG1EQUFtRCxtQkFBbUI7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLHdEQUFpQixHQUFHLFlBQVk7QUFDbEU7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxhQUFhLG1EQUFjLEdBQUcsa0JBQWtCO0FBQ2hELEdBQUcsdUNBQXVDLDBEQUFrQixHQUFHLFlBQVk7QUFDM0UsMENBQTBDLDhEQUFvQixHQUFHLFlBQVk7QUFDN0UsVUFBVSxpREFBVyxpQ0FBaUMsc0RBQWdCLEdBQUcsWUFBWTtBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Q7QUFDdEQ7QUFDQTtBQUNBLGdCQUFnQixnRUFBZ0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNzTTtBQUN0TSIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL3V0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9pc01lc3NhZ2VGaWVsZFdpdGhSb2xlLCBpc0Jhc2VNZXNzYWdlIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgVG9vbE1lc3NhZ2UgfSBmcm9tIFwiLi90b29sLmpzXCI7XG5pbXBvcnQgeyBhZGRMYW5nQ2hhaW5FcnJvckZpZWxkcyB9IGZyb20gXCIuLi9lcnJvcnMvaW5kZXguanNcIjtcbmltcG9ydCB7IF9pc1Rvb2xDYWxsIH0gZnJvbSBcIi4uL3Rvb2xzL3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBwYXJzZVBhcnRpYWxKc29uIH0gZnJvbSBcIi4uL3V0aWxzL2pzb24uanNcIjtcbmltcG9ydCB7IENoYXRNZXNzYWdlLCBDaGF0TWVzc2FnZUNodW5rIH0gZnJvbSBcIi4vY2hhdC5qc1wiO1xuaW1wb3J0IHsgRnVuY3Rpb25NZXNzYWdlLCBGdW5jdGlvbk1lc3NhZ2VDaHVuayB9IGZyb20gXCIuL2Z1bmN0aW9uLmpzXCI7XG5pbXBvcnQgeyBIdW1hbk1lc3NhZ2UsIEh1bWFuTWVzc2FnZUNodW5rIH0gZnJvbSBcIi4vaHVtYW4uanNcIjtcbmltcG9ydCB7IFJlbW92ZU1lc3NhZ2UgfSBmcm9tIFwiLi9tb2RpZmllci5qc1wiO1xuaW1wb3J0IHsgU3lzdGVtTWVzc2FnZSwgU3lzdGVtTWVzc2FnZUNodW5rIH0gZnJvbSBcIi4vc3lzdGVtLmpzXCI7XG5pbXBvcnQgeyBBSU1lc3NhZ2UsIEFJTWVzc2FnZUNodW5rIH0gZnJvbSBcIi4vYWkuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9tZXNzYWdlcy91dGlscy50c1xuLyoqXG4qIEltbWVkaWF0ZWx5LWludm9rZWQgZnVuY3Rpb24gZXhwcmVzc2lvbi5cbipcbiogQHBhcmFtIGZuIC0gVGhlIGZ1bmN0aW9uIHRvIGV4ZWN1dGVcbiogQHJldHVybnMgVGhlIHJlc3VsdCBvZiB0aGUgZnVuY3Rpb25cbiovXG5jb25zdCBpaWZlID0gKGZuKSA9PiBmbigpO1xuZnVuY3Rpb24gX2NvZXJjZVRvb2xDYWxsKHRvb2xDYWxsKSB7XG5cdGlmIChfaXNUb29sQ2FsbCh0b29sQ2FsbCkpIHJldHVybiB0b29sQ2FsbDtcblx0ZWxzZSBpZiAodHlwZW9mIHRvb2xDYWxsLmlkID09PSBcInN0cmluZ1wiICYmIHRvb2xDYWxsLnR5cGUgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgdG9vbENhbGwuZnVuY3Rpb24gPT09IFwib2JqZWN0XCIgJiYgdG9vbENhbGwuZnVuY3Rpb24gIT09IG51bGwgJiYgXCJhcmd1bWVudHNcIiBpbiB0b29sQ2FsbC5mdW5jdGlvbiAmJiB0eXBlb2YgdG9vbENhbGwuZnVuY3Rpb24uYXJndW1lbnRzID09PSBcInN0cmluZ1wiICYmIFwibmFtZVwiIGluIHRvb2xDYWxsLmZ1bmN0aW9uICYmIHR5cGVvZiB0b29sQ2FsbC5mdW5jdGlvbi5uYW1lID09PSBcInN0cmluZ1wiKSByZXR1cm4ge1xuXHRcdGlkOiB0b29sQ2FsbC5pZCxcblx0XHRhcmdzOiBKU09OLnBhcnNlKHRvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50cyksXG5cdFx0bmFtZTogdG9vbENhbGwuZnVuY3Rpb24ubmFtZSxcblx0XHR0eXBlOiBcInRvb2xfY2FsbFwiXG5cdH07XG5cdGVsc2UgcmV0dXJuIHRvb2xDYWxsO1xufVxuZnVuY3Rpb24gaXNTZXJpYWxpemVkQ29uc3RydWN0b3IoeCkge1xuXHRyZXR1cm4gdHlwZW9mIHggPT09IFwib2JqZWN0XCIgJiYgeCAhPSBudWxsICYmIHgubGMgPT09IDEgJiYgQXJyYXkuaXNBcnJheSh4LmlkKSAmJiB4Lmt3YXJncyAhPSBudWxsICYmIHR5cGVvZiB4Lmt3YXJncyA9PT0gXCJvYmplY3RcIjtcbn1cbmZ1bmN0aW9uIF9jb25zdHJ1Y3RNZXNzYWdlRnJvbVBhcmFtcyhwYXJhbXMpIHtcblx0bGV0IHR5cGU7XG5cdGxldCByZXN0O1xuXHRpZiAoaXNTZXJpYWxpemVkQ29uc3RydWN0b3IocGFyYW1zKSkge1xuXHRcdGNvbnN0IGNsYXNzTmFtZSA9IHBhcmFtcy5pZC5hdCgtMSk7XG5cdFx0aWYgKGNsYXNzTmFtZSA9PT0gXCJIdW1hbk1lc3NhZ2VcIiB8fCBjbGFzc05hbWUgPT09IFwiSHVtYW5NZXNzYWdlQ2h1bmtcIikgdHlwZSA9IFwidXNlclwiO1xuXHRcdGVsc2UgaWYgKGNsYXNzTmFtZSA9PT0gXCJBSU1lc3NhZ2VcIiB8fCBjbGFzc05hbWUgPT09IFwiQUlNZXNzYWdlQ2h1bmtcIikgdHlwZSA9IFwiYXNzaXN0YW50XCI7XG5cdFx0ZWxzZSBpZiAoY2xhc3NOYW1lID09PSBcIlN5c3RlbU1lc3NhZ2VcIiB8fCBjbGFzc05hbWUgPT09IFwiU3lzdGVtTWVzc2FnZUNodW5rXCIpIHR5cGUgPSBcInN5c3RlbVwiO1xuXHRcdGVsc2UgaWYgKGNsYXNzTmFtZSA9PT0gXCJGdW5jdGlvbk1lc3NhZ2VcIiB8fCBjbGFzc05hbWUgPT09IFwiRnVuY3Rpb25NZXNzYWdlQ2h1bmtcIikgdHlwZSA9IFwiZnVuY3Rpb25cIjtcblx0XHRlbHNlIGlmIChjbGFzc05hbWUgPT09IFwiVG9vbE1lc3NhZ2VcIiB8fCBjbGFzc05hbWUgPT09IFwiVG9vbE1lc3NhZ2VDaHVua1wiKSB0eXBlID0gXCJ0b29sXCI7XG5cdFx0ZWxzZSB0eXBlID0gXCJ1bmtub3duXCI7XG5cdFx0cmVzdCA9IHBhcmFtcy5rd2FyZ3M7XG5cdH0gZWxzZSB7XG5cdFx0Y29uc3QgeyB0eXBlOiBleHRyYWN0ZWRUeXBlLC4uLm90aGVyUGFyYW1zIH0gPSBwYXJhbXM7XG5cdFx0dHlwZSA9IGV4dHJhY3RlZFR5cGU7XG5cdFx0cmVzdCA9IG90aGVyUGFyYW1zO1xuXHR9XG5cdGlmICh0eXBlID09PSBcImh1bWFuXCIgfHwgdHlwZSA9PT0gXCJ1c2VyXCIpIHJldHVybiBuZXcgSHVtYW5NZXNzYWdlKHJlc3QpO1xuXHRlbHNlIGlmICh0eXBlID09PSBcImFpXCIgfHwgdHlwZSA9PT0gXCJhc3Npc3RhbnRcIikge1xuXHRcdGNvbnN0IHsgdG9vbF9jYWxsczogcmF3VG9vbENhbGxzLC4uLm90aGVyIH0gPSByZXN0O1xuXHRcdGlmICghQXJyYXkuaXNBcnJheShyYXdUb29sQ2FsbHMpKSByZXR1cm4gbmV3IEFJTWVzc2FnZShyZXN0KTtcblx0XHRjb25zdCB0b29sX2NhbGxzID0gcmF3VG9vbENhbGxzLm1hcChfY29lcmNlVG9vbENhbGwpO1xuXHRcdHJldHVybiBuZXcgQUlNZXNzYWdlKHtcblx0XHRcdC4uLm90aGVyLFxuXHRcdFx0dG9vbF9jYWxsc1xuXHRcdH0pO1xuXHR9IGVsc2UgaWYgKHR5cGUgPT09IFwic3lzdGVtXCIpIHJldHVybiBuZXcgU3lzdGVtTWVzc2FnZShyZXN0KTtcblx0ZWxzZSBpZiAodHlwZSA9PT0gXCJkZXZlbG9wZXJcIikgcmV0dXJuIG5ldyBTeXN0ZW1NZXNzYWdlKHtcblx0XHQuLi5yZXN0LFxuXHRcdGFkZGl0aW9uYWxfa3dhcmdzOiB7XG5cdFx0XHQuLi5yZXN0LmFkZGl0aW9uYWxfa3dhcmdzLFxuXHRcdFx0X19vcGVuYWlfcm9sZV9fOiBcImRldmVsb3BlclwiXG5cdFx0fVxuXHR9KTtcblx0ZWxzZSBpZiAodHlwZSA9PT0gXCJ0b29sXCIgJiYgXCJ0b29sX2NhbGxfaWRcIiBpbiByZXN0KSByZXR1cm4gbmV3IFRvb2xNZXNzYWdlKHtcblx0XHQuLi5yZXN0LFxuXHRcdGNvbnRlbnQ6IHJlc3QuY29udGVudCxcblx0XHR0b29sX2NhbGxfaWQ6IHJlc3QudG9vbF9jYWxsX2lkLFxuXHRcdG5hbWU6IHJlc3QubmFtZVxuXHR9KTtcblx0ZWxzZSBpZiAodHlwZSA9PT0gXCJyZW1vdmVcIiAmJiBcImlkXCIgaW4gcmVzdCAmJiB0eXBlb2YgcmVzdC5pZCA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIG5ldyBSZW1vdmVNZXNzYWdlKHtcblx0XHQuLi5yZXN0LFxuXHRcdGlkOiByZXN0LmlkXG5cdH0pO1xuXHRlbHNlIHtcblx0XHRjb25zdCBlcnJvciA9IGFkZExhbmdDaGFpbkVycm9yRmllbGRzKC8qIEBfX1BVUkVfXyAqLyBuZXcgRXJyb3IoYFVuYWJsZSB0byBjb2VyY2UgbWVzc2FnZSBmcm9tIGFycmF5OiBvbmx5IGh1bWFuLCBBSSwgc3lzdGVtLCBkZXZlbG9wZXIsIG9yIHRvb2wgbWVzc2FnZSBjb2VyY2lvbiBpcyBjdXJyZW50bHkgc3VwcG9ydGVkLlxcblxcblJlY2VpdmVkOiAke0pTT04uc3RyaW5naWZ5KHBhcmFtcywgbnVsbCwgMil9YCksIFwiTUVTU0FHRV9DT0VSQ0lPTl9GQUlMVVJFXCIpO1xuXHRcdHRocm93IGVycm9yO1xuXHR9XG59XG5mdW5jdGlvbiBjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZShtZXNzYWdlTGlrZSkge1xuXHRpZiAodHlwZW9mIG1lc3NhZ2VMaWtlID09PSBcInN0cmluZ1wiKSByZXR1cm4gbmV3IEh1bWFuTWVzc2FnZShtZXNzYWdlTGlrZSk7XG5cdGVsc2UgaWYgKGlzQmFzZU1lc3NhZ2UobWVzc2FnZUxpa2UpKSByZXR1cm4gbWVzc2FnZUxpa2U7XG5cdGlmIChBcnJheS5pc0FycmF5KG1lc3NhZ2VMaWtlKSkge1xuXHRcdGNvbnN0IFt0eXBlLCBjb250ZW50XSA9IG1lc3NhZ2VMaWtlO1xuXHRcdHJldHVybiBfY29uc3RydWN0TWVzc2FnZUZyb21QYXJhbXMoe1xuXHRcdFx0dHlwZSxcblx0XHRcdGNvbnRlbnRcblx0XHR9KTtcblx0fSBlbHNlIGlmIChfaXNNZXNzYWdlRmllbGRXaXRoUm9sZShtZXNzYWdlTGlrZSkpIHtcblx0XHRjb25zdCB7IHJvbGU6IHR5cGUsLi4ucmVzdCB9ID0gbWVzc2FnZUxpa2U7XG5cdFx0cmV0dXJuIF9jb25zdHJ1Y3RNZXNzYWdlRnJvbVBhcmFtcyh7XG5cdFx0XHQuLi5yZXN0LFxuXHRcdFx0dHlwZVxuXHRcdH0pO1xuXHR9IGVsc2UgcmV0dXJuIF9jb25zdHJ1Y3RNZXNzYWdlRnJvbVBhcmFtcyhtZXNzYWdlTGlrZSk7XG59XG4vKipcbiogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGJ5IG1lbW9yeSBjbGFzc2VzIHRvIGdldCBhIHN0cmluZyByZXByZXNlbnRhdGlvblxuKiBvZiB0aGUgY2hhdCBtZXNzYWdlIGhpc3RvcnksIGJhc2VkIG9uIHRoZSBtZXNzYWdlIGNvbnRlbnQgYW5kIHJvbGUuXG4qXG4qIFByb2R1Y2VzIGNvbXBhY3Qgb3V0cHV0IGxpa2U6XG4qIGBgYFxuKiBIdW1hbjogV2hhdCdzIHRoZSB3ZWF0aGVyP1xuKiBBSTogTGV0IG1lIGNoZWNrLi4uW3Rvb2xfY2FsbHNdXG4qIFRvb2w6IDcywrBGIGFuZCBzdW5ueVxuKiBgYGBcbipcbiogVGhpcyBhdm9pZHMgdG9rZW4gaW5mbGF0aW9uIGZyb20gbWV0YWRhdGEgd2hlbiBzdHJpbmdpZnlpbmcgbWVzc2FnZSBvYmplY3RzIGRpcmVjdGx5LlxuKi9cbmZ1bmN0aW9uIGdldEJ1ZmZlclN0cmluZyhtZXNzYWdlcywgaHVtYW5QcmVmaXggPSBcIkh1bWFuXCIsIGFpUHJlZml4ID0gXCJBSVwiKSB7XG5cdGNvbnN0IHN0cmluZ19tZXNzYWdlcyA9IFtdO1xuXHRmb3IgKGNvbnN0IG0gb2YgbWVzc2FnZXMpIHtcblx0XHRsZXQgcm9sZTtcblx0XHRpZiAobS50eXBlID09PSBcImh1bWFuXCIpIHJvbGUgPSBodW1hblByZWZpeDtcblx0XHRlbHNlIGlmIChtLnR5cGUgPT09IFwiYWlcIikgcm9sZSA9IGFpUHJlZml4O1xuXHRcdGVsc2UgaWYgKG0udHlwZSA9PT0gXCJzeXN0ZW1cIikgcm9sZSA9IFwiU3lzdGVtXCI7XG5cdFx0ZWxzZSBpZiAobS50eXBlID09PSBcInRvb2xcIikgcm9sZSA9IFwiVG9vbFwiO1xuXHRcdGVsc2UgaWYgKG0udHlwZSA9PT0gXCJnZW5lcmljXCIpIHJvbGUgPSBtLnJvbGU7XG5cdFx0ZWxzZSB0aHJvdyBuZXcgRXJyb3IoYEdvdCB1bnN1cHBvcnRlZCBtZXNzYWdlIHR5cGU6ICR7bS50eXBlfWApO1xuXHRcdGNvbnN0IG5hbWVTdHIgPSBtLm5hbWUgPyBgJHttLm5hbWV9LCBgIDogXCJcIjtcblx0XHRjb25zdCByZWFkYWJsZUNvbnRlbnQgPSBtLnRleHQ7XG5cdFx0bGV0IG1lc3NhZ2UgPSBgJHtyb2xlfTogJHtuYW1lU3RyfSR7cmVhZGFibGVDb250ZW50fWA7XG5cdFx0aWYgKG0udHlwZSA9PT0gXCJhaVwiKSB7XG5cdFx0XHRjb25zdCBhaU1lc3NhZ2UgPSBtO1xuXHRcdFx0aWYgKGFpTWVzc2FnZS50b29sX2NhbGxzICYmIGFpTWVzc2FnZS50b29sX2NhbGxzLmxlbmd0aCA+IDApIG1lc3NhZ2UgKz0gSlNPTi5zdHJpbmdpZnkoYWlNZXNzYWdlLnRvb2xfY2FsbHMpO1xuXHRcdFx0ZWxzZSBpZiAoYWlNZXNzYWdlLmFkZGl0aW9uYWxfa3dhcmdzICYmIFwiZnVuY3Rpb25fY2FsbFwiIGluIGFpTWVzc2FnZS5hZGRpdGlvbmFsX2t3YXJncykgbWVzc2FnZSArPSBKU09OLnN0cmluZ2lmeShhaU1lc3NhZ2UuYWRkaXRpb25hbF9rd2FyZ3MuZnVuY3Rpb25fY2FsbCk7XG5cdFx0fVxuXHRcdHN0cmluZ19tZXNzYWdlcy5wdXNoKG1lc3NhZ2UpO1xuXHR9XG5cdHJldHVybiBzdHJpbmdfbWVzc2FnZXMuam9pbihcIlxcblwiKTtcbn1cbi8qKlxuKiBNYXBzIG1lc3NhZ2VzIGZyb20gYW4gb2xkZXIgZm9ybWF0IChWMSkgdG8gdGhlIGN1cnJlbnQgYFN0b3JlZE1lc3NhZ2VgXG4qIGZvcm1hdC4gSWYgdGhlIG1lc3NhZ2UgaXMgYWxyZWFkeSBpbiB0aGUgYFN0b3JlZE1lc3NhZ2VgIGZvcm1hdCwgaXQgaXNcbiogcmV0dXJuZWQgYXMgaXMuIE90aGVyd2lzZSwgaXQgdHJhbnNmb3JtcyB0aGUgVjEgbWVzc2FnZSBpbnRvIGFcbiogYFN0b3JlZE1lc3NhZ2VgLiBUaGlzIGZ1bmN0aW9uIGlzIGltcG9ydGFudCBmb3IgbWFpbnRhaW5pbmdcbiogY29tcGF0aWJpbGl0eSB3aXRoIG9sZGVyIG1lc3NhZ2UgZm9ybWF0cy5cbiovXG5mdW5jdGlvbiBtYXBWMU1lc3NhZ2VUb1N0b3JlZE1lc3NhZ2UobWVzc2FnZSkge1xuXHRpZiAobWVzc2FnZS5kYXRhICE9PSB2b2lkIDApIHJldHVybiBtZXNzYWdlO1xuXHRlbHNlIHtcblx0XHRjb25zdCB2MU1lc3NhZ2UgPSBtZXNzYWdlO1xuXHRcdHJldHVybiB7XG5cdFx0XHR0eXBlOiB2MU1lc3NhZ2UudHlwZSxcblx0XHRcdGRhdGE6IHtcblx0XHRcdFx0Y29udGVudDogdjFNZXNzYWdlLnRleHQsXG5cdFx0XHRcdHJvbGU6IHYxTWVzc2FnZS5yb2xlLFxuXHRcdFx0XHRuYW1lOiB2b2lkIDAsXG5cdFx0XHRcdHRvb2xfY2FsbF9pZDogdm9pZCAwXG5cdFx0XHR9XG5cdFx0fTtcblx0fVxufVxuZnVuY3Rpb24gbWFwU3RvcmVkTWVzc2FnZVRvQ2hhdE1lc3NhZ2UobWVzc2FnZSkge1xuXHRjb25zdCBzdG9yZWRNZXNzYWdlID0gbWFwVjFNZXNzYWdlVG9TdG9yZWRNZXNzYWdlKG1lc3NhZ2UpO1xuXHRzd2l0Y2ggKHN0b3JlZE1lc3NhZ2UudHlwZSkge1xuXHRcdGNhc2UgXCJodW1hblwiOiByZXR1cm4gbmV3IEh1bWFuTWVzc2FnZShzdG9yZWRNZXNzYWdlLmRhdGEpO1xuXHRcdGNhc2UgXCJhaVwiOiByZXR1cm4gbmV3IEFJTWVzc2FnZShzdG9yZWRNZXNzYWdlLmRhdGEpO1xuXHRcdGNhc2UgXCJzeXN0ZW1cIjogcmV0dXJuIG5ldyBTeXN0ZW1NZXNzYWdlKHN0b3JlZE1lc3NhZ2UuZGF0YSk7XG5cdFx0Y2FzZSBcImZ1bmN0aW9uXCI6XG5cdFx0XHRpZiAoc3RvcmVkTWVzc2FnZS5kYXRhLm5hbWUgPT09IHZvaWQgMCkgdGhyb3cgbmV3IEVycm9yKFwiTmFtZSBtdXN0IGJlIGRlZmluZWQgZm9yIGZ1bmN0aW9uIG1lc3NhZ2VzXCIpO1xuXHRcdFx0cmV0dXJuIG5ldyBGdW5jdGlvbk1lc3NhZ2Uoc3RvcmVkTWVzc2FnZS5kYXRhKTtcblx0XHRjYXNlIFwidG9vbFwiOlxuXHRcdFx0aWYgKHN0b3JlZE1lc3NhZ2UuZGF0YS50b29sX2NhbGxfaWQgPT09IHZvaWQgMCkgdGhyb3cgbmV3IEVycm9yKFwiVG9vbCBjYWxsIElEIG11c3QgYmUgZGVmaW5lZCBmb3IgdG9vbCBtZXNzYWdlc1wiKTtcblx0XHRcdHJldHVybiBuZXcgVG9vbE1lc3NhZ2Uoc3RvcmVkTWVzc2FnZS5kYXRhKTtcblx0XHRjYXNlIFwiZ2VuZXJpY1wiOlxuXHRcdFx0aWYgKHN0b3JlZE1lc3NhZ2UuZGF0YS5yb2xlID09PSB2b2lkIDApIHRocm93IG5ldyBFcnJvcihcIlJvbGUgbXVzdCBiZSBkZWZpbmVkIGZvciBjaGF0IG1lc3NhZ2VzXCIpO1xuXHRcdFx0cmV0dXJuIG5ldyBDaGF0TWVzc2FnZShzdG9yZWRNZXNzYWdlLmRhdGEpO1xuXHRcdGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihgR290IHVuZXhwZWN0ZWQgdHlwZTogJHtzdG9yZWRNZXNzYWdlLnR5cGV9YCk7XG5cdH1cbn1cbi8qKlxuKiBUcmFuc2Zvcm1zIGFuIGFycmF5IG9mIGBTdG9yZWRNZXNzYWdlYCBpbnN0YW5jZXMgaW50byBhbiBhcnJheSBvZlxuKiBgQmFzZU1lc3NhZ2VgIGluc3RhbmNlcy4gSXQgdXNlcyB0aGUgYG1hcFYxTWVzc2FnZVRvU3RvcmVkTWVzc2FnZWBcbiogZnVuY3Rpb24gdG8gZW5zdXJlIGFsbCBtZXNzYWdlcyBhcmUgaW4gdGhlIGBTdG9yZWRNZXNzYWdlYCBmb3JtYXQsIHRoZW5cbiogY3JlYXRlcyBuZXcgaW5zdGFuY2VzIG9mIHRoZSBhcHByb3ByaWF0ZSBgQmFzZU1lc3NhZ2VgIHN1YmNsYXNzIGJhc2VkXG4qIG9uIHRoZSB0eXBlIG9mIGVhY2ggbWVzc2FnZS4gVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIHByZXBhcmUgc3RvcmVkXG4qIG1lc3NhZ2VzIGZvciB1c2UgaW4gYSBjaGF0IGNvbnRleHQuXG4qL1xuZnVuY3Rpb24gbWFwU3RvcmVkTWVzc2FnZXNUb0NoYXRNZXNzYWdlcyhtZXNzYWdlcykge1xuXHRyZXR1cm4gbWVzc2FnZXMubWFwKG1hcFN0b3JlZE1lc3NhZ2VUb0NoYXRNZXNzYWdlKTtcbn1cbi8qKlxuKiBUcmFuc2Zvcm1zIGFuIGFycmF5IG9mIGBCYXNlTWVzc2FnZWAgaW5zdGFuY2VzIGludG8gYW4gYXJyYXkgb2ZcbiogYFN0b3JlZE1lc3NhZ2VgIGluc3RhbmNlcy4gSXQgZG9lcyB0aGlzIGJ5IGNhbGxpbmcgdGhlIGB0b0RpY3RgIG1ldGhvZFxuKiBvbiBlYWNoIGBCYXNlTWVzc2FnZWAsIHdoaWNoIHJldHVybnMgYSBgU3RvcmVkTWVzc2FnZWAuIFRoaXMgZnVuY3Rpb25cbiogaXMgdXNlZCB0byBwcmVwYXJlIGNoYXQgbWVzc2FnZXMgZm9yIHN0b3JhZ2UuXG4qL1xuZnVuY3Rpb24gbWFwQ2hhdE1lc3NhZ2VzVG9TdG9yZWRNZXNzYWdlcyhtZXNzYWdlcykge1xuXHRyZXR1cm4gbWVzc2FnZXMubWFwKChtZXNzYWdlKSA9PiBtZXNzYWdlLnRvRGljdCgpKTtcbn1cbmZ1bmN0aW9uIGNvbnZlcnRUb0NodW5rKG1lc3NhZ2UpIHtcblx0Y29uc3QgdHlwZSA9IG1lc3NhZ2UuX2dldFR5cGUoKTtcblx0aWYgKHR5cGUgPT09IFwiaHVtYW5cIikgcmV0dXJuIG5ldyBIdW1hbk1lc3NhZ2VDaHVuayh7IC4uLm1lc3NhZ2UgfSk7XG5cdGVsc2UgaWYgKHR5cGUgPT09IFwiYWlcIikge1xuXHRcdGxldCBhaUNodW5rRmllbGRzID0geyAuLi5tZXNzYWdlIH07XG5cdFx0aWYgKFwidG9vbF9jYWxsc1wiIGluIGFpQ2h1bmtGaWVsZHMpIGFpQ2h1bmtGaWVsZHMgPSB7XG5cdFx0XHQuLi5haUNodW5rRmllbGRzLFxuXHRcdFx0dG9vbF9jYWxsX2NodW5rczogYWlDaHVua0ZpZWxkcy50b29sX2NhbGxzPy5tYXAoKHRjKSA9PiAoe1xuXHRcdFx0XHQuLi50Yyxcblx0XHRcdFx0dHlwZTogXCJ0b29sX2NhbGxfY2h1bmtcIixcblx0XHRcdFx0aW5kZXg6IHZvaWQgMCxcblx0XHRcdFx0YXJnczogSlNPTi5zdHJpbmdpZnkodGMuYXJncylcblx0XHRcdH0pKVxuXHRcdH07XG5cdFx0cmV0dXJuIG5ldyBBSU1lc3NhZ2VDaHVuayh7IC4uLmFpQ2h1bmtGaWVsZHMgfSk7XG5cdH0gZWxzZSBpZiAodHlwZSA9PT0gXCJzeXN0ZW1cIikgcmV0dXJuIG5ldyBTeXN0ZW1NZXNzYWdlQ2h1bmsoeyAuLi5tZXNzYWdlIH0pO1xuXHRlbHNlIGlmICh0eXBlID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBuZXcgRnVuY3Rpb25NZXNzYWdlQ2h1bmsoeyAuLi5tZXNzYWdlIH0pO1xuXHRlbHNlIGlmIChDaGF0TWVzc2FnZS5pc0luc3RhbmNlKG1lc3NhZ2UpKSByZXR1cm4gbmV3IENoYXRNZXNzYWdlQ2h1bmsoeyAuLi5tZXNzYWdlIH0pO1xuXHRlbHNlIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gbWVzc2FnZSB0eXBlLlwiKTtcbn1cbi8qKlxuKiBDb2xsYXBzZXMgYW4gYXJyYXkgb2YgdG9vbCBjYWxsIGNodW5rcyBpbnRvIGNvbXBsZXRlIHRvb2wgY2FsbHMuXG4qXG4qIFRoaXMgZnVuY3Rpb24gZ3JvdXBzIHRvb2wgY2FsbCBjaHVua3MgYnkgdGhlaXIgaWQgYW5kL29yIGluZGV4LCB0aGVuIGF0dGVtcHRzIHRvXG4qIHBhcnNlIGFuZCB2YWxpZGF0ZSB0aGUgYWNjdW11bGF0ZWQgYXJndW1lbnRzIGZvciBlYWNoIGdyb3VwLiBTdWNjZXNzZnVsbHkgcGFyc2VkXG4qIHRvb2wgY2FsbHMgYXJlIHJldHVybmVkIGFzIHZhbGlkIGBUb29sQ2FsbGAgb2JqZWN0cywgd2hpbGUgbWFsZm9ybWVkIG9uZXMgYXJlXG4qIHJldHVybmVkIGFzIGBJbnZhbGlkVG9vbENhbGxgIG9iamVjdHMuXG4qXG4qIEBwYXJhbSBjaHVua3MgLSBBbiBhcnJheSBvZiBgVG9vbENhbGxDaHVua2Agb2JqZWN0cyB0byBjb2xsYXBzZVxuKiBAcmV0dXJucyBBbiBvYmplY3QgY29udGFpbmluZzpcbiogICAtIGB0b29sX2NhbGxfY2h1bmtzYDogVGhlIG9yaWdpbmFsIGlucHV0IGNodW5rc1xuKiAgIC0gYHRvb2xfY2FsbHNgOiBBbiBhcnJheSBvZiBzdWNjZXNzZnVsbHkgcGFyc2VkIGFuZCB2YWxpZGF0ZWQgdG9vbCBjYWxsc1xuKiAgIC0gYGludmFsaWRfdG9vbF9jYWxsc2A6IEFuIGFycmF5IG9mIHRvb2wgY2FsbHMgdGhhdCBmYWlsZWQgcGFyc2luZyBvciB2YWxpZGF0aW9uXG4qXG4qIEByZW1hcmtzXG4qIENodW5rcyBhcmUgZ3JvdXBlZCB1c2luZyB0aGUgZm9sbG93aW5nIG1hdGNoaW5nIGxvZ2ljOlxuKiAtIElmIGEgY2h1bmsgaGFzIGJvdGggYW4gaWQgYW5kIGluZGV4LCBpdCBtYXRjaGVzIGNodW5rcyB3aXRoIHRoZSBzYW1lIGlkIGFuZCBpbmRleFxuKiAtIElmIGEgY2h1bmsgaGFzIG9ubHkgYW4gaWQsIGl0IG1hdGNoZXMgY2h1bmtzIHdpdGggdGhlIHNhbWUgaWRcbiogLSBJZiBhIGNodW5rIGhhcyBvbmx5IGFuIGluZGV4LCBpdCBtYXRjaGVzIGNodW5rcyB3aXRoIHRoZSBzYW1lIGluZGV4XG4qXG4qIEZvciBlYWNoIGdyb3VwLCB0aGUgZnVuY3Rpb246XG4qIDEuIENvbmNhdGVuYXRlcyBhbGwgYGFyZ3NgIHN0cmluZ3MgZnJvbSB0aGUgY2h1bmtzXG4qIDIuIEF0dGVtcHRzIHRvIHBhcnNlIHRoZSBjb25jYXRlbmF0ZWQgc3RyaW5nIGFzIEpTT05cbiogMy4gVmFsaWRhdGVzIHRoYXQgdGhlIHJlc3VsdCBpcyBhIG5vbi1udWxsIG9iamVjdCB3aXRoIGEgdmFsaWQgaWRcbiogNC4gQ3JlYXRlcyBlaXRoZXIgYSBgVG9vbENhbGxgIChpZiB2YWxpZCkgb3IgYEludmFsaWRUb29sQ2FsbGAgKGlmIGludmFsaWQpXG4qL1xuZnVuY3Rpb24gY29sbGFwc2VUb29sQ2FsbENodW5rcyhjaHVua3MpIHtcblx0Y29uc3QgZ3JvdXBlZFRvb2xDYWxsQ2h1bmtzID0gY2h1bmtzLnJlZHVjZSgoYWNjLCBjaHVuaykgPT4ge1xuXHRcdGNvbnN0IG1hdGNoZWRDaHVua0luZGV4ID0gYWNjLmZpbmRJbmRleCgoW21hdGNoXSkgPT4ge1xuXHRcdFx0aWYgKFwiaWRcIiBpbiBjaHVuayAmJiBjaHVuay5pZCAmJiBcImluZGV4XCIgaW4gY2h1bmsgJiYgY2h1bmsuaW5kZXggIT09IHZvaWQgMCkgcmV0dXJuIGNodW5rLmlkID09PSBtYXRjaC5pZCAmJiBjaHVuay5pbmRleCA9PT0gbWF0Y2guaW5kZXg7XG5cdFx0XHRpZiAoXCJpZFwiIGluIGNodW5rICYmIGNodW5rLmlkKSByZXR1cm4gY2h1bmsuaWQgPT09IG1hdGNoLmlkO1xuXHRcdFx0aWYgKFwiaW5kZXhcIiBpbiBjaHVuayAmJiBjaHVuay5pbmRleCAhPT0gdm9pZCAwKSByZXR1cm4gY2h1bmsuaW5kZXggPT09IG1hdGNoLmluZGV4O1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH0pO1xuXHRcdGlmIChtYXRjaGVkQ2h1bmtJbmRleCAhPT0gLTEpIGFjY1ttYXRjaGVkQ2h1bmtJbmRleF0ucHVzaChjaHVuayk7XG5cdFx0ZWxzZSBhY2MucHVzaChbY2h1bmtdKTtcblx0XHRyZXR1cm4gYWNjO1xuXHR9LCBbXSk7XG5cdGNvbnN0IHRvb2xDYWxscyA9IFtdO1xuXHRjb25zdCBpbnZhbGlkVG9vbENhbGxzID0gW107XG5cdGZvciAoY29uc3QgY2h1bmtzJDEgb2YgZ3JvdXBlZFRvb2xDYWxsQ2h1bmtzKSB7XG5cdFx0bGV0IHBhcnNlZEFyZ3MgPSBudWxsO1xuXHRcdGNvbnN0IG5hbWUgPSBjaHVua3MkMVswXT8ubmFtZSA/PyBcIlwiO1xuXHRcdGNvbnN0IGpvaW5lZEFyZ3MgPSBjaHVua3MkMS5tYXAoKGMpID0+IGMuYXJncyB8fCBcIlwiKS5qb2luKFwiXCIpLnRyaW0oKTtcblx0XHRjb25zdCBhcmdzU3RyID0gam9pbmVkQXJncy5sZW5ndGggPyBqb2luZWRBcmdzIDogXCJ7fVwiO1xuXHRcdGNvbnN0IGlkID0gY2h1bmtzJDFbMF0/LmlkO1xuXHRcdHRyeSB7XG5cdFx0XHRwYXJzZWRBcmdzID0gcGFyc2VQYXJ0aWFsSnNvbihhcmdzU3RyKTtcblx0XHRcdGlmICghaWQgfHwgcGFyc2VkQXJncyA9PT0gbnVsbCB8fCB0eXBlb2YgcGFyc2VkQXJncyAhPT0gXCJvYmplY3RcIiB8fCBBcnJheS5pc0FycmF5KHBhcnNlZEFyZ3MpKSB0aHJvdyBuZXcgRXJyb3IoXCJNYWxmb3JtZWQgdG9vbCBjYWxsIGNodW5rIGFyZ3MuXCIpO1xuXHRcdFx0dG9vbENhbGxzLnB1c2goe1xuXHRcdFx0XHRuYW1lLFxuXHRcdFx0XHRhcmdzOiBwYXJzZWRBcmdzLFxuXHRcdFx0XHRpZCxcblx0XHRcdFx0dHlwZTogXCJ0b29sX2NhbGxcIlxuXHRcdFx0fSk7XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHRpbnZhbGlkVG9vbENhbGxzLnB1c2goe1xuXHRcdFx0XHRuYW1lLFxuXHRcdFx0XHRhcmdzOiBhcmdzU3RyLFxuXHRcdFx0XHRpZCxcblx0XHRcdFx0ZXJyb3I6IFwiTWFsZm9ybWVkIGFyZ3MuXCIsXG5cdFx0XHRcdHR5cGU6IFwiaW52YWxpZF90b29sX2NhbGxcIlxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiB7XG5cdFx0dG9vbF9jYWxsX2NodW5rczogY2h1bmtzLFxuXHRcdHRvb2xfY2FsbHM6IHRvb2xDYWxscyxcblx0XHRpbnZhbGlkX3Rvb2xfY2FsbHM6IGludmFsaWRUb29sQ2FsbHNcblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSwgY29sbGFwc2VUb29sQ2FsbENodW5rcywgY29udmVydFRvQ2h1bmssIGdldEJ1ZmZlclN0cmluZywgaWlmZSwgbWFwQ2hhdE1lc3NhZ2VzVG9TdG9yZWRNZXNzYWdlcywgbWFwU3RvcmVkTWVzc2FnZVRvQ2hhdE1lc3NhZ2UsIG1hcFN0b3JlZE1lc3NhZ2VzVG9DaGF0TWVzc2FnZXMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWxzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/messages/utils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/output_parsers/base.js":
/*!******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/base.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseLLMOutputParser: () => (/* binding */ BaseLLMOutputParser),\n/* harmony export */   BaseOutputParser: () => (/* binding */ BaseOutputParser),\n/* harmony export */   OutputParserException: () => (/* binding */ OutputParserException)\n/* harmony export */ });\n/* harmony import */ var _errors_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/errors/index.js\");\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runnables/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _runnables_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../runnables/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/index.js\");\n\n\n\n\n//#region src/output_parsers/base.ts\n/**\n* Abstract base class for parsing the output of a Large Language Model\n* (LLM) call. It provides methods for parsing the result of an LLM call\n* and invoking the parser with a given input.\n*/\nvar BaseLLMOutputParser = class extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_1__.Runnable {\n\t/**\n\t* Parses the result of an LLM call with a given prompt. By default, it\n\t* simply calls `parseResult`.\n\t* @param generations The generations from an LLM call.\n\t* @param _prompt The prompt used in the LLM call.\n\t* @param callbacks Optional callbacks.\n\t* @returns A promise of the parsed output.\n\t*/\n\tparseResultWithPrompt(generations, _prompt, callbacks) {\n\t\treturn this.parseResult(generations, callbacks);\n\t}\n\t_baseMessageToString(message) {\n\t\treturn typeof message.content === \"string\" ? message.content : this._baseMessageContentToString(message.content);\n\t}\n\t_baseMessageContentToString(content) {\n\t\treturn JSON.stringify(content);\n\t}\n\t/**\n\t* Calls the parser with a given input and optional configuration options.\n\t* If the input is a string, it creates a generation with the input as\n\t* text and calls `parseResult`. If the input is a `BaseMessage`, it\n\t* creates a generation with the input as a message and the content of the\n\t* input as text, and then calls `parseResult`.\n\t* @param input The input to the parser, which can be a string or a `BaseMessage`.\n\t* @param options Optional configuration options.\n\t* @returns A promise of the parsed output.\n\t*/\n\tasync invoke(input, options) {\n\t\tif (typeof input === \"string\") return this._callWithConfig(async (input$1, options$1) => this.parseResult([{ text: input$1 }], options$1?.callbacks), input, {\n\t\t\t...options,\n\t\t\trunType: \"parser\"\n\t\t});\n\t\telse return this._callWithConfig(async (input$1, options$1) => this.parseResult([{\n\t\t\tmessage: input$1,\n\t\t\ttext: this._baseMessageToString(input$1)\n\t\t}], options$1?.callbacks), input, {\n\t\t\t...options,\n\t\t\trunType: \"parser\"\n\t\t});\n\t}\n};\n/**\n* Class to parse the output of an LLM call.\n*/\nvar BaseOutputParser = class extends BaseLLMOutputParser {\n\tparseResult(generations, callbacks) {\n\t\treturn this.parse(generations[0].text, callbacks);\n\t}\n\tasync parseWithPrompt(text, _prompt, callbacks) {\n\t\treturn this.parse(text, callbacks);\n\t}\n\t/**\n\t* Return the string type key uniquely identifying this class of parser\n\t*/\n\t_type() {\n\t\tthrow new Error(\"_type not implemented\");\n\t}\n};\n/**\n* Exception that output parsers should raise to signify a parsing error.\n*\n* This exists to differentiate parsing errors from other code or execution errors\n* that also may arise inside the output parser. OutputParserExceptions will be\n* available to catch and handle in ways to fix the parsing error, while other\n* errors will be raised.\n*\n* @param message - The error that's being re-raised or an error message.\n* @param llmOutput - String model output which is error-ing.\n* @param observation - String explanation of error which can be passed to a\n*     model to try and remediate the issue.\n* @param sendToLLM - Whether to send the observation and llm_output back to an Agent\n*     after an OutputParserException has been raised. This gives the underlying\n*     model driving the agent the context that the previous output was improperly\n*     structured, in the hopes that it will update the output to the correct\n*     format.\n*/\nvar OutputParserException = class extends Error {\n\tllmOutput;\n\tobservation;\n\tsendToLLM;\n\tconstructor(message, llmOutput, observation, sendToLLM = false) {\n\t\tsuper(message);\n\t\tthis.llmOutput = llmOutput;\n\t\tthis.observation = observation;\n\t\tthis.sendToLLM = sendToLLM;\n\t\tif (sendToLLM) {\n\t\t\tif (observation === void 0 || llmOutput === void 0) throw new Error(\"Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true\");\n\t\t}\n\t\t(0,_errors_index_js__WEBPACK_IMPORTED_MODULE_0__.addLangChainErrorFields)(this, \"OUTPUT_PARSING_FAILURE\");\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=base.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvYmFzZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNkQ7QUFDYjtBQUNqQjs7QUFFL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLHdEQUFRO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0dBQStHLGVBQWU7QUFDOUg7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUseUVBQXVCO0FBQ3pCO0FBQ0E7O0FBRUE7QUFDd0U7QUFDeEUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9vdXRwdXRfcGFyc2Vycy9iYXNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFkZExhbmdDaGFpbkVycm9yRmllbGRzIH0gZnJvbSBcIi4uL2Vycm9ycy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgUnVubmFibGUgfSBmcm9tIFwiLi4vcnVubmFibGVzL2Jhc2UuanNcIjtcbmltcG9ydCBcIi4uL3J1bm5hYmxlcy9pbmRleC5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL291dHB1dF9wYXJzZXJzL2Jhc2UudHNcbi8qKlxuKiBBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBwYXJzaW5nIHRoZSBvdXRwdXQgb2YgYSBMYXJnZSBMYW5ndWFnZSBNb2RlbFxuKiAoTExNKSBjYWxsLiBJdCBwcm92aWRlcyBtZXRob2RzIGZvciBwYXJzaW5nIHRoZSByZXN1bHQgb2YgYW4gTExNIGNhbGxcbiogYW5kIGludm9raW5nIHRoZSBwYXJzZXIgd2l0aCBhIGdpdmVuIGlucHV0LlxuKi9cbnZhciBCYXNlTExNT3V0cHV0UGFyc2VyID0gY2xhc3MgZXh0ZW5kcyBSdW5uYWJsZSB7XG5cdC8qKlxuXHQqIFBhcnNlcyB0aGUgcmVzdWx0IG9mIGFuIExMTSBjYWxsIHdpdGggYSBnaXZlbiBwcm9tcHQuIEJ5IGRlZmF1bHQsIGl0XG5cdCogc2ltcGx5IGNhbGxzIGBwYXJzZVJlc3VsdGAuXG5cdCogQHBhcmFtIGdlbmVyYXRpb25zIFRoZSBnZW5lcmF0aW9ucyBmcm9tIGFuIExMTSBjYWxsLlxuXHQqIEBwYXJhbSBfcHJvbXB0IFRoZSBwcm9tcHQgdXNlZCBpbiB0aGUgTExNIGNhbGwuXG5cdCogQHBhcmFtIGNhbGxiYWNrcyBPcHRpb25hbCBjYWxsYmFja3MuXG5cdCogQHJldHVybnMgQSBwcm9taXNlIG9mIHRoZSBwYXJzZWQgb3V0cHV0LlxuXHQqL1xuXHRwYXJzZVJlc3VsdFdpdGhQcm9tcHQoZ2VuZXJhdGlvbnMsIF9wcm9tcHQsIGNhbGxiYWNrcykge1xuXHRcdHJldHVybiB0aGlzLnBhcnNlUmVzdWx0KGdlbmVyYXRpb25zLCBjYWxsYmFja3MpO1xuXHR9XG5cdF9iYXNlTWVzc2FnZVRvU3RyaW5nKG1lc3NhZ2UpIHtcblx0XHRyZXR1cm4gdHlwZW9mIG1lc3NhZ2UuY29udGVudCA9PT0gXCJzdHJpbmdcIiA/IG1lc3NhZ2UuY29udGVudCA6IHRoaXMuX2Jhc2VNZXNzYWdlQ29udGVudFRvU3RyaW5nKG1lc3NhZ2UuY29udGVudCk7XG5cdH1cblx0X2Jhc2VNZXNzYWdlQ29udGVudFRvU3RyaW5nKGNvbnRlbnQpIHtcblx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkoY29udGVudCk7XG5cdH1cblx0LyoqXG5cdCogQ2FsbHMgdGhlIHBhcnNlciB3aXRoIGEgZ2l2ZW4gaW5wdXQgYW5kIG9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb3B0aW9ucy5cblx0KiBJZiB0aGUgaW5wdXQgaXMgYSBzdHJpbmcsIGl0IGNyZWF0ZXMgYSBnZW5lcmF0aW9uIHdpdGggdGhlIGlucHV0IGFzXG5cdCogdGV4dCBhbmQgY2FsbHMgYHBhcnNlUmVzdWx0YC4gSWYgdGhlIGlucHV0IGlzIGEgYEJhc2VNZXNzYWdlYCwgaXRcblx0KiBjcmVhdGVzIGEgZ2VuZXJhdGlvbiB3aXRoIHRoZSBpbnB1dCBhcyBhIG1lc3NhZ2UgYW5kIHRoZSBjb250ZW50IG9mIHRoZVxuXHQqIGlucHV0IGFzIHRleHQsIGFuZCB0aGVuIGNhbGxzIGBwYXJzZVJlc3VsdGAuXG5cdCogQHBhcmFtIGlucHV0IFRoZSBpbnB1dCB0byB0aGUgcGFyc2VyLCB3aGljaCBjYW4gYmUgYSBzdHJpbmcgb3IgYSBgQmFzZU1lc3NhZ2VgLlxuXHQqIEBwYXJhbSBvcHRpb25zIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb3B0aW9ucy5cblx0KiBAcmV0dXJucyBBIHByb21pc2Ugb2YgdGhlIHBhcnNlZCBvdXRwdXQuXG5cdCovXG5cdGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuXHRcdGlmICh0eXBlb2YgaW5wdXQgPT09IFwic3RyaW5nXCIpIHJldHVybiB0aGlzLl9jYWxsV2l0aENvbmZpZyhhc3luYyAoaW5wdXQkMSwgb3B0aW9ucyQxKSA9PiB0aGlzLnBhcnNlUmVzdWx0KFt7IHRleHQ6IGlucHV0JDEgfV0sIG9wdGlvbnMkMT8uY2FsbGJhY2tzKSwgaW5wdXQsIHtcblx0XHRcdC4uLm9wdGlvbnMsXG5cdFx0XHRydW5UeXBlOiBcInBhcnNlclwiXG5cdFx0fSk7XG5cdFx0ZWxzZSByZXR1cm4gdGhpcy5fY2FsbFdpdGhDb25maWcoYXN5bmMgKGlucHV0JDEsIG9wdGlvbnMkMSkgPT4gdGhpcy5wYXJzZVJlc3VsdChbe1xuXHRcdFx0bWVzc2FnZTogaW5wdXQkMSxcblx0XHRcdHRleHQ6IHRoaXMuX2Jhc2VNZXNzYWdlVG9TdHJpbmcoaW5wdXQkMSlcblx0XHR9XSwgb3B0aW9ucyQxPy5jYWxsYmFja3MpLCBpbnB1dCwge1xuXHRcdFx0Li4ub3B0aW9ucyxcblx0XHRcdHJ1blR5cGU6IFwicGFyc2VyXCJcblx0XHR9KTtcblx0fVxufTtcbi8qKlxuKiBDbGFzcyB0byBwYXJzZSB0aGUgb3V0cHV0IG9mIGFuIExMTSBjYWxsLlxuKi9cbnZhciBCYXNlT3V0cHV0UGFyc2VyID0gY2xhc3MgZXh0ZW5kcyBCYXNlTExNT3V0cHV0UGFyc2VyIHtcblx0cGFyc2VSZXN1bHQoZ2VuZXJhdGlvbnMsIGNhbGxiYWNrcykge1xuXHRcdHJldHVybiB0aGlzLnBhcnNlKGdlbmVyYXRpb25zWzBdLnRleHQsIGNhbGxiYWNrcyk7XG5cdH1cblx0YXN5bmMgcGFyc2VXaXRoUHJvbXB0KHRleHQsIF9wcm9tcHQsIGNhbGxiYWNrcykge1xuXHRcdHJldHVybiB0aGlzLnBhcnNlKHRleHQsIGNhbGxiYWNrcyk7XG5cdH1cblx0LyoqXG5cdCogUmV0dXJuIHRoZSBzdHJpbmcgdHlwZSBrZXkgdW5pcXVlbHkgaWRlbnRpZnlpbmcgdGhpcyBjbGFzcyBvZiBwYXJzZXJcblx0Ki9cblx0X3R5cGUoKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiX3R5cGUgbm90IGltcGxlbWVudGVkXCIpO1xuXHR9XG59O1xuLyoqXG4qIEV4Y2VwdGlvbiB0aGF0IG91dHB1dCBwYXJzZXJzIHNob3VsZCByYWlzZSB0byBzaWduaWZ5IGEgcGFyc2luZyBlcnJvci5cbipcbiogVGhpcyBleGlzdHMgdG8gZGlmZmVyZW50aWF0ZSBwYXJzaW5nIGVycm9ycyBmcm9tIG90aGVyIGNvZGUgb3IgZXhlY3V0aW9uIGVycm9yc1xuKiB0aGF0IGFsc28gbWF5IGFyaXNlIGluc2lkZSB0aGUgb3V0cHV0IHBhcnNlci4gT3V0cHV0UGFyc2VyRXhjZXB0aW9ucyB3aWxsIGJlXG4qIGF2YWlsYWJsZSB0byBjYXRjaCBhbmQgaGFuZGxlIGluIHdheXMgdG8gZml4IHRoZSBwYXJzaW5nIGVycm9yLCB3aGlsZSBvdGhlclxuKiBlcnJvcnMgd2lsbCBiZSByYWlzZWQuXG4qXG4qIEBwYXJhbSBtZXNzYWdlIC0gVGhlIGVycm9yIHRoYXQncyBiZWluZyByZS1yYWlzZWQgb3IgYW4gZXJyb3IgbWVzc2FnZS5cbiogQHBhcmFtIGxsbU91dHB1dCAtIFN0cmluZyBtb2RlbCBvdXRwdXQgd2hpY2ggaXMgZXJyb3ItaW5nLlxuKiBAcGFyYW0gb2JzZXJ2YXRpb24gLSBTdHJpbmcgZXhwbGFuYXRpb24gb2YgZXJyb3Igd2hpY2ggY2FuIGJlIHBhc3NlZCB0byBhXG4qICAgICBtb2RlbCB0byB0cnkgYW5kIHJlbWVkaWF0ZSB0aGUgaXNzdWUuXG4qIEBwYXJhbSBzZW5kVG9MTE0gLSBXaGV0aGVyIHRvIHNlbmQgdGhlIG9ic2VydmF0aW9uIGFuZCBsbG1fb3V0cHV0IGJhY2sgdG8gYW4gQWdlbnRcbiogICAgIGFmdGVyIGFuIE91dHB1dFBhcnNlckV4Y2VwdGlvbiBoYXMgYmVlbiByYWlzZWQuIFRoaXMgZ2l2ZXMgdGhlIHVuZGVybHlpbmdcbiogICAgIG1vZGVsIGRyaXZpbmcgdGhlIGFnZW50IHRoZSBjb250ZXh0IHRoYXQgdGhlIHByZXZpb3VzIG91dHB1dCB3YXMgaW1wcm9wZXJseVxuKiAgICAgc3RydWN0dXJlZCwgaW4gdGhlIGhvcGVzIHRoYXQgaXQgd2lsbCB1cGRhdGUgdGhlIG91dHB1dCB0byB0aGUgY29ycmVjdFxuKiAgICAgZm9ybWF0LlxuKi9cbnZhciBPdXRwdXRQYXJzZXJFeGNlcHRpb24gPSBjbGFzcyBleHRlbmRzIEVycm9yIHtcblx0bGxtT3V0cHV0O1xuXHRvYnNlcnZhdGlvbjtcblx0c2VuZFRvTExNO1xuXHRjb25zdHJ1Y3RvcihtZXNzYWdlLCBsbG1PdXRwdXQsIG9ic2VydmF0aW9uLCBzZW5kVG9MTE0gPSBmYWxzZSkge1xuXHRcdHN1cGVyKG1lc3NhZ2UpO1xuXHRcdHRoaXMubGxtT3V0cHV0ID0gbGxtT3V0cHV0O1xuXHRcdHRoaXMub2JzZXJ2YXRpb24gPSBvYnNlcnZhdGlvbjtcblx0XHR0aGlzLnNlbmRUb0xMTSA9IHNlbmRUb0xMTTtcblx0XHRpZiAoc2VuZFRvTExNKSB7XG5cdFx0XHRpZiAob2JzZXJ2YXRpb24gPT09IHZvaWQgMCB8fCBsbG1PdXRwdXQgPT09IHZvaWQgMCkgdGhyb3cgbmV3IEVycm9yKFwiQXJndW1lbnRzICdvYnNlcnZhdGlvbicgJiAnbGxtT3V0cHV0JyBhcmUgcmVxdWlyZWQgaWYgJ3NlbmRUb0xsbScgaXMgdHJ1ZVwiKTtcblx0XHR9XG5cdFx0YWRkTGFuZ0NoYWluRXJyb3JGaWVsZHModGhpcywgXCJPVVRQVVRfUEFSU0lOR19GQUlMVVJFXCIpO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEJhc2VMTE1PdXRwdXRQYXJzZXIsIEJhc2VPdXRwdXRQYXJzZXIsIE91dHB1dFBhcnNlckV4Y2VwdGlvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmFzZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/output_parsers/base.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/output_parsers/bytes.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/bytes.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BytesOutputParser: () => (/* binding */ BytesOutputParser)\n/* harmony export */ });\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./transform.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n\n\n//#region src/output_parsers/bytes.ts\n/**\n* OutputParser that parses LLMResult into the top likely string and\n* encodes it into bytes.\n*/\nvar BytesOutputParser = class extends _transform_js__WEBPACK_IMPORTED_MODULE_0__.BaseTransformOutputParser {\n\tstatic lc_name() {\n\t\treturn \"BytesOutputParser\";\n\t}\n\tlc_namespace = [\n\t\t\"langchain_core\",\n\t\t\"output_parsers\",\n\t\t\"bytes\"\n\t];\n\tlc_serializable = true;\n\ttextEncoder = new TextEncoder();\n\tparse(text) {\n\t\treturn Promise.resolve(this.textEncoder.encode(text));\n\t}\n\tgetFormatInstructions() {\n\t\treturn \"\";\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=bytes.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvYnl0ZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMkQ7O0FBRTNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0Msb0VBQXlCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDNkI7QUFDN0IiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9vdXRwdXRfcGFyc2Vycy9ieXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIH0gZnJvbSBcIi4vdHJhbnNmb3JtLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvb3V0cHV0X3BhcnNlcnMvYnl0ZXMudHNcbi8qKlxuKiBPdXRwdXRQYXJzZXIgdGhhdCBwYXJzZXMgTExNUmVzdWx0IGludG8gdGhlIHRvcCBsaWtlbHkgc3RyaW5nIGFuZFxuKiBlbmNvZGVzIGl0IGludG8gYnl0ZXMuXG4qL1xudmFyIEJ5dGVzT3V0cHV0UGFyc2VyID0gY2xhc3MgZXh0ZW5kcyBCYXNlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIHtcblx0c3RhdGljIGxjX25hbWUoKSB7XG5cdFx0cmV0dXJuIFwiQnl0ZXNPdXRwdXRQYXJzZXJcIjtcblx0fVxuXHRsY19uYW1lc3BhY2UgPSBbXG5cdFx0XCJsYW5nY2hhaW5fY29yZVwiLFxuXHRcdFwib3V0cHV0X3BhcnNlcnNcIixcblx0XHRcImJ5dGVzXCJcblx0XTtcblx0bGNfc2VyaWFsaXphYmxlID0gdHJ1ZTtcblx0dGV4dEVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcblx0cGFyc2UodGV4dCkge1xuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy50ZXh0RW5jb2Rlci5lbmNvZGUodGV4dCkpO1xuXHR9XG5cdGdldEZvcm1hdEluc3RydWN0aW9ucygpIHtcblx0XHRyZXR1cm4gXCJcIjtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBCeXRlc091dHB1dFBhcnNlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Ynl0ZXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/output_parsers/bytes.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/output_parsers/index.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/index.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsymmetricStructuredOutputParser: () => (/* reexport safe */ _structured_js__WEBPACK_IMPORTED_MODULE_7__.AsymmetricStructuredOutputParser),\n/* harmony export */   BaseCumulativeTransformOutputParser: () => (/* reexport safe */ _transform_js__WEBPACK_IMPORTED_MODULE_3__.BaseCumulativeTransformOutputParser),\n/* harmony export */   BaseLLMOutputParser: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_2__.BaseLLMOutputParser),\n/* harmony export */   BaseOutputParser: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_2__.BaseOutputParser),\n/* harmony export */   BaseTransformOutputParser: () => (/* reexport safe */ _transform_js__WEBPACK_IMPORTED_MODULE_3__.BaseTransformOutputParser),\n/* harmony export */   BytesOutputParser: () => (/* reexport safe */ _bytes_js__WEBPACK_IMPORTED_MODULE_4__.BytesOutputParser),\n/* harmony export */   CommaSeparatedListOutputParser: () => (/* reexport safe */ _list_js__WEBPACK_IMPORTED_MODULE_5__.CommaSeparatedListOutputParser),\n/* harmony export */   CustomListOutputParser: () => (/* reexport safe */ _list_js__WEBPACK_IMPORTED_MODULE_5__.CustomListOutputParser),\n/* harmony export */   JsonMarkdownStructuredOutputParser: () => (/* reexport safe */ _structured_js__WEBPACK_IMPORTED_MODULE_7__.JsonMarkdownStructuredOutputParser),\n/* harmony export */   JsonOutputParser: () => (/* reexport safe */ _json_js__WEBPACK_IMPORTED_MODULE_8__.JsonOutputParser),\n/* harmony export */   ListOutputParser: () => (/* reexport safe */ _list_js__WEBPACK_IMPORTED_MODULE_5__.ListOutputParser),\n/* harmony export */   MarkdownListOutputParser: () => (/* reexport safe */ _list_js__WEBPACK_IMPORTED_MODULE_5__.MarkdownListOutputParser),\n/* harmony export */   NumberedListOutputParser: () => (/* reexport safe */ _list_js__WEBPACK_IMPORTED_MODULE_5__.NumberedListOutputParser),\n/* harmony export */   OutputParserException: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_2__.OutputParserException),\n/* harmony export */   StringOutputParser: () => (/* reexport safe */ _string_js__WEBPACK_IMPORTED_MODULE_6__.StringOutputParser),\n/* harmony export */   StructuredOutputParser: () => (/* reexport safe */ _structured_js__WEBPACK_IMPORTED_MODULE_7__.StructuredOutputParser),\n/* harmony export */   XMLOutputParser: () => (/* reexport safe */ _xml_js__WEBPACK_IMPORTED_MODULE_9__.XMLOutputParser),\n/* harmony export */   XML_FORMAT_INSTRUCTIONS: () => (/* reexport safe */ _xml_js__WEBPACK_IMPORTED_MODULE_9__.XML_FORMAT_INSTRUCTIONS),\n/* harmony export */   output_parsers_exports: () => (/* binding */ output_parsers_exports),\n/* harmony export */   parseJsonMarkdown: () => (/* reexport safe */ _utils_json_js__WEBPACK_IMPORTED_MODULE_1__.parseJsonMarkdown),\n/* harmony export */   parsePartialJson: () => (/* reexport safe */ _utils_json_js__WEBPACK_IMPORTED_MODULE_1__.parsePartialJson),\n/* harmony export */   parseXMLMarkdown: () => (/* reexport safe */ _xml_js__WEBPACK_IMPORTED_MODULE_9__.parseXMLMarkdown)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _utils_json_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/json.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/json.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/base.js\");\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./transform.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n/* harmony import */ var _bytes_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./bytes.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/bytes.js\");\n/* harmony import */ var _list_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./list.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/list.js\");\n/* harmony import */ var _string_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./string.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/string.js\");\n/* harmony import */ var _structured_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./structured.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/structured.js\");\n/* harmony import */ var _json_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./json.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/json.js\");\n/* harmony import */ var _xml_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./xml.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/xml.js\");\n\n\n\n\n\n\n\n\n\n\n\n//#region src/output_parsers/index.ts\nvar output_parsers_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(output_parsers_exports, {\n\tAsymmetricStructuredOutputParser: () => _structured_js__WEBPACK_IMPORTED_MODULE_7__.AsymmetricStructuredOutputParser,\n\tBaseCumulativeTransformOutputParser: () => _transform_js__WEBPACK_IMPORTED_MODULE_3__.BaseCumulativeTransformOutputParser,\n\tBaseLLMOutputParser: () => _base_js__WEBPACK_IMPORTED_MODULE_2__.BaseLLMOutputParser,\n\tBaseOutputParser: () => _base_js__WEBPACK_IMPORTED_MODULE_2__.BaseOutputParser,\n\tBaseTransformOutputParser: () => _transform_js__WEBPACK_IMPORTED_MODULE_3__.BaseTransformOutputParser,\n\tBytesOutputParser: () => _bytes_js__WEBPACK_IMPORTED_MODULE_4__.BytesOutputParser,\n\tCommaSeparatedListOutputParser: () => _list_js__WEBPACK_IMPORTED_MODULE_5__.CommaSeparatedListOutputParser,\n\tCustomListOutputParser: () => _list_js__WEBPACK_IMPORTED_MODULE_5__.CustomListOutputParser,\n\tJsonMarkdownStructuredOutputParser: () => _structured_js__WEBPACK_IMPORTED_MODULE_7__.JsonMarkdownStructuredOutputParser,\n\tJsonOutputParser: () => _json_js__WEBPACK_IMPORTED_MODULE_8__.JsonOutputParser,\n\tListOutputParser: () => _list_js__WEBPACK_IMPORTED_MODULE_5__.ListOutputParser,\n\tMarkdownListOutputParser: () => _list_js__WEBPACK_IMPORTED_MODULE_5__.MarkdownListOutputParser,\n\tNumberedListOutputParser: () => _list_js__WEBPACK_IMPORTED_MODULE_5__.NumberedListOutputParser,\n\tOutputParserException: () => _base_js__WEBPACK_IMPORTED_MODULE_2__.OutputParserException,\n\tStringOutputParser: () => _string_js__WEBPACK_IMPORTED_MODULE_6__.StringOutputParser,\n\tStructuredOutputParser: () => _structured_js__WEBPACK_IMPORTED_MODULE_7__.StructuredOutputParser,\n\tXMLOutputParser: () => _xml_js__WEBPACK_IMPORTED_MODULE_9__.XMLOutputParser,\n\tXML_FORMAT_INSTRUCTIONS: () => _xml_js__WEBPACK_IMPORTED_MODULE_9__.XML_FORMAT_INSTRUCTIONS,\n\tparseJsonMarkdown: () => _utils_json_js__WEBPACK_IMPORTED_MODULE_1__.parseJsonMarkdown,\n\tparsePartialJson: () => _utils_json_js__WEBPACK_IMPORTED_MODULE_1__.parsePartialJson,\n\tparseXMLMarkdown: () => _xml_js__WEBPACK_IMPORTED_MODULE_9__.parseXMLMarkdown\n});\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBMkQ7QUFDWTtBQUNrQjtBQUNPO0FBQ2pEO0FBQzBHO0FBQ3hHO0FBQzhFO0FBQ2xGO0FBQ3lDOztBQUV0RjtBQUNBO0FBQ0Esc0VBQVE7QUFDUix5Q0FBeUMsNEVBQWdDO0FBQ3pFLDRDQUE0Qyw4RUFBbUM7QUFDL0UsNEJBQTRCLHlEQUFtQjtBQUMvQyx5QkFBeUIsc0RBQWdCO0FBQ3pDLGtDQUFrQyxvRUFBeUI7QUFDM0QsMEJBQTBCLHdEQUFpQjtBQUMzQyx1Q0FBdUMsb0VBQThCO0FBQ3JFLCtCQUErQiw0REFBc0I7QUFDckQsMkNBQTJDLDhFQUFrQztBQUM3RSx5QkFBeUIsc0RBQWdCO0FBQ3pDLHlCQUF5QixzREFBZ0I7QUFDekMsaUNBQWlDLDhEQUF3QjtBQUN6RCxpQ0FBaUMsOERBQXdCO0FBQ3pELDhCQUE4QiwyREFBcUI7QUFDbkQsMkJBQTJCLDBEQUFrQjtBQUM3QywrQkFBK0Isa0VBQXNCO0FBQ3JELHdCQUF3QixvREFBZTtBQUN2QyxnQ0FBZ0MsNERBQXVCO0FBQ3ZELDBCQUEwQiw2REFBaUI7QUFDM0MseUJBQXlCLDREQUFnQjtBQUN6Qyx5QkFBeUIscURBQWdCO0FBQ3pDLENBQUM7O0FBRUQ7QUFDc2hCO0FBQ3RoQiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L291dHB1dF9wYXJzZXJzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IHBhcnNlSnNvbk1hcmtkb3duLCBwYXJzZVBhcnRpYWxKc29uIH0gZnJvbSBcIi4uL3V0aWxzL2pzb24uanNcIjtcbmltcG9ydCB7IEJhc2VMTE1PdXRwdXRQYXJzZXIsIEJhc2VPdXRwdXRQYXJzZXIsIE91dHB1dFBhcnNlckV4Y2VwdGlvbiB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IEJhc2VDdW11bGF0aXZlVHJhbnNmb3JtT3V0cHV0UGFyc2VyLCBCYXNlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIH0gZnJvbSBcIi4vdHJhbnNmb3JtLmpzXCI7XG5pbXBvcnQgeyBCeXRlc091dHB1dFBhcnNlciB9IGZyb20gXCIuL2J5dGVzLmpzXCI7XG5pbXBvcnQgeyBDb21tYVNlcGFyYXRlZExpc3RPdXRwdXRQYXJzZXIsIEN1c3RvbUxpc3RPdXRwdXRQYXJzZXIsIExpc3RPdXRwdXRQYXJzZXIsIE1hcmtkb3duTGlzdE91dHB1dFBhcnNlciwgTnVtYmVyZWRMaXN0T3V0cHV0UGFyc2VyIH0gZnJvbSBcIi4vbGlzdC5qc1wiO1xuaW1wb3J0IHsgU3RyaW5nT3V0cHV0UGFyc2VyIH0gZnJvbSBcIi4vc3RyaW5nLmpzXCI7XG5pbXBvcnQgeyBBc3ltbWV0cmljU3RydWN0dXJlZE91dHB1dFBhcnNlciwgSnNvbk1hcmtkb3duU3RydWN0dXJlZE91dHB1dFBhcnNlciwgU3RydWN0dXJlZE91dHB1dFBhcnNlciB9IGZyb20gXCIuL3N0cnVjdHVyZWQuanNcIjtcbmltcG9ydCB7IEpzb25PdXRwdXRQYXJzZXIgfSBmcm9tIFwiLi9qc29uLmpzXCI7XG5pbXBvcnQgeyBYTUxPdXRwdXRQYXJzZXIsIFhNTF9GT1JNQVRfSU5TVFJVQ1RJT05TLCBwYXJzZVhNTE1hcmtkb3duIH0gZnJvbSBcIi4veG1sLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvb3V0cHV0X3BhcnNlcnMvaW5kZXgudHNcbnZhciBvdXRwdXRfcGFyc2Vyc19leHBvcnRzID0ge307XG5fX2V4cG9ydChvdXRwdXRfcGFyc2Vyc19leHBvcnRzLCB7XG5cdEFzeW1tZXRyaWNTdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyOiAoKSA9PiBBc3ltbWV0cmljU3RydWN0dXJlZE91dHB1dFBhcnNlcixcblx0QmFzZUN1bXVsYXRpdmVUcmFuc2Zvcm1PdXRwdXRQYXJzZXI6ICgpID0+IEJhc2VDdW11bGF0aXZlVHJhbnNmb3JtT3V0cHV0UGFyc2VyLFxuXHRCYXNlTExNT3V0cHV0UGFyc2VyOiAoKSA9PiBCYXNlTExNT3V0cHV0UGFyc2VyLFxuXHRCYXNlT3V0cHV0UGFyc2VyOiAoKSA9PiBCYXNlT3V0cHV0UGFyc2VyLFxuXHRCYXNlVHJhbnNmb3JtT3V0cHV0UGFyc2VyOiAoKSA9PiBCYXNlVHJhbnNmb3JtT3V0cHV0UGFyc2VyLFxuXHRCeXRlc091dHB1dFBhcnNlcjogKCkgPT4gQnl0ZXNPdXRwdXRQYXJzZXIsXG5cdENvbW1hU2VwYXJhdGVkTGlzdE91dHB1dFBhcnNlcjogKCkgPT4gQ29tbWFTZXBhcmF0ZWRMaXN0T3V0cHV0UGFyc2VyLFxuXHRDdXN0b21MaXN0T3V0cHV0UGFyc2VyOiAoKSA9PiBDdXN0b21MaXN0T3V0cHV0UGFyc2VyLFxuXHRKc29uTWFya2Rvd25TdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyOiAoKSA9PiBKc29uTWFya2Rvd25TdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyLFxuXHRKc29uT3V0cHV0UGFyc2VyOiAoKSA9PiBKc29uT3V0cHV0UGFyc2VyLFxuXHRMaXN0T3V0cHV0UGFyc2VyOiAoKSA9PiBMaXN0T3V0cHV0UGFyc2VyLFxuXHRNYXJrZG93bkxpc3RPdXRwdXRQYXJzZXI6ICgpID0+IE1hcmtkb3duTGlzdE91dHB1dFBhcnNlcixcblx0TnVtYmVyZWRMaXN0T3V0cHV0UGFyc2VyOiAoKSA9PiBOdW1iZXJlZExpc3RPdXRwdXRQYXJzZXIsXG5cdE91dHB1dFBhcnNlckV4Y2VwdGlvbjogKCkgPT4gT3V0cHV0UGFyc2VyRXhjZXB0aW9uLFxuXHRTdHJpbmdPdXRwdXRQYXJzZXI6ICgpID0+IFN0cmluZ091dHB1dFBhcnNlcixcblx0U3RydWN0dXJlZE91dHB1dFBhcnNlcjogKCkgPT4gU3RydWN0dXJlZE91dHB1dFBhcnNlcixcblx0WE1MT3V0cHV0UGFyc2VyOiAoKSA9PiBYTUxPdXRwdXRQYXJzZXIsXG5cdFhNTF9GT1JNQVRfSU5TVFJVQ1RJT05TOiAoKSA9PiBYTUxfRk9STUFUX0lOU1RSVUNUSU9OUyxcblx0cGFyc2VKc29uTWFya2Rvd246ICgpID0+IHBhcnNlSnNvbk1hcmtkb3duLFxuXHRwYXJzZVBhcnRpYWxKc29uOiAoKSA9PiBwYXJzZVBhcnRpYWxKc29uLFxuXHRwYXJzZVhNTE1hcmtkb3duOiAoKSA9PiBwYXJzZVhNTE1hcmtkb3duXG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBBc3ltbWV0cmljU3RydWN0dXJlZE91dHB1dFBhcnNlciwgQmFzZUN1bXVsYXRpdmVUcmFuc2Zvcm1PdXRwdXRQYXJzZXIsIEJhc2VMTE1PdXRwdXRQYXJzZXIsIEJhc2VPdXRwdXRQYXJzZXIsIEJhc2VUcmFuc2Zvcm1PdXRwdXRQYXJzZXIsIEJ5dGVzT3V0cHV0UGFyc2VyLCBDb21tYVNlcGFyYXRlZExpc3RPdXRwdXRQYXJzZXIsIEN1c3RvbUxpc3RPdXRwdXRQYXJzZXIsIEpzb25NYXJrZG93blN0cnVjdHVyZWRPdXRwdXRQYXJzZXIsIEpzb25PdXRwdXRQYXJzZXIsIExpc3RPdXRwdXRQYXJzZXIsIE1hcmtkb3duTGlzdE91dHB1dFBhcnNlciwgTnVtYmVyZWRMaXN0T3V0cHV0UGFyc2VyLCBPdXRwdXRQYXJzZXJFeGNlcHRpb24sIFN0cmluZ091dHB1dFBhcnNlciwgU3RydWN0dXJlZE91dHB1dFBhcnNlciwgWE1MT3V0cHV0UGFyc2VyLCBYTUxfRk9STUFUX0lOU1RSVUNUSU9OUywgb3V0cHV0X3BhcnNlcnNfZXhwb3J0cywgcGFyc2VKc29uTWFya2Rvd24sIHBhcnNlUGFydGlhbEpzb24sIHBhcnNlWE1MTWFya2Rvd24gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/output_parsers/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/output_parsers/json.js":
/*!******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/json.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonOutputParser: () => (/* binding */ JsonOutputParser)\n/* harmony export */ });\n/* harmony import */ var _utils_json_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/json.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/json.js\");\n/* harmony import */ var _utils_fast_json_patch_src_duplex_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/fast-json-patch/src/duplex.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js\");\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./transform.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n/* harmony import */ var _utils_json_patch_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/json_patch.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/json_patch.js\");\n\n\n\n\n\n//#region src/output_parsers/json.ts\n/**\n* Class for parsing the output of an LLM into a JSON object.\n*/\nvar JsonOutputParser = class extends _transform_js__WEBPACK_IMPORTED_MODULE_2__.BaseCumulativeTransformOutputParser {\n\tstatic lc_name() {\n\t\treturn \"JsonOutputParser\";\n\t}\n\tlc_namespace = [\"langchain_core\", \"output_parsers\"];\n\tlc_serializable = true;\n\t/** @internal */\n\t_concatOutputChunks(first, second) {\n\t\tif (this.diff) return super._concatOutputChunks(first, second);\n\t\treturn second;\n\t}\n\t_diff(prev, next) {\n\t\tif (!next) return void 0;\n\t\tif (!prev) return [{\n\t\t\top: \"replace\",\n\t\t\tpath: \"\",\n\t\t\tvalue: next\n\t\t}];\n\t\treturn (0,_utils_fast_json_patch_src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.compare)(prev, next);\n\t}\n\tasync parsePartialResult(generations) {\n\t\treturn (0,_utils_json_js__WEBPACK_IMPORTED_MODULE_0__.parseJsonMarkdown)(generations[0].text);\n\t}\n\tasync parse(text) {\n\t\treturn (0,_utils_json_js__WEBPACK_IMPORTED_MODULE_0__.parseJsonMarkdown)(text, JSON.parse);\n\t}\n\tgetFormatInstructions() {\n\t\treturn \"\";\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=json.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvanNvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF1RTtBQUNOO0FBQ0k7QUFDckM7O0FBRWhDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLDhFQUFtQztBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxTQUFTLDZFQUFPO0FBQ2hCO0FBQ0E7QUFDQSxTQUFTLGlFQUFpQjtBQUMxQjtBQUNBO0FBQ0EsU0FBUyxpRUFBaUI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUM0QjtBQUM1QiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L291dHB1dF9wYXJzZXJzL2pzb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VKc29uTWFya2Rvd24sIHBhcnNlUGFydGlhbEpzb24gfSBmcm9tIFwiLi4vdXRpbHMvanNvbi5qc1wiO1xuaW1wb3J0IHsgY29tcGFyZSB9IGZyb20gXCIuLi91dGlscy9mYXN0LWpzb24tcGF0Y2gvc3JjL2R1cGxleC5qc1wiO1xuaW1wb3J0IHsgQmFzZUN1bXVsYXRpdmVUcmFuc2Zvcm1PdXRwdXRQYXJzZXIgfSBmcm9tIFwiLi90cmFuc2Zvcm0uanNcIjtcbmltcG9ydCBcIi4uL3V0aWxzL2pzb25fcGF0Y2guanNcIjtcblxuLy8jcmVnaW9uIHNyYy9vdXRwdXRfcGFyc2Vycy9qc29uLnRzXG4vKipcbiogQ2xhc3MgZm9yIHBhcnNpbmcgdGhlIG91dHB1dCBvZiBhbiBMTE0gaW50byBhIEpTT04gb2JqZWN0LlxuKi9cbnZhciBKc29uT3V0cHV0UGFyc2VyID0gY2xhc3MgZXh0ZW5kcyBCYXNlQ3VtdWxhdGl2ZVRyYW5zZm9ybU91dHB1dFBhcnNlciB7XG5cdHN0YXRpYyBsY19uYW1lKCkge1xuXHRcdHJldHVybiBcIkpzb25PdXRwdXRQYXJzZXJcIjtcblx0fVxuXHRsY19uYW1lc3BhY2UgPSBbXCJsYW5nY2hhaW5fY29yZVwiLCBcIm91dHB1dF9wYXJzZXJzXCJdO1xuXHRsY19zZXJpYWxpemFibGUgPSB0cnVlO1xuXHQvKiogQGludGVybmFsICovXG5cdF9jb25jYXRPdXRwdXRDaHVua3MoZmlyc3QsIHNlY29uZCkge1xuXHRcdGlmICh0aGlzLmRpZmYpIHJldHVybiBzdXBlci5fY29uY2F0T3V0cHV0Q2h1bmtzKGZpcnN0LCBzZWNvbmQpO1xuXHRcdHJldHVybiBzZWNvbmQ7XG5cdH1cblx0X2RpZmYocHJldiwgbmV4dCkge1xuXHRcdGlmICghbmV4dCkgcmV0dXJuIHZvaWQgMDtcblx0XHRpZiAoIXByZXYpIHJldHVybiBbe1xuXHRcdFx0b3A6IFwicmVwbGFjZVwiLFxuXHRcdFx0cGF0aDogXCJcIixcblx0XHRcdHZhbHVlOiBuZXh0XG5cdFx0fV07XG5cdFx0cmV0dXJuIGNvbXBhcmUocHJldiwgbmV4dCk7XG5cdH1cblx0YXN5bmMgcGFyc2VQYXJ0aWFsUmVzdWx0KGdlbmVyYXRpb25zKSB7XG5cdFx0cmV0dXJuIHBhcnNlSnNvbk1hcmtkb3duKGdlbmVyYXRpb25zWzBdLnRleHQpO1xuXHR9XG5cdGFzeW5jIHBhcnNlKHRleHQpIHtcblx0XHRyZXR1cm4gcGFyc2VKc29uTWFya2Rvd24odGV4dCwgSlNPTi5wYXJzZSk7XG5cdH1cblx0Z2V0Rm9ybWF0SW5zdHJ1Y3Rpb25zKCkge1xuXHRcdHJldHVybiBcIlwiO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEpzb25PdXRwdXRQYXJzZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWpzb24uanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/output_parsers/json.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/output_parsers/list.js":
/*!******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/list.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CommaSeparatedListOutputParser: () => (/* binding */ CommaSeparatedListOutputParser),\n/* harmony export */   CustomListOutputParser: () => (/* binding */ CustomListOutputParser),\n/* harmony export */   ListOutputParser: () => (/* binding */ ListOutputParser),\n/* harmony export */   MarkdownListOutputParser: () => (/* binding */ MarkdownListOutputParser),\n/* harmony export */   NumberedListOutputParser: () => (/* binding */ NumberedListOutputParser)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/base.js\");\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./transform.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n\n\n\n//#region src/output_parsers/list.ts\n/**\n* Class to parse the output of an LLM call to a list.\n* @augments BaseOutputParser\n*/\nvar ListOutputParser = class extends _transform_js__WEBPACK_IMPORTED_MODULE_1__.BaseTransformOutputParser {\n\tre;\n\tasync *_transform(inputGenerator) {\n\t\tlet buffer = \"\";\n\t\tfor await (const input of inputGenerator) {\n\t\t\tif (typeof input === \"string\") buffer += input;\n\t\t\telse buffer += input.content;\n\t\t\tif (!this.re) {\n\t\t\t\tconst parts = await this.parse(buffer);\n\t\t\t\tif (parts.length > 1) {\n\t\t\t\t\tfor (const part of parts.slice(0, -1)) yield [part];\n\t\t\t\t\tbuffer = parts[parts.length - 1];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst matches = [...buffer.matchAll(this.re)];\n\t\t\t\tif (matches.length > 1) {\n\t\t\t\t\tlet doneIdx = 0;\n\t\t\t\t\tfor (const match of matches.slice(0, -1)) {\n\t\t\t\t\t\tyield [match[1]];\n\t\t\t\t\t\tdoneIdx += (match.index ?? 0) + match[0].length;\n\t\t\t\t\t}\n\t\t\t\t\tbuffer = buffer.slice(doneIdx);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor (const part of await this.parse(buffer)) yield [part];\n\t}\n};\n/**\n* Class to parse the output of an LLM call as a comma-separated list.\n* @augments ListOutputParser\n*/\nvar CommaSeparatedListOutputParser = class extends ListOutputParser {\n\tstatic lc_name() {\n\t\treturn \"CommaSeparatedListOutputParser\";\n\t}\n\tlc_namespace = [\n\t\t\"langchain_core\",\n\t\t\"output_parsers\",\n\t\t\"list\"\n\t];\n\tlc_serializable = true;\n\t/**\n\t* Parses the given text into an array of strings, using a comma as the\n\t* separator. If the parsing fails, throws an OutputParserException.\n\t* @param text The text to parse.\n\t* @returns An array of strings obtained by splitting the input text at each comma.\n\t*/\n\tasync parse(text) {\n\t\ttry {\n\t\t\treturn text.trim().split(\",\").map((s) => s.trim());\n\t\t} catch {\n\t\t\tthrow new _base_js__WEBPACK_IMPORTED_MODULE_0__.OutputParserException(`Could not parse output: ${text}`, text);\n\t\t}\n\t}\n\t/**\n\t* Provides instructions on the expected format of the response for the\n\t* CommaSeparatedListOutputParser.\n\t* @returns A string containing instructions on the expected format of the response.\n\t*/\n\tgetFormatInstructions() {\n\t\treturn `Your response should be a list of comma separated values, eg: \\`foo, bar, baz\\``;\n\t}\n};\n/**\n* Class to parse the output of an LLM call to a list with a specific length and separator.\n* @augments ListOutputParser\n*/\nvar CustomListOutputParser = class extends ListOutputParser {\n\tlc_namespace = [\n\t\t\"langchain_core\",\n\t\t\"output_parsers\",\n\t\t\"list\"\n\t];\n\tlength;\n\tseparator;\n\tconstructor({ length, separator }) {\n\t\tsuper(...arguments);\n\t\tthis.length = length;\n\t\tthis.separator = separator || \",\";\n\t}\n\t/**\n\t* Parses the given text into an array of strings, using the specified\n\t* separator. If the parsing fails or the number of items in the list\n\t* doesn't match the expected length, throws an OutputParserException.\n\t* @param text The text to parse.\n\t* @returns An array of strings obtained by splitting the input text at each occurrence of the specified separator.\n\t*/\n\tasync parse(text) {\n\t\ttry {\n\t\t\tconst items = text.trim().split(this.separator).map((s) => s.trim());\n\t\t\tif (this.length !== void 0 && items.length !== this.length) throw new _base_js__WEBPACK_IMPORTED_MODULE_0__.OutputParserException(`Incorrect number of items. Expected ${this.length}, got ${items.length}.`);\n\t\t\treturn items;\n\t\t} catch (e) {\n\t\t\tif (Object.getPrototypeOf(e) === _base_js__WEBPACK_IMPORTED_MODULE_0__.OutputParserException.prototype) throw e;\n\t\t\tthrow new _base_js__WEBPACK_IMPORTED_MODULE_0__.OutputParserException(`Could not parse output: ${text}`);\n\t\t}\n\t}\n\t/**\n\t* Provides instructions on the expected format of the response for the\n\t* CustomListOutputParser, including the number of items and the\n\t* separator.\n\t* @returns A string containing instructions on the expected format of the response.\n\t*/\n\tgetFormatInstructions() {\n\t\treturn `Your response should be a list of ${this.length === void 0 ? \"\" : `${this.length} `}items separated by \"${this.separator}\" (eg: \\`foo${this.separator} bar${this.separator} baz\\`)`;\n\t}\n};\nvar NumberedListOutputParser = class extends ListOutputParser {\n\tstatic lc_name() {\n\t\treturn \"NumberedListOutputParser\";\n\t}\n\tlc_namespace = [\n\t\t\"langchain_core\",\n\t\t\"output_parsers\",\n\t\t\"list\"\n\t];\n\tlc_serializable = true;\n\tgetFormatInstructions() {\n\t\treturn `Your response should be a numbered list with each item on a new line. For example: \\n\\n1. foo\\n\\n2. bar\\n\\n3. baz`;\n\t}\n\tre = /\\d+\\.\\s([^\\n]+)/g;\n\tasync parse(text) {\n\t\treturn [...text.matchAll(this.re) ?? []].map((m) => m[1]);\n\t}\n};\nvar MarkdownListOutputParser = class extends ListOutputParser {\n\tstatic lc_name() {\n\t\treturn \"NumberedListOutputParser\";\n\t}\n\tlc_namespace = [\n\t\t\"langchain_core\",\n\t\t\"output_parsers\",\n\t\t\"list\"\n\t];\n\tlc_serializable = true;\n\tgetFormatInstructions() {\n\t\treturn `Your response should be a numbered list with each item on a new line. For example: \\n\\n1. foo\\n\\n2. bar\\n\\n3. baz`;\n\t}\n\tre = /^\\s*[-*]\\s([^\\n]+)$/gm;\n\tasync parse(text) {\n\t\treturn [...text.matchAll(this.re) ?? []].map((m) => m[1]);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=list.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvbGlzdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWtEO0FBQ1M7O0FBRTNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsb0VBQXlCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixhQUFhLDJEQUFxQiw0QkFBNEIsS0FBSztBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxtQkFBbUI7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RSwyREFBcUIsd0NBQXdDLFlBQVksUUFBUSxhQUFhO0FBQ3ZLO0FBQ0EsSUFBSTtBQUNKLG9DQUFvQywyREFBcUI7QUFDekQsYUFBYSwyREFBcUIsNEJBQTRCLEtBQUs7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLGlDQUFpQyxhQUFhLEVBQUUsc0JBQXNCLGVBQWUsY0FBYyxnQkFBZ0IsS0FBSyxnQkFBZ0I7QUFDdEw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUN3STtBQUN4SSIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L291dHB1dF9wYXJzZXJzL2xpc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT3V0cHV0UGFyc2VyRXhjZXB0aW9uIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgQmFzZVRyYW5zZm9ybU91dHB1dFBhcnNlciB9IGZyb20gXCIuL3RyYW5zZm9ybS5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL291dHB1dF9wYXJzZXJzL2xpc3QudHNcbi8qKlxuKiBDbGFzcyB0byBwYXJzZSB0aGUgb3V0cHV0IG9mIGFuIExMTSBjYWxsIHRvIGEgbGlzdC5cbiogQGF1Z21lbnRzIEJhc2VPdXRwdXRQYXJzZXJcbiovXG52YXIgTGlzdE91dHB1dFBhcnNlciA9IGNsYXNzIGV4dGVuZHMgQmFzZVRyYW5zZm9ybU91dHB1dFBhcnNlciB7XG5cdHJlO1xuXHRhc3luYyAqX3RyYW5zZm9ybShpbnB1dEdlbmVyYXRvcikge1xuXHRcdGxldCBidWZmZXIgPSBcIlwiO1xuXHRcdGZvciBhd2FpdCAoY29uc3QgaW5wdXQgb2YgaW5wdXRHZW5lcmF0b3IpIHtcblx0XHRcdGlmICh0eXBlb2YgaW5wdXQgPT09IFwic3RyaW5nXCIpIGJ1ZmZlciArPSBpbnB1dDtcblx0XHRcdGVsc2UgYnVmZmVyICs9IGlucHV0LmNvbnRlbnQ7XG5cdFx0XHRpZiAoIXRoaXMucmUpIHtcblx0XHRcdFx0Y29uc3QgcGFydHMgPSBhd2FpdCB0aGlzLnBhcnNlKGJ1ZmZlcik7XG5cdFx0XHRcdGlmIChwYXJ0cy5sZW5ndGggPiAxKSB7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzLnNsaWNlKDAsIC0xKSkgeWllbGQgW3BhcnRdO1xuXHRcdFx0XHRcdGJ1ZmZlciA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zdCBtYXRjaGVzID0gWy4uLmJ1ZmZlci5tYXRjaEFsbCh0aGlzLnJlKV07XG5cdFx0XHRcdGlmIChtYXRjaGVzLmxlbmd0aCA+IDEpIHtcblx0XHRcdFx0XHRsZXQgZG9uZUlkeCA9IDA7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBtYXRjaCBvZiBtYXRjaGVzLnNsaWNlKDAsIC0xKSkge1xuXHRcdFx0XHRcdFx0eWllbGQgW21hdGNoWzFdXTtcblx0XHRcdFx0XHRcdGRvbmVJZHggKz0gKG1hdGNoLmluZGV4ID8/IDApICsgbWF0Y2hbMF0ubGVuZ3RoO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRidWZmZXIgPSBidWZmZXIuc2xpY2UoZG9uZUlkeCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0Zm9yIChjb25zdCBwYXJ0IG9mIGF3YWl0IHRoaXMucGFyc2UoYnVmZmVyKSkgeWllbGQgW3BhcnRdO1xuXHR9XG59O1xuLyoqXG4qIENsYXNzIHRvIHBhcnNlIHRoZSBvdXRwdXQgb2YgYW4gTExNIGNhbGwgYXMgYSBjb21tYS1zZXBhcmF0ZWQgbGlzdC5cbiogQGF1Z21lbnRzIExpc3RPdXRwdXRQYXJzZXJcbiovXG52YXIgQ29tbWFTZXBhcmF0ZWRMaXN0T3V0cHV0UGFyc2VyID0gY2xhc3MgZXh0ZW5kcyBMaXN0T3V0cHV0UGFyc2VyIHtcblx0c3RhdGljIGxjX25hbWUoKSB7XG5cdFx0cmV0dXJuIFwiQ29tbWFTZXBhcmF0ZWRMaXN0T3V0cHV0UGFyc2VyXCI7XG5cdH1cblx0bGNfbmFtZXNwYWNlID0gW1xuXHRcdFwibGFuZ2NoYWluX2NvcmVcIixcblx0XHRcIm91dHB1dF9wYXJzZXJzXCIsXG5cdFx0XCJsaXN0XCJcblx0XTtcblx0bGNfc2VyaWFsaXphYmxlID0gdHJ1ZTtcblx0LyoqXG5cdCogUGFyc2VzIHRoZSBnaXZlbiB0ZXh0IGludG8gYW4gYXJyYXkgb2Ygc3RyaW5ncywgdXNpbmcgYSBjb21tYSBhcyB0aGVcblx0KiBzZXBhcmF0b3IuIElmIHRoZSBwYXJzaW5nIGZhaWxzLCB0aHJvd3MgYW4gT3V0cHV0UGFyc2VyRXhjZXB0aW9uLlxuXHQqIEBwYXJhbSB0ZXh0IFRoZSB0ZXh0IHRvIHBhcnNlLlxuXHQqIEByZXR1cm5zIEFuIGFycmF5IG9mIHN0cmluZ3Mgb2J0YWluZWQgYnkgc3BsaXR0aW5nIHRoZSBpbnB1dCB0ZXh0IGF0IGVhY2ggY29tbWEuXG5cdCovXG5cdGFzeW5jIHBhcnNlKHRleHQpIHtcblx0XHR0cnkge1xuXHRcdFx0cmV0dXJuIHRleHQudHJpbSgpLnNwbGl0KFwiLFwiKS5tYXAoKHMpID0+IHMudHJpbSgpKTtcblx0XHR9IGNhdGNoIHtcblx0XHRcdHRocm93IG5ldyBPdXRwdXRQYXJzZXJFeGNlcHRpb24oYENvdWxkIG5vdCBwYXJzZSBvdXRwdXQ6ICR7dGV4dH1gLCB0ZXh0KTtcblx0XHR9XG5cdH1cblx0LyoqXG5cdCogUHJvdmlkZXMgaW5zdHJ1Y3Rpb25zIG9uIHRoZSBleHBlY3RlZCBmb3JtYXQgb2YgdGhlIHJlc3BvbnNlIGZvciB0aGVcblx0KiBDb21tYVNlcGFyYXRlZExpc3RPdXRwdXRQYXJzZXIuXG5cdCogQHJldHVybnMgQSBzdHJpbmcgY29udGFpbmluZyBpbnN0cnVjdGlvbnMgb24gdGhlIGV4cGVjdGVkIGZvcm1hdCBvZiB0aGUgcmVzcG9uc2UuXG5cdCovXG5cdGdldEZvcm1hdEluc3RydWN0aW9ucygpIHtcblx0XHRyZXR1cm4gYFlvdXIgcmVzcG9uc2Ugc2hvdWxkIGJlIGEgbGlzdCBvZiBjb21tYSBzZXBhcmF0ZWQgdmFsdWVzLCBlZzogXFxgZm9vLCBiYXIsIGJhelxcYGA7XG5cdH1cbn07XG4vKipcbiogQ2xhc3MgdG8gcGFyc2UgdGhlIG91dHB1dCBvZiBhbiBMTE0gY2FsbCB0byBhIGxpc3Qgd2l0aCBhIHNwZWNpZmljIGxlbmd0aCBhbmQgc2VwYXJhdG9yLlxuKiBAYXVnbWVudHMgTGlzdE91dHB1dFBhcnNlclxuKi9cbnZhciBDdXN0b21MaXN0T3V0cHV0UGFyc2VyID0gY2xhc3MgZXh0ZW5kcyBMaXN0T3V0cHV0UGFyc2VyIHtcblx0bGNfbmFtZXNwYWNlID0gW1xuXHRcdFwibGFuZ2NoYWluX2NvcmVcIixcblx0XHRcIm91dHB1dF9wYXJzZXJzXCIsXG5cdFx0XCJsaXN0XCJcblx0XTtcblx0bGVuZ3RoO1xuXHRzZXBhcmF0b3I7XG5cdGNvbnN0cnVjdG9yKHsgbGVuZ3RoLCBzZXBhcmF0b3IgfSkge1xuXHRcdHN1cGVyKC4uLmFyZ3VtZW50cyk7XG5cdFx0dGhpcy5sZW5ndGggPSBsZW5ndGg7XG5cdFx0dGhpcy5zZXBhcmF0b3IgPSBzZXBhcmF0b3IgfHwgXCIsXCI7XG5cdH1cblx0LyoqXG5cdCogUGFyc2VzIHRoZSBnaXZlbiB0ZXh0IGludG8gYW4gYXJyYXkgb2Ygc3RyaW5ncywgdXNpbmcgdGhlIHNwZWNpZmllZFxuXHQqIHNlcGFyYXRvci4gSWYgdGhlIHBhcnNpbmcgZmFpbHMgb3IgdGhlIG51bWJlciBvZiBpdGVtcyBpbiB0aGUgbGlzdFxuXHQqIGRvZXNuJ3QgbWF0Y2ggdGhlIGV4cGVjdGVkIGxlbmd0aCwgdGhyb3dzIGFuIE91dHB1dFBhcnNlckV4Y2VwdGlvbi5cblx0KiBAcGFyYW0gdGV4dCBUaGUgdGV4dCB0byBwYXJzZS5cblx0KiBAcmV0dXJucyBBbiBhcnJheSBvZiBzdHJpbmdzIG9idGFpbmVkIGJ5IHNwbGl0dGluZyB0aGUgaW5wdXQgdGV4dCBhdCBlYWNoIG9jY3VycmVuY2Ugb2YgdGhlIHNwZWNpZmllZCBzZXBhcmF0b3IuXG5cdCovXG5cdGFzeW5jIHBhcnNlKHRleHQpIHtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgaXRlbXMgPSB0ZXh0LnRyaW0oKS5zcGxpdCh0aGlzLnNlcGFyYXRvcikubWFwKChzKSA9PiBzLnRyaW0oKSk7XG5cdFx0XHRpZiAodGhpcy5sZW5ndGggIT09IHZvaWQgMCAmJiBpdGVtcy5sZW5ndGggIT09IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgT3V0cHV0UGFyc2VyRXhjZXB0aW9uKGBJbmNvcnJlY3QgbnVtYmVyIG9mIGl0ZW1zLiBFeHBlY3RlZCAke3RoaXMubGVuZ3RofSwgZ290ICR7aXRlbXMubGVuZ3RofS5gKTtcblx0XHRcdHJldHVybiBpdGVtcztcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRpZiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKGUpID09PSBPdXRwdXRQYXJzZXJFeGNlcHRpb24ucHJvdG90eXBlKSB0aHJvdyBlO1xuXHRcdFx0dGhyb3cgbmV3IE91dHB1dFBhcnNlckV4Y2VwdGlvbihgQ291bGQgbm90IHBhcnNlIG91dHB1dDogJHt0ZXh0fWApO1xuXHRcdH1cblx0fVxuXHQvKipcblx0KiBQcm92aWRlcyBpbnN0cnVjdGlvbnMgb24gdGhlIGV4cGVjdGVkIGZvcm1hdCBvZiB0aGUgcmVzcG9uc2UgZm9yIHRoZVxuXHQqIEN1c3RvbUxpc3RPdXRwdXRQYXJzZXIsIGluY2x1ZGluZyB0aGUgbnVtYmVyIG9mIGl0ZW1zIGFuZCB0aGVcblx0KiBzZXBhcmF0b3IuXG5cdCogQHJldHVybnMgQSBzdHJpbmcgY29udGFpbmluZyBpbnN0cnVjdGlvbnMgb24gdGhlIGV4cGVjdGVkIGZvcm1hdCBvZiB0aGUgcmVzcG9uc2UuXG5cdCovXG5cdGdldEZvcm1hdEluc3RydWN0aW9ucygpIHtcblx0XHRyZXR1cm4gYFlvdXIgcmVzcG9uc2Ugc2hvdWxkIGJlIGEgbGlzdCBvZiAke3RoaXMubGVuZ3RoID09PSB2b2lkIDAgPyBcIlwiIDogYCR7dGhpcy5sZW5ndGh9IGB9aXRlbXMgc2VwYXJhdGVkIGJ5IFwiJHt0aGlzLnNlcGFyYXRvcn1cIiAoZWc6IFxcYGZvbyR7dGhpcy5zZXBhcmF0b3J9IGJhciR7dGhpcy5zZXBhcmF0b3J9IGJhelxcYClgO1xuXHR9XG59O1xudmFyIE51bWJlcmVkTGlzdE91dHB1dFBhcnNlciA9IGNsYXNzIGV4dGVuZHMgTGlzdE91dHB1dFBhcnNlciB7XG5cdHN0YXRpYyBsY19uYW1lKCkge1xuXHRcdHJldHVybiBcIk51bWJlcmVkTGlzdE91dHB1dFBhcnNlclwiO1xuXHR9XG5cdGxjX25hbWVzcGFjZSA9IFtcblx0XHRcImxhbmdjaGFpbl9jb3JlXCIsXG5cdFx0XCJvdXRwdXRfcGFyc2Vyc1wiLFxuXHRcdFwibGlzdFwiXG5cdF07XG5cdGxjX3NlcmlhbGl6YWJsZSA9IHRydWU7XG5cdGdldEZvcm1hdEluc3RydWN0aW9ucygpIHtcblx0XHRyZXR1cm4gYFlvdXIgcmVzcG9uc2Ugc2hvdWxkIGJlIGEgbnVtYmVyZWQgbGlzdCB3aXRoIGVhY2ggaXRlbSBvbiBhIG5ldyBsaW5lLiBGb3IgZXhhbXBsZTogXFxuXFxuMS4gZm9vXFxuXFxuMi4gYmFyXFxuXFxuMy4gYmF6YDtcblx0fVxuXHRyZSA9IC9cXGQrXFwuXFxzKFteXFxuXSspL2c7XG5cdGFzeW5jIHBhcnNlKHRleHQpIHtcblx0XHRyZXR1cm4gWy4uLnRleHQubWF0Y2hBbGwodGhpcy5yZSkgPz8gW11dLm1hcCgobSkgPT4gbVsxXSk7XG5cdH1cbn07XG52YXIgTWFya2Rvd25MaXN0T3V0cHV0UGFyc2VyID0gY2xhc3MgZXh0ZW5kcyBMaXN0T3V0cHV0UGFyc2VyIHtcblx0c3RhdGljIGxjX25hbWUoKSB7XG5cdFx0cmV0dXJuIFwiTnVtYmVyZWRMaXN0T3V0cHV0UGFyc2VyXCI7XG5cdH1cblx0bGNfbmFtZXNwYWNlID0gW1xuXHRcdFwibGFuZ2NoYWluX2NvcmVcIixcblx0XHRcIm91dHB1dF9wYXJzZXJzXCIsXG5cdFx0XCJsaXN0XCJcblx0XTtcblx0bGNfc2VyaWFsaXphYmxlID0gdHJ1ZTtcblx0Z2V0Rm9ybWF0SW5zdHJ1Y3Rpb25zKCkge1xuXHRcdHJldHVybiBgWW91ciByZXNwb25zZSBzaG91bGQgYmUgYSBudW1iZXJlZCBsaXN0IHdpdGggZWFjaCBpdGVtIG9uIGEgbmV3IGxpbmUuIEZvciBleGFtcGxlOiBcXG5cXG4xLiBmb29cXG5cXG4yLiBiYXJcXG5cXG4zLiBiYXpgO1xuXHR9XG5cdHJlID0gL15cXHMqWy0qXVxccyhbXlxcbl0rKSQvZ207XG5cdGFzeW5jIHBhcnNlKHRleHQpIHtcblx0XHRyZXR1cm4gWy4uLnRleHQubWF0Y2hBbGwodGhpcy5yZSkgPz8gW11dLm1hcCgobSkgPT4gbVsxXSk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQ29tbWFTZXBhcmF0ZWRMaXN0T3V0cHV0UGFyc2VyLCBDdXN0b21MaXN0T3V0cHV0UGFyc2VyLCBMaXN0T3V0cHV0UGFyc2VyLCBNYXJrZG93bkxpc3RPdXRwdXRQYXJzZXIsIE51bWJlcmVkTGlzdE91dHB1dFBhcnNlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGlzdC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/output_parsers/list.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/output_parsers/openai_functions/index.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/openai_functions/index.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonKeyOutputFunctionsParser: () => (/* reexport safe */ _json_output_functions_parsers_js__WEBPACK_IMPORTED_MODULE_1__.JsonKeyOutputFunctionsParser),\n/* harmony export */   JsonOutputFunctionsParser: () => (/* reexport safe */ _json_output_functions_parsers_js__WEBPACK_IMPORTED_MODULE_1__.JsonOutputFunctionsParser),\n/* harmony export */   OutputFunctionsParser: () => (/* reexport safe */ _json_output_functions_parsers_js__WEBPACK_IMPORTED_MODULE_1__.OutputFunctionsParser),\n/* harmony export */   openai_functions_exports: () => (/* binding */ openai_functions_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _json_output_functions_parsers_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./json_output_functions_parsers.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/openai_functions/json_output_functions_parsers.js\");\n\n\n\n//#region src/output_parsers/openai_functions/index.ts\nvar openai_functions_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(openai_functions_exports, {\n\tJsonKeyOutputFunctionsParser: () => _json_output_functions_parsers_js__WEBPACK_IMPORTED_MODULE_1__.JsonKeyOutputFunctionsParser,\n\tJsonOutputFunctionsParser: () => _json_output_functions_parsers_js__WEBPACK_IMPORTED_MODULE_1__.JsonOutputFunctionsParser,\n\tOutputFunctionsParser: () => _json_output_functions_parsers_js__WEBPACK_IMPORTED_MODULE_1__.OutputFunctionsParser\n});\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvb3BlbmFpX2Z1bmN0aW9ucy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBOEQ7QUFDc0U7O0FBRXBJO0FBQ0E7QUFDQSxzRUFBUTtBQUNSLHFDQUFxQywyRkFBNEI7QUFDakUsa0NBQWtDLHdGQUF5QjtBQUMzRCw4QkFBOEIsb0ZBQXFCO0FBQ25ELENBQUM7O0FBRUQ7QUFDb0g7QUFDcEgiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9vdXRwdXRfcGFyc2Vycy9vcGVuYWlfZnVuY3Rpb25zL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4uLy4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IEpzb25LZXlPdXRwdXRGdW5jdGlvbnNQYXJzZXIsIEpzb25PdXRwdXRGdW5jdGlvbnNQYXJzZXIsIE91dHB1dEZ1bmN0aW9uc1BhcnNlciB9IGZyb20gXCIuL2pzb25fb3V0cHV0X2Z1bmN0aW9uc19wYXJzZXJzLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvb3V0cHV0X3BhcnNlcnMvb3BlbmFpX2Z1bmN0aW9ucy9pbmRleC50c1xudmFyIG9wZW5haV9mdW5jdGlvbnNfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQob3BlbmFpX2Z1bmN0aW9uc19leHBvcnRzLCB7XG5cdEpzb25LZXlPdXRwdXRGdW5jdGlvbnNQYXJzZXI6ICgpID0+IEpzb25LZXlPdXRwdXRGdW5jdGlvbnNQYXJzZXIsXG5cdEpzb25PdXRwdXRGdW5jdGlvbnNQYXJzZXI6ICgpID0+IEpzb25PdXRwdXRGdW5jdGlvbnNQYXJzZXIsXG5cdE91dHB1dEZ1bmN0aW9uc1BhcnNlcjogKCkgPT4gT3V0cHV0RnVuY3Rpb25zUGFyc2VyXG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBKc29uS2V5T3V0cHV0RnVuY3Rpb25zUGFyc2VyLCBKc29uT3V0cHV0RnVuY3Rpb25zUGFyc2VyLCBPdXRwdXRGdW5jdGlvbnNQYXJzZXIsIG9wZW5haV9mdW5jdGlvbnNfZXhwb3J0cyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/output_parsers/openai_functions/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/output_parsers/openai_functions/json_output_functions_parsers.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/openai_functions/json_output_functions_parsers.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonKeyOutputFunctionsParser: () => (/* binding */ JsonKeyOutputFunctionsParser),\n/* harmony export */   JsonOutputFunctionsParser: () => (/* binding */ JsonOutputFunctionsParser),\n/* harmony export */   OutputFunctionsParser: () => (/* binding */ OutputFunctionsParser)\n/* harmony export */ });\n/* harmony import */ var _utils_json_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/json.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/json.js\");\n/* harmony import */ var _utils_fast_json_patch_src_duplex_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/fast-json-patch/src/duplex.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../base.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/base.js\");\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../transform.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n/* harmony import */ var _utils_json_patch_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/json_patch.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/json_patch.js\");\n/* harmony import */ var _json_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../json.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/json.js\");\n\n\n\n\n\n\n\n//#region src/output_parsers/openai_functions/json_output_functions_parsers.ts\n/**\n* Class for parsing the output of an LLM. Can be configured to return\n* only the arguments of the function call in the output.\n*/\nvar OutputFunctionsParser = class extends _base_js__WEBPACK_IMPORTED_MODULE_2__.BaseLLMOutputParser {\n\tstatic lc_name() {\n\t\treturn \"OutputFunctionsParser\";\n\t}\n\tlc_namespace = [\n\t\t\"langchain\",\n\t\t\"output_parsers\",\n\t\t\"openai_functions\"\n\t];\n\tlc_serializable = true;\n\targsOnly = true;\n\tconstructor(config) {\n\t\tsuper();\n\t\tthis.argsOnly = config?.argsOnly ?? this.argsOnly;\n\t}\n\t/**\n\t* Parses the output and returns a string representation of the function\n\t* call or its arguments.\n\t* @param generations The output of the LLM to parse.\n\t* @returns A string representation of the function call or its arguments.\n\t*/\n\tasync parseResult(generations) {\n\t\tif (\"message\" in generations[0]) {\n\t\t\tconst gen = generations[0];\n\t\t\tconst functionCall = gen.message.additional_kwargs.function_call;\n\t\t\tif (!functionCall) throw new Error(`No function_call in message ${JSON.stringify(generations)}`);\n\t\t\tif (!functionCall.arguments) throw new Error(`No arguments in function_call ${JSON.stringify(generations)}`);\n\t\t\tif (this.argsOnly) return functionCall.arguments;\n\t\t\treturn JSON.stringify(functionCall);\n\t\t} else throw new Error(`No message in generations ${JSON.stringify(generations)}`);\n\t}\n};\n/**\n* Class for parsing the output of an LLM into a JSON object. Uses an\n* instance of `OutputFunctionsParser` to parse the output.\n*/\nvar JsonOutputFunctionsParser = class extends _transform_js__WEBPACK_IMPORTED_MODULE_3__.BaseCumulativeTransformOutputParser {\n\tstatic lc_name() {\n\t\treturn \"JsonOutputFunctionsParser\";\n\t}\n\tlc_namespace = [\n\t\t\"langchain\",\n\t\t\"output_parsers\",\n\t\t\"openai_functions\"\n\t];\n\tlc_serializable = true;\n\toutputParser;\n\targsOnly = true;\n\tconstructor(config) {\n\t\tsuper(config);\n\t\tthis.argsOnly = config?.argsOnly ?? this.argsOnly;\n\t\tthis.outputParser = new OutputFunctionsParser(config);\n\t}\n\t_diff(prev, next) {\n\t\tif (!next) return void 0;\n\t\tconst ops = (0,_utils_fast_json_patch_src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.compare)(prev ?? {}, next);\n\t\treturn ops;\n\t}\n\tasync parsePartialResult(generations) {\n\t\tconst generation = generations[0];\n\t\tif (!generation.message) return void 0;\n\t\tconst { message } = generation;\n\t\tconst functionCall = message.additional_kwargs.function_call;\n\t\tif (!functionCall) return void 0;\n\t\tif (this.argsOnly) return (0,_utils_json_js__WEBPACK_IMPORTED_MODULE_0__.parsePartialJson)(functionCall.arguments);\n\t\treturn {\n\t\t\t...functionCall,\n\t\t\targuments: (0,_utils_json_js__WEBPACK_IMPORTED_MODULE_0__.parsePartialJson)(functionCall.arguments)\n\t\t};\n\t}\n\t/**\n\t* Parses the output and returns a JSON object. If `argsOnly` is true,\n\t* only the arguments of the function call are returned.\n\t* @param generations The output of the LLM to parse.\n\t* @returns A JSON object representation of the function call or its arguments.\n\t*/\n\tasync parseResult(generations) {\n\t\tconst result = await this.outputParser.parseResult(generations);\n\t\tif (!result) throw new Error(`No result from \"OutputFunctionsParser\" ${JSON.stringify(generations)}`);\n\t\treturn this.parse(result);\n\t}\n\tasync parse(text) {\n\t\tconst parsedResult = JSON.parse(text);\n\t\tif (this.argsOnly) return parsedResult;\n\t\tparsedResult.arguments = JSON.parse(parsedResult.arguments);\n\t\treturn parsedResult;\n\t}\n\tgetFormatInstructions() {\n\t\treturn \"\";\n\t}\n};\n/**\n* Class for parsing the output of an LLM into a JSON object and returning\n* a specific attribute. Uses an instance of `JsonOutputFunctionsParser`\n* to parse the output.\n*/\nvar JsonKeyOutputFunctionsParser = class extends _base_js__WEBPACK_IMPORTED_MODULE_2__.BaseLLMOutputParser {\n\tstatic lc_name() {\n\t\treturn \"JsonKeyOutputFunctionsParser\";\n\t}\n\tlc_namespace = [\n\t\t\"langchain\",\n\t\t\"output_parsers\",\n\t\t\"openai_functions\"\n\t];\n\tlc_serializable = true;\n\toutputParser = new JsonOutputFunctionsParser();\n\tattrName;\n\tget lc_aliases() {\n\t\treturn { attrName: \"key_name\" };\n\t}\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.attrName = fields.attrName;\n\t}\n\t/**\n\t* Parses the output and returns a specific attribute of the parsed JSON\n\t* object.\n\t* @param generations The output of the LLM to parse.\n\t* @returns The value of a specific attribute of the parsed JSON object.\n\t*/\n\tasync parseResult(generations) {\n\t\tconst result = await this.outputParser.parseResult(generations);\n\t\treturn result[this.attrName];\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=json_output_functions_parsers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvb3BlbmFpX2Z1bmN0aW9ucy9qc29uX291dHB1dF9mdW5jdGlvbnNfcGFyc2Vycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBdUQ7QUFDYTtBQUNuQjtBQUNxQjtBQUNuQztBQUNmOztBQUVwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLHlEQUFtQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsNEJBQTRCO0FBQ2pHLGlGQUFpRiw0QkFBNEI7QUFDN0c7QUFDQTtBQUNBLElBQUksa0RBQWtELDRCQUE0QjtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsOEVBQW1DO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsNkVBQU8sV0FBVztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxVQUFVO0FBQ3BCO0FBQ0E7QUFDQSw0QkFBNEIsZ0VBQWdCO0FBQzVDO0FBQ0E7QUFDQSxjQUFjLGdFQUFnQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RSw0QkFBNEI7QUFDckc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCx5REFBbUI7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzBGO0FBQzFGIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvb3BlbmFpX2Z1bmN0aW9ucy9qc29uX291dHB1dF9mdW5jdGlvbnNfcGFyc2Vycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZVBhcnRpYWxKc29uIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2pzb24uanNcIjtcbmltcG9ydCB7IGNvbXBhcmUgfSBmcm9tIFwiLi4vLi4vdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9kdXBsZXguanNcIjtcbmltcG9ydCB7IEJhc2VMTE1PdXRwdXRQYXJzZXIgfSBmcm9tIFwiLi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgQmFzZUN1bXVsYXRpdmVUcmFuc2Zvcm1PdXRwdXRQYXJzZXIgfSBmcm9tIFwiLi4vdHJhbnNmb3JtLmpzXCI7XG5pbXBvcnQgXCIuLi8uLi91dGlscy9qc29uX3BhdGNoLmpzXCI7XG5pbXBvcnQgXCIuLi9qc29uLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvb3V0cHV0X3BhcnNlcnMvb3BlbmFpX2Z1bmN0aW9ucy9qc29uX291dHB1dF9mdW5jdGlvbnNfcGFyc2Vycy50c1xuLyoqXG4qIENsYXNzIGZvciBwYXJzaW5nIHRoZSBvdXRwdXQgb2YgYW4gTExNLiBDYW4gYmUgY29uZmlndXJlZCB0byByZXR1cm5cbiogb25seSB0aGUgYXJndW1lbnRzIG9mIHRoZSBmdW5jdGlvbiBjYWxsIGluIHRoZSBvdXRwdXQuXG4qL1xudmFyIE91dHB1dEZ1bmN0aW9uc1BhcnNlciA9IGNsYXNzIGV4dGVuZHMgQmFzZUxMTU91dHB1dFBhcnNlciB7XG5cdHN0YXRpYyBsY19uYW1lKCkge1xuXHRcdHJldHVybiBcIk91dHB1dEZ1bmN0aW9uc1BhcnNlclwiO1xuXHR9XG5cdGxjX25hbWVzcGFjZSA9IFtcblx0XHRcImxhbmdjaGFpblwiLFxuXHRcdFwib3V0cHV0X3BhcnNlcnNcIixcblx0XHRcIm9wZW5haV9mdW5jdGlvbnNcIlxuXHRdO1xuXHRsY19zZXJpYWxpemFibGUgPSB0cnVlO1xuXHRhcmdzT25seSA9IHRydWU7XG5cdGNvbnN0cnVjdG9yKGNvbmZpZykge1xuXHRcdHN1cGVyKCk7XG5cdFx0dGhpcy5hcmdzT25seSA9IGNvbmZpZz8uYXJnc09ubHkgPz8gdGhpcy5hcmdzT25seTtcblx0fVxuXHQvKipcblx0KiBQYXJzZXMgdGhlIG91dHB1dCBhbmQgcmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgZnVuY3Rpb25cblx0KiBjYWxsIG9yIGl0cyBhcmd1bWVudHMuXG5cdCogQHBhcmFtIGdlbmVyYXRpb25zIFRoZSBvdXRwdXQgb2YgdGhlIExMTSB0byBwYXJzZS5cblx0KiBAcmV0dXJucyBBIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgZnVuY3Rpb24gY2FsbCBvciBpdHMgYXJndW1lbnRzLlxuXHQqL1xuXHRhc3luYyBwYXJzZVJlc3VsdChnZW5lcmF0aW9ucykge1xuXHRcdGlmIChcIm1lc3NhZ2VcIiBpbiBnZW5lcmF0aW9uc1swXSkge1xuXHRcdFx0Y29uc3QgZ2VuID0gZ2VuZXJhdGlvbnNbMF07XG5cdFx0XHRjb25zdCBmdW5jdGlvbkNhbGwgPSBnZW4ubWVzc2FnZS5hZGRpdGlvbmFsX2t3YXJncy5mdW5jdGlvbl9jYWxsO1xuXHRcdFx0aWYgKCFmdW5jdGlvbkNhbGwpIHRocm93IG5ldyBFcnJvcihgTm8gZnVuY3Rpb25fY2FsbCBpbiBtZXNzYWdlICR7SlNPTi5zdHJpbmdpZnkoZ2VuZXJhdGlvbnMpfWApO1xuXHRcdFx0aWYgKCFmdW5jdGlvbkNhbGwuYXJndW1lbnRzKSB0aHJvdyBuZXcgRXJyb3IoYE5vIGFyZ3VtZW50cyBpbiBmdW5jdGlvbl9jYWxsICR7SlNPTi5zdHJpbmdpZnkoZ2VuZXJhdGlvbnMpfWApO1xuXHRcdFx0aWYgKHRoaXMuYXJnc09ubHkpIHJldHVybiBmdW5jdGlvbkNhbGwuYXJndW1lbnRzO1xuXHRcdFx0cmV0dXJuIEpTT04uc3RyaW5naWZ5KGZ1bmN0aW9uQ2FsbCk7XG5cdFx0fSBlbHNlIHRocm93IG5ldyBFcnJvcihgTm8gbWVzc2FnZSBpbiBnZW5lcmF0aW9ucyAke0pTT04uc3RyaW5naWZ5KGdlbmVyYXRpb25zKX1gKTtcblx0fVxufTtcbi8qKlxuKiBDbGFzcyBmb3IgcGFyc2luZyB0aGUgb3V0cHV0IG9mIGFuIExMTSBpbnRvIGEgSlNPTiBvYmplY3QuIFVzZXMgYW5cbiogaW5zdGFuY2Ugb2YgYE91dHB1dEZ1bmN0aW9uc1BhcnNlcmAgdG8gcGFyc2UgdGhlIG91dHB1dC5cbiovXG52YXIgSnNvbk91dHB1dEZ1bmN0aW9uc1BhcnNlciA9IGNsYXNzIGV4dGVuZHMgQmFzZUN1bXVsYXRpdmVUcmFuc2Zvcm1PdXRwdXRQYXJzZXIge1xuXHRzdGF0aWMgbGNfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJKc29uT3V0cHV0RnVuY3Rpb25zUGFyc2VyXCI7XG5cdH1cblx0bGNfbmFtZXNwYWNlID0gW1xuXHRcdFwibGFuZ2NoYWluXCIsXG5cdFx0XCJvdXRwdXRfcGFyc2Vyc1wiLFxuXHRcdFwib3BlbmFpX2Z1bmN0aW9uc1wiXG5cdF07XG5cdGxjX3NlcmlhbGl6YWJsZSA9IHRydWU7XG5cdG91dHB1dFBhcnNlcjtcblx0YXJnc09ubHkgPSB0cnVlO1xuXHRjb25zdHJ1Y3Rvcihjb25maWcpIHtcblx0XHRzdXBlcihjb25maWcpO1xuXHRcdHRoaXMuYXJnc09ubHkgPSBjb25maWc/LmFyZ3NPbmx5ID8/IHRoaXMuYXJnc09ubHk7XG5cdFx0dGhpcy5vdXRwdXRQYXJzZXIgPSBuZXcgT3V0cHV0RnVuY3Rpb25zUGFyc2VyKGNvbmZpZyk7XG5cdH1cblx0X2RpZmYocHJldiwgbmV4dCkge1xuXHRcdGlmICghbmV4dCkgcmV0dXJuIHZvaWQgMDtcblx0XHRjb25zdCBvcHMgPSBjb21wYXJlKHByZXYgPz8ge30sIG5leHQpO1xuXHRcdHJldHVybiBvcHM7XG5cdH1cblx0YXN5bmMgcGFyc2VQYXJ0aWFsUmVzdWx0KGdlbmVyYXRpb25zKSB7XG5cdFx0Y29uc3QgZ2VuZXJhdGlvbiA9IGdlbmVyYXRpb25zWzBdO1xuXHRcdGlmICghZ2VuZXJhdGlvbi5tZXNzYWdlKSByZXR1cm4gdm9pZCAwO1xuXHRcdGNvbnN0IHsgbWVzc2FnZSB9ID0gZ2VuZXJhdGlvbjtcblx0XHRjb25zdCBmdW5jdGlvbkNhbGwgPSBtZXNzYWdlLmFkZGl0aW9uYWxfa3dhcmdzLmZ1bmN0aW9uX2NhbGw7XG5cdFx0aWYgKCFmdW5jdGlvbkNhbGwpIHJldHVybiB2b2lkIDA7XG5cdFx0aWYgKHRoaXMuYXJnc09ubHkpIHJldHVybiBwYXJzZVBhcnRpYWxKc29uKGZ1bmN0aW9uQ2FsbC5hcmd1bWVudHMpO1xuXHRcdHJldHVybiB7XG5cdFx0XHQuLi5mdW5jdGlvbkNhbGwsXG5cdFx0XHRhcmd1bWVudHM6IHBhcnNlUGFydGlhbEpzb24oZnVuY3Rpb25DYWxsLmFyZ3VtZW50cylcblx0XHR9O1xuXHR9XG5cdC8qKlxuXHQqIFBhcnNlcyB0aGUgb3V0cHV0IGFuZCByZXR1cm5zIGEgSlNPTiBvYmplY3QuIElmIGBhcmdzT25seWAgaXMgdHJ1ZSxcblx0KiBvbmx5IHRoZSBhcmd1bWVudHMgb2YgdGhlIGZ1bmN0aW9uIGNhbGwgYXJlIHJldHVybmVkLlxuXHQqIEBwYXJhbSBnZW5lcmF0aW9ucyBUaGUgb3V0cHV0IG9mIHRoZSBMTE0gdG8gcGFyc2UuXG5cdCogQHJldHVybnMgQSBKU09OIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGUgZnVuY3Rpb24gY2FsbCBvciBpdHMgYXJndW1lbnRzLlxuXHQqL1xuXHRhc3luYyBwYXJzZVJlc3VsdChnZW5lcmF0aW9ucykge1xuXHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMub3V0cHV0UGFyc2VyLnBhcnNlUmVzdWx0KGdlbmVyYXRpb25zKTtcblx0XHRpZiAoIXJlc3VsdCkgdGhyb3cgbmV3IEVycm9yKGBObyByZXN1bHQgZnJvbSBcIk91dHB1dEZ1bmN0aW9uc1BhcnNlclwiICR7SlNPTi5zdHJpbmdpZnkoZ2VuZXJhdGlvbnMpfWApO1xuXHRcdHJldHVybiB0aGlzLnBhcnNlKHJlc3VsdCk7XG5cdH1cblx0YXN5bmMgcGFyc2UodGV4dCkge1xuXHRcdGNvbnN0IHBhcnNlZFJlc3VsdCA9IEpTT04ucGFyc2UodGV4dCk7XG5cdFx0aWYgKHRoaXMuYXJnc09ubHkpIHJldHVybiBwYXJzZWRSZXN1bHQ7XG5cdFx0cGFyc2VkUmVzdWx0LmFyZ3VtZW50cyA9IEpTT04ucGFyc2UocGFyc2VkUmVzdWx0LmFyZ3VtZW50cyk7XG5cdFx0cmV0dXJuIHBhcnNlZFJlc3VsdDtcblx0fVxuXHRnZXRGb3JtYXRJbnN0cnVjdGlvbnMoKSB7XG5cdFx0cmV0dXJuIFwiXCI7XG5cdH1cbn07XG4vKipcbiogQ2xhc3MgZm9yIHBhcnNpbmcgdGhlIG91dHB1dCBvZiBhbiBMTE0gaW50byBhIEpTT04gb2JqZWN0IGFuZCByZXR1cm5pbmdcbiogYSBzcGVjaWZpYyBhdHRyaWJ1dGUuIFVzZXMgYW4gaW5zdGFuY2Ugb2YgYEpzb25PdXRwdXRGdW5jdGlvbnNQYXJzZXJgXG4qIHRvIHBhcnNlIHRoZSBvdXRwdXQuXG4qL1xudmFyIEpzb25LZXlPdXRwdXRGdW5jdGlvbnNQYXJzZXIgPSBjbGFzcyBleHRlbmRzIEJhc2VMTE1PdXRwdXRQYXJzZXIge1xuXHRzdGF0aWMgbGNfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJKc29uS2V5T3V0cHV0RnVuY3Rpb25zUGFyc2VyXCI7XG5cdH1cblx0bGNfbmFtZXNwYWNlID0gW1xuXHRcdFwibGFuZ2NoYWluXCIsXG5cdFx0XCJvdXRwdXRfcGFyc2Vyc1wiLFxuXHRcdFwib3BlbmFpX2Z1bmN0aW9uc1wiXG5cdF07XG5cdGxjX3NlcmlhbGl6YWJsZSA9IHRydWU7XG5cdG91dHB1dFBhcnNlciA9IG5ldyBKc29uT3V0cHV0RnVuY3Rpb25zUGFyc2VyKCk7XG5cdGF0dHJOYW1lO1xuXHRnZXQgbGNfYWxpYXNlcygpIHtcblx0XHRyZXR1cm4geyBhdHRyTmFtZTogXCJrZXlfbmFtZVwiIH07XG5cdH1cblx0Y29uc3RydWN0b3IoZmllbGRzKSB7XG5cdFx0c3VwZXIoZmllbGRzKTtcblx0XHR0aGlzLmF0dHJOYW1lID0gZmllbGRzLmF0dHJOYW1lO1xuXHR9XG5cdC8qKlxuXHQqIFBhcnNlcyB0aGUgb3V0cHV0IGFuZCByZXR1cm5zIGEgc3BlY2lmaWMgYXR0cmlidXRlIG9mIHRoZSBwYXJzZWQgSlNPTlxuXHQqIG9iamVjdC5cblx0KiBAcGFyYW0gZ2VuZXJhdGlvbnMgVGhlIG91dHB1dCBvZiB0aGUgTExNIHRvIHBhcnNlLlxuXHQqIEByZXR1cm5zIFRoZSB2YWx1ZSBvZiBhIHNwZWNpZmljIGF0dHJpYnV0ZSBvZiB0aGUgcGFyc2VkIEpTT04gb2JqZWN0LlxuXHQqL1xuXHRhc3luYyBwYXJzZVJlc3VsdChnZW5lcmF0aW9ucykge1xuXHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMub3V0cHV0UGFyc2VyLnBhcnNlUmVzdWx0KGdlbmVyYXRpb25zKTtcblx0XHRyZXR1cm4gcmVzdWx0W3RoaXMuYXR0ck5hbWVdO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEpzb25LZXlPdXRwdXRGdW5jdGlvbnNQYXJzZXIsIEpzb25PdXRwdXRGdW5jdGlvbnNQYXJzZXIsIE91dHB1dEZ1bmN0aW9uc1BhcnNlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9anNvbl9vdXRwdXRfZnVuY3Rpb25zX3BhcnNlcnMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/output_parsers/openai_functions/json_output_functions_parsers.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/output_parsers/openai_tools/index.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/openai_tools/index.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonOutputKeyToolsParser: () => (/* reexport safe */ _json_output_tools_parsers_js__WEBPACK_IMPORTED_MODULE_1__.JsonOutputKeyToolsParser),\n/* harmony export */   JsonOutputToolsParser: () => (/* reexport safe */ _json_output_tools_parsers_js__WEBPACK_IMPORTED_MODULE_1__.JsonOutputToolsParser),\n/* harmony export */   convertLangChainToolCallToOpenAI: () => (/* reexport safe */ _json_output_tools_parsers_js__WEBPACK_IMPORTED_MODULE_1__.convertLangChainToolCallToOpenAI),\n/* harmony export */   makeInvalidToolCall: () => (/* reexport safe */ _json_output_tools_parsers_js__WEBPACK_IMPORTED_MODULE_1__.makeInvalidToolCall),\n/* harmony export */   openai_tools_exports: () => (/* binding */ openai_tools_exports),\n/* harmony export */   parseToolCall: () => (/* reexport safe */ _json_output_tools_parsers_js__WEBPACK_IMPORTED_MODULE_1__.parseToolCall)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _json_output_tools_parsers_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./json_output_tools_parsers.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/openai_tools/json_output_tools_parsers.js\");\n\n\n\n//#region src/output_parsers/openai_tools/index.ts\nvar openai_tools_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(openai_tools_exports, {\n\tJsonOutputKeyToolsParser: () => _json_output_tools_parsers_js__WEBPACK_IMPORTED_MODULE_1__.JsonOutputKeyToolsParser,\n\tJsonOutputToolsParser: () => _json_output_tools_parsers_js__WEBPACK_IMPORTED_MODULE_1__.JsonOutputToolsParser,\n\tconvertLangChainToolCallToOpenAI: () => _json_output_tools_parsers_js__WEBPACK_IMPORTED_MODULE_1__.convertLangChainToolCallToOpenAI,\n\tmakeInvalidToolCall: () => _json_output_tools_parsers_js__WEBPACK_IMPORTED_MODULE_1__.makeInvalidToolCall,\n\tparseToolCall: () => _json_output_tools_parsers_js__WEBPACK_IMPORTED_MODULE_1__.parseToolCall\n});\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvb3BlbmFpX3Rvb2xzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQThEO0FBQ3lHOztBQUV2SztBQUNBO0FBQ0Esc0VBQVE7QUFDUixpQ0FBaUMsbUZBQXdCO0FBQ3pELDhCQUE4QixnRkFBcUI7QUFDbkQseUNBQXlDLDJGQUFnQztBQUN6RSw0QkFBNEIsOEVBQW1CO0FBQy9DLHNCQUFzQix3RUFBYTtBQUNuQyxDQUFDOztBQUVEO0FBQ3VKO0FBQ3ZKIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvb3BlbmFpX3Rvb2xzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4uLy4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IEpzb25PdXRwdXRLZXlUb29sc1BhcnNlciwgSnNvbk91dHB1dFRvb2xzUGFyc2VyLCBjb252ZXJ0TGFuZ0NoYWluVG9vbENhbGxUb09wZW5BSSwgbWFrZUludmFsaWRUb29sQ2FsbCwgcGFyc2VUb29sQ2FsbCB9IGZyb20gXCIuL2pzb25fb3V0cHV0X3Rvb2xzX3BhcnNlcnMuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9vdXRwdXRfcGFyc2Vycy9vcGVuYWlfdG9vbHMvaW5kZXgudHNcbnZhciBvcGVuYWlfdG9vbHNfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQob3BlbmFpX3Rvb2xzX2V4cG9ydHMsIHtcblx0SnNvbk91dHB1dEtleVRvb2xzUGFyc2VyOiAoKSA9PiBKc29uT3V0cHV0S2V5VG9vbHNQYXJzZXIsXG5cdEpzb25PdXRwdXRUb29sc1BhcnNlcjogKCkgPT4gSnNvbk91dHB1dFRvb2xzUGFyc2VyLFxuXHRjb252ZXJ0TGFuZ0NoYWluVG9vbENhbGxUb09wZW5BSTogKCkgPT4gY29udmVydExhbmdDaGFpblRvb2xDYWxsVG9PcGVuQUksXG5cdG1ha2VJbnZhbGlkVG9vbENhbGw6ICgpID0+IG1ha2VJbnZhbGlkVG9vbENhbGwsXG5cdHBhcnNlVG9vbENhbGw6ICgpID0+IHBhcnNlVG9vbENhbGxcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEpzb25PdXRwdXRLZXlUb29sc1BhcnNlciwgSnNvbk91dHB1dFRvb2xzUGFyc2VyLCBjb252ZXJ0TGFuZ0NoYWluVG9vbENhbGxUb09wZW5BSSwgbWFrZUludmFsaWRUb29sQ2FsbCwgb3BlbmFpX3Rvb2xzX2V4cG9ydHMsIHBhcnNlVG9vbENhbGwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/output_parsers/openai_tools/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/output_parsers/openai_tools/json_output_tools_parsers.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/openai_tools/json_output_tools_parsers.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonOutputKeyToolsParser: () => (/* binding */ JsonOutputKeyToolsParser),\n/* harmony export */   JsonOutputToolsParser: () => (/* binding */ JsonOutputToolsParser),\n/* harmony export */   convertLangChainToolCallToOpenAI: () => (/* binding */ convertLangChainToolCallToOpenAI),\n/* harmony export */   makeInvalidToolCall: () => (/* binding */ makeInvalidToolCall),\n/* harmony export */   parseToolCall: () => (/* binding */ parseToolCall)\n/* harmony export */ });\n/* harmony import */ var _utils_json_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/json.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/json.js\");\n/* harmony import */ var _messages_ai_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../messages/ai.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _utils_types_zod_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/types/zod.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/types/zod.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../base.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/base.js\");\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../transform.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n/* harmony import */ var _json_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../json.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/json.js\");\n\n\n\n\n\n\n\n//#region src/output_parsers/openai_tools/json_output_tools_parsers.ts\nfunction parseToolCall(rawToolCall, options) {\n\tif (rawToolCall.function === void 0) return void 0;\n\tlet functionArgs;\n\tif (options?.partial) try {\n\t\tfunctionArgs = (0,_utils_json_js__WEBPACK_IMPORTED_MODULE_0__.parsePartialJson)(rawToolCall.function.arguments ?? \"{}\");\n\t} catch {\n\t\treturn void 0;\n\t}\n\telse try {\n\t\tfunctionArgs = JSON.parse(rawToolCall.function.arguments);\n\t} catch (e) {\n\t\tthrow new _base_js__WEBPACK_IMPORTED_MODULE_3__.OutputParserException([\n\t\t\t`Function \"${rawToolCall.function.name}\" arguments:`,\n\t\t\t``,\n\t\t\trawToolCall.function.arguments,\n\t\t\t``,\n\t\t\t`are not valid JSON.`,\n\t\t\t`Error: ${e.message}`\n\t\t].join(\"\\n\"));\n\t}\n\tconst parsedToolCall = {\n\t\tname: rawToolCall.function.name,\n\t\targs: functionArgs,\n\t\ttype: \"tool_call\"\n\t};\n\tif (options?.returnId) parsedToolCall.id = rawToolCall.id;\n\treturn parsedToolCall;\n}\nfunction convertLangChainToolCallToOpenAI(toolCall) {\n\tif (toolCall.id === void 0) throw new Error(`All OpenAI tool calls must have an \"id\" field.`);\n\treturn {\n\t\tid: toolCall.id,\n\t\ttype: \"function\",\n\t\tfunction: {\n\t\t\tname: toolCall.name,\n\t\t\targuments: JSON.stringify(toolCall.args)\n\t\t}\n\t};\n}\nfunction makeInvalidToolCall(rawToolCall, errorMsg) {\n\treturn {\n\t\tname: rawToolCall.function?.name,\n\t\targs: rawToolCall.function?.arguments,\n\t\tid: rawToolCall.id,\n\t\terror: errorMsg,\n\t\ttype: \"invalid_tool_call\"\n\t};\n}\n/**\n* Class for parsing the output of a tool-calling LLM into a JSON object.\n*/\nvar JsonOutputToolsParser = class extends _transform_js__WEBPACK_IMPORTED_MODULE_4__.BaseCumulativeTransformOutputParser {\n\tstatic lc_name() {\n\t\treturn \"JsonOutputToolsParser\";\n\t}\n\treturnId = false;\n\tlc_namespace = [\n\t\t\"langchain\",\n\t\t\"output_parsers\",\n\t\t\"openai_tools\"\n\t];\n\tlc_serializable = true;\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.returnId = fields?.returnId ?? this.returnId;\n\t}\n\t_diff() {\n\t\tthrow new Error(\"Not supported.\");\n\t}\n\tasync parse() {\n\t\tthrow new Error(\"Not implemented.\");\n\t}\n\tasync parseResult(generations) {\n\t\tconst result = await this.parsePartialResult(generations, false);\n\t\treturn result;\n\t}\n\t/**\n\t* Parses the output and returns a JSON object. If `argsOnly` is true,\n\t* only the arguments of the function call are returned.\n\t* @param generations The output of the LLM to parse.\n\t* @returns A JSON object representation of the function call or its arguments.\n\t*/\n\tasync parsePartialResult(generations, partial = true) {\n\t\tconst message = generations[0].message;\n\t\tlet toolCalls;\n\t\tif ((0,_messages_ai_js__WEBPACK_IMPORTED_MODULE_1__.isAIMessage)(message) && message.tool_calls?.length) toolCalls = message.tool_calls.map((toolCall) => {\n\t\t\tconst { id,...rest } = toolCall;\n\t\t\tif (!this.returnId) return rest;\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\t...rest\n\t\t\t};\n\t\t});\n\t\telse if (message.additional_kwargs.tool_calls !== void 0) {\n\t\t\tconst rawToolCalls = JSON.parse(JSON.stringify(message.additional_kwargs.tool_calls));\n\t\t\ttoolCalls = rawToolCalls.map((rawToolCall) => {\n\t\t\t\treturn parseToolCall(rawToolCall, {\n\t\t\t\t\treturnId: this.returnId,\n\t\t\t\t\tpartial\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\tif (!toolCalls) return [];\n\t\tconst parsedToolCalls = [];\n\t\tfor (const toolCall of toolCalls) if (toolCall !== void 0) {\n\t\t\tconst backwardsCompatibleToolCall = {\n\t\t\t\ttype: toolCall.name,\n\t\t\t\targs: toolCall.args,\n\t\t\t\tid: toolCall.id\n\t\t\t};\n\t\t\tparsedToolCalls.push(backwardsCompatibleToolCall);\n\t\t}\n\t\treturn parsedToolCalls;\n\t}\n};\n/**\n* Class for parsing the output of a tool-calling LLM into a JSON object if you are\n* expecting only a single tool to be called.\n*/\nvar JsonOutputKeyToolsParser = class extends JsonOutputToolsParser {\n\tstatic lc_name() {\n\t\treturn \"JsonOutputKeyToolsParser\";\n\t}\n\tlc_namespace = [\n\t\t\"langchain\",\n\t\t\"output_parsers\",\n\t\t\"openai_tools\"\n\t];\n\tlc_serializable = true;\n\treturnId = false;\n\t/** The type of tool calls to return. */\n\tkeyName;\n\t/** Whether to return only the first tool call. */\n\treturnSingle = false;\n\tzodSchema;\n\tconstructor(params) {\n\t\tsuper(params);\n\t\tthis.keyName = params.keyName;\n\t\tthis.returnSingle = params.returnSingle ?? this.returnSingle;\n\t\tthis.zodSchema = params.zodSchema;\n\t}\n\tasync _validateResult(result) {\n\t\tif (this.zodSchema === void 0) return result;\n\t\tconst zodParsedResult = await (0,_utils_types_zod_js__WEBPACK_IMPORTED_MODULE_2__.interopSafeParseAsync)(this.zodSchema, result);\n\t\tif (zodParsedResult.success) return zodParsedResult.data;\n\t\telse throw new _base_js__WEBPACK_IMPORTED_MODULE_3__.OutputParserException(`Failed to parse. Text: \"${JSON.stringify(result, null, 2)}\". Error: ${JSON.stringify(zodParsedResult.error?.issues)}`, JSON.stringify(result, null, 2));\n\t}\n\tasync parsePartialResult(generations) {\n\t\tconst results = await super.parsePartialResult(generations);\n\t\tconst matchingResults = results.filter((result) => result.type === this.keyName);\n\t\tlet returnedValues = matchingResults;\n\t\tif (!matchingResults.length) return void 0;\n\t\tif (!this.returnId) returnedValues = matchingResults.map((result) => result.args);\n\t\tif (this.returnSingle) return returnedValues[0];\n\t\treturn returnedValues;\n\t}\n\tasync parseResult(generations) {\n\t\tconst results = await super.parsePartialResult(generations, false);\n\t\tconst matchingResults = results.filter((result) => result.type === this.keyName);\n\t\tlet returnedValues = matchingResults;\n\t\tif (!matchingResults.length) return void 0;\n\t\tif (!this.returnId) returnedValues = matchingResults.map((result) => result.args);\n\t\tif (this.returnSingle) return this._validateResult(returnedValues[0]);\n\t\tconst toolCallResults = await Promise.all(returnedValues.map((value) => this._validateResult(value)));\n\t\treturn toolCallResults;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=json_output_tools_parsers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvb3BlbmFpX3Rvb2xzL2pzb25fb3V0cHV0X3Rvb2xzX3BhcnNlcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBdUQ7QUFDSjtBQUNjO0FBQ2Q7QUFDbUI7QUFDbEQ7O0FBRXBCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsZ0VBQWdCLHNDQUFzQztBQUN2RSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsWUFBWSwyREFBcUI7QUFDakMsZ0JBQWdCLDBCQUEwQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsVUFBVTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsOEVBQW1DO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sNERBQVc7QUFDakIsV0FBVyxhQUFhO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsMEVBQXFCO0FBQ3JEO0FBQ0EsaUJBQWlCLDJEQUFxQiw0QkFBNEIsZ0NBQWdDLFlBQVksOENBQThDO0FBQzVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNpSTtBQUNqSSIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L291dHB1dF9wYXJzZXJzL29wZW5haV90b29scy9qc29uX291dHB1dF90b29sc19wYXJzZXJzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlUGFydGlhbEpzb24gfSBmcm9tIFwiLi4vLi4vdXRpbHMvanNvbi5qc1wiO1xuaW1wb3J0IHsgaXNBSU1lc3NhZ2UgfSBmcm9tIFwiLi4vLi4vbWVzc2FnZXMvYWkuanNcIjtcbmltcG9ydCB7IGludGVyb3BTYWZlUGFyc2VBc3luYyB9IGZyb20gXCIuLi8uLi91dGlscy90eXBlcy96b2QuanNcIjtcbmltcG9ydCB7IE91dHB1dFBhcnNlckV4Y2VwdGlvbiB9IGZyb20gXCIuLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBCYXNlQ3VtdWxhdGl2ZVRyYW5zZm9ybU91dHB1dFBhcnNlciB9IGZyb20gXCIuLi90cmFuc2Zvcm0uanNcIjtcbmltcG9ydCBcIi4uL2pzb24uanNcIjtcblxuLy8jcmVnaW9uIHNyYy9vdXRwdXRfcGFyc2Vycy9vcGVuYWlfdG9vbHMvanNvbl9vdXRwdXRfdG9vbHNfcGFyc2Vycy50c1xuZnVuY3Rpb24gcGFyc2VUb29sQ2FsbChyYXdUb29sQ2FsbCwgb3B0aW9ucykge1xuXHRpZiAocmF3VG9vbENhbGwuZnVuY3Rpb24gPT09IHZvaWQgMCkgcmV0dXJuIHZvaWQgMDtcblx0bGV0IGZ1bmN0aW9uQXJncztcblx0aWYgKG9wdGlvbnM/LnBhcnRpYWwpIHRyeSB7XG5cdFx0ZnVuY3Rpb25BcmdzID0gcGFyc2VQYXJ0aWFsSnNvbihyYXdUb29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMgPz8gXCJ7fVwiKTtcblx0fSBjYXRjaCB7XG5cdFx0cmV0dXJuIHZvaWQgMDtcblx0fVxuXHRlbHNlIHRyeSB7XG5cdFx0ZnVuY3Rpb25BcmdzID0gSlNPTi5wYXJzZShyYXdUb29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0dGhyb3cgbmV3IE91dHB1dFBhcnNlckV4Y2VwdGlvbihbXG5cdFx0XHRgRnVuY3Rpb24gXCIke3Jhd1Rvb2xDYWxsLmZ1bmN0aW9uLm5hbWV9XCIgYXJndW1lbnRzOmAsXG5cdFx0XHRgYCxcblx0XHRcdHJhd1Rvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50cyxcblx0XHRcdGBgLFxuXHRcdFx0YGFyZSBub3QgdmFsaWQgSlNPTi5gLFxuXHRcdFx0YEVycm9yOiAke2UubWVzc2FnZX1gXG5cdFx0XS5qb2luKFwiXFxuXCIpKTtcblx0fVxuXHRjb25zdCBwYXJzZWRUb29sQ2FsbCA9IHtcblx0XHRuYW1lOiByYXdUb29sQ2FsbC5mdW5jdGlvbi5uYW1lLFxuXHRcdGFyZ3M6IGZ1bmN0aW9uQXJncyxcblx0XHR0eXBlOiBcInRvb2xfY2FsbFwiXG5cdH07XG5cdGlmIChvcHRpb25zPy5yZXR1cm5JZCkgcGFyc2VkVG9vbENhbGwuaWQgPSByYXdUb29sQ2FsbC5pZDtcblx0cmV0dXJuIHBhcnNlZFRvb2xDYWxsO1xufVxuZnVuY3Rpb24gY29udmVydExhbmdDaGFpblRvb2xDYWxsVG9PcGVuQUkodG9vbENhbGwpIHtcblx0aWYgKHRvb2xDYWxsLmlkID09PSB2b2lkIDApIHRocm93IG5ldyBFcnJvcihgQWxsIE9wZW5BSSB0b29sIGNhbGxzIG11c3QgaGF2ZSBhbiBcImlkXCIgZmllbGQuYCk7XG5cdHJldHVybiB7XG5cdFx0aWQ6IHRvb2xDYWxsLmlkLFxuXHRcdHR5cGU6IFwiZnVuY3Rpb25cIixcblx0XHRmdW5jdGlvbjoge1xuXHRcdFx0bmFtZTogdG9vbENhbGwubmFtZSxcblx0XHRcdGFyZ3VtZW50czogSlNPTi5zdHJpbmdpZnkodG9vbENhbGwuYXJncylcblx0XHR9XG5cdH07XG59XG5mdW5jdGlvbiBtYWtlSW52YWxpZFRvb2xDYWxsKHJhd1Rvb2xDYWxsLCBlcnJvck1zZykge1xuXHRyZXR1cm4ge1xuXHRcdG5hbWU6IHJhd1Rvb2xDYWxsLmZ1bmN0aW9uPy5uYW1lLFxuXHRcdGFyZ3M6IHJhd1Rvb2xDYWxsLmZ1bmN0aW9uPy5hcmd1bWVudHMsXG5cdFx0aWQ6IHJhd1Rvb2xDYWxsLmlkLFxuXHRcdGVycm9yOiBlcnJvck1zZyxcblx0XHR0eXBlOiBcImludmFsaWRfdG9vbF9jYWxsXCJcblx0fTtcbn1cbi8qKlxuKiBDbGFzcyBmb3IgcGFyc2luZyB0aGUgb3V0cHV0IG9mIGEgdG9vbC1jYWxsaW5nIExMTSBpbnRvIGEgSlNPTiBvYmplY3QuXG4qL1xudmFyIEpzb25PdXRwdXRUb29sc1BhcnNlciA9IGNsYXNzIGV4dGVuZHMgQmFzZUN1bXVsYXRpdmVUcmFuc2Zvcm1PdXRwdXRQYXJzZXIge1xuXHRzdGF0aWMgbGNfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJKc29uT3V0cHV0VG9vbHNQYXJzZXJcIjtcblx0fVxuXHRyZXR1cm5JZCA9IGZhbHNlO1xuXHRsY19uYW1lc3BhY2UgPSBbXG5cdFx0XCJsYW5nY2hhaW5cIixcblx0XHRcIm91dHB1dF9wYXJzZXJzXCIsXG5cdFx0XCJvcGVuYWlfdG9vbHNcIlxuXHRdO1xuXHRsY19zZXJpYWxpemFibGUgPSB0cnVlO1xuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHRzdXBlcihmaWVsZHMpO1xuXHRcdHRoaXMucmV0dXJuSWQgPSBmaWVsZHM/LnJldHVybklkID8/IHRoaXMucmV0dXJuSWQ7XG5cdH1cblx0X2RpZmYoKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiTm90IHN1cHBvcnRlZC5cIik7XG5cdH1cblx0YXN5bmMgcGFyc2UoKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkLlwiKTtcblx0fVxuXHRhc3luYyBwYXJzZVJlc3VsdChnZW5lcmF0aW9ucykge1xuXHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucGFyc2VQYXJ0aWFsUmVzdWx0KGdlbmVyYXRpb25zLCBmYWxzZSk7XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXHQvKipcblx0KiBQYXJzZXMgdGhlIG91dHB1dCBhbmQgcmV0dXJucyBhIEpTT04gb2JqZWN0LiBJZiBgYXJnc09ubHlgIGlzIHRydWUsXG5cdCogb25seSB0aGUgYXJndW1lbnRzIG9mIHRoZSBmdW5jdGlvbiBjYWxsIGFyZSByZXR1cm5lZC5cblx0KiBAcGFyYW0gZ2VuZXJhdGlvbnMgVGhlIG91dHB1dCBvZiB0aGUgTExNIHRvIHBhcnNlLlxuXHQqIEByZXR1cm5zIEEgSlNPTiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhlIGZ1bmN0aW9uIGNhbGwgb3IgaXRzIGFyZ3VtZW50cy5cblx0Ki9cblx0YXN5bmMgcGFyc2VQYXJ0aWFsUmVzdWx0KGdlbmVyYXRpb25zLCBwYXJ0aWFsID0gdHJ1ZSkge1xuXHRcdGNvbnN0IG1lc3NhZ2UgPSBnZW5lcmF0aW9uc1swXS5tZXNzYWdlO1xuXHRcdGxldCB0b29sQ2FsbHM7XG5cdFx0aWYgKGlzQUlNZXNzYWdlKG1lc3NhZ2UpICYmIG1lc3NhZ2UudG9vbF9jYWxscz8ubGVuZ3RoKSB0b29sQ2FsbHMgPSBtZXNzYWdlLnRvb2xfY2FsbHMubWFwKCh0b29sQ2FsbCkgPT4ge1xuXHRcdFx0Y29uc3QgeyBpZCwuLi5yZXN0IH0gPSB0b29sQ2FsbDtcblx0XHRcdGlmICghdGhpcy5yZXR1cm5JZCkgcmV0dXJuIHJlc3Q7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRpZCxcblx0XHRcdFx0Li4ucmVzdFxuXHRcdFx0fTtcblx0XHR9KTtcblx0XHRlbHNlIGlmIChtZXNzYWdlLmFkZGl0aW9uYWxfa3dhcmdzLnRvb2xfY2FsbHMgIT09IHZvaWQgMCkge1xuXHRcdFx0Y29uc3QgcmF3VG9vbENhbGxzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShtZXNzYWdlLmFkZGl0aW9uYWxfa3dhcmdzLnRvb2xfY2FsbHMpKTtcblx0XHRcdHRvb2xDYWxscyA9IHJhd1Rvb2xDYWxscy5tYXAoKHJhd1Rvb2xDYWxsKSA9PiB7XG5cdFx0XHRcdHJldHVybiBwYXJzZVRvb2xDYWxsKHJhd1Rvb2xDYWxsLCB7XG5cdFx0XHRcdFx0cmV0dXJuSWQ6IHRoaXMucmV0dXJuSWQsXG5cdFx0XHRcdFx0cGFydGlhbFxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRpZiAoIXRvb2xDYWxscykgcmV0dXJuIFtdO1xuXHRcdGNvbnN0IHBhcnNlZFRvb2xDYWxscyA9IFtdO1xuXHRcdGZvciAoY29uc3QgdG9vbENhbGwgb2YgdG9vbENhbGxzKSBpZiAodG9vbENhbGwgIT09IHZvaWQgMCkge1xuXHRcdFx0Y29uc3QgYmFja3dhcmRzQ29tcGF0aWJsZVRvb2xDYWxsID0ge1xuXHRcdFx0XHR0eXBlOiB0b29sQ2FsbC5uYW1lLFxuXHRcdFx0XHRhcmdzOiB0b29sQ2FsbC5hcmdzLFxuXHRcdFx0XHRpZDogdG9vbENhbGwuaWRcblx0XHRcdH07XG5cdFx0XHRwYXJzZWRUb29sQ2FsbHMucHVzaChiYWNrd2FyZHNDb21wYXRpYmxlVG9vbENhbGwpO1xuXHRcdH1cblx0XHRyZXR1cm4gcGFyc2VkVG9vbENhbGxzO1xuXHR9XG59O1xuLyoqXG4qIENsYXNzIGZvciBwYXJzaW5nIHRoZSBvdXRwdXQgb2YgYSB0b29sLWNhbGxpbmcgTExNIGludG8gYSBKU09OIG9iamVjdCBpZiB5b3UgYXJlXG4qIGV4cGVjdGluZyBvbmx5IGEgc2luZ2xlIHRvb2wgdG8gYmUgY2FsbGVkLlxuKi9cbnZhciBKc29uT3V0cHV0S2V5VG9vbHNQYXJzZXIgPSBjbGFzcyBleHRlbmRzIEpzb25PdXRwdXRUb29sc1BhcnNlciB7XG5cdHN0YXRpYyBsY19uYW1lKCkge1xuXHRcdHJldHVybiBcIkpzb25PdXRwdXRLZXlUb29sc1BhcnNlclwiO1xuXHR9XG5cdGxjX25hbWVzcGFjZSA9IFtcblx0XHRcImxhbmdjaGFpblwiLFxuXHRcdFwib3V0cHV0X3BhcnNlcnNcIixcblx0XHRcIm9wZW5haV90b29sc1wiXG5cdF07XG5cdGxjX3NlcmlhbGl6YWJsZSA9IHRydWU7XG5cdHJldHVybklkID0gZmFsc2U7XG5cdC8qKiBUaGUgdHlwZSBvZiB0b29sIGNhbGxzIHRvIHJldHVybi4gKi9cblx0a2V5TmFtZTtcblx0LyoqIFdoZXRoZXIgdG8gcmV0dXJuIG9ubHkgdGhlIGZpcnN0IHRvb2wgY2FsbC4gKi9cblx0cmV0dXJuU2luZ2xlID0gZmFsc2U7XG5cdHpvZFNjaGVtYTtcblx0Y29uc3RydWN0b3IocGFyYW1zKSB7XG5cdFx0c3VwZXIocGFyYW1zKTtcblx0XHR0aGlzLmtleU5hbWUgPSBwYXJhbXMua2V5TmFtZTtcblx0XHR0aGlzLnJldHVyblNpbmdsZSA9IHBhcmFtcy5yZXR1cm5TaW5nbGUgPz8gdGhpcy5yZXR1cm5TaW5nbGU7XG5cdFx0dGhpcy56b2RTY2hlbWEgPSBwYXJhbXMuem9kU2NoZW1hO1xuXHR9XG5cdGFzeW5jIF92YWxpZGF0ZVJlc3VsdChyZXN1bHQpIHtcblx0XHRpZiAodGhpcy56b2RTY2hlbWEgPT09IHZvaWQgMCkgcmV0dXJuIHJlc3VsdDtcblx0XHRjb25zdCB6b2RQYXJzZWRSZXN1bHQgPSBhd2FpdCBpbnRlcm9wU2FmZVBhcnNlQXN5bmModGhpcy56b2RTY2hlbWEsIHJlc3VsdCk7XG5cdFx0aWYgKHpvZFBhcnNlZFJlc3VsdC5zdWNjZXNzKSByZXR1cm4gem9kUGFyc2VkUmVzdWx0LmRhdGE7XG5cdFx0ZWxzZSB0aHJvdyBuZXcgT3V0cHV0UGFyc2VyRXhjZXB0aW9uKGBGYWlsZWQgdG8gcGFyc2UuIFRleHQ6IFwiJHtKU09OLnN0cmluZ2lmeShyZXN1bHQsIG51bGwsIDIpfVwiLiBFcnJvcjogJHtKU09OLnN0cmluZ2lmeSh6b2RQYXJzZWRSZXN1bHQuZXJyb3I/Lmlzc3Vlcyl9YCwgSlNPTi5zdHJpbmdpZnkocmVzdWx0LCBudWxsLCAyKSk7XG5cdH1cblx0YXN5bmMgcGFyc2VQYXJ0aWFsUmVzdWx0KGdlbmVyYXRpb25zKSB7XG5cdFx0Y29uc3QgcmVzdWx0cyA9IGF3YWl0IHN1cGVyLnBhcnNlUGFydGlhbFJlc3VsdChnZW5lcmF0aW9ucyk7XG5cdFx0Y29uc3QgbWF0Y2hpbmdSZXN1bHRzID0gcmVzdWx0cy5maWx0ZXIoKHJlc3VsdCkgPT4gcmVzdWx0LnR5cGUgPT09IHRoaXMua2V5TmFtZSk7XG5cdFx0bGV0IHJldHVybmVkVmFsdWVzID0gbWF0Y2hpbmdSZXN1bHRzO1xuXHRcdGlmICghbWF0Y2hpbmdSZXN1bHRzLmxlbmd0aCkgcmV0dXJuIHZvaWQgMDtcblx0XHRpZiAoIXRoaXMucmV0dXJuSWQpIHJldHVybmVkVmFsdWVzID0gbWF0Y2hpbmdSZXN1bHRzLm1hcCgocmVzdWx0KSA9PiByZXN1bHQuYXJncyk7XG5cdFx0aWYgKHRoaXMucmV0dXJuU2luZ2xlKSByZXR1cm4gcmV0dXJuZWRWYWx1ZXNbMF07XG5cdFx0cmV0dXJuIHJldHVybmVkVmFsdWVzO1xuXHR9XG5cdGFzeW5jIHBhcnNlUmVzdWx0KGdlbmVyYXRpb25zKSB7XG5cdFx0Y29uc3QgcmVzdWx0cyA9IGF3YWl0IHN1cGVyLnBhcnNlUGFydGlhbFJlc3VsdChnZW5lcmF0aW9ucywgZmFsc2UpO1xuXHRcdGNvbnN0IG1hdGNoaW5nUmVzdWx0cyA9IHJlc3VsdHMuZmlsdGVyKChyZXN1bHQpID0+IHJlc3VsdC50eXBlID09PSB0aGlzLmtleU5hbWUpO1xuXHRcdGxldCByZXR1cm5lZFZhbHVlcyA9IG1hdGNoaW5nUmVzdWx0cztcblx0XHRpZiAoIW1hdGNoaW5nUmVzdWx0cy5sZW5ndGgpIHJldHVybiB2b2lkIDA7XG5cdFx0aWYgKCF0aGlzLnJldHVybklkKSByZXR1cm5lZFZhbHVlcyA9IG1hdGNoaW5nUmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4gcmVzdWx0LmFyZ3MpO1xuXHRcdGlmICh0aGlzLnJldHVyblNpbmdsZSkgcmV0dXJuIHRoaXMuX3ZhbGlkYXRlUmVzdWx0KHJldHVybmVkVmFsdWVzWzBdKTtcblx0XHRjb25zdCB0b29sQ2FsbFJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChyZXR1cm5lZFZhbHVlcy5tYXAoKHZhbHVlKSA9PiB0aGlzLl92YWxpZGF0ZVJlc3VsdCh2YWx1ZSkpKTtcblx0XHRyZXR1cm4gdG9vbENhbGxSZXN1bHRzO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEpzb25PdXRwdXRLZXlUb29sc1BhcnNlciwgSnNvbk91dHB1dFRvb2xzUGFyc2VyLCBjb252ZXJ0TGFuZ0NoYWluVG9vbENhbGxUb09wZW5BSSwgbWFrZUludmFsaWRUb29sQ2FsbCwgcGFyc2VUb29sQ2FsbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9anNvbl9vdXRwdXRfdG9vbHNfcGFyc2Vycy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/output_parsers/openai_tools/json_output_tools_parsers.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/output_parsers/string.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/string.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StringOutputParser: () => (/* binding */ StringOutputParser)\n/* harmony export */ });\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./transform.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n\n\n//#region src/output_parsers/string.ts\n/**\n* OutputParser that parses LLMResult into the top likely string.\n* @example\n* ```typescript\n* const promptTemplate = PromptTemplate.fromTemplate(\n*   \"Tell me a joke about {topic}\",\n* );\n*\n* const chain = RunnableSequence.from([\n*   promptTemplate,\n*   new ChatOpenAI({ model: \"gpt-4o-mini\" }),\n*   new StringOutputParser(),\n* ]);\n*\n* const result = await chain.invoke({ topic: \"bears\" });\n* console.log(\"What do you call a bear with no teeth? A gummy bear!\");\n* ```\n*/\nvar StringOutputParser = class extends _transform_js__WEBPACK_IMPORTED_MODULE_0__.BaseTransformOutputParser {\n\tstatic lc_name() {\n\t\treturn \"StrOutputParser\";\n\t}\n\tlc_namespace = [\n\t\t\"langchain_core\",\n\t\t\"output_parsers\",\n\t\t\"string\"\n\t];\n\tlc_serializable = true;\n\t/**\n\t* Parses a string output from an LLM call. This method is meant to be\n\t* implemented by subclasses to define how a string output from an LLM\n\t* should be parsed.\n\t* @param text The string output from an LLM call.\n\t* @param callbacks Optional callbacks.\n\t* @returns A promise of the parsed output.\n\t*/\n\tparse(text) {\n\t\treturn Promise.resolve(text);\n\t}\n\tgetFormatInstructions() {\n\t\treturn \"\";\n\t}\n\t_textContentToString(content) {\n\t\treturn content.text;\n\t}\n\t_imageUrlContentToString(_content) {\n\t\tthrow new Error(`Cannot coerce a multimodal \"image_url\" message part into a string.`);\n\t}\n\t_messageContentToString(content) {\n\t\tswitch (content.type) {\n\t\t\tcase \"text\":\n\t\t\tcase \"text_delta\":\n\t\t\t\tif (\"text\" in content) return this._textContentToString(content);\n\t\t\t\tbreak;\n\t\t\tcase \"image_url\":\n\t\t\t\tif (\"image_url\" in content) return this._imageUrlContentToString(content);\n\t\t\t\tbreak;\n\t\t\tdefault: throw new Error(`Cannot coerce \"${content.type}\" message part into a string.`);\n\t\t}\n\t\tthrow new Error(`Invalid content type: ${content.type}`);\n\t}\n\t_baseMessageContentToString(content) {\n\t\treturn content.reduce((acc, item) => acc + this._messageContentToString(item), \"\");\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=string.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvc3RyaW5nLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTJEOztBQUUzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsTUFBTTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixzQkFBc0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLGdCQUFnQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsb0VBQXlCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsYUFBYTtBQUMzRDtBQUNBLDJDQUEyQyxhQUFhO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDOEI7QUFDOUIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9vdXRwdXRfcGFyc2Vycy9zdHJpbmcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZVRyYW5zZm9ybU91dHB1dFBhcnNlciB9IGZyb20gXCIuL3RyYW5zZm9ybS5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL291dHB1dF9wYXJzZXJzL3N0cmluZy50c1xuLyoqXG4qIE91dHB1dFBhcnNlciB0aGF0IHBhcnNlcyBMTE1SZXN1bHQgaW50byB0aGUgdG9wIGxpa2VseSBzdHJpbmcuXG4qIEBleGFtcGxlXG4qIGBgYHR5cGVzY3JpcHRcbiogY29uc3QgcHJvbXB0VGVtcGxhdGUgPSBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXG4qICAgXCJUZWxsIG1lIGEgam9rZSBhYm91dCB7dG9waWN9XCIsXG4qICk7XG4qXG4qIGNvbnN0IGNoYWluID0gUnVubmFibGVTZXF1ZW5jZS5mcm9tKFtcbiogICBwcm9tcHRUZW1wbGF0ZSxcbiogICBuZXcgQ2hhdE9wZW5BSSh7IG1vZGVsOiBcImdwdC00by1taW5pXCIgfSksXG4qICAgbmV3IFN0cmluZ091dHB1dFBhcnNlcigpLFxuKiBdKTtcbipcbiogY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hhaW4uaW52b2tlKHsgdG9waWM6IFwiYmVhcnNcIiB9KTtcbiogY29uc29sZS5sb2coXCJXaGF0IGRvIHlvdSBjYWxsIGEgYmVhciB3aXRoIG5vIHRlZXRoPyBBIGd1bW15IGJlYXIhXCIpO1xuKiBgYGBcbiovXG52YXIgU3RyaW5nT3V0cHV0UGFyc2VyID0gY2xhc3MgZXh0ZW5kcyBCYXNlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIHtcblx0c3RhdGljIGxjX25hbWUoKSB7XG5cdFx0cmV0dXJuIFwiU3RyT3V0cHV0UGFyc2VyXCI7XG5cdH1cblx0bGNfbmFtZXNwYWNlID0gW1xuXHRcdFwibGFuZ2NoYWluX2NvcmVcIixcblx0XHRcIm91dHB1dF9wYXJzZXJzXCIsXG5cdFx0XCJzdHJpbmdcIlxuXHRdO1xuXHRsY19zZXJpYWxpemFibGUgPSB0cnVlO1xuXHQvKipcblx0KiBQYXJzZXMgYSBzdHJpbmcgb3V0cHV0IGZyb20gYW4gTExNIGNhbGwuIFRoaXMgbWV0aG9kIGlzIG1lYW50IHRvIGJlXG5cdCogaW1wbGVtZW50ZWQgYnkgc3ViY2xhc3NlcyB0byBkZWZpbmUgaG93IGEgc3RyaW5nIG91dHB1dCBmcm9tIGFuIExMTVxuXHQqIHNob3VsZCBiZSBwYXJzZWQuXG5cdCogQHBhcmFtIHRleHQgVGhlIHN0cmluZyBvdXRwdXQgZnJvbSBhbiBMTE0gY2FsbC5cblx0KiBAcGFyYW0gY2FsbGJhY2tzIE9wdGlvbmFsIGNhbGxiYWNrcy5cblx0KiBAcmV0dXJucyBBIHByb21pc2Ugb2YgdGhlIHBhcnNlZCBvdXRwdXQuXG5cdCovXG5cdHBhcnNlKHRleHQpIHtcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRleHQpO1xuXHR9XG5cdGdldEZvcm1hdEluc3RydWN0aW9ucygpIHtcblx0XHRyZXR1cm4gXCJcIjtcblx0fVxuXHRfdGV4dENvbnRlbnRUb1N0cmluZyhjb250ZW50KSB7XG5cdFx0cmV0dXJuIGNvbnRlbnQudGV4dDtcblx0fVxuXHRfaW1hZ2VVcmxDb250ZW50VG9TdHJpbmcoX2NvbnRlbnQpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBjb2VyY2UgYSBtdWx0aW1vZGFsIFwiaW1hZ2VfdXJsXCIgbWVzc2FnZSBwYXJ0IGludG8gYSBzdHJpbmcuYCk7XG5cdH1cblx0X21lc3NhZ2VDb250ZW50VG9TdHJpbmcoY29udGVudCkge1xuXHRcdHN3aXRjaCAoY29udGVudC50eXBlKSB7XG5cdFx0XHRjYXNlIFwidGV4dFwiOlxuXHRcdFx0Y2FzZSBcInRleHRfZGVsdGFcIjpcblx0XHRcdFx0aWYgKFwidGV4dFwiIGluIGNvbnRlbnQpIHJldHVybiB0aGlzLl90ZXh0Q29udGVudFRvU3RyaW5nKGNvbnRlbnQpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJpbWFnZV91cmxcIjpcblx0XHRcdFx0aWYgKFwiaW1hZ2VfdXJsXCIgaW4gY29udGVudCkgcmV0dXJuIHRoaXMuX2ltYWdlVXJsQ29udGVudFRvU3RyaW5nKGNvbnRlbnQpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGNvZXJjZSBcIiR7Y29udGVudC50eXBlfVwiIG1lc3NhZ2UgcGFydCBpbnRvIGEgc3RyaW5nLmApO1xuXHRcdH1cblx0XHR0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgY29udGVudCB0eXBlOiAke2NvbnRlbnQudHlwZX1gKTtcblx0fVxuXHRfYmFzZU1lc3NhZ2VDb250ZW50VG9TdHJpbmcoY29udGVudCkge1xuXHRcdHJldHVybiBjb250ZW50LnJlZHVjZSgoYWNjLCBpdGVtKSA9PiBhY2MgKyB0aGlzLl9tZXNzYWdlQ29udGVudFRvU3RyaW5nKGl0ZW0pLCBcIlwiKTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBTdHJpbmdPdXRwdXRQYXJzZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0cmluZy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/output_parsers/string.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/output_parsers/structured.js":
/*!************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/structured.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsymmetricStructuredOutputParser: () => (/* binding */ AsymmetricStructuredOutputParser),\n/* harmony export */   JsonMarkdownStructuredOutputParser: () => (/* binding */ JsonMarkdownStructuredOutputParser),\n/* harmony export */   StructuredOutputParser: () => (/* binding */ StructuredOutputParser)\n/* harmony export */ });\n/* harmony import */ var _utils_types_zod_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/types/zod.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/types/zod.js\");\n/* harmony import */ var _utils_json_schema_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/json_schema.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/json_schema.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/base.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod/v3 */ \"(ssr)/./node_modules/zod/v3/index.js\");\n\n\n\n\n\n//#region src/output_parsers/structured.ts\nvar StructuredOutputParser = class extends _base_js__WEBPACK_IMPORTED_MODULE_2__.BaseOutputParser {\n\tstatic lc_name() {\n\t\treturn \"StructuredOutputParser\";\n\t}\n\tlc_namespace = [\n\t\t\"langchain\",\n\t\t\"output_parsers\",\n\t\t\"structured\"\n\t];\n\ttoJSON() {\n\t\treturn this.toJSONNotImplemented();\n\t}\n\tconstructor(schema) {\n\t\tsuper(schema);\n\t\tthis.schema = schema;\n\t}\n\t/**\n\t* Creates a new StructuredOutputParser from a Zod schema.\n\t* @param schema The Zod schema which the output should match\n\t* @returns A new instance of StructuredOutputParser.\n\t*/\n\tstatic fromZodSchema(schema) {\n\t\treturn new this(schema);\n\t}\n\t/**\n\t* Creates a new StructuredOutputParser from a set of names and\n\t* descriptions.\n\t* @param schemas An object where each key is a name and each value is a description\n\t* @returns A new instance of StructuredOutputParser.\n\t*/\n\tstatic fromNamesAndDescriptions(schemas) {\n\t\tconst zodSchema = zod_v3__WEBPACK_IMPORTED_MODULE_3__.z.object(Object.fromEntries(Object.entries(schemas).map(([name, description]) => [name, zod_v3__WEBPACK_IMPORTED_MODULE_3__.z.string().describe(description)])));\n\t\treturn new this(zodSchema);\n\t}\n\t/**\n\t* Returns a markdown code snippet with a JSON object formatted according\n\t* to the schema.\n\t* @param options Optional. The options for formatting the instructions\n\t* @returns A markdown code snippet with a JSON object formatted according to the schema.\n\t*/\n\tgetFormatInstructions() {\n\t\treturn `You must format your output as a JSON value that adheres to a given \"JSON Schema\" instance.\n\n\"JSON Schema\" is a declarative language that allows you to annotate and validate JSON documents.\n\nFor example, the example \"JSON Schema\" instance {{\"properties\": {{\"foo\": {{\"description\": \"a list of test words\", \"type\": \"array\", \"items\": {{\"type\": \"string\"}}}}}}, \"required\": [\"foo\"]}}\nwould match an object with one required property, \"foo\". The \"type\" property specifies \"foo\" must be an \"array\", and the \"description\" property semantically describes it as \"a list of test words\". The items within \"foo\" must be strings.\nThus, the object {{\"foo\": [\"bar\", \"baz\"]}} is a well-formatted instance of this example \"JSON Schema\". The object {{\"properties\": {{\"foo\": [\"bar\", \"baz\"]}}}} is not well-formatted.\n\nYour output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!\n\nHere is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:\n\\`\\`\\`json\n${JSON.stringify((0,_utils_json_schema_js__WEBPACK_IMPORTED_MODULE_1__.toJsonSchema)(this.schema))}\n\\`\\`\\`\n`;\n\t}\n\t/**\n\t* Parses the given text according to the schema.\n\t* @param text The text to parse\n\t* @returns The parsed output.\n\t*/\n\tasync parse(text) {\n\t\ttry {\n\t\t\tconst trimmedText = text.trim();\n\t\t\tconst json = trimmedText.match(/^```(?:json)?\\s*([\\s\\S]*?)```/)?.[1] || trimmedText.match(/```json\\s*([\\s\\S]*?)```/)?.[1] || trimmedText;\n\t\t\tconst escapedJson = json.replace(/\"([^\"\\\\]*(\\\\.[^\"\\\\]*)*)\"/g, (_match, capturedGroup) => {\n\t\t\t\tconst escapedInsideQuotes = capturedGroup.replace(/\\n/g, \"\\\\n\");\n\t\t\t\treturn `\"${escapedInsideQuotes}\"`;\n\t\t\t}).replace(/\\n/g, \"\");\n\t\t\treturn await (0,_utils_types_zod_js__WEBPACK_IMPORTED_MODULE_0__.interopParseAsync)(this.schema, JSON.parse(escapedJson));\n\t\t} catch (e) {\n\t\t\tthrow new _base_js__WEBPACK_IMPORTED_MODULE_2__.OutputParserException(`Failed to parse. Text: \"${text}\". Error: ${e}`, text);\n\t\t}\n\t}\n};\n/**\n* A specific type of `StructuredOutputParser` that parses JSON data\n* formatted as a markdown code snippet.\n*/\nvar JsonMarkdownStructuredOutputParser = class extends StructuredOutputParser {\n\tstatic lc_name() {\n\t\treturn \"JsonMarkdownStructuredOutputParser\";\n\t}\n\tgetFormatInstructions(options) {\n\t\tconst interpolationDepth = options?.interpolationDepth ?? 1;\n\t\tif (interpolationDepth < 1) throw new Error(\"f string interpolation depth must be at least 1\");\n\t\treturn `Return a markdown code snippet with a JSON object formatted to look like:\\n\\`\\`\\`json\\n${this._schemaToInstruction((0,_utils_json_schema_js__WEBPACK_IMPORTED_MODULE_1__.toJsonSchema)(this.schema)).replaceAll(\"{\", \"{\".repeat(interpolationDepth)).replaceAll(\"}\", \"}\".repeat(interpolationDepth))}\\n\\`\\`\\``;\n\t}\n\t_schemaToInstruction(schemaInput, indent = 2) {\n\t\tconst schema = schemaInput;\n\t\tif (\"type\" in schema) {\n\t\t\tlet nullable = false;\n\t\t\tlet type;\n\t\t\tif (Array.isArray(schema.type)) {\n\t\t\t\tconst nullIdx = schema.type.findIndex((type$1) => type$1 === \"null\");\n\t\t\t\tif (nullIdx !== -1) {\n\t\t\t\t\tnullable = true;\n\t\t\t\t\tschema.type.splice(nullIdx, 1);\n\t\t\t\t}\n\t\t\t\ttype = schema.type.join(\" | \");\n\t\t\t} else type = schema.type;\n\t\t\tif (schema.type === \"object\" && schema.properties) {\n\t\t\t\tconst description$1 = schema.description ? ` // ${schema.description}` : \"\";\n\t\t\t\tconst properties = Object.entries(schema.properties).map(([key, value]) => {\n\t\t\t\t\tconst isOptional = schema.required?.includes(key) ? \"\" : \" (optional)\";\n\t\t\t\t\treturn `${\" \".repeat(indent)}\"${key}\": ${this._schemaToInstruction(value, indent + 2)}${isOptional}`;\n\t\t\t\t}).join(\"\\n\");\n\t\t\t\treturn `{\\n${properties}\\n${\" \".repeat(indent - 2)}}${description$1}`;\n\t\t\t}\n\t\t\tif (schema.type === \"array\" && schema.items) {\n\t\t\t\tconst description$1 = schema.description ? ` // ${schema.description}` : \"\";\n\t\t\t\treturn `array[\\n${\" \".repeat(indent)}${this._schemaToInstruction(schema.items, indent + 2)}\\n${\" \".repeat(indent - 2)}] ${description$1}`;\n\t\t\t}\n\t\t\tconst isNullable = nullable ? \" (nullable)\" : \"\";\n\t\t\tconst description = schema.description ? ` // ${schema.description}` : \"\";\n\t\t\treturn `${type}${description}${isNullable}`;\n\t\t}\n\t\tif (\"anyOf\" in schema) return schema.anyOf.map((s) => this._schemaToInstruction(s, indent)).join(`\\n${\" \".repeat(indent - 2)}`);\n\t\tthrow new Error(\"unsupported schema type\");\n\t}\n\tstatic fromZodSchema(schema) {\n\t\treturn new this(schema);\n\t}\n\tstatic fromNamesAndDescriptions(schemas) {\n\t\tconst zodSchema = zod_v3__WEBPACK_IMPORTED_MODULE_3__.z.object(Object.fromEntries(Object.entries(schemas).map(([name, description]) => [name, zod_v3__WEBPACK_IMPORTED_MODULE_3__.z.string().describe(description)])));\n\t\treturn new this(zodSchema);\n\t}\n};\n/**\n* A type of `StructuredOutputParser` that handles asymmetric input and\n* output schemas.\n*/\nvar AsymmetricStructuredOutputParser = class extends _base_js__WEBPACK_IMPORTED_MODULE_2__.BaseOutputParser {\n\tstructuredInputParser;\n\tconstructor({ inputSchema }) {\n\t\tsuper(...arguments);\n\t\tthis.structuredInputParser = new JsonMarkdownStructuredOutputParser(inputSchema);\n\t}\n\tasync parse(text) {\n\t\tlet parsedInput;\n\t\ttry {\n\t\t\tparsedInput = await this.structuredInputParser.parse(text);\n\t\t} catch (e) {\n\t\t\tthrow new _base_js__WEBPACK_IMPORTED_MODULE_2__.OutputParserException(`Failed to parse. Text: \"${text}\". Error: ${e}`, text);\n\t\t}\n\t\treturn this.outputProcessor(parsedInput);\n\t}\n\tgetFormatInstructions() {\n\t\treturn this.structuredInputParser.getFormatInstructions();\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=structured.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvc3RydWN0dXJlZC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTBEO0FBQ0g7QUFDYTtBQUN6Qzs7QUFFM0I7QUFDQSwyQ0FBMkMsc0RBQWdCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw0Q0FBUSxnRkFBZ0YsNENBQVE7QUFDcEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsa0RBQWtELGdCQUFnQixTQUFTLG1FQUFtRSxzQkFBc0I7QUFDcEs7QUFDQSxtQkFBbUIsd0JBQXdCLHlFQUF5RSxnQkFBZ0IsMEJBQTBCOztBQUU5Sjs7QUFFQTtBQUNBO0FBQ0EsRUFBRSxlQUFlLG1FQUFZO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG9CQUFvQjtBQUNuQyxJQUFJO0FBQ0osZ0JBQWdCLHNFQUFpQjtBQUNqQyxJQUFJO0FBQ0osYUFBYSwyREFBcUIsNEJBQTRCLEtBQUssWUFBWSxFQUFFO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtR0FBbUcsMEJBQTBCLG1FQUFZLDRCQUE0QixLQUFLLDJDQUEyQyxLQUFLLDhCQUE4QjtBQUN4UDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLHNEQUFzRCxtQkFBbUI7QUFDekU7QUFDQTtBQUNBLGVBQWUsbUJBQW1CLEdBQUcsSUFBSSxLQUFLLDZDQUE2QyxFQUFFLFdBQVc7QUFDeEcsS0FBSztBQUNMLGFBQWEsSUFBSSxXQUFXLElBQUksd0JBQXdCLEVBQUUsY0FBYztBQUN4RTtBQUNBO0FBQ0Esc0RBQXNELG1CQUFtQjtBQUN6RSxzQkFBc0IsbUJBQW1CLEVBQUUsb0RBQW9ELElBQUksdUJBQXVCLElBQUksY0FBYztBQUM1STtBQUNBO0FBQ0EsbURBQW1ELG1CQUFtQjtBQUN0RSxhQUFhLEtBQUssRUFBRSxZQUFZLEVBQUUsV0FBVztBQUM3QztBQUNBLHdHQUF3Ryx1QkFBdUI7QUFDL0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDRDQUFRLGdGQUFnRiw0Q0FBUTtBQUNwSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxzREFBZ0I7QUFDckU7QUFDQSxlQUFlLGFBQWE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osYUFBYSwyREFBcUIsNEJBQTRCLEtBQUssWUFBWSxFQUFFO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3dHO0FBQ3hHIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvc3RydWN0dXJlZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpbnRlcm9wUGFyc2VBc3luYyB9IGZyb20gXCIuLi91dGlscy90eXBlcy96b2QuanNcIjtcbmltcG9ydCB7IHRvSnNvblNjaGVtYSB9IGZyb20gXCIuLi91dGlscy9qc29uX3NjaGVtYS5qc1wiO1xuaW1wb3J0IHsgQmFzZU91dHB1dFBhcnNlciwgT3V0cHV0UGFyc2VyRXhjZXB0aW9uIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2QvdjNcIjtcblxuLy8jcmVnaW9uIHNyYy9vdXRwdXRfcGFyc2Vycy9zdHJ1Y3R1cmVkLnRzXG52YXIgU3RydWN0dXJlZE91dHB1dFBhcnNlciA9IGNsYXNzIGV4dGVuZHMgQmFzZU91dHB1dFBhcnNlciB7XG5cdHN0YXRpYyBsY19uYW1lKCkge1xuXHRcdHJldHVybiBcIlN0cnVjdHVyZWRPdXRwdXRQYXJzZXJcIjtcblx0fVxuXHRsY19uYW1lc3BhY2UgPSBbXG5cdFx0XCJsYW5nY2hhaW5cIixcblx0XHRcIm91dHB1dF9wYXJzZXJzXCIsXG5cdFx0XCJzdHJ1Y3R1cmVkXCJcblx0XTtcblx0dG9KU09OKCkge1xuXHRcdHJldHVybiB0aGlzLnRvSlNPTk5vdEltcGxlbWVudGVkKCk7XG5cdH1cblx0Y29uc3RydWN0b3Ioc2NoZW1hKSB7XG5cdFx0c3VwZXIoc2NoZW1hKTtcblx0XHR0aGlzLnNjaGVtYSA9IHNjaGVtYTtcblx0fVxuXHQvKipcblx0KiBDcmVhdGVzIGEgbmV3IFN0cnVjdHVyZWRPdXRwdXRQYXJzZXIgZnJvbSBhIFpvZCBzY2hlbWEuXG5cdCogQHBhcmFtIHNjaGVtYSBUaGUgWm9kIHNjaGVtYSB3aGljaCB0aGUgb3V0cHV0IHNob3VsZCBtYXRjaFxuXHQqIEByZXR1cm5zIEEgbmV3IGluc3RhbmNlIG9mIFN0cnVjdHVyZWRPdXRwdXRQYXJzZXIuXG5cdCovXG5cdHN0YXRpYyBmcm9tWm9kU2NoZW1hKHNjaGVtYSkge1xuXHRcdHJldHVybiBuZXcgdGhpcyhzY2hlbWEpO1xuXHR9XG5cdC8qKlxuXHQqIENyZWF0ZXMgYSBuZXcgU3RydWN0dXJlZE91dHB1dFBhcnNlciBmcm9tIGEgc2V0IG9mIG5hbWVzIGFuZFxuXHQqIGRlc2NyaXB0aW9ucy5cblx0KiBAcGFyYW0gc2NoZW1hcyBBbiBvYmplY3Qgd2hlcmUgZWFjaCBrZXkgaXMgYSBuYW1lIGFuZCBlYWNoIHZhbHVlIGlzIGEgZGVzY3JpcHRpb25cblx0KiBAcmV0dXJucyBBIG5ldyBpbnN0YW5jZSBvZiBTdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyLlxuXHQqL1xuXHRzdGF0aWMgZnJvbU5hbWVzQW5kRGVzY3JpcHRpb25zKHNjaGVtYXMpIHtcblx0XHRjb25zdCB6b2RTY2hlbWEgPSB6Lm9iamVjdChPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoc2NoZW1hcykubWFwKChbbmFtZSwgZGVzY3JpcHRpb25dKSA9PiBbbmFtZSwgei5zdHJpbmcoKS5kZXNjcmliZShkZXNjcmlwdGlvbildKSkpO1xuXHRcdHJldHVybiBuZXcgdGhpcyh6b2RTY2hlbWEpO1xuXHR9XG5cdC8qKlxuXHQqIFJldHVybnMgYSBtYXJrZG93biBjb2RlIHNuaXBwZXQgd2l0aCBhIEpTT04gb2JqZWN0IGZvcm1hdHRlZCBhY2NvcmRpbmdcblx0KiB0byB0aGUgc2NoZW1hLlxuXHQqIEBwYXJhbSBvcHRpb25zIE9wdGlvbmFsLiBUaGUgb3B0aW9ucyBmb3IgZm9ybWF0dGluZyB0aGUgaW5zdHJ1Y3Rpb25zXG5cdCogQHJldHVybnMgQSBtYXJrZG93biBjb2RlIHNuaXBwZXQgd2l0aCBhIEpTT04gb2JqZWN0IGZvcm1hdHRlZCBhY2NvcmRpbmcgdG8gdGhlIHNjaGVtYS5cblx0Ki9cblx0Z2V0Rm9ybWF0SW5zdHJ1Y3Rpb25zKCkge1xuXHRcdHJldHVybiBgWW91IG11c3QgZm9ybWF0IHlvdXIgb3V0cHV0IGFzIGEgSlNPTiB2YWx1ZSB0aGF0IGFkaGVyZXMgdG8gYSBnaXZlbiBcIkpTT04gU2NoZW1hXCIgaW5zdGFuY2UuXG5cblwiSlNPTiBTY2hlbWFcIiBpcyBhIGRlY2xhcmF0aXZlIGxhbmd1YWdlIHRoYXQgYWxsb3dzIHlvdSB0byBhbm5vdGF0ZSBhbmQgdmFsaWRhdGUgSlNPTiBkb2N1bWVudHMuXG5cbkZvciBleGFtcGxlLCB0aGUgZXhhbXBsZSBcIkpTT04gU2NoZW1hXCIgaW5zdGFuY2Uge3tcInByb3BlcnRpZXNcIjoge3tcImZvb1wiOiB7e1wiZGVzY3JpcHRpb25cIjogXCJhIGxpc3Qgb2YgdGVzdCB3b3Jkc1wiLCBcInR5cGVcIjogXCJhcnJheVwiLCBcIml0ZW1zXCI6IHt7XCJ0eXBlXCI6IFwic3RyaW5nXCJ9fX19fX0sIFwicmVxdWlyZWRcIjogW1wiZm9vXCJdfX1cbndvdWxkIG1hdGNoIGFuIG9iamVjdCB3aXRoIG9uZSByZXF1aXJlZCBwcm9wZXJ0eSwgXCJmb29cIi4gVGhlIFwidHlwZVwiIHByb3BlcnR5IHNwZWNpZmllcyBcImZvb1wiIG11c3QgYmUgYW4gXCJhcnJheVwiLCBhbmQgdGhlIFwiZGVzY3JpcHRpb25cIiBwcm9wZXJ0eSBzZW1hbnRpY2FsbHkgZGVzY3JpYmVzIGl0IGFzIFwiYSBsaXN0IG9mIHRlc3Qgd29yZHNcIi4gVGhlIGl0ZW1zIHdpdGhpbiBcImZvb1wiIG11c3QgYmUgc3RyaW5ncy5cblRodXMsIHRoZSBvYmplY3Qge3tcImZvb1wiOiBbXCJiYXJcIiwgXCJiYXpcIl19fSBpcyBhIHdlbGwtZm9ybWF0dGVkIGluc3RhbmNlIG9mIHRoaXMgZXhhbXBsZSBcIkpTT04gU2NoZW1hXCIuIFRoZSBvYmplY3Qge3tcInByb3BlcnRpZXNcIjoge3tcImZvb1wiOiBbXCJiYXJcIiwgXCJiYXpcIl19fX19IGlzIG5vdCB3ZWxsLWZvcm1hdHRlZC5cblxuWW91ciBvdXRwdXQgd2lsbCBiZSBwYXJzZWQgYW5kIHR5cGUtY2hlY2tlZCBhY2NvcmRpbmcgdG8gdGhlIHByb3ZpZGVkIHNjaGVtYSBpbnN0YW5jZSwgc28gbWFrZSBzdXJlIGFsbCBmaWVsZHMgaW4geW91ciBvdXRwdXQgbWF0Y2ggdGhlIHNjaGVtYSBleGFjdGx5IGFuZCB0aGVyZSBhcmUgbm8gdHJhaWxpbmcgY29tbWFzIVxuXG5IZXJlIGlzIHRoZSBKU09OIFNjaGVtYSBpbnN0YW5jZSB5b3VyIG91dHB1dCBtdXN0IGFkaGVyZSB0by4gSW5jbHVkZSB0aGUgZW5jbG9zaW5nIG1hcmtkb3duIGNvZGVibG9jazpcblxcYFxcYFxcYGpzb25cbiR7SlNPTi5zdHJpbmdpZnkodG9Kc29uU2NoZW1hKHRoaXMuc2NoZW1hKSl9XG5cXGBcXGBcXGBcbmA7XG5cdH1cblx0LyoqXG5cdCogUGFyc2VzIHRoZSBnaXZlbiB0ZXh0IGFjY29yZGluZyB0byB0aGUgc2NoZW1hLlxuXHQqIEBwYXJhbSB0ZXh0IFRoZSB0ZXh0IHRvIHBhcnNlXG5cdCogQHJldHVybnMgVGhlIHBhcnNlZCBvdXRwdXQuXG5cdCovXG5cdGFzeW5jIHBhcnNlKHRleHQpIHtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgdHJpbW1lZFRleHQgPSB0ZXh0LnRyaW0oKTtcblx0XHRcdGNvbnN0IGpzb24gPSB0cmltbWVkVGV4dC5tYXRjaCgvXmBgYCg/Ompzb24pP1xccyooW1xcc1xcU10qPylgYGAvKT8uWzFdIHx8IHRyaW1tZWRUZXh0Lm1hdGNoKC9gYGBqc29uXFxzKihbXFxzXFxTXSo/KWBgYC8pPy5bMV0gfHwgdHJpbW1lZFRleHQ7XG5cdFx0XHRjb25zdCBlc2NhcGVkSnNvbiA9IGpzb24ucmVwbGFjZSgvXCIoW15cIlxcXFxdKihcXFxcLlteXCJcXFxcXSopKilcIi9nLCAoX21hdGNoLCBjYXB0dXJlZEdyb3VwKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGVzY2FwZWRJbnNpZGVRdW90ZXMgPSBjYXB0dXJlZEdyb3VwLnJlcGxhY2UoL1xcbi9nLCBcIlxcXFxuXCIpO1xuXHRcdFx0XHRyZXR1cm4gYFwiJHtlc2NhcGVkSW5zaWRlUXVvdGVzfVwiYDtcblx0XHRcdH0pLnJlcGxhY2UoL1xcbi9nLCBcIlwiKTtcblx0XHRcdHJldHVybiBhd2FpdCBpbnRlcm9wUGFyc2VBc3luYyh0aGlzLnNjaGVtYSwgSlNPTi5wYXJzZShlc2NhcGVkSnNvbikpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdHRocm93IG5ldyBPdXRwdXRQYXJzZXJFeGNlcHRpb24oYEZhaWxlZCB0byBwYXJzZS4gVGV4dDogXCIke3RleHR9XCIuIEVycm9yOiAke2V9YCwgdGV4dCk7XG5cdFx0fVxuXHR9XG59O1xuLyoqXG4qIEEgc3BlY2lmaWMgdHlwZSBvZiBgU3RydWN0dXJlZE91dHB1dFBhcnNlcmAgdGhhdCBwYXJzZXMgSlNPTiBkYXRhXG4qIGZvcm1hdHRlZCBhcyBhIG1hcmtkb3duIGNvZGUgc25pcHBldC5cbiovXG52YXIgSnNvbk1hcmtkb3duU3RydWN0dXJlZE91dHB1dFBhcnNlciA9IGNsYXNzIGV4dGVuZHMgU3RydWN0dXJlZE91dHB1dFBhcnNlciB7XG5cdHN0YXRpYyBsY19uYW1lKCkge1xuXHRcdHJldHVybiBcIkpzb25NYXJrZG93blN0cnVjdHVyZWRPdXRwdXRQYXJzZXJcIjtcblx0fVxuXHRnZXRGb3JtYXRJbnN0cnVjdGlvbnMob3B0aW9ucykge1xuXHRcdGNvbnN0IGludGVycG9sYXRpb25EZXB0aCA9IG9wdGlvbnM/LmludGVycG9sYXRpb25EZXB0aCA/PyAxO1xuXHRcdGlmIChpbnRlcnBvbGF0aW9uRGVwdGggPCAxKSB0aHJvdyBuZXcgRXJyb3IoXCJmIHN0cmluZyBpbnRlcnBvbGF0aW9uIGRlcHRoIG11c3QgYmUgYXQgbGVhc3QgMVwiKTtcblx0XHRyZXR1cm4gYFJldHVybiBhIG1hcmtkb3duIGNvZGUgc25pcHBldCB3aXRoIGEgSlNPTiBvYmplY3QgZm9ybWF0dGVkIHRvIGxvb2sgbGlrZTpcXG5cXGBcXGBcXGBqc29uXFxuJHt0aGlzLl9zY2hlbWFUb0luc3RydWN0aW9uKHRvSnNvblNjaGVtYSh0aGlzLnNjaGVtYSkpLnJlcGxhY2VBbGwoXCJ7XCIsIFwie1wiLnJlcGVhdChpbnRlcnBvbGF0aW9uRGVwdGgpKS5yZXBsYWNlQWxsKFwifVwiLCBcIn1cIi5yZXBlYXQoaW50ZXJwb2xhdGlvbkRlcHRoKSl9XFxuXFxgXFxgXFxgYDtcblx0fVxuXHRfc2NoZW1hVG9JbnN0cnVjdGlvbihzY2hlbWFJbnB1dCwgaW5kZW50ID0gMikge1xuXHRcdGNvbnN0IHNjaGVtYSA9IHNjaGVtYUlucHV0O1xuXHRcdGlmIChcInR5cGVcIiBpbiBzY2hlbWEpIHtcblx0XHRcdGxldCBudWxsYWJsZSA9IGZhbHNlO1xuXHRcdFx0bGV0IHR5cGU7XG5cdFx0XHRpZiAoQXJyYXkuaXNBcnJheShzY2hlbWEudHlwZSkpIHtcblx0XHRcdFx0Y29uc3QgbnVsbElkeCA9IHNjaGVtYS50eXBlLmZpbmRJbmRleCgodHlwZSQxKSA9PiB0eXBlJDEgPT09IFwibnVsbFwiKTtcblx0XHRcdFx0aWYgKG51bGxJZHggIT09IC0xKSB7XG5cdFx0XHRcdFx0bnVsbGFibGUgPSB0cnVlO1xuXHRcdFx0XHRcdHNjaGVtYS50eXBlLnNwbGljZShudWxsSWR4LCAxKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0eXBlID0gc2NoZW1hLnR5cGUuam9pbihcIiB8IFwiKTtcblx0XHRcdH0gZWxzZSB0eXBlID0gc2NoZW1hLnR5cGU7XG5cdFx0XHRpZiAoc2NoZW1hLnR5cGUgPT09IFwib2JqZWN0XCIgJiYgc2NoZW1hLnByb3BlcnRpZXMpIHtcblx0XHRcdFx0Y29uc3QgZGVzY3JpcHRpb24kMSA9IHNjaGVtYS5kZXNjcmlwdGlvbiA/IGAgLy8gJHtzY2hlbWEuZGVzY3JpcHRpb259YCA6IFwiXCI7XG5cdFx0XHRcdGNvbnN0IHByb3BlcnRpZXMgPSBPYmplY3QuZW50cmllcyhzY2hlbWEucHJvcGVydGllcykubWFwKChba2V5LCB2YWx1ZV0pID0+IHtcblx0XHRcdFx0XHRjb25zdCBpc09wdGlvbmFsID0gc2NoZW1hLnJlcXVpcmVkPy5pbmNsdWRlcyhrZXkpID8gXCJcIiA6IFwiIChvcHRpb25hbClcIjtcblx0XHRcdFx0XHRyZXR1cm4gYCR7XCIgXCIucmVwZWF0KGluZGVudCl9XCIke2tleX1cIjogJHt0aGlzLl9zY2hlbWFUb0luc3RydWN0aW9uKHZhbHVlLCBpbmRlbnQgKyAyKX0ke2lzT3B0aW9uYWx9YDtcblx0XHRcdFx0fSkuam9pbihcIlxcblwiKTtcblx0XHRcdFx0cmV0dXJuIGB7XFxuJHtwcm9wZXJ0aWVzfVxcbiR7XCIgXCIucmVwZWF0KGluZGVudCAtIDIpfX0ke2Rlc2NyaXB0aW9uJDF9YDtcblx0XHRcdH1cblx0XHRcdGlmIChzY2hlbWEudHlwZSA9PT0gXCJhcnJheVwiICYmIHNjaGVtYS5pdGVtcykge1xuXHRcdFx0XHRjb25zdCBkZXNjcmlwdGlvbiQxID0gc2NoZW1hLmRlc2NyaXB0aW9uID8gYCAvLyAke3NjaGVtYS5kZXNjcmlwdGlvbn1gIDogXCJcIjtcblx0XHRcdFx0cmV0dXJuIGBhcnJheVtcXG4ke1wiIFwiLnJlcGVhdChpbmRlbnQpfSR7dGhpcy5fc2NoZW1hVG9JbnN0cnVjdGlvbihzY2hlbWEuaXRlbXMsIGluZGVudCArIDIpfVxcbiR7XCIgXCIucmVwZWF0KGluZGVudCAtIDIpfV0gJHtkZXNjcmlwdGlvbiQxfWA7XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBpc051bGxhYmxlID0gbnVsbGFibGUgPyBcIiAobnVsbGFibGUpXCIgOiBcIlwiO1xuXHRcdFx0Y29uc3QgZGVzY3JpcHRpb24gPSBzY2hlbWEuZGVzY3JpcHRpb24gPyBgIC8vICR7c2NoZW1hLmRlc2NyaXB0aW9ufWAgOiBcIlwiO1xuXHRcdFx0cmV0dXJuIGAke3R5cGV9JHtkZXNjcmlwdGlvbn0ke2lzTnVsbGFibGV9YDtcblx0XHR9XG5cdFx0aWYgKFwiYW55T2ZcIiBpbiBzY2hlbWEpIHJldHVybiBzY2hlbWEuYW55T2YubWFwKChzKSA9PiB0aGlzLl9zY2hlbWFUb0luc3RydWN0aW9uKHMsIGluZGVudCkpLmpvaW4oYFxcbiR7XCIgXCIucmVwZWF0KGluZGVudCAtIDIpfWApO1xuXHRcdHRocm93IG5ldyBFcnJvcihcInVuc3VwcG9ydGVkIHNjaGVtYSB0eXBlXCIpO1xuXHR9XG5cdHN0YXRpYyBmcm9tWm9kU2NoZW1hKHNjaGVtYSkge1xuXHRcdHJldHVybiBuZXcgdGhpcyhzY2hlbWEpO1xuXHR9XG5cdHN0YXRpYyBmcm9tTmFtZXNBbmREZXNjcmlwdGlvbnMoc2NoZW1hcykge1xuXHRcdGNvbnN0IHpvZFNjaGVtYSA9IHoub2JqZWN0KE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhzY2hlbWFzKS5tYXAoKFtuYW1lLCBkZXNjcmlwdGlvbl0pID0+IFtuYW1lLCB6LnN0cmluZygpLmRlc2NyaWJlKGRlc2NyaXB0aW9uKV0pKSk7XG5cdFx0cmV0dXJuIG5ldyB0aGlzKHpvZFNjaGVtYSk7XG5cdH1cbn07XG4vKipcbiogQSB0eXBlIG9mIGBTdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyYCB0aGF0IGhhbmRsZXMgYXN5bW1ldHJpYyBpbnB1dCBhbmRcbiogb3V0cHV0IHNjaGVtYXMuXG4qL1xudmFyIEFzeW1tZXRyaWNTdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyID0gY2xhc3MgZXh0ZW5kcyBCYXNlT3V0cHV0UGFyc2VyIHtcblx0c3RydWN0dXJlZElucHV0UGFyc2VyO1xuXHRjb25zdHJ1Y3Rvcih7IGlucHV0U2NoZW1hIH0pIHtcblx0XHRzdXBlciguLi5hcmd1bWVudHMpO1xuXHRcdHRoaXMuc3RydWN0dXJlZElucHV0UGFyc2VyID0gbmV3IEpzb25NYXJrZG93blN0cnVjdHVyZWRPdXRwdXRQYXJzZXIoaW5wdXRTY2hlbWEpO1xuXHR9XG5cdGFzeW5jIHBhcnNlKHRleHQpIHtcblx0XHRsZXQgcGFyc2VkSW5wdXQ7XG5cdFx0dHJ5IHtcblx0XHRcdHBhcnNlZElucHV0ID0gYXdhaXQgdGhpcy5zdHJ1Y3R1cmVkSW5wdXRQYXJzZXIucGFyc2UodGV4dCk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0dGhyb3cgbmV3IE91dHB1dFBhcnNlckV4Y2VwdGlvbihgRmFpbGVkIHRvIHBhcnNlLiBUZXh0OiBcIiR7dGV4dH1cIi4gRXJyb3I6ICR7ZX1gLCB0ZXh0KTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMub3V0cHV0UHJvY2Vzc29yKHBhcnNlZElucHV0KTtcblx0fVxuXHRnZXRGb3JtYXRJbnN0cnVjdGlvbnMoKSB7XG5cdFx0cmV0dXJuIHRoaXMuc3RydWN0dXJlZElucHV0UGFyc2VyLmdldEZvcm1hdEluc3RydWN0aW9ucygpO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEFzeW1tZXRyaWNTdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyLCBKc29uTWFya2Rvd25TdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyLCBTdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdHJ1Y3R1cmVkLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/output_parsers/structured.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/output_parsers/transform.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/transform.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCumulativeTransformOutputParser: () => (/* binding */ BaseCumulativeTransformOutputParser),\n/* harmony export */   BaseTransformOutputParser: () => (/* binding */ BaseTransformOutputParser)\n/* harmony export */ });\n/* harmony import */ var _messages_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../messages/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _messages_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../messages/utils.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/utils.js\");\n/* harmony import */ var _outputs_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../outputs.js */ \"(ssr)/./node_modules/@langchain/core/dist/outputs.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/base.js\");\n/* harmony import */ var _cfworker_json_schema__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @cfworker/json-schema */ \"(ssr)/./node_modules/@cfworker/json-schema/dist/esm/index.js\");\n\n\n\n\n\n\n//#region src/output_parsers/transform.ts\n/**\n* Class to parse the output of an LLM call that also allows streaming inputs.\n*/\nvar BaseTransformOutputParser = class extends _base_js__WEBPACK_IMPORTED_MODULE_3__.BaseOutputParser {\n\tasync *_transform(inputGenerator) {\n\t\tfor await (const chunk of inputGenerator) if (typeof chunk === \"string\") yield this.parseResult([{ text: chunk }]);\n\t\telse yield this.parseResult([{\n\t\t\tmessage: chunk,\n\t\t\ttext: this._baseMessageToString(chunk)\n\t\t}]);\n\t}\n\t/**\n\t* Transforms an asynchronous generator of input into an asynchronous\n\t* generator of parsed output.\n\t* @param inputGenerator An asynchronous generator of input.\n\t* @param options A configuration object.\n\t* @returns An asynchronous generator of parsed output.\n\t*/\n\tasync *transform(inputGenerator, options) {\n\t\tyield* this._transformStreamWithConfig(inputGenerator, this._transform.bind(this), {\n\t\t\t...options,\n\t\t\trunType: \"parser\"\n\t\t});\n\t}\n};\n/**\n* A base class for output parsers that can handle streaming input. It\n* extends the `BaseTransformOutputParser` class and provides a method for\n* converting parsed outputs into a diff format.\n*/\nvar BaseCumulativeTransformOutputParser = class extends BaseTransformOutputParser {\n\tdiff = false;\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.diff = fields?.diff ?? this.diff;\n\t}\n\tasync *_transform(inputGenerator) {\n\t\tlet prevParsed;\n\t\tlet accGen;\n\t\tfor await (const chunk of inputGenerator) {\n\t\t\tif (typeof chunk !== \"string\" && typeof chunk.content !== \"string\") throw new Error(\"Cannot handle non-string output.\");\n\t\t\tlet chunkGen;\n\t\t\tif ((0,_messages_base_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessageChunk)(chunk)) {\n\t\t\t\tif (typeof chunk.content !== \"string\") throw new Error(\"Cannot handle non-string message output.\");\n\t\t\t\tchunkGen = new _outputs_js__WEBPACK_IMPORTED_MODULE_2__.ChatGenerationChunk({\n\t\t\t\t\tmessage: chunk,\n\t\t\t\t\ttext: chunk.content\n\t\t\t\t});\n\t\t\t} else if ((0,_messages_base_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(chunk)) {\n\t\t\t\tif (typeof chunk.content !== \"string\") throw new Error(\"Cannot handle non-string message output.\");\n\t\t\t\tchunkGen = new _outputs_js__WEBPACK_IMPORTED_MODULE_2__.ChatGenerationChunk({\n\t\t\t\t\tmessage: (0,_messages_utils_js__WEBPACK_IMPORTED_MODULE_1__.convertToChunk)(chunk),\n\t\t\t\t\ttext: chunk.content\n\t\t\t\t});\n\t\t\t} else chunkGen = new _outputs_js__WEBPACK_IMPORTED_MODULE_2__.GenerationChunk({ text: chunk });\n\t\t\tif (accGen === void 0) accGen = chunkGen;\n\t\t\telse accGen = accGen.concat(chunkGen);\n\t\t\tconst parsed = await this.parsePartialResult([accGen]);\n\t\t\tif (parsed !== void 0 && parsed !== null && !(0,_cfworker_json_schema__WEBPACK_IMPORTED_MODULE_4__.deepCompareStrict)(parsed, prevParsed)) {\n\t\t\t\tif (this.diff) yield this._diff(prevParsed, parsed);\n\t\t\t\telse yield parsed;\n\t\t\t\tprevParsed = parsed;\n\t\t\t}\n\t\t}\n\t}\n\tgetFormatInstructions() {\n\t\treturn \"\";\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=transform.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvdHJhbnNmb3JtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBd0U7QUFDbEI7QUFDZTtBQUN4QjtBQUNhOztBQUUxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxzREFBZ0I7QUFDOUQ7QUFDQSxxR0FBcUcsYUFBYTtBQUNsSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxxRUFBa0I7QUFDekI7QUFDQSxtQkFBbUIsNERBQW1CO0FBQ3RDO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsS0FBSyxTQUFTLGdFQUFhO0FBQzNCO0FBQ0EsbUJBQW1CLDREQUFtQjtBQUN0QyxjQUFjLGtFQUFjO0FBQzVCO0FBQ0EsS0FBSztBQUNMLEtBQUssb0JBQW9CLHdEQUFlLEdBQUcsYUFBYTtBQUN4RDtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Qsd0VBQWlCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzBFO0FBQzFFIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvdHJhbnNmb3JtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzQmFzZU1lc3NhZ2UsIGlzQmFzZU1lc3NhZ2VDaHVuayB9IGZyb20gXCIuLi9tZXNzYWdlcy9iYXNlLmpzXCI7XG5pbXBvcnQgeyBjb252ZXJ0VG9DaHVuayB9IGZyb20gXCIuLi9tZXNzYWdlcy91dGlscy5qc1wiO1xuaW1wb3J0IHsgQ2hhdEdlbmVyYXRpb25DaHVuaywgR2VuZXJhdGlvbkNodW5rIH0gZnJvbSBcIi4uL291dHB1dHMuanNcIjtcbmltcG9ydCB7IEJhc2VPdXRwdXRQYXJzZXIgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBkZWVwQ29tcGFyZVN0cmljdCB9IGZyb20gXCJAY2Z3b3JrZXIvanNvbi1zY2hlbWFcIjtcblxuLy8jcmVnaW9uIHNyYy9vdXRwdXRfcGFyc2Vycy90cmFuc2Zvcm0udHNcbi8qKlxuKiBDbGFzcyB0byBwYXJzZSB0aGUgb3V0cHV0IG9mIGFuIExMTSBjYWxsIHRoYXQgYWxzbyBhbGxvd3Mgc3RyZWFtaW5nIGlucHV0cy5cbiovXG52YXIgQmFzZVRyYW5zZm9ybU91dHB1dFBhcnNlciA9IGNsYXNzIGV4dGVuZHMgQmFzZU91dHB1dFBhcnNlciB7XG5cdGFzeW5jICpfdHJhbnNmb3JtKGlucHV0R2VuZXJhdG9yKSB7XG5cdFx0Zm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBpbnB1dEdlbmVyYXRvcikgaWYgKHR5cGVvZiBjaHVuayA9PT0gXCJzdHJpbmdcIikgeWllbGQgdGhpcy5wYXJzZVJlc3VsdChbeyB0ZXh0OiBjaHVuayB9XSk7XG5cdFx0ZWxzZSB5aWVsZCB0aGlzLnBhcnNlUmVzdWx0KFt7XG5cdFx0XHRtZXNzYWdlOiBjaHVuayxcblx0XHRcdHRleHQ6IHRoaXMuX2Jhc2VNZXNzYWdlVG9TdHJpbmcoY2h1bmspXG5cdFx0fV0pO1xuXHR9XG5cdC8qKlxuXHQqIFRyYW5zZm9ybXMgYW4gYXN5bmNocm9ub3VzIGdlbmVyYXRvciBvZiBpbnB1dCBpbnRvIGFuIGFzeW5jaHJvbm91c1xuXHQqIGdlbmVyYXRvciBvZiBwYXJzZWQgb3V0cHV0LlxuXHQqIEBwYXJhbSBpbnB1dEdlbmVyYXRvciBBbiBhc3luY2hyb25vdXMgZ2VuZXJhdG9yIG9mIGlucHV0LlxuXHQqIEBwYXJhbSBvcHRpb25zIEEgY29uZmlndXJhdGlvbiBvYmplY3QuXG5cdCogQHJldHVybnMgQW4gYXN5bmNocm9ub3VzIGdlbmVyYXRvciBvZiBwYXJzZWQgb3V0cHV0LlxuXHQqL1xuXHRhc3luYyAqdHJhbnNmb3JtKGlucHV0R2VuZXJhdG9yLCBvcHRpb25zKSB7XG5cdFx0eWllbGQqIHRoaXMuX3RyYW5zZm9ybVN0cmVhbVdpdGhDb25maWcoaW5wdXRHZW5lcmF0b3IsIHRoaXMuX3RyYW5zZm9ybS5iaW5kKHRoaXMpLCB7XG5cdFx0XHQuLi5vcHRpb25zLFxuXHRcdFx0cnVuVHlwZTogXCJwYXJzZXJcIlxuXHRcdH0pO1xuXHR9XG59O1xuLyoqXG4qIEEgYmFzZSBjbGFzcyBmb3Igb3V0cHV0IHBhcnNlcnMgdGhhdCBjYW4gaGFuZGxlIHN0cmVhbWluZyBpbnB1dC4gSXRcbiogZXh0ZW5kcyB0aGUgYEJhc2VUcmFuc2Zvcm1PdXRwdXRQYXJzZXJgIGNsYXNzIGFuZCBwcm92aWRlcyBhIG1ldGhvZCBmb3JcbiogY29udmVydGluZyBwYXJzZWQgb3V0cHV0cyBpbnRvIGEgZGlmZiBmb3JtYXQuXG4qL1xudmFyIEJhc2VDdW11bGF0aXZlVHJhbnNmb3JtT3V0cHV0UGFyc2VyID0gY2xhc3MgZXh0ZW5kcyBCYXNlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIHtcblx0ZGlmZiA9IGZhbHNlO1xuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHRzdXBlcihmaWVsZHMpO1xuXHRcdHRoaXMuZGlmZiA9IGZpZWxkcz8uZGlmZiA/PyB0aGlzLmRpZmY7XG5cdH1cblx0YXN5bmMgKl90cmFuc2Zvcm0oaW5wdXRHZW5lcmF0b3IpIHtcblx0XHRsZXQgcHJldlBhcnNlZDtcblx0XHRsZXQgYWNjR2VuO1xuXHRcdGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgaW5wdXRHZW5lcmF0b3IpIHtcblx0XHRcdGlmICh0eXBlb2YgY2h1bmsgIT09IFwic3RyaW5nXCIgJiYgdHlwZW9mIGNodW5rLmNvbnRlbnQgIT09IFwic3RyaW5nXCIpIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBoYW5kbGUgbm9uLXN0cmluZyBvdXRwdXQuXCIpO1xuXHRcdFx0bGV0IGNodW5rR2VuO1xuXHRcdFx0aWYgKGlzQmFzZU1lc3NhZ2VDaHVuayhjaHVuaykpIHtcblx0XHRcdFx0aWYgKHR5cGVvZiBjaHVuay5jb250ZW50ICE9PSBcInN0cmluZ1wiKSB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgaGFuZGxlIG5vbi1zdHJpbmcgbWVzc2FnZSBvdXRwdXQuXCIpO1xuXHRcdFx0XHRjaHVua0dlbiA9IG5ldyBDaGF0R2VuZXJhdGlvbkNodW5rKHtcblx0XHRcdFx0XHRtZXNzYWdlOiBjaHVuayxcblx0XHRcdFx0XHR0ZXh0OiBjaHVuay5jb250ZW50XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIGlmIChpc0Jhc2VNZXNzYWdlKGNodW5rKSkge1xuXHRcdFx0XHRpZiAodHlwZW9mIGNodW5rLmNvbnRlbnQgIT09IFwic3RyaW5nXCIpIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBoYW5kbGUgbm9uLXN0cmluZyBtZXNzYWdlIG91dHB1dC5cIik7XG5cdFx0XHRcdGNodW5rR2VuID0gbmV3IENoYXRHZW5lcmF0aW9uQ2h1bmsoe1xuXHRcdFx0XHRcdG1lc3NhZ2U6IGNvbnZlcnRUb0NodW5rKGNodW5rKSxcblx0XHRcdFx0XHR0ZXh0OiBjaHVuay5jb250ZW50XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIGNodW5rR2VuID0gbmV3IEdlbmVyYXRpb25DaHVuayh7IHRleHQ6IGNodW5rIH0pO1xuXHRcdFx0aWYgKGFjY0dlbiA9PT0gdm9pZCAwKSBhY2NHZW4gPSBjaHVua0dlbjtcblx0XHRcdGVsc2UgYWNjR2VuID0gYWNjR2VuLmNvbmNhdChjaHVua0dlbik7XG5cdFx0XHRjb25zdCBwYXJzZWQgPSBhd2FpdCB0aGlzLnBhcnNlUGFydGlhbFJlc3VsdChbYWNjR2VuXSk7XG5cdFx0XHRpZiAocGFyc2VkICE9PSB2b2lkIDAgJiYgcGFyc2VkICE9PSBudWxsICYmICFkZWVwQ29tcGFyZVN0cmljdChwYXJzZWQsIHByZXZQYXJzZWQpKSB7XG5cdFx0XHRcdGlmICh0aGlzLmRpZmYpIHlpZWxkIHRoaXMuX2RpZmYocHJldlBhcnNlZCwgcGFyc2VkKTtcblx0XHRcdFx0ZWxzZSB5aWVsZCBwYXJzZWQ7XG5cdFx0XHRcdHByZXZQYXJzZWQgPSBwYXJzZWQ7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdGdldEZvcm1hdEluc3RydWN0aW9ucygpIHtcblx0XHRyZXR1cm4gXCJcIjtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBCYXNlQ3VtdWxhdGl2ZVRyYW5zZm9ybU91dHB1dFBhcnNlciwgQmFzZVRyYW5zZm9ybU91dHB1dFBhcnNlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhbnNmb3JtLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/output_parsers/transform.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/output_parsers/xml.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/xml.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   XMLOutputParser: () => (/* binding */ XMLOutputParser),\n/* harmony export */   XML_FORMAT_INSTRUCTIONS: () => (/* binding */ XML_FORMAT_INSTRUCTIONS),\n/* harmony export */   parseXMLMarkdown: () => (/* binding */ parseXMLMarkdown)\n/* harmony export */ });\n/* harmony import */ var _utils_fast_json_patch_src_duplex_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/fast-json-patch/src/duplex.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js\");\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./transform.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n/* harmony import */ var _utils_json_patch_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/json_patch.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/json_patch.js\");\n/* harmony import */ var _utils_sax_js_sax_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/sax-js/sax.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/sax-js/sax.js\");\n\n\n\n\n\n//#region src/output_parsers/xml.ts\nconst XML_FORMAT_INSTRUCTIONS = `The output should be formatted as a XML file.\n1. Output should conform to the tags below. \n2. If tags are not given, make them on your own.\n3. Remember to always open and close all the tags.\n\nAs an example, for the tags [\"foo\", \"bar\", \"baz\"]:\n1. String \"<foo>\\n   <bar>\\n      <baz></baz>\\n   </bar>\\n</foo>\" is a well-formatted instance of the schema. \n2. String \"<foo>\\n   <bar>\\n   </foo>\" is a badly-formatted instance.\n3. String \"<foo>\\n   <tag>\\n   </tag>\\n</foo>\" is a badly-formatted instance.\n\nHere are the output tags:\n\\`\\`\\`\n{tags}\n\\`\\`\\``;\nvar XMLOutputParser = class extends _transform_js__WEBPACK_IMPORTED_MODULE_1__.BaseCumulativeTransformOutputParser {\n\ttags;\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.tags = fields?.tags;\n\t}\n\tstatic lc_name() {\n\t\treturn \"XMLOutputParser\";\n\t}\n\tlc_namespace = [\"langchain_core\", \"output_parsers\"];\n\tlc_serializable = true;\n\t_diff(prev, next) {\n\t\tif (!next) return void 0;\n\t\tif (!prev) return [{\n\t\t\top: \"replace\",\n\t\t\tpath: \"\",\n\t\t\tvalue: next\n\t\t}];\n\t\treturn (0,_utils_fast_json_patch_src_duplex_js__WEBPACK_IMPORTED_MODULE_0__.compare)(prev, next);\n\t}\n\tasync parsePartialResult(generations) {\n\t\treturn parseXMLMarkdown(generations[0].text);\n\t}\n\tasync parse(text) {\n\t\treturn parseXMLMarkdown(text);\n\t}\n\tgetFormatInstructions() {\n\t\tconst withTags = !!(this.tags && this.tags.length > 0);\n\t\treturn withTags ? XML_FORMAT_INSTRUCTIONS.replace(\"{tags}\", this.tags?.join(\", \") ?? \"\") : XML_FORMAT_INSTRUCTIONS;\n\t}\n};\nconst strip = (text) => text.split(\"\\n\").map((line) => line.replace(/^\\s+/, \"\")).join(\"\\n\").trim();\nconst parseParsedResult = (input) => {\n\tif (Object.keys(input).length === 0) return {};\n\tconst result = {};\n\tif (input.children.length > 0) {\n\t\tresult[input.name] = input.children.map(parseParsedResult);\n\t\treturn result;\n\t} else {\n\t\tresult[input.name] = input.text ?? void 0;\n\t\treturn result;\n\t}\n};\nfunction parseXMLMarkdown(s) {\n\tconst cleanedString = strip(s);\n\tconst parser = _utils_sax_js_sax_js__WEBPACK_IMPORTED_MODULE_3__.sax.parser(true);\n\tlet parsedResult = {};\n\tconst elementStack = [];\n\tparser.onopentag = (node) => {\n\t\tconst element = {\n\t\t\tname: node.name,\n\t\t\tattributes: node.attributes,\n\t\t\tchildren: [],\n\t\t\ttext: \"\",\n\t\t\tisSelfClosing: node.isSelfClosing\n\t\t};\n\t\tif (elementStack.length > 0) {\n\t\t\tconst parentElement = elementStack[elementStack.length - 1];\n\t\t\tparentElement.children.push(element);\n\t\t} else parsedResult = element;\n\t\tif (!node.isSelfClosing) elementStack.push(element);\n\t};\n\tparser.onclosetag = () => {\n\t\tif (elementStack.length > 0) {\n\t\t\tconst lastElement = elementStack.pop();\n\t\t\tif (elementStack.length === 0 && lastElement) parsedResult = lastElement;\n\t\t}\n\t};\n\tparser.ontext = (text) => {\n\t\tif (elementStack.length > 0) {\n\t\t\tconst currentElement = elementStack[elementStack.length - 1];\n\t\t\tcurrentElement.text += text;\n\t\t}\n\t};\n\tparser.onattribute = (attr) => {\n\t\tif (elementStack.length > 0) {\n\t\t\tconst currentElement = elementStack[elementStack.length - 1];\n\t\t\tcurrentElement.attributes[attr.name] = attr.value;\n\t\t}\n\t};\n\tconst match = /```(xml)?(.*)```/s.exec(cleanedString);\n\tconst xmlString = match ? match[2] : cleanedString;\n\tparser.write(xmlString).close();\n\tif (parsedResult && parsedResult.name === \"?xml\") parsedResult = parsedResult.children[0];\n\treturn parseParsedResult(parsedResult);\n}\n\n//#endregion\n\n//# sourceMappingURL=xml.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMveG1sLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBaUU7QUFDSTtBQUNyQztBQUNhOztBQUU3QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxvQ0FBb0MsOEVBQW1DO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILFNBQVMsNkVBQU87QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELEtBQUs7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixxREFBRztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3NFO0FBQ3RFIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMveG1sLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbXBhcmUgfSBmcm9tIFwiLi4vdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9kdXBsZXguanNcIjtcbmltcG9ydCB7IEJhc2VDdW11bGF0aXZlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIH0gZnJvbSBcIi4vdHJhbnNmb3JtLmpzXCI7XG5pbXBvcnQgXCIuLi91dGlscy9qc29uX3BhdGNoLmpzXCI7XG5pbXBvcnQgeyBzYXggfSBmcm9tIFwiLi4vdXRpbHMvc2F4LWpzL3NheC5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL291dHB1dF9wYXJzZXJzL3htbC50c1xuY29uc3QgWE1MX0ZPUk1BVF9JTlNUUlVDVElPTlMgPSBgVGhlIG91dHB1dCBzaG91bGQgYmUgZm9ybWF0dGVkIGFzIGEgWE1MIGZpbGUuXG4xLiBPdXRwdXQgc2hvdWxkIGNvbmZvcm0gdG8gdGhlIHRhZ3MgYmVsb3cuIFxuMi4gSWYgdGFncyBhcmUgbm90IGdpdmVuLCBtYWtlIHRoZW0gb24geW91ciBvd24uXG4zLiBSZW1lbWJlciB0byBhbHdheXMgb3BlbiBhbmQgY2xvc2UgYWxsIHRoZSB0YWdzLlxuXG5BcyBhbiBleGFtcGxlLCBmb3IgdGhlIHRhZ3MgW1wiZm9vXCIsIFwiYmFyXCIsIFwiYmF6XCJdOlxuMS4gU3RyaW5nIFwiPGZvbz5cXG4gICA8YmFyPlxcbiAgICAgIDxiYXo+PC9iYXo+XFxuICAgPC9iYXI+XFxuPC9mb28+XCIgaXMgYSB3ZWxsLWZvcm1hdHRlZCBpbnN0YW5jZSBvZiB0aGUgc2NoZW1hLiBcbjIuIFN0cmluZyBcIjxmb28+XFxuICAgPGJhcj5cXG4gICA8L2Zvbz5cIiBpcyBhIGJhZGx5LWZvcm1hdHRlZCBpbnN0YW5jZS5cbjMuIFN0cmluZyBcIjxmb28+XFxuICAgPHRhZz5cXG4gICA8L3RhZz5cXG48L2Zvbz5cIiBpcyBhIGJhZGx5LWZvcm1hdHRlZCBpbnN0YW5jZS5cblxuSGVyZSBhcmUgdGhlIG91dHB1dCB0YWdzOlxuXFxgXFxgXFxgXG57dGFnc31cblxcYFxcYFxcYGA7XG52YXIgWE1MT3V0cHV0UGFyc2VyID0gY2xhc3MgZXh0ZW5kcyBCYXNlQ3VtdWxhdGl2ZVRyYW5zZm9ybU91dHB1dFBhcnNlciB7XG5cdHRhZ3M7XG5cdGNvbnN0cnVjdG9yKGZpZWxkcykge1xuXHRcdHN1cGVyKGZpZWxkcyk7XG5cdFx0dGhpcy50YWdzID0gZmllbGRzPy50YWdzO1xuXHR9XG5cdHN0YXRpYyBsY19uYW1lKCkge1xuXHRcdHJldHVybiBcIlhNTE91dHB1dFBhcnNlclwiO1xuXHR9XG5cdGxjX25hbWVzcGFjZSA9IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwib3V0cHV0X3BhcnNlcnNcIl07XG5cdGxjX3NlcmlhbGl6YWJsZSA9IHRydWU7XG5cdF9kaWZmKHByZXYsIG5leHQpIHtcblx0XHRpZiAoIW5leHQpIHJldHVybiB2b2lkIDA7XG5cdFx0aWYgKCFwcmV2KSByZXR1cm4gW3tcblx0XHRcdG9wOiBcInJlcGxhY2VcIixcblx0XHRcdHBhdGg6IFwiXCIsXG5cdFx0XHR2YWx1ZTogbmV4dFxuXHRcdH1dO1xuXHRcdHJldHVybiBjb21wYXJlKHByZXYsIG5leHQpO1xuXHR9XG5cdGFzeW5jIHBhcnNlUGFydGlhbFJlc3VsdChnZW5lcmF0aW9ucykge1xuXHRcdHJldHVybiBwYXJzZVhNTE1hcmtkb3duKGdlbmVyYXRpb25zWzBdLnRleHQpO1xuXHR9XG5cdGFzeW5jIHBhcnNlKHRleHQpIHtcblx0XHRyZXR1cm4gcGFyc2VYTUxNYXJrZG93bih0ZXh0KTtcblx0fVxuXHRnZXRGb3JtYXRJbnN0cnVjdGlvbnMoKSB7XG5cdFx0Y29uc3Qgd2l0aFRhZ3MgPSAhISh0aGlzLnRhZ3MgJiYgdGhpcy50YWdzLmxlbmd0aCA+IDApO1xuXHRcdHJldHVybiB3aXRoVGFncyA/IFhNTF9GT1JNQVRfSU5TVFJVQ1RJT05TLnJlcGxhY2UoXCJ7dGFnc31cIiwgdGhpcy50YWdzPy5qb2luKFwiLCBcIikgPz8gXCJcIikgOiBYTUxfRk9STUFUX0lOU1RSVUNUSU9OUztcblx0fVxufTtcbmNvbnN0IHN0cmlwID0gKHRleHQpID0+IHRleHQuc3BsaXQoXCJcXG5cIikubWFwKChsaW5lKSA9PiBsaW5lLnJlcGxhY2UoL15cXHMrLywgXCJcIikpLmpvaW4oXCJcXG5cIikudHJpbSgpO1xuY29uc3QgcGFyc2VQYXJzZWRSZXN1bHQgPSAoaW5wdXQpID0+IHtcblx0aWYgKE9iamVjdC5rZXlzKGlucHV0KS5sZW5ndGggPT09IDApIHJldHVybiB7fTtcblx0Y29uc3QgcmVzdWx0ID0ge307XG5cdGlmIChpbnB1dC5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG5cdFx0cmVzdWx0W2lucHV0Lm5hbWVdID0gaW5wdXQuY2hpbGRyZW4ubWFwKHBhcnNlUGFyc2VkUmVzdWx0KTtcblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9IGVsc2Uge1xuXHRcdHJlc3VsdFtpbnB1dC5uYW1lXSA9IGlucHV0LnRleHQgPz8gdm9pZCAwO1xuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cbn07XG5mdW5jdGlvbiBwYXJzZVhNTE1hcmtkb3duKHMpIHtcblx0Y29uc3QgY2xlYW5lZFN0cmluZyA9IHN0cmlwKHMpO1xuXHRjb25zdCBwYXJzZXIgPSBzYXgucGFyc2VyKHRydWUpO1xuXHRsZXQgcGFyc2VkUmVzdWx0ID0ge307XG5cdGNvbnN0IGVsZW1lbnRTdGFjayA9IFtdO1xuXHRwYXJzZXIub25vcGVudGFnID0gKG5vZGUpID0+IHtcblx0XHRjb25zdCBlbGVtZW50ID0ge1xuXHRcdFx0bmFtZTogbm9kZS5uYW1lLFxuXHRcdFx0YXR0cmlidXRlczogbm9kZS5hdHRyaWJ1dGVzLFxuXHRcdFx0Y2hpbGRyZW46IFtdLFxuXHRcdFx0dGV4dDogXCJcIixcblx0XHRcdGlzU2VsZkNsb3Npbmc6IG5vZGUuaXNTZWxmQ2xvc2luZ1xuXHRcdH07XG5cdFx0aWYgKGVsZW1lbnRTdGFjay5sZW5ndGggPiAwKSB7XG5cdFx0XHRjb25zdCBwYXJlbnRFbGVtZW50ID0gZWxlbWVudFN0YWNrW2VsZW1lbnRTdGFjay5sZW5ndGggLSAxXTtcblx0XHRcdHBhcmVudEVsZW1lbnQuY2hpbGRyZW4ucHVzaChlbGVtZW50KTtcblx0XHR9IGVsc2UgcGFyc2VkUmVzdWx0ID0gZWxlbWVudDtcblx0XHRpZiAoIW5vZGUuaXNTZWxmQ2xvc2luZykgZWxlbWVudFN0YWNrLnB1c2goZWxlbWVudCk7XG5cdH07XG5cdHBhcnNlci5vbmNsb3NldGFnID0gKCkgPT4ge1xuXHRcdGlmIChlbGVtZW50U3RhY2subGVuZ3RoID4gMCkge1xuXHRcdFx0Y29uc3QgbGFzdEVsZW1lbnQgPSBlbGVtZW50U3RhY2sucG9wKCk7XG5cdFx0XHRpZiAoZWxlbWVudFN0YWNrLmxlbmd0aCA9PT0gMCAmJiBsYXN0RWxlbWVudCkgcGFyc2VkUmVzdWx0ID0gbGFzdEVsZW1lbnQ7XG5cdFx0fVxuXHR9O1xuXHRwYXJzZXIub250ZXh0ID0gKHRleHQpID0+IHtcblx0XHRpZiAoZWxlbWVudFN0YWNrLmxlbmd0aCA+IDApIHtcblx0XHRcdGNvbnN0IGN1cnJlbnRFbGVtZW50ID0gZWxlbWVudFN0YWNrW2VsZW1lbnRTdGFjay5sZW5ndGggLSAxXTtcblx0XHRcdGN1cnJlbnRFbGVtZW50LnRleHQgKz0gdGV4dDtcblx0XHR9XG5cdH07XG5cdHBhcnNlci5vbmF0dHJpYnV0ZSA9IChhdHRyKSA9PiB7XG5cdFx0aWYgKGVsZW1lbnRTdGFjay5sZW5ndGggPiAwKSB7XG5cdFx0XHRjb25zdCBjdXJyZW50RWxlbWVudCA9IGVsZW1lbnRTdGFja1tlbGVtZW50U3RhY2subGVuZ3RoIC0gMV07XG5cdFx0XHRjdXJyZW50RWxlbWVudC5hdHRyaWJ1dGVzW2F0dHIubmFtZV0gPSBhdHRyLnZhbHVlO1xuXHRcdH1cblx0fTtcblx0Y29uc3QgbWF0Y2ggPSAvYGBgKHhtbCk/KC4qKWBgYC9zLmV4ZWMoY2xlYW5lZFN0cmluZyk7XG5cdGNvbnN0IHhtbFN0cmluZyA9IG1hdGNoID8gbWF0Y2hbMl0gOiBjbGVhbmVkU3RyaW5nO1xuXHRwYXJzZXIud3JpdGUoeG1sU3RyaW5nKS5jbG9zZSgpO1xuXHRpZiAocGFyc2VkUmVzdWx0ICYmIHBhcnNlZFJlc3VsdC5uYW1lID09PSBcIj94bWxcIikgcGFyc2VkUmVzdWx0ID0gcGFyc2VkUmVzdWx0LmNoaWxkcmVuWzBdO1xuXHRyZXR1cm4gcGFyc2VQYXJzZWRSZXN1bHQocGFyc2VkUmVzdWx0KTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBYTUxPdXRwdXRQYXJzZXIsIFhNTF9GT1JNQVRfSU5TVFJVQ1RJT05TLCBwYXJzZVhNTE1hcmtkb3duIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD14bWwuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/output_parsers/xml.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/outputs.js":
/*!******************************************************!*\
  !*** ./node_modules/@langchain/core/dist/outputs.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatGenerationChunk: () => (/* binding */ ChatGenerationChunk),\n/* harmony export */   GenerationChunk: () => (/* binding */ GenerationChunk),\n/* harmony export */   RUN_KEY: () => (/* binding */ RUN_KEY),\n/* harmony export */   outputs_exports: () => (/* binding */ outputs_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n\n\n//#region src/outputs.ts\nvar outputs_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(outputs_exports, {\n\tChatGenerationChunk: () => ChatGenerationChunk,\n\tGenerationChunk: () => GenerationChunk,\n\tRUN_KEY: () => RUN_KEY\n});\nconst RUN_KEY = \"__run\";\n/**\n* Chunk of a single generation. Used for streaming.\n*/\nvar GenerationChunk = class GenerationChunk {\n\ttext;\n\tgenerationInfo;\n\tconstructor(fields) {\n\t\tthis.text = fields.text;\n\t\tthis.generationInfo = fields.generationInfo;\n\t}\n\tconcat(chunk) {\n\t\treturn new GenerationChunk({\n\t\t\ttext: this.text + chunk.text,\n\t\t\tgenerationInfo: {\n\t\t\t\t...this.generationInfo,\n\t\t\t\t...chunk.generationInfo\n\t\t\t}\n\t\t});\n\t}\n};\nvar ChatGenerationChunk = class ChatGenerationChunk extends GenerationChunk {\n\tmessage;\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.message = fields.message;\n\t}\n\tconcat(chunk) {\n\t\treturn new ChatGenerationChunk({\n\t\t\ttext: this.text + chunk.text,\n\t\t\tgenerationInfo: {\n\t\t\t\t...this.generationInfo,\n\t\t\t\t...chunk.generationInfo\n\t\t\t},\n\t\t\tmessage: this.message.concat(chunk.message)\n\t\t});\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=outputs.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUEwRDs7QUFFMUQ7QUFDQTtBQUNBLHNFQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDMEU7QUFDMUUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9vdXRwdXRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4vX3ZpcnR1YWwvcm9sbGRvd25fcnVudGltZS5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL291dHB1dHMudHNcbnZhciBvdXRwdXRzX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KG91dHB1dHNfZXhwb3J0cywge1xuXHRDaGF0R2VuZXJhdGlvbkNodW5rOiAoKSA9PiBDaGF0R2VuZXJhdGlvbkNodW5rLFxuXHRHZW5lcmF0aW9uQ2h1bms6ICgpID0+IEdlbmVyYXRpb25DaHVuayxcblx0UlVOX0tFWTogKCkgPT4gUlVOX0tFWVxufSk7XG5jb25zdCBSVU5fS0VZID0gXCJfX3J1blwiO1xuLyoqXG4qIENodW5rIG9mIGEgc2luZ2xlIGdlbmVyYXRpb24uIFVzZWQgZm9yIHN0cmVhbWluZy5cbiovXG52YXIgR2VuZXJhdGlvbkNodW5rID0gY2xhc3MgR2VuZXJhdGlvbkNodW5rIHtcblx0dGV4dDtcblx0Z2VuZXJhdGlvbkluZm87XG5cdGNvbnN0cnVjdG9yKGZpZWxkcykge1xuXHRcdHRoaXMudGV4dCA9IGZpZWxkcy50ZXh0O1xuXHRcdHRoaXMuZ2VuZXJhdGlvbkluZm8gPSBmaWVsZHMuZ2VuZXJhdGlvbkluZm87XG5cdH1cblx0Y29uY2F0KGNodW5rKSB7XG5cdFx0cmV0dXJuIG5ldyBHZW5lcmF0aW9uQ2h1bmsoe1xuXHRcdFx0dGV4dDogdGhpcy50ZXh0ICsgY2h1bmsudGV4dCxcblx0XHRcdGdlbmVyYXRpb25JbmZvOiB7XG5cdFx0XHRcdC4uLnRoaXMuZ2VuZXJhdGlvbkluZm8sXG5cdFx0XHRcdC4uLmNodW5rLmdlbmVyYXRpb25JbmZvXG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cbn07XG52YXIgQ2hhdEdlbmVyYXRpb25DaHVuayA9IGNsYXNzIENoYXRHZW5lcmF0aW9uQ2h1bmsgZXh0ZW5kcyBHZW5lcmF0aW9uQ2h1bmsge1xuXHRtZXNzYWdlO1xuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHRzdXBlcihmaWVsZHMpO1xuXHRcdHRoaXMubWVzc2FnZSA9IGZpZWxkcy5tZXNzYWdlO1xuXHR9XG5cdGNvbmNhdChjaHVuaykge1xuXHRcdHJldHVybiBuZXcgQ2hhdEdlbmVyYXRpb25DaHVuayh7XG5cdFx0XHR0ZXh0OiB0aGlzLnRleHQgKyBjaHVuay50ZXh0LFxuXHRcdFx0Z2VuZXJhdGlvbkluZm86IHtcblx0XHRcdFx0Li4udGhpcy5nZW5lcmF0aW9uSW5mbyxcblx0XHRcdFx0Li4uY2h1bmsuZ2VuZXJhdGlvbkluZm9cblx0XHRcdH0sXG5cdFx0XHRtZXNzYWdlOiB0aGlzLm1lc3NhZ2UuY29uY2F0KGNodW5rLm1lc3NhZ2UpXG5cdFx0fSk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQ2hhdEdlbmVyYXRpb25DaHVuaywgR2VuZXJhdGlvbkNodW5rLCBSVU5fS0VZLCBvdXRwdXRzX2V4cG9ydHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW91dHB1dHMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/outputs.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/prompt_values.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompt_values.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BasePromptValue: () => (/* binding */ BasePromptValue),\n/* harmony export */   ChatPromptValue: () => (/* binding */ ChatPromptValue),\n/* harmony export */   ImagePromptValue: () => (/* binding */ ImagePromptValue),\n/* harmony export */   StringPromptValue: () => (/* binding */ StringPromptValue),\n/* harmony export */   prompt_values_exports: () => (/* binding */ prompt_values_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./load/serializable.js */ \"(ssr)/./node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _messages_human_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./messages/human.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/human.js\");\n/* harmony import */ var _messages_utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./messages/utils.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/utils.js\");\n\n\n\n\n\n//#region src/prompt_values.ts\nvar prompt_values_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(prompt_values_exports, {\n\tBasePromptValue: () => BasePromptValue,\n\tChatPromptValue: () => ChatPromptValue,\n\tImagePromptValue: () => ImagePromptValue,\n\tStringPromptValue: () => StringPromptValue\n});\n/**\n* Base PromptValue class. All prompt values should extend this class.\n*/\nvar BasePromptValue = class extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_1__.Serializable {};\n/**\n* Represents a prompt value as a string. It extends the BasePromptValue\n* class and overrides the toString and toChatMessages methods.\n*/\nvar StringPromptValue = class extends BasePromptValue {\n\tstatic lc_name() {\n\t\treturn \"StringPromptValue\";\n\t}\n\tlc_namespace = [\"langchain_core\", \"prompt_values\"];\n\tlc_serializable = true;\n\tvalue;\n\tconstructor(value) {\n\t\tsuper({ value });\n\t\tthis.value = value;\n\t}\n\ttoString() {\n\t\treturn this.value;\n\t}\n\ttoChatMessages() {\n\t\treturn [new _messages_human_js__WEBPACK_IMPORTED_MODULE_2__.HumanMessage(this.value)];\n\t}\n};\n/**\n* Class that represents a chat prompt value. It extends the\n* BasePromptValue and includes an array of BaseMessage instances.\n*/\nvar ChatPromptValue = class extends BasePromptValue {\n\tlc_namespace = [\"langchain_core\", \"prompt_values\"];\n\tlc_serializable = true;\n\tstatic lc_name() {\n\t\treturn \"ChatPromptValue\";\n\t}\n\tmessages;\n\tconstructor(fields) {\n\t\tif (Array.isArray(fields)) fields = { messages: fields };\n\t\tsuper(fields);\n\t\tthis.messages = fields.messages;\n\t}\n\ttoString() {\n\t\treturn (0,_messages_utils_js__WEBPACK_IMPORTED_MODULE_3__.getBufferString)(this.messages);\n\t}\n\ttoChatMessages() {\n\t\treturn this.messages;\n\t}\n};\n/**\n* Class that represents an image prompt value. It extends the\n* BasePromptValue and includes an ImageURL instance.\n*/\nvar ImagePromptValue = class extends BasePromptValue {\n\tlc_namespace = [\"langchain_core\", \"prompt_values\"];\n\tlc_serializable = true;\n\tstatic lc_name() {\n\t\treturn \"ImagePromptValue\";\n\t}\n\timageUrl;\n\t/** @ignore */\n\tvalue;\n\tconstructor(fields) {\n\t\tif (!(\"imageUrl\" in fields)) fields = { imageUrl: fields };\n\t\tsuper(fields);\n\t\tthis.imageUrl = fields.imageUrl;\n\t}\n\ttoString() {\n\t\treturn this.imageUrl.url;\n\t}\n\ttoChatMessages() {\n\t\treturn [new _messages_human_js__WEBPACK_IMPORTED_MODULE_2__.HumanMessage({ content: [{\n\t\t\ttype: \"image_url\",\n\t\t\timage_url: {\n\t\t\t\tdetail: this.imageUrl.detail,\n\t\t\t\turl: this.imageUrl.url\n\t\t\t}\n\t\t}] })];\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=prompt_values.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0X3ZhbHVlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBMEQ7QUFDSjtBQUNIO0FBQ0c7O0FBRXREO0FBQ0E7QUFDQSxzRUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQywrREFBWTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLE9BQU87QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyw0REFBWTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxtRUFBZTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsNERBQVksR0FBRztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxHQUFHO0FBQ047QUFDQTs7QUFFQTtBQUN3RztBQUN4RyIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3Byb21wdF92YWx1ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19leHBvcnQgfSBmcm9tIFwiLi9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyBTZXJpYWxpemFibGUgfSBmcm9tIFwiLi9sb2FkL3NlcmlhbGl6YWJsZS5qc1wiO1xuaW1wb3J0IHsgSHVtYW5NZXNzYWdlIH0gZnJvbSBcIi4vbWVzc2FnZXMvaHVtYW4uanNcIjtcbmltcG9ydCB7IGdldEJ1ZmZlclN0cmluZyB9IGZyb20gXCIuL21lc3NhZ2VzL3V0aWxzLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcHJvbXB0X3ZhbHVlcy50c1xudmFyIHByb21wdF92YWx1ZXNfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQocHJvbXB0X3ZhbHVlc19leHBvcnRzLCB7XG5cdEJhc2VQcm9tcHRWYWx1ZTogKCkgPT4gQmFzZVByb21wdFZhbHVlLFxuXHRDaGF0UHJvbXB0VmFsdWU6ICgpID0+IENoYXRQcm9tcHRWYWx1ZSxcblx0SW1hZ2VQcm9tcHRWYWx1ZTogKCkgPT4gSW1hZ2VQcm9tcHRWYWx1ZSxcblx0U3RyaW5nUHJvbXB0VmFsdWU6ICgpID0+IFN0cmluZ1Byb21wdFZhbHVlXG59KTtcbi8qKlxuKiBCYXNlIFByb21wdFZhbHVlIGNsYXNzLiBBbGwgcHJvbXB0IHZhbHVlcyBzaG91bGQgZXh0ZW5kIHRoaXMgY2xhc3MuXG4qL1xudmFyIEJhc2VQcm9tcHRWYWx1ZSA9IGNsYXNzIGV4dGVuZHMgU2VyaWFsaXphYmxlIHt9O1xuLyoqXG4qIFJlcHJlc2VudHMgYSBwcm9tcHQgdmFsdWUgYXMgYSBzdHJpbmcuIEl0IGV4dGVuZHMgdGhlIEJhc2VQcm9tcHRWYWx1ZVxuKiBjbGFzcyBhbmQgb3ZlcnJpZGVzIHRoZSB0b1N0cmluZyBhbmQgdG9DaGF0TWVzc2FnZXMgbWV0aG9kcy5cbiovXG52YXIgU3RyaW5nUHJvbXB0VmFsdWUgPSBjbGFzcyBleHRlbmRzIEJhc2VQcm9tcHRWYWx1ZSB7XG5cdHN0YXRpYyBsY19uYW1lKCkge1xuXHRcdHJldHVybiBcIlN0cmluZ1Byb21wdFZhbHVlXCI7XG5cdH1cblx0bGNfbmFtZXNwYWNlID0gW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJwcm9tcHRfdmFsdWVzXCJdO1xuXHRsY19zZXJpYWxpemFibGUgPSB0cnVlO1xuXHR2YWx1ZTtcblx0Y29uc3RydWN0b3IodmFsdWUpIHtcblx0XHRzdXBlcih7IHZhbHVlIH0pO1xuXHRcdHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0fVxuXHR0b1N0cmluZygpIHtcblx0XHRyZXR1cm4gdGhpcy52YWx1ZTtcblx0fVxuXHR0b0NoYXRNZXNzYWdlcygpIHtcblx0XHRyZXR1cm4gW25ldyBIdW1hbk1lc3NhZ2UodGhpcy52YWx1ZSldO1xuXHR9XG59O1xuLyoqXG4qIENsYXNzIHRoYXQgcmVwcmVzZW50cyBhIGNoYXQgcHJvbXB0IHZhbHVlLiBJdCBleHRlbmRzIHRoZVxuKiBCYXNlUHJvbXB0VmFsdWUgYW5kIGluY2x1ZGVzIGFuIGFycmF5IG9mIEJhc2VNZXNzYWdlIGluc3RhbmNlcy5cbiovXG52YXIgQ2hhdFByb21wdFZhbHVlID0gY2xhc3MgZXh0ZW5kcyBCYXNlUHJvbXB0VmFsdWUge1xuXHRsY19uYW1lc3BhY2UgPSBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInByb21wdF92YWx1ZXNcIl07XG5cdGxjX3NlcmlhbGl6YWJsZSA9IHRydWU7XG5cdHN0YXRpYyBsY19uYW1lKCkge1xuXHRcdHJldHVybiBcIkNoYXRQcm9tcHRWYWx1ZVwiO1xuXHR9XG5cdG1lc3NhZ2VzO1xuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHRpZiAoQXJyYXkuaXNBcnJheShmaWVsZHMpKSBmaWVsZHMgPSB7IG1lc3NhZ2VzOiBmaWVsZHMgfTtcblx0XHRzdXBlcihmaWVsZHMpO1xuXHRcdHRoaXMubWVzc2FnZXMgPSBmaWVsZHMubWVzc2FnZXM7XG5cdH1cblx0dG9TdHJpbmcoKSB7XG5cdFx0cmV0dXJuIGdldEJ1ZmZlclN0cmluZyh0aGlzLm1lc3NhZ2VzKTtcblx0fVxuXHR0b0NoYXRNZXNzYWdlcygpIHtcblx0XHRyZXR1cm4gdGhpcy5tZXNzYWdlcztcblx0fVxufTtcbi8qKlxuKiBDbGFzcyB0aGF0IHJlcHJlc2VudHMgYW4gaW1hZ2UgcHJvbXB0IHZhbHVlLiBJdCBleHRlbmRzIHRoZVxuKiBCYXNlUHJvbXB0VmFsdWUgYW5kIGluY2x1ZGVzIGFuIEltYWdlVVJMIGluc3RhbmNlLlxuKi9cbnZhciBJbWFnZVByb21wdFZhbHVlID0gY2xhc3MgZXh0ZW5kcyBCYXNlUHJvbXB0VmFsdWUge1xuXHRsY19uYW1lc3BhY2UgPSBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInByb21wdF92YWx1ZXNcIl07XG5cdGxjX3NlcmlhbGl6YWJsZSA9IHRydWU7XG5cdHN0YXRpYyBsY19uYW1lKCkge1xuXHRcdHJldHVybiBcIkltYWdlUHJvbXB0VmFsdWVcIjtcblx0fVxuXHRpbWFnZVVybDtcblx0LyoqIEBpZ25vcmUgKi9cblx0dmFsdWU7XG5cdGNvbnN0cnVjdG9yKGZpZWxkcykge1xuXHRcdGlmICghKFwiaW1hZ2VVcmxcIiBpbiBmaWVsZHMpKSBmaWVsZHMgPSB7IGltYWdlVXJsOiBmaWVsZHMgfTtcblx0XHRzdXBlcihmaWVsZHMpO1xuXHRcdHRoaXMuaW1hZ2VVcmwgPSBmaWVsZHMuaW1hZ2VVcmw7XG5cdH1cblx0dG9TdHJpbmcoKSB7XG5cdFx0cmV0dXJuIHRoaXMuaW1hZ2VVcmwudXJsO1xuXHR9XG5cdHRvQ2hhdE1lc3NhZ2VzKCkge1xuXHRcdHJldHVybiBbbmV3IEh1bWFuTWVzc2FnZSh7IGNvbnRlbnQ6IFt7XG5cdFx0XHR0eXBlOiBcImltYWdlX3VybFwiLFxuXHRcdFx0aW1hZ2VfdXJsOiB7XG5cdFx0XHRcdGRldGFpbDogdGhpcy5pbWFnZVVybC5kZXRhaWwsXG5cdFx0XHRcdHVybDogdGhpcy5pbWFnZVVybC51cmxcblx0XHRcdH1cblx0XHR9XSB9KV07XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQmFzZVByb21wdFZhbHVlLCBDaGF0UHJvbXB0VmFsdWUsIEltYWdlUHJvbXB0VmFsdWUsIFN0cmluZ1Byb21wdFZhbHVlLCBwcm9tcHRfdmFsdWVzX2V4cG9ydHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb21wdF92YWx1ZXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/prompt_values.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/prompts/base.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/base.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BasePromptTemplate: () => (/* binding */ BasePromptTemplate)\n/* harmony export */ });\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runnables/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/base.js\");\n\n\n//#region src/prompts/base.ts\n/**\n* Base class for prompt templates. Exposes a format method that returns a\n* string prompt given a set of input values.\n*/\nvar BasePromptTemplate = class extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__.Runnable {\n\tlc_serializable = true;\n\tlc_namespace = [\n\t\t\"langchain_core\",\n\t\t\"prompts\",\n\t\tthis._getPromptType()\n\t];\n\tget lc_attributes() {\n\t\treturn { partialVariables: void 0 };\n\t}\n\tinputVariables;\n\toutputParser;\n\tpartialVariables;\n\t/**\n\t* Metadata to be used for tracing.\n\t*/\n\tmetadata;\n\t/** Tags to be used for tracing. */\n\ttags;\n\tconstructor(input) {\n\t\tsuper(input);\n\t\tconst { inputVariables } = input;\n\t\tif (inputVariables.includes(\"stop\")) throw new Error(\"Cannot have an input variable named 'stop', as it is used internally, please rename.\");\n\t\tObject.assign(this, input);\n\t}\n\t/**\n\t* Merges partial variables and user variables.\n\t* @param userVariables The user variables to merge with the partial variables.\n\t* @returns A Promise that resolves to an object containing the merged variables.\n\t*/\n\tasync mergePartialAndUserVariables(userVariables) {\n\t\tconst partialVariables = this.partialVariables ?? {};\n\t\tconst partialValues = {};\n\t\tfor (const [key, value] of Object.entries(partialVariables)) if (typeof value === \"string\") partialValues[key] = value;\n\t\telse partialValues[key] = await value();\n\t\tconst allKwargs = {\n\t\t\t...partialValues,\n\t\t\t...userVariables\n\t\t};\n\t\treturn allKwargs;\n\t}\n\t/**\n\t* Invokes the prompt template with the given input and options.\n\t* @param input The input to invoke the prompt template with.\n\t* @param options Optional configuration for the callback.\n\t* @returns A Promise that resolves to the output of the prompt template.\n\t*/\n\tasync invoke(input, options) {\n\t\tconst metadata = {\n\t\t\t...this.metadata,\n\t\t\t...options?.metadata\n\t\t};\n\t\tconst tags = [...this.tags ?? [], ...options?.tags ?? []];\n\t\treturn this._callWithConfig((input$1) => this.formatPromptValue(input$1), input, {\n\t\t\t...options,\n\t\t\ttags,\n\t\t\tmetadata,\n\t\t\trunType: \"prompt\"\n\t\t});\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=base.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9iYXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWdEOztBQUVoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLHdEQUFRO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsaUJBQWlCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQzhCO0FBQzlCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9iYXNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJ1bm5hYmxlIH0gZnJvbSBcIi4uL3J1bm5hYmxlcy9iYXNlLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcHJvbXB0cy9iYXNlLnRzXG4vKipcbiogQmFzZSBjbGFzcyBmb3IgcHJvbXB0IHRlbXBsYXRlcy4gRXhwb3NlcyBhIGZvcm1hdCBtZXRob2QgdGhhdCByZXR1cm5zIGFcbiogc3RyaW5nIHByb21wdCBnaXZlbiBhIHNldCBvZiBpbnB1dCB2YWx1ZXMuXG4qL1xudmFyIEJhc2VQcm9tcHRUZW1wbGF0ZSA9IGNsYXNzIGV4dGVuZHMgUnVubmFibGUge1xuXHRsY19zZXJpYWxpemFibGUgPSB0cnVlO1xuXHRsY19uYW1lc3BhY2UgPSBbXG5cdFx0XCJsYW5nY2hhaW5fY29yZVwiLFxuXHRcdFwicHJvbXB0c1wiLFxuXHRcdHRoaXMuX2dldFByb21wdFR5cGUoKVxuXHRdO1xuXHRnZXQgbGNfYXR0cmlidXRlcygpIHtcblx0XHRyZXR1cm4geyBwYXJ0aWFsVmFyaWFibGVzOiB2b2lkIDAgfTtcblx0fVxuXHRpbnB1dFZhcmlhYmxlcztcblx0b3V0cHV0UGFyc2VyO1xuXHRwYXJ0aWFsVmFyaWFibGVzO1xuXHQvKipcblx0KiBNZXRhZGF0YSB0byBiZSB1c2VkIGZvciB0cmFjaW5nLlxuXHQqL1xuXHRtZXRhZGF0YTtcblx0LyoqIFRhZ3MgdG8gYmUgdXNlZCBmb3IgdHJhY2luZy4gKi9cblx0dGFncztcblx0Y29uc3RydWN0b3IoaW5wdXQpIHtcblx0XHRzdXBlcihpbnB1dCk7XG5cdFx0Y29uc3QgeyBpbnB1dFZhcmlhYmxlcyB9ID0gaW5wdXQ7XG5cdFx0aWYgKGlucHV0VmFyaWFibGVzLmluY2x1ZGVzKFwic3RvcFwiKSkgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGhhdmUgYW4gaW5wdXQgdmFyaWFibGUgbmFtZWQgJ3N0b3AnLCBhcyBpdCBpcyB1c2VkIGludGVybmFsbHksIHBsZWFzZSByZW5hbWUuXCIpO1xuXHRcdE9iamVjdC5hc3NpZ24odGhpcywgaW5wdXQpO1xuXHR9XG5cdC8qKlxuXHQqIE1lcmdlcyBwYXJ0aWFsIHZhcmlhYmxlcyBhbmQgdXNlciB2YXJpYWJsZXMuXG5cdCogQHBhcmFtIHVzZXJWYXJpYWJsZXMgVGhlIHVzZXIgdmFyaWFibGVzIHRvIG1lcmdlIHdpdGggdGhlIHBhcnRpYWwgdmFyaWFibGVzLlxuXHQqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBtZXJnZWQgdmFyaWFibGVzLlxuXHQqL1xuXHRhc3luYyBtZXJnZVBhcnRpYWxBbmRVc2VyVmFyaWFibGVzKHVzZXJWYXJpYWJsZXMpIHtcblx0XHRjb25zdCBwYXJ0aWFsVmFyaWFibGVzID0gdGhpcy5wYXJ0aWFsVmFyaWFibGVzID8/IHt9O1xuXHRcdGNvbnN0IHBhcnRpYWxWYWx1ZXMgPSB7fTtcblx0XHRmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhwYXJ0aWFsVmFyaWFibGVzKSkgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikgcGFydGlhbFZhbHVlc1trZXldID0gdmFsdWU7XG5cdFx0ZWxzZSBwYXJ0aWFsVmFsdWVzW2tleV0gPSBhd2FpdCB2YWx1ZSgpO1xuXHRcdGNvbnN0IGFsbEt3YXJncyA9IHtcblx0XHRcdC4uLnBhcnRpYWxWYWx1ZXMsXG5cdFx0XHQuLi51c2VyVmFyaWFibGVzXG5cdFx0fTtcblx0XHRyZXR1cm4gYWxsS3dhcmdzO1xuXHR9XG5cdC8qKlxuXHQqIEludm9rZXMgdGhlIHByb21wdCB0ZW1wbGF0ZSB3aXRoIHRoZSBnaXZlbiBpbnB1dCBhbmQgb3B0aW9ucy5cblx0KiBAcGFyYW0gaW5wdXQgVGhlIGlucHV0IHRvIGludm9rZSB0aGUgcHJvbXB0IHRlbXBsYXRlIHdpdGguXG5cdCogQHBhcmFtIG9wdGlvbnMgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBmb3IgdGhlIGNhbGxiYWNrLlxuXHQqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBvdXRwdXQgb2YgdGhlIHByb21wdCB0ZW1wbGF0ZS5cblx0Ki9cblx0YXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG5cdFx0Y29uc3QgbWV0YWRhdGEgPSB7XG5cdFx0XHQuLi50aGlzLm1ldGFkYXRhLFxuXHRcdFx0Li4ub3B0aW9ucz8ubWV0YWRhdGFcblx0XHR9O1xuXHRcdGNvbnN0IHRhZ3MgPSBbLi4udGhpcy50YWdzID8/IFtdLCAuLi5vcHRpb25zPy50YWdzID8/IFtdXTtcblx0XHRyZXR1cm4gdGhpcy5fY2FsbFdpdGhDb25maWcoKGlucHV0JDEpID0+IHRoaXMuZm9ybWF0UHJvbXB0VmFsdWUoaW5wdXQkMSksIGlucHV0LCB7XG5cdFx0XHQuLi5vcHRpb25zLFxuXHRcdFx0dGFncyxcblx0XHRcdG1ldGFkYXRhLFxuXHRcdFx0cnVuVHlwZTogXCJwcm9tcHRcIlxuXHRcdH0pO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEJhc2VQcm9tcHRUZW1wbGF0ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmFzZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/prompts/base.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/prompts/chat.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/chat.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessagePromptTemplate: () => (/* binding */ AIMessagePromptTemplate),\n/* harmony export */   BaseChatPromptTemplate: () => (/* binding */ BaseChatPromptTemplate),\n/* harmony export */   BaseMessagePromptTemplate: () => (/* binding */ BaseMessagePromptTemplate),\n/* harmony export */   BaseMessageStringPromptTemplate: () => (/* binding */ BaseMessageStringPromptTemplate),\n/* harmony export */   ChatMessagePromptTemplate: () => (/* binding */ ChatMessagePromptTemplate),\n/* harmony export */   ChatPromptTemplate: () => (/* binding */ ChatPromptTemplate),\n/* harmony export */   HumanMessagePromptTemplate: () => (/* binding */ HumanMessagePromptTemplate),\n/* harmony export */   MessagesPlaceholder: () => (/* binding */ MessagesPlaceholder),\n/* harmony export */   SystemMessagePromptTemplate: () => (/* binding */ SystemMessagePromptTemplate)\n/* harmony export */ });\n/* harmony import */ var _messages_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../messages/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _errors_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/errors/index.js\");\n/* harmony import */ var _messages_chat_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../messages/chat.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/chat.js\");\n/* harmony import */ var _messages_human_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../messages/human.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/human.js\");\n/* harmony import */ var _messages_system_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../messages/system.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/system.js\");\n/* harmony import */ var _messages_utils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../messages/utils.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/utils.js\");\n/* harmony import */ var _messages_ai_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../messages/ai.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../runnables/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../messages/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _prompt_values_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../prompt_values.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompt_values.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/base.js\");\n/* harmony import */ var _string_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./string.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/string.js\");\n/* harmony import */ var _template_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./template.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/template.js\");\n/* harmony import */ var _prompt_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./prompt.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/prompt.js\");\n/* harmony import */ var _image_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./image.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/image.js\");\n/* harmony import */ var _dict_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./dict.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/dict.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/prompts/chat.ts\n/**\n* Abstract class that serves as a base for creating message prompt\n* templates. It defines how to format messages for different roles in a\n* conversation.\n*/\nvar BaseMessagePromptTemplate = class extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_7__.Runnable {\n\tlc_namespace = [\n\t\t\"langchain_core\",\n\t\t\"prompts\",\n\t\t\"chat\"\n\t];\n\tlc_serializable = true;\n\t/**\n\t* Calls the formatMessages method with the provided input and options.\n\t* @param input Input for the formatMessages method\n\t* @param options Optional BaseCallbackConfig\n\t* @returns Formatted output messages\n\t*/\n\tasync invoke(input, options) {\n\t\treturn this._callWithConfig((input$1) => this.formatMessages(input$1), input, {\n\t\t\t...options,\n\t\t\trunType: \"prompt\"\n\t\t});\n\t}\n};\n/**\n* Class that represents a placeholder for messages in a chat prompt. It\n* extends the BaseMessagePromptTemplate.\n*/\nvar MessagesPlaceholder = class extends BaseMessagePromptTemplate {\n\tstatic lc_name() {\n\t\treturn \"MessagesPlaceholder\";\n\t}\n\tvariableName;\n\toptional;\n\tconstructor(fields) {\n\t\tif (typeof fields === \"string\") fields = { variableName: fields };\n\t\tsuper(fields);\n\t\tthis.variableName = fields.variableName;\n\t\tthis.optional = fields.optional ?? false;\n\t}\n\tget inputVariables() {\n\t\treturn [this.variableName];\n\t}\n\tasync formatMessages(values) {\n\t\tconst input = values[this.variableName];\n\t\tif (this.optional && !input) return [];\n\t\telse if (!input) {\n\t\t\tconst error = /* @__PURE__ */ new Error(`Field \"${this.variableName}\" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages as an input value. Received: undefined`);\n\t\t\terror.name = \"InputFormatError\";\n\t\t\tthrow error;\n\t\t}\n\t\tlet formattedMessages;\n\t\ttry {\n\t\t\tif (Array.isArray(input)) formattedMessages = input.map(_messages_utils_js__WEBPACK_IMPORTED_MODULE_5__.coerceMessageLikeToMessage);\n\t\t\telse formattedMessages = [(0,_messages_utils_js__WEBPACK_IMPORTED_MODULE_5__.coerceMessageLikeToMessage)(input)];\n\t\t} catch (e) {\n\t\t\tconst readableInput = typeof input === \"string\" ? input : JSON.stringify(input, null, 2);\n\t\t\tconst error = new Error([\n\t\t\t\t`Field \"${this.variableName}\" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages or coerceable values as input.`,\n\t\t\t\t`Received value: ${readableInput}`,\n\t\t\t\t`Additional message: ${e.message}`\n\t\t\t].join(\"\\n\\n\"));\n\t\t\terror.name = \"InputFormatError\";\n\t\t\terror.lc_error_code = e.lc_error_code;\n\t\t\tthrow error;\n\t\t}\n\t\treturn formattedMessages;\n\t}\n};\n/**\n* Abstract class that serves as a base for creating message string prompt\n* templates. It extends the BaseMessagePromptTemplate.\n*/\nvar BaseMessageStringPromptTemplate = class extends BaseMessagePromptTemplate {\n\tprompt;\n\tconstructor(fields) {\n\t\tif (!(\"prompt\" in fields)) fields = { prompt: fields };\n\t\tsuper(fields);\n\t\tthis.prompt = fields.prompt;\n\t}\n\tget inputVariables() {\n\t\treturn this.prompt.inputVariables;\n\t}\n\tasync formatMessages(values) {\n\t\treturn [await this.format(values)];\n\t}\n};\n/**\n* Abstract class that serves as a base for creating chat prompt\n* templates. It extends the BasePromptTemplate.\n*/\nvar BaseChatPromptTemplate = class extends _base_js__WEBPACK_IMPORTED_MODULE_10__.BasePromptTemplate {\n\tconstructor(input) {\n\t\tsuper(input);\n\t}\n\tasync format(values) {\n\t\treturn (await this.formatPromptValue(values)).toString();\n\t}\n\tasync formatPromptValue(values) {\n\t\tconst resultMessages = await this.formatMessages(values);\n\t\treturn new _prompt_values_js__WEBPACK_IMPORTED_MODULE_9__.ChatPromptValue(resultMessages);\n\t}\n};\n/**\n* Class that represents a chat message prompt template. It extends the\n* BaseMessageStringPromptTemplate.\n*/\nvar ChatMessagePromptTemplate = class extends BaseMessageStringPromptTemplate {\n\tstatic lc_name() {\n\t\treturn \"ChatMessagePromptTemplate\";\n\t}\n\trole;\n\tconstructor(fields, role) {\n\t\tif (!(\"prompt\" in fields)) fields = {\n\t\t\tprompt: fields,\n\t\t\trole\n\t\t};\n\t\tsuper(fields);\n\t\tthis.role = fields.role;\n\t}\n\tasync format(values) {\n\t\treturn new _messages_chat_js__WEBPACK_IMPORTED_MODULE_2__.ChatMessage(await this.prompt.format(values), this.role);\n\t}\n\tstatic fromTemplate(template, role, options) {\n\t\treturn new this(_prompt_js__WEBPACK_IMPORTED_MODULE_13__.PromptTemplate.fromTemplate(template, { templateFormat: options?.templateFormat }), role);\n\t}\n};\nfunction isTextTemplateParam(param) {\n\tif (param === null || typeof param !== \"object\" || Array.isArray(param)) return false;\n\treturn Object.keys(param).length === 1 && \"text\" in param && typeof param.text === \"string\";\n}\nfunction isImageTemplateParam(param) {\n\tif (param === null || typeof param !== \"object\" || Array.isArray(param)) return false;\n\treturn \"image_url\" in param && (typeof param.image_url === \"string\" || typeof param.image_url === \"object\" && param.image_url !== null && \"url\" in param.image_url && typeof param.image_url.url === \"string\");\n}\nvar _StringImageMessagePromptTemplate = class extends BaseMessagePromptTemplate {\n\tlc_namespace = [\n\t\t\"langchain_core\",\n\t\t\"prompts\",\n\t\t\"chat\"\n\t];\n\tlc_serializable = true;\n\tinputVariables = [];\n\tadditionalOptions = {};\n\tprompt;\n\tmessageClass;\n\tstatic _messageClass() {\n\t\tthrow new Error(\"Can not invoke _messageClass from inside _StringImageMessagePromptTemplate\");\n\t}\n\tchatMessageClass;\n\tconstructor(fields, additionalOptions) {\n\t\tif (!(\"prompt\" in fields)) fields = { prompt: fields };\n\t\tsuper(fields);\n\t\tthis.prompt = fields.prompt;\n\t\tif (Array.isArray(this.prompt)) {\n\t\t\tlet inputVariables = [];\n\t\t\tthis.prompt.forEach((prompt) => {\n\t\t\t\tif (\"inputVariables\" in prompt) inputVariables = inputVariables.concat(prompt.inputVariables);\n\t\t\t});\n\t\t\tthis.inputVariables = inputVariables;\n\t\t} else this.inputVariables = this.prompt.inputVariables;\n\t\tthis.additionalOptions = additionalOptions ?? this.additionalOptions;\n\t}\n\tcreateMessage(content) {\n\t\tconst constructor = this.constructor;\n\t\tif (constructor._messageClass()) {\n\t\t\tconst MsgClass = constructor._messageClass();\n\t\t\treturn new MsgClass({ content });\n\t\t} else if (constructor.chatMessageClass) {\n\t\t\tconst MsgClass = constructor.chatMessageClass();\n\t\t\treturn new MsgClass({\n\t\t\t\tcontent,\n\t\t\t\trole: this.getRoleFromMessageClass(MsgClass.lc_name())\n\t\t\t});\n\t\t} else throw new Error(\"No message class defined\");\n\t}\n\tgetRoleFromMessageClass(name) {\n\t\tswitch (name) {\n\t\t\tcase \"HumanMessage\": return \"human\";\n\t\t\tcase \"AIMessage\": return \"ai\";\n\t\t\tcase \"SystemMessage\": return \"system\";\n\t\t\tcase \"ChatMessage\": return \"chat\";\n\t\t\tdefault: throw new Error(\"Invalid message class name\");\n\t\t}\n\t}\n\tstatic fromTemplate(template, additionalOptions) {\n\t\tif (typeof template === \"string\") return new this(_prompt_js__WEBPACK_IMPORTED_MODULE_13__.PromptTemplate.fromTemplate(template, additionalOptions));\n\t\tconst prompt = [];\n\t\tfor (const item of template) if (typeof item === \"string\") prompt.push(_prompt_js__WEBPACK_IMPORTED_MODULE_13__.PromptTemplate.fromTemplate(item, additionalOptions));\n\t\telse if (item === null) {} else if (isTextTemplateParam(item)) {\n\t\t\tlet text = \"\";\n\t\t\tif (typeof item.text === \"string\") text = item.text ?? \"\";\n\t\t\tconst options = {\n\t\t\t\t...additionalOptions,\n\t\t\t\tadditionalContentFields: item\n\t\t\t};\n\t\t\tprompt.push(_prompt_js__WEBPACK_IMPORTED_MODULE_13__.PromptTemplate.fromTemplate(text, options));\n\t\t} else if (isImageTemplateParam(item)) {\n\t\t\tlet imgTemplate = item.image_url ?? \"\";\n\t\t\tlet imgTemplateObject;\n\t\t\tlet inputVariables = [];\n\t\t\tif (typeof imgTemplate === \"string\") {\n\t\t\t\tlet parsedTemplate;\n\t\t\t\tif (additionalOptions?.templateFormat === \"mustache\") parsedTemplate = (0,_template_js__WEBPACK_IMPORTED_MODULE_12__.parseMustache)(imgTemplate);\n\t\t\t\telse parsedTemplate = (0,_template_js__WEBPACK_IMPORTED_MODULE_12__.parseFString)(imgTemplate);\n\t\t\t\tconst variables = parsedTemplate.flatMap((item$1) => item$1.type === \"variable\" ? [item$1.name] : []);\n\t\t\t\tif ((variables?.length ?? 0) > 0) {\n\t\t\t\t\tif (variables.length > 1) throw new Error(`Only one format variable allowed per image template.\\nGot: ${variables}\\nFrom: ${imgTemplate}`);\n\t\t\t\t\tinputVariables = [variables[0]];\n\t\t\t\t} else inputVariables = [];\n\t\t\t\timgTemplate = { url: imgTemplate };\n\t\t\t\timgTemplateObject = new _image_js__WEBPACK_IMPORTED_MODULE_14__.ImagePromptTemplate({\n\t\t\t\t\ttemplate: imgTemplate,\n\t\t\t\t\tinputVariables,\n\t\t\t\t\ttemplateFormat: additionalOptions?.templateFormat,\n\t\t\t\t\tadditionalContentFields: item\n\t\t\t\t});\n\t\t\t} else if (typeof imgTemplate === \"object\") {\n\t\t\t\tif (\"url\" in imgTemplate) {\n\t\t\t\t\tlet parsedTemplate;\n\t\t\t\t\tif (additionalOptions?.templateFormat === \"mustache\") parsedTemplate = (0,_template_js__WEBPACK_IMPORTED_MODULE_12__.parseMustache)(imgTemplate.url);\n\t\t\t\t\telse parsedTemplate = (0,_template_js__WEBPACK_IMPORTED_MODULE_12__.parseFString)(imgTemplate.url);\n\t\t\t\t\tinputVariables = parsedTemplate.flatMap((item$1) => item$1.type === \"variable\" ? [item$1.name] : []);\n\t\t\t\t} else inputVariables = [];\n\t\t\t\timgTemplateObject = new _image_js__WEBPACK_IMPORTED_MODULE_14__.ImagePromptTemplate({\n\t\t\t\t\ttemplate: imgTemplate,\n\t\t\t\t\tinputVariables,\n\t\t\t\t\ttemplateFormat: additionalOptions?.templateFormat,\n\t\t\t\t\tadditionalContentFields: item\n\t\t\t\t});\n\t\t\t} else throw new Error(\"Invalid image template\");\n\t\t\tprompt.push(imgTemplateObject);\n\t\t} else if (typeof item === \"object\") prompt.push(new _dict_js__WEBPACK_IMPORTED_MODULE_15__.DictPromptTemplate({\n\t\t\ttemplate: item,\n\t\t\ttemplateFormat: additionalOptions?.templateFormat\n\t\t}));\n\t\treturn new this({\n\t\t\tprompt,\n\t\t\tadditionalOptions\n\t\t});\n\t}\n\tasync format(input) {\n\t\tif (this.prompt instanceof _string_js__WEBPACK_IMPORTED_MODULE_11__.BaseStringPromptTemplate) {\n\t\t\tconst text = await this.prompt.format(input);\n\t\t\treturn this.createMessage(text);\n\t\t} else {\n\t\t\tconst content = [];\n\t\t\tfor (const prompt of this.prompt) {\n\t\t\t\tlet inputs = {};\n\t\t\t\tif (!(\"inputVariables\" in prompt)) throw new Error(`Prompt ${prompt} does not have inputVariables defined.`);\n\t\t\t\tfor (const item of prompt.inputVariables) {\n\t\t\t\t\tif (!inputs) inputs = { [item]: input[item] };\n\t\t\t\t\tinputs = {\n\t\t\t\t\t\t...inputs,\n\t\t\t\t\t\t[item]: input[item]\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (prompt instanceof _string_js__WEBPACK_IMPORTED_MODULE_11__.BaseStringPromptTemplate) {\n\t\t\t\t\tconst formatted = await prompt.format(inputs);\n\t\t\t\t\tlet additionalContentFields;\n\t\t\t\t\tif (\"additionalContentFields\" in prompt) additionalContentFields = prompt.additionalContentFields;\n\t\t\t\t\tif (formatted !== \"\") content.push({\n\t\t\t\t\t\t...additionalContentFields,\n\t\t\t\t\t\ttype: \"text\",\n\t\t\t\t\t\ttext: formatted\n\t\t\t\t\t});\n\t\t\t\t} else if (prompt instanceof _image_js__WEBPACK_IMPORTED_MODULE_14__.ImagePromptTemplate) {\n\t\t\t\t\tconst formatted = await prompt.format(inputs);\n\t\t\t\t\tlet additionalContentFields;\n\t\t\t\t\tif (\"additionalContentFields\" in prompt) additionalContentFields = prompt.additionalContentFields;\n\t\t\t\t\tcontent.push({\n\t\t\t\t\t\t...additionalContentFields,\n\t\t\t\t\t\ttype: \"image_url\",\n\t\t\t\t\t\timage_url: formatted\n\t\t\t\t\t});\n\t\t\t\t} else if (prompt instanceof _dict_js__WEBPACK_IMPORTED_MODULE_15__.DictPromptTemplate) {\n\t\t\t\t\tconst formatted = await prompt.format(inputs);\n\t\t\t\t\tlet additionalContentFields;\n\t\t\t\t\tif (\"additionalContentFields\" in prompt) additionalContentFields = prompt.additionalContentFields;\n\t\t\t\t\tcontent.push({\n\t\t\t\t\t\t...additionalContentFields,\n\t\t\t\t\t\t...formatted\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this.createMessage(content);\n\t\t}\n\t}\n\tasync formatMessages(values) {\n\t\treturn [await this.format(values)];\n\t}\n};\n/**\n* Class that represents a human message prompt template. It extends the\n* BaseMessageStringPromptTemplate.\n* @example\n* ```typescript\n* const message = HumanMessagePromptTemplate.fromTemplate(\"{text}\");\n* const formatted = await message.format({ text: \"Hello world!\" });\n*\n* const chatPrompt = ChatPromptTemplate.fromMessages([message]);\n* const formattedChatPrompt = await chatPrompt.invoke({\n*   text: \"Hello world!\",\n* });\n* ```\n*/\nvar HumanMessagePromptTemplate = class extends _StringImageMessagePromptTemplate {\n\tstatic _messageClass() {\n\t\treturn _messages_human_js__WEBPACK_IMPORTED_MODULE_3__.HumanMessage;\n\t}\n\tstatic lc_name() {\n\t\treturn \"HumanMessagePromptTemplate\";\n\t}\n};\n/**\n* Class that represents an AI message prompt template. It extends the\n* BaseMessageStringPromptTemplate.\n*/\nvar AIMessagePromptTemplate = class extends _StringImageMessagePromptTemplate {\n\tstatic _messageClass() {\n\t\treturn _messages_ai_js__WEBPACK_IMPORTED_MODULE_6__.AIMessage;\n\t}\n\tstatic lc_name() {\n\t\treturn \"AIMessagePromptTemplate\";\n\t}\n};\n/**\n* Class that represents a system message prompt template. It extends the\n* BaseMessageStringPromptTemplate.\n* @example\n* ```typescript\n* const message = SystemMessagePromptTemplate.fromTemplate(\"{text}\");\n* const formatted = await message.format({ text: \"Hello world!\" });\n*\n* const chatPrompt = ChatPromptTemplate.fromMessages([message]);\n* const formattedChatPrompt = await chatPrompt.invoke({\n*   text: \"Hello world!\",\n* });\n* ```\n*/\nvar SystemMessagePromptTemplate = class extends _StringImageMessagePromptTemplate {\n\tstatic _messageClass() {\n\t\treturn _messages_system_js__WEBPACK_IMPORTED_MODULE_4__.SystemMessage;\n\t}\n\tstatic lc_name() {\n\t\treturn \"SystemMessagePromptTemplate\";\n\t}\n};\nfunction _isBaseMessagePromptTemplate(baseMessagePromptTemplateLike) {\n\treturn typeof baseMessagePromptTemplateLike.formatMessages === \"function\";\n}\nfunction _coerceMessagePromptTemplateLike(messagePromptTemplateLike, extra) {\n\tif (_isBaseMessagePromptTemplate(messagePromptTemplateLike) || (0,_messages_base_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(messagePromptTemplateLike)) return messagePromptTemplateLike;\n\tif (Array.isArray(messagePromptTemplateLike) && messagePromptTemplateLike[0] === \"placeholder\") {\n\t\tconst messageContent = messagePromptTemplateLike[1];\n\t\tif (extra?.templateFormat === \"mustache\" && typeof messageContent === \"string\" && messageContent.slice(0, 2) === \"{{\" && messageContent.slice(-2) === \"}}\") {\n\t\t\tconst variableName = messageContent.slice(2, -2);\n\t\t\treturn new MessagesPlaceholder({\n\t\t\t\tvariableName,\n\t\t\t\toptional: true\n\t\t\t});\n\t\t} else if (typeof messageContent === \"string\" && messageContent[0] === \"{\" && messageContent[messageContent.length - 1] === \"}\") {\n\t\t\tconst variableName = messageContent.slice(1, -1);\n\t\t\treturn new MessagesPlaceholder({\n\t\t\t\tvariableName,\n\t\t\t\toptional: true\n\t\t\t});\n\t\t}\n\t\tthrow new Error(`Invalid placeholder template for format ${extra?.templateFormat ?? `\"f-string\"`}: \"${messagePromptTemplateLike[1]}\". Expected a variable name surrounded by ${extra?.templateFormat === \"mustache\" ? \"double\" : \"single\"} curly braces.`);\n\t}\n\tconst message = (0,_messages_utils_js__WEBPACK_IMPORTED_MODULE_5__.coerceMessageLikeToMessage)(messagePromptTemplateLike);\n\tlet templateData;\n\tif (typeof message.content === \"string\") templateData = message.content;\n\telse templateData = message.content.map((item) => {\n\t\tif (\"text\" in item) return {\n\t\t\t...item,\n\t\t\ttext: item.text\n\t\t};\n\t\telse if (\"image_url\" in item) return {\n\t\t\t...item,\n\t\t\timage_url: item.image_url\n\t\t};\n\t\telse return item;\n\t});\n\tif (message._getType() === \"human\") return HumanMessagePromptTemplate.fromTemplate(templateData, extra);\n\telse if (message._getType() === \"ai\") return AIMessagePromptTemplate.fromTemplate(templateData, extra);\n\telse if (message._getType() === \"system\") return SystemMessagePromptTemplate.fromTemplate(templateData, extra);\n\telse if (_messages_chat_js__WEBPACK_IMPORTED_MODULE_2__.ChatMessage.isInstance(message)) return ChatMessagePromptTemplate.fromTemplate(message.content, message.role, extra);\n\telse throw new Error(`Could not coerce message prompt template from input. Received message type: \"${message._getType()}\".`);\n}\nfunction isMessagesPlaceholder(x) {\n\treturn x.constructor.lc_name() === \"MessagesPlaceholder\";\n}\n/**\n* Class that represents a chat prompt. It extends the\n* BaseChatPromptTemplate and uses an array of BaseMessagePromptTemplate\n* instances to format a series of messages for a conversation.\n* @example\n* ```typescript\n* const message = SystemMessagePromptTemplate.fromTemplate(\"{text}\");\n* const chatPrompt = ChatPromptTemplate.fromMessages([\n*   [\"ai\", \"You are a helpful assistant.\"],\n*   message,\n* ]);\n* const formattedChatPrompt = await chatPrompt.invoke({\n*   text: \"Hello world!\",\n* });\n* ```\n*/\nvar ChatPromptTemplate = class ChatPromptTemplate extends BaseChatPromptTemplate {\n\tstatic lc_name() {\n\t\treturn \"ChatPromptTemplate\";\n\t}\n\tget lc_aliases() {\n\t\treturn { promptMessages: \"messages\" };\n\t}\n\tpromptMessages;\n\tvalidateTemplate = true;\n\ttemplateFormat = \"f-string\";\n\tconstructor(input) {\n\t\tsuper(input);\n\t\tif (input.templateFormat === \"mustache\" && input.validateTemplate === void 0) this.validateTemplate = false;\n\t\tObject.assign(this, input);\n\t\tif (this.validateTemplate) {\n\t\t\tconst inputVariablesMessages = /* @__PURE__ */ new Set();\n\t\t\tfor (const promptMessage of this.promptMessages) {\n\t\t\t\tif (promptMessage instanceof _messages_base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage) continue;\n\t\t\t\tfor (const inputVariable of promptMessage.inputVariables) inputVariablesMessages.add(inputVariable);\n\t\t\t}\n\t\t\tconst totalInputVariables = this.inputVariables;\n\t\t\tconst inputVariablesInstance = new Set(this.partialVariables ? totalInputVariables.concat(Object.keys(this.partialVariables)) : totalInputVariables);\n\t\t\tconst difference = new Set([...inputVariablesInstance].filter((x) => !inputVariablesMessages.has(x)));\n\t\t\tif (difference.size > 0) throw new Error(`Input variables \\`${[...difference]}\\` are not used in any of the prompt messages.`);\n\t\t\tconst otherDifference = new Set([...inputVariablesMessages].filter((x) => !inputVariablesInstance.has(x)));\n\t\t\tif (otherDifference.size > 0) throw new Error(`Input variables \\`${[...otherDifference]}\\` are used in prompt messages but not in the prompt template.`);\n\t\t}\n\t}\n\t_getPromptType() {\n\t\treturn \"chat\";\n\t}\n\tasync _parseImagePrompts(message, inputValues) {\n\t\tif (typeof message.content === \"string\") return message;\n\t\tconst formattedMessageContent = await Promise.all(message.content.map(async (item) => {\n\t\t\tif (item.type !== \"image_url\") return item;\n\t\t\tlet imageUrl = \"\";\n\t\t\tif (typeof item.image_url === \"string\") imageUrl = item.image_url;\n\t\t\telse if (typeof item.image_url === \"object\" && item.image_url !== null && \"url\" in item.image_url && typeof item.image_url.url === \"string\") imageUrl = item.image_url.url;\n\t\t\tconst promptTemplatePlaceholder = _prompt_js__WEBPACK_IMPORTED_MODULE_13__.PromptTemplate.fromTemplate(imageUrl, { templateFormat: this.templateFormat });\n\t\t\tconst formattedUrl = await promptTemplatePlaceholder.format(inputValues);\n\t\t\tif (typeof item.image_url === \"object\" && item.image_url !== null && \"url\" in item.image_url) item.image_url.url = formattedUrl;\n\t\t\telse item.image_url = formattedUrl;\n\t\t\treturn item;\n\t\t}));\n\t\tmessage.content = formattedMessageContent;\n\t\treturn message;\n\t}\n\tasync formatMessages(values) {\n\t\tconst allValues = await this.mergePartialAndUserVariables(values);\n\t\tlet resultMessages = [];\n\t\tfor (const promptMessage of this.promptMessages) if (promptMessage instanceof _messages_base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage) resultMessages.push(await this._parseImagePrompts(promptMessage, allValues));\n\t\telse {\n\t\t\tlet inputValues;\n\t\t\tif (this.templateFormat === \"mustache\") inputValues = { ...allValues };\n\t\t\telse inputValues = promptMessage.inputVariables.reduce((acc, inputVariable) => {\n\t\t\t\tif (!(inputVariable in allValues) && !(isMessagesPlaceholder(promptMessage) && promptMessage.optional)) {\n\t\t\t\t\tconst error = (0,_errors_index_js__WEBPACK_IMPORTED_MODULE_1__.addLangChainErrorFields)(/* @__PURE__ */ new Error(`Missing value for input variable \\`${inputVariable.toString()}\\``), \"INVALID_PROMPT_INPUT\");\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t\tacc[inputVariable] = allValues[inputVariable];\n\t\t\t\treturn acc;\n\t\t\t}, {});\n\t\t\tconst message = await promptMessage.formatMessages(inputValues);\n\t\t\tresultMessages = resultMessages.concat(message);\n\t\t}\n\t\treturn resultMessages;\n\t}\n\tasync partial(values) {\n\t\tconst newInputVariables = this.inputVariables.filter((iv) => !(iv in values));\n\t\tconst newPartialVariables = {\n\t\t\t...this.partialVariables ?? {},\n\t\t\t...values\n\t\t};\n\t\tconst promptDict = {\n\t\t\t...this,\n\t\t\tinputVariables: newInputVariables,\n\t\t\tpartialVariables: newPartialVariables\n\t\t};\n\t\treturn new ChatPromptTemplate(promptDict);\n\t}\n\tstatic fromTemplate(template, options) {\n\t\tconst prompt = _prompt_js__WEBPACK_IMPORTED_MODULE_13__.PromptTemplate.fromTemplate(template, options);\n\t\tconst humanTemplate = new HumanMessagePromptTemplate({ prompt });\n\t\treturn this.fromMessages([humanTemplate]);\n\t}\n\t/**\n\t* Create a chat model-specific prompt from individual chat messages\n\t* or message-like tuples.\n\t* @param promptMessages Messages to be passed to the chat model\n\t* @returns A new ChatPromptTemplate\n\t*/\n\tstatic fromMessages(promptMessages, extra) {\n\t\tconst flattenedMessages = promptMessages.reduce((acc, promptMessage) => acc.concat(promptMessage instanceof ChatPromptTemplate ? promptMessage.promptMessages : [_coerceMessagePromptTemplateLike(promptMessage, extra)]), []);\n\t\tconst flattenedPartialVariables = promptMessages.reduce((acc, promptMessage) => promptMessage instanceof ChatPromptTemplate ? Object.assign(acc, promptMessage.partialVariables) : acc, Object.create(null));\n\t\tconst inputVariables = /* @__PURE__ */ new Set();\n\t\tfor (const promptMessage of flattenedMessages) {\n\t\t\tif (promptMessage instanceof _messages_base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage) continue;\n\t\t\tfor (const inputVariable of promptMessage.inputVariables) {\n\t\t\t\tif (inputVariable in flattenedPartialVariables) continue;\n\t\t\t\tinputVariables.add(inputVariable);\n\t\t\t}\n\t\t}\n\t\treturn new this({\n\t\t\t...extra,\n\t\t\tinputVariables: [...inputVariables],\n\t\t\tpromptMessages: flattenedMessages,\n\t\t\tpartialVariables: flattenedPartialVariables,\n\t\t\ttemplateFormat: extra?.templateFormat\n\t\t});\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=chat.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9jaGF0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUU7QUFDSjtBQUNYO0FBQ0U7QUFDRTtBQUNZO0FBQ3BCO0FBQ0U7QUFDbEI7QUFDd0I7QUFDUDtBQUNRO0FBQ0s7QUFDZjtBQUNJO0FBQ0Y7O0FBRS9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4Qyx3REFBUTtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELGtCQUFrQjtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELDBFQUEwQjtBQUNyRiw2QkFBNkIsOEVBQTBCO0FBQ3ZELElBQUk7QUFDSjtBQUNBO0FBQ0EsY0FBYyxrQkFBa0I7QUFDaEMsdUJBQXVCLGNBQWM7QUFDckMsMkJBQTJCLFVBQVU7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMseURBQWtCO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLDhEQUFlO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLDBEQUFXO0FBQ3hCO0FBQ0E7QUFDQSxrQkFBa0IsdURBQWMsMEJBQTBCLHlDQUF5QztBQUNuRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsU0FBUztBQUNsQyxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0QsdURBQWM7QUFDbEU7QUFDQSx5RUFBeUUsdURBQWM7QUFDdkYsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsdURBQWM7QUFDN0IsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsNERBQWE7QUFDeEYsMEJBQTBCLDJEQUFZO0FBQ3RDO0FBQ0E7QUFDQSw2R0FBNkcsVUFBVSxVQUFVLFlBQVk7QUFDN0k7QUFDQSxNQUFNO0FBQ04sb0JBQW9CO0FBQ3BCLDRCQUE0QiwyREFBbUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsS0FBSztBQUNMO0FBQ0E7QUFDQSw0RUFBNEUsNERBQWE7QUFDekYsMkJBQTJCLDJEQUFZO0FBQ3ZDO0FBQ0EsTUFBTTtBQUNOLDRCQUE0QiwyREFBbUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsS0FBSztBQUNMO0FBQ0EsSUFBSSxtREFBbUQseURBQWtCO0FBQ3pFO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSw2QkFBNkIsaUVBQXdCO0FBQ3JEO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLFFBQVE7QUFDekU7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixpRUFBd0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sTUFBTSwyQkFBMkIsMkRBQW1CO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLE1BQU0sMkJBQTJCLHlEQUFrQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxLQUFLO0FBQ2pFLDJDQUEyQyxzQkFBc0I7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDREQUFZO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHNEQUFTO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELEtBQUs7QUFDbEUsMkNBQTJDLHNCQUFzQjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsOERBQWE7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0VBQWdFLGdFQUFhO0FBQzdFO0FBQ0E7QUFDQSxzSEFBc0gscUNBQXFDO0FBQzNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLElBQUksdUVBQXVFLHFEQUFxRDtBQUNoSTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLDZEQUE2RCxzQ0FBc0MsS0FBSyw2QkFBNkIsNENBQTRDLDREQUE0RDtBQUM3TztBQUNBLGlCQUFpQiw4RUFBMEI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLFVBQVUsMERBQVc7QUFDckIsc0dBQXNHLG1CQUFtQjtBQUN6SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxLQUFLO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLDBEQUFXO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsZ0JBQWdCO0FBQ2pGO0FBQ0Esc0VBQXNFLHFCQUFxQjtBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsdURBQWMsMEJBQTBCLHFDQUFxQztBQUNsSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRkFBZ0YsMERBQVc7QUFDM0Y7QUFDQTtBQUNBLDJEQUEyRDtBQUMzRDtBQUNBO0FBQ0EsbUJBQW1CLHlFQUF1QixpRUFBaUUseUJBQXlCO0FBQ3BJO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxJQUFJO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix1REFBYztBQUMvQix5REFBeUQsUUFBUTtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQywwREFBVztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDb1A7QUFDcFAiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9wcm9tcHRzL2NoYXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZU1lc3NhZ2UsIGlzQmFzZU1lc3NhZ2UgfSBmcm9tIFwiLi4vbWVzc2FnZXMvYmFzZS5qc1wiO1xuaW1wb3J0IHsgYWRkTGFuZ0NoYWluRXJyb3JGaWVsZHMgfSBmcm9tIFwiLi4vZXJyb3JzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBDaGF0TWVzc2FnZSB9IGZyb20gXCIuLi9tZXNzYWdlcy9jaGF0LmpzXCI7XG5pbXBvcnQgeyBIdW1hbk1lc3NhZ2UgfSBmcm9tIFwiLi4vbWVzc2FnZXMvaHVtYW4uanNcIjtcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2UgfSBmcm9tIFwiLi4vbWVzc2FnZXMvc3lzdGVtLmpzXCI7XG5pbXBvcnQgeyBjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSB9IGZyb20gXCIuLi9tZXNzYWdlcy91dGlscy5qc1wiO1xuaW1wb3J0IHsgQUlNZXNzYWdlIH0gZnJvbSBcIi4uL21lc3NhZ2VzL2FpLmpzXCI7XG5pbXBvcnQgeyBSdW5uYWJsZSB9IGZyb20gXCIuLi9ydW5uYWJsZXMvYmFzZS5qc1wiO1xuaW1wb3J0IFwiLi4vbWVzc2FnZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IENoYXRQcm9tcHRWYWx1ZSB9IGZyb20gXCIuLi9wcm9tcHRfdmFsdWVzLmpzXCI7XG5pbXBvcnQgeyBCYXNlUHJvbXB0VGVtcGxhdGUgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBCYXNlU3RyaW5nUHJvbXB0VGVtcGxhdGUgfSBmcm9tIFwiLi9zdHJpbmcuanNcIjtcbmltcG9ydCB7IHBhcnNlRlN0cmluZywgcGFyc2VNdXN0YWNoZSB9IGZyb20gXCIuL3RlbXBsYXRlLmpzXCI7XG5pbXBvcnQgeyBQcm9tcHRUZW1wbGF0ZSB9IGZyb20gXCIuL3Byb21wdC5qc1wiO1xuaW1wb3J0IHsgSW1hZ2VQcm9tcHRUZW1wbGF0ZSB9IGZyb20gXCIuL2ltYWdlLmpzXCI7XG5pbXBvcnQgeyBEaWN0UHJvbXB0VGVtcGxhdGUgfSBmcm9tIFwiLi9kaWN0LmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcHJvbXB0cy9jaGF0LnRzXG4vKipcbiogQWJzdHJhY3QgY2xhc3MgdGhhdCBzZXJ2ZXMgYXMgYSBiYXNlIGZvciBjcmVhdGluZyBtZXNzYWdlIHByb21wdFxuKiB0ZW1wbGF0ZXMuIEl0IGRlZmluZXMgaG93IHRvIGZvcm1hdCBtZXNzYWdlcyBmb3IgZGlmZmVyZW50IHJvbGVzIGluIGFcbiogY29udmVyc2F0aW9uLlxuKi9cbnZhciBCYXNlTWVzc2FnZVByb21wdFRlbXBsYXRlID0gY2xhc3MgZXh0ZW5kcyBSdW5uYWJsZSB7XG5cdGxjX25hbWVzcGFjZSA9IFtcblx0XHRcImxhbmdjaGFpbl9jb3JlXCIsXG5cdFx0XCJwcm9tcHRzXCIsXG5cdFx0XCJjaGF0XCJcblx0XTtcblx0bGNfc2VyaWFsaXphYmxlID0gdHJ1ZTtcblx0LyoqXG5cdCogQ2FsbHMgdGhlIGZvcm1hdE1lc3NhZ2VzIG1ldGhvZCB3aXRoIHRoZSBwcm92aWRlZCBpbnB1dCBhbmQgb3B0aW9ucy5cblx0KiBAcGFyYW0gaW5wdXQgSW5wdXQgZm9yIHRoZSBmb3JtYXRNZXNzYWdlcyBtZXRob2Rcblx0KiBAcGFyYW0gb3B0aW9ucyBPcHRpb25hbCBCYXNlQ2FsbGJhY2tDb25maWdcblx0KiBAcmV0dXJucyBGb3JtYXR0ZWQgb3V0cHV0IG1lc3NhZ2VzXG5cdCovXG5cdGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuXHRcdHJldHVybiB0aGlzLl9jYWxsV2l0aENvbmZpZygoaW5wdXQkMSkgPT4gdGhpcy5mb3JtYXRNZXNzYWdlcyhpbnB1dCQxKSwgaW5wdXQsIHtcblx0XHRcdC4uLm9wdGlvbnMsXG5cdFx0XHRydW5UeXBlOiBcInByb21wdFwiXG5cdFx0fSk7XG5cdH1cbn07XG4vKipcbiogQ2xhc3MgdGhhdCByZXByZXNlbnRzIGEgcGxhY2Vob2xkZXIgZm9yIG1lc3NhZ2VzIGluIGEgY2hhdCBwcm9tcHQuIEl0XG4qIGV4dGVuZHMgdGhlIEJhc2VNZXNzYWdlUHJvbXB0VGVtcGxhdGUuXG4qL1xudmFyIE1lc3NhZ2VzUGxhY2Vob2xkZXIgPSBjbGFzcyBleHRlbmRzIEJhc2VNZXNzYWdlUHJvbXB0VGVtcGxhdGUge1xuXHRzdGF0aWMgbGNfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJNZXNzYWdlc1BsYWNlaG9sZGVyXCI7XG5cdH1cblx0dmFyaWFibGVOYW1lO1xuXHRvcHRpb25hbDtcblx0Y29uc3RydWN0b3IoZmllbGRzKSB7XG5cdFx0aWYgKHR5cGVvZiBmaWVsZHMgPT09IFwic3RyaW5nXCIpIGZpZWxkcyA9IHsgdmFyaWFibGVOYW1lOiBmaWVsZHMgfTtcblx0XHRzdXBlcihmaWVsZHMpO1xuXHRcdHRoaXMudmFyaWFibGVOYW1lID0gZmllbGRzLnZhcmlhYmxlTmFtZTtcblx0XHR0aGlzLm9wdGlvbmFsID0gZmllbGRzLm9wdGlvbmFsID8/IGZhbHNlO1xuXHR9XG5cdGdldCBpbnB1dFZhcmlhYmxlcygpIHtcblx0XHRyZXR1cm4gW3RoaXMudmFyaWFibGVOYW1lXTtcblx0fVxuXHRhc3luYyBmb3JtYXRNZXNzYWdlcyh2YWx1ZXMpIHtcblx0XHRjb25zdCBpbnB1dCA9IHZhbHVlc1t0aGlzLnZhcmlhYmxlTmFtZV07XG5cdFx0aWYgKHRoaXMub3B0aW9uYWwgJiYgIWlucHV0KSByZXR1cm4gW107XG5cdFx0ZWxzZSBpZiAoIWlucHV0KSB7XG5cdFx0XHRjb25zdCBlcnJvciA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgRXJyb3IoYEZpZWxkIFwiJHt0aGlzLnZhcmlhYmxlTmFtZX1cIiBpbiBwcm9tcHQgdXNlcyBhIE1lc3NhZ2VzUGxhY2Vob2xkZXIsIHdoaWNoIGV4cGVjdHMgYW4gYXJyYXkgb2YgQmFzZU1lc3NhZ2VzIGFzIGFuIGlucHV0IHZhbHVlLiBSZWNlaXZlZDogdW5kZWZpbmVkYCk7XG5cdFx0XHRlcnJvci5uYW1lID0gXCJJbnB1dEZvcm1hdEVycm9yXCI7XG5cdFx0XHR0aHJvdyBlcnJvcjtcblx0XHR9XG5cdFx0bGV0IGZvcm1hdHRlZE1lc3NhZ2VzO1xuXHRcdHRyeSB7XG5cdFx0XHRpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIGZvcm1hdHRlZE1lc3NhZ2VzID0gaW5wdXQubWFwKGNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlKTtcblx0XHRcdGVsc2UgZm9ybWF0dGVkTWVzc2FnZXMgPSBbY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UoaW5wdXQpXTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRjb25zdCByZWFkYWJsZUlucHV0ID0gdHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiID8gaW5wdXQgOiBKU09OLnN0cmluZ2lmeShpbnB1dCwgbnVsbCwgMik7XG5cdFx0XHRjb25zdCBlcnJvciA9IG5ldyBFcnJvcihbXG5cdFx0XHRcdGBGaWVsZCBcIiR7dGhpcy52YXJpYWJsZU5hbWV9XCIgaW4gcHJvbXB0IHVzZXMgYSBNZXNzYWdlc1BsYWNlaG9sZGVyLCB3aGljaCBleHBlY3RzIGFuIGFycmF5IG9mIEJhc2VNZXNzYWdlcyBvciBjb2VyY2VhYmxlIHZhbHVlcyBhcyBpbnB1dC5gLFxuXHRcdFx0XHRgUmVjZWl2ZWQgdmFsdWU6ICR7cmVhZGFibGVJbnB1dH1gLFxuXHRcdFx0XHRgQWRkaXRpb25hbCBtZXNzYWdlOiAke2UubWVzc2FnZX1gXG5cdFx0XHRdLmpvaW4oXCJcXG5cXG5cIikpO1xuXHRcdFx0ZXJyb3IubmFtZSA9IFwiSW5wdXRGb3JtYXRFcnJvclwiO1xuXHRcdFx0ZXJyb3IubGNfZXJyb3JfY29kZSA9IGUubGNfZXJyb3JfY29kZTtcblx0XHRcdHRocm93IGVycm9yO1xuXHRcdH1cblx0XHRyZXR1cm4gZm9ybWF0dGVkTWVzc2FnZXM7XG5cdH1cbn07XG4vKipcbiogQWJzdHJhY3QgY2xhc3MgdGhhdCBzZXJ2ZXMgYXMgYSBiYXNlIGZvciBjcmVhdGluZyBtZXNzYWdlIHN0cmluZyBwcm9tcHRcbiogdGVtcGxhdGVzLiBJdCBleHRlbmRzIHRoZSBCYXNlTWVzc2FnZVByb21wdFRlbXBsYXRlLlxuKi9cbnZhciBCYXNlTWVzc2FnZVN0cmluZ1Byb21wdFRlbXBsYXRlID0gY2xhc3MgZXh0ZW5kcyBCYXNlTWVzc2FnZVByb21wdFRlbXBsYXRlIHtcblx0cHJvbXB0O1xuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHRpZiAoIShcInByb21wdFwiIGluIGZpZWxkcykpIGZpZWxkcyA9IHsgcHJvbXB0OiBmaWVsZHMgfTtcblx0XHRzdXBlcihmaWVsZHMpO1xuXHRcdHRoaXMucHJvbXB0ID0gZmllbGRzLnByb21wdDtcblx0fVxuXHRnZXQgaW5wdXRWYXJpYWJsZXMoKSB7XG5cdFx0cmV0dXJuIHRoaXMucHJvbXB0LmlucHV0VmFyaWFibGVzO1xuXHR9XG5cdGFzeW5jIGZvcm1hdE1lc3NhZ2VzKHZhbHVlcykge1xuXHRcdHJldHVybiBbYXdhaXQgdGhpcy5mb3JtYXQodmFsdWVzKV07XG5cdH1cbn07XG4vKipcbiogQWJzdHJhY3QgY2xhc3MgdGhhdCBzZXJ2ZXMgYXMgYSBiYXNlIGZvciBjcmVhdGluZyBjaGF0IHByb21wdFxuKiB0ZW1wbGF0ZXMuIEl0IGV4dGVuZHMgdGhlIEJhc2VQcm9tcHRUZW1wbGF0ZS5cbiovXG52YXIgQmFzZUNoYXRQcm9tcHRUZW1wbGF0ZSA9IGNsYXNzIGV4dGVuZHMgQmFzZVByb21wdFRlbXBsYXRlIHtcblx0Y29uc3RydWN0b3IoaW5wdXQpIHtcblx0XHRzdXBlcihpbnB1dCk7XG5cdH1cblx0YXN5bmMgZm9ybWF0KHZhbHVlcykge1xuXHRcdHJldHVybiAoYXdhaXQgdGhpcy5mb3JtYXRQcm9tcHRWYWx1ZSh2YWx1ZXMpKS50b1N0cmluZygpO1xuXHR9XG5cdGFzeW5jIGZvcm1hdFByb21wdFZhbHVlKHZhbHVlcykge1xuXHRcdGNvbnN0IHJlc3VsdE1lc3NhZ2VzID0gYXdhaXQgdGhpcy5mb3JtYXRNZXNzYWdlcyh2YWx1ZXMpO1xuXHRcdHJldHVybiBuZXcgQ2hhdFByb21wdFZhbHVlKHJlc3VsdE1lc3NhZ2VzKTtcblx0fVxufTtcbi8qKlxuKiBDbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBjaGF0IG1lc3NhZ2UgcHJvbXB0IHRlbXBsYXRlLiBJdCBleHRlbmRzIHRoZVxuKiBCYXNlTWVzc2FnZVN0cmluZ1Byb21wdFRlbXBsYXRlLlxuKi9cbnZhciBDaGF0TWVzc2FnZVByb21wdFRlbXBsYXRlID0gY2xhc3MgZXh0ZW5kcyBCYXNlTWVzc2FnZVN0cmluZ1Byb21wdFRlbXBsYXRlIHtcblx0c3RhdGljIGxjX25hbWUoKSB7XG5cdFx0cmV0dXJuIFwiQ2hhdE1lc3NhZ2VQcm9tcHRUZW1wbGF0ZVwiO1xuXHR9XG5cdHJvbGU7XG5cdGNvbnN0cnVjdG9yKGZpZWxkcywgcm9sZSkge1xuXHRcdGlmICghKFwicHJvbXB0XCIgaW4gZmllbGRzKSkgZmllbGRzID0ge1xuXHRcdFx0cHJvbXB0OiBmaWVsZHMsXG5cdFx0XHRyb2xlXG5cdFx0fTtcblx0XHRzdXBlcihmaWVsZHMpO1xuXHRcdHRoaXMucm9sZSA9IGZpZWxkcy5yb2xlO1xuXHR9XG5cdGFzeW5jIGZvcm1hdCh2YWx1ZXMpIHtcblx0XHRyZXR1cm4gbmV3IENoYXRNZXNzYWdlKGF3YWl0IHRoaXMucHJvbXB0LmZvcm1hdCh2YWx1ZXMpLCB0aGlzLnJvbGUpO1xuXHR9XG5cdHN0YXRpYyBmcm9tVGVtcGxhdGUodGVtcGxhdGUsIHJvbGUsIG9wdGlvbnMpIHtcblx0XHRyZXR1cm4gbmV3IHRoaXMoUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKHRlbXBsYXRlLCB7IHRlbXBsYXRlRm9ybWF0OiBvcHRpb25zPy50ZW1wbGF0ZUZvcm1hdCB9KSwgcm9sZSk7XG5cdH1cbn07XG5mdW5jdGlvbiBpc1RleHRUZW1wbGF0ZVBhcmFtKHBhcmFtKSB7XG5cdGlmIChwYXJhbSA9PT0gbnVsbCB8fCB0eXBlb2YgcGFyYW0gIT09IFwib2JqZWN0XCIgfHwgQXJyYXkuaXNBcnJheShwYXJhbSkpIHJldHVybiBmYWxzZTtcblx0cmV0dXJuIE9iamVjdC5rZXlzKHBhcmFtKS5sZW5ndGggPT09IDEgJiYgXCJ0ZXh0XCIgaW4gcGFyYW0gJiYgdHlwZW9mIHBhcmFtLnRleHQgPT09IFwic3RyaW5nXCI7XG59XG5mdW5jdGlvbiBpc0ltYWdlVGVtcGxhdGVQYXJhbShwYXJhbSkge1xuXHRpZiAocGFyYW0gPT09IG51bGwgfHwgdHlwZW9mIHBhcmFtICE9PSBcIm9iamVjdFwiIHx8IEFycmF5LmlzQXJyYXkocGFyYW0pKSByZXR1cm4gZmFsc2U7XG5cdHJldHVybiBcImltYWdlX3VybFwiIGluIHBhcmFtICYmICh0eXBlb2YgcGFyYW0uaW1hZ2VfdXJsID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBwYXJhbS5pbWFnZV91cmwgPT09IFwib2JqZWN0XCIgJiYgcGFyYW0uaW1hZ2VfdXJsICE9PSBudWxsICYmIFwidXJsXCIgaW4gcGFyYW0uaW1hZ2VfdXJsICYmIHR5cGVvZiBwYXJhbS5pbWFnZV91cmwudXJsID09PSBcInN0cmluZ1wiKTtcbn1cbnZhciBfU3RyaW5nSW1hZ2VNZXNzYWdlUHJvbXB0VGVtcGxhdGUgPSBjbGFzcyBleHRlbmRzIEJhc2VNZXNzYWdlUHJvbXB0VGVtcGxhdGUge1xuXHRsY19uYW1lc3BhY2UgPSBbXG5cdFx0XCJsYW5nY2hhaW5fY29yZVwiLFxuXHRcdFwicHJvbXB0c1wiLFxuXHRcdFwiY2hhdFwiXG5cdF07XG5cdGxjX3NlcmlhbGl6YWJsZSA9IHRydWU7XG5cdGlucHV0VmFyaWFibGVzID0gW107XG5cdGFkZGl0aW9uYWxPcHRpb25zID0ge307XG5cdHByb21wdDtcblx0bWVzc2FnZUNsYXNzO1xuXHRzdGF0aWMgX21lc3NhZ2VDbGFzcygpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDYW4gbm90IGludm9rZSBfbWVzc2FnZUNsYXNzIGZyb20gaW5zaWRlIF9TdHJpbmdJbWFnZU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZVwiKTtcblx0fVxuXHRjaGF0TWVzc2FnZUNsYXNzO1xuXHRjb25zdHJ1Y3RvcihmaWVsZHMsIGFkZGl0aW9uYWxPcHRpb25zKSB7XG5cdFx0aWYgKCEoXCJwcm9tcHRcIiBpbiBmaWVsZHMpKSBmaWVsZHMgPSB7IHByb21wdDogZmllbGRzIH07XG5cdFx0c3VwZXIoZmllbGRzKTtcblx0XHR0aGlzLnByb21wdCA9IGZpZWxkcy5wcm9tcHQ7XG5cdFx0aWYgKEFycmF5LmlzQXJyYXkodGhpcy5wcm9tcHQpKSB7XG5cdFx0XHRsZXQgaW5wdXRWYXJpYWJsZXMgPSBbXTtcblx0XHRcdHRoaXMucHJvbXB0LmZvckVhY2goKHByb21wdCkgPT4ge1xuXHRcdFx0XHRpZiAoXCJpbnB1dFZhcmlhYmxlc1wiIGluIHByb21wdCkgaW5wdXRWYXJpYWJsZXMgPSBpbnB1dFZhcmlhYmxlcy5jb25jYXQocHJvbXB0LmlucHV0VmFyaWFibGVzKTtcblx0XHRcdH0pO1xuXHRcdFx0dGhpcy5pbnB1dFZhcmlhYmxlcyA9IGlucHV0VmFyaWFibGVzO1xuXHRcdH0gZWxzZSB0aGlzLmlucHV0VmFyaWFibGVzID0gdGhpcy5wcm9tcHQuaW5wdXRWYXJpYWJsZXM7XG5cdFx0dGhpcy5hZGRpdGlvbmFsT3B0aW9ucyA9IGFkZGl0aW9uYWxPcHRpb25zID8/IHRoaXMuYWRkaXRpb25hbE9wdGlvbnM7XG5cdH1cblx0Y3JlYXRlTWVzc2FnZShjb250ZW50KSB7XG5cdFx0Y29uc3QgY29uc3RydWN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuXHRcdGlmIChjb25zdHJ1Y3Rvci5fbWVzc2FnZUNsYXNzKCkpIHtcblx0XHRcdGNvbnN0IE1zZ0NsYXNzID0gY29uc3RydWN0b3IuX21lc3NhZ2VDbGFzcygpO1xuXHRcdFx0cmV0dXJuIG5ldyBNc2dDbGFzcyh7IGNvbnRlbnQgfSk7XG5cdFx0fSBlbHNlIGlmIChjb25zdHJ1Y3Rvci5jaGF0TWVzc2FnZUNsYXNzKSB7XG5cdFx0XHRjb25zdCBNc2dDbGFzcyA9IGNvbnN0cnVjdG9yLmNoYXRNZXNzYWdlQ2xhc3MoKTtcblx0XHRcdHJldHVybiBuZXcgTXNnQ2xhc3Moe1xuXHRcdFx0XHRjb250ZW50LFxuXHRcdFx0XHRyb2xlOiB0aGlzLmdldFJvbGVGcm9tTWVzc2FnZUNsYXNzKE1zZ0NsYXNzLmxjX25hbWUoKSlcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB0aHJvdyBuZXcgRXJyb3IoXCJObyBtZXNzYWdlIGNsYXNzIGRlZmluZWRcIik7XG5cdH1cblx0Z2V0Um9sZUZyb21NZXNzYWdlQ2xhc3MobmFtZSkge1xuXHRcdHN3aXRjaCAobmFtZSkge1xuXHRcdFx0Y2FzZSBcIkh1bWFuTWVzc2FnZVwiOiByZXR1cm4gXCJodW1hblwiO1xuXHRcdFx0Y2FzZSBcIkFJTWVzc2FnZVwiOiByZXR1cm4gXCJhaVwiO1xuXHRcdFx0Y2FzZSBcIlN5c3RlbU1lc3NhZ2VcIjogcmV0dXJuIFwic3lzdGVtXCI7XG5cdFx0XHRjYXNlIFwiQ2hhdE1lc3NhZ2VcIjogcmV0dXJuIFwiY2hhdFwiO1xuXHRcdFx0ZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBtZXNzYWdlIGNsYXNzIG5hbWVcIik7XG5cdFx0fVxuXHR9XG5cdHN0YXRpYyBmcm9tVGVtcGxhdGUodGVtcGxhdGUsIGFkZGl0aW9uYWxPcHRpb25zKSB7XG5cdFx0aWYgKHR5cGVvZiB0ZW1wbGF0ZSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIG5ldyB0aGlzKFByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZSh0ZW1wbGF0ZSwgYWRkaXRpb25hbE9wdGlvbnMpKTtcblx0XHRjb25zdCBwcm9tcHQgPSBbXTtcblx0XHRmb3IgKGNvbnN0IGl0ZW0gb2YgdGVtcGxhdGUpIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIikgcHJvbXB0LnB1c2goUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKGl0ZW0sIGFkZGl0aW9uYWxPcHRpb25zKSk7XG5cdFx0ZWxzZSBpZiAoaXRlbSA9PT0gbnVsbCkge30gZWxzZSBpZiAoaXNUZXh0VGVtcGxhdGVQYXJhbShpdGVtKSkge1xuXHRcdFx0bGV0IHRleHQgPSBcIlwiO1xuXHRcdFx0aWYgKHR5cGVvZiBpdGVtLnRleHQgPT09IFwic3RyaW5nXCIpIHRleHQgPSBpdGVtLnRleHQgPz8gXCJcIjtcblx0XHRcdGNvbnN0IG9wdGlvbnMgPSB7XG5cdFx0XHRcdC4uLmFkZGl0aW9uYWxPcHRpb25zLFxuXHRcdFx0XHRhZGRpdGlvbmFsQ29udGVudEZpZWxkczogaXRlbVxuXHRcdFx0fTtcblx0XHRcdHByb21wdC5wdXNoKFByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZSh0ZXh0LCBvcHRpb25zKSk7XG5cdFx0fSBlbHNlIGlmIChpc0ltYWdlVGVtcGxhdGVQYXJhbShpdGVtKSkge1xuXHRcdFx0bGV0IGltZ1RlbXBsYXRlID0gaXRlbS5pbWFnZV91cmwgPz8gXCJcIjtcblx0XHRcdGxldCBpbWdUZW1wbGF0ZU9iamVjdDtcblx0XHRcdGxldCBpbnB1dFZhcmlhYmxlcyA9IFtdO1xuXHRcdFx0aWYgKHR5cGVvZiBpbWdUZW1wbGF0ZSA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0XHRsZXQgcGFyc2VkVGVtcGxhdGU7XG5cdFx0XHRcdGlmIChhZGRpdGlvbmFsT3B0aW9ucz8udGVtcGxhdGVGb3JtYXQgPT09IFwibXVzdGFjaGVcIikgcGFyc2VkVGVtcGxhdGUgPSBwYXJzZU11c3RhY2hlKGltZ1RlbXBsYXRlKTtcblx0XHRcdFx0ZWxzZSBwYXJzZWRUZW1wbGF0ZSA9IHBhcnNlRlN0cmluZyhpbWdUZW1wbGF0ZSk7XG5cdFx0XHRcdGNvbnN0IHZhcmlhYmxlcyA9IHBhcnNlZFRlbXBsYXRlLmZsYXRNYXAoKGl0ZW0kMSkgPT4gaXRlbSQxLnR5cGUgPT09IFwidmFyaWFibGVcIiA/IFtpdGVtJDEubmFtZV0gOiBbXSk7XG5cdFx0XHRcdGlmICgodmFyaWFibGVzPy5sZW5ndGggPz8gMCkgPiAwKSB7XG5cdFx0XHRcdFx0aWYgKHZhcmlhYmxlcy5sZW5ndGggPiAxKSB0aHJvdyBuZXcgRXJyb3IoYE9ubHkgb25lIGZvcm1hdCB2YXJpYWJsZSBhbGxvd2VkIHBlciBpbWFnZSB0ZW1wbGF0ZS5cXG5Hb3Q6ICR7dmFyaWFibGVzfVxcbkZyb206ICR7aW1nVGVtcGxhdGV9YCk7XG5cdFx0XHRcdFx0aW5wdXRWYXJpYWJsZXMgPSBbdmFyaWFibGVzWzBdXTtcblx0XHRcdFx0fSBlbHNlIGlucHV0VmFyaWFibGVzID0gW107XG5cdFx0XHRcdGltZ1RlbXBsYXRlID0geyB1cmw6IGltZ1RlbXBsYXRlIH07XG5cdFx0XHRcdGltZ1RlbXBsYXRlT2JqZWN0ID0gbmV3IEltYWdlUHJvbXB0VGVtcGxhdGUoe1xuXHRcdFx0XHRcdHRlbXBsYXRlOiBpbWdUZW1wbGF0ZSxcblx0XHRcdFx0XHRpbnB1dFZhcmlhYmxlcyxcblx0XHRcdFx0XHR0ZW1wbGF0ZUZvcm1hdDogYWRkaXRpb25hbE9wdGlvbnM/LnRlbXBsYXRlRm9ybWF0LFxuXHRcdFx0XHRcdGFkZGl0aW9uYWxDb250ZW50RmllbGRzOiBpdGVtXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIGlmICh0eXBlb2YgaW1nVGVtcGxhdGUgPT09IFwib2JqZWN0XCIpIHtcblx0XHRcdFx0aWYgKFwidXJsXCIgaW4gaW1nVGVtcGxhdGUpIHtcblx0XHRcdFx0XHRsZXQgcGFyc2VkVGVtcGxhdGU7XG5cdFx0XHRcdFx0aWYgKGFkZGl0aW9uYWxPcHRpb25zPy50ZW1wbGF0ZUZvcm1hdCA9PT0gXCJtdXN0YWNoZVwiKSBwYXJzZWRUZW1wbGF0ZSA9IHBhcnNlTXVzdGFjaGUoaW1nVGVtcGxhdGUudXJsKTtcblx0XHRcdFx0XHRlbHNlIHBhcnNlZFRlbXBsYXRlID0gcGFyc2VGU3RyaW5nKGltZ1RlbXBsYXRlLnVybCk7XG5cdFx0XHRcdFx0aW5wdXRWYXJpYWJsZXMgPSBwYXJzZWRUZW1wbGF0ZS5mbGF0TWFwKChpdGVtJDEpID0+IGl0ZW0kMS50eXBlID09PSBcInZhcmlhYmxlXCIgPyBbaXRlbSQxLm5hbWVdIDogW10pO1xuXHRcdFx0XHR9IGVsc2UgaW5wdXRWYXJpYWJsZXMgPSBbXTtcblx0XHRcdFx0aW1nVGVtcGxhdGVPYmplY3QgPSBuZXcgSW1hZ2VQcm9tcHRUZW1wbGF0ZSh7XG5cdFx0XHRcdFx0dGVtcGxhdGU6IGltZ1RlbXBsYXRlLFxuXHRcdFx0XHRcdGlucHV0VmFyaWFibGVzLFxuXHRcdFx0XHRcdHRlbXBsYXRlRm9ybWF0OiBhZGRpdGlvbmFsT3B0aW9ucz8udGVtcGxhdGVGb3JtYXQsXG5cdFx0XHRcdFx0YWRkaXRpb25hbENvbnRlbnRGaWVsZHM6IGl0ZW1cblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2UgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpbWFnZSB0ZW1wbGF0ZVwiKTtcblx0XHRcdHByb21wdC5wdXNoKGltZ1RlbXBsYXRlT2JqZWN0KTtcblx0XHR9IGVsc2UgaWYgKHR5cGVvZiBpdGVtID09PSBcIm9iamVjdFwiKSBwcm9tcHQucHVzaChuZXcgRGljdFByb21wdFRlbXBsYXRlKHtcblx0XHRcdHRlbXBsYXRlOiBpdGVtLFxuXHRcdFx0dGVtcGxhdGVGb3JtYXQ6IGFkZGl0aW9uYWxPcHRpb25zPy50ZW1wbGF0ZUZvcm1hdFxuXHRcdH0pKTtcblx0XHRyZXR1cm4gbmV3IHRoaXMoe1xuXHRcdFx0cHJvbXB0LFxuXHRcdFx0YWRkaXRpb25hbE9wdGlvbnNcblx0XHR9KTtcblx0fVxuXHRhc3luYyBmb3JtYXQoaW5wdXQpIHtcblx0XHRpZiAodGhpcy5wcm9tcHQgaW5zdGFuY2VvZiBCYXNlU3RyaW5nUHJvbXB0VGVtcGxhdGUpIHtcblx0XHRcdGNvbnN0IHRleHQgPSBhd2FpdCB0aGlzLnByb21wdC5mb3JtYXQoaW5wdXQpO1xuXHRcdFx0cmV0dXJuIHRoaXMuY3JlYXRlTWVzc2FnZSh0ZXh0KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc3QgY29udGVudCA9IFtdO1xuXHRcdFx0Zm9yIChjb25zdCBwcm9tcHQgb2YgdGhpcy5wcm9tcHQpIHtcblx0XHRcdFx0bGV0IGlucHV0cyA9IHt9O1xuXHRcdFx0XHRpZiAoIShcImlucHV0VmFyaWFibGVzXCIgaW4gcHJvbXB0KSkgdGhyb3cgbmV3IEVycm9yKGBQcm9tcHQgJHtwcm9tcHR9IGRvZXMgbm90IGhhdmUgaW5wdXRWYXJpYWJsZXMgZGVmaW5lZC5gKTtcblx0XHRcdFx0Zm9yIChjb25zdCBpdGVtIG9mIHByb21wdC5pbnB1dFZhcmlhYmxlcykge1xuXHRcdFx0XHRcdGlmICghaW5wdXRzKSBpbnB1dHMgPSB7IFtpdGVtXTogaW5wdXRbaXRlbV0gfTtcblx0XHRcdFx0XHRpbnB1dHMgPSB7XG5cdFx0XHRcdFx0XHQuLi5pbnB1dHMsXG5cdFx0XHRcdFx0XHRbaXRlbV06IGlucHV0W2l0ZW1dXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAocHJvbXB0IGluc3RhbmNlb2YgQmFzZVN0cmluZ1Byb21wdFRlbXBsYXRlKSB7XG5cdFx0XHRcdFx0Y29uc3QgZm9ybWF0dGVkID0gYXdhaXQgcHJvbXB0LmZvcm1hdChpbnB1dHMpO1xuXHRcdFx0XHRcdGxldCBhZGRpdGlvbmFsQ29udGVudEZpZWxkcztcblx0XHRcdFx0XHRpZiAoXCJhZGRpdGlvbmFsQ29udGVudEZpZWxkc1wiIGluIHByb21wdCkgYWRkaXRpb25hbENvbnRlbnRGaWVsZHMgPSBwcm9tcHQuYWRkaXRpb25hbENvbnRlbnRGaWVsZHM7XG5cdFx0XHRcdFx0aWYgKGZvcm1hdHRlZCAhPT0gXCJcIikgY29udGVudC5wdXNoKHtcblx0XHRcdFx0XHRcdC4uLmFkZGl0aW9uYWxDb250ZW50RmllbGRzLFxuXHRcdFx0XHRcdFx0dHlwZTogXCJ0ZXh0XCIsXG5cdFx0XHRcdFx0XHR0ZXh0OiBmb3JtYXR0ZWRcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIGlmIChwcm9tcHQgaW5zdGFuY2VvZiBJbWFnZVByb21wdFRlbXBsYXRlKSB7XG5cdFx0XHRcdFx0Y29uc3QgZm9ybWF0dGVkID0gYXdhaXQgcHJvbXB0LmZvcm1hdChpbnB1dHMpO1xuXHRcdFx0XHRcdGxldCBhZGRpdGlvbmFsQ29udGVudEZpZWxkcztcblx0XHRcdFx0XHRpZiAoXCJhZGRpdGlvbmFsQ29udGVudEZpZWxkc1wiIGluIHByb21wdCkgYWRkaXRpb25hbENvbnRlbnRGaWVsZHMgPSBwcm9tcHQuYWRkaXRpb25hbENvbnRlbnRGaWVsZHM7XG5cdFx0XHRcdFx0Y29udGVudC5wdXNoKHtcblx0XHRcdFx0XHRcdC4uLmFkZGl0aW9uYWxDb250ZW50RmllbGRzLFxuXHRcdFx0XHRcdFx0dHlwZTogXCJpbWFnZV91cmxcIixcblx0XHRcdFx0XHRcdGltYWdlX3VybDogZm9ybWF0dGVkXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAocHJvbXB0IGluc3RhbmNlb2YgRGljdFByb21wdFRlbXBsYXRlKSB7XG5cdFx0XHRcdFx0Y29uc3QgZm9ybWF0dGVkID0gYXdhaXQgcHJvbXB0LmZvcm1hdChpbnB1dHMpO1xuXHRcdFx0XHRcdGxldCBhZGRpdGlvbmFsQ29udGVudEZpZWxkcztcblx0XHRcdFx0XHRpZiAoXCJhZGRpdGlvbmFsQ29udGVudEZpZWxkc1wiIGluIHByb21wdCkgYWRkaXRpb25hbENvbnRlbnRGaWVsZHMgPSBwcm9tcHQuYWRkaXRpb25hbENvbnRlbnRGaWVsZHM7XG5cdFx0XHRcdFx0Y29udGVudC5wdXNoKHtcblx0XHRcdFx0XHRcdC4uLmFkZGl0aW9uYWxDb250ZW50RmllbGRzLFxuXHRcdFx0XHRcdFx0Li4uZm9ybWF0dGVkXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiB0aGlzLmNyZWF0ZU1lc3NhZ2UoY29udGVudCk7XG5cdFx0fVxuXHR9XG5cdGFzeW5jIGZvcm1hdE1lc3NhZ2VzKHZhbHVlcykge1xuXHRcdHJldHVybiBbYXdhaXQgdGhpcy5mb3JtYXQodmFsdWVzKV07XG5cdH1cbn07XG4vKipcbiogQ2xhc3MgdGhhdCByZXByZXNlbnRzIGEgaHVtYW4gbWVzc2FnZSBwcm9tcHQgdGVtcGxhdGUuIEl0IGV4dGVuZHMgdGhlXG4qIEJhc2VNZXNzYWdlU3RyaW5nUHJvbXB0VGVtcGxhdGUuXG4qIEBleGFtcGxlXG4qIGBgYHR5cGVzY3JpcHRcbiogY29uc3QgbWVzc2FnZSA9IEh1bWFuTWVzc2FnZVByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZShcInt0ZXh0fVwiKTtcbiogY29uc3QgZm9ybWF0dGVkID0gYXdhaXQgbWVzc2FnZS5mb3JtYXQoeyB0ZXh0OiBcIkhlbGxvIHdvcmxkIVwiIH0pO1xuKlxuKiBjb25zdCBjaGF0UHJvbXB0ID0gQ2hhdFByb21wdFRlbXBsYXRlLmZyb21NZXNzYWdlcyhbbWVzc2FnZV0pO1xuKiBjb25zdCBmb3JtYXR0ZWRDaGF0UHJvbXB0ID0gYXdhaXQgY2hhdFByb21wdC5pbnZva2Uoe1xuKiAgIHRleHQ6IFwiSGVsbG8gd29ybGQhXCIsXG4qIH0pO1xuKiBgYGBcbiovXG52YXIgSHVtYW5NZXNzYWdlUHJvbXB0VGVtcGxhdGUgPSBjbGFzcyBleHRlbmRzIF9TdHJpbmdJbWFnZU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZSB7XG5cdHN0YXRpYyBfbWVzc2FnZUNsYXNzKCkge1xuXHRcdHJldHVybiBIdW1hbk1lc3NhZ2U7XG5cdH1cblx0c3RhdGljIGxjX25hbWUoKSB7XG5cdFx0cmV0dXJuIFwiSHVtYW5NZXNzYWdlUHJvbXB0VGVtcGxhdGVcIjtcblx0fVxufTtcbi8qKlxuKiBDbGFzcyB0aGF0IHJlcHJlc2VudHMgYW4gQUkgbWVzc2FnZSBwcm9tcHQgdGVtcGxhdGUuIEl0IGV4dGVuZHMgdGhlXG4qIEJhc2VNZXNzYWdlU3RyaW5nUHJvbXB0VGVtcGxhdGUuXG4qL1xudmFyIEFJTWVzc2FnZVByb21wdFRlbXBsYXRlID0gY2xhc3MgZXh0ZW5kcyBfU3RyaW5nSW1hZ2VNZXNzYWdlUHJvbXB0VGVtcGxhdGUge1xuXHRzdGF0aWMgX21lc3NhZ2VDbGFzcygpIHtcblx0XHRyZXR1cm4gQUlNZXNzYWdlO1xuXHR9XG5cdHN0YXRpYyBsY19uYW1lKCkge1xuXHRcdHJldHVybiBcIkFJTWVzc2FnZVByb21wdFRlbXBsYXRlXCI7XG5cdH1cbn07XG4vKipcbiogQ2xhc3MgdGhhdCByZXByZXNlbnRzIGEgc3lzdGVtIG1lc3NhZ2UgcHJvbXB0IHRlbXBsYXRlLiBJdCBleHRlbmRzIHRoZVxuKiBCYXNlTWVzc2FnZVN0cmluZ1Byb21wdFRlbXBsYXRlLlxuKiBAZXhhbXBsZVxuKiBgYGB0eXBlc2NyaXB0XG4qIGNvbnN0IG1lc3NhZ2UgPSBTeXN0ZW1NZXNzYWdlUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKFwie3RleHR9XCIpO1xuKiBjb25zdCBmb3JtYXR0ZWQgPSBhd2FpdCBtZXNzYWdlLmZvcm1hdCh7IHRleHQ6IFwiSGVsbG8gd29ybGQhXCIgfSk7XG4qXG4qIGNvbnN0IGNoYXRQcm9tcHQgPSBDaGF0UHJvbXB0VGVtcGxhdGUuZnJvbU1lc3NhZ2VzKFttZXNzYWdlXSk7XG4qIGNvbnN0IGZvcm1hdHRlZENoYXRQcm9tcHQgPSBhd2FpdCBjaGF0UHJvbXB0Lmludm9rZSh7XG4qICAgdGV4dDogXCJIZWxsbyB3b3JsZCFcIixcbiogfSk7XG4qIGBgYFxuKi9cbnZhciBTeXN0ZW1NZXNzYWdlUHJvbXB0VGVtcGxhdGUgPSBjbGFzcyBleHRlbmRzIF9TdHJpbmdJbWFnZU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZSB7XG5cdHN0YXRpYyBfbWVzc2FnZUNsYXNzKCkge1xuXHRcdHJldHVybiBTeXN0ZW1NZXNzYWdlO1xuXHR9XG5cdHN0YXRpYyBsY19uYW1lKCkge1xuXHRcdHJldHVybiBcIlN5c3RlbU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZVwiO1xuXHR9XG59O1xuZnVuY3Rpb24gX2lzQmFzZU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZShiYXNlTWVzc2FnZVByb21wdFRlbXBsYXRlTGlrZSkge1xuXHRyZXR1cm4gdHlwZW9mIGJhc2VNZXNzYWdlUHJvbXB0VGVtcGxhdGVMaWtlLmZvcm1hdE1lc3NhZ2VzID09PSBcImZ1bmN0aW9uXCI7XG59XG5mdW5jdGlvbiBfY29lcmNlTWVzc2FnZVByb21wdFRlbXBsYXRlTGlrZShtZXNzYWdlUHJvbXB0VGVtcGxhdGVMaWtlLCBleHRyYSkge1xuXHRpZiAoX2lzQmFzZU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZShtZXNzYWdlUHJvbXB0VGVtcGxhdGVMaWtlKSB8fCBpc0Jhc2VNZXNzYWdlKG1lc3NhZ2VQcm9tcHRUZW1wbGF0ZUxpa2UpKSByZXR1cm4gbWVzc2FnZVByb21wdFRlbXBsYXRlTGlrZTtcblx0aWYgKEFycmF5LmlzQXJyYXkobWVzc2FnZVByb21wdFRlbXBsYXRlTGlrZSkgJiYgbWVzc2FnZVByb21wdFRlbXBsYXRlTGlrZVswXSA9PT0gXCJwbGFjZWhvbGRlclwiKSB7XG5cdFx0Y29uc3QgbWVzc2FnZUNvbnRlbnQgPSBtZXNzYWdlUHJvbXB0VGVtcGxhdGVMaWtlWzFdO1xuXHRcdGlmIChleHRyYT8udGVtcGxhdGVGb3JtYXQgPT09IFwibXVzdGFjaGVcIiAmJiB0eXBlb2YgbWVzc2FnZUNvbnRlbnQgPT09IFwic3RyaW5nXCIgJiYgbWVzc2FnZUNvbnRlbnQuc2xpY2UoMCwgMikgPT09IFwie3tcIiAmJiBtZXNzYWdlQ29udGVudC5zbGljZSgtMikgPT09IFwifX1cIikge1xuXHRcdFx0Y29uc3QgdmFyaWFibGVOYW1lID0gbWVzc2FnZUNvbnRlbnQuc2xpY2UoMiwgLTIpO1xuXHRcdFx0cmV0dXJuIG5ldyBNZXNzYWdlc1BsYWNlaG9sZGVyKHtcblx0XHRcdFx0dmFyaWFibGVOYW1lLFxuXHRcdFx0XHRvcHRpb25hbDogdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIGlmICh0eXBlb2YgbWVzc2FnZUNvbnRlbnQgPT09IFwic3RyaW5nXCIgJiYgbWVzc2FnZUNvbnRlbnRbMF0gPT09IFwie1wiICYmIG1lc3NhZ2VDb250ZW50W21lc3NhZ2VDb250ZW50Lmxlbmd0aCAtIDFdID09PSBcIn1cIikge1xuXHRcdFx0Y29uc3QgdmFyaWFibGVOYW1lID0gbWVzc2FnZUNvbnRlbnQuc2xpY2UoMSwgLTEpO1xuXHRcdFx0cmV0dXJuIG5ldyBNZXNzYWdlc1BsYWNlaG9sZGVyKHtcblx0XHRcdFx0dmFyaWFibGVOYW1lLFxuXHRcdFx0XHRvcHRpb25hbDogdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBwbGFjZWhvbGRlciB0ZW1wbGF0ZSBmb3IgZm9ybWF0ICR7ZXh0cmE/LnRlbXBsYXRlRm9ybWF0ID8/IGBcImYtc3RyaW5nXCJgfTogXCIke21lc3NhZ2VQcm9tcHRUZW1wbGF0ZUxpa2VbMV19XCIuIEV4cGVjdGVkIGEgdmFyaWFibGUgbmFtZSBzdXJyb3VuZGVkIGJ5ICR7ZXh0cmE/LnRlbXBsYXRlRm9ybWF0ID09PSBcIm11c3RhY2hlXCIgPyBcImRvdWJsZVwiIDogXCJzaW5nbGVcIn0gY3VybHkgYnJhY2VzLmApO1xuXHR9XG5cdGNvbnN0IG1lc3NhZ2UgPSBjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZShtZXNzYWdlUHJvbXB0VGVtcGxhdGVMaWtlKTtcblx0bGV0IHRlbXBsYXRlRGF0YTtcblx0aWYgKHR5cGVvZiBtZXNzYWdlLmNvbnRlbnQgPT09IFwic3RyaW5nXCIpIHRlbXBsYXRlRGF0YSA9IG1lc3NhZ2UuY29udGVudDtcblx0ZWxzZSB0ZW1wbGF0ZURhdGEgPSBtZXNzYWdlLmNvbnRlbnQubWFwKChpdGVtKSA9PiB7XG5cdFx0aWYgKFwidGV4dFwiIGluIGl0ZW0pIHJldHVybiB7XG5cdFx0XHQuLi5pdGVtLFxuXHRcdFx0dGV4dDogaXRlbS50ZXh0XG5cdFx0fTtcblx0XHRlbHNlIGlmIChcImltYWdlX3VybFwiIGluIGl0ZW0pIHJldHVybiB7XG5cdFx0XHQuLi5pdGVtLFxuXHRcdFx0aW1hZ2VfdXJsOiBpdGVtLmltYWdlX3VybFxuXHRcdH07XG5cdFx0ZWxzZSByZXR1cm4gaXRlbTtcblx0fSk7XG5cdGlmIChtZXNzYWdlLl9nZXRUeXBlKCkgPT09IFwiaHVtYW5cIikgcmV0dXJuIEh1bWFuTWVzc2FnZVByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZSh0ZW1wbGF0ZURhdGEsIGV4dHJhKTtcblx0ZWxzZSBpZiAobWVzc2FnZS5fZ2V0VHlwZSgpID09PSBcImFpXCIpIHJldHVybiBBSU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUodGVtcGxhdGVEYXRhLCBleHRyYSk7XG5cdGVsc2UgaWYgKG1lc3NhZ2UuX2dldFR5cGUoKSA9PT0gXCJzeXN0ZW1cIikgcmV0dXJuIFN5c3RlbU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUodGVtcGxhdGVEYXRhLCBleHRyYSk7XG5cdGVsc2UgaWYgKENoYXRNZXNzYWdlLmlzSW5zdGFuY2UobWVzc2FnZSkpIHJldHVybiBDaGF0TWVzc2FnZVByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZShtZXNzYWdlLmNvbnRlbnQsIG1lc3NhZ2Uucm9sZSwgZXh0cmEpO1xuXHRlbHNlIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGNvZXJjZSBtZXNzYWdlIHByb21wdCB0ZW1wbGF0ZSBmcm9tIGlucHV0LiBSZWNlaXZlZCBtZXNzYWdlIHR5cGU6IFwiJHttZXNzYWdlLl9nZXRUeXBlKCl9XCIuYCk7XG59XG5mdW5jdGlvbiBpc01lc3NhZ2VzUGxhY2Vob2xkZXIoeCkge1xuXHRyZXR1cm4geC5jb25zdHJ1Y3Rvci5sY19uYW1lKCkgPT09IFwiTWVzc2FnZXNQbGFjZWhvbGRlclwiO1xufVxuLyoqXG4qIENsYXNzIHRoYXQgcmVwcmVzZW50cyBhIGNoYXQgcHJvbXB0LiBJdCBleHRlbmRzIHRoZVxuKiBCYXNlQ2hhdFByb21wdFRlbXBsYXRlIGFuZCB1c2VzIGFuIGFycmF5IG9mIEJhc2VNZXNzYWdlUHJvbXB0VGVtcGxhdGVcbiogaW5zdGFuY2VzIHRvIGZvcm1hdCBhIHNlcmllcyBvZiBtZXNzYWdlcyBmb3IgYSBjb252ZXJzYXRpb24uXG4qIEBleGFtcGxlXG4qIGBgYHR5cGVzY3JpcHRcbiogY29uc3QgbWVzc2FnZSA9IFN5c3RlbU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXCJ7dGV4dH1cIik7XG4qIGNvbnN0IGNoYXRQcm9tcHQgPSBDaGF0UHJvbXB0VGVtcGxhdGUuZnJvbU1lc3NhZ2VzKFtcbiogICBbXCJhaVwiLCBcIllvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudC5cIl0sXG4qICAgbWVzc2FnZSxcbiogXSk7XG4qIGNvbnN0IGZvcm1hdHRlZENoYXRQcm9tcHQgPSBhd2FpdCBjaGF0UHJvbXB0Lmludm9rZSh7XG4qICAgdGV4dDogXCJIZWxsbyB3b3JsZCFcIixcbiogfSk7XG4qIGBgYFxuKi9cbnZhciBDaGF0UHJvbXB0VGVtcGxhdGUgPSBjbGFzcyBDaGF0UHJvbXB0VGVtcGxhdGUgZXh0ZW5kcyBCYXNlQ2hhdFByb21wdFRlbXBsYXRlIHtcblx0c3RhdGljIGxjX25hbWUoKSB7XG5cdFx0cmV0dXJuIFwiQ2hhdFByb21wdFRlbXBsYXRlXCI7XG5cdH1cblx0Z2V0IGxjX2FsaWFzZXMoKSB7XG5cdFx0cmV0dXJuIHsgcHJvbXB0TWVzc2FnZXM6IFwibWVzc2FnZXNcIiB9O1xuXHR9XG5cdHByb21wdE1lc3NhZ2VzO1xuXHR2YWxpZGF0ZVRlbXBsYXRlID0gdHJ1ZTtcblx0dGVtcGxhdGVGb3JtYXQgPSBcImYtc3RyaW5nXCI7XG5cdGNvbnN0cnVjdG9yKGlucHV0KSB7XG5cdFx0c3VwZXIoaW5wdXQpO1xuXHRcdGlmIChpbnB1dC50ZW1wbGF0ZUZvcm1hdCA9PT0gXCJtdXN0YWNoZVwiICYmIGlucHV0LnZhbGlkYXRlVGVtcGxhdGUgPT09IHZvaWQgMCkgdGhpcy52YWxpZGF0ZVRlbXBsYXRlID0gZmFsc2U7XG5cdFx0T2JqZWN0LmFzc2lnbih0aGlzLCBpbnB1dCk7XG5cdFx0aWYgKHRoaXMudmFsaWRhdGVUZW1wbGF0ZSkge1xuXHRcdFx0Y29uc3QgaW5wdXRWYXJpYWJsZXNNZXNzYWdlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG5cdFx0XHRmb3IgKGNvbnN0IHByb21wdE1lc3NhZ2Ugb2YgdGhpcy5wcm9tcHRNZXNzYWdlcykge1xuXHRcdFx0XHRpZiAocHJvbXB0TWVzc2FnZSBpbnN0YW5jZW9mIEJhc2VNZXNzYWdlKSBjb250aW51ZTtcblx0XHRcdFx0Zm9yIChjb25zdCBpbnB1dFZhcmlhYmxlIG9mIHByb21wdE1lc3NhZ2UuaW5wdXRWYXJpYWJsZXMpIGlucHV0VmFyaWFibGVzTWVzc2FnZXMuYWRkKGlucHV0VmFyaWFibGUpO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgdG90YWxJbnB1dFZhcmlhYmxlcyA9IHRoaXMuaW5wdXRWYXJpYWJsZXM7XG5cdFx0XHRjb25zdCBpbnB1dFZhcmlhYmxlc0luc3RhbmNlID0gbmV3IFNldCh0aGlzLnBhcnRpYWxWYXJpYWJsZXMgPyB0b3RhbElucHV0VmFyaWFibGVzLmNvbmNhdChPYmplY3Qua2V5cyh0aGlzLnBhcnRpYWxWYXJpYWJsZXMpKSA6IHRvdGFsSW5wdXRWYXJpYWJsZXMpO1xuXHRcdFx0Y29uc3QgZGlmZmVyZW5jZSA9IG5ldyBTZXQoWy4uLmlucHV0VmFyaWFibGVzSW5zdGFuY2VdLmZpbHRlcigoeCkgPT4gIWlucHV0VmFyaWFibGVzTWVzc2FnZXMuaGFzKHgpKSk7XG5cdFx0XHRpZiAoZGlmZmVyZW5jZS5zaXplID4gMCkgdGhyb3cgbmV3IEVycm9yKGBJbnB1dCB2YXJpYWJsZXMgXFxgJHtbLi4uZGlmZmVyZW5jZV19XFxgIGFyZSBub3QgdXNlZCBpbiBhbnkgb2YgdGhlIHByb21wdCBtZXNzYWdlcy5gKTtcblx0XHRcdGNvbnN0IG90aGVyRGlmZmVyZW5jZSA9IG5ldyBTZXQoWy4uLmlucHV0VmFyaWFibGVzTWVzc2FnZXNdLmZpbHRlcigoeCkgPT4gIWlucHV0VmFyaWFibGVzSW5zdGFuY2UuaGFzKHgpKSk7XG5cdFx0XHRpZiAob3RoZXJEaWZmZXJlbmNlLnNpemUgPiAwKSB0aHJvdyBuZXcgRXJyb3IoYElucHV0IHZhcmlhYmxlcyBcXGAke1suLi5vdGhlckRpZmZlcmVuY2VdfVxcYCBhcmUgdXNlZCBpbiBwcm9tcHQgbWVzc2FnZXMgYnV0IG5vdCBpbiB0aGUgcHJvbXB0IHRlbXBsYXRlLmApO1xuXHRcdH1cblx0fVxuXHRfZ2V0UHJvbXB0VHlwZSgpIHtcblx0XHRyZXR1cm4gXCJjaGF0XCI7XG5cdH1cblx0YXN5bmMgX3BhcnNlSW1hZ2VQcm9tcHRzKG1lc3NhZ2UsIGlucHV0VmFsdWVzKSB7XG5cdFx0aWYgKHR5cGVvZiBtZXNzYWdlLmNvbnRlbnQgPT09IFwic3RyaW5nXCIpIHJldHVybiBtZXNzYWdlO1xuXHRcdGNvbnN0IGZvcm1hdHRlZE1lc3NhZ2VDb250ZW50ID0gYXdhaXQgUHJvbWlzZS5hbGwobWVzc2FnZS5jb250ZW50Lm1hcChhc3luYyAoaXRlbSkgPT4ge1xuXHRcdFx0aWYgKGl0ZW0udHlwZSAhPT0gXCJpbWFnZV91cmxcIikgcmV0dXJuIGl0ZW07XG5cdFx0XHRsZXQgaW1hZ2VVcmwgPSBcIlwiO1xuXHRcdFx0aWYgKHR5cGVvZiBpdGVtLmltYWdlX3VybCA9PT0gXCJzdHJpbmdcIikgaW1hZ2VVcmwgPSBpdGVtLmltYWdlX3VybDtcblx0XHRcdGVsc2UgaWYgKHR5cGVvZiBpdGVtLmltYWdlX3VybCA9PT0gXCJvYmplY3RcIiAmJiBpdGVtLmltYWdlX3VybCAhPT0gbnVsbCAmJiBcInVybFwiIGluIGl0ZW0uaW1hZ2VfdXJsICYmIHR5cGVvZiBpdGVtLmltYWdlX3VybC51cmwgPT09IFwic3RyaW5nXCIpIGltYWdlVXJsID0gaXRlbS5pbWFnZV91cmwudXJsO1xuXHRcdFx0Y29uc3QgcHJvbXB0VGVtcGxhdGVQbGFjZWhvbGRlciA9IFByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZShpbWFnZVVybCwgeyB0ZW1wbGF0ZUZvcm1hdDogdGhpcy50ZW1wbGF0ZUZvcm1hdCB9KTtcblx0XHRcdGNvbnN0IGZvcm1hdHRlZFVybCA9IGF3YWl0IHByb21wdFRlbXBsYXRlUGxhY2Vob2xkZXIuZm9ybWF0KGlucHV0VmFsdWVzKTtcblx0XHRcdGlmICh0eXBlb2YgaXRlbS5pbWFnZV91cmwgPT09IFwib2JqZWN0XCIgJiYgaXRlbS5pbWFnZV91cmwgIT09IG51bGwgJiYgXCJ1cmxcIiBpbiBpdGVtLmltYWdlX3VybCkgaXRlbS5pbWFnZV91cmwudXJsID0gZm9ybWF0dGVkVXJsO1xuXHRcdFx0ZWxzZSBpdGVtLmltYWdlX3VybCA9IGZvcm1hdHRlZFVybDtcblx0XHRcdHJldHVybiBpdGVtO1xuXHRcdH0pKTtcblx0XHRtZXNzYWdlLmNvbnRlbnQgPSBmb3JtYXR0ZWRNZXNzYWdlQ29udGVudDtcblx0XHRyZXR1cm4gbWVzc2FnZTtcblx0fVxuXHRhc3luYyBmb3JtYXRNZXNzYWdlcyh2YWx1ZXMpIHtcblx0XHRjb25zdCBhbGxWYWx1ZXMgPSBhd2FpdCB0aGlzLm1lcmdlUGFydGlhbEFuZFVzZXJWYXJpYWJsZXModmFsdWVzKTtcblx0XHRsZXQgcmVzdWx0TWVzc2FnZXMgPSBbXTtcblx0XHRmb3IgKGNvbnN0IHByb21wdE1lc3NhZ2Ugb2YgdGhpcy5wcm9tcHRNZXNzYWdlcykgaWYgKHByb21wdE1lc3NhZ2UgaW5zdGFuY2VvZiBCYXNlTWVzc2FnZSkgcmVzdWx0TWVzc2FnZXMucHVzaChhd2FpdCB0aGlzLl9wYXJzZUltYWdlUHJvbXB0cyhwcm9tcHRNZXNzYWdlLCBhbGxWYWx1ZXMpKTtcblx0XHRlbHNlIHtcblx0XHRcdGxldCBpbnB1dFZhbHVlcztcblx0XHRcdGlmICh0aGlzLnRlbXBsYXRlRm9ybWF0ID09PSBcIm11c3RhY2hlXCIpIGlucHV0VmFsdWVzID0geyAuLi5hbGxWYWx1ZXMgfTtcblx0XHRcdGVsc2UgaW5wdXRWYWx1ZXMgPSBwcm9tcHRNZXNzYWdlLmlucHV0VmFyaWFibGVzLnJlZHVjZSgoYWNjLCBpbnB1dFZhcmlhYmxlKSA9PiB7XG5cdFx0XHRcdGlmICghKGlucHV0VmFyaWFibGUgaW4gYWxsVmFsdWVzKSAmJiAhKGlzTWVzc2FnZXNQbGFjZWhvbGRlcihwcm9tcHRNZXNzYWdlKSAmJiBwcm9tcHRNZXNzYWdlLm9wdGlvbmFsKSkge1xuXHRcdFx0XHRcdGNvbnN0IGVycm9yID0gYWRkTGFuZ0NoYWluRXJyb3JGaWVsZHMoLyogQF9fUFVSRV9fICovIG5ldyBFcnJvcihgTWlzc2luZyB2YWx1ZSBmb3IgaW5wdXQgdmFyaWFibGUgXFxgJHtpbnB1dFZhcmlhYmxlLnRvU3RyaW5nKCl9XFxgYCksIFwiSU5WQUxJRF9QUk9NUFRfSU5QVVRcIik7XG5cdFx0XHRcdFx0dGhyb3cgZXJyb3I7XG5cdFx0XHRcdH1cblx0XHRcdFx0YWNjW2lucHV0VmFyaWFibGVdID0gYWxsVmFsdWVzW2lucHV0VmFyaWFibGVdO1xuXHRcdFx0XHRyZXR1cm4gYWNjO1xuXHRcdFx0fSwge30pO1xuXHRcdFx0Y29uc3QgbWVzc2FnZSA9IGF3YWl0IHByb21wdE1lc3NhZ2UuZm9ybWF0TWVzc2FnZXMoaW5wdXRWYWx1ZXMpO1xuXHRcdFx0cmVzdWx0TWVzc2FnZXMgPSByZXN1bHRNZXNzYWdlcy5jb25jYXQobWVzc2FnZSk7XG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHRNZXNzYWdlcztcblx0fVxuXHRhc3luYyBwYXJ0aWFsKHZhbHVlcykge1xuXHRcdGNvbnN0IG5ld0lucHV0VmFyaWFibGVzID0gdGhpcy5pbnB1dFZhcmlhYmxlcy5maWx0ZXIoKGl2KSA9PiAhKGl2IGluIHZhbHVlcykpO1xuXHRcdGNvbnN0IG5ld1BhcnRpYWxWYXJpYWJsZXMgPSB7XG5cdFx0XHQuLi50aGlzLnBhcnRpYWxWYXJpYWJsZXMgPz8ge30sXG5cdFx0XHQuLi52YWx1ZXNcblx0XHR9O1xuXHRcdGNvbnN0IHByb21wdERpY3QgPSB7XG5cdFx0XHQuLi50aGlzLFxuXHRcdFx0aW5wdXRWYXJpYWJsZXM6IG5ld0lucHV0VmFyaWFibGVzLFxuXHRcdFx0cGFydGlhbFZhcmlhYmxlczogbmV3UGFydGlhbFZhcmlhYmxlc1xuXHRcdH07XG5cdFx0cmV0dXJuIG5ldyBDaGF0UHJvbXB0VGVtcGxhdGUocHJvbXB0RGljdCk7XG5cdH1cblx0c3RhdGljIGZyb21UZW1wbGF0ZSh0ZW1wbGF0ZSwgb3B0aW9ucykge1xuXHRcdGNvbnN0IHByb21wdCA9IFByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZSh0ZW1wbGF0ZSwgb3B0aW9ucyk7XG5cdFx0Y29uc3QgaHVtYW5UZW1wbGF0ZSA9IG5ldyBIdW1hbk1lc3NhZ2VQcm9tcHRUZW1wbGF0ZSh7IHByb21wdCB9KTtcblx0XHRyZXR1cm4gdGhpcy5mcm9tTWVzc2FnZXMoW2h1bWFuVGVtcGxhdGVdKTtcblx0fVxuXHQvKipcblx0KiBDcmVhdGUgYSBjaGF0IG1vZGVsLXNwZWNpZmljIHByb21wdCBmcm9tIGluZGl2aWR1YWwgY2hhdCBtZXNzYWdlc1xuXHQqIG9yIG1lc3NhZ2UtbGlrZSB0dXBsZXMuXG5cdCogQHBhcmFtIHByb21wdE1lc3NhZ2VzIE1lc3NhZ2VzIHRvIGJlIHBhc3NlZCB0byB0aGUgY2hhdCBtb2RlbFxuXHQqIEByZXR1cm5zIEEgbmV3IENoYXRQcm9tcHRUZW1wbGF0ZVxuXHQqL1xuXHRzdGF0aWMgZnJvbU1lc3NhZ2VzKHByb21wdE1lc3NhZ2VzLCBleHRyYSkge1xuXHRcdGNvbnN0IGZsYXR0ZW5lZE1lc3NhZ2VzID0gcHJvbXB0TWVzc2FnZXMucmVkdWNlKChhY2MsIHByb21wdE1lc3NhZ2UpID0+IGFjYy5jb25jYXQocHJvbXB0TWVzc2FnZSBpbnN0YW5jZW9mIENoYXRQcm9tcHRUZW1wbGF0ZSA/IHByb21wdE1lc3NhZ2UucHJvbXB0TWVzc2FnZXMgOiBbX2NvZXJjZU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZUxpa2UocHJvbXB0TWVzc2FnZSwgZXh0cmEpXSksIFtdKTtcblx0XHRjb25zdCBmbGF0dGVuZWRQYXJ0aWFsVmFyaWFibGVzID0gcHJvbXB0TWVzc2FnZXMucmVkdWNlKChhY2MsIHByb21wdE1lc3NhZ2UpID0+IHByb21wdE1lc3NhZ2UgaW5zdGFuY2VvZiBDaGF0UHJvbXB0VGVtcGxhdGUgPyBPYmplY3QuYXNzaWduKGFjYywgcHJvbXB0TWVzc2FnZS5wYXJ0aWFsVmFyaWFibGVzKSA6IGFjYywgT2JqZWN0LmNyZWF0ZShudWxsKSk7XG5cdFx0Y29uc3QgaW5wdXRWYXJpYWJsZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuXHRcdGZvciAoY29uc3QgcHJvbXB0TWVzc2FnZSBvZiBmbGF0dGVuZWRNZXNzYWdlcykge1xuXHRcdFx0aWYgKHByb21wdE1lc3NhZ2UgaW5zdGFuY2VvZiBCYXNlTWVzc2FnZSkgY29udGludWU7XG5cdFx0XHRmb3IgKGNvbnN0IGlucHV0VmFyaWFibGUgb2YgcHJvbXB0TWVzc2FnZS5pbnB1dFZhcmlhYmxlcykge1xuXHRcdFx0XHRpZiAoaW5wdXRWYXJpYWJsZSBpbiBmbGF0dGVuZWRQYXJ0aWFsVmFyaWFibGVzKSBjb250aW51ZTtcblx0XHRcdFx0aW5wdXRWYXJpYWJsZXMuYWRkKGlucHV0VmFyaWFibGUpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gbmV3IHRoaXMoe1xuXHRcdFx0Li4uZXh0cmEsXG5cdFx0XHRpbnB1dFZhcmlhYmxlczogWy4uLmlucHV0VmFyaWFibGVzXSxcblx0XHRcdHByb21wdE1lc3NhZ2VzOiBmbGF0dGVuZWRNZXNzYWdlcyxcblx0XHRcdHBhcnRpYWxWYXJpYWJsZXM6IGZsYXR0ZW5lZFBhcnRpYWxWYXJpYWJsZXMsXG5cdFx0XHR0ZW1wbGF0ZUZvcm1hdDogZXh0cmE/LnRlbXBsYXRlRm9ybWF0XG5cdFx0fSk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQUlNZXNzYWdlUHJvbXB0VGVtcGxhdGUsIEJhc2VDaGF0UHJvbXB0VGVtcGxhdGUsIEJhc2VNZXNzYWdlUHJvbXB0VGVtcGxhdGUsIEJhc2VNZXNzYWdlU3RyaW5nUHJvbXB0VGVtcGxhdGUsIENoYXRNZXNzYWdlUHJvbXB0VGVtcGxhdGUsIENoYXRQcm9tcHRUZW1wbGF0ZSwgSHVtYW5NZXNzYWdlUHJvbXB0VGVtcGxhdGUsIE1lc3NhZ2VzUGxhY2Vob2xkZXIsIFN5c3RlbU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2hhdC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/prompts/chat.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/prompts/dict.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/dict.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DictPromptTemplate: () => (/* binding */ DictPromptTemplate)\n/* harmony export */ });\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runnables/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _template_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./template.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/template.js\");\n\n\n\n//#region src/prompts/dict.ts\nvar DictPromptTemplate = class extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__.Runnable {\n\tlc_namespace = [\n\t\t\"langchain_core\",\n\t\t\"prompts\",\n\t\t\"dict\"\n\t];\n\tlc_serializable = true;\n\ttemplate;\n\ttemplateFormat;\n\tinputVariables;\n\tstatic lc_name() {\n\t\treturn \"DictPromptTemplate\";\n\t}\n\tconstructor(fields) {\n\t\tconst templateFormat = fields.templateFormat ?? \"f-string\";\n\t\tconst inputVariables = _getInputVariables(fields.template, templateFormat);\n\t\tsuper({\n\t\t\tinputVariables,\n\t\t\t...fields\n\t\t});\n\t\tthis.template = fields.template;\n\t\tthis.templateFormat = templateFormat;\n\t\tthis.inputVariables = inputVariables;\n\t}\n\tasync format(values) {\n\t\treturn _insertInputVariables(this.template, values, this.templateFormat);\n\t}\n\tasync invoke(values) {\n\t\treturn await this._callWithConfig(this.format.bind(this), values, { runType: \"prompt\" });\n\t}\n};\nfunction _getInputVariables(template, templateFormat) {\n\tconst inputVariables = [];\n\tfor (const v of Object.values(template)) if (typeof v === \"string\") (0,_template_js__WEBPACK_IMPORTED_MODULE_1__.parseTemplate)(v, templateFormat).forEach((t) => {\n\t\tif (t.type === \"variable\") inputVariables.push(t.name);\n\t});\n\telse if (Array.isArray(v)) {\n\t\tfor (const x of v) if (typeof x === \"string\") (0,_template_js__WEBPACK_IMPORTED_MODULE_1__.parseTemplate)(x, templateFormat).forEach((t) => {\n\t\t\tif (t.type === \"variable\") inputVariables.push(t.name);\n\t\t});\n\t\telse if (typeof x === \"object\") inputVariables.push(..._getInputVariables(x, templateFormat));\n\t} else if (typeof v === \"object\" && v !== null) inputVariables.push(..._getInputVariables(v, templateFormat));\n\treturn Array.from(new Set(inputVariables));\n}\nfunction _insertInputVariables(template, inputs, templateFormat) {\n\tconst formatted = {};\n\tfor (const [k, v] of Object.entries(template)) if (typeof v === \"string\") formatted[k] = (0,_template_js__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)(v, templateFormat, inputs);\n\telse if (Array.isArray(v)) {\n\t\tconst formattedV = [];\n\t\tfor (const x of v) if (typeof x === \"string\") formattedV.push((0,_template_js__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)(x, templateFormat, inputs));\n\t\telse if (typeof x === \"object\") formattedV.push(_insertInputVariables(x, inputs, templateFormat));\n\t\tformatted[k] = formattedV;\n\t} else if (typeof v === \"object\" && v !== null) formatted[k] = _insertInputVariables(v, inputs, templateFormat);\n\telse formatted[k] = v;\n\treturn formatted;\n}\n\n//#endregion\n\n//# sourceMappingURL=dict.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9kaWN0LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnRDtBQUNjOztBQUU5RDtBQUNBLHVDQUF1Qyx3REFBUTtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNFQUFzRSxtQkFBbUI7QUFDekY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsMkRBQWE7QUFDbEY7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxnREFBZ0QsMkRBQWE7QUFDN0Q7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwRkFBMEYsNERBQWM7QUFDeEc7QUFDQTtBQUNBLGdFQUFnRSw0REFBYztBQUM5RTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUM4QjtBQUM5QiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3Byb21wdHMvZGljdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSdW5uYWJsZSB9IGZyb20gXCIuLi9ydW5uYWJsZXMvYmFzZS5qc1wiO1xuaW1wb3J0IHsgcGFyc2VUZW1wbGF0ZSwgcmVuZGVyVGVtcGxhdGUgfSBmcm9tIFwiLi90ZW1wbGF0ZS5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3Byb21wdHMvZGljdC50c1xudmFyIERpY3RQcm9tcHRUZW1wbGF0ZSA9IGNsYXNzIGV4dGVuZHMgUnVubmFibGUge1xuXHRsY19uYW1lc3BhY2UgPSBbXG5cdFx0XCJsYW5nY2hhaW5fY29yZVwiLFxuXHRcdFwicHJvbXB0c1wiLFxuXHRcdFwiZGljdFwiXG5cdF07XG5cdGxjX3NlcmlhbGl6YWJsZSA9IHRydWU7XG5cdHRlbXBsYXRlO1xuXHR0ZW1wbGF0ZUZvcm1hdDtcblx0aW5wdXRWYXJpYWJsZXM7XG5cdHN0YXRpYyBsY19uYW1lKCkge1xuXHRcdHJldHVybiBcIkRpY3RQcm9tcHRUZW1wbGF0ZVwiO1xuXHR9XG5cdGNvbnN0cnVjdG9yKGZpZWxkcykge1xuXHRcdGNvbnN0IHRlbXBsYXRlRm9ybWF0ID0gZmllbGRzLnRlbXBsYXRlRm9ybWF0ID8/IFwiZi1zdHJpbmdcIjtcblx0XHRjb25zdCBpbnB1dFZhcmlhYmxlcyA9IF9nZXRJbnB1dFZhcmlhYmxlcyhmaWVsZHMudGVtcGxhdGUsIHRlbXBsYXRlRm9ybWF0KTtcblx0XHRzdXBlcih7XG5cdFx0XHRpbnB1dFZhcmlhYmxlcyxcblx0XHRcdC4uLmZpZWxkc1xuXHRcdH0pO1xuXHRcdHRoaXMudGVtcGxhdGUgPSBmaWVsZHMudGVtcGxhdGU7XG5cdFx0dGhpcy50ZW1wbGF0ZUZvcm1hdCA9IHRlbXBsYXRlRm9ybWF0O1xuXHRcdHRoaXMuaW5wdXRWYXJpYWJsZXMgPSBpbnB1dFZhcmlhYmxlcztcblx0fVxuXHRhc3luYyBmb3JtYXQodmFsdWVzKSB7XG5cdFx0cmV0dXJuIF9pbnNlcnRJbnB1dFZhcmlhYmxlcyh0aGlzLnRlbXBsYXRlLCB2YWx1ZXMsIHRoaXMudGVtcGxhdGVGb3JtYXQpO1xuXHR9XG5cdGFzeW5jIGludm9rZSh2YWx1ZXMpIHtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5fY2FsbFdpdGhDb25maWcodGhpcy5mb3JtYXQuYmluZCh0aGlzKSwgdmFsdWVzLCB7IHJ1blR5cGU6IFwicHJvbXB0XCIgfSk7XG5cdH1cbn07XG5mdW5jdGlvbiBfZ2V0SW5wdXRWYXJpYWJsZXModGVtcGxhdGUsIHRlbXBsYXRlRm9ybWF0KSB7XG5cdGNvbnN0IGlucHV0VmFyaWFibGVzID0gW107XG5cdGZvciAoY29uc3QgdiBvZiBPYmplY3QudmFsdWVzKHRlbXBsYXRlKSkgaWYgKHR5cGVvZiB2ID09PSBcInN0cmluZ1wiKSBwYXJzZVRlbXBsYXRlKHYsIHRlbXBsYXRlRm9ybWF0KS5mb3JFYWNoKCh0KSA9PiB7XG5cdFx0aWYgKHQudHlwZSA9PT0gXCJ2YXJpYWJsZVwiKSBpbnB1dFZhcmlhYmxlcy5wdXNoKHQubmFtZSk7XG5cdH0pO1xuXHRlbHNlIGlmIChBcnJheS5pc0FycmF5KHYpKSB7XG5cdFx0Zm9yIChjb25zdCB4IG9mIHYpIGlmICh0eXBlb2YgeCA9PT0gXCJzdHJpbmdcIikgcGFyc2VUZW1wbGF0ZSh4LCB0ZW1wbGF0ZUZvcm1hdCkuZm9yRWFjaCgodCkgPT4ge1xuXHRcdFx0aWYgKHQudHlwZSA9PT0gXCJ2YXJpYWJsZVwiKSBpbnB1dFZhcmlhYmxlcy5wdXNoKHQubmFtZSk7XG5cdFx0fSk7XG5cdFx0ZWxzZSBpZiAodHlwZW9mIHggPT09IFwib2JqZWN0XCIpIGlucHV0VmFyaWFibGVzLnB1c2goLi4uX2dldElucHV0VmFyaWFibGVzKHgsIHRlbXBsYXRlRm9ybWF0KSk7XG5cdH0gZWxzZSBpZiAodHlwZW9mIHYgPT09IFwib2JqZWN0XCIgJiYgdiAhPT0gbnVsbCkgaW5wdXRWYXJpYWJsZXMucHVzaCguLi5fZ2V0SW5wdXRWYXJpYWJsZXModiwgdGVtcGxhdGVGb3JtYXQpKTtcblx0cmV0dXJuIEFycmF5LmZyb20obmV3IFNldChpbnB1dFZhcmlhYmxlcykpO1xufVxuZnVuY3Rpb24gX2luc2VydElucHV0VmFyaWFibGVzKHRlbXBsYXRlLCBpbnB1dHMsIHRlbXBsYXRlRm9ybWF0KSB7XG5cdGNvbnN0IGZvcm1hdHRlZCA9IHt9O1xuXHRmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyh0ZW1wbGF0ZSkpIGlmICh0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIikgZm9ybWF0dGVkW2tdID0gcmVuZGVyVGVtcGxhdGUodiwgdGVtcGxhdGVGb3JtYXQsIGlucHV0cyk7XG5cdGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodikpIHtcblx0XHRjb25zdCBmb3JtYXR0ZWRWID0gW107XG5cdFx0Zm9yIChjb25zdCB4IG9mIHYpIGlmICh0eXBlb2YgeCA9PT0gXCJzdHJpbmdcIikgZm9ybWF0dGVkVi5wdXNoKHJlbmRlclRlbXBsYXRlKHgsIHRlbXBsYXRlRm9ybWF0LCBpbnB1dHMpKTtcblx0XHRlbHNlIGlmICh0eXBlb2YgeCA9PT0gXCJvYmplY3RcIikgZm9ybWF0dGVkVi5wdXNoKF9pbnNlcnRJbnB1dFZhcmlhYmxlcyh4LCBpbnB1dHMsIHRlbXBsYXRlRm9ybWF0KSk7XG5cdFx0Zm9ybWF0dGVkW2tdID0gZm9ybWF0dGVkVjtcblx0fSBlbHNlIGlmICh0eXBlb2YgdiA9PT0gXCJvYmplY3RcIiAmJiB2ICE9PSBudWxsKSBmb3JtYXR0ZWRba10gPSBfaW5zZXJ0SW5wdXRWYXJpYWJsZXModiwgaW5wdXRzLCB0ZW1wbGF0ZUZvcm1hdCk7XG5cdGVsc2UgZm9ybWF0dGVkW2tdID0gdjtcblx0cmV0dXJuIGZvcm1hdHRlZDtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBEaWN0UHJvbXB0VGVtcGxhdGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpY3QuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/prompts/dict.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/prompts/few_shot.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/few_shot.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FewShotChatMessagePromptTemplate: () => (/* binding */ FewShotChatMessagePromptTemplate),\n/* harmony export */   FewShotPromptTemplate: () => (/* binding */ FewShotPromptTemplate)\n/* harmony export */ });\n/* harmony import */ var _string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./string.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/string.js\");\n/* harmony import */ var _template_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./template.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/template.js\");\n/* harmony import */ var _prompt_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./prompt.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/prompt.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chat.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/chat.js\");\n\n\n\n\n\n//#region src/prompts/few_shot.ts\n/**\n* Prompt template that contains few-shot examples.\n* @augments BasePromptTemplate\n* @augments FewShotPromptTemplateInput\n* @example\n* ```typescript\n* const examplePrompt = PromptTemplate.fromTemplate(\n*   \"Input: {input}\\nOutput: {output}\",\n* );\n*\n* const exampleSelector = await SemanticSimilarityExampleSelector.fromExamples(\n*   [\n*     { input: \"happy\", output: \"sad\" },\n*     { input: \"tall\", output: \"short\" },\n*     { input: \"energetic\", output: \"lethargic\" },\n*     { input: \"sunny\", output: \"gloomy\" },\n*     { input: \"windy\", output: \"calm\" },\n*   ],\n*   new OpenAIEmbeddings(),\n*   HNSWLib,\n*   { k: 1 },\n* );\n*\n* const dynamicPrompt = new FewShotPromptTemplate({\n*   exampleSelector,\n*   examplePrompt,\n*   prefix: \"Give the antonym of every input\",\n*   suffix: \"Input: {adjective}\\nOutput:\",\n*   inputVariables: [\"adjective\"],\n* });\n*\n* // Format the dynamic prompt with the input 'rainy'\n* console.log(await dynamicPrompt.format({ adjective: \"rainy\" }));\n*\n* ```\n*/\nvar FewShotPromptTemplate = class FewShotPromptTemplate extends _string_js__WEBPACK_IMPORTED_MODULE_0__.BaseStringPromptTemplate {\n\tlc_serializable = false;\n\texamples;\n\texampleSelector;\n\texamplePrompt;\n\tsuffix = \"\";\n\texampleSeparator = \"\\n\\n\";\n\tprefix = \"\";\n\ttemplateFormat = \"f-string\";\n\tvalidateTemplate = true;\n\tconstructor(input) {\n\t\tsuper(input);\n\t\tObject.assign(this, input);\n\t\tif (this.examples !== void 0 && this.exampleSelector !== void 0) throw new Error(\"Only one of 'examples' and 'example_selector' should be provided\");\n\t\tif (this.examples === void 0 && this.exampleSelector === void 0) throw new Error(\"One of 'examples' and 'example_selector' should be provided\");\n\t\tif (this.validateTemplate) {\n\t\t\tlet totalInputVariables = this.inputVariables;\n\t\t\tif (this.partialVariables) totalInputVariables = totalInputVariables.concat(Object.keys(this.partialVariables));\n\t\t\t(0,_template_js__WEBPACK_IMPORTED_MODULE_1__.checkValidTemplate)(this.prefix + this.suffix, this.templateFormat, totalInputVariables);\n\t\t}\n\t}\n\t_getPromptType() {\n\t\treturn \"few_shot\";\n\t}\n\tstatic lc_name() {\n\t\treturn \"FewShotPromptTemplate\";\n\t}\n\tasync getExamples(inputVariables) {\n\t\tif (this.examples !== void 0) return this.examples;\n\t\tif (this.exampleSelector !== void 0) return this.exampleSelector.selectExamples(inputVariables);\n\t\tthrow new Error(\"One of 'examples' and 'example_selector' should be provided\");\n\t}\n\tasync partial(values) {\n\t\tconst newInputVariables = this.inputVariables.filter((iv) => !(iv in values));\n\t\tconst newPartialVariables = {\n\t\t\t...this.partialVariables ?? {},\n\t\t\t...values\n\t\t};\n\t\tconst promptDict = {\n\t\t\t...this,\n\t\t\tinputVariables: newInputVariables,\n\t\t\tpartialVariables: newPartialVariables\n\t\t};\n\t\treturn new FewShotPromptTemplate(promptDict);\n\t}\n\t/**\n\t* Formats the prompt with the given values.\n\t* @param values The values to format the prompt with.\n\t* @returns A promise that resolves to a string representing the formatted prompt.\n\t*/\n\tasync format(values) {\n\t\tconst allValues = await this.mergePartialAndUserVariables(values);\n\t\tconst examples = await this.getExamples(allValues);\n\t\tconst exampleStrings = await Promise.all(examples.map((example) => this.examplePrompt.format(example)));\n\t\tconst template = [\n\t\t\tthis.prefix,\n\t\t\t...exampleStrings,\n\t\t\tthis.suffix\n\t\t].join(this.exampleSeparator);\n\t\treturn (0,_template_js__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)(template, this.templateFormat, allValues);\n\t}\n\tserialize() {\n\t\tif (this.exampleSelector || !this.examples) throw new Error(\"Serializing an example selector is not currently supported\");\n\t\tif (this.outputParser !== void 0) throw new Error(\"Serializing an output parser is not currently supported\");\n\t\treturn {\n\t\t\t_type: this._getPromptType(),\n\t\t\tinput_variables: this.inputVariables,\n\t\t\texample_prompt: this.examplePrompt.serialize(),\n\t\t\texample_separator: this.exampleSeparator,\n\t\t\tsuffix: this.suffix,\n\t\t\tprefix: this.prefix,\n\t\t\ttemplate_format: this.templateFormat,\n\t\t\texamples: this.examples\n\t\t};\n\t}\n\tstatic async deserialize(data) {\n\t\tconst { example_prompt } = data;\n\t\tif (!example_prompt) throw new Error(\"Missing example prompt\");\n\t\tconst examplePrompt = await _prompt_js__WEBPACK_IMPORTED_MODULE_2__.PromptTemplate.deserialize(example_prompt);\n\t\tlet examples;\n\t\tif (Array.isArray(data.examples)) examples = data.examples;\n\t\telse throw new Error(\"Invalid examples format. Only list or string are supported.\");\n\t\treturn new FewShotPromptTemplate({\n\t\t\tinputVariables: data.input_variables,\n\t\t\texamplePrompt,\n\t\t\texamples,\n\t\t\texampleSeparator: data.example_separator,\n\t\t\tprefix: data.prefix,\n\t\t\tsuffix: data.suffix,\n\t\t\ttemplateFormat: data.template_format\n\t\t});\n\t}\n};\n/**\n* Chat prompt template that contains few-shot examples.\n* @augments BasePromptTemplateInput\n* @augments FewShotChatMessagePromptTemplateInput\n*/\nvar FewShotChatMessagePromptTemplate = class FewShotChatMessagePromptTemplate extends _chat_js__WEBPACK_IMPORTED_MODULE_3__.BaseChatPromptTemplate {\n\tlc_serializable = true;\n\texamples;\n\texampleSelector;\n\texamplePrompt;\n\tsuffix = \"\";\n\texampleSeparator = \"\\n\\n\";\n\tprefix = \"\";\n\ttemplateFormat = \"f-string\";\n\tvalidateTemplate = true;\n\t_getPromptType() {\n\t\treturn \"few_shot_chat\";\n\t}\n\tstatic lc_name() {\n\t\treturn \"FewShotChatMessagePromptTemplate\";\n\t}\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.examples = fields.examples;\n\t\tthis.examplePrompt = fields.examplePrompt;\n\t\tthis.exampleSeparator = fields.exampleSeparator ?? \"\\n\\n\";\n\t\tthis.exampleSelector = fields.exampleSelector;\n\t\tthis.prefix = fields.prefix ?? \"\";\n\t\tthis.suffix = fields.suffix ?? \"\";\n\t\tthis.templateFormat = fields.templateFormat ?? \"f-string\";\n\t\tthis.validateTemplate = fields.validateTemplate ?? true;\n\t\tif (this.examples !== void 0 && this.exampleSelector !== void 0) throw new Error(\"Only one of 'examples' and 'example_selector' should be provided\");\n\t\tif (this.examples === void 0 && this.exampleSelector === void 0) throw new Error(\"One of 'examples' and 'example_selector' should be provided\");\n\t\tif (this.validateTemplate) {\n\t\t\tlet totalInputVariables = this.inputVariables;\n\t\t\tif (this.partialVariables) totalInputVariables = totalInputVariables.concat(Object.keys(this.partialVariables));\n\t\t\t(0,_template_js__WEBPACK_IMPORTED_MODULE_1__.checkValidTemplate)(this.prefix + this.suffix, this.templateFormat, totalInputVariables);\n\t\t}\n\t}\n\tasync getExamples(inputVariables) {\n\t\tif (this.examples !== void 0) return this.examples;\n\t\tif (this.exampleSelector !== void 0) return this.exampleSelector.selectExamples(inputVariables);\n\t\tthrow new Error(\"One of 'examples' and 'example_selector' should be provided\");\n\t}\n\t/**\n\t* Formats the list of values and returns a list of formatted messages.\n\t* @param values The values to format the prompt with.\n\t* @returns A promise that resolves to a string representing the formatted prompt.\n\t*/\n\tasync formatMessages(values) {\n\t\tconst allValues = await this.mergePartialAndUserVariables(values);\n\t\tlet examples = await this.getExamples(allValues);\n\t\texamples = examples.map((example) => {\n\t\t\tconst result = {};\n\t\t\tthis.examplePrompt.inputVariables.forEach((inputVariable) => {\n\t\t\t\tresult[inputVariable] = example[inputVariable];\n\t\t\t});\n\t\t\treturn result;\n\t\t});\n\t\tconst messages = [];\n\t\tfor (const example of examples) {\n\t\t\tconst exampleMessages = await this.examplePrompt.formatMessages(example);\n\t\t\tmessages.push(...exampleMessages);\n\t\t}\n\t\treturn messages;\n\t}\n\t/**\n\t* Formats the prompt with the given values.\n\t* @param values The values to format the prompt with.\n\t* @returns A promise that resolves to a string representing the formatted prompt.\n\t*/\n\tasync format(values) {\n\t\tconst allValues = await this.mergePartialAndUserVariables(values);\n\t\tconst examples = await this.getExamples(allValues);\n\t\tconst exampleMessages = await Promise.all(examples.map((example) => this.examplePrompt.formatMessages(example)));\n\t\tconst exampleStrings = exampleMessages.flat().map((message) => message.content);\n\t\tconst template = [\n\t\t\tthis.prefix,\n\t\t\t...exampleStrings,\n\t\t\tthis.suffix\n\t\t].join(this.exampleSeparator);\n\t\treturn (0,_template_js__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)(template, this.templateFormat, allValues);\n\t}\n\t/**\n\t* Partially formats the prompt with the given values.\n\t* @param values The values to partially format the prompt with.\n\t* @returns A promise that resolves to an instance of `FewShotChatMessagePromptTemplate` with the given values partially formatted.\n\t*/\n\tasync partial(values) {\n\t\tconst newInputVariables = this.inputVariables.filter((variable) => !(variable in values));\n\t\tconst newPartialVariables = {\n\t\t\t...this.partialVariables ?? {},\n\t\t\t...values\n\t\t};\n\t\tconst promptDict = {\n\t\t\t...this,\n\t\t\tinputVariables: newInputVariables,\n\t\t\tpartialVariables: newPartialVariables\n\t\t};\n\t\treturn new FewShotChatMessagePromptTemplate(promptDict);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=few_shot.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9mZXdfc2hvdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBdUQ7QUFDWTtBQUN0QjtBQUNNOztBQUVuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxNQUFNLFdBQVcsT0FBTztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsK0JBQStCO0FBQ3ZDLFFBQVEsZ0NBQWdDO0FBQ3hDLFFBQVEseUNBQXlDO0FBQ2pELFFBQVEsa0NBQWtDO0FBQzFDLFFBQVEsZ0NBQWdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLE1BQU0sTUFBTTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixVQUFVO0FBQy9CO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSwyQ0FBMkMsb0JBQW9CO0FBQy9EO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSxnRUFBd0I7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsZ0VBQWtCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDREQUFjO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxpQkFBaUI7QUFDM0I7QUFDQSw4QkFBOEIsc0RBQWM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNGQUFzRiw0REFBc0I7QUFDNUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxnRUFBa0I7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDREQUFjO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNtRTtBQUNuRSIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3Byb21wdHMvZmV3X3Nob3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZVN0cmluZ1Byb21wdFRlbXBsYXRlIH0gZnJvbSBcIi4vc3RyaW5nLmpzXCI7XG5pbXBvcnQgeyBjaGVja1ZhbGlkVGVtcGxhdGUsIHJlbmRlclRlbXBsYXRlIH0gZnJvbSBcIi4vdGVtcGxhdGUuanNcIjtcbmltcG9ydCB7IFByb21wdFRlbXBsYXRlIH0gZnJvbSBcIi4vcHJvbXB0LmpzXCI7XG5pbXBvcnQgeyBCYXNlQ2hhdFByb21wdFRlbXBsYXRlIH0gZnJvbSBcIi4vY2hhdC5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3Byb21wdHMvZmV3X3Nob3QudHNcbi8qKlxuKiBQcm9tcHQgdGVtcGxhdGUgdGhhdCBjb250YWlucyBmZXctc2hvdCBleGFtcGxlcy5cbiogQGF1Z21lbnRzIEJhc2VQcm9tcHRUZW1wbGF0ZVxuKiBAYXVnbWVudHMgRmV3U2hvdFByb21wdFRlbXBsYXRlSW5wdXRcbiogQGV4YW1wbGVcbiogYGBgdHlwZXNjcmlwdFxuKiBjb25zdCBleGFtcGxlUHJvbXB0ID0gUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKFxuKiAgIFwiSW5wdXQ6IHtpbnB1dH1cXG5PdXRwdXQ6IHtvdXRwdXR9XCIsXG4qICk7XG4qXG4qIGNvbnN0IGV4YW1wbGVTZWxlY3RvciA9IGF3YWl0IFNlbWFudGljU2ltaWxhcml0eUV4YW1wbGVTZWxlY3Rvci5mcm9tRXhhbXBsZXMoXG4qICAgW1xuKiAgICAgeyBpbnB1dDogXCJoYXBweVwiLCBvdXRwdXQ6IFwic2FkXCIgfSxcbiogICAgIHsgaW5wdXQ6IFwidGFsbFwiLCBvdXRwdXQ6IFwic2hvcnRcIiB9LFxuKiAgICAgeyBpbnB1dDogXCJlbmVyZ2V0aWNcIiwgb3V0cHV0OiBcImxldGhhcmdpY1wiIH0sXG4qICAgICB7IGlucHV0OiBcInN1bm55XCIsIG91dHB1dDogXCJnbG9vbXlcIiB9LFxuKiAgICAgeyBpbnB1dDogXCJ3aW5keVwiLCBvdXRwdXQ6IFwiY2FsbVwiIH0sXG4qICAgXSxcbiogICBuZXcgT3BlbkFJRW1iZWRkaW5ncygpLFxuKiAgIEhOU1dMaWIsXG4qICAgeyBrOiAxIH0sXG4qICk7XG4qXG4qIGNvbnN0IGR5bmFtaWNQcm9tcHQgPSBuZXcgRmV3U2hvdFByb21wdFRlbXBsYXRlKHtcbiogICBleGFtcGxlU2VsZWN0b3IsXG4qICAgZXhhbXBsZVByb21wdCxcbiogICBwcmVmaXg6IFwiR2l2ZSB0aGUgYW50b255bSBvZiBldmVyeSBpbnB1dFwiLFxuKiAgIHN1ZmZpeDogXCJJbnB1dDoge2FkamVjdGl2ZX1cXG5PdXRwdXQ6XCIsXG4qICAgaW5wdXRWYXJpYWJsZXM6IFtcImFkamVjdGl2ZVwiXSxcbiogfSk7XG4qXG4qIC8vIEZvcm1hdCB0aGUgZHluYW1pYyBwcm9tcHQgd2l0aCB0aGUgaW5wdXQgJ3JhaW55J1xuKiBjb25zb2xlLmxvZyhhd2FpdCBkeW5hbWljUHJvbXB0LmZvcm1hdCh7IGFkamVjdGl2ZTogXCJyYWlueVwiIH0pKTtcbipcbiogYGBgXG4qL1xudmFyIEZld1Nob3RQcm9tcHRUZW1wbGF0ZSA9IGNsYXNzIEZld1Nob3RQcm9tcHRUZW1wbGF0ZSBleHRlbmRzIEJhc2VTdHJpbmdQcm9tcHRUZW1wbGF0ZSB7XG5cdGxjX3NlcmlhbGl6YWJsZSA9IGZhbHNlO1xuXHRleGFtcGxlcztcblx0ZXhhbXBsZVNlbGVjdG9yO1xuXHRleGFtcGxlUHJvbXB0O1xuXHRzdWZmaXggPSBcIlwiO1xuXHRleGFtcGxlU2VwYXJhdG9yID0gXCJcXG5cXG5cIjtcblx0cHJlZml4ID0gXCJcIjtcblx0dGVtcGxhdGVGb3JtYXQgPSBcImYtc3RyaW5nXCI7XG5cdHZhbGlkYXRlVGVtcGxhdGUgPSB0cnVlO1xuXHRjb25zdHJ1Y3RvcihpbnB1dCkge1xuXHRcdHN1cGVyKGlucHV0KTtcblx0XHRPYmplY3QuYXNzaWduKHRoaXMsIGlucHV0KTtcblx0XHRpZiAodGhpcy5leGFtcGxlcyAhPT0gdm9pZCAwICYmIHRoaXMuZXhhbXBsZVNlbGVjdG9yICE9PSB2b2lkIDApIHRocm93IG5ldyBFcnJvcihcIk9ubHkgb25lIG9mICdleGFtcGxlcycgYW5kICdleGFtcGxlX3NlbGVjdG9yJyBzaG91bGQgYmUgcHJvdmlkZWRcIik7XG5cdFx0aWYgKHRoaXMuZXhhbXBsZXMgPT09IHZvaWQgMCAmJiB0aGlzLmV4YW1wbGVTZWxlY3RvciA9PT0gdm9pZCAwKSB0aHJvdyBuZXcgRXJyb3IoXCJPbmUgb2YgJ2V4YW1wbGVzJyBhbmQgJ2V4YW1wbGVfc2VsZWN0b3InIHNob3VsZCBiZSBwcm92aWRlZFwiKTtcblx0XHRpZiAodGhpcy52YWxpZGF0ZVRlbXBsYXRlKSB7XG5cdFx0XHRsZXQgdG90YWxJbnB1dFZhcmlhYmxlcyA9IHRoaXMuaW5wdXRWYXJpYWJsZXM7XG5cdFx0XHRpZiAodGhpcy5wYXJ0aWFsVmFyaWFibGVzKSB0b3RhbElucHV0VmFyaWFibGVzID0gdG90YWxJbnB1dFZhcmlhYmxlcy5jb25jYXQoT2JqZWN0LmtleXModGhpcy5wYXJ0aWFsVmFyaWFibGVzKSk7XG5cdFx0XHRjaGVja1ZhbGlkVGVtcGxhdGUodGhpcy5wcmVmaXggKyB0aGlzLnN1ZmZpeCwgdGhpcy50ZW1wbGF0ZUZvcm1hdCwgdG90YWxJbnB1dFZhcmlhYmxlcyk7XG5cdFx0fVxuXHR9XG5cdF9nZXRQcm9tcHRUeXBlKCkge1xuXHRcdHJldHVybiBcImZld19zaG90XCI7XG5cdH1cblx0c3RhdGljIGxjX25hbWUoKSB7XG5cdFx0cmV0dXJuIFwiRmV3U2hvdFByb21wdFRlbXBsYXRlXCI7XG5cdH1cblx0YXN5bmMgZ2V0RXhhbXBsZXMoaW5wdXRWYXJpYWJsZXMpIHtcblx0XHRpZiAodGhpcy5leGFtcGxlcyAhPT0gdm9pZCAwKSByZXR1cm4gdGhpcy5leGFtcGxlcztcblx0XHRpZiAodGhpcy5leGFtcGxlU2VsZWN0b3IgIT09IHZvaWQgMCkgcmV0dXJuIHRoaXMuZXhhbXBsZVNlbGVjdG9yLnNlbGVjdEV4YW1wbGVzKGlucHV0VmFyaWFibGVzKTtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJPbmUgb2YgJ2V4YW1wbGVzJyBhbmQgJ2V4YW1wbGVfc2VsZWN0b3InIHNob3VsZCBiZSBwcm92aWRlZFwiKTtcblx0fVxuXHRhc3luYyBwYXJ0aWFsKHZhbHVlcykge1xuXHRcdGNvbnN0IG5ld0lucHV0VmFyaWFibGVzID0gdGhpcy5pbnB1dFZhcmlhYmxlcy5maWx0ZXIoKGl2KSA9PiAhKGl2IGluIHZhbHVlcykpO1xuXHRcdGNvbnN0IG5ld1BhcnRpYWxWYXJpYWJsZXMgPSB7XG5cdFx0XHQuLi50aGlzLnBhcnRpYWxWYXJpYWJsZXMgPz8ge30sXG5cdFx0XHQuLi52YWx1ZXNcblx0XHR9O1xuXHRcdGNvbnN0IHByb21wdERpY3QgPSB7XG5cdFx0XHQuLi50aGlzLFxuXHRcdFx0aW5wdXRWYXJpYWJsZXM6IG5ld0lucHV0VmFyaWFibGVzLFxuXHRcdFx0cGFydGlhbFZhcmlhYmxlczogbmV3UGFydGlhbFZhcmlhYmxlc1xuXHRcdH07XG5cdFx0cmV0dXJuIG5ldyBGZXdTaG90UHJvbXB0VGVtcGxhdGUocHJvbXB0RGljdCk7XG5cdH1cblx0LyoqXG5cdCogRm9ybWF0cyB0aGUgcHJvbXB0IHdpdGggdGhlIGdpdmVuIHZhbHVlcy5cblx0KiBAcGFyYW0gdmFsdWVzIFRoZSB2YWx1ZXMgdG8gZm9ybWF0IHRoZSBwcm9tcHQgd2l0aC5cblx0KiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGZvcm1hdHRlZCBwcm9tcHQuXG5cdCovXG5cdGFzeW5jIGZvcm1hdCh2YWx1ZXMpIHtcblx0XHRjb25zdCBhbGxWYWx1ZXMgPSBhd2FpdCB0aGlzLm1lcmdlUGFydGlhbEFuZFVzZXJWYXJpYWJsZXModmFsdWVzKTtcblx0XHRjb25zdCBleGFtcGxlcyA9IGF3YWl0IHRoaXMuZ2V0RXhhbXBsZXMoYWxsVmFsdWVzKTtcblx0XHRjb25zdCBleGFtcGxlU3RyaW5ncyA9IGF3YWl0IFByb21pc2UuYWxsKGV4YW1wbGVzLm1hcCgoZXhhbXBsZSkgPT4gdGhpcy5leGFtcGxlUHJvbXB0LmZvcm1hdChleGFtcGxlKSkpO1xuXHRcdGNvbnN0IHRlbXBsYXRlID0gW1xuXHRcdFx0dGhpcy5wcmVmaXgsXG5cdFx0XHQuLi5leGFtcGxlU3RyaW5ncyxcblx0XHRcdHRoaXMuc3VmZml4XG5cdFx0XS5qb2luKHRoaXMuZXhhbXBsZVNlcGFyYXRvcik7XG5cdFx0cmV0dXJuIHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzLnRlbXBsYXRlRm9ybWF0LCBhbGxWYWx1ZXMpO1xuXHR9XG5cdHNlcmlhbGl6ZSgpIHtcblx0XHRpZiAodGhpcy5leGFtcGxlU2VsZWN0b3IgfHwgIXRoaXMuZXhhbXBsZXMpIHRocm93IG5ldyBFcnJvcihcIlNlcmlhbGl6aW5nIGFuIGV4YW1wbGUgc2VsZWN0b3IgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWRcIik7XG5cdFx0aWYgKHRoaXMub3V0cHV0UGFyc2VyICE9PSB2b2lkIDApIHRocm93IG5ldyBFcnJvcihcIlNlcmlhbGl6aW5nIGFuIG91dHB1dCBwYXJzZXIgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWRcIik7XG5cdFx0cmV0dXJuIHtcblx0XHRcdF90eXBlOiB0aGlzLl9nZXRQcm9tcHRUeXBlKCksXG5cdFx0XHRpbnB1dF92YXJpYWJsZXM6IHRoaXMuaW5wdXRWYXJpYWJsZXMsXG5cdFx0XHRleGFtcGxlX3Byb21wdDogdGhpcy5leGFtcGxlUHJvbXB0LnNlcmlhbGl6ZSgpLFxuXHRcdFx0ZXhhbXBsZV9zZXBhcmF0b3I6IHRoaXMuZXhhbXBsZVNlcGFyYXRvcixcblx0XHRcdHN1ZmZpeDogdGhpcy5zdWZmaXgsXG5cdFx0XHRwcmVmaXg6IHRoaXMucHJlZml4LFxuXHRcdFx0dGVtcGxhdGVfZm9ybWF0OiB0aGlzLnRlbXBsYXRlRm9ybWF0LFxuXHRcdFx0ZXhhbXBsZXM6IHRoaXMuZXhhbXBsZXNcblx0XHR9O1xuXHR9XG5cdHN0YXRpYyBhc3luYyBkZXNlcmlhbGl6ZShkYXRhKSB7XG5cdFx0Y29uc3QgeyBleGFtcGxlX3Byb21wdCB9ID0gZGF0YTtcblx0XHRpZiAoIWV4YW1wbGVfcHJvbXB0KSB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIGV4YW1wbGUgcHJvbXB0XCIpO1xuXHRcdGNvbnN0IGV4YW1wbGVQcm9tcHQgPSBhd2FpdCBQcm9tcHRUZW1wbGF0ZS5kZXNlcmlhbGl6ZShleGFtcGxlX3Byb21wdCk7XG5cdFx0bGV0IGV4YW1wbGVzO1xuXHRcdGlmIChBcnJheS5pc0FycmF5KGRhdGEuZXhhbXBsZXMpKSBleGFtcGxlcyA9IGRhdGEuZXhhbXBsZXM7XG5cdFx0ZWxzZSB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGV4YW1wbGVzIGZvcm1hdC4gT25seSBsaXN0IG9yIHN0cmluZyBhcmUgc3VwcG9ydGVkLlwiKTtcblx0XHRyZXR1cm4gbmV3IEZld1Nob3RQcm9tcHRUZW1wbGF0ZSh7XG5cdFx0XHRpbnB1dFZhcmlhYmxlczogZGF0YS5pbnB1dF92YXJpYWJsZXMsXG5cdFx0XHRleGFtcGxlUHJvbXB0LFxuXHRcdFx0ZXhhbXBsZXMsXG5cdFx0XHRleGFtcGxlU2VwYXJhdG9yOiBkYXRhLmV4YW1wbGVfc2VwYXJhdG9yLFxuXHRcdFx0cHJlZml4OiBkYXRhLnByZWZpeCxcblx0XHRcdHN1ZmZpeDogZGF0YS5zdWZmaXgsXG5cdFx0XHR0ZW1wbGF0ZUZvcm1hdDogZGF0YS50ZW1wbGF0ZV9mb3JtYXRcblx0XHR9KTtcblx0fVxufTtcbi8qKlxuKiBDaGF0IHByb21wdCB0ZW1wbGF0ZSB0aGF0IGNvbnRhaW5zIGZldy1zaG90IGV4YW1wbGVzLlxuKiBAYXVnbWVudHMgQmFzZVByb21wdFRlbXBsYXRlSW5wdXRcbiogQGF1Z21lbnRzIEZld1Nob3RDaGF0TWVzc2FnZVByb21wdFRlbXBsYXRlSW5wdXRcbiovXG52YXIgRmV3U2hvdENoYXRNZXNzYWdlUHJvbXB0VGVtcGxhdGUgPSBjbGFzcyBGZXdTaG90Q2hhdE1lc3NhZ2VQcm9tcHRUZW1wbGF0ZSBleHRlbmRzIEJhc2VDaGF0UHJvbXB0VGVtcGxhdGUge1xuXHRsY19zZXJpYWxpemFibGUgPSB0cnVlO1xuXHRleGFtcGxlcztcblx0ZXhhbXBsZVNlbGVjdG9yO1xuXHRleGFtcGxlUHJvbXB0O1xuXHRzdWZmaXggPSBcIlwiO1xuXHRleGFtcGxlU2VwYXJhdG9yID0gXCJcXG5cXG5cIjtcblx0cHJlZml4ID0gXCJcIjtcblx0dGVtcGxhdGVGb3JtYXQgPSBcImYtc3RyaW5nXCI7XG5cdHZhbGlkYXRlVGVtcGxhdGUgPSB0cnVlO1xuXHRfZ2V0UHJvbXB0VHlwZSgpIHtcblx0XHRyZXR1cm4gXCJmZXdfc2hvdF9jaGF0XCI7XG5cdH1cblx0c3RhdGljIGxjX25hbWUoKSB7XG5cdFx0cmV0dXJuIFwiRmV3U2hvdENoYXRNZXNzYWdlUHJvbXB0VGVtcGxhdGVcIjtcblx0fVxuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHRzdXBlcihmaWVsZHMpO1xuXHRcdHRoaXMuZXhhbXBsZXMgPSBmaWVsZHMuZXhhbXBsZXM7XG5cdFx0dGhpcy5leGFtcGxlUHJvbXB0ID0gZmllbGRzLmV4YW1wbGVQcm9tcHQ7XG5cdFx0dGhpcy5leGFtcGxlU2VwYXJhdG9yID0gZmllbGRzLmV4YW1wbGVTZXBhcmF0b3IgPz8gXCJcXG5cXG5cIjtcblx0XHR0aGlzLmV4YW1wbGVTZWxlY3RvciA9IGZpZWxkcy5leGFtcGxlU2VsZWN0b3I7XG5cdFx0dGhpcy5wcmVmaXggPSBmaWVsZHMucHJlZml4ID8/IFwiXCI7XG5cdFx0dGhpcy5zdWZmaXggPSBmaWVsZHMuc3VmZml4ID8/IFwiXCI7XG5cdFx0dGhpcy50ZW1wbGF0ZUZvcm1hdCA9IGZpZWxkcy50ZW1wbGF0ZUZvcm1hdCA/PyBcImYtc3RyaW5nXCI7XG5cdFx0dGhpcy52YWxpZGF0ZVRlbXBsYXRlID0gZmllbGRzLnZhbGlkYXRlVGVtcGxhdGUgPz8gdHJ1ZTtcblx0XHRpZiAodGhpcy5leGFtcGxlcyAhPT0gdm9pZCAwICYmIHRoaXMuZXhhbXBsZVNlbGVjdG9yICE9PSB2b2lkIDApIHRocm93IG5ldyBFcnJvcihcIk9ubHkgb25lIG9mICdleGFtcGxlcycgYW5kICdleGFtcGxlX3NlbGVjdG9yJyBzaG91bGQgYmUgcHJvdmlkZWRcIik7XG5cdFx0aWYgKHRoaXMuZXhhbXBsZXMgPT09IHZvaWQgMCAmJiB0aGlzLmV4YW1wbGVTZWxlY3RvciA9PT0gdm9pZCAwKSB0aHJvdyBuZXcgRXJyb3IoXCJPbmUgb2YgJ2V4YW1wbGVzJyBhbmQgJ2V4YW1wbGVfc2VsZWN0b3InIHNob3VsZCBiZSBwcm92aWRlZFwiKTtcblx0XHRpZiAodGhpcy52YWxpZGF0ZVRlbXBsYXRlKSB7XG5cdFx0XHRsZXQgdG90YWxJbnB1dFZhcmlhYmxlcyA9IHRoaXMuaW5wdXRWYXJpYWJsZXM7XG5cdFx0XHRpZiAodGhpcy5wYXJ0aWFsVmFyaWFibGVzKSB0b3RhbElucHV0VmFyaWFibGVzID0gdG90YWxJbnB1dFZhcmlhYmxlcy5jb25jYXQoT2JqZWN0LmtleXModGhpcy5wYXJ0aWFsVmFyaWFibGVzKSk7XG5cdFx0XHRjaGVja1ZhbGlkVGVtcGxhdGUodGhpcy5wcmVmaXggKyB0aGlzLnN1ZmZpeCwgdGhpcy50ZW1wbGF0ZUZvcm1hdCwgdG90YWxJbnB1dFZhcmlhYmxlcyk7XG5cdFx0fVxuXHR9XG5cdGFzeW5jIGdldEV4YW1wbGVzKGlucHV0VmFyaWFibGVzKSB7XG5cdFx0aWYgKHRoaXMuZXhhbXBsZXMgIT09IHZvaWQgMCkgcmV0dXJuIHRoaXMuZXhhbXBsZXM7XG5cdFx0aWYgKHRoaXMuZXhhbXBsZVNlbGVjdG9yICE9PSB2b2lkIDApIHJldHVybiB0aGlzLmV4YW1wbGVTZWxlY3Rvci5zZWxlY3RFeGFtcGxlcyhpbnB1dFZhcmlhYmxlcyk7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiT25lIG9mICdleGFtcGxlcycgYW5kICdleGFtcGxlX3NlbGVjdG9yJyBzaG91bGQgYmUgcHJvdmlkZWRcIik7XG5cdH1cblx0LyoqXG5cdCogRm9ybWF0cyB0aGUgbGlzdCBvZiB2YWx1ZXMgYW5kIHJldHVybnMgYSBsaXN0IG9mIGZvcm1hdHRlZCBtZXNzYWdlcy5cblx0KiBAcGFyYW0gdmFsdWVzIFRoZSB2YWx1ZXMgdG8gZm9ybWF0IHRoZSBwcm9tcHQgd2l0aC5cblx0KiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGZvcm1hdHRlZCBwcm9tcHQuXG5cdCovXG5cdGFzeW5jIGZvcm1hdE1lc3NhZ2VzKHZhbHVlcykge1xuXHRcdGNvbnN0IGFsbFZhbHVlcyA9IGF3YWl0IHRoaXMubWVyZ2VQYXJ0aWFsQW5kVXNlclZhcmlhYmxlcyh2YWx1ZXMpO1xuXHRcdGxldCBleGFtcGxlcyA9IGF3YWl0IHRoaXMuZ2V0RXhhbXBsZXMoYWxsVmFsdWVzKTtcblx0XHRleGFtcGxlcyA9IGV4YW1wbGVzLm1hcCgoZXhhbXBsZSkgPT4ge1xuXHRcdFx0Y29uc3QgcmVzdWx0ID0ge307XG5cdFx0XHR0aGlzLmV4YW1wbGVQcm9tcHQuaW5wdXRWYXJpYWJsZXMuZm9yRWFjaCgoaW5wdXRWYXJpYWJsZSkgPT4ge1xuXHRcdFx0XHRyZXN1bHRbaW5wdXRWYXJpYWJsZV0gPSBleGFtcGxlW2lucHV0VmFyaWFibGVdO1xuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH0pO1xuXHRcdGNvbnN0IG1lc3NhZ2VzID0gW107XG5cdFx0Zm9yIChjb25zdCBleGFtcGxlIG9mIGV4YW1wbGVzKSB7XG5cdFx0XHRjb25zdCBleGFtcGxlTWVzc2FnZXMgPSBhd2FpdCB0aGlzLmV4YW1wbGVQcm9tcHQuZm9ybWF0TWVzc2FnZXMoZXhhbXBsZSk7XG5cdFx0XHRtZXNzYWdlcy5wdXNoKC4uLmV4YW1wbGVNZXNzYWdlcyk7XG5cdFx0fVxuXHRcdHJldHVybiBtZXNzYWdlcztcblx0fVxuXHQvKipcblx0KiBGb3JtYXRzIHRoZSBwcm9tcHQgd2l0aCB0aGUgZ2l2ZW4gdmFsdWVzLlxuXHQqIEBwYXJhbSB2YWx1ZXMgVGhlIHZhbHVlcyB0byBmb3JtYXQgdGhlIHByb21wdCB3aXRoLlxuXHQqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZm9ybWF0dGVkIHByb21wdC5cblx0Ki9cblx0YXN5bmMgZm9ybWF0KHZhbHVlcykge1xuXHRcdGNvbnN0IGFsbFZhbHVlcyA9IGF3YWl0IHRoaXMubWVyZ2VQYXJ0aWFsQW5kVXNlclZhcmlhYmxlcyh2YWx1ZXMpO1xuXHRcdGNvbnN0IGV4YW1wbGVzID0gYXdhaXQgdGhpcy5nZXRFeGFtcGxlcyhhbGxWYWx1ZXMpO1xuXHRcdGNvbnN0IGV4YW1wbGVNZXNzYWdlcyA9IGF3YWl0IFByb21pc2UuYWxsKGV4YW1wbGVzLm1hcCgoZXhhbXBsZSkgPT4gdGhpcy5leGFtcGxlUHJvbXB0LmZvcm1hdE1lc3NhZ2VzKGV4YW1wbGUpKSk7XG5cdFx0Y29uc3QgZXhhbXBsZVN0cmluZ3MgPSBleGFtcGxlTWVzc2FnZXMuZmxhdCgpLm1hcCgobWVzc2FnZSkgPT4gbWVzc2FnZS5jb250ZW50KTtcblx0XHRjb25zdCB0ZW1wbGF0ZSA9IFtcblx0XHRcdHRoaXMucHJlZml4LFxuXHRcdFx0Li4uZXhhbXBsZVN0cmluZ3MsXG5cdFx0XHR0aGlzLnN1ZmZpeFxuXHRcdF0uam9pbih0aGlzLmV4YW1wbGVTZXBhcmF0b3IpO1xuXHRcdHJldHVybiByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcy50ZW1wbGF0ZUZvcm1hdCwgYWxsVmFsdWVzKTtcblx0fVxuXHQvKipcblx0KiBQYXJ0aWFsbHkgZm9ybWF0cyB0aGUgcHJvbXB0IHdpdGggdGhlIGdpdmVuIHZhbHVlcy5cblx0KiBAcGFyYW0gdmFsdWVzIFRoZSB2YWx1ZXMgdG8gcGFydGlhbGx5IGZvcm1hdCB0aGUgcHJvbXB0IHdpdGguXG5cdCogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gaW5zdGFuY2Ugb2YgYEZld1Nob3RDaGF0TWVzc2FnZVByb21wdFRlbXBsYXRlYCB3aXRoIHRoZSBnaXZlbiB2YWx1ZXMgcGFydGlhbGx5IGZvcm1hdHRlZC5cblx0Ki9cblx0YXN5bmMgcGFydGlhbCh2YWx1ZXMpIHtcblx0XHRjb25zdCBuZXdJbnB1dFZhcmlhYmxlcyA9IHRoaXMuaW5wdXRWYXJpYWJsZXMuZmlsdGVyKCh2YXJpYWJsZSkgPT4gISh2YXJpYWJsZSBpbiB2YWx1ZXMpKTtcblx0XHRjb25zdCBuZXdQYXJ0aWFsVmFyaWFibGVzID0ge1xuXHRcdFx0Li4udGhpcy5wYXJ0aWFsVmFyaWFibGVzID8/IHt9LFxuXHRcdFx0Li4udmFsdWVzXG5cdFx0fTtcblx0XHRjb25zdCBwcm9tcHREaWN0ID0ge1xuXHRcdFx0Li4udGhpcyxcblx0XHRcdGlucHV0VmFyaWFibGVzOiBuZXdJbnB1dFZhcmlhYmxlcyxcblx0XHRcdHBhcnRpYWxWYXJpYWJsZXM6IG5ld1BhcnRpYWxWYXJpYWJsZXNcblx0XHR9O1xuXHRcdHJldHVybiBuZXcgRmV3U2hvdENoYXRNZXNzYWdlUHJvbXB0VGVtcGxhdGUocHJvbXB0RGljdCk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgRmV3U2hvdENoYXRNZXNzYWdlUHJvbXB0VGVtcGxhdGUsIEZld1Nob3RQcm9tcHRUZW1wbGF0ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmV3X3Nob3QuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/prompts/few_shot.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/prompts/image.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/image.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ImagePromptTemplate: () => (/* binding */ ImagePromptTemplate)\n/* harmony export */ });\n/* harmony import */ var _prompt_values_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../prompt_values.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompt_values.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/base.js\");\n/* harmony import */ var _template_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./template.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/template.js\");\n\n\n\n\n//#region src/prompts/image.ts\n/**\n* An image prompt template for a multimodal model.\n*/\nvar ImagePromptTemplate = class ImagePromptTemplate extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BasePromptTemplate {\n\tstatic lc_name() {\n\t\treturn \"ImagePromptTemplate\";\n\t}\n\tlc_namespace = [\n\t\t\"langchain_core\",\n\t\t\"prompts\",\n\t\t\"image\"\n\t];\n\ttemplate;\n\ttemplateFormat = \"f-string\";\n\tvalidateTemplate = true;\n\t/**\n\t* Additional fields which should be included inside\n\t* the message content array if using a complex message\n\t* content.\n\t*/\n\tadditionalContentFields;\n\tconstructor(input) {\n\t\tsuper(input);\n\t\tthis.template = input.template;\n\t\tthis.templateFormat = input.templateFormat ?? this.templateFormat;\n\t\tthis.validateTemplate = input.validateTemplate ?? this.validateTemplate;\n\t\tthis.additionalContentFields = input.additionalContentFields;\n\t\tif (this.validateTemplate) {\n\t\t\tlet totalInputVariables = this.inputVariables;\n\t\t\tif (this.partialVariables) totalInputVariables = totalInputVariables.concat(Object.keys(this.partialVariables));\n\t\t\t(0,_template_js__WEBPACK_IMPORTED_MODULE_2__.checkValidTemplate)([{\n\t\t\t\ttype: \"image_url\",\n\t\t\t\timage_url: this.template\n\t\t\t}], this.templateFormat, totalInputVariables);\n\t\t}\n\t}\n\t_getPromptType() {\n\t\treturn \"prompt\";\n\t}\n\t/**\n\t* Partially applies values to the prompt template.\n\t* @param values The values to be partially applied to the prompt template.\n\t* @returns A new instance of ImagePromptTemplate with the partially applied values.\n\t*/\n\tasync partial(values) {\n\t\tconst newInputVariables = this.inputVariables.filter((iv) => !(iv in values));\n\t\tconst newPartialVariables = {\n\t\t\t...this.partialVariables ?? {},\n\t\t\t...values\n\t\t};\n\t\tconst promptDict = {\n\t\t\t...this,\n\t\t\tinputVariables: newInputVariables,\n\t\t\tpartialVariables: newPartialVariables\n\t\t};\n\t\treturn new ImagePromptTemplate(promptDict);\n\t}\n\t/**\n\t* Formats the prompt template with the provided values.\n\t* @param values The values to be used to format the prompt template.\n\t* @returns A promise that resolves to a string which is the formatted prompt.\n\t*/\n\tasync format(values) {\n\t\tconst formatted = {};\n\t\tfor (const [key, value] of Object.entries(this.template)) if (typeof value === \"string\") formatted[key] = (0,_template_js__WEBPACK_IMPORTED_MODULE_2__.renderTemplate)(value, this.templateFormat, values);\n\t\telse formatted[key] = value;\n\t\tconst url = values.url || formatted.url;\n\t\tconst detail = values.detail || formatted.detail;\n\t\tif (!url) throw new Error(\"Must provide either an image URL.\");\n\t\tif (typeof url !== \"string\") throw new Error(\"url must be a string.\");\n\t\tconst output = { url };\n\t\tif (detail) output.detail = detail;\n\t\treturn output;\n\t}\n\t/**\n\t* Formats the prompt given the input values and returns a formatted\n\t* prompt value.\n\t* @param values The input values to format the prompt.\n\t* @returns A Promise that resolves to a formatted prompt value.\n\t*/\n\tasync formatPromptValue(values) {\n\t\tconst formattedPrompt = await this.format(values);\n\t\treturn new _prompt_values_js__WEBPACK_IMPORTED_MODULE_0__.ImagePromptValue(formattedPrompt);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=image.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9pbWFnZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXVEO0FBQ1I7QUFDb0I7O0FBRW5FO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELHdEQUFrQjtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxnRUFBa0I7QUFDckI7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRHQUE0Ryw0REFBYztBQUMxSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLCtEQUFnQjtBQUM3QjtBQUNBOztBQUVBO0FBQytCO0FBQy9CIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9pbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbWFnZVByb21wdFZhbHVlIH0gZnJvbSBcIi4uL3Byb21wdF92YWx1ZXMuanNcIjtcbmltcG9ydCB7IEJhc2VQcm9tcHRUZW1wbGF0ZSB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IGNoZWNrVmFsaWRUZW1wbGF0ZSwgcmVuZGVyVGVtcGxhdGUgfSBmcm9tIFwiLi90ZW1wbGF0ZS5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3Byb21wdHMvaW1hZ2UudHNcbi8qKlxuKiBBbiBpbWFnZSBwcm9tcHQgdGVtcGxhdGUgZm9yIGEgbXVsdGltb2RhbCBtb2RlbC5cbiovXG52YXIgSW1hZ2VQcm9tcHRUZW1wbGF0ZSA9IGNsYXNzIEltYWdlUHJvbXB0VGVtcGxhdGUgZXh0ZW5kcyBCYXNlUHJvbXB0VGVtcGxhdGUge1xuXHRzdGF0aWMgbGNfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJJbWFnZVByb21wdFRlbXBsYXRlXCI7XG5cdH1cblx0bGNfbmFtZXNwYWNlID0gW1xuXHRcdFwibGFuZ2NoYWluX2NvcmVcIixcblx0XHRcInByb21wdHNcIixcblx0XHRcImltYWdlXCJcblx0XTtcblx0dGVtcGxhdGU7XG5cdHRlbXBsYXRlRm9ybWF0ID0gXCJmLXN0cmluZ1wiO1xuXHR2YWxpZGF0ZVRlbXBsYXRlID0gdHJ1ZTtcblx0LyoqXG5cdCogQWRkaXRpb25hbCBmaWVsZHMgd2hpY2ggc2hvdWxkIGJlIGluY2x1ZGVkIGluc2lkZVxuXHQqIHRoZSBtZXNzYWdlIGNvbnRlbnQgYXJyYXkgaWYgdXNpbmcgYSBjb21wbGV4IG1lc3NhZ2Vcblx0KiBjb250ZW50LlxuXHQqL1xuXHRhZGRpdGlvbmFsQ29udGVudEZpZWxkcztcblx0Y29uc3RydWN0b3IoaW5wdXQpIHtcblx0XHRzdXBlcihpbnB1dCk7XG5cdFx0dGhpcy50ZW1wbGF0ZSA9IGlucHV0LnRlbXBsYXRlO1xuXHRcdHRoaXMudGVtcGxhdGVGb3JtYXQgPSBpbnB1dC50ZW1wbGF0ZUZvcm1hdCA/PyB0aGlzLnRlbXBsYXRlRm9ybWF0O1xuXHRcdHRoaXMudmFsaWRhdGVUZW1wbGF0ZSA9IGlucHV0LnZhbGlkYXRlVGVtcGxhdGUgPz8gdGhpcy52YWxpZGF0ZVRlbXBsYXRlO1xuXHRcdHRoaXMuYWRkaXRpb25hbENvbnRlbnRGaWVsZHMgPSBpbnB1dC5hZGRpdGlvbmFsQ29udGVudEZpZWxkcztcblx0XHRpZiAodGhpcy52YWxpZGF0ZVRlbXBsYXRlKSB7XG5cdFx0XHRsZXQgdG90YWxJbnB1dFZhcmlhYmxlcyA9IHRoaXMuaW5wdXRWYXJpYWJsZXM7XG5cdFx0XHRpZiAodGhpcy5wYXJ0aWFsVmFyaWFibGVzKSB0b3RhbElucHV0VmFyaWFibGVzID0gdG90YWxJbnB1dFZhcmlhYmxlcy5jb25jYXQoT2JqZWN0LmtleXModGhpcy5wYXJ0aWFsVmFyaWFibGVzKSk7XG5cdFx0XHRjaGVja1ZhbGlkVGVtcGxhdGUoW3tcblx0XHRcdFx0dHlwZTogXCJpbWFnZV91cmxcIixcblx0XHRcdFx0aW1hZ2VfdXJsOiB0aGlzLnRlbXBsYXRlXG5cdFx0XHR9XSwgdGhpcy50ZW1wbGF0ZUZvcm1hdCwgdG90YWxJbnB1dFZhcmlhYmxlcyk7XG5cdFx0fVxuXHR9XG5cdF9nZXRQcm9tcHRUeXBlKCkge1xuXHRcdHJldHVybiBcInByb21wdFwiO1xuXHR9XG5cdC8qKlxuXHQqIFBhcnRpYWxseSBhcHBsaWVzIHZhbHVlcyB0byB0aGUgcHJvbXB0IHRlbXBsYXRlLlxuXHQqIEBwYXJhbSB2YWx1ZXMgVGhlIHZhbHVlcyB0byBiZSBwYXJ0aWFsbHkgYXBwbGllZCB0byB0aGUgcHJvbXB0IHRlbXBsYXRlLlxuXHQqIEByZXR1cm5zIEEgbmV3IGluc3RhbmNlIG9mIEltYWdlUHJvbXB0VGVtcGxhdGUgd2l0aCB0aGUgcGFydGlhbGx5IGFwcGxpZWQgdmFsdWVzLlxuXHQqL1xuXHRhc3luYyBwYXJ0aWFsKHZhbHVlcykge1xuXHRcdGNvbnN0IG5ld0lucHV0VmFyaWFibGVzID0gdGhpcy5pbnB1dFZhcmlhYmxlcy5maWx0ZXIoKGl2KSA9PiAhKGl2IGluIHZhbHVlcykpO1xuXHRcdGNvbnN0IG5ld1BhcnRpYWxWYXJpYWJsZXMgPSB7XG5cdFx0XHQuLi50aGlzLnBhcnRpYWxWYXJpYWJsZXMgPz8ge30sXG5cdFx0XHQuLi52YWx1ZXNcblx0XHR9O1xuXHRcdGNvbnN0IHByb21wdERpY3QgPSB7XG5cdFx0XHQuLi50aGlzLFxuXHRcdFx0aW5wdXRWYXJpYWJsZXM6IG5ld0lucHV0VmFyaWFibGVzLFxuXHRcdFx0cGFydGlhbFZhcmlhYmxlczogbmV3UGFydGlhbFZhcmlhYmxlc1xuXHRcdH07XG5cdFx0cmV0dXJuIG5ldyBJbWFnZVByb21wdFRlbXBsYXRlKHByb21wdERpY3QpO1xuXHR9XG5cdC8qKlxuXHQqIEZvcm1hdHMgdGhlIHByb21wdCB0ZW1wbGF0ZSB3aXRoIHRoZSBwcm92aWRlZCB2YWx1ZXMuXG5cdCogQHBhcmFtIHZhbHVlcyBUaGUgdmFsdWVzIHRvIGJlIHVzZWQgdG8gZm9ybWF0IHRoZSBwcm9tcHQgdGVtcGxhdGUuXG5cdCogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBzdHJpbmcgd2hpY2ggaXMgdGhlIGZvcm1hdHRlZCBwcm9tcHQuXG5cdCovXG5cdGFzeW5jIGZvcm1hdCh2YWx1ZXMpIHtcblx0XHRjb25zdCBmb3JtYXR0ZWQgPSB7fTtcblx0XHRmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLnRlbXBsYXRlKSkgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikgZm9ybWF0dGVkW2tleV0gPSByZW5kZXJUZW1wbGF0ZSh2YWx1ZSwgdGhpcy50ZW1wbGF0ZUZvcm1hdCwgdmFsdWVzKTtcblx0XHRlbHNlIGZvcm1hdHRlZFtrZXldID0gdmFsdWU7XG5cdFx0Y29uc3QgdXJsID0gdmFsdWVzLnVybCB8fCBmb3JtYXR0ZWQudXJsO1xuXHRcdGNvbnN0IGRldGFpbCA9IHZhbHVlcy5kZXRhaWwgfHwgZm9ybWF0dGVkLmRldGFpbDtcblx0XHRpZiAoIXVybCkgdGhyb3cgbmV3IEVycm9yKFwiTXVzdCBwcm92aWRlIGVpdGhlciBhbiBpbWFnZSBVUkwuXCIpO1xuXHRcdGlmICh0eXBlb2YgdXJsICE9PSBcInN0cmluZ1wiKSB0aHJvdyBuZXcgRXJyb3IoXCJ1cmwgbXVzdCBiZSBhIHN0cmluZy5cIik7XG5cdFx0Y29uc3Qgb3V0cHV0ID0geyB1cmwgfTtcblx0XHRpZiAoZGV0YWlsKSBvdXRwdXQuZGV0YWlsID0gZGV0YWlsO1xuXHRcdHJldHVybiBvdXRwdXQ7XG5cdH1cblx0LyoqXG5cdCogRm9ybWF0cyB0aGUgcHJvbXB0IGdpdmVuIHRoZSBpbnB1dCB2YWx1ZXMgYW5kIHJldHVybnMgYSBmb3JtYXR0ZWRcblx0KiBwcm9tcHQgdmFsdWUuXG5cdCogQHBhcmFtIHZhbHVlcyBUaGUgaW5wdXQgdmFsdWVzIHRvIGZvcm1hdCB0aGUgcHJvbXB0LlxuXHQqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgZm9ybWF0dGVkIHByb21wdCB2YWx1ZS5cblx0Ki9cblx0YXN5bmMgZm9ybWF0UHJvbXB0VmFsdWUodmFsdWVzKSB7XG5cdFx0Y29uc3QgZm9ybWF0dGVkUHJvbXB0ID0gYXdhaXQgdGhpcy5mb3JtYXQodmFsdWVzKTtcblx0XHRyZXR1cm4gbmV3IEltYWdlUHJvbXB0VmFsdWUoZm9ybWF0dGVkUHJvbXB0KTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBJbWFnZVByb21wdFRlbXBsYXRlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/prompts/image.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/prompts/index.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/index.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessagePromptTemplate: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_7__.AIMessagePromptTemplate),\n/* harmony export */   BaseChatPromptTemplate: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_7__.BaseChatPromptTemplate),\n/* harmony export */   BaseMessagePromptTemplate: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_7__.BaseMessagePromptTemplate),\n/* harmony export */   BaseMessageStringPromptTemplate: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_7__.BaseMessageStringPromptTemplate),\n/* harmony export */   BasePromptTemplate: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.BasePromptTemplate),\n/* harmony export */   BaseStringPromptTemplate: () => (/* reexport safe */ _string_js__WEBPACK_IMPORTED_MODULE_2__.BaseStringPromptTemplate),\n/* harmony export */   ChatMessagePromptTemplate: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_7__.ChatMessagePromptTemplate),\n/* harmony export */   ChatPromptTemplate: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_7__.ChatPromptTemplate),\n/* harmony export */   DEFAULT_FORMATTER_MAPPING: () => (/* reexport safe */ _template_js__WEBPACK_IMPORTED_MODULE_3__.DEFAULT_FORMATTER_MAPPING),\n/* harmony export */   DEFAULT_PARSER_MAPPING: () => (/* reexport safe */ _template_js__WEBPACK_IMPORTED_MODULE_3__.DEFAULT_PARSER_MAPPING),\n/* harmony export */   DictPromptTemplate: () => (/* reexport safe */ _dict_js__WEBPACK_IMPORTED_MODULE_6__.DictPromptTemplate),\n/* harmony export */   FewShotChatMessagePromptTemplate: () => (/* reexport safe */ _few_shot_js__WEBPACK_IMPORTED_MODULE_8__.FewShotChatMessagePromptTemplate),\n/* harmony export */   FewShotPromptTemplate: () => (/* reexport safe */ _few_shot_js__WEBPACK_IMPORTED_MODULE_8__.FewShotPromptTemplate),\n/* harmony export */   HumanMessagePromptTemplate: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_7__.HumanMessagePromptTemplate),\n/* harmony export */   ImagePromptTemplate: () => (/* reexport safe */ _image_js__WEBPACK_IMPORTED_MODULE_5__.ImagePromptTemplate),\n/* harmony export */   MessagesPlaceholder: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_7__.MessagesPlaceholder),\n/* harmony export */   PipelinePromptTemplate: () => (/* reexport safe */ _pipeline_js__WEBPACK_IMPORTED_MODULE_9__.PipelinePromptTemplate),\n/* harmony export */   PromptTemplate: () => (/* reexport safe */ _prompt_js__WEBPACK_IMPORTED_MODULE_4__.PromptTemplate),\n/* harmony export */   StructuredPrompt: () => (/* reexport safe */ _structured_js__WEBPACK_IMPORTED_MODULE_10__.StructuredPrompt),\n/* harmony export */   SystemMessagePromptTemplate: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_7__.SystemMessagePromptTemplate),\n/* harmony export */   checkValidTemplate: () => (/* reexport safe */ _template_js__WEBPACK_IMPORTED_MODULE_3__.checkValidTemplate),\n/* harmony export */   interpolateFString: () => (/* reexport safe */ _template_js__WEBPACK_IMPORTED_MODULE_3__.interpolateFString),\n/* harmony export */   interpolateMustache: () => (/* reexport safe */ _template_js__WEBPACK_IMPORTED_MODULE_3__.interpolateMustache),\n/* harmony export */   parseFString: () => (/* reexport safe */ _template_js__WEBPACK_IMPORTED_MODULE_3__.parseFString),\n/* harmony export */   parseMustache: () => (/* reexport safe */ _template_js__WEBPACK_IMPORTED_MODULE_3__.parseMustache),\n/* harmony export */   parseTemplate: () => (/* reexport safe */ _template_js__WEBPACK_IMPORTED_MODULE_3__.parseTemplate),\n/* harmony export */   prompts_exports: () => (/* binding */ prompts_exports),\n/* harmony export */   renderTemplate: () => (/* reexport safe */ _template_js__WEBPACK_IMPORTED_MODULE_3__.renderTemplate)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/base.js\");\n/* harmony import */ var _string_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./string.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/string.js\");\n/* harmony import */ var _template_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./template.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/template.js\");\n/* harmony import */ var _prompt_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./prompt.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/prompt.js\");\n/* harmony import */ var _image_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./image.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/image.js\");\n/* harmony import */ var _dict_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./dict.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/dict.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./chat.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/chat.js\");\n/* harmony import */ var _few_shot_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./few_shot.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/few_shot.js\");\n/* harmony import */ var _pipeline_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./pipeline.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/pipeline.js\");\n/* harmony import */ var _structured_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./structured.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/structured.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/prompts/index.ts\nvar prompts_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(prompts_exports, {\n\tAIMessagePromptTemplate: () => _chat_js__WEBPACK_IMPORTED_MODULE_7__.AIMessagePromptTemplate,\n\tBaseChatPromptTemplate: () => _chat_js__WEBPACK_IMPORTED_MODULE_7__.BaseChatPromptTemplate,\n\tBaseMessagePromptTemplate: () => _chat_js__WEBPACK_IMPORTED_MODULE_7__.BaseMessagePromptTemplate,\n\tBaseMessageStringPromptTemplate: () => _chat_js__WEBPACK_IMPORTED_MODULE_7__.BaseMessageStringPromptTemplate,\n\tBasePromptTemplate: () => _base_js__WEBPACK_IMPORTED_MODULE_1__.BasePromptTemplate,\n\tBaseStringPromptTemplate: () => _string_js__WEBPACK_IMPORTED_MODULE_2__.BaseStringPromptTemplate,\n\tChatMessagePromptTemplate: () => _chat_js__WEBPACK_IMPORTED_MODULE_7__.ChatMessagePromptTemplate,\n\tChatPromptTemplate: () => _chat_js__WEBPACK_IMPORTED_MODULE_7__.ChatPromptTemplate,\n\tDEFAULT_FORMATTER_MAPPING: () => _template_js__WEBPACK_IMPORTED_MODULE_3__.DEFAULT_FORMATTER_MAPPING,\n\tDEFAULT_PARSER_MAPPING: () => _template_js__WEBPACK_IMPORTED_MODULE_3__.DEFAULT_PARSER_MAPPING,\n\tDictPromptTemplate: () => _dict_js__WEBPACK_IMPORTED_MODULE_6__.DictPromptTemplate,\n\tFewShotChatMessagePromptTemplate: () => _few_shot_js__WEBPACK_IMPORTED_MODULE_8__.FewShotChatMessagePromptTemplate,\n\tFewShotPromptTemplate: () => _few_shot_js__WEBPACK_IMPORTED_MODULE_8__.FewShotPromptTemplate,\n\tHumanMessagePromptTemplate: () => _chat_js__WEBPACK_IMPORTED_MODULE_7__.HumanMessagePromptTemplate,\n\tImagePromptTemplate: () => _image_js__WEBPACK_IMPORTED_MODULE_5__.ImagePromptTemplate,\n\tMessagesPlaceholder: () => _chat_js__WEBPACK_IMPORTED_MODULE_7__.MessagesPlaceholder,\n\tPipelinePromptTemplate: () => _pipeline_js__WEBPACK_IMPORTED_MODULE_9__.PipelinePromptTemplate,\n\tPromptTemplate: () => _prompt_js__WEBPACK_IMPORTED_MODULE_4__.PromptTemplate,\n\tStructuredPrompt: () => _structured_js__WEBPACK_IMPORTED_MODULE_10__.StructuredPrompt,\n\tSystemMessagePromptTemplate: () => _chat_js__WEBPACK_IMPORTED_MODULE_7__.SystemMessagePromptTemplate,\n\tcheckValidTemplate: () => _template_js__WEBPACK_IMPORTED_MODULE_3__.checkValidTemplate,\n\tinterpolateFString: () => _template_js__WEBPACK_IMPORTED_MODULE_3__.interpolateFString,\n\tinterpolateMustache: () => _template_js__WEBPACK_IMPORTED_MODULE_3__.interpolateMustache,\n\tparseFString: () => _template_js__WEBPACK_IMPORTED_MODULE_3__.parseFString,\n\tparseMustache: () => _template_js__WEBPACK_IMPORTED_MODULE_3__.parseMustache,\n\tparseTemplate: () => _template_js__WEBPACK_IMPORTED_MODULE_3__.parseTemplate,\n\trenderTemplate: () => _template_js__WEBPACK_IMPORTED_MODULE_3__.renderTemplate\n});\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBMkQ7QUFDWjtBQUNRO0FBQ29KO0FBQzlKO0FBQ0k7QUFDRjtBQUNzTjtBQUM3SztBQUNqQztBQUNKOztBQUVuRDtBQUNBO0FBQ0Esc0VBQVE7QUFDUixnQ0FBZ0MsNkRBQXVCO0FBQ3ZELCtCQUErQiw0REFBc0I7QUFDckQsa0NBQWtDLCtEQUF5QjtBQUMzRCx3Q0FBd0MscUVBQStCO0FBQ3ZFLDJCQUEyQix3REFBa0I7QUFDN0MsaUNBQWlDLGdFQUF3QjtBQUN6RCxrQ0FBa0MsK0RBQXlCO0FBQzNELDJCQUEyQix3REFBa0I7QUFDN0Msa0NBQWtDLG1FQUF5QjtBQUMzRCwrQkFBK0IsZ0VBQXNCO0FBQ3JELDJCQUEyQix3REFBa0I7QUFDN0MseUNBQXlDLDBFQUFnQztBQUN6RSw4QkFBOEIsK0RBQXFCO0FBQ25ELG1DQUFtQyxnRUFBMEI7QUFDN0QsNEJBQTRCLDBEQUFtQjtBQUMvQyw0QkFBNEIseURBQW1CO0FBQy9DLCtCQUErQixnRUFBc0I7QUFDckQsdUJBQXVCLHNEQUFjO0FBQ3JDLHlCQUF5Qiw2REFBZ0I7QUFDekMsb0NBQW9DLGlFQUEyQjtBQUMvRCwyQkFBMkIsNERBQWtCO0FBQzdDLDJCQUEyQiw0REFBa0I7QUFDN0MsNEJBQTRCLDZEQUFtQjtBQUMvQyxxQkFBcUIsc0RBQVk7QUFDakMsc0JBQXNCLHVEQUFhO0FBQ25DLHNCQUFzQix1REFBYTtBQUNuQyx1QkFBdUIsd0RBQWM7QUFDckMsQ0FBQzs7QUFFRDtBQUMybkI7QUFDM25CIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4cG9ydCB9IGZyb20gXCIuLi9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyBCYXNlUHJvbXB0VGVtcGxhdGUgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBCYXNlU3RyaW5nUHJvbXB0VGVtcGxhdGUgfSBmcm9tIFwiLi9zdHJpbmcuanNcIjtcbmltcG9ydCB7IERFRkFVTFRfRk9STUFUVEVSX01BUFBJTkcsIERFRkFVTFRfUEFSU0VSX01BUFBJTkcsIGNoZWNrVmFsaWRUZW1wbGF0ZSwgaW50ZXJwb2xhdGVGU3RyaW5nLCBpbnRlcnBvbGF0ZU11c3RhY2hlLCBwYXJzZUZTdHJpbmcsIHBhcnNlTXVzdGFjaGUsIHBhcnNlVGVtcGxhdGUsIHJlbmRlclRlbXBsYXRlIH0gZnJvbSBcIi4vdGVtcGxhdGUuanNcIjtcbmltcG9ydCB7IFByb21wdFRlbXBsYXRlIH0gZnJvbSBcIi4vcHJvbXB0LmpzXCI7XG5pbXBvcnQgeyBJbWFnZVByb21wdFRlbXBsYXRlIH0gZnJvbSBcIi4vaW1hZ2UuanNcIjtcbmltcG9ydCB7IERpY3RQcm9tcHRUZW1wbGF0ZSB9IGZyb20gXCIuL2RpY3QuanNcIjtcbmltcG9ydCB7IEFJTWVzc2FnZVByb21wdFRlbXBsYXRlLCBCYXNlQ2hhdFByb21wdFRlbXBsYXRlLCBCYXNlTWVzc2FnZVByb21wdFRlbXBsYXRlLCBCYXNlTWVzc2FnZVN0cmluZ1Byb21wdFRlbXBsYXRlLCBDaGF0TWVzc2FnZVByb21wdFRlbXBsYXRlLCBDaGF0UHJvbXB0VGVtcGxhdGUsIEh1bWFuTWVzc2FnZVByb21wdFRlbXBsYXRlLCBNZXNzYWdlc1BsYWNlaG9sZGVyLCBTeXN0ZW1NZXNzYWdlUHJvbXB0VGVtcGxhdGUgfSBmcm9tIFwiLi9jaGF0LmpzXCI7XG5pbXBvcnQgeyBGZXdTaG90Q2hhdE1lc3NhZ2VQcm9tcHRUZW1wbGF0ZSwgRmV3U2hvdFByb21wdFRlbXBsYXRlIH0gZnJvbSBcIi4vZmV3X3Nob3QuanNcIjtcbmltcG9ydCB7IFBpcGVsaW5lUHJvbXB0VGVtcGxhdGUgfSBmcm9tIFwiLi9waXBlbGluZS5qc1wiO1xuaW1wb3J0IHsgU3RydWN0dXJlZFByb21wdCB9IGZyb20gXCIuL3N0cnVjdHVyZWQuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9wcm9tcHRzL2luZGV4LnRzXG52YXIgcHJvbXB0c19leHBvcnRzID0ge307XG5fX2V4cG9ydChwcm9tcHRzX2V4cG9ydHMsIHtcblx0QUlNZXNzYWdlUHJvbXB0VGVtcGxhdGU6ICgpID0+IEFJTWVzc2FnZVByb21wdFRlbXBsYXRlLFxuXHRCYXNlQ2hhdFByb21wdFRlbXBsYXRlOiAoKSA9PiBCYXNlQ2hhdFByb21wdFRlbXBsYXRlLFxuXHRCYXNlTWVzc2FnZVByb21wdFRlbXBsYXRlOiAoKSA9PiBCYXNlTWVzc2FnZVByb21wdFRlbXBsYXRlLFxuXHRCYXNlTWVzc2FnZVN0cmluZ1Byb21wdFRlbXBsYXRlOiAoKSA9PiBCYXNlTWVzc2FnZVN0cmluZ1Byb21wdFRlbXBsYXRlLFxuXHRCYXNlUHJvbXB0VGVtcGxhdGU6ICgpID0+IEJhc2VQcm9tcHRUZW1wbGF0ZSxcblx0QmFzZVN0cmluZ1Byb21wdFRlbXBsYXRlOiAoKSA9PiBCYXNlU3RyaW5nUHJvbXB0VGVtcGxhdGUsXG5cdENoYXRNZXNzYWdlUHJvbXB0VGVtcGxhdGU6ICgpID0+IENoYXRNZXNzYWdlUHJvbXB0VGVtcGxhdGUsXG5cdENoYXRQcm9tcHRUZW1wbGF0ZTogKCkgPT4gQ2hhdFByb21wdFRlbXBsYXRlLFxuXHRERUZBVUxUX0ZPUk1BVFRFUl9NQVBQSU5HOiAoKSA9PiBERUZBVUxUX0ZPUk1BVFRFUl9NQVBQSU5HLFxuXHRERUZBVUxUX1BBUlNFUl9NQVBQSU5HOiAoKSA9PiBERUZBVUxUX1BBUlNFUl9NQVBQSU5HLFxuXHREaWN0UHJvbXB0VGVtcGxhdGU6ICgpID0+IERpY3RQcm9tcHRUZW1wbGF0ZSxcblx0RmV3U2hvdENoYXRNZXNzYWdlUHJvbXB0VGVtcGxhdGU6ICgpID0+IEZld1Nob3RDaGF0TWVzc2FnZVByb21wdFRlbXBsYXRlLFxuXHRGZXdTaG90UHJvbXB0VGVtcGxhdGU6ICgpID0+IEZld1Nob3RQcm9tcHRUZW1wbGF0ZSxcblx0SHVtYW5NZXNzYWdlUHJvbXB0VGVtcGxhdGU6ICgpID0+IEh1bWFuTWVzc2FnZVByb21wdFRlbXBsYXRlLFxuXHRJbWFnZVByb21wdFRlbXBsYXRlOiAoKSA9PiBJbWFnZVByb21wdFRlbXBsYXRlLFxuXHRNZXNzYWdlc1BsYWNlaG9sZGVyOiAoKSA9PiBNZXNzYWdlc1BsYWNlaG9sZGVyLFxuXHRQaXBlbGluZVByb21wdFRlbXBsYXRlOiAoKSA9PiBQaXBlbGluZVByb21wdFRlbXBsYXRlLFxuXHRQcm9tcHRUZW1wbGF0ZTogKCkgPT4gUHJvbXB0VGVtcGxhdGUsXG5cdFN0cnVjdHVyZWRQcm9tcHQ6ICgpID0+IFN0cnVjdHVyZWRQcm9tcHQsXG5cdFN5c3RlbU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZTogKCkgPT4gU3lzdGVtTWVzc2FnZVByb21wdFRlbXBsYXRlLFxuXHRjaGVja1ZhbGlkVGVtcGxhdGU6ICgpID0+IGNoZWNrVmFsaWRUZW1wbGF0ZSxcblx0aW50ZXJwb2xhdGVGU3RyaW5nOiAoKSA9PiBpbnRlcnBvbGF0ZUZTdHJpbmcsXG5cdGludGVycG9sYXRlTXVzdGFjaGU6ICgpID0+IGludGVycG9sYXRlTXVzdGFjaGUsXG5cdHBhcnNlRlN0cmluZzogKCkgPT4gcGFyc2VGU3RyaW5nLFxuXHRwYXJzZU11c3RhY2hlOiAoKSA9PiBwYXJzZU11c3RhY2hlLFxuXHRwYXJzZVRlbXBsYXRlOiAoKSA9PiBwYXJzZVRlbXBsYXRlLFxuXHRyZW5kZXJUZW1wbGF0ZTogKCkgPT4gcmVuZGVyVGVtcGxhdGVcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEFJTWVzc2FnZVByb21wdFRlbXBsYXRlLCBCYXNlQ2hhdFByb21wdFRlbXBsYXRlLCBCYXNlTWVzc2FnZVByb21wdFRlbXBsYXRlLCBCYXNlTWVzc2FnZVN0cmluZ1Byb21wdFRlbXBsYXRlLCBCYXNlUHJvbXB0VGVtcGxhdGUsIEJhc2VTdHJpbmdQcm9tcHRUZW1wbGF0ZSwgQ2hhdE1lc3NhZ2VQcm9tcHRUZW1wbGF0ZSwgQ2hhdFByb21wdFRlbXBsYXRlLCBERUZBVUxUX0ZPUk1BVFRFUl9NQVBQSU5HLCBERUZBVUxUX1BBUlNFUl9NQVBQSU5HLCBEaWN0UHJvbXB0VGVtcGxhdGUsIEZld1Nob3RDaGF0TWVzc2FnZVByb21wdFRlbXBsYXRlLCBGZXdTaG90UHJvbXB0VGVtcGxhdGUsIEh1bWFuTWVzc2FnZVByb21wdFRlbXBsYXRlLCBJbWFnZVByb21wdFRlbXBsYXRlLCBNZXNzYWdlc1BsYWNlaG9sZGVyLCBQaXBlbGluZVByb21wdFRlbXBsYXRlLCBQcm9tcHRUZW1wbGF0ZSwgU3RydWN0dXJlZFByb21wdCwgU3lzdGVtTWVzc2FnZVByb21wdFRlbXBsYXRlLCBjaGVja1ZhbGlkVGVtcGxhdGUsIGludGVycG9sYXRlRlN0cmluZywgaW50ZXJwb2xhdGVNdXN0YWNoZSwgcGFyc2VGU3RyaW5nLCBwYXJzZU11c3RhY2hlLCBwYXJzZVRlbXBsYXRlLCBwcm9tcHRzX2V4cG9ydHMsIHJlbmRlclRlbXBsYXRlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/prompts/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/prompts/pipeline.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/pipeline.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PipelinePromptTemplate: () => (/* binding */ PipelinePromptTemplate)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/base.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chat.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/chat.js\");\n\n\n\n//#region src/prompts/pipeline.ts\n/**\n* Class that handles a sequence of prompts, each of which may require\n* different input variables. Includes methods for formatting these\n* prompts, extracting required input values, and handling partial\n* prompts.\n* @example\n* ```typescript\n* const composedPrompt = new PipelinePromptTemplate({\n*   pipelinePrompts: [\n*     {\n*       name: \"introduction\",\n*       prompt: PromptTemplate.fromTemplate(`You are impersonating {person}.`),\n*     },\n*     {\n*       name: \"example\",\n*       prompt: PromptTemplate.fromTemplate(\n*         `Here's an example of an interaction:\n* Q: {example_q}\n* A: {example_a}`,\n*       ),\n*     },\n*     {\n*       name: \"start\",\n*       prompt: PromptTemplate.fromTemplate(\n*         `Now, do this for real!\n* Q: {input}\n* A:`,\n*       ),\n*     },\n*   ],\n*   finalPrompt: PromptTemplate.fromTemplate(\n*     `{introduction}\n* {example}\n* {start}`,\n*   ),\n* });\n*\n* const formattedPrompt = await composedPrompt.format({\n*   person: \"Elon Musk\",\n*   example_q: `What's your favorite car?`,\n*   example_a: \"Tesla\",\n*   input: `What's your favorite social media site?`,\n* });\n* ```\n*/\nvar PipelinePromptTemplate = class PipelinePromptTemplate extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BasePromptTemplate {\n\tstatic lc_name() {\n\t\treturn \"PipelinePromptTemplate\";\n\t}\n\tpipelinePrompts;\n\tfinalPrompt;\n\tconstructor(input) {\n\t\tsuper({\n\t\t\t...input,\n\t\t\tinputVariables: []\n\t\t});\n\t\tthis.pipelinePrompts = input.pipelinePrompts;\n\t\tthis.finalPrompt = input.finalPrompt;\n\t\tthis.inputVariables = this.computeInputValues();\n\t}\n\t/**\n\t* Computes the input values required by the pipeline prompts.\n\t* @returns Array of input values required by the pipeline prompts.\n\t*/\n\tcomputeInputValues() {\n\t\tconst intermediateValues = this.pipelinePrompts.map((pipelinePrompt) => pipelinePrompt.name);\n\t\tconst inputValues = this.pipelinePrompts.map((pipelinePrompt) => pipelinePrompt.prompt.inputVariables.filter((inputValue) => !intermediateValues.includes(inputValue))).flat();\n\t\treturn [...new Set(inputValues)];\n\t}\n\tstatic extractRequiredInputValues(allValues, requiredValueNames) {\n\t\treturn requiredValueNames.reduce((requiredValues, valueName) => {\n\t\t\trequiredValues[valueName] = allValues[valueName];\n\t\t\treturn requiredValues;\n\t\t}, {});\n\t}\n\t/**\n\t* Formats the pipeline prompts based on the provided input values.\n\t* @param values Input values to format the pipeline prompts.\n\t* @returns Promise that resolves with the formatted input values.\n\t*/\n\tasync formatPipelinePrompts(values) {\n\t\tconst allValues = await this.mergePartialAndUserVariables(values);\n\t\tfor (const { name: pipelinePromptName, prompt: pipelinePrompt } of this.pipelinePrompts) {\n\t\t\tconst pipelinePromptInputValues = PipelinePromptTemplate.extractRequiredInputValues(allValues, pipelinePrompt.inputVariables);\n\t\t\tif (pipelinePrompt instanceof _chat_js__WEBPACK_IMPORTED_MODULE_1__.ChatPromptTemplate) allValues[pipelinePromptName] = await pipelinePrompt.formatMessages(pipelinePromptInputValues);\n\t\t\telse allValues[pipelinePromptName] = await pipelinePrompt.format(pipelinePromptInputValues);\n\t\t}\n\t\treturn PipelinePromptTemplate.extractRequiredInputValues(allValues, this.finalPrompt.inputVariables);\n\t}\n\t/**\n\t* Formats the final prompt value based on the provided input values.\n\t* @param values Input values to format the final prompt value.\n\t* @returns Promise that resolves with the formatted final prompt value.\n\t*/\n\tasync formatPromptValue(values) {\n\t\treturn this.finalPrompt.formatPromptValue(await this.formatPipelinePrompts(values));\n\t}\n\tasync format(values) {\n\t\treturn this.finalPrompt.format(await this.formatPipelinePrompts(values));\n\t}\n\t/**\n\t* Handles partial prompts, which are prompts that have been partially\n\t* filled with input values.\n\t* @param values Partial input values.\n\t* @returns Promise that resolves with a new PipelinePromptTemplate instance with updated input variables.\n\t*/\n\tasync partial(values) {\n\t\tconst promptDict = { ...this };\n\t\tpromptDict.inputVariables = this.inputVariables.filter((iv) => !(iv in values));\n\t\tpromptDict.partialVariables = {\n\t\t\t...this.partialVariables ?? {},\n\t\t\t...values\n\t\t};\n\t\treturn new PipelinePromptTemplate(promptDict);\n\t}\n\tserialize() {\n\t\tthrow new Error(\"Not implemented.\");\n\t}\n\t_getPromptType() {\n\t\treturn \"pipeline\";\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=pipeline.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9waXBlbGluZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBK0M7QUFDQTs7QUFFL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FLE9BQU87QUFDM0UsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLE1BQU0sVUFBVTtBQUNoQjtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsR0FBRztBQUNILEdBQUcsTUFBTTtBQUNUO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0Esa0VBQWtFLHdEQUFrQjtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsSUFBSTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1EQUFtRDtBQUNsRTtBQUNBLGlDQUFpQyx3REFBa0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ2tDO0FBQ2xDIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9waXBlbGluZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlUHJvbXB0VGVtcGxhdGUgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBDaGF0UHJvbXB0VGVtcGxhdGUgfSBmcm9tIFwiLi9jaGF0LmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcHJvbXB0cy9waXBlbGluZS50c1xuLyoqXG4qIENsYXNzIHRoYXQgaGFuZGxlcyBhIHNlcXVlbmNlIG9mIHByb21wdHMsIGVhY2ggb2Ygd2hpY2ggbWF5IHJlcXVpcmVcbiogZGlmZmVyZW50IGlucHV0IHZhcmlhYmxlcy4gSW5jbHVkZXMgbWV0aG9kcyBmb3IgZm9ybWF0dGluZyB0aGVzZVxuKiBwcm9tcHRzLCBleHRyYWN0aW5nIHJlcXVpcmVkIGlucHV0IHZhbHVlcywgYW5kIGhhbmRsaW5nIHBhcnRpYWxcbiogcHJvbXB0cy5cbiogQGV4YW1wbGVcbiogYGBgdHlwZXNjcmlwdFxuKiBjb25zdCBjb21wb3NlZFByb21wdCA9IG5ldyBQaXBlbGluZVByb21wdFRlbXBsYXRlKHtcbiogICBwaXBlbGluZVByb21wdHM6IFtcbiogICAgIHtcbiogICAgICAgbmFtZTogXCJpbnRyb2R1Y3Rpb25cIixcbiogICAgICAgcHJvbXB0OiBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoYFlvdSBhcmUgaW1wZXJzb25hdGluZyB7cGVyc29ufS5gKSxcbiogICAgIH0sXG4qICAgICB7XG4qICAgICAgIG5hbWU6IFwiZXhhbXBsZVwiLFxuKiAgICAgICBwcm9tcHQ6IFByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZShcbiogICAgICAgICBgSGVyZSdzIGFuIGV4YW1wbGUgb2YgYW4gaW50ZXJhY3Rpb246XG4qIFE6IHtleGFtcGxlX3F9XG4qIEE6IHtleGFtcGxlX2F9YCxcbiogICAgICAgKSxcbiogICAgIH0sXG4qICAgICB7XG4qICAgICAgIG5hbWU6IFwic3RhcnRcIixcbiogICAgICAgcHJvbXB0OiBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXG4qICAgICAgICAgYE5vdywgZG8gdGhpcyBmb3IgcmVhbCFcbiogUToge2lucHV0fVxuKiBBOmAsXG4qICAgICAgICksXG4qICAgICB9LFxuKiAgIF0sXG4qICAgZmluYWxQcm9tcHQ6IFByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZShcbiogICAgIGB7aW50cm9kdWN0aW9ufVxuKiB7ZXhhbXBsZX1cbioge3N0YXJ0fWAsXG4qICAgKSxcbiogfSk7XG4qXG4qIGNvbnN0IGZvcm1hdHRlZFByb21wdCA9IGF3YWl0IGNvbXBvc2VkUHJvbXB0LmZvcm1hdCh7XG4qICAgcGVyc29uOiBcIkVsb24gTXVza1wiLFxuKiAgIGV4YW1wbGVfcTogYFdoYXQncyB5b3VyIGZhdm9yaXRlIGNhcj9gLFxuKiAgIGV4YW1wbGVfYTogXCJUZXNsYVwiLFxuKiAgIGlucHV0OiBgV2hhdCdzIHlvdXIgZmF2b3JpdGUgc29jaWFsIG1lZGlhIHNpdGU/YCxcbiogfSk7XG4qIGBgYFxuKi9cbnZhciBQaXBlbGluZVByb21wdFRlbXBsYXRlID0gY2xhc3MgUGlwZWxpbmVQcm9tcHRUZW1wbGF0ZSBleHRlbmRzIEJhc2VQcm9tcHRUZW1wbGF0ZSB7XG5cdHN0YXRpYyBsY19uYW1lKCkge1xuXHRcdHJldHVybiBcIlBpcGVsaW5lUHJvbXB0VGVtcGxhdGVcIjtcblx0fVxuXHRwaXBlbGluZVByb21wdHM7XG5cdGZpbmFsUHJvbXB0O1xuXHRjb25zdHJ1Y3RvcihpbnB1dCkge1xuXHRcdHN1cGVyKHtcblx0XHRcdC4uLmlucHV0LFxuXHRcdFx0aW5wdXRWYXJpYWJsZXM6IFtdXG5cdFx0fSk7XG5cdFx0dGhpcy5waXBlbGluZVByb21wdHMgPSBpbnB1dC5waXBlbGluZVByb21wdHM7XG5cdFx0dGhpcy5maW5hbFByb21wdCA9IGlucHV0LmZpbmFsUHJvbXB0O1xuXHRcdHRoaXMuaW5wdXRWYXJpYWJsZXMgPSB0aGlzLmNvbXB1dGVJbnB1dFZhbHVlcygpO1xuXHR9XG5cdC8qKlxuXHQqIENvbXB1dGVzIHRoZSBpbnB1dCB2YWx1ZXMgcmVxdWlyZWQgYnkgdGhlIHBpcGVsaW5lIHByb21wdHMuXG5cdCogQHJldHVybnMgQXJyYXkgb2YgaW5wdXQgdmFsdWVzIHJlcXVpcmVkIGJ5IHRoZSBwaXBlbGluZSBwcm9tcHRzLlxuXHQqL1xuXHRjb21wdXRlSW5wdXRWYWx1ZXMoKSB7XG5cdFx0Y29uc3QgaW50ZXJtZWRpYXRlVmFsdWVzID0gdGhpcy5waXBlbGluZVByb21wdHMubWFwKChwaXBlbGluZVByb21wdCkgPT4gcGlwZWxpbmVQcm9tcHQubmFtZSk7XG5cdFx0Y29uc3QgaW5wdXRWYWx1ZXMgPSB0aGlzLnBpcGVsaW5lUHJvbXB0cy5tYXAoKHBpcGVsaW5lUHJvbXB0KSA9PiBwaXBlbGluZVByb21wdC5wcm9tcHQuaW5wdXRWYXJpYWJsZXMuZmlsdGVyKChpbnB1dFZhbHVlKSA9PiAhaW50ZXJtZWRpYXRlVmFsdWVzLmluY2x1ZGVzKGlucHV0VmFsdWUpKSkuZmxhdCgpO1xuXHRcdHJldHVybiBbLi4ubmV3IFNldChpbnB1dFZhbHVlcyldO1xuXHR9XG5cdHN0YXRpYyBleHRyYWN0UmVxdWlyZWRJbnB1dFZhbHVlcyhhbGxWYWx1ZXMsIHJlcXVpcmVkVmFsdWVOYW1lcykge1xuXHRcdHJldHVybiByZXF1aXJlZFZhbHVlTmFtZXMucmVkdWNlKChyZXF1aXJlZFZhbHVlcywgdmFsdWVOYW1lKSA9PiB7XG5cdFx0XHRyZXF1aXJlZFZhbHVlc1t2YWx1ZU5hbWVdID0gYWxsVmFsdWVzW3ZhbHVlTmFtZV07XG5cdFx0XHRyZXR1cm4gcmVxdWlyZWRWYWx1ZXM7XG5cdFx0fSwge30pO1xuXHR9XG5cdC8qKlxuXHQqIEZvcm1hdHMgdGhlIHBpcGVsaW5lIHByb21wdHMgYmFzZWQgb24gdGhlIHByb3ZpZGVkIGlucHV0IHZhbHVlcy5cblx0KiBAcGFyYW0gdmFsdWVzIElucHV0IHZhbHVlcyB0byBmb3JtYXQgdGhlIHBpcGVsaW5lIHByb21wdHMuXG5cdCogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGZvcm1hdHRlZCBpbnB1dCB2YWx1ZXMuXG5cdCovXG5cdGFzeW5jIGZvcm1hdFBpcGVsaW5lUHJvbXB0cyh2YWx1ZXMpIHtcblx0XHRjb25zdCBhbGxWYWx1ZXMgPSBhd2FpdCB0aGlzLm1lcmdlUGFydGlhbEFuZFVzZXJWYXJpYWJsZXModmFsdWVzKTtcblx0XHRmb3IgKGNvbnN0IHsgbmFtZTogcGlwZWxpbmVQcm9tcHROYW1lLCBwcm9tcHQ6IHBpcGVsaW5lUHJvbXB0IH0gb2YgdGhpcy5waXBlbGluZVByb21wdHMpIHtcblx0XHRcdGNvbnN0IHBpcGVsaW5lUHJvbXB0SW5wdXRWYWx1ZXMgPSBQaXBlbGluZVByb21wdFRlbXBsYXRlLmV4dHJhY3RSZXF1aXJlZElucHV0VmFsdWVzKGFsbFZhbHVlcywgcGlwZWxpbmVQcm9tcHQuaW5wdXRWYXJpYWJsZXMpO1xuXHRcdFx0aWYgKHBpcGVsaW5lUHJvbXB0IGluc3RhbmNlb2YgQ2hhdFByb21wdFRlbXBsYXRlKSBhbGxWYWx1ZXNbcGlwZWxpbmVQcm9tcHROYW1lXSA9IGF3YWl0IHBpcGVsaW5lUHJvbXB0LmZvcm1hdE1lc3NhZ2VzKHBpcGVsaW5lUHJvbXB0SW5wdXRWYWx1ZXMpO1xuXHRcdFx0ZWxzZSBhbGxWYWx1ZXNbcGlwZWxpbmVQcm9tcHROYW1lXSA9IGF3YWl0IHBpcGVsaW5lUHJvbXB0LmZvcm1hdChwaXBlbGluZVByb21wdElucHV0VmFsdWVzKTtcblx0XHR9XG5cdFx0cmV0dXJuIFBpcGVsaW5lUHJvbXB0VGVtcGxhdGUuZXh0cmFjdFJlcXVpcmVkSW5wdXRWYWx1ZXMoYWxsVmFsdWVzLCB0aGlzLmZpbmFsUHJvbXB0LmlucHV0VmFyaWFibGVzKTtcblx0fVxuXHQvKipcblx0KiBGb3JtYXRzIHRoZSBmaW5hbCBwcm9tcHQgdmFsdWUgYmFzZWQgb24gdGhlIHByb3ZpZGVkIGlucHV0IHZhbHVlcy5cblx0KiBAcGFyYW0gdmFsdWVzIElucHV0IHZhbHVlcyB0byBmb3JtYXQgdGhlIGZpbmFsIHByb21wdCB2YWx1ZS5cblx0KiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgZm9ybWF0dGVkIGZpbmFsIHByb21wdCB2YWx1ZS5cblx0Ki9cblx0YXN5bmMgZm9ybWF0UHJvbXB0VmFsdWUodmFsdWVzKSB7XG5cdFx0cmV0dXJuIHRoaXMuZmluYWxQcm9tcHQuZm9ybWF0UHJvbXB0VmFsdWUoYXdhaXQgdGhpcy5mb3JtYXRQaXBlbGluZVByb21wdHModmFsdWVzKSk7XG5cdH1cblx0YXN5bmMgZm9ybWF0KHZhbHVlcykge1xuXHRcdHJldHVybiB0aGlzLmZpbmFsUHJvbXB0LmZvcm1hdChhd2FpdCB0aGlzLmZvcm1hdFBpcGVsaW5lUHJvbXB0cyh2YWx1ZXMpKTtcblx0fVxuXHQvKipcblx0KiBIYW5kbGVzIHBhcnRpYWwgcHJvbXB0cywgd2hpY2ggYXJlIHByb21wdHMgdGhhdCBoYXZlIGJlZW4gcGFydGlhbGx5XG5cdCogZmlsbGVkIHdpdGggaW5wdXQgdmFsdWVzLlxuXHQqIEBwYXJhbSB2YWx1ZXMgUGFydGlhbCBpbnB1dCB2YWx1ZXMuXG5cdCogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYSBuZXcgUGlwZWxpbmVQcm9tcHRUZW1wbGF0ZSBpbnN0YW5jZSB3aXRoIHVwZGF0ZWQgaW5wdXQgdmFyaWFibGVzLlxuXHQqL1xuXHRhc3luYyBwYXJ0aWFsKHZhbHVlcykge1xuXHRcdGNvbnN0IHByb21wdERpY3QgPSB7IC4uLnRoaXMgfTtcblx0XHRwcm9tcHREaWN0LmlucHV0VmFyaWFibGVzID0gdGhpcy5pbnB1dFZhcmlhYmxlcy5maWx0ZXIoKGl2KSA9PiAhKGl2IGluIHZhbHVlcykpO1xuXHRcdHByb21wdERpY3QucGFydGlhbFZhcmlhYmxlcyA9IHtcblx0XHRcdC4uLnRoaXMucGFydGlhbFZhcmlhYmxlcyA/PyB7fSxcblx0XHRcdC4uLnZhbHVlc1xuXHRcdH07XG5cdFx0cmV0dXJuIG5ldyBQaXBlbGluZVByb21wdFRlbXBsYXRlKHByb21wdERpY3QpO1xuXHR9XG5cdHNlcmlhbGl6ZSgpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWQuXCIpO1xuXHR9XG5cdF9nZXRQcm9tcHRUeXBlKCkge1xuXHRcdHJldHVybiBcInBpcGVsaW5lXCI7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgUGlwZWxpbmVQcm9tcHRUZW1wbGF0ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGlwZWxpbmUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/prompts/pipeline.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/prompts/prompt.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/prompt.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PromptTemplate: () => (/* binding */ PromptTemplate)\n/* harmony export */ });\n/* harmony import */ var _string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./string.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/string.js\");\n/* harmony import */ var _template_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./template.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/template.js\");\n\n\n\n//#region src/prompts/prompt.ts\n/**\n* Schema to represent a basic prompt for an LLM.\n* @augments BasePromptTemplate\n* @augments PromptTemplateInput\n*\n* @example\n* ```ts\n* import { PromptTemplate } from \"langchain/prompts\";\n*\n* const prompt = new PromptTemplate({\n*   inputVariables: [\"foo\"],\n*   template: \"Say {foo}\",\n* });\n* ```\n*/\nvar PromptTemplate = class PromptTemplate extends _string_js__WEBPACK_IMPORTED_MODULE_0__.BaseStringPromptTemplate {\n\tstatic lc_name() {\n\t\treturn \"PromptTemplate\";\n\t}\n\ttemplate;\n\ttemplateFormat = \"f-string\";\n\tvalidateTemplate = true;\n\t/**\n\t* Additional fields which should be included inside\n\t* the message content array if using a complex message\n\t* content.\n\t*/\n\tadditionalContentFields;\n\tconstructor(input) {\n\t\tsuper(input);\n\t\tif (input.templateFormat === \"mustache\" && input.validateTemplate === void 0) this.validateTemplate = false;\n\t\tObject.assign(this, input);\n\t\tif (this.validateTemplate) {\n\t\t\tif (this.templateFormat === \"mustache\") throw new Error(\"Mustache templates cannot be validated.\");\n\t\t\tlet totalInputVariables = this.inputVariables;\n\t\t\tif (this.partialVariables) totalInputVariables = totalInputVariables.concat(Object.keys(this.partialVariables));\n\t\t\t(0,_template_js__WEBPACK_IMPORTED_MODULE_1__.checkValidTemplate)(this.template, this.templateFormat, totalInputVariables);\n\t\t}\n\t}\n\t_getPromptType() {\n\t\treturn \"prompt\";\n\t}\n\t/**\n\t* Formats the prompt template with the provided values.\n\t* @param values The values to be used to format the prompt template.\n\t* @returns A promise that resolves to a string which is the formatted prompt.\n\t*/\n\tasync format(values) {\n\t\tconst allValues = await this.mergePartialAndUserVariables(values);\n\t\treturn (0,_template_js__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)(this.template, this.templateFormat, allValues);\n\t}\n\t/**\n\t* Take examples in list format with prefix and suffix to create a prompt.\n\t*\n\t* Intended to be used a a way to dynamically create a prompt from examples.\n\t*\n\t* @param examples - List of examples to use in the prompt.\n\t* @param suffix - String to go after the list of examples. Should generally set up the user's input.\n\t* @param inputVariables - A list of variable names the final prompt template will expect\n\t* @param exampleSeparator - The separator to use in between examples\n\t* @param prefix - String that should go before any examples. Generally includes examples.\n\t*\n\t* @returns The final prompt template generated.\n\t*/\n\tstatic fromExamples(examples, suffix, inputVariables, exampleSeparator = \"\\n\\n\", prefix = \"\") {\n\t\tconst template = [\n\t\t\tprefix,\n\t\t\t...examples,\n\t\t\tsuffix\n\t\t].join(exampleSeparator);\n\t\treturn new PromptTemplate({\n\t\t\tinputVariables,\n\t\t\ttemplate\n\t\t});\n\t}\n\tstatic fromTemplate(template, options) {\n\t\tconst { templateFormat = \"f-string\",...rest } = options ?? {};\n\t\tconst names = /* @__PURE__ */ new Set();\n\t\t(0,_template_js__WEBPACK_IMPORTED_MODULE_1__.parseTemplate)(template, templateFormat).forEach((node) => {\n\t\t\tif (node.type === \"variable\") names.add(node.name);\n\t\t});\n\t\treturn new PromptTemplate({\n\t\t\tinputVariables: [...names],\n\t\t\ttemplateFormat,\n\t\t\ttemplate,\n\t\t\t...rest\n\t\t});\n\t}\n\t/**\n\t* Partially applies values to the prompt template.\n\t* @param values The values to be partially applied to the prompt template.\n\t* @returns A new instance of PromptTemplate with the partially applied values.\n\t*/\n\tasync partial(values) {\n\t\tconst newInputVariables = this.inputVariables.filter((iv) => !(iv in values));\n\t\tconst newPartialVariables = {\n\t\t\t...this.partialVariables ?? {},\n\t\t\t...values\n\t\t};\n\t\tconst promptDict = {\n\t\t\t...this,\n\t\t\tinputVariables: newInputVariables,\n\t\t\tpartialVariables: newPartialVariables\n\t\t};\n\t\treturn new PromptTemplate(promptDict);\n\t}\n\tserialize() {\n\t\tif (this.outputParser !== void 0) throw new Error(\"Cannot serialize a prompt template with an output parser\");\n\t\treturn {\n\t\t\t_type: this._getPromptType(),\n\t\t\tinput_variables: this.inputVariables,\n\t\t\ttemplate: this.template,\n\t\t\ttemplate_format: this.templateFormat\n\t\t};\n\t}\n\tstatic async deserialize(data) {\n\t\tif (!data.template) throw new Error(\"Prompt template must have a template\");\n\t\tconst res = new PromptTemplate({\n\t\t\tinputVariables: data.input_variables,\n\t\t\ttemplate: data.template,\n\t\t\ttemplateFormat: data.template_format\n\t\t});\n\t\treturn res;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=prompt.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9wcm9tcHQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXVEO0FBQzJCOztBQUVsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxpQkFBaUI7QUFDNUI7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLElBQUk7QUFDeEIsR0FBRztBQUNIO0FBQ0E7QUFDQSxrREFBa0QsZ0VBQXdCO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLGdFQUFrQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDREQUFjO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLFVBQVUsc0NBQXNDO0FBQ2hEO0FBQ0EsRUFBRSwyREFBYTtBQUNmO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDMEI7QUFDMUIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9wcm9tcHRzL3Byb21wdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlU3RyaW5nUHJvbXB0VGVtcGxhdGUgfSBmcm9tIFwiLi9zdHJpbmcuanNcIjtcbmltcG9ydCB7IGNoZWNrVmFsaWRUZW1wbGF0ZSwgcGFyc2VUZW1wbGF0ZSwgcmVuZGVyVGVtcGxhdGUgfSBmcm9tIFwiLi90ZW1wbGF0ZS5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3Byb21wdHMvcHJvbXB0LnRzXG4vKipcbiogU2NoZW1hIHRvIHJlcHJlc2VudCBhIGJhc2ljIHByb21wdCBmb3IgYW4gTExNLlxuKiBAYXVnbWVudHMgQmFzZVByb21wdFRlbXBsYXRlXG4qIEBhdWdtZW50cyBQcm9tcHRUZW1wbGF0ZUlucHV0XG4qXG4qIEBleGFtcGxlXG4qIGBgYHRzXG4qIGltcG9ydCB7IFByb21wdFRlbXBsYXRlIH0gZnJvbSBcImxhbmdjaGFpbi9wcm9tcHRzXCI7XG4qXG4qIGNvbnN0IHByb21wdCA9IG5ldyBQcm9tcHRUZW1wbGF0ZSh7XG4qICAgaW5wdXRWYXJpYWJsZXM6IFtcImZvb1wiXSxcbiogICB0ZW1wbGF0ZTogXCJTYXkge2Zvb31cIixcbiogfSk7XG4qIGBgYFxuKi9cbnZhciBQcm9tcHRUZW1wbGF0ZSA9IGNsYXNzIFByb21wdFRlbXBsYXRlIGV4dGVuZHMgQmFzZVN0cmluZ1Byb21wdFRlbXBsYXRlIHtcblx0c3RhdGljIGxjX25hbWUoKSB7XG5cdFx0cmV0dXJuIFwiUHJvbXB0VGVtcGxhdGVcIjtcblx0fVxuXHR0ZW1wbGF0ZTtcblx0dGVtcGxhdGVGb3JtYXQgPSBcImYtc3RyaW5nXCI7XG5cdHZhbGlkYXRlVGVtcGxhdGUgPSB0cnVlO1xuXHQvKipcblx0KiBBZGRpdGlvbmFsIGZpZWxkcyB3aGljaCBzaG91bGQgYmUgaW5jbHVkZWQgaW5zaWRlXG5cdCogdGhlIG1lc3NhZ2UgY29udGVudCBhcnJheSBpZiB1c2luZyBhIGNvbXBsZXggbWVzc2FnZVxuXHQqIGNvbnRlbnQuXG5cdCovXG5cdGFkZGl0aW9uYWxDb250ZW50RmllbGRzO1xuXHRjb25zdHJ1Y3RvcihpbnB1dCkge1xuXHRcdHN1cGVyKGlucHV0KTtcblx0XHRpZiAoaW5wdXQudGVtcGxhdGVGb3JtYXQgPT09IFwibXVzdGFjaGVcIiAmJiBpbnB1dC52YWxpZGF0ZVRlbXBsYXRlID09PSB2b2lkIDApIHRoaXMudmFsaWRhdGVUZW1wbGF0ZSA9IGZhbHNlO1xuXHRcdE9iamVjdC5hc3NpZ24odGhpcywgaW5wdXQpO1xuXHRcdGlmICh0aGlzLnZhbGlkYXRlVGVtcGxhdGUpIHtcblx0XHRcdGlmICh0aGlzLnRlbXBsYXRlRm9ybWF0ID09PSBcIm11c3RhY2hlXCIpIHRocm93IG5ldyBFcnJvcihcIk11c3RhY2hlIHRlbXBsYXRlcyBjYW5ub3QgYmUgdmFsaWRhdGVkLlwiKTtcblx0XHRcdGxldCB0b3RhbElucHV0VmFyaWFibGVzID0gdGhpcy5pbnB1dFZhcmlhYmxlcztcblx0XHRcdGlmICh0aGlzLnBhcnRpYWxWYXJpYWJsZXMpIHRvdGFsSW5wdXRWYXJpYWJsZXMgPSB0b3RhbElucHV0VmFyaWFibGVzLmNvbmNhdChPYmplY3Qua2V5cyh0aGlzLnBhcnRpYWxWYXJpYWJsZXMpKTtcblx0XHRcdGNoZWNrVmFsaWRUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzLnRlbXBsYXRlRm9ybWF0LCB0b3RhbElucHV0VmFyaWFibGVzKTtcblx0XHR9XG5cdH1cblx0X2dldFByb21wdFR5cGUoKSB7XG5cdFx0cmV0dXJuIFwicHJvbXB0XCI7XG5cdH1cblx0LyoqXG5cdCogRm9ybWF0cyB0aGUgcHJvbXB0IHRlbXBsYXRlIHdpdGggdGhlIHByb3ZpZGVkIHZhbHVlcy5cblx0KiBAcGFyYW0gdmFsdWVzIFRoZSB2YWx1ZXMgdG8gYmUgdXNlZCB0byBmb3JtYXQgdGhlIHByb21wdCB0ZW1wbGF0ZS5cblx0KiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIHN0cmluZyB3aGljaCBpcyB0aGUgZm9ybWF0dGVkIHByb21wdC5cblx0Ki9cblx0YXN5bmMgZm9ybWF0KHZhbHVlcykge1xuXHRcdGNvbnN0IGFsbFZhbHVlcyA9IGF3YWl0IHRoaXMubWVyZ2VQYXJ0aWFsQW5kVXNlclZhcmlhYmxlcyh2YWx1ZXMpO1xuXHRcdHJldHVybiByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzLnRlbXBsYXRlRm9ybWF0LCBhbGxWYWx1ZXMpO1xuXHR9XG5cdC8qKlxuXHQqIFRha2UgZXhhbXBsZXMgaW4gbGlzdCBmb3JtYXQgd2l0aCBwcmVmaXggYW5kIHN1ZmZpeCB0byBjcmVhdGUgYSBwcm9tcHQuXG5cdCpcblx0KiBJbnRlbmRlZCB0byBiZSB1c2VkIGEgYSB3YXkgdG8gZHluYW1pY2FsbHkgY3JlYXRlIGEgcHJvbXB0IGZyb20gZXhhbXBsZXMuXG5cdCpcblx0KiBAcGFyYW0gZXhhbXBsZXMgLSBMaXN0IG9mIGV4YW1wbGVzIHRvIHVzZSBpbiB0aGUgcHJvbXB0LlxuXHQqIEBwYXJhbSBzdWZmaXggLSBTdHJpbmcgdG8gZ28gYWZ0ZXIgdGhlIGxpc3Qgb2YgZXhhbXBsZXMuIFNob3VsZCBnZW5lcmFsbHkgc2V0IHVwIHRoZSB1c2VyJ3MgaW5wdXQuXG5cdCogQHBhcmFtIGlucHV0VmFyaWFibGVzIC0gQSBsaXN0IG9mIHZhcmlhYmxlIG5hbWVzIHRoZSBmaW5hbCBwcm9tcHQgdGVtcGxhdGUgd2lsbCBleHBlY3Rcblx0KiBAcGFyYW0gZXhhbXBsZVNlcGFyYXRvciAtIFRoZSBzZXBhcmF0b3IgdG8gdXNlIGluIGJldHdlZW4gZXhhbXBsZXNcblx0KiBAcGFyYW0gcHJlZml4IC0gU3RyaW5nIHRoYXQgc2hvdWxkIGdvIGJlZm9yZSBhbnkgZXhhbXBsZXMuIEdlbmVyYWxseSBpbmNsdWRlcyBleGFtcGxlcy5cblx0KlxuXHQqIEByZXR1cm5zIFRoZSBmaW5hbCBwcm9tcHQgdGVtcGxhdGUgZ2VuZXJhdGVkLlxuXHQqL1xuXHRzdGF0aWMgZnJvbUV4YW1wbGVzKGV4YW1wbGVzLCBzdWZmaXgsIGlucHV0VmFyaWFibGVzLCBleGFtcGxlU2VwYXJhdG9yID0gXCJcXG5cXG5cIiwgcHJlZml4ID0gXCJcIikge1xuXHRcdGNvbnN0IHRlbXBsYXRlID0gW1xuXHRcdFx0cHJlZml4LFxuXHRcdFx0Li4uZXhhbXBsZXMsXG5cdFx0XHRzdWZmaXhcblx0XHRdLmpvaW4oZXhhbXBsZVNlcGFyYXRvcik7XG5cdFx0cmV0dXJuIG5ldyBQcm9tcHRUZW1wbGF0ZSh7XG5cdFx0XHRpbnB1dFZhcmlhYmxlcyxcblx0XHRcdHRlbXBsYXRlXG5cdFx0fSk7XG5cdH1cblx0c3RhdGljIGZyb21UZW1wbGF0ZSh0ZW1wbGF0ZSwgb3B0aW9ucykge1xuXHRcdGNvbnN0IHsgdGVtcGxhdGVGb3JtYXQgPSBcImYtc3RyaW5nXCIsLi4ucmVzdCB9ID0gb3B0aW9ucyA/PyB7fTtcblx0XHRjb25zdCBuYW1lcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG5cdFx0cGFyc2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGVtcGxhdGVGb3JtYXQpLmZvckVhY2goKG5vZGUpID0+IHtcblx0XHRcdGlmIChub2RlLnR5cGUgPT09IFwidmFyaWFibGVcIikgbmFtZXMuYWRkKG5vZGUubmFtZSk7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIG5ldyBQcm9tcHRUZW1wbGF0ZSh7XG5cdFx0XHRpbnB1dFZhcmlhYmxlczogWy4uLm5hbWVzXSxcblx0XHRcdHRlbXBsYXRlRm9ybWF0LFxuXHRcdFx0dGVtcGxhdGUsXG5cdFx0XHQuLi5yZXN0XG5cdFx0fSk7XG5cdH1cblx0LyoqXG5cdCogUGFydGlhbGx5IGFwcGxpZXMgdmFsdWVzIHRvIHRoZSBwcm9tcHQgdGVtcGxhdGUuXG5cdCogQHBhcmFtIHZhbHVlcyBUaGUgdmFsdWVzIHRvIGJlIHBhcnRpYWxseSBhcHBsaWVkIHRvIHRoZSBwcm9tcHQgdGVtcGxhdGUuXG5cdCogQHJldHVybnMgQSBuZXcgaW5zdGFuY2Ugb2YgUHJvbXB0VGVtcGxhdGUgd2l0aCB0aGUgcGFydGlhbGx5IGFwcGxpZWQgdmFsdWVzLlxuXHQqL1xuXHRhc3luYyBwYXJ0aWFsKHZhbHVlcykge1xuXHRcdGNvbnN0IG5ld0lucHV0VmFyaWFibGVzID0gdGhpcy5pbnB1dFZhcmlhYmxlcy5maWx0ZXIoKGl2KSA9PiAhKGl2IGluIHZhbHVlcykpO1xuXHRcdGNvbnN0IG5ld1BhcnRpYWxWYXJpYWJsZXMgPSB7XG5cdFx0XHQuLi50aGlzLnBhcnRpYWxWYXJpYWJsZXMgPz8ge30sXG5cdFx0XHQuLi52YWx1ZXNcblx0XHR9O1xuXHRcdGNvbnN0IHByb21wdERpY3QgPSB7XG5cdFx0XHQuLi50aGlzLFxuXHRcdFx0aW5wdXRWYXJpYWJsZXM6IG5ld0lucHV0VmFyaWFibGVzLFxuXHRcdFx0cGFydGlhbFZhcmlhYmxlczogbmV3UGFydGlhbFZhcmlhYmxlc1xuXHRcdH07XG5cdFx0cmV0dXJuIG5ldyBQcm9tcHRUZW1wbGF0ZShwcm9tcHREaWN0KTtcblx0fVxuXHRzZXJpYWxpemUoKSB7XG5cdFx0aWYgKHRoaXMub3V0cHV0UGFyc2VyICE9PSB2b2lkIDApIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBzZXJpYWxpemUgYSBwcm9tcHQgdGVtcGxhdGUgd2l0aCBhbiBvdXRwdXQgcGFyc2VyXCIpO1xuXHRcdHJldHVybiB7XG5cdFx0XHRfdHlwZTogdGhpcy5fZ2V0UHJvbXB0VHlwZSgpLFxuXHRcdFx0aW5wdXRfdmFyaWFibGVzOiB0aGlzLmlucHV0VmFyaWFibGVzLFxuXHRcdFx0dGVtcGxhdGU6IHRoaXMudGVtcGxhdGUsXG5cdFx0XHR0ZW1wbGF0ZV9mb3JtYXQ6IHRoaXMudGVtcGxhdGVGb3JtYXRcblx0XHR9O1xuXHR9XG5cdHN0YXRpYyBhc3luYyBkZXNlcmlhbGl6ZShkYXRhKSB7XG5cdFx0aWYgKCFkYXRhLnRlbXBsYXRlKSB0aHJvdyBuZXcgRXJyb3IoXCJQcm9tcHQgdGVtcGxhdGUgbXVzdCBoYXZlIGEgdGVtcGxhdGVcIik7XG5cdFx0Y29uc3QgcmVzID0gbmV3IFByb21wdFRlbXBsYXRlKHtcblx0XHRcdGlucHV0VmFyaWFibGVzOiBkYXRhLmlucHV0X3ZhcmlhYmxlcyxcblx0XHRcdHRlbXBsYXRlOiBkYXRhLnRlbXBsYXRlLFxuXHRcdFx0dGVtcGxhdGVGb3JtYXQ6IGRhdGEudGVtcGxhdGVfZm9ybWF0XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHJlcztcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBQcm9tcHRUZW1wbGF0ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvbXB0LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/prompts/prompt.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/prompts/string.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/string.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseStringPromptTemplate: () => (/* binding */ BaseStringPromptTemplate)\n/* harmony export */ });\n/* harmony import */ var _prompt_values_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../prompt_values.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompt_values.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/base.js\");\n\n\n\n//#region src/prompts/string.ts\n/**\n* Base class for string prompt templates. It extends the\n* BasePromptTemplate class and overrides the formatPromptValue method to\n* return a StringPromptValue.\n*/\nvar BaseStringPromptTemplate = class extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BasePromptTemplate {\n\t/**\n\t* Formats the prompt given the input values and returns a formatted\n\t* prompt value.\n\t* @param values The input values to format the prompt.\n\t* @returns A Promise that resolves to a formatted prompt value.\n\t*/\n\tasync formatPromptValue(values) {\n\t\tconst formattedPrompt = await this.format(values);\n\t\treturn new _prompt_values_js__WEBPACK_IMPORTED_MODULE_0__.StringPromptValue(formattedPrompt);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=string.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9zdHJpbmcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXdEO0FBQ1Q7O0FBRS9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qyx3REFBa0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsZ0VBQWlCO0FBQzlCO0FBQ0E7O0FBRUE7QUFDb0M7QUFDcEMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9wcm9tcHRzL3N0cmluZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdHJpbmdQcm9tcHRWYWx1ZSB9IGZyb20gXCIuLi9wcm9tcHRfdmFsdWVzLmpzXCI7XG5pbXBvcnQgeyBCYXNlUHJvbXB0VGVtcGxhdGUgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcHJvbXB0cy9zdHJpbmcudHNcbi8qKlxuKiBCYXNlIGNsYXNzIGZvciBzdHJpbmcgcHJvbXB0IHRlbXBsYXRlcy4gSXQgZXh0ZW5kcyB0aGVcbiogQmFzZVByb21wdFRlbXBsYXRlIGNsYXNzIGFuZCBvdmVycmlkZXMgdGhlIGZvcm1hdFByb21wdFZhbHVlIG1ldGhvZCB0b1xuKiByZXR1cm4gYSBTdHJpbmdQcm9tcHRWYWx1ZS5cbiovXG52YXIgQmFzZVN0cmluZ1Byb21wdFRlbXBsYXRlID0gY2xhc3MgZXh0ZW5kcyBCYXNlUHJvbXB0VGVtcGxhdGUge1xuXHQvKipcblx0KiBGb3JtYXRzIHRoZSBwcm9tcHQgZ2l2ZW4gdGhlIGlucHV0IHZhbHVlcyBhbmQgcmV0dXJucyBhIGZvcm1hdHRlZFxuXHQqIHByb21wdCB2YWx1ZS5cblx0KiBAcGFyYW0gdmFsdWVzIFRoZSBpbnB1dCB2YWx1ZXMgdG8gZm9ybWF0IHRoZSBwcm9tcHQuXG5cdCogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBmb3JtYXR0ZWQgcHJvbXB0IHZhbHVlLlxuXHQqL1xuXHRhc3luYyBmb3JtYXRQcm9tcHRWYWx1ZSh2YWx1ZXMpIHtcblx0XHRjb25zdCBmb3JtYXR0ZWRQcm9tcHQgPSBhd2FpdCB0aGlzLmZvcm1hdCh2YWx1ZXMpO1xuXHRcdHJldHVybiBuZXcgU3RyaW5nUHJvbXB0VmFsdWUoZm9ybWF0dGVkUHJvbXB0KTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBCYXNlU3RyaW5nUHJvbXB0VGVtcGxhdGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0cmluZy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/prompts/string.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/prompts/structured.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/structured.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StructuredPrompt: () => (/* binding */ StructuredPrompt)\n/* harmony export */ });\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runnables/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chat.js */ \"(ssr)/./node_modules/@langchain/core/dist/prompts/chat.js\");\n\n\n\n//#region src/prompts/structured.ts\nfunction isWithStructuredOutput(x) {\n\treturn typeof x === \"object\" && x != null && \"withStructuredOutput\" in x && typeof x.withStructuredOutput === \"function\";\n}\nfunction isRunnableBinding(x) {\n\treturn typeof x === \"object\" && x != null && \"lc_id\" in x && Array.isArray(x.lc_id) && x.lc_id.join(\"/\") === \"langchain_core/runnables/RunnableBinding\";\n}\nvar StructuredPrompt = class StructuredPrompt extends _chat_js__WEBPACK_IMPORTED_MODULE_1__.ChatPromptTemplate {\n\tschema;\n\tmethod;\n\tlc_namespace = [\n\t\t\"langchain_core\",\n\t\t\"prompts\",\n\t\t\"structured\"\n\t];\n\tget lc_aliases() {\n\t\treturn {\n\t\t\t...super.lc_aliases,\n\t\t\tschema: \"schema_\"\n\t\t};\n\t}\n\tconstructor(input) {\n\t\tsuper(input);\n\t\tthis.schema = input.schema;\n\t\tthis.method = input.method;\n\t}\n\tpipe(coerceable) {\n\t\tif (isWithStructuredOutput(coerceable)) return super.pipe(coerceable.withStructuredOutput(this.schema));\n\t\tif (isRunnableBinding(coerceable) && isWithStructuredOutput(coerceable.bound)) return super.pipe(new _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableBinding({\n\t\t\tbound: coerceable.bound.withStructuredOutput(this.schema, ...this.method ? [{ method: this.method }] : []),\n\t\t\tkwargs: coerceable.kwargs ?? {},\n\t\t\tconfig: coerceable.config,\n\t\t\tconfigFactories: coerceable.configFactories\n\t\t}));\n\t\tthrow new Error(`Structured prompts need to be piped to a language model that supports the \"withStructuredOutput()\" method.`);\n\t}\n\tstatic fromMessagesAndSchema(promptMessages, schema, method) {\n\t\treturn StructuredPrompt.fromMessages(promptMessages, {\n\t\t\tschema,\n\t\t\tmethod\n\t\t});\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=structured.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9zdHJ1Y3R1cmVkLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF1RDtBQUNSOztBQUUvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCx3REFBa0I7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVHQUF1RywrREFBZTtBQUN0SCxpRkFBaUYscUJBQXFCO0FBQ3RHLGtDQUFrQztBQUNsQztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQzRCO0FBQzVCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9zdHJ1Y3R1cmVkLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJ1bm5hYmxlQmluZGluZyB9IGZyb20gXCIuLi9ydW5uYWJsZXMvYmFzZS5qc1wiO1xuaW1wb3J0IHsgQ2hhdFByb21wdFRlbXBsYXRlIH0gZnJvbSBcIi4vY2hhdC5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3Byb21wdHMvc3RydWN0dXJlZC50c1xuZnVuY3Rpb24gaXNXaXRoU3RydWN0dXJlZE91dHB1dCh4KSB7XG5cdHJldHVybiB0eXBlb2YgeCA9PT0gXCJvYmplY3RcIiAmJiB4ICE9IG51bGwgJiYgXCJ3aXRoU3RydWN0dXJlZE91dHB1dFwiIGluIHggJiYgdHlwZW9mIHgud2l0aFN0cnVjdHVyZWRPdXRwdXQgPT09IFwiZnVuY3Rpb25cIjtcbn1cbmZ1bmN0aW9uIGlzUnVubmFibGVCaW5kaW5nKHgpIHtcblx0cmV0dXJuIHR5cGVvZiB4ID09PSBcIm9iamVjdFwiICYmIHggIT0gbnVsbCAmJiBcImxjX2lkXCIgaW4geCAmJiBBcnJheS5pc0FycmF5KHgubGNfaWQpICYmIHgubGNfaWQuam9pbihcIi9cIikgPT09IFwibGFuZ2NoYWluX2NvcmUvcnVubmFibGVzL1J1bm5hYmxlQmluZGluZ1wiO1xufVxudmFyIFN0cnVjdHVyZWRQcm9tcHQgPSBjbGFzcyBTdHJ1Y3R1cmVkUHJvbXB0IGV4dGVuZHMgQ2hhdFByb21wdFRlbXBsYXRlIHtcblx0c2NoZW1hO1xuXHRtZXRob2Q7XG5cdGxjX25hbWVzcGFjZSA9IFtcblx0XHRcImxhbmdjaGFpbl9jb3JlXCIsXG5cdFx0XCJwcm9tcHRzXCIsXG5cdFx0XCJzdHJ1Y3R1cmVkXCJcblx0XTtcblx0Z2V0IGxjX2FsaWFzZXMoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdC4uLnN1cGVyLmxjX2FsaWFzZXMsXG5cdFx0XHRzY2hlbWE6IFwic2NoZW1hX1wiXG5cdFx0fTtcblx0fVxuXHRjb25zdHJ1Y3RvcihpbnB1dCkge1xuXHRcdHN1cGVyKGlucHV0KTtcblx0XHR0aGlzLnNjaGVtYSA9IGlucHV0LnNjaGVtYTtcblx0XHR0aGlzLm1ldGhvZCA9IGlucHV0Lm1ldGhvZDtcblx0fVxuXHRwaXBlKGNvZXJjZWFibGUpIHtcblx0XHRpZiAoaXNXaXRoU3RydWN0dXJlZE91dHB1dChjb2VyY2VhYmxlKSkgcmV0dXJuIHN1cGVyLnBpcGUoY29lcmNlYWJsZS53aXRoU3RydWN0dXJlZE91dHB1dCh0aGlzLnNjaGVtYSkpO1xuXHRcdGlmIChpc1J1bm5hYmxlQmluZGluZyhjb2VyY2VhYmxlKSAmJiBpc1dpdGhTdHJ1Y3R1cmVkT3V0cHV0KGNvZXJjZWFibGUuYm91bmQpKSByZXR1cm4gc3VwZXIucGlwZShuZXcgUnVubmFibGVCaW5kaW5nKHtcblx0XHRcdGJvdW5kOiBjb2VyY2VhYmxlLmJvdW5kLndpdGhTdHJ1Y3R1cmVkT3V0cHV0KHRoaXMuc2NoZW1hLCAuLi50aGlzLm1ldGhvZCA/IFt7IG1ldGhvZDogdGhpcy5tZXRob2QgfV0gOiBbXSksXG5cdFx0XHRrd2FyZ3M6IGNvZXJjZWFibGUua3dhcmdzID8/IHt9LFxuXHRcdFx0Y29uZmlnOiBjb2VyY2VhYmxlLmNvbmZpZyxcblx0XHRcdGNvbmZpZ0ZhY3RvcmllczogY29lcmNlYWJsZS5jb25maWdGYWN0b3JpZXNcblx0XHR9KSk7XG5cdFx0dGhyb3cgbmV3IEVycm9yKGBTdHJ1Y3R1cmVkIHByb21wdHMgbmVlZCB0byBiZSBwaXBlZCB0byBhIGxhbmd1YWdlIG1vZGVsIHRoYXQgc3VwcG9ydHMgdGhlIFwid2l0aFN0cnVjdHVyZWRPdXRwdXQoKVwiIG1ldGhvZC5gKTtcblx0fVxuXHRzdGF0aWMgZnJvbU1lc3NhZ2VzQW5kU2NoZW1hKHByb21wdE1lc3NhZ2VzLCBzY2hlbWEsIG1ldGhvZCkge1xuXHRcdHJldHVybiBTdHJ1Y3R1cmVkUHJvbXB0LmZyb21NZXNzYWdlcyhwcm9tcHRNZXNzYWdlcywge1xuXHRcdFx0c2NoZW1hLFxuXHRcdFx0bWV0aG9kXG5cdFx0fSk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgU3RydWN0dXJlZFByb21wdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RydWN0dXJlZC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/prompts/structured.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/prompts/template.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/template.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_FORMATTER_MAPPING: () => (/* binding */ DEFAULT_FORMATTER_MAPPING),\n/* harmony export */   DEFAULT_PARSER_MAPPING: () => (/* binding */ DEFAULT_PARSER_MAPPING),\n/* harmony export */   checkValidTemplate: () => (/* binding */ checkValidTemplate),\n/* harmony export */   interpolateFString: () => (/* binding */ interpolateFString),\n/* harmony export */   interpolateMustache: () => (/* binding */ interpolateMustache),\n/* harmony export */   parseFString: () => (/* binding */ parseFString),\n/* harmony export */   parseMustache: () => (/* binding */ parseMustache),\n/* harmony export */   parseTemplate: () => (/* binding */ parseTemplate),\n/* harmony export */   renderTemplate: () => (/* binding */ renderTemplate)\n/* harmony export */ });\n/* harmony import */ var _errors_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/errors/index.js\");\n/* harmony import */ var mustache__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mustache */ \"(ssr)/./node_modules/mustache/mustache.mjs\");\n\n\n\n//#region src/prompts/template.ts\nfunction configureMustache() {\n\tmustache__WEBPACK_IMPORTED_MODULE_1__[\"default\"].escape = (text) => text;\n}\nconst parseFString = (template) => {\n\tconst chars = template.split(\"\");\n\tconst nodes = [];\n\tconst nextBracket = (bracket, start) => {\n\t\tfor (let i$1 = start; i$1 < chars.length; i$1 += 1) if (bracket.includes(chars[i$1])) return i$1;\n\t\treturn -1;\n\t};\n\tlet i = 0;\n\twhile (i < chars.length) if (chars[i] === \"{\" && i + 1 < chars.length && chars[i + 1] === \"{\") {\n\t\tnodes.push({\n\t\t\ttype: \"literal\",\n\t\t\ttext: \"{\"\n\t\t});\n\t\ti += 2;\n\t} else if (chars[i] === \"}\" && i + 1 < chars.length && chars[i + 1] === \"}\") {\n\t\tnodes.push({\n\t\t\ttype: \"literal\",\n\t\t\ttext: \"}\"\n\t\t});\n\t\ti += 2;\n\t} else if (chars[i] === \"{\") {\n\t\tconst j = nextBracket(\"}\", i);\n\t\tif (j < 0) throw new Error(\"Unclosed '{' in template.\");\n\t\tnodes.push({\n\t\t\ttype: \"variable\",\n\t\t\tname: chars.slice(i + 1, j).join(\"\")\n\t\t});\n\t\ti = j + 1;\n\t} else if (chars[i] === \"}\") throw new Error(\"Single '}' in template.\");\n\telse {\n\t\tconst next = nextBracket(\"{}\", i);\n\t\tconst text = (next < 0 ? chars.slice(i) : chars.slice(i, next)).join(\"\");\n\t\tnodes.push({\n\t\t\ttype: \"literal\",\n\t\t\ttext\n\t\t});\n\t\ti = next < 0 ? chars.length : next;\n\t}\n\treturn nodes;\n};\n/**\n* Convert the result of mustache.parse into an array of ParsedTemplateNode,\n* to make it compatible with other LangChain string parsing template formats.\n*\n* @param {mustache.TemplateSpans} template The result of parsing a mustache template with the mustache.js library.\n* @param {string[]} context Array of section variable names for nested context\n* @returns {ParsedTemplateNode[]}\n*/\nconst mustacheTemplateToNodes = (template, context = []) => {\n\tconst nodes = [];\n\tfor (const temp of template) if (temp[0] === \"name\") {\n\t\tconst name = temp[1].includes(\".\") ? temp[1].split(\".\")[0] : temp[1];\n\t\tnodes.push({\n\t\t\ttype: \"variable\",\n\t\t\tname\n\t\t});\n\t} else if ([\n\t\t\"#\",\n\t\t\"&\",\n\t\t\"^\",\n\t\t\">\"\n\t].includes(temp[0])) {\n\t\tnodes.push({\n\t\t\ttype: \"variable\",\n\t\t\tname: temp[1]\n\t\t});\n\t\tif (temp[0] === \"#\" && temp.length > 4 && Array.isArray(temp[4])) {\n\t\t\tconst newContext = [...context, temp[1]];\n\t\t\tconst nestedNodes = mustacheTemplateToNodes(temp[4], newContext);\n\t\t\tnodes.push(...nestedNodes);\n\t\t}\n\t} else nodes.push({\n\t\ttype: \"literal\",\n\t\ttext: temp[1]\n\t});\n\treturn nodes;\n};\nconst parseMustache = (template) => {\n\tconfigureMustache();\n\tconst parsed = mustache__WEBPACK_IMPORTED_MODULE_1__[\"default\"].parse(template);\n\treturn mustacheTemplateToNodes(parsed);\n};\nconst interpolateFString = (template, values) => {\n\treturn parseFString(template).reduce((res, node) => {\n\t\tif (node.type === \"variable\") {\n\t\t\tif (node.name in values) {\n\t\t\t\tconst stringValue = typeof values[node.name] === \"string\" ? values[node.name] : JSON.stringify(values[node.name]);\n\t\t\t\treturn res + stringValue;\n\t\t\t}\n\t\t\tthrow new Error(`(f-string) Missing value for input ${node.name}`);\n\t\t}\n\t\treturn res + node.text;\n\t}, \"\");\n};\nconst interpolateMustache = (template, values) => {\n\tconfigureMustache();\n\treturn mustache__WEBPACK_IMPORTED_MODULE_1__[\"default\"].render(template, values);\n};\nconst DEFAULT_FORMATTER_MAPPING = {\n\t\"f-string\": interpolateFString,\n\tmustache: interpolateMustache\n};\nconst DEFAULT_PARSER_MAPPING = {\n\t\"f-string\": parseFString,\n\tmustache: parseMustache\n};\nconst renderTemplate = (template, templateFormat, inputValues) => {\n\ttry {\n\t\treturn DEFAULT_FORMATTER_MAPPING[templateFormat](template, inputValues);\n\t} catch (e) {\n\t\tconst error = (0,_errors_index_js__WEBPACK_IMPORTED_MODULE_0__.addLangChainErrorFields)(e, \"INVALID_PROMPT_INPUT\");\n\t\tthrow error;\n\t}\n};\nconst parseTemplate = (template, templateFormat) => DEFAULT_PARSER_MAPPING[templateFormat](template);\nconst checkValidTemplate = (template, templateFormat, inputVariables) => {\n\tif (!(templateFormat in DEFAULT_FORMATTER_MAPPING)) {\n\t\tconst validFormats = Object.keys(DEFAULT_FORMATTER_MAPPING);\n\t\tthrow new Error(`Invalid template format. Got \\`${templateFormat}\\`;\n                         should be one of ${validFormats}`);\n\t}\n\ttry {\n\t\tconst dummyInputs = Object.fromEntries(inputVariables.map((v) => [v, \"foo\"]));\n\t\tif (Array.isArray(template)) template.forEach((message) => {\n\t\t\tif (message.type === \"text\" && \"text\" in message && typeof message.text === \"string\") renderTemplate(message.text, templateFormat, dummyInputs);\n\t\t\telse if (message.type === \"image_url\") {\n\t\t\t\tif (typeof message.image_url === \"string\") renderTemplate(message.image_url, templateFormat, dummyInputs);\n\t\t\t\telse if (typeof message.image_url === \"object\" && message.image_url !== null && \"url\" in message.image_url && typeof message.image_url.url === \"string\") {\n\t\t\t\t\tconst imageUrl = message.image_url.url;\n\t\t\t\t\trenderTemplate(imageUrl, templateFormat, dummyInputs);\n\t\t\t\t}\n\t\t\t} else throw new Error(`Invalid message template received. ${JSON.stringify(message, null, 2)}`);\n\t\t});\n\t\telse renderTemplate(template, templateFormat, dummyInputs);\n\t} catch (e) {\n\t\tthrow new Error(`Invalid prompt schema: ${e.message}`);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=template.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy90ZW1wbGF0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUE2RDtBQUM3Qjs7QUFFaEM7QUFDQTtBQUNBLENBQUMsZ0RBQVE7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG9CQUFvQjtBQUM1QztBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsZ0RBQWdEO0FBQzdGO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsR0FBRztBQUNIO0FBQ0EsR0FBRyx3QkFBd0IsZ0RBQWdEO0FBQzNFO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsR0FBRztBQUNIO0FBQ0EsR0FBRyx3QkFBd0I7QUFDM0IsMEJBQTBCO0FBQzFCLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHLHdCQUF3Qiw2QkFBNkI7QUFDeEQ7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsd0JBQXdCO0FBQ2xDLFVBQVUsVUFBVTtBQUNwQixZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsZ0RBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELFVBQVU7QUFDbkU7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxRQUFRLGdEQUFRO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxnQkFBZ0IseUVBQXVCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELGVBQWU7QUFDbkUsNENBQTRDLGFBQWE7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssMkRBQTJELGlDQUFpQztBQUNqRyxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0gsNENBQTRDLFVBQVU7QUFDdEQ7QUFDQTs7QUFFQTtBQUNzTDtBQUN0TCIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3Byb21wdHMvdGVtcGxhdGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYWRkTGFuZ0NoYWluRXJyb3JGaWVsZHMgfSBmcm9tIFwiLi4vZXJyb3JzL2luZGV4LmpzXCI7XG5pbXBvcnQgbXVzdGFjaGUgZnJvbSBcIm11c3RhY2hlXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcHJvbXB0cy90ZW1wbGF0ZS50c1xuZnVuY3Rpb24gY29uZmlndXJlTXVzdGFjaGUoKSB7XG5cdG11c3RhY2hlLmVzY2FwZSA9ICh0ZXh0KSA9PiB0ZXh0O1xufVxuY29uc3QgcGFyc2VGU3RyaW5nID0gKHRlbXBsYXRlKSA9PiB7XG5cdGNvbnN0IGNoYXJzID0gdGVtcGxhdGUuc3BsaXQoXCJcIik7XG5cdGNvbnN0IG5vZGVzID0gW107XG5cdGNvbnN0IG5leHRCcmFja2V0ID0gKGJyYWNrZXQsIHN0YXJ0KSA9PiB7XG5cdFx0Zm9yIChsZXQgaSQxID0gc3RhcnQ7IGkkMSA8IGNoYXJzLmxlbmd0aDsgaSQxICs9IDEpIGlmIChicmFja2V0LmluY2x1ZGVzKGNoYXJzW2kkMV0pKSByZXR1cm4gaSQxO1xuXHRcdHJldHVybiAtMTtcblx0fTtcblx0bGV0IGkgPSAwO1xuXHR3aGlsZSAoaSA8IGNoYXJzLmxlbmd0aCkgaWYgKGNoYXJzW2ldID09PSBcIntcIiAmJiBpICsgMSA8IGNoYXJzLmxlbmd0aCAmJiBjaGFyc1tpICsgMV0gPT09IFwie1wiKSB7XG5cdFx0bm9kZXMucHVzaCh7XG5cdFx0XHR0eXBlOiBcImxpdGVyYWxcIixcblx0XHRcdHRleHQ6IFwie1wiXG5cdFx0fSk7XG5cdFx0aSArPSAyO1xuXHR9IGVsc2UgaWYgKGNoYXJzW2ldID09PSBcIn1cIiAmJiBpICsgMSA8IGNoYXJzLmxlbmd0aCAmJiBjaGFyc1tpICsgMV0gPT09IFwifVwiKSB7XG5cdFx0bm9kZXMucHVzaCh7XG5cdFx0XHR0eXBlOiBcImxpdGVyYWxcIixcblx0XHRcdHRleHQ6IFwifVwiXG5cdFx0fSk7XG5cdFx0aSArPSAyO1xuXHR9IGVsc2UgaWYgKGNoYXJzW2ldID09PSBcIntcIikge1xuXHRcdGNvbnN0IGogPSBuZXh0QnJhY2tldChcIn1cIiwgaSk7XG5cdFx0aWYgKGogPCAwKSB0aHJvdyBuZXcgRXJyb3IoXCJVbmNsb3NlZCAneycgaW4gdGVtcGxhdGUuXCIpO1xuXHRcdG5vZGVzLnB1c2goe1xuXHRcdFx0dHlwZTogXCJ2YXJpYWJsZVwiLFxuXHRcdFx0bmFtZTogY2hhcnMuc2xpY2UoaSArIDEsIGopLmpvaW4oXCJcIilcblx0XHR9KTtcblx0XHRpID0gaiArIDE7XG5cdH0gZWxzZSBpZiAoY2hhcnNbaV0gPT09IFwifVwiKSB0aHJvdyBuZXcgRXJyb3IoXCJTaW5nbGUgJ30nIGluIHRlbXBsYXRlLlwiKTtcblx0ZWxzZSB7XG5cdFx0Y29uc3QgbmV4dCA9IG5leHRCcmFja2V0KFwie31cIiwgaSk7XG5cdFx0Y29uc3QgdGV4dCA9IChuZXh0IDwgMCA/IGNoYXJzLnNsaWNlKGkpIDogY2hhcnMuc2xpY2UoaSwgbmV4dCkpLmpvaW4oXCJcIik7XG5cdFx0bm9kZXMucHVzaCh7XG5cdFx0XHR0eXBlOiBcImxpdGVyYWxcIixcblx0XHRcdHRleHRcblx0XHR9KTtcblx0XHRpID0gbmV4dCA8IDAgPyBjaGFycy5sZW5ndGggOiBuZXh0O1xuXHR9XG5cdHJldHVybiBub2Rlcztcbn07XG4vKipcbiogQ29udmVydCB0aGUgcmVzdWx0IG9mIG11c3RhY2hlLnBhcnNlIGludG8gYW4gYXJyYXkgb2YgUGFyc2VkVGVtcGxhdGVOb2RlLFxuKiB0byBtYWtlIGl0IGNvbXBhdGlibGUgd2l0aCBvdGhlciBMYW5nQ2hhaW4gc3RyaW5nIHBhcnNpbmcgdGVtcGxhdGUgZm9ybWF0cy5cbipcbiogQHBhcmFtIHttdXN0YWNoZS5UZW1wbGF0ZVNwYW5zfSB0ZW1wbGF0ZSBUaGUgcmVzdWx0IG9mIHBhcnNpbmcgYSBtdXN0YWNoZSB0ZW1wbGF0ZSB3aXRoIHRoZSBtdXN0YWNoZS5qcyBsaWJyYXJ5LlxuKiBAcGFyYW0ge3N0cmluZ1tdfSBjb250ZXh0IEFycmF5IG9mIHNlY3Rpb24gdmFyaWFibGUgbmFtZXMgZm9yIG5lc3RlZCBjb250ZXh0XG4qIEByZXR1cm5zIHtQYXJzZWRUZW1wbGF0ZU5vZGVbXX1cbiovXG5jb25zdCBtdXN0YWNoZVRlbXBsYXRlVG9Ob2RlcyA9ICh0ZW1wbGF0ZSwgY29udGV4dCA9IFtdKSA9PiB7XG5cdGNvbnN0IG5vZGVzID0gW107XG5cdGZvciAoY29uc3QgdGVtcCBvZiB0ZW1wbGF0ZSkgaWYgKHRlbXBbMF0gPT09IFwibmFtZVwiKSB7XG5cdFx0Y29uc3QgbmFtZSA9IHRlbXBbMV0uaW5jbHVkZXMoXCIuXCIpID8gdGVtcFsxXS5zcGxpdChcIi5cIilbMF0gOiB0ZW1wWzFdO1xuXHRcdG5vZGVzLnB1c2goe1xuXHRcdFx0dHlwZTogXCJ2YXJpYWJsZVwiLFxuXHRcdFx0bmFtZVxuXHRcdH0pO1xuXHR9IGVsc2UgaWYgKFtcblx0XHRcIiNcIixcblx0XHRcIiZcIixcblx0XHRcIl5cIixcblx0XHRcIj5cIlxuXHRdLmluY2x1ZGVzKHRlbXBbMF0pKSB7XG5cdFx0bm9kZXMucHVzaCh7XG5cdFx0XHR0eXBlOiBcInZhcmlhYmxlXCIsXG5cdFx0XHRuYW1lOiB0ZW1wWzFdXG5cdFx0fSk7XG5cdFx0aWYgKHRlbXBbMF0gPT09IFwiI1wiICYmIHRlbXAubGVuZ3RoID4gNCAmJiBBcnJheS5pc0FycmF5KHRlbXBbNF0pKSB7XG5cdFx0XHRjb25zdCBuZXdDb250ZXh0ID0gWy4uLmNvbnRleHQsIHRlbXBbMV1dO1xuXHRcdFx0Y29uc3QgbmVzdGVkTm9kZXMgPSBtdXN0YWNoZVRlbXBsYXRlVG9Ob2Rlcyh0ZW1wWzRdLCBuZXdDb250ZXh0KTtcblx0XHRcdG5vZGVzLnB1c2goLi4ubmVzdGVkTm9kZXMpO1xuXHRcdH1cblx0fSBlbHNlIG5vZGVzLnB1c2goe1xuXHRcdHR5cGU6IFwibGl0ZXJhbFwiLFxuXHRcdHRleHQ6IHRlbXBbMV1cblx0fSk7XG5cdHJldHVybiBub2Rlcztcbn07XG5jb25zdCBwYXJzZU11c3RhY2hlID0gKHRlbXBsYXRlKSA9PiB7XG5cdGNvbmZpZ3VyZU11c3RhY2hlKCk7XG5cdGNvbnN0IHBhcnNlZCA9IG11c3RhY2hlLnBhcnNlKHRlbXBsYXRlKTtcblx0cmV0dXJuIG11c3RhY2hlVGVtcGxhdGVUb05vZGVzKHBhcnNlZCk7XG59O1xuY29uc3QgaW50ZXJwb2xhdGVGU3RyaW5nID0gKHRlbXBsYXRlLCB2YWx1ZXMpID0+IHtcblx0cmV0dXJuIHBhcnNlRlN0cmluZyh0ZW1wbGF0ZSkucmVkdWNlKChyZXMsIG5vZGUpID0+IHtcblx0XHRpZiAobm9kZS50eXBlID09PSBcInZhcmlhYmxlXCIpIHtcblx0XHRcdGlmIChub2RlLm5hbWUgaW4gdmFsdWVzKSB7XG5cdFx0XHRcdGNvbnN0IHN0cmluZ1ZhbHVlID0gdHlwZW9mIHZhbHVlc1tub2RlLm5hbWVdID09PSBcInN0cmluZ1wiID8gdmFsdWVzW25vZGUubmFtZV0gOiBKU09OLnN0cmluZ2lmeSh2YWx1ZXNbbm9kZS5uYW1lXSk7XG5cdFx0XHRcdHJldHVybiByZXMgKyBzdHJpbmdWYWx1ZTtcblx0XHRcdH1cblx0XHRcdHRocm93IG5ldyBFcnJvcihgKGYtc3RyaW5nKSBNaXNzaW5nIHZhbHVlIGZvciBpbnB1dCAke25vZGUubmFtZX1gKTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlcyArIG5vZGUudGV4dDtcblx0fSwgXCJcIik7XG59O1xuY29uc3QgaW50ZXJwb2xhdGVNdXN0YWNoZSA9ICh0ZW1wbGF0ZSwgdmFsdWVzKSA9PiB7XG5cdGNvbmZpZ3VyZU11c3RhY2hlKCk7XG5cdHJldHVybiBtdXN0YWNoZS5yZW5kZXIodGVtcGxhdGUsIHZhbHVlcyk7XG59O1xuY29uc3QgREVGQVVMVF9GT1JNQVRURVJfTUFQUElORyA9IHtcblx0XCJmLXN0cmluZ1wiOiBpbnRlcnBvbGF0ZUZTdHJpbmcsXG5cdG11c3RhY2hlOiBpbnRlcnBvbGF0ZU11c3RhY2hlXG59O1xuY29uc3QgREVGQVVMVF9QQVJTRVJfTUFQUElORyA9IHtcblx0XCJmLXN0cmluZ1wiOiBwYXJzZUZTdHJpbmcsXG5cdG11c3RhY2hlOiBwYXJzZU11c3RhY2hlXG59O1xuY29uc3QgcmVuZGVyVGVtcGxhdGUgPSAodGVtcGxhdGUsIHRlbXBsYXRlRm9ybWF0LCBpbnB1dFZhbHVlcykgPT4ge1xuXHR0cnkge1xuXHRcdHJldHVybiBERUZBVUxUX0ZPUk1BVFRFUl9NQVBQSU5HW3RlbXBsYXRlRm9ybWF0XSh0ZW1wbGF0ZSwgaW5wdXRWYWx1ZXMpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0Y29uc3QgZXJyb3IgPSBhZGRMYW5nQ2hhaW5FcnJvckZpZWxkcyhlLCBcIklOVkFMSURfUFJPTVBUX0lOUFVUXCIpO1xuXHRcdHRocm93IGVycm9yO1xuXHR9XG59O1xuY29uc3QgcGFyc2VUZW1wbGF0ZSA9ICh0ZW1wbGF0ZSwgdGVtcGxhdGVGb3JtYXQpID0+IERFRkFVTFRfUEFSU0VSX01BUFBJTkdbdGVtcGxhdGVGb3JtYXRdKHRlbXBsYXRlKTtcbmNvbnN0IGNoZWNrVmFsaWRUZW1wbGF0ZSA9ICh0ZW1wbGF0ZSwgdGVtcGxhdGVGb3JtYXQsIGlucHV0VmFyaWFibGVzKSA9PiB7XG5cdGlmICghKHRlbXBsYXRlRm9ybWF0IGluIERFRkFVTFRfRk9STUFUVEVSX01BUFBJTkcpKSB7XG5cdFx0Y29uc3QgdmFsaWRGb3JtYXRzID0gT2JqZWN0LmtleXMoREVGQVVMVF9GT1JNQVRURVJfTUFQUElORyk7XG5cdFx0dGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHRlbXBsYXRlIGZvcm1hdC4gR290IFxcYCR7dGVtcGxhdGVGb3JtYXR9XFxgO1xuICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZCBiZSBvbmUgb2YgJHt2YWxpZEZvcm1hdHN9YCk7XG5cdH1cblx0dHJ5IHtcblx0XHRjb25zdCBkdW1teUlucHV0cyA9IE9iamVjdC5mcm9tRW50cmllcyhpbnB1dFZhcmlhYmxlcy5tYXAoKHYpID0+IFt2LCBcImZvb1wiXSkpO1xuXHRcdGlmIChBcnJheS5pc0FycmF5KHRlbXBsYXRlKSkgdGVtcGxhdGUuZm9yRWFjaCgobWVzc2FnZSkgPT4ge1xuXHRcdFx0aWYgKG1lc3NhZ2UudHlwZSA9PT0gXCJ0ZXh0XCIgJiYgXCJ0ZXh0XCIgaW4gbWVzc2FnZSAmJiB0eXBlb2YgbWVzc2FnZS50ZXh0ID09PSBcInN0cmluZ1wiKSByZW5kZXJUZW1wbGF0ZShtZXNzYWdlLnRleHQsIHRlbXBsYXRlRm9ybWF0LCBkdW1teUlucHV0cyk7XG5cdFx0XHRlbHNlIGlmIChtZXNzYWdlLnR5cGUgPT09IFwiaW1hZ2VfdXJsXCIpIHtcblx0XHRcdFx0aWYgKHR5cGVvZiBtZXNzYWdlLmltYWdlX3VybCA9PT0gXCJzdHJpbmdcIikgcmVuZGVyVGVtcGxhdGUobWVzc2FnZS5pbWFnZV91cmwsIHRlbXBsYXRlRm9ybWF0LCBkdW1teUlucHV0cyk7XG5cdFx0XHRcdGVsc2UgaWYgKHR5cGVvZiBtZXNzYWdlLmltYWdlX3VybCA9PT0gXCJvYmplY3RcIiAmJiBtZXNzYWdlLmltYWdlX3VybCAhPT0gbnVsbCAmJiBcInVybFwiIGluIG1lc3NhZ2UuaW1hZ2VfdXJsICYmIHR5cGVvZiBtZXNzYWdlLmltYWdlX3VybC51cmwgPT09IFwic3RyaW5nXCIpIHtcblx0XHRcdFx0XHRjb25zdCBpbWFnZVVybCA9IG1lc3NhZ2UuaW1hZ2VfdXJsLnVybDtcblx0XHRcdFx0XHRyZW5kZXJUZW1wbGF0ZShpbWFnZVVybCwgdGVtcGxhdGVGb3JtYXQsIGR1bW15SW5wdXRzKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBtZXNzYWdlIHRlbXBsYXRlIHJlY2VpdmVkLiAke0pTT04uc3RyaW5naWZ5KG1lc3NhZ2UsIG51bGwsIDIpfWApO1xuXHRcdH0pO1xuXHRcdGVsc2UgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRlbXBsYXRlRm9ybWF0LCBkdW1teUlucHV0cyk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcHJvbXB0IHNjaGVtYTogJHtlLm1lc3NhZ2V9YCk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgREVGQVVMVF9GT1JNQVRURVJfTUFQUElORywgREVGQVVMVF9QQVJTRVJfTUFQUElORywgY2hlY2tWYWxpZFRlbXBsYXRlLCBpbnRlcnBvbGF0ZUZTdHJpbmcsIGludGVycG9sYXRlTXVzdGFjaGUsIHBhcnNlRlN0cmluZywgcGFyc2VNdXN0YWNoZSwgcGFyc2VUZW1wbGF0ZSwgcmVuZGVyVGVtcGxhdGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRlbXBsYXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/prompts/template.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/retrievers/document_compressors/index.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/retrievers/document_compressors/index.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseDocumentCompressor: () => (/* binding */ BaseDocumentCompressor),\n/* harmony export */   document_compressors_exports: () => (/* binding */ document_compressors_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n\n\n//#region src/retrievers/document_compressors/index.ts\nvar document_compressors_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(document_compressors_exports, { BaseDocumentCompressor: () => BaseDocumentCompressor });\n/**\n* Base Document Compression class. All compressors should extend this class.\n*/\nvar BaseDocumentCompressor = class {\n\tstatic isBaseDocumentCompressor(x) {\n\t\treturn x?.compressDocuments !== void 0;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcmV0cmlldmVycy9kb2N1bWVudF9jb21wcmVzc29ycy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEQ7O0FBRTlEO0FBQ0E7QUFDQSxzRUFBUSxpQ0FBaUMsc0RBQXNEO0FBQy9GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDZ0U7QUFDaEUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9yZXRyaWV2ZXJzL2RvY3VtZW50X2NvbXByZXNzb3JzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4uLy4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9yZXRyaWV2ZXJzL2RvY3VtZW50X2NvbXByZXNzb3JzL2luZGV4LnRzXG52YXIgZG9jdW1lbnRfY29tcHJlc3NvcnNfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQoZG9jdW1lbnRfY29tcHJlc3NvcnNfZXhwb3J0cywgeyBCYXNlRG9jdW1lbnRDb21wcmVzc29yOiAoKSA9PiBCYXNlRG9jdW1lbnRDb21wcmVzc29yIH0pO1xuLyoqXG4qIEJhc2UgRG9jdW1lbnQgQ29tcHJlc3Npb24gY2xhc3MuIEFsbCBjb21wcmVzc29ycyBzaG91bGQgZXh0ZW5kIHRoaXMgY2xhc3MuXG4qL1xudmFyIEJhc2VEb2N1bWVudENvbXByZXNzb3IgPSBjbGFzcyB7XG5cdHN0YXRpYyBpc0Jhc2VEb2N1bWVudENvbXByZXNzb3IoeCkge1xuXHRcdHJldHVybiB4Py5jb21wcmVzc0RvY3VtZW50cyAhPT0gdm9pZCAwO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEJhc2VEb2N1bWVudENvbXByZXNzb3IsIGRvY3VtZW50X2NvbXByZXNzb3JzX2V4cG9ydHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/retrievers/document_compressors/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/retrievers/index.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/retrievers/index.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseRetriever: () => (/* binding */ BaseRetriever),\n/* harmony export */   retrievers_exports: () => (/* binding */ retrievers_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(ssr)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _runnables_config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../runnables/config.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/config.js\");\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../runnables/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/base.js\");\n\n\n\n\n\n//#region src/retrievers/index.ts\nvar retrievers_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(retrievers_exports, { BaseRetriever: () => BaseRetriever });\n/**\n* Abstract base class for a document retrieval system, designed to\n* process string queries and return the most relevant documents from a source.\n*\n* `BaseRetriever` provides common properties and methods for derived retrievers,\n* such as callbacks, tagging, and verbose logging. Custom retrieval systems\n* should extend this class and implement `_getRelevantDocuments` to define\n* the specific retrieval logic.\n*\n* @template Metadata - The type of metadata associated with each document,\n*                      defaulting to `Record<string, any>`.\n*/\nvar BaseRetriever = class extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_3__.Runnable {\n\t/**\n\t* Optional callbacks to handle various events in the retrieval process.\n\t*/\n\tcallbacks;\n\t/**\n\t* Tags to label or categorize the retrieval operation.\n\t*/\n\ttags;\n\t/**\n\t* Metadata to provide additional context or information about the retrieval\n\t* operation.\n\t*/\n\tmetadata;\n\t/**\n\t* If set to `true`, enables verbose logging for the retrieval process.\n\t*/\n\tverbose;\n\t/**\n\t* Constructs a new `BaseRetriever` instance with optional configuration fields.\n\t*\n\t* @param fields - Optional input configuration that can include `callbacks`,\n\t*                 `tags`, `metadata`, and `verbose` settings for custom retriever behavior.\n\t*/\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.callbacks = fields?.callbacks;\n\t\tthis.tags = fields?.tags ?? [];\n\t\tthis.metadata = fields?.metadata ?? {};\n\t\tthis.verbose = fields?.verbose ?? false;\n\t}\n\t/**\n\t* TODO: This should be an abstract method, but we'd like to avoid breaking\n\t* changes to people currently using subclassed custom retrievers.\n\t* Change it on next major release.\n\t*/\n\t/**\n\t* Placeholder method for retrieving relevant documents based on a query.\n\t*\n\t* This method is intended to be implemented by subclasses and will be\n\t* converted to an abstract method in the next major release. Currently, it\n\t* throws an error if not implemented, ensuring that custom retrievers define\n\t* the specific retrieval logic.\n\t*\n\t* @param _query - The query string used to search for relevant documents.\n\t* @param _callbacks - (optional) Callback manager for managing callbacks\n\t*                     during retrieval.\n\t* @returns A promise resolving to an array of `DocumentInterface` instances relevant to the query.\n\t* @throws {Error} Throws an error indicating the method is not implemented.\n\t*/\n\t_getRelevantDocuments(_query, _callbacks) {\n\t\tthrow new Error(\"Not implemented!\");\n\t}\n\t/**\n\t* Executes a retrieval operation.\n\t*\n\t* @param input - The query string used to search for relevant documents.\n\t* @param options - (optional) Configuration options for the retrieval run,\n\t*                  which may include callbacks, tags, and metadata.\n\t* @returns A promise that resolves to an array of `DocumentInterface` instances\n\t*          representing the most relevant documents to the query.\n\t*/\n\tasync invoke(input, options) {\n\t\tconst parsedConfig = (0,_runnables_config_js__WEBPACK_IMPORTED_MODULE_2__.ensureConfig)((0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_1__.parseCallbackConfigArg)(options));\n\t\tconst callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_1__.CallbackManager.configure(parsedConfig.callbacks, this.callbacks, parsedConfig.tags, this.tags, parsedConfig.metadata, this.metadata, { verbose: this.verbose });\n\t\tconst runManager = await callbackManager_?.handleRetrieverStart(this.toJSON(), input, parsedConfig.runId, void 0, void 0, void 0, parsedConfig.runName);\n\t\ttry {\n\t\t\tconst results = await this._getRelevantDocuments(input, runManager);\n\t\t\tawait runManager?.handleRetrieverEnd(results);\n\t\t\treturn results;\n\t\t} catch (error) {\n\t\t\tawait runManager?.handleRetrieverError(error);\n\t\t\tthrow error;\n\t\t}\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcmV0cmlldmVycy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMkQ7QUFDdUI7QUFDNUI7QUFDTjs7QUFFaEQ7QUFDQTtBQUNBLHNFQUFRLHVCQUF1QixvQ0FBb0M7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLHdEQUFRO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixrRUFBWSxDQUFDLDZFQUFzQjtBQUMxRCxpQ0FBaUMsa0VBQWUseUhBQXlILHVCQUF1QjtBQUNoTTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDNkM7QUFDN0MiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9yZXRyaWV2ZXJzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IENhbGxiYWNrTWFuYWdlciwgcGFyc2VDYWxsYmFja0NvbmZpZ0FyZyB9IGZyb20gXCIuLi9jYWxsYmFja3MvbWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgZW5zdXJlQ29uZmlnIH0gZnJvbSBcIi4uL3J1bm5hYmxlcy9jb25maWcuanNcIjtcbmltcG9ydCB7IFJ1bm5hYmxlIH0gZnJvbSBcIi4uL3J1bm5hYmxlcy9iYXNlLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcmV0cmlldmVycy9pbmRleC50c1xudmFyIHJldHJpZXZlcnNfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQocmV0cmlldmVyc19leHBvcnRzLCB7IEJhc2VSZXRyaWV2ZXI6ICgpID0+IEJhc2VSZXRyaWV2ZXIgfSk7XG4vKipcbiogQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgYSBkb2N1bWVudCByZXRyaWV2YWwgc3lzdGVtLCBkZXNpZ25lZCB0b1xuKiBwcm9jZXNzIHN0cmluZyBxdWVyaWVzIGFuZCByZXR1cm4gdGhlIG1vc3QgcmVsZXZhbnQgZG9jdW1lbnRzIGZyb20gYSBzb3VyY2UuXG4qXG4qIGBCYXNlUmV0cmlldmVyYCBwcm92aWRlcyBjb21tb24gcHJvcGVydGllcyBhbmQgbWV0aG9kcyBmb3IgZGVyaXZlZCByZXRyaWV2ZXJzLFxuKiBzdWNoIGFzIGNhbGxiYWNrcywgdGFnZ2luZywgYW5kIHZlcmJvc2UgbG9nZ2luZy4gQ3VzdG9tIHJldHJpZXZhbCBzeXN0ZW1zXG4qIHNob3VsZCBleHRlbmQgdGhpcyBjbGFzcyBhbmQgaW1wbGVtZW50IGBfZ2V0UmVsZXZhbnREb2N1bWVudHNgIHRvIGRlZmluZVxuKiB0aGUgc3BlY2lmaWMgcmV0cmlldmFsIGxvZ2ljLlxuKlxuKiBAdGVtcGxhdGUgTWV0YWRhdGEgLSBUaGUgdHlwZSBvZiBtZXRhZGF0YSBhc3NvY2lhdGVkIHdpdGggZWFjaCBkb2N1bWVudCxcbiogICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdGluZyB0byBgUmVjb3JkPHN0cmluZywgYW55PmAuXG4qL1xudmFyIEJhc2VSZXRyaWV2ZXIgPSBjbGFzcyBleHRlbmRzIFJ1bm5hYmxlIHtcblx0LyoqXG5cdCogT3B0aW9uYWwgY2FsbGJhY2tzIHRvIGhhbmRsZSB2YXJpb3VzIGV2ZW50cyBpbiB0aGUgcmV0cmlldmFsIHByb2Nlc3MuXG5cdCovXG5cdGNhbGxiYWNrcztcblx0LyoqXG5cdCogVGFncyB0byBsYWJlbCBvciBjYXRlZ29yaXplIHRoZSByZXRyaWV2YWwgb3BlcmF0aW9uLlxuXHQqL1xuXHR0YWdzO1xuXHQvKipcblx0KiBNZXRhZGF0YSB0byBwcm92aWRlIGFkZGl0aW9uYWwgY29udGV4dCBvciBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcmV0cmlldmFsXG5cdCogb3BlcmF0aW9uLlxuXHQqL1xuXHRtZXRhZGF0YTtcblx0LyoqXG5cdCogSWYgc2V0IHRvIGB0cnVlYCwgZW5hYmxlcyB2ZXJib3NlIGxvZ2dpbmcgZm9yIHRoZSByZXRyaWV2YWwgcHJvY2Vzcy5cblx0Ki9cblx0dmVyYm9zZTtcblx0LyoqXG5cdCogQ29uc3RydWN0cyBhIG5ldyBgQmFzZVJldHJpZXZlcmAgaW5zdGFuY2Ugd2l0aCBvcHRpb25hbCBjb25maWd1cmF0aW9uIGZpZWxkcy5cblx0KlxuXHQqIEBwYXJhbSBmaWVsZHMgLSBPcHRpb25hbCBpbnB1dCBjb25maWd1cmF0aW9uIHRoYXQgY2FuIGluY2x1ZGUgYGNhbGxiYWNrc2AsXG5cdCogICAgICAgICAgICAgICAgIGB0YWdzYCwgYG1ldGFkYXRhYCwgYW5kIGB2ZXJib3NlYCBzZXR0aW5ncyBmb3IgY3VzdG9tIHJldHJpZXZlciBiZWhhdmlvci5cblx0Ki9cblx0Y29uc3RydWN0b3IoZmllbGRzKSB7XG5cdFx0c3VwZXIoZmllbGRzKTtcblx0XHR0aGlzLmNhbGxiYWNrcyA9IGZpZWxkcz8uY2FsbGJhY2tzO1xuXHRcdHRoaXMudGFncyA9IGZpZWxkcz8udGFncyA/PyBbXTtcblx0XHR0aGlzLm1ldGFkYXRhID0gZmllbGRzPy5tZXRhZGF0YSA/PyB7fTtcblx0XHR0aGlzLnZlcmJvc2UgPSBmaWVsZHM/LnZlcmJvc2UgPz8gZmFsc2U7XG5cdH1cblx0LyoqXG5cdCogVE9ETzogVGhpcyBzaG91bGQgYmUgYW4gYWJzdHJhY3QgbWV0aG9kLCBidXQgd2UnZCBsaWtlIHRvIGF2b2lkIGJyZWFraW5nXG5cdCogY2hhbmdlcyB0byBwZW9wbGUgY3VycmVudGx5IHVzaW5nIHN1YmNsYXNzZWQgY3VzdG9tIHJldHJpZXZlcnMuXG5cdCogQ2hhbmdlIGl0IG9uIG5leHQgbWFqb3IgcmVsZWFzZS5cblx0Ki9cblx0LyoqXG5cdCogUGxhY2Vob2xkZXIgbWV0aG9kIGZvciByZXRyaWV2aW5nIHJlbGV2YW50IGRvY3VtZW50cyBiYXNlZCBvbiBhIHF1ZXJ5LlxuXHQqXG5cdCogVGhpcyBtZXRob2QgaXMgaW50ZW5kZWQgdG8gYmUgaW1wbGVtZW50ZWQgYnkgc3ViY2xhc3NlcyBhbmQgd2lsbCBiZVxuXHQqIGNvbnZlcnRlZCB0byBhbiBhYnN0cmFjdCBtZXRob2QgaW4gdGhlIG5leHQgbWFqb3IgcmVsZWFzZS4gQ3VycmVudGx5LCBpdFxuXHQqIHRocm93cyBhbiBlcnJvciBpZiBub3QgaW1wbGVtZW50ZWQsIGVuc3VyaW5nIHRoYXQgY3VzdG9tIHJldHJpZXZlcnMgZGVmaW5lXG5cdCogdGhlIHNwZWNpZmljIHJldHJpZXZhbCBsb2dpYy5cblx0KlxuXHQqIEBwYXJhbSBfcXVlcnkgLSBUaGUgcXVlcnkgc3RyaW5nIHVzZWQgdG8gc2VhcmNoIGZvciByZWxldmFudCBkb2N1bWVudHMuXG5cdCogQHBhcmFtIF9jYWxsYmFja3MgLSAob3B0aW9uYWwpIENhbGxiYWNrIG1hbmFnZXIgZm9yIG1hbmFnaW5nIGNhbGxiYWNrc1xuXHQqICAgICAgICAgICAgICAgICAgICAgZHVyaW5nIHJldHJpZXZhbC5cblx0KiBAcmV0dXJucyBBIHByb21pc2UgcmVzb2x2aW5nIHRvIGFuIGFycmF5IG9mIGBEb2N1bWVudEludGVyZmFjZWAgaW5zdGFuY2VzIHJlbGV2YW50IHRvIHRoZSBxdWVyeS5cblx0KiBAdGhyb3dzIHtFcnJvcn0gVGhyb3dzIGFuIGVycm9yIGluZGljYXRpbmcgdGhlIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXG5cdCovXG5cdF9nZXRSZWxldmFudERvY3VtZW50cyhfcXVlcnksIF9jYWxsYmFja3MpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWQhXCIpO1xuXHR9XG5cdC8qKlxuXHQqIEV4ZWN1dGVzIGEgcmV0cmlldmFsIG9wZXJhdGlvbi5cblx0KlxuXHQqIEBwYXJhbSBpbnB1dCAtIFRoZSBxdWVyeSBzdHJpbmcgdXNlZCB0byBzZWFyY2ggZm9yIHJlbGV2YW50IGRvY3VtZW50cy5cblx0KiBAcGFyYW0gb3B0aW9ucyAtIChvcHRpb25hbCkgQ29uZmlndXJhdGlvbiBvcHRpb25zIGZvciB0aGUgcmV0cmlldmFsIHJ1bixcblx0KiAgICAgICAgICAgICAgICAgIHdoaWNoIG1heSBpbmNsdWRlIGNhbGxiYWNrcywgdGFncywgYW5kIG1ldGFkYXRhLlxuXHQqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGFuIGFycmF5IG9mIGBEb2N1bWVudEludGVyZmFjZWAgaW5zdGFuY2VzXG5cdCogICAgICAgICAgcmVwcmVzZW50aW5nIHRoZSBtb3N0IHJlbGV2YW50IGRvY3VtZW50cyB0byB0aGUgcXVlcnkuXG5cdCovXG5cdGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuXHRcdGNvbnN0IHBhcnNlZENvbmZpZyA9IGVuc3VyZUNvbmZpZyhwYXJzZUNhbGxiYWNrQ29uZmlnQXJnKG9wdGlvbnMpKTtcblx0XHRjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgQ2FsbGJhY2tNYW5hZ2VyLmNvbmZpZ3VyZShwYXJzZWRDb25maWcuY2FsbGJhY2tzLCB0aGlzLmNhbGxiYWNrcywgcGFyc2VkQ29uZmlnLnRhZ3MsIHRoaXMudGFncywgcGFyc2VkQ29uZmlnLm1ldGFkYXRhLCB0aGlzLm1ldGFkYXRhLCB7IHZlcmJvc2U6IHRoaXMudmVyYm9zZSB9KTtcblx0XHRjb25zdCBydW5NYW5hZ2VyID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlUmV0cmlldmVyU3RhcnQodGhpcy50b0pTT04oKSwgaW5wdXQsIHBhcnNlZENvbmZpZy5ydW5JZCwgdm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgcGFyc2VkQ29uZmlnLnJ1bk5hbWUpO1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5fZ2V0UmVsZXZhbnREb2N1bWVudHMoaW5wdXQsIHJ1bk1hbmFnZXIpO1xuXHRcdFx0YXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlUmV0cmlldmVyRW5kKHJlc3VsdHMpO1xuXHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZVJldHJpZXZlckVycm9yKGVycm9yKTtcblx0XHRcdHRocm93IGVycm9yO1xuXHRcdH1cblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBCYXNlUmV0cmlldmVyLCByZXRyaWV2ZXJzX2V4cG9ydHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/retrievers/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/runnables/base.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/base.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Runnable: () => (/* binding */ Runnable),\n/* harmony export */   RunnableAssign: () => (/* binding */ RunnableAssign),\n/* harmony export */   RunnableBinding: () => (/* binding */ RunnableBinding),\n/* harmony export */   RunnableEach: () => (/* binding */ RunnableEach),\n/* harmony export */   RunnableLambda: () => (/* binding */ RunnableLambda),\n/* harmony export */   RunnableMap: () => (/* binding */ RunnableMap),\n/* harmony export */   RunnableParallel: () => (/* binding */ RunnableParallel),\n/* harmony export */   RunnablePick: () => (/* binding */ RunnablePick),\n/* harmony export */   RunnableRetry: () => (/* binding */ RunnableRetry),\n/* harmony export */   RunnableSequence: () => (/* binding */ RunnableSequence),\n/* harmony export */   RunnableToolLike: () => (/* binding */ RunnableToolLike),\n/* harmony export */   RunnableWithFallbacks: () => (/* binding */ RunnableWithFallbacks),\n/* harmony export */   _coerceToDict: () => (/* binding */ _coerceToDict),\n/* harmony export */   _coerceToRunnable: () => (/* binding */ _coerceToRunnable)\n/* harmony export */ });\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../load/serializable.js */ \"(ssr)/./node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _tools_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../tools/utils.js */ \"(ssr)/./node_modules/@langchain/core/dist/tools/utils.js\");\n/* harmony import */ var _singletons_async_local_storage_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../singletons/async_local_storage/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/singletons/async_local_storage/index.js\");\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../singletons/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/singletons/index.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./config.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/config.js\");\n/* harmony import */ var _utils_signal_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/signal.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/signal.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/stream.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../tracers/log_stream.js */ \"(ssr)/./node_modules/@langchain/core/dist/tracers/log_stream.js\");\n/* harmony import */ var _tracers_event_stream_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../tracers/event_stream.js */ \"(ssr)/./node_modules/@langchain/core/dist/tracers/event_stream.js\");\n/* harmony import */ var _utils_p_retry_index_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils/p-retry/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/p-retry/index.js\");\n/* harmony import */ var _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../utils/async_caller.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/async_caller.js\");\n/* harmony import */ var _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../tracers/root_listener.js */ \"(ssr)/./node_modules/@langchain/core/dist/tracers/root_listener.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./utils.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/utils.js\");\n/* harmony import */ var _utils_types_zod_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../utils/types/zod.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/types/zod.js\");\n/* harmony import */ var _graph_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./graph.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/graph.js\");\n/* harmony import */ var _wrappers_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./wrappers.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/wrappers.js\");\n/* harmony import */ var _iter_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./iter.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/iter.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! zod/v3 */ \"(ssr)/./node_modules/zod/v3/index.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! uuid */ \"(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var langsmith_singletons_traceable__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! langsmith/singletons/traceable */ \"(ssr)/./node_modules/langsmith/singletons/traceable.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/runnables/base.ts\nfunction _coerceToDict(value, defaultKey) {\n\treturn value && !Array.isArray(value) && !(value instanceof Date) && typeof value === \"object\" ? value : { [defaultKey]: value };\n}\n/**\n* A Runnable is a generic unit of work that can be invoked, batched, streamed, and/or\n* transformed.\n*/\nvar Runnable = class extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable {\n\tlc_runnable = true;\n\tname;\n\tgetName(suffix) {\n\t\tconst name = this.name ?? this.constructor.lc_name() ?? this.constructor.name;\n\t\treturn suffix ? `${name}${suffix}` : name;\n\t}\n\t/**\n\t* Add retry logic to an existing runnable.\n\t* @param fields.stopAfterAttempt The number of attempts to retry.\n\t* @param fields.onFailedAttempt A function that is called when a retry fails.\n\t* @returns A new RunnableRetry that, when invoked, will retry according to the parameters.\n\t*/\n\twithRetry(fields) {\n\t\treturn new RunnableRetry({\n\t\t\tbound: this,\n\t\t\tkwargs: {},\n\t\t\tconfig: {},\n\t\t\tmaxAttemptNumber: fields?.stopAfterAttempt,\n\t\t\t...fields\n\t\t});\n\t}\n\t/**\n\t* Bind config to a Runnable, returning a new Runnable.\n\t* @param config New configuration parameters to attach to the new runnable.\n\t* @returns A new RunnableBinding with a config matching what's passed.\n\t*/\n\twithConfig(config) {\n\t\treturn new RunnableBinding({\n\t\t\tbound: this,\n\t\t\tconfig,\n\t\t\tkwargs: {}\n\t\t});\n\t}\n\t/**\n\t* Create a new runnable from the current one that will try invoking\n\t* other passed fallback runnables if the initial invocation fails.\n\t* @param fields.fallbacks Other runnables to call if the runnable errors.\n\t* @returns A new RunnableWithFallbacks.\n\t*/\n\twithFallbacks(fields) {\n\t\tconst fallbacks = Array.isArray(fields) ? fields : fields.fallbacks;\n\t\treturn new RunnableWithFallbacks({\n\t\t\trunnable: this,\n\t\t\tfallbacks\n\t\t});\n\t}\n\t_getOptionsList(options, length = 0) {\n\t\tif (Array.isArray(options) && options.length !== length) throw new Error(`Passed \"options\" must be an array with the same length as the inputs, but got ${options.length} options for ${length} inputs`);\n\t\tif (Array.isArray(options)) return options.map(_config_js__WEBPACK_IMPORTED_MODULE_4__.ensureConfig);\n\t\tif (length > 1 && !Array.isArray(options) && options.runId) {\n\t\t\tconsole.warn(\"Provided runId will be used only for the first element of the batch.\");\n\t\t\tconst subsequent = Object.fromEntries(Object.entries(options).filter(([key]) => key !== \"runId\"));\n\t\t\treturn Array.from({ length }, (_, i) => (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.ensureConfig)(i === 0 ? options : subsequent));\n\t\t}\n\t\treturn Array.from({ length }, () => (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.ensureConfig)(options));\n\t}\n\tasync batch(inputs, options, batchOptions) {\n\t\tconst configList = this._getOptionsList(options ?? {}, inputs.length);\n\t\tconst maxConcurrency = configList[0]?.maxConcurrency ?? batchOptions?.maxConcurrency;\n\t\tconst caller = new _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_10__.AsyncCaller({\n\t\t\tmaxConcurrency,\n\t\t\tonFailedAttempt: (e) => {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t});\n\t\tconst batchCalls = inputs.map((input, i) => caller.call(async () => {\n\t\t\ttry {\n\t\t\t\tconst result = await this.invoke(input, configList[i]);\n\t\t\t\treturn result;\n\t\t\t} catch (e) {\n\t\t\t\tif (batchOptions?.returnExceptions) return e;\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t}));\n\t\treturn Promise.all(batchCalls);\n\t}\n\t/**\n\t* Default streaming implementation.\n\t* Subclasses should override this method if they support streaming output.\n\t* @param input\n\t* @param options\n\t*/\n\tasync *_streamIterator(input, options) {\n\t\tyield this.invoke(input, options);\n\t}\n\t/**\n\t* Stream output in chunks.\n\t* @param input\n\t* @param options\n\t* @returns A readable stream that is also an iterable.\n\t*/\n\tasync stream(input, options) {\n\t\tconst config = (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.ensureConfig)(options);\n\t\tconst wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_6__.AsyncGeneratorWithSetup({\n\t\t\tgenerator: this._streamIterator(input, config),\n\t\t\tconfig\n\t\t});\n\t\tawait wrappedGenerator.setup;\n\t\treturn _utils_stream_js__WEBPACK_IMPORTED_MODULE_6__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n\t}\n\t_separateRunnableConfigFromCallOptions(options) {\n\t\tlet runnableConfig;\n\t\tif (options === void 0) runnableConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.ensureConfig)(options);\n\t\telse runnableConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.ensureConfig)({\n\t\t\tcallbacks: options.callbacks,\n\t\t\ttags: options.tags,\n\t\t\tmetadata: options.metadata,\n\t\t\trunName: options.runName,\n\t\t\tconfigurable: options.configurable,\n\t\t\trecursionLimit: options.recursionLimit,\n\t\t\tmaxConcurrency: options.maxConcurrency,\n\t\t\trunId: options.runId,\n\t\t\ttimeout: options.timeout,\n\t\t\tsignal: options.signal\n\t\t});\n\t\tconst callOptions = { ...options };\n\t\tdelete callOptions.callbacks;\n\t\tdelete callOptions.tags;\n\t\tdelete callOptions.metadata;\n\t\tdelete callOptions.runName;\n\t\tdelete callOptions.configurable;\n\t\tdelete callOptions.recursionLimit;\n\t\tdelete callOptions.maxConcurrency;\n\t\tdelete callOptions.runId;\n\t\tdelete callOptions.timeout;\n\t\tdelete callOptions.signal;\n\t\treturn [runnableConfig, callOptions];\n\t}\n\tasync _callWithConfig(func, input, options) {\n\t\tconst config = (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.ensureConfig)(options);\n\t\tconst callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.getCallbackManagerForConfig)(config);\n\t\tconst runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), config.runId, config?.runType, void 0, void 0, config?.runName ?? this.getName());\n\t\tdelete config.runId;\n\t\tlet output;\n\t\ttry {\n\t\t\tconst promise = func.call(this, input, config, runManager);\n\t\t\toutput = await (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_5__.raceWithSignal)(promise, options?.signal);\n\t\t} catch (e) {\n\t\t\tawait runManager?.handleChainError(e);\n\t\t\tthrow e;\n\t\t}\n\t\tawait runManager?.handleChainEnd(_coerceToDict(output, \"output\"));\n\t\treturn output;\n\t}\n\t/**\n\t* Internal method that handles batching and configuration for a runnable\n\t* It takes a function, input values, and optional configuration, and\n\t* returns a promise that resolves to the output values.\n\t* @param func The function to be executed for each input value.\n\t* @param input The input values to be processed.\n\t* @param config Optional configuration for the function execution.\n\t* @returns A promise that resolves to the output values.\n\t*/\n\tasync _batchWithConfig(func, inputs, options, batchOptions) {\n\t\tconst optionsList = this._getOptionsList(options ?? {}, inputs.length);\n\t\tconst callbackManagers = await Promise.all(optionsList.map(_config_js__WEBPACK_IMPORTED_MODULE_4__.getCallbackManagerForConfig));\n\t\tconst runManagers = await Promise.all(callbackManagers.map(async (callbackManager, i) => {\n\t\t\tconst handleStartRes = await callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), optionsList[i].runId, optionsList[i].runType, void 0, void 0, optionsList[i].runName ?? this.getName());\n\t\t\tdelete optionsList[i].runId;\n\t\t\treturn handleStartRes;\n\t\t}));\n\t\tlet outputs;\n\t\ttry {\n\t\t\tconst promise = func.call(this, inputs, optionsList, runManagers, batchOptions);\n\t\t\toutputs = await (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_5__.raceWithSignal)(promise, optionsList?.[0]?.signal);\n\t\t} catch (e) {\n\t\t\tawait Promise.all(runManagers.map((runManager) => runManager?.handleChainError(e)));\n\t\t\tthrow e;\n\t\t}\n\t\tawait Promise.all(runManagers.map((runManager) => runManager?.handleChainEnd(_coerceToDict(outputs, \"output\"))));\n\t\treturn outputs;\n\t}\n\t/** @internal */\n\t_concatOutputChunks(first, second) {\n\t\treturn (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_6__.concat)(first, second);\n\t}\n\t/**\n\t* Helper method to transform an Iterator of Input values into an Iterator of\n\t* Output values, with callbacks.\n\t* Use this to implement `stream()` or `transform()` in Runnable subclasses.\n\t*/\n\tasync *_transformStreamWithConfig(inputGenerator, transformer, options) {\n\t\tlet finalInput;\n\t\tlet finalInputSupported = true;\n\t\tlet finalOutput;\n\t\tlet finalOutputSupported = true;\n\t\tconst config = (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.ensureConfig)(options);\n\t\tconst callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.getCallbackManagerForConfig)(config);\n\t\tconst outerThis = this;\n\t\tasync function* wrapInputForTracing() {\n\t\t\tfor await (const chunk of inputGenerator) {\n\t\t\t\tif (finalInputSupported) if (finalInput === void 0) finalInput = chunk;\n\t\t\t\telse try {\n\t\t\t\t\tfinalInput = outerThis._concatOutputChunks(finalInput, chunk);\n\t\t\t\t} catch {\n\t\t\t\t\tfinalInput = void 0;\n\t\t\t\t\tfinalInputSupported = false;\n\t\t\t\t}\n\t\t\t\tyield chunk;\n\t\t\t}\n\t\t}\n\t\tlet runManager;\n\t\ttry {\n\t\t\tconst pipe = await (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_6__.pipeGeneratorWithSetup)(transformer.bind(this), wrapInputForTracing(), async () => callbackManager_?.handleChainStart(this.toJSON(), { input: \"\" }, config.runId, config.runType, void 0, void 0, config.runName ?? this.getName(), void 0, { lc_defers_inputs: true }), options?.signal, config);\n\t\t\tdelete config.runId;\n\t\t\trunManager = pipe.setup;\n\t\t\tconst streamEventsHandler = runManager?.handlers.find(_tracers_event_stream_js__WEBPACK_IMPORTED_MODULE_8__.isStreamEventsHandler);\n\t\t\tlet iterator = pipe.output;\n\t\t\tif (streamEventsHandler !== void 0 && runManager !== void 0) iterator = streamEventsHandler.tapOutputIterable(runManager.runId, iterator);\n\t\t\tconst streamLogHandler = runManager?.handlers.find(_tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_7__.isLogStreamHandler);\n\t\t\tif (streamLogHandler !== void 0 && runManager !== void 0) iterator = streamLogHandler.tapOutputIterable(runManager.runId, iterator);\n\t\t\tfor await (const chunk of iterator) {\n\t\t\t\tyield chunk;\n\t\t\t\tif (finalOutputSupported) if (finalOutput === void 0) finalOutput = chunk;\n\t\t\t\telse try {\n\t\t\t\t\tfinalOutput = this._concatOutputChunks(finalOutput, chunk);\n\t\t\t\t} catch {\n\t\t\t\t\tfinalOutput = void 0;\n\t\t\t\t\tfinalOutputSupported = false;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tawait runManager?.handleChainError(e, void 0, void 0, void 0, { inputs: _coerceToDict(finalInput, \"input\") });\n\t\t\tthrow e;\n\t\t}\n\t\tawait runManager?.handleChainEnd(finalOutput ?? {}, void 0, void 0, void 0, { inputs: _coerceToDict(finalInput, \"input\") });\n\t}\n\tgetGraph(_) {\n\t\tconst graph = new _graph_js__WEBPACK_IMPORTED_MODULE_14__.Graph();\n\t\tconst inputNode = graph.addNode({\n\t\t\tname: `${this.getName()}Input`,\n\t\t\tschema: zod_v3__WEBPACK_IMPORTED_MODULE_17__.z.any()\n\t\t});\n\t\tconst runnableNode = graph.addNode(this);\n\t\tconst outputNode = graph.addNode({\n\t\t\tname: `${this.getName()}Output`,\n\t\t\tschema: zod_v3__WEBPACK_IMPORTED_MODULE_17__.z.any()\n\t\t});\n\t\tgraph.addEdge(inputNode, runnableNode);\n\t\tgraph.addEdge(runnableNode, outputNode);\n\t\treturn graph;\n\t}\n\t/**\n\t* Create a new runnable sequence that runs each individual runnable in series,\n\t* piping the output of one runnable into another runnable or runnable-like.\n\t* @param coerceable A runnable, function, or object whose values are functions or runnables.\n\t* @returns A new runnable sequence.\n\t*/\n\tpipe(coerceable) {\n\t\treturn new RunnableSequence({\n\t\t\tfirst: this,\n\t\t\tlast: _coerceToRunnable(coerceable)\n\t\t});\n\t}\n\t/**\n\t* Pick keys from the dict output of this runnable. Returns a new runnable.\n\t*/\n\tpick(keys) {\n\t\treturn this.pipe(new RunnablePick(keys));\n\t}\n\t/**\n\t* Assigns new fields to the dict output of this runnable. Returns a new runnable.\n\t*/\n\tassign(mapping) {\n\t\treturn this.pipe(new RunnableAssign(new RunnableMap({ steps: mapping })));\n\t}\n\t/**\n\t* Default implementation of transform, which buffers input and then calls stream.\n\t* Subclasses should override this method if they can start producing output while\n\t* input is still being generated.\n\t* @param generator\n\t* @param options\n\t*/\n\tasync *transform(generator, options) {\n\t\tlet finalChunk;\n\t\tfor await (const chunk of generator) if (finalChunk === void 0) finalChunk = chunk;\n\t\telse finalChunk = this._concatOutputChunks(finalChunk, chunk);\n\t\tyield* this._streamIterator(finalChunk, (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.ensureConfig)(options));\n\t}\n\t/**\n\t* Stream all output from a runnable, as reported to the callback system.\n\t* This includes all inner runs of LLMs, Retrievers, Tools, etc.\n\t* Output is streamed as Log objects, which include a list of\n\t* jsonpatch ops that describe how the state of the run has changed in each\n\t* step, and the final state of the run.\n\t* The jsonpatch ops can be applied in order to construct state.\n\t* @param input\n\t* @param options\n\t* @param streamOptions\n\t*/\n\tasync *streamLog(input, options, streamOptions) {\n\t\tconst logStreamCallbackHandler = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_7__.LogStreamCallbackHandler({\n\t\t\t...streamOptions,\n\t\t\tautoClose: false,\n\t\t\t_schemaFormat: \"original\"\n\t\t});\n\t\tconst config = (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.ensureConfig)(options);\n\t\tyield* this._streamLog(input, logStreamCallbackHandler, config);\n\t}\n\tasync *_streamLog(input, logStreamCallbackHandler, config) {\n\t\tconst { callbacks } = config;\n\t\tif (callbacks === void 0) config.callbacks = [logStreamCallbackHandler];\n\t\telse if (Array.isArray(callbacks)) config.callbacks = callbacks.concat([logStreamCallbackHandler]);\n\t\telse {\n\t\t\tconst copiedCallbacks = callbacks.copy();\n\t\t\tcopiedCallbacks.addHandler(logStreamCallbackHandler, true);\n\t\t\tconfig.callbacks = copiedCallbacks;\n\t\t}\n\t\tconst runnableStreamPromise = this.stream(input, config);\n\t\tasync function consumeRunnableStream() {\n\t\t\ttry {\n\t\t\t\tconst runnableStream = await runnableStreamPromise;\n\t\t\t\tfor await (const chunk of runnableStream) {\n\t\t\t\t\tconst patch = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_7__.RunLogPatch({ ops: [{\n\t\t\t\t\t\top: \"add\",\n\t\t\t\t\t\tpath: \"/streamed_output/-\",\n\t\t\t\t\t\tvalue: chunk\n\t\t\t\t\t}] });\n\t\t\t\t\tawait logStreamCallbackHandler.writer.write(patch);\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tawait logStreamCallbackHandler.writer.close();\n\t\t\t}\n\t\t}\n\t\tconst runnableStreamConsumePromise = consumeRunnableStream();\n\t\ttry {\n\t\t\tfor await (const log of logStreamCallbackHandler) yield log;\n\t\t} finally {\n\t\t\tawait runnableStreamConsumePromise;\n\t\t}\n\t}\n\tstreamEvents(input, options, streamOptions) {\n\t\tlet stream;\n\t\tif (options.version === \"v1\") stream = this._streamEventsV1(input, options, streamOptions);\n\t\telse if (options.version === \"v2\") stream = this._streamEventsV2(input, options, streamOptions);\n\t\telse throw new Error(`Only versions \"v1\" and \"v2\" of the schema are currently supported.`);\n\t\tif (options.encoding === \"text/event-stream\") return (0,_wrappers_js__WEBPACK_IMPORTED_MODULE_15__.convertToHttpEventStream)(stream);\n\t\telse return _utils_stream_js__WEBPACK_IMPORTED_MODULE_6__.IterableReadableStream.fromAsyncGenerator(stream);\n\t}\n\tasync *_streamEventsV2(input, options, streamOptions) {\n\t\tconst eventStreamer = new _tracers_event_stream_js__WEBPACK_IMPORTED_MODULE_8__.EventStreamCallbackHandler({\n\t\t\t...streamOptions,\n\t\t\tautoClose: false\n\t\t});\n\t\tconst config = (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.ensureConfig)(options);\n\t\tconst runId = config.runId ?? (0,uuid__WEBPACK_IMPORTED_MODULE_19__[\"default\"])();\n\t\tconfig.runId = runId;\n\t\tconst callbacks = config.callbacks;\n\t\tif (callbacks === void 0) config.callbacks = [eventStreamer];\n\t\telse if (Array.isArray(callbacks)) config.callbacks = callbacks.concat(eventStreamer);\n\t\telse {\n\t\t\tconst copiedCallbacks = callbacks.copy();\n\t\t\tcopiedCallbacks.addHandler(eventStreamer, true);\n\t\t\tconfig.callbacks = copiedCallbacks;\n\t\t}\n\t\tconst abortController = new AbortController();\n\t\tconst outerThis = this;\n\t\tasync function consumeRunnableStream() {\n\t\t\tlet signal;\n\t\t\tlet listener = null;\n\t\t\ttry {\n\t\t\t\tif (options?.signal) if (\"any\" in AbortSignal) signal = AbortSignal.any([abortController.signal, options.signal]);\n\t\t\t\telse {\n\t\t\t\t\tsignal = options.signal;\n\t\t\t\t\tlistener = () => {\n\t\t\t\t\t\tabortController.abort();\n\t\t\t\t\t};\n\t\t\t\t\toptions.signal.addEventListener(\"abort\", listener, { once: true });\n\t\t\t\t}\n\t\t\t\telse signal = abortController.signal;\n\t\t\t\tconst runnableStream = await outerThis.stream(input, {\n\t\t\t\t\t...config,\n\t\t\t\t\tsignal\n\t\t\t\t});\n\t\t\t\tconst tappedStream = eventStreamer.tapOutputIterable(runId, runnableStream);\n\t\t\t\tfor await (const _ of tappedStream) if (abortController.signal.aborted) break;\n\t\t\t} finally {\n\t\t\t\tawait eventStreamer.finish();\n\t\t\t\tif (signal && listener) signal.removeEventListener(\"abort\", listener);\n\t\t\t}\n\t\t}\n\t\tconst runnableStreamConsumePromise = consumeRunnableStream();\n\t\tlet firstEventSent = false;\n\t\tlet firstEventRunId;\n\t\ttry {\n\t\t\tfor await (const event of eventStreamer) {\n\t\t\t\tif (!firstEventSent) {\n\t\t\t\t\tevent.data.input = input;\n\t\t\t\t\tfirstEventSent = true;\n\t\t\t\t\tfirstEventRunId = event.run_id;\n\t\t\t\t\tyield event;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (event.run_id === firstEventRunId && event.event.endsWith(\"_end\")) {\n\t\t\t\t\tif (event.data?.input) delete event.data.input;\n\t\t\t\t}\n\t\t\t\tyield event;\n\t\t\t}\n\t\t} finally {\n\t\t\tabortController.abort();\n\t\t\tawait runnableStreamConsumePromise;\n\t\t}\n\t}\n\tasync *_streamEventsV1(input, options, streamOptions) {\n\t\tlet runLog;\n\t\tlet hasEncounteredStartEvent = false;\n\t\tconst config = (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.ensureConfig)(options);\n\t\tconst rootTags = config.tags ?? [];\n\t\tconst rootMetadata = config.metadata ?? {};\n\t\tconst rootName = config.runName ?? this.getName();\n\t\tconst logStreamCallbackHandler = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_7__.LogStreamCallbackHandler({\n\t\t\t...streamOptions,\n\t\t\tautoClose: false,\n\t\t\t_schemaFormat: \"streaming_events\"\n\t\t});\n\t\tconst rootEventFilter = new _utils_js__WEBPACK_IMPORTED_MODULE_12__._RootEventFilter({ ...streamOptions });\n\t\tconst logStream = this._streamLog(input, logStreamCallbackHandler, config);\n\t\tfor await (const log of logStream) {\n\t\t\tif (!runLog) runLog = _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_7__.RunLog.fromRunLogPatch(log);\n\t\t\telse runLog = runLog.concat(log);\n\t\t\tif (runLog.state === void 0) throw new Error(`Internal error: \"streamEvents\" state is missing. Please open a bug report.`);\n\t\t\tif (!hasEncounteredStartEvent) {\n\t\t\t\thasEncounteredStartEvent = true;\n\t\t\t\tconst state$2 = { ...runLog.state };\n\t\t\t\tconst event = {\n\t\t\t\t\trun_id: state$2.id,\n\t\t\t\t\tevent: `on_${state$2.type}_start`,\n\t\t\t\t\tname: rootName,\n\t\t\t\t\ttags: rootTags,\n\t\t\t\t\tmetadata: rootMetadata,\n\t\t\t\t\tdata: { input }\n\t\t\t\t};\n\t\t\t\tif (rootEventFilter.includeEvent(event, state$2.type)) yield event;\n\t\t\t}\n\t\t\tconst paths = log.ops.filter((op) => op.path.startsWith(\"/logs/\")).map((op) => op.path.split(\"/\")[2]);\n\t\t\tconst dedupedPaths = [...new Set(paths)];\n\t\t\tfor (const path of dedupedPaths) {\n\t\t\t\tlet eventType;\n\t\t\t\tlet data = {};\n\t\t\t\tconst logEntry = runLog.state.logs[path];\n\t\t\t\tif (logEntry.end_time === void 0) if (logEntry.streamed_output.length > 0) eventType = \"stream\";\n\t\t\t\telse eventType = \"start\";\n\t\t\t\telse eventType = \"end\";\n\t\t\t\tif (eventType === \"start\") {\n\t\t\t\t\tif (logEntry.inputs !== void 0) data.input = logEntry.inputs;\n\t\t\t\t} else if (eventType === \"end\") {\n\t\t\t\t\tif (logEntry.inputs !== void 0) data.input = logEntry.inputs;\n\t\t\t\t\tdata.output = logEntry.final_output;\n\t\t\t\t} else if (eventType === \"stream\") {\n\t\t\t\t\tconst chunkCount = logEntry.streamed_output.length;\n\t\t\t\t\tif (chunkCount !== 1) throw new Error(`Expected exactly one chunk of streamed output, got ${chunkCount} instead. Encountered in: \"${logEntry.name}\"`);\n\t\t\t\t\tdata = { chunk: logEntry.streamed_output[0] };\n\t\t\t\t\tlogEntry.streamed_output = [];\n\t\t\t\t}\n\t\t\t\tyield {\n\t\t\t\t\tevent: `on_${logEntry.type}_${eventType}`,\n\t\t\t\t\tname: logEntry.name,\n\t\t\t\t\trun_id: logEntry.id,\n\t\t\t\t\ttags: logEntry.tags,\n\t\t\t\t\tmetadata: logEntry.metadata,\n\t\t\t\t\tdata\n\t\t\t\t};\n\t\t\t}\n\t\t\tconst { state: state$1 } = runLog;\n\t\t\tif (state$1.streamed_output.length > 0) {\n\t\t\t\tconst chunkCount = state$1.streamed_output.length;\n\t\t\t\tif (chunkCount !== 1) throw new Error(`Expected exactly one chunk of streamed output, got ${chunkCount} instead. Encountered in: \"${state$1.name}\"`);\n\t\t\t\tconst data = { chunk: state$1.streamed_output[0] };\n\t\t\t\tstate$1.streamed_output = [];\n\t\t\t\tconst event = {\n\t\t\t\t\tevent: `on_${state$1.type}_stream`,\n\t\t\t\t\trun_id: state$1.id,\n\t\t\t\t\ttags: rootTags,\n\t\t\t\t\tmetadata: rootMetadata,\n\t\t\t\t\tname: rootName,\n\t\t\t\t\tdata\n\t\t\t\t};\n\t\t\t\tif (rootEventFilter.includeEvent(event, state$1.type)) yield event;\n\t\t\t}\n\t\t}\n\t\tconst state = runLog?.state;\n\t\tif (state !== void 0) {\n\t\t\tconst event = {\n\t\t\t\tevent: `on_${state.type}_end`,\n\t\t\t\tname: rootName,\n\t\t\t\trun_id: state.id,\n\t\t\t\ttags: rootTags,\n\t\t\t\tmetadata: rootMetadata,\n\t\t\t\tdata: { output: state.final_output }\n\t\t\t};\n\t\t\tif (rootEventFilter.includeEvent(event, state.type)) yield event;\n\t\t}\n\t}\n\tstatic isRunnable(thing) {\n\t\treturn (0,_utils_js__WEBPACK_IMPORTED_MODULE_12__.isRunnableInterface)(thing);\n\t}\n\t/**\n\t* Bind lifecycle listeners to a Runnable, returning a new Runnable.\n\t* The Run object contains information about the run, including its id,\n\t* type, input, output, error, startTime, endTime, and any tags or metadata\n\t* added to the run.\n\t*\n\t* @param {Object} params - The object containing the callback functions.\n\t* @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n\t* @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n\t* @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n\t*/\n\twithListeners({ onStart, onEnd, onError }) {\n\t\treturn new RunnableBinding({\n\t\t\tbound: this,\n\t\t\tconfig: {},\n\t\t\tconfigFactories: [(config) => ({ callbacks: [new _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_11__.RootListenersTracer({\n\t\t\t\tconfig,\n\t\t\t\tonStart,\n\t\t\t\tonEnd,\n\t\t\t\tonError\n\t\t\t})] })]\n\t\t});\n\t}\n\t/**\n\t* Convert a runnable to a tool. Return a new instance of `RunnableToolLike`\n\t* which contains the runnable, name, description and schema.\n\t*\n\t* @template {T extends RunInput = RunInput} RunInput - The input type of the runnable. Should be the same as the `RunInput` type of the runnable.\n\t*\n\t* @param fields\n\t* @param {string | undefined} [fields.name] The name of the tool. If not provided, it will default to the name of the runnable.\n\t* @param {string | undefined} [fields.description] The description of the tool. Falls back to the description on the Zod schema if not provided, or undefined if neither are provided.\n\t* @param {z.ZodType<T>} [fields.schema] The Zod schema for the input of the tool. Infers the Zod type from the input type of the runnable.\n\t* @returns {RunnableToolLike<z.ZodType<T>, RunOutput>} An instance of `RunnableToolLike` which is a runnable that can be used as a tool.\n\t*/\n\tasTool(fields) {\n\t\treturn convertRunnableToTool(this, fields);\n\t}\n};\n/**\n* Wraps a runnable and applies partial config upon invocation.\n*\n* @example\n* ```typescript\n* import {\n*   type RunnableConfig,\n*   RunnableLambda,\n* } from \"@langchain/core/runnables\";\n*\n* const enhanceProfile = (\n*   profile: Record<string, any>,\n*   config?: RunnableConfig\n* ) => {\n*   if (config?.configurable?.role) {\n*     return { ...profile, role: config.configurable.role };\n*   }\n*   return profile;\n* };\n*\n* const runnable = RunnableLambda.from(enhanceProfile);\n*\n* // Bind configuration to the runnable to set the user's role dynamically\n* const adminRunnable = runnable.withConfig({ configurable: { role: \"Admin\" } });\n* const userRunnable = runnable.withConfig({ configurable: { role: \"User\" } });\n*\n* const result1 = await adminRunnable.invoke({\n*   name: \"Alice\",\n*   email: \"alice@example.com\"\n* });\n*\n* // { name: \"Alice\", email: \"alice@example.com\", role: \"Admin\" }\n*\n* const result2 = await userRunnable.invoke({\n*   name: \"Bob\",\n*   email: \"bob@example.com\"\n* });\n*\n* // { name: \"Bob\", email: \"bob@example.com\", role: \"User\" }\n* ```\n*/\nvar RunnableBinding = class RunnableBinding extends Runnable {\n\tstatic lc_name() {\n\t\treturn \"RunnableBinding\";\n\t}\n\tlc_namespace = [\"langchain_core\", \"runnables\"];\n\tlc_serializable = true;\n\tbound;\n\tconfig;\n\tkwargs;\n\tconfigFactories;\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.bound = fields.bound;\n\t\tthis.kwargs = fields.kwargs;\n\t\tthis.config = fields.config;\n\t\tthis.configFactories = fields.configFactories;\n\t}\n\tgetName(suffix) {\n\t\treturn this.bound.getName(suffix);\n\t}\n\tasync _mergeConfig(...options) {\n\t\tconst config = (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.mergeConfigs)(this.config, ...options);\n\t\treturn (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.mergeConfigs)(config, ...this.configFactories ? await Promise.all(this.configFactories.map(async (configFactory) => await configFactory(config))) : []);\n\t}\n\twithConfig(config) {\n\t\treturn new this.constructor({\n\t\t\tbound: this.bound,\n\t\t\tkwargs: this.kwargs,\n\t\t\tconfig: {\n\t\t\t\t...this.config,\n\t\t\t\t...config\n\t\t\t}\n\t\t});\n\t}\n\twithRetry(fields) {\n\t\treturn new RunnableRetry({\n\t\t\tbound: this.bound,\n\t\t\tkwargs: this.kwargs,\n\t\t\tconfig: this.config,\n\t\t\tmaxAttemptNumber: fields?.stopAfterAttempt,\n\t\t\t...fields\n\t\t});\n\t}\n\tasync invoke(input, options) {\n\t\treturn this.bound.invoke(input, await this._mergeConfig(options, this.kwargs));\n\t}\n\tasync batch(inputs, options, batchOptions) {\n\t\tconst mergedOptions = Array.isArray(options) ? await Promise.all(options.map(async (individualOption) => this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_4__.ensureConfig)(individualOption), this.kwargs))) : await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_4__.ensureConfig)(options), this.kwargs);\n\t\treturn this.bound.batch(inputs, mergedOptions, batchOptions);\n\t}\n\t/** @internal */\n\t_concatOutputChunks(first, second) {\n\t\treturn this.bound._concatOutputChunks(first, second);\n\t}\n\tasync *_streamIterator(input, options) {\n\t\tyield* this.bound._streamIterator(input, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_4__.ensureConfig)(options), this.kwargs));\n\t}\n\tasync stream(input, options) {\n\t\treturn this.bound.stream(input, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_4__.ensureConfig)(options), this.kwargs));\n\t}\n\tasync *transform(generator, options) {\n\t\tyield* this.bound.transform(generator, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_4__.ensureConfig)(options), this.kwargs));\n\t}\n\tstreamEvents(input, options, streamOptions) {\n\t\tconst outerThis = this;\n\t\tconst generator = async function* () {\n\t\t\tyield* outerThis.bound.streamEvents(input, {\n\t\t\t\t...await outerThis._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_4__.ensureConfig)(options), outerThis.kwargs),\n\t\t\t\tversion: options.version\n\t\t\t}, streamOptions);\n\t\t};\n\t\treturn _utils_stream_js__WEBPACK_IMPORTED_MODULE_6__.IterableReadableStream.fromAsyncGenerator(generator());\n\t}\n\tstatic isRunnableBinding(thing) {\n\t\treturn thing.bound && Runnable.isRunnable(thing.bound);\n\t}\n\t/**\n\t* Bind lifecycle listeners to a Runnable, returning a new Runnable.\n\t* The Run object contains information about the run, including its id,\n\t* type, input, output, error, startTime, endTime, and any tags or metadata\n\t* added to the run.\n\t*\n\t* @param {Object} params - The object containing the callback functions.\n\t* @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n\t* @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n\t* @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n\t*/\n\twithListeners({ onStart, onEnd, onError }) {\n\t\treturn new RunnableBinding({\n\t\t\tbound: this.bound,\n\t\t\tkwargs: this.kwargs,\n\t\t\tconfig: this.config,\n\t\t\tconfigFactories: [(config) => ({ callbacks: [new _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_11__.RootListenersTracer({\n\t\t\t\tconfig,\n\t\t\t\tonStart,\n\t\t\t\tonEnd,\n\t\t\t\tonError\n\t\t\t})] })]\n\t\t});\n\t}\n};\n/**\n* A runnable that delegates calls to another runnable\n* with each element of the input sequence.\n* @example\n* ```typescript\n* import { RunnableEach, RunnableLambda } from \"@langchain/core/runnables\";\n*\n* const toUpperCase = (input: string): string => input.toUpperCase();\n* const addGreeting = (input: string): string => `Hello, ${input}!`;\n*\n* const upperCaseLambda = RunnableLambda.from(toUpperCase);\n* const greetingLambda = RunnableLambda.from(addGreeting);\n*\n* const chain = new RunnableEach({\n*   bound: upperCaseLambda.pipe(greetingLambda),\n* });\n*\n* const result = await chain.invoke([\"alice\", \"bob\", \"carol\"])\n*\n* // [\"Hello, ALICE!\", \"Hello, BOB!\", \"Hello, CAROL!\"]\n* ```\n*/\nvar RunnableEach = class RunnableEach extends Runnable {\n\tstatic lc_name() {\n\t\treturn \"RunnableEach\";\n\t}\n\tlc_serializable = true;\n\tlc_namespace = [\"langchain_core\", \"runnables\"];\n\tbound;\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.bound = fields.bound;\n\t}\n\t/**\n\t* Invokes the runnable with the specified input and configuration.\n\t* @param input The input to invoke the runnable with.\n\t* @param config The configuration to invoke the runnable with.\n\t* @returns A promise that resolves to the output of the runnable.\n\t*/\n\tasync invoke(inputs, config) {\n\t\treturn this._callWithConfig(this._invoke.bind(this), inputs, config);\n\t}\n\t/**\n\t* A helper method that is used to invoke the runnable with the specified input and configuration.\n\t* @param input The input to invoke the runnable with.\n\t* @param config The configuration to invoke the runnable with.\n\t* @returns A promise that resolves to the output of the runnable.\n\t*/\n\tasync _invoke(inputs, config, runManager) {\n\t\treturn this.bound.batch(inputs, (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.patchConfig)(config, { callbacks: runManager?.getChild() }));\n\t}\n\t/**\n\t* Bind lifecycle listeners to a Runnable, returning a new Runnable.\n\t* The Run object contains information about the run, including its id,\n\t* type, input, output, error, startTime, endTime, and any tags or metadata\n\t* added to the run.\n\t*\n\t* @param {Object} params - The object containing the callback functions.\n\t* @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n\t* @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n\t* @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n\t*/\n\twithListeners({ onStart, onEnd, onError }) {\n\t\treturn new RunnableEach({ bound: this.bound.withListeners({\n\t\t\tonStart,\n\t\t\tonEnd,\n\t\t\tonError\n\t\t}) });\n\t}\n};\n/**\n* Base class for runnables that can be retried a\n* specified number of times.\n* @example\n* ```typescript\n* import {\n*   RunnableLambda,\n*   RunnableRetry,\n* } from \"@langchain/core/runnables\";\n*\n* // Simulate an API call that fails\n* const simulateApiCall = (input: string): string => {\n*   console.log(`Attempting API call with input: ${input}`);\n*   throw new Error(\"API call failed due to network issue\");\n* };\n*\n* const apiCallLambda = RunnableLambda.from(simulateApiCall);\n*\n* // Apply retry logic using the .withRetry() method\n* const apiCallWithRetry = apiCallLambda.withRetry({ stopAfterAttempt: 3 });\n*\n* // Alternatively, create a RunnableRetry instance manually\n* const manualRetry = new RunnableRetry({\n*   bound: apiCallLambda,\n*   maxAttemptNumber: 3,\n*   config: {},\n* });\n*\n* // Example invocation using the .withRetry() method\n* const res = await apiCallWithRetry\n*   .invoke(\"Request 1\")\n*   .catch((error) => {\n*     console.error(\"Failed after multiple retries:\", error.message);\n*   });\n*\n* // Example invocation using the manual retry instance\n* const res2 = await manualRetry\n*   .invoke(\"Request 2\")\n*   .catch((error) => {\n*     console.error(\"Failed after multiple retries:\", error.message);\n*   });\n* ```\n*/\nvar RunnableRetry = class extends RunnableBinding {\n\tstatic lc_name() {\n\t\treturn \"RunnableRetry\";\n\t}\n\tlc_namespace = [\"langchain_core\", \"runnables\"];\n\tmaxAttemptNumber = 3;\n\tonFailedAttempt = () => {};\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.maxAttemptNumber = fields.maxAttemptNumber ?? this.maxAttemptNumber;\n\t\tthis.onFailedAttempt = fields.onFailedAttempt ?? this.onFailedAttempt;\n\t}\n\t_patchConfigForRetry(attempt, config, runManager) {\n\t\tconst tag = attempt > 1 ? `retry:attempt:${attempt}` : void 0;\n\t\treturn (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.patchConfig)(config, { callbacks: runManager?.getChild(tag) });\n\t}\n\tasync _invoke(input, config, runManager) {\n\t\treturn (0,_utils_p_retry_index_js__WEBPACK_IMPORTED_MODULE_9__.pRetry)((attemptNumber) => super.invoke(input, this._patchConfigForRetry(attemptNumber, config, runManager)), {\n\t\t\tonFailedAttempt: ({ error }) => this.onFailedAttempt(error, input),\n\t\t\tretries: Math.max(this.maxAttemptNumber - 1, 0),\n\t\t\trandomize: true\n\t\t});\n\t}\n\t/**\n\t* Method that invokes the runnable with the specified input, run manager,\n\t* and config. It handles the retry logic by catching any errors and\n\t* recursively invoking itself with the updated config for the next retry\n\t* attempt.\n\t* @param input The input for the runnable.\n\t* @param runManager The run manager for the runnable.\n\t* @param config The config for the runnable.\n\t* @returns A promise that resolves to the output of the runnable.\n\t*/\n\tasync invoke(input, config) {\n\t\treturn this._callWithConfig(this._invoke.bind(this), input, config);\n\t}\n\tasync _batch(inputs, configs, runManagers, batchOptions) {\n\t\tconst resultsMap = {};\n\t\ttry {\n\t\t\tawait (0,_utils_p_retry_index_js__WEBPACK_IMPORTED_MODULE_9__.pRetry)(async (attemptNumber) => {\n\t\t\t\tconst remainingIndexes = inputs.map((_, i) => i).filter((i) => resultsMap[i.toString()] === void 0 || resultsMap[i.toString()] instanceof Error);\n\t\t\t\tconst remainingInputs = remainingIndexes.map((i) => inputs[i]);\n\t\t\t\tconst patchedConfigs = remainingIndexes.map((i) => this._patchConfigForRetry(attemptNumber, configs?.[i], runManagers?.[i]));\n\t\t\t\tconst results = await super.batch(remainingInputs, patchedConfigs, {\n\t\t\t\t\t...batchOptions,\n\t\t\t\t\treturnExceptions: true\n\t\t\t\t});\n\t\t\t\tlet firstException;\n\t\t\t\tfor (let i = 0; i < results.length; i += 1) {\n\t\t\t\t\tconst result = results[i];\n\t\t\t\t\tconst resultMapIndex = remainingIndexes[i];\n\t\t\t\t\tif (result instanceof Error) {\n\t\t\t\t\t\tif (firstException === void 0) {\n\t\t\t\t\t\t\tfirstException = result;\n\t\t\t\t\t\t\tfirstException.input = remainingInputs[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tresultsMap[resultMapIndex.toString()] = result;\n\t\t\t\t}\n\t\t\t\tif (firstException) throw firstException;\n\t\t\t\treturn results;\n\t\t\t}, {\n\t\t\t\tonFailedAttempt: ({ error }) => this.onFailedAttempt(error, error.input),\n\t\t\t\tretries: Math.max(this.maxAttemptNumber - 1, 0),\n\t\t\t\trandomize: true\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tif (batchOptions?.returnExceptions !== true) throw e;\n\t\t}\n\t\treturn Object.keys(resultsMap).sort((a, b) => parseInt(a, 10) - parseInt(b, 10)).map((key) => resultsMap[parseInt(key, 10)]);\n\t}\n\tasync batch(inputs, options, batchOptions) {\n\t\treturn this._batchWithConfig(this._batch.bind(this), inputs, options, batchOptions);\n\t}\n};\n/**\n* A sequence of runnables, where the output of each is the input of the next.\n* @example\n* ```typescript\n* const promptTemplate = PromptTemplate.fromTemplate(\n*   \"Tell me a joke about {topic}\",\n* );\n* const chain = RunnableSequence.from([promptTemplate, new ChatOpenAI({ model: \"gpt-4o-mini\" })]);\n* const result = await chain.invoke({ topic: \"bears\" });\n* ```\n*/\nvar RunnableSequence = class RunnableSequence extends Runnable {\n\tstatic lc_name() {\n\t\treturn \"RunnableSequence\";\n\t}\n\tfirst;\n\tmiddle = [];\n\tlast;\n\tomitSequenceTags = false;\n\tlc_serializable = true;\n\tlc_namespace = [\"langchain_core\", \"runnables\"];\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.first = fields.first;\n\t\tthis.middle = fields.middle ?? this.middle;\n\t\tthis.last = fields.last;\n\t\tthis.name = fields.name;\n\t\tthis.omitSequenceTags = fields.omitSequenceTags ?? this.omitSequenceTags;\n\t}\n\tget steps() {\n\t\treturn [\n\t\t\tthis.first,\n\t\t\t...this.middle,\n\t\t\tthis.last\n\t\t];\n\t}\n\tasync invoke(input, options) {\n\t\tconst config = (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.ensureConfig)(options);\n\t\tconst callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.getCallbackManagerForConfig)(config);\n\t\tconst runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), config.runId, void 0, void 0, void 0, config?.runName);\n\t\tdelete config.runId;\n\t\tlet nextStepInput = input;\n\t\tlet finalOutput;\n\t\ttry {\n\t\t\tconst initialSteps = [this.first, ...this.middle];\n\t\t\tfor (let i = 0; i < initialSteps.length; i += 1) {\n\t\t\t\tconst step = initialSteps[i];\n\t\t\t\tconst promise = step.invoke(nextStepInput, (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.patchConfig)(config, { callbacks: runManager?.getChild(this.omitSequenceTags ? void 0 : `seq:step:${i + 1}`) }));\n\t\t\t\tnextStepInput = await (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_5__.raceWithSignal)(promise, options?.signal);\n\t\t\t}\n\t\t\tif (options?.signal?.aborted) throw (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_5__.getAbortSignalError)(options.signal);\n\t\t\tfinalOutput = await this.last.invoke(nextStepInput, (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.patchConfig)(config, { callbacks: runManager?.getChild(this.omitSequenceTags ? void 0 : `seq:step:${this.steps.length}`) }));\n\t\t} catch (e) {\n\t\t\tawait runManager?.handleChainError(e);\n\t\t\tthrow e;\n\t\t}\n\t\tawait runManager?.handleChainEnd(_coerceToDict(finalOutput, \"output\"));\n\t\treturn finalOutput;\n\t}\n\tasync batch(inputs, options, batchOptions) {\n\t\tconst configList = this._getOptionsList(options ?? {}, inputs.length);\n\t\tconst callbackManagers = await Promise.all(configList.map(_config_js__WEBPACK_IMPORTED_MODULE_4__.getCallbackManagerForConfig));\n\t\tconst runManagers = await Promise.all(callbackManagers.map(async (callbackManager, i) => {\n\t\t\tconst handleStartRes = await callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), configList[i].runId, void 0, void 0, void 0, configList[i].runName);\n\t\t\tdelete configList[i].runId;\n\t\t\treturn handleStartRes;\n\t\t}));\n\t\tlet nextStepInputs = inputs;\n\t\ttry {\n\t\t\tfor (let i = 0; i < this.steps.length; i += 1) {\n\t\t\t\tconst step = this.steps[i];\n\t\t\t\tconst promise = step.batch(nextStepInputs, runManagers.map((runManager, j) => {\n\t\t\t\t\tconst childRunManager = runManager?.getChild(this.omitSequenceTags ? void 0 : `seq:step:${i + 1}`);\n\t\t\t\t\treturn (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.patchConfig)(configList[j], { callbacks: childRunManager });\n\t\t\t\t}), batchOptions);\n\t\t\t\tnextStepInputs = await (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_5__.raceWithSignal)(promise, configList[0]?.signal);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tawait Promise.all(runManagers.map((runManager) => runManager?.handleChainError(e)));\n\t\t\tthrow e;\n\t\t}\n\t\tawait Promise.all(runManagers.map((runManager) => runManager?.handleChainEnd(_coerceToDict(nextStepInputs, \"output\"))));\n\t\treturn nextStepInputs;\n\t}\n\t/** @internal */\n\t_concatOutputChunks(first, second) {\n\t\treturn this.last._concatOutputChunks(first, second);\n\t}\n\tasync *_streamIterator(input, options) {\n\t\tconst callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.getCallbackManagerForConfig)(options);\n\t\tconst { runId,...otherOptions } = options ?? {};\n\t\tconst runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), runId, void 0, void 0, void 0, otherOptions?.runName);\n\t\tconst steps = [\n\t\t\tthis.first,\n\t\t\t...this.middle,\n\t\t\tthis.last\n\t\t];\n\t\tlet concatSupported = true;\n\t\tlet finalOutput;\n\t\tasync function* inputGenerator() {\n\t\t\tyield input;\n\t\t}\n\t\ttry {\n\t\t\tlet finalGenerator = steps[0].transform(inputGenerator(), (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.patchConfig)(otherOptions, { callbacks: runManager?.getChild(this.omitSequenceTags ? void 0 : `seq:step:1`) }));\n\t\t\tfor (let i = 1; i < steps.length; i += 1) {\n\t\t\t\tconst step = steps[i];\n\t\t\t\tfinalGenerator = await step.transform(finalGenerator, (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.patchConfig)(otherOptions, { callbacks: runManager?.getChild(this.omitSequenceTags ? void 0 : `seq:step:${i + 1}`) }));\n\t\t\t}\n\t\t\tfor await (const chunk of finalGenerator) {\n\t\t\t\toptions?.signal?.throwIfAborted();\n\t\t\t\tyield chunk;\n\t\t\t\tif (concatSupported) if (finalOutput === void 0) finalOutput = chunk;\n\t\t\t\telse try {\n\t\t\t\t\tfinalOutput = this._concatOutputChunks(finalOutput, chunk);\n\t\t\t\t} catch {\n\t\t\t\t\tfinalOutput = void 0;\n\t\t\t\t\tconcatSupported = false;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tawait runManager?.handleChainError(e);\n\t\t\tthrow e;\n\t\t}\n\t\tawait runManager?.handleChainEnd(_coerceToDict(finalOutput, \"output\"));\n\t}\n\tgetGraph(config) {\n\t\tconst graph = new _graph_js__WEBPACK_IMPORTED_MODULE_14__.Graph();\n\t\tlet currentLastNode = null;\n\t\tthis.steps.forEach((step, index) => {\n\t\t\tconst stepGraph = step.getGraph(config);\n\t\t\tif (index !== 0) stepGraph.trimFirstNode();\n\t\t\tif (index !== this.steps.length - 1) stepGraph.trimLastNode();\n\t\t\tgraph.extend(stepGraph);\n\t\t\tconst stepFirstNode = stepGraph.firstNode();\n\t\t\tif (!stepFirstNode) throw new Error(`Runnable ${step} has no first node`);\n\t\t\tif (currentLastNode) graph.addEdge(currentLastNode, stepFirstNode);\n\t\t\tcurrentLastNode = stepGraph.lastNode();\n\t\t});\n\t\treturn graph;\n\t}\n\tpipe(coerceable) {\n\t\tif (RunnableSequence.isRunnableSequence(coerceable)) return new RunnableSequence({\n\t\t\tfirst: this.first,\n\t\t\tmiddle: this.middle.concat([\n\t\t\t\tthis.last,\n\t\t\t\tcoerceable.first,\n\t\t\t\t...coerceable.middle\n\t\t\t]),\n\t\t\tlast: coerceable.last,\n\t\t\tname: this.name ?? coerceable.name\n\t\t});\n\t\telse return new RunnableSequence({\n\t\t\tfirst: this.first,\n\t\t\tmiddle: [...this.middle, this.last],\n\t\t\tlast: _coerceToRunnable(coerceable),\n\t\t\tname: this.name\n\t\t});\n\t}\n\tstatic isRunnableSequence(thing) {\n\t\treturn Array.isArray(thing.middle) && Runnable.isRunnable(thing);\n\t}\n\tstatic from([first, ...runnables], nameOrFields) {\n\t\tlet extra = {};\n\t\tif (typeof nameOrFields === \"string\") extra.name = nameOrFields;\n\t\telse if (nameOrFields !== void 0) extra = nameOrFields;\n\t\treturn new RunnableSequence({\n\t\t\t...extra,\n\t\t\tfirst: _coerceToRunnable(first),\n\t\t\tmiddle: runnables.slice(0, -1).map(_coerceToRunnable),\n\t\t\tlast: _coerceToRunnable(runnables[runnables.length - 1])\n\t\t});\n\t}\n};\n/**\n* A runnable that runs a mapping of runnables in parallel,\n* and returns a mapping of their outputs.\n* @example\n* ```typescript\n* const mapChain = RunnableMap.from({\n*   joke: PromptTemplate.fromTemplate(\"Tell me a joke about {topic}\").pipe(\n*     new ChatAnthropic({}),\n*   ),\n*   poem: PromptTemplate.fromTemplate(\"write a 2-line poem about {topic}\").pipe(\n*     new ChatAnthropic({}),\n*   ),\n* });\n* const result = await mapChain.invoke({ topic: \"bear\" });\n* ```\n*/\nvar RunnableMap = class RunnableMap extends Runnable {\n\tstatic lc_name() {\n\t\treturn \"RunnableMap\";\n\t}\n\tlc_namespace = [\"langchain_core\", \"runnables\"];\n\tlc_serializable = true;\n\tsteps;\n\tgetStepsKeys() {\n\t\treturn Object.keys(this.steps);\n\t}\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.steps = {};\n\t\tfor (const [key, value] of Object.entries(fields.steps)) this.steps[key] = _coerceToRunnable(value);\n\t}\n\tstatic from(steps) {\n\t\treturn new RunnableMap({ steps });\n\t}\n\tasync invoke(input, options) {\n\t\tconst config = (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.ensureConfig)(options);\n\t\tconst callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.getCallbackManagerForConfig)(config);\n\t\tconst runManager = await callbackManager_?.handleChainStart(this.toJSON(), { input }, config.runId, void 0, void 0, void 0, config?.runName);\n\t\tdelete config.runId;\n\t\tconst output = {};\n\t\ttry {\n\t\t\tconst promises = Object.entries(this.steps).map(async ([key, runnable]) => {\n\t\t\t\toutput[key] = await runnable.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.patchConfig)(config, { callbacks: runManager?.getChild(`map:key:${key}`) }));\n\t\t\t});\n\t\t\tawait (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_5__.raceWithSignal)(Promise.all(promises), options?.signal);\n\t\t} catch (e) {\n\t\t\tawait runManager?.handleChainError(e);\n\t\t\tthrow e;\n\t\t}\n\t\tawait runManager?.handleChainEnd(output);\n\t\treturn output;\n\t}\n\tasync *_transform(generator, runManager, options) {\n\t\tconst steps = { ...this.steps };\n\t\tconst inputCopies = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_6__.atee)(generator, Object.keys(steps).length);\n\t\tconst tasks = new Map(Object.entries(steps).map(([key, runnable], i) => {\n\t\t\tconst gen = runnable.transform(inputCopies[i], (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.patchConfig)(options, { callbacks: runManager?.getChild(`map:key:${key}`) }));\n\t\t\treturn [key, gen.next().then((result) => ({\n\t\t\t\tkey,\n\t\t\t\tgen,\n\t\t\t\tresult\n\t\t\t}))];\n\t\t}));\n\t\twhile (tasks.size) {\n\t\t\tconst promise = Promise.race(tasks.values());\n\t\t\tconst { key, result, gen } = await (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_5__.raceWithSignal)(promise, options?.signal);\n\t\t\ttasks.delete(key);\n\t\t\tif (!result.done) {\n\t\t\t\tyield { [key]: result.value };\n\t\t\t\ttasks.set(key, gen.next().then((result$1) => ({\n\t\t\t\t\tkey,\n\t\t\t\t\tgen,\n\t\t\t\t\tresult: result$1\n\t\t\t\t})));\n\t\t\t}\n\t\t}\n\t}\n\ttransform(generator, options) {\n\t\treturn this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n\t}\n\tasync stream(input, options) {\n\t\tasync function* generator() {\n\t\t\tyield input;\n\t\t}\n\t\tconst config = (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.ensureConfig)(options);\n\t\tconst wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_6__.AsyncGeneratorWithSetup({\n\t\t\tgenerator: this.transform(generator(), config),\n\t\t\tconfig\n\t\t});\n\t\tawait wrappedGenerator.setup;\n\t\treturn _utils_stream_js__WEBPACK_IMPORTED_MODULE_6__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n\t}\n};\n/**\n* A runnable that wraps a traced LangSmith function.\n*/\nvar RunnableTraceable = class RunnableTraceable extends Runnable {\n\tlc_serializable = false;\n\tlc_namespace = [\"langchain_core\", \"runnables\"];\n\tfunc;\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tif (!(0,langsmith_singletons_traceable__WEBPACK_IMPORTED_MODULE_18__.isTraceableFunction)(fields.func)) throw new Error(\"RunnableTraceable requires a function that is wrapped in traceable higher-order function\");\n\t\tthis.func = fields.func;\n\t}\n\tasync invoke(input, options) {\n\t\tconst [config] = this._getOptionsList(options ?? {}, 1);\n\t\tconst callbacks = await (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.getCallbackManagerForConfig)(config);\n\t\tconst promise = this.func((0,_config_js__WEBPACK_IMPORTED_MODULE_4__.patchConfig)(config, { callbacks }), input);\n\t\treturn (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_5__.raceWithSignal)(promise, config?.signal);\n\t}\n\tasync *_streamIterator(input, options) {\n\t\tconst [config] = this._getOptionsList(options ?? {}, 1);\n\t\tconst result = await this.invoke(input, options);\n\t\tif ((0,_iter_js__WEBPACK_IMPORTED_MODULE_16__.isAsyncIterable)(result)) {\n\t\t\tfor await (const item of result) {\n\t\t\t\tconfig?.signal?.throwIfAborted();\n\t\t\t\tyield item;\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tif ((0,_iter_js__WEBPACK_IMPORTED_MODULE_16__.isIterator)(result)) {\n\t\t\twhile (true) {\n\t\t\t\tconfig?.signal?.throwIfAborted();\n\t\t\t\tconst state = result.next();\n\t\t\t\tif (state.done) break;\n\t\t\t\tyield state.value;\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tyield result;\n\t}\n\tstatic from(func) {\n\t\treturn new RunnableTraceable({ func });\n\t}\n};\nfunction assertNonTraceableFunction(func) {\n\tif ((0,langsmith_singletons_traceable__WEBPACK_IMPORTED_MODULE_18__.isTraceableFunction)(func)) throw new Error(\"RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.\");\n}\n/**\n* A runnable that wraps an arbitrary function that takes a single argument.\n* @example\n* ```typescript\n* import { RunnableLambda } from \"@langchain/core/runnables\";\n*\n* const add = (input: { x: number; y: number }) => input.x + input.y;\n*\n* const multiply = (input: { value: number; multiplier: number }) =>\n*   input.value * input.multiplier;\n*\n* // Create runnables for the functions\n* const addLambda = RunnableLambda.from(add);\n* const multiplyLambda = RunnableLambda.from(multiply);\n*\n* // Chain the lambdas for a mathematical operation\n* const chainedLambda = addLambda.pipe((result) =>\n*   multiplyLambda.invoke({ value: result, multiplier: 2 })\n* );\n*\n* // Example invocation of the chainedLambda\n* const result = await chainedLambda.invoke({ x: 2, y: 3 });\n*\n* // Will log \"10\" (since (2 + 3) * 2 = 10)\n* ```\n*/\nvar RunnableLambda = class RunnableLambda extends Runnable {\n\tstatic lc_name() {\n\t\treturn \"RunnableLambda\";\n\t}\n\tlc_namespace = [\"langchain_core\", \"runnables\"];\n\tfunc;\n\tconstructor(fields) {\n\t\tif ((0,langsmith_singletons_traceable__WEBPACK_IMPORTED_MODULE_18__.isTraceableFunction)(fields.func)) return RunnableTraceable.from(fields.func);\n\t\tsuper(fields);\n\t\tassertNonTraceableFunction(fields.func);\n\t\tthis.func = fields.func;\n\t}\n\tstatic from(func) {\n\t\treturn new RunnableLambda({ func });\n\t}\n\tasync _invoke(input, config, runManager) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst childConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.patchConfig)(config, {\n\t\t\t\tcallbacks: runManager?.getChild(),\n\t\t\t\trecursionLimit: (config?.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_RECURSION_LIMIT) - 1\n\t\t\t});\n\t\t\t_singletons_async_local_storage_index_js__WEBPACK_IMPORTED_MODULE_2__.AsyncLocalStorageProviderSingleton.runWithConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_4__.pickRunnableConfigKeys)(childConfig), async () => {\n\t\t\t\ttry {\n\t\t\t\t\tlet output = await this.func(input, { ...childConfig });\n\t\t\t\t\tif (output && Runnable.isRunnable(output)) {\n\t\t\t\t\t\tif (config?.recursionLimit === 0) throw new Error(\"Recursion limit reached.\");\n\t\t\t\t\t\toutput = await output.invoke(input, {\n\t\t\t\t\t\t\t...childConfig,\n\t\t\t\t\t\t\trecursionLimit: (childConfig.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_RECURSION_LIMIT) - 1\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if ((0,_iter_js__WEBPACK_IMPORTED_MODULE_16__.isAsyncIterable)(output)) {\n\t\t\t\t\t\tlet finalOutput;\n\t\t\t\t\t\tfor await (const chunk of (0,_iter_js__WEBPACK_IMPORTED_MODULE_16__.consumeAsyncIterableInContext)(childConfig, output)) {\n\t\t\t\t\t\t\tconfig?.signal?.throwIfAborted();\n\t\t\t\t\t\t\tif (finalOutput === void 0) finalOutput = chunk;\n\t\t\t\t\t\t\telse try {\n\t\t\t\t\t\t\t\tfinalOutput = this._concatOutputChunks(finalOutput, chunk);\n\t\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\t\tfinalOutput = chunk;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\toutput = finalOutput;\n\t\t\t\t\t} else if ((0,_iter_js__WEBPACK_IMPORTED_MODULE_16__.isIterableIterator)(output)) {\n\t\t\t\t\t\tlet finalOutput;\n\t\t\t\t\t\tfor (const chunk of (0,_iter_js__WEBPACK_IMPORTED_MODULE_16__.consumeIteratorInContext)(childConfig, output)) {\n\t\t\t\t\t\t\tconfig?.signal?.throwIfAborted();\n\t\t\t\t\t\t\tif (finalOutput === void 0) finalOutput = chunk;\n\t\t\t\t\t\t\telse try {\n\t\t\t\t\t\t\t\tfinalOutput = this._concatOutputChunks(finalOutput, chunk);\n\t\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\t\tfinalOutput = chunk;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\toutput = finalOutput;\n\t\t\t\t\t}\n\t\t\t\t\tresolve(output);\n\t\t\t\t} catch (e) {\n\t\t\t\t\treject(e);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\tasync invoke(input, options) {\n\t\treturn this._callWithConfig(this._invoke.bind(this), input, options);\n\t}\n\tasync *_transform(generator, runManager, config) {\n\t\tlet finalChunk;\n\t\tfor await (const chunk of generator) if (finalChunk === void 0) finalChunk = chunk;\n\t\telse try {\n\t\t\tfinalChunk = this._concatOutputChunks(finalChunk, chunk);\n\t\t} catch {\n\t\t\tfinalChunk = chunk;\n\t\t}\n\t\tconst childConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.patchConfig)(config, {\n\t\t\tcallbacks: runManager?.getChild(),\n\t\t\trecursionLimit: (config?.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_RECURSION_LIMIT) - 1\n\t\t});\n\t\tconst output = await new Promise((resolve, reject) => {\n\t\t\t_singletons_async_local_storage_index_js__WEBPACK_IMPORTED_MODULE_2__.AsyncLocalStorageProviderSingleton.runWithConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_4__.pickRunnableConfigKeys)(childConfig), async () => {\n\t\t\t\ttry {\n\t\t\t\t\tconst res = await this.func(finalChunk, {\n\t\t\t\t\t\t...childConfig,\n\t\t\t\t\t\tconfig: childConfig\n\t\t\t\t\t});\n\t\t\t\t\tresolve(res);\n\t\t\t\t} catch (e) {\n\t\t\t\t\treject(e);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tif (output && Runnable.isRunnable(output)) {\n\t\t\tif (config?.recursionLimit === 0) throw new Error(\"Recursion limit reached.\");\n\t\t\tconst stream = await output.stream(finalChunk, childConfig);\n\t\t\tfor await (const chunk of stream) yield chunk;\n\t\t} else if ((0,_iter_js__WEBPACK_IMPORTED_MODULE_16__.isAsyncIterable)(output)) for await (const chunk of (0,_iter_js__WEBPACK_IMPORTED_MODULE_16__.consumeAsyncIterableInContext)(childConfig, output)) {\n\t\t\tconfig?.signal?.throwIfAborted();\n\t\t\tyield chunk;\n\t\t}\n\t\telse if ((0,_iter_js__WEBPACK_IMPORTED_MODULE_16__.isIterableIterator)(output)) for (const chunk of (0,_iter_js__WEBPACK_IMPORTED_MODULE_16__.consumeIteratorInContext)(childConfig, output)) {\n\t\t\tconfig?.signal?.throwIfAborted();\n\t\t\tyield chunk;\n\t\t}\n\t\telse yield output;\n\t}\n\ttransform(generator, options) {\n\t\treturn this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n\t}\n\tasync stream(input, options) {\n\t\tasync function* generator() {\n\t\t\tyield input;\n\t\t}\n\t\tconst config = (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.ensureConfig)(options);\n\t\tconst wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_6__.AsyncGeneratorWithSetup({\n\t\t\tgenerator: this.transform(generator(), config),\n\t\t\tconfig\n\t\t});\n\t\tawait wrappedGenerator.setup;\n\t\treturn _utils_stream_js__WEBPACK_IMPORTED_MODULE_6__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n\t}\n};\n/**\n* A runnable that runs a mapping of runnables in parallel,\n* and returns a mapping of their outputs.\n* @example\n* ```typescript\n* import {\n*   RunnableLambda,\n*   RunnableParallel,\n* } from \"@langchain/core/runnables\";\n*\n* const addYears = (age: number): number => age + 5;\n* const yearsToFifty = (age: number): number => 50 - age;\n* const yearsToHundred = (age: number): number => 100 - age;\n*\n* const addYearsLambda = RunnableLambda.from(addYears);\n* const milestoneFiftyLambda = RunnableLambda.from(yearsToFifty);\n* const milestoneHundredLambda = RunnableLambda.from(yearsToHundred);\n*\n* // Pipe will coerce objects into RunnableParallel by default, but we\n* // explicitly instantiate one here to demonstrate\n* const sequence = addYearsLambda.pipe(\n*   RunnableParallel.from({\n*     years_to_fifty: milestoneFiftyLambda,\n*     years_to_hundred: milestoneHundredLambda,\n*   })\n* );\n*\n* // Invoke the sequence with a single age input\n* const res = await sequence.invoke(25);\n*\n* // { years_to_fifty: 20, years_to_hundred: 70 }\n* ```\n*/\nvar RunnableParallel = class extends RunnableMap {};\n/**\n* A Runnable that can fallback to other Runnables if it fails.\n* External APIs (e.g., APIs for a language model) may at times experience\n* degraded performance or even downtime.\n*\n* In these cases, it can be useful to have a fallback Runnable that can be\n* used in place of the original Runnable (e.g., fallback to another LLM provider).\n*\n* Fallbacks can be defined at the level of a single Runnable, or at the level\n* of a chain of Runnables. Fallbacks are tried in order until one succeeds or\n* all fail.\n*\n* While you can instantiate a `RunnableWithFallbacks` directly, it is usually\n* more convenient to use the `withFallbacks` method on an existing Runnable.\n*\n* When streaming, fallbacks will only be called on failures during the initial\n* stream creation. Errors that occur after a stream starts will not fallback\n* to the next Runnable.\n*\n* @example\n* ```typescript\n* import {\n*   RunnableLambda,\n*   RunnableWithFallbacks,\n* } from \"@langchain/core/runnables\";\n*\n* const primaryOperation = (input: string): string => {\n*   if (input !== \"safe\") {\n*     throw new Error(\"Primary operation failed due to unsafe input\");\n*   }\n*   return `Processed: ${input}`;\n* };\n*\n* // Define a fallback operation that processes the input differently\n* const fallbackOperation = (input: string): string =>\n*   `Fallback processed: ${input}`;\n*\n* const primaryRunnable = RunnableLambda.from(primaryOperation);\n* const fallbackRunnable = RunnableLambda.from(fallbackOperation);\n*\n* // Apply the fallback logic using the .withFallbacks() method\n* const runnableWithFallback = primaryRunnable.withFallbacks([fallbackRunnable]);\n*\n* // Alternatively, create a RunnableWithFallbacks instance manually\n* const manualFallbackChain = new RunnableWithFallbacks({\n*   runnable: primaryRunnable,\n*   fallbacks: [fallbackRunnable],\n* });\n*\n* // Example invocation using .withFallbacks()\n* const res = await runnableWithFallback\n*   .invoke(\"unsafe input\")\n*   .catch((error) => {\n*     console.error(\"Failed after all attempts:\", error.message);\n*   });\n*\n* // \"Fallback processed: unsafe input\"\n*\n* // Example invocation using manual instantiation\n* const res = await manualFallbackChain\n*   .invoke(\"safe\")\n*   .catch((error) => {\n*     console.error(\"Failed after all attempts:\", error.message);\n*   });\n*\n* // \"Processed: safe\"\n* ```\n*/\nvar RunnableWithFallbacks = class extends Runnable {\n\tstatic lc_name() {\n\t\treturn \"RunnableWithFallbacks\";\n\t}\n\tlc_namespace = [\"langchain_core\", \"runnables\"];\n\tlc_serializable = true;\n\trunnable;\n\tfallbacks;\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.runnable = fields.runnable;\n\t\tthis.fallbacks = fields.fallbacks;\n\t}\n\t*runnables() {\n\t\tyield this.runnable;\n\t\tfor (const fallback of this.fallbacks) yield fallback;\n\t}\n\tasync invoke(input, options) {\n\t\tconst config = (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.ensureConfig)(options);\n\t\tconst callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.getCallbackManagerForConfig)(config);\n\t\tconst { runId,...otherConfigFields } = config;\n\t\tconst runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), runId, void 0, void 0, void 0, otherConfigFields?.runName);\n\t\tconst childConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.patchConfig)(otherConfigFields, { callbacks: runManager?.getChild() });\n\t\tconst res = await _singletons_async_local_storage_index_js__WEBPACK_IMPORTED_MODULE_2__.AsyncLocalStorageProviderSingleton.runWithConfig(childConfig, async () => {\n\t\t\tlet firstError;\n\t\t\tfor (const runnable of this.runnables()) {\n\t\t\t\tconfig?.signal?.throwIfAborted();\n\t\t\t\ttry {\n\t\t\t\t\tconst output = await runnable.invoke(input, childConfig);\n\t\t\t\t\tawait runManager?.handleChainEnd(_coerceToDict(output, \"output\"));\n\t\t\t\t\treturn output;\n\t\t\t\t} catch (e) {\n\t\t\t\t\tif (firstError === void 0) firstError = e;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (firstError === void 0) throw new Error(\"No error stored at end of fallback.\");\n\t\t\tawait runManager?.handleChainError(firstError);\n\t\t\tthrow firstError;\n\t\t});\n\t\treturn res;\n\t}\n\tasync *_streamIterator(input, options) {\n\t\tconst config = (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.ensureConfig)(options);\n\t\tconst callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.getCallbackManagerForConfig)(config);\n\t\tconst { runId,...otherConfigFields } = config;\n\t\tconst runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), runId, void 0, void 0, void 0, otherConfigFields?.runName);\n\t\tlet firstError;\n\t\tlet stream;\n\t\tfor (const runnable of this.runnables()) {\n\t\t\tconfig?.signal?.throwIfAborted();\n\t\t\tconst childConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.patchConfig)(otherConfigFields, { callbacks: runManager?.getChild() });\n\t\t\ttry {\n\t\t\t\tconst originalStream = await runnable.stream(input, childConfig);\n\t\t\t\tstream = (0,_iter_js__WEBPACK_IMPORTED_MODULE_16__.consumeAsyncIterableInContext)(childConfig, originalStream);\n\t\t\t\tbreak;\n\t\t\t} catch (e) {\n\t\t\t\tif (firstError === void 0) firstError = e;\n\t\t\t}\n\t\t}\n\t\tif (stream === void 0) {\n\t\t\tconst error = firstError ?? /* @__PURE__ */ new Error(\"No error stored at end of fallback.\");\n\t\t\tawait runManager?.handleChainError(error);\n\t\t\tthrow error;\n\t\t}\n\t\tlet output;\n\t\ttry {\n\t\t\tfor await (const chunk of stream) {\n\t\t\t\tyield chunk;\n\t\t\t\ttry {\n\t\t\t\t\toutput = output === void 0 ? output : this._concatOutputChunks(output, chunk);\n\t\t\t\t} catch {\n\t\t\t\t\toutput = void 0;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tawait runManager?.handleChainError(e);\n\t\t\tthrow e;\n\t\t}\n\t\tawait runManager?.handleChainEnd(_coerceToDict(output, \"output\"));\n\t}\n\tasync batch(inputs, options, batchOptions) {\n\t\tif (batchOptions?.returnExceptions) throw new Error(\"Not implemented.\");\n\t\tconst configList = this._getOptionsList(options ?? {}, inputs.length);\n\t\tconst callbackManagers = await Promise.all(configList.map((config) => (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.getCallbackManagerForConfig)(config)));\n\t\tconst runManagers = await Promise.all(callbackManagers.map(async (callbackManager, i) => {\n\t\t\tconst handleStartRes = await callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), configList[i].runId, void 0, void 0, void 0, configList[i].runName);\n\t\t\tdelete configList[i].runId;\n\t\t\treturn handleStartRes;\n\t\t}));\n\t\tlet firstError;\n\t\tfor (const runnable of this.runnables()) {\n\t\t\tconfigList[0].signal?.throwIfAborted();\n\t\t\ttry {\n\t\t\t\tconst outputs = await runnable.batch(inputs, runManagers.map((runManager, j) => (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.patchConfig)(configList[j], { callbacks: runManager?.getChild() })), batchOptions);\n\t\t\t\tawait Promise.all(runManagers.map((runManager, i) => runManager?.handleChainEnd(_coerceToDict(outputs[i], \"output\"))));\n\t\t\t\treturn outputs;\n\t\t\t} catch (e) {\n\t\t\t\tif (firstError === void 0) firstError = e;\n\t\t\t}\n\t\t}\n\t\tif (!firstError) throw new Error(\"No error stored at end of fallbacks.\");\n\t\tawait Promise.all(runManagers.map((runManager) => runManager?.handleChainError(firstError)));\n\t\tthrow firstError;\n\t}\n};\nfunction _coerceToRunnable(coerceable) {\n\tif (typeof coerceable === \"function\") return new RunnableLambda({ func: coerceable });\n\telse if (Runnable.isRunnable(coerceable)) return coerceable;\n\telse if (!Array.isArray(coerceable) && typeof coerceable === \"object\") {\n\t\tconst runnables = {};\n\t\tfor (const [key, value] of Object.entries(coerceable)) runnables[key] = _coerceToRunnable(value);\n\t\treturn new RunnableMap({ steps: runnables });\n\t} else throw new Error(`Expected a Runnable, function or object.\\nInstead got an unsupported type.`);\n}\n/**\n* A runnable that assigns key-value pairs to inputs of type `Record<string, unknown>`.\n* @example\n* ```typescript\n* import {\n*   RunnableAssign,\n*   RunnableLambda,\n*   RunnableParallel,\n* } from \"@langchain/core/runnables\";\n*\n* const calculateAge = (x: { birthYear: number }): { age: number } => {\n*   const currentYear = new Date().getFullYear();\n*   return { age: currentYear - x.birthYear };\n* };\n*\n* const createGreeting = (x: { name: string }): { greeting: string } => {\n*   return { greeting: `Hello, ${x.name}!` };\n* };\n*\n* const mapper = RunnableParallel.from({\n*   age_step: RunnableLambda.from(calculateAge),\n*   greeting_step: RunnableLambda.from(createGreeting),\n* });\n*\n* const runnableAssign = new RunnableAssign({ mapper });\n*\n* const res = await runnableAssign.invoke({ name: \"Alice\", birthYear: 1990 });\n*\n* // { name: \"Alice\", birthYear: 1990, age_step: { age: 34 }, greeting_step: { greeting: \"Hello, Alice!\" } }\n* ```\n*/\nvar RunnableAssign = class extends Runnable {\n\tstatic lc_name() {\n\t\treturn \"RunnableAssign\";\n\t}\n\tlc_namespace = [\"langchain_core\", \"runnables\"];\n\tlc_serializable = true;\n\tmapper;\n\tconstructor(fields) {\n\t\tif (fields instanceof RunnableMap) fields = { mapper: fields };\n\t\tsuper(fields);\n\t\tthis.mapper = fields.mapper;\n\t}\n\tasync invoke(input, options) {\n\t\tconst mapperResult = await this.mapper.invoke(input, options);\n\t\treturn {\n\t\t\t...input,\n\t\t\t...mapperResult\n\t\t};\n\t}\n\tasync *_transform(generator, runManager, options) {\n\t\tconst mapperKeys = this.mapper.getStepsKeys();\n\t\tconst [forPassthrough, forMapper] = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_6__.atee)(generator);\n\t\tconst mapperOutput = this.mapper.transform(forMapper, (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.patchConfig)(options, { callbacks: runManager?.getChild() }));\n\t\tconst firstMapperChunkPromise = mapperOutput.next();\n\t\tfor await (const chunk of forPassthrough) {\n\t\t\tif (typeof chunk !== \"object\" || Array.isArray(chunk)) throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof chunk}`);\n\t\t\tconst filtered = Object.fromEntries(Object.entries(chunk).filter(([key]) => !mapperKeys.includes(key)));\n\t\t\tif (Object.keys(filtered).length > 0) yield filtered;\n\t\t}\n\t\tyield (await firstMapperChunkPromise).value;\n\t\tfor await (const chunk of mapperOutput) yield chunk;\n\t}\n\ttransform(generator, options) {\n\t\treturn this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n\t}\n\tasync stream(input, options) {\n\t\tasync function* generator() {\n\t\t\tyield input;\n\t\t}\n\t\tconst config = (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.ensureConfig)(options);\n\t\tconst wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_6__.AsyncGeneratorWithSetup({\n\t\t\tgenerator: this.transform(generator(), config),\n\t\t\tconfig\n\t\t});\n\t\tawait wrappedGenerator.setup;\n\t\treturn _utils_stream_js__WEBPACK_IMPORTED_MODULE_6__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n\t}\n};\n/**\n* A runnable that assigns key-value pairs to inputs of type `Record<string, unknown>`.\n* Useful for streaming, can be automatically created and chained by calling `runnable.pick();`.\n* @example\n* ```typescript\n* import { RunnablePick } from \"@langchain/core/runnables\";\n*\n* const inputData = {\n*   name: \"John\",\n*   age: 30,\n*   city: \"New York\",\n*   country: \"USA\",\n*   email: \"john.doe@example.com\",\n*   phone: \"+1234567890\",\n* };\n*\n* const basicInfoRunnable = new RunnablePick([\"name\", \"city\"]);\n*\n* // Example invocation\n* const res = await basicInfoRunnable.invoke(inputData);\n*\n* // { name: 'John', city: 'New York' }\n* ```\n*/\nvar RunnablePick = class extends Runnable {\n\tstatic lc_name() {\n\t\treturn \"RunnablePick\";\n\t}\n\tlc_namespace = [\"langchain_core\", \"runnables\"];\n\tlc_serializable = true;\n\tkeys;\n\tconstructor(fields) {\n\t\tif (typeof fields === \"string\" || Array.isArray(fields)) fields = { keys: fields };\n\t\tsuper(fields);\n\t\tthis.keys = fields.keys;\n\t}\n\tasync _pick(input) {\n\t\tif (typeof this.keys === \"string\") return input[this.keys];\n\t\telse {\n\t\t\tconst picked = this.keys.map((key) => [key, input[key]]).filter((v) => v[1] !== void 0);\n\t\t\treturn picked.length === 0 ? void 0 : Object.fromEntries(picked);\n\t\t}\n\t}\n\tasync invoke(input, options) {\n\t\treturn this._callWithConfig(this._pick.bind(this), input, options);\n\t}\n\tasync *_transform(generator) {\n\t\tfor await (const chunk of generator) {\n\t\t\tconst picked = await this._pick(chunk);\n\t\t\tif (picked !== void 0) yield picked;\n\t\t}\n\t}\n\ttransform(generator, options) {\n\t\treturn this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n\t}\n\tasync stream(input, options) {\n\t\tasync function* generator() {\n\t\t\tyield input;\n\t\t}\n\t\tconst config = (0,_config_js__WEBPACK_IMPORTED_MODULE_4__.ensureConfig)(options);\n\t\tconst wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_6__.AsyncGeneratorWithSetup({\n\t\t\tgenerator: this.transform(generator(), config),\n\t\t\tconfig\n\t\t});\n\t\tawait wrappedGenerator.setup;\n\t\treturn _utils_stream_js__WEBPACK_IMPORTED_MODULE_6__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n\t}\n};\nvar RunnableToolLike = class extends RunnableBinding {\n\tname;\n\tdescription;\n\tschema;\n\tconstructor(fields) {\n\t\tconst sequence = RunnableSequence.from([RunnableLambda.from(async (input) => {\n\t\t\tlet toolInput;\n\t\t\tif ((0,_tools_utils_js__WEBPACK_IMPORTED_MODULE_1__._isToolCall)(input)) try {\n\t\t\t\ttoolInput = await (0,_utils_types_zod_js__WEBPACK_IMPORTED_MODULE_13__.interopParseAsync)(this.schema, input.args);\n\t\t\t} catch {\n\t\t\t\tthrow new _tools_utils_js__WEBPACK_IMPORTED_MODULE_1__.ToolInputParsingException(`Received tool input did not match expected schema`, JSON.stringify(input.args));\n\t\t\t}\n\t\t\telse toolInput = input;\n\t\t\treturn toolInput;\n\t\t}).withConfig({ runName: `${fields.name}:parse_input` }), fields.bound]).withConfig({ runName: fields.name });\n\t\tsuper({\n\t\t\tbound: sequence,\n\t\t\tconfig: fields.config ?? {}\n\t\t});\n\t\tthis.name = fields.name;\n\t\tthis.description = fields.description;\n\t\tthis.schema = fields.schema;\n\t}\n\tstatic lc_name() {\n\t\treturn \"RunnableToolLike\";\n\t}\n};\n/**\n* Given a runnable and a Zod schema, convert the runnable to a tool.\n*\n* @template RunInput The input type for the runnable.\n* @template RunOutput The output type for the runnable.\n*\n* @param {Runnable<RunInput, RunOutput>} runnable The runnable to convert to a tool.\n* @param fields\n* @param {string | undefined} [fields.name] The name of the tool. If not provided, it will default to the name of the runnable.\n* @param {string | undefined} [fields.description] The description of the tool. Falls back to the description on the Zod schema if not provided, or undefined if neither are provided.\n* @param {InteropZodType<RunInput>} [fields.schema] The Zod schema for the input of the tool. Infers the Zod type from the input type of the runnable.\n* @returns {RunnableToolLike<InteropZodType<RunInput>, RunOutput>} An instance of `RunnableToolLike` which is a runnable that can be used as a tool.\n*/\nfunction convertRunnableToTool(runnable, fields) {\n\tconst name = fields.name ?? runnable.getName();\n\tconst description = fields.description ?? (0,_utils_types_zod_js__WEBPACK_IMPORTED_MODULE_13__.getSchemaDescription)(fields.schema);\n\tif ((0,_utils_types_zod_js__WEBPACK_IMPORTED_MODULE_13__.isSimpleStringZodSchema)(fields.schema)) return new RunnableToolLike({\n\t\tname,\n\t\tdescription,\n\t\tschema: zod_v3__WEBPACK_IMPORTED_MODULE_17__.z.object({ input: zod_v3__WEBPACK_IMPORTED_MODULE_17__.z.string() }).transform((input) => input.input),\n\t\tbound: runnable\n\t});\n\treturn new RunnableToolLike({\n\t\tname,\n\t\tdescription,\n\t\tschema: fields.schema,\n\t\tbound: runnable\n\t});\n}\n\n//#endregion\n\n//# sourceMappingURL=base.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF1RDtBQUNvQjtBQUNxQjtBQUNoRTtBQUNvSDtBQUMzRTtBQUNrRDtBQUNkO0FBQ2Q7QUFDNUM7QUFDSTtBQUNXO0FBQ0M7QUFDc0M7QUFDdEU7QUFDc0I7QUFDNEU7QUFDMUc7QUFDRDtBQUMyQzs7QUFFckU7QUFDQTtBQUNBLDRHQUE0RztBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLCtEQUFZO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLEtBQUssRUFBRSxPQUFPO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLGFBQWE7QUFDYjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSw0SkFBNEosZ0JBQWdCLGNBQWMsUUFBUTtBQUNsTSxpREFBaUQsb0RBQVk7QUFDN0Q7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLFFBQVEsWUFBWSx3REFBWTtBQUN2RDtBQUNBLHNCQUFzQixRQUFRLFFBQVEsd0RBQVk7QUFDbEQ7QUFDQTtBQUNBLHVEQUF1RDtBQUN2RDtBQUNBLHFCQUFxQixnRUFBVztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHdEQUFZO0FBQzdCLCtCQUErQixxRUFBdUI7QUFDdEQ7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLFNBQVMsb0VBQXNCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyx3REFBWTtBQUN2RCx3QkFBd0Isd0RBQVk7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHdEQUFZO0FBQzdCLGlDQUFpQyx1RUFBMkI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixnRUFBYztBQUNoQyxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0Q7QUFDeEQsNkRBQTZELG1FQUEyQjtBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsZ0VBQWM7QUFDakMsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHdEQUFNO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix3REFBWTtBQUM3QixpQ0FBaUMsdUVBQTJCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHdFQUFzQixnSEFBZ0gsV0FBVyw0RkFBNEYsd0JBQXdCO0FBQzNSO0FBQ0E7QUFDQSx5REFBeUQsMkVBQXFCO0FBQzlFO0FBQ0E7QUFDQSxzREFBc0Qsc0VBQWtCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixtRUFBbUUsNENBQTRDO0FBQy9HO0FBQ0E7QUFDQSxvREFBb0QsNEJBQTRCLDRDQUE0QztBQUM1SDtBQUNBO0FBQ0Esb0JBQW9CLDZDQUFLO0FBQ3pCO0FBQ0EsWUFBWSxlQUFlO0FBQzNCLFdBQVcsMENBQUs7QUFDaEIsR0FBRztBQUNIO0FBQ0E7QUFDQSxZQUFZLGVBQWU7QUFDM0IsV0FBVywwQ0FBSztBQUNoQixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELGdCQUFnQjtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsd0RBQVk7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsNEVBQXdCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxpQkFBaUIsd0RBQVk7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsVUFBVSxZQUFZO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwrREFBVyxHQUFHO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLE1BQU0sR0FBRztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQsdUVBQXdCO0FBQy9FLGNBQWMsb0VBQXNCO0FBQ3BDO0FBQ0E7QUFDQSw0QkFBNEIsZ0ZBQTBCO0FBQ3REO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsaUJBQWlCLHdEQUFZO0FBQzdCLGdDQUFnQyxpREFBRTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsWUFBWTtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHdEQUFZO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLHVDQUF1Qyw0RUFBd0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILDhCQUE4Qix3REFBZ0IsR0FBRyxrQkFBa0I7QUFDbkU7QUFDQTtBQUNBLHlCQUF5QiwwREFBTTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0Esa0JBQWtCLGFBQWE7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLGlHQUFpRyxZQUFZLDRCQUE0QixjQUFjO0FBQ3ZKLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsY0FBYyxHQUFHLFVBQVU7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGlCQUFpQjtBQUM1QjtBQUNBO0FBQ0EsZ0dBQWdHLFlBQVksNEJBQTRCLGFBQWE7QUFDckosbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQSxrQkFBa0IsYUFBYTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsV0FBVztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUywrREFBbUI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxvQkFBb0I7QUFDL0IsV0FBVyxvQkFBb0I7QUFDL0IsV0FBVyxvQkFBb0I7QUFDL0I7QUFDQSxpQkFBaUIseUJBQXlCO0FBQzFDO0FBQ0E7QUFDQSxhQUFhO0FBQ2Isb0NBQW9DLGdCQUFnQiwyRUFBbUI7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLElBQUk7QUFDUixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsK0JBQStCO0FBQzdDO0FBQ0E7QUFDQSxXQUFXLG9CQUFvQjtBQUMvQixXQUFXLG9CQUFvQjtBQUMvQixXQUFXLGNBQWM7QUFDekIsYUFBYSwyQ0FBMkM7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLGdCQUFnQixpQkFBaUI7QUFDL0UsNkNBQTZDLGdCQUFnQixnQkFBZ0I7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix3REFBWTtBQUM3QixTQUFTLHdEQUFZO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2SEFBNkgsd0RBQVksNkRBQTZELHdEQUFZO0FBQ2xOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FLHdEQUFZO0FBQy9FO0FBQ0E7QUFDQSwwREFBMEQsd0RBQVk7QUFDdEU7QUFDQTtBQUNBLGlFQUFpRSx3REFBWTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLHdEQUFZO0FBQ2hEO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsU0FBUyxvRUFBc0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxvQkFBb0I7QUFDL0IsV0FBVyxvQkFBb0I7QUFDL0IsV0FBVyxvQkFBb0I7QUFDL0I7QUFDQSxpQkFBaUIseUJBQXlCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLGdCQUFnQiwyRUFBbUI7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLElBQUk7QUFDUixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLCtCQUErQjtBQUMxQztBQUNBO0FBQ0EsMkRBQTJELE1BQU07QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyx1REFBVyxXQUFXLG1DQUFtQztBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLG9CQUFvQjtBQUMvQixXQUFXLG9CQUFvQjtBQUMvQixXQUFXLG9CQUFvQjtBQUMvQjtBQUNBLGlCQUFpQix5QkFBeUI7QUFDMUMsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLEdBQUcsR0FBRztBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxNQUFNO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxxQkFBcUI7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsUUFBUTtBQUNyRCxTQUFTLHVEQUFXLFdBQVcsc0NBQXNDO0FBQ3JFO0FBQ0E7QUFDQSxTQUFTLCtEQUFNO0FBQ2YsdUJBQXVCLE9BQU87QUFDOUI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUywrREFBTTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLG9CQUFvQixvQkFBb0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLHdCQUF3QixPQUFPO0FBQy9CO0FBQ0E7QUFDQSxJQUFJO0FBQ0osSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLE1BQU07QUFDakM7QUFDQSx3RUFBd0Usc0JBQXNCO0FBQzlGLHNDQUFzQyxnQkFBZ0I7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsd0RBQVk7QUFDN0IsaUNBQWlDLHVFQUEyQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIseUJBQXlCO0FBQzVDO0FBQ0EsK0NBQStDLHVEQUFXLFdBQVcsNkVBQTZFLE1BQU0sSUFBSTtBQUM1SiwwQkFBMEIsZ0VBQWM7QUFDeEM7QUFDQSx1Q0FBdUMscUVBQW1CO0FBQzFELHVEQUF1RCx1REFBVyxXQUFXLDZFQUE2RSxrQkFBa0IsSUFBSTtBQUNoTCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQ7QUFDdkQsNERBQTRELG1FQUEyQjtBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsbUJBQW1CLHVCQUF1QjtBQUMxQztBQUNBO0FBQ0EsK0ZBQStGLE1BQU07QUFDckcsWUFBWSx1REFBVyxrQkFBa0IsNEJBQTRCO0FBQ3JFLEtBQUs7QUFDTCwyQkFBMkIsZ0VBQWM7QUFDekM7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyx1RUFBMkI7QUFDNUQsVUFBVSx3QkFBd0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELHVEQUFXLGlCQUFpQixnRkFBZ0Y7QUFDekssbUJBQW1CLGtCQUFrQjtBQUNyQztBQUNBLDBEQUEwRCx1REFBVyxpQkFBaUIsNkVBQTZFLE1BQU0sSUFBSTtBQUM3SztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsNkNBQUs7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsTUFBTTtBQUN6RDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsTUFBTTtBQUNuRSwwQkFBMEI7QUFDMUI7QUFDQSxrRUFBa0UsTUFBTTtBQUN4RSwwQkFBMEI7QUFDMUI7QUFDQSxHQUFHO0FBQ0gseUNBQXlDLGVBQWU7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLE9BQU87QUFDbEM7QUFDQTtBQUNBLGlCQUFpQix3REFBWTtBQUM3QixpQ0FBaUMsdUVBQTJCO0FBQzVELCtFQUErRSxPQUFPO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLHVEQUFXLFdBQVcsMkNBQTJDLElBQUksSUFBSTtBQUN4SCxJQUFJO0FBQ0osU0FBUyxnRUFBYztBQUN2QixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEIsc0JBQXNCLHNEQUFJO0FBQzFCO0FBQ0Esa0RBQWtELHVEQUFXLFlBQVksMkNBQTJDLElBQUksSUFBSTtBQUM1SDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBLFdBQVcsbUJBQW1CLFFBQVEsZ0VBQWM7QUFDcEQ7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix3REFBWTtBQUM3QiwrQkFBK0IscUVBQXVCO0FBQ3REO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxTQUFTLG9FQUFzQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxvRkFBbUI7QUFDMUI7QUFDQTtBQUNBO0FBQ0EscURBQXFEO0FBQ3JELDBCQUEwQix1RUFBMkI7QUFDckQsNEJBQTRCLHVEQUFXLFdBQVcsV0FBVztBQUM3RCxTQUFTLGdFQUFjO0FBQ3ZCO0FBQ0E7QUFDQSxxREFBcUQ7QUFDckQ7QUFDQSxNQUFNLDBEQUFlO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0scURBQVU7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxNQUFNO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLEtBQUssb0ZBQW1CO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGlCQUFpQjtBQUM1QjtBQUNBLHdCQUF3QixXQUFXLFdBQVc7QUFDOUM7QUFDQSw2QkFBNkIsZUFBZSxvQkFBb0I7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qiw4QkFBOEI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0EsOENBQThDLFlBQVk7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sb0ZBQW1CO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsTUFBTTtBQUNwQztBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdURBQVc7QUFDbEM7QUFDQSwrQ0FBK0MsK0RBQXVCO0FBQ3RFLElBQUk7QUFDSixHQUFHLHdHQUFrQyxlQUFlLGtFQUFzQjtBQUMxRTtBQUNBLDJDQUEyQyxnQkFBZ0I7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsK0RBQXVCO0FBQzdFLE9BQU87QUFDUCxPQUFPLFNBQVMsMERBQWU7QUFDL0I7QUFDQSxnQ0FBZ0Msd0VBQTZCO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxTQUFTLDZEQUFrQjtBQUNsQztBQUNBLDBCQUEwQixtRUFBd0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0Esc0JBQXNCLHVEQUFXO0FBQ2pDO0FBQ0EsOENBQThDLCtEQUF1QjtBQUNyRSxHQUFHO0FBQ0g7QUFDQSxHQUFHLHdHQUFrQyxlQUFlLGtFQUFzQjtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksU0FBUywwREFBZSxvQ0FBb0Msd0VBQTZCO0FBQzdGO0FBQ0E7QUFDQTtBQUNBLFdBQVcsNkRBQWtCLDhCQUE4QixtRUFBd0I7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHdEQUFZO0FBQzdCLCtCQUErQixxRUFBdUI7QUFDdEQ7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLFNBQVMsb0VBQXNCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLE1BQU07QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsTUFBTTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHdEQUFZO0FBQzdCLGlDQUFpQyx1RUFBMkI7QUFDNUQsVUFBVSw2QkFBNkI7QUFDdkM7QUFDQSxzQkFBc0IsdURBQVcsc0JBQXNCLG1DQUFtQztBQUMxRixvQkFBb0Isd0dBQWtDO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsd0RBQVk7QUFDN0IsaUNBQWlDLHVFQUEyQjtBQUM1RCxVQUFVLDZCQUE2QjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHVEQUFXLHNCQUFzQixtQ0FBbUM7QUFDM0Y7QUFDQTtBQUNBLGFBQWEsd0VBQTZCO0FBQzFDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVEO0FBQ3ZELHdFQUF3RSx1RUFBMkI7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRkFBb0YsdURBQVcsa0JBQWtCLG1DQUFtQztBQUNwSjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1FQUFtRSxrQkFBa0I7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsa0JBQWtCO0FBQzdDLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSw2QkFBNkIsbUJBQW1CLEtBQUssY0FBYztBQUNuRTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsK0JBQStCLGNBQWMsS0FBSyxtQkFBbUI7QUFDckUsYUFBYSxvQkFBb0IsT0FBTztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsOENBQThDLFFBQVE7QUFDdEQ7QUFDQSw0Q0FBNEMsZ0NBQWdDO0FBQzVFO0FBQ0EsT0FBTyw0Q0FBNEMsU0FBUyxtQkFBbUI7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLHNEQUFJO0FBQzFDLHdEQUF3RCx1REFBVyxZQUFZLG1DQUFtQztBQUNsSDtBQUNBO0FBQ0Esd0lBQXdJLGFBQWE7QUFDcko7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsd0RBQVk7QUFDN0IsK0JBQStCLHFFQUF1QjtBQUN0RDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsU0FBUyxvRUFBc0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2RkFBNkY7QUFDN0Y7QUFDQTtBQUNBLFdBQVcsZUFBZTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRUFBc0U7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix3REFBWTtBQUM3QiwrQkFBK0IscUVBQXVCO0FBQ3REO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxTQUFTLG9FQUFzQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLDREQUFXO0FBQ2xCLHNCQUFzQix1RUFBaUI7QUFDdkMsS0FBSztBQUNMLGNBQWMsc0VBQXlCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLEdBQUcsZUFBZSxZQUFZLFlBQVksZUFBZSwrQkFBK0Isc0JBQXNCO0FBQzlHO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSwrQkFBK0I7QUFDekM7QUFDQSxVQUFVLG9CQUFvQjtBQUM5QixVQUFVLG9CQUFvQjtBQUM5QixVQUFVLDBCQUEwQjtBQUNwQyxZQUFZLHVEQUF1RDtBQUNuRTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsMEVBQW9CO0FBQy9ELEtBQUssNkVBQXVCO0FBQzVCO0FBQ0E7QUFDQSxVQUFVLDZDQUFRLEdBQUcsT0FBTyw2Q0FBUSxJQUFJO0FBQ3hDO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDNE87QUFDNU8iLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvYmFzZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTZXJpYWxpemFibGUgfSBmcm9tIFwiLi4vbG9hZC9zZXJpYWxpemFibGUuanNcIjtcbmltcG9ydCB7IFRvb2xJbnB1dFBhcnNpbmdFeGNlcHRpb24sIF9pc1Rvb2xDYWxsIH0gZnJvbSBcIi4uL3Rvb2xzL3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIH0gZnJvbSBcIi4uL3NpbmdsZXRvbnMvYXN5bmNfbG9jYWxfc3RvcmFnZS9pbmRleC5qc1wiO1xuaW1wb3J0IFwiLi4vc2luZ2xldG9ucy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgREVGQVVMVF9SRUNVUlNJT05fTElNSVQsIGVuc3VyZUNvbmZpZywgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnLCBtZXJnZUNvbmZpZ3MsIHBhdGNoQ29uZmlnLCBwaWNrUnVubmFibGVDb25maWdLZXlzIH0gZnJvbSBcIi4vY29uZmlnLmpzXCI7XG5pbXBvcnQgeyBnZXRBYm9ydFNpZ25hbEVycm9yLCByYWNlV2l0aFNpZ25hbCB9IGZyb20gXCIuLi91dGlscy9zaWduYWwuanNcIjtcbmltcG9ydCB7IEFzeW5jR2VuZXJhdG9yV2l0aFNldHVwLCBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLCBhdGVlLCBjb25jYXQsIHBpcGVHZW5lcmF0b3JXaXRoU2V0dXAgfSBmcm9tIFwiLi4vdXRpbHMvc3RyZWFtLmpzXCI7XG5pbXBvcnQgeyBMb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIsIFJ1bkxvZywgUnVuTG9nUGF0Y2gsIGlzTG9nU3RyZWFtSGFuZGxlciB9IGZyb20gXCIuLi90cmFjZXJzL2xvZ19zdHJlYW0uanNcIjtcbmltcG9ydCB7IEV2ZW50U3RyZWFtQ2FsbGJhY2tIYW5kbGVyLCBpc1N0cmVhbUV2ZW50c0hhbmRsZXIgfSBmcm9tIFwiLi4vdHJhY2Vycy9ldmVudF9zdHJlYW0uanNcIjtcbmltcG9ydCB7IHBSZXRyeSB9IGZyb20gXCIuLi91dGlscy9wLXJldHJ5L2luZGV4LmpzXCI7XG5pbXBvcnQgeyBBc3luY0NhbGxlciB9IGZyb20gXCIuLi91dGlscy9hc3luY19jYWxsZXIuanNcIjtcbmltcG9ydCB7IFJvb3RMaXN0ZW5lcnNUcmFjZXIgfSBmcm9tIFwiLi4vdHJhY2Vycy9yb290X2xpc3RlbmVyLmpzXCI7XG5pbXBvcnQgeyBfUm9vdEV2ZW50RmlsdGVyLCBpc1J1bm5hYmxlSW50ZXJmYWNlIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcbmltcG9ydCB7IGdldFNjaGVtYURlc2NyaXB0aW9uLCBpbnRlcm9wUGFyc2VBc3luYywgaXNTaW1wbGVTdHJpbmdab2RTY2hlbWEgfSBmcm9tIFwiLi4vdXRpbHMvdHlwZXMvem9kLmpzXCI7XG5pbXBvcnQgeyBHcmFwaCB9IGZyb20gXCIuL2dyYXBoLmpzXCI7XG5pbXBvcnQgeyBjb252ZXJ0VG9IdHRwRXZlbnRTdHJlYW0gfSBmcm9tIFwiLi93cmFwcGVycy5qc1wiO1xuaW1wb3J0IHsgY29uc3VtZUFzeW5jSXRlcmFibGVJbkNvbnRleHQsIGNvbnN1bWVJdGVyYXRvckluQ29udGV4dCwgaXNBc3luY0l0ZXJhYmxlLCBpc0l0ZXJhYmxlSXRlcmF0b3IsIGlzSXRlcmF0b3IgfSBmcm9tIFwiLi9pdGVyLmpzXCI7XG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZC92M1wiO1xuaW1wb3J0IHsgdjQgfSBmcm9tIFwidXVpZFwiO1xuaW1wb3J0IHsgaXNUcmFjZWFibGVGdW5jdGlvbiB9IGZyb20gXCJsYW5nc21pdGgvc2luZ2xldG9ucy90cmFjZWFibGVcIjtcblxuLy8jcmVnaW9uIHNyYy9ydW5uYWJsZXMvYmFzZS50c1xuZnVuY3Rpb24gX2NvZXJjZVRvRGljdCh2YWx1ZSwgZGVmYXVsdEtleSkge1xuXHRyZXR1cm4gdmFsdWUgJiYgIUFycmF5LmlzQXJyYXkodmFsdWUpICYmICEodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSAmJiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgPyB2YWx1ZSA6IHsgW2RlZmF1bHRLZXldOiB2YWx1ZSB9O1xufVxuLyoqXG4qIEEgUnVubmFibGUgaXMgYSBnZW5lcmljIHVuaXQgb2Ygd29yayB0aGF0IGNhbiBiZSBpbnZva2VkLCBiYXRjaGVkLCBzdHJlYW1lZCwgYW5kL29yXG4qIHRyYW5zZm9ybWVkLlxuKi9cbnZhciBSdW5uYWJsZSA9IGNsYXNzIGV4dGVuZHMgU2VyaWFsaXphYmxlIHtcblx0bGNfcnVubmFibGUgPSB0cnVlO1xuXHRuYW1lO1xuXHRnZXROYW1lKHN1ZmZpeCkge1xuXHRcdGNvbnN0IG5hbWUgPSB0aGlzLm5hbWUgPz8gdGhpcy5jb25zdHJ1Y3Rvci5sY19uYW1lKCkgPz8gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuXHRcdHJldHVybiBzdWZmaXggPyBgJHtuYW1lfSR7c3VmZml4fWAgOiBuYW1lO1xuXHR9XG5cdC8qKlxuXHQqIEFkZCByZXRyeSBsb2dpYyB0byBhbiBleGlzdGluZyBydW5uYWJsZS5cblx0KiBAcGFyYW0gZmllbGRzLnN0b3BBZnRlckF0dGVtcHQgVGhlIG51bWJlciBvZiBhdHRlbXB0cyB0byByZXRyeS5cblx0KiBAcGFyYW0gZmllbGRzLm9uRmFpbGVkQXR0ZW1wdCBBIGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdoZW4gYSByZXRyeSBmYWlscy5cblx0KiBAcmV0dXJucyBBIG5ldyBSdW5uYWJsZVJldHJ5IHRoYXQsIHdoZW4gaW52b2tlZCwgd2lsbCByZXRyeSBhY2NvcmRpbmcgdG8gdGhlIHBhcmFtZXRlcnMuXG5cdCovXG5cdHdpdGhSZXRyeShmaWVsZHMpIHtcblx0XHRyZXR1cm4gbmV3IFJ1bm5hYmxlUmV0cnkoe1xuXHRcdFx0Ym91bmQ6IHRoaXMsXG5cdFx0XHRrd2FyZ3M6IHt9LFxuXHRcdFx0Y29uZmlnOiB7fSxcblx0XHRcdG1heEF0dGVtcHROdW1iZXI6IGZpZWxkcz8uc3RvcEFmdGVyQXR0ZW1wdCxcblx0XHRcdC4uLmZpZWxkc1xuXHRcdH0pO1xuXHR9XG5cdC8qKlxuXHQqIEJpbmQgY29uZmlnIHRvIGEgUnVubmFibGUsIHJldHVybmluZyBhIG5ldyBSdW5uYWJsZS5cblx0KiBAcGFyYW0gY29uZmlnIE5ldyBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnMgdG8gYXR0YWNoIHRvIHRoZSBuZXcgcnVubmFibGUuXG5cdCogQHJldHVybnMgQSBuZXcgUnVubmFibGVCaW5kaW5nIHdpdGggYSBjb25maWcgbWF0Y2hpbmcgd2hhdCdzIHBhc3NlZC5cblx0Ki9cblx0d2l0aENvbmZpZyhjb25maWcpIHtcblx0XHRyZXR1cm4gbmV3IFJ1bm5hYmxlQmluZGluZyh7XG5cdFx0XHRib3VuZDogdGhpcyxcblx0XHRcdGNvbmZpZyxcblx0XHRcdGt3YXJnczoge31cblx0XHR9KTtcblx0fVxuXHQvKipcblx0KiBDcmVhdGUgYSBuZXcgcnVubmFibGUgZnJvbSB0aGUgY3VycmVudCBvbmUgdGhhdCB3aWxsIHRyeSBpbnZva2luZ1xuXHQqIG90aGVyIHBhc3NlZCBmYWxsYmFjayBydW5uYWJsZXMgaWYgdGhlIGluaXRpYWwgaW52b2NhdGlvbiBmYWlscy5cblx0KiBAcGFyYW0gZmllbGRzLmZhbGxiYWNrcyBPdGhlciBydW5uYWJsZXMgdG8gY2FsbCBpZiB0aGUgcnVubmFibGUgZXJyb3JzLlxuXHQqIEByZXR1cm5zIEEgbmV3IFJ1bm5hYmxlV2l0aEZhbGxiYWNrcy5cblx0Ki9cblx0d2l0aEZhbGxiYWNrcyhmaWVsZHMpIHtcblx0XHRjb25zdCBmYWxsYmFja3MgPSBBcnJheS5pc0FycmF5KGZpZWxkcykgPyBmaWVsZHMgOiBmaWVsZHMuZmFsbGJhY2tzO1xuXHRcdHJldHVybiBuZXcgUnVubmFibGVXaXRoRmFsbGJhY2tzKHtcblx0XHRcdHJ1bm5hYmxlOiB0aGlzLFxuXHRcdFx0ZmFsbGJhY2tzXG5cdFx0fSk7XG5cdH1cblx0X2dldE9wdGlvbnNMaXN0KG9wdGlvbnMsIGxlbmd0aCA9IDApIHtcblx0XHRpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zKSAmJiBvcHRpb25zLmxlbmd0aCAhPT0gbGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoYFBhc3NlZCBcIm9wdGlvbnNcIiBtdXN0IGJlIGFuIGFycmF5IHdpdGggdGhlIHNhbWUgbGVuZ3RoIGFzIHRoZSBpbnB1dHMsIGJ1dCBnb3QgJHtvcHRpb25zLmxlbmd0aH0gb3B0aW9ucyBmb3IgJHtsZW5ndGh9IGlucHV0c2ApO1xuXHRcdGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMpKSByZXR1cm4gb3B0aW9ucy5tYXAoZW5zdXJlQ29uZmlnKTtcblx0XHRpZiAobGVuZ3RoID4gMSAmJiAhQXJyYXkuaXNBcnJheShvcHRpb25zKSAmJiBvcHRpb25zLnJ1bklkKSB7XG5cdFx0XHRjb25zb2xlLndhcm4oXCJQcm92aWRlZCBydW5JZCB3aWxsIGJlIHVzZWQgb25seSBmb3IgdGhlIGZpcnN0IGVsZW1lbnQgb2YgdGhlIGJhdGNoLlwiKTtcblx0XHRcdGNvbnN0IHN1YnNlcXVlbnQgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMob3B0aW9ucykuZmlsdGVyKChba2V5XSkgPT4ga2V5ICE9PSBcInJ1bklkXCIpKTtcblx0XHRcdHJldHVybiBBcnJheS5mcm9tKHsgbGVuZ3RoIH0sIChfLCBpKSA9PiBlbnN1cmVDb25maWcoaSA9PT0gMCA/IG9wdGlvbnMgOiBzdWJzZXF1ZW50KSk7XG5cdFx0fVxuXHRcdHJldHVybiBBcnJheS5mcm9tKHsgbGVuZ3RoIH0sICgpID0+IGVuc3VyZUNvbmZpZyhvcHRpb25zKSk7XG5cdH1cblx0YXN5bmMgYmF0Y2goaW5wdXRzLCBvcHRpb25zLCBiYXRjaE9wdGlvbnMpIHtcblx0XHRjb25zdCBjb25maWdMaXN0ID0gdGhpcy5fZ2V0T3B0aW9uc0xpc3Qob3B0aW9ucyA/PyB7fSwgaW5wdXRzLmxlbmd0aCk7XG5cdFx0Y29uc3QgbWF4Q29uY3VycmVuY3kgPSBjb25maWdMaXN0WzBdPy5tYXhDb25jdXJyZW5jeSA/PyBiYXRjaE9wdGlvbnM/Lm1heENvbmN1cnJlbmN5O1xuXHRcdGNvbnN0IGNhbGxlciA9IG5ldyBBc3luY0NhbGxlcih7XG5cdFx0XHRtYXhDb25jdXJyZW5jeSxcblx0XHRcdG9uRmFpbGVkQXR0ZW1wdDogKGUpID0+IHtcblx0XHRcdFx0dGhyb3cgZTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRjb25zdCBiYXRjaENhbGxzID0gaW5wdXRzLm1hcCgoaW5wdXQsIGkpID0+IGNhbGxlci5jYWxsKGFzeW5jICgpID0+IHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuaW52b2tlKGlucHV0LCBjb25maWdMaXN0W2ldKTtcblx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0aWYgKGJhdGNoT3B0aW9ucz8ucmV0dXJuRXhjZXB0aW9ucykgcmV0dXJuIGU7XG5cdFx0XHRcdHRocm93IGU7XG5cdFx0XHR9XG5cdFx0fSkpO1xuXHRcdHJldHVybiBQcm9taXNlLmFsbChiYXRjaENhbGxzKTtcblx0fVxuXHQvKipcblx0KiBEZWZhdWx0IHN0cmVhbWluZyBpbXBsZW1lbnRhdGlvbi5cblx0KiBTdWJjbGFzc2VzIHNob3VsZCBvdmVycmlkZSB0aGlzIG1ldGhvZCBpZiB0aGV5IHN1cHBvcnQgc3RyZWFtaW5nIG91dHB1dC5cblx0KiBAcGFyYW0gaW5wdXRcblx0KiBAcGFyYW0gb3B0aW9uc1xuXHQqL1xuXHRhc3luYyAqX3N0cmVhbUl0ZXJhdG9yKGlucHV0LCBvcHRpb25zKSB7XG5cdFx0eWllbGQgdGhpcy5pbnZva2UoaW5wdXQsIG9wdGlvbnMpO1xuXHR9XG5cdC8qKlxuXHQqIFN0cmVhbSBvdXRwdXQgaW4gY2h1bmtzLlxuXHQqIEBwYXJhbSBpbnB1dFxuXHQqIEBwYXJhbSBvcHRpb25zXG5cdCogQHJldHVybnMgQSByZWFkYWJsZSBzdHJlYW0gdGhhdCBpcyBhbHNvIGFuIGl0ZXJhYmxlLlxuXHQqL1xuXHRhc3luYyBzdHJlYW0oaW5wdXQsIG9wdGlvbnMpIHtcblx0XHRjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG5cdFx0Y29uc3Qgd3JhcHBlZEdlbmVyYXRvciA9IG5ldyBBc3luY0dlbmVyYXRvcldpdGhTZXR1cCh7XG5cdFx0XHRnZW5lcmF0b3I6IHRoaXMuX3N0cmVhbUl0ZXJhdG9yKGlucHV0LCBjb25maWcpLFxuXHRcdFx0Y29uZmlnXG5cdFx0fSk7XG5cdFx0YXdhaXQgd3JhcHBlZEdlbmVyYXRvci5zZXR1cDtcblx0XHRyZXR1cm4gSXRlcmFibGVSZWFkYWJsZVN0cmVhbS5mcm9tQXN5bmNHZW5lcmF0b3Iod3JhcHBlZEdlbmVyYXRvcik7XG5cdH1cblx0X3NlcGFyYXRlUnVubmFibGVDb25maWdGcm9tQ2FsbE9wdGlvbnMob3B0aW9ucykge1xuXHRcdGxldCBydW5uYWJsZUNvbmZpZztcblx0XHRpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSBydW5uYWJsZUNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcblx0XHRlbHNlIHJ1bm5hYmxlQ29uZmlnID0gZW5zdXJlQ29uZmlnKHtcblx0XHRcdGNhbGxiYWNrczogb3B0aW9ucy5jYWxsYmFja3MsXG5cdFx0XHR0YWdzOiBvcHRpb25zLnRhZ3MsXG5cdFx0XHRtZXRhZGF0YTogb3B0aW9ucy5tZXRhZGF0YSxcblx0XHRcdHJ1bk5hbWU6IG9wdGlvbnMucnVuTmFtZSxcblx0XHRcdGNvbmZpZ3VyYWJsZTogb3B0aW9ucy5jb25maWd1cmFibGUsXG5cdFx0XHRyZWN1cnNpb25MaW1pdDogb3B0aW9ucy5yZWN1cnNpb25MaW1pdCxcblx0XHRcdG1heENvbmN1cnJlbmN5OiBvcHRpb25zLm1heENvbmN1cnJlbmN5LFxuXHRcdFx0cnVuSWQ6IG9wdGlvbnMucnVuSWQsXG5cdFx0XHR0aW1lb3V0OiBvcHRpb25zLnRpbWVvdXQsXG5cdFx0XHRzaWduYWw6IG9wdGlvbnMuc2lnbmFsXG5cdFx0fSk7XG5cdFx0Y29uc3QgY2FsbE9wdGlvbnMgPSB7IC4uLm9wdGlvbnMgfTtcblx0XHRkZWxldGUgY2FsbE9wdGlvbnMuY2FsbGJhY2tzO1xuXHRcdGRlbGV0ZSBjYWxsT3B0aW9ucy50YWdzO1xuXHRcdGRlbGV0ZSBjYWxsT3B0aW9ucy5tZXRhZGF0YTtcblx0XHRkZWxldGUgY2FsbE9wdGlvbnMucnVuTmFtZTtcblx0XHRkZWxldGUgY2FsbE9wdGlvbnMuY29uZmlndXJhYmxlO1xuXHRcdGRlbGV0ZSBjYWxsT3B0aW9ucy5yZWN1cnNpb25MaW1pdDtcblx0XHRkZWxldGUgY2FsbE9wdGlvbnMubWF4Q29uY3VycmVuY3k7XG5cdFx0ZGVsZXRlIGNhbGxPcHRpb25zLnJ1bklkO1xuXHRcdGRlbGV0ZSBjYWxsT3B0aW9ucy50aW1lb3V0O1xuXHRcdGRlbGV0ZSBjYWxsT3B0aW9ucy5zaWduYWw7XG5cdFx0cmV0dXJuIFtydW5uYWJsZUNvbmZpZywgY2FsbE9wdGlvbnNdO1xuXHR9XG5cdGFzeW5jIF9jYWxsV2l0aENvbmZpZyhmdW5jLCBpbnB1dCwgb3B0aW9ucykge1xuXHRcdGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcblx0XHRjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKGNvbmZpZyk7XG5cdFx0Y29uc3QgcnVuTWFuYWdlciA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwgX2NvZXJjZVRvRGljdChpbnB1dCwgXCJpbnB1dFwiKSwgY29uZmlnLnJ1bklkLCBjb25maWc/LnJ1blR5cGUsIHZvaWQgMCwgdm9pZCAwLCBjb25maWc/LnJ1bk5hbWUgPz8gdGhpcy5nZXROYW1lKCkpO1xuXHRcdGRlbGV0ZSBjb25maWcucnVuSWQ7XG5cdFx0bGV0IG91dHB1dDtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgcHJvbWlzZSA9IGZ1bmMuY2FsbCh0aGlzLCBpbnB1dCwgY29uZmlnLCBydW5NYW5hZ2VyKTtcblx0XHRcdG91dHB1dCA9IGF3YWl0IHJhY2VXaXRoU2lnbmFsKHByb21pc2UsIG9wdGlvbnM/LnNpZ25hbCk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0YXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihlKTtcblx0XHRcdHRocm93IGU7XG5cdFx0fVxuXHRcdGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRW5kKF9jb2VyY2VUb0RpY3Qob3V0cHV0LCBcIm91dHB1dFwiKSk7XG5cdFx0cmV0dXJuIG91dHB1dDtcblx0fVxuXHQvKipcblx0KiBJbnRlcm5hbCBtZXRob2QgdGhhdCBoYW5kbGVzIGJhdGNoaW5nIGFuZCBjb25maWd1cmF0aW9uIGZvciBhIHJ1bm5hYmxlXG5cdCogSXQgdGFrZXMgYSBmdW5jdGlvbiwgaW5wdXQgdmFsdWVzLCBhbmQgb3B0aW9uYWwgY29uZmlndXJhdGlvbiwgYW5kXG5cdCogcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgb3V0cHV0IHZhbHVlcy5cblx0KiBAcGFyYW0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYmUgZXhlY3V0ZWQgZm9yIGVhY2ggaW5wdXQgdmFsdWUuXG5cdCogQHBhcmFtIGlucHV0IFRoZSBpbnB1dCB2YWx1ZXMgdG8gYmUgcHJvY2Vzc2VkLlxuXHQqIEBwYXJhbSBjb25maWcgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBmb3IgdGhlIGZ1bmN0aW9uIGV4ZWN1dGlvbi5cblx0KiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgb3V0cHV0IHZhbHVlcy5cblx0Ki9cblx0YXN5bmMgX2JhdGNoV2l0aENvbmZpZyhmdW5jLCBpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuXHRcdGNvbnN0IG9wdGlvbnNMaXN0ID0gdGhpcy5fZ2V0T3B0aW9uc0xpc3Qob3B0aW9ucyA/PyB7fSwgaW5wdXRzLmxlbmd0aCk7XG5cdFx0Y29uc3QgY2FsbGJhY2tNYW5hZ2VycyA9IGF3YWl0IFByb21pc2UuYWxsKG9wdGlvbnNMaXN0Lm1hcChnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcpKTtcblx0XHRjb25zdCBydW5NYW5hZ2VycyA9IGF3YWl0IFByb21pc2UuYWxsKGNhbGxiYWNrTWFuYWdlcnMubWFwKGFzeW5jIChjYWxsYmFja01hbmFnZXIsIGkpID0+IHtcblx0XHRcdGNvbnN0IGhhbmRsZVN0YXJ0UmVzID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXRzW2ldLCBcImlucHV0XCIpLCBvcHRpb25zTGlzdFtpXS5ydW5JZCwgb3B0aW9uc0xpc3RbaV0ucnVuVHlwZSwgdm9pZCAwLCB2b2lkIDAsIG9wdGlvbnNMaXN0W2ldLnJ1bk5hbWUgPz8gdGhpcy5nZXROYW1lKCkpO1xuXHRcdFx0ZGVsZXRlIG9wdGlvbnNMaXN0W2ldLnJ1bklkO1xuXHRcdFx0cmV0dXJuIGhhbmRsZVN0YXJ0UmVzO1xuXHRcdH0pKTtcblx0XHRsZXQgb3V0cHV0cztcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgcHJvbWlzZSA9IGZ1bmMuY2FsbCh0aGlzLCBpbnB1dHMsIG9wdGlvbnNMaXN0LCBydW5NYW5hZ2VycywgYmF0Y2hPcHRpb25zKTtcblx0XHRcdG91dHB1dHMgPSBhd2FpdCByYWNlV2l0aFNpZ25hbChwcm9taXNlLCBvcHRpb25zTGlzdD8uWzBdPy5zaWduYWwpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGF3YWl0IFByb21pc2UuYWxsKHJ1bk1hbmFnZXJzLm1hcCgocnVuTWFuYWdlcikgPT4gcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihlKSkpO1xuXHRcdFx0dGhyb3cgZTtcblx0XHR9XG5cdFx0YXdhaXQgUHJvbWlzZS5hbGwocnVuTWFuYWdlcnMubWFwKChydW5NYW5hZ2VyKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChfY29lcmNlVG9EaWN0KG91dHB1dHMsIFwib3V0cHV0XCIpKSkpO1xuXHRcdHJldHVybiBvdXRwdXRzO1xuXHR9XG5cdC8qKiBAaW50ZXJuYWwgKi9cblx0X2NvbmNhdE91dHB1dENodW5rcyhmaXJzdCwgc2Vjb25kKSB7XG5cdFx0cmV0dXJuIGNvbmNhdChmaXJzdCwgc2Vjb25kKTtcblx0fVxuXHQvKipcblx0KiBIZWxwZXIgbWV0aG9kIHRvIHRyYW5zZm9ybSBhbiBJdGVyYXRvciBvZiBJbnB1dCB2YWx1ZXMgaW50byBhbiBJdGVyYXRvciBvZlxuXHQqIE91dHB1dCB2YWx1ZXMsIHdpdGggY2FsbGJhY2tzLlxuXHQqIFVzZSB0aGlzIHRvIGltcGxlbWVudCBgc3RyZWFtKClgIG9yIGB0cmFuc2Zvcm0oKWAgaW4gUnVubmFibGUgc3ViY2xhc3Nlcy5cblx0Ki9cblx0YXN5bmMgKl90cmFuc2Zvcm1TdHJlYW1XaXRoQ29uZmlnKGlucHV0R2VuZXJhdG9yLCB0cmFuc2Zvcm1lciwgb3B0aW9ucykge1xuXHRcdGxldCBmaW5hbElucHV0O1xuXHRcdGxldCBmaW5hbElucHV0U3VwcG9ydGVkID0gdHJ1ZTtcblx0XHRsZXQgZmluYWxPdXRwdXQ7XG5cdFx0bGV0IGZpbmFsT3V0cHV0U3VwcG9ydGVkID0gdHJ1ZTtcblx0XHRjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG5cdFx0Y29uc3QgY2FsbGJhY2tNYW5hZ2VyXyA9IGF3YWl0IGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZyhjb25maWcpO1xuXHRcdGNvbnN0IG91dGVyVGhpcyA9IHRoaXM7XG5cdFx0YXN5bmMgZnVuY3Rpb24qIHdyYXBJbnB1dEZvclRyYWNpbmcoKSB7XG5cdFx0XHRmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGlucHV0R2VuZXJhdG9yKSB7XG5cdFx0XHRcdGlmIChmaW5hbElucHV0U3VwcG9ydGVkKSBpZiAoZmluYWxJbnB1dCA9PT0gdm9pZCAwKSBmaW5hbElucHV0ID0gY2h1bms7XG5cdFx0XHRcdGVsc2UgdHJ5IHtcblx0XHRcdFx0XHRmaW5hbElucHV0ID0gb3V0ZXJUaGlzLl9jb25jYXRPdXRwdXRDaHVua3MoZmluYWxJbnB1dCwgY2h1bmspO1xuXHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHRmaW5hbElucHV0ID0gdm9pZCAwO1xuXHRcdFx0XHRcdGZpbmFsSW5wdXRTdXBwb3J0ZWQgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHR5aWVsZCBjaHVuaztcblx0XHRcdH1cblx0XHR9XG5cdFx0bGV0IHJ1bk1hbmFnZXI7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHBpcGUgPSBhd2FpdCBwaXBlR2VuZXJhdG9yV2l0aFNldHVwKHRyYW5zZm9ybWVyLmJpbmQodGhpcyksIHdyYXBJbnB1dEZvclRyYWNpbmcoKSwgYXN5bmMgKCkgPT4gY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlQ2hhaW5TdGFydCh0aGlzLnRvSlNPTigpLCB7IGlucHV0OiBcIlwiIH0sIGNvbmZpZy5ydW5JZCwgY29uZmlnLnJ1blR5cGUsIHZvaWQgMCwgdm9pZCAwLCBjb25maWcucnVuTmFtZSA/PyB0aGlzLmdldE5hbWUoKSwgdm9pZCAwLCB7IGxjX2RlZmVyc19pbnB1dHM6IHRydWUgfSksIG9wdGlvbnM/LnNpZ25hbCwgY29uZmlnKTtcblx0XHRcdGRlbGV0ZSBjb25maWcucnVuSWQ7XG5cdFx0XHRydW5NYW5hZ2VyID0gcGlwZS5zZXR1cDtcblx0XHRcdGNvbnN0IHN0cmVhbUV2ZW50c0hhbmRsZXIgPSBydW5NYW5hZ2VyPy5oYW5kbGVycy5maW5kKGlzU3RyZWFtRXZlbnRzSGFuZGxlcik7XG5cdFx0XHRsZXQgaXRlcmF0b3IgPSBwaXBlLm91dHB1dDtcblx0XHRcdGlmIChzdHJlYW1FdmVudHNIYW5kbGVyICE9PSB2b2lkIDAgJiYgcnVuTWFuYWdlciAhPT0gdm9pZCAwKSBpdGVyYXRvciA9IHN0cmVhbUV2ZW50c0hhbmRsZXIudGFwT3V0cHV0SXRlcmFibGUocnVuTWFuYWdlci5ydW5JZCwgaXRlcmF0b3IpO1xuXHRcdFx0Y29uc3Qgc3RyZWFtTG9nSGFuZGxlciA9IHJ1bk1hbmFnZXI/LmhhbmRsZXJzLmZpbmQoaXNMb2dTdHJlYW1IYW5kbGVyKTtcblx0XHRcdGlmIChzdHJlYW1Mb2dIYW5kbGVyICE9PSB2b2lkIDAgJiYgcnVuTWFuYWdlciAhPT0gdm9pZCAwKSBpdGVyYXRvciA9IHN0cmVhbUxvZ0hhbmRsZXIudGFwT3V0cHV0SXRlcmFibGUocnVuTWFuYWdlci5ydW5JZCwgaXRlcmF0b3IpO1xuXHRcdFx0Zm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBpdGVyYXRvcikge1xuXHRcdFx0XHR5aWVsZCBjaHVuaztcblx0XHRcdFx0aWYgKGZpbmFsT3V0cHV0U3VwcG9ydGVkKSBpZiAoZmluYWxPdXRwdXQgPT09IHZvaWQgMCkgZmluYWxPdXRwdXQgPSBjaHVuaztcblx0XHRcdFx0ZWxzZSB0cnkge1xuXHRcdFx0XHRcdGZpbmFsT3V0cHV0ID0gdGhpcy5fY29uY2F0T3V0cHV0Q2h1bmtzKGZpbmFsT3V0cHV0LCBjaHVuayk7XG5cdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdGZpbmFsT3V0cHV0ID0gdm9pZCAwO1xuXHRcdFx0XHRcdGZpbmFsT3V0cHV0U3VwcG9ydGVkID0gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUsIHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIHsgaW5wdXRzOiBfY29lcmNlVG9EaWN0KGZpbmFsSW5wdXQsIFwiaW5wdXRcIikgfSk7XG5cdFx0XHR0aHJvdyBlO1xuXHRcdH1cblx0XHRhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChmaW5hbE91dHB1dCA/PyB7fSwgdm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgeyBpbnB1dHM6IF9jb2VyY2VUb0RpY3QoZmluYWxJbnB1dCwgXCJpbnB1dFwiKSB9KTtcblx0fVxuXHRnZXRHcmFwaChfKSB7XG5cdFx0Y29uc3QgZ3JhcGggPSBuZXcgR3JhcGgoKTtcblx0XHRjb25zdCBpbnB1dE5vZGUgPSBncmFwaC5hZGROb2RlKHtcblx0XHRcdG5hbWU6IGAke3RoaXMuZ2V0TmFtZSgpfUlucHV0YCxcblx0XHRcdHNjaGVtYTogei5hbnkoKVxuXHRcdH0pO1xuXHRcdGNvbnN0IHJ1bm5hYmxlTm9kZSA9IGdyYXBoLmFkZE5vZGUodGhpcyk7XG5cdFx0Y29uc3Qgb3V0cHV0Tm9kZSA9IGdyYXBoLmFkZE5vZGUoe1xuXHRcdFx0bmFtZTogYCR7dGhpcy5nZXROYW1lKCl9T3V0cHV0YCxcblx0XHRcdHNjaGVtYTogei5hbnkoKVxuXHRcdH0pO1xuXHRcdGdyYXBoLmFkZEVkZ2UoaW5wdXROb2RlLCBydW5uYWJsZU5vZGUpO1xuXHRcdGdyYXBoLmFkZEVkZ2UocnVubmFibGVOb2RlLCBvdXRwdXROb2RlKTtcblx0XHRyZXR1cm4gZ3JhcGg7XG5cdH1cblx0LyoqXG5cdCogQ3JlYXRlIGEgbmV3IHJ1bm5hYmxlIHNlcXVlbmNlIHRoYXQgcnVucyBlYWNoIGluZGl2aWR1YWwgcnVubmFibGUgaW4gc2VyaWVzLFxuXHQqIHBpcGluZyB0aGUgb3V0cHV0IG9mIG9uZSBydW5uYWJsZSBpbnRvIGFub3RoZXIgcnVubmFibGUgb3IgcnVubmFibGUtbGlrZS5cblx0KiBAcGFyYW0gY29lcmNlYWJsZSBBIHJ1bm5hYmxlLCBmdW5jdGlvbiwgb3Igb2JqZWN0IHdob3NlIHZhbHVlcyBhcmUgZnVuY3Rpb25zIG9yIHJ1bm5hYmxlcy5cblx0KiBAcmV0dXJucyBBIG5ldyBydW5uYWJsZSBzZXF1ZW5jZS5cblx0Ki9cblx0cGlwZShjb2VyY2VhYmxlKSB7XG5cdFx0cmV0dXJuIG5ldyBSdW5uYWJsZVNlcXVlbmNlKHtcblx0XHRcdGZpcnN0OiB0aGlzLFxuXHRcdFx0bGFzdDogX2NvZXJjZVRvUnVubmFibGUoY29lcmNlYWJsZSlcblx0XHR9KTtcblx0fVxuXHQvKipcblx0KiBQaWNrIGtleXMgZnJvbSB0aGUgZGljdCBvdXRwdXQgb2YgdGhpcyBydW5uYWJsZS4gUmV0dXJucyBhIG5ldyBydW5uYWJsZS5cblx0Ki9cblx0cGljayhrZXlzKSB7XG5cdFx0cmV0dXJuIHRoaXMucGlwZShuZXcgUnVubmFibGVQaWNrKGtleXMpKTtcblx0fVxuXHQvKipcblx0KiBBc3NpZ25zIG5ldyBmaWVsZHMgdG8gdGhlIGRpY3Qgb3V0cHV0IG9mIHRoaXMgcnVubmFibGUuIFJldHVybnMgYSBuZXcgcnVubmFibGUuXG5cdCovXG5cdGFzc2lnbihtYXBwaW5nKSB7XG5cdFx0cmV0dXJuIHRoaXMucGlwZShuZXcgUnVubmFibGVBc3NpZ24obmV3IFJ1bm5hYmxlTWFwKHsgc3RlcHM6IG1hcHBpbmcgfSkpKTtcblx0fVxuXHQvKipcblx0KiBEZWZhdWx0IGltcGxlbWVudGF0aW9uIG9mIHRyYW5zZm9ybSwgd2hpY2ggYnVmZmVycyBpbnB1dCBhbmQgdGhlbiBjYWxscyBzdHJlYW0uXG5cdCogU3ViY2xhc3NlcyBzaG91bGQgb3ZlcnJpZGUgdGhpcyBtZXRob2QgaWYgdGhleSBjYW4gc3RhcnQgcHJvZHVjaW5nIG91dHB1dCB3aGlsZVxuXHQqIGlucHV0IGlzIHN0aWxsIGJlaW5nIGdlbmVyYXRlZC5cblx0KiBAcGFyYW0gZ2VuZXJhdG9yXG5cdCogQHBhcmFtIG9wdGlvbnNcblx0Ki9cblx0YXN5bmMgKnRyYW5zZm9ybShnZW5lcmF0b3IsIG9wdGlvbnMpIHtcblx0XHRsZXQgZmluYWxDaHVuaztcblx0XHRmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGdlbmVyYXRvcikgaWYgKGZpbmFsQ2h1bmsgPT09IHZvaWQgMCkgZmluYWxDaHVuayA9IGNodW5rO1xuXHRcdGVsc2UgZmluYWxDaHVuayA9IHRoaXMuX2NvbmNhdE91dHB1dENodW5rcyhmaW5hbENodW5rLCBjaHVuayk7XG5cdFx0eWllbGQqIHRoaXMuX3N0cmVhbUl0ZXJhdG9yKGZpbmFsQ2h1bmssIGVuc3VyZUNvbmZpZyhvcHRpb25zKSk7XG5cdH1cblx0LyoqXG5cdCogU3RyZWFtIGFsbCBvdXRwdXQgZnJvbSBhIHJ1bm5hYmxlLCBhcyByZXBvcnRlZCB0byB0aGUgY2FsbGJhY2sgc3lzdGVtLlxuXHQqIFRoaXMgaW5jbHVkZXMgYWxsIGlubmVyIHJ1bnMgb2YgTExNcywgUmV0cmlldmVycywgVG9vbHMsIGV0Yy5cblx0KiBPdXRwdXQgaXMgc3RyZWFtZWQgYXMgTG9nIG9iamVjdHMsIHdoaWNoIGluY2x1ZGUgYSBsaXN0IG9mXG5cdCoganNvbnBhdGNoIG9wcyB0aGF0IGRlc2NyaWJlIGhvdyB0aGUgc3RhdGUgb2YgdGhlIHJ1biBoYXMgY2hhbmdlZCBpbiBlYWNoXG5cdCogc3RlcCwgYW5kIHRoZSBmaW5hbCBzdGF0ZSBvZiB0aGUgcnVuLlxuXHQqIFRoZSBqc29ucGF0Y2ggb3BzIGNhbiBiZSBhcHBsaWVkIGluIG9yZGVyIHRvIGNvbnN0cnVjdCBzdGF0ZS5cblx0KiBAcGFyYW0gaW5wdXRcblx0KiBAcGFyYW0gb3B0aW9uc1xuXHQqIEBwYXJhbSBzdHJlYW1PcHRpb25zXG5cdCovXG5cdGFzeW5jICpzdHJlYW1Mb2coaW5wdXQsIG9wdGlvbnMsIHN0cmVhbU9wdGlvbnMpIHtcblx0XHRjb25zdCBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIgPSBuZXcgTG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyKHtcblx0XHRcdC4uLnN0cmVhbU9wdGlvbnMsXG5cdFx0XHRhdXRvQ2xvc2U6IGZhbHNlLFxuXHRcdFx0X3NjaGVtYUZvcm1hdDogXCJvcmlnaW5hbFwiXG5cdFx0fSk7XG5cdFx0Y29uc3QgY29uZmlnID0gZW5zdXJlQ29uZmlnKG9wdGlvbnMpO1xuXHRcdHlpZWxkKiB0aGlzLl9zdHJlYW1Mb2coaW5wdXQsIGxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciwgY29uZmlnKTtcblx0fVxuXHRhc3luYyAqX3N0cmVhbUxvZyhpbnB1dCwgbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyLCBjb25maWcpIHtcblx0XHRjb25zdCB7IGNhbGxiYWNrcyB9ID0gY29uZmlnO1xuXHRcdGlmIChjYWxsYmFja3MgPT09IHZvaWQgMCkgY29uZmlnLmNhbGxiYWNrcyA9IFtsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXJdO1xuXHRcdGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoY2FsbGJhY2tzKSkgY29uZmlnLmNhbGxiYWNrcyA9IGNhbGxiYWNrcy5jb25jYXQoW2xvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlcl0pO1xuXHRcdGVsc2Uge1xuXHRcdFx0Y29uc3QgY29waWVkQ2FsbGJhY2tzID0gY2FsbGJhY2tzLmNvcHkoKTtcblx0XHRcdGNvcGllZENhbGxiYWNrcy5hZGRIYW5kbGVyKGxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciwgdHJ1ZSk7XG5cdFx0XHRjb25maWcuY2FsbGJhY2tzID0gY29waWVkQ2FsbGJhY2tzO1xuXHRcdH1cblx0XHRjb25zdCBydW5uYWJsZVN0cmVhbVByb21pc2UgPSB0aGlzLnN0cmVhbShpbnB1dCwgY29uZmlnKTtcblx0XHRhc3luYyBmdW5jdGlvbiBjb25zdW1lUnVubmFibGVTdHJlYW0oKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25zdCBydW5uYWJsZVN0cmVhbSA9IGF3YWl0IHJ1bm5hYmxlU3RyZWFtUHJvbWlzZTtcblx0XHRcdFx0Zm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBydW5uYWJsZVN0cmVhbSkge1xuXHRcdFx0XHRcdGNvbnN0IHBhdGNoID0gbmV3IFJ1bkxvZ1BhdGNoKHsgb3BzOiBbe1xuXHRcdFx0XHRcdFx0b3A6IFwiYWRkXCIsXG5cdFx0XHRcdFx0XHRwYXRoOiBcIi9zdHJlYW1lZF9vdXRwdXQvLVwiLFxuXHRcdFx0XHRcdFx0dmFsdWU6IGNodW5rXG5cdFx0XHRcdFx0fV0gfSk7XG5cdFx0XHRcdFx0YXdhaXQgbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyLndyaXRlci53cml0ZShwYXRjaCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZmluYWxseSB7XG5cdFx0XHRcdGF3YWl0IGxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlci53cml0ZXIuY2xvc2UoKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0Y29uc3QgcnVubmFibGVTdHJlYW1Db25zdW1lUHJvbWlzZSA9IGNvbnN1bWVSdW5uYWJsZVN0cmVhbSgpO1xuXHRcdHRyeSB7XG5cdFx0XHRmb3IgYXdhaXQgKGNvbnN0IGxvZyBvZiBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIpIHlpZWxkIGxvZztcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0YXdhaXQgcnVubmFibGVTdHJlYW1Db25zdW1lUHJvbWlzZTtcblx0XHR9XG5cdH1cblx0c3RyZWFtRXZlbnRzKGlucHV0LCBvcHRpb25zLCBzdHJlYW1PcHRpb25zKSB7XG5cdFx0bGV0IHN0cmVhbTtcblx0XHRpZiAob3B0aW9ucy52ZXJzaW9uID09PSBcInYxXCIpIHN0cmVhbSA9IHRoaXMuX3N0cmVhbUV2ZW50c1YxKGlucHV0LCBvcHRpb25zLCBzdHJlYW1PcHRpb25zKTtcblx0XHRlbHNlIGlmIChvcHRpb25zLnZlcnNpb24gPT09IFwidjJcIikgc3RyZWFtID0gdGhpcy5fc3RyZWFtRXZlbnRzVjIoaW5wdXQsIG9wdGlvbnMsIHN0cmVhbU9wdGlvbnMpO1xuXHRcdGVsc2UgdGhyb3cgbmV3IEVycm9yKGBPbmx5IHZlcnNpb25zIFwidjFcIiBhbmQgXCJ2MlwiIG9mIHRoZSBzY2hlbWEgYXJlIGN1cnJlbnRseSBzdXBwb3J0ZWQuYCk7XG5cdFx0aWYgKG9wdGlvbnMuZW5jb2RpbmcgPT09IFwidGV4dC9ldmVudC1zdHJlYW1cIikgcmV0dXJuIGNvbnZlcnRUb0h0dHBFdmVudFN0cmVhbShzdHJlYW0pO1xuXHRcdGVsc2UgcmV0dXJuIEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0uZnJvbUFzeW5jR2VuZXJhdG9yKHN0cmVhbSk7XG5cdH1cblx0YXN5bmMgKl9zdHJlYW1FdmVudHNWMihpbnB1dCwgb3B0aW9ucywgc3RyZWFtT3B0aW9ucykge1xuXHRcdGNvbnN0IGV2ZW50U3RyZWFtZXIgPSBuZXcgRXZlbnRTdHJlYW1DYWxsYmFja0hhbmRsZXIoe1xuXHRcdFx0Li4uc3RyZWFtT3B0aW9ucyxcblx0XHRcdGF1dG9DbG9zZTogZmFsc2Vcblx0XHR9KTtcblx0XHRjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG5cdFx0Y29uc3QgcnVuSWQgPSBjb25maWcucnVuSWQgPz8gdjQoKTtcblx0XHRjb25maWcucnVuSWQgPSBydW5JZDtcblx0XHRjb25zdCBjYWxsYmFja3MgPSBjb25maWcuY2FsbGJhY2tzO1xuXHRcdGlmIChjYWxsYmFja3MgPT09IHZvaWQgMCkgY29uZmlnLmNhbGxiYWNrcyA9IFtldmVudFN0cmVhbWVyXTtcblx0XHRlbHNlIGlmIChBcnJheS5pc0FycmF5KGNhbGxiYWNrcykpIGNvbmZpZy5jYWxsYmFja3MgPSBjYWxsYmFja3MuY29uY2F0KGV2ZW50U3RyZWFtZXIpO1xuXHRcdGVsc2Uge1xuXHRcdFx0Y29uc3QgY29waWVkQ2FsbGJhY2tzID0gY2FsbGJhY2tzLmNvcHkoKTtcblx0XHRcdGNvcGllZENhbGxiYWNrcy5hZGRIYW5kbGVyKGV2ZW50U3RyZWFtZXIsIHRydWUpO1xuXHRcdFx0Y29uZmlnLmNhbGxiYWNrcyA9IGNvcGllZENhbGxiYWNrcztcblx0XHR9XG5cdFx0Y29uc3QgYWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuXHRcdGNvbnN0IG91dGVyVGhpcyA9IHRoaXM7XG5cdFx0YXN5bmMgZnVuY3Rpb24gY29uc3VtZVJ1bm5hYmxlU3RyZWFtKCkge1xuXHRcdFx0bGV0IHNpZ25hbDtcblx0XHRcdGxldCBsaXN0ZW5lciA9IG51bGw7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRpZiAob3B0aW9ucz8uc2lnbmFsKSBpZiAoXCJhbnlcIiBpbiBBYm9ydFNpZ25hbCkgc2lnbmFsID0gQWJvcnRTaWduYWwuYW55KFthYm9ydENvbnRyb2xsZXIuc2lnbmFsLCBvcHRpb25zLnNpZ25hbF0pO1xuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRzaWduYWwgPSBvcHRpb25zLnNpZ25hbDtcblx0XHRcdFx0XHRsaXN0ZW5lciA9ICgpID0+IHtcblx0XHRcdFx0XHRcdGFib3J0Q29udHJvbGxlci5hYm9ydCgpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0b3B0aW9ucy5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIGxpc3RlbmVyLCB7IG9uY2U6IHRydWUgfSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSBzaWduYWwgPSBhYm9ydENvbnRyb2xsZXIuc2lnbmFsO1xuXHRcdFx0XHRjb25zdCBydW5uYWJsZVN0cmVhbSA9IGF3YWl0IG91dGVyVGhpcy5zdHJlYW0oaW5wdXQsIHtcblx0XHRcdFx0XHQuLi5jb25maWcsXG5cdFx0XHRcdFx0c2lnbmFsXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRjb25zdCB0YXBwZWRTdHJlYW0gPSBldmVudFN0cmVhbWVyLnRhcE91dHB1dEl0ZXJhYmxlKHJ1bklkLCBydW5uYWJsZVN0cmVhbSk7XG5cdFx0XHRcdGZvciBhd2FpdCAoY29uc3QgXyBvZiB0YXBwZWRTdHJlYW0pIGlmIChhYm9ydENvbnRyb2xsZXIuc2lnbmFsLmFib3J0ZWQpIGJyZWFrO1xuXHRcdFx0fSBmaW5hbGx5IHtcblx0XHRcdFx0YXdhaXQgZXZlbnRTdHJlYW1lci5maW5pc2goKTtcblx0XHRcdFx0aWYgKHNpZ25hbCAmJiBsaXN0ZW5lcikgc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBsaXN0ZW5lcik7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IHJ1bm5hYmxlU3RyZWFtQ29uc3VtZVByb21pc2UgPSBjb25zdW1lUnVubmFibGVTdHJlYW0oKTtcblx0XHRsZXQgZmlyc3RFdmVudFNlbnQgPSBmYWxzZTtcblx0XHRsZXQgZmlyc3RFdmVudFJ1bklkO1xuXHRcdHRyeSB7XG5cdFx0XHRmb3IgYXdhaXQgKGNvbnN0IGV2ZW50IG9mIGV2ZW50U3RyZWFtZXIpIHtcblx0XHRcdFx0aWYgKCFmaXJzdEV2ZW50U2VudCkge1xuXHRcdFx0XHRcdGV2ZW50LmRhdGEuaW5wdXQgPSBpbnB1dDtcblx0XHRcdFx0XHRmaXJzdEV2ZW50U2VudCA9IHRydWU7XG5cdFx0XHRcdFx0Zmlyc3RFdmVudFJ1bklkID0gZXZlbnQucnVuX2lkO1xuXHRcdFx0XHRcdHlpZWxkIGV2ZW50O1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChldmVudC5ydW5faWQgPT09IGZpcnN0RXZlbnRSdW5JZCAmJiBldmVudC5ldmVudC5lbmRzV2l0aChcIl9lbmRcIikpIHtcblx0XHRcdFx0XHRpZiAoZXZlbnQuZGF0YT8uaW5wdXQpIGRlbGV0ZSBldmVudC5kYXRhLmlucHV0O1xuXHRcdFx0XHR9XG5cdFx0XHRcdHlpZWxkIGV2ZW50O1xuXHRcdFx0fVxuXHRcdH0gZmluYWxseSB7XG5cdFx0XHRhYm9ydENvbnRyb2xsZXIuYWJvcnQoKTtcblx0XHRcdGF3YWl0IHJ1bm5hYmxlU3RyZWFtQ29uc3VtZVByb21pc2U7XG5cdFx0fVxuXHR9XG5cdGFzeW5jICpfc3RyZWFtRXZlbnRzVjEoaW5wdXQsIG9wdGlvbnMsIHN0cmVhbU9wdGlvbnMpIHtcblx0XHRsZXQgcnVuTG9nO1xuXHRcdGxldCBoYXNFbmNvdW50ZXJlZFN0YXJ0RXZlbnQgPSBmYWxzZTtcblx0XHRjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG5cdFx0Y29uc3Qgcm9vdFRhZ3MgPSBjb25maWcudGFncyA/PyBbXTtcblx0XHRjb25zdCByb290TWV0YWRhdGEgPSBjb25maWcubWV0YWRhdGEgPz8ge307XG5cdFx0Y29uc3Qgcm9vdE5hbWUgPSBjb25maWcucnVuTmFtZSA/PyB0aGlzLmdldE5hbWUoKTtcblx0XHRjb25zdCBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIgPSBuZXcgTG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyKHtcblx0XHRcdC4uLnN0cmVhbU9wdGlvbnMsXG5cdFx0XHRhdXRvQ2xvc2U6IGZhbHNlLFxuXHRcdFx0X3NjaGVtYUZvcm1hdDogXCJzdHJlYW1pbmdfZXZlbnRzXCJcblx0XHR9KTtcblx0XHRjb25zdCByb290RXZlbnRGaWx0ZXIgPSBuZXcgX1Jvb3RFdmVudEZpbHRlcih7IC4uLnN0cmVhbU9wdGlvbnMgfSk7XG5cdFx0Y29uc3QgbG9nU3RyZWFtID0gdGhpcy5fc3RyZWFtTG9nKGlucHV0LCBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIsIGNvbmZpZyk7XG5cdFx0Zm9yIGF3YWl0IChjb25zdCBsb2cgb2YgbG9nU3RyZWFtKSB7XG5cdFx0XHRpZiAoIXJ1bkxvZykgcnVuTG9nID0gUnVuTG9nLmZyb21SdW5Mb2dQYXRjaChsb2cpO1xuXHRcdFx0ZWxzZSBydW5Mb2cgPSBydW5Mb2cuY29uY2F0KGxvZyk7XG5cdFx0XHRpZiAocnVuTG9nLnN0YXRlID09PSB2b2lkIDApIHRocm93IG5ldyBFcnJvcihgSW50ZXJuYWwgZXJyb3I6IFwic3RyZWFtRXZlbnRzXCIgc3RhdGUgaXMgbWlzc2luZy4gUGxlYXNlIG9wZW4gYSBidWcgcmVwb3J0LmApO1xuXHRcdFx0aWYgKCFoYXNFbmNvdW50ZXJlZFN0YXJ0RXZlbnQpIHtcblx0XHRcdFx0aGFzRW5jb3VudGVyZWRTdGFydEV2ZW50ID0gdHJ1ZTtcblx0XHRcdFx0Y29uc3Qgc3RhdGUkMiA9IHsgLi4ucnVuTG9nLnN0YXRlIH07XG5cdFx0XHRcdGNvbnN0IGV2ZW50ID0ge1xuXHRcdFx0XHRcdHJ1bl9pZDogc3RhdGUkMi5pZCxcblx0XHRcdFx0XHRldmVudDogYG9uXyR7c3RhdGUkMi50eXBlfV9zdGFydGAsXG5cdFx0XHRcdFx0bmFtZTogcm9vdE5hbWUsXG5cdFx0XHRcdFx0dGFnczogcm9vdFRhZ3MsXG5cdFx0XHRcdFx0bWV0YWRhdGE6IHJvb3RNZXRhZGF0YSxcblx0XHRcdFx0XHRkYXRhOiB7IGlucHV0IH1cblx0XHRcdFx0fTtcblx0XHRcdFx0aWYgKHJvb3RFdmVudEZpbHRlci5pbmNsdWRlRXZlbnQoZXZlbnQsIHN0YXRlJDIudHlwZSkpIHlpZWxkIGV2ZW50O1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgcGF0aHMgPSBsb2cub3BzLmZpbHRlcigob3ApID0+IG9wLnBhdGguc3RhcnRzV2l0aChcIi9sb2dzL1wiKSkubWFwKChvcCkgPT4gb3AucGF0aC5zcGxpdChcIi9cIilbMl0pO1xuXHRcdFx0Y29uc3QgZGVkdXBlZFBhdGhzID0gWy4uLm5ldyBTZXQocGF0aHMpXTtcblx0XHRcdGZvciAoY29uc3QgcGF0aCBvZiBkZWR1cGVkUGF0aHMpIHtcblx0XHRcdFx0bGV0IGV2ZW50VHlwZTtcblx0XHRcdFx0bGV0IGRhdGEgPSB7fTtcblx0XHRcdFx0Y29uc3QgbG9nRW50cnkgPSBydW5Mb2cuc3RhdGUubG9nc1twYXRoXTtcblx0XHRcdFx0aWYgKGxvZ0VudHJ5LmVuZF90aW1lID09PSB2b2lkIDApIGlmIChsb2dFbnRyeS5zdHJlYW1lZF9vdXRwdXQubGVuZ3RoID4gMCkgZXZlbnRUeXBlID0gXCJzdHJlYW1cIjtcblx0XHRcdFx0ZWxzZSBldmVudFR5cGUgPSBcInN0YXJ0XCI7XG5cdFx0XHRcdGVsc2UgZXZlbnRUeXBlID0gXCJlbmRcIjtcblx0XHRcdFx0aWYgKGV2ZW50VHlwZSA9PT0gXCJzdGFydFwiKSB7XG5cdFx0XHRcdFx0aWYgKGxvZ0VudHJ5LmlucHV0cyAhPT0gdm9pZCAwKSBkYXRhLmlucHV0ID0gbG9nRW50cnkuaW5wdXRzO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGV2ZW50VHlwZSA9PT0gXCJlbmRcIikge1xuXHRcdFx0XHRcdGlmIChsb2dFbnRyeS5pbnB1dHMgIT09IHZvaWQgMCkgZGF0YS5pbnB1dCA9IGxvZ0VudHJ5LmlucHV0cztcblx0XHRcdFx0XHRkYXRhLm91dHB1dCA9IGxvZ0VudHJ5LmZpbmFsX291dHB1dDtcblx0XHRcdFx0fSBlbHNlIGlmIChldmVudFR5cGUgPT09IFwic3RyZWFtXCIpIHtcblx0XHRcdFx0XHRjb25zdCBjaHVua0NvdW50ID0gbG9nRW50cnkuc3RyZWFtZWRfb3V0cHV0Lmxlbmd0aDtcblx0XHRcdFx0XHRpZiAoY2h1bmtDb3VudCAhPT0gMSkgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBleGFjdGx5IG9uZSBjaHVuayBvZiBzdHJlYW1lZCBvdXRwdXQsIGdvdCAke2NodW5rQ291bnR9IGluc3RlYWQuIEVuY291bnRlcmVkIGluOiBcIiR7bG9nRW50cnkubmFtZX1cImApO1xuXHRcdFx0XHRcdGRhdGEgPSB7IGNodW5rOiBsb2dFbnRyeS5zdHJlYW1lZF9vdXRwdXRbMF0gfTtcblx0XHRcdFx0XHRsb2dFbnRyeS5zdHJlYW1lZF9vdXRwdXQgPSBbXTtcblx0XHRcdFx0fVxuXHRcdFx0XHR5aWVsZCB7XG5cdFx0XHRcdFx0ZXZlbnQ6IGBvbl8ke2xvZ0VudHJ5LnR5cGV9XyR7ZXZlbnRUeXBlfWAsXG5cdFx0XHRcdFx0bmFtZTogbG9nRW50cnkubmFtZSxcblx0XHRcdFx0XHRydW5faWQ6IGxvZ0VudHJ5LmlkLFxuXHRcdFx0XHRcdHRhZ3M6IGxvZ0VudHJ5LnRhZ3MsXG5cdFx0XHRcdFx0bWV0YWRhdGE6IGxvZ0VudHJ5Lm1ldGFkYXRhLFxuXHRcdFx0XHRcdGRhdGFcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IHsgc3RhdGU6IHN0YXRlJDEgfSA9IHJ1bkxvZztcblx0XHRcdGlmIChzdGF0ZSQxLnN0cmVhbWVkX291dHB1dC5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGNvbnN0IGNodW5rQ291bnQgPSBzdGF0ZSQxLnN0cmVhbWVkX291dHB1dC5sZW5ndGg7XG5cdFx0XHRcdGlmIChjaHVua0NvdW50ICE9PSAxKSB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIGV4YWN0bHkgb25lIGNodW5rIG9mIHN0cmVhbWVkIG91dHB1dCwgZ290ICR7Y2h1bmtDb3VudH0gaW5zdGVhZC4gRW5jb3VudGVyZWQgaW46IFwiJHtzdGF0ZSQxLm5hbWV9XCJgKTtcblx0XHRcdFx0Y29uc3QgZGF0YSA9IHsgY2h1bms6IHN0YXRlJDEuc3RyZWFtZWRfb3V0cHV0WzBdIH07XG5cdFx0XHRcdHN0YXRlJDEuc3RyZWFtZWRfb3V0cHV0ID0gW107XG5cdFx0XHRcdGNvbnN0IGV2ZW50ID0ge1xuXHRcdFx0XHRcdGV2ZW50OiBgb25fJHtzdGF0ZSQxLnR5cGV9X3N0cmVhbWAsXG5cdFx0XHRcdFx0cnVuX2lkOiBzdGF0ZSQxLmlkLFxuXHRcdFx0XHRcdHRhZ3M6IHJvb3RUYWdzLFxuXHRcdFx0XHRcdG1ldGFkYXRhOiByb290TWV0YWRhdGEsXG5cdFx0XHRcdFx0bmFtZTogcm9vdE5hbWUsXG5cdFx0XHRcdFx0ZGF0YVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRpZiAocm9vdEV2ZW50RmlsdGVyLmluY2x1ZGVFdmVudChldmVudCwgc3RhdGUkMS50eXBlKSkgeWllbGQgZXZlbnQ7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IHN0YXRlID0gcnVuTG9nPy5zdGF0ZTtcblx0XHRpZiAoc3RhdGUgIT09IHZvaWQgMCkge1xuXHRcdFx0Y29uc3QgZXZlbnQgPSB7XG5cdFx0XHRcdGV2ZW50OiBgb25fJHtzdGF0ZS50eXBlfV9lbmRgLFxuXHRcdFx0XHRuYW1lOiByb290TmFtZSxcblx0XHRcdFx0cnVuX2lkOiBzdGF0ZS5pZCxcblx0XHRcdFx0dGFnczogcm9vdFRhZ3MsXG5cdFx0XHRcdG1ldGFkYXRhOiByb290TWV0YWRhdGEsXG5cdFx0XHRcdGRhdGE6IHsgb3V0cHV0OiBzdGF0ZS5maW5hbF9vdXRwdXQgfVxuXHRcdFx0fTtcblx0XHRcdGlmIChyb290RXZlbnRGaWx0ZXIuaW5jbHVkZUV2ZW50KGV2ZW50LCBzdGF0ZS50eXBlKSkgeWllbGQgZXZlbnQ7XG5cdFx0fVxuXHR9XG5cdHN0YXRpYyBpc1J1bm5hYmxlKHRoaW5nKSB7XG5cdFx0cmV0dXJuIGlzUnVubmFibGVJbnRlcmZhY2UodGhpbmcpO1xuXHR9XG5cdC8qKlxuXHQqIEJpbmQgbGlmZWN5Y2xlIGxpc3RlbmVycyB0byBhIFJ1bm5hYmxlLCByZXR1cm5pbmcgYSBuZXcgUnVubmFibGUuXG5cdCogVGhlIFJ1biBvYmplY3QgY29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHJ1biwgaW5jbHVkaW5nIGl0cyBpZCxcblx0KiB0eXBlLCBpbnB1dCwgb3V0cHV0LCBlcnJvciwgc3RhcnRUaW1lLCBlbmRUaW1lLCBhbmQgYW55IHRhZ3Mgb3IgbWV0YWRhdGFcblx0KiBhZGRlZCB0byB0aGUgcnVuLlxuXHQqXG5cdCogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIFRoZSBvYmplY3QgY29udGFpbmluZyB0aGUgY2FsbGJhY2sgZnVuY3Rpb25zLlxuXHQqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25TdGFydCAtIENhbGxlZCBiZWZvcmUgdGhlIHJ1bm5hYmxlIHN0YXJ0cyBydW5uaW5nLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuXHQqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25FbmQgLSBDYWxsZWQgYWZ0ZXIgdGhlIHJ1bm5hYmxlIGZpbmlzaGVzIHJ1bm5pbmcsIHdpdGggdGhlIFJ1biBvYmplY3QuXG5cdCogQHBhcmFtIHsocnVuOiBSdW4pID0+IHZvaWR9IHBhcmFtcy5vbkVycm9yIC0gQ2FsbGVkIGlmIHRoZSBydW5uYWJsZSB0aHJvd3MgYW4gZXJyb3IsIHdpdGggdGhlIFJ1biBvYmplY3QuXG5cdCovXG5cdHdpdGhMaXN0ZW5lcnMoeyBvblN0YXJ0LCBvbkVuZCwgb25FcnJvciB9KSB7XG5cdFx0cmV0dXJuIG5ldyBSdW5uYWJsZUJpbmRpbmcoe1xuXHRcdFx0Ym91bmQ6IHRoaXMsXG5cdFx0XHRjb25maWc6IHt9LFxuXHRcdFx0Y29uZmlnRmFjdG9yaWVzOiBbKGNvbmZpZykgPT4gKHsgY2FsbGJhY2tzOiBbbmV3IFJvb3RMaXN0ZW5lcnNUcmFjZXIoe1xuXHRcdFx0XHRjb25maWcsXG5cdFx0XHRcdG9uU3RhcnQsXG5cdFx0XHRcdG9uRW5kLFxuXHRcdFx0XHRvbkVycm9yXG5cdFx0XHR9KV0gfSldXG5cdFx0fSk7XG5cdH1cblx0LyoqXG5cdCogQ29udmVydCBhIHJ1bm5hYmxlIHRvIGEgdG9vbC4gUmV0dXJuIGEgbmV3IGluc3RhbmNlIG9mIGBSdW5uYWJsZVRvb2xMaWtlYFxuXHQqIHdoaWNoIGNvbnRhaW5zIHRoZSBydW5uYWJsZSwgbmFtZSwgZGVzY3JpcHRpb24gYW5kIHNjaGVtYS5cblx0KlxuXHQqIEB0ZW1wbGF0ZSB7VCBleHRlbmRzIFJ1bklucHV0ID0gUnVuSW5wdXR9IFJ1bklucHV0IC0gVGhlIGlucHV0IHR5cGUgb2YgdGhlIHJ1bm5hYmxlLiBTaG91bGQgYmUgdGhlIHNhbWUgYXMgdGhlIGBSdW5JbnB1dGAgdHlwZSBvZiB0aGUgcnVubmFibGUuXG5cdCpcblx0KiBAcGFyYW0gZmllbGRzXG5cdCogQHBhcmFtIHtzdHJpbmcgfCB1bmRlZmluZWR9IFtmaWVsZHMubmFtZV0gVGhlIG5hbWUgb2YgdGhlIHRvb2wuIElmIG5vdCBwcm92aWRlZCwgaXQgd2lsbCBkZWZhdWx0IHRvIHRoZSBuYW1lIG9mIHRoZSBydW5uYWJsZS5cblx0KiBAcGFyYW0ge3N0cmluZyB8IHVuZGVmaW5lZH0gW2ZpZWxkcy5kZXNjcmlwdGlvbl0gVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sLiBGYWxscyBiYWNrIHRvIHRoZSBkZXNjcmlwdGlvbiBvbiB0aGUgWm9kIHNjaGVtYSBpZiBub3QgcHJvdmlkZWQsIG9yIHVuZGVmaW5lZCBpZiBuZWl0aGVyIGFyZSBwcm92aWRlZC5cblx0KiBAcGFyYW0ge3ouWm9kVHlwZTxUPn0gW2ZpZWxkcy5zY2hlbWFdIFRoZSBab2Qgc2NoZW1hIGZvciB0aGUgaW5wdXQgb2YgdGhlIHRvb2wuIEluZmVycyB0aGUgWm9kIHR5cGUgZnJvbSB0aGUgaW5wdXQgdHlwZSBvZiB0aGUgcnVubmFibGUuXG5cdCogQHJldHVybnMge1J1bm5hYmxlVG9vbExpa2U8ei5ab2RUeXBlPFQ+LCBSdW5PdXRwdXQ+fSBBbiBpbnN0YW5jZSBvZiBgUnVubmFibGVUb29sTGlrZWAgd2hpY2ggaXMgYSBydW5uYWJsZSB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgdG9vbC5cblx0Ki9cblx0YXNUb29sKGZpZWxkcykge1xuXHRcdHJldHVybiBjb252ZXJ0UnVubmFibGVUb1Rvb2wodGhpcywgZmllbGRzKTtcblx0fVxufTtcbi8qKlxuKiBXcmFwcyBhIHJ1bm5hYmxlIGFuZCBhcHBsaWVzIHBhcnRpYWwgY29uZmlnIHVwb24gaW52b2NhdGlvbi5cbipcbiogQGV4YW1wbGVcbiogYGBgdHlwZXNjcmlwdFxuKiBpbXBvcnQge1xuKiAgIHR5cGUgUnVubmFibGVDb25maWcsXG4qICAgUnVubmFibGVMYW1iZGEsXG4qIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9ydW5uYWJsZXNcIjtcbipcbiogY29uc3QgZW5oYW5jZVByb2ZpbGUgPSAoXG4qICAgcHJvZmlsZTogUmVjb3JkPHN0cmluZywgYW55PixcbiogICBjb25maWc/OiBSdW5uYWJsZUNvbmZpZ1xuKiApID0+IHtcbiogICBpZiAoY29uZmlnPy5jb25maWd1cmFibGU/LnJvbGUpIHtcbiogICAgIHJldHVybiB7IC4uLnByb2ZpbGUsIHJvbGU6IGNvbmZpZy5jb25maWd1cmFibGUucm9sZSB9O1xuKiAgIH1cbiogICByZXR1cm4gcHJvZmlsZTtcbiogfTtcbipcbiogY29uc3QgcnVubmFibGUgPSBSdW5uYWJsZUxhbWJkYS5mcm9tKGVuaGFuY2VQcm9maWxlKTtcbipcbiogLy8gQmluZCBjb25maWd1cmF0aW9uIHRvIHRoZSBydW5uYWJsZSB0byBzZXQgdGhlIHVzZXIncyByb2xlIGR5bmFtaWNhbGx5XG4qIGNvbnN0IGFkbWluUnVubmFibGUgPSBydW5uYWJsZS53aXRoQ29uZmlnKHsgY29uZmlndXJhYmxlOiB7IHJvbGU6IFwiQWRtaW5cIiB9IH0pO1xuKiBjb25zdCB1c2VyUnVubmFibGUgPSBydW5uYWJsZS53aXRoQ29uZmlnKHsgY29uZmlndXJhYmxlOiB7IHJvbGU6IFwiVXNlclwiIH0gfSk7XG4qXG4qIGNvbnN0IHJlc3VsdDEgPSBhd2FpdCBhZG1pblJ1bm5hYmxlLmludm9rZSh7XG4qICAgbmFtZTogXCJBbGljZVwiLFxuKiAgIGVtYWlsOiBcImFsaWNlQGV4YW1wbGUuY29tXCJcbiogfSk7XG4qXG4qIC8vIHsgbmFtZTogXCJBbGljZVwiLCBlbWFpbDogXCJhbGljZUBleGFtcGxlLmNvbVwiLCByb2xlOiBcIkFkbWluXCIgfVxuKlxuKiBjb25zdCByZXN1bHQyID0gYXdhaXQgdXNlclJ1bm5hYmxlLmludm9rZSh7XG4qICAgbmFtZTogXCJCb2JcIixcbiogICBlbWFpbDogXCJib2JAZXhhbXBsZS5jb21cIlxuKiB9KTtcbipcbiogLy8geyBuYW1lOiBcIkJvYlwiLCBlbWFpbDogXCJib2JAZXhhbXBsZS5jb21cIiwgcm9sZTogXCJVc2VyXCIgfVxuKiBgYGBcbiovXG52YXIgUnVubmFibGVCaW5kaW5nID0gY2xhc3MgUnVubmFibGVCaW5kaW5nIGV4dGVuZHMgUnVubmFibGUge1xuXHRzdGF0aWMgbGNfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJSdW5uYWJsZUJpbmRpbmdcIjtcblx0fVxuXHRsY19uYW1lc3BhY2UgPSBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXTtcblx0bGNfc2VyaWFsaXphYmxlID0gdHJ1ZTtcblx0Ym91bmQ7XG5cdGNvbmZpZztcblx0a3dhcmdzO1xuXHRjb25maWdGYWN0b3JpZXM7XG5cdGNvbnN0cnVjdG9yKGZpZWxkcykge1xuXHRcdHN1cGVyKGZpZWxkcyk7XG5cdFx0dGhpcy5ib3VuZCA9IGZpZWxkcy5ib3VuZDtcblx0XHR0aGlzLmt3YXJncyA9IGZpZWxkcy5rd2FyZ3M7XG5cdFx0dGhpcy5jb25maWcgPSBmaWVsZHMuY29uZmlnO1xuXHRcdHRoaXMuY29uZmlnRmFjdG9yaWVzID0gZmllbGRzLmNvbmZpZ0ZhY3Rvcmllcztcblx0fVxuXHRnZXROYW1lKHN1ZmZpeCkge1xuXHRcdHJldHVybiB0aGlzLmJvdW5kLmdldE5hbWUoc3VmZml4KTtcblx0fVxuXHRhc3luYyBfbWVyZ2VDb25maWcoLi4ub3B0aW9ucykge1xuXHRcdGNvbnN0IGNvbmZpZyA9IG1lcmdlQ29uZmlncyh0aGlzLmNvbmZpZywgLi4ub3B0aW9ucyk7XG5cdFx0cmV0dXJuIG1lcmdlQ29uZmlncyhjb25maWcsIC4uLnRoaXMuY29uZmlnRmFjdG9yaWVzID8gYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5jb25maWdGYWN0b3JpZXMubWFwKGFzeW5jIChjb25maWdGYWN0b3J5KSA9PiBhd2FpdCBjb25maWdGYWN0b3J5KGNvbmZpZykpKSA6IFtdKTtcblx0fVxuXHR3aXRoQ29uZmlnKGNvbmZpZykge1xuXHRcdHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih7XG5cdFx0XHRib3VuZDogdGhpcy5ib3VuZCxcblx0XHRcdGt3YXJnczogdGhpcy5rd2FyZ3MsXG5cdFx0XHRjb25maWc6IHtcblx0XHRcdFx0Li4udGhpcy5jb25maWcsXG5cdFx0XHRcdC4uLmNvbmZpZ1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdHdpdGhSZXRyeShmaWVsZHMpIHtcblx0XHRyZXR1cm4gbmV3IFJ1bm5hYmxlUmV0cnkoe1xuXHRcdFx0Ym91bmQ6IHRoaXMuYm91bmQsXG5cdFx0XHRrd2FyZ3M6IHRoaXMua3dhcmdzLFxuXHRcdFx0Y29uZmlnOiB0aGlzLmNvbmZpZyxcblx0XHRcdG1heEF0dGVtcHROdW1iZXI6IGZpZWxkcz8uc3RvcEFmdGVyQXR0ZW1wdCxcblx0XHRcdC4uLmZpZWxkc1xuXHRcdH0pO1xuXHR9XG5cdGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuXHRcdHJldHVybiB0aGlzLmJvdW5kLmludm9rZShpbnB1dCwgYXdhaXQgdGhpcy5fbWVyZ2VDb25maWcob3B0aW9ucywgdGhpcy5rd2FyZ3MpKTtcblx0fVxuXHRhc3luYyBiYXRjaChpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuXHRcdGNvbnN0IG1lcmdlZE9wdGlvbnMgPSBBcnJheS5pc0FycmF5KG9wdGlvbnMpID8gYXdhaXQgUHJvbWlzZS5hbGwob3B0aW9ucy5tYXAoYXN5bmMgKGluZGl2aWR1YWxPcHRpb24pID0+IHRoaXMuX21lcmdlQ29uZmlnKGVuc3VyZUNvbmZpZyhpbmRpdmlkdWFsT3B0aW9uKSwgdGhpcy5rd2FyZ3MpKSkgOiBhd2FpdCB0aGlzLl9tZXJnZUNvbmZpZyhlbnN1cmVDb25maWcob3B0aW9ucyksIHRoaXMua3dhcmdzKTtcblx0XHRyZXR1cm4gdGhpcy5ib3VuZC5iYXRjaChpbnB1dHMsIG1lcmdlZE9wdGlvbnMsIGJhdGNoT3B0aW9ucyk7XG5cdH1cblx0LyoqIEBpbnRlcm5hbCAqL1xuXHRfY29uY2F0T3V0cHV0Q2h1bmtzKGZpcnN0LCBzZWNvbmQpIHtcblx0XHRyZXR1cm4gdGhpcy5ib3VuZC5fY29uY2F0T3V0cHV0Q2h1bmtzKGZpcnN0LCBzZWNvbmQpO1xuXHR9XG5cdGFzeW5jICpfc3RyZWFtSXRlcmF0b3IoaW5wdXQsIG9wdGlvbnMpIHtcblx0XHR5aWVsZCogdGhpcy5ib3VuZC5fc3RyZWFtSXRlcmF0b3IoaW5wdXQsIGF3YWl0IHRoaXMuX21lcmdlQ29uZmlnKGVuc3VyZUNvbmZpZyhvcHRpb25zKSwgdGhpcy5rd2FyZ3MpKTtcblx0fVxuXHRhc3luYyBzdHJlYW0oaW5wdXQsIG9wdGlvbnMpIHtcblx0XHRyZXR1cm4gdGhpcy5ib3VuZC5zdHJlYW0oaW5wdXQsIGF3YWl0IHRoaXMuX21lcmdlQ29uZmlnKGVuc3VyZUNvbmZpZyhvcHRpb25zKSwgdGhpcy5rd2FyZ3MpKTtcblx0fVxuXHRhc3luYyAqdHJhbnNmb3JtKGdlbmVyYXRvciwgb3B0aW9ucykge1xuXHRcdHlpZWxkKiB0aGlzLmJvdW5kLnRyYW5zZm9ybShnZW5lcmF0b3IsIGF3YWl0IHRoaXMuX21lcmdlQ29uZmlnKGVuc3VyZUNvbmZpZyhvcHRpb25zKSwgdGhpcy5rd2FyZ3MpKTtcblx0fVxuXHRzdHJlYW1FdmVudHMoaW5wdXQsIG9wdGlvbnMsIHN0cmVhbU9wdGlvbnMpIHtcblx0XHRjb25zdCBvdXRlclRoaXMgPSB0aGlzO1xuXHRcdGNvbnN0IGdlbmVyYXRvciA9IGFzeW5jIGZ1bmN0aW9uKiAoKSB7XG5cdFx0XHR5aWVsZCogb3V0ZXJUaGlzLmJvdW5kLnN0cmVhbUV2ZW50cyhpbnB1dCwge1xuXHRcdFx0XHQuLi5hd2FpdCBvdXRlclRoaXMuX21lcmdlQ29uZmlnKGVuc3VyZUNvbmZpZyhvcHRpb25zKSwgb3V0ZXJUaGlzLmt3YXJncyksXG5cdFx0XHRcdHZlcnNpb246IG9wdGlvbnMudmVyc2lvblxuXHRcdFx0fSwgc3RyZWFtT3B0aW9ucyk7XG5cdFx0fTtcblx0XHRyZXR1cm4gSXRlcmFibGVSZWFkYWJsZVN0cmVhbS5mcm9tQXN5bmNHZW5lcmF0b3IoZ2VuZXJhdG9yKCkpO1xuXHR9XG5cdHN0YXRpYyBpc1J1bm5hYmxlQmluZGluZyh0aGluZykge1xuXHRcdHJldHVybiB0aGluZy5ib3VuZCAmJiBSdW5uYWJsZS5pc1J1bm5hYmxlKHRoaW5nLmJvdW5kKTtcblx0fVxuXHQvKipcblx0KiBCaW5kIGxpZmVjeWNsZSBsaXN0ZW5lcnMgdG8gYSBSdW5uYWJsZSwgcmV0dXJuaW5nIGEgbmV3IFJ1bm5hYmxlLlxuXHQqIFRoZSBSdW4gb2JqZWN0IGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSBydW4sIGluY2x1ZGluZyBpdHMgaWQsXG5cdCogdHlwZSwgaW5wdXQsIG91dHB1dCwgZXJyb3IsIHN0YXJ0VGltZSwgZW5kVGltZSwgYW5kIGFueSB0YWdzIG9yIG1ldGFkYXRhXG5cdCogYWRkZWQgdG8gdGhlIHJ1bi5cblx0KlxuXHQqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSBUaGUgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGNhbGxiYWNrIGZ1bmN0aW9ucy5cblx0KiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uU3RhcnQgLSBDYWxsZWQgYmVmb3JlIHRoZSBydW5uYWJsZSBzdGFydHMgcnVubmluZywgd2l0aCB0aGUgUnVuIG9iamVjdC5cblx0KiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uRW5kIC0gQ2FsbGVkIGFmdGVyIHRoZSBydW5uYWJsZSBmaW5pc2hlcyBydW5uaW5nLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuXHQqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25FcnJvciAtIENhbGxlZCBpZiB0aGUgcnVubmFibGUgdGhyb3dzIGFuIGVycm9yLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuXHQqL1xuXHR3aXRoTGlzdGVuZXJzKHsgb25TdGFydCwgb25FbmQsIG9uRXJyb3IgfSkge1xuXHRcdHJldHVybiBuZXcgUnVubmFibGVCaW5kaW5nKHtcblx0XHRcdGJvdW5kOiB0aGlzLmJvdW5kLFxuXHRcdFx0a3dhcmdzOiB0aGlzLmt3YXJncyxcblx0XHRcdGNvbmZpZzogdGhpcy5jb25maWcsXG5cdFx0XHRjb25maWdGYWN0b3JpZXM6IFsoY29uZmlnKSA9PiAoeyBjYWxsYmFja3M6IFtuZXcgUm9vdExpc3RlbmVyc1RyYWNlcih7XG5cdFx0XHRcdGNvbmZpZyxcblx0XHRcdFx0b25TdGFydCxcblx0XHRcdFx0b25FbmQsXG5cdFx0XHRcdG9uRXJyb3Jcblx0XHRcdH0pXSB9KV1cblx0XHR9KTtcblx0fVxufTtcbi8qKlxuKiBBIHJ1bm5hYmxlIHRoYXQgZGVsZWdhdGVzIGNhbGxzIHRvIGFub3RoZXIgcnVubmFibGVcbiogd2l0aCBlYWNoIGVsZW1lbnQgb2YgdGhlIGlucHV0IHNlcXVlbmNlLlxuKiBAZXhhbXBsZVxuKiBgYGB0eXBlc2NyaXB0XG4qIGltcG9ydCB7IFJ1bm5hYmxlRWFjaCwgUnVubmFibGVMYW1iZGEgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3J1bm5hYmxlc1wiO1xuKlxuKiBjb25zdCB0b1VwcGVyQ2FzZSA9IChpbnB1dDogc3RyaW5nKTogc3RyaW5nID0+IGlucHV0LnRvVXBwZXJDYXNlKCk7XG4qIGNvbnN0IGFkZEdyZWV0aW5nID0gKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcgPT4gYEhlbGxvLCAke2lucHV0fSFgO1xuKlxuKiBjb25zdCB1cHBlckNhc2VMYW1iZGEgPSBSdW5uYWJsZUxhbWJkYS5mcm9tKHRvVXBwZXJDYXNlKTtcbiogY29uc3QgZ3JlZXRpbmdMYW1iZGEgPSBSdW5uYWJsZUxhbWJkYS5mcm9tKGFkZEdyZWV0aW5nKTtcbipcbiogY29uc3QgY2hhaW4gPSBuZXcgUnVubmFibGVFYWNoKHtcbiogICBib3VuZDogdXBwZXJDYXNlTGFtYmRhLnBpcGUoZ3JlZXRpbmdMYW1iZGEpLFxuKiB9KTtcbipcbiogY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hhaW4uaW52b2tlKFtcImFsaWNlXCIsIFwiYm9iXCIsIFwiY2Fyb2xcIl0pXG4qXG4qIC8vIFtcIkhlbGxvLCBBTElDRSFcIiwgXCJIZWxsbywgQk9CIVwiLCBcIkhlbGxvLCBDQVJPTCFcIl1cbiogYGBgXG4qL1xudmFyIFJ1bm5hYmxlRWFjaCA9IGNsYXNzIFJ1bm5hYmxlRWFjaCBleHRlbmRzIFJ1bm5hYmxlIHtcblx0c3RhdGljIGxjX25hbWUoKSB7XG5cdFx0cmV0dXJuIFwiUnVubmFibGVFYWNoXCI7XG5cdH1cblx0bGNfc2VyaWFsaXphYmxlID0gdHJ1ZTtcblx0bGNfbmFtZXNwYWNlID0gW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl07XG5cdGJvdW5kO1xuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHRzdXBlcihmaWVsZHMpO1xuXHRcdHRoaXMuYm91bmQgPSBmaWVsZHMuYm91bmQ7XG5cdH1cblx0LyoqXG5cdCogSW52b2tlcyB0aGUgcnVubmFibGUgd2l0aCB0aGUgc3BlY2lmaWVkIGlucHV0IGFuZCBjb25maWd1cmF0aW9uLlxuXHQqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgdG8gaW52b2tlIHRoZSBydW5uYWJsZSB3aXRoLlxuXHQqIEBwYXJhbSBjb25maWcgVGhlIGNvbmZpZ3VyYXRpb24gdG8gaW52b2tlIHRoZSBydW5uYWJsZSB3aXRoLlxuXHQqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBvdXRwdXQgb2YgdGhlIHJ1bm5hYmxlLlxuXHQqL1xuXHRhc3luYyBpbnZva2UoaW5wdXRzLCBjb25maWcpIHtcblx0XHRyZXR1cm4gdGhpcy5fY2FsbFdpdGhDb25maWcodGhpcy5faW52b2tlLmJpbmQodGhpcyksIGlucHV0cywgY29uZmlnKTtcblx0fVxuXHQvKipcblx0KiBBIGhlbHBlciBtZXRob2QgdGhhdCBpcyB1c2VkIHRvIGludm9rZSB0aGUgcnVubmFibGUgd2l0aCB0aGUgc3BlY2lmaWVkIGlucHV0IGFuZCBjb25maWd1cmF0aW9uLlxuXHQqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgdG8gaW52b2tlIHRoZSBydW5uYWJsZSB3aXRoLlxuXHQqIEBwYXJhbSBjb25maWcgVGhlIGNvbmZpZ3VyYXRpb24gdG8gaW52b2tlIHRoZSBydW5uYWJsZSB3aXRoLlxuXHQqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBvdXRwdXQgb2YgdGhlIHJ1bm5hYmxlLlxuXHQqL1xuXHRhc3luYyBfaW52b2tlKGlucHV0cywgY29uZmlnLCBydW5NYW5hZ2VyKSB7XG5cdFx0cmV0dXJuIHRoaXMuYm91bmQuYmF0Y2goaW5wdXRzLCBwYXRjaENvbmZpZyhjb25maWcsIHsgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZCgpIH0pKTtcblx0fVxuXHQvKipcblx0KiBCaW5kIGxpZmVjeWNsZSBsaXN0ZW5lcnMgdG8gYSBSdW5uYWJsZSwgcmV0dXJuaW5nIGEgbmV3IFJ1bm5hYmxlLlxuXHQqIFRoZSBSdW4gb2JqZWN0IGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSBydW4sIGluY2x1ZGluZyBpdHMgaWQsXG5cdCogdHlwZSwgaW5wdXQsIG91dHB1dCwgZXJyb3IsIHN0YXJ0VGltZSwgZW5kVGltZSwgYW5kIGFueSB0YWdzIG9yIG1ldGFkYXRhXG5cdCogYWRkZWQgdG8gdGhlIHJ1bi5cblx0KlxuXHQqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSBUaGUgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGNhbGxiYWNrIGZ1bmN0aW9ucy5cblx0KiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uU3RhcnQgLSBDYWxsZWQgYmVmb3JlIHRoZSBydW5uYWJsZSBzdGFydHMgcnVubmluZywgd2l0aCB0aGUgUnVuIG9iamVjdC5cblx0KiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uRW5kIC0gQ2FsbGVkIGFmdGVyIHRoZSBydW5uYWJsZSBmaW5pc2hlcyBydW5uaW5nLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuXHQqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25FcnJvciAtIENhbGxlZCBpZiB0aGUgcnVubmFibGUgdGhyb3dzIGFuIGVycm9yLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuXHQqL1xuXHR3aXRoTGlzdGVuZXJzKHsgb25TdGFydCwgb25FbmQsIG9uRXJyb3IgfSkge1xuXHRcdHJldHVybiBuZXcgUnVubmFibGVFYWNoKHsgYm91bmQ6IHRoaXMuYm91bmQud2l0aExpc3RlbmVycyh7XG5cdFx0XHRvblN0YXJ0LFxuXHRcdFx0b25FbmQsXG5cdFx0XHRvbkVycm9yXG5cdFx0fSkgfSk7XG5cdH1cbn07XG4vKipcbiogQmFzZSBjbGFzcyBmb3IgcnVubmFibGVzIHRoYXQgY2FuIGJlIHJldHJpZWQgYVxuKiBzcGVjaWZpZWQgbnVtYmVyIG9mIHRpbWVzLlxuKiBAZXhhbXBsZVxuKiBgYGB0eXBlc2NyaXB0XG4qIGltcG9ydCB7XG4qICAgUnVubmFibGVMYW1iZGEsXG4qICAgUnVubmFibGVSZXRyeSxcbiogfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3J1bm5hYmxlc1wiO1xuKlxuKiAvLyBTaW11bGF0ZSBhbiBBUEkgY2FsbCB0aGF0IGZhaWxzXG4qIGNvbnN0IHNpbXVsYXRlQXBpQ2FsbCA9IChpbnB1dDogc3RyaW5nKTogc3RyaW5nID0+IHtcbiogICBjb25zb2xlLmxvZyhgQXR0ZW1wdGluZyBBUEkgY2FsbCB3aXRoIGlucHV0OiAke2lucHV0fWApO1xuKiAgIHRocm93IG5ldyBFcnJvcihcIkFQSSBjYWxsIGZhaWxlZCBkdWUgdG8gbmV0d29yayBpc3N1ZVwiKTtcbiogfTtcbipcbiogY29uc3QgYXBpQ2FsbExhbWJkYSA9IFJ1bm5hYmxlTGFtYmRhLmZyb20oc2ltdWxhdGVBcGlDYWxsKTtcbipcbiogLy8gQXBwbHkgcmV0cnkgbG9naWMgdXNpbmcgdGhlIC53aXRoUmV0cnkoKSBtZXRob2RcbiogY29uc3QgYXBpQ2FsbFdpdGhSZXRyeSA9IGFwaUNhbGxMYW1iZGEud2l0aFJldHJ5KHsgc3RvcEFmdGVyQXR0ZW1wdDogMyB9KTtcbipcbiogLy8gQWx0ZXJuYXRpdmVseSwgY3JlYXRlIGEgUnVubmFibGVSZXRyeSBpbnN0YW5jZSBtYW51YWxseVxuKiBjb25zdCBtYW51YWxSZXRyeSA9IG5ldyBSdW5uYWJsZVJldHJ5KHtcbiogICBib3VuZDogYXBpQ2FsbExhbWJkYSxcbiogICBtYXhBdHRlbXB0TnVtYmVyOiAzLFxuKiAgIGNvbmZpZzoge30sXG4qIH0pO1xuKlxuKiAvLyBFeGFtcGxlIGludm9jYXRpb24gdXNpbmcgdGhlIC53aXRoUmV0cnkoKSBtZXRob2RcbiogY29uc3QgcmVzID0gYXdhaXQgYXBpQ2FsbFdpdGhSZXRyeVxuKiAgIC5pbnZva2UoXCJSZXF1ZXN0IDFcIilcbiogICAuY2F0Y2goKGVycm9yKSA9PiB7XG4qICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIGFmdGVyIG11bHRpcGxlIHJldHJpZXM6XCIsIGVycm9yLm1lc3NhZ2UpO1xuKiAgIH0pO1xuKlxuKiAvLyBFeGFtcGxlIGludm9jYXRpb24gdXNpbmcgdGhlIG1hbnVhbCByZXRyeSBpbnN0YW5jZVxuKiBjb25zdCByZXMyID0gYXdhaXQgbWFudWFsUmV0cnlcbiogICAuaW52b2tlKFwiUmVxdWVzdCAyXCIpXG4qICAgLmNhdGNoKChlcnJvcikgPT4ge1xuKiAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCBhZnRlciBtdWx0aXBsZSByZXRyaWVzOlwiLCBlcnJvci5tZXNzYWdlKTtcbiogICB9KTtcbiogYGBgXG4qL1xudmFyIFJ1bm5hYmxlUmV0cnkgPSBjbGFzcyBleHRlbmRzIFJ1bm5hYmxlQmluZGluZyB7XG5cdHN0YXRpYyBsY19uYW1lKCkge1xuXHRcdHJldHVybiBcIlJ1bm5hYmxlUmV0cnlcIjtcblx0fVxuXHRsY19uYW1lc3BhY2UgPSBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXTtcblx0bWF4QXR0ZW1wdE51bWJlciA9IDM7XG5cdG9uRmFpbGVkQXR0ZW1wdCA9ICgpID0+IHt9O1xuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHRzdXBlcihmaWVsZHMpO1xuXHRcdHRoaXMubWF4QXR0ZW1wdE51bWJlciA9IGZpZWxkcy5tYXhBdHRlbXB0TnVtYmVyID8/IHRoaXMubWF4QXR0ZW1wdE51bWJlcjtcblx0XHR0aGlzLm9uRmFpbGVkQXR0ZW1wdCA9IGZpZWxkcy5vbkZhaWxlZEF0dGVtcHQgPz8gdGhpcy5vbkZhaWxlZEF0dGVtcHQ7XG5cdH1cblx0X3BhdGNoQ29uZmlnRm9yUmV0cnkoYXR0ZW1wdCwgY29uZmlnLCBydW5NYW5hZ2VyKSB7XG5cdFx0Y29uc3QgdGFnID0gYXR0ZW1wdCA+IDEgPyBgcmV0cnk6YXR0ZW1wdDoke2F0dGVtcHR9YCA6IHZvaWQgMDtcblx0XHRyZXR1cm4gcGF0Y2hDb25maWcoY29uZmlnLCB7IGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQodGFnKSB9KTtcblx0fVxuXHRhc3luYyBfaW52b2tlKGlucHV0LCBjb25maWcsIHJ1bk1hbmFnZXIpIHtcblx0XHRyZXR1cm4gcFJldHJ5KChhdHRlbXB0TnVtYmVyKSA9PiBzdXBlci5pbnZva2UoaW5wdXQsIHRoaXMuX3BhdGNoQ29uZmlnRm9yUmV0cnkoYXR0ZW1wdE51bWJlciwgY29uZmlnLCBydW5NYW5hZ2VyKSksIHtcblx0XHRcdG9uRmFpbGVkQXR0ZW1wdDogKHsgZXJyb3IgfSkgPT4gdGhpcy5vbkZhaWxlZEF0dGVtcHQoZXJyb3IsIGlucHV0KSxcblx0XHRcdHJldHJpZXM6IE1hdGgubWF4KHRoaXMubWF4QXR0ZW1wdE51bWJlciAtIDEsIDApLFxuXHRcdFx0cmFuZG9taXplOiB0cnVlXG5cdFx0fSk7XG5cdH1cblx0LyoqXG5cdCogTWV0aG9kIHRoYXQgaW52b2tlcyB0aGUgcnVubmFibGUgd2l0aCB0aGUgc3BlY2lmaWVkIGlucHV0LCBydW4gbWFuYWdlcixcblx0KiBhbmQgY29uZmlnLiBJdCBoYW5kbGVzIHRoZSByZXRyeSBsb2dpYyBieSBjYXRjaGluZyBhbnkgZXJyb3JzIGFuZFxuXHQqIHJlY3Vyc2l2ZWx5IGludm9raW5nIGl0c2VsZiB3aXRoIHRoZSB1cGRhdGVkIGNvbmZpZyBmb3IgdGhlIG5leHQgcmV0cnlcblx0KiBhdHRlbXB0LlxuXHQqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgZm9yIHRoZSBydW5uYWJsZS5cblx0KiBAcGFyYW0gcnVuTWFuYWdlciBUaGUgcnVuIG1hbmFnZXIgZm9yIHRoZSBydW5uYWJsZS5cblx0KiBAcGFyYW0gY29uZmlnIFRoZSBjb25maWcgZm9yIHRoZSBydW5uYWJsZS5cblx0KiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgb3V0cHV0IG9mIHRoZSBydW5uYWJsZS5cblx0Ki9cblx0YXN5bmMgaW52b2tlKGlucHV0LCBjb25maWcpIHtcblx0XHRyZXR1cm4gdGhpcy5fY2FsbFdpdGhDb25maWcodGhpcy5faW52b2tlLmJpbmQodGhpcyksIGlucHV0LCBjb25maWcpO1xuXHR9XG5cdGFzeW5jIF9iYXRjaChpbnB1dHMsIGNvbmZpZ3MsIHJ1bk1hbmFnZXJzLCBiYXRjaE9wdGlvbnMpIHtcblx0XHRjb25zdCByZXN1bHRzTWFwID0ge307XG5cdFx0dHJ5IHtcblx0XHRcdGF3YWl0IHBSZXRyeShhc3luYyAoYXR0ZW1wdE51bWJlcikgPT4ge1xuXHRcdFx0XHRjb25zdCByZW1haW5pbmdJbmRleGVzID0gaW5wdXRzLm1hcCgoXywgaSkgPT4gaSkuZmlsdGVyKChpKSA9PiByZXN1bHRzTWFwW2kudG9TdHJpbmcoKV0gPT09IHZvaWQgMCB8fCByZXN1bHRzTWFwW2kudG9TdHJpbmcoKV0gaW5zdGFuY2VvZiBFcnJvcik7XG5cdFx0XHRcdGNvbnN0IHJlbWFpbmluZ0lucHV0cyA9IHJlbWFpbmluZ0luZGV4ZXMubWFwKChpKSA9PiBpbnB1dHNbaV0pO1xuXHRcdFx0XHRjb25zdCBwYXRjaGVkQ29uZmlncyA9IHJlbWFpbmluZ0luZGV4ZXMubWFwKChpKSA9PiB0aGlzLl9wYXRjaENvbmZpZ0ZvclJldHJ5KGF0dGVtcHROdW1iZXIsIGNvbmZpZ3M/LltpXSwgcnVuTWFuYWdlcnM/LltpXSkpO1xuXHRcdFx0XHRjb25zdCByZXN1bHRzID0gYXdhaXQgc3VwZXIuYmF0Y2gocmVtYWluaW5nSW5wdXRzLCBwYXRjaGVkQ29uZmlncywge1xuXHRcdFx0XHRcdC4uLmJhdGNoT3B0aW9ucyxcblx0XHRcdFx0XHRyZXR1cm5FeGNlcHRpb25zOiB0cnVlXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRsZXQgZmlyc3RFeGNlcHRpb247XG5cdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0cy5sZW5ndGg7IGkgKz0gMSkge1xuXHRcdFx0XHRcdGNvbnN0IHJlc3VsdCA9IHJlc3VsdHNbaV07XG5cdFx0XHRcdFx0Y29uc3QgcmVzdWx0TWFwSW5kZXggPSByZW1haW5pbmdJbmRleGVzW2ldO1xuXHRcdFx0XHRcdGlmIChyZXN1bHQgaW5zdGFuY2VvZiBFcnJvcikge1xuXHRcdFx0XHRcdFx0aWYgKGZpcnN0RXhjZXB0aW9uID09PSB2b2lkIDApIHtcblx0XHRcdFx0XHRcdFx0Zmlyc3RFeGNlcHRpb24gPSByZXN1bHQ7XG5cdFx0XHRcdFx0XHRcdGZpcnN0RXhjZXB0aW9uLmlucHV0ID0gcmVtYWluaW5nSW5wdXRzW2ldO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXN1bHRzTWFwW3Jlc3VsdE1hcEluZGV4LnRvU3RyaW5nKCldID0gcmVzdWx0O1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChmaXJzdEV4Y2VwdGlvbikgdGhyb3cgZmlyc3RFeGNlcHRpb247XG5cdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0fSwge1xuXHRcdFx0XHRvbkZhaWxlZEF0dGVtcHQ6ICh7IGVycm9yIH0pID0+IHRoaXMub25GYWlsZWRBdHRlbXB0KGVycm9yLCBlcnJvci5pbnB1dCksXG5cdFx0XHRcdHJldHJpZXM6IE1hdGgubWF4KHRoaXMubWF4QXR0ZW1wdE51bWJlciAtIDEsIDApLFxuXHRcdFx0XHRyYW5kb21pemU6IHRydWVcblx0XHRcdH0pO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGlmIChiYXRjaE9wdGlvbnM/LnJldHVybkV4Y2VwdGlvbnMgIT09IHRydWUpIHRocm93IGU7XG5cdFx0fVxuXHRcdHJldHVybiBPYmplY3Qua2V5cyhyZXN1bHRzTWFwKS5zb3J0KChhLCBiKSA9PiBwYXJzZUludChhLCAxMCkgLSBwYXJzZUludChiLCAxMCkpLm1hcCgoa2V5KSA9PiByZXN1bHRzTWFwW3BhcnNlSW50KGtleSwgMTApXSk7XG5cdH1cblx0YXN5bmMgYmF0Y2goaW5wdXRzLCBvcHRpb25zLCBiYXRjaE9wdGlvbnMpIHtcblx0XHRyZXR1cm4gdGhpcy5fYmF0Y2hXaXRoQ29uZmlnKHRoaXMuX2JhdGNoLmJpbmQodGhpcyksIGlucHV0cywgb3B0aW9ucywgYmF0Y2hPcHRpb25zKTtcblx0fVxufTtcbi8qKlxuKiBBIHNlcXVlbmNlIG9mIHJ1bm5hYmxlcywgd2hlcmUgdGhlIG91dHB1dCBvZiBlYWNoIGlzIHRoZSBpbnB1dCBvZiB0aGUgbmV4dC5cbiogQGV4YW1wbGVcbiogYGBgdHlwZXNjcmlwdFxuKiBjb25zdCBwcm9tcHRUZW1wbGF0ZSA9IFByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZShcbiogICBcIlRlbGwgbWUgYSBqb2tlIGFib3V0IHt0b3BpY31cIixcbiogKTtcbiogY29uc3QgY2hhaW4gPSBSdW5uYWJsZVNlcXVlbmNlLmZyb20oW3Byb21wdFRlbXBsYXRlLCBuZXcgQ2hhdE9wZW5BSSh7IG1vZGVsOiBcImdwdC00by1taW5pXCIgfSldKTtcbiogY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hhaW4uaW52b2tlKHsgdG9waWM6IFwiYmVhcnNcIiB9KTtcbiogYGBgXG4qL1xudmFyIFJ1bm5hYmxlU2VxdWVuY2UgPSBjbGFzcyBSdW5uYWJsZVNlcXVlbmNlIGV4dGVuZHMgUnVubmFibGUge1xuXHRzdGF0aWMgbGNfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJSdW5uYWJsZVNlcXVlbmNlXCI7XG5cdH1cblx0Zmlyc3Q7XG5cdG1pZGRsZSA9IFtdO1xuXHRsYXN0O1xuXHRvbWl0U2VxdWVuY2VUYWdzID0gZmFsc2U7XG5cdGxjX3NlcmlhbGl6YWJsZSA9IHRydWU7XG5cdGxjX25hbWVzcGFjZSA9IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdO1xuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHRzdXBlcihmaWVsZHMpO1xuXHRcdHRoaXMuZmlyc3QgPSBmaWVsZHMuZmlyc3Q7XG5cdFx0dGhpcy5taWRkbGUgPSBmaWVsZHMubWlkZGxlID8/IHRoaXMubWlkZGxlO1xuXHRcdHRoaXMubGFzdCA9IGZpZWxkcy5sYXN0O1xuXHRcdHRoaXMubmFtZSA9IGZpZWxkcy5uYW1lO1xuXHRcdHRoaXMub21pdFNlcXVlbmNlVGFncyA9IGZpZWxkcy5vbWl0U2VxdWVuY2VUYWdzID8/IHRoaXMub21pdFNlcXVlbmNlVGFncztcblx0fVxuXHRnZXQgc3RlcHMoKSB7XG5cdFx0cmV0dXJuIFtcblx0XHRcdHRoaXMuZmlyc3QsXG5cdFx0XHQuLi50aGlzLm1pZGRsZSxcblx0XHRcdHRoaXMubGFzdFxuXHRcdF07XG5cdH1cblx0YXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG5cdFx0Y29uc3QgY29uZmlnID0gZW5zdXJlQ29uZmlnKG9wdGlvbnMpO1xuXHRcdGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcoY29uZmlnKTtcblx0XHRjb25zdCBydW5NYW5hZ2VyID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlQ2hhaW5TdGFydCh0aGlzLnRvSlNPTigpLCBfY29lcmNlVG9EaWN0KGlucHV0LCBcImlucHV0XCIpLCBjb25maWcucnVuSWQsIHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGNvbmZpZz8ucnVuTmFtZSk7XG5cdFx0ZGVsZXRlIGNvbmZpZy5ydW5JZDtcblx0XHRsZXQgbmV4dFN0ZXBJbnB1dCA9IGlucHV0O1xuXHRcdGxldCBmaW5hbE91dHB1dDtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgaW5pdGlhbFN0ZXBzID0gW3RoaXMuZmlyc3QsIC4uLnRoaXMubWlkZGxlXTtcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgaW5pdGlhbFN0ZXBzLmxlbmd0aDsgaSArPSAxKSB7XG5cdFx0XHRcdGNvbnN0IHN0ZXAgPSBpbml0aWFsU3RlcHNbaV07XG5cdFx0XHRcdGNvbnN0IHByb21pc2UgPSBzdGVwLmludm9rZShuZXh0U3RlcElucHV0LCBwYXRjaENvbmZpZyhjb25maWcsIHsgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZCh0aGlzLm9taXRTZXF1ZW5jZVRhZ3MgPyB2b2lkIDAgOiBgc2VxOnN0ZXA6JHtpICsgMX1gKSB9KSk7XG5cdFx0XHRcdG5leHRTdGVwSW5wdXQgPSBhd2FpdCByYWNlV2l0aFNpZ25hbChwcm9taXNlLCBvcHRpb25zPy5zaWduYWwpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKG9wdGlvbnM/LnNpZ25hbD8uYWJvcnRlZCkgdGhyb3cgZ2V0QWJvcnRTaWduYWxFcnJvcihvcHRpb25zLnNpZ25hbCk7XG5cdFx0XHRmaW5hbE91dHB1dCA9IGF3YWl0IHRoaXMubGFzdC5pbnZva2UobmV4dFN0ZXBJbnB1dCwgcGF0Y2hDb25maWcoY29uZmlnLCB7IGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQodGhpcy5vbWl0U2VxdWVuY2VUYWdzID8gdm9pZCAwIDogYHNlcTpzdGVwOiR7dGhpcy5zdGVwcy5sZW5ndGh9YCkgfSkpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRXJyb3IoZSk7XG5cdFx0XHR0aHJvdyBlO1xuXHRcdH1cblx0XHRhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChfY29lcmNlVG9EaWN0KGZpbmFsT3V0cHV0LCBcIm91dHB1dFwiKSk7XG5cdFx0cmV0dXJuIGZpbmFsT3V0cHV0O1xuXHR9XG5cdGFzeW5jIGJhdGNoKGlucHV0cywgb3B0aW9ucywgYmF0Y2hPcHRpb25zKSB7XG5cdFx0Y29uc3QgY29uZmlnTGlzdCA9IHRoaXMuX2dldE9wdGlvbnNMaXN0KG9wdGlvbnMgPz8ge30sIGlucHV0cy5sZW5ndGgpO1xuXHRcdGNvbnN0IGNhbGxiYWNrTWFuYWdlcnMgPSBhd2FpdCBQcm9taXNlLmFsbChjb25maWdMaXN0Lm1hcChnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcpKTtcblx0XHRjb25zdCBydW5NYW5hZ2VycyA9IGF3YWl0IFByb21pc2UuYWxsKGNhbGxiYWNrTWFuYWdlcnMubWFwKGFzeW5jIChjYWxsYmFja01hbmFnZXIsIGkpID0+IHtcblx0XHRcdGNvbnN0IGhhbmRsZVN0YXJ0UmVzID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXRzW2ldLCBcImlucHV0XCIpLCBjb25maWdMaXN0W2ldLnJ1bklkLCB2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBjb25maWdMaXN0W2ldLnJ1bk5hbWUpO1xuXHRcdFx0ZGVsZXRlIGNvbmZpZ0xpc3RbaV0ucnVuSWQ7XG5cdFx0XHRyZXR1cm4gaGFuZGxlU3RhcnRSZXM7XG5cdFx0fSkpO1xuXHRcdGxldCBuZXh0U3RlcElucHV0cyA9IGlucHV0cztcblx0XHR0cnkge1xuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnN0ZXBzLmxlbmd0aDsgaSArPSAxKSB7XG5cdFx0XHRcdGNvbnN0IHN0ZXAgPSB0aGlzLnN0ZXBzW2ldO1xuXHRcdFx0XHRjb25zdCBwcm9taXNlID0gc3RlcC5iYXRjaChuZXh0U3RlcElucHV0cywgcnVuTWFuYWdlcnMubWFwKChydW5NYW5hZ2VyLCBqKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgY2hpbGRSdW5NYW5hZ2VyID0gcnVuTWFuYWdlcj8uZ2V0Q2hpbGQodGhpcy5vbWl0U2VxdWVuY2VUYWdzID8gdm9pZCAwIDogYHNlcTpzdGVwOiR7aSArIDF9YCk7XG5cdFx0XHRcdFx0cmV0dXJuIHBhdGNoQ29uZmlnKGNvbmZpZ0xpc3Rbal0sIHsgY2FsbGJhY2tzOiBjaGlsZFJ1bk1hbmFnZXIgfSk7XG5cdFx0XHRcdH0pLCBiYXRjaE9wdGlvbnMpO1xuXHRcdFx0XHRuZXh0U3RlcElucHV0cyA9IGF3YWl0IHJhY2VXaXRoU2lnbmFsKHByb21pc2UsIGNvbmZpZ0xpc3RbMF0/LnNpZ25hbCk7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0YXdhaXQgUHJvbWlzZS5hbGwocnVuTWFuYWdlcnMubWFwKChydW5NYW5hZ2VyKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUpKSk7XG5cdFx0XHR0aHJvdyBlO1xuXHRcdH1cblx0XHRhd2FpdCBQcm9taXNlLmFsbChydW5NYW5hZ2Vycy5tYXAoKHJ1bk1hbmFnZXIpID0+IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRW5kKF9jb2VyY2VUb0RpY3QobmV4dFN0ZXBJbnB1dHMsIFwib3V0cHV0XCIpKSkpO1xuXHRcdHJldHVybiBuZXh0U3RlcElucHV0cztcblx0fVxuXHQvKiogQGludGVybmFsICovXG5cdF9jb25jYXRPdXRwdXRDaHVua3MoZmlyc3QsIHNlY29uZCkge1xuXHRcdHJldHVybiB0aGlzLmxhc3QuX2NvbmNhdE91dHB1dENodW5rcyhmaXJzdCwgc2Vjb25kKTtcblx0fVxuXHRhc3luYyAqX3N0cmVhbUl0ZXJhdG9yKGlucHV0LCBvcHRpb25zKSB7XG5cdFx0Y29uc3QgY2FsbGJhY2tNYW5hZ2VyXyA9IGF3YWl0IGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZyhvcHRpb25zKTtcblx0XHRjb25zdCB7IHJ1bklkLC4uLm90aGVyT3B0aW9ucyB9ID0gb3B0aW9ucyA/PyB7fTtcblx0XHRjb25zdCBydW5NYW5hZ2VyID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlQ2hhaW5TdGFydCh0aGlzLnRvSlNPTigpLCBfY29lcmNlVG9EaWN0KGlucHV0LCBcImlucHV0XCIpLCBydW5JZCwgdm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgb3RoZXJPcHRpb25zPy5ydW5OYW1lKTtcblx0XHRjb25zdCBzdGVwcyA9IFtcblx0XHRcdHRoaXMuZmlyc3QsXG5cdFx0XHQuLi50aGlzLm1pZGRsZSxcblx0XHRcdHRoaXMubGFzdFxuXHRcdF07XG5cdFx0bGV0IGNvbmNhdFN1cHBvcnRlZCA9IHRydWU7XG5cdFx0bGV0IGZpbmFsT3V0cHV0O1xuXHRcdGFzeW5jIGZ1bmN0aW9uKiBpbnB1dEdlbmVyYXRvcigpIHtcblx0XHRcdHlpZWxkIGlucHV0O1xuXHRcdH1cblx0XHR0cnkge1xuXHRcdFx0bGV0IGZpbmFsR2VuZXJhdG9yID0gc3RlcHNbMF0udHJhbnNmb3JtKGlucHV0R2VuZXJhdG9yKCksIHBhdGNoQ29uZmlnKG90aGVyT3B0aW9ucywgeyBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKHRoaXMub21pdFNlcXVlbmNlVGFncyA/IHZvaWQgMCA6IGBzZXE6c3RlcDoxYCkgfSkpO1xuXHRcdFx0Zm9yIChsZXQgaSA9IDE7IGkgPCBzdGVwcy5sZW5ndGg7IGkgKz0gMSkge1xuXHRcdFx0XHRjb25zdCBzdGVwID0gc3RlcHNbaV07XG5cdFx0XHRcdGZpbmFsR2VuZXJhdG9yID0gYXdhaXQgc3RlcC50cmFuc2Zvcm0oZmluYWxHZW5lcmF0b3IsIHBhdGNoQ29uZmlnKG90aGVyT3B0aW9ucywgeyBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKHRoaXMub21pdFNlcXVlbmNlVGFncyA/IHZvaWQgMCA6IGBzZXE6c3RlcDoke2kgKyAxfWApIH0pKTtcblx0XHRcdH1cblx0XHRcdGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgZmluYWxHZW5lcmF0b3IpIHtcblx0XHRcdFx0b3B0aW9ucz8uc2lnbmFsPy50aHJvd0lmQWJvcnRlZCgpO1xuXHRcdFx0XHR5aWVsZCBjaHVuaztcblx0XHRcdFx0aWYgKGNvbmNhdFN1cHBvcnRlZCkgaWYgKGZpbmFsT3V0cHV0ID09PSB2b2lkIDApIGZpbmFsT3V0cHV0ID0gY2h1bms7XG5cdFx0XHRcdGVsc2UgdHJ5IHtcblx0XHRcdFx0XHRmaW5hbE91dHB1dCA9IHRoaXMuX2NvbmNhdE91dHB1dENodW5rcyhmaW5hbE91dHB1dCwgY2h1bmspO1xuXHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHRmaW5hbE91dHB1dCA9IHZvaWQgMDtcblx0XHRcdFx0XHRjb25jYXRTdXBwb3J0ZWQgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRXJyb3IoZSk7XG5cdFx0XHR0aHJvdyBlO1xuXHRcdH1cblx0XHRhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChfY29lcmNlVG9EaWN0KGZpbmFsT3V0cHV0LCBcIm91dHB1dFwiKSk7XG5cdH1cblx0Z2V0R3JhcGgoY29uZmlnKSB7XG5cdFx0Y29uc3QgZ3JhcGggPSBuZXcgR3JhcGgoKTtcblx0XHRsZXQgY3VycmVudExhc3ROb2RlID0gbnVsbDtcblx0XHR0aGlzLnN0ZXBzLmZvckVhY2goKHN0ZXAsIGluZGV4KSA9PiB7XG5cdFx0XHRjb25zdCBzdGVwR3JhcGggPSBzdGVwLmdldEdyYXBoKGNvbmZpZyk7XG5cdFx0XHRpZiAoaW5kZXggIT09IDApIHN0ZXBHcmFwaC50cmltRmlyc3ROb2RlKCk7XG5cdFx0XHRpZiAoaW5kZXggIT09IHRoaXMuc3RlcHMubGVuZ3RoIC0gMSkgc3RlcEdyYXBoLnRyaW1MYXN0Tm9kZSgpO1xuXHRcdFx0Z3JhcGguZXh0ZW5kKHN0ZXBHcmFwaCk7XG5cdFx0XHRjb25zdCBzdGVwRmlyc3ROb2RlID0gc3RlcEdyYXBoLmZpcnN0Tm9kZSgpO1xuXHRcdFx0aWYgKCFzdGVwRmlyc3ROb2RlKSB0aHJvdyBuZXcgRXJyb3IoYFJ1bm5hYmxlICR7c3RlcH0gaGFzIG5vIGZpcnN0IG5vZGVgKTtcblx0XHRcdGlmIChjdXJyZW50TGFzdE5vZGUpIGdyYXBoLmFkZEVkZ2UoY3VycmVudExhc3ROb2RlLCBzdGVwRmlyc3ROb2RlKTtcblx0XHRcdGN1cnJlbnRMYXN0Tm9kZSA9IHN0ZXBHcmFwaC5sYXN0Tm9kZSgpO1xuXHRcdH0pO1xuXHRcdHJldHVybiBncmFwaDtcblx0fVxuXHRwaXBlKGNvZXJjZWFibGUpIHtcblx0XHRpZiAoUnVubmFibGVTZXF1ZW5jZS5pc1J1bm5hYmxlU2VxdWVuY2UoY29lcmNlYWJsZSkpIHJldHVybiBuZXcgUnVubmFibGVTZXF1ZW5jZSh7XG5cdFx0XHRmaXJzdDogdGhpcy5maXJzdCxcblx0XHRcdG1pZGRsZTogdGhpcy5taWRkbGUuY29uY2F0KFtcblx0XHRcdFx0dGhpcy5sYXN0LFxuXHRcdFx0XHRjb2VyY2VhYmxlLmZpcnN0LFxuXHRcdFx0XHQuLi5jb2VyY2VhYmxlLm1pZGRsZVxuXHRcdFx0XSksXG5cdFx0XHRsYXN0OiBjb2VyY2VhYmxlLmxhc3QsXG5cdFx0XHRuYW1lOiB0aGlzLm5hbWUgPz8gY29lcmNlYWJsZS5uYW1lXG5cdFx0fSk7XG5cdFx0ZWxzZSByZXR1cm4gbmV3IFJ1bm5hYmxlU2VxdWVuY2Uoe1xuXHRcdFx0Zmlyc3Q6IHRoaXMuZmlyc3QsXG5cdFx0XHRtaWRkbGU6IFsuLi50aGlzLm1pZGRsZSwgdGhpcy5sYXN0XSxcblx0XHRcdGxhc3Q6IF9jb2VyY2VUb1J1bm5hYmxlKGNvZXJjZWFibGUpLFxuXHRcdFx0bmFtZTogdGhpcy5uYW1lXG5cdFx0fSk7XG5cdH1cblx0c3RhdGljIGlzUnVubmFibGVTZXF1ZW5jZSh0aGluZykge1xuXHRcdHJldHVybiBBcnJheS5pc0FycmF5KHRoaW5nLm1pZGRsZSkgJiYgUnVubmFibGUuaXNSdW5uYWJsZSh0aGluZyk7XG5cdH1cblx0c3RhdGljIGZyb20oW2ZpcnN0LCAuLi5ydW5uYWJsZXNdLCBuYW1lT3JGaWVsZHMpIHtcblx0XHRsZXQgZXh0cmEgPSB7fTtcblx0XHRpZiAodHlwZW9mIG5hbWVPckZpZWxkcyA9PT0gXCJzdHJpbmdcIikgZXh0cmEubmFtZSA9IG5hbWVPckZpZWxkcztcblx0XHRlbHNlIGlmIChuYW1lT3JGaWVsZHMgIT09IHZvaWQgMCkgZXh0cmEgPSBuYW1lT3JGaWVsZHM7XG5cdFx0cmV0dXJuIG5ldyBSdW5uYWJsZVNlcXVlbmNlKHtcblx0XHRcdC4uLmV4dHJhLFxuXHRcdFx0Zmlyc3Q6IF9jb2VyY2VUb1J1bm5hYmxlKGZpcnN0KSxcblx0XHRcdG1pZGRsZTogcnVubmFibGVzLnNsaWNlKDAsIC0xKS5tYXAoX2NvZXJjZVRvUnVubmFibGUpLFxuXHRcdFx0bGFzdDogX2NvZXJjZVRvUnVubmFibGUocnVubmFibGVzW3J1bm5hYmxlcy5sZW5ndGggLSAxXSlcblx0XHR9KTtcblx0fVxufTtcbi8qKlxuKiBBIHJ1bm5hYmxlIHRoYXQgcnVucyBhIG1hcHBpbmcgb2YgcnVubmFibGVzIGluIHBhcmFsbGVsLFxuKiBhbmQgcmV0dXJucyBhIG1hcHBpbmcgb2YgdGhlaXIgb3V0cHV0cy5cbiogQGV4YW1wbGVcbiogYGBgdHlwZXNjcmlwdFxuKiBjb25zdCBtYXBDaGFpbiA9IFJ1bm5hYmxlTWFwLmZyb20oe1xuKiAgIGpva2U6IFByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZShcIlRlbGwgbWUgYSBqb2tlIGFib3V0IHt0b3BpY31cIikucGlwZShcbiogICAgIG5ldyBDaGF0QW50aHJvcGljKHt9KSxcbiogICApLFxuKiAgIHBvZW06IFByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZShcIndyaXRlIGEgMi1saW5lIHBvZW0gYWJvdXQge3RvcGljfVwiKS5waXBlKFxuKiAgICAgbmV3IENoYXRBbnRocm9waWMoe30pLFxuKiAgICksXG4qIH0pO1xuKiBjb25zdCByZXN1bHQgPSBhd2FpdCBtYXBDaGFpbi5pbnZva2UoeyB0b3BpYzogXCJiZWFyXCIgfSk7XG4qIGBgYFxuKi9cbnZhciBSdW5uYWJsZU1hcCA9IGNsYXNzIFJ1bm5hYmxlTWFwIGV4dGVuZHMgUnVubmFibGUge1xuXHRzdGF0aWMgbGNfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJSdW5uYWJsZU1hcFwiO1xuXHR9XG5cdGxjX25hbWVzcGFjZSA9IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdO1xuXHRsY19zZXJpYWxpemFibGUgPSB0cnVlO1xuXHRzdGVwcztcblx0Z2V0U3RlcHNLZXlzKCkge1xuXHRcdHJldHVybiBPYmplY3Qua2V5cyh0aGlzLnN0ZXBzKTtcblx0fVxuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHRzdXBlcihmaWVsZHMpO1xuXHRcdHRoaXMuc3RlcHMgPSB7fTtcblx0XHRmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhmaWVsZHMuc3RlcHMpKSB0aGlzLnN0ZXBzW2tleV0gPSBfY29lcmNlVG9SdW5uYWJsZSh2YWx1ZSk7XG5cdH1cblx0c3RhdGljIGZyb20oc3RlcHMpIHtcblx0XHRyZXR1cm4gbmV3IFJ1bm5hYmxlTWFwKHsgc3RlcHMgfSk7XG5cdH1cblx0YXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG5cdFx0Y29uc3QgY29uZmlnID0gZW5zdXJlQ29uZmlnKG9wdGlvbnMpO1xuXHRcdGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcoY29uZmlnKTtcblx0XHRjb25zdCBydW5NYW5hZ2VyID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlQ2hhaW5TdGFydCh0aGlzLnRvSlNPTigpLCB7IGlucHV0IH0sIGNvbmZpZy5ydW5JZCwgdm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgY29uZmlnPy5ydW5OYW1lKTtcblx0XHRkZWxldGUgY29uZmlnLnJ1bklkO1xuXHRcdGNvbnN0IG91dHB1dCA9IHt9O1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBwcm9taXNlcyA9IE9iamVjdC5lbnRyaWVzKHRoaXMuc3RlcHMpLm1hcChhc3luYyAoW2tleSwgcnVubmFibGVdKSA9PiB7XG5cdFx0XHRcdG91dHB1dFtrZXldID0gYXdhaXQgcnVubmFibGUuaW52b2tlKGlucHV0LCBwYXRjaENvbmZpZyhjb25maWcsIHsgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZChgbWFwOmtleToke2tleX1gKSB9KSk7XG5cdFx0XHR9KTtcblx0XHRcdGF3YWl0IHJhY2VXaXRoU2lnbmFsKFByb21pc2UuYWxsKHByb21pc2VzKSwgb3B0aW9ucz8uc2lnbmFsKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUpO1xuXHRcdFx0dGhyb3cgZTtcblx0XHR9XG5cdFx0YXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQob3V0cHV0KTtcblx0XHRyZXR1cm4gb3V0cHV0O1xuXHR9XG5cdGFzeW5jICpfdHJhbnNmb3JtKGdlbmVyYXRvciwgcnVuTWFuYWdlciwgb3B0aW9ucykge1xuXHRcdGNvbnN0IHN0ZXBzID0geyAuLi50aGlzLnN0ZXBzIH07XG5cdFx0Y29uc3QgaW5wdXRDb3BpZXMgPSBhdGVlKGdlbmVyYXRvciwgT2JqZWN0LmtleXMoc3RlcHMpLmxlbmd0aCk7XG5cdFx0Y29uc3QgdGFza3MgPSBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKHN0ZXBzKS5tYXAoKFtrZXksIHJ1bm5hYmxlXSwgaSkgPT4ge1xuXHRcdFx0Y29uc3QgZ2VuID0gcnVubmFibGUudHJhbnNmb3JtKGlucHV0Q29waWVzW2ldLCBwYXRjaENvbmZpZyhvcHRpb25zLCB7IGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoYG1hcDprZXk6JHtrZXl9YCkgfSkpO1xuXHRcdFx0cmV0dXJuIFtrZXksIGdlbi5uZXh0KCkudGhlbigocmVzdWx0KSA9PiAoe1xuXHRcdFx0XHRrZXksXG5cdFx0XHRcdGdlbixcblx0XHRcdFx0cmVzdWx0XG5cdFx0XHR9KSldO1xuXHRcdH0pKTtcblx0XHR3aGlsZSAodGFza3Muc2l6ZSkge1xuXHRcdFx0Y29uc3QgcHJvbWlzZSA9IFByb21pc2UucmFjZSh0YXNrcy52YWx1ZXMoKSk7XG5cdFx0XHRjb25zdCB7IGtleSwgcmVzdWx0LCBnZW4gfSA9IGF3YWl0IHJhY2VXaXRoU2lnbmFsKHByb21pc2UsIG9wdGlvbnM/LnNpZ25hbCk7XG5cdFx0XHR0YXNrcy5kZWxldGUoa2V5KTtcblx0XHRcdGlmICghcmVzdWx0LmRvbmUpIHtcblx0XHRcdFx0eWllbGQgeyBba2V5XTogcmVzdWx0LnZhbHVlIH07XG5cdFx0XHRcdHRhc2tzLnNldChrZXksIGdlbi5uZXh0KCkudGhlbigocmVzdWx0JDEpID0+ICh7XG5cdFx0XHRcdFx0a2V5LFxuXHRcdFx0XHRcdGdlbixcblx0XHRcdFx0XHRyZXN1bHQ6IHJlc3VsdCQxXG5cdFx0XHRcdH0pKSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHRyYW5zZm9ybShnZW5lcmF0b3IsIG9wdGlvbnMpIHtcblx0XHRyZXR1cm4gdGhpcy5fdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyhnZW5lcmF0b3IsIHRoaXMuX3RyYW5zZm9ybS5iaW5kKHRoaXMpLCBvcHRpb25zKTtcblx0fVxuXHRhc3luYyBzdHJlYW0oaW5wdXQsIG9wdGlvbnMpIHtcblx0XHRhc3luYyBmdW5jdGlvbiogZ2VuZXJhdG9yKCkge1xuXHRcdFx0eWllbGQgaW5wdXQ7XG5cdFx0fVxuXHRcdGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcblx0XHRjb25zdCB3cmFwcGVkR2VuZXJhdG9yID0gbmV3IEFzeW5jR2VuZXJhdG9yV2l0aFNldHVwKHtcblx0XHRcdGdlbmVyYXRvcjogdGhpcy50cmFuc2Zvcm0oZ2VuZXJhdG9yKCksIGNvbmZpZyksXG5cdFx0XHRjb25maWdcblx0XHR9KTtcblx0XHRhd2FpdCB3cmFwcGVkR2VuZXJhdG9yLnNldHVwO1xuXHRcdHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21Bc3luY0dlbmVyYXRvcih3cmFwcGVkR2VuZXJhdG9yKTtcblx0fVxufTtcbi8qKlxuKiBBIHJ1bm5hYmxlIHRoYXQgd3JhcHMgYSB0cmFjZWQgTGFuZ1NtaXRoIGZ1bmN0aW9uLlxuKi9cbnZhciBSdW5uYWJsZVRyYWNlYWJsZSA9IGNsYXNzIFJ1bm5hYmxlVHJhY2VhYmxlIGV4dGVuZHMgUnVubmFibGUge1xuXHRsY19zZXJpYWxpemFibGUgPSBmYWxzZTtcblx0bGNfbmFtZXNwYWNlID0gW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl07XG5cdGZ1bmM7XG5cdGNvbnN0cnVjdG9yKGZpZWxkcykge1xuXHRcdHN1cGVyKGZpZWxkcyk7XG5cdFx0aWYgKCFpc1RyYWNlYWJsZUZ1bmN0aW9uKGZpZWxkcy5mdW5jKSkgdGhyb3cgbmV3IEVycm9yKFwiUnVubmFibGVUcmFjZWFibGUgcmVxdWlyZXMgYSBmdW5jdGlvbiB0aGF0IGlzIHdyYXBwZWQgaW4gdHJhY2VhYmxlIGhpZ2hlci1vcmRlciBmdW5jdGlvblwiKTtcblx0XHR0aGlzLmZ1bmMgPSBmaWVsZHMuZnVuYztcblx0fVxuXHRhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcblx0XHRjb25zdCBbY29uZmlnXSA9IHRoaXMuX2dldE9wdGlvbnNMaXN0KG9wdGlvbnMgPz8ge30sIDEpO1xuXHRcdGNvbnN0IGNhbGxiYWNrcyA9IGF3YWl0IGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZyhjb25maWcpO1xuXHRcdGNvbnN0IHByb21pc2UgPSB0aGlzLmZ1bmMocGF0Y2hDb25maWcoY29uZmlnLCB7IGNhbGxiYWNrcyB9KSwgaW5wdXQpO1xuXHRcdHJldHVybiByYWNlV2l0aFNpZ25hbChwcm9taXNlLCBjb25maWc/LnNpZ25hbCk7XG5cdH1cblx0YXN5bmMgKl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgb3B0aW9ucykge1xuXHRcdGNvbnN0IFtjb25maWddID0gdGhpcy5fZ2V0T3B0aW9uc0xpc3Qob3B0aW9ucyA/PyB7fSwgMSk7XG5cdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5pbnZva2UoaW5wdXQsIG9wdGlvbnMpO1xuXHRcdGlmIChpc0FzeW5jSXRlcmFibGUocmVzdWx0KSkge1xuXHRcdFx0Zm9yIGF3YWl0IChjb25zdCBpdGVtIG9mIHJlc3VsdCkge1xuXHRcdFx0XHRjb25maWc/LnNpZ25hbD8udGhyb3dJZkFib3J0ZWQoKTtcblx0XHRcdFx0eWllbGQgaXRlbTtcblx0XHRcdH1cblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0aWYgKGlzSXRlcmF0b3IocmVzdWx0KSkge1xuXHRcdFx0d2hpbGUgKHRydWUpIHtcblx0XHRcdFx0Y29uZmlnPy5zaWduYWw/LnRocm93SWZBYm9ydGVkKCk7XG5cdFx0XHRcdGNvbnN0IHN0YXRlID0gcmVzdWx0Lm5leHQoKTtcblx0XHRcdFx0aWYgKHN0YXRlLmRvbmUpIGJyZWFrO1xuXHRcdFx0XHR5aWVsZCBzdGF0ZS52YWx1ZTtcblx0XHRcdH1cblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0eWllbGQgcmVzdWx0O1xuXHR9XG5cdHN0YXRpYyBmcm9tKGZ1bmMpIHtcblx0XHRyZXR1cm4gbmV3IFJ1bm5hYmxlVHJhY2VhYmxlKHsgZnVuYyB9KTtcblx0fVxufTtcbmZ1bmN0aW9uIGFzc2VydE5vblRyYWNlYWJsZUZ1bmN0aW9uKGZ1bmMpIHtcblx0aWYgKGlzVHJhY2VhYmxlRnVuY3Rpb24oZnVuYykpIHRocm93IG5ldyBFcnJvcihcIlJ1bm5hYmxlTGFtYmRhIHJlcXVpcmVzIGEgZnVuY3Rpb24gdGhhdCBpcyBub3Qgd3JhcHBlZCBpbiB0cmFjZWFibGUgaGlnaGVyLW9yZGVyIGZ1bmN0aW9uLiBUaGlzIHNob3VsZG4ndCBoYXBwZW4uXCIpO1xufVxuLyoqXG4qIEEgcnVubmFibGUgdGhhdCB3cmFwcyBhbiBhcmJpdHJhcnkgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHNpbmdsZSBhcmd1bWVudC5cbiogQGV4YW1wbGVcbiogYGBgdHlwZXNjcmlwdFxuKiBpbXBvcnQgeyBSdW5uYWJsZUxhbWJkYSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvcnVubmFibGVzXCI7XG4qXG4qIGNvbnN0IGFkZCA9IChpbnB1dDogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9KSA9PiBpbnB1dC54ICsgaW5wdXQueTtcbipcbiogY29uc3QgbXVsdGlwbHkgPSAoaW5wdXQ6IHsgdmFsdWU6IG51bWJlcjsgbXVsdGlwbGllcjogbnVtYmVyIH0pID0+XG4qICAgaW5wdXQudmFsdWUgKiBpbnB1dC5tdWx0aXBsaWVyO1xuKlxuKiAvLyBDcmVhdGUgcnVubmFibGVzIGZvciB0aGUgZnVuY3Rpb25zXG4qIGNvbnN0IGFkZExhbWJkYSA9IFJ1bm5hYmxlTGFtYmRhLmZyb20oYWRkKTtcbiogY29uc3QgbXVsdGlwbHlMYW1iZGEgPSBSdW5uYWJsZUxhbWJkYS5mcm9tKG11bHRpcGx5KTtcbipcbiogLy8gQ2hhaW4gdGhlIGxhbWJkYXMgZm9yIGEgbWF0aGVtYXRpY2FsIG9wZXJhdGlvblxuKiBjb25zdCBjaGFpbmVkTGFtYmRhID0gYWRkTGFtYmRhLnBpcGUoKHJlc3VsdCkgPT5cbiogICBtdWx0aXBseUxhbWJkYS5pbnZva2UoeyB2YWx1ZTogcmVzdWx0LCBtdWx0aXBsaWVyOiAyIH0pXG4qICk7XG4qXG4qIC8vIEV4YW1wbGUgaW52b2NhdGlvbiBvZiB0aGUgY2hhaW5lZExhbWJkYVxuKiBjb25zdCByZXN1bHQgPSBhd2FpdCBjaGFpbmVkTGFtYmRhLmludm9rZSh7IHg6IDIsIHk6IDMgfSk7XG4qXG4qIC8vIFdpbGwgbG9nIFwiMTBcIiAoc2luY2UgKDIgKyAzKSAqIDIgPSAxMClcbiogYGBgXG4qL1xudmFyIFJ1bm5hYmxlTGFtYmRhID0gY2xhc3MgUnVubmFibGVMYW1iZGEgZXh0ZW5kcyBSdW5uYWJsZSB7XG5cdHN0YXRpYyBsY19uYW1lKCkge1xuXHRcdHJldHVybiBcIlJ1bm5hYmxlTGFtYmRhXCI7XG5cdH1cblx0bGNfbmFtZXNwYWNlID0gW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl07XG5cdGZ1bmM7XG5cdGNvbnN0cnVjdG9yKGZpZWxkcykge1xuXHRcdGlmIChpc1RyYWNlYWJsZUZ1bmN0aW9uKGZpZWxkcy5mdW5jKSkgcmV0dXJuIFJ1bm5hYmxlVHJhY2VhYmxlLmZyb20oZmllbGRzLmZ1bmMpO1xuXHRcdHN1cGVyKGZpZWxkcyk7XG5cdFx0YXNzZXJ0Tm9uVHJhY2VhYmxlRnVuY3Rpb24oZmllbGRzLmZ1bmMpO1xuXHRcdHRoaXMuZnVuYyA9IGZpZWxkcy5mdW5jO1xuXHR9XG5cdHN0YXRpYyBmcm9tKGZ1bmMpIHtcblx0XHRyZXR1cm4gbmV3IFJ1bm5hYmxlTGFtYmRhKHsgZnVuYyB9KTtcblx0fVxuXHRhc3luYyBfaW52b2tlKGlucHV0LCBjb25maWcsIHJ1bk1hbmFnZXIpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0Y29uc3QgY2hpbGRDb25maWcgPSBwYXRjaENvbmZpZyhjb25maWcsIHtcblx0XHRcdFx0Y2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZCgpLFxuXHRcdFx0XHRyZWN1cnNpb25MaW1pdDogKGNvbmZpZz8ucmVjdXJzaW9uTGltaXQgPz8gREVGQVVMVF9SRUNVUlNJT05fTElNSVQpIC0gMVxuXHRcdFx0fSk7XG5cdFx0XHRBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLnJ1bldpdGhDb25maWcocGlja1J1bm5hYmxlQ29uZmlnS2V5cyhjaGlsZENvbmZpZyksIGFzeW5jICgpID0+IHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRsZXQgb3V0cHV0ID0gYXdhaXQgdGhpcy5mdW5jKGlucHV0LCB7IC4uLmNoaWxkQ29uZmlnIH0pO1xuXHRcdFx0XHRcdGlmIChvdXRwdXQgJiYgUnVubmFibGUuaXNSdW5uYWJsZShvdXRwdXQpKSB7XG5cdFx0XHRcdFx0XHRpZiAoY29uZmlnPy5yZWN1cnNpb25MaW1pdCA9PT0gMCkgdGhyb3cgbmV3IEVycm9yKFwiUmVjdXJzaW9uIGxpbWl0IHJlYWNoZWQuXCIpO1xuXHRcdFx0XHRcdFx0b3V0cHV0ID0gYXdhaXQgb3V0cHV0Lmludm9rZShpbnB1dCwge1xuXHRcdFx0XHRcdFx0XHQuLi5jaGlsZENvbmZpZyxcblx0XHRcdFx0XHRcdFx0cmVjdXJzaW9uTGltaXQ6IChjaGlsZENvbmZpZy5yZWN1cnNpb25MaW1pdCA/PyBERUZBVUxUX1JFQ1VSU0lPTl9MSU1JVCkgLSAxXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGlzQXN5bmNJdGVyYWJsZShvdXRwdXQpKSB7XG5cdFx0XHRcdFx0XHRsZXQgZmluYWxPdXRwdXQ7XG5cdFx0XHRcdFx0XHRmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGNvbnN1bWVBc3luY0l0ZXJhYmxlSW5Db250ZXh0KGNoaWxkQ29uZmlnLCBvdXRwdXQpKSB7XG5cdFx0XHRcdFx0XHRcdGNvbmZpZz8uc2lnbmFsPy50aHJvd0lmQWJvcnRlZCgpO1xuXHRcdFx0XHRcdFx0XHRpZiAoZmluYWxPdXRwdXQgPT09IHZvaWQgMCkgZmluYWxPdXRwdXQgPSBjaHVuaztcblx0XHRcdFx0XHRcdFx0ZWxzZSB0cnkge1xuXHRcdFx0XHRcdFx0XHRcdGZpbmFsT3V0cHV0ID0gdGhpcy5fY29uY2F0T3V0cHV0Q2h1bmtzKGZpbmFsT3V0cHV0LCBjaHVuayk7XG5cdFx0XHRcdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdFx0XHRcdGZpbmFsT3V0cHV0ID0gY2h1bms7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdG91dHB1dCA9IGZpbmFsT3V0cHV0O1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoaXNJdGVyYWJsZUl0ZXJhdG9yKG91dHB1dCkpIHtcblx0XHRcdFx0XHRcdGxldCBmaW5hbE91dHB1dDtcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgY2h1bmsgb2YgY29uc3VtZUl0ZXJhdG9ySW5Db250ZXh0KGNoaWxkQ29uZmlnLCBvdXRwdXQpKSB7XG5cdFx0XHRcdFx0XHRcdGNvbmZpZz8uc2lnbmFsPy50aHJvd0lmQWJvcnRlZCgpO1xuXHRcdFx0XHRcdFx0XHRpZiAoZmluYWxPdXRwdXQgPT09IHZvaWQgMCkgZmluYWxPdXRwdXQgPSBjaHVuaztcblx0XHRcdFx0XHRcdFx0ZWxzZSB0cnkge1xuXHRcdFx0XHRcdFx0XHRcdGZpbmFsT3V0cHV0ID0gdGhpcy5fY29uY2F0T3V0cHV0Q2h1bmtzKGZpbmFsT3V0cHV0LCBjaHVuayk7XG5cdFx0XHRcdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdFx0XHRcdGZpbmFsT3V0cHV0ID0gY2h1bms7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdG91dHB1dCA9IGZpbmFsT3V0cHV0O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXNvbHZlKG91dHB1dCk7XG5cdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRyZWplY3QoZSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cdGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuXHRcdHJldHVybiB0aGlzLl9jYWxsV2l0aENvbmZpZyh0aGlzLl9pbnZva2UuYmluZCh0aGlzKSwgaW5wdXQsIG9wdGlvbnMpO1xuXHR9XG5cdGFzeW5jICpfdHJhbnNmb3JtKGdlbmVyYXRvciwgcnVuTWFuYWdlciwgY29uZmlnKSB7XG5cdFx0bGV0IGZpbmFsQ2h1bms7XG5cdFx0Zm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBnZW5lcmF0b3IpIGlmIChmaW5hbENodW5rID09PSB2b2lkIDApIGZpbmFsQ2h1bmsgPSBjaHVuaztcblx0XHRlbHNlIHRyeSB7XG5cdFx0XHRmaW5hbENodW5rID0gdGhpcy5fY29uY2F0T3V0cHV0Q2h1bmtzKGZpbmFsQ2h1bmssIGNodW5rKTtcblx0XHR9IGNhdGNoIHtcblx0XHRcdGZpbmFsQ2h1bmsgPSBjaHVuaztcblx0XHR9XG5cdFx0Y29uc3QgY2hpbGRDb25maWcgPSBwYXRjaENvbmZpZyhjb25maWcsIHtcblx0XHRcdGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSxcblx0XHRcdHJlY3Vyc2lvbkxpbWl0OiAoY29uZmlnPy5yZWN1cnNpb25MaW1pdCA/PyBERUZBVUxUX1JFQ1VSU0lPTl9MSU1JVCkgLSAxXG5cdFx0fSk7XG5cdFx0Y29uc3Qgb3V0cHV0ID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0QXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbi5ydW5XaXRoQ29uZmlnKHBpY2tSdW5uYWJsZUNvbmZpZ0tleXMoY2hpbGRDb25maWcpLCBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Y29uc3QgcmVzID0gYXdhaXQgdGhpcy5mdW5jKGZpbmFsQ2h1bmssIHtcblx0XHRcdFx0XHRcdC4uLmNoaWxkQ29uZmlnLFxuXHRcdFx0XHRcdFx0Y29uZmlnOiBjaGlsZENvbmZpZ1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHJlc29sdmUocmVzKTtcblx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdHJlamVjdChlKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdFx0aWYgKG91dHB1dCAmJiBSdW5uYWJsZS5pc1J1bm5hYmxlKG91dHB1dCkpIHtcblx0XHRcdGlmIChjb25maWc/LnJlY3Vyc2lvbkxpbWl0ID09PSAwKSB0aHJvdyBuZXcgRXJyb3IoXCJSZWN1cnNpb24gbGltaXQgcmVhY2hlZC5cIik7XG5cdFx0XHRjb25zdCBzdHJlYW0gPSBhd2FpdCBvdXRwdXQuc3RyZWFtKGZpbmFsQ2h1bmssIGNoaWxkQ29uZmlnKTtcblx0XHRcdGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygc3RyZWFtKSB5aWVsZCBjaHVuaztcblx0XHR9IGVsc2UgaWYgKGlzQXN5bmNJdGVyYWJsZShvdXRwdXQpKSBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGNvbnN1bWVBc3luY0l0ZXJhYmxlSW5Db250ZXh0KGNoaWxkQ29uZmlnLCBvdXRwdXQpKSB7XG5cdFx0XHRjb25maWc/LnNpZ25hbD8udGhyb3dJZkFib3J0ZWQoKTtcblx0XHRcdHlpZWxkIGNodW5rO1xuXHRcdH1cblx0XHRlbHNlIGlmIChpc0l0ZXJhYmxlSXRlcmF0b3Iob3V0cHV0KSkgZm9yIChjb25zdCBjaHVuayBvZiBjb25zdW1lSXRlcmF0b3JJbkNvbnRleHQoY2hpbGRDb25maWcsIG91dHB1dCkpIHtcblx0XHRcdGNvbmZpZz8uc2lnbmFsPy50aHJvd0lmQWJvcnRlZCgpO1xuXHRcdFx0eWllbGQgY2h1bms7XG5cdFx0fVxuXHRcdGVsc2UgeWllbGQgb3V0cHV0O1xuXHR9XG5cdHRyYW5zZm9ybShnZW5lcmF0b3IsIG9wdGlvbnMpIHtcblx0XHRyZXR1cm4gdGhpcy5fdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyhnZW5lcmF0b3IsIHRoaXMuX3RyYW5zZm9ybS5iaW5kKHRoaXMpLCBvcHRpb25zKTtcblx0fVxuXHRhc3luYyBzdHJlYW0oaW5wdXQsIG9wdGlvbnMpIHtcblx0XHRhc3luYyBmdW5jdGlvbiogZ2VuZXJhdG9yKCkge1xuXHRcdFx0eWllbGQgaW5wdXQ7XG5cdFx0fVxuXHRcdGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcblx0XHRjb25zdCB3cmFwcGVkR2VuZXJhdG9yID0gbmV3IEFzeW5jR2VuZXJhdG9yV2l0aFNldHVwKHtcblx0XHRcdGdlbmVyYXRvcjogdGhpcy50cmFuc2Zvcm0oZ2VuZXJhdG9yKCksIGNvbmZpZyksXG5cdFx0XHRjb25maWdcblx0XHR9KTtcblx0XHRhd2FpdCB3cmFwcGVkR2VuZXJhdG9yLnNldHVwO1xuXHRcdHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21Bc3luY0dlbmVyYXRvcih3cmFwcGVkR2VuZXJhdG9yKTtcblx0fVxufTtcbi8qKlxuKiBBIHJ1bm5hYmxlIHRoYXQgcnVucyBhIG1hcHBpbmcgb2YgcnVubmFibGVzIGluIHBhcmFsbGVsLFxuKiBhbmQgcmV0dXJucyBhIG1hcHBpbmcgb2YgdGhlaXIgb3V0cHV0cy5cbiogQGV4YW1wbGVcbiogYGBgdHlwZXNjcmlwdFxuKiBpbXBvcnQge1xuKiAgIFJ1bm5hYmxlTGFtYmRhLFxuKiAgIFJ1bm5hYmxlUGFyYWxsZWwsXG4qIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9ydW5uYWJsZXNcIjtcbipcbiogY29uc3QgYWRkWWVhcnMgPSAoYWdlOiBudW1iZXIpOiBudW1iZXIgPT4gYWdlICsgNTtcbiogY29uc3QgeWVhcnNUb0ZpZnR5ID0gKGFnZTogbnVtYmVyKTogbnVtYmVyID0+IDUwIC0gYWdlO1xuKiBjb25zdCB5ZWFyc1RvSHVuZHJlZCA9IChhZ2U6IG51bWJlcik6IG51bWJlciA9PiAxMDAgLSBhZ2U7XG4qXG4qIGNvbnN0IGFkZFllYXJzTGFtYmRhID0gUnVubmFibGVMYW1iZGEuZnJvbShhZGRZZWFycyk7XG4qIGNvbnN0IG1pbGVzdG9uZUZpZnR5TGFtYmRhID0gUnVubmFibGVMYW1iZGEuZnJvbSh5ZWFyc1RvRmlmdHkpO1xuKiBjb25zdCBtaWxlc3RvbmVIdW5kcmVkTGFtYmRhID0gUnVubmFibGVMYW1iZGEuZnJvbSh5ZWFyc1RvSHVuZHJlZCk7XG4qXG4qIC8vIFBpcGUgd2lsbCBjb2VyY2Ugb2JqZWN0cyBpbnRvIFJ1bm5hYmxlUGFyYWxsZWwgYnkgZGVmYXVsdCwgYnV0IHdlXG4qIC8vIGV4cGxpY2l0bHkgaW5zdGFudGlhdGUgb25lIGhlcmUgdG8gZGVtb25zdHJhdGVcbiogY29uc3Qgc2VxdWVuY2UgPSBhZGRZZWFyc0xhbWJkYS5waXBlKFxuKiAgIFJ1bm5hYmxlUGFyYWxsZWwuZnJvbSh7XG4qICAgICB5ZWFyc190b19maWZ0eTogbWlsZXN0b25lRmlmdHlMYW1iZGEsXG4qICAgICB5ZWFyc190b19odW5kcmVkOiBtaWxlc3RvbmVIdW5kcmVkTGFtYmRhLFxuKiAgIH0pXG4qICk7XG4qXG4qIC8vIEludm9rZSB0aGUgc2VxdWVuY2Ugd2l0aCBhIHNpbmdsZSBhZ2UgaW5wdXRcbiogY29uc3QgcmVzID0gYXdhaXQgc2VxdWVuY2UuaW52b2tlKDI1KTtcbipcbiogLy8geyB5ZWFyc190b19maWZ0eTogMjAsIHllYXJzX3RvX2h1bmRyZWQ6IDcwIH1cbiogYGBgXG4qL1xudmFyIFJ1bm5hYmxlUGFyYWxsZWwgPSBjbGFzcyBleHRlbmRzIFJ1bm5hYmxlTWFwIHt9O1xuLyoqXG4qIEEgUnVubmFibGUgdGhhdCBjYW4gZmFsbGJhY2sgdG8gb3RoZXIgUnVubmFibGVzIGlmIGl0IGZhaWxzLlxuKiBFeHRlcm5hbCBBUElzIChlLmcuLCBBUElzIGZvciBhIGxhbmd1YWdlIG1vZGVsKSBtYXkgYXQgdGltZXMgZXhwZXJpZW5jZVxuKiBkZWdyYWRlZCBwZXJmb3JtYW5jZSBvciBldmVuIGRvd250aW1lLlxuKlxuKiBJbiB0aGVzZSBjYXNlcywgaXQgY2FuIGJlIHVzZWZ1bCB0byBoYXZlIGEgZmFsbGJhY2sgUnVubmFibGUgdGhhdCBjYW4gYmVcbiogdXNlZCBpbiBwbGFjZSBvZiB0aGUgb3JpZ2luYWwgUnVubmFibGUgKGUuZy4sIGZhbGxiYWNrIHRvIGFub3RoZXIgTExNIHByb3ZpZGVyKS5cbipcbiogRmFsbGJhY2tzIGNhbiBiZSBkZWZpbmVkIGF0IHRoZSBsZXZlbCBvZiBhIHNpbmdsZSBSdW5uYWJsZSwgb3IgYXQgdGhlIGxldmVsXG4qIG9mIGEgY2hhaW4gb2YgUnVubmFibGVzLiBGYWxsYmFja3MgYXJlIHRyaWVkIGluIG9yZGVyIHVudGlsIG9uZSBzdWNjZWVkcyBvclxuKiBhbGwgZmFpbC5cbipcbiogV2hpbGUgeW91IGNhbiBpbnN0YW50aWF0ZSBhIGBSdW5uYWJsZVdpdGhGYWxsYmFja3NgIGRpcmVjdGx5LCBpdCBpcyB1c3VhbGx5XG4qIG1vcmUgY29udmVuaWVudCB0byB1c2UgdGhlIGB3aXRoRmFsbGJhY2tzYCBtZXRob2Qgb24gYW4gZXhpc3RpbmcgUnVubmFibGUuXG4qXG4qIFdoZW4gc3RyZWFtaW5nLCBmYWxsYmFja3Mgd2lsbCBvbmx5IGJlIGNhbGxlZCBvbiBmYWlsdXJlcyBkdXJpbmcgdGhlIGluaXRpYWxcbiogc3RyZWFtIGNyZWF0aW9uLiBFcnJvcnMgdGhhdCBvY2N1ciBhZnRlciBhIHN0cmVhbSBzdGFydHMgd2lsbCBub3QgZmFsbGJhY2tcbiogdG8gdGhlIG5leHQgUnVubmFibGUuXG4qXG4qIEBleGFtcGxlXG4qIGBgYHR5cGVzY3JpcHRcbiogaW1wb3J0IHtcbiogICBSdW5uYWJsZUxhbWJkYSxcbiogICBSdW5uYWJsZVdpdGhGYWxsYmFja3MsXG4qIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9ydW5uYWJsZXNcIjtcbipcbiogY29uc3QgcHJpbWFyeU9wZXJhdGlvbiA9IChpbnB1dDogc3RyaW5nKTogc3RyaW5nID0+IHtcbiogICBpZiAoaW5wdXQgIT09IFwic2FmZVwiKSB7XG4qICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcmltYXJ5IG9wZXJhdGlvbiBmYWlsZWQgZHVlIHRvIHVuc2FmZSBpbnB1dFwiKTtcbiogICB9XG4qICAgcmV0dXJuIGBQcm9jZXNzZWQ6ICR7aW5wdXR9YDtcbiogfTtcbipcbiogLy8gRGVmaW5lIGEgZmFsbGJhY2sgb3BlcmF0aW9uIHRoYXQgcHJvY2Vzc2VzIHRoZSBpbnB1dCBkaWZmZXJlbnRseVxuKiBjb25zdCBmYWxsYmFja09wZXJhdGlvbiA9IChpbnB1dDogc3RyaW5nKTogc3RyaW5nID0+XG4qICAgYEZhbGxiYWNrIHByb2Nlc3NlZDogJHtpbnB1dH1gO1xuKlxuKiBjb25zdCBwcmltYXJ5UnVubmFibGUgPSBSdW5uYWJsZUxhbWJkYS5mcm9tKHByaW1hcnlPcGVyYXRpb24pO1xuKiBjb25zdCBmYWxsYmFja1J1bm5hYmxlID0gUnVubmFibGVMYW1iZGEuZnJvbShmYWxsYmFja09wZXJhdGlvbik7XG4qXG4qIC8vIEFwcGx5IHRoZSBmYWxsYmFjayBsb2dpYyB1c2luZyB0aGUgLndpdGhGYWxsYmFja3MoKSBtZXRob2RcbiogY29uc3QgcnVubmFibGVXaXRoRmFsbGJhY2sgPSBwcmltYXJ5UnVubmFibGUud2l0aEZhbGxiYWNrcyhbZmFsbGJhY2tSdW5uYWJsZV0pO1xuKlxuKiAvLyBBbHRlcm5hdGl2ZWx5LCBjcmVhdGUgYSBSdW5uYWJsZVdpdGhGYWxsYmFja3MgaW5zdGFuY2UgbWFudWFsbHlcbiogY29uc3QgbWFudWFsRmFsbGJhY2tDaGFpbiA9IG5ldyBSdW5uYWJsZVdpdGhGYWxsYmFja3Moe1xuKiAgIHJ1bm5hYmxlOiBwcmltYXJ5UnVubmFibGUsXG4qICAgZmFsbGJhY2tzOiBbZmFsbGJhY2tSdW5uYWJsZV0sXG4qIH0pO1xuKlxuKiAvLyBFeGFtcGxlIGludm9jYXRpb24gdXNpbmcgLndpdGhGYWxsYmFja3MoKVxuKiBjb25zdCByZXMgPSBhd2FpdCBydW5uYWJsZVdpdGhGYWxsYmFja1xuKiAgIC5pbnZva2UoXCJ1bnNhZmUgaW5wdXRcIilcbiogICAuY2F0Y2goKGVycm9yKSA9PiB7XG4qICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIGFmdGVyIGFsbCBhdHRlbXB0czpcIiwgZXJyb3IubWVzc2FnZSk7XG4qICAgfSk7XG4qXG4qIC8vIFwiRmFsbGJhY2sgcHJvY2Vzc2VkOiB1bnNhZmUgaW5wdXRcIlxuKlxuKiAvLyBFeGFtcGxlIGludm9jYXRpb24gdXNpbmcgbWFudWFsIGluc3RhbnRpYXRpb25cbiogY29uc3QgcmVzID0gYXdhaXQgbWFudWFsRmFsbGJhY2tDaGFpblxuKiAgIC5pbnZva2UoXCJzYWZlXCIpXG4qICAgLmNhdGNoKChlcnJvcikgPT4ge1xuKiAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCBhZnRlciBhbGwgYXR0ZW1wdHM6XCIsIGVycm9yLm1lc3NhZ2UpO1xuKiAgIH0pO1xuKlxuKiAvLyBcIlByb2Nlc3NlZDogc2FmZVwiXG4qIGBgYFxuKi9cbnZhciBSdW5uYWJsZVdpdGhGYWxsYmFja3MgPSBjbGFzcyBleHRlbmRzIFJ1bm5hYmxlIHtcblx0c3RhdGljIGxjX25hbWUoKSB7XG5cdFx0cmV0dXJuIFwiUnVubmFibGVXaXRoRmFsbGJhY2tzXCI7XG5cdH1cblx0bGNfbmFtZXNwYWNlID0gW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl07XG5cdGxjX3NlcmlhbGl6YWJsZSA9IHRydWU7XG5cdHJ1bm5hYmxlO1xuXHRmYWxsYmFja3M7XG5cdGNvbnN0cnVjdG9yKGZpZWxkcykge1xuXHRcdHN1cGVyKGZpZWxkcyk7XG5cdFx0dGhpcy5ydW5uYWJsZSA9IGZpZWxkcy5ydW5uYWJsZTtcblx0XHR0aGlzLmZhbGxiYWNrcyA9IGZpZWxkcy5mYWxsYmFja3M7XG5cdH1cblx0KnJ1bm5hYmxlcygpIHtcblx0XHR5aWVsZCB0aGlzLnJ1bm5hYmxlO1xuXHRcdGZvciAoY29uc3QgZmFsbGJhY2sgb2YgdGhpcy5mYWxsYmFja3MpIHlpZWxkIGZhbGxiYWNrO1xuXHR9XG5cdGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuXHRcdGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcblx0XHRjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKGNvbmZpZyk7XG5cdFx0Y29uc3QgeyBydW5JZCwuLi5vdGhlckNvbmZpZ0ZpZWxkcyB9ID0gY29uZmlnO1xuXHRcdGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXQsIFwiaW5wdXRcIiksIHJ1bklkLCB2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBvdGhlckNvbmZpZ0ZpZWxkcz8ucnVuTmFtZSk7XG5cdFx0Y29uc3QgY2hpbGRDb25maWcgPSBwYXRjaENvbmZpZyhvdGhlckNvbmZpZ0ZpZWxkcywgeyBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKCkgfSk7XG5cdFx0Y29uc3QgcmVzID0gYXdhaXQgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbi5ydW5XaXRoQ29uZmlnKGNoaWxkQ29uZmlnLCBhc3luYyAoKSA9PiB7XG5cdFx0XHRsZXQgZmlyc3RFcnJvcjtcblx0XHRcdGZvciAoY29uc3QgcnVubmFibGUgb2YgdGhpcy5ydW5uYWJsZXMoKSkge1xuXHRcdFx0XHRjb25maWc/LnNpZ25hbD8udGhyb3dJZkFib3J0ZWQoKTtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRjb25zdCBvdXRwdXQgPSBhd2FpdCBydW5uYWJsZS5pbnZva2UoaW5wdXQsIGNoaWxkQ29uZmlnKTtcblx0XHRcdFx0XHRhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChfY29lcmNlVG9EaWN0KG91dHB1dCwgXCJvdXRwdXRcIikpO1xuXHRcdFx0XHRcdHJldHVybiBvdXRwdXQ7XG5cdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRpZiAoZmlyc3RFcnJvciA9PT0gdm9pZCAwKSBmaXJzdEVycm9yID0gZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYgKGZpcnN0RXJyb3IgPT09IHZvaWQgMCkgdGhyb3cgbmV3IEVycm9yKFwiTm8gZXJyb3Igc3RvcmVkIGF0IGVuZCBvZiBmYWxsYmFjay5cIik7XG5cdFx0XHRhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGZpcnN0RXJyb3IpO1xuXHRcdFx0dGhyb3cgZmlyc3RFcnJvcjtcblx0XHR9KTtcblx0XHRyZXR1cm4gcmVzO1xuXHR9XG5cdGFzeW5jICpfc3RyZWFtSXRlcmF0b3IoaW5wdXQsIG9wdGlvbnMpIHtcblx0XHRjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG5cdFx0Y29uc3QgY2FsbGJhY2tNYW5hZ2VyXyA9IGF3YWl0IGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZyhjb25maWcpO1xuXHRcdGNvbnN0IHsgcnVuSWQsLi4ub3RoZXJDb25maWdGaWVsZHMgfSA9IGNvbmZpZztcblx0XHRjb25zdCBydW5NYW5hZ2VyID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlQ2hhaW5TdGFydCh0aGlzLnRvSlNPTigpLCBfY29lcmNlVG9EaWN0KGlucHV0LCBcImlucHV0XCIpLCBydW5JZCwgdm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgb3RoZXJDb25maWdGaWVsZHM/LnJ1bk5hbWUpO1xuXHRcdGxldCBmaXJzdEVycm9yO1xuXHRcdGxldCBzdHJlYW07XG5cdFx0Zm9yIChjb25zdCBydW5uYWJsZSBvZiB0aGlzLnJ1bm5hYmxlcygpKSB7XG5cdFx0XHRjb25maWc/LnNpZ25hbD8udGhyb3dJZkFib3J0ZWQoKTtcblx0XHRcdGNvbnN0IGNoaWxkQ29uZmlnID0gcGF0Y2hDb25maWcob3RoZXJDb25maWdGaWVsZHMsIHsgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZCgpIH0pO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3Qgb3JpZ2luYWxTdHJlYW0gPSBhd2FpdCBydW5uYWJsZS5zdHJlYW0oaW5wdXQsIGNoaWxkQ29uZmlnKTtcblx0XHRcdFx0c3RyZWFtID0gY29uc3VtZUFzeW5jSXRlcmFibGVJbkNvbnRleHQoY2hpbGRDb25maWcsIG9yaWdpbmFsU3RyZWFtKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdGlmIChmaXJzdEVycm9yID09PSB2b2lkIDApIGZpcnN0RXJyb3IgPSBlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoc3RyZWFtID09PSB2b2lkIDApIHtcblx0XHRcdGNvbnN0IGVycm9yID0gZmlyc3RFcnJvciA/PyAvKiBAX19QVVJFX18gKi8gbmV3IEVycm9yKFwiTm8gZXJyb3Igc3RvcmVkIGF0IGVuZCBvZiBmYWxsYmFjay5cIik7XG5cdFx0XHRhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGVycm9yKTtcblx0XHRcdHRocm93IGVycm9yO1xuXHRcdH1cblx0XHRsZXQgb3V0cHV0O1xuXHRcdHRyeSB7XG5cdFx0XHRmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHN0cmVhbSkge1xuXHRcdFx0XHR5aWVsZCBjaHVuaztcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRvdXRwdXQgPSBvdXRwdXQgPT09IHZvaWQgMCA/IG91dHB1dCA6IHRoaXMuX2NvbmNhdE91dHB1dENodW5rcyhvdXRwdXQsIGNodW5rKTtcblx0XHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdFx0b3V0cHV0ID0gdm9pZCAwO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0YXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihlKTtcblx0XHRcdHRocm93IGU7XG5cdFx0fVxuXHRcdGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRW5kKF9jb2VyY2VUb0RpY3Qob3V0cHV0LCBcIm91dHB1dFwiKSk7XG5cdH1cblx0YXN5bmMgYmF0Y2goaW5wdXRzLCBvcHRpb25zLCBiYXRjaE9wdGlvbnMpIHtcblx0XHRpZiAoYmF0Y2hPcHRpb25zPy5yZXR1cm5FeGNlcHRpb25zKSB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWQuXCIpO1xuXHRcdGNvbnN0IGNvbmZpZ0xpc3QgPSB0aGlzLl9nZXRPcHRpb25zTGlzdChvcHRpb25zID8/IHt9LCBpbnB1dHMubGVuZ3RoKTtcblx0XHRjb25zdCBjYWxsYmFja01hbmFnZXJzID0gYXdhaXQgUHJvbWlzZS5hbGwoY29uZmlnTGlzdC5tYXAoKGNvbmZpZykgPT4gZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKGNvbmZpZykpKTtcblx0XHRjb25zdCBydW5NYW5hZ2VycyA9IGF3YWl0IFByb21pc2UuYWxsKGNhbGxiYWNrTWFuYWdlcnMubWFwKGFzeW5jIChjYWxsYmFja01hbmFnZXIsIGkpID0+IHtcblx0XHRcdGNvbnN0IGhhbmRsZVN0YXJ0UmVzID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXRzW2ldLCBcImlucHV0XCIpLCBjb25maWdMaXN0W2ldLnJ1bklkLCB2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBjb25maWdMaXN0W2ldLnJ1bk5hbWUpO1xuXHRcdFx0ZGVsZXRlIGNvbmZpZ0xpc3RbaV0ucnVuSWQ7XG5cdFx0XHRyZXR1cm4gaGFuZGxlU3RhcnRSZXM7XG5cdFx0fSkpO1xuXHRcdGxldCBmaXJzdEVycm9yO1xuXHRcdGZvciAoY29uc3QgcnVubmFibGUgb2YgdGhpcy5ydW5uYWJsZXMoKSkge1xuXHRcdFx0Y29uZmlnTGlzdFswXS5zaWduYWw/LnRocm93SWZBYm9ydGVkKCk7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25zdCBvdXRwdXRzID0gYXdhaXQgcnVubmFibGUuYmF0Y2goaW5wdXRzLCBydW5NYW5hZ2Vycy5tYXAoKHJ1bk1hbmFnZXIsIGopID0+IHBhdGNoQ29uZmlnKGNvbmZpZ0xpc3Rbal0sIHsgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZCgpIH0pKSwgYmF0Y2hPcHRpb25zKTtcblx0XHRcdFx0YXdhaXQgUHJvbWlzZS5hbGwocnVuTWFuYWdlcnMubWFwKChydW5NYW5hZ2VyLCBpKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChfY29lcmNlVG9EaWN0KG91dHB1dHNbaV0sIFwib3V0cHV0XCIpKSkpO1xuXHRcdFx0XHRyZXR1cm4gb3V0cHV0cztcblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0aWYgKGZpcnN0RXJyb3IgPT09IHZvaWQgMCkgZmlyc3RFcnJvciA9IGU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmICghZmlyc3RFcnJvcikgdGhyb3cgbmV3IEVycm9yKFwiTm8gZXJyb3Igc3RvcmVkIGF0IGVuZCBvZiBmYWxsYmFja3MuXCIpO1xuXHRcdGF3YWl0IFByb21pc2UuYWxsKHJ1bk1hbmFnZXJzLm1hcCgocnVuTWFuYWdlcikgPT4gcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihmaXJzdEVycm9yKSkpO1xuXHRcdHRocm93IGZpcnN0RXJyb3I7XG5cdH1cbn07XG5mdW5jdGlvbiBfY29lcmNlVG9SdW5uYWJsZShjb2VyY2VhYmxlKSB7XG5cdGlmICh0eXBlb2YgY29lcmNlYWJsZSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gbmV3IFJ1bm5hYmxlTGFtYmRhKHsgZnVuYzogY29lcmNlYWJsZSB9KTtcblx0ZWxzZSBpZiAoUnVubmFibGUuaXNSdW5uYWJsZShjb2VyY2VhYmxlKSkgcmV0dXJuIGNvZXJjZWFibGU7XG5cdGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KGNvZXJjZWFibGUpICYmIHR5cGVvZiBjb2VyY2VhYmxlID09PSBcIm9iamVjdFwiKSB7XG5cdFx0Y29uc3QgcnVubmFibGVzID0ge307XG5cdFx0Zm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoY29lcmNlYWJsZSkpIHJ1bm5hYmxlc1trZXldID0gX2NvZXJjZVRvUnVubmFibGUodmFsdWUpO1xuXHRcdHJldHVybiBuZXcgUnVubmFibGVNYXAoeyBzdGVwczogcnVubmFibGVzIH0pO1xuXHR9IGVsc2UgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBhIFJ1bm5hYmxlLCBmdW5jdGlvbiBvciBvYmplY3QuXFxuSW5zdGVhZCBnb3QgYW4gdW5zdXBwb3J0ZWQgdHlwZS5gKTtcbn1cbi8qKlxuKiBBIHJ1bm5hYmxlIHRoYXQgYXNzaWducyBrZXktdmFsdWUgcGFpcnMgdG8gaW5wdXRzIG9mIHR5cGUgYFJlY29yZDxzdHJpbmcsIHVua25vd24+YC5cbiogQGV4YW1wbGVcbiogYGBgdHlwZXNjcmlwdFxuKiBpbXBvcnQge1xuKiAgIFJ1bm5hYmxlQXNzaWduLFxuKiAgIFJ1bm5hYmxlTGFtYmRhLFxuKiAgIFJ1bm5hYmxlUGFyYWxsZWwsXG4qIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9ydW5uYWJsZXNcIjtcbipcbiogY29uc3QgY2FsY3VsYXRlQWdlID0gKHg6IHsgYmlydGhZZWFyOiBudW1iZXIgfSk6IHsgYWdlOiBudW1iZXIgfSA9PiB7XG4qICAgY29uc3QgY3VycmVudFllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7XG4qICAgcmV0dXJuIHsgYWdlOiBjdXJyZW50WWVhciAtIHguYmlydGhZZWFyIH07XG4qIH07XG4qXG4qIGNvbnN0IGNyZWF0ZUdyZWV0aW5nID0gKHg6IHsgbmFtZTogc3RyaW5nIH0pOiB7IGdyZWV0aW5nOiBzdHJpbmcgfSA9PiB7XG4qICAgcmV0dXJuIHsgZ3JlZXRpbmc6IGBIZWxsbywgJHt4Lm5hbWV9IWAgfTtcbiogfTtcbipcbiogY29uc3QgbWFwcGVyID0gUnVubmFibGVQYXJhbGxlbC5mcm9tKHtcbiogICBhZ2Vfc3RlcDogUnVubmFibGVMYW1iZGEuZnJvbShjYWxjdWxhdGVBZ2UpLFxuKiAgIGdyZWV0aW5nX3N0ZXA6IFJ1bm5hYmxlTGFtYmRhLmZyb20oY3JlYXRlR3JlZXRpbmcpLFxuKiB9KTtcbipcbiogY29uc3QgcnVubmFibGVBc3NpZ24gPSBuZXcgUnVubmFibGVBc3NpZ24oeyBtYXBwZXIgfSk7XG4qXG4qIGNvbnN0IHJlcyA9IGF3YWl0IHJ1bm5hYmxlQXNzaWduLmludm9rZSh7IG5hbWU6IFwiQWxpY2VcIiwgYmlydGhZZWFyOiAxOTkwIH0pO1xuKlxuKiAvLyB7IG5hbWU6IFwiQWxpY2VcIiwgYmlydGhZZWFyOiAxOTkwLCBhZ2Vfc3RlcDogeyBhZ2U6IDM0IH0sIGdyZWV0aW5nX3N0ZXA6IHsgZ3JlZXRpbmc6IFwiSGVsbG8sIEFsaWNlIVwiIH0gfVxuKiBgYGBcbiovXG52YXIgUnVubmFibGVBc3NpZ24gPSBjbGFzcyBleHRlbmRzIFJ1bm5hYmxlIHtcblx0c3RhdGljIGxjX25hbWUoKSB7XG5cdFx0cmV0dXJuIFwiUnVubmFibGVBc3NpZ25cIjtcblx0fVxuXHRsY19uYW1lc3BhY2UgPSBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXTtcblx0bGNfc2VyaWFsaXphYmxlID0gdHJ1ZTtcblx0bWFwcGVyO1xuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHRpZiAoZmllbGRzIGluc3RhbmNlb2YgUnVubmFibGVNYXApIGZpZWxkcyA9IHsgbWFwcGVyOiBmaWVsZHMgfTtcblx0XHRzdXBlcihmaWVsZHMpO1xuXHRcdHRoaXMubWFwcGVyID0gZmllbGRzLm1hcHBlcjtcblx0fVxuXHRhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcblx0XHRjb25zdCBtYXBwZXJSZXN1bHQgPSBhd2FpdCB0aGlzLm1hcHBlci5pbnZva2UoaW5wdXQsIG9wdGlvbnMpO1xuXHRcdHJldHVybiB7XG5cdFx0XHQuLi5pbnB1dCxcblx0XHRcdC4uLm1hcHBlclJlc3VsdFxuXHRcdH07XG5cdH1cblx0YXN5bmMgKl90cmFuc2Zvcm0oZ2VuZXJhdG9yLCBydW5NYW5hZ2VyLCBvcHRpb25zKSB7XG5cdFx0Y29uc3QgbWFwcGVyS2V5cyA9IHRoaXMubWFwcGVyLmdldFN0ZXBzS2V5cygpO1xuXHRcdGNvbnN0IFtmb3JQYXNzdGhyb3VnaCwgZm9yTWFwcGVyXSA9IGF0ZWUoZ2VuZXJhdG9yKTtcblx0XHRjb25zdCBtYXBwZXJPdXRwdXQgPSB0aGlzLm1hcHBlci50cmFuc2Zvcm0oZm9yTWFwcGVyLCBwYXRjaENvbmZpZyhvcHRpb25zLCB7IGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSB9KSk7XG5cdFx0Y29uc3QgZmlyc3RNYXBwZXJDaHVua1Byb21pc2UgPSBtYXBwZXJPdXRwdXQubmV4dCgpO1xuXHRcdGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgZm9yUGFzc3Rocm91Z2gpIHtcblx0XHRcdGlmICh0eXBlb2YgY2h1bmsgIT09IFwib2JqZWN0XCIgfHwgQXJyYXkuaXNBcnJheShjaHVuaykpIHRocm93IG5ldyBFcnJvcihgUnVubmFibGVBc3NpZ24gY2FuIG9ubHkgYmUgdXNlZCB3aXRoIG9iamVjdHMgYXMgaW5wdXQsIGdvdCAke3R5cGVvZiBjaHVua31gKTtcblx0XHRcdGNvbnN0IGZpbHRlcmVkID0gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKGNodW5rKS5maWx0ZXIoKFtrZXldKSA9PiAhbWFwcGVyS2V5cy5pbmNsdWRlcyhrZXkpKSk7XG5cdFx0XHRpZiAoT2JqZWN0LmtleXMoZmlsdGVyZWQpLmxlbmd0aCA+IDApIHlpZWxkIGZpbHRlcmVkO1xuXHRcdH1cblx0XHR5aWVsZCAoYXdhaXQgZmlyc3RNYXBwZXJDaHVua1Byb21pc2UpLnZhbHVlO1xuXHRcdGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgbWFwcGVyT3V0cHV0KSB5aWVsZCBjaHVuaztcblx0fVxuXHR0cmFuc2Zvcm0oZ2VuZXJhdG9yLCBvcHRpb25zKSB7XG5cdFx0cmV0dXJuIHRoaXMuX3RyYW5zZm9ybVN0cmVhbVdpdGhDb25maWcoZ2VuZXJhdG9yLCB0aGlzLl90cmFuc2Zvcm0uYmluZCh0aGlzKSwgb3B0aW9ucyk7XG5cdH1cblx0YXN5bmMgc3RyZWFtKGlucHV0LCBvcHRpb25zKSB7XG5cdFx0YXN5bmMgZnVuY3Rpb24qIGdlbmVyYXRvcigpIHtcblx0XHRcdHlpZWxkIGlucHV0O1xuXHRcdH1cblx0XHRjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG5cdFx0Y29uc3Qgd3JhcHBlZEdlbmVyYXRvciA9IG5ldyBBc3luY0dlbmVyYXRvcldpdGhTZXR1cCh7XG5cdFx0XHRnZW5lcmF0b3I6IHRoaXMudHJhbnNmb3JtKGdlbmVyYXRvcigpLCBjb25maWcpLFxuXHRcdFx0Y29uZmlnXG5cdFx0fSk7XG5cdFx0YXdhaXQgd3JhcHBlZEdlbmVyYXRvci5zZXR1cDtcblx0XHRyZXR1cm4gSXRlcmFibGVSZWFkYWJsZVN0cmVhbS5mcm9tQXN5bmNHZW5lcmF0b3Iod3JhcHBlZEdlbmVyYXRvcik7XG5cdH1cbn07XG4vKipcbiogQSBydW5uYWJsZSB0aGF0IGFzc2lnbnMga2V5LXZhbHVlIHBhaXJzIHRvIGlucHV0cyBvZiB0eXBlIGBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPmAuXG4qIFVzZWZ1bCBmb3Igc3RyZWFtaW5nLCBjYW4gYmUgYXV0b21hdGljYWxseSBjcmVhdGVkIGFuZCBjaGFpbmVkIGJ5IGNhbGxpbmcgYHJ1bm5hYmxlLnBpY2soKTtgLlxuKiBAZXhhbXBsZVxuKiBgYGB0eXBlc2NyaXB0XG4qIGltcG9ydCB7IFJ1bm5hYmxlUGljayB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvcnVubmFibGVzXCI7XG4qXG4qIGNvbnN0IGlucHV0RGF0YSA9IHtcbiogICBuYW1lOiBcIkpvaG5cIixcbiogICBhZ2U6IDMwLFxuKiAgIGNpdHk6IFwiTmV3IFlvcmtcIixcbiogICBjb3VudHJ5OiBcIlVTQVwiLFxuKiAgIGVtYWlsOiBcImpvaG4uZG9lQGV4YW1wbGUuY29tXCIsXG4qICAgcGhvbmU6IFwiKzEyMzQ1Njc4OTBcIixcbiogfTtcbipcbiogY29uc3QgYmFzaWNJbmZvUnVubmFibGUgPSBuZXcgUnVubmFibGVQaWNrKFtcIm5hbWVcIiwgXCJjaXR5XCJdKTtcbipcbiogLy8gRXhhbXBsZSBpbnZvY2F0aW9uXG4qIGNvbnN0IHJlcyA9IGF3YWl0IGJhc2ljSW5mb1J1bm5hYmxlLmludm9rZShpbnB1dERhdGEpO1xuKlxuKiAvLyB7IG5hbWU6ICdKb2huJywgY2l0eTogJ05ldyBZb3JrJyB9XG4qIGBgYFxuKi9cbnZhciBSdW5uYWJsZVBpY2sgPSBjbGFzcyBleHRlbmRzIFJ1bm5hYmxlIHtcblx0c3RhdGljIGxjX25hbWUoKSB7XG5cdFx0cmV0dXJuIFwiUnVubmFibGVQaWNrXCI7XG5cdH1cblx0bGNfbmFtZXNwYWNlID0gW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl07XG5cdGxjX3NlcmlhbGl6YWJsZSA9IHRydWU7XG5cdGtleXM7XG5cdGNvbnN0cnVjdG9yKGZpZWxkcykge1xuXHRcdGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiIHx8IEFycmF5LmlzQXJyYXkoZmllbGRzKSkgZmllbGRzID0geyBrZXlzOiBmaWVsZHMgfTtcblx0XHRzdXBlcihmaWVsZHMpO1xuXHRcdHRoaXMua2V5cyA9IGZpZWxkcy5rZXlzO1xuXHR9XG5cdGFzeW5jIF9waWNrKGlucHV0KSB7XG5cdFx0aWYgKHR5cGVvZiB0aGlzLmtleXMgPT09IFwic3RyaW5nXCIpIHJldHVybiBpbnB1dFt0aGlzLmtleXNdO1xuXHRcdGVsc2Uge1xuXHRcdFx0Y29uc3QgcGlja2VkID0gdGhpcy5rZXlzLm1hcCgoa2V5KSA9PiBba2V5LCBpbnB1dFtrZXldXSkuZmlsdGVyKCh2KSA9PiB2WzFdICE9PSB2b2lkIDApO1xuXHRcdFx0cmV0dXJuIHBpY2tlZC5sZW5ndGggPT09IDAgPyB2b2lkIDAgOiBPYmplY3QuZnJvbUVudHJpZXMocGlja2VkKTtcblx0XHR9XG5cdH1cblx0YXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG5cdFx0cmV0dXJuIHRoaXMuX2NhbGxXaXRoQ29uZmlnKHRoaXMuX3BpY2suYmluZCh0aGlzKSwgaW5wdXQsIG9wdGlvbnMpO1xuXHR9XG5cdGFzeW5jICpfdHJhbnNmb3JtKGdlbmVyYXRvcikge1xuXHRcdGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgZ2VuZXJhdG9yKSB7XG5cdFx0XHRjb25zdCBwaWNrZWQgPSBhd2FpdCB0aGlzLl9waWNrKGNodW5rKTtcblx0XHRcdGlmIChwaWNrZWQgIT09IHZvaWQgMCkgeWllbGQgcGlja2VkO1xuXHRcdH1cblx0fVxuXHR0cmFuc2Zvcm0oZ2VuZXJhdG9yLCBvcHRpb25zKSB7XG5cdFx0cmV0dXJuIHRoaXMuX3RyYW5zZm9ybVN0cmVhbVdpdGhDb25maWcoZ2VuZXJhdG9yLCB0aGlzLl90cmFuc2Zvcm0uYmluZCh0aGlzKSwgb3B0aW9ucyk7XG5cdH1cblx0YXN5bmMgc3RyZWFtKGlucHV0LCBvcHRpb25zKSB7XG5cdFx0YXN5bmMgZnVuY3Rpb24qIGdlbmVyYXRvcigpIHtcblx0XHRcdHlpZWxkIGlucHV0O1xuXHRcdH1cblx0XHRjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG5cdFx0Y29uc3Qgd3JhcHBlZEdlbmVyYXRvciA9IG5ldyBBc3luY0dlbmVyYXRvcldpdGhTZXR1cCh7XG5cdFx0XHRnZW5lcmF0b3I6IHRoaXMudHJhbnNmb3JtKGdlbmVyYXRvcigpLCBjb25maWcpLFxuXHRcdFx0Y29uZmlnXG5cdFx0fSk7XG5cdFx0YXdhaXQgd3JhcHBlZEdlbmVyYXRvci5zZXR1cDtcblx0XHRyZXR1cm4gSXRlcmFibGVSZWFkYWJsZVN0cmVhbS5mcm9tQXN5bmNHZW5lcmF0b3Iod3JhcHBlZEdlbmVyYXRvcik7XG5cdH1cbn07XG52YXIgUnVubmFibGVUb29sTGlrZSA9IGNsYXNzIGV4dGVuZHMgUnVubmFibGVCaW5kaW5nIHtcblx0bmFtZTtcblx0ZGVzY3JpcHRpb247XG5cdHNjaGVtYTtcblx0Y29uc3RydWN0b3IoZmllbGRzKSB7XG5cdFx0Y29uc3Qgc2VxdWVuY2UgPSBSdW5uYWJsZVNlcXVlbmNlLmZyb20oW1J1bm5hYmxlTGFtYmRhLmZyb20oYXN5bmMgKGlucHV0KSA9PiB7XG5cdFx0XHRsZXQgdG9vbElucHV0O1xuXHRcdFx0aWYgKF9pc1Rvb2xDYWxsKGlucHV0KSkgdHJ5IHtcblx0XHRcdFx0dG9vbElucHV0ID0gYXdhaXQgaW50ZXJvcFBhcnNlQXN5bmModGhpcy5zY2hlbWEsIGlucHV0LmFyZ3MpO1xuXHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdHRocm93IG5ldyBUb29sSW5wdXRQYXJzaW5nRXhjZXB0aW9uKGBSZWNlaXZlZCB0b29sIGlucHV0IGRpZCBub3QgbWF0Y2ggZXhwZWN0ZWQgc2NoZW1hYCwgSlNPTi5zdHJpbmdpZnkoaW5wdXQuYXJncykpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB0b29sSW5wdXQgPSBpbnB1dDtcblx0XHRcdHJldHVybiB0b29sSW5wdXQ7XG5cdFx0fSkud2l0aENvbmZpZyh7IHJ1bk5hbWU6IGAke2ZpZWxkcy5uYW1lfTpwYXJzZV9pbnB1dGAgfSksIGZpZWxkcy5ib3VuZF0pLndpdGhDb25maWcoeyBydW5OYW1lOiBmaWVsZHMubmFtZSB9KTtcblx0XHRzdXBlcih7XG5cdFx0XHRib3VuZDogc2VxdWVuY2UsXG5cdFx0XHRjb25maWc6IGZpZWxkcy5jb25maWcgPz8ge31cblx0XHR9KTtcblx0XHR0aGlzLm5hbWUgPSBmaWVsZHMubmFtZTtcblx0XHR0aGlzLmRlc2NyaXB0aW9uID0gZmllbGRzLmRlc2NyaXB0aW9uO1xuXHRcdHRoaXMuc2NoZW1hID0gZmllbGRzLnNjaGVtYTtcblx0fVxuXHRzdGF0aWMgbGNfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJSdW5uYWJsZVRvb2xMaWtlXCI7XG5cdH1cbn07XG4vKipcbiogR2l2ZW4gYSBydW5uYWJsZSBhbmQgYSBab2Qgc2NoZW1hLCBjb252ZXJ0IHRoZSBydW5uYWJsZSB0byBhIHRvb2wuXG4qXG4qIEB0ZW1wbGF0ZSBSdW5JbnB1dCBUaGUgaW5wdXQgdHlwZSBmb3IgdGhlIHJ1bm5hYmxlLlxuKiBAdGVtcGxhdGUgUnVuT3V0cHV0IFRoZSBvdXRwdXQgdHlwZSBmb3IgdGhlIHJ1bm5hYmxlLlxuKlxuKiBAcGFyYW0ge1J1bm5hYmxlPFJ1bklucHV0LCBSdW5PdXRwdXQ+fSBydW5uYWJsZSBUaGUgcnVubmFibGUgdG8gY29udmVydCB0byBhIHRvb2wuXG4qIEBwYXJhbSBmaWVsZHNcbiogQHBhcmFtIHtzdHJpbmcgfCB1bmRlZmluZWR9IFtmaWVsZHMubmFtZV0gVGhlIG5hbWUgb2YgdGhlIHRvb2wuIElmIG5vdCBwcm92aWRlZCwgaXQgd2lsbCBkZWZhdWx0IHRvIHRoZSBuYW1lIG9mIHRoZSBydW5uYWJsZS5cbiogQHBhcmFtIHtzdHJpbmcgfCB1bmRlZmluZWR9IFtmaWVsZHMuZGVzY3JpcHRpb25dIFRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgdG9vbC4gRmFsbHMgYmFjayB0byB0aGUgZGVzY3JpcHRpb24gb24gdGhlIFpvZCBzY2hlbWEgaWYgbm90IHByb3ZpZGVkLCBvciB1bmRlZmluZWQgaWYgbmVpdGhlciBhcmUgcHJvdmlkZWQuXG4qIEBwYXJhbSB7SW50ZXJvcFpvZFR5cGU8UnVuSW5wdXQ+fSBbZmllbGRzLnNjaGVtYV0gVGhlIFpvZCBzY2hlbWEgZm9yIHRoZSBpbnB1dCBvZiB0aGUgdG9vbC4gSW5mZXJzIHRoZSBab2QgdHlwZSBmcm9tIHRoZSBpbnB1dCB0eXBlIG9mIHRoZSBydW5uYWJsZS5cbiogQHJldHVybnMge1J1bm5hYmxlVG9vbExpa2U8SW50ZXJvcFpvZFR5cGU8UnVuSW5wdXQ+LCBSdW5PdXRwdXQ+fSBBbiBpbnN0YW5jZSBvZiBgUnVubmFibGVUb29sTGlrZWAgd2hpY2ggaXMgYSBydW5uYWJsZSB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgdG9vbC5cbiovXG5mdW5jdGlvbiBjb252ZXJ0UnVubmFibGVUb1Rvb2wocnVubmFibGUsIGZpZWxkcykge1xuXHRjb25zdCBuYW1lID0gZmllbGRzLm5hbWUgPz8gcnVubmFibGUuZ2V0TmFtZSgpO1xuXHRjb25zdCBkZXNjcmlwdGlvbiA9IGZpZWxkcy5kZXNjcmlwdGlvbiA/PyBnZXRTY2hlbWFEZXNjcmlwdGlvbihmaWVsZHMuc2NoZW1hKTtcblx0aWYgKGlzU2ltcGxlU3RyaW5nWm9kU2NoZW1hKGZpZWxkcy5zY2hlbWEpKSByZXR1cm4gbmV3IFJ1bm5hYmxlVG9vbExpa2Uoe1xuXHRcdG5hbWUsXG5cdFx0ZGVzY3JpcHRpb24sXG5cdFx0c2NoZW1hOiB6Lm9iamVjdCh7IGlucHV0OiB6LnN0cmluZygpIH0pLnRyYW5zZm9ybSgoaW5wdXQpID0+IGlucHV0LmlucHV0KSxcblx0XHRib3VuZDogcnVubmFibGVcblx0fSk7XG5cdHJldHVybiBuZXcgUnVubmFibGVUb29sTGlrZSh7XG5cdFx0bmFtZSxcblx0XHRkZXNjcmlwdGlvbixcblx0XHRzY2hlbWE6IGZpZWxkcy5zY2hlbWEsXG5cdFx0Ym91bmQ6IHJ1bm5hYmxlXG5cdH0pO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IFJ1bm5hYmxlLCBSdW5uYWJsZUFzc2lnbiwgUnVubmFibGVCaW5kaW5nLCBSdW5uYWJsZUVhY2gsIFJ1bm5hYmxlTGFtYmRhLCBSdW5uYWJsZU1hcCwgUnVubmFibGVQYXJhbGxlbCwgUnVubmFibGVQaWNrLCBSdW5uYWJsZVJldHJ5LCBSdW5uYWJsZVNlcXVlbmNlLCBSdW5uYWJsZVRvb2xMaWtlLCBSdW5uYWJsZVdpdGhGYWxsYmFja3MsIF9jb2VyY2VUb0RpY3QsIF9jb2VyY2VUb1J1bm5hYmxlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iYXNlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/runnables/base.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/runnables/branch.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/branch.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RunnableBranch: () => (/* binding */ RunnableBranch)\n/* harmony export */ });\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/config.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/stream.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/base.js\");\n\n\n\n\n//#region src/runnables/branch.ts\n/**\n* Class that represents a runnable branch. The RunnableBranch is\n* initialized with an array of branches and a default branch. When invoked,\n* it evaluates the condition of each branch in order and executes the\n* corresponding branch if the condition is true. If none of the conditions\n* are true, it executes the default branch.\n* @example\n* ```typescript\n* const branch = RunnableBranch.from([\n*   [\n*     (x: { topic: string; question: string }) =>\n*       x.topic.toLowerCase().includes(\"anthropic\"),\n*     anthropicChain,\n*   ],\n*   [\n*     (x: { topic: string; question: string }) =>\n*       x.topic.toLowerCase().includes(\"langchain\"),\n*     langChainChain,\n*   ],\n*   generalChain,\n* ]);\n*\n* const fullChain = RunnableSequence.from([\n*   {\n*     topic: classificationChain,\n*     question: (input: { question: string }) => input.question,\n*   },\n*   branch,\n* ]);\n*\n* const result = await fullChain.invoke({\n*   question: \"how do I use LangChain?\",\n* });\n* ```\n*/\nvar RunnableBranch = class extends _base_js__WEBPACK_IMPORTED_MODULE_2__.Runnable {\n\tstatic lc_name() {\n\t\treturn \"RunnableBranch\";\n\t}\n\tlc_namespace = [\"langchain_core\", \"runnables\"];\n\tlc_serializable = true;\n\tdefault;\n\tbranches;\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.branches = fields.branches;\n\t\tthis.default = fields.default;\n\t}\n\t/**\n\t* Convenience method for instantiating a RunnableBranch from\n\t* RunnableLikes (objects, functions, or Runnables).\n\t*\n\t* Each item in the input except for the last one should be a\n\t* tuple with two items. The first is a \"condition\" RunnableLike that\n\t* returns \"true\" if the second RunnableLike in the tuple should run.\n\t*\n\t* The final item in the input should be a RunnableLike that acts as a\n\t* default branch if no other branches match.\n\t*\n\t* @example\n\t* ```ts\n\t* import { RunnableBranch } from \"@langchain/core/runnables\";\n\t*\n\t* const branch = RunnableBranch.from([\n\t*   [(x: number) => x > 0, (x: number) => x + 1],\n\t*   [(x: number) => x < 0, (x: number) => x - 1],\n\t*   (x: number) => x\n\t* ]);\n\t* ```\n\t* @param branches An array where the every item except the last is a tuple of [condition, runnable]\n\t*   pairs. The last item is a default runnable which is invoked if no other condition matches.\n\t* @returns A new RunnableBranch.\n\t*/\n\tstatic from(branches) {\n\t\tif (branches.length < 1) throw new Error(\"RunnableBranch requires at least one branch\");\n\t\tconst branchLikes = branches.slice(0, -1);\n\t\tconst coercedBranches = branchLikes.map(([condition, runnable]) => [(0,_base_js__WEBPACK_IMPORTED_MODULE_2__._coerceToRunnable)(condition), (0,_base_js__WEBPACK_IMPORTED_MODULE_2__._coerceToRunnable)(runnable)]);\n\t\tconst defaultBranch = (0,_base_js__WEBPACK_IMPORTED_MODULE_2__._coerceToRunnable)(branches[branches.length - 1]);\n\t\treturn new this({\n\t\t\tbranches: coercedBranches,\n\t\t\tdefault: defaultBranch\n\t\t});\n\t}\n\tasync _invoke(input, config, runManager) {\n\t\tlet result;\n\t\tfor (let i = 0; i < this.branches.length; i += 1) {\n\t\t\tconst [condition, branchRunnable] = this.branches[i];\n\t\t\tconst conditionValue = await condition.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_0__.patchConfig)(config, { callbacks: runManager?.getChild(`condition:${i + 1}`) }));\n\t\t\tif (conditionValue) {\n\t\t\t\tresult = await branchRunnable.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_0__.patchConfig)(config, { callbacks: runManager?.getChild(`branch:${i + 1}`) }));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (!result) result = await this.default.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_0__.patchConfig)(config, { callbacks: runManager?.getChild(\"branch:default\") }));\n\t\treturn result;\n\t}\n\tasync invoke(input, config = {}) {\n\t\treturn this._callWithConfig(this._invoke, input, config);\n\t}\n\tasync *_streamIterator(input, config) {\n\t\tconst callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_0__.getCallbackManagerForConfig)(config);\n\t\tconst runManager = await callbackManager_?.handleChainStart(this.toJSON(), (0,_base_js__WEBPACK_IMPORTED_MODULE_2__._coerceToDict)(input, \"input\"), config?.runId, void 0, void 0, void 0, config?.runName);\n\t\tlet finalOutput;\n\t\tlet finalOutputSupported = true;\n\t\tlet stream;\n\t\ttry {\n\t\t\tfor (let i = 0; i < this.branches.length; i += 1) {\n\t\t\t\tconst [condition, branchRunnable] = this.branches[i];\n\t\t\t\tconst conditionValue = await condition.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_0__.patchConfig)(config, { callbacks: runManager?.getChild(`condition:${i + 1}`) }));\n\t\t\t\tif (conditionValue) {\n\t\t\t\t\tstream = await branchRunnable.stream(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_0__.patchConfig)(config, { callbacks: runManager?.getChild(`branch:${i + 1}`) }));\n\t\t\t\t\tfor await (const chunk of stream) {\n\t\t\t\t\t\tyield chunk;\n\t\t\t\t\t\tif (finalOutputSupported) if (finalOutput === void 0) finalOutput = chunk;\n\t\t\t\t\t\telse try {\n\t\t\t\t\t\t\tfinalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_1__.concat)(finalOutput, chunk);\n\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\tfinalOutput = void 0;\n\t\t\t\t\t\t\tfinalOutputSupported = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (stream === void 0) {\n\t\t\t\tstream = await this.default.stream(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_0__.patchConfig)(config, { callbacks: runManager?.getChild(\"branch:default\") }));\n\t\t\t\tfor await (const chunk of stream) {\n\t\t\t\t\tyield chunk;\n\t\t\t\t\tif (finalOutputSupported) if (finalOutput === void 0) finalOutput = chunk;\n\t\t\t\t\telse try {\n\t\t\t\t\t\tfinalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_1__.concat)(finalOutput, chunk);\n\t\t\t\t\t} catch {\n\t\t\t\t\t\tfinalOutput = void 0;\n\t\t\t\t\t\tfinalOutputSupported = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tawait runManager?.handleChainError(e);\n\t\t\tthrow e;\n\t\t}\n\t\tawait runManager?.handleChainEnd(finalOutput ?? {});\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=branch.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2JyYW5jaC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXVFO0FBQzNCO0FBQzJCOztBQUV2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxlQUFlLGtCQUFrQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZUFBZSxrQkFBa0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGtCQUFrQjtBQUM1QyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsbUNBQW1DLDhDQUFRO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpQkFBaUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNFQUFzRSwyREFBaUIsYUFBYSwyREFBaUI7QUFDckgsd0JBQXdCLDJEQUFpQjtBQUN6QztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDBCQUEwQjtBQUM1QztBQUNBLHdEQUF3RCx1REFBVyxXQUFXLDZDQUE2QyxNQUFNLElBQUk7QUFDckk7QUFDQSxnREFBZ0QsdURBQVcsV0FBVywwQ0FBMEMsTUFBTSxJQUFJO0FBQzFIO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCx1REFBVyxXQUFXLG1EQUFtRDtBQUNsSTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyx1RUFBMkI7QUFDNUQsNkVBQTZFLHVEQUFhO0FBQzFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDBCQUEwQjtBQUM3QztBQUNBLHlEQUF5RCx1REFBVyxXQUFXLDZDQUE2QyxNQUFNLElBQUk7QUFDdEk7QUFDQSxpREFBaUQsdURBQVcsV0FBVywwQ0FBMEMsTUFBTSxJQUFJO0FBQzNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHdEQUFNO0FBQzNCLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLHVEQUFXLFdBQVcsbURBQW1EO0FBQ3ZIO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHdEQUFNO0FBQzFCLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRDtBQUNwRDtBQUNBOztBQUVBO0FBQzBCO0FBQzFCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2JyYW5jaC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcsIHBhdGNoQ29uZmlnIH0gZnJvbSBcIi4vY29uZmlnLmpzXCI7XG5pbXBvcnQgeyBjb25jYXQgfSBmcm9tIFwiLi4vdXRpbHMvc3RyZWFtLmpzXCI7XG5pbXBvcnQgeyBSdW5uYWJsZSwgX2NvZXJjZVRvRGljdCwgX2NvZXJjZVRvUnVubmFibGUgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcnVubmFibGVzL2JyYW5jaC50c1xuLyoqXG4qIENsYXNzIHRoYXQgcmVwcmVzZW50cyBhIHJ1bm5hYmxlIGJyYW5jaC4gVGhlIFJ1bm5hYmxlQnJhbmNoIGlzXG4qIGluaXRpYWxpemVkIHdpdGggYW4gYXJyYXkgb2YgYnJhbmNoZXMgYW5kIGEgZGVmYXVsdCBicmFuY2guIFdoZW4gaW52b2tlZCxcbiogaXQgZXZhbHVhdGVzIHRoZSBjb25kaXRpb24gb2YgZWFjaCBicmFuY2ggaW4gb3JkZXIgYW5kIGV4ZWN1dGVzIHRoZVxuKiBjb3JyZXNwb25kaW5nIGJyYW5jaCBpZiB0aGUgY29uZGl0aW9uIGlzIHRydWUuIElmIG5vbmUgb2YgdGhlIGNvbmRpdGlvbnNcbiogYXJlIHRydWUsIGl0IGV4ZWN1dGVzIHRoZSBkZWZhdWx0IGJyYW5jaC5cbiogQGV4YW1wbGVcbiogYGBgdHlwZXNjcmlwdFxuKiBjb25zdCBicmFuY2ggPSBSdW5uYWJsZUJyYW5jaC5mcm9tKFtcbiogICBbXG4qICAgICAoeDogeyB0b3BpYzogc3RyaW5nOyBxdWVzdGlvbjogc3RyaW5nIH0pID0+XG4qICAgICAgIHgudG9waWMudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImFudGhyb3BpY1wiKSxcbiogICAgIGFudGhyb3BpY0NoYWluLFxuKiAgIF0sXG4qICAgW1xuKiAgICAgKHg6IHsgdG9waWM6IHN0cmluZzsgcXVlc3Rpb246IHN0cmluZyB9KSA9PlxuKiAgICAgICB4LnRvcGljLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJsYW5nY2hhaW5cIiksXG4qICAgICBsYW5nQ2hhaW5DaGFpbixcbiogICBdLFxuKiAgIGdlbmVyYWxDaGFpbixcbiogXSk7XG4qXG4qIGNvbnN0IGZ1bGxDaGFpbiA9IFJ1bm5hYmxlU2VxdWVuY2UuZnJvbShbXG4qICAge1xuKiAgICAgdG9waWM6IGNsYXNzaWZpY2F0aW9uQ2hhaW4sXG4qICAgICBxdWVzdGlvbjogKGlucHV0OiB7IHF1ZXN0aW9uOiBzdHJpbmcgfSkgPT4gaW5wdXQucXVlc3Rpb24sXG4qICAgfSxcbiogICBicmFuY2gsXG4qIF0pO1xuKlxuKiBjb25zdCByZXN1bHQgPSBhd2FpdCBmdWxsQ2hhaW4uaW52b2tlKHtcbiogICBxdWVzdGlvbjogXCJob3cgZG8gSSB1c2UgTGFuZ0NoYWluP1wiLFxuKiB9KTtcbiogYGBgXG4qL1xudmFyIFJ1bm5hYmxlQnJhbmNoID0gY2xhc3MgZXh0ZW5kcyBSdW5uYWJsZSB7XG5cdHN0YXRpYyBsY19uYW1lKCkge1xuXHRcdHJldHVybiBcIlJ1bm5hYmxlQnJhbmNoXCI7XG5cdH1cblx0bGNfbmFtZXNwYWNlID0gW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl07XG5cdGxjX3NlcmlhbGl6YWJsZSA9IHRydWU7XG5cdGRlZmF1bHQ7XG5cdGJyYW5jaGVzO1xuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHRzdXBlcihmaWVsZHMpO1xuXHRcdHRoaXMuYnJhbmNoZXMgPSBmaWVsZHMuYnJhbmNoZXM7XG5cdFx0dGhpcy5kZWZhdWx0ID0gZmllbGRzLmRlZmF1bHQ7XG5cdH1cblx0LyoqXG5cdCogQ29udmVuaWVuY2UgbWV0aG9kIGZvciBpbnN0YW50aWF0aW5nIGEgUnVubmFibGVCcmFuY2ggZnJvbVxuXHQqIFJ1bm5hYmxlTGlrZXMgKG9iamVjdHMsIGZ1bmN0aW9ucywgb3IgUnVubmFibGVzKS5cblx0KlxuXHQqIEVhY2ggaXRlbSBpbiB0aGUgaW5wdXQgZXhjZXB0IGZvciB0aGUgbGFzdCBvbmUgc2hvdWxkIGJlIGFcblx0KiB0dXBsZSB3aXRoIHR3byBpdGVtcy4gVGhlIGZpcnN0IGlzIGEgXCJjb25kaXRpb25cIiBSdW5uYWJsZUxpa2UgdGhhdFxuXHQqIHJldHVybnMgXCJ0cnVlXCIgaWYgdGhlIHNlY29uZCBSdW5uYWJsZUxpa2UgaW4gdGhlIHR1cGxlIHNob3VsZCBydW4uXG5cdCpcblx0KiBUaGUgZmluYWwgaXRlbSBpbiB0aGUgaW5wdXQgc2hvdWxkIGJlIGEgUnVubmFibGVMaWtlIHRoYXQgYWN0cyBhcyBhXG5cdCogZGVmYXVsdCBicmFuY2ggaWYgbm8gb3RoZXIgYnJhbmNoZXMgbWF0Y2guXG5cdCpcblx0KiBAZXhhbXBsZVxuXHQqIGBgYHRzXG5cdCogaW1wb3J0IHsgUnVubmFibGVCcmFuY2ggfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3J1bm5hYmxlc1wiO1xuXHQqXG5cdCogY29uc3QgYnJhbmNoID0gUnVubmFibGVCcmFuY2guZnJvbShbXG5cdCogICBbKHg6IG51bWJlcikgPT4geCA+IDAsICh4OiBudW1iZXIpID0+IHggKyAxXSxcblx0KiAgIFsoeDogbnVtYmVyKSA9PiB4IDwgMCwgKHg6IG51bWJlcikgPT4geCAtIDFdLFxuXHQqICAgKHg6IG51bWJlcikgPT4geFxuXHQqIF0pO1xuXHQqIGBgYFxuXHQqIEBwYXJhbSBicmFuY2hlcyBBbiBhcnJheSB3aGVyZSB0aGUgZXZlcnkgaXRlbSBleGNlcHQgdGhlIGxhc3QgaXMgYSB0dXBsZSBvZiBbY29uZGl0aW9uLCBydW5uYWJsZV1cblx0KiAgIHBhaXJzLiBUaGUgbGFzdCBpdGVtIGlzIGEgZGVmYXVsdCBydW5uYWJsZSB3aGljaCBpcyBpbnZva2VkIGlmIG5vIG90aGVyIGNvbmRpdGlvbiBtYXRjaGVzLlxuXHQqIEByZXR1cm5zIEEgbmV3IFJ1bm5hYmxlQnJhbmNoLlxuXHQqL1xuXHRzdGF0aWMgZnJvbShicmFuY2hlcykge1xuXHRcdGlmIChicmFuY2hlcy5sZW5ndGggPCAxKSB0aHJvdyBuZXcgRXJyb3IoXCJSdW5uYWJsZUJyYW5jaCByZXF1aXJlcyBhdCBsZWFzdCBvbmUgYnJhbmNoXCIpO1xuXHRcdGNvbnN0IGJyYW5jaExpa2VzID0gYnJhbmNoZXMuc2xpY2UoMCwgLTEpO1xuXHRcdGNvbnN0IGNvZXJjZWRCcmFuY2hlcyA9IGJyYW5jaExpa2VzLm1hcCgoW2NvbmRpdGlvbiwgcnVubmFibGVdKSA9PiBbX2NvZXJjZVRvUnVubmFibGUoY29uZGl0aW9uKSwgX2NvZXJjZVRvUnVubmFibGUocnVubmFibGUpXSk7XG5cdFx0Y29uc3QgZGVmYXVsdEJyYW5jaCA9IF9jb2VyY2VUb1J1bm5hYmxlKGJyYW5jaGVzW2JyYW5jaGVzLmxlbmd0aCAtIDFdKTtcblx0XHRyZXR1cm4gbmV3IHRoaXMoe1xuXHRcdFx0YnJhbmNoZXM6IGNvZXJjZWRCcmFuY2hlcyxcblx0XHRcdGRlZmF1bHQ6IGRlZmF1bHRCcmFuY2hcblx0XHR9KTtcblx0fVxuXHRhc3luYyBfaW52b2tlKGlucHV0LCBjb25maWcsIHJ1bk1hbmFnZXIpIHtcblx0XHRsZXQgcmVzdWx0O1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5icmFuY2hlcy5sZW5ndGg7IGkgKz0gMSkge1xuXHRcdFx0Y29uc3QgW2NvbmRpdGlvbiwgYnJhbmNoUnVubmFibGVdID0gdGhpcy5icmFuY2hlc1tpXTtcblx0XHRcdGNvbnN0IGNvbmRpdGlvblZhbHVlID0gYXdhaXQgY29uZGl0aW9uLmludm9rZShpbnB1dCwgcGF0Y2hDb25maWcoY29uZmlnLCB7IGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoYGNvbmRpdGlvbjoke2kgKyAxfWApIH0pKTtcblx0XHRcdGlmIChjb25kaXRpb25WYWx1ZSkge1xuXHRcdFx0XHRyZXN1bHQgPSBhd2FpdCBicmFuY2hSdW5uYWJsZS5pbnZva2UoaW5wdXQsIHBhdGNoQ29uZmlnKGNvbmZpZywgeyBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKGBicmFuY2g6JHtpICsgMX1gKSB9KSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoIXJlc3VsdCkgcmVzdWx0ID0gYXdhaXQgdGhpcy5kZWZhdWx0Lmludm9rZShpbnB1dCwgcGF0Y2hDb25maWcoY29uZmlnLCB7IGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoXCJicmFuY2g6ZGVmYXVsdFwiKSB9KSk7XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXHRhc3luYyBpbnZva2UoaW5wdXQsIGNvbmZpZyA9IHt9KSB7XG5cdFx0cmV0dXJuIHRoaXMuX2NhbGxXaXRoQ29uZmlnKHRoaXMuX2ludm9rZSwgaW5wdXQsIGNvbmZpZyk7XG5cdH1cblx0YXN5bmMgKl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgY29uZmlnKSB7XG5cdFx0Y29uc3QgY2FsbGJhY2tNYW5hZ2VyXyA9IGF3YWl0IGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZyhjb25maWcpO1xuXHRcdGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXQsIFwiaW5wdXRcIiksIGNvbmZpZz8ucnVuSWQsIHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGNvbmZpZz8ucnVuTmFtZSk7XG5cdFx0bGV0IGZpbmFsT3V0cHV0O1xuXHRcdGxldCBmaW5hbE91dHB1dFN1cHBvcnRlZCA9IHRydWU7XG5cdFx0bGV0IHN0cmVhbTtcblx0XHR0cnkge1xuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJyYW5jaGVzLmxlbmd0aDsgaSArPSAxKSB7XG5cdFx0XHRcdGNvbnN0IFtjb25kaXRpb24sIGJyYW5jaFJ1bm5hYmxlXSA9IHRoaXMuYnJhbmNoZXNbaV07XG5cdFx0XHRcdGNvbnN0IGNvbmRpdGlvblZhbHVlID0gYXdhaXQgY29uZGl0aW9uLmludm9rZShpbnB1dCwgcGF0Y2hDb25maWcoY29uZmlnLCB7IGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoYGNvbmRpdGlvbjoke2kgKyAxfWApIH0pKTtcblx0XHRcdFx0aWYgKGNvbmRpdGlvblZhbHVlKSB7XG5cdFx0XHRcdFx0c3RyZWFtID0gYXdhaXQgYnJhbmNoUnVubmFibGUuc3RyZWFtKGlucHV0LCBwYXRjaENvbmZpZyhjb25maWcsIHsgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZChgYnJhbmNoOiR7aSArIDF9YCkgfSkpO1xuXHRcdFx0XHRcdGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygc3RyZWFtKSB7XG5cdFx0XHRcdFx0XHR5aWVsZCBjaHVuaztcblx0XHRcdFx0XHRcdGlmIChmaW5hbE91dHB1dFN1cHBvcnRlZCkgaWYgKGZpbmFsT3V0cHV0ID09PSB2b2lkIDApIGZpbmFsT3V0cHV0ID0gY2h1bms7XG5cdFx0XHRcdFx0XHRlbHNlIHRyeSB7XG5cdFx0XHRcdFx0XHRcdGZpbmFsT3V0cHV0ID0gY29uY2F0KGZpbmFsT3V0cHV0LCBjaHVuayk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHRcdFx0ZmluYWxPdXRwdXQgPSB2b2lkIDA7XG5cdFx0XHRcdFx0XHRcdGZpbmFsT3V0cHV0U3VwcG9ydGVkID0gZmFsc2U7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAoc3RyZWFtID09PSB2b2lkIDApIHtcblx0XHRcdFx0c3RyZWFtID0gYXdhaXQgdGhpcy5kZWZhdWx0LnN0cmVhbShpbnB1dCwgcGF0Y2hDb25maWcoY29uZmlnLCB7IGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoXCJicmFuY2g6ZGVmYXVsdFwiKSB9KSk7XG5cdFx0XHRcdGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygc3RyZWFtKSB7XG5cdFx0XHRcdFx0eWllbGQgY2h1bms7XG5cdFx0XHRcdFx0aWYgKGZpbmFsT3V0cHV0U3VwcG9ydGVkKSBpZiAoZmluYWxPdXRwdXQgPT09IHZvaWQgMCkgZmluYWxPdXRwdXQgPSBjaHVuaztcblx0XHRcdFx0XHRlbHNlIHRyeSB7XG5cdFx0XHRcdFx0XHRmaW5hbE91dHB1dCA9IGNvbmNhdChmaW5hbE91dHB1dCwgY2h1bmspO1xuXHRcdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdFx0ZmluYWxPdXRwdXQgPSB2b2lkIDA7XG5cdFx0XHRcdFx0XHRmaW5hbE91dHB1dFN1cHBvcnRlZCA9IGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRXJyb3IoZSk7XG5cdFx0XHR0aHJvdyBlO1xuXHRcdH1cblx0XHRhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChmaW5hbE91dHB1dCA/PyB7fSk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgUnVubmFibGVCcmFuY2ggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJyYW5jaC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/runnables/branch.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/runnables/config.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/config.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_RECURSION_LIMIT: () => (/* binding */ DEFAULT_RECURSION_LIMIT),\n/* harmony export */   ensureConfig: () => (/* binding */ ensureConfig),\n/* harmony export */   getCallbackManagerForConfig: () => (/* binding */ getCallbackManagerForConfig),\n/* harmony export */   mergeConfigs: () => (/* binding */ mergeConfigs),\n/* harmony export */   patchConfig: () => (/* binding */ patchConfig),\n/* harmony export */   pickRunnableConfigKeys: () => (/* binding */ pickRunnableConfigKeys)\n/* harmony export */ });\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(ssr)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _singletons_async_local_storage_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../singletons/async_local_storage/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/singletons/async_local_storage/index.js\");\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../singletons/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/singletons/index.js\");\n\n\n\n\n//#region src/runnables/config.ts\nconst DEFAULT_RECURSION_LIMIT = 25;\nasync function getCallbackManagerForConfig(config) {\n\treturn _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManager._configureSync(config?.callbacks, void 0, config?.tags, void 0, config?.metadata);\n}\nfunction mergeConfigs(...configs) {\n\tconst copy = {};\n\tfor (const options of configs.filter((c) => !!c)) for (const key of Object.keys(options)) if (key === \"metadata\") copy[key] = {\n\t\t...copy[key],\n\t\t...options[key]\n\t};\n\telse if (key === \"tags\") {\n\t\tconst baseKeys = copy[key] ?? [];\n\t\tcopy[key] = [...new Set(baseKeys.concat(options[key] ?? []))];\n\t} else if (key === \"configurable\") copy[key] = {\n\t\t...copy[key],\n\t\t...options[key]\n\t};\n\telse if (key === \"timeout\") {\n\t\tif (copy.timeout === void 0) copy.timeout = options.timeout;\n\t\telse if (options.timeout !== void 0) copy.timeout = Math.min(copy.timeout, options.timeout);\n\t} else if (key === \"signal\") {\n\t\tif (copy.signal === void 0) copy.signal = options.signal;\n\t\telse if (options.signal !== void 0) if (\"any\" in AbortSignal) copy.signal = AbortSignal.any([copy.signal, options.signal]);\n\t\telse copy.signal = options.signal;\n\t} else if (key === \"callbacks\") {\n\t\tconst baseCallbacks = copy.callbacks;\n\t\tconst providedCallbacks = options.callbacks;\n\t\tif (Array.isArray(providedCallbacks)) if (!baseCallbacks) copy.callbacks = providedCallbacks;\n\t\telse if (Array.isArray(baseCallbacks)) copy.callbacks = baseCallbacks.concat(providedCallbacks);\n\t\telse {\n\t\t\tconst manager = baseCallbacks.copy();\n\t\t\tfor (const callback of providedCallbacks) manager.addHandler((0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.ensureHandler)(callback), true);\n\t\t\tcopy.callbacks = manager;\n\t\t}\n\t\telse if (providedCallbacks) if (!baseCallbacks) copy.callbacks = providedCallbacks;\n\t\telse if (Array.isArray(baseCallbacks)) {\n\t\t\tconst manager = providedCallbacks.copy();\n\t\t\tfor (const callback of baseCallbacks) manager.addHandler((0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.ensureHandler)(callback), true);\n\t\t\tcopy.callbacks = manager;\n\t\t} else copy.callbacks = new _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManager(providedCallbacks._parentRunId, {\n\t\t\thandlers: baseCallbacks.handlers.concat(providedCallbacks.handlers),\n\t\t\tinheritableHandlers: baseCallbacks.inheritableHandlers.concat(providedCallbacks.inheritableHandlers),\n\t\t\ttags: Array.from(new Set(baseCallbacks.tags.concat(providedCallbacks.tags))),\n\t\t\tinheritableTags: Array.from(new Set(baseCallbacks.inheritableTags.concat(providedCallbacks.inheritableTags))),\n\t\t\tmetadata: {\n\t\t\t\t...baseCallbacks.metadata,\n\t\t\t\t...providedCallbacks.metadata\n\t\t\t}\n\t\t});\n\t} else {\n\t\tconst typedKey = key;\n\t\tcopy[typedKey] = options[typedKey] ?? copy[typedKey];\n\t}\n\treturn copy;\n}\nconst PRIMITIVES = new Set([\n\t\"string\",\n\t\"number\",\n\t\"boolean\"\n]);\n/**\n* Ensure that a passed config is an object with all required keys present.\n*/\nfunction ensureConfig(config) {\n\tconst implicitConfig = _singletons_async_local_storage_index_js__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.getRunnableConfig();\n\tlet empty = {\n\t\ttags: [],\n\t\tmetadata: {},\n\t\trecursionLimit: 25,\n\t\trunId: void 0\n\t};\n\tif (implicitConfig) {\n\t\tconst { runId, runName,...rest } = implicitConfig;\n\t\tempty = Object.entries(rest).reduce((currentConfig, [key, value]) => {\n\t\t\tif (value !== void 0) currentConfig[key] = value;\n\t\t\treturn currentConfig;\n\t\t}, empty);\n\t}\n\tif (config) empty = Object.entries(config).reduce((currentConfig, [key, value]) => {\n\t\tif (value !== void 0) currentConfig[key] = value;\n\t\treturn currentConfig;\n\t}, empty);\n\tif (empty?.configurable) {\n\t\tfor (const key of Object.keys(empty.configurable)) if (PRIMITIVES.has(typeof empty.configurable[key]) && !empty.metadata?.[key]) {\n\t\t\tif (!empty.metadata) empty.metadata = {};\n\t\t\tempty.metadata[key] = empty.configurable[key];\n\t\t}\n\t}\n\tif (empty.timeout !== void 0) {\n\t\tif (empty.timeout <= 0) throw new Error(\"Timeout must be a positive number\");\n\t\tconst originalTimeoutMs = empty.timeout;\n\t\tconst timeoutSignal = AbortSignal.timeout(originalTimeoutMs);\n\t\tif (!empty.metadata) empty.metadata = {};\n\t\tif (empty.metadata.timeoutMs === void 0) empty.metadata.timeoutMs = originalTimeoutMs;\n\t\tif (empty.signal !== void 0) {\n\t\t\tif (\"any\" in AbortSignal) empty.signal = AbortSignal.any([empty.signal, timeoutSignal]);\n\t\t} else empty.signal = timeoutSignal;\n\t\t/**\n\t\t* We are deleting the timeout key for the following reasons:\n\t\t* - Idempotent normalization: ensureConfig may be called multiple times down the stack. If timeout remains,\n\t\t*   each call would synthesize new timeout signals and combine them, changing the effective timeout unpredictably.\n\t\t* - Single enforcement path: downstream code relies on signal to enforce cancellation. Leaving timeout means two\n\t\t*   competing mechanisms (numeric timeout and signal) can be applied, sometimes with different semantics.\n\t\t* - Propagation to children: pickRunnableConfigKeys would keep forwarding timeout to nested runnables, causing\n\t\t*   repeated re-normalization and stacked timeouts.\n\t\t* - Backward compatibility: a lot of components and tests assume ensureConfig removes timeout post-normalization;\n\t\t*   changing that would be a breaking change.\n\t\t*/\n\t\tdelete empty.timeout;\n\t}\n\treturn empty;\n}\n/**\n* Helper function that patches runnable configs with updated properties.\n*/\nfunction patchConfig(config = {}, { callbacks, maxConcurrency, recursionLimit, runName, configurable, runId } = {}) {\n\tconst newConfig = ensureConfig(config);\n\tif (callbacks !== void 0) {\n\t\t/**\n\t\t* If we're replacing callbacks we need to unset runName\n\t\t* since that should apply only to the same run as the original callbacks\n\t\t*/\n\t\tdelete newConfig.runName;\n\t\tnewConfig.callbacks = callbacks;\n\t}\n\tif (recursionLimit !== void 0) newConfig.recursionLimit = recursionLimit;\n\tif (maxConcurrency !== void 0) newConfig.maxConcurrency = maxConcurrency;\n\tif (runName !== void 0) newConfig.runName = runName;\n\tif (configurable !== void 0) newConfig.configurable = {\n\t\t...newConfig.configurable,\n\t\t...configurable\n\t};\n\tif (runId !== void 0) delete newConfig.runId;\n\treturn newConfig;\n}\nfunction pickRunnableConfigKeys(config) {\n\tif (!config) return void 0;\n\treturn {\n\t\tconfigurable: config.configurable,\n\t\trecursionLimit: config.recursionLimit,\n\t\tcallbacks: config.callbacks,\n\t\ttags: config.tags,\n\t\tmetadata: config.metadata,\n\t\tmaxConcurrency: config.maxConcurrency,\n\t\ttimeout: config.timeout,\n\t\tsignal: config.signal,\n\t\tstore: config.store\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=config.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2NvbmZpZy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBeUU7QUFDdUI7QUFDaEU7O0FBRWhDO0FBQ0E7QUFDQTtBQUNBLFFBQVEsa0VBQWU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0Usb0VBQWE7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxvRUFBYTtBQUN6RTtBQUNBLElBQUksMEJBQTBCLGtFQUFlO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isd0dBQWtDO0FBQzFEO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHlCQUF5QjtBQUNuQztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsSUFBSSwwRUFBMEUsSUFBSTtBQUNsSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDaUk7QUFDakkiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvY29uZmlnLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENhbGxiYWNrTWFuYWdlciwgZW5zdXJlSGFuZGxlciB9IGZyb20gXCIuLi9jYWxsYmFja3MvbWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiB9IGZyb20gXCIuLi9zaW5nbGV0b25zL2FzeW5jX2xvY2FsX3N0b3JhZ2UvaW5kZXguanNcIjtcbmltcG9ydCBcIi4uL3NpbmdsZXRvbnMvaW5kZXguanNcIjtcblxuLy8jcmVnaW9uIHNyYy9ydW5uYWJsZXMvY29uZmlnLnRzXG5jb25zdCBERUZBVUxUX1JFQ1VSU0lPTl9MSU1JVCA9IDI1O1xuYXN5bmMgZnVuY3Rpb24gZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKGNvbmZpZykge1xuXHRyZXR1cm4gQ2FsbGJhY2tNYW5hZ2VyLl9jb25maWd1cmVTeW5jKGNvbmZpZz8uY2FsbGJhY2tzLCB2b2lkIDAsIGNvbmZpZz8udGFncywgdm9pZCAwLCBjb25maWc/Lm1ldGFkYXRhKTtcbn1cbmZ1bmN0aW9uIG1lcmdlQ29uZmlncyguLi5jb25maWdzKSB7XG5cdGNvbnN0IGNvcHkgPSB7fTtcblx0Zm9yIChjb25zdCBvcHRpb25zIG9mIGNvbmZpZ3MuZmlsdGVyKChjKSA9PiAhIWMpKSBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhvcHRpb25zKSkgaWYgKGtleSA9PT0gXCJtZXRhZGF0YVwiKSBjb3B5W2tleV0gPSB7XG5cdFx0Li4uY29weVtrZXldLFxuXHRcdC4uLm9wdGlvbnNba2V5XVxuXHR9O1xuXHRlbHNlIGlmIChrZXkgPT09IFwidGFnc1wiKSB7XG5cdFx0Y29uc3QgYmFzZUtleXMgPSBjb3B5W2tleV0gPz8gW107XG5cdFx0Y29weVtrZXldID0gWy4uLm5ldyBTZXQoYmFzZUtleXMuY29uY2F0KG9wdGlvbnNba2V5XSA/PyBbXSkpXTtcblx0fSBlbHNlIGlmIChrZXkgPT09IFwiY29uZmlndXJhYmxlXCIpIGNvcHlba2V5XSA9IHtcblx0XHQuLi5jb3B5W2tleV0sXG5cdFx0Li4ub3B0aW9uc1trZXldXG5cdH07XG5cdGVsc2UgaWYgKGtleSA9PT0gXCJ0aW1lb3V0XCIpIHtcblx0XHRpZiAoY29weS50aW1lb3V0ID09PSB2b2lkIDApIGNvcHkudGltZW91dCA9IG9wdGlvbnMudGltZW91dDtcblx0XHRlbHNlIGlmIChvcHRpb25zLnRpbWVvdXQgIT09IHZvaWQgMCkgY29weS50aW1lb3V0ID0gTWF0aC5taW4oY29weS50aW1lb3V0LCBvcHRpb25zLnRpbWVvdXQpO1xuXHR9IGVsc2UgaWYgKGtleSA9PT0gXCJzaWduYWxcIikge1xuXHRcdGlmIChjb3B5LnNpZ25hbCA9PT0gdm9pZCAwKSBjb3B5LnNpZ25hbCA9IG9wdGlvbnMuc2lnbmFsO1xuXHRcdGVsc2UgaWYgKG9wdGlvbnMuc2lnbmFsICE9PSB2b2lkIDApIGlmIChcImFueVwiIGluIEFib3J0U2lnbmFsKSBjb3B5LnNpZ25hbCA9IEFib3J0U2lnbmFsLmFueShbY29weS5zaWduYWwsIG9wdGlvbnMuc2lnbmFsXSk7XG5cdFx0ZWxzZSBjb3B5LnNpZ25hbCA9IG9wdGlvbnMuc2lnbmFsO1xuXHR9IGVsc2UgaWYgKGtleSA9PT0gXCJjYWxsYmFja3NcIikge1xuXHRcdGNvbnN0IGJhc2VDYWxsYmFja3MgPSBjb3B5LmNhbGxiYWNrcztcblx0XHRjb25zdCBwcm92aWRlZENhbGxiYWNrcyA9IG9wdGlvbnMuY2FsbGJhY2tzO1xuXHRcdGlmIChBcnJheS5pc0FycmF5KHByb3ZpZGVkQ2FsbGJhY2tzKSkgaWYgKCFiYXNlQ2FsbGJhY2tzKSBjb3B5LmNhbGxiYWNrcyA9IHByb3ZpZGVkQ2FsbGJhY2tzO1xuXHRcdGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYmFzZUNhbGxiYWNrcykpIGNvcHkuY2FsbGJhY2tzID0gYmFzZUNhbGxiYWNrcy5jb25jYXQocHJvdmlkZWRDYWxsYmFja3MpO1xuXHRcdGVsc2Uge1xuXHRcdFx0Y29uc3QgbWFuYWdlciA9IGJhc2VDYWxsYmFja3MuY29weSgpO1xuXHRcdFx0Zm9yIChjb25zdCBjYWxsYmFjayBvZiBwcm92aWRlZENhbGxiYWNrcykgbWFuYWdlci5hZGRIYW5kbGVyKGVuc3VyZUhhbmRsZXIoY2FsbGJhY2spLCB0cnVlKTtcblx0XHRcdGNvcHkuY2FsbGJhY2tzID0gbWFuYWdlcjtcblx0XHR9XG5cdFx0ZWxzZSBpZiAocHJvdmlkZWRDYWxsYmFja3MpIGlmICghYmFzZUNhbGxiYWNrcykgY29weS5jYWxsYmFja3MgPSBwcm92aWRlZENhbGxiYWNrcztcblx0XHRlbHNlIGlmIChBcnJheS5pc0FycmF5KGJhc2VDYWxsYmFja3MpKSB7XG5cdFx0XHRjb25zdCBtYW5hZ2VyID0gcHJvdmlkZWRDYWxsYmFja3MuY29weSgpO1xuXHRcdFx0Zm9yIChjb25zdCBjYWxsYmFjayBvZiBiYXNlQ2FsbGJhY2tzKSBtYW5hZ2VyLmFkZEhhbmRsZXIoZW5zdXJlSGFuZGxlcihjYWxsYmFjayksIHRydWUpO1xuXHRcdFx0Y29weS5jYWxsYmFja3MgPSBtYW5hZ2VyO1xuXHRcdH0gZWxzZSBjb3B5LmNhbGxiYWNrcyA9IG5ldyBDYWxsYmFja01hbmFnZXIocHJvdmlkZWRDYWxsYmFja3MuX3BhcmVudFJ1bklkLCB7XG5cdFx0XHRoYW5kbGVyczogYmFzZUNhbGxiYWNrcy5oYW5kbGVycy5jb25jYXQocHJvdmlkZWRDYWxsYmFja3MuaGFuZGxlcnMpLFxuXHRcdFx0aW5oZXJpdGFibGVIYW5kbGVyczogYmFzZUNhbGxiYWNrcy5pbmhlcml0YWJsZUhhbmRsZXJzLmNvbmNhdChwcm92aWRlZENhbGxiYWNrcy5pbmhlcml0YWJsZUhhbmRsZXJzKSxcblx0XHRcdHRhZ3M6IEFycmF5LmZyb20obmV3IFNldChiYXNlQ2FsbGJhY2tzLnRhZ3MuY29uY2F0KHByb3ZpZGVkQ2FsbGJhY2tzLnRhZ3MpKSksXG5cdFx0XHRpbmhlcml0YWJsZVRhZ3M6IEFycmF5LmZyb20obmV3IFNldChiYXNlQ2FsbGJhY2tzLmluaGVyaXRhYmxlVGFncy5jb25jYXQocHJvdmlkZWRDYWxsYmFja3MuaW5oZXJpdGFibGVUYWdzKSkpLFxuXHRcdFx0bWV0YWRhdGE6IHtcblx0XHRcdFx0Li4uYmFzZUNhbGxiYWNrcy5tZXRhZGF0YSxcblx0XHRcdFx0Li4ucHJvdmlkZWRDYWxsYmFja3MubWV0YWRhdGFcblx0XHRcdH1cblx0XHR9KTtcblx0fSBlbHNlIHtcblx0XHRjb25zdCB0eXBlZEtleSA9IGtleTtcblx0XHRjb3B5W3R5cGVkS2V5XSA9IG9wdGlvbnNbdHlwZWRLZXldID8/IGNvcHlbdHlwZWRLZXldO1xuXHR9XG5cdHJldHVybiBjb3B5O1xufVxuY29uc3QgUFJJTUlUSVZFUyA9IG5ldyBTZXQoW1xuXHRcInN0cmluZ1wiLFxuXHRcIm51bWJlclwiLFxuXHRcImJvb2xlYW5cIlxuXSk7XG4vKipcbiogRW5zdXJlIHRoYXQgYSBwYXNzZWQgY29uZmlnIGlzIGFuIG9iamVjdCB3aXRoIGFsbCByZXF1aXJlZCBrZXlzIHByZXNlbnQuXG4qL1xuZnVuY3Rpb24gZW5zdXJlQ29uZmlnKGNvbmZpZykge1xuXHRjb25zdCBpbXBsaWNpdENvbmZpZyA9IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24uZ2V0UnVubmFibGVDb25maWcoKTtcblx0bGV0IGVtcHR5ID0ge1xuXHRcdHRhZ3M6IFtdLFxuXHRcdG1ldGFkYXRhOiB7fSxcblx0XHRyZWN1cnNpb25MaW1pdDogMjUsXG5cdFx0cnVuSWQ6IHZvaWQgMFxuXHR9O1xuXHRpZiAoaW1wbGljaXRDb25maWcpIHtcblx0XHRjb25zdCB7IHJ1bklkLCBydW5OYW1lLC4uLnJlc3QgfSA9IGltcGxpY2l0Q29uZmlnO1xuXHRcdGVtcHR5ID0gT2JqZWN0LmVudHJpZXMocmVzdCkucmVkdWNlKChjdXJyZW50Q29uZmlnLCBba2V5LCB2YWx1ZV0pID0+IHtcblx0XHRcdGlmICh2YWx1ZSAhPT0gdm9pZCAwKSBjdXJyZW50Q29uZmlnW2tleV0gPSB2YWx1ZTtcblx0XHRcdHJldHVybiBjdXJyZW50Q29uZmlnO1xuXHRcdH0sIGVtcHR5KTtcblx0fVxuXHRpZiAoY29uZmlnKSBlbXB0eSA9IE9iamVjdC5lbnRyaWVzKGNvbmZpZykucmVkdWNlKChjdXJyZW50Q29uZmlnLCBba2V5LCB2YWx1ZV0pID0+IHtcblx0XHRpZiAodmFsdWUgIT09IHZvaWQgMCkgY3VycmVudENvbmZpZ1trZXldID0gdmFsdWU7XG5cdFx0cmV0dXJuIGN1cnJlbnRDb25maWc7XG5cdH0sIGVtcHR5KTtcblx0aWYgKGVtcHR5Py5jb25maWd1cmFibGUpIHtcblx0XHRmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhlbXB0eS5jb25maWd1cmFibGUpKSBpZiAoUFJJTUlUSVZFUy5oYXModHlwZW9mIGVtcHR5LmNvbmZpZ3VyYWJsZVtrZXldKSAmJiAhZW1wdHkubWV0YWRhdGE/LltrZXldKSB7XG5cdFx0XHRpZiAoIWVtcHR5Lm1ldGFkYXRhKSBlbXB0eS5tZXRhZGF0YSA9IHt9O1xuXHRcdFx0ZW1wdHkubWV0YWRhdGFba2V5XSA9IGVtcHR5LmNvbmZpZ3VyYWJsZVtrZXldO1xuXHRcdH1cblx0fVxuXHRpZiAoZW1wdHkudGltZW91dCAhPT0gdm9pZCAwKSB7XG5cdFx0aWYgKGVtcHR5LnRpbWVvdXQgPD0gMCkgdGhyb3cgbmV3IEVycm9yKFwiVGltZW91dCBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyXCIpO1xuXHRcdGNvbnN0IG9yaWdpbmFsVGltZW91dE1zID0gZW1wdHkudGltZW91dDtcblx0XHRjb25zdCB0aW1lb3V0U2lnbmFsID0gQWJvcnRTaWduYWwudGltZW91dChvcmlnaW5hbFRpbWVvdXRNcyk7XG5cdFx0aWYgKCFlbXB0eS5tZXRhZGF0YSkgZW1wdHkubWV0YWRhdGEgPSB7fTtcblx0XHRpZiAoZW1wdHkubWV0YWRhdGEudGltZW91dE1zID09PSB2b2lkIDApIGVtcHR5Lm1ldGFkYXRhLnRpbWVvdXRNcyA9IG9yaWdpbmFsVGltZW91dE1zO1xuXHRcdGlmIChlbXB0eS5zaWduYWwgIT09IHZvaWQgMCkge1xuXHRcdFx0aWYgKFwiYW55XCIgaW4gQWJvcnRTaWduYWwpIGVtcHR5LnNpZ25hbCA9IEFib3J0U2lnbmFsLmFueShbZW1wdHkuc2lnbmFsLCB0aW1lb3V0U2lnbmFsXSk7XG5cdFx0fSBlbHNlIGVtcHR5LnNpZ25hbCA9IHRpbWVvdXRTaWduYWw7XG5cdFx0LyoqXG5cdFx0KiBXZSBhcmUgZGVsZXRpbmcgdGhlIHRpbWVvdXQga2V5IGZvciB0aGUgZm9sbG93aW5nIHJlYXNvbnM6XG5cdFx0KiAtIElkZW1wb3RlbnQgbm9ybWFsaXphdGlvbjogZW5zdXJlQ29uZmlnIG1heSBiZSBjYWxsZWQgbXVsdGlwbGUgdGltZXMgZG93biB0aGUgc3RhY2suIElmIHRpbWVvdXQgcmVtYWlucyxcblx0XHQqICAgZWFjaCBjYWxsIHdvdWxkIHN5bnRoZXNpemUgbmV3IHRpbWVvdXQgc2lnbmFscyBhbmQgY29tYmluZSB0aGVtLCBjaGFuZ2luZyB0aGUgZWZmZWN0aXZlIHRpbWVvdXQgdW5wcmVkaWN0YWJseS5cblx0XHQqIC0gU2luZ2xlIGVuZm9yY2VtZW50IHBhdGg6IGRvd25zdHJlYW0gY29kZSByZWxpZXMgb24gc2lnbmFsIHRvIGVuZm9yY2UgY2FuY2VsbGF0aW9uLiBMZWF2aW5nIHRpbWVvdXQgbWVhbnMgdHdvXG5cdFx0KiAgIGNvbXBldGluZyBtZWNoYW5pc21zIChudW1lcmljIHRpbWVvdXQgYW5kIHNpZ25hbCkgY2FuIGJlIGFwcGxpZWQsIHNvbWV0aW1lcyB3aXRoIGRpZmZlcmVudCBzZW1hbnRpY3MuXG5cdFx0KiAtIFByb3BhZ2F0aW9uIHRvIGNoaWxkcmVuOiBwaWNrUnVubmFibGVDb25maWdLZXlzIHdvdWxkIGtlZXAgZm9yd2FyZGluZyB0aW1lb3V0IHRvIG5lc3RlZCBydW5uYWJsZXMsIGNhdXNpbmdcblx0XHQqICAgcmVwZWF0ZWQgcmUtbm9ybWFsaXphdGlvbiBhbmQgc3RhY2tlZCB0aW1lb3V0cy5cblx0XHQqIC0gQmFja3dhcmQgY29tcGF0aWJpbGl0eTogYSBsb3Qgb2YgY29tcG9uZW50cyBhbmQgdGVzdHMgYXNzdW1lIGVuc3VyZUNvbmZpZyByZW1vdmVzIHRpbWVvdXQgcG9zdC1ub3JtYWxpemF0aW9uO1xuXHRcdCogICBjaGFuZ2luZyB0aGF0IHdvdWxkIGJlIGEgYnJlYWtpbmcgY2hhbmdlLlxuXHRcdCovXG5cdFx0ZGVsZXRlIGVtcHR5LnRpbWVvdXQ7XG5cdH1cblx0cmV0dXJuIGVtcHR5O1xufVxuLyoqXG4qIEhlbHBlciBmdW5jdGlvbiB0aGF0IHBhdGNoZXMgcnVubmFibGUgY29uZmlncyB3aXRoIHVwZGF0ZWQgcHJvcGVydGllcy5cbiovXG5mdW5jdGlvbiBwYXRjaENvbmZpZyhjb25maWcgPSB7fSwgeyBjYWxsYmFja3MsIG1heENvbmN1cnJlbmN5LCByZWN1cnNpb25MaW1pdCwgcnVuTmFtZSwgY29uZmlndXJhYmxlLCBydW5JZCB9ID0ge30pIHtcblx0Y29uc3QgbmV3Q29uZmlnID0gZW5zdXJlQ29uZmlnKGNvbmZpZyk7XG5cdGlmIChjYWxsYmFja3MgIT09IHZvaWQgMCkge1xuXHRcdC8qKlxuXHRcdCogSWYgd2UncmUgcmVwbGFjaW5nIGNhbGxiYWNrcyB3ZSBuZWVkIHRvIHVuc2V0IHJ1bk5hbWVcblx0XHQqIHNpbmNlIHRoYXQgc2hvdWxkIGFwcGx5IG9ubHkgdG8gdGhlIHNhbWUgcnVuIGFzIHRoZSBvcmlnaW5hbCBjYWxsYmFja3Ncblx0XHQqL1xuXHRcdGRlbGV0ZSBuZXdDb25maWcucnVuTmFtZTtcblx0XHRuZXdDb25maWcuY2FsbGJhY2tzID0gY2FsbGJhY2tzO1xuXHR9XG5cdGlmIChyZWN1cnNpb25MaW1pdCAhPT0gdm9pZCAwKSBuZXdDb25maWcucmVjdXJzaW9uTGltaXQgPSByZWN1cnNpb25MaW1pdDtcblx0aWYgKG1heENvbmN1cnJlbmN5ICE9PSB2b2lkIDApIG5ld0NvbmZpZy5tYXhDb25jdXJyZW5jeSA9IG1heENvbmN1cnJlbmN5O1xuXHRpZiAocnVuTmFtZSAhPT0gdm9pZCAwKSBuZXdDb25maWcucnVuTmFtZSA9IHJ1bk5hbWU7XG5cdGlmIChjb25maWd1cmFibGUgIT09IHZvaWQgMCkgbmV3Q29uZmlnLmNvbmZpZ3VyYWJsZSA9IHtcblx0XHQuLi5uZXdDb25maWcuY29uZmlndXJhYmxlLFxuXHRcdC4uLmNvbmZpZ3VyYWJsZVxuXHR9O1xuXHRpZiAocnVuSWQgIT09IHZvaWQgMCkgZGVsZXRlIG5ld0NvbmZpZy5ydW5JZDtcblx0cmV0dXJuIG5ld0NvbmZpZztcbn1cbmZ1bmN0aW9uIHBpY2tSdW5uYWJsZUNvbmZpZ0tleXMoY29uZmlnKSB7XG5cdGlmICghY29uZmlnKSByZXR1cm4gdm9pZCAwO1xuXHRyZXR1cm4ge1xuXHRcdGNvbmZpZ3VyYWJsZTogY29uZmlnLmNvbmZpZ3VyYWJsZSxcblx0XHRyZWN1cnNpb25MaW1pdDogY29uZmlnLnJlY3Vyc2lvbkxpbWl0LFxuXHRcdGNhbGxiYWNrczogY29uZmlnLmNhbGxiYWNrcyxcblx0XHR0YWdzOiBjb25maWcudGFncyxcblx0XHRtZXRhZGF0YTogY29uZmlnLm1ldGFkYXRhLFxuXHRcdG1heENvbmN1cnJlbmN5OiBjb25maWcubWF4Q29uY3VycmVuY3ksXG5cdFx0dGltZW91dDogY29uZmlnLnRpbWVvdXQsXG5cdFx0c2lnbmFsOiBjb25maWcuc2lnbmFsLFxuXHRcdHN0b3JlOiBjb25maWcuc3RvcmVcblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBERUZBVUxUX1JFQ1VSU0lPTl9MSU1JVCwgZW5zdXJlQ29uZmlnLCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcsIG1lcmdlQ29uZmlncywgcGF0Y2hDb25maWcsIHBpY2tSdW5uYWJsZUNvbmZpZ0tleXMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmZpZy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/runnables/config.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/runnables/graph.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/graph.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Graph: () => (/* binding */ Graph),\n/* harmony export */   graph_exports: () => (/* binding */ graph_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/utils.js\");\n/* harmony import */ var _graph_mermaid_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./graph_mermaid.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/graph_mermaid.js\");\n/* harmony import */ var _utils_json_schema_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/json_schema.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/json_schema.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! uuid */ \"(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/validate.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! uuid */ \"(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/v4.js\");\n\n\n\n\n\n\n//#region src/runnables/graph.ts\nvar graph_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(graph_exports, { Graph: () => Graph });\nfunction nodeDataStr(id, data) {\n\tif (id !== void 0 && !(0,uuid__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(id)) return id;\n\telse if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isRunnableInterface)(data)) try {\n\t\tlet dataStr = data.getName();\n\t\tdataStr = dataStr.startsWith(\"Runnable\") ? dataStr.slice(8) : dataStr;\n\t\treturn dataStr;\n\t} catch {\n\t\treturn data.getName();\n\t}\n\telse return data.name ?? \"UnknownSchema\";\n}\nfunction nodeDataJson(node) {\n\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isRunnableInterface)(node.data)) return {\n\t\ttype: \"runnable\",\n\t\tdata: {\n\t\t\tid: node.data.lc_id,\n\t\t\tname: node.data.getName()\n\t\t}\n\t};\n\telse return {\n\t\ttype: \"schema\",\n\t\tdata: {\n\t\t\t...(0,_utils_json_schema_js__WEBPACK_IMPORTED_MODULE_3__.toJsonSchema)(node.data.schema),\n\t\t\ttitle: node.data.name\n\t\t}\n\t};\n}\nvar Graph = class Graph {\n\tnodes = {};\n\tedges = [];\n\tconstructor(params) {\n\t\tthis.nodes = params?.nodes ?? this.nodes;\n\t\tthis.edges = params?.edges ?? this.edges;\n\t}\n\ttoJSON() {\n\t\tconst stableNodeIds = {};\n\t\tObject.values(this.nodes).forEach((node, i) => {\n\t\t\tstableNodeIds[node.id] = (0,uuid__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(node.id) ? i : node.id;\n\t\t});\n\t\treturn {\n\t\t\tnodes: Object.values(this.nodes).map((node) => ({\n\t\t\t\tid: stableNodeIds[node.id],\n\t\t\t\t...nodeDataJson(node)\n\t\t\t})),\n\t\t\tedges: this.edges.map((edge) => {\n\t\t\t\tconst item = {\n\t\t\t\t\tsource: stableNodeIds[edge.source],\n\t\t\t\t\ttarget: stableNodeIds[edge.target]\n\t\t\t\t};\n\t\t\t\tif (typeof edge.data !== \"undefined\") item.data = edge.data;\n\t\t\t\tif (typeof edge.conditional !== \"undefined\") item.conditional = edge.conditional;\n\t\t\t\treturn item;\n\t\t\t})\n\t\t};\n\t}\n\taddNode(data, id, metadata) {\n\t\tif (id !== void 0 && this.nodes[id] !== void 0) throw new Error(`Node with id ${id} already exists`);\n\t\tconst nodeId = id ?? (0,uuid__WEBPACK_IMPORTED_MODULE_5__[\"default\"])();\n\t\tconst node = {\n\t\t\tid: nodeId,\n\t\t\tdata,\n\t\t\tname: nodeDataStr(id, data),\n\t\t\tmetadata\n\t\t};\n\t\tthis.nodes[nodeId] = node;\n\t\treturn node;\n\t}\n\tremoveNode(node) {\n\t\tdelete this.nodes[node.id];\n\t\tthis.edges = this.edges.filter((edge) => edge.source !== node.id && edge.target !== node.id);\n\t}\n\taddEdge(source, target, data, conditional) {\n\t\tif (this.nodes[source.id] === void 0) throw new Error(`Source node ${source.id} not in graph`);\n\t\tif (this.nodes[target.id] === void 0) throw new Error(`Target node ${target.id} not in graph`);\n\t\tconst edge = {\n\t\t\tsource: source.id,\n\t\t\ttarget: target.id,\n\t\t\tdata,\n\t\t\tconditional\n\t\t};\n\t\tthis.edges.push(edge);\n\t\treturn edge;\n\t}\n\tfirstNode() {\n\t\treturn _firstNode(this);\n\t}\n\tlastNode() {\n\t\treturn _lastNode(this);\n\t}\n\t/**\n\t* Add all nodes and edges from another graph.\n\t* Note this doesn't check for duplicates, nor does it connect the graphs.\n\t*/\n\textend(graph, prefix = \"\") {\n\t\tlet finalPrefix = prefix;\n\t\tconst nodeIds = Object.values(graph.nodes).map((node) => node.id);\n\t\tif (nodeIds.every(uuid__WEBPACK_IMPORTED_MODULE_4__[\"default\"])) finalPrefix = \"\";\n\t\tconst prefixed = (id) => {\n\t\t\treturn finalPrefix ? `${finalPrefix}:${id}` : id;\n\t\t};\n\t\tObject.entries(graph.nodes).forEach(([key, value]) => {\n\t\t\tthis.nodes[prefixed(key)] = {\n\t\t\t\t...value,\n\t\t\t\tid: prefixed(key)\n\t\t\t};\n\t\t});\n\t\tconst newEdges = graph.edges.map((edge) => {\n\t\t\treturn {\n\t\t\t\t...edge,\n\t\t\t\tsource: prefixed(edge.source),\n\t\t\t\ttarget: prefixed(edge.target)\n\t\t\t};\n\t\t});\n\t\tthis.edges = [...this.edges, ...newEdges];\n\t\tconst first = graph.firstNode();\n\t\tconst last = graph.lastNode();\n\t\treturn [first ? {\n\t\t\tid: prefixed(first.id),\n\t\t\tdata: first.data\n\t\t} : void 0, last ? {\n\t\t\tid: prefixed(last.id),\n\t\t\tdata: last.data\n\t\t} : void 0];\n\t}\n\ttrimFirstNode() {\n\t\tconst firstNode = this.firstNode();\n\t\tif (firstNode && _firstNode(this, [firstNode.id])) this.removeNode(firstNode);\n\t}\n\ttrimLastNode() {\n\t\tconst lastNode = this.lastNode();\n\t\tif (lastNode && _lastNode(this, [lastNode.id])) this.removeNode(lastNode);\n\t}\n\t/**\n\t* Return a new graph with all nodes re-identified,\n\t* using their unique, readable names where possible.\n\t*/\n\treid() {\n\t\tconst nodeLabels = Object.fromEntries(Object.values(this.nodes).map((node) => [node.id, node.name]));\n\t\tconst nodeLabelCounts = /* @__PURE__ */ new Map();\n\t\tObject.values(nodeLabels).forEach((label) => {\n\t\t\tnodeLabelCounts.set(label, (nodeLabelCounts.get(label) || 0) + 1);\n\t\t});\n\t\tconst getNodeId = (nodeId) => {\n\t\t\tconst label = nodeLabels[nodeId];\n\t\t\tif ((0,uuid__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(nodeId) && nodeLabelCounts.get(label) === 1) return label;\n\t\t\telse return nodeId;\n\t\t};\n\t\treturn new Graph({\n\t\t\tnodes: Object.fromEntries(Object.entries(this.nodes).map(([id, node]) => [getNodeId(id), {\n\t\t\t\t...node,\n\t\t\t\tid: getNodeId(id)\n\t\t\t}])),\n\t\t\tedges: this.edges.map((edge) => ({\n\t\t\t\t...edge,\n\t\t\t\tsource: getNodeId(edge.source),\n\t\t\t\ttarget: getNodeId(edge.target)\n\t\t\t}))\n\t\t});\n\t}\n\tdrawMermaid(params) {\n\t\tconst { withStyles, curveStyle, nodeColors = {\n\t\t\tdefault: \"fill:#f2f0ff,line-height:1.2\",\n\t\t\tfirst: \"fill-opacity:0\",\n\t\t\tlast: \"fill:#bfb6fc\"\n\t\t}, wrapLabelNWords } = params ?? {};\n\t\tconst graph = this.reid();\n\t\tconst firstNode = graph.firstNode();\n\t\tconst lastNode = graph.lastNode();\n\t\treturn (0,_graph_mermaid_js__WEBPACK_IMPORTED_MODULE_2__.drawMermaid)(graph.nodes, graph.edges, {\n\t\t\tfirstNode: firstNode?.id,\n\t\t\tlastNode: lastNode?.id,\n\t\t\twithStyles,\n\t\t\tcurveStyle,\n\t\t\tnodeColors,\n\t\t\twrapLabelNWords\n\t\t});\n\t}\n\tasync drawMermaidPng(params) {\n\t\tconst mermaidSyntax = this.drawMermaid(params);\n\t\treturn (0,_graph_mermaid_js__WEBPACK_IMPORTED_MODULE_2__.drawMermaidImage)(mermaidSyntax, { backgroundColor: params?.backgroundColor });\n\t}\n};\n/**\n* Find the single node that is not a target of any edge.\n* Exclude nodes/sources with ids in the exclude list.\n* If there is no such node, or there are multiple, return undefined.\n* When drawing the graph, this node would be the origin.\n*/\nfunction _firstNode(graph, exclude = []) {\n\tconst targets = new Set(graph.edges.filter((edge) => !exclude.includes(edge.source)).map((edge) => edge.target));\n\tconst found = [];\n\tfor (const node of Object.values(graph.nodes)) if (!exclude.includes(node.id) && !targets.has(node.id)) found.push(node);\n\treturn found.length === 1 ? found[0] : void 0;\n}\n/**\n* Find the single node that is not a source of any edge.\n* Exclude nodes/targets with ids in the exclude list.\n* If there is no such node, or there are multiple, return undefined.\n* When drawing the graph, this node would be the destination.\n*/\nfunction _lastNode(graph, exclude = []) {\n\tconst sources = new Set(graph.edges.filter((edge) => !exclude.includes(edge.target)).map((edge) => edge.source));\n\tconst found = [];\n\tfor (const node of Object.values(graph.nodes)) if (!exclude.includes(node.id) && !sources.has(node.id)) found.push(node);\n\treturn found.length === 1 ? found[0] : void 0;\n}\n\n//#endregion\n\n//# sourceMappingURL=graph.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2dyYXBoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQTJEO0FBQ1Y7QUFDa0I7QUFDWjtBQUNuQjs7QUFFcEM7QUFDQTtBQUNBLHNFQUFRLGtCQUFrQixvQkFBb0I7QUFDOUM7QUFDQSx1QkFBdUIsZ0RBQVE7QUFDL0IsVUFBVSw4REFBbUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLDhEQUFtQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLG1FQUFZO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsZ0RBQVE7QUFDcEMsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0Esa0ZBQWtGLElBQUk7QUFDdEYsdUJBQXVCLGdEQUFFO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RUFBdUUsV0FBVztBQUNsRix1RUFBdUUsV0FBVztBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw0Q0FBUTtBQUM1QjtBQUNBLDJCQUEyQixZQUFZLEdBQUcsR0FBRztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsT0FBTyxnREFBUTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxHQUFHLG9CQUFvQjtBQUN2QjtBQUNBO0FBQ0E7QUFDQSxTQUFTLDhEQUFXO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxTQUFTLG1FQUFnQixrQkFBa0IsMENBQTBDO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDZ0M7QUFDaEMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvZ3JhcGguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19leHBvcnQgfSBmcm9tIFwiLi4vX3ZpcnR1YWwvcm9sbGRvd25fcnVudGltZS5qc1wiO1xuaW1wb3J0IHsgaXNSdW5uYWJsZUludGVyZmFjZSB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBkcmF3TWVybWFpZCwgZHJhd01lcm1haWRJbWFnZSB9IGZyb20gXCIuL2dyYXBoX21lcm1haWQuanNcIjtcbmltcG9ydCB7IHRvSnNvblNjaGVtYSB9IGZyb20gXCIuLi91dGlscy9qc29uX3NjaGVtYS5qc1wiO1xuaW1wb3J0IHsgdjQsIHZhbGlkYXRlIH0gZnJvbSBcInV1aWRcIjtcblxuLy8jcmVnaW9uIHNyYy9ydW5uYWJsZXMvZ3JhcGgudHNcbnZhciBncmFwaF9leHBvcnRzID0ge307XG5fX2V4cG9ydChncmFwaF9leHBvcnRzLCB7IEdyYXBoOiAoKSA9PiBHcmFwaCB9KTtcbmZ1bmN0aW9uIG5vZGVEYXRhU3RyKGlkLCBkYXRhKSB7XG5cdGlmIChpZCAhPT0gdm9pZCAwICYmICF2YWxpZGF0ZShpZCkpIHJldHVybiBpZDtcblx0ZWxzZSBpZiAoaXNSdW5uYWJsZUludGVyZmFjZShkYXRhKSkgdHJ5IHtcblx0XHRsZXQgZGF0YVN0ciA9IGRhdGEuZ2V0TmFtZSgpO1xuXHRcdGRhdGFTdHIgPSBkYXRhU3RyLnN0YXJ0c1dpdGgoXCJSdW5uYWJsZVwiKSA/IGRhdGFTdHIuc2xpY2UoOCkgOiBkYXRhU3RyO1xuXHRcdHJldHVybiBkYXRhU3RyO1xuXHR9IGNhdGNoIHtcblx0XHRyZXR1cm4gZGF0YS5nZXROYW1lKCk7XG5cdH1cblx0ZWxzZSByZXR1cm4gZGF0YS5uYW1lID8/IFwiVW5rbm93blNjaGVtYVwiO1xufVxuZnVuY3Rpb24gbm9kZURhdGFKc29uKG5vZGUpIHtcblx0aWYgKGlzUnVubmFibGVJbnRlcmZhY2Uobm9kZS5kYXRhKSkgcmV0dXJuIHtcblx0XHR0eXBlOiBcInJ1bm5hYmxlXCIsXG5cdFx0ZGF0YToge1xuXHRcdFx0aWQ6IG5vZGUuZGF0YS5sY19pZCxcblx0XHRcdG5hbWU6IG5vZGUuZGF0YS5nZXROYW1lKClcblx0XHR9XG5cdH07XG5cdGVsc2UgcmV0dXJuIHtcblx0XHR0eXBlOiBcInNjaGVtYVwiLFxuXHRcdGRhdGE6IHtcblx0XHRcdC4uLnRvSnNvblNjaGVtYShub2RlLmRhdGEuc2NoZW1hKSxcblx0XHRcdHRpdGxlOiBub2RlLmRhdGEubmFtZVxuXHRcdH1cblx0fTtcbn1cbnZhciBHcmFwaCA9IGNsYXNzIEdyYXBoIHtcblx0bm9kZXMgPSB7fTtcblx0ZWRnZXMgPSBbXTtcblx0Y29uc3RydWN0b3IocGFyYW1zKSB7XG5cdFx0dGhpcy5ub2RlcyA9IHBhcmFtcz8ubm9kZXMgPz8gdGhpcy5ub2Rlcztcblx0XHR0aGlzLmVkZ2VzID0gcGFyYW1zPy5lZGdlcyA/PyB0aGlzLmVkZ2VzO1xuXHR9XG5cdHRvSlNPTigpIHtcblx0XHRjb25zdCBzdGFibGVOb2RlSWRzID0ge307XG5cdFx0T2JqZWN0LnZhbHVlcyh0aGlzLm5vZGVzKS5mb3JFYWNoKChub2RlLCBpKSA9PiB7XG5cdFx0XHRzdGFibGVOb2RlSWRzW25vZGUuaWRdID0gdmFsaWRhdGUobm9kZS5pZCkgPyBpIDogbm9kZS5pZDtcblx0XHR9KTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0bm9kZXM6IE9iamVjdC52YWx1ZXModGhpcy5ub2RlcykubWFwKChub2RlKSA9PiAoe1xuXHRcdFx0XHRpZDogc3RhYmxlTm9kZUlkc1tub2RlLmlkXSxcblx0XHRcdFx0Li4ubm9kZURhdGFKc29uKG5vZGUpXG5cdFx0XHR9KSksXG5cdFx0XHRlZGdlczogdGhpcy5lZGdlcy5tYXAoKGVkZ2UpID0+IHtcblx0XHRcdFx0Y29uc3QgaXRlbSA9IHtcblx0XHRcdFx0XHRzb3VyY2U6IHN0YWJsZU5vZGVJZHNbZWRnZS5zb3VyY2VdLFxuXHRcdFx0XHRcdHRhcmdldDogc3RhYmxlTm9kZUlkc1tlZGdlLnRhcmdldF1cblx0XHRcdFx0fTtcblx0XHRcdFx0aWYgKHR5cGVvZiBlZGdlLmRhdGEgIT09IFwidW5kZWZpbmVkXCIpIGl0ZW0uZGF0YSA9IGVkZ2UuZGF0YTtcblx0XHRcdFx0aWYgKHR5cGVvZiBlZGdlLmNvbmRpdGlvbmFsICE9PSBcInVuZGVmaW5lZFwiKSBpdGVtLmNvbmRpdGlvbmFsID0gZWRnZS5jb25kaXRpb25hbDtcblx0XHRcdFx0cmV0dXJuIGl0ZW07XG5cdFx0XHR9KVxuXHRcdH07XG5cdH1cblx0YWRkTm9kZShkYXRhLCBpZCwgbWV0YWRhdGEpIHtcblx0XHRpZiAoaWQgIT09IHZvaWQgMCAmJiB0aGlzLm5vZGVzW2lkXSAhPT0gdm9pZCAwKSB0aHJvdyBuZXcgRXJyb3IoYE5vZGUgd2l0aCBpZCAke2lkfSBhbHJlYWR5IGV4aXN0c2ApO1xuXHRcdGNvbnN0IG5vZGVJZCA9IGlkID8/IHY0KCk7XG5cdFx0Y29uc3Qgbm9kZSA9IHtcblx0XHRcdGlkOiBub2RlSWQsXG5cdFx0XHRkYXRhLFxuXHRcdFx0bmFtZTogbm9kZURhdGFTdHIoaWQsIGRhdGEpLFxuXHRcdFx0bWV0YWRhdGFcblx0XHR9O1xuXHRcdHRoaXMubm9kZXNbbm9kZUlkXSA9IG5vZGU7XG5cdFx0cmV0dXJuIG5vZGU7XG5cdH1cblx0cmVtb3ZlTm9kZShub2RlKSB7XG5cdFx0ZGVsZXRlIHRoaXMubm9kZXNbbm9kZS5pZF07XG5cdFx0dGhpcy5lZGdlcyA9IHRoaXMuZWRnZXMuZmlsdGVyKChlZGdlKSA9PiBlZGdlLnNvdXJjZSAhPT0gbm9kZS5pZCAmJiBlZGdlLnRhcmdldCAhPT0gbm9kZS5pZCk7XG5cdH1cblx0YWRkRWRnZShzb3VyY2UsIHRhcmdldCwgZGF0YSwgY29uZGl0aW9uYWwpIHtcblx0XHRpZiAodGhpcy5ub2Rlc1tzb3VyY2UuaWRdID09PSB2b2lkIDApIHRocm93IG5ldyBFcnJvcihgU291cmNlIG5vZGUgJHtzb3VyY2UuaWR9IG5vdCBpbiBncmFwaGApO1xuXHRcdGlmICh0aGlzLm5vZGVzW3RhcmdldC5pZF0gPT09IHZvaWQgMCkgdGhyb3cgbmV3IEVycm9yKGBUYXJnZXQgbm9kZSAke3RhcmdldC5pZH0gbm90IGluIGdyYXBoYCk7XG5cdFx0Y29uc3QgZWRnZSA9IHtcblx0XHRcdHNvdXJjZTogc291cmNlLmlkLFxuXHRcdFx0dGFyZ2V0OiB0YXJnZXQuaWQsXG5cdFx0XHRkYXRhLFxuXHRcdFx0Y29uZGl0aW9uYWxcblx0XHR9O1xuXHRcdHRoaXMuZWRnZXMucHVzaChlZGdlKTtcblx0XHRyZXR1cm4gZWRnZTtcblx0fVxuXHRmaXJzdE5vZGUoKSB7XG5cdFx0cmV0dXJuIF9maXJzdE5vZGUodGhpcyk7XG5cdH1cblx0bGFzdE5vZGUoKSB7XG5cdFx0cmV0dXJuIF9sYXN0Tm9kZSh0aGlzKTtcblx0fVxuXHQvKipcblx0KiBBZGQgYWxsIG5vZGVzIGFuZCBlZGdlcyBmcm9tIGFub3RoZXIgZ3JhcGguXG5cdCogTm90ZSB0aGlzIGRvZXNuJ3QgY2hlY2sgZm9yIGR1cGxpY2F0ZXMsIG5vciBkb2VzIGl0IGNvbm5lY3QgdGhlIGdyYXBocy5cblx0Ki9cblx0ZXh0ZW5kKGdyYXBoLCBwcmVmaXggPSBcIlwiKSB7XG5cdFx0bGV0IGZpbmFsUHJlZml4ID0gcHJlZml4O1xuXHRcdGNvbnN0IG5vZGVJZHMgPSBPYmplY3QudmFsdWVzKGdyYXBoLm5vZGVzKS5tYXAoKG5vZGUpID0+IG5vZGUuaWQpO1xuXHRcdGlmIChub2RlSWRzLmV2ZXJ5KHZhbGlkYXRlKSkgZmluYWxQcmVmaXggPSBcIlwiO1xuXHRcdGNvbnN0IHByZWZpeGVkID0gKGlkKSA9PiB7XG5cdFx0XHRyZXR1cm4gZmluYWxQcmVmaXggPyBgJHtmaW5hbFByZWZpeH06JHtpZH1gIDogaWQ7XG5cdFx0fTtcblx0XHRPYmplY3QuZW50cmllcyhncmFwaC5ub2RlcykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG5cdFx0XHR0aGlzLm5vZGVzW3ByZWZpeGVkKGtleSldID0ge1xuXHRcdFx0XHQuLi52YWx1ZSxcblx0XHRcdFx0aWQ6IHByZWZpeGVkKGtleSlcblx0XHRcdH07XG5cdFx0fSk7XG5cdFx0Y29uc3QgbmV3RWRnZXMgPSBncmFwaC5lZGdlcy5tYXAoKGVkZ2UpID0+IHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdC4uLmVkZ2UsXG5cdFx0XHRcdHNvdXJjZTogcHJlZml4ZWQoZWRnZS5zb3VyY2UpLFxuXHRcdFx0XHR0YXJnZXQ6IHByZWZpeGVkKGVkZ2UudGFyZ2V0KVxuXHRcdFx0fTtcblx0XHR9KTtcblx0XHR0aGlzLmVkZ2VzID0gWy4uLnRoaXMuZWRnZXMsIC4uLm5ld0VkZ2VzXTtcblx0XHRjb25zdCBmaXJzdCA9IGdyYXBoLmZpcnN0Tm9kZSgpO1xuXHRcdGNvbnN0IGxhc3QgPSBncmFwaC5sYXN0Tm9kZSgpO1xuXHRcdHJldHVybiBbZmlyc3QgPyB7XG5cdFx0XHRpZDogcHJlZml4ZWQoZmlyc3QuaWQpLFxuXHRcdFx0ZGF0YTogZmlyc3QuZGF0YVxuXHRcdH0gOiB2b2lkIDAsIGxhc3QgPyB7XG5cdFx0XHRpZDogcHJlZml4ZWQobGFzdC5pZCksXG5cdFx0XHRkYXRhOiBsYXN0LmRhdGFcblx0XHR9IDogdm9pZCAwXTtcblx0fVxuXHR0cmltRmlyc3ROb2RlKCkge1xuXHRcdGNvbnN0IGZpcnN0Tm9kZSA9IHRoaXMuZmlyc3ROb2RlKCk7XG5cdFx0aWYgKGZpcnN0Tm9kZSAmJiBfZmlyc3ROb2RlKHRoaXMsIFtmaXJzdE5vZGUuaWRdKSkgdGhpcy5yZW1vdmVOb2RlKGZpcnN0Tm9kZSk7XG5cdH1cblx0dHJpbUxhc3ROb2RlKCkge1xuXHRcdGNvbnN0IGxhc3ROb2RlID0gdGhpcy5sYXN0Tm9kZSgpO1xuXHRcdGlmIChsYXN0Tm9kZSAmJiBfbGFzdE5vZGUodGhpcywgW2xhc3ROb2RlLmlkXSkpIHRoaXMucmVtb3ZlTm9kZShsYXN0Tm9kZSk7XG5cdH1cblx0LyoqXG5cdCogUmV0dXJuIGEgbmV3IGdyYXBoIHdpdGggYWxsIG5vZGVzIHJlLWlkZW50aWZpZWQsXG5cdCogdXNpbmcgdGhlaXIgdW5pcXVlLCByZWFkYWJsZSBuYW1lcyB3aGVyZSBwb3NzaWJsZS5cblx0Ki9cblx0cmVpZCgpIHtcblx0XHRjb25zdCBub2RlTGFiZWxzID0gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC52YWx1ZXModGhpcy5ub2RlcykubWFwKChub2RlKSA9PiBbbm9kZS5pZCwgbm9kZS5uYW1lXSkpO1xuXHRcdGNvbnN0IG5vZGVMYWJlbENvdW50cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5cdFx0T2JqZWN0LnZhbHVlcyhub2RlTGFiZWxzKS5mb3JFYWNoKChsYWJlbCkgPT4ge1xuXHRcdFx0bm9kZUxhYmVsQ291bnRzLnNldChsYWJlbCwgKG5vZGVMYWJlbENvdW50cy5nZXQobGFiZWwpIHx8IDApICsgMSk7XG5cdFx0fSk7XG5cdFx0Y29uc3QgZ2V0Tm9kZUlkID0gKG5vZGVJZCkgPT4ge1xuXHRcdFx0Y29uc3QgbGFiZWwgPSBub2RlTGFiZWxzW25vZGVJZF07XG5cdFx0XHRpZiAodmFsaWRhdGUobm9kZUlkKSAmJiBub2RlTGFiZWxDb3VudHMuZ2V0KGxhYmVsKSA9PT0gMSkgcmV0dXJuIGxhYmVsO1xuXHRcdFx0ZWxzZSByZXR1cm4gbm9kZUlkO1xuXHRcdH07XG5cdFx0cmV0dXJuIG5ldyBHcmFwaCh7XG5cdFx0XHRub2RlczogT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKHRoaXMubm9kZXMpLm1hcCgoW2lkLCBub2RlXSkgPT4gW2dldE5vZGVJZChpZCksIHtcblx0XHRcdFx0Li4ubm9kZSxcblx0XHRcdFx0aWQ6IGdldE5vZGVJZChpZClcblx0XHRcdH1dKSksXG5cdFx0XHRlZGdlczogdGhpcy5lZGdlcy5tYXAoKGVkZ2UpID0+ICh7XG5cdFx0XHRcdC4uLmVkZ2UsXG5cdFx0XHRcdHNvdXJjZTogZ2V0Tm9kZUlkKGVkZ2Uuc291cmNlKSxcblx0XHRcdFx0dGFyZ2V0OiBnZXROb2RlSWQoZWRnZS50YXJnZXQpXG5cdFx0XHR9KSlcblx0XHR9KTtcblx0fVxuXHRkcmF3TWVybWFpZChwYXJhbXMpIHtcblx0XHRjb25zdCB7IHdpdGhTdHlsZXMsIGN1cnZlU3R5bGUsIG5vZGVDb2xvcnMgPSB7XG5cdFx0XHRkZWZhdWx0OiBcImZpbGw6I2YyZjBmZixsaW5lLWhlaWdodDoxLjJcIixcblx0XHRcdGZpcnN0OiBcImZpbGwtb3BhY2l0eTowXCIsXG5cdFx0XHRsYXN0OiBcImZpbGw6I2JmYjZmY1wiXG5cdFx0fSwgd3JhcExhYmVsTldvcmRzIH0gPSBwYXJhbXMgPz8ge307XG5cdFx0Y29uc3QgZ3JhcGggPSB0aGlzLnJlaWQoKTtcblx0XHRjb25zdCBmaXJzdE5vZGUgPSBncmFwaC5maXJzdE5vZGUoKTtcblx0XHRjb25zdCBsYXN0Tm9kZSA9IGdyYXBoLmxhc3ROb2RlKCk7XG5cdFx0cmV0dXJuIGRyYXdNZXJtYWlkKGdyYXBoLm5vZGVzLCBncmFwaC5lZGdlcywge1xuXHRcdFx0Zmlyc3ROb2RlOiBmaXJzdE5vZGU/LmlkLFxuXHRcdFx0bGFzdE5vZGU6IGxhc3ROb2RlPy5pZCxcblx0XHRcdHdpdGhTdHlsZXMsXG5cdFx0XHRjdXJ2ZVN0eWxlLFxuXHRcdFx0bm9kZUNvbG9ycyxcblx0XHRcdHdyYXBMYWJlbE5Xb3Jkc1xuXHRcdH0pO1xuXHR9XG5cdGFzeW5jIGRyYXdNZXJtYWlkUG5nKHBhcmFtcykge1xuXHRcdGNvbnN0IG1lcm1haWRTeW50YXggPSB0aGlzLmRyYXdNZXJtYWlkKHBhcmFtcyk7XG5cdFx0cmV0dXJuIGRyYXdNZXJtYWlkSW1hZ2UobWVybWFpZFN5bnRheCwgeyBiYWNrZ3JvdW5kQ29sb3I6IHBhcmFtcz8uYmFja2dyb3VuZENvbG9yIH0pO1xuXHR9XG59O1xuLyoqXG4qIEZpbmQgdGhlIHNpbmdsZSBub2RlIHRoYXQgaXMgbm90IGEgdGFyZ2V0IG9mIGFueSBlZGdlLlxuKiBFeGNsdWRlIG5vZGVzL3NvdXJjZXMgd2l0aCBpZHMgaW4gdGhlIGV4Y2x1ZGUgbGlzdC5cbiogSWYgdGhlcmUgaXMgbm8gc3VjaCBub2RlLCBvciB0aGVyZSBhcmUgbXVsdGlwbGUsIHJldHVybiB1bmRlZmluZWQuXG4qIFdoZW4gZHJhd2luZyB0aGUgZ3JhcGgsIHRoaXMgbm9kZSB3b3VsZCBiZSB0aGUgb3JpZ2luLlxuKi9cbmZ1bmN0aW9uIF9maXJzdE5vZGUoZ3JhcGgsIGV4Y2x1ZGUgPSBbXSkge1xuXHRjb25zdCB0YXJnZXRzID0gbmV3IFNldChncmFwaC5lZGdlcy5maWx0ZXIoKGVkZ2UpID0+ICFleGNsdWRlLmluY2x1ZGVzKGVkZ2Uuc291cmNlKSkubWFwKChlZGdlKSA9PiBlZGdlLnRhcmdldCkpO1xuXHRjb25zdCBmb3VuZCA9IFtdO1xuXHRmb3IgKGNvbnN0IG5vZGUgb2YgT2JqZWN0LnZhbHVlcyhncmFwaC5ub2RlcykpIGlmICghZXhjbHVkZS5pbmNsdWRlcyhub2RlLmlkKSAmJiAhdGFyZ2V0cy5oYXMobm9kZS5pZCkpIGZvdW5kLnB1c2gobm9kZSk7XG5cdHJldHVybiBmb3VuZC5sZW5ndGggPT09IDEgPyBmb3VuZFswXSA6IHZvaWQgMDtcbn1cbi8qKlxuKiBGaW5kIHRoZSBzaW5nbGUgbm9kZSB0aGF0IGlzIG5vdCBhIHNvdXJjZSBvZiBhbnkgZWRnZS5cbiogRXhjbHVkZSBub2Rlcy90YXJnZXRzIHdpdGggaWRzIGluIHRoZSBleGNsdWRlIGxpc3QuXG4qIElmIHRoZXJlIGlzIG5vIHN1Y2ggbm9kZSwgb3IgdGhlcmUgYXJlIG11bHRpcGxlLCByZXR1cm4gdW5kZWZpbmVkLlxuKiBXaGVuIGRyYXdpbmcgdGhlIGdyYXBoLCB0aGlzIG5vZGUgd291bGQgYmUgdGhlIGRlc3RpbmF0aW9uLlxuKi9cbmZ1bmN0aW9uIF9sYXN0Tm9kZShncmFwaCwgZXhjbHVkZSA9IFtdKSB7XG5cdGNvbnN0IHNvdXJjZXMgPSBuZXcgU2V0KGdyYXBoLmVkZ2VzLmZpbHRlcigoZWRnZSkgPT4gIWV4Y2x1ZGUuaW5jbHVkZXMoZWRnZS50YXJnZXQpKS5tYXAoKGVkZ2UpID0+IGVkZ2Uuc291cmNlKSk7XG5cdGNvbnN0IGZvdW5kID0gW107XG5cdGZvciAoY29uc3Qgbm9kZSBvZiBPYmplY3QudmFsdWVzKGdyYXBoLm5vZGVzKSkgaWYgKCFleGNsdWRlLmluY2x1ZGVzKG5vZGUuaWQpICYmICFzb3VyY2VzLmhhcyhub2RlLmlkKSkgZm91bmQucHVzaChub2RlKTtcblx0cmV0dXJuIGZvdW5kLmxlbmd0aCA9PT0gMSA/IGZvdW5kWzBdIDogdm9pZCAwO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEdyYXBoLCBncmFwaF9leHBvcnRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ncmFwaC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/runnables/graph.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/runnables/graph_mermaid.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/graph_mermaid.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   drawMermaid: () => (/* binding */ drawMermaid),\n/* harmony export */   drawMermaidImage: () => (/* binding */ drawMermaidImage)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/utils.js\");\n\n\n//#region src/runnables/graph_mermaid.ts\nfunction _escapeNodeLabel(nodeLabel) {\n\treturn nodeLabel.replace(/[^a-zA-Z-_0-9]/g, \"_\");\n}\nconst MARKDOWN_SPECIAL_CHARS = [\n\t\"*\",\n\t\"_\",\n\t\"`\"\n];\nfunction _generateMermaidGraphStyles(nodeColors) {\n\tlet styles = \"\";\n\tfor (const [className, color] of Object.entries(nodeColors)) styles += `\\tclassDef ${className} ${color};\\n`;\n\treturn styles;\n}\n/**\n* Draws a Mermaid graph using the provided graph data\n*/\nfunction drawMermaid(nodes, edges, config) {\n\tconst { firstNode, lastNode, nodeColors, withStyles = true, curveStyle = \"linear\", wrapLabelNWords = 9 } = config ?? {};\n\tlet mermaidGraph = withStyles ? `%%{init: {'flowchart': {'curve': '${curveStyle}'}}}%%\\ngraph TD;\\n` : \"graph TD;\\n\";\n\tif (withStyles) {\n\t\tconst defaultClassLabel = \"default\";\n\t\tconst formatDict = { [defaultClassLabel]: \"{0}({1})\" };\n\t\tif (firstNode !== void 0) formatDict[firstNode] = \"{0}([{1}]):::first\";\n\t\tif (lastNode !== void 0) formatDict[lastNode] = \"{0}([{1}]):::last\";\n\t\tfor (const [key, node] of Object.entries(nodes)) {\n\t\t\tconst nodeName = node.name.split(\":\").pop() ?? \"\";\n\t\t\tconst label = MARKDOWN_SPECIAL_CHARS.some((char) => nodeName.startsWith(char) && nodeName.endsWith(char)) ? `<p>${nodeName}</p>` : nodeName;\n\t\t\tlet finalLabel = label;\n\t\t\tif (Object.keys(node.metadata ?? {}).length) finalLabel += `<hr/><small><em>${Object.entries(node.metadata ?? {}).map(([k, v]) => `${k} = ${v}`).join(\"\\n\")}</em></small>`;\n\t\t\tconst nodeLabel = (formatDict[key] ?? formatDict[defaultClassLabel]).replace(\"{0}\", _escapeNodeLabel(key)).replace(\"{1}\", finalLabel);\n\t\t\tmermaidGraph += `\\t${nodeLabel}\\n`;\n\t\t}\n\t}\n\tconst edgeGroups = {};\n\tfor (const edge of edges) {\n\t\tconst srcParts = edge.source.split(\":\");\n\t\tconst tgtParts = edge.target.split(\":\");\n\t\tconst commonPrefix = srcParts.filter((src, i) => src === tgtParts[i]).join(\":\");\n\t\tif (!edgeGroups[commonPrefix]) edgeGroups[commonPrefix] = [];\n\t\tedgeGroups[commonPrefix].push(edge);\n\t}\n\tconst seenSubgraphs = /* @__PURE__ */ new Set();\n\tfunction sortPrefixesByDepth(prefixes) {\n\t\treturn [...prefixes].sort((a, b) => {\n\t\t\treturn a.split(\":\").length - b.split(\":\").length;\n\t\t});\n\t}\n\tfunction addSubgraph(edges$1, prefix) {\n\t\tconst selfLoop = edges$1.length === 1 && edges$1[0].source === edges$1[0].target;\n\t\tif (prefix && !selfLoop) {\n\t\t\tconst subgraph = prefix.split(\":\").pop();\n\t\t\tif (seenSubgraphs.has(prefix)) throw new Error(`Found duplicate subgraph '${subgraph}' at '${prefix} -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);\n\t\t\tseenSubgraphs.add(prefix);\n\t\t\tmermaidGraph += `\\tsubgraph ${subgraph}\\n`;\n\t\t}\n\t\tconst nestedPrefixes = sortPrefixesByDepth(Object.keys(edgeGroups).filter((nestedPrefix) => nestedPrefix.startsWith(`${prefix}:`) && nestedPrefix !== prefix && nestedPrefix.split(\":\").length === prefix.split(\":\").length + 1));\n\t\tfor (const nestedPrefix of nestedPrefixes) addSubgraph(edgeGroups[nestedPrefix], nestedPrefix);\n\t\tfor (const edge of edges$1) {\n\t\t\tconst { source, target, data, conditional } = edge;\n\t\t\tlet edgeLabel = \"\";\n\t\t\tif (data !== void 0) {\n\t\t\t\tlet edgeData = data;\n\t\t\t\tconst words = edgeData.split(\" \");\n\t\t\t\tif (words.length > wrapLabelNWords) edgeData = Array.from({ length: Math.ceil(words.length / wrapLabelNWords) }, (_, i) => words.slice(i * wrapLabelNWords, (i + 1) * wrapLabelNWords).join(\" \")).join(\"&nbsp;<br>&nbsp;\");\n\t\t\t\tedgeLabel = conditional ? ` -. &nbsp;${edgeData}&nbsp; .-> ` : ` -- &nbsp;${edgeData}&nbsp; --> `;\n\t\t\t} else edgeLabel = conditional ? \" -.-> \" : \" --> \";\n\t\t\tmermaidGraph += `\\t${_escapeNodeLabel(source)}${edgeLabel}${_escapeNodeLabel(target)};\\n`;\n\t\t}\n\t\tif (prefix && !selfLoop) mermaidGraph += \"\tend\\n\";\n\t}\n\taddSubgraph(edgeGroups[\"\"] ?? [], \"\");\n\tfor (const prefix in edgeGroups) if (!prefix.includes(\":\") && prefix !== \"\") addSubgraph(edgeGroups[prefix], prefix);\n\tif (withStyles) mermaidGraph += _generateMermaidGraphStyles(nodeColors ?? {});\n\treturn mermaidGraph;\n}\n/**\n* Renders Mermaid graph using the Mermaid.INK API.\n*\n* @example\n* ```javascript\n* const image = await drawMermaidImage(mermaidSyntax, {\n*   backgroundColor: \"white\",\n*   imageType: \"png\",\n* });\n* fs.writeFileSync(\"image.png\", image);\n* ```\n*\n* @param mermaidSyntax - The Mermaid syntax to render.\n* @param config - The configuration for the image.\n* @returns The image as a Blob.\n*/\nasync function drawMermaidImage(mermaidSyntax, config) {\n\tlet backgroundColor = config?.backgroundColor ?? \"white\";\n\tconst imageType = config?.imageType ?? \"png\";\n\tconst mermaidSyntaxEncoded = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.toBase64Url)(mermaidSyntax);\n\tif (backgroundColor !== void 0) {\n\t\tconst hexColorPattern = /^#(?:[0-9a-fA-F]{3}){1,2}$/;\n\t\tif (!hexColorPattern.test(backgroundColor)) backgroundColor = `!${backgroundColor}`;\n\t}\n\tconst imageUrl = `https://mermaid.ink/img/${mermaidSyntaxEncoded}?bgColor=${backgroundColor}&type=${imageType}`;\n\tconst res = await fetch(imageUrl);\n\tif (!res.ok) throw new Error([\n\t\t`Failed to render the graph using the Mermaid.INK API.`,\n\t\t`Status code: ${res.status}`,\n\t\t`Status text: ${res.statusText}`\n\t].join(\"\\n\"));\n\tconst content = await res.blob();\n\treturn content;\n}\n\n//#endregion\n\n//# sourceMappingURL=graph_mermaid.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2dyYXBoX21lcm1haWQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXlDOztBQUV6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0ZBQXNGLFdBQVcsRUFBRSxPQUFPO0FBQzFHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsaUdBQWlHO0FBQzFHLHFDQUFxQyxPQUFPLGNBQWMsWUFBWSxXQUFXLElBQUksYUFBYSxnQkFBZ0I7QUFDbEg7QUFDQTtBQUNBLHVCQUF1Qix1QkFBdUIsRUFBRSxFQUFFLEVBQUU7QUFDcEQsc0RBQXNELEVBQUUsR0FBRyxFQUFFO0FBQzdELG9EQUFvRCxFQUFFLEdBQUcsRUFBRTtBQUMzRDtBQUNBO0FBQ0EscUhBQXFILFNBQVM7QUFDOUg7QUFDQSxzQ0FBc0MsMkNBQTJDLGtDQUFrQyxxQkFBcUIsR0FBRyxJQUFJLEVBQUUsY0FBYztBQUMvSixrRkFBa0YsRUFBRSxvQ0FBb0MsRUFBRTtBQUMxSCx3QkFBd0IsVUFBVTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRUFBK0UsU0FBUyxRQUFRLFFBQVE7QUFDeEc7QUFDQSxpQ0FBaUMsU0FBUztBQUMxQztBQUNBLHlIQUF5SCxPQUFPO0FBQ2hJO0FBQ0E7QUFDQSxXQUFXLG9DQUFvQztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSxtREFBbUQsK0ZBQStGLFVBQVU7QUFDNU4seUNBQXlDLEVBQUUsU0FBUyxPQUFPLG1CQUFtQixFQUFFLFNBQVMsT0FBTztBQUNoRyxLQUFLO0FBQ0wsd0JBQXdCLHlCQUF5QixFQUFFLFVBQVUsRUFBRSwwQkFBMEI7QUFDekY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZFQUE2RTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixzREFBVztBQUN6QztBQUNBLDRDQUE0QyxFQUFFLEVBQUUsSUFBSTtBQUNwRCxvRUFBb0UsZ0JBQWdCO0FBQ3BGO0FBQ0EsNkNBQTZDLHFCQUFxQixXQUFXLGdCQUFnQixRQUFRLFVBQVU7QUFDL0c7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFdBQVc7QUFDN0Isa0JBQWtCLGVBQWU7QUFDakM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDeUM7QUFDekMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvZ3JhcGhfbWVybWFpZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0b0Jhc2U2NFVybCB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcnVubmFibGVzL2dyYXBoX21lcm1haWQudHNcbmZ1bmN0aW9uIF9lc2NhcGVOb2RlTGFiZWwobm9kZUxhYmVsKSB7XG5cdHJldHVybiBub2RlTGFiZWwucmVwbGFjZSgvW15hLXpBLVotXzAtOV0vZywgXCJfXCIpO1xufVxuY29uc3QgTUFSS0RPV05fU1BFQ0lBTF9DSEFSUyA9IFtcblx0XCIqXCIsXG5cdFwiX1wiLFxuXHRcImBcIlxuXTtcbmZ1bmN0aW9uIF9nZW5lcmF0ZU1lcm1haWRHcmFwaFN0eWxlcyhub2RlQ29sb3JzKSB7XG5cdGxldCBzdHlsZXMgPSBcIlwiO1xuXHRmb3IgKGNvbnN0IFtjbGFzc05hbWUsIGNvbG9yXSBvZiBPYmplY3QuZW50cmllcyhub2RlQ29sb3JzKSkgc3R5bGVzICs9IGBcXHRjbGFzc0RlZiAke2NsYXNzTmFtZX0gJHtjb2xvcn07XFxuYDtcblx0cmV0dXJuIHN0eWxlcztcbn1cbi8qKlxuKiBEcmF3cyBhIE1lcm1haWQgZ3JhcGggdXNpbmcgdGhlIHByb3ZpZGVkIGdyYXBoIGRhdGFcbiovXG5mdW5jdGlvbiBkcmF3TWVybWFpZChub2RlcywgZWRnZXMsIGNvbmZpZykge1xuXHRjb25zdCB7IGZpcnN0Tm9kZSwgbGFzdE5vZGUsIG5vZGVDb2xvcnMsIHdpdGhTdHlsZXMgPSB0cnVlLCBjdXJ2ZVN0eWxlID0gXCJsaW5lYXJcIiwgd3JhcExhYmVsTldvcmRzID0gOSB9ID0gY29uZmlnID8/IHt9O1xuXHRsZXQgbWVybWFpZEdyYXBoID0gd2l0aFN0eWxlcyA/IGAlJXtpbml0OiB7J2Zsb3djaGFydCc6IHsnY3VydmUnOiAnJHtjdXJ2ZVN0eWxlfSd9fX0lJVxcbmdyYXBoIFREO1xcbmAgOiBcImdyYXBoIFREO1xcblwiO1xuXHRpZiAod2l0aFN0eWxlcykge1xuXHRcdGNvbnN0IGRlZmF1bHRDbGFzc0xhYmVsID0gXCJkZWZhdWx0XCI7XG5cdFx0Y29uc3QgZm9ybWF0RGljdCA9IHsgW2RlZmF1bHRDbGFzc0xhYmVsXTogXCJ7MH0oezF9KVwiIH07XG5cdFx0aWYgKGZpcnN0Tm9kZSAhPT0gdm9pZCAwKSBmb3JtYXREaWN0W2ZpcnN0Tm9kZV0gPSBcInswfShbezF9XSk6OjpmaXJzdFwiO1xuXHRcdGlmIChsYXN0Tm9kZSAhPT0gdm9pZCAwKSBmb3JtYXREaWN0W2xhc3ROb2RlXSA9IFwiezB9KFt7MX1dKTo6Omxhc3RcIjtcblx0XHRmb3IgKGNvbnN0IFtrZXksIG5vZGVdIG9mIE9iamVjdC5lbnRyaWVzKG5vZGVzKSkge1xuXHRcdFx0Y29uc3Qgbm9kZU5hbWUgPSBub2RlLm5hbWUuc3BsaXQoXCI6XCIpLnBvcCgpID8/IFwiXCI7XG5cdFx0XHRjb25zdCBsYWJlbCA9IE1BUktET1dOX1NQRUNJQUxfQ0hBUlMuc29tZSgoY2hhcikgPT4gbm9kZU5hbWUuc3RhcnRzV2l0aChjaGFyKSAmJiBub2RlTmFtZS5lbmRzV2l0aChjaGFyKSkgPyBgPHA+JHtub2RlTmFtZX08L3A+YCA6IG5vZGVOYW1lO1xuXHRcdFx0bGV0IGZpbmFsTGFiZWwgPSBsYWJlbDtcblx0XHRcdGlmIChPYmplY3Qua2V5cyhub2RlLm1ldGFkYXRhID8/IHt9KS5sZW5ndGgpIGZpbmFsTGFiZWwgKz0gYDxoci8+PHNtYWxsPjxlbT4ke09iamVjdC5lbnRyaWVzKG5vZGUubWV0YWRhdGEgPz8ge30pLm1hcCgoW2ssIHZdKSA9PiBgJHtrfSA9ICR7dn1gKS5qb2luKFwiXFxuXCIpfTwvZW0+PC9zbWFsbD5gO1xuXHRcdFx0Y29uc3Qgbm9kZUxhYmVsID0gKGZvcm1hdERpY3Rba2V5XSA/PyBmb3JtYXREaWN0W2RlZmF1bHRDbGFzc0xhYmVsXSkucmVwbGFjZShcInswfVwiLCBfZXNjYXBlTm9kZUxhYmVsKGtleSkpLnJlcGxhY2UoXCJ7MX1cIiwgZmluYWxMYWJlbCk7XG5cdFx0XHRtZXJtYWlkR3JhcGggKz0gYFxcdCR7bm9kZUxhYmVsfVxcbmA7XG5cdFx0fVxuXHR9XG5cdGNvbnN0IGVkZ2VHcm91cHMgPSB7fTtcblx0Zm9yIChjb25zdCBlZGdlIG9mIGVkZ2VzKSB7XG5cdFx0Y29uc3Qgc3JjUGFydHMgPSBlZGdlLnNvdXJjZS5zcGxpdChcIjpcIik7XG5cdFx0Y29uc3QgdGd0UGFydHMgPSBlZGdlLnRhcmdldC5zcGxpdChcIjpcIik7XG5cdFx0Y29uc3QgY29tbW9uUHJlZml4ID0gc3JjUGFydHMuZmlsdGVyKChzcmMsIGkpID0+IHNyYyA9PT0gdGd0UGFydHNbaV0pLmpvaW4oXCI6XCIpO1xuXHRcdGlmICghZWRnZUdyb3Vwc1tjb21tb25QcmVmaXhdKSBlZGdlR3JvdXBzW2NvbW1vblByZWZpeF0gPSBbXTtcblx0XHRlZGdlR3JvdXBzW2NvbW1vblByZWZpeF0ucHVzaChlZGdlKTtcblx0fVxuXHRjb25zdCBzZWVuU3ViZ3JhcGhzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcblx0ZnVuY3Rpb24gc29ydFByZWZpeGVzQnlEZXB0aChwcmVmaXhlcykge1xuXHRcdHJldHVybiBbLi4ucHJlZml4ZXNdLnNvcnQoKGEsIGIpID0+IHtcblx0XHRcdHJldHVybiBhLnNwbGl0KFwiOlwiKS5sZW5ndGggLSBiLnNwbGl0KFwiOlwiKS5sZW5ndGg7XG5cdFx0fSk7XG5cdH1cblx0ZnVuY3Rpb24gYWRkU3ViZ3JhcGgoZWRnZXMkMSwgcHJlZml4KSB7XG5cdFx0Y29uc3Qgc2VsZkxvb3AgPSBlZGdlcyQxLmxlbmd0aCA9PT0gMSAmJiBlZGdlcyQxWzBdLnNvdXJjZSA9PT0gZWRnZXMkMVswXS50YXJnZXQ7XG5cdFx0aWYgKHByZWZpeCAmJiAhc2VsZkxvb3ApIHtcblx0XHRcdGNvbnN0IHN1YmdyYXBoID0gcHJlZml4LnNwbGl0KFwiOlwiKS5wb3AoKTtcblx0XHRcdGlmIChzZWVuU3ViZ3JhcGhzLmhhcyhwcmVmaXgpKSB0aHJvdyBuZXcgRXJyb3IoYEZvdW5kIGR1cGxpY2F0ZSBzdWJncmFwaCAnJHtzdWJncmFwaH0nIGF0ICcke3ByZWZpeH0gLS0gdGhpcyBsaWtlbHkgbWVhbnMgdGhhdCB5b3UncmUgcmV1c2luZyBhIHN1YmdyYXBoIG5vZGUgd2l0aCB0aGUgc2FtZSBuYW1lLiBQbGVhc2UgYWRqdXN0IHlvdXIgZ3JhcGggdG8gaGF2ZSBzdWJncmFwaCBub2RlcyB3aXRoIHVuaXF1ZSBuYW1lcy5gKTtcblx0XHRcdHNlZW5TdWJncmFwaHMuYWRkKHByZWZpeCk7XG5cdFx0XHRtZXJtYWlkR3JhcGggKz0gYFxcdHN1YmdyYXBoICR7c3ViZ3JhcGh9XFxuYDtcblx0XHR9XG5cdFx0Y29uc3QgbmVzdGVkUHJlZml4ZXMgPSBzb3J0UHJlZml4ZXNCeURlcHRoKE9iamVjdC5rZXlzKGVkZ2VHcm91cHMpLmZpbHRlcigobmVzdGVkUHJlZml4KSA9PiBuZXN0ZWRQcmVmaXguc3RhcnRzV2l0aChgJHtwcmVmaXh9OmApICYmIG5lc3RlZFByZWZpeCAhPT0gcHJlZml4ICYmIG5lc3RlZFByZWZpeC5zcGxpdChcIjpcIikubGVuZ3RoID09PSBwcmVmaXguc3BsaXQoXCI6XCIpLmxlbmd0aCArIDEpKTtcblx0XHRmb3IgKGNvbnN0IG5lc3RlZFByZWZpeCBvZiBuZXN0ZWRQcmVmaXhlcykgYWRkU3ViZ3JhcGgoZWRnZUdyb3Vwc1tuZXN0ZWRQcmVmaXhdLCBuZXN0ZWRQcmVmaXgpO1xuXHRcdGZvciAoY29uc3QgZWRnZSBvZiBlZGdlcyQxKSB7XG5cdFx0XHRjb25zdCB7IHNvdXJjZSwgdGFyZ2V0LCBkYXRhLCBjb25kaXRpb25hbCB9ID0gZWRnZTtcblx0XHRcdGxldCBlZGdlTGFiZWwgPSBcIlwiO1xuXHRcdFx0aWYgKGRhdGEgIT09IHZvaWQgMCkge1xuXHRcdFx0XHRsZXQgZWRnZURhdGEgPSBkYXRhO1xuXHRcdFx0XHRjb25zdCB3b3JkcyA9IGVkZ2VEYXRhLnNwbGl0KFwiIFwiKTtcblx0XHRcdFx0aWYgKHdvcmRzLmxlbmd0aCA+IHdyYXBMYWJlbE5Xb3JkcykgZWRnZURhdGEgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBNYXRoLmNlaWwod29yZHMubGVuZ3RoIC8gd3JhcExhYmVsTldvcmRzKSB9LCAoXywgaSkgPT4gd29yZHMuc2xpY2UoaSAqIHdyYXBMYWJlbE5Xb3JkcywgKGkgKyAxKSAqIHdyYXBMYWJlbE5Xb3Jkcykuam9pbihcIiBcIikpLmpvaW4oXCImbmJzcDs8YnI+Jm5ic3A7XCIpO1xuXHRcdFx0XHRlZGdlTGFiZWwgPSBjb25kaXRpb25hbCA/IGAgLS4gJm5ic3A7JHtlZGdlRGF0YX0mbmJzcDsgLi0+IGAgOiBgIC0tICZuYnNwOyR7ZWRnZURhdGF9Jm5ic3A7IC0tPiBgO1xuXHRcdFx0fSBlbHNlIGVkZ2VMYWJlbCA9IGNvbmRpdGlvbmFsID8gXCIgLS4tPiBcIiA6IFwiIC0tPiBcIjtcblx0XHRcdG1lcm1haWRHcmFwaCArPSBgXFx0JHtfZXNjYXBlTm9kZUxhYmVsKHNvdXJjZSl9JHtlZGdlTGFiZWx9JHtfZXNjYXBlTm9kZUxhYmVsKHRhcmdldCl9O1xcbmA7XG5cdFx0fVxuXHRcdGlmIChwcmVmaXggJiYgIXNlbGZMb29wKSBtZXJtYWlkR3JhcGggKz0gXCJcdGVuZFxcblwiO1xuXHR9XG5cdGFkZFN1YmdyYXBoKGVkZ2VHcm91cHNbXCJcIl0gPz8gW10sIFwiXCIpO1xuXHRmb3IgKGNvbnN0IHByZWZpeCBpbiBlZGdlR3JvdXBzKSBpZiAoIXByZWZpeC5pbmNsdWRlcyhcIjpcIikgJiYgcHJlZml4ICE9PSBcIlwiKSBhZGRTdWJncmFwaChlZGdlR3JvdXBzW3ByZWZpeF0sIHByZWZpeCk7XG5cdGlmICh3aXRoU3R5bGVzKSBtZXJtYWlkR3JhcGggKz0gX2dlbmVyYXRlTWVybWFpZEdyYXBoU3R5bGVzKG5vZGVDb2xvcnMgPz8ge30pO1xuXHRyZXR1cm4gbWVybWFpZEdyYXBoO1xufVxuLyoqXG4qIFJlbmRlcnMgTWVybWFpZCBncmFwaCB1c2luZyB0aGUgTWVybWFpZC5JTksgQVBJLlxuKlxuKiBAZXhhbXBsZVxuKiBgYGBqYXZhc2NyaXB0XG4qIGNvbnN0IGltYWdlID0gYXdhaXQgZHJhd01lcm1haWRJbWFnZShtZXJtYWlkU3ludGF4LCB7XG4qICAgYmFja2dyb3VuZENvbG9yOiBcIndoaXRlXCIsXG4qICAgaW1hZ2VUeXBlOiBcInBuZ1wiLFxuKiB9KTtcbiogZnMud3JpdGVGaWxlU3luYyhcImltYWdlLnBuZ1wiLCBpbWFnZSk7XG4qIGBgYFxuKlxuKiBAcGFyYW0gbWVybWFpZFN5bnRheCAtIFRoZSBNZXJtYWlkIHN5bnRheCB0byByZW5kZXIuXG4qIEBwYXJhbSBjb25maWcgLSBUaGUgY29uZmlndXJhdGlvbiBmb3IgdGhlIGltYWdlLlxuKiBAcmV0dXJucyBUaGUgaW1hZ2UgYXMgYSBCbG9iLlxuKi9cbmFzeW5jIGZ1bmN0aW9uIGRyYXdNZXJtYWlkSW1hZ2UobWVybWFpZFN5bnRheCwgY29uZmlnKSB7XG5cdGxldCBiYWNrZ3JvdW5kQ29sb3IgPSBjb25maWc/LmJhY2tncm91bmRDb2xvciA/PyBcIndoaXRlXCI7XG5cdGNvbnN0IGltYWdlVHlwZSA9IGNvbmZpZz8uaW1hZ2VUeXBlID8/IFwicG5nXCI7XG5cdGNvbnN0IG1lcm1haWRTeW50YXhFbmNvZGVkID0gdG9CYXNlNjRVcmwobWVybWFpZFN5bnRheCk7XG5cdGlmIChiYWNrZ3JvdW5kQ29sb3IgIT09IHZvaWQgMCkge1xuXHRcdGNvbnN0IGhleENvbG9yUGF0dGVybiA9IC9eIyg/OlswLTlhLWZBLUZdezN9KXsxLDJ9JC87XG5cdFx0aWYgKCFoZXhDb2xvclBhdHRlcm4udGVzdChiYWNrZ3JvdW5kQ29sb3IpKSBiYWNrZ3JvdW5kQ29sb3IgPSBgISR7YmFja2dyb3VuZENvbG9yfWA7XG5cdH1cblx0Y29uc3QgaW1hZ2VVcmwgPSBgaHR0cHM6Ly9tZXJtYWlkLmluay9pbWcvJHttZXJtYWlkU3ludGF4RW5jb2RlZH0/YmdDb2xvcj0ke2JhY2tncm91bmRDb2xvcn0mdHlwZT0ke2ltYWdlVHlwZX1gO1xuXHRjb25zdCByZXMgPSBhd2FpdCBmZXRjaChpbWFnZVVybCk7XG5cdGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoW1xuXHRcdGBGYWlsZWQgdG8gcmVuZGVyIHRoZSBncmFwaCB1c2luZyB0aGUgTWVybWFpZC5JTksgQVBJLmAsXG5cdFx0YFN0YXR1cyBjb2RlOiAke3Jlcy5zdGF0dXN9YCxcblx0XHRgU3RhdHVzIHRleHQ6ICR7cmVzLnN0YXR1c1RleHR9YFxuXHRdLmpvaW4oXCJcXG5cIikpO1xuXHRjb25zdCBjb250ZW50ID0gYXdhaXQgcmVzLmJsb2IoKTtcblx0cmV0dXJuIGNvbnRlbnQ7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZHJhd01lcm1haWQsIGRyYXdNZXJtYWlkSW1hZ2UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdyYXBoX21lcm1haWQuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/runnables/graph_mermaid.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/runnables/history.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/history.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RunnableWithMessageHistory: () => (/* binding */ RunnableWithMessageHistory)\n/* harmony export */ });\n/* harmony import */ var _messages_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../messages/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _messages_human_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../messages/human.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/human.js\");\n/* harmony import */ var _messages_ai_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../messages/ai.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../messages/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _passthrough_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./passthrough.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/passthrough.js\");\n\n\n\n\n\n\n\n//#region src/runnables/history.ts\n/**\n* Wraps a LCEL chain and manages history. It appends input messages\n* and chain outputs as history, and adds the current history messages to\n* the chain input.\n* @example\n* ```typescript\n* // pnpm install @langchain/anthropic @langchain/community @upstash/redis\n*\n* import {\n*   ChatPromptTemplate,\n*   MessagesPlaceholder,\n* } from \"@langchain/core/prompts\";\n* import { ChatAnthropic } from \"@langchain/anthropic\";\n* import { UpstashRedisChatMessageHistory } from \"@langchain/community/stores/message/upstash_redis\";\n* // For demos, you can also use an in-memory store:\n* // import { ChatMessageHistory } from \"@langchain/classic/stores/message/in_memory\";\n*\n* const prompt = ChatPromptTemplate.fromMessages([\n*   [\"system\", \"You're an assistant who's good at {ability}\"],\n*   new MessagesPlaceholder(\"history\"),\n*   [\"human\", \"{question}\"],\n* ]);\n*\n* const chain = prompt.pipe(new ChatAnthropic({}));\n*\n* const chainWithHistory = new RunnableWithMessageHistory({\n*   runnable: chain,\n*   getMessageHistory: (sessionId) =>\n*     new UpstashRedisChatMessageHistory({\n*       sessionId,\n*       config: {\n*         url: process.env.UPSTASH_REDIS_REST_URL!,\n*         token: process.env.UPSTASH_REDIS_REST_TOKEN!,\n*       },\n*     }),\n*   inputMessagesKey: \"question\",\n*   historyMessagesKey: \"history\",\n* });\n*\n* const result = await chainWithHistory.invoke(\n*   {\n*     ability: \"math\",\n*     question: \"What does cosine mean?\",\n*   },\n*   {\n*     configurable: {\n*       sessionId: \"some_string_identifying_a_user\",\n*     },\n*   }\n* );\n*\n* const result2 = await chainWithHistory.invoke(\n*   {\n*     ability: \"math\",\n*     question: \"What's its inverse?\",\n*   },\n*   {\n*     configurable: {\n*       sessionId: \"some_string_identifying_a_user\",\n*     },\n*   }\n* );\n* ```\n*/\nvar RunnableWithMessageHistory = class extends _base_js__WEBPACK_IMPORTED_MODULE_3__.RunnableBinding {\n\trunnable;\n\tinputMessagesKey;\n\toutputMessagesKey;\n\thistoryMessagesKey;\n\tgetMessageHistory;\n\tconstructor(fields) {\n\t\tlet historyChain = _base_js__WEBPACK_IMPORTED_MODULE_3__.RunnableLambda.from((input, options) => this._enterHistory(input, options ?? {})).withConfig({ runName: \"loadHistory\" });\n\t\tconst messagesKey = fields.historyMessagesKey ?? fields.inputMessagesKey;\n\t\tif (messagesKey) historyChain = _passthrough_js__WEBPACK_IMPORTED_MODULE_5__.RunnablePassthrough.assign({ [messagesKey]: historyChain }).withConfig({ runName: \"insertHistory\" });\n\t\tconst bound = historyChain.pipe(fields.runnable.withListeners({ onEnd: (run, config$1) => this._exitHistory(run, config$1 ?? {}) })).withConfig({ runName: \"RunnableWithMessageHistory\" });\n\t\tconst config = fields.config ?? {};\n\t\tsuper({\n\t\t\t...fields,\n\t\t\tconfig,\n\t\t\tbound\n\t\t});\n\t\tthis.runnable = fields.runnable;\n\t\tthis.getMessageHistory = fields.getMessageHistory;\n\t\tthis.inputMessagesKey = fields.inputMessagesKey;\n\t\tthis.outputMessagesKey = fields.outputMessagesKey;\n\t\tthis.historyMessagesKey = fields.historyMessagesKey;\n\t}\n\t_getInputMessages(inputValue) {\n\t\tlet parsedInputValue;\n\t\tif (typeof inputValue === \"object\" && !Array.isArray(inputValue) && !(0,_messages_base_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(inputValue)) {\n\t\t\tlet key;\n\t\t\tif (this.inputMessagesKey) key = this.inputMessagesKey;\n\t\t\telse if (Object.keys(inputValue).length === 1) key = Object.keys(inputValue)[0];\n\t\t\telse key = \"input\";\n\t\t\tif (Array.isArray(inputValue[key]) && Array.isArray(inputValue[key][0])) parsedInputValue = inputValue[key][0];\n\t\t\telse parsedInputValue = inputValue[key];\n\t\t} else parsedInputValue = inputValue;\n\t\tif (typeof parsedInputValue === \"string\") return [new _messages_human_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessage(parsedInputValue)];\n\t\telse if (Array.isArray(parsedInputValue)) return parsedInputValue;\n\t\telse if ((0,_messages_base_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(parsedInputValue)) return [parsedInputValue];\n\t\telse throw new Error(`Expected a string, BaseMessage, or array of BaseMessages.\\nGot ${JSON.stringify(parsedInputValue, null, 2)}`);\n\t}\n\t_getOutputMessages(outputValue) {\n\t\tlet parsedOutputValue;\n\t\tif (!Array.isArray(outputValue) && !(0,_messages_base_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(outputValue) && typeof outputValue !== \"string\") {\n\t\t\tlet key;\n\t\t\tif (this.outputMessagesKey !== void 0) key = this.outputMessagesKey;\n\t\t\telse if (Object.keys(outputValue).length === 1) key = Object.keys(outputValue)[0];\n\t\t\telse key = \"output\";\n\t\t\tif (outputValue.generations !== void 0) parsedOutputValue = outputValue.generations[0][0].message;\n\t\t\telse parsedOutputValue = outputValue[key];\n\t\t} else parsedOutputValue = outputValue;\n\t\tif (typeof parsedOutputValue === \"string\") return [new _messages_ai_js__WEBPACK_IMPORTED_MODULE_2__.AIMessage(parsedOutputValue)];\n\t\telse if (Array.isArray(parsedOutputValue)) return parsedOutputValue;\n\t\telse if ((0,_messages_base_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(parsedOutputValue)) return [parsedOutputValue];\n\t\telse throw new Error(`Expected a string, BaseMessage, or array of BaseMessages. Received: ${JSON.stringify(parsedOutputValue, null, 2)}`);\n\t}\n\tasync _enterHistory(input, kwargs) {\n\t\tconst history = kwargs?.configurable?.messageHistory;\n\t\tconst messages = await history.getMessages();\n\t\tif (this.historyMessagesKey === void 0) return messages.concat(this._getInputMessages(input));\n\t\treturn messages;\n\t}\n\tasync _exitHistory(run, config) {\n\t\tconst history = config.configurable?.messageHistory;\n\t\tlet inputs;\n\t\tif (Array.isArray(run.inputs) && Array.isArray(run.inputs[0])) inputs = run.inputs[0];\n\t\telse inputs = run.inputs;\n\t\tlet inputMessages = this._getInputMessages(inputs);\n\t\tif (this.historyMessagesKey === void 0) {\n\t\t\tconst existingMessages = await history.getMessages();\n\t\t\tinputMessages = inputMessages.slice(existingMessages.length);\n\t\t}\n\t\tconst outputValue = run.outputs;\n\t\tif (!outputValue) throw new Error(`Output values from 'Run' undefined. Run: ${JSON.stringify(run, null, 2)}`);\n\t\tconst outputMessages = this._getOutputMessages(outputValue);\n\t\tawait history.addMessages([...inputMessages, ...outputMessages]);\n\t}\n\tasync _mergeConfig(...configs) {\n\t\tconst config = await super._mergeConfig(...configs);\n\t\tif (!config.configurable || !config.configurable.sessionId) {\n\t\t\tconst exampleInput = { [this.inputMessagesKey ?? \"input\"]: \"foo\" };\n\t\t\tconst exampleConfig = { configurable: { sessionId: \"123\" } };\n\t\t\tthrow new Error(`sessionId is required. Pass it in as part of the config argument to .invoke() or .stream()\\neg. chain.invoke(${JSON.stringify(exampleInput)}, ${JSON.stringify(exampleConfig)})`);\n\t\t}\n\t\tconst { sessionId } = config.configurable;\n\t\tconfig.configurable.messageHistory = await this.getMessageHistory(sessionId);\n\t\treturn config;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=history.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2hpc3RvcnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFvRDtBQUNBO0FBQ047QUFDYztBQUM5QjtBQUN5Qjs7QUFFdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLFdBQVcsZ0JBQWdCO0FBQzNCLFdBQVcsaUNBQWlDO0FBQzVDO0FBQ0EsY0FBYyxxQkFBcUI7QUFDbkM7QUFDQTtBQUNBLG1EQUFtRCxRQUFRO0FBQzNEO0FBQ0EsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQTtBQUNBLGdEQUFnRDtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLHFEQUFlO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixvREFBYyxpRUFBaUUsZ0JBQWdCLHdCQUF3QjtBQUM1STtBQUNBLGtDQUFrQyxnRUFBbUIsVUFBVSw2QkFBNkIsZUFBZSwwQkFBMEI7QUFDckksa0VBQWtFLCtEQUErRCxHQUFHLGdCQUFnQix1Q0FBdUM7QUFDM0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLGdFQUFhO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSix3REFBd0QsNERBQVk7QUFDcEU7QUFDQSxXQUFXLGdFQUFhO0FBQ3hCLHlGQUF5RiwwQ0FBMEM7QUFDbkk7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLGdFQUFhO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSix5REFBeUQsc0RBQVM7QUFDbEU7QUFDQSxXQUFXLGdFQUFhO0FBQ3hCLDhGQUE4RiwyQ0FBMkM7QUFDekk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0ZBQWdGLDZCQUE2QjtBQUM3RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUIsMkJBQTJCLGdCQUFnQjtBQUMzQyxtSUFBbUksNkJBQTZCLElBQUksOEJBQThCO0FBQ2xNO0FBQ0EsVUFBVSxZQUFZO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3NDO0FBQ3RDIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2hpc3RvcnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNCYXNlTWVzc2FnZSB9IGZyb20gXCIuLi9tZXNzYWdlcy9iYXNlLmpzXCI7XG5pbXBvcnQgeyBIdW1hbk1lc3NhZ2UgfSBmcm9tIFwiLi4vbWVzc2FnZXMvaHVtYW4uanNcIjtcbmltcG9ydCB7IEFJTWVzc2FnZSB9IGZyb20gXCIuLi9tZXNzYWdlcy9haS5qc1wiO1xuaW1wb3J0IHsgUnVubmFibGVCaW5kaW5nLCBSdW5uYWJsZUxhbWJkYSB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCBcIi4uL21lc3NhZ2VzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBSdW5uYWJsZVBhc3N0aHJvdWdoIH0gZnJvbSBcIi4vcGFzc3Rocm91Z2guanNcIjtcblxuLy8jcmVnaW9uIHNyYy9ydW5uYWJsZXMvaGlzdG9yeS50c1xuLyoqXG4qIFdyYXBzIGEgTENFTCBjaGFpbiBhbmQgbWFuYWdlcyBoaXN0b3J5LiBJdCBhcHBlbmRzIGlucHV0IG1lc3NhZ2VzXG4qIGFuZCBjaGFpbiBvdXRwdXRzIGFzIGhpc3RvcnksIGFuZCBhZGRzIHRoZSBjdXJyZW50IGhpc3RvcnkgbWVzc2FnZXMgdG9cbiogdGhlIGNoYWluIGlucHV0LlxuKiBAZXhhbXBsZVxuKiBgYGB0eXBlc2NyaXB0XG4qIC8vIHBucG0gaW5zdGFsbCBAbGFuZ2NoYWluL2FudGhyb3BpYyBAbGFuZ2NoYWluL2NvbW11bml0eSBAdXBzdGFzaC9yZWRpc1xuKlxuKiBpbXBvcnQge1xuKiAgIENoYXRQcm9tcHRUZW1wbGF0ZSxcbiogICBNZXNzYWdlc1BsYWNlaG9sZGVyLFxuKiB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvcHJvbXB0c1wiO1xuKiBpbXBvcnQgeyBDaGF0QW50aHJvcGljIH0gZnJvbSBcIkBsYW5nY2hhaW4vYW50aHJvcGljXCI7XG4qIGltcG9ydCB7IFVwc3Rhc2hSZWRpc0NoYXRNZXNzYWdlSGlzdG9yeSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvbW11bml0eS9zdG9yZXMvbWVzc2FnZS91cHN0YXNoX3JlZGlzXCI7XG4qIC8vIEZvciBkZW1vcywgeW91IGNhbiBhbHNvIHVzZSBhbiBpbi1tZW1vcnkgc3RvcmU6XG4qIC8vIGltcG9ydCB7IENoYXRNZXNzYWdlSGlzdG9yeSB9IGZyb20gXCJAbGFuZ2NoYWluL2NsYXNzaWMvc3RvcmVzL21lc3NhZ2UvaW5fbWVtb3J5XCI7XG4qXG4qIGNvbnN0IHByb21wdCA9IENoYXRQcm9tcHRUZW1wbGF0ZS5mcm9tTWVzc2FnZXMoW1xuKiAgIFtcInN5c3RlbVwiLCBcIllvdSdyZSBhbiBhc3Npc3RhbnQgd2hvJ3MgZ29vZCBhdCB7YWJpbGl0eX1cIl0sXG4qICAgbmV3IE1lc3NhZ2VzUGxhY2Vob2xkZXIoXCJoaXN0b3J5XCIpLFxuKiAgIFtcImh1bWFuXCIsIFwie3F1ZXN0aW9ufVwiXSxcbiogXSk7XG4qXG4qIGNvbnN0IGNoYWluID0gcHJvbXB0LnBpcGUobmV3IENoYXRBbnRocm9waWMoe30pKTtcbipcbiogY29uc3QgY2hhaW5XaXRoSGlzdG9yeSA9IG5ldyBSdW5uYWJsZVdpdGhNZXNzYWdlSGlzdG9yeSh7XG4qICAgcnVubmFibGU6IGNoYWluLFxuKiAgIGdldE1lc3NhZ2VIaXN0b3J5OiAoc2Vzc2lvbklkKSA9PlxuKiAgICAgbmV3IFVwc3Rhc2hSZWRpc0NoYXRNZXNzYWdlSGlzdG9yeSh7XG4qICAgICAgIHNlc3Npb25JZCxcbiogICAgICAgY29uZmlnOiB7XG4qICAgICAgICAgdXJsOiBwcm9jZXNzLmVudi5VUFNUQVNIX1JFRElTX1JFU1RfVVJMISxcbiogICAgICAgICB0b2tlbjogcHJvY2Vzcy5lbnYuVVBTVEFTSF9SRURJU19SRVNUX1RPS0VOISxcbiogICAgICAgfSxcbiogICAgIH0pLFxuKiAgIGlucHV0TWVzc2FnZXNLZXk6IFwicXVlc3Rpb25cIixcbiogICBoaXN0b3J5TWVzc2FnZXNLZXk6IFwiaGlzdG9yeVwiLFxuKiB9KTtcbipcbiogY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hhaW5XaXRoSGlzdG9yeS5pbnZva2UoXG4qICAge1xuKiAgICAgYWJpbGl0eTogXCJtYXRoXCIsXG4qICAgICBxdWVzdGlvbjogXCJXaGF0IGRvZXMgY29zaW5lIG1lYW4/XCIsXG4qICAgfSxcbiogICB7XG4qICAgICBjb25maWd1cmFibGU6IHtcbiogICAgICAgc2Vzc2lvbklkOiBcInNvbWVfc3RyaW5nX2lkZW50aWZ5aW5nX2FfdXNlclwiLFxuKiAgICAgfSxcbiogICB9XG4qICk7XG4qXG4qIGNvbnN0IHJlc3VsdDIgPSBhd2FpdCBjaGFpbldpdGhIaXN0b3J5Lmludm9rZShcbiogICB7XG4qICAgICBhYmlsaXR5OiBcIm1hdGhcIixcbiogICAgIHF1ZXN0aW9uOiBcIldoYXQncyBpdHMgaW52ZXJzZT9cIixcbiogICB9LFxuKiAgIHtcbiogICAgIGNvbmZpZ3VyYWJsZToge1xuKiAgICAgICBzZXNzaW9uSWQ6IFwic29tZV9zdHJpbmdfaWRlbnRpZnlpbmdfYV91c2VyXCIsXG4qICAgICB9LFxuKiAgIH1cbiogKTtcbiogYGBgXG4qL1xudmFyIFJ1bm5hYmxlV2l0aE1lc3NhZ2VIaXN0b3J5ID0gY2xhc3MgZXh0ZW5kcyBSdW5uYWJsZUJpbmRpbmcge1xuXHRydW5uYWJsZTtcblx0aW5wdXRNZXNzYWdlc0tleTtcblx0b3V0cHV0TWVzc2FnZXNLZXk7XG5cdGhpc3RvcnlNZXNzYWdlc0tleTtcblx0Z2V0TWVzc2FnZUhpc3Rvcnk7XG5cdGNvbnN0cnVjdG9yKGZpZWxkcykge1xuXHRcdGxldCBoaXN0b3J5Q2hhaW4gPSBSdW5uYWJsZUxhbWJkYS5mcm9tKChpbnB1dCwgb3B0aW9ucykgPT4gdGhpcy5fZW50ZXJIaXN0b3J5KGlucHV0LCBvcHRpb25zID8/IHt9KSkud2l0aENvbmZpZyh7IHJ1bk5hbWU6IFwibG9hZEhpc3RvcnlcIiB9KTtcblx0XHRjb25zdCBtZXNzYWdlc0tleSA9IGZpZWxkcy5oaXN0b3J5TWVzc2FnZXNLZXkgPz8gZmllbGRzLmlucHV0TWVzc2FnZXNLZXk7XG5cdFx0aWYgKG1lc3NhZ2VzS2V5KSBoaXN0b3J5Q2hhaW4gPSBSdW5uYWJsZVBhc3N0aHJvdWdoLmFzc2lnbih7IFttZXNzYWdlc0tleV06IGhpc3RvcnlDaGFpbiB9KS53aXRoQ29uZmlnKHsgcnVuTmFtZTogXCJpbnNlcnRIaXN0b3J5XCIgfSk7XG5cdFx0Y29uc3QgYm91bmQgPSBoaXN0b3J5Q2hhaW4ucGlwZShmaWVsZHMucnVubmFibGUud2l0aExpc3RlbmVycyh7IG9uRW5kOiAocnVuLCBjb25maWckMSkgPT4gdGhpcy5fZXhpdEhpc3RvcnkocnVuLCBjb25maWckMSA/PyB7fSkgfSkpLndpdGhDb25maWcoeyBydW5OYW1lOiBcIlJ1bm5hYmxlV2l0aE1lc3NhZ2VIaXN0b3J5XCIgfSk7XG5cdFx0Y29uc3QgY29uZmlnID0gZmllbGRzLmNvbmZpZyA/PyB7fTtcblx0XHRzdXBlcih7XG5cdFx0XHQuLi5maWVsZHMsXG5cdFx0XHRjb25maWcsXG5cdFx0XHRib3VuZFxuXHRcdH0pO1xuXHRcdHRoaXMucnVubmFibGUgPSBmaWVsZHMucnVubmFibGU7XG5cdFx0dGhpcy5nZXRNZXNzYWdlSGlzdG9yeSA9IGZpZWxkcy5nZXRNZXNzYWdlSGlzdG9yeTtcblx0XHR0aGlzLmlucHV0TWVzc2FnZXNLZXkgPSBmaWVsZHMuaW5wdXRNZXNzYWdlc0tleTtcblx0XHR0aGlzLm91dHB1dE1lc3NhZ2VzS2V5ID0gZmllbGRzLm91dHB1dE1lc3NhZ2VzS2V5O1xuXHRcdHRoaXMuaGlzdG9yeU1lc3NhZ2VzS2V5ID0gZmllbGRzLmhpc3RvcnlNZXNzYWdlc0tleTtcblx0fVxuXHRfZ2V0SW5wdXRNZXNzYWdlcyhpbnB1dFZhbHVlKSB7XG5cdFx0bGV0IHBhcnNlZElucHV0VmFsdWU7XG5cdFx0aWYgKHR5cGVvZiBpbnB1dFZhbHVlID09PSBcIm9iamVjdFwiICYmICFBcnJheS5pc0FycmF5KGlucHV0VmFsdWUpICYmICFpc0Jhc2VNZXNzYWdlKGlucHV0VmFsdWUpKSB7XG5cdFx0XHRsZXQga2V5O1xuXHRcdFx0aWYgKHRoaXMuaW5wdXRNZXNzYWdlc0tleSkga2V5ID0gdGhpcy5pbnB1dE1lc3NhZ2VzS2V5O1xuXHRcdFx0ZWxzZSBpZiAoT2JqZWN0LmtleXMoaW5wdXRWYWx1ZSkubGVuZ3RoID09PSAxKSBrZXkgPSBPYmplY3Qua2V5cyhpbnB1dFZhbHVlKVswXTtcblx0XHRcdGVsc2Uga2V5ID0gXCJpbnB1dFwiO1xuXHRcdFx0aWYgKEFycmF5LmlzQXJyYXkoaW5wdXRWYWx1ZVtrZXldKSAmJiBBcnJheS5pc0FycmF5KGlucHV0VmFsdWVba2V5XVswXSkpIHBhcnNlZElucHV0VmFsdWUgPSBpbnB1dFZhbHVlW2tleV1bMF07XG5cdFx0XHRlbHNlIHBhcnNlZElucHV0VmFsdWUgPSBpbnB1dFZhbHVlW2tleV07XG5cdFx0fSBlbHNlIHBhcnNlZElucHV0VmFsdWUgPSBpbnB1dFZhbHVlO1xuXHRcdGlmICh0eXBlb2YgcGFyc2VkSW5wdXRWYWx1ZSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIFtuZXcgSHVtYW5NZXNzYWdlKHBhcnNlZElucHV0VmFsdWUpXTtcblx0XHRlbHNlIGlmIChBcnJheS5pc0FycmF5KHBhcnNlZElucHV0VmFsdWUpKSByZXR1cm4gcGFyc2VkSW5wdXRWYWx1ZTtcblx0XHRlbHNlIGlmIChpc0Jhc2VNZXNzYWdlKHBhcnNlZElucHV0VmFsdWUpKSByZXR1cm4gW3BhcnNlZElucHV0VmFsdWVdO1xuXHRcdGVsc2UgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBhIHN0cmluZywgQmFzZU1lc3NhZ2UsIG9yIGFycmF5IG9mIEJhc2VNZXNzYWdlcy5cXG5Hb3QgJHtKU09OLnN0cmluZ2lmeShwYXJzZWRJbnB1dFZhbHVlLCBudWxsLCAyKX1gKTtcblx0fVxuXHRfZ2V0T3V0cHV0TWVzc2FnZXMob3V0cHV0VmFsdWUpIHtcblx0XHRsZXQgcGFyc2VkT3V0cHV0VmFsdWU7XG5cdFx0aWYgKCFBcnJheS5pc0FycmF5KG91dHB1dFZhbHVlKSAmJiAhaXNCYXNlTWVzc2FnZShvdXRwdXRWYWx1ZSkgJiYgdHlwZW9mIG91dHB1dFZhbHVlICE9PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRsZXQga2V5O1xuXHRcdFx0aWYgKHRoaXMub3V0cHV0TWVzc2FnZXNLZXkgIT09IHZvaWQgMCkga2V5ID0gdGhpcy5vdXRwdXRNZXNzYWdlc0tleTtcblx0XHRcdGVsc2UgaWYgKE9iamVjdC5rZXlzKG91dHB1dFZhbHVlKS5sZW5ndGggPT09IDEpIGtleSA9IE9iamVjdC5rZXlzKG91dHB1dFZhbHVlKVswXTtcblx0XHRcdGVsc2Uga2V5ID0gXCJvdXRwdXRcIjtcblx0XHRcdGlmIChvdXRwdXRWYWx1ZS5nZW5lcmF0aW9ucyAhPT0gdm9pZCAwKSBwYXJzZWRPdXRwdXRWYWx1ZSA9IG91dHB1dFZhbHVlLmdlbmVyYXRpb25zWzBdWzBdLm1lc3NhZ2U7XG5cdFx0XHRlbHNlIHBhcnNlZE91dHB1dFZhbHVlID0gb3V0cHV0VmFsdWVba2V5XTtcblx0XHR9IGVsc2UgcGFyc2VkT3V0cHV0VmFsdWUgPSBvdXRwdXRWYWx1ZTtcblx0XHRpZiAodHlwZW9mIHBhcnNlZE91dHB1dFZhbHVlID09PSBcInN0cmluZ1wiKSByZXR1cm4gW25ldyBBSU1lc3NhZ2UocGFyc2VkT3V0cHV0VmFsdWUpXTtcblx0XHRlbHNlIGlmIChBcnJheS5pc0FycmF5KHBhcnNlZE91dHB1dFZhbHVlKSkgcmV0dXJuIHBhcnNlZE91dHB1dFZhbHVlO1xuXHRcdGVsc2UgaWYgKGlzQmFzZU1lc3NhZ2UocGFyc2VkT3V0cHV0VmFsdWUpKSByZXR1cm4gW3BhcnNlZE91dHB1dFZhbHVlXTtcblx0XHRlbHNlIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgYSBzdHJpbmcsIEJhc2VNZXNzYWdlLCBvciBhcnJheSBvZiBCYXNlTWVzc2FnZXMuIFJlY2VpdmVkOiAke0pTT04uc3RyaW5naWZ5KHBhcnNlZE91dHB1dFZhbHVlLCBudWxsLCAyKX1gKTtcblx0fVxuXHRhc3luYyBfZW50ZXJIaXN0b3J5KGlucHV0LCBrd2FyZ3MpIHtcblx0XHRjb25zdCBoaXN0b3J5ID0ga3dhcmdzPy5jb25maWd1cmFibGU/Lm1lc3NhZ2VIaXN0b3J5O1xuXHRcdGNvbnN0IG1lc3NhZ2VzID0gYXdhaXQgaGlzdG9yeS5nZXRNZXNzYWdlcygpO1xuXHRcdGlmICh0aGlzLmhpc3RvcnlNZXNzYWdlc0tleSA9PT0gdm9pZCAwKSByZXR1cm4gbWVzc2FnZXMuY29uY2F0KHRoaXMuX2dldElucHV0TWVzc2FnZXMoaW5wdXQpKTtcblx0XHRyZXR1cm4gbWVzc2FnZXM7XG5cdH1cblx0YXN5bmMgX2V4aXRIaXN0b3J5KHJ1biwgY29uZmlnKSB7XG5cdFx0Y29uc3QgaGlzdG9yeSA9IGNvbmZpZy5jb25maWd1cmFibGU/Lm1lc3NhZ2VIaXN0b3J5O1xuXHRcdGxldCBpbnB1dHM7XG5cdFx0aWYgKEFycmF5LmlzQXJyYXkocnVuLmlucHV0cykgJiYgQXJyYXkuaXNBcnJheShydW4uaW5wdXRzWzBdKSkgaW5wdXRzID0gcnVuLmlucHV0c1swXTtcblx0XHRlbHNlIGlucHV0cyA9IHJ1bi5pbnB1dHM7XG5cdFx0bGV0IGlucHV0TWVzc2FnZXMgPSB0aGlzLl9nZXRJbnB1dE1lc3NhZ2VzKGlucHV0cyk7XG5cdFx0aWYgKHRoaXMuaGlzdG9yeU1lc3NhZ2VzS2V5ID09PSB2b2lkIDApIHtcblx0XHRcdGNvbnN0IGV4aXN0aW5nTWVzc2FnZXMgPSBhd2FpdCBoaXN0b3J5LmdldE1lc3NhZ2VzKCk7XG5cdFx0XHRpbnB1dE1lc3NhZ2VzID0gaW5wdXRNZXNzYWdlcy5zbGljZShleGlzdGluZ01lc3NhZ2VzLmxlbmd0aCk7XG5cdFx0fVxuXHRcdGNvbnN0IG91dHB1dFZhbHVlID0gcnVuLm91dHB1dHM7XG5cdFx0aWYgKCFvdXRwdXRWYWx1ZSkgdGhyb3cgbmV3IEVycm9yKGBPdXRwdXQgdmFsdWVzIGZyb20gJ1J1bicgdW5kZWZpbmVkLiBSdW46ICR7SlNPTi5zdHJpbmdpZnkocnVuLCBudWxsLCAyKX1gKTtcblx0XHRjb25zdCBvdXRwdXRNZXNzYWdlcyA9IHRoaXMuX2dldE91dHB1dE1lc3NhZ2VzKG91dHB1dFZhbHVlKTtcblx0XHRhd2FpdCBoaXN0b3J5LmFkZE1lc3NhZ2VzKFsuLi5pbnB1dE1lc3NhZ2VzLCAuLi5vdXRwdXRNZXNzYWdlc10pO1xuXHR9XG5cdGFzeW5jIF9tZXJnZUNvbmZpZyguLi5jb25maWdzKSB7XG5cdFx0Y29uc3QgY29uZmlnID0gYXdhaXQgc3VwZXIuX21lcmdlQ29uZmlnKC4uLmNvbmZpZ3MpO1xuXHRcdGlmICghY29uZmlnLmNvbmZpZ3VyYWJsZSB8fCAhY29uZmlnLmNvbmZpZ3VyYWJsZS5zZXNzaW9uSWQpIHtcblx0XHRcdGNvbnN0IGV4YW1wbGVJbnB1dCA9IHsgW3RoaXMuaW5wdXRNZXNzYWdlc0tleSA/PyBcImlucHV0XCJdOiBcImZvb1wiIH07XG5cdFx0XHRjb25zdCBleGFtcGxlQ29uZmlnID0geyBjb25maWd1cmFibGU6IHsgc2Vzc2lvbklkOiBcIjEyM1wiIH0gfTtcblx0XHRcdHRocm93IG5ldyBFcnJvcihgc2Vzc2lvbklkIGlzIHJlcXVpcmVkLiBQYXNzIGl0IGluIGFzIHBhcnQgb2YgdGhlIGNvbmZpZyBhcmd1bWVudCB0byAuaW52b2tlKCkgb3IgLnN0cmVhbSgpXFxuZWcuIGNoYWluLmludm9rZSgke0pTT04uc3RyaW5naWZ5KGV4YW1wbGVJbnB1dCl9LCAke0pTT04uc3RyaW5naWZ5KGV4YW1wbGVDb25maWcpfSlgKTtcblx0XHR9XG5cdFx0Y29uc3QgeyBzZXNzaW9uSWQgfSA9IGNvbmZpZy5jb25maWd1cmFibGU7XG5cdFx0Y29uZmlnLmNvbmZpZ3VyYWJsZS5tZXNzYWdlSGlzdG9yeSA9IGF3YWl0IHRoaXMuZ2V0TWVzc2FnZUhpc3Rvcnkoc2Vzc2lvbklkKTtcblx0XHRyZXR1cm4gY29uZmlnO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IFJ1bm5hYmxlV2l0aE1lc3NhZ2VIaXN0b3J5IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oaXN0b3J5LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/runnables/history.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/runnables/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RouterRunnable: () => (/* reexport safe */ _router_js__WEBPACK_IMPORTED_MODULE_5__.RouterRunnable),\n/* harmony export */   Runnable: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_3__.Runnable),\n/* harmony export */   RunnableAssign: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_3__.RunnableAssign),\n/* harmony export */   RunnableBinding: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_3__.RunnableBinding),\n/* harmony export */   RunnableBranch: () => (/* reexport safe */ _branch_js__WEBPACK_IMPORTED_MODULE_6__.RunnableBranch),\n/* harmony export */   RunnableEach: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_3__.RunnableEach),\n/* harmony export */   RunnableLambda: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_3__.RunnableLambda),\n/* harmony export */   RunnableMap: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_3__.RunnableMap),\n/* harmony export */   RunnableParallel: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_3__.RunnableParallel),\n/* harmony export */   RunnablePassthrough: () => (/* reexport safe */ _passthrough_js__WEBPACK_IMPORTED_MODULE_4__.RunnablePassthrough),\n/* harmony export */   RunnablePick: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_3__.RunnablePick),\n/* harmony export */   RunnableRetry: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_3__.RunnableRetry),\n/* harmony export */   RunnableSequence: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_3__.RunnableSequence),\n/* harmony export */   RunnableToolLike: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_3__.RunnableToolLike),\n/* harmony export */   RunnableWithFallbacks: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_3__.RunnableWithFallbacks),\n/* harmony export */   RunnableWithMessageHistory: () => (/* reexport safe */ _history_js__WEBPACK_IMPORTED_MODULE_7__.RunnableWithMessageHistory),\n/* harmony export */   _coerceToRunnable: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_3__._coerceToRunnable),\n/* harmony export */   ensureConfig: () => (/* reexport safe */ _config_js__WEBPACK_IMPORTED_MODULE_1__.ensureConfig),\n/* harmony export */   getCallbackManagerForConfig: () => (/* reexport safe */ _config_js__WEBPACK_IMPORTED_MODULE_1__.getCallbackManagerForConfig),\n/* harmony export */   mergeConfigs: () => (/* reexport safe */ _config_js__WEBPACK_IMPORTED_MODULE_1__.mergeConfigs),\n/* harmony export */   patchConfig: () => (/* reexport safe */ _config_js__WEBPACK_IMPORTED_MODULE_1__.patchConfig),\n/* harmony export */   pickRunnableConfigKeys: () => (/* reexport safe */ _config_js__WEBPACK_IMPORTED_MODULE_1__.pickRunnableConfigKeys),\n/* harmony export */   raceWithSignal: () => (/* reexport safe */ _utils_signal_js__WEBPACK_IMPORTED_MODULE_2__.raceWithSignal),\n/* harmony export */   runnables_exports: () => (/* binding */ runnables_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/config.js\");\n/* harmony import */ var _utils_signal_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/signal.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/signal.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _passthrough_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./passthrough.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/passthrough.js\");\n/* harmony import */ var _router_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./router.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/router.js\");\n/* harmony import */ var _branch_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./branch.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/branch.js\");\n/* harmony import */ var _history_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./history.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/history.js\");\n\n\n\n\n\n\n\n\n\n//#region src/runnables/index.ts\nvar runnables_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(runnables_exports, {\n\tRouterRunnable: () => _router_js__WEBPACK_IMPORTED_MODULE_5__.RouterRunnable,\n\tRunnable: () => _base_js__WEBPACK_IMPORTED_MODULE_3__.Runnable,\n\tRunnableAssign: () => _base_js__WEBPACK_IMPORTED_MODULE_3__.RunnableAssign,\n\tRunnableBinding: () => _base_js__WEBPACK_IMPORTED_MODULE_3__.RunnableBinding,\n\tRunnableBranch: () => _branch_js__WEBPACK_IMPORTED_MODULE_6__.RunnableBranch,\n\tRunnableEach: () => _base_js__WEBPACK_IMPORTED_MODULE_3__.RunnableEach,\n\tRunnableLambda: () => _base_js__WEBPACK_IMPORTED_MODULE_3__.RunnableLambda,\n\tRunnableMap: () => _base_js__WEBPACK_IMPORTED_MODULE_3__.RunnableMap,\n\tRunnableParallel: () => _base_js__WEBPACK_IMPORTED_MODULE_3__.RunnableParallel,\n\tRunnablePassthrough: () => _passthrough_js__WEBPACK_IMPORTED_MODULE_4__.RunnablePassthrough,\n\tRunnablePick: () => _base_js__WEBPACK_IMPORTED_MODULE_3__.RunnablePick,\n\tRunnableRetry: () => _base_js__WEBPACK_IMPORTED_MODULE_3__.RunnableRetry,\n\tRunnableSequence: () => _base_js__WEBPACK_IMPORTED_MODULE_3__.RunnableSequence,\n\tRunnableToolLike: () => _base_js__WEBPACK_IMPORTED_MODULE_3__.RunnableToolLike,\n\tRunnableWithFallbacks: () => _base_js__WEBPACK_IMPORTED_MODULE_3__.RunnableWithFallbacks,\n\tRunnableWithMessageHistory: () => _history_js__WEBPACK_IMPORTED_MODULE_7__.RunnableWithMessageHistory,\n\t_coerceToRunnable: () => _base_js__WEBPACK_IMPORTED_MODULE_3__._coerceToRunnable,\n\tensureConfig: () => _config_js__WEBPACK_IMPORTED_MODULE_1__.ensureConfig,\n\tgetCallbackManagerForConfig: () => _config_js__WEBPACK_IMPORTED_MODULE_1__.getCallbackManagerForConfig,\n\tmergeConfigs: () => _config_js__WEBPACK_IMPORTED_MODULE_1__.mergeConfigs,\n\tpatchConfig: () => _config_js__WEBPACK_IMPORTED_MODULE_1__.patchConfig,\n\tpickRunnableConfigKeys: () => _config_js__WEBPACK_IMPORTED_MODULE_1__.pickRunnableConfigKeys,\n\traceWithSignal: () => _utils_signal_js__WEBPACK_IMPORTED_MODULE_2__.raceWithSignal\n});\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTJEO0FBQ2dFO0FBQ3ZFO0FBQzBMO0FBQ3ZMO0FBQ1Y7QUFDQTtBQUNhOztBQUUxRDtBQUNBO0FBQ0Esc0VBQVE7QUFDUix1QkFBdUIsc0RBQWM7QUFDckMsaUJBQWlCLDhDQUFRO0FBQ3pCLHVCQUF1QixvREFBYztBQUNyQyx3QkFBd0IscURBQWU7QUFDdkMsdUJBQXVCLHNEQUFjO0FBQ3JDLHFCQUFxQixrREFBWTtBQUNqQyx1QkFBdUIsb0RBQWM7QUFDckMsb0JBQW9CLGlEQUFXO0FBQy9CLHlCQUF5QixzREFBZ0I7QUFDekMsNEJBQTRCLGdFQUFtQjtBQUMvQyxxQkFBcUIsa0RBQVk7QUFDakMsc0JBQXNCLG1EQUFhO0FBQ25DLHlCQUF5QixzREFBZ0I7QUFDekMseUJBQXlCLHNEQUFnQjtBQUN6Qyw4QkFBOEIsMkRBQXFCO0FBQ25ELG1DQUFtQyxtRUFBMEI7QUFDN0QsMEJBQTBCLHVEQUFpQjtBQUMzQyxxQkFBcUIsb0RBQVk7QUFDakMsb0NBQW9DLG1FQUEyQjtBQUMvRCxxQkFBcUIsb0RBQVk7QUFDakMsb0JBQW9CLG1EQUFXO0FBQy9CLCtCQUErQiw4REFBc0I7QUFDckQsdUJBQXVCLDREQUFjO0FBQ3JDLENBQUM7O0FBRUQ7QUFDK2E7QUFDL2EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19leHBvcnQgfSBmcm9tIFwiLi4vX3ZpcnR1YWwvcm9sbGRvd25fcnVudGltZS5qc1wiO1xuaW1wb3J0IHsgZW5zdXJlQ29uZmlnLCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcsIG1lcmdlQ29uZmlncywgcGF0Y2hDb25maWcsIHBpY2tSdW5uYWJsZUNvbmZpZ0tleXMgfSBmcm9tIFwiLi9jb25maWcuanNcIjtcbmltcG9ydCB7IHJhY2VXaXRoU2lnbmFsIH0gZnJvbSBcIi4uL3V0aWxzL3NpZ25hbC5qc1wiO1xuaW1wb3J0IHsgUnVubmFibGUsIFJ1bm5hYmxlQXNzaWduLCBSdW5uYWJsZUJpbmRpbmcsIFJ1bm5hYmxlRWFjaCwgUnVubmFibGVMYW1iZGEsIFJ1bm5hYmxlTWFwLCBSdW5uYWJsZVBhcmFsbGVsLCBSdW5uYWJsZVBpY2ssIFJ1bm5hYmxlUmV0cnksIFJ1bm5hYmxlU2VxdWVuY2UsIFJ1bm5hYmxlVG9vbExpa2UsIFJ1bm5hYmxlV2l0aEZhbGxiYWNrcywgX2NvZXJjZVRvUnVubmFibGUgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBSdW5uYWJsZVBhc3N0aHJvdWdoIH0gZnJvbSBcIi4vcGFzc3Rocm91Z2guanNcIjtcbmltcG9ydCB7IFJvdXRlclJ1bm5hYmxlIH0gZnJvbSBcIi4vcm91dGVyLmpzXCI7XG5pbXBvcnQgeyBSdW5uYWJsZUJyYW5jaCB9IGZyb20gXCIuL2JyYW5jaC5qc1wiO1xuaW1wb3J0IHsgUnVubmFibGVXaXRoTWVzc2FnZUhpc3RvcnkgfSBmcm9tIFwiLi9oaXN0b3J5LmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcnVubmFibGVzL2luZGV4LnRzXG52YXIgcnVubmFibGVzX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KHJ1bm5hYmxlc19leHBvcnRzLCB7XG5cdFJvdXRlclJ1bm5hYmxlOiAoKSA9PiBSb3V0ZXJSdW5uYWJsZSxcblx0UnVubmFibGU6ICgpID0+IFJ1bm5hYmxlLFxuXHRSdW5uYWJsZUFzc2lnbjogKCkgPT4gUnVubmFibGVBc3NpZ24sXG5cdFJ1bm5hYmxlQmluZGluZzogKCkgPT4gUnVubmFibGVCaW5kaW5nLFxuXHRSdW5uYWJsZUJyYW5jaDogKCkgPT4gUnVubmFibGVCcmFuY2gsXG5cdFJ1bm5hYmxlRWFjaDogKCkgPT4gUnVubmFibGVFYWNoLFxuXHRSdW5uYWJsZUxhbWJkYTogKCkgPT4gUnVubmFibGVMYW1iZGEsXG5cdFJ1bm5hYmxlTWFwOiAoKSA9PiBSdW5uYWJsZU1hcCxcblx0UnVubmFibGVQYXJhbGxlbDogKCkgPT4gUnVubmFibGVQYXJhbGxlbCxcblx0UnVubmFibGVQYXNzdGhyb3VnaDogKCkgPT4gUnVubmFibGVQYXNzdGhyb3VnaCxcblx0UnVubmFibGVQaWNrOiAoKSA9PiBSdW5uYWJsZVBpY2ssXG5cdFJ1bm5hYmxlUmV0cnk6ICgpID0+IFJ1bm5hYmxlUmV0cnksXG5cdFJ1bm5hYmxlU2VxdWVuY2U6ICgpID0+IFJ1bm5hYmxlU2VxdWVuY2UsXG5cdFJ1bm5hYmxlVG9vbExpa2U6ICgpID0+IFJ1bm5hYmxlVG9vbExpa2UsXG5cdFJ1bm5hYmxlV2l0aEZhbGxiYWNrczogKCkgPT4gUnVubmFibGVXaXRoRmFsbGJhY2tzLFxuXHRSdW5uYWJsZVdpdGhNZXNzYWdlSGlzdG9yeTogKCkgPT4gUnVubmFibGVXaXRoTWVzc2FnZUhpc3RvcnksXG5cdF9jb2VyY2VUb1J1bm5hYmxlOiAoKSA9PiBfY29lcmNlVG9SdW5uYWJsZSxcblx0ZW5zdXJlQ29uZmlnOiAoKSA9PiBlbnN1cmVDb25maWcsXG5cdGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZzogKCkgPT4gZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnLFxuXHRtZXJnZUNvbmZpZ3M6ICgpID0+IG1lcmdlQ29uZmlncyxcblx0cGF0Y2hDb25maWc6ICgpID0+IHBhdGNoQ29uZmlnLFxuXHRwaWNrUnVubmFibGVDb25maWdLZXlzOiAoKSA9PiBwaWNrUnVubmFibGVDb25maWdLZXlzLFxuXHRyYWNlV2l0aFNpZ25hbDogKCkgPT4gcmFjZVdpdGhTaWduYWxcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IFJvdXRlclJ1bm5hYmxlLCBSdW5uYWJsZSwgUnVubmFibGVBc3NpZ24sIFJ1bm5hYmxlQmluZGluZywgUnVubmFibGVCcmFuY2gsIFJ1bm5hYmxlRWFjaCwgUnVubmFibGVMYW1iZGEsIFJ1bm5hYmxlTWFwLCBSdW5uYWJsZVBhcmFsbGVsLCBSdW5uYWJsZVBhc3N0aHJvdWdoLCBSdW5uYWJsZVBpY2ssIFJ1bm5hYmxlUmV0cnksIFJ1bm5hYmxlU2VxdWVuY2UsIFJ1bm5hYmxlVG9vbExpa2UsIFJ1bm5hYmxlV2l0aEZhbGxiYWNrcywgUnVubmFibGVXaXRoTWVzc2FnZUhpc3RvcnksIF9jb2VyY2VUb1J1bm5hYmxlLCBlbnN1cmVDb25maWcsIGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZywgbWVyZ2VDb25maWdzLCBwYXRjaENvbmZpZywgcGlja1J1bm5hYmxlQ29uZmlnS2V5cywgcmFjZVdpdGhTaWduYWwsIHJ1bm5hYmxlc19leHBvcnRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/runnables/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/runnables/iter.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/iter.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   consumeAsyncIterableInContext: () => (/* binding */ consumeAsyncIterableInContext),\n/* harmony export */   consumeIteratorInContext: () => (/* binding */ consumeIteratorInContext),\n/* harmony export */   isAsyncIterable: () => (/* binding */ isAsyncIterable),\n/* harmony export */   isIterableIterator: () => (/* binding */ isIterableIterator),\n/* harmony export */   isIterator: () => (/* binding */ isIterator)\n/* harmony export */ });\n/* harmony import */ var _singletons_async_local_storage_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../singletons/async_local_storage/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/singletons/async_local_storage/index.js\");\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../singletons/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/singletons/index.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./config.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/config.js\");\n\n\n\n\n//#region src/runnables/iter.ts\nfunction isIterableIterator(thing) {\n\treturn typeof thing === \"object\" && thing !== null && typeof thing[Symbol.iterator] === \"function\" && typeof thing.next === \"function\";\n}\nconst isIterator = (x) => x != null && typeof x === \"object\" && \"next\" in x && typeof x.next === \"function\";\nfunction isAsyncIterable(thing) {\n\treturn typeof thing === \"object\" && thing !== null && typeof thing[Symbol.asyncIterator] === \"function\";\n}\nfunction* consumeIteratorInContext(context, iter) {\n\twhile (true) {\n\t\tconst { value, done } = _singletons_async_local_storage_index_js__WEBPACK_IMPORTED_MODULE_0__.AsyncLocalStorageProviderSingleton.runWithConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_2__.pickRunnableConfigKeys)(context), iter.next.bind(iter), true);\n\t\tif (done) break;\n\t\telse yield value;\n\t}\n}\nasync function* consumeAsyncIterableInContext(context, iter) {\n\tconst iterator = iter[Symbol.asyncIterator]();\n\twhile (true) {\n\t\tconst { value, done } = await _singletons_async_local_storage_index_js__WEBPACK_IMPORTED_MODULE_0__.AsyncLocalStorageProviderSingleton.runWithConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_2__.pickRunnableConfigKeys)(context), iterator.next.bind(iter), true);\n\t\tif (done) break;\n\t\telse yield value;\n\t}\n}\n\n//#endregion\n\n//# sourceMappingURL=iter.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2l0ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBZ0c7QUFDaEU7QUFDcUI7O0FBRXJEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxjQUFjLEVBQUUsd0dBQWtDLGVBQWUsa0VBQXNCO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxjQUFjLFFBQVEsd0dBQWtDLGVBQWUsa0VBQXNCO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ29IO0FBQ3BIIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2l0ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiB9IGZyb20gXCIuLi9zaW5nbGV0b25zL2FzeW5jX2xvY2FsX3N0b3JhZ2UvaW5kZXguanNcIjtcbmltcG9ydCBcIi4uL3NpbmdsZXRvbnMvaW5kZXguanNcIjtcbmltcG9ydCB7IHBpY2tSdW5uYWJsZUNvbmZpZ0tleXMgfSBmcm9tIFwiLi9jb25maWcuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9ydW5uYWJsZXMvaXRlci50c1xuZnVuY3Rpb24gaXNJdGVyYWJsZUl0ZXJhdG9yKHRoaW5nKSB7XG5cdHJldHVybiB0eXBlb2YgdGhpbmcgPT09IFwib2JqZWN0XCIgJiYgdGhpbmcgIT09IG51bGwgJiYgdHlwZW9mIHRoaW5nW1N5bWJvbC5pdGVyYXRvcl0gPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgdGhpbmcubmV4dCA9PT0gXCJmdW5jdGlvblwiO1xufVxuY29uc3QgaXNJdGVyYXRvciA9ICh4KSA9PiB4ICE9IG51bGwgJiYgdHlwZW9mIHggPT09IFwib2JqZWN0XCIgJiYgXCJuZXh0XCIgaW4geCAmJiB0eXBlb2YgeC5uZXh0ID09PSBcImZ1bmN0aW9uXCI7XG5mdW5jdGlvbiBpc0FzeW5jSXRlcmFibGUodGhpbmcpIHtcblx0cmV0dXJuIHR5cGVvZiB0aGluZyA9PT0gXCJvYmplY3RcIiAmJiB0aGluZyAhPT0gbnVsbCAmJiB0eXBlb2YgdGhpbmdbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID09PSBcImZ1bmN0aW9uXCI7XG59XG5mdW5jdGlvbiogY29uc3VtZUl0ZXJhdG9ySW5Db250ZXh0KGNvbnRleHQsIGl0ZXIpIHtcblx0d2hpbGUgKHRydWUpIHtcblx0XHRjb25zdCB7IHZhbHVlLCBkb25lIH0gPSBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLnJ1bldpdGhDb25maWcocGlja1J1bm5hYmxlQ29uZmlnS2V5cyhjb250ZXh0KSwgaXRlci5uZXh0LmJpbmQoaXRlciksIHRydWUpO1xuXHRcdGlmIChkb25lKSBicmVhaztcblx0XHRlbHNlIHlpZWxkIHZhbHVlO1xuXHR9XG59XG5hc3luYyBmdW5jdGlvbiogY29uc3VtZUFzeW5jSXRlcmFibGVJbkNvbnRleHQoY29udGV4dCwgaXRlcikge1xuXHRjb25zdCBpdGVyYXRvciA9IGl0ZXJbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCk7XG5cdHdoaWxlICh0cnVlKSB7XG5cdFx0Y29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbi5ydW5XaXRoQ29uZmlnKHBpY2tSdW5uYWJsZUNvbmZpZ0tleXMoY29udGV4dCksIGl0ZXJhdG9yLm5leHQuYmluZChpdGVyKSwgdHJ1ZSk7XG5cdFx0aWYgKGRvbmUpIGJyZWFrO1xuXHRcdGVsc2UgeWllbGQgdmFsdWU7XG5cdH1cbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjb25zdW1lQXN5bmNJdGVyYWJsZUluQ29udGV4dCwgY29uc3VtZUl0ZXJhdG9ySW5Db250ZXh0LCBpc0FzeW5jSXRlcmFibGUsIGlzSXRlcmFibGVJdGVyYXRvciwgaXNJdGVyYXRvciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXRlci5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/runnables/iter.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/runnables/passthrough.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/passthrough.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RunnablePassthrough: () => (/* binding */ RunnablePassthrough)\n/* harmony export */ });\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/config.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/stream.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/base.js\");\n\n\n\n\n//#region src/runnables/passthrough.ts\n/**\n* A runnable to passthrough inputs unchanged or with additional keys.\n*\n* This runnable behaves almost like the identity function, except that it\n* can be configured to add additional keys to the output, if the input is\n* an object.\n*\n* The example below demonstrates how to use `RunnablePassthrough to\n* passthrough the input from the `.invoke()`\n*\n* @example\n* ```typescript\n* const chain = RunnableSequence.from([\n*   {\n*     question: new RunnablePassthrough(),\n*     context: async () => loadContextFromStore(),\n*   },\n*   prompt,\n*   llm,\n*   outputParser,\n* ]);\n* const response = await chain.invoke(\n*   \"I can pass a single string instead of an object since I'm using `RunnablePassthrough`.\"\n* );\n* ```\n*/\nvar RunnablePassthrough = class extends _base_js__WEBPACK_IMPORTED_MODULE_2__.Runnable {\n\tstatic lc_name() {\n\t\treturn \"RunnablePassthrough\";\n\t}\n\tlc_namespace = [\"langchain_core\", \"runnables\"];\n\tlc_serializable = true;\n\tfunc;\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tif (fields) this.func = fields.func;\n\t}\n\tasync invoke(input, options) {\n\t\tconst config = (0,_config_js__WEBPACK_IMPORTED_MODULE_0__.ensureConfig)(options);\n\t\tif (this.func) await this.func(input, config);\n\t\treturn this._callWithConfig((input$1) => Promise.resolve(input$1), input, config);\n\t}\n\tasync *transform(generator, options) {\n\t\tconst config = (0,_config_js__WEBPACK_IMPORTED_MODULE_0__.ensureConfig)(options);\n\t\tlet finalOutput;\n\t\tlet finalOutputSupported = true;\n\t\tfor await (const chunk of this._transformStreamWithConfig(generator, (input) => input, config)) {\n\t\t\tyield chunk;\n\t\t\tif (finalOutputSupported) if (finalOutput === void 0) finalOutput = chunk;\n\t\t\telse try {\n\t\t\t\tfinalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_1__.concat)(finalOutput, chunk);\n\t\t\t} catch {\n\t\t\t\tfinalOutput = void 0;\n\t\t\t\tfinalOutputSupported = false;\n\t\t\t}\n\t\t}\n\t\tif (this.func && finalOutput !== void 0) await this.func(finalOutput, config);\n\t}\n\t/**\n\t* A runnable that assigns key-value pairs to the input.\n\t*\n\t* The example below shows how you could use it with an inline function.\n\t*\n\t* @example\n\t* ```typescript\n\t* const prompt =\n\t*   PromptTemplate.fromTemplate(`Write a SQL query to answer the question using the following schema: {schema}\n\t* Question: {question}\n\t* SQL Query:`);\n\t*\n\t* // The `RunnablePassthrough.assign()` is used here to passthrough the input from the `.invoke()`\n\t* // call (in this example it's the question), along with any inputs passed to the `.assign()` method.\n\t* // In this case, we're passing the schema.\n\t* const sqlQueryGeneratorChain = RunnableSequence.from([\n\t*   RunnablePassthrough.assign({\n\t*     schema: async () => db.getTableInfo(),\n\t*   }),\n\t*   prompt,\n\t*   new ChatOpenAI({ model: \"gpt-4o-mini\" }).withConfig({ stop: [\"\\nSQLResult:\"] }),\n\t*   new StringOutputParser(),\n\t* ]);\n\t* const result = await sqlQueryGeneratorChain.invoke({\n\t*   question: \"How many employees are there?\",\n\t* });\n\t* ```\n\t*/\n\tstatic assign(mapping) {\n\t\treturn new _base_js__WEBPACK_IMPORTED_MODULE_2__.RunnableAssign(new _base_js__WEBPACK_IMPORTED_MODULE_2__.RunnableMap({ steps: mapping }));\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=passthrough.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL3Bhc3N0aHJvdWdoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBMkM7QUFDQztBQUNzQjs7QUFFbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsOENBQVE7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix3REFBWTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix3REFBWTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isd0RBQU07QUFDeEIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3R0FBd0c7QUFDeEcsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxzQkFBc0Isc0JBQXNCLGVBQWUsd0JBQXdCO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLGFBQWEsb0RBQWMsS0FBSyxpREFBVyxHQUFHLGdCQUFnQjtBQUM5RDtBQUNBOztBQUVBO0FBQytCO0FBQy9CIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL3Bhc3N0aHJvdWdoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGVuc3VyZUNvbmZpZyB9IGZyb20gXCIuL2NvbmZpZy5qc1wiO1xuaW1wb3J0IHsgY29uY2F0IH0gZnJvbSBcIi4uL3V0aWxzL3N0cmVhbS5qc1wiO1xuaW1wb3J0IHsgUnVubmFibGUsIFJ1bm5hYmxlQXNzaWduLCBSdW5uYWJsZU1hcCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9ydW5uYWJsZXMvcGFzc3Rocm91Z2gudHNcbi8qKlxuKiBBIHJ1bm5hYmxlIHRvIHBhc3N0aHJvdWdoIGlucHV0cyB1bmNoYW5nZWQgb3Igd2l0aCBhZGRpdGlvbmFsIGtleXMuXG4qXG4qIFRoaXMgcnVubmFibGUgYmVoYXZlcyBhbG1vc3QgbGlrZSB0aGUgaWRlbnRpdHkgZnVuY3Rpb24sIGV4Y2VwdCB0aGF0IGl0XG4qIGNhbiBiZSBjb25maWd1cmVkIHRvIGFkZCBhZGRpdGlvbmFsIGtleXMgdG8gdGhlIG91dHB1dCwgaWYgdGhlIGlucHV0IGlzXG4qIGFuIG9iamVjdC5cbipcbiogVGhlIGV4YW1wbGUgYmVsb3cgZGVtb25zdHJhdGVzIGhvdyB0byB1c2UgYFJ1bm5hYmxlUGFzc3Rocm91Z2ggdG9cbiogcGFzc3Rocm91Z2ggdGhlIGlucHV0IGZyb20gdGhlIGAuaW52b2tlKClgXG4qXG4qIEBleGFtcGxlXG4qIGBgYHR5cGVzY3JpcHRcbiogY29uc3QgY2hhaW4gPSBSdW5uYWJsZVNlcXVlbmNlLmZyb20oW1xuKiAgIHtcbiogICAgIHF1ZXN0aW9uOiBuZXcgUnVubmFibGVQYXNzdGhyb3VnaCgpLFxuKiAgICAgY29udGV4dDogYXN5bmMgKCkgPT4gbG9hZENvbnRleHRGcm9tU3RvcmUoKSxcbiogICB9LFxuKiAgIHByb21wdCxcbiogICBsbG0sXG4qICAgb3V0cHV0UGFyc2VyLFxuKiBdKTtcbiogY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjaGFpbi5pbnZva2UoXG4qICAgXCJJIGNhbiBwYXNzIGEgc2luZ2xlIHN0cmluZyBpbnN0ZWFkIG9mIGFuIG9iamVjdCBzaW5jZSBJJ20gdXNpbmcgYFJ1bm5hYmxlUGFzc3Rocm91Z2hgLlwiXG4qICk7XG4qIGBgYFxuKi9cbnZhciBSdW5uYWJsZVBhc3N0aHJvdWdoID0gY2xhc3MgZXh0ZW5kcyBSdW5uYWJsZSB7XG5cdHN0YXRpYyBsY19uYW1lKCkge1xuXHRcdHJldHVybiBcIlJ1bm5hYmxlUGFzc3Rocm91Z2hcIjtcblx0fVxuXHRsY19uYW1lc3BhY2UgPSBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXTtcblx0bGNfc2VyaWFsaXphYmxlID0gdHJ1ZTtcblx0ZnVuYztcblx0Y29uc3RydWN0b3IoZmllbGRzKSB7XG5cdFx0c3VwZXIoZmllbGRzKTtcblx0XHRpZiAoZmllbGRzKSB0aGlzLmZ1bmMgPSBmaWVsZHMuZnVuYztcblx0fVxuXHRhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcblx0XHRjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG5cdFx0aWYgKHRoaXMuZnVuYykgYXdhaXQgdGhpcy5mdW5jKGlucHV0LCBjb25maWcpO1xuXHRcdHJldHVybiB0aGlzLl9jYWxsV2l0aENvbmZpZygoaW5wdXQkMSkgPT4gUHJvbWlzZS5yZXNvbHZlKGlucHV0JDEpLCBpbnB1dCwgY29uZmlnKTtcblx0fVxuXHRhc3luYyAqdHJhbnNmb3JtKGdlbmVyYXRvciwgb3B0aW9ucykge1xuXHRcdGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcblx0XHRsZXQgZmluYWxPdXRwdXQ7XG5cdFx0bGV0IGZpbmFsT3V0cHV0U3VwcG9ydGVkID0gdHJ1ZTtcblx0XHRmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHRoaXMuX3RyYW5zZm9ybVN0cmVhbVdpdGhDb25maWcoZ2VuZXJhdG9yLCAoaW5wdXQpID0+IGlucHV0LCBjb25maWcpKSB7XG5cdFx0XHR5aWVsZCBjaHVuaztcblx0XHRcdGlmIChmaW5hbE91dHB1dFN1cHBvcnRlZCkgaWYgKGZpbmFsT3V0cHV0ID09PSB2b2lkIDApIGZpbmFsT3V0cHV0ID0gY2h1bms7XG5cdFx0XHRlbHNlIHRyeSB7XG5cdFx0XHRcdGZpbmFsT3V0cHV0ID0gY29uY2F0KGZpbmFsT3V0cHV0LCBjaHVuayk7XG5cdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0ZmluYWxPdXRwdXQgPSB2b2lkIDA7XG5cdFx0XHRcdGZpbmFsT3V0cHV0U3VwcG9ydGVkID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmICh0aGlzLmZ1bmMgJiYgZmluYWxPdXRwdXQgIT09IHZvaWQgMCkgYXdhaXQgdGhpcy5mdW5jKGZpbmFsT3V0cHV0LCBjb25maWcpO1xuXHR9XG5cdC8qKlxuXHQqIEEgcnVubmFibGUgdGhhdCBhc3NpZ25zIGtleS12YWx1ZSBwYWlycyB0byB0aGUgaW5wdXQuXG5cdCpcblx0KiBUaGUgZXhhbXBsZSBiZWxvdyBzaG93cyBob3cgeW91IGNvdWxkIHVzZSBpdCB3aXRoIGFuIGlubGluZSBmdW5jdGlvbi5cblx0KlxuXHQqIEBleGFtcGxlXG5cdCogYGBgdHlwZXNjcmlwdFxuXHQqIGNvbnN0IHByb21wdCA9XG5cdCogICBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoYFdyaXRlIGEgU1FMIHF1ZXJ5IHRvIGFuc3dlciB0aGUgcXVlc3Rpb24gdXNpbmcgdGhlIGZvbGxvd2luZyBzY2hlbWE6IHtzY2hlbWF9XG5cdCogUXVlc3Rpb246IHtxdWVzdGlvbn1cblx0KiBTUUwgUXVlcnk6YCk7XG5cdCpcblx0KiAvLyBUaGUgYFJ1bm5hYmxlUGFzc3Rocm91Z2guYXNzaWduKClgIGlzIHVzZWQgaGVyZSB0byBwYXNzdGhyb3VnaCB0aGUgaW5wdXQgZnJvbSB0aGUgYC5pbnZva2UoKWBcblx0KiAvLyBjYWxsIChpbiB0aGlzIGV4YW1wbGUgaXQncyB0aGUgcXVlc3Rpb24pLCBhbG9uZyB3aXRoIGFueSBpbnB1dHMgcGFzc2VkIHRvIHRoZSBgLmFzc2lnbigpYCBtZXRob2QuXG5cdCogLy8gSW4gdGhpcyBjYXNlLCB3ZSdyZSBwYXNzaW5nIHRoZSBzY2hlbWEuXG5cdCogY29uc3Qgc3FsUXVlcnlHZW5lcmF0b3JDaGFpbiA9IFJ1bm5hYmxlU2VxdWVuY2UuZnJvbShbXG5cdCogICBSdW5uYWJsZVBhc3N0aHJvdWdoLmFzc2lnbih7XG5cdCogICAgIHNjaGVtYTogYXN5bmMgKCkgPT4gZGIuZ2V0VGFibGVJbmZvKCksXG5cdCogICB9KSxcblx0KiAgIHByb21wdCxcblx0KiAgIG5ldyBDaGF0T3BlbkFJKHsgbW9kZWw6IFwiZ3B0LTRvLW1pbmlcIiB9KS53aXRoQ29uZmlnKHsgc3RvcDogW1wiXFxuU1FMUmVzdWx0OlwiXSB9KSxcblx0KiAgIG5ldyBTdHJpbmdPdXRwdXRQYXJzZXIoKSxcblx0KiBdKTtcblx0KiBjb25zdCByZXN1bHQgPSBhd2FpdCBzcWxRdWVyeUdlbmVyYXRvckNoYWluLmludm9rZSh7XG5cdCogICBxdWVzdGlvbjogXCJIb3cgbWFueSBlbXBsb3llZXMgYXJlIHRoZXJlP1wiLFxuXHQqIH0pO1xuXHQqIGBgYFxuXHQqL1xuXHRzdGF0aWMgYXNzaWduKG1hcHBpbmcpIHtcblx0XHRyZXR1cm4gbmV3IFJ1bm5hYmxlQXNzaWduKG5ldyBSdW5uYWJsZU1hcCh7IHN0ZXBzOiBtYXBwaW5nIH0pKTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBSdW5uYWJsZVBhc3N0aHJvdWdoIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXNzdGhyb3VnaC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/runnables/passthrough.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/runnables/router.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/router.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RouterRunnable: () => (/* binding */ RouterRunnable)\n/* harmony export */ });\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/config.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/base.js\");\n\n\n\n//#region src/runnables/router.ts\n/**\n* A runnable that routes to a set of runnables based on Input['key'].\n* Returns the output of the selected runnable.\n* @example\n* ```typescript\n* import { RouterRunnable, RunnableLambda } from \"@langchain/core/runnables\";\n*\n* const router = new RouterRunnable({\n*   runnables: {\n*     toUpperCase: RunnableLambda.from((text: string) => text.toUpperCase()),\n*     reverseText: RunnableLambda.from((text: string) =>\n*       text.split(\"\").reverse().join(\"\")\n*     ),\n*   },\n* });\n*\n* // Invoke the 'reverseText' runnable\n* const result1 = router.invoke({ key: \"reverseText\", input: \"Hello World\" });\n*\n* // \"dlroW olleH\"\n*\n* // Invoke the 'toUpperCase' runnable\n* const result2 = router.invoke({ key: \"toUpperCase\", input: \"Hello World\" });\n*\n* // \"HELLO WORLD\"\n* ```\n*/\nvar RouterRunnable = class extends _base_js__WEBPACK_IMPORTED_MODULE_1__.Runnable {\n\tstatic lc_name() {\n\t\treturn \"RouterRunnable\";\n\t}\n\tlc_namespace = [\"langchain_core\", \"runnables\"];\n\tlc_serializable = true;\n\trunnables;\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.runnables = fields.runnables;\n\t}\n\tasync invoke(input, options) {\n\t\tconst { key, input: actualInput } = input;\n\t\tconst runnable = this.runnables[key];\n\t\tif (runnable === void 0) throw new Error(`No runnable associated with key \"${key}\".`);\n\t\treturn runnable.invoke(actualInput, (0,_config_js__WEBPACK_IMPORTED_MODULE_0__.ensureConfig)(options));\n\t}\n\tasync batch(inputs, options, batchOptions) {\n\t\tconst keys = inputs.map((input) => input.key);\n\t\tconst actualInputs = inputs.map((input) => input.input);\n\t\tconst missingKey = keys.find((key) => this.runnables[key] === void 0);\n\t\tif (missingKey !== void 0) throw new Error(`One or more keys do not have a corresponding runnable.`);\n\t\tconst runnables = keys.map((key) => this.runnables[key]);\n\t\tconst optionsList = this._getOptionsList(options ?? {}, inputs.length);\n\t\tconst maxConcurrency = optionsList[0]?.maxConcurrency ?? batchOptions?.maxConcurrency;\n\t\tconst batchSize = maxConcurrency && maxConcurrency > 0 ? maxConcurrency : inputs.length;\n\t\tconst batchResults = [];\n\t\tfor (let i = 0; i < actualInputs.length; i += batchSize) {\n\t\t\tconst batchPromises = actualInputs.slice(i, i + batchSize).map((actualInput, i$1) => runnables[i$1].invoke(actualInput, optionsList[i$1]));\n\t\t\tconst batchResult = await Promise.all(batchPromises);\n\t\t\tbatchResults.push(batchResult);\n\t\t}\n\t\treturn batchResults.flat();\n\t}\n\tasync stream(input, options) {\n\t\tconst { key, input: actualInput } = input;\n\t\tconst runnable = this.runnables[key];\n\t\tif (runnable === void 0) throw new Error(`No runnable associated with key \"${key}\".`);\n\t\treturn runnable.stream(actualInput, options);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=router.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL3JvdXRlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMkM7QUFDTjs7QUFFckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxpQ0FBaUM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQSxrQ0FBa0MsMENBQTBDO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDBDQUEwQztBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyw4Q0FBUTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSwwQkFBMEI7QUFDcEM7QUFDQSwrRUFBK0UsSUFBSTtBQUNuRixzQ0FBc0Msd0RBQVk7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0Q7QUFDeEQ7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHlCQUF5QjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsMEJBQTBCO0FBQ3BDO0FBQ0EsK0VBQStFLElBQUk7QUFDbkY7QUFDQTtBQUNBOztBQUVBO0FBQzBCO0FBQzFCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL3JvdXRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBlbnN1cmVDb25maWcgfSBmcm9tIFwiLi9jb25maWcuanNcIjtcbmltcG9ydCB7IFJ1bm5hYmxlIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3J1bm5hYmxlcy9yb3V0ZXIudHNcbi8qKlxuKiBBIHJ1bm5hYmxlIHRoYXQgcm91dGVzIHRvIGEgc2V0IG9mIHJ1bm5hYmxlcyBiYXNlZCBvbiBJbnB1dFsna2V5J10uXG4qIFJldHVybnMgdGhlIG91dHB1dCBvZiB0aGUgc2VsZWN0ZWQgcnVubmFibGUuXG4qIEBleGFtcGxlXG4qIGBgYHR5cGVzY3JpcHRcbiogaW1wb3J0IHsgUm91dGVyUnVubmFibGUsIFJ1bm5hYmxlTGFtYmRhIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9ydW5uYWJsZXNcIjtcbipcbiogY29uc3Qgcm91dGVyID0gbmV3IFJvdXRlclJ1bm5hYmxlKHtcbiogICBydW5uYWJsZXM6IHtcbiogICAgIHRvVXBwZXJDYXNlOiBSdW5uYWJsZUxhbWJkYS5mcm9tKCh0ZXh0OiBzdHJpbmcpID0+IHRleHQudG9VcHBlckNhc2UoKSksXG4qICAgICByZXZlcnNlVGV4dDogUnVubmFibGVMYW1iZGEuZnJvbSgodGV4dDogc3RyaW5nKSA9PlxuKiAgICAgICB0ZXh0LnNwbGl0KFwiXCIpLnJldmVyc2UoKS5qb2luKFwiXCIpXG4qICAgICApLFxuKiAgIH0sXG4qIH0pO1xuKlxuKiAvLyBJbnZva2UgdGhlICdyZXZlcnNlVGV4dCcgcnVubmFibGVcbiogY29uc3QgcmVzdWx0MSA9IHJvdXRlci5pbnZva2UoeyBrZXk6IFwicmV2ZXJzZVRleHRcIiwgaW5wdXQ6IFwiSGVsbG8gV29ybGRcIiB9KTtcbipcbiogLy8gXCJkbHJvVyBvbGxlSFwiXG4qXG4qIC8vIEludm9rZSB0aGUgJ3RvVXBwZXJDYXNlJyBydW5uYWJsZVxuKiBjb25zdCByZXN1bHQyID0gcm91dGVyLmludm9rZSh7IGtleTogXCJ0b1VwcGVyQ2FzZVwiLCBpbnB1dDogXCJIZWxsbyBXb3JsZFwiIH0pO1xuKlxuKiAvLyBcIkhFTExPIFdPUkxEXCJcbiogYGBgXG4qL1xudmFyIFJvdXRlclJ1bm5hYmxlID0gY2xhc3MgZXh0ZW5kcyBSdW5uYWJsZSB7XG5cdHN0YXRpYyBsY19uYW1lKCkge1xuXHRcdHJldHVybiBcIlJvdXRlclJ1bm5hYmxlXCI7XG5cdH1cblx0bGNfbmFtZXNwYWNlID0gW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl07XG5cdGxjX3NlcmlhbGl6YWJsZSA9IHRydWU7XG5cdHJ1bm5hYmxlcztcblx0Y29uc3RydWN0b3IoZmllbGRzKSB7XG5cdFx0c3VwZXIoZmllbGRzKTtcblx0XHR0aGlzLnJ1bm5hYmxlcyA9IGZpZWxkcy5ydW5uYWJsZXM7XG5cdH1cblx0YXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG5cdFx0Y29uc3QgeyBrZXksIGlucHV0OiBhY3R1YWxJbnB1dCB9ID0gaW5wdXQ7XG5cdFx0Y29uc3QgcnVubmFibGUgPSB0aGlzLnJ1bm5hYmxlc1trZXldO1xuXHRcdGlmIChydW5uYWJsZSA9PT0gdm9pZCAwKSB0aHJvdyBuZXcgRXJyb3IoYE5vIHJ1bm5hYmxlIGFzc29jaWF0ZWQgd2l0aCBrZXkgXCIke2tleX1cIi5gKTtcblx0XHRyZXR1cm4gcnVubmFibGUuaW52b2tlKGFjdHVhbElucHV0LCBlbnN1cmVDb25maWcob3B0aW9ucykpO1xuXHR9XG5cdGFzeW5jIGJhdGNoKGlucHV0cywgb3B0aW9ucywgYmF0Y2hPcHRpb25zKSB7XG5cdFx0Y29uc3Qga2V5cyA9IGlucHV0cy5tYXAoKGlucHV0KSA9PiBpbnB1dC5rZXkpO1xuXHRcdGNvbnN0IGFjdHVhbElucHV0cyA9IGlucHV0cy5tYXAoKGlucHV0KSA9PiBpbnB1dC5pbnB1dCk7XG5cdFx0Y29uc3QgbWlzc2luZ0tleSA9IGtleXMuZmluZCgoa2V5KSA9PiB0aGlzLnJ1bm5hYmxlc1trZXldID09PSB2b2lkIDApO1xuXHRcdGlmIChtaXNzaW5nS2V5ICE9PSB2b2lkIDApIHRocm93IG5ldyBFcnJvcihgT25lIG9yIG1vcmUga2V5cyBkbyBub3QgaGF2ZSBhIGNvcnJlc3BvbmRpbmcgcnVubmFibGUuYCk7XG5cdFx0Y29uc3QgcnVubmFibGVzID0ga2V5cy5tYXAoKGtleSkgPT4gdGhpcy5ydW5uYWJsZXNba2V5XSk7XG5cdFx0Y29uc3Qgb3B0aW9uc0xpc3QgPSB0aGlzLl9nZXRPcHRpb25zTGlzdChvcHRpb25zID8/IHt9LCBpbnB1dHMubGVuZ3RoKTtcblx0XHRjb25zdCBtYXhDb25jdXJyZW5jeSA9IG9wdGlvbnNMaXN0WzBdPy5tYXhDb25jdXJyZW5jeSA/PyBiYXRjaE9wdGlvbnM/Lm1heENvbmN1cnJlbmN5O1xuXHRcdGNvbnN0IGJhdGNoU2l6ZSA9IG1heENvbmN1cnJlbmN5ICYmIG1heENvbmN1cnJlbmN5ID4gMCA/IG1heENvbmN1cnJlbmN5IDogaW5wdXRzLmxlbmd0aDtcblx0XHRjb25zdCBiYXRjaFJlc3VsdHMgPSBbXTtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGFjdHVhbElucHV0cy5sZW5ndGg7IGkgKz0gYmF0Y2hTaXplKSB7XG5cdFx0XHRjb25zdCBiYXRjaFByb21pc2VzID0gYWN0dWFsSW5wdXRzLnNsaWNlKGksIGkgKyBiYXRjaFNpemUpLm1hcCgoYWN0dWFsSW5wdXQsIGkkMSkgPT4gcnVubmFibGVzW2kkMV0uaW52b2tlKGFjdHVhbElucHV0LCBvcHRpb25zTGlzdFtpJDFdKSk7XG5cdFx0XHRjb25zdCBiYXRjaFJlc3VsdCA9IGF3YWl0IFByb21pc2UuYWxsKGJhdGNoUHJvbWlzZXMpO1xuXHRcdFx0YmF0Y2hSZXN1bHRzLnB1c2goYmF0Y2hSZXN1bHQpO1xuXHRcdH1cblx0XHRyZXR1cm4gYmF0Y2hSZXN1bHRzLmZsYXQoKTtcblx0fVxuXHRhc3luYyBzdHJlYW0oaW5wdXQsIG9wdGlvbnMpIHtcblx0XHRjb25zdCB7IGtleSwgaW5wdXQ6IGFjdHVhbElucHV0IH0gPSBpbnB1dDtcblx0XHRjb25zdCBydW5uYWJsZSA9IHRoaXMucnVubmFibGVzW2tleV07XG5cdFx0aWYgKHJ1bm5hYmxlID09PSB2b2lkIDApIHRocm93IG5ldyBFcnJvcihgTm8gcnVubmFibGUgYXNzb2NpYXRlZCB3aXRoIGtleSBcIiR7a2V5fVwiLmApO1xuXHRcdHJldHVybiBydW5uYWJsZS5zdHJlYW0oYWN0dWFsSW5wdXQsIG9wdGlvbnMpO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IFJvdXRlclJ1bm5hYmxlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yb3V0ZXIuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/runnables/router.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/runnables/utils.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/utils.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _RootEventFilter: () => (/* binding */ _RootEventFilter),\n/* harmony export */   isRunnableInterface: () => (/* binding */ isRunnableInterface),\n/* harmony export */   toBase64Url: () => (/* binding */ toBase64Url)\n/* harmony export */ });\n//#region src/runnables/utils.ts\nfunction isRunnableInterface(thing) {\n\treturn thing ? thing.lc_runnable : false;\n}\n/**\n* Utility to filter the root event in the streamEvents implementation.\n* This is simply binding the arguments to the namespace to make save on\n* a bit of typing in the streamEvents implementation.\n*\n* TODO: Refactor and remove.\n*/\nvar _RootEventFilter = class {\n\tincludeNames;\n\tincludeTypes;\n\tincludeTags;\n\texcludeNames;\n\texcludeTypes;\n\texcludeTags;\n\tconstructor(fields) {\n\t\tthis.includeNames = fields.includeNames;\n\t\tthis.includeTypes = fields.includeTypes;\n\t\tthis.includeTags = fields.includeTags;\n\t\tthis.excludeNames = fields.excludeNames;\n\t\tthis.excludeTypes = fields.excludeTypes;\n\t\tthis.excludeTags = fields.excludeTags;\n\t}\n\tincludeEvent(event, rootType) {\n\t\tlet include = this.includeNames === void 0 && this.includeTypes === void 0 && this.includeTags === void 0;\n\t\tconst eventTags = event.tags ?? [];\n\t\tif (this.includeNames !== void 0) include = include || this.includeNames.includes(event.name);\n\t\tif (this.includeTypes !== void 0) include = include || this.includeTypes.includes(rootType);\n\t\tif (this.includeTags !== void 0) include = include || eventTags.some((tag) => this.includeTags?.includes(tag));\n\t\tif (this.excludeNames !== void 0) include = include && !this.excludeNames.includes(event.name);\n\t\tif (this.excludeTypes !== void 0) include = include && !this.excludeTypes.includes(rootType);\n\t\tif (this.excludeTags !== void 0) include = include && eventTags.every((tag) => !this.excludeTags?.includes(tag));\n\t\treturn include;\n\t}\n};\nconst toBase64Url = (str) => {\n\tconst encoded = btoa(str);\n\treturn encoded.replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=+$/, \"\");\n};\n\n//#endregion\n\n//# sourceMappingURL=utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL3V0aWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUM4RDtBQUM5RCIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy91dGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3J1bm5hYmxlcy91dGlscy50c1xuZnVuY3Rpb24gaXNSdW5uYWJsZUludGVyZmFjZSh0aGluZykge1xuXHRyZXR1cm4gdGhpbmcgPyB0aGluZy5sY19ydW5uYWJsZSA6IGZhbHNlO1xufVxuLyoqXG4qIFV0aWxpdHkgdG8gZmlsdGVyIHRoZSByb290IGV2ZW50IGluIHRoZSBzdHJlYW1FdmVudHMgaW1wbGVtZW50YXRpb24uXG4qIFRoaXMgaXMgc2ltcGx5IGJpbmRpbmcgdGhlIGFyZ3VtZW50cyB0byB0aGUgbmFtZXNwYWNlIHRvIG1ha2Ugc2F2ZSBvblxuKiBhIGJpdCBvZiB0eXBpbmcgaW4gdGhlIHN0cmVhbUV2ZW50cyBpbXBsZW1lbnRhdGlvbi5cbipcbiogVE9ETzogUmVmYWN0b3IgYW5kIHJlbW92ZS5cbiovXG52YXIgX1Jvb3RFdmVudEZpbHRlciA9IGNsYXNzIHtcblx0aW5jbHVkZU5hbWVzO1xuXHRpbmNsdWRlVHlwZXM7XG5cdGluY2x1ZGVUYWdzO1xuXHRleGNsdWRlTmFtZXM7XG5cdGV4Y2x1ZGVUeXBlcztcblx0ZXhjbHVkZVRhZ3M7XG5cdGNvbnN0cnVjdG9yKGZpZWxkcykge1xuXHRcdHRoaXMuaW5jbHVkZU5hbWVzID0gZmllbGRzLmluY2x1ZGVOYW1lcztcblx0XHR0aGlzLmluY2x1ZGVUeXBlcyA9IGZpZWxkcy5pbmNsdWRlVHlwZXM7XG5cdFx0dGhpcy5pbmNsdWRlVGFncyA9IGZpZWxkcy5pbmNsdWRlVGFncztcblx0XHR0aGlzLmV4Y2x1ZGVOYW1lcyA9IGZpZWxkcy5leGNsdWRlTmFtZXM7XG5cdFx0dGhpcy5leGNsdWRlVHlwZXMgPSBmaWVsZHMuZXhjbHVkZVR5cGVzO1xuXHRcdHRoaXMuZXhjbHVkZVRhZ3MgPSBmaWVsZHMuZXhjbHVkZVRhZ3M7XG5cdH1cblx0aW5jbHVkZUV2ZW50KGV2ZW50LCByb290VHlwZSkge1xuXHRcdGxldCBpbmNsdWRlID0gdGhpcy5pbmNsdWRlTmFtZXMgPT09IHZvaWQgMCAmJiB0aGlzLmluY2x1ZGVUeXBlcyA9PT0gdm9pZCAwICYmIHRoaXMuaW5jbHVkZVRhZ3MgPT09IHZvaWQgMDtcblx0XHRjb25zdCBldmVudFRhZ3MgPSBldmVudC50YWdzID8/IFtdO1xuXHRcdGlmICh0aGlzLmluY2x1ZGVOYW1lcyAhPT0gdm9pZCAwKSBpbmNsdWRlID0gaW5jbHVkZSB8fCB0aGlzLmluY2x1ZGVOYW1lcy5pbmNsdWRlcyhldmVudC5uYW1lKTtcblx0XHRpZiAodGhpcy5pbmNsdWRlVHlwZXMgIT09IHZvaWQgMCkgaW5jbHVkZSA9IGluY2x1ZGUgfHwgdGhpcy5pbmNsdWRlVHlwZXMuaW5jbHVkZXMocm9vdFR5cGUpO1xuXHRcdGlmICh0aGlzLmluY2x1ZGVUYWdzICE9PSB2b2lkIDApIGluY2x1ZGUgPSBpbmNsdWRlIHx8IGV2ZW50VGFncy5zb21lKCh0YWcpID0+IHRoaXMuaW5jbHVkZVRhZ3M/LmluY2x1ZGVzKHRhZykpO1xuXHRcdGlmICh0aGlzLmV4Y2x1ZGVOYW1lcyAhPT0gdm9pZCAwKSBpbmNsdWRlID0gaW5jbHVkZSAmJiAhdGhpcy5leGNsdWRlTmFtZXMuaW5jbHVkZXMoZXZlbnQubmFtZSk7XG5cdFx0aWYgKHRoaXMuZXhjbHVkZVR5cGVzICE9PSB2b2lkIDApIGluY2x1ZGUgPSBpbmNsdWRlICYmICF0aGlzLmV4Y2x1ZGVUeXBlcy5pbmNsdWRlcyhyb290VHlwZSk7XG5cdFx0aWYgKHRoaXMuZXhjbHVkZVRhZ3MgIT09IHZvaWQgMCkgaW5jbHVkZSA9IGluY2x1ZGUgJiYgZXZlbnRUYWdzLmV2ZXJ5KCh0YWcpID0+ICF0aGlzLmV4Y2x1ZGVUYWdzPy5pbmNsdWRlcyh0YWcpKTtcblx0XHRyZXR1cm4gaW5jbHVkZTtcblx0fVxufTtcbmNvbnN0IHRvQmFzZTY0VXJsID0gKHN0cikgPT4ge1xuXHRjb25zdCBlbmNvZGVkID0gYnRvYShzdHIpO1xuXHRyZXR1cm4gZW5jb2RlZC5yZXBsYWNlKC9cXCsvZywgXCItXCIpLnJlcGxhY2UoL1xcLy9nLCBcIl9cIikucmVwbGFjZSgvPSskLywgXCJcIik7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IF9Sb290RXZlbnRGaWx0ZXIsIGlzUnVubmFibGVJbnRlcmZhY2UsIHRvQmFzZTY0VXJsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/runnables/utils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/runnables/wrappers.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/wrappers.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertToHttpEventStream: () => (/* binding */ convertToHttpEventStream)\n/* harmony export */ });\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/stream.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/stream.js\");\n\n\n//#region src/runnables/wrappers.ts\nfunction convertToHttpEventStream(stream) {\n\tconst encoder = new TextEncoder();\n\tconst finalStream = new ReadableStream({ async start(controller) {\n\t\tfor await (const chunk of stream) controller.enqueue(encoder.encode(`event: data\\ndata: ${JSON.stringify(chunk)}\\n\\n`));\n\t\tcontroller.enqueue(encoder.encode(\"event: end\\n\\n\"));\n\t\tcontroller.close();\n\t} });\n\treturn _utils_stream_js__WEBPACK_IMPORTED_MODULE_0__.IterableReadableStream.fromReadableStream(finalStream);\n}\n\n//#endregion\n\n//# sourceMappingURL=wrappers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL3dyYXBwZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTREOztBQUU1RDtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUMsNEZBQTRGLHNCQUFzQjtBQUNsSDtBQUNBO0FBQ0EsSUFBSTtBQUNKLFFBQVEsb0VBQXNCO0FBQzlCOztBQUVBO0FBQ29DO0FBQ3BDIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL3dyYXBwZXJzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0gfSBmcm9tIFwiLi4vdXRpbHMvc3RyZWFtLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcnVubmFibGVzL3dyYXBwZXJzLnRzXG5mdW5jdGlvbiBjb252ZXJ0VG9IdHRwRXZlbnRTdHJlYW0oc3RyZWFtKSB7XG5cdGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcblx0Y29uc3QgZmluYWxTdHJlYW0gPSBuZXcgUmVhZGFibGVTdHJlYW0oeyBhc3luYyBzdGFydChjb250cm9sbGVyKSB7XG5cdFx0Zm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBzdHJlYW0pIGNvbnRyb2xsZXIuZW5xdWV1ZShlbmNvZGVyLmVuY29kZShgZXZlbnQ6IGRhdGFcXG5kYXRhOiAke0pTT04uc3RyaW5naWZ5KGNodW5rKX1cXG5cXG5gKSk7XG5cdFx0Y29udHJvbGxlci5lbnF1ZXVlKGVuY29kZXIuZW5jb2RlKFwiZXZlbnQ6IGVuZFxcblxcblwiKSk7XG5cdFx0Y29udHJvbGxlci5jbG9zZSgpO1xuXHR9IH0pO1xuXHRyZXR1cm4gSXRlcmFibGVSZWFkYWJsZVN0cmVhbS5mcm9tUmVhZGFibGVTdHJlYW0oZmluYWxTdHJlYW0pO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNvbnZlcnRUb0h0dHBFdmVudFN0cmVhbSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d3JhcHBlcnMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/runnables/wrappers.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/singletons/async_local_storage/context.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/singletons/async_local_storage/context.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _getConfigureHooks: () => (/* binding */ _getConfigureHooks),\n/* harmony export */   getContextVariable: () => (/* binding */ getContextVariable),\n/* harmony export */   registerConfigureHook: () => (/* binding */ registerConfigureHook),\n/* harmony export */   setContextVariable: () => (/* binding */ setContextVariable)\n/* harmony export */ });\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./globals.js */ \"(ssr)/./node_modules/@langchain/core/dist/singletons/async_local_storage/globals.js\");\n/* harmony import */ var langsmith_run_trees__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! langsmith/run_trees */ \"(ssr)/./node_modules/langsmith/run_trees.js\");\n\n\n\n//#region src/singletons/async_local_storage/context.ts\n/**\n* Set a context variable. Context variables are scoped to any\n* child runnables called by the current runnable, or globally if set outside\n* of any runnable.\n*\n* @remarks\n* This function is only supported in environments that support AsyncLocalStorage,\n* including Node.js, Deno, and Cloudflare Workers.\n*\n* @example\n* ```ts\n* import { RunnableLambda } from \"@langchain/core/runnables\";\n* import {\n*   getContextVariable,\n*   setContextVariable\n* } from \"@langchain/core/context\";\n*\n* const nested = RunnableLambda.from(() => {\n*   // \"bar\" because it was set by a parent\n*   console.log(getContextVariable(\"foo\"));\n*\n*   // Override to \"baz\", but only for child runnables\n*   setContextVariable(\"foo\", \"baz\");\n*\n*   // Now \"baz\", but only for child runnables\n*   return getContextVariable(\"foo\");\n* });\n*\n* const runnable = RunnableLambda.from(async () => {\n*   // Set a context variable named \"foo\"\n*   setContextVariable(\"foo\", \"bar\");\n*\n*   const res = await nested.invoke({});\n*\n*   // Still \"bar\" since child changes do not affect parents\n*   console.log(getContextVariable(\"foo\"));\n*\n*   return res;\n* });\n*\n* // undefined, because context variable has not been set yet\n* console.log(getContextVariable(\"foo\"));\n*\n* // Final return value is \"baz\"\n* const result = await runnable.invoke({});\n* ```\n*\n* @param name The name of the context variable.\n* @param value The value to set.\n*/\nfunction setContextVariable(name, value) {\n\tconst asyncLocalStorageInstance = (0,_globals_js__WEBPACK_IMPORTED_MODULE_0__.getGlobalAsyncLocalStorageInstance)();\n\tif (asyncLocalStorageInstance === void 0) throw new Error(`Internal error: Global shared async local storage instance has not been initialized.`);\n\tconst runTree = asyncLocalStorageInstance.getStore();\n\tconst contextVars = { ...runTree?.[_globals_js__WEBPACK_IMPORTED_MODULE_0__._CONTEXT_VARIABLES_KEY] };\n\tcontextVars[name] = value;\n\tlet newValue = {};\n\tif ((0,langsmith_run_trees__WEBPACK_IMPORTED_MODULE_1__.isRunTree)(runTree)) newValue = new langsmith_run_trees__WEBPACK_IMPORTED_MODULE_1__.RunTree(runTree);\n\tnewValue[_globals_js__WEBPACK_IMPORTED_MODULE_0__._CONTEXT_VARIABLES_KEY] = contextVars;\n\tasyncLocalStorageInstance.enterWith(newValue);\n}\n/**\n* Get the value of a previously set context variable. Context variables\n* are scoped to any child runnables called by the current runnable,\n* or globally if set outside of any runnable.\n*\n* @remarks\n* This function is only supported in environments that support AsyncLocalStorage,\n* including Node.js, Deno, and Cloudflare Workers.\n*\n* @example\n* ```ts\n* import { RunnableLambda } from \"@langchain/core/runnables\";\n* import {\n*   getContextVariable,\n*   setContextVariable\n* } from \"@langchain/core/context\";\n*\n* const nested = RunnableLambda.from(() => {\n*   // \"bar\" because it was set by a parent\n*   console.log(getContextVariable(\"foo\"));\n*\n*   // Override to \"baz\", but only for child runnables\n*   setContextVariable(\"foo\", \"baz\");\n*\n*   // Now \"baz\", but only for child runnables\n*   return getContextVariable(\"foo\");\n* });\n*\n* const runnable = RunnableLambda.from(async () => {\n*   // Set a context variable named \"foo\"\n*   setContextVariable(\"foo\", \"bar\");\n*\n*   const res = await nested.invoke({});\n*\n*   // Still \"bar\" since child changes do not affect parents\n*   console.log(getContextVariable(\"foo\"));\n*\n*   return res;\n* });\n*\n* // undefined, because context variable has not been set yet\n* console.log(getContextVariable(\"foo\"));\n*\n* // Final return value is \"baz\"\n* const result = await runnable.invoke({});\n* ```\n*\n* @param name The name of the context variable.\n*/\nfunction getContextVariable(name) {\n\tconst asyncLocalStorageInstance = (0,_globals_js__WEBPACK_IMPORTED_MODULE_0__.getGlobalAsyncLocalStorageInstance)();\n\tif (asyncLocalStorageInstance === void 0) return void 0;\n\tconst runTree = asyncLocalStorageInstance.getStore();\n\treturn runTree?.[_globals_js__WEBPACK_IMPORTED_MODULE_0__._CONTEXT_VARIABLES_KEY]?.[name];\n}\nconst LC_CONFIGURE_HOOKS_KEY = Symbol(\"lc:configure_hooks\");\nconst _getConfigureHooks = () => getContextVariable(LC_CONFIGURE_HOOKS_KEY) || [];\n/**\n* Register a callback configure hook to automatically add callback handlers to all runs.\n*\n* There are two ways to use this:\n*\n* 1. Using a context variable:\n*    - Set `contextVar` to specify the variable name\n*    - Use `setContextVariable()` to store your handler instance\n*\n* 2. Using an environment variable:\n*    - Set both `envVar` and `handlerClass`\n*    - The handler will be instantiated when the env var is set to \"true\".\n*\n* @example\n* ```typescript\n* // Method 1: Using context variable\n* import {\n*   registerConfigureHook,\n*   setContextVariable\n* } from \"@langchain/core/context\";\n*\n* const tracer = new MyCallbackHandler();\n* registerConfigureHook({\n*   contextVar: \"my_tracer\",\n* });\n* setContextVariable(\"my_tracer\", tracer);\n*\n* // ...run code here\n*\n* // Method 2: Using environment variable\n* registerConfigureHook({\n*   handlerClass: MyCallbackHandler,\n*   envVar: \"MY_TRACER_ENABLED\",\n* });\n* process.env.MY_TRACER_ENABLED = \"true\";\n*\n* // ...run code here\n* ```\n*\n* @param config Configuration object for the hook\n* @param config.contextVar Name of the context variable containing the handler instance\n* @param config.inheritable Whether child runs should inherit this handler\n* @param config.handlerClass Optional callback handler class (required if using envVar)\n* @param config.envVar Optional environment variable name to control handler activation\n*/\nconst registerConfigureHook = (config) => {\n\tif (config.envVar && !config.handlerClass) throw new Error(\"If envVar is set, handlerClass must also be set to a non-None value.\");\n\tsetContextVariable(LC_CONFIGURE_HOOKS_KEY, [..._getConfigureHooks(), config]);\n};\n\n//#endregion\n\n//# sourceMappingURL=context.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy9hc3luY19sb2NhbF9zdG9yYWdlL2NvbnRleHQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTBGO0FBQ2pDOztBQUV6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGlCQUFpQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLCtFQUFrQztBQUNyRTtBQUNBO0FBQ0EsdUJBQXVCLGFBQWEsK0RBQXNCO0FBQzFEO0FBQ0E7QUFDQSxLQUFLLDhEQUFTLDBCQUEwQix3REFBTztBQUMvQyxVQUFVLCtEQUFzQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsaUJBQWlCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLCtFQUFrQztBQUNyRTtBQUNBO0FBQ0Esa0JBQWtCLCtEQUFzQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUM2RjtBQUM3RiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3NpbmdsZXRvbnMvYXN5bmNfbG9jYWxfc3RvcmFnZS9jb250ZXh0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9DT05URVhUX1ZBUklBQkxFU19LRVksIGdldEdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UgfSBmcm9tIFwiLi9nbG9iYWxzLmpzXCI7XG5pbXBvcnQgeyBSdW5UcmVlLCBpc1J1blRyZWUgfSBmcm9tIFwibGFuZ3NtaXRoL3J1bl90cmVlc1wiO1xuXG4vLyNyZWdpb24gc3JjL3NpbmdsZXRvbnMvYXN5bmNfbG9jYWxfc3RvcmFnZS9jb250ZXh0LnRzXG4vKipcbiogU2V0IGEgY29udGV4dCB2YXJpYWJsZS4gQ29udGV4dCB2YXJpYWJsZXMgYXJlIHNjb3BlZCB0byBhbnlcbiogY2hpbGQgcnVubmFibGVzIGNhbGxlZCBieSB0aGUgY3VycmVudCBydW5uYWJsZSwgb3IgZ2xvYmFsbHkgaWYgc2V0IG91dHNpZGVcbiogb2YgYW55IHJ1bm5hYmxlLlxuKlxuKiBAcmVtYXJrc1xuKiBUaGlzIGZ1bmN0aW9uIGlzIG9ubHkgc3VwcG9ydGVkIGluIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgQXN5bmNMb2NhbFN0b3JhZ2UsXG4qIGluY2x1ZGluZyBOb2RlLmpzLCBEZW5vLCBhbmQgQ2xvdWRmbGFyZSBXb3JrZXJzLlxuKlxuKiBAZXhhbXBsZVxuKiBgYGB0c1xuKiBpbXBvcnQgeyBSdW5uYWJsZUxhbWJkYSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvcnVubmFibGVzXCI7XG4qIGltcG9ydCB7XG4qICAgZ2V0Q29udGV4dFZhcmlhYmxlLFxuKiAgIHNldENvbnRleHRWYXJpYWJsZVxuKiB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvY29udGV4dFwiO1xuKlxuKiBjb25zdCBuZXN0ZWQgPSBSdW5uYWJsZUxhbWJkYS5mcm9tKCgpID0+IHtcbiogICAvLyBcImJhclwiIGJlY2F1c2UgaXQgd2FzIHNldCBieSBhIHBhcmVudFxuKiAgIGNvbnNvbGUubG9nKGdldENvbnRleHRWYXJpYWJsZShcImZvb1wiKSk7XG4qXG4qICAgLy8gT3ZlcnJpZGUgdG8gXCJiYXpcIiwgYnV0IG9ubHkgZm9yIGNoaWxkIHJ1bm5hYmxlc1xuKiAgIHNldENvbnRleHRWYXJpYWJsZShcImZvb1wiLCBcImJhelwiKTtcbipcbiogICAvLyBOb3cgXCJiYXpcIiwgYnV0IG9ubHkgZm9yIGNoaWxkIHJ1bm5hYmxlc1xuKiAgIHJldHVybiBnZXRDb250ZXh0VmFyaWFibGUoXCJmb29cIik7XG4qIH0pO1xuKlxuKiBjb25zdCBydW5uYWJsZSA9IFJ1bm5hYmxlTGFtYmRhLmZyb20oYXN5bmMgKCkgPT4ge1xuKiAgIC8vIFNldCBhIGNvbnRleHQgdmFyaWFibGUgbmFtZWQgXCJmb29cIlxuKiAgIHNldENvbnRleHRWYXJpYWJsZShcImZvb1wiLCBcImJhclwiKTtcbipcbiogICBjb25zdCByZXMgPSBhd2FpdCBuZXN0ZWQuaW52b2tlKHt9KTtcbipcbiogICAvLyBTdGlsbCBcImJhclwiIHNpbmNlIGNoaWxkIGNoYW5nZXMgZG8gbm90IGFmZmVjdCBwYXJlbnRzXG4qICAgY29uc29sZS5sb2coZ2V0Q29udGV4dFZhcmlhYmxlKFwiZm9vXCIpKTtcbipcbiogICByZXR1cm4gcmVzO1xuKiB9KTtcbipcbiogLy8gdW5kZWZpbmVkLCBiZWNhdXNlIGNvbnRleHQgdmFyaWFibGUgaGFzIG5vdCBiZWVuIHNldCB5ZXRcbiogY29uc29sZS5sb2coZ2V0Q29udGV4dFZhcmlhYmxlKFwiZm9vXCIpKTtcbipcbiogLy8gRmluYWwgcmV0dXJuIHZhbHVlIGlzIFwiYmF6XCJcbiogY29uc3QgcmVzdWx0ID0gYXdhaXQgcnVubmFibGUuaW52b2tlKHt9KTtcbiogYGBgXG4qXG4qIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBjb250ZXh0IHZhcmlhYmxlLlxuKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiovXG5mdW5jdGlvbiBzZXRDb250ZXh0VmFyaWFibGUobmFtZSwgdmFsdWUpIHtcblx0Y29uc3QgYXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZSA9IGdldEdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UoKTtcblx0aWYgKGFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UgPT09IHZvaWQgMCkgdGhyb3cgbmV3IEVycm9yKGBJbnRlcm5hbCBlcnJvcjogR2xvYmFsIHNoYXJlZCBhc3luYyBsb2NhbCBzdG9yYWdlIGluc3RhbmNlIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC5gKTtcblx0Y29uc3QgcnVuVHJlZSA9IGFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UuZ2V0U3RvcmUoKTtcblx0Y29uc3QgY29udGV4dFZhcnMgPSB7IC4uLnJ1blRyZWU/LltfQ09OVEVYVF9WQVJJQUJMRVNfS0VZXSB9O1xuXHRjb250ZXh0VmFyc1tuYW1lXSA9IHZhbHVlO1xuXHRsZXQgbmV3VmFsdWUgPSB7fTtcblx0aWYgKGlzUnVuVHJlZShydW5UcmVlKSkgbmV3VmFsdWUgPSBuZXcgUnVuVHJlZShydW5UcmVlKTtcblx0bmV3VmFsdWVbX0NPTlRFWFRfVkFSSUFCTEVTX0tFWV0gPSBjb250ZXh0VmFycztcblx0YXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZS5lbnRlcldpdGgobmV3VmFsdWUpO1xufVxuLyoqXG4qIEdldCB0aGUgdmFsdWUgb2YgYSBwcmV2aW91c2x5IHNldCBjb250ZXh0IHZhcmlhYmxlLiBDb250ZXh0IHZhcmlhYmxlc1xuKiBhcmUgc2NvcGVkIHRvIGFueSBjaGlsZCBydW5uYWJsZXMgY2FsbGVkIGJ5IHRoZSBjdXJyZW50IHJ1bm5hYmxlLFxuKiBvciBnbG9iYWxseSBpZiBzZXQgb3V0c2lkZSBvZiBhbnkgcnVubmFibGUuXG4qXG4qIEByZW1hcmtzXG4qIFRoaXMgZnVuY3Rpb24gaXMgb25seSBzdXBwb3J0ZWQgaW4gZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydCBBc3luY0xvY2FsU3RvcmFnZSxcbiogaW5jbHVkaW5nIE5vZGUuanMsIERlbm8sIGFuZCBDbG91ZGZsYXJlIFdvcmtlcnMuXG4qXG4qIEBleGFtcGxlXG4qIGBgYHRzXG4qIGltcG9ydCB7IFJ1bm5hYmxlTGFtYmRhIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9ydW5uYWJsZXNcIjtcbiogaW1wb3J0IHtcbiogICBnZXRDb250ZXh0VmFyaWFibGUsXG4qICAgc2V0Q29udGV4dFZhcmlhYmxlXG4qIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9jb250ZXh0XCI7XG4qXG4qIGNvbnN0IG5lc3RlZCA9IFJ1bm5hYmxlTGFtYmRhLmZyb20oKCkgPT4ge1xuKiAgIC8vIFwiYmFyXCIgYmVjYXVzZSBpdCB3YXMgc2V0IGJ5IGEgcGFyZW50XG4qICAgY29uc29sZS5sb2coZ2V0Q29udGV4dFZhcmlhYmxlKFwiZm9vXCIpKTtcbipcbiogICAvLyBPdmVycmlkZSB0byBcImJhelwiLCBidXQgb25seSBmb3IgY2hpbGQgcnVubmFibGVzXG4qICAgc2V0Q29udGV4dFZhcmlhYmxlKFwiZm9vXCIsIFwiYmF6XCIpO1xuKlxuKiAgIC8vIE5vdyBcImJhelwiLCBidXQgb25seSBmb3IgY2hpbGQgcnVubmFibGVzXG4qICAgcmV0dXJuIGdldENvbnRleHRWYXJpYWJsZShcImZvb1wiKTtcbiogfSk7XG4qXG4qIGNvbnN0IHJ1bm5hYmxlID0gUnVubmFibGVMYW1iZGEuZnJvbShhc3luYyAoKSA9PiB7XG4qICAgLy8gU2V0IGEgY29udGV4dCB2YXJpYWJsZSBuYW1lZCBcImZvb1wiXG4qICAgc2V0Q29udGV4dFZhcmlhYmxlKFwiZm9vXCIsIFwiYmFyXCIpO1xuKlxuKiAgIGNvbnN0IHJlcyA9IGF3YWl0IG5lc3RlZC5pbnZva2Uoe30pO1xuKlxuKiAgIC8vIFN0aWxsIFwiYmFyXCIgc2luY2UgY2hpbGQgY2hhbmdlcyBkbyBub3QgYWZmZWN0IHBhcmVudHNcbiogICBjb25zb2xlLmxvZyhnZXRDb250ZXh0VmFyaWFibGUoXCJmb29cIikpO1xuKlxuKiAgIHJldHVybiByZXM7XG4qIH0pO1xuKlxuKiAvLyB1bmRlZmluZWQsIGJlY2F1c2UgY29udGV4dCB2YXJpYWJsZSBoYXMgbm90IGJlZW4gc2V0IHlldFxuKiBjb25zb2xlLmxvZyhnZXRDb250ZXh0VmFyaWFibGUoXCJmb29cIikpO1xuKlxuKiAvLyBGaW5hbCByZXR1cm4gdmFsdWUgaXMgXCJiYXpcIlxuKiBjb25zdCByZXN1bHQgPSBhd2FpdCBydW5uYWJsZS5pbnZva2Uoe30pO1xuKiBgYGBcbipcbiogQHBhcmFtIG5hbWUgVGhlIG5hbWUgb2YgdGhlIGNvbnRleHQgdmFyaWFibGUuXG4qL1xuZnVuY3Rpb24gZ2V0Q29udGV4dFZhcmlhYmxlKG5hbWUpIHtcblx0Y29uc3QgYXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZSA9IGdldEdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UoKTtcblx0aWYgKGFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UgPT09IHZvaWQgMCkgcmV0dXJuIHZvaWQgMDtcblx0Y29uc3QgcnVuVHJlZSA9IGFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UuZ2V0U3RvcmUoKTtcblx0cmV0dXJuIHJ1blRyZWU/LltfQ09OVEVYVF9WQVJJQUJMRVNfS0VZXT8uW25hbWVdO1xufVxuY29uc3QgTENfQ09ORklHVVJFX0hPT0tTX0tFWSA9IFN5bWJvbChcImxjOmNvbmZpZ3VyZV9ob29rc1wiKTtcbmNvbnN0IF9nZXRDb25maWd1cmVIb29rcyA9ICgpID0+IGdldENvbnRleHRWYXJpYWJsZShMQ19DT05GSUdVUkVfSE9PS1NfS0VZKSB8fCBbXTtcbi8qKlxuKiBSZWdpc3RlciBhIGNhbGxiYWNrIGNvbmZpZ3VyZSBob29rIHRvIGF1dG9tYXRpY2FsbHkgYWRkIGNhbGxiYWNrIGhhbmRsZXJzIHRvIGFsbCBydW5zLlxuKlxuKiBUaGVyZSBhcmUgdHdvIHdheXMgdG8gdXNlIHRoaXM6XG4qXG4qIDEuIFVzaW5nIGEgY29udGV4dCB2YXJpYWJsZTpcbiogICAgLSBTZXQgYGNvbnRleHRWYXJgIHRvIHNwZWNpZnkgdGhlIHZhcmlhYmxlIG5hbWVcbiogICAgLSBVc2UgYHNldENvbnRleHRWYXJpYWJsZSgpYCB0byBzdG9yZSB5b3VyIGhhbmRsZXIgaW5zdGFuY2VcbipcbiogMi4gVXNpbmcgYW4gZW52aXJvbm1lbnQgdmFyaWFibGU6XG4qICAgIC0gU2V0IGJvdGggYGVudlZhcmAgYW5kIGBoYW5kbGVyQ2xhc3NgXG4qICAgIC0gVGhlIGhhbmRsZXIgd2lsbCBiZSBpbnN0YW50aWF0ZWQgd2hlbiB0aGUgZW52IHZhciBpcyBzZXQgdG8gXCJ0cnVlXCIuXG4qXG4qIEBleGFtcGxlXG4qIGBgYHR5cGVzY3JpcHRcbiogLy8gTWV0aG9kIDE6IFVzaW5nIGNvbnRleHQgdmFyaWFibGVcbiogaW1wb3J0IHtcbiogICByZWdpc3RlckNvbmZpZ3VyZUhvb2ssXG4qICAgc2V0Q29udGV4dFZhcmlhYmxlXG4qIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9jb250ZXh0XCI7XG4qXG4qIGNvbnN0IHRyYWNlciA9IG5ldyBNeUNhbGxiYWNrSGFuZGxlcigpO1xuKiByZWdpc3RlckNvbmZpZ3VyZUhvb2soe1xuKiAgIGNvbnRleHRWYXI6IFwibXlfdHJhY2VyXCIsXG4qIH0pO1xuKiBzZXRDb250ZXh0VmFyaWFibGUoXCJteV90cmFjZXJcIiwgdHJhY2VyKTtcbipcbiogLy8gLi4ucnVuIGNvZGUgaGVyZVxuKlxuKiAvLyBNZXRob2QgMjogVXNpbmcgZW52aXJvbm1lbnQgdmFyaWFibGVcbiogcmVnaXN0ZXJDb25maWd1cmVIb29rKHtcbiogICBoYW5kbGVyQ2xhc3M6IE15Q2FsbGJhY2tIYW5kbGVyLFxuKiAgIGVudlZhcjogXCJNWV9UUkFDRVJfRU5BQkxFRFwiLFxuKiB9KTtcbiogcHJvY2Vzcy5lbnYuTVlfVFJBQ0VSX0VOQUJMRUQgPSBcInRydWVcIjtcbipcbiogLy8gLi4ucnVuIGNvZGUgaGVyZVxuKiBgYGBcbipcbiogQHBhcmFtIGNvbmZpZyBDb25maWd1cmF0aW9uIG9iamVjdCBmb3IgdGhlIGhvb2tcbiogQHBhcmFtIGNvbmZpZy5jb250ZXh0VmFyIE5hbWUgb2YgdGhlIGNvbnRleHQgdmFyaWFibGUgY29udGFpbmluZyB0aGUgaGFuZGxlciBpbnN0YW5jZVxuKiBAcGFyYW0gY29uZmlnLmluaGVyaXRhYmxlIFdoZXRoZXIgY2hpbGQgcnVucyBzaG91bGQgaW5oZXJpdCB0aGlzIGhhbmRsZXJcbiogQHBhcmFtIGNvbmZpZy5oYW5kbGVyQ2xhc3MgT3B0aW9uYWwgY2FsbGJhY2sgaGFuZGxlciBjbGFzcyAocmVxdWlyZWQgaWYgdXNpbmcgZW52VmFyKVxuKiBAcGFyYW0gY29uZmlnLmVudlZhciBPcHRpb25hbCBlbnZpcm9ubWVudCB2YXJpYWJsZSBuYW1lIHRvIGNvbnRyb2wgaGFuZGxlciBhY3RpdmF0aW9uXG4qL1xuY29uc3QgcmVnaXN0ZXJDb25maWd1cmVIb29rID0gKGNvbmZpZykgPT4ge1xuXHRpZiAoY29uZmlnLmVudlZhciAmJiAhY29uZmlnLmhhbmRsZXJDbGFzcykgdGhyb3cgbmV3IEVycm9yKFwiSWYgZW52VmFyIGlzIHNldCwgaGFuZGxlckNsYXNzIG11c3QgYWxzbyBiZSBzZXQgdG8gYSBub24tTm9uZSB2YWx1ZS5cIik7XG5cdHNldENvbnRleHRWYXJpYWJsZShMQ19DT05GSUdVUkVfSE9PS1NfS0VZLCBbLi4uX2dldENvbmZpZ3VyZUhvb2tzKCksIGNvbmZpZ10pO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBfZ2V0Q29uZmlndXJlSG9va3MsIGdldENvbnRleHRWYXJpYWJsZSwgcmVnaXN0ZXJDb25maWd1cmVIb29rLCBzZXRDb250ZXh0VmFyaWFibGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnRleHQuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/singletons/async_local_storage/context.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/singletons/async_local_storage/globals.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/singletons/async_local_storage/globals.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _CONTEXT_VARIABLES_KEY: () => (/* binding */ _CONTEXT_VARIABLES_KEY),\n/* harmony export */   getGlobalAsyncLocalStorageInstance: () => (/* binding */ getGlobalAsyncLocalStorageInstance),\n/* harmony export */   setGlobalAsyncLocalStorageInstance: () => (/* binding */ setGlobalAsyncLocalStorageInstance)\n/* harmony export */ });\n//#region src/singletons/async_local_storage/globals.ts\nconst TRACING_ALS_KEY = Symbol.for(\"ls:tracing_async_local_storage\");\nconst _CONTEXT_VARIABLES_KEY = Symbol.for(\"lc:context_variables\");\nconst setGlobalAsyncLocalStorageInstance = (instance) => {\n\tglobalThis[TRACING_ALS_KEY] = instance;\n};\nconst getGlobalAsyncLocalStorageInstance = () => {\n\treturn globalThis[TRACING_ALS_KEY];\n};\n\n//#endregion\n\n//# sourceMappingURL=globals.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy9hc3luY19sb2NhbF9zdG9yYWdlL2dsb2JhbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzBHO0FBQzFHIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy9hc3luY19sb2NhbF9zdG9yYWdlL2dsb2JhbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9zaW5nbGV0b25zL2FzeW5jX2xvY2FsX3N0b3JhZ2UvZ2xvYmFscy50c1xuY29uc3QgVFJBQ0lOR19BTFNfS0VZID0gU3ltYm9sLmZvcihcImxzOnRyYWNpbmdfYXN5bmNfbG9jYWxfc3RvcmFnZVwiKTtcbmNvbnN0IF9DT05URVhUX1ZBUklBQkxFU19LRVkgPSBTeW1ib2wuZm9yKFwibGM6Y29udGV4dF92YXJpYWJsZXNcIik7XG5jb25zdCBzZXRHbG9iYWxBc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlID0gKGluc3RhbmNlKSA9PiB7XG5cdGdsb2JhbFRoaXNbVFJBQ0lOR19BTFNfS0VZXSA9IGluc3RhbmNlO1xufTtcbmNvbnN0IGdldEdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UgPSAoKSA9PiB7XG5cdHJldHVybiBnbG9iYWxUaGlzW1RSQUNJTkdfQUxTX0tFWV07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IF9DT05URVhUX1ZBUklBQkxFU19LRVksIGdldEdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UsIHNldEdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdsb2JhbHMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/singletons/async_local_storage/globals.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/singletons/async_local_storage/index.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/singletons/async_local_storage/index.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncLocalStorageProviderSingleton: () => (/* binding */ AsyncLocalStorageProviderSingleton),\n/* harmony export */   MockAsyncLocalStorage: () => (/* binding */ MockAsyncLocalStorage)\n/* harmony export */ });\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./globals.js */ \"(ssr)/./node_modules/@langchain/core/dist/singletons/async_local_storage/globals.js\");\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../callbacks/manager.js */ \"(ssr)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var langsmith__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! langsmith */ \"(ssr)/./node_modules/langsmith/index.js\");\n\n\n\n\n//#region src/singletons/async_local_storage/index.ts\nvar MockAsyncLocalStorage = class {\n\tgetStore() {\n\t\treturn void 0;\n\t}\n\trun(_store, callback) {\n\t\treturn callback();\n\t}\n\tenterWith(_store) {\n\t\treturn void 0;\n\t}\n};\nconst mockAsyncLocalStorage = new MockAsyncLocalStorage();\nconst LC_CHILD_KEY = Symbol.for(\"lc:child_config\");\nvar AsyncLocalStorageProvider = class {\n\tgetInstance() {\n\t\treturn (0,_globals_js__WEBPACK_IMPORTED_MODULE_0__.getGlobalAsyncLocalStorageInstance)() ?? mockAsyncLocalStorage;\n\t}\n\tgetRunnableConfig() {\n\t\tconst storage = this.getInstance();\n\t\treturn storage.getStore()?.extra?.[LC_CHILD_KEY];\n\t}\n\trunWithConfig(config, callback, avoidCreatingRootRunTree) {\n\t\tconst callbackManager = _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_1__.CallbackManager._configureSync(config?.callbacks, void 0, config?.tags, void 0, config?.metadata);\n\t\tconst storage = this.getInstance();\n\t\tconst previousValue = storage.getStore();\n\t\tconst parentRunId = callbackManager?.getParentRunId();\n\t\tconst langChainTracer = callbackManager?.handlers?.find((handler) => handler?.name === \"langchain_tracer\");\n\t\tlet runTree;\n\t\tif (langChainTracer && parentRunId) runTree = langChainTracer.getRunTreeWithTracingConfig(parentRunId);\n\t\telse if (!avoidCreatingRootRunTree) runTree = new langsmith__WEBPACK_IMPORTED_MODULE_2__.RunTree({\n\t\t\tname: \"<runnable_lambda>\",\n\t\t\ttracingEnabled: false\n\t\t});\n\t\tif (runTree) runTree.extra = {\n\t\t\t...runTree.extra,\n\t\t\t[LC_CHILD_KEY]: config\n\t\t};\n\t\tif (previousValue !== void 0 && previousValue[_globals_js__WEBPACK_IMPORTED_MODULE_0__._CONTEXT_VARIABLES_KEY] !== void 0) {\n\t\t\tif (runTree === void 0) runTree = {};\n\t\t\trunTree[_globals_js__WEBPACK_IMPORTED_MODULE_0__._CONTEXT_VARIABLES_KEY] = previousValue[_globals_js__WEBPACK_IMPORTED_MODULE_0__._CONTEXT_VARIABLES_KEY];\n\t\t}\n\t\treturn storage.run(runTree, callback);\n\t}\n\tinitializeGlobalInstance(instance) {\n\t\tif ((0,_globals_js__WEBPACK_IMPORTED_MODULE_0__.getGlobalAsyncLocalStorageInstance)() === void 0) (0,_globals_js__WEBPACK_IMPORTED_MODULE_0__.setGlobalAsyncLocalStorageInstance)(instance);\n\t}\n};\nconst AsyncLocalStorageProviderSingleton = new AsyncLocalStorageProvider();\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy9hc3luY19sb2NhbF9zdG9yYWdlL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQThIO0FBQ2pFO0FBQ3pCOztBQUVwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsK0VBQWtDO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixrRUFBZTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0QsOENBQU87QUFDM0Q7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCwrREFBc0I7QUFDdEU7QUFDQSxXQUFXLCtEQUFzQixrQkFBa0IsK0RBQXNCO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSwrRUFBa0MsZUFBZSwrRUFBa0M7QUFDekY7QUFDQTtBQUNBOztBQUVBO0FBQ3FFO0FBQ3JFIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy9hc3luY19sb2NhbF9zdG9yYWdlL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9DT05URVhUX1ZBUklBQkxFU19LRVksIGdldEdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UsIHNldEdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UgfSBmcm9tIFwiLi9nbG9iYWxzLmpzXCI7XG5pbXBvcnQgeyBDYWxsYmFja01hbmFnZXIgfSBmcm9tIFwiLi4vLi4vY2FsbGJhY2tzL21hbmFnZXIuanNcIjtcbmltcG9ydCB7IFJ1blRyZWUgfSBmcm9tIFwibGFuZ3NtaXRoXCI7XG5cbi8vI3JlZ2lvbiBzcmMvc2luZ2xldG9ucy9hc3luY19sb2NhbF9zdG9yYWdlL2luZGV4LnRzXG52YXIgTW9ja0FzeW5jTG9jYWxTdG9yYWdlID0gY2xhc3Mge1xuXHRnZXRTdG9yZSgpIHtcblx0XHRyZXR1cm4gdm9pZCAwO1xuXHR9XG5cdHJ1bihfc3RvcmUsIGNhbGxiYWNrKSB7XG5cdFx0cmV0dXJuIGNhbGxiYWNrKCk7XG5cdH1cblx0ZW50ZXJXaXRoKF9zdG9yZSkge1xuXHRcdHJldHVybiB2b2lkIDA7XG5cdH1cbn07XG5jb25zdCBtb2NrQXN5bmNMb2NhbFN0b3JhZ2UgPSBuZXcgTW9ja0FzeW5jTG9jYWxTdG9yYWdlKCk7XG5jb25zdCBMQ19DSElMRF9LRVkgPSBTeW1ib2wuZm9yKFwibGM6Y2hpbGRfY29uZmlnXCIpO1xudmFyIEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXIgPSBjbGFzcyB7XG5cdGdldEluc3RhbmNlKCkge1xuXHRcdHJldHVybiBnZXRHbG9iYWxBc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlKCkgPz8gbW9ja0FzeW5jTG9jYWxTdG9yYWdlO1xuXHR9XG5cdGdldFJ1bm5hYmxlQ29uZmlnKCkge1xuXHRcdGNvbnN0IHN0b3JhZ2UgPSB0aGlzLmdldEluc3RhbmNlKCk7XG5cdFx0cmV0dXJuIHN0b3JhZ2UuZ2V0U3RvcmUoKT8uZXh0cmE/LltMQ19DSElMRF9LRVldO1xuXHR9XG5cdHJ1bldpdGhDb25maWcoY29uZmlnLCBjYWxsYmFjaywgYXZvaWRDcmVhdGluZ1Jvb3RSdW5UcmVlKSB7XG5cdFx0Y29uc3QgY2FsbGJhY2tNYW5hZ2VyID0gQ2FsbGJhY2tNYW5hZ2VyLl9jb25maWd1cmVTeW5jKGNvbmZpZz8uY2FsbGJhY2tzLCB2b2lkIDAsIGNvbmZpZz8udGFncywgdm9pZCAwLCBjb25maWc/Lm1ldGFkYXRhKTtcblx0XHRjb25zdCBzdG9yYWdlID0gdGhpcy5nZXRJbnN0YW5jZSgpO1xuXHRcdGNvbnN0IHByZXZpb3VzVmFsdWUgPSBzdG9yYWdlLmdldFN0b3JlKCk7XG5cdFx0Y29uc3QgcGFyZW50UnVuSWQgPSBjYWxsYmFja01hbmFnZXI/LmdldFBhcmVudFJ1bklkKCk7XG5cdFx0Y29uc3QgbGFuZ0NoYWluVHJhY2VyID0gY2FsbGJhY2tNYW5hZ2VyPy5oYW5kbGVycz8uZmluZCgoaGFuZGxlcikgPT4gaGFuZGxlcj8ubmFtZSA9PT0gXCJsYW5nY2hhaW5fdHJhY2VyXCIpO1xuXHRcdGxldCBydW5UcmVlO1xuXHRcdGlmIChsYW5nQ2hhaW5UcmFjZXIgJiYgcGFyZW50UnVuSWQpIHJ1blRyZWUgPSBsYW5nQ2hhaW5UcmFjZXIuZ2V0UnVuVHJlZVdpdGhUcmFjaW5nQ29uZmlnKHBhcmVudFJ1bklkKTtcblx0XHRlbHNlIGlmICghYXZvaWRDcmVhdGluZ1Jvb3RSdW5UcmVlKSBydW5UcmVlID0gbmV3IFJ1blRyZWUoe1xuXHRcdFx0bmFtZTogXCI8cnVubmFibGVfbGFtYmRhPlwiLFxuXHRcdFx0dHJhY2luZ0VuYWJsZWQ6IGZhbHNlXG5cdFx0fSk7XG5cdFx0aWYgKHJ1blRyZWUpIHJ1blRyZWUuZXh0cmEgPSB7XG5cdFx0XHQuLi5ydW5UcmVlLmV4dHJhLFxuXHRcdFx0W0xDX0NISUxEX0tFWV06IGNvbmZpZ1xuXHRcdH07XG5cdFx0aWYgKHByZXZpb3VzVmFsdWUgIT09IHZvaWQgMCAmJiBwcmV2aW91c1ZhbHVlW19DT05URVhUX1ZBUklBQkxFU19LRVldICE9PSB2b2lkIDApIHtcblx0XHRcdGlmIChydW5UcmVlID09PSB2b2lkIDApIHJ1blRyZWUgPSB7fTtcblx0XHRcdHJ1blRyZWVbX0NPTlRFWFRfVkFSSUFCTEVTX0tFWV0gPSBwcmV2aW91c1ZhbHVlW19DT05URVhUX1ZBUklBQkxFU19LRVldO1xuXHRcdH1cblx0XHRyZXR1cm4gc3RvcmFnZS5ydW4ocnVuVHJlZSwgY2FsbGJhY2spO1xuXHR9XG5cdGluaXRpYWxpemVHbG9iYWxJbnN0YW5jZShpbnN0YW5jZSkge1xuXHRcdGlmIChnZXRHbG9iYWxBc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlKCkgPT09IHZvaWQgMCkgc2V0R2xvYmFsQXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZShpbnN0YW5jZSk7XG5cdH1cbn07XG5jb25zdCBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uID0gbmV3IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXIoKTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLCBNb2NrQXN5bmNMb2NhbFN0b3JhZ2UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/singletons/async_local_storage/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/singletons/callbacks.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/singletons/callbacks.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   awaitAllCallbacks: () => (/* binding */ awaitAllCallbacks),\n/* harmony export */   consumeCallback: () => (/* binding */ consumeCallback)\n/* harmony export */ });\n/* harmony import */ var _tracer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tracer.js */ \"(ssr)/./node_modules/@langchain/core/dist/singletons/tracer.js\");\n/* harmony import */ var _async_local_storage_globals_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./async_local_storage/globals.js */ \"(ssr)/./node_modules/@langchain/core/dist/singletons/async_local_storage/globals.js\");\n/* harmony import */ var p_queue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! p-queue */ \"(ssr)/./node_modules/p-queue/dist/index.js\");\n\n\n\n\n//#region src/singletons/callbacks.ts\nlet queue;\n/**\n* Creates a queue using the p-queue library. The queue is configured to\n* auto-start and has a concurrency of 1, meaning it will process tasks\n* one at a time.\n*/\nfunction createQueue() {\n\tconst PQueue =  true ? p_queue__WEBPACK_IMPORTED_MODULE_2__[\"default\"] : p_queue__WEBPACK_IMPORTED_MODULE_2__;\n\treturn new PQueue({\n\t\tautoStart: true,\n\t\tconcurrency: 1\n\t});\n}\nfunction getQueue() {\n\tif (typeof queue === \"undefined\") queue = createQueue();\n\treturn queue;\n}\n/**\n* Consume a promise, either adding it to the queue or waiting for it to resolve\n* @param promiseFn Promise to consume\n* @param wait Whether to wait for the promise to resolve or resolve immediately\n*/\nasync function consumeCallback(promiseFn, wait) {\n\tif (wait === true) {\n\t\tconst asyncLocalStorageInstance = (0,_async_local_storage_globals_js__WEBPACK_IMPORTED_MODULE_1__.getGlobalAsyncLocalStorageInstance)();\n\t\tif (asyncLocalStorageInstance !== void 0) await asyncLocalStorageInstance.run(void 0, async () => promiseFn());\n\t\telse await promiseFn();\n\t} else {\n\t\tqueue = getQueue();\n\t\tqueue.add(async () => {\n\t\t\tconst asyncLocalStorageInstance = (0,_async_local_storage_globals_js__WEBPACK_IMPORTED_MODULE_1__.getGlobalAsyncLocalStorageInstance)();\n\t\t\tif (asyncLocalStorageInstance !== void 0) await asyncLocalStorageInstance.run(void 0, async () => promiseFn());\n\t\t\telse await promiseFn();\n\t\t});\n\t}\n}\n/**\n* Waits for all promises in the queue to resolve. If the queue is\n* undefined, it immediately resolves a promise.\n*/\nasync function awaitAllCallbacks() {\n\tconst defaultClient = (0,_tracer_js__WEBPACK_IMPORTED_MODULE_0__.getDefaultLangChainClientSingleton)();\n\tawait Promise.allSettled([typeof queue !== \"undefined\" ? queue.onIdle() : Promise.resolve(), defaultClient.awaitPendingTraceBatches()]);\n}\n\n//#endregion\n\n//# sourceMappingURL=callbacks.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy9jYWxsYmFja3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBaUU7QUFDcUI7QUFDdEQ7O0FBRWhDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsS0FBc0IsR0FBRywrQ0FBaUIsR0FBRyxvQ0FBUztBQUN0RTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLG1HQUFrQztBQUN0RTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxxQ0FBcUMsbUdBQWtDO0FBQ3ZFO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsOEVBQWtDO0FBQ3pEO0FBQ0E7O0FBRUE7QUFDOEM7QUFDOUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9zaW5nbGV0b25zL2NhbGxiYWNrcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXREZWZhdWx0TGFuZ0NoYWluQ2xpZW50U2luZ2xldG9uIH0gZnJvbSBcIi4vdHJhY2VyLmpzXCI7XG5pbXBvcnQgeyBnZXRHbG9iYWxBc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlIH0gZnJvbSBcIi4vYXN5bmNfbG9jYWxfc3RvcmFnZS9nbG9iYWxzLmpzXCI7XG5pbXBvcnQgUFF1ZXVlTW9kIGZyb20gXCJwLXF1ZXVlXCI7XG5cbi8vI3JlZ2lvbiBzcmMvc2luZ2xldG9ucy9jYWxsYmFja3MudHNcbmxldCBxdWV1ZTtcbi8qKlxuKiBDcmVhdGVzIGEgcXVldWUgdXNpbmcgdGhlIHAtcXVldWUgbGlicmFyeS4gVGhlIHF1ZXVlIGlzIGNvbmZpZ3VyZWQgdG9cbiogYXV0by1zdGFydCBhbmQgaGFzIGEgY29uY3VycmVuY3kgb2YgMSwgbWVhbmluZyBpdCB3aWxsIHByb2Nlc3MgdGFza3Ncbiogb25lIGF0IGEgdGltZS5cbiovXG5mdW5jdGlvbiBjcmVhdGVRdWV1ZSgpIHtcblx0Y29uc3QgUFF1ZXVlID0gXCJkZWZhdWx0XCIgaW4gUFF1ZXVlTW9kID8gUFF1ZXVlTW9kLmRlZmF1bHQgOiBQUXVldWVNb2Q7XG5cdHJldHVybiBuZXcgUFF1ZXVlKHtcblx0XHRhdXRvU3RhcnQ6IHRydWUsXG5cdFx0Y29uY3VycmVuY3k6IDFcblx0fSk7XG59XG5mdW5jdGlvbiBnZXRRdWV1ZSgpIHtcblx0aWYgKHR5cGVvZiBxdWV1ZSA9PT0gXCJ1bmRlZmluZWRcIikgcXVldWUgPSBjcmVhdGVRdWV1ZSgpO1xuXHRyZXR1cm4gcXVldWU7XG59XG4vKipcbiogQ29uc3VtZSBhIHByb21pc2UsIGVpdGhlciBhZGRpbmcgaXQgdG8gdGhlIHF1ZXVlIG9yIHdhaXRpbmcgZm9yIGl0IHRvIHJlc29sdmVcbiogQHBhcmFtIHByb21pc2VGbiBQcm9taXNlIHRvIGNvbnN1bWVcbiogQHBhcmFtIHdhaXQgV2hldGhlciB0byB3YWl0IGZvciB0aGUgcHJvbWlzZSB0byByZXNvbHZlIG9yIHJlc29sdmUgaW1tZWRpYXRlbHlcbiovXG5hc3luYyBmdW5jdGlvbiBjb25zdW1lQ2FsbGJhY2socHJvbWlzZUZuLCB3YWl0KSB7XG5cdGlmICh3YWl0ID09PSB0cnVlKSB7XG5cdFx0Y29uc3QgYXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZSA9IGdldEdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UoKTtcblx0XHRpZiAoYXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZSAhPT0gdm9pZCAwKSBhd2FpdCBhc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlLnJ1bih2b2lkIDAsIGFzeW5jICgpID0+IHByb21pc2VGbigpKTtcblx0XHRlbHNlIGF3YWl0IHByb21pc2VGbigpO1xuXHR9IGVsc2Uge1xuXHRcdHF1ZXVlID0gZ2V0UXVldWUoKTtcblx0XHRxdWV1ZS5hZGQoYXN5bmMgKCkgPT4ge1xuXHRcdFx0Y29uc3QgYXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZSA9IGdldEdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UoKTtcblx0XHRcdGlmIChhc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlICE9PSB2b2lkIDApIGF3YWl0IGFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UucnVuKHZvaWQgMCwgYXN5bmMgKCkgPT4gcHJvbWlzZUZuKCkpO1xuXHRcdFx0ZWxzZSBhd2FpdCBwcm9taXNlRm4oKTtcblx0XHR9KTtcblx0fVxufVxuLyoqXG4qIFdhaXRzIGZvciBhbGwgcHJvbWlzZXMgaW4gdGhlIHF1ZXVlIHRvIHJlc29sdmUuIElmIHRoZSBxdWV1ZSBpc1xuKiB1bmRlZmluZWQsIGl0IGltbWVkaWF0ZWx5IHJlc29sdmVzIGEgcHJvbWlzZS5cbiovXG5hc3luYyBmdW5jdGlvbiBhd2FpdEFsbENhbGxiYWNrcygpIHtcblx0Y29uc3QgZGVmYXVsdENsaWVudCA9IGdldERlZmF1bHRMYW5nQ2hhaW5DbGllbnRTaW5nbGV0b24oKTtcblx0YXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKFt0eXBlb2YgcXVldWUgIT09IFwidW5kZWZpbmVkXCIgPyBxdWV1ZS5vbklkbGUoKSA6IFByb21pc2UucmVzb2x2ZSgpLCBkZWZhdWx0Q2xpZW50LmF3YWl0UGVuZGluZ1RyYWNlQmF0Y2hlcygpXSk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgYXdhaXRBbGxDYWxsYmFja3MsIGNvbnN1bWVDYWxsYmFjayB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FsbGJhY2tzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/singletons/callbacks.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/singletons/index.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/singletons/index.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncLocalStorageProviderSingleton: () => (/* reexport safe */ _async_local_storage_index_js__WEBPACK_IMPORTED_MODULE_2__.AsyncLocalStorageProviderSingleton),\n/* harmony export */   MockAsyncLocalStorage: () => (/* reexport safe */ _async_local_storage_index_js__WEBPACK_IMPORTED_MODULE_2__.MockAsyncLocalStorage),\n/* harmony export */   _CONTEXT_VARIABLES_KEY: () => (/* reexport safe */ _async_local_storage_globals_js__WEBPACK_IMPORTED_MODULE_1__._CONTEXT_VARIABLES_KEY),\n/* harmony export */   singletons_exports: () => (/* binding */ singletons_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _async_local_storage_globals_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./async_local_storage/globals.js */ \"(ssr)/./node_modules/@langchain/core/dist/singletons/async_local_storage/globals.js\");\n/* harmony import */ var _async_local_storage_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./async_local_storage/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/singletons/async_local_storage/index.js\");\n\n\n\n\n//#region src/singletons/index.ts\nvar singletons_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(singletons_exports, {\n\tAsyncLocalStorageProviderSingleton: () => _async_local_storage_index_js__WEBPACK_IMPORTED_MODULE_2__.AsyncLocalStorageProviderSingleton,\n\tMockAsyncLocalStorage: () => _async_local_storage_index_js__WEBPACK_IMPORTED_MODULE_2__.MockAsyncLocalStorage,\n\t_CONTEXT_VARIABLES_KEY: () => _async_local_storage_globals_js__WEBPACK_IMPORTED_MODULE_1__._CONTEXT_VARIABLES_KEY\n});\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTJEO0FBQ2U7QUFDaUM7O0FBRTNHO0FBQ0E7QUFDQSxzRUFBUTtBQUNSLDJDQUEyQyw2RkFBa0M7QUFDN0UsOEJBQThCLGdGQUFxQjtBQUNuRCwrQkFBK0IsbUZBQXNCO0FBQ3JELENBQUM7O0FBRUQ7QUFDaUg7QUFDakgiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9zaW5nbGV0b25zL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IF9DT05URVhUX1ZBUklBQkxFU19LRVkgfSBmcm9tIFwiLi9hc3luY19sb2NhbF9zdG9yYWdlL2dsb2JhbHMuanNcIjtcbmltcG9ydCB7IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24sIE1vY2tBc3luY0xvY2FsU3RvcmFnZSB9IGZyb20gXCIuL2FzeW5jX2xvY2FsX3N0b3JhZ2UvaW5kZXguanNcIjtcblxuLy8jcmVnaW9uIHNyYy9zaW5nbGV0b25zL2luZGV4LnRzXG52YXIgc2luZ2xldG9uc19leHBvcnRzID0ge307XG5fX2V4cG9ydChzaW5nbGV0b25zX2V4cG9ydHMsIHtcblx0QXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbjogKCkgPT4gQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbixcblx0TW9ja0FzeW5jTG9jYWxTdG9yYWdlOiAoKSA9PiBNb2NrQXN5bmNMb2NhbFN0b3JhZ2UsXG5cdF9DT05URVhUX1ZBUklBQkxFU19LRVk6ICgpID0+IF9DT05URVhUX1ZBUklBQkxFU19LRVlcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24sIE1vY2tBc3luY0xvY2FsU3RvcmFnZSwgX0NPTlRFWFRfVkFSSUFCTEVTX0tFWSwgc2luZ2xldG9uc19leHBvcnRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/singletons/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/singletons/tracer.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/singletons/tracer.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getDefaultLangChainClientSingleton: () => (/* binding */ getDefaultLangChainClientSingleton)\n/* harmony export */ });\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/env.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var langsmith__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! langsmith */ \"(ssr)/./node_modules/langsmith/index.js\");\n\n\n\n//#region src/singletons/tracer.ts\nlet client;\nconst getDefaultLangChainClientSingleton = () => {\n\tif (client === void 0) {\n\t\tconst clientParams = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"LANGCHAIN_CALLBACKS_BACKGROUND\") === \"false\" ? { blockOnRootRunFinalization: true } : {};\n\t\tclient = new langsmith__WEBPACK_IMPORTED_MODULE_1__.Client(clientParams);\n\t}\n\treturn client;\n};\n\n//#endregion\n\n//# sourceMappingURL=tracer.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy90cmFjZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXlEO0FBQ3RCOztBQUVuQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixxRUFBc0IsbURBQW1ELG1DQUFtQztBQUNuSSxlQUFlLDZDQUFNO0FBQ3JCO0FBQ0E7QUFDQTs7QUFFQTtBQUM4QztBQUM5QyIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3NpbmdsZXRvbnMvdHJhY2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEVudmlyb25tZW50VmFyaWFibGUgfSBmcm9tIFwiLi4vdXRpbHMvZW52LmpzXCI7XG5pbXBvcnQgeyBDbGllbnQgfSBmcm9tIFwibGFuZ3NtaXRoXCI7XG5cbi8vI3JlZ2lvbiBzcmMvc2luZ2xldG9ucy90cmFjZXIudHNcbmxldCBjbGllbnQ7XG5jb25zdCBnZXREZWZhdWx0TGFuZ0NoYWluQ2xpZW50U2luZ2xldG9uID0gKCkgPT4ge1xuXHRpZiAoY2xpZW50ID09PSB2b2lkIDApIHtcblx0XHRjb25zdCBjbGllbnRQYXJhbXMgPSBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX0NBTExCQUNLU19CQUNLR1JPVU5EXCIpID09PSBcImZhbHNlXCIgPyB7IGJsb2NrT25Sb290UnVuRmluYWxpemF0aW9uOiB0cnVlIH0gOiB7fTtcblx0XHRjbGllbnQgPSBuZXcgQ2xpZW50KGNsaWVudFBhcmFtcyk7XG5cdH1cblx0cmV0dXJuIGNsaWVudDtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZ2V0RGVmYXVsdExhbmdDaGFpbkNsaWVudFNpbmdsZXRvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhY2VyLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/singletons/tracer.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/stores.js":
/*!*****************************************************!*\
  !*** ./node_modules/@langchain/core/dist/stores.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseStore: () => (/* binding */ BaseStore),\n/* harmony export */   InMemoryStore: () => (/* binding */ InMemoryStore),\n/* harmony export */   stores_exports: () => (/* binding */ stores_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./load/serializable.js */ \"(ssr)/./node_modules/@langchain/core/dist/load/serializable.js\");\n\n\n\n//#region src/stores.ts\nvar stores_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(stores_exports, {\n\tBaseStore: () => BaseStore,\n\tInMemoryStore: () => InMemoryStore\n});\n/**\n* Abstract interface for a key-value store.\n*/\nvar BaseStore = class extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_1__.Serializable {};\n/**\n* In-memory implementation of the BaseStore using a dictionary. Used for\n* storing key-value pairs in memory.\n* @example\n* ```typescript\n* const store = new InMemoryStore<BaseMessage>();\n* await store.mset(\n*   Array.from({ length: 5 }).map((_, index) => [\n*     `message:id:${index}`,\n*     index % 2 === 0\n*       ? new AIMessage(\"ai stuff...\")\n*       : new HumanMessage(\"human stuff...\"),\n*   ]),\n* );\n*\n* const retrievedMessages = await store.mget([\"message:id:0\", \"message:id:1\"]);\n* await store.mdelete(await store.yieldKeys(\"message:id:\").toArray());\n* ```\n*/\nvar InMemoryStore = class extends BaseStore {\n\tlc_namespace = [\"langchain\", \"storage\"];\n\tstore = {};\n\t/**\n\t* Retrieves the values associated with the given keys from the store.\n\t* @param keys Keys to retrieve values for.\n\t* @returns Array of values associated with the given keys.\n\t*/\n\tasync mget(keys) {\n\t\treturn keys.map((key) => this.store[key]);\n\t}\n\t/**\n\t* Sets the values for the given keys in the store.\n\t* @param keyValuePairs Array of key-value pairs to set in the store.\n\t* @returns Promise that resolves when all key-value pairs have been set.\n\t*/\n\tasync mset(keyValuePairs) {\n\t\tfor (const [key, value] of keyValuePairs) this.store[key] = value;\n\t}\n\t/**\n\t* Deletes the given keys and their associated values from the store.\n\t* @param keys Keys to delete from the store.\n\t* @returns Promise that resolves when all keys have been deleted.\n\t*/\n\tasync mdelete(keys) {\n\t\tfor (const key of keys) delete this.store[key];\n\t}\n\t/**\n\t* Asynchronous generator that yields keys from the store. If a prefix is\n\t* provided, it only yields keys that start with the prefix.\n\t* @param prefix Optional prefix to filter keys.\n\t* @returns AsyncGenerator that yields keys from the store.\n\t*/\n\tasync *yieldKeys(prefix) {\n\t\tconst keys = Object.keys(this.store);\n\t\tfor (const key of keys) if (prefix === void 0 || key.startsWith(prefix)) yield key;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=stores.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc3RvcmVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTBEO0FBQ0o7O0FBRXREO0FBQ0E7QUFDQSxzRUFBUTtBQUNSO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLCtEQUFZO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFdBQVc7QUFDNUIsb0JBQW9CLE1BQU07QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ29EO0FBQ3BEIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc3RvcmVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4vX3ZpcnR1YWwvcm9sbGRvd25fcnVudGltZS5qc1wiO1xuaW1wb3J0IHsgU2VyaWFsaXphYmxlIH0gZnJvbSBcIi4vbG9hZC9zZXJpYWxpemFibGUuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9zdG9yZXMudHNcbnZhciBzdG9yZXNfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQoc3RvcmVzX2V4cG9ydHMsIHtcblx0QmFzZVN0b3JlOiAoKSA9PiBCYXNlU3RvcmUsXG5cdEluTWVtb3J5U3RvcmU6ICgpID0+IEluTWVtb3J5U3RvcmVcbn0pO1xuLyoqXG4qIEFic3RyYWN0IGludGVyZmFjZSBmb3IgYSBrZXktdmFsdWUgc3RvcmUuXG4qL1xudmFyIEJhc2VTdG9yZSA9IGNsYXNzIGV4dGVuZHMgU2VyaWFsaXphYmxlIHt9O1xuLyoqXG4qIEluLW1lbW9yeSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgQmFzZVN0b3JlIHVzaW5nIGEgZGljdGlvbmFyeS4gVXNlZCBmb3Jcbiogc3RvcmluZyBrZXktdmFsdWUgcGFpcnMgaW4gbWVtb3J5LlxuKiBAZXhhbXBsZVxuKiBgYGB0eXBlc2NyaXB0XG4qIGNvbnN0IHN0b3JlID0gbmV3IEluTWVtb3J5U3RvcmU8QmFzZU1lc3NhZ2U+KCk7XG4qIGF3YWl0IHN0b3JlLm1zZXQoXG4qICAgQXJyYXkuZnJvbSh7IGxlbmd0aDogNSB9KS5tYXAoKF8sIGluZGV4KSA9PiBbXG4qICAgICBgbWVzc2FnZTppZDoke2luZGV4fWAsXG4qICAgICBpbmRleCAlIDIgPT09IDBcbiogICAgICAgPyBuZXcgQUlNZXNzYWdlKFwiYWkgc3R1ZmYuLi5cIilcbiogICAgICAgOiBuZXcgSHVtYW5NZXNzYWdlKFwiaHVtYW4gc3R1ZmYuLi5cIiksXG4qICAgXSksXG4qICk7XG4qXG4qIGNvbnN0IHJldHJpZXZlZE1lc3NhZ2VzID0gYXdhaXQgc3RvcmUubWdldChbXCJtZXNzYWdlOmlkOjBcIiwgXCJtZXNzYWdlOmlkOjFcIl0pO1xuKiBhd2FpdCBzdG9yZS5tZGVsZXRlKGF3YWl0IHN0b3JlLnlpZWxkS2V5cyhcIm1lc3NhZ2U6aWQ6XCIpLnRvQXJyYXkoKSk7XG4qIGBgYFxuKi9cbnZhciBJbk1lbW9yeVN0b3JlID0gY2xhc3MgZXh0ZW5kcyBCYXNlU3RvcmUge1xuXHRsY19uYW1lc3BhY2UgPSBbXCJsYW5nY2hhaW5cIiwgXCJzdG9yYWdlXCJdO1xuXHRzdG9yZSA9IHt9O1xuXHQvKipcblx0KiBSZXRyaWV2ZXMgdGhlIHZhbHVlcyBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuIGtleXMgZnJvbSB0aGUgc3RvcmUuXG5cdCogQHBhcmFtIGtleXMgS2V5cyB0byByZXRyaWV2ZSB2YWx1ZXMgZm9yLlxuXHQqIEByZXR1cm5zIEFycmF5IG9mIHZhbHVlcyBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuIGtleXMuXG5cdCovXG5cdGFzeW5jIG1nZXQoa2V5cykge1xuXHRcdHJldHVybiBrZXlzLm1hcCgoa2V5KSA9PiB0aGlzLnN0b3JlW2tleV0pO1xuXHR9XG5cdC8qKlxuXHQqIFNldHMgdGhlIHZhbHVlcyBmb3IgdGhlIGdpdmVuIGtleXMgaW4gdGhlIHN0b3JlLlxuXHQqIEBwYXJhbSBrZXlWYWx1ZVBhaXJzIEFycmF5IG9mIGtleS12YWx1ZSBwYWlycyB0byBzZXQgaW4gdGhlIHN0b3JlLlxuXHQqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIGFsbCBrZXktdmFsdWUgcGFpcnMgaGF2ZSBiZWVuIHNldC5cblx0Ki9cblx0YXN5bmMgbXNldChrZXlWYWx1ZVBhaXJzKSB7XG5cdFx0Zm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2Yga2V5VmFsdWVQYWlycykgdGhpcy5zdG9yZVtrZXldID0gdmFsdWU7XG5cdH1cblx0LyoqXG5cdCogRGVsZXRlcyB0aGUgZ2l2ZW4ga2V5cyBhbmQgdGhlaXIgYXNzb2NpYXRlZCB2YWx1ZXMgZnJvbSB0aGUgc3RvcmUuXG5cdCogQHBhcmFtIGtleXMgS2V5cyB0byBkZWxldGUgZnJvbSB0aGUgc3RvcmUuXG5cdCogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gYWxsIGtleXMgaGF2ZSBiZWVuIGRlbGV0ZWQuXG5cdCovXG5cdGFzeW5jIG1kZWxldGUoa2V5cykge1xuXHRcdGZvciAoY29uc3Qga2V5IG9mIGtleXMpIGRlbGV0ZSB0aGlzLnN0b3JlW2tleV07XG5cdH1cblx0LyoqXG5cdCogQXN5bmNocm9ub3VzIGdlbmVyYXRvciB0aGF0IHlpZWxkcyBrZXlzIGZyb20gdGhlIHN0b3JlLiBJZiBhIHByZWZpeCBpc1xuXHQqIHByb3ZpZGVkLCBpdCBvbmx5IHlpZWxkcyBrZXlzIHRoYXQgc3RhcnQgd2l0aCB0aGUgcHJlZml4LlxuXHQqIEBwYXJhbSBwcmVmaXggT3B0aW9uYWwgcHJlZml4IHRvIGZpbHRlciBrZXlzLlxuXHQqIEByZXR1cm5zIEFzeW5jR2VuZXJhdG9yIHRoYXQgeWllbGRzIGtleXMgZnJvbSB0aGUgc3RvcmUuXG5cdCovXG5cdGFzeW5jICp5aWVsZEtleXMocHJlZml4KSB7XG5cdFx0Y29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuc3RvcmUpO1xuXHRcdGZvciAoY29uc3Qga2V5IG9mIGtleXMpIGlmIChwcmVmaXggPT09IHZvaWQgMCB8fCBrZXkuc3RhcnRzV2l0aChwcmVmaXgpKSB5aWVsZCBrZXk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQmFzZVN0b3JlLCBJbk1lbW9yeVN0b3JlLCBzdG9yZXNfZXhwb3J0cyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RvcmVzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/stores.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/structured_query/base.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/structured_query/base.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseTranslator: () => (/* binding */ BaseTranslator),\n/* harmony export */   BasicTranslator: () => (/* binding */ BasicTranslator)\n/* harmony export */ });\n/* harmony import */ var _ir_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ir.js */ \"(ssr)/./node_modules/@langchain/core/dist/structured_query/ir.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ \"(ssr)/./node_modules/@langchain/core/dist/structured_query/utils.js\");\n\n\n\n//#region src/structured_query/base.ts\n/**\n* Abstract class that provides a blueprint for creating specific\n* translator classes. Defines two abstract methods: formatFunction and\n* mergeFilters.\n*/\nvar BaseTranslator = class extends _ir_js__WEBPACK_IMPORTED_MODULE_0__.Visitor {};\n/**\n* Class that extends the BaseTranslator class and provides concrete\n* implementations for the abstract methods. Also declares three types:\n* VisitOperationOutput, VisitComparisonOutput, and\n* VisitStructuredQueryOutput, which are used as the return types for the\n* visitOperation, visitComparison, and visitStructuredQuery methods\n* respectively.\n*/\nvar BasicTranslator = class extends BaseTranslator {\n\tallowedOperators;\n\tallowedComparators;\n\tconstructor(opts) {\n\t\tsuper();\n\t\tthis.allowedOperators = opts?.allowedOperators ?? [_ir_js__WEBPACK_IMPORTED_MODULE_0__.Operators.and, _ir_js__WEBPACK_IMPORTED_MODULE_0__.Operators.or];\n\t\tthis.allowedComparators = opts?.allowedComparators ?? [\n\t\t\t_ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.eq,\n\t\t\t_ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.ne,\n\t\t\t_ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.gt,\n\t\t\t_ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.gte,\n\t\t\t_ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.lt,\n\t\t\t_ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.lte\n\t\t];\n\t}\n\tformatFunction(func) {\n\t\tif (func in _ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators) {\n\t\t\tif (this.allowedComparators.length > 0 && this.allowedComparators.indexOf(func) === -1) throw new Error(`Comparator ${func} not allowed. Allowed comparators: ${this.allowedComparators.join(\", \")}`);\n\t\t} else if (func in _ir_js__WEBPACK_IMPORTED_MODULE_0__.Operators) {\n\t\t\tif (this.allowedOperators.length > 0 && this.allowedOperators.indexOf(func) === -1) throw new Error(`Operator ${func} not allowed. Allowed operators: ${this.allowedOperators.join(\", \")}`);\n\t\t} else throw new Error(\"Unknown comparator or operator\");\n\t\treturn `$${func}`;\n\t}\n\t/**\n\t* Visits an operation and returns a result.\n\t* @param operation The operation to visit.\n\t* @returns The result of visiting the operation.\n\t*/\n\tvisitOperation(operation) {\n\t\tconst args = operation.args?.map((arg) => arg.accept(this));\n\t\treturn { [this.formatFunction(operation.operator)]: args };\n\t}\n\t/**\n\t* Visits a comparison and returns a result.\n\t* @param comparison The comparison to visit.\n\t* @returns The result of visiting the comparison.\n\t*/\n\tvisitComparison(comparison) {\n\t\treturn { [comparison.attribute]: { [this.formatFunction(comparison.comparator)]: (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.castValue)(comparison.value) } };\n\t}\n\t/**\n\t* Visits a structured query and returns a result.\n\t* @param query The structured query to visit.\n\t* @returns The result of visiting the structured query.\n\t*/\n\tvisitStructuredQuery(query) {\n\t\tlet nextArg = {};\n\t\tif (query.filter) nextArg = { filter: query.filter.accept(this) };\n\t\treturn nextArg;\n\t}\n\tmergeFilters(defaultFilter, generatedFilter, mergeType = \"and\", forceDefaultFilter = false) {\n\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isFilterEmpty)(defaultFilter) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isFilterEmpty)(generatedFilter)) return void 0;\n\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isFilterEmpty)(defaultFilter) || mergeType === \"replace\") {\n\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isFilterEmpty)(generatedFilter)) return void 0;\n\t\t\treturn generatedFilter;\n\t\t}\n\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isFilterEmpty)(generatedFilter)) {\n\t\t\tif (forceDefaultFilter) return defaultFilter;\n\t\t\tif (mergeType === \"and\") return void 0;\n\t\t\treturn defaultFilter;\n\t\t}\n\t\tif (mergeType === \"and\") return { $and: [defaultFilter, generatedFilter] };\n\t\telse if (mergeType === \"or\") return { $or: [defaultFilter, generatedFilter] };\n\t\telse throw new Error(\"Unknown merge type\");\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=base.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc3RydWN0dXJlZF9xdWVyeS9iYXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBMEQ7QUFDSjs7QUFFdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLDJDQUFPO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELDZDQUFTLE1BQU0sNkNBQVM7QUFDN0U7QUFDQSxHQUFHLCtDQUFXO0FBQ2QsR0FBRywrQ0FBVztBQUNkLEdBQUcsK0NBQVc7QUFDZCxHQUFHLCtDQUFXO0FBQ2QsR0FBRywrQ0FBVztBQUNkLEdBQUcsK0NBQVc7QUFDZDtBQUNBO0FBQ0E7QUFDQSxjQUFjLCtDQUFXO0FBQ3pCLHlIQUF5SCxNQUFNLG9DQUFvQyxtQ0FBbUM7QUFDdE0sSUFBSSxpQkFBaUIsNkNBQVM7QUFDOUIsbUhBQW1ILE1BQU0sa0NBQWtDLGlDQUFpQztBQUM1TCxJQUFJO0FBQ0osYUFBYSxLQUFLO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLDBCQUEwQiw4Q0FBOEMsb0RBQVM7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQSxNQUFNLHdEQUFhLG1CQUFtQix3REFBYTtBQUNuRCxNQUFNLHdEQUFhO0FBQ25CLE9BQU8sd0RBQWE7QUFDcEI7QUFDQTtBQUNBLE1BQU0sd0RBQWE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0M7QUFDcEMsd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQTs7QUFFQTtBQUMyQztBQUMzQyIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3N0cnVjdHVyZWRfcXVlcnkvYmFzZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wYXJhdG9ycywgT3BlcmF0b3JzLCBWaXNpdG9yIH0gZnJvbSBcIi4vaXIuanNcIjtcbmltcG9ydCB7IGNhc3RWYWx1ZSwgaXNGaWx0ZXJFbXB0eSB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvc3RydWN0dXJlZF9xdWVyeS9iYXNlLnRzXG4vKipcbiogQWJzdHJhY3QgY2xhc3MgdGhhdCBwcm92aWRlcyBhIGJsdWVwcmludCBmb3IgY3JlYXRpbmcgc3BlY2lmaWNcbiogdHJhbnNsYXRvciBjbGFzc2VzLiBEZWZpbmVzIHR3byBhYnN0cmFjdCBtZXRob2RzOiBmb3JtYXRGdW5jdGlvbiBhbmRcbiogbWVyZ2VGaWx0ZXJzLlxuKi9cbnZhciBCYXNlVHJhbnNsYXRvciA9IGNsYXNzIGV4dGVuZHMgVmlzaXRvciB7fTtcbi8qKlxuKiBDbGFzcyB0aGF0IGV4dGVuZHMgdGhlIEJhc2VUcmFuc2xhdG9yIGNsYXNzIGFuZCBwcm92aWRlcyBjb25jcmV0ZVxuKiBpbXBsZW1lbnRhdGlvbnMgZm9yIHRoZSBhYnN0cmFjdCBtZXRob2RzLiBBbHNvIGRlY2xhcmVzIHRocmVlIHR5cGVzOlxuKiBWaXNpdE9wZXJhdGlvbk91dHB1dCwgVmlzaXRDb21wYXJpc29uT3V0cHV0LCBhbmRcbiogVmlzaXRTdHJ1Y3R1cmVkUXVlcnlPdXRwdXQsIHdoaWNoIGFyZSB1c2VkIGFzIHRoZSByZXR1cm4gdHlwZXMgZm9yIHRoZVxuKiB2aXNpdE9wZXJhdGlvbiwgdmlzaXRDb21wYXJpc29uLCBhbmQgdmlzaXRTdHJ1Y3R1cmVkUXVlcnkgbWV0aG9kc1xuKiByZXNwZWN0aXZlbHkuXG4qL1xudmFyIEJhc2ljVHJhbnNsYXRvciA9IGNsYXNzIGV4dGVuZHMgQmFzZVRyYW5zbGF0b3Ige1xuXHRhbGxvd2VkT3BlcmF0b3JzO1xuXHRhbGxvd2VkQ29tcGFyYXRvcnM7XG5cdGNvbnN0cnVjdG9yKG9wdHMpIHtcblx0XHRzdXBlcigpO1xuXHRcdHRoaXMuYWxsb3dlZE9wZXJhdG9ycyA9IG9wdHM/LmFsbG93ZWRPcGVyYXRvcnMgPz8gW09wZXJhdG9ycy5hbmQsIE9wZXJhdG9ycy5vcl07XG5cdFx0dGhpcy5hbGxvd2VkQ29tcGFyYXRvcnMgPSBvcHRzPy5hbGxvd2VkQ29tcGFyYXRvcnMgPz8gW1xuXHRcdFx0Q29tcGFyYXRvcnMuZXEsXG5cdFx0XHRDb21wYXJhdG9ycy5uZSxcblx0XHRcdENvbXBhcmF0b3JzLmd0LFxuXHRcdFx0Q29tcGFyYXRvcnMuZ3RlLFxuXHRcdFx0Q29tcGFyYXRvcnMubHQsXG5cdFx0XHRDb21wYXJhdG9ycy5sdGVcblx0XHRdO1xuXHR9XG5cdGZvcm1hdEZ1bmN0aW9uKGZ1bmMpIHtcblx0XHRpZiAoZnVuYyBpbiBDb21wYXJhdG9ycykge1xuXHRcdFx0aWYgKHRoaXMuYWxsb3dlZENvbXBhcmF0b3JzLmxlbmd0aCA+IDAgJiYgdGhpcy5hbGxvd2VkQ29tcGFyYXRvcnMuaW5kZXhPZihmdW5jKSA9PT0gLTEpIHRocm93IG5ldyBFcnJvcihgQ29tcGFyYXRvciAke2Z1bmN9IG5vdCBhbGxvd2VkLiBBbGxvd2VkIGNvbXBhcmF0b3JzOiAke3RoaXMuYWxsb3dlZENvbXBhcmF0b3JzLmpvaW4oXCIsIFwiKX1gKTtcblx0XHR9IGVsc2UgaWYgKGZ1bmMgaW4gT3BlcmF0b3JzKSB7XG5cdFx0XHRpZiAodGhpcy5hbGxvd2VkT3BlcmF0b3JzLmxlbmd0aCA+IDAgJiYgdGhpcy5hbGxvd2VkT3BlcmF0b3JzLmluZGV4T2YoZnVuYykgPT09IC0xKSB0aHJvdyBuZXcgRXJyb3IoYE9wZXJhdG9yICR7ZnVuY30gbm90IGFsbG93ZWQuIEFsbG93ZWQgb3BlcmF0b3JzOiAke3RoaXMuYWxsb3dlZE9wZXJhdG9ycy5qb2luKFwiLCBcIil9YCk7XG5cdFx0fSBlbHNlIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gY29tcGFyYXRvciBvciBvcGVyYXRvclwiKTtcblx0XHRyZXR1cm4gYCQke2Z1bmN9YDtcblx0fVxuXHQvKipcblx0KiBWaXNpdHMgYW4gb3BlcmF0aW9uIGFuZCByZXR1cm5zIGEgcmVzdWx0LlxuXHQqIEBwYXJhbSBvcGVyYXRpb24gVGhlIG9wZXJhdGlvbiB0byB2aXNpdC5cblx0KiBAcmV0dXJucyBUaGUgcmVzdWx0IG9mIHZpc2l0aW5nIHRoZSBvcGVyYXRpb24uXG5cdCovXG5cdHZpc2l0T3BlcmF0aW9uKG9wZXJhdGlvbikge1xuXHRcdGNvbnN0IGFyZ3MgPSBvcGVyYXRpb24uYXJncz8ubWFwKChhcmcpID0+IGFyZy5hY2NlcHQodGhpcykpO1xuXHRcdHJldHVybiB7IFt0aGlzLmZvcm1hdEZ1bmN0aW9uKG9wZXJhdGlvbi5vcGVyYXRvcildOiBhcmdzIH07XG5cdH1cblx0LyoqXG5cdCogVmlzaXRzIGEgY29tcGFyaXNvbiBhbmQgcmV0dXJucyBhIHJlc3VsdC5cblx0KiBAcGFyYW0gY29tcGFyaXNvbiBUaGUgY29tcGFyaXNvbiB0byB2aXNpdC5cblx0KiBAcmV0dXJucyBUaGUgcmVzdWx0IG9mIHZpc2l0aW5nIHRoZSBjb21wYXJpc29uLlxuXHQqL1xuXHR2aXNpdENvbXBhcmlzb24oY29tcGFyaXNvbikge1xuXHRcdHJldHVybiB7IFtjb21wYXJpc29uLmF0dHJpYnV0ZV06IHsgW3RoaXMuZm9ybWF0RnVuY3Rpb24oY29tcGFyaXNvbi5jb21wYXJhdG9yKV06IGNhc3RWYWx1ZShjb21wYXJpc29uLnZhbHVlKSB9IH07XG5cdH1cblx0LyoqXG5cdCogVmlzaXRzIGEgc3RydWN0dXJlZCBxdWVyeSBhbmQgcmV0dXJucyBhIHJlc3VsdC5cblx0KiBAcGFyYW0gcXVlcnkgVGhlIHN0cnVjdHVyZWQgcXVlcnkgdG8gdmlzaXQuXG5cdCogQHJldHVybnMgVGhlIHJlc3VsdCBvZiB2aXNpdGluZyB0aGUgc3RydWN0dXJlZCBxdWVyeS5cblx0Ki9cblx0dmlzaXRTdHJ1Y3R1cmVkUXVlcnkocXVlcnkpIHtcblx0XHRsZXQgbmV4dEFyZyA9IHt9O1xuXHRcdGlmIChxdWVyeS5maWx0ZXIpIG5leHRBcmcgPSB7IGZpbHRlcjogcXVlcnkuZmlsdGVyLmFjY2VwdCh0aGlzKSB9O1xuXHRcdHJldHVybiBuZXh0QXJnO1xuXHR9XG5cdG1lcmdlRmlsdGVycyhkZWZhdWx0RmlsdGVyLCBnZW5lcmF0ZWRGaWx0ZXIsIG1lcmdlVHlwZSA9IFwiYW5kXCIsIGZvcmNlRGVmYXVsdEZpbHRlciA9IGZhbHNlKSB7XG5cdFx0aWYgKGlzRmlsdGVyRW1wdHkoZGVmYXVsdEZpbHRlcikgJiYgaXNGaWx0ZXJFbXB0eShnZW5lcmF0ZWRGaWx0ZXIpKSByZXR1cm4gdm9pZCAwO1xuXHRcdGlmIChpc0ZpbHRlckVtcHR5KGRlZmF1bHRGaWx0ZXIpIHx8IG1lcmdlVHlwZSA9PT0gXCJyZXBsYWNlXCIpIHtcblx0XHRcdGlmIChpc0ZpbHRlckVtcHR5KGdlbmVyYXRlZEZpbHRlcikpIHJldHVybiB2b2lkIDA7XG5cdFx0XHRyZXR1cm4gZ2VuZXJhdGVkRmlsdGVyO1xuXHRcdH1cblx0XHRpZiAoaXNGaWx0ZXJFbXB0eShnZW5lcmF0ZWRGaWx0ZXIpKSB7XG5cdFx0XHRpZiAoZm9yY2VEZWZhdWx0RmlsdGVyKSByZXR1cm4gZGVmYXVsdEZpbHRlcjtcblx0XHRcdGlmIChtZXJnZVR5cGUgPT09IFwiYW5kXCIpIHJldHVybiB2b2lkIDA7XG5cdFx0XHRyZXR1cm4gZGVmYXVsdEZpbHRlcjtcblx0XHR9XG5cdFx0aWYgKG1lcmdlVHlwZSA9PT0gXCJhbmRcIikgcmV0dXJuIHsgJGFuZDogW2RlZmF1bHRGaWx0ZXIsIGdlbmVyYXRlZEZpbHRlcl0gfTtcblx0XHRlbHNlIGlmIChtZXJnZVR5cGUgPT09IFwib3JcIikgcmV0dXJuIHsgJG9yOiBbZGVmYXVsdEZpbHRlciwgZ2VuZXJhdGVkRmlsdGVyXSB9O1xuXHRcdGVsc2UgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBtZXJnZSB0eXBlXCIpO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEJhc2VUcmFuc2xhdG9yLCBCYXNpY1RyYW5zbGF0b3IgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJhc2UuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/structured_query/base.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/structured_query/functional.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/structured_query/functional.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FunctionalTranslator: () => (/* binding */ FunctionalTranslator)\n/* harmony export */ });\n/* harmony import */ var _ir_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ir.js */ \"(ssr)/./node_modules/@langchain/core/dist/structured_query/ir.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ \"(ssr)/./node_modules/@langchain/core/dist/structured_query/utils.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/structured_query/base.js\");\n\n\n\n\n//#region src/structured_query/functional.ts\n/**\n* A class that extends `BaseTranslator` to translate structured queries\n* into functional filters.\n* @example\n* ```typescript\n* const functionalTranslator = new FunctionalTranslator();\n* const relevantDocuments = await functionalTranslator.getRelevantDocuments(\n*   \"Which movies are rated higher than 8.5?\",\n* );\n* ```\n*/\nvar FunctionalTranslator = class extends _base_js__WEBPACK_IMPORTED_MODULE_2__.BaseTranslator {\n\tallowedOperators = [_ir_js__WEBPACK_IMPORTED_MODULE_0__.Operators.and, _ir_js__WEBPACK_IMPORTED_MODULE_0__.Operators.or];\n\tallowedComparators = [\n\t\t_ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.eq,\n\t\t_ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.ne,\n\t\t_ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.gt,\n\t\t_ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.gte,\n\t\t_ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.lt,\n\t\t_ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.lte\n\t];\n\tformatFunction() {\n\t\tthrow new Error(\"Not implemented\");\n\t}\n\t/**\n\t* Returns the allowed comparators for a given data type.\n\t* @param input The input value to get the allowed comparators for.\n\t* @returns An array of allowed comparators for the input data type.\n\t*/\n\tgetAllowedComparatorsForType(inputType) {\n\t\tswitch (inputType) {\n\t\t\tcase \"string\": return [\n\t\t\t\t_ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.eq,\n\t\t\t\t_ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.ne,\n\t\t\t\t_ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.gt,\n\t\t\t\t_ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.gte,\n\t\t\t\t_ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.lt,\n\t\t\t\t_ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.lte\n\t\t\t];\n\t\t\tcase \"number\": return [\n\t\t\t\t_ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.eq,\n\t\t\t\t_ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.ne,\n\t\t\t\t_ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.gt,\n\t\t\t\t_ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.gte,\n\t\t\t\t_ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.lt,\n\t\t\t\t_ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.lte\n\t\t\t];\n\t\t\tcase \"boolean\": return [_ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.eq, _ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.ne];\n\t\t\tdefault: throw new Error(`Unsupported data type: ${inputType}`);\n\t\t}\n\t}\n\t/**\n\t* Returns a function that performs a comparison based on the provided\n\t* comparator.\n\t* @param comparator The comparator to base the comparison function on.\n\t* @returns A function that takes two arguments and returns a boolean based on the comparison.\n\t*/\n\tgetComparatorFunction(comparator) {\n\t\tswitch (comparator) {\n\t\t\tcase _ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.eq: return (a, b) => a === b;\n\t\t\tcase _ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.ne: return (a, b) => a !== b;\n\t\t\tcase _ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.gt: return (a, b) => a > b;\n\t\t\tcase _ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.gte: return (a, b) => a >= b;\n\t\t\tcase _ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.lt: return (a, b) => a < b;\n\t\t\tcase _ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.lte: return (a, b) => a <= b;\n\t\t\tdefault: throw new Error(\"Unknown comparator\");\n\t\t}\n\t}\n\t/**\n\t* Returns a function that performs an operation based on the provided\n\t* operator.\n\t* @param operator The operator to base the operation function on.\n\t* @returns A function that takes two boolean arguments and returns a boolean based on the operation.\n\t*/\n\tgetOperatorFunction(operator) {\n\t\tswitch (operator) {\n\t\t\tcase _ir_js__WEBPACK_IMPORTED_MODULE_0__.Operators.and: return (a, b) => a && b;\n\t\t\tcase _ir_js__WEBPACK_IMPORTED_MODULE_0__.Operators.or: return (a, b) => a || b;\n\t\t\tdefault: throw new Error(\"Unknown operator\");\n\t\t}\n\t}\n\t/**\n\t* Visits the operation part of a structured query and translates it into\n\t* a functional filter.\n\t* @param operation The operation part of a structured query.\n\t* @returns A function that takes a `Document` as an argument and returns a boolean based on the operation.\n\t*/\n\tvisitOperation(operation) {\n\t\tconst { operator, args } = operation;\n\t\tif (this.allowedOperators.includes(operator)) {\n\t\t\tconst operatorFunction = this.getOperatorFunction(operator);\n\t\t\treturn (document) => {\n\t\t\t\tif (!args) return true;\n\t\t\t\treturn args.reduce((acc, arg) => {\n\t\t\t\t\tconst result = arg.accept(this);\n\t\t\t\t\tif (typeof result === \"function\") return operatorFunction(acc, result(document));\n\t\t\t\t\telse throw new Error(\"Filter is not a function\");\n\t\t\t\t}, true);\n\t\t\t};\n\t\t} else throw new Error(\"Operator not allowed\");\n\t}\n\t/**\n\t* Visits the comparison part of a structured query and translates it into\n\t* a functional filter.\n\t* @param comparison The comparison part of a structured query.\n\t* @returns A function that takes a `Document` as an argument and returns a boolean based on the comparison.\n\t*/\n\tvisitComparison(comparison) {\n\t\tconst { comparator, attribute, value } = comparison;\n\t\tconst undefinedTrue = [_ir_js__WEBPACK_IMPORTED_MODULE_0__.Comparators.ne];\n\t\tif (this.allowedComparators.includes(comparator)) {\n\t\t\tif (!this.getAllowedComparatorsForType(typeof value).includes(comparator)) throw new Error(`'${comparator}' comparator not allowed to be used with ${typeof value}`);\n\t\t\tconst comparatorFunction = this.getComparatorFunction(comparator);\n\t\t\treturn (document) => {\n\t\t\t\tconst documentValue = document.metadata[attribute];\n\t\t\t\tif (documentValue === void 0) {\n\t\t\t\t\tif (undefinedTrue.includes(comparator)) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn comparatorFunction(documentValue, (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.castValue)(value));\n\t\t\t};\n\t\t} else throw new Error(\"Comparator not allowed\");\n\t}\n\t/**\n\t* Visits a structured query and translates it into a functional filter.\n\t* @param query The structured query to translate.\n\t* @returns An object containing a `filter` property, which is a function that takes a `Document` as an argument and returns a boolean based on the structured query.\n\t*/\n\tvisitStructuredQuery(query) {\n\t\tif (!query.filter) return {};\n\t\tconst filterFunction = query.filter?.accept(this);\n\t\tif (typeof filterFunction !== \"function\") throw new Error(\"Structured query filter is not a function\");\n\t\treturn { filter: filterFunction };\n\t}\n\t/**\n\t* Merges two filters into one, based on the specified merge type.\n\t* @param defaultFilter The default filter function.\n\t* @param generatedFilter The generated filter function.\n\t* @param mergeType The type of merge to perform. Can be 'and', 'or', or 'replace'. Default is 'and'.\n\t* @returns A function that takes a `Document` as an argument and returns a boolean based on the merged filters, or `undefined` if both filters are empty.\n\t*/\n\tmergeFilters(defaultFilter, generatedFilter, mergeType = \"and\") {\n\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isFilterEmpty)(defaultFilter) && (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isFilterEmpty)(generatedFilter)) return void 0;\n\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isFilterEmpty)(defaultFilter) || mergeType === \"replace\") {\n\t\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isFilterEmpty)(generatedFilter)) return void 0;\n\t\t\treturn generatedFilter;\n\t\t}\n\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isFilterEmpty)(generatedFilter)) {\n\t\t\tif (mergeType === \"and\") return void 0;\n\t\t\treturn defaultFilter;\n\t\t}\n\t\tif (mergeType === \"and\") return (document) => defaultFilter(document) && generatedFilter(document);\n\t\telse if (mergeType === \"or\") return (document) => defaultFilter(document) || generatedFilter(document);\n\t\telse throw new Error(\"Unknown merge type\");\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=functional.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc3RydWN0dXJlZF9xdWVyeS9mdW5jdGlvbmFsLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBaUQ7QUFDSztBQUNYOztBQUUzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsb0RBQWM7QUFDdkQscUJBQXFCLDZDQUFTLE1BQU0sNkNBQVM7QUFDN0M7QUFDQSxFQUFFLCtDQUFXO0FBQ2IsRUFBRSwrQ0FBVztBQUNiLEVBQUUsK0NBQVc7QUFDYixFQUFFLCtDQUFXO0FBQ2IsRUFBRSwrQ0FBVztBQUNiLEVBQUUsK0NBQVc7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLCtDQUFXO0FBQ2YsSUFBSSwrQ0FBVztBQUNmLElBQUksK0NBQVc7QUFDZixJQUFJLCtDQUFXO0FBQ2YsSUFBSSwrQ0FBVztBQUNmLElBQUksK0NBQVc7QUFDZjtBQUNBO0FBQ0EsSUFBSSwrQ0FBVztBQUNmLElBQUksK0NBQVc7QUFDZixJQUFJLCtDQUFXO0FBQ2YsSUFBSSwrQ0FBVztBQUNmLElBQUksK0NBQVc7QUFDZixJQUFJLCtDQUFXO0FBQ2Y7QUFDQSwyQkFBMkIsK0NBQVcsS0FBSywrQ0FBVztBQUN0RCxzREFBc0QsVUFBVTtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsK0NBQVc7QUFDbkIsUUFBUSwrQ0FBVztBQUNuQixRQUFRLCtDQUFXO0FBQ25CLFFBQVEsK0NBQVc7QUFDbkIsUUFBUSwrQ0FBVztBQUNuQixRQUFRLCtDQUFXO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDZDQUFTO0FBQ2pCLFFBQVEsNkNBQVM7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLGlCQUFpQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLCtCQUErQjtBQUN6Qyx5QkFBeUIsK0NBQVc7QUFDcEM7QUFDQSxrR0FBa0csV0FBVywyQ0FBMkMsYUFBYTtBQUNySztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxvREFBUztBQUN0RDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHdEQUFhLG1CQUFtQix3REFBYTtBQUNuRCxNQUFNLHdEQUFhO0FBQ25CLE9BQU8sd0RBQWE7QUFDcEI7QUFDQTtBQUNBLE1BQU0sd0RBQWE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNnQztBQUNoQyIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3N0cnVjdHVyZWRfcXVlcnkvZnVuY3Rpb25hbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wYXJhdG9ycywgT3BlcmF0b3JzIH0gZnJvbSBcIi4vaXIuanNcIjtcbmltcG9ydCB7IGNhc3RWYWx1ZSwgaXNGaWx0ZXJFbXB0eSB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBCYXNlVHJhbnNsYXRvciB9IGZyb20gXCIuL2Jhc2UuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9zdHJ1Y3R1cmVkX3F1ZXJ5L2Z1bmN0aW9uYWwudHNcbi8qKlxuKiBBIGNsYXNzIHRoYXQgZXh0ZW5kcyBgQmFzZVRyYW5zbGF0b3JgIHRvIHRyYW5zbGF0ZSBzdHJ1Y3R1cmVkIHF1ZXJpZXNcbiogaW50byBmdW5jdGlvbmFsIGZpbHRlcnMuXG4qIEBleGFtcGxlXG4qIGBgYHR5cGVzY3JpcHRcbiogY29uc3QgZnVuY3Rpb25hbFRyYW5zbGF0b3IgPSBuZXcgRnVuY3Rpb25hbFRyYW5zbGF0b3IoKTtcbiogY29uc3QgcmVsZXZhbnREb2N1bWVudHMgPSBhd2FpdCBmdW5jdGlvbmFsVHJhbnNsYXRvci5nZXRSZWxldmFudERvY3VtZW50cyhcbiogICBcIldoaWNoIG1vdmllcyBhcmUgcmF0ZWQgaGlnaGVyIHRoYW4gOC41P1wiLFxuKiApO1xuKiBgYGBcbiovXG52YXIgRnVuY3Rpb25hbFRyYW5zbGF0b3IgPSBjbGFzcyBleHRlbmRzIEJhc2VUcmFuc2xhdG9yIHtcblx0YWxsb3dlZE9wZXJhdG9ycyA9IFtPcGVyYXRvcnMuYW5kLCBPcGVyYXRvcnMub3JdO1xuXHRhbGxvd2VkQ29tcGFyYXRvcnMgPSBbXG5cdFx0Q29tcGFyYXRvcnMuZXEsXG5cdFx0Q29tcGFyYXRvcnMubmUsXG5cdFx0Q29tcGFyYXRvcnMuZ3QsXG5cdFx0Q29tcGFyYXRvcnMuZ3RlLFxuXHRcdENvbXBhcmF0b3JzLmx0LFxuXHRcdENvbXBhcmF0b3JzLmx0ZVxuXHRdO1xuXHRmb3JtYXRGdW5jdGlvbigpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWRcIik7XG5cdH1cblx0LyoqXG5cdCogUmV0dXJucyB0aGUgYWxsb3dlZCBjb21wYXJhdG9ycyBmb3IgYSBnaXZlbiBkYXRhIHR5cGUuXG5cdCogQHBhcmFtIGlucHV0IFRoZSBpbnB1dCB2YWx1ZSB0byBnZXQgdGhlIGFsbG93ZWQgY29tcGFyYXRvcnMgZm9yLlxuXHQqIEByZXR1cm5zIEFuIGFycmF5IG9mIGFsbG93ZWQgY29tcGFyYXRvcnMgZm9yIHRoZSBpbnB1dCBkYXRhIHR5cGUuXG5cdCovXG5cdGdldEFsbG93ZWRDb21wYXJhdG9yc0ZvclR5cGUoaW5wdXRUeXBlKSB7XG5cdFx0c3dpdGNoIChpbnB1dFR5cGUpIHtcblx0XHRcdGNhc2UgXCJzdHJpbmdcIjogcmV0dXJuIFtcblx0XHRcdFx0Q29tcGFyYXRvcnMuZXEsXG5cdFx0XHRcdENvbXBhcmF0b3JzLm5lLFxuXHRcdFx0XHRDb21wYXJhdG9ycy5ndCxcblx0XHRcdFx0Q29tcGFyYXRvcnMuZ3RlLFxuXHRcdFx0XHRDb21wYXJhdG9ycy5sdCxcblx0XHRcdFx0Q29tcGFyYXRvcnMubHRlXG5cdFx0XHRdO1xuXHRcdFx0Y2FzZSBcIm51bWJlclwiOiByZXR1cm4gW1xuXHRcdFx0XHRDb21wYXJhdG9ycy5lcSxcblx0XHRcdFx0Q29tcGFyYXRvcnMubmUsXG5cdFx0XHRcdENvbXBhcmF0b3JzLmd0LFxuXHRcdFx0XHRDb21wYXJhdG9ycy5ndGUsXG5cdFx0XHRcdENvbXBhcmF0b3JzLmx0LFxuXHRcdFx0XHRDb21wYXJhdG9ycy5sdGVcblx0XHRcdF07XG5cdFx0XHRjYXNlIFwiYm9vbGVhblwiOiByZXR1cm4gW0NvbXBhcmF0b3JzLmVxLCBDb21wYXJhdG9ycy5uZV07XG5cdFx0XHRkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGRhdGEgdHlwZTogJHtpbnB1dFR5cGV9YCk7XG5cdFx0fVxuXHR9XG5cdC8qKlxuXHQqIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHBlcmZvcm1zIGEgY29tcGFyaXNvbiBiYXNlZCBvbiB0aGUgcHJvdmlkZWRcblx0KiBjb21wYXJhdG9yLlxuXHQqIEBwYXJhbSBjb21wYXJhdG9yIFRoZSBjb21wYXJhdG9yIHRvIGJhc2UgdGhlIGNvbXBhcmlzb24gZnVuY3Rpb24gb24uXG5cdCogQHJldHVybnMgQSBmdW5jdGlvbiB0aGF0IHRha2VzIHR3byBhcmd1bWVudHMgYW5kIHJldHVybnMgYSBib29sZWFuIGJhc2VkIG9uIHRoZSBjb21wYXJpc29uLlxuXHQqL1xuXHRnZXRDb21wYXJhdG9yRnVuY3Rpb24oY29tcGFyYXRvcikge1xuXHRcdHN3aXRjaCAoY29tcGFyYXRvcikge1xuXHRcdFx0Y2FzZSBDb21wYXJhdG9ycy5lcTogcmV0dXJuIChhLCBiKSA9PiBhID09PSBiO1xuXHRcdFx0Y2FzZSBDb21wYXJhdG9ycy5uZTogcmV0dXJuIChhLCBiKSA9PiBhICE9PSBiO1xuXHRcdFx0Y2FzZSBDb21wYXJhdG9ycy5ndDogcmV0dXJuIChhLCBiKSA9PiBhID4gYjtcblx0XHRcdGNhc2UgQ29tcGFyYXRvcnMuZ3RlOiByZXR1cm4gKGEsIGIpID0+IGEgPj0gYjtcblx0XHRcdGNhc2UgQ29tcGFyYXRvcnMubHQ6IHJldHVybiAoYSwgYikgPT4gYSA8IGI7XG5cdFx0XHRjYXNlIENvbXBhcmF0b3JzLmx0ZTogcmV0dXJuIChhLCBiKSA9PiBhIDw9IGI7XG5cdFx0XHRkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIGNvbXBhcmF0b3JcIik7XG5cdFx0fVxuXHR9XG5cdC8qKlxuXHQqIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHBlcmZvcm1zIGFuIG9wZXJhdGlvbiBiYXNlZCBvbiB0aGUgcHJvdmlkZWRcblx0KiBvcGVyYXRvci5cblx0KiBAcGFyYW0gb3BlcmF0b3IgVGhlIG9wZXJhdG9yIHRvIGJhc2UgdGhlIG9wZXJhdGlvbiBmdW5jdGlvbiBvbi5cblx0KiBAcmV0dXJucyBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgdHdvIGJvb2xlYW4gYXJndW1lbnRzIGFuZCByZXR1cm5zIGEgYm9vbGVhbiBiYXNlZCBvbiB0aGUgb3BlcmF0aW9uLlxuXHQqL1xuXHRnZXRPcGVyYXRvckZ1bmN0aW9uKG9wZXJhdG9yKSB7XG5cdFx0c3dpdGNoIChvcGVyYXRvcikge1xuXHRcdFx0Y2FzZSBPcGVyYXRvcnMuYW5kOiByZXR1cm4gKGEsIGIpID0+IGEgJiYgYjtcblx0XHRcdGNhc2UgT3BlcmF0b3JzLm9yOiByZXR1cm4gKGEsIGIpID0+IGEgfHwgYjtcblx0XHRcdGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihcIlVua25vd24gb3BlcmF0b3JcIik7XG5cdFx0fVxuXHR9XG5cdC8qKlxuXHQqIFZpc2l0cyB0aGUgb3BlcmF0aW9uIHBhcnQgb2YgYSBzdHJ1Y3R1cmVkIHF1ZXJ5IGFuZCB0cmFuc2xhdGVzIGl0IGludG9cblx0KiBhIGZ1bmN0aW9uYWwgZmlsdGVyLlxuXHQqIEBwYXJhbSBvcGVyYXRpb24gVGhlIG9wZXJhdGlvbiBwYXJ0IG9mIGEgc3RydWN0dXJlZCBxdWVyeS5cblx0KiBAcmV0dXJucyBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSBgRG9jdW1lbnRgIGFzIGFuIGFyZ3VtZW50IGFuZCByZXR1cm5zIGEgYm9vbGVhbiBiYXNlZCBvbiB0aGUgb3BlcmF0aW9uLlxuXHQqL1xuXHR2aXNpdE9wZXJhdGlvbihvcGVyYXRpb24pIHtcblx0XHRjb25zdCB7IG9wZXJhdG9yLCBhcmdzIH0gPSBvcGVyYXRpb247XG5cdFx0aWYgKHRoaXMuYWxsb3dlZE9wZXJhdG9ycy5pbmNsdWRlcyhvcGVyYXRvcikpIHtcblx0XHRcdGNvbnN0IG9wZXJhdG9yRnVuY3Rpb24gPSB0aGlzLmdldE9wZXJhdG9yRnVuY3Rpb24ob3BlcmF0b3IpO1xuXHRcdFx0cmV0dXJuIChkb2N1bWVudCkgPT4ge1xuXHRcdFx0XHRpZiAoIWFyZ3MpIHJldHVybiB0cnVlO1xuXHRcdFx0XHRyZXR1cm4gYXJncy5yZWR1Y2UoKGFjYywgYXJnKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gYXJnLmFjY2VwdCh0aGlzKTtcblx0XHRcdFx0XHRpZiAodHlwZW9mIHJlc3VsdCA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gb3BlcmF0b3JGdW5jdGlvbihhY2MsIHJlc3VsdChkb2N1bWVudCkpO1xuXHRcdFx0XHRcdGVsc2UgdGhyb3cgbmV3IEVycm9yKFwiRmlsdGVyIGlzIG5vdCBhIGZ1bmN0aW9uXCIpO1xuXHRcdFx0XHR9LCB0cnVlKTtcblx0XHRcdH07XG5cdFx0fSBlbHNlIHRocm93IG5ldyBFcnJvcihcIk9wZXJhdG9yIG5vdCBhbGxvd2VkXCIpO1xuXHR9XG5cdC8qKlxuXHQqIFZpc2l0cyB0aGUgY29tcGFyaXNvbiBwYXJ0IG9mIGEgc3RydWN0dXJlZCBxdWVyeSBhbmQgdHJhbnNsYXRlcyBpdCBpbnRvXG5cdCogYSBmdW5jdGlvbmFsIGZpbHRlci5cblx0KiBAcGFyYW0gY29tcGFyaXNvbiBUaGUgY29tcGFyaXNvbiBwYXJ0IG9mIGEgc3RydWN0dXJlZCBxdWVyeS5cblx0KiBAcmV0dXJucyBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSBgRG9jdW1lbnRgIGFzIGFuIGFyZ3VtZW50IGFuZCByZXR1cm5zIGEgYm9vbGVhbiBiYXNlZCBvbiB0aGUgY29tcGFyaXNvbi5cblx0Ki9cblx0dmlzaXRDb21wYXJpc29uKGNvbXBhcmlzb24pIHtcblx0XHRjb25zdCB7IGNvbXBhcmF0b3IsIGF0dHJpYnV0ZSwgdmFsdWUgfSA9IGNvbXBhcmlzb247XG5cdFx0Y29uc3QgdW5kZWZpbmVkVHJ1ZSA9IFtDb21wYXJhdG9ycy5uZV07XG5cdFx0aWYgKHRoaXMuYWxsb3dlZENvbXBhcmF0b3JzLmluY2x1ZGVzKGNvbXBhcmF0b3IpKSB7XG5cdFx0XHRpZiAoIXRoaXMuZ2V0QWxsb3dlZENvbXBhcmF0b3JzRm9yVHlwZSh0eXBlb2YgdmFsdWUpLmluY2x1ZGVzKGNvbXBhcmF0b3IpKSB0aHJvdyBuZXcgRXJyb3IoYCcke2NvbXBhcmF0b3J9JyBjb21wYXJhdG9yIG5vdCBhbGxvd2VkIHRvIGJlIHVzZWQgd2l0aCAke3R5cGVvZiB2YWx1ZX1gKTtcblx0XHRcdGNvbnN0IGNvbXBhcmF0b3JGdW5jdGlvbiA9IHRoaXMuZ2V0Q29tcGFyYXRvckZ1bmN0aW9uKGNvbXBhcmF0b3IpO1xuXHRcdFx0cmV0dXJuIChkb2N1bWVudCkgPT4ge1xuXHRcdFx0XHRjb25zdCBkb2N1bWVudFZhbHVlID0gZG9jdW1lbnQubWV0YWRhdGFbYXR0cmlidXRlXTtcblx0XHRcdFx0aWYgKGRvY3VtZW50VmFsdWUgPT09IHZvaWQgMCkge1xuXHRcdFx0XHRcdGlmICh1bmRlZmluZWRUcnVlLmluY2x1ZGVzKGNvbXBhcmF0b3IpKSByZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGNvbXBhcmF0b3JGdW5jdGlvbihkb2N1bWVudFZhbHVlLCBjYXN0VmFsdWUodmFsdWUpKTtcblx0XHRcdH07XG5cdFx0fSBlbHNlIHRocm93IG5ldyBFcnJvcihcIkNvbXBhcmF0b3Igbm90IGFsbG93ZWRcIik7XG5cdH1cblx0LyoqXG5cdCogVmlzaXRzIGEgc3RydWN0dXJlZCBxdWVyeSBhbmQgdHJhbnNsYXRlcyBpdCBpbnRvIGEgZnVuY3Rpb25hbCBmaWx0ZXIuXG5cdCogQHBhcmFtIHF1ZXJ5IFRoZSBzdHJ1Y3R1cmVkIHF1ZXJ5IHRvIHRyYW5zbGF0ZS5cblx0KiBAcmV0dXJucyBBbiBvYmplY3QgY29udGFpbmluZyBhIGBmaWx0ZXJgIHByb3BlcnR5LCB3aGljaCBpcyBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSBgRG9jdW1lbnRgIGFzIGFuIGFyZ3VtZW50IGFuZCByZXR1cm5zIGEgYm9vbGVhbiBiYXNlZCBvbiB0aGUgc3RydWN0dXJlZCBxdWVyeS5cblx0Ki9cblx0dmlzaXRTdHJ1Y3R1cmVkUXVlcnkocXVlcnkpIHtcblx0XHRpZiAoIXF1ZXJ5LmZpbHRlcikgcmV0dXJuIHt9O1xuXHRcdGNvbnN0IGZpbHRlckZ1bmN0aW9uID0gcXVlcnkuZmlsdGVyPy5hY2NlcHQodGhpcyk7XG5cdFx0aWYgKHR5cGVvZiBmaWx0ZXJGdW5jdGlvbiAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgRXJyb3IoXCJTdHJ1Y3R1cmVkIHF1ZXJ5IGZpbHRlciBpcyBub3QgYSBmdW5jdGlvblwiKTtcblx0XHRyZXR1cm4geyBmaWx0ZXI6IGZpbHRlckZ1bmN0aW9uIH07XG5cdH1cblx0LyoqXG5cdCogTWVyZ2VzIHR3byBmaWx0ZXJzIGludG8gb25lLCBiYXNlZCBvbiB0aGUgc3BlY2lmaWVkIG1lcmdlIHR5cGUuXG5cdCogQHBhcmFtIGRlZmF1bHRGaWx0ZXIgVGhlIGRlZmF1bHQgZmlsdGVyIGZ1bmN0aW9uLlxuXHQqIEBwYXJhbSBnZW5lcmF0ZWRGaWx0ZXIgVGhlIGdlbmVyYXRlZCBmaWx0ZXIgZnVuY3Rpb24uXG5cdCogQHBhcmFtIG1lcmdlVHlwZSBUaGUgdHlwZSBvZiBtZXJnZSB0byBwZXJmb3JtLiBDYW4gYmUgJ2FuZCcsICdvcicsIG9yICdyZXBsYWNlJy4gRGVmYXVsdCBpcyAnYW5kJy5cblx0KiBAcmV0dXJucyBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSBgRG9jdW1lbnRgIGFzIGFuIGFyZ3VtZW50IGFuZCByZXR1cm5zIGEgYm9vbGVhbiBiYXNlZCBvbiB0aGUgbWVyZ2VkIGZpbHRlcnMsIG9yIGB1bmRlZmluZWRgIGlmIGJvdGggZmlsdGVycyBhcmUgZW1wdHkuXG5cdCovXG5cdG1lcmdlRmlsdGVycyhkZWZhdWx0RmlsdGVyLCBnZW5lcmF0ZWRGaWx0ZXIsIG1lcmdlVHlwZSA9IFwiYW5kXCIpIHtcblx0XHRpZiAoaXNGaWx0ZXJFbXB0eShkZWZhdWx0RmlsdGVyKSAmJiBpc0ZpbHRlckVtcHR5KGdlbmVyYXRlZEZpbHRlcikpIHJldHVybiB2b2lkIDA7XG5cdFx0aWYgKGlzRmlsdGVyRW1wdHkoZGVmYXVsdEZpbHRlcikgfHwgbWVyZ2VUeXBlID09PSBcInJlcGxhY2VcIikge1xuXHRcdFx0aWYgKGlzRmlsdGVyRW1wdHkoZ2VuZXJhdGVkRmlsdGVyKSkgcmV0dXJuIHZvaWQgMDtcblx0XHRcdHJldHVybiBnZW5lcmF0ZWRGaWx0ZXI7XG5cdFx0fVxuXHRcdGlmIChpc0ZpbHRlckVtcHR5KGdlbmVyYXRlZEZpbHRlcikpIHtcblx0XHRcdGlmIChtZXJnZVR5cGUgPT09IFwiYW5kXCIpIHJldHVybiB2b2lkIDA7XG5cdFx0XHRyZXR1cm4gZGVmYXVsdEZpbHRlcjtcblx0XHR9XG5cdFx0aWYgKG1lcmdlVHlwZSA9PT0gXCJhbmRcIikgcmV0dXJuIChkb2N1bWVudCkgPT4gZGVmYXVsdEZpbHRlcihkb2N1bWVudCkgJiYgZ2VuZXJhdGVkRmlsdGVyKGRvY3VtZW50KTtcblx0XHRlbHNlIGlmIChtZXJnZVR5cGUgPT09IFwib3JcIikgcmV0dXJuIChkb2N1bWVudCkgPT4gZGVmYXVsdEZpbHRlcihkb2N1bWVudCkgfHwgZ2VuZXJhdGVkRmlsdGVyKGRvY3VtZW50KTtcblx0XHRlbHNlIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gbWVyZ2UgdHlwZVwiKTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBGdW5jdGlvbmFsVHJhbnNsYXRvciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnVuY3Rpb25hbC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/structured_query/functional.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/structured_query/index.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/structured_query/index.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseTranslator: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_3__.BaseTranslator),\n/* harmony export */   BasicTranslator: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_3__.BasicTranslator),\n/* harmony export */   Comparators: () => (/* reexport safe */ _ir_js__WEBPACK_IMPORTED_MODULE_1__.Comparators),\n/* harmony export */   Comparison: () => (/* reexport safe */ _ir_js__WEBPACK_IMPORTED_MODULE_1__.Comparison),\n/* harmony export */   Expression: () => (/* reexport safe */ _ir_js__WEBPACK_IMPORTED_MODULE_1__.Expression),\n/* harmony export */   FilterDirective: () => (/* reexport safe */ _ir_js__WEBPACK_IMPORTED_MODULE_1__.FilterDirective),\n/* harmony export */   FunctionalTranslator: () => (/* reexport safe */ _functional_js__WEBPACK_IMPORTED_MODULE_4__.FunctionalTranslator),\n/* harmony export */   Operation: () => (/* reexport safe */ _ir_js__WEBPACK_IMPORTED_MODULE_1__.Operation),\n/* harmony export */   Operators: () => (/* reexport safe */ _ir_js__WEBPACK_IMPORTED_MODULE_1__.Operators),\n/* harmony export */   StructuredQuery: () => (/* reexport safe */ _ir_js__WEBPACK_IMPORTED_MODULE_1__.StructuredQuery),\n/* harmony export */   Visitor: () => (/* reexport safe */ _ir_js__WEBPACK_IMPORTED_MODULE_1__.Visitor),\n/* harmony export */   castValue: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_2__.castValue),\n/* harmony export */   isBoolean: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_2__.isBoolean),\n/* harmony export */   isFilterEmpty: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_2__.isFilterEmpty),\n/* harmony export */   isFloat: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_2__.isFloat),\n/* harmony export */   isInt: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_2__.isInt),\n/* harmony export */   isObject: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_2__.isObject),\n/* harmony export */   isString: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_2__.isString),\n/* harmony export */   structured_query_exports: () => (/* binding */ structured_query_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _ir_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ir.js */ \"(ssr)/./node_modules/@langchain/core/dist/structured_query/ir.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ \"(ssr)/./node_modules/@langchain/core/dist/structured_query/utils.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/structured_query/base.js\");\n/* harmony import */ var _functional_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./functional.js */ \"(ssr)/./node_modules/@langchain/core/dist/structured_query/functional.js\");\n\n\n\n\n\n\n//#region src/structured_query/index.ts\nvar structured_query_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(structured_query_exports, {\n\tBaseTranslator: () => _base_js__WEBPACK_IMPORTED_MODULE_3__.BaseTranslator,\n\tBasicTranslator: () => _base_js__WEBPACK_IMPORTED_MODULE_3__.BasicTranslator,\n\tComparators: () => _ir_js__WEBPACK_IMPORTED_MODULE_1__.Comparators,\n\tComparison: () => _ir_js__WEBPACK_IMPORTED_MODULE_1__.Comparison,\n\tExpression: () => _ir_js__WEBPACK_IMPORTED_MODULE_1__.Expression,\n\tFilterDirective: () => _ir_js__WEBPACK_IMPORTED_MODULE_1__.FilterDirective,\n\tFunctionalTranslator: () => _functional_js__WEBPACK_IMPORTED_MODULE_4__.FunctionalTranslator,\n\tOperation: () => _ir_js__WEBPACK_IMPORTED_MODULE_1__.Operation,\n\tOperators: () => _ir_js__WEBPACK_IMPORTED_MODULE_1__.Operators,\n\tStructuredQuery: () => _ir_js__WEBPACK_IMPORTED_MODULE_1__.StructuredQuery,\n\tVisitor: () => _ir_js__WEBPACK_IMPORTED_MODULE_1__.Visitor,\n\tcastValue: () => _utils_js__WEBPACK_IMPORTED_MODULE_2__.castValue,\n\tisBoolean: () => _utils_js__WEBPACK_IMPORTED_MODULE_2__.isBoolean,\n\tisFilterEmpty: () => _utils_js__WEBPACK_IMPORTED_MODULE_2__.isFilterEmpty,\n\tisFloat: () => _utils_js__WEBPACK_IMPORTED_MODULE_2__.isFloat,\n\tisInt: () => _utils_js__WEBPACK_IMPORTED_MODULE_2__.isInt,\n\tisObject: () => _utils_js__WEBPACK_IMPORTED_MODULE_2__.isObject,\n\tisString: () => _utils_js__WEBPACK_IMPORTED_MODULE_2__.isString\n});\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc3RydWN0dXJlZF9xdWVyeS9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBMkQ7QUFDb0U7QUFDMUI7QUFDekM7QUFDTDs7QUFFdkQ7QUFDQTtBQUNBLHNFQUFRO0FBQ1IsdUJBQXVCLG9EQUFjO0FBQ3JDLHdCQUF3QixxREFBZTtBQUN2QyxvQkFBb0IsK0NBQVc7QUFDL0IsbUJBQW1CLDhDQUFVO0FBQzdCLG1CQUFtQiw4Q0FBVTtBQUM3Qix3QkFBd0IsbURBQWU7QUFDdkMsNkJBQTZCLGdFQUFvQjtBQUNqRCxrQkFBa0IsNkNBQVM7QUFDM0Isa0JBQWtCLDZDQUFTO0FBQzNCLHdCQUF3QixtREFBZTtBQUN2QyxnQkFBZ0IsMkNBQU87QUFDdkIsa0JBQWtCLGdEQUFTO0FBQzNCLGtCQUFrQixnREFBUztBQUMzQixzQkFBc0Isb0RBQWE7QUFDbkMsZ0JBQWdCLDhDQUFPO0FBQ3ZCLGNBQWMsNENBQUs7QUFDbkIsaUJBQWlCLCtDQUFRO0FBQ3pCLGlCQUFpQiwrQ0FBUTtBQUN6QixDQUFDOztBQUVEO0FBQzBRO0FBQzFRIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc3RydWN0dXJlZF9xdWVyeS9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4cG9ydCB9IGZyb20gXCIuLi9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyBDb21wYXJhdG9ycywgQ29tcGFyaXNvbiwgRXhwcmVzc2lvbiwgRmlsdGVyRGlyZWN0aXZlLCBPcGVyYXRpb24sIE9wZXJhdG9ycywgU3RydWN0dXJlZFF1ZXJ5LCBWaXNpdG9yIH0gZnJvbSBcIi4vaXIuanNcIjtcbmltcG9ydCB7IGNhc3RWYWx1ZSwgaXNCb29sZWFuLCBpc0ZpbHRlckVtcHR5LCBpc0Zsb2F0LCBpc0ludCwgaXNPYmplY3QsIGlzU3RyaW5nIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcbmltcG9ydCB7IEJhc2VUcmFuc2xhdG9yLCBCYXNpY1RyYW5zbGF0b3IgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBGdW5jdGlvbmFsVHJhbnNsYXRvciB9IGZyb20gXCIuL2Z1bmN0aW9uYWwuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9zdHJ1Y3R1cmVkX3F1ZXJ5L2luZGV4LnRzXG52YXIgc3RydWN0dXJlZF9xdWVyeV9leHBvcnRzID0ge307XG5fX2V4cG9ydChzdHJ1Y3R1cmVkX3F1ZXJ5X2V4cG9ydHMsIHtcblx0QmFzZVRyYW5zbGF0b3I6ICgpID0+IEJhc2VUcmFuc2xhdG9yLFxuXHRCYXNpY1RyYW5zbGF0b3I6ICgpID0+IEJhc2ljVHJhbnNsYXRvcixcblx0Q29tcGFyYXRvcnM6ICgpID0+IENvbXBhcmF0b3JzLFxuXHRDb21wYXJpc29uOiAoKSA9PiBDb21wYXJpc29uLFxuXHRFeHByZXNzaW9uOiAoKSA9PiBFeHByZXNzaW9uLFxuXHRGaWx0ZXJEaXJlY3RpdmU6ICgpID0+IEZpbHRlckRpcmVjdGl2ZSxcblx0RnVuY3Rpb25hbFRyYW5zbGF0b3I6ICgpID0+IEZ1bmN0aW9uYWxUcmFuc2xhdG9yLFxuXHRPcGVyYXRpb246ICgpID0+IE9wZXJhdGlvbixcblx0T3BlcmF0b3JzOiAoKSA9PiBPcGVyYXRvcnMsXG5cdFN0cnVjdHVyZWRRdWVyeTogKCkgPT4gU3RydWN0dXJlZFF1ZXJ5LFxuXHRWaXNpdG9yOiAoKSA9PiBWaXNpdG9yLFxuXHRjYXN0VmFsdWU6ICgpID0+IGNhc3RWYWx1ZSxcblx0aXNCb29sZWFuOiAoKSA9PiBpc0Jvb2xlYW4sXG5cdGlzRmlsdGVyRW1wdHk6ICgpID0+IGlzRmlsdGVyRW1wdHksXG5cdGlzRmxvYXQ6ICgpID0+IGlzRmxvYXQsXG5cdGlzSW50OiAoKSA9PiBpc0ludCxcblx0aXNPYmplY3Q6ICgpID0+IGlzT2JqZWN0LFxuXHRpc1N0cmluZzogKCkgPT4gaXNTdHJpbmdcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEJhc2VUcmFuc2xhdG9yLCBCYXNpY1RyYW5zbGF0b3IsIENvbXBhcmF0b3JzLCBDb21wYXJpc29uLCBFeHByZXNzaW9uLCBGaWx0ZXJEaXJlY3RpdmUsIEZ1bmN0aW9uYWxUcmFuc2xhdG9yLCBPcGVyYXRpb24sIE9wZXJhdG9ycywgU3RydWN0dXJlZFF1ZXJ5LCBWaXNpdG9yLCBjYXN0VmFsdWUsIGlzQm9vbGVhbiwgaXNGaWx0ZXJFbXB0eSwgaXNGbG9hdCwgaXNJbnQsIGlzT2JqZWN0LCBpc1N0cmluZywgc3RydWN0dXJlZF9xdWVyeV9leHBvcnRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/structured_query/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/structured_query/ir.js":
/*!******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/structured_query/ir.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Comparators: () => (/* binding */ Comparators),\n/* harmony export */   Comparison: () => (/* binding */ Comparison),\n/* harmony export */   Expression: () => (/* binding */ Expression),\n/* harmony export */   FilterDirective: () => (/* binding */ FilterDirective),\n/* harmony export */   Operation: () => (/* binding */ Operation),\n/* harmony export */   Operators: () => (/* binding */ Operators),\n/* harmony export */   StructuredQuery: () => (/* binding */ StructuredQuery),\n/* harmony export */   Visitor: () => (/* binding */ Visitor)\n/* harmony export */ });\n//#region src/structured_query/ir.ts\nconst Operators = {\n\tand: \"and\",\n\tor: \"or\",\n\tnot: \"not\"\n};\nconst Comparators = {\n\teq: \"eq\",\n\tne: \"ne\",\n\tlt: \"lt\",\n\tgt: \"gt\",\n\tlte: \"lte\",\n\tgte: \"gte\"\n};\n/**\n* Abstract class for visiting expressions. Subclasses must implement\n* visitOperation, visitComparison, and visitStructuredQuery methods.\n*/\nvar Visitor = class {};\n/**\n* Abstract class representing an expression. Subclasses must implement\n* the exprName property and the accept method.\n*/\nvar Expression = class {\n\taccept(visitor) {\n\t\tif (this.exprName === \"Operation\") return visitor.visitOperation(this);\n\t\telse if (this.exprName === \"Comparison\") return visitor.visitComparison(this);\n\t\telse if (this.exprName === \"StructuredQuery\") return visitor.visitStructuredQuery(this);\n\t\telse throw new Error(\"Unknown Expression type\");\n\t}\n};\n/**\n* Abstract class representing a filter directive. It extends the\n* Expression class.\n*/\nvar FilterDirective = class extends Expression {};\n/**\n* Class representing a comparison filter directive. It extends the\n* FilterDirective class.\n*/\nvar Comparison = class extends FilterDirective {\n\texprName = \"Comparison\";\n\tconstructor(comparator, attribute, value) {\n\t\tsuper();\n\t\tthis.comparator = comparator;\n\t\tthis.attribute = attribute;\n\t\tthis.value = value;\n\t}\n};\n/**\n* Class representing an operation filter directive. It extends the\n* FilterDirective class.\n*/\nvar Operation = class extends FilterDirective {\n\texprName = \"Operation\";\n\tconstructor(operator, args) {\n\t\tsuper();\n\t\tthis.operator = operator;\n\t\tthis.args = args;\n\t}\n};\n/**\n* Class representing a structured query expression. It extends the\n* Expression class.\n*/\nvar StructuredQuery = class extends Expression {\n\texprName = \"StructuredQuery\";\n\tconstructor(query, filter) {\n\t\tsuper();\n\t\tthis.query = query;\n\t\tthis.filter = filter;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=ir.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc3RydWN0dXJlZF9xdWVyeS9pci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ2dIO0FBQ2hIIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc3RydWN0dXJlZF9xdWVyeS9pci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3N0cnVjdHVyZWRfcXVlcnkvaXIudHNcbmNvbnN0IE9wZXJhdG9ycyA9IHtcblx0YW5kOiBcImFuZFwiLFxuXHRvcjogXCJvclwiLFxuXHRub3Q6IFwibm90XCJcbn07XG5jb25zdCBDb21wYXJhdG9ycyA9IHtcblx0ZXE6IFwiZXFcIixcblx0bmU6IFwibmVcIixcblx0bHQ6IFwibHRcIixcblx0Z3Q6IFwiZ3RcIixcblx0bHRlOiBcImx0ZVwiLFxuXHRndGU6IFwiZ3RlXCJcbn07XG4vKipcbiogQWJzdHJhY3QgY2xhc3MgZm9yIHZpc2l0aW5nIGV4cHJlc3Npb25zLiBTdWJjbGFzc2VzIG11c3QgaW1wbGVtZW50XG4qIHZpc2l0T3BlcmF0aW9uLCB2aXNpdENvbXBhcmlzb24sIGFuZCB2aXNpdFN0cnVjdHVyZWRRdWVyeSBtZXRob2RzLlxuKi9cbnZhciBWaXNpdG9yID0gY2xhc3Mge307XG4vKipcbiogQWJzdHJhY3QgY2xhc3MgcmVwcmVzZW50aW5nIGFuIGV4cHJlc3Npb24uIFN1YmNsYXNzZXMgbXVzdCBpbXBsZW1lbnRcbiogdGhlIGV4cHJOYW1lIHByb3BlcnR5IGFuZCB0aGUgYWNjZXB0IG1ldGhvZC5cbiovXG52YXIgRXhwcmVzc2lvbiA9IGNsYXNzIHtcblx0YWNjZXB0KHZpc2l0b3IpIHtcblx0XHRpZiAodGhpcy5leHByTmFtZSA9PT0gXCJPcGVyYXRpb25cIikgcmV0dXJuIHZpc2l0b3IudmlzaXRPcGVyYXRpb24odGhpcyk7XG5cdFx0ZWxzZSBpZiAodGhpcy5leHByTmFtZSA9PT0gXCJDb21wYXJpc29uXCIpIHJldHVybiB2aXNpdG9yLnZpc2l0Q29tcGFyaXNvbih0aGlzKTtcblx0XHRlbHNlIGlmICh0aGlzLmV4cHJOYW1lID09PSBcIlN0cnVjdHVyZWRRdWVyeVwiKSByZXR1cm4gdmlzaXRvci52aXNpdFN0cnVjdHVyZWRRdWVyeSh0aGlzKTtcblx0XHRlbHNlIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gRXhwcmVzc2lvbiB0eXBlXCIpO1xuXHR9XG59O1xuLyoqXG4qIEFic3RyYWN0IGNsYXNzIHJlcHJlc2VudGluZyBhIGZpbHRlciBkaXJlY3RpdmUuIEl0IGV4dGVuZHMgdGhlXG4qIEV4cHJlc3Npb24gY2xhc3MuXG4qL1xudmFyIEZpbHRlckRpcmVjdGl2ZSA9IGNsYXNzIGV4dGVuZHMgRXhwcmVzc2lvbiB7fTtcbi8qKlxuKiBDbGFzcyByZXByZXNlbnRpbmcgYSBjb21wYXJpc29uIGZpbHRlciBkaXJlY3RpdmUuIEl0IGV4dGVuZHMgdGhlXG4qIEZpbHRlckRpcmVjdGl2ZSBjbGFzcy5cbiovXG52YXIgQ29tcGFyaXNvbiA9IGNsYXNzIGV4dGVuZHMgRmlsdGVyRGlyZWN0aXZlIHtcblx0ZXhwck5hbWUgPSBcIkNvbXBhcmlzb25cIjtcblx0Y29uc3RydWN0b3IoY29tcGFyYXRvciwgYXR0cmlidXRlLCB2YWx1ZSkge1xuXHRcdHN1cGVyKCk7XG5cdFx0dGhpcy5jb21wYXJhdG9yID0gY29tcGFyYXRvcjtcblx0XHR0aGlzLmF0dHJpYnV0ZSA9IGF0dHJpYnV0ZTtcblx0XHR0aGlzLnZhbHVlID0gdmFsdWU7XG5cdH1cbn07XG4vKipcbiogQ2xhc3MgcmVwcmVzZW50aW5nIGFuIG9wZXJhdGlvbiBmaWx0ZXIgZGlyZWN0aXZlLiBJdCBleHRlbmRzIHRoZVxuKiBGaWx0ZXJEaXJlY3RpdmUgY2xhc3MuXG4qL1xudmFyIE9wZXJhdGlvbiA9IGNsYXNzIGV4dGVuZHMgRmlsdGVyRGlyZWN0aXZlIHtcblx0ZXhwck5hbWUgPSBcIk9wZXJhdGlvblwiO1xuXHRjb25zdHJ1Y3RvcihvcGVyYXRvciwgYXJncykge1xuXHRcdHN1cGVyKCk7XG5cdFx0dGhpcy5vcGVyYXRvciA9IG9wZXJhdG9yO1xuXHRcdHRoaXMuYXJncyA9IGFyZ3M7XG5cdH1cbn07XG4vKipcbiogQ2xhc3MgcmVwcmVzZW50aW5nIGEgc3RydWN0dXJlZCBxdWVyeSBleHByZXNzaW9uLiBJdCBleHRlbmRzIHRoZVxuKiBFeHByZXNzaW9uIGNsYXNzLlxuKi9cbnZhciBTdHJ1Y3R1cmVkUXVlcnkgPSBjbGFzcyBleHRlbmRzIEV4cHJlc3Npb24ge1xuXHRleHByTmFtZSA9IFwiU3RydWN0dXJlZFF1ZXJ5XCI7XG5cdGNvbnN0cnVjdG9yKHF1ZXJ5LCBmaWx0ZXIpIHtcblx0XHRzdXBlcigpO1xuXHRcdHRoaXMucXVlcnkgPSBxdWVyeTtcblx0XHR0aGlzLmZpbHRlciA9IGZpbHRlcjtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBDb21wYXJhdG9ycywgQ29tcGFyaXNvbiwgRXhwcmVzc2lvbiwgRmlsdGVyRGlyZWN0aXZlLCBPcGVyYXRpb24sIE9wZXJhdG9ycywgU3RydWN0dXJlZFF1ZXJ5LCBWaXNpdG9yIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pci5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/structured_query/ir.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/structured_query/utils.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/structured_query/utils.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   castValue: () => (/* binding */ castValue),\n/* harmony export */   isBoolean: () => (/* binding */ isBoolean),\n/* harmony export */   isFilterEmpty: () => (/* binding */ isFilterEmpty),\n/* harmony export */   isFloat: () => (/* binding */ isFloat),\n/* harmony export */   isInt: () => (/* binding */ isInt),\n/* harmony export */   isObject: () => (/* binding */ isObject),\n/* harmony export */   isString: () => (/* binding */ isString)\n/* harmony export */ });\n//#region src/structured_query/utils.ts\n/**\n* Checks if the provided argument is an object and not an array.\n*/\nfunction isObject(obj) {\n\treturn obj && typeof obj === \"object\" && !Array.isArray(obj);\n}\n/**\n* Checks if a provided filter is empty. The filter can be a function, an\n* object, a string, or undefined.\n*/\nfunction isFilterEmpty(filter) {\n\tif (!filter) return true;\n\tif (typeof filter === \"string\" && filter.length > 0) return false;\n\tif (typeof filter === \"function\") return false;\n\treturn isObject(filter) && Object.keys(filter).length === 0;\n}\n/**\n* Checks if the provided value is an integer.\n*/\nfunction isInt(value) {\n\tif (typeof value === \"number\") return value % 1 === 0;\n\telse if (typeof value === \"string\") {\n\t\tconst numberValue = parseInt(value, 10);\n\t\treturn !Number.isNaN(numberValue) && numberValue % 1 === 0 && numberValue.toString() === value;\n\t}\n\treturn false;\n}\n/**\n* Checks if the provided value is a floating-point number.\n*/\nfunction isFloat(value) {\n\tif (typeof value === \"number\") return value % 1 !== 0;\n\telse if (typeof value === \"string\") {\n\t\tconst numberValue = parseFloat(value);\n\t\treturn !Number.isNaN(numberValue) && numberValue % 1 !== 0 && numberValue.toString() === value;\n\t}\n\treturn false;\n}\n/**\n* Checks if the provided value is a string that cannot be parsed into a\n* number.\n*/\nfunction isString(value) {\n\treturn typeof value === \"string\" && (Number.isNaN(parseFloat(value)) || parseFloat(value).toString() !== value);\n}\n/**\n* Checks if the provided value is a boolean.\n*/\nfunction isBoolean(value) {\n\treturn typeof value === \"boolean\";\n}\n/**\n* Casts a value that might be string or number to actual string or number.\n* Since LLM might return back an integer/float as a string, we need to cast\n* it back to a number, as many vector databases can't handle number as string\n* values as a comparator.\n*/\nfunction castValue(input) {\n\tlet value;\n\tif (isString(input)) value = input;\n\telse if (isInt(input)) value = parseInt(input, 10);\n\telse if (isFloat(input)) value = parseFloat(input);\n\telse if (isBoolean(input)) value = Boolean(input);\n\telse throw new Error(\"Unsupported value type\");\n\treturn value;\n}\n\n//#endregion\n\n//# sourceMappingURL=utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc3RydWN0dXJlZF9xdWVyeS91dGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDbUY7QUFDbkYiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9zdHJ1Y3R1cmVkX3F1ZXJ5L3V0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvc3RydWN0dXJlZF9xdWVyeS91dGlscy50c1xuLyoqXG4qIENoZWNrcyBpZiB0aGUgcHJvdmlkZWQgYXJndW1lbnQgaXMgYW4gb2JqZWN0IGFuZCBub3QgYW4gYXJyYXkuXG4qL1xuZnVuY3Rpb24gaXNPYmplY3Qob2JqKSB7XG5cdHJldHVybiBvYmogJiYgdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJiAhQXJyYXkuaXNBcnJheShvYmopO1xufVxuLyoqXG4qIENoZWNrcyBpZiBhIHByb3ZpZGVkIGZpbHRlciBpcyBlbXB0eS4gVGhlIGZpbHRlciBjYW4gYmUgYSBmdW5jdGlvbiwgYW5cbiogb2JqZWN0LCBhIHN0cmluZywgb3IgdW5kZWZpbmVkLlxuKi9cbmZ1bmN0aW9uIGlzRmlsdGVyRW1wdHkoZmlsdGVyKSB7XG5cdGlmICghZmlsdGVyKSByZXR1cm4gdHJ1ZTtcblx0aWYgKHR5cGVvZiBmaWx0ZXIgPT09IFwic3RyaW5nXCIgJiYgZmlsdGVyLmxlbmd0aCA+IDApIHJldHVybiBmYWxzZTtcblx0aWYgKHR5cGVvZiBmaWx0ZXIgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIGZhbHNlO1xuXHRyZXR1cm4gaXNPYmplY3QoZmlsdGVyKSAmJiBPYmplY3Qua2V5cyhmaWx0ZXIpLmxlbmd0aCA9PT0gMDtcbn1cbi8qKlxuKiBDaGVja3MgaWYgdGhlIHByb3ZpZGVkIHZhbHVlIGlzIGFuIGludGVnZXIuXG4qL1xuZnVuY3Rpb24gaXNJbnQodmFsdWUpIHtcblx0aWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIikgcmV0dXJuIHZhbHVlICUgMSA9PT0gMDtcblx0ZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG5cdFx0Y29uc3QgbnVtYmVyVmFsdWUgPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuXHRcdHJldHVybiAhTnVtYmVyLmlzTmFOKG51bWJlclZhbHVlKSAmJiBudW1iZXJWYWx1ZSAlIDEgPT09IDAgJiYgbnVtYmVyVmFsdWUudG9TdHJpbmcoKSA9PT0gdmFsdWU7XG5cdH1cblx0cmV0dXJuIGZhbHNlO1xufVxuLyoqXG4qIENoZWNrcyBpZiB0aGUgcHJvdmlkZWQgdmFsdWUgaXMgYSBmbG9hdGluZy1wb2ludCBudW1iZXIuXG4qL1xuZnVuY3Rpb24gaXNGbG9hdCh2YWx1ZSkge1xuXHRpZiAodHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiKSByZXR1cm4gdmFsdWUgJSAxICE9PSAwO1xuXHRlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcblx0XHRjb25zdCBudW1iZXJWYWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpO1xuXHRcdHJldHVybiAhTnVtYmVyLmlzTmFOKG51bWJlclZhbHVlKSAmJiBudW1iZXJWYWx1ZSAlIDEgIT09IDAgJiYgbnVtYmVyVmFsdWUudG9TdHJpbmcoKSA9PT0gdmFsdWU7XG5cdH1cblx0cmV0dXJuIGZhbHNlO1xufVxuLyoqXG4qIENoZWNrcyBpZiB0aGUgcHJvdmlkZWQgdmFsdWUgaXMgYSBzdHJpbmcgdGhhdCBjYW5ub3QgYmUgcGFyc2VkIGludG8gYVxuKiBudW1iZXIuXG4qL1xuZnVuY3Rpb24gaXNTdHJpbmcodmFsdWUpIHtcblx0cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiAoTnVtYmVyLmlzTmFOKHBhcnNlRmxvYXQodmFsdWUpKSB8fCBwYXJzZUZsb2F0KHZhbHVlKS50b1N0cmluZygpICE9PSB2YWx1ZSk7XG59XG4vKipcbiogQ2hlY2tzIGlmIHRoZSBwcm92aWRlZCB2YWx1ZSBpcyBhIGJvb2xlYW4uXG4qL1xuZnVuY3Rpb24gaXNCb29sZWFuKHZhbHVlKSB7XG5cdHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwiYm9vbGVhblwiO1xufVxuLyoqXG4qIENhc3RzIGEgdmFsdWUgdGhhdCBtaWdodCBiZSBzdHJpbmcgb3IgbnVtYmVyIHRvIGFjdHVhbCBzdHJpbmcgb3IgbnVtYmVyLlxuKiBTaW5jZSBMTE0gbWlnaHQgcmV0dXJuIGJhY2sgYW4gaW50ZWdlci9mbG9hdCBhcyBhIHN0cmluZywgd2UgbmVlZCB0byBjYXN0XG4qIGl0IGJhY2sgdG8gYSBudW1iZXIsIGFzIG1hbnkgdmVjdG9yIGRhdGFiYXNlcyBjYW4ndCBoYW5kbGUgbnVtYmVyIGFzIHN0cmluZ1xuKiB2YWx1ZXMgYXMgYSBjb21wYXJhdG9yLlxuKi9cbmZ1bmN0aW9uIGNhc3RWYWx1ZShpbnB1dCkge1xuXHRsZXQgdmFsdWU7XG5cdGlmIChpc1N0cmluZyhpbnB1dCkpIHZhbHVlID0gaW5wdXQ7XG5cdGVsc2UgaWYgKGlzSW50KGlucHV0KSkgdmFsdWUgPSBwYXJzZUludChpbnB1dCwgMTApO1xuXHRlbHNlIGlmIChpc0Zsb2F0KGlucHV0KSkgdmFsdWUgPSBwYXJzZUZsb2F0KGlucHV0KTtcblx0ZWxzZSBpZiAoaXNCb29sZWFuKGlucHV0KSkgdmFsdWUgPSBCb29sZWFuKGlucHV0KTtcblx0ZWxzZSB0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCB2YWx1ZSB0eXBlXCIpO1xuXHRyZXR1cm4gdmFsdWU7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY2FzdFZhbHVlLCBpc0Jvb2xlYW4sIGlzRmlsdGVyRW1wdHksIGlzRmxvYXQsIGlzSW50LCBpc09iamVjdCwgaXNTdHJpbmcgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWxzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/structured_query/utils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/tools/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tools/index.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseToolkit: () => (/* binding */ BaseToolkit),\n/* harmony export */   DynamicStructuredTool: () => (/* binding */ DynamicStructuredTool),\n/* harmony export */   DynamicTool: () => (/* binding */ DynamicTool),\n/* harmony export */   StructuredTool: () => (/* binding */ StructuredTool),\n/* harmony export */   Tool: () => (/* binding */ Tool),\n/* harmony export */   ToolInputParsingException: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_2__.ToolInputParsingException),\n/* harmony export */   isLangChainTool: () => (/* reexport safe */ _types_js__WEBPACK_IMPORTED_MODULE_11__.isLangChainTool),\n/* harmony export */   isRunnableToolLike: () => (/* reexport safe */ _types_js__WEBPACK_IMPORTED_MODULE_11__.isRunnableToolLike),\n/* harmony export */   isStructuredTool: () => (/* reexport safe */ _types_js__WEBPACK_IMPORTED_MODULE_11__.isStructuredTool),\n/* harmony export */   isStructuredToolParams: () => (/* reexport safe */ _types_js__WEBPACK_IMPORTED_MODULE_11__.isStructuredToolParams),\n/* harmony export */   tool: () => (/* binding */ tool),\n/* harmony export */   tools_exports: () => (/* binding */ tools_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _messages_tool_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../messages/tool.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/tool.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ \"(ssr)/./node_modules/@langchain/core/dist/tools/utils.js\");\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(ssr)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _singletons_async_local_storage_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../singletons/async_local_storage/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/singletons/async_local_storage/index.js\");\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../singletons/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/singletons/index.js\");\n/* harmony import */ var _runnables_config_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../runnables/config.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/config.js\");\n/* harmony import */ var _utils_signal_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/signal.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/signal.js\");\n/* harmony import */ var _utils_types_zod_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/types/zod.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/types/zod.js\");\n/* harmony import */ var _utils_json_schema_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils/json_schema.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/json_schema.js\");\n/* harmony import */ var _language_models_base_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../language_models/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/language_models/base.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./types.js */ \"(ssr)/./node_modules/@langchain/core/dist/tools/types.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! zod/v3 */ \"(ssr)/./node_modules/zod/v3/index.js\");\n/* harmony import */ var _cfworker_json_schema__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @cfworker/json-schema */ \"(ssr)/./node_modules/@cfworker/json-schema/dist/esm/index.js\");\n/* harmony import */ var zod_v4__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! zod/v4 */ \"(ssr)/./node_modules/zod/v4/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/tools/index.ts\nvar tools_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(tools_exports, {\n\tBaseToolkit: () => BaseToolkit,\n\tDynamicStructuredTool: () => DynamicStructuredTool,\n\tDynamicTool: () => DynamicTool,\n\tStructuredTool: () => StructuredTool,\n\tTool: () => Tool,\n\tToolInputParsingException: () => _utils_js__WEBPACK_IMPORTED_MODULE_2__.ToolInputParsingException,\n\tisLangChainTool: () => _types_js__WEBPACK_IMPORTED_MODULE_11__.isLangChainTool,\n\tisRunnableToolLike: () => _types_js__WEBPACK_IMPORTED_MODULE_11__.isRunnableToolLike,\n\tisStructuredTool: () => _types_js__WEBPACK_IMPORTED_MODULE_11__.isStructuredTool,\n\tisStructuredToolParams: () => _types_js__WEBPACK_IMPORTED_MODULE_11__.isStructuredToolParams,\n\ttool: () => tool\n});\n/**\n* Base class for Tools that accept input of any shape defined by a Zod schema.\n*/\nvar StructuredTool = class extends _language_models_base_js__WEBPACK_IMPORTED_MODULE_10__.BaseLangChain {\n\t/**\n\t* Optional provider-specific extra fields for the tool.\n\t*\n\t* This is used to pass provider-specific configuration that doesn't fit into\n\t* standard tool fields.\n\t*/\n\textras;\n\t/**\n\t* Whether to return the tool's output directly.\n\t*\n\t* Setting this to true means that after the tool is called,\n\t* an agent should stop looping.\n\t*/\n\treturnDirect = false;\n\tverboseParsingErrors = false;\n\tget lc_namespace() {\n\t\treturn [\"langchain\", \"tools\"];\n\t}\n\t/**\n\t* The tool response format.\n\t*\n\t* If \"content\" then the output of the tool is interpreted as the contents of a\n\t* ToolMessage. If \"content_and_artifact\" then the output is expected to be a\n\t* two-tuple corresponding to the (content, artifact) of a ToolMessage.\n\t*\n\t* @default \"content\"\n\t*/\n\tresponseFormat = \"content\";\n\t/**\n\t* Default config object for the tool runnable.\n\t*/\n\tdefaultConfig;\n\tconstructor(fields) {\n\t\tsuper(fields ?? {});\n\t\tthis.verboseParsingErrors = fields?.verboseParsingErrors ?? this.verboseParsingErrors;\n\t\tthis.responseFormat = fields?.responseFormat ?? this.responseFormat;\n\t\tthis.defaultConfig = fields?.defaultConfig ?? this.defaultConfig;\n\t\tthis.metadata = fields?.metadata ?? this.metadata;\n\t\tthis.extras = fields?.extras ?? this.extras;\n\t}\n\t/**\n\t* Invokes the tool with the provided input and configuration.\n\t* @param input The input for the tool.\n\t* @param config Optional configuration for the tool.\n\t* @returns A Promise that resolves with the tool's output.\n\t*/\n\tasync invoke(input, config) {\n\t\tlet toolInput;\n\t\tlet enrichedConfig = (0,_runnables_config_js__WEBPACK_IMPORTED_MODULE_6__.ensureConfig)((0,_runnables_config_js__WEBPACK_IMPORTED_MODULE_6__.mergeConfigs)(this.defaultConfig, config));\n\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__._isToolCall)(input)) {\n\t\t\ttoolInput = input.args;\n\t\t\tenrichedConfig = {\n\t\t\t\t...enrichedConfig,\n\t\t\t\ttoolCall: input\n\t\t\t};\n\t\t} else toolInput = input;\n\t\treturn this.call(toolInput, enrichedConfig);\n\t}\n\t/**\n\t* @deprecated Use .invoke() instead. Will be removed in 0.3.0.\n\t*\n\t* Calls the tool with the provided argument, configuration, and tags. It\n\t* parses the input according to the schema, handles any errors, and\n\t* manages callbacks.\n\t* @param arg The input argument for the tool.\n\t* @param configArg Optional configuration or callbacks for the tool.\n\t* @param tags Optional tags for the tool.\n\t* @returns A Promise that resolves with a string.\n\t*/\n\tasync call(arg, configArg, tags) {\n\t\tconst inputForValidation = (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__._isToolCall)(arg) ? arg.args : arg;\n\t\tlet parsed;\n\t\tif ((0,_utils_types_zod_js__WEBPACK_IMPORTED_MODULE_8__.isInteropZodSchema)(this.schema)) try {\n\t\t\tparsed = await (0,_utils_types_zod_js__WEBPACK_IMPORTED_MODULE_8__.interopParseAsync)(this.schema, inputForValidation);\n\t\t} catch (e) {\n\t\t\tlet message = `Received tool input did not match expected schema`;\n\t\t\tif (this.verboseParsingErrors) message = `${message}\\nDetails: ${e.message}`;\n\t\t\tif ((0,_utils_types_zod_js__WEBPACK_IMPORTED_MODULE_8__.isInteropZodError)(e)) message = `${message}\\n\\n${zod_v4__WEBPACK_IMPORTED_MODULE_14__.z.prettifyError(e)}`;\n\t\t\tthrow new _utils_js__WEBPACK_IMPORTED_MODULE_2__.ToolInputParsingException(message, JSON.stringify(arg));\n\t\t}\n\t\telse {\n\t\t\tconst result$1 = (0,_cfworker_json_schema__WEBPACK_IMPORTED_MODULE_13__.validate)(inputForValidation, this.schema);\n\t\t\tif (!result$1.valid) {\n\t\t\t\tlet message = `Received tool input did not match expected schema`;\n\t\t\t\tif (this.verboseParsingErrors) message = `${message}\\nDetails: ${result$1.errors.map((e) => `${e.keywordLocation}: ${e.error}`).join(\"\\n\")}`;\n\t\t\t\tthrow new _utils_js__WEBPACK_IMPORTED_MODULE_2__.ToolInputParsingException(message, JSON.stringify(arg));\n\t\t\t}\n\t\t\tparsed = inputForValidation;\n\t\t}\n\t\tconst config = (0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_3__.parseCallbackConfigArg)(configArg);\n\t\tconst callbackManager_ = _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_3__.CallbackManager.configure(config.callbacks, this.callbacks, config.tags || tags, this.tags, config.metadata, this.metadata, { verbose: this.verbose });\n\t\tconst runManager = await callbackManager_?.handleToolStart(this.toJSON(), typeof arg === \"string\" ? arg : JSON.stringify(arg), config.runId, void 0, void 0, void 0, config.runName);\n\t\tdelete config.runId;\n\t\tlet result;\n\t\ttry {\n\t\t\tresult = await this._call(parsed, runManager, config);\n\t\t} catch (e) {\n\t\t\tawait runManager?.handleToolError(e);\n\t\t\tthrow e;\n\t\t}\n\t\tlet content;\n\t\tlet artifact;\n\t\tif (this.responseFormat === \"content_and_artifact\") if (Array.isArray(result) && result.length === 2) [content, artifact] = result;\n\t\telse throw new Error(`Tool response format is \"content_and_artifact\" but the output was not a two-tuple.\\nResult: ${JSON.stringify(result)}`);\n\t\telse content = result;\n\t\tlet toolCallId;\n\t\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__._isToolCall)(arg)) toolCallId = arg.id;\n\t\tif (!toolCallId && (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__._configHasToolCallId)(config)) toolCallId = config.toolCall.id;\n\t\tconst formattedOutput = _formatToolOutput({\n\t\t\tcontent,\n\t\t\tartifact,\n\t\t\ttoolCallId,\n\t\t\tname: this.name,\n\t\t\tmetadata: this.metadata\n\t\t});\n\t\tawait runManager?.handleToolEnd(formattedOutput);\n\t\treturn formattedOutput;\n\t}\n};\n/**\n* Base class for Tools that accept input as a string.\n*/\nvar Tool = class extends StructuredTool {\n\tschema = zod_v3__WEBPACK_IMPORTED_MODULE_12__.z.object({ input: zod_v3__WEBPACK_IMPORTED_MODULE_12__.z.string().optional() }).transform((obj) => obj.input);\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t}\n\t/**\n\t* @deprecated Use .invoke() instead. Will be removed in 0.3.0.\n\t*\n\t* Calls the tool with the provided argument and callbacks. It handles\n\t* string inputs specifically.\n\t* @param arg The input argument for the tool, which can be a string, undefined, or an input of the tool's schema.\n\t* @param callbacks Optional callbacks for the tool.\n\t* @returns A Promise that resolves with a string.\n\t*/\n\tcall(arg, callbacks) {\n\t\tconst structuredArg = typeof arg === \"string\" || arg == null ? { input: arg } : arg;\n\t\treturn super.call(structuredArg, callbacks);\n\t}\n};\n/**\n* A tool that can be created dynamically from a function, name, and description.\n*/\nvar DynamicTool = class extends Tool {\n\tstatic lc_name() {\n\t\treturn \"DynamicTool\";\n\t}\n\tname;\n\tdescription;\n\tfunc;\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.name = fields.name;\n\t\tthis.description = fields.description;\n\t\tthis.func = fields.func;\n\t\tthis.returnDirect = fields.returnDirect ?? this.returnDirect;\n\t}\n\t/**\n\t* @deprecated Use .invoke() instead. Will be removed in 0.3.0.\n\t*/\n\tasync call(arg, configArg) {\n\t\tconst config = (0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_3__.parseCallbackConfigArg)(configArg);\n\t\tif (config.runName === void 0) config.runName = this.name;\n\t\treturn super.call(arg, config);\n\t}\n\t/** @ignore */\n\tasync _call(input, runManager, parentConfig) {\n\t\treturn this.func(input, runManager, parentConfig);\n\t}\n};\n/**\n* A tool that can be created dynamically from a function, name, and\n* description, designed to work with structured data. It extends the\n* StructuredTool class and overrides the _call method to execute the\n* provided function when the tool is called.\n*\n* Schema can be passed as Zod or JSON schema. The tool will not validate\n* input if JSON schema is passed.\n*\n* @template SchemaT The input schema type for the tool (Zod schema or JSON schema). Defaults to `ToolInputSchemaBase`.\n* @template SchemaOutputT The output type derived from the schema after parsing/validation. Defaults to `ToolInputSchemaOutputType<SchemaT>`.\n* @template SchemaInputT The input type derived from the schema before parsing. Defaults to `ToolInputSchemaInputType<SchemaT>`.\n* @template ToolOutputT The return type of the tool's function. Defaults to `ToolOutputType`.\n* @template NameT The literal type of the tool name (for discriminated union support). Defaults to `string`.\n*/\nvar DynamicStructuredTool = class extends StructuredTool {\n\tstatic lc_name() {\n\t\treturn \"DynamicStructuredTool\";\n\t}\n\tdescription;\n\tfunc;\n\tschema;\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.name = fields.name;\n\t\tthis.description = fields.description;\n\t\tthis.func = fields.func;\n\t\tthis.returnDirect = fields.returnDirect ?? this.returnDirect;\n\t\tthis.schema = fields.schema;\n\t}\n\t/**\n\t* @deprecated Use .invoke() instead. Will be removed in 0.3.0.\n\t*/\n\tasync call(arg, configArg, tags) {\n\t\tconst config = (0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_3__.parseCallbackConfigArg)(configArg);\n\t\tif (config.runName === void 0) config.runName = this.name;\n\t\treturn super.call(arg, config, tags);\n\t}\n\t_call(arg, runManager, parentConfig) {\n\t\treturn this.func(arg, runManager, parentConfig);\n\t}\n};\n/**\n* Abstract base class for toolkits in LangChain. Toolkits are collections\n* of tools that agents can use. Subclasses must implement the `tools`\n* property to provide the specific tools for the toolkit.\n*/\nvar BaseToolkit = class {\n\tgetTools() {\n\t\treturn this.tools;\n\t}\n};\nfunction tool(func, fields) {\n\tconst isSimpleStringSchema = (0,_utils_types_zod_js__WEBPACK_IMPORTED_MODULE_8__.isSimpleStringZodSchema)(fields.schema);\n\tconst isStringJSONSchema = (0,_utils_json_schema_js__WEBPACK_IMPORTED_MODULE_9__.validatesOnlyStrings)(fields.schema);\n\tif (!fields.schema || isSimpleStringSchema || isStringJSONSchema) return new DynamicTool({\n\t\t...fields,\n\t\tdescription: fields.description ?? fields.schema?.description ?? `${fields.name} tool`,\n\t\tfunc: async (input, runManager, config) => {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tconst childConfig = (0,_runnables_config_js__WEBPACK_IMPORTED_MODULE_6__.patchConfig)(config, { callbacks: runManager?.getChild() });\n\t\t\t\t_singletons_async_local_storage_index_js__WEBPACK_IMPORTED_MODULE_4__.AsyncLocalStorageProviderSingleton.runWithConfig((0,_runnables_config_js__WEBPACK_IMPORTED_MODULE_6__.pickRunnableConfigKeys)(childConfig), async () => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tresolve(func(input, childConfig));\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\treject(e);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t});\n\tconst schema = fields.schema;\n\tconst description = fields.description ?? fields.schema.description ?? `${fields.name} tool`;\n\treturn new DynamicStructuredTool({\n\t\t...fields,\n\t\tdescription,\n\t\tschema,\n\t\tfunc: async (input, runManager, config) => {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tlet listener;\n\t\t\t\tconst cleanup = () => {\n\t\t\t\t\tif (config?.signal && listener) config.signal.removeEventListener(\"abort\", listener);\n\t\t\t\t};\n\t\t\t\tif (config?.signal) {\n\t\t\t\t\tlistener = () => {\n\t\t\t\t\t\tcleanup();\n\t\t\t\t\t\treject((0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_7__.getAbortSignalError)(config.signal));\n\t\t\t\t\t};\n\t\t\t\t\tconfig.signal.addEventListener(\"abort\", listener);\n\t\t\t\t}\n\t\t\t\tconst childConfig = (0,_runnables_config_js__WEBPACK_IMPORTED_MODULE_6__.patchConfig)(config, { callbacks: runManager?.getChild() });\n\t\t\t\t_singletons_async_local_storage_index_js__WEBPACK_IMPORTED_MODULE_4__.AsyncLocalStorageProviderSingleton.runWithConfig((0,_runnables_config_js__WEBPACK_IMPORTED_MODULE_6__.pickRunnableConfigKeys)(childConfig), async () => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst result = await func(input, childConfig);\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t* If the signal is aborted, we don't want to resolve the promise\n\t\t\t\t\t\t* as the promise is already rejected.\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tif (config?.signal?.aborted) {\n\t\t\t\t\t\t\tcleanup();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcleanup();\n\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tcleanup();\n\t\t\t\t\t\treject(e);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t});\n}\nfunction _formatToolOutput(params) {\n\tconst { content, artifact, toolCallId, metadata } = params;\n\tif (toolCallId && !(0,_messages_tool_js__WEBPACK_IMPORTED_MODULE_1__.isDirectToolOutput)(content)) if (typeof content === \"string\" || Array.isArray(content) && content.every((item) => typeof item === \"object\")) return new _messages_tool_js__WEBPACK_IMPORTED_MODULE_1__.ToolMessage({\n\t\tstatus: \"success\",\n\t\tcontent,\n\t\tartifact,\n\t\ttool_call_id: toolCallId,\n\t\tname: params.name,\n\t\tmetadata\n\t});\n\telse return new _messages_tool_js__WEBPACK_IMPORTED_MODULE_1__.ToolMessage({\n\t\tstatus: \"success\",\n\t\tcontent: _stringify(content),\n\t\tartifact,\n\t\ttool_call_id: toolCallId,\n\t\tname: params.name,\n\t\tmetadata\n\t});\n\telse return content;\n}\nfunction _stringify(content) {\n\ttry {\n\t\treturn JSON.stringify(content, null, 2) ?? \"\";\n\t} catch (_noOp) {\n\t\treturn `${content}`;\n\t}\n}\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdG9vbHMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTJEO0FBQ1c7QUFDb0I7QUFDUjtBQUNjO0FBQ2hFO0FBQ3lFO0FBQ2hEO0FBQ2lFO0FBQzNEO0FBQ0o7QUFDZ0Q7QUFDaEY7QUFDc0I7QUFDZjs7QUFFbEM7QUFDQTtBQUNBLHNFQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxnRUFBeUI7QUFDM0Qsd0JBQXdCLHVEQUFlO0FBQ3ZDLDJCQUEyQiwwREFBa0I7QUFDN0MseUJBQXlCLHdEQUFnQjtBQUN6QywrQkFBK0IsOERBQXNCO0FBQ3JEO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxvRUFBYTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixrRUFBWSxDQUFDLGtFQUFZO0FBQ2hELE1BQU0sc0RBQVc7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHNEQUFXO0FBQ3hDO0FBQ0EsTUFBTSx1RUFBa0I7QUFDeEIsa0JBQWtCLHNFQUFpQjtBQUNuQyxJQUFJO0FBQ0o7QUFDQSwrQ0FBK0MsUUFBUSxhQUFhLFVBQVU7QUFDOUUsT0FBTyxzRUFBaUIsa0JBQWtCLFFBQVEsTUFBTSxvREFBaUIsSUFBSTtBQUM3RSxhQUFhLGdFQUF5QjtBQUN0QztBQUNBO0FBQ0Esb0JBQW9CLGdFQUFRO0FBQzVCO0FBQ0E7QUFDQSxnREFBZ0QsUUFBUSxhQUFhLDhCQUE4QixrQkFBa0IsSUFBSSxRQUFRLGNBQWM7QUFDL0ksY0FBYyxnRUFBeUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDZFQUFzQjtBQUN2QywyQkFBMkIsa0VBQWUsK0dBQStHLHVCQUF1QjtBQUNoTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNIQUFzSCx1QkFBdUI7QUFDN0k7QUFDQTtBQUNBLE1BQU0sc0RBQVc7QUFDakIscUJBQXFCLCtEQUFvQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsNkNBQVEsR0FBRyxPQUFPLDZDQUFRLGVBQWU7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRUFBbUUsYUFBYTtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsNkVBQXNCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw2RUFBc0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDRFQUF1QjtBQUNyRCw0QkFBNEIsMkVBQW9CO0FBQ2hEO0FBQ0E7QUFDQSxzRUFBc0UsYUFBYTtBQUNuRjtBQUNBO0FBQ0Esd0JBQXdCLGlFQUFXLFdBQVcsbUNBQW1DO0FBQ2pGLElBQUksd0dBQWtDLGVBQWUsNEVBQXNCO0FBQzNFO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQSxFQUFFO0FBQ0Y7QUFDQSwyRUFBMkUsYUFBYTtBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEscUVBQW1CO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixpRUFBVyxXQUFXLG1DQUFtQztBQUNqRixJQUFJLHdHQUFrQyxlQUFlLDRFQUFzQjtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsU0FBUywwQ0FBMEM7QUFDbkQsb0JBQW9CLHFFQUFrQixzSUFBc0ksMERBQVc7QUFDdkw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLGlCQUFpQiwwREFBVztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxZQUFZLFFBQVE7QUFDcEI7QUFDQTs7QUFFQTtBQUNnTjtBQUNoTiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3Rvb2xzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IFRvb2xNZXNzYWdlLCBpc0RpcmVjdFRvb2xPdXRwdXQgfSBmcm9tIFwiLi4vbWVzc2FnZXMvdG9vbC5qc1wiO1xuaW1wb3J0IHsgVG9vbElucHV0UGFyc2luZ0V4Y2VwdGlvbiwgX2NvbmZpZ0hhc1Rvb2xDYWxsSWQsIF9pc1Rvb2xDYWxsIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcbmltcG9ydCB7IENhbGxiYWNrTWFuYWdlciwgcGFyc2VDYWxsYmFja0NvbmZpZ0FyZyB9IGZyb20gXCIuLi9jYWxsYmFja3MvbWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiB9IGZyb20gXCIuLi9zaW5nbGV0b25zL2FzeW5jX2xvY2FsX3N0b3JhZ2UvaW5kZXguanNcIjtcbmltcG9ydCBcIi4uL3NpbmdsZXRvbnMvaW5kZXguanNcIjtcbmltcG9ydCB7IGVuc3VyZUNvbmZpZywgbWVyZ2VDb25maWdzLCBwYXRjaENvbmZpZywgcGlja1J1bm5hYmxlQ29uZmlnS2V5cyB9IGZyb20gXCIuLi9ydW5uYWJsZXMvY29uZmlnLmpzXCI7XG5pbXBvcnQgeyBnZXRBYm9ydFNpZ25hbEVycm9yIH0gZnJvbSBcIi4uL3V0aWxzL3NpZ25hbC5qc1wiO1xuaW1wb3J0IHsgaW50ZXJvcFBhcnNlQXN5bmMsIGlzSW50ZXJvcFpvZEVycm9yLCBpc0ludGVyb3Bab2RTY2hlbWEsIGlzU2ltcGxlU3RyaW5nWm9kU2NoZW1hIH0gZnJvbSBcIi4uL3V0aWxzL3R5cGVzL3pvZC5qc1wiO1xuaW1wb3J0IHsgdmFsaWRhdGVzT25seVN0cmluZ3MgfSBmcm9tIFwiLi4vdXRpbHMvanNvbl9zY2hlbWEuanNcIjtcbmltcG9ydCB7IEJhc2VMYW5nQ2hhaW4gfSBmcm9tIFwiLi4vbGFuZ3VhZ2VfbW9kZWxzL2Jhc2UuanNcIjtcbmltcG9ydCB7IGlzTGFuZ0NoYWluVG9vbCwgaXNSdW5uYWJsZVRvb2xMaWtlLCBpc1N0cnVjdHVyZWRUb29sLCBpc1N0cnVjdHVyZWRUb29sUGFyYW1zIH0gZnJvbSBcIi4vdHlwZXMuanNcIjtcbmltcG9ydCB7IHogfSBmcm9tIFwiem9kL3YzXCI7XG5pbXBvcnQgeyB2YWxpZGF0ZSB9IGZyb20gXCJAY2Z3b3JrZXIvanNvbi1zY2hlbWFcIjtcbmltcG9ydCB7IHogYXMgeiQxIH0gZnJvbSBcInpvZC92NFwiO1xuXG4vLyNyZWdpb24gc3JjL3Rvb2xzL2luZGV4LnRzXG52YXIgdG9vbHNfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQodG9vbHNfZXhwb3J0cywge1xuXHRCYXNlVG9vbGtpdDogKCkgPT4gQmFzZVRvb2xraXQsXG5cdER5bmFtaWNTdHJ1Y3R1cmVkVG9vbDogKCkgPT4gRHluYW1pY1N0cnVjdHVyZWRUb29sLFxuXHREeW5hbWljVG9vbDogKCkgPT4gRHluYW1pY1Rvb2wsXG5cdFN0cnVjdHVyZWRUb29sOiAoKSA9PiBTdHJ1Y3R1cmVkVG9vbCxcblx0VG9vbDogKCkgPT4gVG9vbCxcblx0VG9vbElucHV0UGFyc2luZ0V4Y2VwdGlvbjogKCkgPT4gVG9vbElucHV0UGFyc2luZ0V4Y2VwdGlvbixcblx0aXNMYW5nQ2hhaW5Ub29sOiAoKSA9PiBpc0xhbmdDaGFpblRvb2wsXG5cdGlzUnVubmFibGVUb29sTGlrZTogKCkgPT4gaXNSdW5uYWJsZVRvb2xMaWtlLFxuXHRpc1N0cnVjdHVyZWRUb29sOiAoKSA9PiBpc1N0cnVjdHVyZWRUb29sLFxuXHRpc1N0cnVjdHVyZWRUb29sUGFyYW1zOiAoKSA9PiBpc1N0cnVjdHVyZWRUb29sUGFyYW1zLFxuXHR0b29sOiAoKSA9PiB0b29sXG59KTtcbi8qKlxuKiBCYXNlIGNsYXNzIGZvciBUb29scyB0aGF0IGFjY2VwdCBpbnB1dCBvZiBhbnkgc2hhcGUgZGVmaW5lZCBieSBhIFpvZCBzY2hlbWEuXG4qL1xudmFyIFN0cnVjdHVyZWRUb29sID0gY2xhc3MgZXh0ZW5kcyBCYXNlTGFuZ0NoYWluIHtcblx0LyoqXG5cdCogT3B0aW9uYWwgcHJvdmlkZXItc3BlY2lmaWMgZXh0cmEgZmllbGRzIGZvciB0aGUgdG9vbC5cblx0KlxuXHQqIFRoaXMgaXMgdXNlZCB0byBwYXNzIHByb3ZpZGVyLXNwZWNpZmljIGNvbmZpZ3VyYXRpb24gdGhhdCBkb2Vzbid0IGZpdCBpbnRvXG5cdCogc3RhbmRhcmQgdG9vbCBmaWVsZHMuXG5cdCovXG5cdGV4dHJhcztcblx0LyoqXG5cdCogV2hldGhlciB0byByZXR1cm4gdGhlIHRvb2wncyBvdXRwdXQgZGlyZWN0bHkuXG5cdCpcblx0KiBTZXR0aW5nIHRoaXMgdG8gdHJ1ZSBtZWFucyB0aGF0IGFmdGVyIHRoZSB0b29sIGlzIGNhbGxlZCxcblx0KiBhbiBhZ2VudCBzaG91bGQgc3RvcCBsb29waW5nLlxuXHQqL1xuXHRyZXR1cm5EaXJlY3QgPSBmYWxzZTtcblx0dmVyYm9zZVBhcnNpbmdFcnJvcnMgPSBmYWxzZTtcblx0Z2V0IGxjX25hbWVzcGFjZSgpIHtcblx0XHRyZXR1cm4gW1wibGFuZ2NoYWluXCIsIFwidG9vbHNcIl07XG5cdH1cblx0LyoqXG5cdCogVGhlIHRvb2wgcmVzcG9uc2UgZm9ybWF0LlxuXHQqXG5cdCogSWYgXCJjb250ZW50XCIgdGhlbiB0aGUgb3V0cHV0IG9mIHRoZSB0b29sIGlzIGludGVycHJldGVkIGFzIHRoZSBjb250ZW50cyBvZiBhXG5cdCogVG9vbE1lc3NhZ2UuIElmIFwiY29udGVudF9hbmRfYXJ0aWZhY3RcIiB0aGVuIHRoZSBvdXRwdXQgaXMgZXhwZWN0ZWQgdG8gYmUgYVxuXHQqIHR3by10dXBsZSBjb3JyZXNwb25kaW5nIHRvIHRoZSAoY29udGVudCwgYXJ0aWZhY3QpIG9mIGEgVG9vbE1lc3NhZ2UuXG5cdCpcblx0KiBAZGVmYXVsdCBcImNvbnRlbnRcIlxuXHQqL1xuXHRyZXNwb25zZUZvcm1hdCA9IFwiY29udGVudFwiO1xuXHQvKipcblx0KiBEZWZhdWx0IGNvbmZpZyBvYmplY3QgZm9yIHRoZSB0b29sIHJ1bm5hYmxlLlxuXHQqL1xuXHRkZWZhdWx0Q29uZmlnO1xuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHRzdXBlcihmaWVsZHMgPz8ge30pO1xuXHRcdHRoaXMudmVyYm9zZVBhcnNpbmdFcnJvcnMgPSBmaWVsZHM/LnZlcmJvc2VQYXJzaW5nRXJyb3JzID8/IHRoaXMudmVyYm9zZVBhcnNpbmdFcnJvcnM7XG5cdFx0dGhpcy5yZXNwb25zZUZvcm1hdCA9IGZpZWxkcz8ucmVzcG9uc2VGb3JtYXQgPz8gdGhpcy5yZXNwb25zZUZvcm1hdDtcblx0XHR0aGlzLmRlZmF1bHRDb25maWcgPSBmaWVsZHM/LmRlZmF1bHRDb25maWcgPz8gdGhpcy5kZWZhdWx0Q29uZmlnO1xuXHRcdHRoaXMubWV0YWRhdGEgPSBmaWVsZHM/Lm1ldGFkYXRhID8/IHRoaXMubWV0YWRhdGE7XG5cdFx0dGhpcy5leHRyYXMgPSBmaWVsZHM/LmV4dHJhcyA/PyB0aGlzLmV4dHJhcztcblx0fVxuXHQvKipcblx0KiBJbnZva2VzIHRoZSB0b29sIHdpdGggdGhlIHByb3ZpZGVkIGlucHV0IGFuZCBjb25maWd1cmF0aW9uLlxuXHQqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgZm9yIHRoZSB0b29sLlxuXHQqIEBwYXJhbSBjb25maWcgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBmb3IgdGhlIHRvb2wuXG5cdCogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgdG9vbCdzIG91dHB1dC5cblx0Ki9cblx0YXN5bmMgaW52b2tlKGlucHV0LCBjb25maWcpIHtcblx0XHRsZXQgdG9vbElucHV0O1xuXHRcdGxldCBlbnJpY2hlZENvbmZpZyA9IGVuc3VyZUNvbmZpZyhtZXJnZUNvbmZpZ3ModGhpcy5kZWZhdWx0Q29uZmlnLCBjb25maWcpKTtcblx0XHRpZiAoX2lzVG9vbENhbGwoaW5wdXQpKSB7XG5cdFx0XHR0b29sSW5wdXQgPSBpbnB1dC5hcmdzO1xuXHRcdFx0ZW5yaWNoZWRDb25maWcgPSB7XG5cdFx0XHRcdC4uLmVucmljaGVkQ29uZmlnLFxuXHRcdFx0XHR0b29sQ2FsbDogaW5wdXRcblx0XHRcdH07XG5cdFx0fSBlbHNlIHRvb2xJbnB1dCA9IGlucHV0O1xuXHRcdHJldHVybiB0aGlzLmNhbGwodG9vbElucHV0LCBlbnJpY2hlZENvbmZpZyk7XG5cdH1cblx0LyoqXG5cdCogQGRlcHJlY2F0ZWQgVXNlIC5pbnZva2UoKSBpbnN0ZWFkLiBXaWxsIGJlIHJlbW92ZWQgaW4gMC4zLjAuXG5cdCpcblx0KiBDYWxscyB0aGUgdG9vbCB3aXRoIHRoZSBwcm92aWRlZCBhcmd1bWVudCwgY29uZmlndXJhdGlvbiwgYW5kIHRhZ3MuIEl0XG5cdCogcGFyc2VzIHRoZSBpbnB1dCBhY2NvcmRpbmcgdG8gdGhlIHNjaGVtYSwgaGFuZGxlcyBhbnkgZXJyb3JzLCBhbmRcblx0KiBtYW5hZ2VzIGNhbGxiYWNrcy5cblx0KiBAcGFyYW0gYXJnIFRoZSBpbnB1dCBhcmd1bWVudCBmb3IgdGhlIHRvb2wuXG5cdCogQHBhcmFtIGNvbmZpZ0FyZyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9yIGNhbGxiYWNrcyBmb3IgdGhlIHRvb2wuXG5cdCogQHBhcmFtIHRhZ3MgT3B0aW9uYWwgdGFncyBmb3IgdGhlIHRvb2wuXG5cdCogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBhIHN0cmluZy5cblx0Ki9cblx0YXN5bmMgY2FsbChhcmcsIGNvbmZpZ0FyZywgdGFncykge1xuXHRcdGNvbnN0IGlucHV0Rm9yVmFsaWRhdGlvbiA9IF9pc1Rvb2xDYWxsKGFyZykgPyBhcmcuYXJncyA6IGFyZztcblx0XHRsZXQgcGFyc2VkO1xuXHRcdGlmIChpc0ludGVyb3Bab2RTY2hlbWEodGhpcy5zY2hlbWEpKSB0cnkge1xuXHRcdFx0cGFyc2VkID0gYXdhaXQgaW50ZXJvcFBhcnNlQXN5bmModGhpcy5zY2hlbWEsIGlucHV0Rm9yVmFsaWRhdGlvbik7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0bGV0IG1lc3NhZ2UgPSBgUmVjZWl2ZWQgdG9vbCBpbnB1dCBkaWQgbm90IG1hdGNoIGV4cGVjdGVkIHNjaGVtYWA7XG5cdFx0XHRpZiAodGhpcy52ZXJib3NlUGFyc2luZ0Vycm9ycykgbWVzc2FnZSA9IGAke21lc3NhZ2V9XFxuRGV0YWlsczogJHtlLm1lc3NhZ2V9YDtcblx0XHRcdGlmIChpc0ludGVyb3Bab2RFcnJvcihlKSkgbWVzc2FnZSA9IGAke21lc3NhZ2V9XFxuXFxuJHt6JDEucHJldHRpZnlFcnJvcihlKX1gO1xuXHRcdFx0dGhyb3cgbmV3IFRvb2xJbnB1dFBhcnNpbmdFeGNlcHRpb24obWVzc2FnZSwgSlNPTi5zdHJpbmdpZnkoYXJnKSk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0Y29uc3QgcmVzdWx0JDEgPSB2YWxpZGF0ZShpbnB1dEZvclZhbGlkYXRpb24sIHRoaXMuc2NoZW1hKTtcblx0XHRcdGlmICghcmVzdWx0JDEudmFsaWQpIHtcblx0XHRcdFx0bGV0IG1lc3NhZ2UgPSBgUmVjZWl2ZWQgdG9vbCBpbnB1dCBkaWQgbm90IG1hdGNoIGV4cGVjdGVkIHNjaGVtYWA7XG5cdFx0XHRcdGlmICh0aGlzLnZlcmJvc2VQYXJzaW5nRXJyb3JzKSBtZXNzYWdlID0gYCR7bWVzc2FnZX1cXG5EZXRhaWxzOiAke3Jlc3VsdCQxLmVycm9ycy5tYXAoKGUpID0+IGAke2Uua2V5d29yZExvY2F0aW9ufTogJHtlLmVycm9yfWApLmpvaW4oXCJcXG5cIil9YDtcblx0XHRcdFx0dGhyb3cgbmV3IFRvb2xJbnB1dFBhcnNpbmdFeGNlcHRpb24obWVzc2FnZSwgSlNPTi5zdHJpbmdpZnkoYXJnKSk7XG5cdFx0XHR9XG5cdFx0XHRwYXJzZWQgPSBpbnB1dEZvclZhbGlkYXRpb247XG5cdFx0fVxuXHRcdGNvbnN0IGNvbmZpZyA9IHBhcnNlQ2FsbGJhY2tDb25maWdBcmcoY29uZmlnQXJnKTtcblx0XHRjb25zdCBjYWxsYmFja01hbmFnZXJfID0gQ2FsbGJhY2tNYW5hZ2VyLmNvbmZpZ3VyZShjb25maWcuY2FsbGJhY2tzLCB0aGlzLmNhbGxiYWNrcywgY29uZmlnLnRhZ3MgfHwgdGFncywgdGhpcy50YWdzLCBjb25maWcubWV0YWRhdGEsIHRoaXMubWV0YWRhdGEsIHsgdmVyYm9zZTogdGhpcy52ZXJib3NlIH0pO1xuXHRcdGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVUb29sU3RhcnQodGhpcy50b0pTT04oKSwgdHlwZW9mIGFyZyA9PT0gXCJzdHJpbmdcIiA/IGFyZyA6IEpTT04uc3RyaW5naWZ5KGFyZyksIGNvbmZpZy5ydW5JZCwgdm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgY29uZmlnLnJ1bk5hbWUpO1xuXHRcdGRlbGV0ZSBjb25maWcucnVuSWQ7XG5cdFx0bGV0IHJlc3VsdDtcblx0XHR0cnkge1xuXHRcdFx0cmVzdWx0ID0gYXdhaXQgdGhpcy5fY2FsbChwYXJzZWQsIHJ1bk1hbmFnZXIsIGNvbmZpZyk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0YXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlVG9vbEVycm9yKGUpO1xuXHRcdFx0dGhyb3cgZTtcblx0XHR9XG5cdFx0bGV0IGNvbnRlbnQ7XG5cdFx0bGV0IGFydGlmYWN0O1xuXHRcdGlmICh0aGlzLnJlc3BvbnNlRm9ybWF0ID09PSBcImNvbnRlbnRfYW5kX2FydGlmYWN0XCIpIGlmIChBcnJheS5pc0FycmF5KHJlc3VsdCkgJiYgcmVzdWx0Lmxlbmd0aCA9PT0gMikgW2NvbnRlbnQsIGFydGlmYWN0XSA9IHJlc3VsdDtcblx0XHRlbHNlIHRocm93IG5ldyBFcnJvcihgVG9vbCByZXNwb25zZSBmb3JtYXQgaXMgXCJjb250ZW50X2FuZF9hcnRpZmFjdFwiIGJ1dCB0aGUgb3V0cHV0IHdhcyBub3QgYSB0d28tdHVwbGUuXFxuUmVzdWx0OiAke0pTT04uc3RyaW5naWZ5KHJlc3VsdCl9YCk7XG5cdFx0ZWxzZSBjb250ZW50ID0gcmVzdWx0O1xuXHRcdGxldCB0b29sQ2FsbElkO1xuXHRcdGlmIChfaXNUb29sQ2FsbChhcmcpKSB0b29sQ2FsbElkID0gYXJnLmlkO1xuXHRcdGlmICghdG9vbENhbGxJZCAmJiBfY29uZmlnSGFzVG9vbENhbGxJZChjb25maWcpKSB0b29sQ2FsbElkID0gY29uZmlnLnRvb2xDYWxsLmlkO1xuXHRcdGNvbnN0IGZvcm1hdHRlZE91dHB1dCA9IF9mb3JtYXRUb29sT3V0cHV0KHtcblx0XHRcdGNvbnRlbnQsXG5cdFx0XHRhcnRpZmFjdCxcblx0XHRcdHRvb2xDYWxsSWQsXG5cdFx0XHRuYW1lOiB0aGlzLm5hbWUsXG5cdFx0XHRtZXRhZGF0YTogdGhpcy5tZXRhZGF0YVxuXHRcdH0pO1xuXHRcdGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZVRvb2xFbmQoZm9ybWF0dGVkT3V0cHV0KTtcblx0XHRyZXR1cm4gZm9ybWF0dGVkT3V0cHV0O1xuXHR9XG59O1xuLyoqXG4qIEJhc2UgY2xhc3MgZm9yIFRvb2xzIHRoYXQgYWNjZXB0IGlucHV0IGFzIGEgc3RyaW5nLlxuKi9cbnZhciBUb29sID0gY2xhc3MgZXh0ZW5kcyBTdHJ1Y3R1cmVkVG9vbCB7XG5cdHNjaGVtYSA9IHoub2JqZWN0KHsgaW5wdXQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSB9KS50cmFuc2Zvcm0oKG9iaikgPT4gb2JqLmlucHV0KTtcblx0Y29uc3RydWN0b3IoZmllbGRzKSB7XG5cdFx0c3VwZXIoZmllbGRzKTtcblx0fVxuXHQvKipcblx0KiBAZGVwcmVjYXRlZCBVc2UgLmludm9rZSgpIGluc3RlYWQuIFdpbGwgYmUgcmVtb3ZlZCBpbiAwLjMuMC5cblx0KlxuXHQqIENhbGxzIHRoZSB0b29sIHdpdGggdGhlIHByb3ZpZGVkIGFyZ3VtZW50IGFuZCBjYWxsYmFja3MuIEl0IGhhbmRsZXNcblx0KiBzdHJpbmcgaW5wdXRzIHNwZWNpZmljYWxseS5cblx0KiBAcGFyYW0gYXJnIFRoZSBpbnB1dCBhcmd1bWVudCBmb3IgdGhlIHRvb2wsIHdoaWNoIGNhbiBiZSBhIHN0cmluZywgdW5kZWZpbmVkLCBvciBhbiBpbnB1dCBvZiB0aGUgdG9vbCdzIHNjaGVtYS5cblx0KiBAcGFyYW0gY2FsbGJhY2tzIE9wdGlvbmFsIGNhbGxiYWNrcyBmb3IgdGhlIHRvb2wuXG5cdCogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBhIHN0cmluZy5cblx0Ki9cblx0Y2FsbChhcmcsIGNhbGxiYWNrcykge1xuXHRcdGNvbnN0IHN0cnVjdHVyZWRBcmcgPSB0eXBlb2YgYXJnID09PSBcInN0cmluZ1wiIHx8IGFyZyA9PSBudWxsID8geyBpbnB1dDogYXJnIH0gOiBhcmc7XG5cdFx0cmV0dXJuIHN1cGVyLmNhbGwoc3RydWN0dXJlZEFyZywgY2FsbGJhY2tzKTtcblx0fVxufTtcbi8qKlxuKiBBIHRvb2wgdGhhdCBjYW4gYmUgY3JlYXRlZCBkeW5hbWljYWxseSBmcm9tIGEgZnVuY3Rpb24sIG5hbWUsIGFuZCBkZXNjcmlwdGlvbi5cbiovXG52YXIgRHluYW1pY1Rvb2wgPSBjbGFzcyBleHRlbmRzIFRvb2wge1xuXHRzdGF0aWMgbGNfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJEeW5hbWljVG9vbFwiO1xuXHR9XG5cdG5hbWU7XG5cdGRlc2NyaXB0aW9uO1xuXHRmdW5jO1xuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHRzdXBlcihmaWVsZHMpO1xuXHRcdHRoaXMubmFtZSA9IGZpZWxkcy5uYW1lO1xuXHRcdHRoaXMuZGVzY3JpcHRpb24gPSBmaWVsZHMuZGVzY3JpcHRpb247XG5cdFx0dGhpcy5mdW5jID0gZmllbGRzLmZ1bmM7XG5cdFx0dGhpcy5yZXR1cm5EaXJlY3QgPSBmaWVsZHMucmV0dXJuRGlyZWN0ID8/IHRoaXMucmV0dXJuRGlyZWN0O1xuXHR9XG5cdC8qKlxuXHQqIEBkZXByZWNhdGVkIFVzZSAuaW52b2tlKCkgaW5zdGVhZC4gV2lsbCBiZSByZW1vdmVkIGluIDAuMy4wLlxuXHQqL1xuXHRhc3luYyBjYWxsKGFyZywgY29uZmlnQXJnKSB7XG5cdFx0Y29uc3QgY29uZmlnID0gcGFyc2VDYWxsYmFja0NvbmZpZ0FyZyhjb25maWdBcmcpO1xuXHRcdGlmIChjb25maWcucnVuTmFtZSA9PT0gdm9pZCAwKSBjb25maWcucnVuTmFtZSA9IHRoaXMubmFtZTtcblx0XHRyZXR1cm4gc3VwZXIuY2FsbChhcmcsIGNvbmZpZyk7XG5cdH1cblx0LyoqIEBpZ25vcmUgKi9cblx0YXN5bmMgX2NhbGwoaW5wdXQsIHJ1bk1hbmFnZXIsIHBhcmVudENvbmZpZykge1xuXHRcdHJldHVybiB0aGlzLmZ1bmMoaW5wdXQsIHJ1bk1hbmFnZXIsIHBhcmVudENvbmZpZyk7XG5cdH1cbn07XG4vKipcbiogQSB0b29sIHRoYXQgY2FuIGJlIGNyZWF0ZWQgZHluYW1pY2FsbHkgZnJvbSBhIGZ1bmN0aW9uLCBuYW1lLCBhbmRcbiogZGVzY3JpcHRpb24sIGRlc2lnbmVkIHRvIHdvcmsgd2l0aCBzdHJ1Y3R1cmVkIGRhdGEuIEl0IGV4dGVuZHMgdGhlXG4qIFN0cnVjdHVyZWRUb29sIGNsYXNzIGFuZCBvdmVycmlkZXMgdGhlIF9jYWxsIG1ldGhvZCB0byBleGVjdXRlIHRoZVxuKiBwcm92aWRlZCBmdW5jdGlvbiB3aGVuIHRoZSB0b29sIGlzIGNhbGxlZC5cbipcbiogU2NoZW1hIGNhbiBiZSBwYXNzZWQgYXMgWm9kIG9yIEpTT04gc2NoZW1hLiBUaGUgdG9vbCB3aWxsIG5vdCB2YWxpZGF0ZVxuKiBpbnB1dCBpZiBKU09OIHNjaGVtYSBpcyBwYXNzZWQuXG4qXG4qIEB0ZW1wbGF0ZSBTY2hlbWFUIFRoZSBpbnB1dCBzY2hlbWEgdHlwZSBmb3IgdGhlIHRvb2wgKFpvZCBzY2hlbWEgb3IgSlNPTiBzY2hlbWEpLiBEZWZhdWx0cyB0byBgVG9vbElucHV0U2NoZW1hQmFzZWAuXG4qIEB0ZW1wbGF0ZSBTY2hlbWFPdXRwdXRUIFRoZSBvdXRwdXQgdHlwZSBkZXJpdmVkIGZyb20gdGhlIHNjaGVtYSBhZnRlciBwYXJzaW5nL3ZhbGlkYXRpb24uIERlZmF1bHRzIHRvIGBUb29sSW5wdXRTY2hlbWFPdXRwdXRUeXBlPFNjaGVtYVQ+YC5cbiogQHRlbXBsYXRlIFNjaGVtYUlucHV0VCBUaGUgaW5wdXQgdHlwZSBkZXJpdmVkIGZyb20gdGhlIHNjaGVtYSBiZWZvcmUgcGFyc2luZy4gRGVmYXVsdHMgdG8gYFRvb2xJbnB1dFNjaGVtYUlucHV0VHlwZTxTY2hlbWFUPmAuXG4qIEB0ZW1wbGF0ZSBUb29sT3V0cHV0VCBUaGUgcmV0dXJuIHR5cGUgb2YgdGhlIHRvb2wncyBmdW5jdGlvbi4gRGVmYXVsdHMgdG8gYFRvb2xPdXRwdXRUeXBlYC5cbiogQHRlbXBsYXRlIE5hbWVUIFRoZSBsaXRlcmFsIHR5cGUgb2YgdGhlIHRvb2wgbmFtZSAoZm9yIGRpc2NyaW1pbmF0ZWQgdW5pb24gc3VwcG9ydCkuIERlZmF1bHRzIHRvIGBzdHJpbmdgLlxuKi9cbnZhciBEeW5hbWljU3RydWN0dXJlZFRvb2wgPSBjbGFzcyBleHRlbmRzIFN0cnVjdHVyZWRUb29sIHtcblx0c3RhdGljIGxjX25hbWUoKSB7XG5cdFx0cmV0dXJuIFwiRHluYW1pY1N0cnVjdHVyZWRUb29sXCI7XG5cdH1cblx0ZGVzY3JpcHRpb247XG5cdGZ1bmM7XG5cdHNjaGVtYTtcblx0Y29uc3RydWN0b3IoZmllbGRzKSB7XG5cdFx0c3VwZXIoZmllbGRzKTtcblx0XHR0aGlzLm5hbWUgPSBmaWVsZHMubmFtZTtcblx0XHR0aGlzLmRlc2NyaXB0aW9uID0gZmllbGRzLmRlc2NyaXB0aW9uO1xuXHRcdHRoaXMuZnVuYyA9IGZpZWxkcy5mdW5jO1xuXHRcdHRoaXMucmV0dXJuRGlyZWN0ID0gZmllbGRzLnJldHVybkRpcmVjdCA/PyB0aGlzLnJldHVybkRpcmVjdDtcblx0XHR0aGlzLnNjaGVtYSA9IGZpZWxkcy5zY2hlbWE7XG5cdH1cblx0LyoqXG5cdCogQGRlcHJlY2F0ZWQgVXNlIC5pbnZva2UoKSBpbnN0ZWFkLiBXaWxsIGJlIHJlbW92ZWQgaW4gMC4zLjAuXG5cdCovXG5cdGFzeW5jIGNhbGwoYXJnLCBjb25maWdBcmcsIHRhZ3MpIHtcblx0XHRjb25zdCBjb25maWcgPSBwYXJzZUNhbGxiYWNrQ29uZmlnQXJnKGNvbmZpZ0FyZyk7XG5cdFx0aWYgKGNvbmZpZy5ydW5OYW1lID09PSB2b2lkIDApIGNvbmZpZy5ydW5OYW1lID0gdGhpcy5uYW1lO1xuXHRcdHJldHVybiBzdXBlci5jYWxsKGFyZywgY29uZmlnLCB0YWdzKTtcblx0fVxuXHRfY2FsbChhcmcsIHJ1bk1hbmFnZXIsIHBhcmVudENvbmZpZykge1xuXHRcdHJldHVybiB0aGlzLmZ1bmMoYXJnLCBydW5NYW5hZ2VyLCBwYXJlbnRDb25maWcpO1xuXHR9XG59O1xuLyoqXG4qIEFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIHRvb2xraXRzIGluIExhbmdDaGFpbi4gVG9vbGtpdHMgYXJlIGNvbGxlY3Rpb25zXG4qIG9mIHRvb2xzIHRoYXQgYWdlbnRzIGNhbiB1c2UuIFN1YmNsYXNzZXMgbXVzdCBpbXBsZW1lbnQgdGhlIGB0b29sc2BcbiogcHJvcGVydHkgdG8gcHJvdmlkZSB0aGUgc3BlY2lmaWMgdG9vbHMgZm9yIHRoZSB0b29sa2l0LlxuKi9cbnZhciBCYXNlVG9vbGtpdCA9IGNsYXNzIHtcblx0Z2V0VG9vbHMoKSB7XG5cdFx0cmV0dXJuIHRoaXMudG9vbHM7XG5cdH1cbn07XG5mdW5jdGlvbiB0b29sKGZ1bmMsIGZpZWxkcykge1xuXHRjb25zdCBpc1NpbXBsZVN0cmluZ1NjaGVtYSA9IGlzU2ltcGxlU3RyaW5nWm9kU2NoZW1hKGZpZWxkcy5zY2hlbWEpO1xuXHRjb25zdCBpc1N0cmluZ0pTT05TY2hlbWEgPSB2YWxpZGF0ZXNPbmx5U3RyaW5ncyhmaWVsZHMuc2NoZW1hKTtcblx0aWYgKCFmaWVsZHMuc2NoZW1hIHx8IGlzU2ltcGxlU3RyaW5nU2NoZW1hIHx8IGlzU3RyaW5nSlNPTlNjaGVtYSkgcmV0dXJuIG5ldyBEeW5hbWljVG9vbCh7XG5cdFx0Li4uZmllbGRzLFxuXHRcdGRlc2NyaXB0aW9uOiBmaWVsZHMuZGVzY3JpcHRpb24gPz8gZmllbGRzLnNjaGVtYT8uZGVzY3JpcHRpb24gPz8gYCR7ZmllbGRzLm5hbWV9IHRvb2xgLFxuXHRcdGZ1bmM6IGFzeW5jIChpbnB1dCwgcnVuTWFuYWdlciwgY29uZmlnKSA9PiB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHRjb25zdCBjaGlsZENvbmZpZyA9IHBhdGNoQ29uZmlnKGNvbmZpZywgeyBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKCkgfSk7XG5cdFx0XHRcdEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24ucnVuV2l0aENvbmZpZyhwaWNrUnVubmFibGVDb25maWdLZXlzKGNoaWxkQ29uZmlnKSwgYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRyZXNvbHZlKGZ1bmMoaW5wdXQsIGNoaWxkQ29uZmlnKSk7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdFx0cmVqZWN0KGUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH0pO1xuXHRjb25zdCBzY2hlbWEgPSBmaWVsZHMuc2NoZW1hO1xuXHRjb25zdCBkZXNjcmlwdGlvbiA9IGZpZWxkcy5kZXNjcmlwdGlvbiA/PyBmaWVsZHMuc2NoZW1hLmRlc2NyaXB0aW9uID8/IGAke2ZpZWxkcy5uYW1lfSB0b29sYDtcblx0cmV0dXJuIG5ldyBEeW5hbWljU3RydWN0dXJlZFRvb2woe1xuXHRcdC4uLmZpZWxkcyxcblx0XHRkZXNjcmlwdGlvbixcblx0XHRzY2hlbWEsXG5cdFx0ZnVuYzogYXN5bmMgKGlucHV0LCBydW5NYW5hZ2VyLCBjb25maWcpID0+IHtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGxldCBsaXN0ZW5lcjtcblx0XHRcdFx0Y29uc3QgY2xlYW51cCA9ICgpID0+IHtcblx0XHRcdFx0XHRpZiAoY29uZmlnPy5zaWduYWwgJiYgbGlzdGVuZXIpIGNvbmZpZy5zaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIGxpc3RlbmVyKTtcblx0XHRcdFx0fTtcblx0XHRcdFx0aWYgKGNvbmZpZz8uc2lnbmFsKSB7XG5cdFx0XHRcdFx0bGlzdGVuZXIgPSAoKSA9PiB7XG5cdFx0XHRcdFx0XHRjbGVhbnVwKCk7XG5cdFx0XHRcdFx0XHRyZWplY3QoZ2V0QWJvcnRTaWduYWxFcnJvcihjb25maWcuc2lnbmFsKSk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRjb25maWcuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBsaXN0ZW5lcik7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgY2hpbGRDb25maWcgPSBwYXRjaENvbmZpZyhjb25maWcsIHsgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZCgpIH0pO1xuXHRcdFx0XHRBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLnJ1bldpdGhDb25maWcocGlja1J1bm5hYmxlQ29uZmlnS2V5cyhjaGlsZENvbmZpZyksIGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgZnVuYyhpbnB1dCwgY2hpbGRDb25maWcpO1xuXHRcdFx0XHRcdFx0LyoqXG5cdFx0XHRcdFx0XHQqIElmIHRoZSBzaWduYWwgaXMgYWJvcnRlZCwgd2UgZG9uJ3Qgd2FudCB0byByZXNvbHZlIHRoZSBwcm9taXNlXG5cdFx0XHRcdFx0XHQqIGFzIHRoZSBwcm9taXNlIGlzIGFscmVhZHkgcmVqZWN0ZWQuXG5cdFx0XHRcdFx0XHQqL1xuXHRcdFx0XHRcdFx0aWYgKGNvbmZpZz8uc2lnbmFsPy5hYm9ydGVkKSB7XG5cdFx0XHRcdFx0XHRcdGNsZWFudXAoKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Y2xlYW51cCgpO1xuXHRcdFx0XHRcdFx0cmVzb2x2ZShyZXN1bHQpO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRcdGNsZWFudXAoKTtcblx0XHRcdFx0XHRcdHJlamVjdChlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9KTtcbn1cbmZ1bmN0aW9uIF9mb3JtYXRUb29sT3V0cHV0KHBhcmFtcykge1xuXHRjb25zdCB7IGNvbnRlbnQsIGFydGlmYWN0LCB0b29sQ2FsbElkLCBtZXRhZGF0YSB9ID0gcGFyYW1zO1xuXHRpZiAodG9vbENhbGxJZCAmJiAhaXNEaXJlY3RUb29sT3V0cHV0KGNvbnRlbnQpKSBpZiAodHlwZW9mIGNvbnRlbnQgPT09IFwic3RyaW5nXCIgfHwgQXJyYXkuaXNBcnJheShjb250ZW50KSAmJiBjb250ZW50LmV2ZXJ5KChpdGVtKSA9PiB0eXBlb2YgaXRlbSA9PT0gXCJvYmplY3RcIikpIHJldHVybiBuZXcgVG9vbE1lc3NhZ2Uoe1xuXHRcdHN0YXR1czogXCJzdWNjZXNzXCIsXG5cdFx0Y29udGVudCxcblx0XHRhcnRpZmFjdCxcblx0XHR0b29sX2NhbGxfaWQ6IHRvb2xDYWxsSWQsXG5cdFx0bmFtZTogcGFyYW1zLm5hbWUsXG5cdFx0bWV0YWRhdGFcblx0fSk7XG5cdGVsc2UgcmV0dXJuIG5ldyBUb29sTWVzc2FnZSh7XG5cdFx0c3RhdHVzOiBcInN1Y2Nlc3NcIixcblx0XHRjb250ZW50OiBfc3RyaW5naWZ5KGNvbnRlbnQpLFxuXHRcdGFydGlmYWN0LFxuXHRcdHRvb2xfY2FsbF9pZDogdG9vbENhbGxJZCxcblx0XHRuYW1lOiBwYXJhbXMubmFtZSxcblx0XHRtZXRhZGF0YVxuXHR9KTtcblx0ZWxzZSByZXR1cm4gY29udGVudDtcbn1cbmZ1bmN0aW9uIF9zdHJpbmdpZnkoY29udGVudCkge1xuXHR0cnkge1xuXHRcdHJldHVybiBKU09OLnN0cmluZ2lmeShjb250ZW50LCBudWxsLCAyKSA/PyBcIlwiO1xuXHR9IGNhdGNoIChfbm9PcCkge1xuXHRcdHJldHVybiBgJHtjb250ZW50fWA7XG5cdH1cbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBCYXNlVG9vbGtpdCwgRHluYW1pY1N0cnVjdHVyZWRUb29sLCBEeW5hbWljVG9vbCwgU3RydWN0dXJlZFRvb2wsIFRvb2wsIFRvb2xJbnB1dFBhcnNpbmdFeGNlcHRpb24sIGlzTGFuZ0NoYWluVG9vbCwgaXNSdW5uYWJsZVRvb2xMaWtlLCBpc1N0cnVjdHVyZWRUb29sLCBpc1N0cnVjdHVyZWRUb29sUGFyYW1zLCB0b29sLCB0b29sc19leHBvcnRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/tools/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/tools/types.js":
/*!**********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tools/types.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isLangChainTool: () => (/* binding */ isLangChainTool),\n/* harmony export */   isRunnableToolLike: () => (/* binding */ isRunnableToolLike),\n/* harmony export */   isStructuredTool: () => (/* binding */ isStructuredTool),\n/* harmony export */   isStructuredToolParams: () => (/* binding */ isStructuredToolParams)\n/* harmony export */ });\n/* harmony import */ var _utils_types_zod_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/types/zod.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/types/zod.js\");\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runnables/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/base.js\");\n\n\n\n//#region src/tools/types.ts\n/**\n* Confirm whether the inputted tool is an instance of `StructuredToolInterface`.\n*\n* @param {StructuredToolInterface | JSONSchema | undefined} tool The tool to check if it is an instance of `StructuredToolInterface`.\n* @returns {tool is StructuredToolInterface} Whether the inputted tool is an instance of `StructuredToolInterface`.\n*/\nfunction isStructuredTool(tool) {\n\treturn tool !== void 0 && Array.isArray(tool.lc_namespace);\n}\n/**\n* Confirm whether the inputted tool is an instance of `RunnableToolLike`.\n*\n* @param {unknown | undefined} tool The tool to check if it is an instance of `RunnableToolLike`.\n* @returns {tool is RunnableToolLike} Whether the inputted tool is an instance of `RunnableToolLike`.\n*/\nfunction isRunnableToolLike(tool) {\n\treturn tool !== void 0 && _runnables_base_js__WEBPACK_IMPORTED_MODULE_1__.Runnable.isRunnable(tool) && \"lc_name\" in tool.constructor && typeof tool.constructor.lc_name === \"function\" && tool.constructor.lc_name() === \"RunnableToolLike\";\n}\n/**\n* Confirm whether or not the tool contains the necessary properties to be considered a `StructuredToolParams`.\n*\n* @param {unknown | undefined} tool The object to check if it is a `StructuredToolParams`.\n* @returns {tool is StructuredToolParams} Whether the inputted object is a `StructuredToolParams`.\n*/\nfunction isStructuredToolParams(tool) {\n\treturn !!tool && typeof tool === \"object\" && \"name\" in tool && \"schema\" in tool && ((0,_utils_types_zod_js__WEBPACK_IMPORTED_MODULE_0__.isInteropZodSchema)(tool.schema) || tool.schema != null && typeof tool.schema === \"object\" && \"type\" in tool.schema && typeof tool.schema.type === \"string\" && [\n\t\t\"null\",\n\t\t\"boolean\",\n\t\t\"object\",\n\t\t\"array\",\n\t\t\"number\",\n\t\t\"string\"\n\t].includes(tool.schema.type));\n}\n/**\n* Whether or not the tool is one of StructuredTool, RunnableTool or StructuredToolParams.\n* It returns `is StructuredToolParams` since that is the most minimal interface of the three,\n* while still containing the necessary properties to be passed to a LLM for tool calling.\n*\n* @param {unknown | undefined} tool The tool to check if it is a LangChain tool.\n* @returns {tool is StructuredToolParams} Whether the inputted tool is a LangChain tool.\n*/\nfunction isLangChainTool(tool) {\n\treturn isStructuredToolParams(tool) || isRunnableToolLike(tool) || isStructuredTool(tool);\n}\n\n//#endregion\n\n//# sourceMappingURL=types.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdG9vbHMvdHlwZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTJEO0FBQ1g7O0FBRWhEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxrREFBa0Q7QUFDNUQsWUFBWSxpQ0FBaUM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHFCQUFxQjtBQUMvQixZQUFZLDBCQUEwQjtBQUN0QztBQUNBO0FBQ0EsMkJBQTJCLHdEQUFRO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxxQkFBcUI7QUFDL0IsWUFBWSw4QkFBOEI7QUFDMUM7QUFDQTtBQUNBLHFGQUFxRix1RUFBa0I7QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHFCQUFxQjtBQUMvQixZQUFZLDhCQUE4QjtBQUMxQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUN5RjtBQUN6RiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3Rvb2xzL3R5cGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzSW50ZXJvcFpvZFNjaGVtYSB9IGZyb20gXCIuLi91dGlscy90eXBlcy96b2QuanNcIjtcbmltcG9ydCB7IFJ1bm5hYmxlIH0gZnJvbSBcIi4uL3J1bm5hYmxlcy9iYXNlLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdG9vbHMvdHlwZXMudHNcbi8qKlxuKiBDb25maXJtIHdoZXRoZXIgdGhlIGlucHV0dGVkIHRvb2wgaXMgYW4gaW5zdGFuY2Ugb2YgYFN0cnVjdHVyZWRUb29sSW50ZXJmYWNlYC5cbipcbiogQHBhcmFtIHtTdHJ1Y3R1cmVkVG9vbEludGVyZmFjZSB8IEpTT05TY2hlbWEgfCB1bmRlZmluZWR9IHRvb2wgVGhlIHRvb2wgdG8gY2hlY2sgaWYgaXQgaXMgYW4gaW5zdGFuY2Ugb2YgYFN0cnVjdHVyZWRUb29sSW50ZXJmYWNlYC5cbiogQHJldHVybnMge3Rvb2wgaXMgU3RydWN0dXJlZFRvb2xJbnRlcmZhY2V9IFdoZXRoZXIgdGhlIGlucHV0dGVkIHRvb2wgaXMgYW4gaW5zdGFuY2Ugb2YgYFN0cnVjdHVyZWRUb29sSW50ZXJmYWNlYC5cbiovXG5mdW5jdGlvbiBpc1N0cnVjdHVyZWRUb29sKHRvb2wpIHtcblx0cmV0dXJuIHRvb2wgIT09IHZvaWQgMCAmJiBBcnJheS5pc0FycmF5KHRvb2wubGNfbmFtZXNwYWNlKTtcbn1cbi8qKlxuKiBDb25maXJtIHdoZXRoZXIgdGhlIGlucHV0dGVkIHRvb2wgaXMgYW4gaW5zdGFuY2Ugb2YgYFJ1bm5hYmxlVG9vbExpa2VgLlxuKlxuKiBAcGFyYW0ge3Vua25vd24gfCB1bmRlZmluZWR9IHRvb2wgVGhlIHRvb2wgdG8gY2hlY2sgaWYgaXQgaXMgYW4gaW5zdGFuY2Ugb2YgYFJ1bm5hYmxlVG9vbExpa2VgLlxuKiBAcmV0dXJucyB7dG9vbCBpcyBSdW5uYWJsZVRvb2xMaWtlfSBXaGV0aGVyIHRoZSBpbnB1dHRlZCB0b29sIGlzIGFuIGluc3RhbmNlIG9mIGBSdW5uYWJsZVRvb2xMaWtlYC5cbiovXG5mdW5jdGlvbiBpc1J1bm5hYmxlVG9vbExpa2UodG9vbCkge1xuXHRyZXR1cm4gdG9vbCAhPT0gdm9pZCAwICYmIFJ1bm5hYmxlLmlzUnVubmFibGUodG9vbCkgJiYgXCJsY19uYW1lXCIgaW4gdG9vbC5jb25zdHJ1Y3RvciAmJiB0eXBlb2YgdG9vbC5jb25zdHJ1Y3Rvci5sY19uYW1lID09PSBcImZ1bmN0aW9uXCIgJiYgdG9vbC5jb25zdHJ1Y3Rvci5sY19uYW1lKCkgPT09IFwiUnVubmFibGVUb29sTGlrZVwiO1xufVxuLyoqXG4qIENvbmZpcm0gd2hldGhlciBvciBub3QgdGhlIHRvb2wgY29udGFpbnMgdGhlIG5lY2Vzc2FyeSBwcm9wZXJ0aWVzIHRvIGJlIGNvbnNpZGVyZWQgYSBgU3RydWN0dXJlZFRvb2xQYXJhbXNgLlxuKlxuKiBAcGFyYW0ge3Vua25vd24gfCB1bmRlZmluZWR9IHRvb2wgVGhlIG9iamVjdCB0byBjaGVjayBpZiBpdCBpcyBhIGBTdHJ1Y3R1cmVkVG9vbFBhcmFtc2AuXG4qIEByZXR1cm5zIHt0b29sIGlzIFN0cnVjdHVyZWRUb29sUGFyYW1zfSBXaGV0aGVyIHRoZSBpbnB1dHRlZCBvYmplY3QgaXMgYSBgU3RydWN0dXJlZFRvb2xQYXJhbXNgLlxuKi9cbmZ1bmN0aW9uIGlzU3RydWN0dXJlZFRvb2xQYXJhbXModG9vbCkge1xuXHRyZXR1cm4gISF0b29sICYmIHR5cGVvZiB0b29sID09PSBcIm9iamVjdFwiICYmIFwibmFtZVwiIGluIHRvb2wgJiYgXCJzY2hlbWFcIiBpbiB0b29sICYmIChpc0ludGVyb3Bab2RTY2hlbWEodG9vbC5zY2hlbWEpIHx8IHRvb2wuc2NoZW1hICE9IG51bGwgJiYgdHlwZW9mIHRvb2wuc2NoZW1hID09PSBcIm9iamVjdFwiICYmIFwidHlwZVwiIGluIHRvb2wuc2NoZW1hICYmIHR5cGVvZiB0b29sLnNjaGVtYS50eXBlID09PSBcInN0cmluZ1wiICYmIFtcblx0XHRcIm51bGxcIixcblx0XHRcImJvb2xlYW5cIixcblx0XHRcIm9iamVjdFwiLFxuXHRcdFwiYXJyYXlcIixcblx0XHRcIm51bWJlclwiLFxuXHRcdFwic3RyaW5nXCJcblx0XS5pbmNsdWRlcyh0b29sLnNjaGVtYS50eXBlKSk7XG59XG4vKipcbiogV2hldGhlciBvciBub3QgdGhlIHRvb2wgaXMgb25lIG9mIFN0cnVjdHVyZWRUb29sLCBSdW5uYWJsZVRvb2wgb3IgU3RydWN0dXJlZFRvb2xQYXJhbXMuXG4qIEl0IHJldHVybnMgYGlzIFN0cnVjdHVyZWRUb29sUGFyYW1zYCBzaW5jZSB0aGF0IGlzIHRoZSBtb3N0IG1pbmltYWwgaW50ZXJmYWNlIG9mIHRoZSB0aHJlZSxcbiogd2hpbGUgc3RpbGwgY29udGFpbmluZyB0aGUgbmVjZXNzYXJ5IHByb3BlcnRpZXMgdG8gYmUgcGFzc2VkIHRvIGEgTExNIGZvciB0b29sIGNhbGxpbmcuXG4qXG4qIEBwYXJhbSB7dW5rbm93biB8IHVuZGVmaW5lZH0gdG9vbCBUaGUgdG9vbCB0byBjaGVjayBpZiBpdCBpcyBhIExhbmdDaGFpbiB0b29sLlxuKiBAcmV0dXJucyB7dG9vbCBpcyBTdHJ1Y3R1cmVkVG9vbFBhcmFtc30gV2hldGhlciB0aGUgaW5wdXR0ZWQgdG9vbCBpcyBhIExhbmdDaGFpbiB0b29sLlxuKi9cbmZ1bmN0aW9uIGlzTGFuZ0NoYWluVG9vbCh0b29sKSB7XG5cdHJldHVybiBpc1N0cnVjdHVyZWRUb29sUGFyYW1zKHRvb2wpIHx8IGlzUnVubmFibGVUb29sTGlrZSh0b29sKSB8fCBpc1N0cnVjdHVyZWRUb29sKHRvb2wpO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGlzTGFuZ0NoYWluVG9vbCwgaXNSdW5uYWJsZVRvb2xMaWtlLCBpc1N0cnVjdHVyZWRUb29sLCBpc1N0cnVjdHVyZWRUb29sUGFyYW1zIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10eXBlcy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/tools/types.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/tools/utils.js":
/*!**********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tools/utils.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ToolInputParsingException: () => (/* binding */ ToolInputParsingException),\n/* harmony export */   _configHasToolCallId: () => (/* binding */ _configHasToolCallId),\n/* harmony export */   _isToolCall: () => (/* binding */ _isToolCall)\n/* harmony export */ });\n//#region src/tools/utils.ts\nfunction _isToolCall(toolCall) {\n\treturn !!(toolCall && typeof toolCall === \"object\" && \"type\" in toolCall && toolCall.type === \"tool_call\");\n}\nfunction _configHasToolCallId(config) {\n\treturn !!(config && typeof config === \"object\" && \"toolCall\" in config && config.toolCall != null && typeof config.toolCall === \"object\" && \"id\" in config.toolCall && typeof config.toolCall.id === \"string\");\n}\n/**\n* Custom error class used to handle exceptions related to tool input parsing.\n* It extends the built-in `Error` class and adds an optional `output`\n* property that can hold the output that caused the exception.\n*/\nvar ToolInputParsingException = class extends Error {\n\toutput;\n\tconstructor(message, output) {\n\t\tsuper(message);\n\t\tthis.output = output;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdG9vbHMvdXRpbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDd0U7QUFDeEUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90b29scy91dGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3Rvb2xzL3V0aWxzLnRzXG5mdW5jdGlvbiBfaXNUb29sQ2FsbCh0b29sQ2FsbCkge1xuXHRyZXR1cm4gISEodG9vbENhbGwgJiYgdHlwZW9mIHRvb2xDYWxsID09PSBcIm9iamVjdFwiICYmIFwidHlwZVwiIGluIHRvb2xDYWxsICYmIHRvb2xDYWxsLnR5cGUgPT09IFwidG9vbF9jYWxsXCIpO1xufVxuZnVuY3Rpb24gX2NvbmZpZ0hhc1Rvb2xDYWxsSWQoY29uZmlnKSB7XG5cdHJldHVybiAhIShjb25maWcgJiYgdHlwZW9mIGNvbmZpZyA9PT0gXCJvYmplY3RcIiAmJiBcInRvb2xDYWxsXCIgaW4gY29uZmlnICYmIGNvbmZpZy50b29sQ2FsbCAhPSBudWxsICYmIHR5cGVvZiBjb25maWcudG9vbENhbGwgPT09IFwib2JqZWN0XCIgJiYgXCJpZFwiIGluIGNvbmZpZy50b29sQ2FsbCAmJiB0eXBlb2YgY29uZmlnLnRvb2xDYWxsLmlkID09PSBcInN0cmluZ1wiKTtcbn1cbi8qKlxuKiBDdXN0b20gZXJyb3IgY2xhc3MgdXNlZCB0byBoYW5kbGUgZXhjZXB0aW9ucyByZWxhdGVkIHRvIHRvb2wgaW5wdXQgcGFyc2luZy5cbiogSXQgZXh0ZW5kcyB0aGUgYnVpbHQtaW4gYEVycm9yYCBjbGFzcyBhbmQgYWRkcyBhbiBvcHRpb25hbCBgb3V0cHV0YFxuKiBwcm9wZXJ0eSB0aGF0IGNhbiBob2xkIHRoZSBvdXRwdXQgdGhhdCBjYXVzZWQgdGhlIGV4Y2VwdGlvbi5cbiovXG52YXIgVG9vbElucHV0UGFyc2luZ0V4Y2VwdGlvbiA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuXHRvdXRwdXQ7XG5cdGNvbnN0cnVjdG9yKG1lc3NhZ2UsIG91dHB1dCkge1xuXHRcdHN1cGVyKG1lc3NhZ2UpO1xuXHRcdHRoaXMub3V0cHV0ID0gb3V0cHV0O1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IFRvb2xJbnB1dFBhcnNpbmdFeGNlcHRpb24sIF9jb25maWdIYXNUb29sQ2FsbElkLCBfaXNUb29sQ2FsbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/tools/utils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/tracers/base.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/base.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseTracer: () => (/* binding */ BaseTracer),\n/* harmony export */   base_exports: () => (/* binding */ base_exports),\n/* harmony export */   isBaseTracer: () => (/* binding */ isBaseTracer)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/env.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _callbacks_base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../callbacks/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/callbacks/base.js\");\n/* harmony import */ var langsmith_run_trees__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! langsmith/run_trees */ \"(ssr)/./node_modules/langsmith/run_trees.js\");\n\n\n\n\n\n//#region src/tracers/base.ts\nvar base_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(base_exports, {\n\tBaseTracer: () => BaseTracer,\n\tisBaseTracer: () => isBaseTracer\n});\nconst convertRunTreeToRun = (runTree) => {\n\tif (!runTree) return void 0;\n\trunTree.events = runTree.events ?? [];\n\trunTree.child_runs = runTree.child_runs ?? [];\n\treturn runTree;\n};\nfunction convertRunToRunTree(run, parentRun) {\n\tif (!run) return void 0;\n\treturn new langsmith_run_trees__WEBPACK_IMPORTED_MODULE_3__.RunTree({\n\t\t...run,\n\t\tstart_time: run._serialized_start_time ?? run.start_time,\n\t\tparent_run: convertRunToRunTree(parentRun),\n\t\tchild_runs: run.child_runs.map((r) => convertRunToRunTree(r)).filter((r) => r !== void 0),\n\t\textra: {\n\t\t\t...run.extra,\n\t\t\truntime: (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getRuntimeEnvironment)()\n\t\t},\n\t\ttracingEnabled: false\n\t});\n}\nfunction _coerceToDict(value, defaultKey) {\n\treturn value && !Array.isArray(value) && typeof value === \"object\" ? value : { [defaultKey]: value };\n}\nfunction isBaseTracer(x) {\n\treturn typeof x._addRunToRunMap === \"function\";\n}\nvar BaseTracer = class extends _callbacks_base_js__WEBPACK_IMPORTED_MODULE_2__.BaseCallbackHandler {\n\t/** @deprecated Use `runTreeMap` instead. */\n\trunMap = /* @__PURE__ */ new Map();\n\trunTreeMap = /* @__PURE__ */ new Map();\n\tusesRunTreeMap = false;\n\tconstructor(_fields) {\n\t\tsuper(...arguments);\n\t}\n\tcopy() {\n\t\treturn this;\n\t}\n\tgetRunById(runId) {\n\t\tif (runId === void 0) return void 0;\n\t\treturn this.usesRunTreeMap ? convertRunTreeToRun(this.runTreeMap.get(runId)) : this.runMap.get(runId);\n\t}\n\tstringifyError(error) {\n\t\tif (error instanceof Error) return error.message + (error?.stack ? `\\n\\n${error.stack}` : \"\");\n\t\tif (typeof error === \"string\") return error;\n\t\treturn `${error}`;\n\t}\n\t_addChildRun(parentRun, childRun) {\n\t\tparentRun.child_runs.push(childRun);\n\t}\n\t_addRunToRunMap(run) {\n\t\tconst { dottedOrder: currentDottedOrder, microsecondPrecisionDatestring } = (0,langsmith_run_trees__WEBPACK_IMPORTED_MODULE_3__.convertToDottedOrderFormat)(new Date(run.start_time).getTime(), run.id, run.execution_order);\n\t\tconst storedRun = { ...run };\n\t\tconst parentRun = this.getRunById(storedRun.parent_run_id);\n\t\tif (storedRun.parent_run_id !== void 0) if (parentRun) {\n\t\t\tthis._addChildRun(parentRun, storedRun);\n\t\t\tparentRun.child_execution_order = Math.max(parentRun.child_execution_order, storedRun.child_execution_order);\n\t\t\tstoredRun.trace_id = parentRun.trace_id;\n\t\t\tif (parentRun.dotted_order !== void 0) {\n\t\t\t\tstoredRun.dotted_order = [parentRun.dotted_order, currentDottedOrder].join(\".\");\n\t\t\t\tstoredRun._serialized_start_time = microsecondPrecisionDatestring;\n\t\t\t}\n\t\t} else storedRun.parent_run_id = void 0;\n\t\telse {\n\t\t\tstoredRun.trace_id = storedRun.id;\n\t\t\tstoredRun.dotted_order = currentDottedOrder;\n\t\t\tstoredRun._serialized_start_time = microsecondPrecisionDatestring;\n\t\t}\n\t\tif (this.usesRunTreeMap) {\n\t\t\tconst runTree = convertRunToRunTree(storedRun, parentRun);\n\t\t\tif (runTree !== void 0) this.runTreeMap.set(storedRun.id, runTree);\n\t\t} else this.runMap.set(storedRun.id, storedRun);\n\t\treturn storedRun;\n\t}\n\tasync _endTrace(run) {\n\t\tconst parentRun = run.parent_run_id !== void 0 && this.getRunById(run.parent_run_id);\n\t\tif (parentRun) parentRun.child_execution_order = Math.max(parentRun.child_execution_order, run.child_execution_order);\n\t\telse await this.persistRun(run);\n\t\tawait this.onRunUpdate?.(run);\n\t\tif (this.usesRunTreeMap) this.runTreeMap.delete(run.id);\n\t\telse this.runMap.delete(run.id);\n\t}\n\t_getExecutionOrder(parentRunId) {\n\t\tconst parentRun = parentRunId !== void 0 && this.getRunById(parentRunId);\n\t\tif (!parentRun) return 1;\n\t\treturn parentRun.child_execution_order + 1;\n\t}\n\t/**\n\t* Create and add a run to the run map for LLM start events.\n\t* This must sometimes be done synchronously to avoid race conditions\n\t* when callbacks are backgrounded, so we expose it as a separate method here.\n\t*/\n\t_createRunForLLMStart(llm, prompts, runId, parentRunId, extraParams, tags, metadata, name) {\n\t\tconst execution_order = this._getExecutionOrder(parentRunId);\n\t\tconst start_time = Date.now();\n\t\tconst finalExtraParams = metadata ? {\n\t\t\t...extraParams,\n\t\t\tmetadata\n\t\t} : extraParams;\n\t\tconst run = {\n\t\t\tid: runId,\n\t\t\tname: name ?? llm.id[llm.id.length - 1],\n\t\t\tparent_run_id: parentRunId,\n\t\t\tstart_time,\n\t\t\tserialized: llm,\n\t\t\tevents: [{\n\t\t\t\tname: \"start\",\n\t\t\t\ttime: new Date(start_time).toISOString()\n\t\t\t}],\n\t\t\tinputs: { prompts },\n\t\t\texecution_order,\n\t\t\tchild_runs: [],\n\t\t\tchild_execution_order: execution_order,\n\t\t\trun_type: \"llm\",\n\t\t\textra: finalExtraParams ?? {},\n\t\t\ttags: tags || []\n\t\t};\n\t\treturn this._addRunToRunMap(run);\n\t}\n\tasync handleLLMStart(llm, prompts, runId, parentRunId, extraParams, tags, metadata, name) {\n\t\tconst run = this.getRunById(runId) ?? this._createRunForLLMStart(llm, prompts, runId, parentRunId, extraParams, tags, metadata, name);\n\t\tawait this.onRunCreate?.(run);\n\t\tawait this.onLLMStart?.(run);\n\t\treturn run;\n\t}\n\t/**\n\t* Create and add a run to the run map for chat model start events.\n\t* This must sometimes be done synchronously to avoid race conditions\n\t* when callbacks are backgrounded, so we expose it as a separate method here.\n\t*/\n\t_createRunForChatModelStart(llm, messages, runId, parentRunId, extraParams, tags, metadata, name) {\n\t\tconst execution_order = this._getExecutionOrder(parentRunId);\n\t\tconst start_time = Date.now();\n\t\tconst finalExtraParams = metadata ? {\n\t\t\t...extraParams,\n\t\t\tmetadata\n\t\t} : extraParams;\n\t\tconst run = {\n\t\t\tid: runId,\n\t\t\tname: name ?? llm.id[llm.id.length - 1],\n\t\t\tparent_run_id: parentRunId,\n\t\t\tstart_time,\n\t\t\tserialized: llm,\n\t\t\tevents: [{\n\t\t\t\tname: \"start\",\n\t\t\t\ttime: new Date(start_time).toISOString()\n\t\t\t}],\n\t\t\tinputs: { messages },\n\t\t\texecution_order,\n\t\t\tchild_runs: [],\n\t\t\tchild_execution_order: execution_order,\n\t\t\trun_type: \"llm\",\n\t\t\textra: finalExtraParams ?? {},\n\t\t\ttags: tags || []\n\t\t};\n\t\treturn this._addRunToRunMap(run);\n\t}\n\tasync handleChatModelStart(llm, messages, runId, parentRunId, extraParams, tags, metadata, name) {\n\t\tconst run = this.getRunById(runId) ?? this._createRunForChatModelStart(llm, messages, runId, parentRunId, extraParams, tags, metadata, name);\n\t\tawait this.onRunCreate?.(run);\n\t\tawait this.onLLMStart?.(run);\n\t\treturn run;\n\t}\n\tasync handleLLMEnd(output, runId, _parentRunId, _tags, extraParams) {\n\t\tconst run = this.getRunById(runId);\n\t\tif (!run || run?.run_type !== \"llm\") throw new Error(\"No LLM run to end.\");\n\t\trun.end_time = Date.now();\n\t\trun.outputs = output;\n\t\trun.events.push({\n\t\t\tname: \"end\",\n\t\t\ttime: new Date(run.end_time).toISOString()\n\t\t});\n\t\trun.extra = {\n\t\t\t...run.extra,\n\t\t\t...extraParams\n\t\t};\n\t\tawait this.onLLMEnd?.(run);\n\t\tawait this._endTrace(run);\n\t\treturn run;\n\t}\n\tasync handleLLMError(error, runId, _parentRunId, _tags, extraParams) {\n\t\tconst run = this.getRunById(runId);\n\t\tif (!run || run?.run_type !== \"llm\") throw new Error(\"No LLM run to end.\");\n\t\trun.end_time = Date.now();\n\t\trun.error = this.stringifyError(error);\n\t\trun.events.push({\n\t\t\tname: \"error\",\n\t\t\ttime: new Date(run.end_time).toISOString()\n\t\t});\n\t\trun.extra = {\n\t\t\t...run.extra,\n\t\t\t...extraParams\n\t\t};\n\t\tawait this.onLLMError?.(run);\n\t\tawait this._endTrace(run);\n\t\treturn run;\n\t}\n\t/**\n\t* Create and add a run to the run map for chain start events.\n\t* This must sometimes be done synchronously to avoid race conditions\n\t* when callbacks are backgrounded, so we expose it as a separate method here.\n\t*/\n\t_createRunForChainStart(chain, inputs, runId, parentRunId, tags, metadata, runType, name, extra) {\n\t\tconst execution_order = this._getExecutionOrder(parentRunId);\n\t\tconst start_time = Date.now();\n\t\tconst run = {\n\t\t\tid: runId,\n\t\t\tname: name ?? chain.id[chain.id.length - 1],\n\t\t\tparent_run_id: parentRunId,\n\t\t\tstart_time,\n\t\t\tserialized: chain,\n\t\t\tevents: [{\n\t\t\t\tname: \"start\",\n\t\t\t\ttime: new Date(start_time).toISOString()\n\t\t\t}],\n\t\t\tinputs,\n\t\t\texecution_order,\n\t\t\tchild_execution_order: execution_order,\n\t\t\trun_type: runType ?? \"chain\",\n\t\t\tchild_runs: [],\n\t\t\textra: metadata ? {\n\t\t\t\t...extra,\n\t\t\t\tmetadata\n\t\t\t} : { ...extra },\n\t\t\ttags: tags || []\n\t\t};\n\t\treturn this._addRunToRunMap(run);\n\t}\n\tasync handleChainStart(chain, inputs, runId, parentRunId, tags, metadata, runType, name) {\n\t\tconst run = this.getRunById(runId) ?? this._createRunForChainStart(chain, inputs, runId, parentRunId, tags, metadata, runType, name);\n\t\tawait this.onRunCreate?.(run);\n\t\tawait this.onChainStart?.(run);\n\t\treturn run;\n\t}\n\tasync handleChainEnd(outputs, runId, _parentRunId, _tags, kwargs) {\n\t\tconst run = this.getRunById(runId);\n\t\tif (!run) throw new Error(\"No chain run to end.\");\n\t\trun.end_time = Date.now();\n\t\trun.outputs = _coerceToDict(outputs, \"output\");\n\t\trun.events.push({\n\t\t\tname: \"end\",\n\t\t\ttime: new Date(run.end_time).toISOString()\n\t\t});\n\t\tif (kwargs?.inputs !== void 0) run.inputs = _coerceToDict(kwargs.inputs, \"input\");\n\t\tawait this.onChainEnd?.(run);\n\t\tawait this._endTrace(run);\n\t\treturn run;\n\t}\n\tasync handleChainError(error, runId, _parentRunId, _tags, kwargs) {\n\t\tconst run = this.getRunById(runId);\n\t\tif (!run) throw new Error(\"No chain run to end.\");\n\t\trun.end_time = Date.now();\n\t\trun.error = this.stringifyError(error);\n\t\trun.events.push({\n\t\t\tname: \"error\",\n\t\t\ttime: new Date(run.end_time).toISOString()\n\t\t});\n\t\tif (kwargs?.inputs !== void 0) run.inputs = _coerceToDict(kwargs.inputs, \"input\");\n\t\tawait this.onChainError?.(run);\n\t\tawait this._endTrace(run);\n\t\treturn run;\n\t}\n\t/**\n\t* Create and add a run to the run map for tool start events.\n\t* This must sometimes be done synchronously to avoid race conditions\n\t* when callbacks are backgrounded, so we expose it as a separate method here.\n\t*/\n\t_createRunForToolStart(tool, input, runId, parentRunId, tags, metadata, name) {\n\t\tconst execution_order = this._getExecutionOrder(parentRunId);\n\t\tconst start_time = Date.now();\n\t\tconst run = {\n\t\t\tid: runId,\n\t\t\tname: name ?? tool.id[tool.id.length - 1],\n\t\t\tparent_run_id: parentRunId,\n\t\t\tstart_time,\n\t\t\tserialized: tool,\n\t\t\tevents: [{\n\t\t\t\tname: \"start\",\n\t\t\t\ttime: new Date(start_time).toISOString()\n\t\t\t}],\n\t\t\tinputs: { input },\n\t\t\texecution_order,\n\t\t\tchild_execution_order: execution_order,\n\t\t\trun_type: \"tool\",\n\t\t\tchild_runs: [],\n\t\t\textra: metadata ? { metadata } : {},\n\t\t\ttags: tags || []\n\t\t};\n\t\treturn this._addRunToRunMap(run);\n\t}\n\tasync handleToolStart(tool, input, runId, parentRunId, tags, metadata, name) {\n\t\tconst run = this.getRunById(runId) ?? this._createRunForToolStart(tool, input, runId, parentRunId, tags, metadata, name);\n\t\tawait this.onRunCreate?.(run);\n\t\tawait this.onToolStart?.(run);\n\t\treturn run;\n\t}\n\tasync handleToolEnd(output, runId) {\n\t\tconst run = this.getRunById(runId);\n\t\tif (!run || run?.run_type !== \"tool\") throw new Error(\"No tool run to end\");\n\t\trun.end_time = Date.now();\n\t\trun.outputs = { output };\n\t\trun.events.push({\n\t\t\tname: \"end\",\n\t\t\ttime: new Date(run.end_time).toISOString()\n\t\t});\n\t\tawait this.onToolEnd?.(run);\n\t\tawait this._endTrace(run);\n\t\treturn run;\n\t}\n\tasync handleToolError(error, runId) {\n\t\tconst run = this.getRunById(runId);\n\t\tif (!run || run?.run_type !== \"tool\") throw new Error(\"No tool run to end\");\n\t\trun.end_time = Date.now();\n\t\trun.error = this.stringifyError(error);\n\t\trun.events.push({\n\t\t\tname: \"error\",\n\t\t\ttime: new Date(run.end_time).toISOString()\n\t\t});\n\t\tawait this.onToolError?.(run);\n\t\tawait this._endTrace(run);\n\t\treturn run;\n\t}\n\tasync handleAgentAction(action, runId) {\n\t\tconst run = this.getRunById(runId);\n\t\tif (!run || run?.run_type !== \"chain\") return;\n\t\tconst agentRun = run;\n\t\tagentRun.actions = agentRun.actions || [];\n\t\tagentRun.actions.push(action);\n\t\tagentRun.events.push({\n\t\t\tname: \"agent_action\",\n\t\t\ttime: (/* @__PURE__ */ new Date()).toISOString(),\n\t\t\tkwargs: { action }\n\t\t});\n\t\tawait this.onAgentAction?.(run);\n\t}\n\tasync handleAgentEnd(action, runId) {\n\t\tconst run = this.getRunById(runId);\n\t\tif (!run || run?.run_type !== \"chain\") return;\n\t\trun.events.push({\n\t\t\tname: \"agent_end\",\n\t\t\ttime: (/* @__PURE__ */ new Date()).toISOString(),\n\t\t\tkwargs: { action }\n\t\t});\n\t\tawait this.onAgentEnd?.(run);\n\t}\n\t/**\n\t* Create and add a run to the run map for retriever start events.\n\t* This must sometimes be done synchronously to avoid race conditions\n\t* when callbacks are backgrounded, so we expose it as a separate method here.\n\t*/\n\t_createRunForRetrieverStart(retriever, query, runId, parentRunId, tags, metadata, name) {\n\t\tconst execution_order = this._getExecutionOrder(parentRunId);\n\t\tconst start_time = Date.now();\n\t\tconst run = {\n\t\t\tid: runId,\n\t\t\tname: name ?? retriever.id[retriever.id.length - 1],\n\t\t\tparent_run_id: parentRunId,\n\t\t\tstart_time,\n\t\t\tserialized: retriever,\n\t\t\tevents: [{\n\t\t\t\tname: \"start\",\n\t\t\t\ttime: new Date(start_time).toISOString()\n\t\t\t}],\n\t\t\tinputs: { query },\n\t\t\texecution_order,\n\t\t\tchild_execution_order: execution_order,\n\t\t\trun_type: \"retriever\",\n\t\t\tchild_runs: [],\n\t\t\textra: metadata ? { metadata } : {},\n\t\t\ttags: tags || []\n\t\t};\n\t\treturn this._addRunToRunMap(run);\n\t}\n\tasync handleRetrieverStart(retriever, query, runId, parentRunId, tags, metadata, name) {\n\t\tconst run = this.getRunById(runId) ?? this._createRunForRetrieverStart(retriever, query, runId, parentRunId, tags, metadata, name);\n\t\tawait this.onRunCreate?.(run);\n\t\tawait this.onRetrieverStart?.(run);\n\t\treturn run;\n\t}\n\tasync handleRetrieverEnd(documents, runId) {\n\t\tconst run = this.getRunById(runId);\n\t\tif (!run || run?.run_type !== \"retriever\") throw new Error(\"No retriever run to end\");\n\t\trun.end_time = Date.now();\n\t\trun.outputs = { documents };\n\t\trun.events.push({\n\t\t\tname: \"end\",\n\t\t\ttime: new Date(run.end_time).toISOString()\n\t\t});\n\t\tawait this.onRetrieverEnd?.(run);\n\t\tawait this._endTrace(run);\n\t\treturn run;\n\t}\n\tasync handleRetrieverError(error, runId) {\n\t\tconst run = this.getRunById(runId);\n\t\tif (!run || run?.run_type !== \"retriever\") throw new Error(\"No retriever run to end\");\n\t\trun.end_time = Date.now();\n\t\trun.error = this.stringifyError(error);\n\t\trun.events.push({\n\t\t\tname: \"error\",\n\t\t\ttime: new Date(run.end_time).toISOString()\n\t\t});\n\t\tawait this.onRetrieverError?.(run);\n\t\tawait this._endTrace(run);\n\t\treturn run;\n\t}\n\tasync handleText(text, runId) {\n\t\tconst run = this.getRunById(runId);\n\t\tif (!run || run?.run_type !== \"chain\") return;\n\t\trun.events.push({\n\t\t\tname: \"text\",\n\t\t\ttime: (/* @__PURE__ */ new Date()).toISOString(),\n\t\t\tkwargs: { text }\n\t\t});\n\t\tawait this.onText?.(run);\n\t}\n\tasync handleLLMNewToken(token, idx, runId, _parentRunId, _tags, fields) {\n\t\tconst run = this.getRunById(runId);\n\t\tif (!run || run?.run_type !== \"llm\") throw new Error(`Invalid \"runId\" provided to \"handleLLMNewToken\" callback.`);\n\t\trun.events.push({\n\t\t\tname: \"new_token\",\n\t\t\ttime: (/* @__PURE__ */ new Date()).toISOString(),\n\t\t\tkwargs: {\n\t\t\t\ttoken,\n\t\t\t\tidx,\n\t\t\t\tchunk: fields?.chunk\n\t\t\t}\n\t\t});\n\t\tawait this.onLLMNewToken?.(run, token, { chunk: fields?.chunk });\n\t\treturn run;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=base.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9iYXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBMkQ7QUFDSDtBQUNHO0FBQ2U7O0FBRTFFO0FBQ0E7QUFDQSxzRUFBUTtBQUNSO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksd0RBQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxvRUFBcUI7QUFDakMsR0FBRztBQUNIO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxnRkFBZ0Y7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsbUVBQW1CO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRFQUE0RSxZQUFZO0FBQ3hGO0FBQ0EsWUFBWSxNQUFNO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLGtFQUFrRSxFQUFFLCtFQUEwQjtBQUN4RyxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osYUFBYSxVQUFVO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxJQUFJLFVBQVU7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixXQUFXLElBQUk7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixhQUFhLE9BQU87QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsV0FBVyxJQUFJO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsMkNBQTJDLHNCQUFzQjtBQUNqRTtBQUNBO0FBQ0E7O0FBRUE7QUFDa0Q7QUFDbEQiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL2Jhc2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19leHBvcnQgfSBmcm9tIFwiLi4vX3ZpcnR1YWwvcm9sbGRvd25fcnVudGltZS5qc1wiO1xuaW1wb3J0IHsgZ2V0UnVudGltZUVudmlyb25tZW50IH0gZnJvbSBcIi4uL3V0aWxzL2Vudi5qc1wiO1xuaW1wb3J0IHsgQmFzZUNhbGxiYWNrSGFuZGxlciB9IGZyb20gXCIuLi9jYWxsYmFja3MvYmFzZS5qc1wiO1xuaW1wb3J0IHsgUnVuVHJlZSwgY29udmVydFRvRG90dGVkT3JkZXJGb3JtYXQgfSBmcm9tIFwibGFuZ3NtaXRoL3J1bl90cmVlc1wiO1xuXG4vLyNyZWdpb24gc3JjL3RyYWNlcnMvYmFzZS50c1xudmFyIGJhc2VfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQoYmFzZV9leHBvcnRzLCB7XG5cdEJhc2VUcmFjZXI6ICgpID0+IEJhc2VUcmFjZXIsXG5cdGlzQmFzZVRyYWNlcjogKCkgPT4gaXNCYXNlVHJhY2VyXG59KTtcbmNvbnN0IGNvbnZlcnRSdW5UcmVlVG9SdW4gPSAocnVuVHJlZSkgPT4ge1xuXHRpZiAoIXJ1blRyZWUpIHJldHVybiB2b2lkIDA7XG5cdHJ1blRyZWUuZXZlbnRzID0gcnVuVHJlZS5ldmVudHMgPz8gW107XG5cdHJ1blRyZWUuY2hpbGRfcnVucyA9IHJ1blRyZWUuY2hpbGRfcnVucyA/PyBbXTtcblx0cmV0dXJuIHJ1blRyZWU7XG59O1xuZnVuY3Rpb24gY29udmVydFJ1blRvUnVuVHJlZShydW4sIHBhcmVudFJ1bikge1xuXHRpZiAoIXJ1bikgcmV0dXJuIHZvaWQgMDtcblx0cmV0dXJuIG5ldyBSdW5UcmVlKHtcblx0XHQuLi5ydW4sXG5cdFx0c3RhcnRfdGltZTogcnVuLl9zZXJpYWxpemVkX3N0YXJ0X3RpbWUgPz8gcnVuLnN0YXJ0X3RpbWUsXG5cdFx0cGFyZW50X3J1bjogY29udmVydFJ1blRvUnVuVHJlZShwYXJlbnRSdW4pLFxuXHRcdGNoaWxkX3J1bnM6IHJ1bi5jaGlsZF9ydW5zLm1hcCgocikgPT4gY29udmVydFJ1blRvUnVuVHJlZShyKSkuZmlsdGVyKChyKSA9PiByICE9PSB2b2lkIDApLFxuXHRcdGV4dHJhOiB7XG5cdFx0XHQuLi5ydW4uZXh0cmEsXG5cdFx0XHRydW50aW1lOiBnZXRSdW50aW1lRW52aXJvbm1lbnQoKVxuXHRcdH0sXG5cdFx0dHJhY2luZ0VuYWJsZWQ6IGZhbHNlXG5cdH0pO1xufVxuZnVuY3Rpb24gX2NvZXJjZVRvRGljdCh2YWx1ZSwgZGVmYXVsdEtleSkge1xuXHRyZXR1cm4gdmFsdWUgJiYgIUFycmF5LmlzQXJyYXkodmFsdWUpICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiA/IHZhbHVlIDogeyBbZGVmYXVsdEtleV06IHZhbHVlIH07XG59XG5mdW5jdGlvbiBpc0Jhc2VUcmFjZXIoeCkge1xuXHRyZXR1cm4gdHlwZW9mIHguX2FkZFJ1blRvUnVuTWFwID09PSBcImZ1bmN0aW9uXCI7XG59XG52YXIgQmFzZVRyYWNlciA9IGNsYXNzIGV4dGVuZHMgQmFzZUNhbGxiYWNrSGFuZGxlciB7XG5cdC8qKiBAZGVwcmVjYXRlZCBVc2UgYHJ1blRyZWVNYXBgIGluc3RlYWQuICovXG5cdHJ1bk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5cdHJ1blRyZWVNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuXHR1c2VzUnVuVHJlZU1hcCA9IGZhbHNlO1xuXHRjb25zdHJ1Y3RvcihfZmllbGRzKSB7XG5cdFx0c3VwZXIoLi4uYXJndW1lbnRzKTtcblx0fVxuXHRjb3B5KCkge1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cdGdldFJ1bkJ5SWQocnVuSWQpIHtcblx0XHRpZiAocnVuSWQgPT09IHZvaWQgMCkgcmV0dXJuIHZvaWQgMDtcblx0XHRyZXR1cm4gdGhpcy51c2VzUnVuVHJlZU1hcCA/IGNvbnZlcnRSdW5UcmVlVG9SdW4odGhpcy5ydW5UcmVlTWFwLmdldChydW5JZCkpIDogdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcblx0fVxuXHRzdHJpbmdpZnlFcnJvcihlcnJvcikge1xuXHRcdGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSByZXR1cm4gZXJyb3IubWVzc2FnZSArIChlcnJvcj8uc3RhY2sgPyBgXFxuXFxuJHtlcnJvci5zdGFja31gIDogXCJcIik7XG5cdFx0aWYgKHR5cGVvZiBlcnJvciA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIGVycm9yO1xuXHRcdHJldHVybiBgJHtlcnJvcn1gO1xuXHR9XG5cdF9hZGRDaGlsZFJ1bihwYXJlbnRSdW4sIGNoaWxkUnVuKSB7XG5cdFx0cGFyZW50UnVuLmNoaWxkX3J1bnMucHVzaChjaGlsZFJ1bik7XG5cdH1cblx0X2FkZFJ1blRvUnVuTWFwKHJ1bikge1xuXHRcdGNvbnN0IHsgZG90dGVkT3JkZXI6IGN1cnJlbnREb3R0ZWRPcmRlciwgbWljcm9zZWNvbmRQcmVjaXNpb25EYXRlc3RyaW5nIH0gPSBjb252ZXJ0VG9Eb3R0ZWRPcmRlckZvcm1hdChuZXcgRGF0ZShydW4uc3RhcnRfdGltZSkuZ2V0VGltZSgpLCBydW4uaWQsIHJ1bi5leGVjdXRpb25fb3JkZXIpO1xuXHRcdGNvbnN0IHN0b3JlZFJ1biA9IHsgLi4ucnVuIH07XG5cdFx0Y29uc3QgcGFyZW50UnVuID0gdGhpcy5nZXRSdW5CeUlkKHN0b3JlZFJ1bi5wYXJlbnRfcnVuX2lkKTtcblx0XHRpZiAoc3RvcmVkUnVuLnBhcmVudF9ydW5faWQgIT09IHZvaWQgMCkgaWYgKHBhcmVudFJ1bikge1xuXHRcdFx0dGhpcy5fYWRkQ2hpbGRSdW4ocGFyZW50UnVuLCBzdG9yZWRSdW4pO1xuXHRcdFx0cGFyZW50UnVuLmNoaWxkX2V4ZWN1dGlvbl9vcmRlciA9IE1hdGgubWF4KHBhcmVudFJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIsIHN0b3JlZFJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIpO1xuXHRcdFx0c3RvcmVkUnVuLnRyYWNlX2lkID0gcGFyZW50UnVuLnRyYWNlX2lkO1xuXHRcdFx0aWYgKHBhcmVudFJ1bi5kb3R0ZWRfb3JkZXIgIT09IHZvaWQgMCkge1xuXHRcdFx0XHRzdG9yZWRSdW4uZG90dGVkX29yZGVyID0gW3BhcmVudFJ1bi5kb3R0ZWRfb3JkZXIsIGN1cnJlbnREb3R0ZWRPcmRlcl0uam9pbihcIi5cIik7XG5cdFx0XHRcdHN0b3JlZFJ1bi5fc2VyaWFsaXplZF9zdGFydF90aW1lID0gbWljcm9zZWNvbmRQcmVjaXNpb25EYXRlc3RyaW5nO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBzdG9yZWRSdW4ucGFyZW50X3J1bl9pZCA9IHZvaWQgMDtcblx0XHRlbHNlIHtcblx0XHRcdHN0b3JlZFJ1bi50cmFjZV9pZCA9IHN0b3JlZFJ1bi5pZDtcblx0XHRcdHN0b3JlZFJ1bi5kb3R0ZWRfb3JkZXIgPSBjdXJyZW50RG90dGVkT3JkZXI7XG5cdFx0XHRzdG9yZWRSdW4uX3NlcmlhbGl6ZWRfc3RhcnRfdGltZSA9IG1pY3Jvc2Vjb25kUHJlY2lzaW9uRGF0ZXN0cmluZztcblx0XHR9XG5cdFx0aWYgKHRoaXMudXNlc1J1blRyZWVNYXApIHtcblx0XHRcdGNvbnN0IHJ1blRyZWUgPSBjb252ZXJ0UnVuVG9SdW5UcmVlKHN0b3JlZFJ1biwgcGFyZW50UnVuKTtcblx0XHRcdGlmIChydW5UcmVlICE9PSB2b2lkIDApIHRoaXMucnVuVHJlZU1hcC5zZXQoc3RvcmVkUnVuLmlkLCBydW5UcmVlKTtcblx0XHR9IGVsc2UgdGhpcy5ydW5NYXAuc2V0KHN0b3JlZFJ1bi5pZCwgc3RvcmVkUnVuKTtcblx0XHRyZXR1cm4gc3RvcmVkUnVuO1xuXHR9XG5cdGFzeW5jIF9lbmRUcmFjZShydW4pIHtcblx0XHRjb25zdCBwYXJlbnRSdW4gPSBydW4ucGFyZW50X3J1bl9pZCAhPT0gdm9pZCAwICYmIHRoaXMuZ2V0UnVuQnlJZChydW4ucGFyZW50X3J1bl9pZCk7XG5cdFx0aWYgKHBhcmVudFJ1bikgcGFyZW50UnVuLmNoaWxkX2V4ZWN1dGlvbl9vcmRlciA9IE1hdGgubWF4KHBhcmVudFJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIsIHJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIpO1xuXHRcdGVsc2UgYXdhaXQgdGhpcy5wZXJzaXN0UnVuKHJ1bik7XG5cdFx0YXdhaXQgdGhpcy5vblJ1blVwZGF0ZT8uKHJ1bik7XG5cdFx0aWYgKHRoaXMudXNlc1J1blRyZWVNYXApIHRoaXMucnVuVHJlZU1hcC5kZWxldGUocnVuLmlkKTtcblx0XHRlbHNlIHRoaXMucnVuTWFwLmRlbGV0ZShydW4uaWQpO1xuXHR9XG5cdF9nZXRFeGVjdXRpb25PcmRlcihwYXJlbnRSdW5JZCkge1xuXHRcdGNvbnN0IHBhcmVudFJ1biA9IHBhcmVudFJ1bklkICE9PSB2b2lkIDAgJiYgdGhpcy5nZXRSdW5CeUlkKHBhcmVudFJ1bklkKTtcblx0XHRpZiAoIXBhcmVudFJ1bikgcmV0dXJuIDE7XG5cdFx0cmV0dXJuIHBhcmVudFJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIgKyAxO1xuXHR9XG5cdC8qKlxuXHQqIENyZWF0ZSBhbmQgYWRkIGEgcnVuIHRvIHRoZSBydW4gbWFwIGZvciBMTE0gc3RhcnQgZXZlbnRzLlxuXHQqIFRoaXMgbXVzdCBzb21ldGltZXMgYmUgZG9uZSBzeW5jaHJvbm91c2x5IHRvIGF2b2lkIHJhY2UgY29uZGl0aW9uc1xuXHQqIHdoZW4gY2FsbGJhY2tzIGFyZSBiYWNrZ3JvdW5kZWQsIHNvIHdlIGV4cG9zZSBpdCBhcyBhIHNlcGFyYXRlIG1ldGhvZCBoZXJlLlxuXHQqL1xuXHRfY3JlYXRlUnVuRm9yTExNU3RhcnQobGxtLCBwcm9tcHRzLCBydW5JZCwgcGFyZW50UnVuSWQsIGV4dHJhUGFyYW1zLCB0YWdzLCBtZXRhZGF0YSwgbmFtZSkge1xuXHRcdGNvbnN0IGV4ZWN1dGlvbl9vcmRlciA9IHRoaXMuX2dldEV4ZWN1dGlvbk9yZGVyKHBhcmVudFJ1bklkKTtcblx0XHRjb25zdCBzdGFydF90aW1lID0gRGF0ZS5ub3coKTtcblx0XHRjb25zdCBmaW5hbEV4dHJhUGFyYW1zID0gbWV0YWRhdGEgPyB7XG5cdFx0XHQuLi5leHRyYVBhcmFtcyxcblx0XHRcdG1ldGFkYXRhXG5cdFx0fSA6IGV4dHJhUGFyYW1zO1xuXHRcdGNvbnN0IHJ1biA9IHtcblx0XHRcdGlkOiBydW5JZCxcblx0XHRcdG5hbWU6IG5hbWUgPz8gbGxtLmlkW2xsbS5pZC5sZW5ndGggLSAxXSxcblx0XHRcdHBhcmVudF9ydW5faWQ6IHBhcmVudFJ1bklkLFxuXHRcdFx0c3RhcnRfdGltZSxcblx0XHRcdHNlcmlhbGl6ZWQ6IGxsbSxcblx0XHRcdGV2ZW50czogW3tcblx0XHRcdFx0bmFtZTogXCJzdGFydFwiLFxuXHRcdFx0XHR0aW1lOiBuZXcgRGF0ZShzdGFydF90aW1lKS50b0lTT1N0cmluZygpXG5cdFx0XHR9XSxcblx0XHRcdGlucHV0czogeyBwcm9tcHRzIH0sXG5cdFx0XHRleGVjdXRpb25fb3JkZXIsXG5cdFx0XHRjaGlsZF9ydW5zOiBbXSxcblx0XHRcdGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogZXhlY3V0aW9uX29yZGVyLFxuXHRcdFx0cnVuX3R5cGU6IFwibGxtXCIsXG5cdFx0XHRleHRyYTogZmluYWxFeHRyYVBhcmFtcyA/PyB7fSxcblx0XHRcdHRhZ3M6IHRhZ3MgfHwgW11cblx0XHR9O1xuXHRcdHJldHVybiB0aGlzLl9hZGRSdW5Ub1J1bk1hcChydW4pO1xuXHR9XG5cdGFzeW5jIGhhbmRsZUxMTVN0YXJ0KGxsbSwgcHJvbXB0cywgcnVuSWQsIHBhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGFncywgbWV0YWRhdGEsIG5hbWUpIHtcblx0XHRjb25zdCBydW4gPSB0aGlzLmdldFJ1bkJ5SWQocnVuSWQpID8/IHRoaXMuX2NyZWF0ZVJ1bkZvckxMTVN0YXJ0KGxsbSwgcHJvbXB0cywgcnVuSWQsIHBhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGFncywgbWV0YWRhdGEsIG5hbWUpO1xuXHRcdGF3YWl0IHRoaXMub25SdW5DcmVhdGU/LihydW4pO1xuXHRcdGF3YWl0IHRoaXMub25MTE1TdGFydD8uKHJ1bik7XG5cdFx0cmV0dXJuIHJ1bjtcblx0fVxuXHQvKipcblx0KiBDcmVhdGUgYW5kIGFkZCBhIHJ1biB0byB0aGUgcnVuIG1hcCBmb3IgY2hhdCBtb2RlbCBzdGFydCBldmVudHMuXG5cdCogVGhpcyBtdXN0IHNvbWV0aW1lcyBiZSBkb25lIHN5bmNocm9ub3VzbHkgdG8gYXZvaWQgcmFjZSBjb25kaXRpb25zXG5cdCogd2hlbiBjYWxsYmFja3MgYXJlIGJhY2tncm91bmRlZCwgc28gd2UgZXhwb3NlIGl0IGFzIGEgc2VwYXJhdGUgbWV0aG9kIGhlcmUuXG5cdCovXG5cdF9jcmVhdGVSdW5Gb3JDaGF0TW9kZWxTdGFydChsbG0sIG1lc3NhZ2VzLCBydW5JZCwgcGFyZW50UnVuSWQsIGV4dHJhUGFyYW1zLCB0YWdzLCBtZXRhZGF0YSwgbmFtZSkge1xuXHRcdGNvbnN0IGV4ZWN1dGlvbl9vcmRlciA9IHRoaXMuX2dldEV4ZWN1dGlvbk9yZGVyKHBhcmVudFJ1bklkKTtcblx0XHRjb25zdCBzdGFydF90aW1lID0gRGF0ZS5ub3coKTtcblx0XHRjb25zdCBmaW5hbEV4dHJhUGFyYW1zID0gbWV0YWRhdGEgPyB7XG5cdFx0XHQuLi5leHRyYVBhcmFtcyxcblx0XHRcdG1ldGFkYXRhXG5cdFx0fSA6IGV4dHJhUGFyYW1zO1xuXHRcdGNvbnN0IHJ1biA9IHtcblx0XHRcdGlkOiBydW5JZCxcblx0XHRcdG5hbWU6IG5hbWUgPz8gbGxtLmlkW2xsbS5pZC5sZW5ndGggLSAxXSxcblx0XHRcdHBhcmVudF9ydW5faWQ6IHBhcmVudFJ1bklkLFxuXHRcdFx0c3RhcnRfdGltZSxcblx0XHRcdHNlcmlhbGl6ZWQ6IGxsbSxcblx0XHRcdGV2ZW50czogW3tcblx0XHRcdFx0bmFtZTogXCJzdGFydFwiLFxuXHRcdFx0XHR0aW1lOiBuZXcgRGF0ZShzdGFydF90aW1lKS50b0lTT1N0cmluZygpXG5cdFx0XHR9XSxcblx0XHRcdGlucHV0czogeyBtZXNzYWdlcyB9LFxuXHRcdFx0ZXhlY3V0aW9uX29yZGVyLFxuXHRcdFx0Y2hpbGRfcnVuczogW10sXG5cdFx0XHRjaGlsZF9leGVjdXRpb25fb3JkZXI6IGV4ZWN1dGlvbl9vcmRlcixcblx0XHRcdHJ1bl90eXBlOiBcImxsbVwiLFxuXHRcdFx0ZXh0cmE6IGZpbmFsRXh0cmFQYXJhbXMgPz8ge30sXG5cdFx0XHR0YWdzOiB0YWdzIHx8IFtdXG5cdFx0fTtcblx0XHRyZXR1cm4gdGhpcy5fYWRkUnVuVG9SdW5NYXAocnVuKTtcblx0fVxuXHRhc3luYyBoYW5kbGVDaGF0TW9kZWxTdGFydChsbG0sIG1lc3NhZ2VzLCBydW5JZCwgcGFyZW50UnVuSWQsIGV4dHJhUGFyYW1zLCB0YWdzLCBtZXRhZGF0YSwgbmFtZSkge1xuXHRcdGNvbnN0IHJ1biA9IHRoaXMuZ2V0UnVuQnlJZChydW5JZCkgPz8gdGhpcy5fY3JlYXRlUnVuRm9yQ2hhdE1vZGVsU3RhcnQobGxtLCBtZXNzYWdlcywgcnVuSWQsIHBhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGFncywgbWV0YWRhdGEsIG5hbWUpO1xuXHRcdGF3YWl0IHRoaXMub25SdW5DcmVhdGU/LihydW4pO1xuXHRcdGF3YWl0IHRoaXMub25MTE1TdGFydD8uKHJ1bik7XG5cdFx0cmV0dXJuIHJ1bjtcblx0fVxuXHRhc3luYyBoYW5kbGVMTE1FbmQob3V0cHV0LCBydW5JZCwgX3BhcmVudFJ1bklkLCBfdGFncywgZXh0cmFQYXJhbXMpIHtcblx0XHRjb25zdCBydW4gPSB0aGlzLmdldFJ1bkJ5SWQocnVuSWQpO1xuXHRcdGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwibGxtXCIpIHRocm93IG5ldyBFcnJvcihcIk5vIExMTSBydW4gdG8gZW5kLlwiKTtcblx0XHRydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuXHRcdHJ1bi5vdXRwdXRzID0gb3V0cHV0O1xuXHRcdHJ1bi5ldmVudHMucHVzaCh7XG5cdFx0XHRuYW1lOiBcImVuZFwiLFxuXHRcdFx0dGltZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpXG5cdFx0fSk7XG5cdFx0cnVuLmV4dHJhID0ge1xuXHRcdFx0Li4ucnVuLmV4dHJhLFxuXHRcdFx0Li4uZXh0cmFQYXJhbXNcblx0XHR9O1xuXHRcdGF3YWl0IHRoaXMub25MTE1FbmQ/LihydW4pO1xuXHRcdGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG5cdFx0cmV0dXJuIHJ1bjtcblx0fVxuXHRhc3luYyBoYW5kbGVMTE1FcnJvcihlcnJvciwgcnVuSWQsIF9wYXJlbnRSdW5JZCwgX3RhZ3MsIGV4dHJhUGFyYW1zKSB7XG5cdFx0Y29uc3QgcnVuID0gdGhpcy5nZXRSdW5CeUlkKHJ1bklkKTtcblx0XHRpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcImxsbVwiKSB0aHJvdyBuZXcgRXJyb3IoXCJObyBMTE0gcnVuIHRvIGVuZC5cIik7XG5cdFx0cnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcblx0XHRydW4uZXJyb3IgPSB0aGlzLnN0cmluZ2lmeUVycm9yKGVycm9yKTtcblx0XHRydW4uZXZlbnRzLnB1c2goe1xuXHRcdFx0bmFtZTogXCJlcnJvclwiLFxuXHRcdFx0dGltZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpXG5cdFx0fSk7XG5cdFx0cnVuLmV4dHJhID0ge1xuXHRcdFx0Li4ucnVuLmV4dHJhLFxuXHRcdFx0Li4uZXh0cmFQYXJhbXNcblx0XHR9O1xuXHRcdGF3YWl0IHRoaXMub25MTE1FcnJvcj8uKHJ1bik7XG5cdFx0YXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcblx0XHRyZXR1cm4gcnVuO1xuXHR9XG5cdC8qKlxuXHQqIENyZWF0ZSBhbmQgYWRkIGEgcnVuIHRvIHRoZSBydW4gbWFwIGZvciBjaGFpbiBzdGFydCBldmVudHMuXG5cdCogVGhpcyBtdXN0IHNvbWV0aW1lcyBiZSBkb25lIHN5bmNocm9ub3VzbHkgdG8gYXZvaWQgcmFjZSBjb25kaXRpb25zXG5cdCogd2hlbiBjYWxsYmFja3MgYXJlIGJhY2tncm91bmRlZCwgc28gd2UgZXhwb3NlIGl0IGFzIGEgc2VwYXJhdGUgbWV0aG9kIGhlcmUuXG5cdCovXG5cdF9jcmVhdGVSdW5Gb3JDaGFpblN0YXJ0KGNoYWluLCBpbnB1dHMsIHJ1bklkLCBwYXJlbnRSdW5JZCwgdGFncywgbWV0YWRhdGEsIHJ1blR5cGUsIG5hbWUsIGV4dHJhKSB7XG5cdFx0Y29uc3QgZXhlY3V0aW9uX29yZGVyID0gdGhpcy5fZ2V0RXhlY3V0aW9uT3JkZXIocGFyZW50UnVuSWQpO1xuXHRcdGNvbnN0IHN0YXJ0X3RpbWUgPSBEYXRlLm5vdygpO1xuXHRcdGNvbnN0IHJ1biA9IHtcblx0XHRcdGlkOiBydW5JZCxcblx0XHRcdG5hbWU6IG5hbWUgPz8gY2hhaW4uaWRbY2hhaW4uaWQubGVuZ3RoIC0gMV0sXG5cdFx0XHRwYXJlbnRfcnVuX2lkOiBwYXJlbnRSdW5JZCxcblx0XHRcdHN0YXJ0X3RpbWUsXG5cdFx0XHRzZXJpYWxpemVkOiBjaGFpbixcblx0XHRcdGV2ZW50czogW3tcblx0XHRcdFx0bmFtZTogXCJzdGFydFwiLFxuXHRcdFx0XHR0aW1lOiBuZXcgRGF0ZShzdGFydF90aW1lKS50b0lTT1N0cmluZygpXG5cdFx0XHR9XSxcblx0XHRcdGlucHV0cyxcblx0XHRcdGV4ZWN1dGlvbl9vcmRlcixcblx0XHRcdGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogZXhlY3V0aW9uX29yZGVyLFxuXHRcdFx0cnVuX3R5cGU6IHJ1blR5cGUgPz8gXCJjaGFpblwiLFxuXHRcdFx0Y2hpbGRfcnVuczogW10sXG5cdFx0XHRleHRyYTogbWV0YWRhdGEgPyB7XG5cdFx0XHRcdC4uLmV4dHJhLFxuXHRcdFx0XHRtZXRhZGF0YVxuXHRcdFx0fSA6IHsgLi4uZXh0cmEgfSxcblx0XHRcdHRhZ3M6IHRhZ3MgfHwgW11cblx0XHR9O1xuXHRcdHJldHVybiB0aGlzLl9hZGRSdW5Ub1J1bk1hcChydW4pO1xuXHR9XG5cdGFzeW5jIGhhbmRsZUNoYWluU3RhcnQoY2hhaW4sIGlucHV0cywgcnVuSWQsIHBhcmVudFJ1bklkLCB0YWdzLCBtZXRhZGF0YSwgcnVuVHlwZSwgbmFtZSkge1xuXHRcdGNvbnN0IHJ1biA9IHRoaXMuZ2V0UnVuQnlJZChydW5JZCkgPz8gdGhpcy5fY3JlYXRlUnVuRm9yQ2hhaW5TdGFydChjaGFpbiwgaW5wdXRzLCBydW5JZCwgcGFyZW50UnVuSWQsIHRhZ3MsIG1ldGFkYXRhLCBydW5UeXBlLCBuYW1lKTtcblx0XHRhd2FpdCB0aGlzLm9uUnVuQ3JlYXRlPy4ocnVuKTtcblx0XHRhd2FpdCB0aGlzLm9uQ2hhaW5TdGFydD8uKHJ1bik7XG5cdFx0cmV0dXJuIHJ1bjtcblx0fVxuXHRhc3luYyBoYW5kbGVDaGFpbkVuZChvdXRwdXRzLCBydW5JZCwgX3BhcmVudFJ1bklkLCBfdGFncywga3dhcmdzKSB7XG5cdFx0Y29uc3QgcnVuID0gdGhpcy5nZXRSdW5CeUlkKHJ1bklkKTtcblx0XHRpZiAoIXJ1bikgdGhyb3cgbmV3IEVycm9yKFwiTm8gY2hhaW4gcnVuIHRvIGVuZC5cIik7XG5cdFx0cnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcblx0XHRydW4ub3V0cHV0cyA9IF9jb2VyY2VUb0RpY3Qob3V0cHV0cywgXCJvdXRwdXRcIik7XG5cdFx0cnVuLmV2ZW50cy5wdXNoKHtcblx0XHRcdG5hbWU6IFwiZW5kXCIsXG5cdFx0XHR0aW1lOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKClcblx0XHR9KTtcblx0XHRpZiAoa3dhcmdzPy5pbnB1dHMgIT09IHZvaWQgMCkgcnVuLmlucHV0cyA9IF9jb2VyY2VUb0RpY3Qoa3dhcmdzLmlucHV0cywgXCJpbnB1dFwiKTtcblx0XHRhd2FpdCB0aGlzLm9uQ2hhaW5FbmQ/LihydW4pO1xuXHRcdGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG5cdFx0cmV0dXJuIHJ1bjtcblx0fVxuXHRhc3luYyBoYW5kbGVDaGFpbkVycm9yKGVycm9yLCBydW5JZCwgX3BhcmVudFJ1bklkLCBfdGFncywga3dhcmdzKSB7XG5cdFx0Y29uc3QgcnVuID0gdGhpcy5nZXRSdW5CeUlkKHJ1bklkKTtcblx0XHRpZiAoIXJ1bikgdGhyb3cgbmV3IEVycm9yKFwiTm8gY2hhaW4gcnVuIHRvIGVuZC5cIik7XG5cdFx0cnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcblx0XHRydW4uZXJyb3IgPSB0aGlzLnN0cmluZ2lmeUVycm9yKGVycm9yKTtcblx0XHRydW4uZXZlbnRzLnB1c2goe1xuXHRcdFx0bmFtZTogXCJlcnJvclwiLFxuXHRcdFx0dGltZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpXG5cdFx0fSk7XG5cdFx0aWYgKGt3YXJncz8uaW5wdXRzICE9PSB2b2lkIDApIHJ1bi5pbnB1dHMgPSBfY29lcmNlVG9EaWN0KGt3YXJncy5pbnB1dHMsIFwiaW5wdXRcIik7XG5cdFx0YXdhaXQgdGhpcy5vbkNoYWluRXJyb3I/LihydW4pO1xuXHRcdGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG5cdFx0cmV0dXJuIHJ1bjtcblx0fVxuXHQvKipcblx0KiBDcmVhdGUgYW5kIGFkZCBhIHJ1biB0byB0aGUgcnVuIG1hcCBmb3IgdG9vbCBzdGFydCBldmVudHMuXG5cdCogVGhpcyBtdXN0IHNvbWV0aW1lcyBiZSBkb25lIHN5bmNocm9ub3VzbHkgdG8gYXZvaWQgcmFjZSBjb25kaXRpb25zXG5cdCogd2hlbiBjYWxsYmFja3MgYXJlIGJhY2tncm91bmRlZCwgc28gd2UgZXhwb3NlIGl0IGFzIGEgc2VwYXJhdGUgbWV0aG9kIGhlcmUuXG5cdCovXG5cdF9jcmVhdGVSdW5Gb3JUb29sU3RhcnQodG9vbCwgaW5wdXQsIHJ1bklkLCBwYXJlbnRSdW5JZCwgdGFncywgbWV0YWRhdGEsIG5hbWUpIHtcblx0XHRjb25zdCBleGVjdXRpb25fb3JkZXIgPSB0aGlzLl9nZXRFeGVjdXRpb25PcmRlcihwYXJlbnRSdW5JZCk7XG5cdFx0Y29uc3Qgc3RhcnRfdGltZSA9IERhdGUubm93KCk7XG5cdFx0Y29uc3QgcnVuID0ge1xuXHRcdFx0aWQ6IHJ1bklkLFxuXHRcdFx0bmFtZTogbmFtZSA/PyB0b29sLmlkW3Rvb2wuaWQubGVuZ3RoIC0gMV0sXG5cdFx0XHRwYXJlbnRfcnVuX2lkOiBwYXJlbnRSdW5JZCxcblx0XHRcdHN0YXJ0X3RpbWUsXG5cdFx0XHRzZXJpYWxpemVkOiB0b29sLFxuXHRcdFx0ZXZlbnRzOiBbe1xuXHRcdFx0XHRuYW1lOiBcInN0YXJ0XCIsXG5cdFx0XHRcdHRpbWU6IG5ldyBEYXRlKHN0YXJ0X3RpbWUpLnRvSVNPU3RyaW5nKClcblx0XHRcdH1dLFxuXHRcdFx0aW5wdXRzOiB7IGlucHV0IH0sXG5cdFx0XHRleGVjdXRpb25fb3JkZXIsXG5cdFx0XHRjaGlsZF9leGVjdXRpb25fb3JkZXI6IGV4ZWN1dGlvbl9vcmRlcixcblx0XHRcdHJ1bl90eXBlOiBcInRvb2xcIixcblx0XHRcdGNoaWxkX3J1bnM6IFtdLFxuXHRcdFx0ZXh0cmE6IG1ldGFkYXRhID8geyBtZXRhZGF0YSB9IDoge30sXG5cdFx0XHR0YWdzOiB0YWdzIHx8IFtdXG5cdFx0fTtcblx0XHRyZXR1cm4gdGhpcy5fYWRkUnVuVG9SdW5NYXAocnVuKTtcblx0fVxuXHRhc3luYyBoYW5kbGVUb29sU3RhcnQodG9vbCwgaW5wdXQsIHJ1bklkLCBwYXJlbnRSdW5JZCwgdGFncywgbWV0YWRhdGEsIG5hbWUpIHtcblx0XHRjb25zdCBydW4gPSB0aGlzLmdldFJ1bkJ5SWQocnVuSWQpID8/IHRoaXMuX2NyZWF0ZVJ1bkZvclRvb2xTdGFydCh0b29sLCBpbnB1dCwgcnVuSWQsIHBhcmVudFJ1bklkLCB0YWdzLCBtZXRhZGF0YSwgbmFtZSk7XG5cdFx0YXdhaXQgdGhpcy5vblJ1bkNyZWF0ZT8uKHJ1bik7XG5cdFx0YXdhaXQgdGhpcy5vblRvb2xTdGFydD8uKHJ1bik7XG5cdFx0cmV0dXJuIHJ1bjtcblx0fVxuXHRhc3luYyBoYW5kbGVUb29sRW5kKG91dHB1dCwgcnVuSWQpIHtcblx0XHRjb25zdCBydW4gPSB0aGlzLmdldFJ1bkJ5SWQocnVuSWQpO1xuXHRcdGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwidG9vbFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJObyB0b29sIHJ1biB0byBlbmRcIik7XG5cdFx0cnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcblx0XHRydW4ub3V0cHV0cyA9IHsgb3V0cHV0IH07XG5cdFx0cnVuLmV2ZW50cy5wdXNoKHtcblx0XHRcdG5hbWU6IFwiZW5kXCIsXG5cdFx0XHR0aW1lOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKClcblx0XHR9KTtcblx0XHRhd2FpdCB0aGlzLm9uVG9vbEVuZD8uKHJ1bik7XG5cdFx0YXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcblx0XHRyZXR1cm4gcnVuO1xuXHR9XG5cdGFzeW5jIGhhbmRsZVRvb2xFcnJvcihlcnJvciwgcnVuSWQpIHtcblx0XHRjb25zdCBydW4gPSB0aGlzLmdldFJ1bkJ5SWQocnVuSWQpO1xuXHRcdGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwidG9vbFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJObyB0b29sIHJ1biB0byBlbmRcIik7XG5cdFx0cnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcblx0XHRydW4uZXJyb3IgPSB0aGlzLnN0cmluZ2lmeUVycm9yKGVycm9yKTtcblx0XHRydW4uZXZlbnRzLnB1c2goe1xuXHRcdFx0bmFtZTogXCJlcnJvclwiLFxuXHRcdFx0dGltZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpXG5cdFx0fSk7XG5cdFx0YXdhaXQgdGhpcy5vblRvb2xFcnJvcj8uKHJ1bik7XG5cdFx0YXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcblx0XHRyZXR1cm4gcnVuO1xuXHR9XG5cdGFzeW5jIGhhbmRsZUFnZW50QWN0aW9uKGFjdGlvbiwgcnVuSWQpIHtcblx0XHRjb25zdCBydW4gPSB0aGlzLmdldFJ1bkJ5SWQocnVuSWQpO1xuXHRcdGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwiY2hhaW5cIikgcmV0dXJuO1xuXHRcdGNvbnN0IGFnZW50UnVuID0gcnVuO1xuXHRcdGFnZW50UnVuLmFjdGlvbnMgPSBhZ2VudFJ1bi5hY3Rpb25zIHx8IFtdO1xuXHRcdGFnZW50UnVuLmFjdGlvbnMucHVzaChhY3Rpb24pO1xuXHRcdGFnZW50UnVuLmV2ZW50cy5wdXNoKHtcblx0XHRcdG5hbWU6IFwiYWdlbnRfYWN0aW9uXCIsXG5cdFx0XHR0aW1lOiAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKCksXG5cdFx0XHRrd2FyZ3M6IHsgYWN0aW9uIH1cblx0XHR9KTtcblx0XHRhd2FpdCB0aGlzLm9uQWdlbnRBY3Rpb24/LihydW4pO1xuXHR9XG5cdGFzeW5jIGhhbmRsZUFnZW50RW5kKGFjdGlvbiwgcnVuSWQpIHtcblx0XHRjb25zdCBydW4gPSB0aGlzLmdldFJ1bkJ5SWQocnVuSWQpO1xuXHRcdGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwiY2hhaW5cIikgcmV0dXJuO1xuXHRcdHJ1bi5ldmVudHMucHVzaCh7XG5cdFx0XHRuYW1lOiBcImFnZW50X2VuZFwiLFxuXHRcdFx0dGltZTogKC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKS50b0lTT1N0cmluZygpLFxuXHRcdFx0a3dhcmdzOiB7IGFjdGlvbiB9XG5cdFx0fSk7XG5cdFx0YXdhaXQgdGhpcy5vbkFnZW50RW5kPy4ocnVuKTtcblx0fVxuXHQvKipcblx0KiBDcmVhdGUgYW5kIGFkZCBhIHJ1biB0byB0aGUgcnVuIG1hcCBmb3IgcmV0cmlldmVyIHN0YXJ0IGV2ZW50cy5cblx0KiBUaGlzIG11c3Qgc29tZXRpbWVzIGJlIGRvbmUgc3luY2hyb25vdXNseSB0byBhdm9pZCByYWNlIGNvbmRpdGlvbnNcblx0KiB3aGVuIGNhbGxiYWNrcyBhcmUgYmFja2dyb3VuZGVkLCBzbyB3ZSBleHBvc2UgaXQgYXMgYSBzZXBhcmF0ZSBtZXRob2QgaGVyZS5cblx0Ki9cblx0X2NyZWF0ZVJ1bkZvclJldHJpZXZlclN0YXJ0KHJldHJpZXZlciwgcXVlcnksIHJ1bklkLCBwYXJlbnRSdW5JZCwgdGFncywgbWV0YWRhdGEsIG5hbWUpIHtcblx0XHRjb25zdCBleGVjdXRpb25fb3JkZXIgPSB0aGlzLl9nZXRFeGVjdXRpb25PcmRlcihwYXJlbnRSdW5JZCk7XG5cdFx0Y29uc3Qgc3RhcnRfdGltZSA9IERhdGUubm93KCk7XG5cdFx0Y29uc3QgcnVuID0ge1xuXHRcdFx0aWQ6IHJ1bklkLFxuXHRcdFx0bmFtZTogbmFtZSA/PyByZXRyaWV2ZXIuaWRbcmV0cmlldmVyLmlkLmxlbmd0aCAtIDFdLFxuXHRcdFx0cGFyZW50X3J1bl9pZDogcGFyZW50UnVuSWQsXG5cdFx0XHRzdGFydF90aW1lLFxuXHRcdFx0c2VyaWFsaXplZDogcmV0cmlldmVyLFxuXHRcdFx0ZXZlbnRzOiBbe1xuXHRcdFx0XHRuYW1lOiBcInN0YXJ0XCIsXG5cdFx0XHRcdHRpbWU6IG5ldyBEYXRlKHN0YXJ0X3RpbWUpLnRvSVNPU3RyaW5nKClcblx0XHRcdH1dLFxuXHRcdFx0aW5wdXRzOiB7IHF1ZXJ5IH0sXG5cdFx0XHRleGVjdXRpb25fb3JkZXIsXG5cdFx0XHRjaGlsZF9leGVjdXRpb25fb3JkZXI6IGV4ZWN1dGlvbl9vcmRlcixcblx0XHRcdHJ1bl90eXBlOiBcInJldHJpZXZlclwiLFxuXHRcdFx0Y2hpbGRfcnVuczogW10sXG5cdFx0XHRleHRyYTogbWV0YWRhdGEgPyB7IG1ldGFkYXRhIH0gOiB7fSxcblx0XHRcdHRhZ3M6IHRhZ3MgfHwgW11cblx0XHR9O1xuXHRcdHJldHVybiB0aGlzLl9hZGRSdW5Ub1J1bk1hcChydW4pO1xuXHR9XG5cdGFzeW5jIGhhbmRsZVJldHJpZXZlclN0YXJ0KHJldHJpZXZlciwgcXVlcnksIHJ1bklkLCBwYXJlbnRSdW5JZCwgdGFncywgbWV0YWRhdGEsIG5hbWUpIHtcblx0XHRjb25zdCBydW4gPSB0aGlzLmdldFJ1bkJ5SWQocnVuSWQpID8/IHRoaXMuX2NyZWF0ZVJ1bkZvclJldHJpZXZlclN0YXJ0KHJldHJpZXZlciwgcXVlcnksIHJ1bklkLCBwYXJlbnRSdW5JZCwgdGFncywgbWV0YWRhdGEsIG5hbWUpO1xuXHRcdGF3YWl0IHRoaXMub25SdW5DcmVhdGU/LihydW4pO1xuXHRcdGF3YWl0IHRoaXMub25SZXRyaWV2ZXJTdGFydD8uKHJ1bik7XG5cdFx0cmV0dXJuIHJ1bjtcblx0fVxuXHRhc3luYyBoYW5kbGVSZXRyaWV2ZXJFbmQoZG9jdW1lbnRzLCBydW5JZCkge1xuXHRcdGNvbnN0IHJ1biA9IHRoaXMuZ2V0UnVuQnlJZChydW5JZCk7XG5cdFx0aWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJyZXRyaWV2ZXJcIikgdGhyb3cgbmV3IEVycm9yKFwiTm8gcmV0cmlldmVyIHJ1biB0byBlbmRcIik7XG5cdFx0cnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcblx0XHRydW4ub3V0cHV0cyA9IHsgZG9jdW1lbnRzIH07XG5cdFx0cnVuLmV2ZW50cy5wdXNoKHtcblx0XHRcdG5hbWU6IFwiZW5kXCIsXG5cdFx0XHR0aW1lOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKClcblx0XHR9KTtcblx0XHRhd2FpdCB0aGlzLm9uUmV0cmlldmVyRW5kPy4ocnVuKTtcblx0XHRhd2FpdCB0aGlzLl9lbmRUcmFjZShydW4pO1xuXHRcdHJldHVybiBydW47XG5cdH1cblx0YXN5bmMgaGFuZGxlUmV0cmlldmVyRXJyb3IoZXJyb3IsIHJ1bklkKSB7XG5cdFx0Y29uc3QgcnVuID0gdGhpcy5nZXRSdW5CeUlkKHJ1bklkKTtcblx0XHRpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcInJldHJpZXZlclwiKSB0aHJvdyBuZXcgRXJyb3IoXCJObyByZXRyaWV2ZXIgcnVuIHRvIGVuZFwiKTtcblx0XHRydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuXHRcdHJ1bi5lcnJvciA9IHRoaXMuc3RyaW5naWZ5RXJyb3IoZXJyb3IpO1xuXHRcdHJ1bi5ldmVudHMucHVzaCh7XG5cdFx0XHRuYW1lOiBcImVycm9yXCIsXG5cdFx0XHR0aW1lOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKClcblx0XHR9KTtcblx0XHRhd2FpdCB0aGlzLm9uUmV0cmlldmVyRXJyb3I/LihydW4pO1xuXHRcdGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG5cdFx0cmV0dXJuIHJ1bjtcblx0fVxuXHRhc3luYyBoYW5kbGVUZXh0KHRleHQsIHJ1bklkKSB7XG5cdFx0Y29uc3QgcnVuID0gdGhpcy5nZXRSdW5CeUlkKHJ1bklkKTtcblx0XHRpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcImNoYWluXCIpIHJldHVybjtcblx0XHRydW4uZXZlbnRzLnB1c2goe1xuXHRcdFx0bmFtZTogXCJ0ZXh0XCIsXG5cdFx0XHR0aW1lOiAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKCksXG5cdFx0XHRrd2FyZ3M6IHsgdGV4dCB9XG5cdFx0fSk7XG5cdFx0YXdhaXQgdGhpcy5vblRleHQ/LihydW4pO1xuXHR9XG5cdGFzeW5jIGhhbmRsZUxMTU5ld1Rva2VuKHRva2VuLCBpZHgsIHJ1bklkLCBfcGFyZW50UnVuSWQsIF90YWdzLCBmaWVsZHMpIHtcblx0XHRjb25zdCBydW4gPSB0aGlzLmdldFJ1bkJ5SWQocnVuSWQpO1xuXHRcdGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwibGxtXCIpIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBcInJ1bklkXCIgcHJvdmlkZWQgdG8gXCJoYW5kbGVMTE1OZXdUb2tlblwiIGNhbGxiYWNrLmApO1xuXHRcdHJ1bi5ldmVudHMucHVzaCh7XG5cdFx0XHRuYW1lOiBcIm5ld190b2tlblwiLFxuXHRcdFx0dGltZTogKC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKS50b0lTT1N0cmluZygpLFxuXHRcdFx0a3dhcmdzOiB7XG5cdFx0XHRcdHRva2VuLFxuXHRcdFx0XHRpZHgsXG5cdFx0XHRcdGNodW5rOiBmaWVsZHM/LmNodW5rXG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0YXdhaXQgdGhpcy5vbkxMTU5ld1Rva2VuPy4ocnVuLCB0b2tlbiwgeyBjaHVuazogZmllbGRzPy5jaHVuayB9KTtcblx0XHRyZXR1cm4gcnVuO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEJhc2VUcmFjZXIsIGJhc2VfZXhwb3J0cywgaXNCYXNlVHJhY2VyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iYXNlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/tracers/base.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/tracers/console.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/console.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConsoleCallbackHandler: () => (/* binding */ ConsoleCallbackHandler),\n/* harmony export */   console_exports: () => (/* binding */ console_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/tracers/base.js\");\n/* harmony import */ var ansi_styles__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ansi-styles */ \"(ssr)/./node_modules/ansi-styles/index.js\");\n\n\n\n\n//#region src/tracers/console.ts\nvar console_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(console_exports, { ConsoleCallbackHandler: () => ConsoleCallbackHandler });\nfunction wrap(style, text) {\n\treturn `${style.open}${text}${style.close}`;\n}\nfunction tryJsonStringify(obj, fallback) {\n\ttry {\n\t\treturn JSON.stringify(obj, null, 2);\n\t} catch {\n\t\treturn fallback;\n\t}\n}\nfunction formatKVMapItem(value) {\n\tif (typeof value === \"string\") return value.trim();\n\tif (value === null || value === void 0) return value;\n\treturn tryJsonStringify(value, value.toString());\n}\nfunction elapsed(run) {\n\tif (!run.end_time) return \"\";\n\tconst elapsed$1 = run.end_time - run.start_time;\n\tif (elapsed$1 < 1e3) return `${elapsed$1}ms`;\n\treturn `${(elapsed$1 / 1e3).toFixed(2)}s`;\n}\nconst { color } = ansi_styles__WEBPACK_IMPORTED_MODULE_2__;\n/**\n* A tracer that logs all events to the console. It extends from the\n* `BaseTracer` class and overrides its methods to provide custom logging\n* functionality.\n* @example\n* ```typescript\n*\n* const llm = new ChatAnthropic({\n*   temperature: 0,\n*   tags: [\"example\", \"callbacks\", \"constructor\"],\n*   callbacks: [new ConsoleCallbackHandler()],\n* });\n*\n* ```\n*/\nvar ConsoleCallbackHandler = class extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseTracer {\n\tname = \"console_callback_handler\";\n\t/**\n\t* Method used to persist the run. In this case, it simply returns a\n\t* resolved promise as there's no persistence logic.\n\t* @param _run The run to persist.\n\t* @returns A resolved promise.\n\t*/\n\tpersistRun(_run) {\n\t\treturn Promise.resolve();\n\t}\n\t/**\n\t* Method used to get all the parent runs of a given run.\n\t* @param run The run whose parents are to be retrieved.\n\t* @returns An array of parent runs.\n\t*/\n\tgetParents(run) {\n\t\tconst parents = [];\n\t\tlet currentRun = run;\n\t\twhile (currentRun.parent_run_id) {\n\t\t\tconst parent = this.runMap.get(currentRun.parent_run_id);\n\t\t\tif (parent) {\n\t\t\t\tparents.push(parent);\n\t\t\t\tcurrentRun = parent;\n\t\t\t} else break;\n\t\t}\n\t\treturn parents;\n\t}\n\t/**\n\t* Method used to get a string representation of the run's lineage, which\n\t* is used in logging.\n\t* @param run The run whose lineage is to be retrieved.\n\t* @returns A string representation of the run's lineage.\n\t*/\n\tgetBreadcrumbs(run) {\n\t\tconst parents = this.getParents(run).reverse();\n\t\tconst string = [...parents, run].map((parent, i, arr) => {\n\t\t\tconst name = `${parent.execution_order}:${parent.run_type}:${parent.name}`;\n\t\t\treturn i === arr.length - 1 ? wrap(ansi_styles__WEBPACK_IMPORTED_MODULE_2__.bold, name) : name;\n\t\t}).join(\" > \");\n\t\treturn wrap(color.grey, string);\n\t}\n\t/**\n\t* Method used to log the start of a chain run.\n\t* @param run The chain run that has started.\n\t* @returns void\n\t*/\n\tonChainStart(run) {\n\t\tconst crumbs = this.getBreadcrumbs(run);\n\t\tconsole.log(`${wrap(color.green, \"[chain/start]\")} [${crumbs}] Entering Chain run with input: ${tryJsonStringify(run.inputs, \"[inputs]\")}`);\n\t}\n\t/**\n\t* Method used to log the end of a chain run.\n\t* @param run The chain run that has ended.\n\t* @returns void\n\t*/\n\tonChainEnd(run) {\n\t\tconst crumbs = this.getBreadcrumbs(run);\n\t\tconsole.log(`${wrap(color.cyan, \"[chain/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Chain run with output: ${tryJsonStringify(run.outputs, \"[outputs]\")}`);\n\t}\n\t/**\n\t* Method used to log any errors of a chain run.\n\t* @param run The chain run that has errored.\n\t* @returns void\n\t*/\n\tonChainError(run) {\n\t\tconst crumbs = this.getBreadcrumbs(run);\n\t\tconsole.log(`${wrap(color.red, \"[chain/error]\")} [${crumbs}] [${elapsed(run)}] Chain run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n\t}\n\t/**\n\t* Method used to log the start of an LLM run.\n\t* @param run The LLM run that has started.\n\t* @returns void\n\t*/\n\tonLLMStart(run) {\n\t\tconst crumbs = this.getBreadcrumbs(run);\n\t\tconst inputs = \"prompts\" in run.inputs ? { prompts: run.inputs.prompts.map((p) => p.trim()) } : run.inputs;\n\t\tconsole.log(`${wrap(color.green, \"[llm/start]\")} [${crumbs}] Entering LLM run with input: ${tryJsonStringify(inputs, \"[inputs]\")}`);\n\t}\n\t/**\n\t* Method used to log the end of an LLM run.\n\t* @param run The LLM run that has ended.\n\t* @returns void\n\t*/\n\tonLLMEnd(run) {\n\t\tconst crumbs = this.getBreadcrumbs(run);\n\t\tconsole.log(`${wrap(color.cyan, \"[llm/end]\")} [${crumbs}] [${elapsed(run)}] Exiting LLM run with output: ${tryJsonStringify(run.outputs, \"[response]\")}`);\n\t}\n\t/**\n\t* Method used to log any errors of an LLM run.\n\t* @param run The LLM run that has errored.\n\t* @returns void\n\t*/\n\tonLLMError(run) {\n\t\tconst crumbs = this.getBreadcrumbs(run);\n\t\tconsole.log(`${wrap(color.red, \"[llm/error]\")} [${crumbs}] [${elapsed(run)}] LLM run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n\t}\n\t/**\n\t* Method used to log the start of a tool run.\n\t* @param run The tool run that has started.\n\t* @returns void\n\t*/\n\tonToolStart(run) {\n\t\tconst crumbs = this.getBreadcrumbs(run);\n\t\tconsole.log(`${wrap(color.green, \"[tool/start]\")} [${crumbs}] Entering Tool run with input: \"${formatKVMapItem(run.inputs.input)}\"`);\n\t}\n\t/**\n\t* Method used to log the end of a tool run.\n\t* @param run The tool run that has ended.\n\t* @returns void\n\t*/\n\tonToolEnd(run) {\n\t\tconst crumbs = this.getBreadcrumbs(run);\n\t\tconsole.log(`${wrap(color.cyan, \"[tool/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Tool run with output: \"${formatKVMapItem(run.outputs?.output)}\"`);\n\t}\n\t/**\n\t* Method used to log any errors of a tool run.\n\t* @param run The tool run that has errored.\n\t* @returns void\n\t*/\n\tonToolError(run) {\n\t\tconst crumbs = this.getBreadcrumbs(run);\n\t\tconsole.log(`${wrap(color.red, \"[tool/error]\")} [${crumbs}] [${elapsed(run)}] Tool run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n\t}\n\t/**\n\t* Method used to log the start of a retriever run.\n\t* @param run The retriever run that has started.\n\t* @returns void\n\t*/\n\tonRetrieverStart(run) {\n\t\tconst crumbs = this.getBreadcrumbs(run);\n\t\tconsole.log(`${wrap(color.green, \"[retriever/start]\")} [${crumbs}] Entering Retriever run with input: ${tryJsonStringify(run.inputs, \"[inputs]\")}`);\n\t}\n\t/**\n\t* Method used to log the end of a retriever run.\n\t* @param run The retriever run that has ended.\n\t* @returns void\n\t*/\n\tonRetrieverEnd(run) {\n\t\tconst crumbs = this.getBreadcrumbs(run);\n\t\tconsole.log(`${wrap(color.cyan, \"[retriever/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Retriever run with output: ${tryJsonStringify(run.outputs, \"[outputs]\")}`);\n\t}\n\t/**\n\t* Method used to log any errors of a retriever run.\n\t* @param run The retriever run that has errored.\n\t* @returns void\n\t*/\n\tonRetrieverError(run) {\n\t\tconst crumbs = this.getBreadcrumbs(run);\n\t\tconsole.log(`${wrap(color.red, \"[retriever/error]\")} [${crumbs}] [${elapsed(run)}] Retriever run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n\t}\n\t/**\n\t* Method used to log the action selected by the agent.\n\t* @param run The run in which the agent action occurred.\n\t* @returns void\n\t*/\n\tonAgentAction(run) {\n\t\tconst agentRun = run;\n\t\tconst crumbs = this.getBreadcrumbs(run);\n\t\tconsole.log(`${wrap(color.blue, \"[agent/action]\")} [${crumbs}] Agent selected action: ${tryJsonStringify(agentRun.actions[agentRun.actions.length - 1], \"[action]\")}`);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=console.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9jb25zb2xlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTJEO0FBQ3BCO0FBQ047O0FBRWpDO0FBQ0E7QUFDQSxzRUFBUSxvQkFBb0Isc0RBQXNEO0FBQ2xGO0FBQ0EsV0FBVyxXQUFXLEVBQUUsS0FBSyxFQUFFLFlBQVk7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxVQUFVO0FBQzFDLFdBQVcsNkJBQTZCO0FBQ3hDO0FBQ0EsUUFBUSxRQUFRLEVBQUUsd0NBQU07QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsZ0RBQVU7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsdUJBQXVCLEdBQUcsZ0JBQWdCLEdBQUcsWUFBWTtBQUM1RSxzQ0FBc0MsNkNBQVc7QUFDakQsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixvQ0FBb0MsR0FBRyxPQUFPLG1DQUFtQyx5Q0FBeUM7QUFDM0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixpQ0FBaUMsR0FBRyxPQUFPLEtBQUssYUFBYSxtQ0FBbUMsMkNBQTJDO0FBQzVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsa0NBQWtDLEdBQUcsT0FBTyxLQUFLLGFBQWEsa0NBQWtDLHVDQUF1QztBQUN4SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLG1EQUFtRDtBQUNoRyxpQkFBaUIsa0NBQWtDLEdBQUcsT0FBTyxpQ0FBaUMscUNBQXFDO0FBQ25JO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsK0JBQStCLEdBQUcsT0FBTyxLQUFLLGFBQWEsaUNBQWlDLDRDQUE0QztBQUN6SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGdDQUFnQyxHQUFHLE9BQU8sS0FBSyxhQUFhLGdDQUFnQyx1Q0FBdUM7QUFDcEo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixtQ0FBbUMsR0FBRyxPQUFPLG1DQUFtQyxrQ0FBa0M7QUFDbkk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixnQ0FBZ0MsR0FBRyxPQUFPLEtBQUssYUFBYSxtQ0FBbUMscUNBQXFDO0FBQ3JKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsaUNBQWlDLEdBQUcsT0FBTyxLQUFLLGFBQWEsaUNBQWlDLHVDQUF1QztBQUN0SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHdDQUF3QyxHQUFHLE9BQU8sdUNBQXVDLHlDQUF5QztBQUNuSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHFDQUFxQyxHQUFHLE9BQU8sS0FBSyxhQUFhLHVDQUF1QywyQ0FBMkM7QUFDcEs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixzQ0FBc0MsR0FBRyxPQUFPLEtBQUssYUFBYSxzQ0FBc0MsdUNBQXVDO0FBQ2hLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixvQ0FBb0MsR0FBRyxPQUFPLDJCQUEyQiw0RUFBNEU7QUFDdEs7QUFDQTs7QUFFQTtBQUNtRDtBQUNuRCIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvY29uc29sZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4cG9ydCB9IGZyb20gXCIuLi9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyBCYXNlVHJhY2VyIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHN0eWxlcyBmcm9tIFwiYW5zaS1zdHlsZXNcIjtcblxuLy8jcmVnaW9uIHNyYy90cmFjZXJzL2NvbnNvbGUudHNcbnZhciBjb25zb2xlX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KGNvbnNvbGVfZXhwb3J0cywgeyBDb25zb2xlQ2FsbGJhY2tIYW5kbGVyOiAoKSA9PiBDb25zb2xlQ2FsbGJhY2tIYW5kbGVyIH0pO1xuZnVuY3Rpb24gd3JhcChzdHlsZSwgdGV4dCkge1xuXHRyZXR1cm4gYCR7c3R5bGUub3Blbn0ke3RleHR9JHtzdHlsZS5jbG9zZX1gO1xufVxuZnVuY3Rpb24gdHJ5SnNvblN0cmluZ2lmeShvYmosIGZhbGxiYWNrKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaiwgbnVsbCwgMik7XG5cdH0gY2F0Y2gge1xuXHRcdHJldHVybiBmYWxsYmFjaztcblx0fVxufVxuZnVuY3Rpb24gZm9ybWF0S1ZNYXBJdGVtKHZhbHVlKSB7XG5cdGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHJldHVybiB2YWx1ZS50cmltKCk7XG5cdGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdm9pZCAwKSByZXR1cm4gdmFsdWU7XG5cdHJldHVybiB0cnlKc29uU3RyaW5naWZ5KHZhbHVlLCB2YWx1ZS50b1N0cmluZygpKTtcbn1cbmZ1bmN0aW9uIGVsYXBzZWQocnVuKSB7XG5cdGlmICghcnVuLmVuZF90aW1lKSByZXR1cm4gXCJcIjtcblx0Y29uc3QgZWxhcHNlZCQxID0gcnVuLmVuZF90aW1lIC0gcnVuLnN0YXJ0X3RpbWU7XG5cdGlmIChlbGFwc2VkJDEgPCAxZTMpIHJldHVybiBgJHtlbGFwc2VkJDF9bXNgO1xuXHRyZXR1cm4gYCR7KGVsYXBzZWQkMSAvIDFlMykudG9GaXhlZCgyKX1zYDtcbn1cbmNvbnN0IHsgY29sb3IgfSA9IHN0eWxlcztcbi8qKlxuKiBBIHRyYWNlciB0aGF0IGxvZ3MgYWxsIGV2ZW50cyB0byB0aGUgY29uc29sZS4gSXQgZXh0ZW5kcyBmcm9tIHRoZVxuKiBgQmFzZVRyYWNlcmAgY2xhc3MgYW5kIG92ZXJyaWRlcyBpdHMgbWV0aG9kcyB0byBwcm92aWRlIGN1c3RvbSBsb2dnaW5nXG4qIGZ1bmN0aW9uYWxpdHkuXG4qIEBleGFtcGxlXG4qIGBgYHR5cGVzY3JpcHRcbipcbiogY29uc3QgbGxtID0gbmV3IENoYXRBbnRocm9waWMoe1xuKiAgIHRlbXBlcmF0dXJlOiAwLFxuKiAgIHRhZ3M6IFtcImV4YW1wbGVcIiwgXCJjYWxsYmFja3NcIiwgXCJjb25zdHJ1Y3RvclwiXSxcbiogICBjYWxsYmFja3M6IFtuZXcgQ29uc29sZUNhbGxiYWNrSGFuZGxlcigpXSxcbiogfSk7XG4qXG4qIGBgYFxuKi9cbnZhciBDb25zb2xlQ2FsbGJhY2tIYW5kbGVyID0gY2xhc3MgZXh0ZW5kcyBCYXNlVHJhY2VyIHtcblx0bmFtZSA9IFwiY29uc29sZV9jYWxsYmFja19oYW5kbGVyXCI7XG5cdC8qKlxuXHQqIE1ldGhvZCB1c2VkIHRvIHBlcnNpc3QgdGhlIHJ1bi4gSW4gdGhpcyBjYXNlLCBpdCBzaW1wbHkgcmV0dXJucyBhXG5cdCogcmVzb2x2ZWQgcHJvbWlzZSBhcyB0aGVyZSdzIG5vIHBlcnNpc3RlbmNlIGxvZ2ljLlxuXHQqIEBwYXJhbSBfcnVuIFRoZSBydW4gdG8gcGVyc2lzdC5cblx0KiBAcmV0dXJucyBBIHJlc29sdmVkIHByb21pc2UuXG5cdCovXG5cdHBlcnNpc3RSdW4oX3J1bikge1xuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblx0fVxuXHQvKipcblx0KiBNZXRob2QgdXNlZCB0byBnZXQgYWxsIHRoZSBwYXJlbnQgcnVucyBvZiBhIGdpdmVuIHJ1bi5cblx0KiBAcGFyYW0gcnVuIFRoZSBydW4gd2hvc2UgcGFyZW50cyBhcmUgdG8gYmUgcmV0cmlldmVkLlxuXHQqIEByZXR1cm5zIEFuIGFycmF5IG9mIHBhcmVudCBydW5zLlxuXHQqL1xuXHRnZXRQYXJlbnRzKHJ1bikge1xuXHRcdGNvbnN0IHBhcmVudHMgPSBbXTtcblx0XHRsZXQgY3VycmVudFJ1biA9IHJ1bjtcblx0XHR3aGlsZSAoY3VycmVudFJ1bi5wYXJlbnRfcnVuX2lkKSB7XG5cdFx0XHRjb25zdCBwYXJlbnQgPSB0aGlzLnJ1bk1hcC5nZXQoY3VycmVudFJ1bi5wYXJlbnRfcnVuX2lkKTtcblx0XHRcdGlmIChwYXJlbnQpIHtcblx0XHRcdFx0cGFyZW50cy5wdXNoKHBhcmVudCk7XG5cdFx0XHRcdGN1cnJlbnRSdW4gPSBwYXJlbnQ7XG5cdFx0XHR9IGVsc2UgYnJlYWs7XG5cdFx0fVxuXHRcdHJldHVybiBwYXJlbnRzO1xuXHR9XG5cdC8qKlxuXHQqIE1ldGhvZCB1c2VkIHRvIGdldCBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgcnVuJ3MgbGluZWFnZSwgd2hpY2hcblx0KiBpcyB1c2VkIGluIGxvZ2dpbmcuXG5cdCogQHBhcmFtIHJ1biBUaGUgcnVuIHdob3NlIGxpbmVhZ2UgaXMgdG8gYmUgcmV0cmlldmVkLlxuXHQqIEByZXR1cm5zIEEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBydW4ncyBsaW5lYWdlLlxuXHQqL1xuXHRnZXRCcmVhZGNydW1icyhydW4pIHtcblx0XHRjb25zdCBwYXJlbnRzID0gdGhpcy5nZXRQYXJlbnRzKHJ1bikucmV2ZXJzZSgpO1xuXHRcdGNvbnN0IHN0cmluZyA9IFsuLi5wYXJlbnRzLCBydW5dLm1hcCgocGFyZW50LCBpLCBhcnIpID0+IHtcblx0XHRcdGNvbnN0IG5hbWUgPSBgJHtwYXJlbnQuZXhlY3V0aW9uX29yZGVyfToke3BhcmVudC5ydW5fdHlwZX06JHtwYXJlbnQubmFtZX1gO1xuXHRcdFx0cmV0dXJuIGkgPT09IGFyci5sZW5ndGggLSAxID8gd3JhcChzdHlsZXMuYm9sZCwgbmFtZSkgOiBuYW1lO1xuXHRcdH0pLmpvaW4oXCIgPiBcIik7XG5cdFx0cmV0dXJuIHdyYXAoY29sb3IuZ3JleSwgc3RyaW5nKTtcblx0fVxuXHQvKipcblx0KiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIHN0YXJ0IG9mIGEgY2hhaW4gcnVuLlxuXHQqIEBwYXJhbSBydW4gVGhlIGNoYWluIHJ1biB0aGF0IGhhcyBzdGFydGVkLlxuXHQqIEByZXR1cm5zIHZvaWRcblx0Ki9cblx0b25DaGFpblN0YXJ0KHJ1bikge1xuXHRcdGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcblx0XHRjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmdyZWVuLCBcIltjaGFpbi9zdGFydF1cIil9IFske2NydW1ic31dIEVudGVyaW5nIENoYWluIHJ1biB3aXRoIGlucHV0OiAke3RyeUpzb25TdHJpbmdpZnkocnVuLmlucHV0cywgXCJbaW5wdXRzXVwiKX1gKTtcblx0fVxuXHQvKipcblx0KiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIGVuZCBvZiBhIGNoYWluIHJ1bi5cblx0KiBAcGFyYW0gcnVuIFRoZSBjaGFpbiBydW4gdGhhdCBoYXMgZW5kZWQuXG5cdCogQHJldHVybnMgdm9pZFxuXHQqL1xuXHRvbkNoYWluRW5kKHJ1bikge1xuXHRcdGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcblx0XHRjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmN5YW4sIFwiW2NoYWluL2VuZF1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIEV4aXRpbmcgQ2hhaW4gcnVuIHdpdGggb3V0cHV0OiAke3RyeUpzb25TdHJpbmdpZnkocnVuLm91dHB1dHMsIFwiW291dHB1dHNdXCIpfWApO1xuXHR9XG5cdC8qKlxuXHQqIE1ldGhvZCB1c2VkIHRvIGxvZyBhbnkgZXJyb3JzIG9mIGEgY2hhaW4gcnVuLlxuXHQqIEBwYXJhbSBydW4gVGhlIGNoYWluIHJ1biB0aGF0IGhhcyBlcnJvcmVkLlxuXHQqIEByZXR1cm5zIHZvaWRcblx0Ki9cblx0b25DaGFpbkVycm9yKHJ1bikge1xuXHRcdGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcblx0XHRjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLnJlZCwgXCJbY2hhaW4vZXJyb3JdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBDaGFpbiBydW4gZXJyb3JlZCB3aXRoIGVycm9yOiAke3RyeUpzb25TdHJpbmdpZnkocnVuLmVycm9yLCBcIltlcnJvcl1cIil9YCk7XG5cdH1cblx0LyoqXG5cdCogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBzdGFydCBvZiBhbiBMTE0gcnVuLlxuXHQqIEBwYXJhbSBydW4gVGhlIExMTSBydW4gdGhhdCBoYXMgc3RhcnRlZC5cblx0KiBAcmV0dXJucyB2b2lkXG5cdCovXG5cdG9uTExNU3RhcnQocnVuKSB7XG5cdFx0Y29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuXHRcdGNvbnN0IGlucHV0cyA9IFwicHJvbXB0c1wiIGluIHJ1bi5pbnB1dHMgPyB7IHByb21wdHM6IHJ1bi5pbnB1dHMucHJvbXB0cy5tYXAoKHApID0+IHAudHJpbSgpKSB9IDogcnVuLmlucHV0cztcblx0XHRjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmdyZWVuLCBcIltsbG0vc3RhcnRdXCIpfSBbJHtjcnVtYnN9XSBFbnRlcmluZyBMTE0gcnVuIHdpdGggaW5wdXQ6ICR7dHJ5SnNvblN0cmluZ2lmeShpbnB1dHMsIFwiW2lucHV0c11cIil9YCk7XG5cdH1cblx0LyoqXG5cdCogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBlbmQgb2YgYW4gTExNIHJ1bi5cblx0KiBAcGFyYW0gcnVuIFRoZSBMTE0gcnVuIHRoYXQgaGFzIGVuZGVkLlxuXHQqIEByZXR1cm5zIHZvaWRcblx0Ki9cblx0b25MTE1FbmQocnVuKSB7XG5cdFx0Y29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuXHRcdGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuY3lhbiwgXCJbbGxtL2VuZF1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIEV4aXRpbmcgTExNIHJ1biB3aXRoIG91dHB1dDogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5vdXRwdXRzLCBcIltyZXNwb25zZV1cIil9YCk7XG5cdH1cblx0LyoqXG5cdCogTWV0aG9kIHVzZWQgdG8gbG9nIGFueSBlcnJvcnMgb2YgYW4gTExNIHJ1bi5cblx0KiBAcGFyYW0gcnVuIFRoZSBMTE0gcnVuIHRoYXQgaGFzIGVycm9yZWQuXG5cdCogQHJldHVybnMgdm9pZFxuXHQqL1xuXHRvbkxMTUVycm9yKHJ1bikge1xuXHRcdGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcblx0XHRjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLnJlZCwgXCJbbGxtL2Vycm9yXVwiKX0gWyR7Y3J1bWJzfV0gWyR7ZWxhcHNlZChydW4pfV0gTExNIHJ1biBlcnJvcmVkIHdpdGggZXJyb3I6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4uZXJyb3IsIFwiW2Vycm9yXVwiKX1gKTtcblx0fVxuXHQvKipcblx0KiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIHN0YXJ0IG9mIGEgdG9vbCBydW4uXG5cdCogQHBhcmFtIHJ1biBUaGUgdG9vbCBydW4gdGhhdCBoYXMgc3RhcnRlZC5cblx0KiBAcmV0dXJucyB2b2lkXG5cdCovXG5cdG9uVG9vbFN0YXJ0KHJ1bikge1xuXHRcdGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcblx0XHRjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmdyZWVuLCBcIlt0b29sL3N0YXJ0XVwiKX0gWyR7Y3J1bWJzfV0gRW50ZXJpbmcgVG9vbCBydW4gd2l0aCBpbnB1dDogXCIke2Zvcm1hdEtWTWFwSXRlbShydW4uaW5wdXRzLmlucHV0KX1cImApO1xuXHR9XG5cdC8qKlxuXHQqIE1ldGhvZCB1c2VkIHRvIGxvZyB0aGUgZW5kIG9mIGEgdG9vbCBydW4uXG5cdCogQHBhcmFtIHJ1biBUaGUgdG9vbCBydW4gdGhhdCBoYXMgZW5kZWQuXG5cdCogQHJldHVybnMgdm9pZFxuXHQqL1xuXHRvblRvb2xFbmQocnVuKSB7XG5cdFx0Y29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuXHRcdGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuY3lhbiwgXCJbdG9vbC9lbmRdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBFeGl0aW5nIFRvb2wgcnVuIHdpdGggb3V0cHV0OiBcIiR7Zm9ybWF0S1ZNYXBJdGVtKHJ1bi5vdXRwdXRzPy5vdXRwdXQpfVwiYCk7XG5cdH1cblx0LyoqXG5cdCogTWV0aG9kIHVzZWQgdG8gbG9nIGFueSBlcnJvcnMgb2YgYSB0b29sIHJ1bi5cblx0KiBAcGFyYW0gcnVuIFRoZSB0b29sIHJ1biB0aGF0IGhhcyBlcnJvcmVkLlxuXHQqIEByZXR1cm5zIHZvaWRcblx0Ki9cblx0b25Ub29sRXJyb3IocnVuKSB7XG5cdFx0Y29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuXHRcdGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IucmVkLCBcIlt0b29sL2Vycm9yXVwiKX0gWyR7Y3J1bWJzfV0gWyR7ZWxhcHNlZChydW4pfV0gVG9vbCBydW4gZXJyb3JlZCB3aXRoIGVycm9yOiAke3RyeUpzb25TdHJpbmdpZnkocnVuLmVycm9yLCBcIltlcnJvcl1cIil9YCk7XG5cdH1cblx0LyoqXG5cdCogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBzdGFydCBvZiBhIHJldHJpZXZlciBydW4uXG5cdCogQHBhcmFtIHJ1biBUaGUgcmV0cmlldmVyIHJ1biB0aGF0IGhhcyBzdGFydGVkLlxuXHQqIEByZXR1cm5zIHZvaWRcblx0Ki9cblx0b25SZXRyaWV2ZXJTdGFydChydW4pIHtcblx0XHRjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG5cdFx0Y29uc29sZS5sb2coYCR7d3JhcChjb2xvci5ncmVlbiwgXCJbcmV0cmlldmVyL3N0YXJ0XVwiKX0gWyR7Y3J1bWJzfV0gRW50ZXJpbmcgUmV0cmlldmVyIHJ1biB3aXRoIGlucHV0OiAke3RyeUpzb25TdHJpbmdpZnkocnVuLmlucHV0cywgXCJbaW5wdXRzXVwiKX1gKTtcblx0fVxuXHQvKipcblx0KiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIGVuZCBvZiBhIHJldHJpZXZlciBydW4uXG5cdCogQHBhcmFtIHJ1biBUaGUgcmV0cmlldmVyIHJ1biB0aGF0IGhhcyBlbmRlZC5cblx0KiBAcmV0dXJucyB2b2lkXG5cdCovXG5cdG9uUmV0cmlldmVyRW5kKHJ1bikge1xuXHRcdGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcblx0XHRjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmN5YW4sIFwiW3JldHJpZXZlci9lbmRdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBFeGl0aW5nIFJldHJpZXZlciBydW4gd2l0aCBvdXRwdXQ6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4ub3V0cHV0cywgXCJbb3V0cHV0c11cIil9YCk7XG5cdH1cblx0LyoqXG5cdCogTWV0aG9kIHVzZWQgdG8gbG9nIGFueSBlcnJvcnMgb2YgYSByZXRyaWV2ZXIgcnVuLlxuXHQqIEBwYXJhbSBydW4gVGhlIHJldHJpZXZlciBydW4gdGhhdCBoYXMgZXJyb3JlZC5cblx0KiBAcmV0dXJucyB2b2lkXG5cdCovXG5cdG9uUmV0cmlldmVyRXJyb3IocnVuKSB7XG5cdFx0Y29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuXHRcdGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IucmVkLCBcIltyZXRyaWV2ZXIvZXJyb3JdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBSZXRyaWV2ZXIgcnVuIGVycm9yZWQgd2l0aCBlcnJvcjogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5lcnJvciwgXCJbZXJyb3JdXCIpfWApO1xuXHR9XG5cdC8qKlxuXHQqIE1ldGhvZCB1c2VkIHRvIGxvZyB0aGUgYWN0aW9uIHNlbGVjdGVkIGJ5IHRoZSBhZ2VudC5cblx0KiBAcGFyYW0gcnVuIFRoZSBydW4gaW4gd2hpY2ggdGhlIGFnZW50IGFjdGlvbiBvY2N1cnJlZC5cblx0KiBAcmV0dXJucyB2b2lkXG5cdCovXG5cdG9uQWdlbnRBY3Rpb24ocnVuKSB7XG5cdFx0Y29uc3QgYWdlbnRSdW4gPSBydW47XG5cdFx0Y29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuXHRcdGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuYmx1ZSwgXCJbYWdlbnQvYWN0aW9uXVwiKX0gWyR7Y3J1bWJzfV0gQWdlbnQgc2VsZWN0ZWQgYWN0aW9uOiAke3RyeUpzb25TdHJpbmdpZnkoYWdlbnRSdW4uYWN0aW9uc1thZ2VudFJ1bi5hY3Rpb25zLmxlbmd0aCAtIDFdLCBcIlthY3Rpb25dXCIpfWApO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IENvbnNvbGVDYWxsYmFja0hhbmRsZXIsIGNvbnNvbGVfZXhwb3J0cyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uc29sZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/tracers/console.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/tracers/event_stream.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/event_stream.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EventStreamCallbackHandler: () => (/* binding */ EventStreamCallbackHandler),\n/* harmony export */   isStreamEventsHandler: () => (/* binding */ isStreamEventsHandler)\n/* harmony export */ });\n/* harmony import */ var _messages_ai_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../messages/ai.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/tracers/base.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/stream.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _outputs_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../outputs.js */ \"(ssr)/./node_modules/@langchain/core/dist/outputs.js\");\n\n\n\n\n\n//#region src/tracers/event_stream.ts\nfunction assignName({ name, serialized }) {\n\tif (name !== void 0) return name;\n\tif (serialized?.name !== void 0) return serialized.name;\n\telse if (serialized?.id !== void 0 && Array.isArray(serialized?.id)) return serialized.id[serialized.id.length - 1];\n\treturn \"Unnamed\";\n}\nconst isStreamEventsHandler = (handler) => handler.name === \"event_stream_tracer\";\n/**\n* Class that extends the `BaseTracer` class from the\n* `langchain.callbacks.tracers.base` module. It represents a callback\n* handler that logs the execution of runs and emits `RunLog` instances to a\n* `RunLogStream`.\n*/\nvar EventStreamCallbackHandler = class extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseTracer {\n\tautoClose = true;\n\tincludeNames;\n\tincludeTypes;\n\tincludeTags;\n\texcludeNames;\n\texcludeTypes;\n\texcludeTags;\n\trunInfoMap = /* @__PURE__ */ new Map();\n\ttappedPromises = /* @__PURE__ */ new Map();\n\ttransformStream;\n\twriter;\n\treceiveStream;\n\treadableStreamClosed = false;\n\tname = \"event_stream_tracer\";\n\tlc_prefer_streaming = true;\n\tconstructor(fields) {\n\t\tsuper({\n\t\t\t_awaitHandler: true,\n\t\t\t...fields\n\t\t});\n\t\tthis.autoClose = fields?.autoClose ?? true;\n\t\tthis.includeNames = fields?.includeNames;\n\t\tthis.includeTypes = fields?.includeTypes;\n\t\tthis.includeTags = fields?.includeTags;\n\t\tthis.excludeNames = fields?.excludeNames;\n\t\tthis.excludeTypes = fields?.excludeTypes;\n\t\tthis.excludeTags = fields?.excludeTags;\n\t\tthis.transformStream = new TransformStream({ flush: () => {\n\t\t\tthis.readableStreamClosed = true;\n\t\t} });\n\t\tthis.writer = this.transformStream.writable.getWriter();\n\t\tthis.receiveStream = _utils_stream_js__WEBPACK_IMPORTED_MODULE_2__.IterableReadableStream.fromReadableStream(this.transformStream.readable);\n\t}\n\t[Symbol.asyncIterator]() {\n\t\treturn this.receiveStream;\n\t}\n\tasync persistRun(_run) {}\n\t_includeRun(run) {\n\t\tconst runTags = run.tags ?? [];\n\t\tlet include = this.includeNames === void 0 && this.includeTags === void 0 && this.includeTypes === void 0;\n\t\tif (this.includeNames !== void 0) include = include || this.includeNames.includes(run.name);\n\t\tif (this.includeTypes !== void 0) include = include || this.includeTypes.includes(run.runType);\n\t\tif (this.includeTags !== void 0) include = include || runTags.find((tag) => this.includeTags?.includes(tag)) !== void 0;\n\t\tif (this.excludeNames !== void 0) include = include && !this.excludeNames.includes(run.name);\n\t\tif (this.excludeTypes !== void 0) include = include && !this.excludeTypes.includes(run.runType);\n\t\tif (this.excludeTags !== void 0) include = include && runTags.every((tag) => !this.excludeTags?.includes(tag));\n\t\treturn include;\n\t}\n\tasync *tapOutputIterable(runId, outputStream) {\n\t\tconst firstChunk = await outputStream.next();\n\t\tif (firstChunk.done) return;\n\t\tconst runInfo = this.runInfoMap.get(runId);\n\t\tif (runInfo === void 0) {\n\t\t\tyield firstChunk.value;\n\t\t\treturn;\n\t\t}\n\t\tfunction _formatOutputChunk(eventType, data) {\n\t\t\tif (eventType === \"llm\" && typeof data === \"string\") return new _outputs_js__WEBPACK_IMPORTED_MODULE_3__.GenerationChunk({ text: data });\n\t\t\treturn data;\n\t\t}\n\t\tlet tappedPromise = this.tappedPromises.get(runId);\n\t\tif (tappedPromise === void 0) {\n\t\t\tlet tappedPromiseResolver;\n\t\t\ttappedPromise = new Promise((resolve) => {\n\t\t\t\ttappedPromiseResolver = resolve;\n\t\t\t});\n\t\t\tthis.tappedPromises.set(runId, tappedPromise);\n\t\t\ttry {\n\t\t\t\tconst event = {\n\t\t\t\t\tevent: `on_${runInfo.runType}_stream`,\n\t\t\t\t\trun_id: runId,\n\t\t\t\t\tname: runInfo.name,\n\t\t\t\t\ttags: runInfo.tags,\n\t\t\t\t\tmetadata: runInfo.metadata,\n\t\t\t\t\tdata: {}\n\t\t\t\t};\n\t\t\t\tawait this.send({\n\t\t\t\t\t...event,\n\t\t\t\t\tdata: { chunk: _formatOutputChunk(runInfo.runType, firstChunk.value) }\n\t\t\t\t}, runInfo);\n\t\t\t\tyield firstChunk.value;\n\t\t\t\tfor await (const chunk of outputStream) {\n\t\t\t\t\tif (runInfo.runType !== \"tool\" && runInfo.runType !== \"retriever\") await this.send({\n\t\t\t\t\t\t...event,\n\t\t\t\t\t\tdata: { chunk: _formatOutputChunk(runInfo.runType, chunk) }\n\t\t\t\t\t}, runInfo);\n\t\t\t\t\tyield chunk;\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\ttappedPromiseResolver?.();\n\t\t\t}\n\t\t} else {\n\t\t\tyield firstChunk.value;\n\t\t\tfor await (const chunk of outputStream) yield chunk;\n\t\t}\n\t}\n\tasync send(payload, run) {\n\t\tif (this.readableStreamClosed) return;\n\t\tif (this._includeRun(run)) await this.writer.write(payload);\n\t}\n\tasync sendEndEvent(payload, run) {\n\t\tconst tappedPromise = this.tappedPromises.get(payload.run_id);\n\t\tif (tappedPromise !== void 0) tappedPromise.then(() => {\n\t\t\tthis.send(payload, run);\n\t\t});\n\t\telse await this.send(payload, run);\n\t}\n\tasync onLLMStart(run) {\n\t\tconst runName = assignName(run);\n\t\tconst runType = run.inputs.messages !== void 0 ? \"chat_model\" : \"llm\";\n\t\tconst runInfo = {\n\t\t\ttags: run.tags ?? [],\n\t\t\tmetadata: run.extra?.metadata ?? {},\n\t\t\tname: runName,\n\t\t\trunType,\n\t\t\tinputs: run.inputs\n\t\t};\n\t\tthis.runInfoMap.set(run.id, runInfo);\n\t\tconst eventName = `on_${runType}_start`;\n\t\tawait this.send({\n\t\t\tevent: eventName,\n\t\t\tdata: { input: run.inputs },\n\t\t\tname: runName,\n\t\t\ttags: run.tags ?? [],\n\t\t\trun_id: run.id,\n\t\t\tmetadata: run.extra?.metadata ?? {}\n\t\t}, runInfo);\n\t}\n\tasync onLLMNewToken(run, token, kwargs) {\n\t\tconst runInfo = this.runInfoMap.get(run.id);\n\t\tlet chunk;\n\t\tlet eventName;\n\t\tif (runInfo === void 0) throw new Error(`onLLMNewToken: Run ID ${run.id} not found in run map.`);\n\t\tif (this.runInfoMap.size === 1) return;\n\t\tif (runInfo.runType === \"chat_model\") {\n\t\t\teventName = \"on_chat_model_stream\";\n\t\t\tif (kwargs?.chunk === void 0) chunk = new _messages_ai_js__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk({\n\t\t\t\tcontent: token,\n\t\t\t\tid: `run-${run.id}`\n\t\t\t});\n\t\t\telse chunk = kwargs.chunk.message;\n\t\t} else if (runInfo.runType === \"llm\") {\n\t\t\teventName = \"on_llm_stream\";\n\t\t\tif (kwargs?.chunk === void 0) chunk = new _outputs_js__WEBPACK_IMPORTED_MODULE_3__.GenerationChunk({ text: token });\n\t\t\telse chunk = kwargs.chunk;\n\t\t} else throw new Error(`Unexpected run type ${runInfo.runType}`);\n\t\tawait this.send({\n\t\t\tevent: eventName,\n\t\t\tdata: { chunk },\n\t\t\trun_id: run.id,\n\t\t\tname: runInfo.name,\n\t\t\ttags: runInfo.tags,\n\t\t\tmetadata: runInfo.metadata\n\t\t}, runInfo);\n\t}\n\tasync onLLMEnd(run) {\n\t\tconst runInfo = this.runInfoMap.get(run.id);\n\t\tthis.runInfoMap.delete(run.id);\n\t\tlet eventName;\n\t\tif (runInfo === void 0) throw new Error(`onLLMEnd: Run ID ${run.id} not found in run map.`);\n\t\tconst generations = run.outputs?.generations;\n\t\tlet output;\n\t\tif (runInfo.runType === \"chat_model\") {\n\t\t\tfor (const generation of generations ?? []) {\n\t\t\t\tif (output !== void 0) break;\n\t\t\t\toutput = generation[0]?.message;\n\t\t\t}\n\t\t\teventName = \"on_chat_model_end\";\n\t\t} else if (runInfo.runType === \"llm\") {\n\t\t\toutput = {\n\t\t\t\tgenerations: generations?.map((generation) => {\n\t\t\t\t\treturn generation.map((chunk) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttext: chunk.text,\n\t\t\t\t\t\t\tgenerationInfo: chunk.generationInfo\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t}),\n\t\t\t\tllmOutput: run.outputs?.llmOutput ?? {}\n\t\t\t};\n\t\t\teventName = \"on_llm_end\";\n\t\t} else throw new Error(`onLLMEnd: Unexpected run type: ${runInfo.runType}`);\n\t\tawait this.sendEndEvent({\n\t\t\tevent: eventName,\n\t\t\tdata: {\n\t\t\t\toutput,\n\t\t\t\tinput: runInfo.inputs\n\t\t\t},\n\t\t\trun_id: run.id,\n\t\t\tname: runInfo.name,\n\t\t\ttags: runInfo.tags,\n\t\t\tmetadata: runInfo.metadata\n\t\t}, runInfo);\n\t}\n\tasync onChainStart(run) {\n\t\tconst runName = assignName(run);\n\t\tconst runType = run.run_type ?? \"chain\";\n\t\tconst runInfo = {\n\t\t\ttags: run.tags ?? [],\n\t\t\tmetadata: run.extra?.metadata ?? {},\n\t\t\tname: runName,\n\t\t\trunType: run.run_type\n\t\t};\n\t\tlet eventData = {};\n\t\tif (run.inputs.input === \"\" && Object.keys(run.inputs).length === 1) {\n\t\t\teventData = {};\n\t\t\trunInfo.inputs = {};\n\t\t} else if (run.inputs.input !== void 0) {\n\t\t\teventData.input = run.inputs.input;\n\t\t\trunInfo.inputs = run.inputs.input;\n\t\t} else {\n\t\t\teventData.input = run.inputs;\n\t\t\trunInfo.inputs = run.inputs;\n\t\t}\n\t\tthis.runInfoMap.set(run.id, runInfo);\n\t\tawait this.send({\n\t\t\tevent: `on_${runType}_start`,\n\t\t\tdata: eventData,\n\t\t\tname: runName,\n\t\t\ttags: run.tags ?? [],\n\t\t\trun_id: run.id,\n\t\t\tmetadata: run.extra?.metadata ?? {}\n\t\t}, runInfo);\n\t}\n\tasync onChainEnd(run) {\n\t\tconst runInfo = this.runInfoMap.get(run.id);\n\t\tthis.runInfoMap.delete(run.id);\n\t\tif (runInfo === void 0) throw new Error(`onChainEnd: Run ID ${run.id} not found in run map.`);\n\t\tconst eventName = `on_${run.run_type}_end`;\n\t\tconst inputs = run.inputs ?? runInfo.inputs ?? {};\n\t\tconst outputs = run.outputs?.output ?? run.outputs;\n\t\tconst data = {\n\t\t\toutput: outputs,\n\t\t\tinput: inputs\n\t\t};\n\t\tif (inputs.input && Object.keys(inputs).length === 1) {\n\t\t\tdata.input = inputs.input;\n\t\t\trunInfo.inputs = inputs.input;\n\t\t}\n\t\tawait this.sendEndEvent({\n\t\t\tevent: eventName,\n\t\t\tdata,\n\t\t\trun_id: run.id,\n\t\t\tname: runInfo.name,\n\t\t\ttags: runInfo.tags,\n\t\t\tmetadata: runInfo.metadata ?? {}\n\t\t}, runInfo);\n\t}\n\tasync onToolStart(run) {\n\t\tconst runName = assignName(run);\n\t\tconst runInfo = {\n\t\t\ttags: run.tags ?? [],\n\t\t\tmetadata: run.extra?.metadata ?? {},\n\t\t\tname: runName,\n\t\t\trunType: \"tool\",\n\t\t\tinputs: run.inputs ?? {}\n\t\t};\n\t\tthis.runInfoMap.set(run.id, runInfo);\n\t\tawait this.send({\n\t\t\tevent: \"on_tool_start\",\n\t\t\tdata: { input: run.inputs ?? {} },\n\t\t\tname: runName,\n\t\t\trun_id: run.id,\n\t\t\ttags: run.tags ?? [],\n\t\t\tmetadata: run.extra?.metadata ?? {}\n\t\t}, runInfo);\n\t}\n\tasync onToolEnd(run) {\n\t\tconst runInfo = this.runInfoMap.get(run.id);\n\t\tthis.runInfoMap.delete(run.id);\n\t\tif (runInfo === void 0) throw new Error(`onToolEnd: Run ID ${run.id} not found in run map.`);\n\t\tif (runInfo.inputs === void 0) throw new Error(`onToolEnd: Run ID ${run.id} is a tool call, and is expected to have traced inputs.`);\n\t\tconst output = run.outputs?.output === void 0 ? run.outputs : run.outputs.output;\n\t\tawait this.sendEndEvent({\n\t\t\tevent: \"on_tool_end\",\n\t\t\tdata: {\n\t\t\t\toutput,\n\t\t\t\tinput: runInfo.inputs\n\t\t\t},\n\t\t\trun_id: run.id,\n\t\t\tname: runInfo.name,\n\t\t\ttags: runInfo.tags,\n\t\t\tmetadata: runInfo.metadata\n\t\t}, runInfo);\n\t}\n\tasync onRetrieverStart(run) {\n\t\tconst runName = assignName(run);\n\t\tconst runType = \"retriever\";\n\t\tconst runInfo = {\n\t\t\ttags: run.tags ?? [],\n\t\t\tmetadata: run.extra?.metadata ?? {},\n\t\t\tname: runName,\n\t\t\trunType,\n\t\t\tinputs: { query: run.inputs.query }\n\t\t};\n\t\tthis.runInfoMap.set(run.id, runInfo);\n\t\tawait this.send({\n\t\t\tevent: \"on_retriever_start\",\n\t\t\tdata: { input: { query: run.inputs.query } },\n\t\t\tname: runName,\n\t\t\ttags: run.tags ?? [],\n\t\t\trun_id: run.id,\n\t\t\tmetadata: run.extra?.metadata ?? {}\n\t\t}, runInfo);\n\t}\n\tasync onRetrieverEnd(run) {\n\t\tconst runInfo = this.runInfoMap.get(run.id);\n\t\tthis.runInfoMap.delete(run.id);\n\t\tif (runInfo === void 0) throw new Error(`onRetrieverEnd: Run ID ${run.id} not found in run map.`);\n\t\tawait this.sendEndEvent({\n\t\t\tevent: \"on_retriever_end\",\n\t\t\tdata: {\n\t\t\t\toutput: run.outputs?.documents ?? run.outputs,\n\t\t\t\tinput: runInfo.inputs\n\t\t\t},\n\t\t\trun_id: run.id,\n\t\t\tname: runInfo.name,\n\t\t\ttags: runInfo.tags,\n\t\t\tmetadata: runInfo.metadata\n\t\t}, runInfo);\n\t}\n\tasync handleCustomEvent(eventName, data, runId) {\n\t\tconst runInfo = this.runInfoMap.get(runId);\n\t\tif (runInfo === void 0) throw new Error(`handleCustomEvent: Run ID ${runId} not found in run map.`);\n\t\tawait this.send({\n\t\t\tevent: \"on_custom_event\",\n\t\t\trun_id: runId,\n\t\t\tname: eventName,\n\t\t\ttags: runInfo.tags,\n\t\t\tmetadata: runInfo.metadata,\n\t\t\tdata\n\t\t}, runInfo);\n\t}\n\tasync finish() {\n\t\tconst pendingPromises = [...this.tappedPromises.values()];\n\t\tPromise.all(pendingPromises).finally(() => {\n\t\t\tthis.writer.close();\n\t\t});\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=event_stream.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9ldmVudF9zdHJlYW0uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQW1EO0FBQ1o7QUFDcUI7QUFDWjs7QUFFaEQ7QUFDQSxzQkFBc0Isa0JBQWtCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxnREFBVTtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQztBQUMvQztBQUNBLEtBQUs7QUFDTDtBQUNBLHVCQUF1QixvRUFBc0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRUFBbUUsd0RBQWUsR0FBRyxZQUFZO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixnQkFBZ0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2QsTUFBTTtBQUNOO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixRQUFRO0FBQ2xDO0FBQ0E7QUFDQSxXQUFXLG1CQUFtQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FLFFBQVE7QUFDM0U7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLDJEQUFjO0FBQzNEO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBLDZDQUE2Qyx3REFBZSxHQUFHLGFBQWE7QUFDNUU7QUFDQSxJQUFJLDRDQUE0QyxnQkFBZ0I7QUFDaEU7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBQThELFFBQVE7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsSUFBSSx1REFBdUQsZ0JBQWdCO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsUUFBUTtBQUN4RSwwQkFBMEIsYUFBYTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHlCQUF5QjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCxRQUFRO0FBQ3ZFLHNFQUFzRSxRQUFRO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUywyQkFBMkI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRUFBb0UsUUFBUTtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSxPQUFPO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUM2RDtBQUM3RCIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvZXZlbnRfc3RyZWFtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFJTWVzc2FnZUNodW5rIH0gZnJvbSBcIi4uL21lc3NhZ2VzL2FpLmpzXCI7XG5pbXBvcnQgeyBCYXNlVHJhY2VyIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgSXRlcmFibGVSZWFkYWJsZVN0cmVhbSB9IGZyb20gXCIuLi91dGlscy9zdHJlYW0uanNcIjtcbmltcG9ydCB7IEdlbmVyYXRpb25DaHVuayB9IGZyb20gXCIuLi9vdXRwdXRzLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdHJhY2Vycy9ldmVudF9zdHJlYW0udHNcbmZ1bmN0aW9uIGFzc2lnbk5hbWUoeyBuYW1lLCBzZXJpYWxpemVkIH0pIHtcblx0aWYgKG5hbWUgIT09IHZvaWQgMCkgcmV0dXJuIG5hbWU7XG5cdGlmIChzZXJpYWxpemVkPy5uYW1lICE9PSB2b2lkIDApIHJldHVybiBzZXJpYWxpemVkLm5hbWU7XG5cdGVsc2UgaWYgKHNlcmlhbGl6ZWQ/LmlkICE9PSB2b2lkIDAgJiYgQXJyYXkuaXNBcnJheShzZXJpYWxpemVkPy5pZCkpIHJldHVybiBzZXJpYWxpemVkLmlkW3NlcmlhbGl6ZWQuaWQubGVuZ3RoIC0gMV07XG5cdHJldHVybiBcIlVubmFtZWRcIjtcbn1cbmNvbnN0IGlzU3RyZWFtRXZlbnRzSGFuZGxlciA9IChoYW5kbGVyKSA9PiBoYW5kbGVyLm5hbWUgPT09IFwiZXZlbnRfc3RyZWFtX3RyYWNlclwiO1xuLyoqXG4qIENsYXNzIHRoYXQgZXh0ZW5kcyB0aGUgYEJhc2VUcmFjZXJgIGNsYXNzIGZyb20gdGhlXG4qIGBsYW5nY2hhaW4uY2FsbGJhY2tzLnRyYWNlcnMuYmFzZWAgbW9kdWxlLiBJdCByZXByZXNlbnRzIGEgY2FsbGJhY2tcbiogaGFuZGxlciB0aGF0IGxvZ3MgdGhlIGV4ZWN1dGlvbiBvZiBydW5zIGFuZCBlbWl0cyBgUnVuTG9nYCBpbnN0YW5jZXMgdG8gYVxuKiBgUnVuTG9nU3RyZWFtYC5cbiovXG52YXIgRXZlbnRTdHJlYW1DYWxsYmFja0hhbmRsZXIgPSBjbGFzcyBleHRlbmRzIEJhc2VUcmFjZXIge1xuXHRhdXRvQ2xvc2UgPSB0cnVlO1xuXHRpbmNsdWRlTmFtZXM7XG5cdGluY2x1ZGVUeXBlcztcblx0aW5jbHVkZVRhZ3M7XG5cdGV4Y2x1ZGVOYW1lcztcblx0ZXhjbHVkZVR5cGVzO1xuXHRleGNsdWRlVGFncztcblx0cnVuSW5mb01hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5cdHRhcHBlZFByb21pc2VzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcblx0dHJhbnNmb3JtU3RyZWFtO1xuXHR3cml0ZXI7XG5cdHJlY2VpdmVTdHJlYW07XG5cdHJlYWRhYmxlU3RyZWFtQ2xvc2VkID0gZmFsc2U7XG5cdG5hbWUgPSBcImV2ZW50X3N0cmVhbV90cmFjZXJcIjtcblx0bGNfcHJlZmVyX3N0cmVhbWluZyA9IHRydWU7XG5cdGNvbnN0cnVjdG9yKGZpZWxkcykge1xuXHRcdHN1cGVyKHtcblx0XHRcdF9hd2FpdEhhbmRsZXI6IHRydWUsXG5cdFx0XHQuLi5maWVsZHNcblx0XHR9KTtcblx0XHR0aGlzLmF1dG9DbG9zZSA9IGZpZWxkcz8uYXV0b0Nsb3NlID8/IHRydWU7XG5cdFx0dGhpcy5pbmNsdWRlTmFtZXMgPSBmaWVsZHM/LmluY2x1ZGVOYW1lcztcblx0XHR0aGlzLmluY2x1ZGVUeXBlcyA9IGZpZWxkcz8uaW5jbHVkZVR5cGVzO1xuXHRcdHRoaXMuaW5jbHVkZVRhZ3MgPSBmaWVsZHM/LmluY2x1ZGVUYWdzO1xuXHRcdHRoaXMuZXhjbHVkZU5hbWVzID0gZmllbGRzPy5leGNsdWRlTmFtZXM7XG5cdFx0dGhpcy5leGNsdWRlVHlwZXMgPSBmaWVsZHM/LmV4Y2x1ZGVUeXBlcztcblx0XHR0aGlzLmV4Y2x1ZGVUYWdzID0gZmllbGRzPy5leGNsdWRlVGFncztcblx0XHR0aGlzLnRyYW5zZm9ybVN0cmVhbSA9IG5ldyBUcmFuc2Zvcm1TdHJlYW0oeyBmbHVzaDogKCkgPT4ge1xuXHRcdFx0dGhpcy5yZWFkYWJsZVN0cmVhbUNsb3NlZCA9IHRydWU7XG5cdFx0fSB9KTtcblx0XHR0aGlzLndyaXRlciA9IHRoaXMudHJhbnNmb3JtU3RyZWFtLndyaXRhYmxlLmdldFdyaXRlcigpO1xuXHRcdHRoaXMucmVjZWl2ZVN0cmVhbSA9IEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0uZnJvbVJlYWRhYmxlU3RyZWFtKHRoaXMudHJhbnNmb3JtU3RyZWFtLnJlYWRhYmxlKTtcblx0fVxuXHRbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuXHRcdHJldHVybiB0aGlzLnJlY2VpdmVTdHJlYW07XG5cdH1cblx0YXN5bmMgcGVyc2lzdFJ1bihfcnVuKSB7fVxuXHRfaW5jbHVkZVJ1bihydW4pIHtcblx0XHRjb25zdCBydW5UYWdzID0gcnVuLnRhZ3MgPz8gW107XG5cdFx0bGV0IGluY2x1ZGUgPSB0aGlzLmluY2x1ZGVOYW1lcyA9PT0gdm9pZCAwICYmIHRoaXMuaW5jbHVkZVRhZ3MgPT09IHZvaWQgMCAmJiB0aGlzLmluY2x1ZGVUeXBlcyA9PT0gdm9pZCAwO1xuXHRcdGlmICh0aGlzLmluY2x1ZGVOYW1lcyAhPT0gdm9pZCAwKSBpbmNsdWRlID0gaW5jbHVkZSB8fCB0aGlzLmluY2x1ZGVOYW1lcy5pbmNsdWRlcyhydW4ubmFtZSk7XG5cdFx0aWYgKHRoaXMuaW5jbHVkZVR5cGVzICE9PSB2b2lkIDApIGluY2x1ZGUgPSBpbmNsdWRlIHx8IHRoaXMuaW5jbHVkZVR5cGVzLmluY2x1ZGVzKHJ1bi5ydW5UeXBlKTtcblx0XHRpZiAodGhpcy5pbmNsdWRlVGFncyAhPT0gdm9pZCAwKSBpbmNsdWRlID0gaW5jbHVkZSB8fCBydW5UYWdzLmZpbmQoKHRhZykgPT4gdGhpcy5pbmNsdWRlVGFncz8uaW5jbHVkZXModGFnKSkgIT09IHZvaWQgMDtcblx0XHRpZiAodGhpcy5leGNsdWRlTmFtZXMgIT09IHZvaWQgMCkgaW5jbHVkZSA9IGluY2x1ZGUgJiYgIXRoaXMuZXhjbHVkZU5hbWVzLmluY2x1ZGVzKHJ1bi5uYW1lKTtcblx0XHRpZiAodGhpcy5leGNsdWRlVHlwZXMgIT09IHZvaWQgMCkgaW5jbHVkZSA9IGluY2x1ZGUgJiYgIXRoaXMuZXhjbHVkZVR5cGVzLmluY2x1ZGVzKHJ1bi5ydW5UeXBlKTtcblx0XHRpZiAodGhpcy5leGNsdWRlVGFncyAhPT0gdm9pZCAwKSBpbmNsdWRlID0gaW5jbHVkZSAmJiBydW5UYWdzLmV2ZXJ5KCh0YWcpID0+ICF0aGlzLmV4Y2x1ZGVUYWdzPy5pbmNsdWRlcyh0YWcpKTtcblx0XHRyZXR1cm4gaW5jbHVkZTtcblx0fVxuXHRhc3luYyAqdGFwT3V0cHV0SXRlcmFibGUocnVuSWQsIG91dHB1dFN0cmVhbSkge1xuXHRcdGNvbnN0IGZpcnN0Q2h1bmsgPSBhd2FpdCBvdXRwdXRTdHJlYW0ubmV4dCgpO1xuXHRcdGlmIChmaXJzdENodW5rLmRvbmUpIHJldHVybjtcblx0XHRjb25zdCBydW5JbmZvID0gdGhpcy5ydW5JbmZvTWFwLmdldChydW5JZCk7XG5cdFx0aWYgKHJ1bkluZm8gPT09IHZvaWQgMCkge1xuXHRcdFx0eWllbGQgZmlyc3RDaHVuay52YWx1ZTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0ZnVuY3Rpb24gX2Zvcm1hdE91dHB1dENodW5rKGV2ZW50VHlwZSwgZGF0YSkge1xuXHRcdFx0aWYgKGV2ZW50VHlwZSA9PT0gXCJsbG1cIiAmJiB0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIG5ldyBHZW5lcmF0aW9uQ2h1bmsoeyB0ZXh0OiBkYXRhIH0pO1xuXHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0fVxuXHRcdGxldCB0YXBwZWRQcm9taXNlID0gdGhpcy50YXBwZWRQcm9taXNlcy5nZXQocnVuSWQpO1xuXHRcdGlmICh0YXBwZWRQcm9taXNlID09PSB2b2lkIDApIHtcblx0XHRcdGxldCB0YXBwZWRQcm9taXNlUmVzb2x2ZXI7XG5cdFx0XHR0YXBwZWRQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcblx0XHRcdFx0dGFwcGVkUHJvbWlzZVJlc29sdmVyID0gcmVzb2x2ZTtcblx0XHRcdH0pO1xuXHRcdFx0dGhpcy50YXBwZWRQcm9taXNlcy5zZXQocnVuSWQsIHRhcHBlZFByb21pc2UpO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3QgZXZlbnQgPSB7XG5cdFx0XHRcdFx0ZXZlbnQ6IGBvbl8ke3J1bkluZm8ucnVuVHlwZX1fc3RyZWFtYCxcblx0XHRcdFx0XHRydW5faWQ6IHJ1bklkLFxuXHRcdFx0XHRcdG5hbWU6IHJ1bkluZm8ubmFtZSxcblx0XHRcdFx0XHR0YWdzOiBydW5JbmZvLnRhZ3MsXG5cdFx0XHRcdFx0bWV0YWRhdGE6IHJ1bkluZm8ubWV0YWRhdGEsXG5cdFx0XHRcdFx0ZGF0YToge31cblx0XHRcdFx0fTtcblx0XHRcdFx0YXdhaXQgdGhpcy5zZW5kKHtcblx0XHRcdFx0XHQuLi5ldmVudCxcblx0XHRcdFx0XHRkYXRhOiB7IGNodW5rOiBfZm9ybWF0T3V0cHV0Q2h1bmsocnVuSW5mby5ydW5UeXBlLCBmaXJzdENodW5rLnZhbHVlKSB9XG5cdFx0XHRcdH0sIHJ1bkluZm8pO1xuXHRcdFx0XHR5aWVsZCBmaXJzdENodW5rLnZhbHVlO1xuXHRcdFx0XHRmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIG91dHB1dFN0cmVhbSkge1xuXHRcdFx0XHRcdGlmIChydW5JbmZvLnJ1blR5cGUgIT09IFwidG9vbFwiICYmIHJ1bkluZm8ucnVuVHlwZSAhPT0gXCJyZXRyaWV2ZXJcIikgYXdhaXQgdGhpcy5zZW5kKHtcblx0XHRcdFx0XHRcdC4uLmV2ZW50LFxuXHRcdFx0XHRcdFx0ZGF0YTogeyBjaHVuazogX2Zvcm1hdE91dHB1dENodW5rKHJ1bkluZm8ucnVuVHlwZSwgY2h1bmspIH1cblx0XHRcdFx0XHR9LCBydW5JbmZvKTtcblx0XHRcdFx0XHR5aWVsZCBjaHVuaztcblx0XHRcdFx0fVxuXHRcdFx0fSBmaW5hbGx5IHtcblx0XHRcdFx0dGFwcGVkUHJvbWlzZVJlc29sdmVyPy4oKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0eWllbGQgZmlyc3RDaHVuay52YWx1ZTtcblx0XHRcdGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygb3V0cHV0U3RyZWFtKSB5aWVsZCBjaHVuaztcblx0XHR9XG5cdH1cblx0YXN5bmMgc2VuZChwYXlsb2FkLCBydW4pIHtcblx0XHRpZiAodGhpcy5yZWFkYWJsZVN0cmVhbUNsb3NlZCkgcmV0dXJuO1xuXHRcdGlmICh0aGlzLl9pbmNsdWRlUnVuKHJ1bikpIGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKHBheWxvYWQpO1xuXHR9XG5cdGFzeW5jIHNlbmRFbmRFdmVudChwYXlsb2FkLCBydW4pIHtcblx0XHRjb25zdCB0YXBwZWRQcm9taXNlID0gdGhpcy50YXBwZWRQcm9taXNlcy5nZXQocGF5bG9hZC5ydW5faWQpO1xuXHRcdGlmICh0YXBwZWRQcm9taXNlICE9PSB2b2lkIDApIHRhcHBlZFByb21pc2UudGhlbigoKSA9PiB7XG5cdFx0XHR0aGlzLnNlbmQocGF5bG9hZCwgcnVuKTtcblx0XHR9KTtcblx0XHRlbHNlIGF3YWl0IHRoaXMuc2VuZChwYXlsb2FkLCBydW4pO1xuXHR9XG5cdGFzeW5jIG9uTExNU3RhcnQocnVuKSB7XG5cdFx0Y29uc3QgcnVuTmFtZSA9IGFzc2lnbk5hbWUocnVuKTtcblx0XHRjb25zdCBydW5UeXBlID0gcnVuLmlucHV0cy5tZXNzYWdlcyAhPT0gdm9pZCAwID8gXCJjaGF0X21vZGVsXCIgOiBcImxsbVwiO1xuXHRcdGNvbnN0IHJ1bkluZm8gPSB7XG5cdFx0XHR0YWdzOiBydW4udGFncyA/PyBbXSxcblx0XHRcdG1ldGFkYXRhOiBydW4uZXh0cmE/Lm1ldGFkYXRhID8/IHt9LFxuXHRcdFx0bmFtZTogcnVuTmFtZSxcblx0XHRcdHJ1blR5cGUsXG5cdFx0XHRpbnB1dHM6IHJ1bi5pbnB1dHNcblx0XHR9O1xuXHRcdHRoaXMucnVuSW5mb01hcC5zZXQocnVuLmlkLCBydW5JbmZvKTtcblx0XHRjb25zdCBldmVudE5hbWUgPSBgb25fJHtydW5UeXBlfV9zdGFydGA7XG5cdFx0YXdhaXQgdGhpcy5zZW5kKHtcblx0XHRcdGV2ZW50OiBldmVudE5hbWUsXG5cdFx0XHRkYXRhOiB7IGlucHV0OiBydW4uaW5wdXRzIH0sXG5cdFx0XHRuYW1lOiBydW5OYW1lLFxuXHRcdFx0dGFnczogcnVuLnRhZ3MgPz8gW10sXG5cdFx0XHRydW5faWQ6IHJ1bi5pZCxcblx0XHRcdG1ldGFkYXRhOiBydW4uZXh0cmE/Lm1ldGFkYXRhID8/IHt9XG5cdFx0fSwgcnVuSW5mbyk7XG5cdH1cblx0YXN5bmMgb25MTE1OZXdUb2tlbihydW4sIHRva2VuLCBrd2FyZ3MpIHtcblx0XHRjb25zdCBydW5JbmZvID0gdGhpcy5ydW5JbmZvTWFwLmdldChydW4uaWQpO1xuXHRcdGxldCBjaHVuaztcblx0XHRsZXQgZXZlbnROYW1lO1xuXHRcdGlmIChydW5JbmZvID09PSB2b2lkIDApIHRocm93IG5ldyBFcnJvcihgb25MTE1OZXdUb2tlbjogUnVuIElEICR7cnVuLmlkfSBub3QgZm91bmQgaW4gcnVuIG1hcC5gKTtcblx0XHRpZiAodGhpcy5ydW5JbmZvTWFwLnNpemUgPT09IDEpIHJldHVybjtcblx0XHRpZiAocnVuSW5mby5ydW5UeXBlID09PSBcImNoYXRfbW9kZWxcIikge1xuXHRcdFx0ZXZlbnROYW1lID0gXCJvbl9jaGF0X21vZGVsX3N0cmVhbVwiO1xuXHRcdFx0aWYgKGt3YXJncz8uY2h1bmsgPT09IHZvaWQgMCkgY2h1bmsgPSBuZXcgQUlNZXNzYWdlQ2h1bmsoe1xuXHRcdFx0XHRjb250ZW50OiB0b2tlbixcblx0XHRcdFx0aWQ6IGBydW4tJHtydW4uaWR9YFxuXHRcdFx0fSk7XG5cdFx0XHRlbHNlIGNodW5rID0ga3dhcmdzLmNodW5rLm1lc3NhZ2U7XG5cdFx0fSBlbHNlIGlmIChydW5JbmZvLnJ1blR5cGUgPT09IFwibGxtXCIpIHtcblx0XHRcdGV2ZW50TmFtZSA9IFwib25fbGxtX3N0cmVhbVwiO1xuXHRcdFx0aWYgKGt3YXJncz8uY2h1bmsgPT09IHZvaWQgMCkgY2h1bmsgPSBuZXcgR2VuZXJhdGlvbkNodW5rKHsgdGV4dDogdG9rZW4gfSk7XG5cdFx0XHRlbHNlIGNodW5rID0ga3dhcmdzLmNodW5rO1xuXHRcdH0gZWxzZSB0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgcnVuIHR5cGUgJHtydW5JbmZvLnJ1blR5cGV9YCk7XG5cdFx0YXdhaXQgdGhpcy5zZW5kKHtcblx0XHRcdGV2ZW50OiBldmVudE5hbWUsXG5cdFx0XHRkYXRhOiB7IGNodW5rIH0sXG5cdFx0XHRydW5faWQ6IHJ1bi5pZCxcblx0XHRcdG5hbWU6IHJ1bkluZm8ubmFtZSxcblx0XHRcdHRhZ3M6IHJ1bkluZm8udGFncyxcblx0XHRcdG1ldGFkYXRhOiBydW5JbmZvLm1ldGFkYXRhXG5cdFx0fSwgcnVuSW5mbyk7XG5cdH1cblx0YXN5bmMgb25MTE1FbmQocnVuKSB7XG5cdFx0Y29uc3QgcnVuSW5mbyA9IHRoaXMucnVuSW5mb01hcC5nZXQocnVuLmlkKTtcblx0XHR0aGlzLnJ1bkluZm9NYXAuZGVsZXRlKHJ1bi5pZCk7XG5cdFx0bGV0IGV2ZW50TmFtZTtcblx0XHRpZiAocnVuSW5mbyA9PT0gdm9pZCAwKSB0aHJvdyBuZXcgRXJyb3IoYG9uTExNRW5kOiBSdW4gSUQgJHtydW4uaWR9IG5vdCBmb3VuZCBpbiBydW4gbWFwLmApO1xuXHRcdGNvbnN0IGdlbmVyYXRpb25zID0gcnVuLm91dHB1dHM/LmdlbmVyYXRpb25zO1xuXHRcdGxldCBvdXRwdXQ7XG5cdFx0aWYgKHJ1bkluZm8ucnVuVHlwZSA9PT0gXCJjaGF0X21vZGVsXCIpIHtcblx0XHRcdGZvciAoY29uc3QgZ2VuZXJhdGlvbiBvZiBnZW5lcmF0aW9ucyA/PyBbXSkge1xuXHRcdFx0XHRpZiAob3V0cHV0ICE9PSB2b2lkIDApIGJyZWFrO1xuXHRcdFx0XHRvdXRwdXQgPSBnZW5lcmF0aW9uWzBdPy5tZXNzYWdlO1xuXHRcdFx0fVxuXHRcdFx0ZXZlbnROYW1lID0gXCJvbl9jaGF0X21vZGVsX2VuZFwiO1xuXHRcdH0gZWxzZSBpZiAocnVuSW5mby5ydW5UeXBlID09PSBcImxsbVwiKSB7XG5cdFx0XHRvdXRwdXQgPSB7XG5cdFx0XHRcdGdlbmVyYXRpb25zOiBnZW5lcmF0aW9ucz8ubWFwKChnZW5lcmF0aW9uKSA9PiB7XG5cdFx0XHRcdFx0cmV0dXJuIGdlbmVyYXRpb24ubWFwKChjaHVuaykgPT4ge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0dGV4dDogY2h1bmsudGV4dCxcblx0XHRcdFx0XHRcdFx0Z2VuZXJhdGlvbkluZm86IGNodW5rLmdlbmVyYXRpb25JbmZvXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KSxcblx0XHRcdFx0bGxtT3V0cHV0OiBydW4ub3V0cHV0cz8ubGxtT3V0cHV0ID8/IHt9XG5cdFx0XHR9O1xuXHRcdFx0ZXZlbnROYW1lID0gXCJvbl9sbG1fZW5kXCI7XG5cdFx0fSBlbHNlIHRocm93IG5ldyBFcnJvcihgb25MTE1FbmQ6IFVuZXhwZWN0ZWQgcnVuIHR5cGU6ICR7cnVuSW5mby5ydW5UeXBlfWApO1xuXHRcdGF3YWl0IHRoaXMuc2VuZEVuZEV2ZW50KHtcblx0XHRcdGV2ZW50OiBldmVudE5hbWUsXG5cdFx0XHRkYXRhOiB7XG5cdFx0XHRcdG91dHB1dCxcblx0XHRcdFx0aW5wdXQ6IHJ1bkluZm8uaW5wdXRzXG5cdFx0XHR9LFxuXHRcdFx0cnVuX2lkOiBydW4uaWQsXG5cdFx0XHRuYW1lOiBydW5JbmZvLm5hbWUsXG5cdFx0XHR0YWdzOiBydW5JbmZvLnRhZ3MsXG5cdFx0XHRtZXRhZGF0YTogcnVuSW5mby5tZXRhZGF0YVxuXHRcdH0sIHJ1bkluZm8pO1xuXHR9XG5cdGFzeW5jIG9uQ2hhaW5TdGFydChydW4pIHtcblx0XHRjb25zdCBydW5OYW1lID0gYXNzaWduTmFtZShydW4pO1xuXHRcdGNvbnN0IHJ1blR5cGUgPSBydW4ucnVuX3R5cGUgPz8gXCJjaGFpblwiO1xuXHRcdGNvbnN0IHJ1bkluZm8gPSB7XG5cdFx0XHR0YWdzOiBydW4udGFncyA/PyBbXSxcblx0XHRcdG1ldGFkYXRhOiBydW4uZXh0cmE/Lm1ldGFkYXRhID8/IHt9LFxuXHRcdFx0bmFtZTogcnVuTmFtZSxcblx0XHRcdHJ1blR5cGU6IHJ1bi5ydW5fdHlwZVxuXHRcdH07XG5cdFx0bGV0IGV2ZW50RGF0YSA9IHt9O1xuXHRcdGlmIChydW4uaW5wdXRzLmlucHV0ID09PSBcIlwiICYmIE9iamVjdC5rZXlzKHJ1bi5pbnB1dHMpLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0ZXZlbnREYXRhID0ge307XG5cdFx0XHRydW5JbmZvLmlucHV0cyA9IHt9O1xuXHRcdH0gZWxzZSBpZiAocnVuLmlucHV0cy5pbnB1dCAhPT0gdm9pZCAwKSB7XG5cdFx0XHRldmVudERhdGEuaW5wdXQgPSBydW4uaW5wdXRzLmlucHV0O1xuXHRcdFx0cnVuSW5mby5pbnB1dHMgPSBydW4uaW5wdXRzLmlucHV0O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRldmVudERhdGEuaW5wdXQgPSBydW4uaW5wdXRzO1xuXHRcdFx0cnVuSW5mby5pbnB1dHMgPSBydW4uaW5wdXRzO1xuXHRcdH1cblx0XHR0aGlzLnJ1bkluZm9NYXAuc2V0KHJ1bi5pZCwgcnVuSW5mbyk7XG5cdFx0YXdhaXQgdGhpcy5zZW5kKHtcblx0XHRcdGV2ZW50OiBgb25fJHtydW5UeXBlfV9zdGFydGAsXG5cdFx0XHRkYXRhOiBldmVudERhdGEsXG5cdFx0XHRuYW1lOiBydW5OYW1lLFxuXHRcdFx0dGFnczogcnVuLnRhZ3MgPz8gW10sXG5cdFx0XHRydW5faWQ6IHJ1bi5pZCxcblx0XHRcdG1ldGFkYXRhOiBydW4uZXh0cmE/Lm1ldGFkYXRhID8/IHt9XG5cdFx0fSwgcnVuSW5mbyk7XG5cdH1cblx0YXN5bmMgb25DaGFpbkVuZChydW4pIHtcblx0XHRjb25zdCBydW5JbmZvID0gdGhpcy5ydW5JbmZvTWFwLmdldChydW4uaWQpO1xuXHRcdHRoaXMucnVuSW5mb01hcC5kZWxldGUocnVuLmlkKTtcblx0XHRpZiAocnVuSW5mbyA9PT0gdm9pZCAwKSB0aHJvdyBuZXcgRXJyb3IoYG9uQ2hhaW5FbmQ6IFJ1biBJRCAke3J1bi5pZH0gbm90IGZvdW5kIGluIHJ1biBtYXAuYCk7XG5cdFx0Y29uc3QgZXZlbnROYW1lID0gYG9uXyR7cnVuLnJ1bl90eXBlfV9lbmRgO1xuXHRcdGNvbnN0IGlucHV0cyA9IHJ1bi5pbnB1dHMgPz8gcnVuSW5mby5pbnB1dHMgPz8ge307XG5cdFx0Y29uc3Qgb3V0cHV0cyA9IHJ1bi5vdXRwdXRzPy5vdXRwdXQgPz8gcnVuLm91dHB1dHM7XG5cdFx0Y29uc3QgZGF0YSA9IHtcblx0XHRcdG91dHB1dDogb3V0cHV0cyxcblx0XHRcdGlucHV0OiBpbnB1dHNcblx0XHR9O1xuXHRcdGlmIChpbnB1dHMuaW5wdXQgJiYgT2JqZWN0LmtleXMoaW5wdXRzKS5sZW5ndGggPT09IDEpIHtcblx0XHRcdGRhdGEuaW5wdXQgPSBpbnB1dHMuaW5wdXQ7XG5cdFx0XHRydW5JbmZvLmlucHV0cyA9IGlucHV0cy5pbnB1dDtcblx0XHR9XG5cdFx0YXdhaXQgdGhpcy5zZW5kRW5kRXZlbnQoe1xuXHRcdFx0ZXZlbnQ6IGV2ZW50TmFtZSxcblx0XHRcdGRhdGEsXG5cdFx0XHRydW5faWQ6IHJ1bi5pZCxcblx0XHRcdG5hbWU6IHJ1bkluZm8ubmFtZSxcblx0XHRcdHRhZ3M6IHJ1bkluZm8udGFncyxcblx0XHRcdG1ldGFkYXRhOiBydW5JbmZvLm1ldGFkYXRhID8/IHt9XG5cdFx0fSwgcnVuSW5mbyk7XG5cdH1cblx0YXN5bmMgb25Ub29sU3RhcnQocnVuKSB7XG5cdFx0Y29uc3QgcnVuTmFtZSA9IGFzc2lnbk5hbWUocnVuKTtcblx0XHRjb25zdCBydW5JbmZvID0ge1xuXHRcdFx0dGFnczogcnVuLnRhZ3MgPz8gW10sXG5cdFx0XHRtZXRhZGF0YTogcnVuLmV4dHJhPy5tZXRhZGF0YSA/PyB7fSxcblx0XHRcdG5hbWU6IHJ1bk5hbWUsXG5cdFx0XHRydW5UeXBlOiBcInRvb2xcIixcblx0XHRcdGlucHV0czogcnVuLmlucHV0cyA/PyB7fVxuXHRcdH07XG5cdFx0dGhpcy5ydW5JbmZvTWFwLnNldChydW4uaWQsIHJ1bkluZm8pO1xuXHRcdGF3YWl0IHRoaXMuc2VuZCh7XG5cdFx0XHRldmVudDogXCJvbl90b29sX3N0YXJ0XCIsXG5cdFx0XHRkYXRhOiB7IGlucHV0OiBydW4uaW5wdXRzID8/IHt9IH0sXG5cdFx0XHRuYW1lOiBydW5OYW1lLFxuXHRcdFx0cnVuX2lkOiBydW4uaWQsXG5cdFx0XHR0YWdzOiBydW4udGFncyA/PyBbXSxcblx0XHRcdG1ldGFkYXRhOiBydW4uZXh0cmE/Lm1ldGFkYXRhID8/IHt9XG5cdFx0fSwgcnVuSW5mbyk7XG5cdH1cblx0YXN5bmMgb25Ub29sRW5kKHJ1bikge1xuXHRcdGNvbnN0IHJ1bkluZm8gPSB0aGlzLnJ1bkluZm9NYXAuZ2V0KHJ1bi5pZCk7XG5cdFx0dGhpcy5ydW5JbmZvTWFwLmRlbGV0ZShydW4uaWQpO1xuXHRcdGlmIChydW5JbmZvID09PSB2b2lkIDApIHRocm93IG5ldyBFcnJvcihgb25Ub29sRW5kOiBSdW4gSUQgJHtydW4uaWR9IG5vdCBmb3VuZCBpbiBydW4gbWFwLmApO1xuXHRcdGlmIChydW5JbmZvLmlucHV0cyA9PT0gdm9pZCAwKSB0aHJvdyBuZXcgRXJyb3IoYG9uVG9vbEVuZDogUnVuIElEICR7cnVuLmlkfSBpcyBhIHRvb2wgY2FsbCwgYW5kIGlzIGV4cGVjdGVkIHRvIGhhdmUgdHJhY2VkIGlucHV0cy5gKTtcblx0XHRjb25zdCBvdXRwdXQgPSBydW4ub3V0cHV0cz8ub3V0cHV0ID09PSB2b2lkIDAgPyBydW4ub3V0cHV0cyA6IHJ1bi5vdXRwdXRzLm91dHB1dDtcblx0XHRhd2FpdCB0aGlzLnNlbmRFbmRFdmVudCh7XG5cdFx0XHRldmVudDogXCJvbl90b29sX2VuZFwiLFxuXHRcdFx0ZGF0YToge1xuXHRcdFx0XHRvdXRwdXQsXG5cdFx0XHRcdGlucHV0OiBydW5JbmZvLmlucHV0c1xuXHRcdFx0fSxcblx0XHRcdHJ1bl9pZDogcnVuLmlkLFxuXHRcdFx0bmFtZTogcnVuSW5mby5uYW1lLFxuXHRcdFx0dGFnczogcnVuSW5mby50YWdzLFxuXHRcdFx0bWV0YWRhdGE6IHJ1bkluZm8ubWV0YWRhdGFcblx0XHR9LCBydW5JbmZvKTtcblx0fVxuXHRhc3luYyBvblJldHJpZXZlclN0YXJ0KHJ1bikge1xuXHRcdGNvbnN0IHJ1bk5hbWUgPSBhc3NpZ25OYW1lKHJ1bik7XG5cdFx0Y29uc3QgcnVuVHlwZSA9IFwicmV0cmlldmVyXCI7XG5cdFx0Y29uc3QgcnVuSW5mbyA9IHtcblx0XHRcdHRhZ3M6IHJ1bi50YWdzID8/IFtdLFxuXHRcdFx0bWV0YWRhdGE6IHJ1bi5leHRyYT8ubWV0YWRhdGEgPz8ge30sXG5cdFx0XHRuYW1lOiBydW5OYW1lLFxuXHRcdFx0cnVuVHlwZSxcblx0XHRcdGlucHV0czogeyBxdWVyeTogcnVuLmlucHV0cy5xdWVyeSB9XG5cdFx0fTtcblx0XHR0aGlzLnJ1bkluZm9NYXAuc2V0KHJ1bi5pZCwgcnVuSW5mbyk7XG5cdFx0YXdhaXQgdGhpcy5zZW5kKHtcblx0XHRcdGV2ZW50OiBcIm9uX3JldHJpZXZlcl9zdGFydFwiLFxuXHRcdFx0ZGF0YTogeyBpbnB1dDogeyBxdWVyeTogcnVuLmlucHV0cy5xdWVyeSB9IH0sXG5cdFx0XHRuYW1lOiBydW5OYW1lLFxuXHRcdFx0dGFnczogcnVuLnRhZ3MgPz8gW10sXG5cdFx0XHRydW5faWQ6IHJ1bi5pZCxcblx0XHRcdG1ldGFkYXRhOiBydW4uZXh0cmE/Lm1ldGFkYXRhID8/IHt9XG5cdFx0fSwgcnVuSW5mbyk7XG5cdH1cblx0YXN5bmMgb25SZXRyaWV2ZXJFbmQocnVuKSB7XG5cdFx0Y29uc3QgcnVuSW5mbyA9IHRoaXMucnVuSW5mb01hcC5nZXQocnVuLmlkKTtcblx0XHR0aGlzLnJ1bkluZm9NYXAuZGVsZXRlKHJ1bi5pZCk7XG5cdFx0aWYgKHJ1bkluZm8gPT09IHZvaWQgMCkgdGhyb3cgbmV3IEVycm9yKGBvblJldHJpZXZlckVuZDogUnVuIElEICR7cnVuLmlkfSBub3QgZm91bmQgaW4gcnVuIG1hcC5gKTtcblx0XHRhd2FpdCB0aGlzLnNlbmRFbmRFdmVudCh7XG5cdFx0XHRldmVudDogXCJvbl9yZXRyaWV2ZXJfZW5kXCIsXG5cdFx0XHRkYXRhOiB7XG5cdFx0XHRcdG91dHB1dDogcnVuLm91dHB1dHM/LmRvY3VtZW50cyA/PyBydW4ub3V0cHV0cyxcblx0XHRcdFx0aW5wdXQ6IHJ1bkluZm8uaW5wdXRzXG5cdFx0XHR9LFxuXHRcdFx0cnVuX2lkOiBydW4uaWQsXG5cdFx0XHRuYW1lOiBydW5JbmZvLm5hbWUsXG5cdFx0XHR0YWdzOiBydW5JbmZvLnRhZ3MsXG5cdFx0XHRtZXRhZGF0YTogcnVuSW5mby5tZXRhZGF0YVxuXHRcdH0sIHJ1bkluZm8pO1xuXHR9XG5cdGFzeW5jIGhhbmRsZUN1c3RvbUV2ZW50KGV2ZW50TmFtZSwgZGF0YSwgcnVuSWQpIHtcblx0XHRjb25zdCBydW5JbmZvID0gdGhpcy5ydW5JbmZvTWFwLmdldChydW5JZCk7XG5cdFx0aWYgKHJ1bkluZm8gPT09IHZvaWQgMCkgdGhyb3cgbmV3IEVycm9yKGBoYW5kbGVDdXN0b21FdmVudDogUnVuIElEICR7cnVuSWR9IG5vdCBmb3VuZCBpbiBydW4gbWFwLmApO1xuXHRcdGF3YWl0IHRoaXMuc2VuZCh7XG5cdFx0XHRldmVudDogXCJvbl9jdXN0b21fZXZlbnRcIixcblx0XHRcdHJ1bl9pZDogcnVuSWQsXG5cdFx0XHRuYW1lOiBldmVudE5hbWUsXG5cdFx0XHR0YWdzOiBydW5JbmZvLnRhZ3MsXG5cdFx0XHRtZXRhZGF0YTogcnVuSW5mby5tZXRhZGF0YSxcblx0XHRcdGRhdGFcblx0XHR9LCBydW5JbmZvKTtcblx0fVxuXHRhc3luYyBmaW5pc2goKSB7XG5cdFx0Y29uc3QgcGVuZGluZ1Byb21pc2VzID0gWy4uLnRoaXMudGFwcGVkUHJvbWlzZXMudmFsdWVzKCldO1xuXHRcdFByb21pc2UuYWxsKHBlbmRpbmdQcm9taXNlcykuZmluYWxseSgoKSA9PiB7XG5cdFx0XHR0aGlzLndyaXRlci5jbG9zZSgpO1xuXHRcdH0pO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEV2ZW50U3RyZWFtQ2FsbGJhY2tIYW5kbGVyLCBpc1N0cmVhbUV2ZW50c0hhbmRsZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZW50X3N0cmVhbS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/tracers/event_stream.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/tracers/log_stream.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/log_stream.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogStreamCallbackHandler: () => (/* binding */ LogStreamCallbackHandler),\n/* harmony export */   RunLog: () => (/* binding */ RunLog),\n/* harmony export */   RunLogPatch: () => (/* binding */ RunLogPatch),\n/* harmony export */   isLogStreamHandler: () => (/* binding */ isLogStreamHandler),\n/* harmony export */   log_stream_exports: () => (/* binding */ log_stream_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _messages_ai_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../messages/ai.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _utils_fast_json_patch_src_core_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/fast-json-patch/src/core.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\");\n/* harmony import */ var _utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/fast-json-patch/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/tracers/base.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/stream.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/stream.js\");\n\n\n\n\n\n\n\n//#region src/tracers/log_stream.ts\nvar log_stream_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(log_stream_exports, {\n\tLogStreamCallbackHandler: () => LogStreamCallbackHandler,\n\tRunLog: () => RunLog,\n\tRunLogPatch: () => RunLogPatch,\n\tisLogStreamHandler: () => isLogStreamHandler\n});\n/**\n* List of jsonpatch JSONPatchOperations, which describe how to create the run state\n* from an empty dict. This is the minimal representation of the log, designed to\n* be serialized as JSON and sent over the wire to reconstruct the log on the other\n* side. Reconstruction of the state can be done with any jsonpatch-compliant library,\n* see https://jsonpatch.com for more information.\n*/\nvar RunLogPatch = class {\n\tops;\n\tconstructor(fields) {\n\t\tthis.ops = fields.ops ?? [];\n\t}\n\tconcat(other) {\n\t\tconst ops = this.ops.concat(other.ops);\n\t\tconst states = (0,_utils_fast_json_patch_src_core_js__WEBPACK_IMPORTED_MODULE_2__.applyPatch)({}, ops);\n\t\treturn new RunLog({\n\t\t\tops,\n\t\t\tstate: states[states.length - 1].newDocument\n\t\t});\n\t}\n};\nvar RunLog = class RunLog extends RunLogPatch {\n\tstate;\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.state = fields.state;\n\t}\n\tconcat(other) {\n\t\tconst ops = this.ops.concat(other.ops);\n\t\tconst states = (0,_utils_fast_json_patch_src_core_js__WEBPACK_IMPORTED_MODULE_2__.applyPatch)(this.state, other.ops);\n\t\treturn new RunLog({\n\t\t\tops,\n\t\t\tstate: states[states.length - 1].newDocument\n\t\t});\n\t}\n\tstatic fromRunLogPatch(patch) {\n\t\tconst states = (0,_utils_fast_json_patch_src_core_js__WEBPACK_IMPORTED_MODULE_2__.applyPatch)({}, patch.ops);\n\t\treturn new RunLog({\n\t\t\tops: patch.ops,\n\t\t\tstate: states[states.length - 1].newDocument\n\t\t});\n\t}\n};\nconst isLogStreamHandler = (handler) => handler.name === \"log_stream_tracer\";\n/**\n* Extract standardized inputs from a run.\n*\n* Standardizes the inputs based on the type of the runnable used.\n*\n* @param run - Run object\n* @param schemaFormat - The schema format to use.\n*\n* @returns Valid inputs are only dict. By conventions, inputs always represented\n* invocation using named arguments.\n* A null means that the input is not yet known!\n*/\nasync function _getStandardizedInputs(run, schemaFormat) {\n\tif (schemaFormat === \"original\") throw new Error(\"Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.\");\n\tconst { inputs } = run;\n\tif ([\n\t\t\"retriever\",\n\t\t\"llm\",\n\t\t\"prompt\"\n\t].includes(run.run_type)) return inputs;\n\tif (Object.keys(inputs).length === 1 && inputs?.input === \"\") return void 0;\n\treturn inputs.input;\n}\nasync function _getStandardizedOutputs(run, schemaFormat) {\n\tconst { outputs } = run;\n\tif (schemaFormat === \"original\") return outputs;\n\tif ([\n\t\t\"retriever\",\n\t\t\"llm\",\n\t\t\"prompt\"\n\t].includes(run.run_type)) return outputs;\n\tif (outputs !== void 0 && Object.keys(outputs).length === 1 && outputs?.output !== void 0) return outputs.output;\n\treturn outputs;\n}\nfunction isChatGenerationChunk(x) {\n\treturn x !== void 0 && x.message !== void 0;\n}\n/**\n* Class that extends the `BaseTracer` class from the\n* `langchain.callbacks.tracers.base` module. It represents a callback\n* handler that logs the execution of runs and emits `RunLog` instances to a\n* `RunLogStream`.\n*/\nvar LogStreamCallbackHandler = class extends _base_js__WEBPACK_IMPORTED_MODULE_4__.BaseTracer {\n\tautoClose = true;\n\tincludeNames;\n\tincludeTypes;\n\tincludeTags;\n\texcludeNames;\n\texcludeTypes;\n\texcludeTags;\n\t_schemaFormat = \"original\";\n\trootId;\n\tkeyMapByRunId = {};\n\tcounterMapByRunName = {};\n\ttransformStream;\n\twriter;\n\treceiveStream;\n\tname = \"log_stream_tracer\";\n\tlc_prefer_streaming = true;\n\tconstructor(fields) {\n\t\tsuper({\n\t\t\t_awaitHandler: true,\n\t\t\t...fields\n\t\t});\n\t\tthis.autoClose = fields?.autoClose ?? true;\n\t\tthis.includeNames = fields?.includeNames;\n\t\tthis.includeTypes = fields?.includeTypes;\n\t\tthis.includeTags = fields?.includeTags;\n\t\tthis.excludeNames = fields?.excludeNames;\n\t\tthis.excludeTypes = fields?.excludeTypes;\n\t\tthis.excludeTags = fields?.excludeTags;\n\t\tthis._schemaFormat = fields?._schemaFormat ?? this._schemaFormat;\n\t\tthis.transformStream = new TransformStream();\n\t\tthis.writer = this.transformStream.writable.getWriter();\n\t\tthis.receiveStream = _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.IterableReadableStream.fromReadableStream(this.transformStream.readable);\n\t}\n\t[Symbol.asyncIterator]() {\n\t\treturn this.receiveStream;\n\t}\n\tasync persistRun(_run) {}\n\t_includeRun(run) {\n\t\tif (run.id === this.rootId) return false;\n\t\tconst runTags = run.tags ?? [];\n\t\tlet include = this.includeNames === void 0 && this.includeTags === void 0 && this.includeTypes === void 0;\n\t\tif (this.includeNames !== void 0) include = include || this.includeNames.includes(run.name);\n\t\tif (this.includeTypes !== void 0) include = include || this.includeTypes.includes(run.run_type);\n\t\tif (this.includeTags !== void 0) include = include || runTags.find((tag) => this.includeTags?.includes(tag)) !== void 0;\n\t\tif (this.excludeNames !== void 0) include = include && !this.excludeNames.includes(run.name);\n\t\tif (this.excludeTypes !== void 0) include = include && !this.excludeTypes.includes(run.run_type);\n\t\tif (this.excludeTags !== void 0) include = include && runTags.every((tag) => !this.excludeTags?.includes(tag));\n\t\treturn include;\n\t}\n\tasync *tapOutputIterable(runId, output) {\n\t\tfor await (const chunk of output) {\n\t\t\tif (runId !== this.rootId) {\n\t\t\t\tconst key = this.keyMapByRunId[runId];\n\t\t\t\tif (key) await this.writer.write(new RunLogPatch({ ops: [{\n\t\t\t\t\top: \"add\",\n\t\t\t\t\tpath: `/logs/${key}/streamed_output/-`,\n\t\t\t\t\tvalue: chunk\n\t\t\t\t}] }));\n\t\t\t}\n\t\t\tyield chunk;\n\t\t}\n\t}\n\tasync onRunCreate(run) {\n\t\tif (this.rootId === void 0) {\n\t\t\tthis.rootId = run.id;\n\t\t\tawait this.writer.write(new RunLogPatch({ ops: [{\n\t\t\t\top: \"replace\",\n\t\t\t\tpath: \"\",\n\t\t\t\tvalue: {\n\t\t\t\t\tid: run.id,\n\t\t\t\t\tname: run.name,\n\t\t\t\t\ttype: run.run_type,\n\t\t\t\t\tstreamed_output: [],\n\t\t\t\t\tfinal_output: void 0,\n\t\t\t\t\tlogs: {}\n\t\t\t\t}\n\t\t\t}] }));\n\t\t}\n\t\tif (!this._includeRun(run)) return;\n\t\tif (this.counterMapByRunName[run.name] === void 0) this.counterMapByRunName[run.name] = 0;\n\t\tthis.counterMapByRunName[run.name] += 1;\n\t\tconst count = this.counterMapByRunName[run.name];\n\t\tthis.keyMapByRunId[run.id] = count === 1 ? run.name : `${run.name}:${count}`;\n\t\tconst logEntry = {\n\t\t\tid: run.id,\n\t\t\tname: run.name,\n\t\t\ttype: run.run_type,\n\t\t\ttags: run.tags ?? [],\n\t\t\tmetadata: run.extra?.metadata ?? {},\n\t\t\tstart_time: new Date(run.start_time).toISOString(),\n\t\t\tstreamed_output: [],\n\t\t\tstreamed_output_str: [],\n\t\t\tfinal_output: void 0,\n\t\t\tend_time: void 0\n\t\t};\n\t\tif (this._schemaFormat === \"streaming_events\") logEntry.inputs = await _getStandardizedInputs(run, this._schemaFormat);\n\t\tawait this.writer.write(new RunLogPatch({ ops: [{\n\t\t\top: \"add\",\n\t\t\tpath: `/logs/${this.keyMapByRunId[run.id]}`,\n\t\t\tvalue: logEntry\n\t\t}] }));\n\t}\n\tasync onRunUpdate(run) {\n\t\ttry {\n\t\t\tconst runName = this.keyMapByRunId[run.id];\n\t\t\tif (runName === void 0) return;\n\t\t\tconst ops = [];\n\t\t\tif (this._schemaFormat === \"streaming_events\") ops.push({\n\t\t\t\top: \"replace\",\n\t\t\t\tpath: `/logs/${runName}/inputs`,\n\t\t\t\tvalue: await _getStandardizedInputs(run, this._schemaFormat)\n\t\t\t});\n\t\t\tops.push({\n\t\t\t\top: \"add\",\n\t\t\t\tpath: `/logs/${runName}/final_output`,\n\t\t\t\tvalue: await _getStandardizedOutputs(run, this._schemaFormat)\n\t\t\t});\n\t\t\tif (run.end_time !== void 0) ops.push({\n\t\t\t\top: \"add\",\n\t\t\t\tpath: `/logs/${runName}/end_time`,\n\t\t\t\tvalue: new Date(run.end_time).toISOString()\n\t\t\t});\n\t\t\tconst patch = new RunLogPatch({ ops });\n\t\t\tawait this.writer.write(patch);\n\t\t} finally {\n\t\t\tif (run.id === this.rootId) {\n\t\t\t\tconst patch = new RunLogPatch({ ops: [{\n\t\t\t\t\top: \"replace\",\n\t\t\t\t\tpath: \"/final_output\",\n\t\t\t\t\tvalue: await _getStandardizedOutputs(run, this._schemaFormat)\n\t\t\t\t}] });\n\t\t\t\tawait this.writer.write(patch);\n\t\t\t\tif (this.autoClose) await this.writer.close();\n\t\t\t}\n\t\t}\n\t}\n\tasync onLLMNewToken(run, token, kwargs) {\n\t\tconst runName = this.keyMapByRunId[run.id];\n\t\tif (runName === void 0) return;\n\t\tconst isChatModel = run.inputs.messages !== void 0;\n\t\tlet streamedOutputValue;\n\t\tif (isChatModel) if (isChatGenerationChunk(kwargs?.chunk)) streamedOutputValue = kwargs?.chunk;\n\t\telse streamedOutputValue = new _messages_ai_js__WEBPACK_IMPORTED_MODULE_1__.AIMessageChunk({\n\t\t\tid: `run-${run.id}`,\n\t\t\tcontent: token\n\t\t});\n\t\telse streamedOutputValue = token;\n\t\tconst patch = new RunLogPatch({ ops: [{\n\t\t\top: \"add\",\n\t\t\tpath: `/logs/${runName}/streamed_output_str/-`,\n\t\t\tvalue: token\n\t\t}, {\n\t\t\top: \"add\",\n\t\t\tpath: `/logs/${runName}/streamed_output/-`,\n\t\t\tvalue: streamedOutputValue\n\t\t}] });\n\t\tawait this.writer.write(patch);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=log_stream.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9sb2dfc3RyZWFtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQTJEO0FBQ1I7QUFDZTtBQUN2QjtBQUNKO0FBQ3FCOztBQUU1RDtBQUNBO0FBQ0Esc0VBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDhFQUFVLEdBQUc7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDhFQUFVO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsaUJBQWlCLDhFQUFVLEdBQUc7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLFNBQVM7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxVQUFVO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxnREFBVTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG9FQUFzQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQ7QUFDdkQ7QUFDQSxvQkFBb0IsSUFBSTtBQUN4QjtBQUNBLEtBQUssR0FBRztBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxHQUFHO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxTQUFTLEdBQUcsTUFBTTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0Esa0JBQWtCLDJCQUEyQjtBQUM3QztBQUNBLEdBQUcsR0FBRztBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsUUFBUTtBQUMzQjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsbUJBQW1CLFFBQVE7QUFDM0I7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLG1CQUFtQixRQUFRO0FBQzNCO0FBQ0EsSUFBSTtBQUNKLG1DQUFtQyxLQUFLO0FBQ3hDO0FBQ0EsSUFBSTtBQUNKO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLEtBQUssR0FBRztBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsMkRBQWM7QUFDL0MsY0FBYyxPQUFPO0FBQ3JCO0FBQ0EsR0FBRztBQUNIO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0Esa0JBQWtCLFFBQVE7QUFDMUI7QUFDQSxHQUFHO0FBQ0g7QUFDQSxrQkFBa0IsUUFBUTtBQUMxQjtBQUNBLEdBQUcsR0FBRztBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNpRztBQUNqRyIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvbG9nX3N0cmVhbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4cG9ydCB9IGZyb20gXCIuLi9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyBBSU1lc3NhZ2VDaHVuayB9IGZyb20gXCIuLi9tZXNzYWdlcy9haS5qc1wiO1xuaW1wb3J0IHsgYXBwbHlQYXRjaCB9IGZyb20gXCIuLi91dGlscy9mYXN0LWpzb24tcGF0Y2gvc3JjL2NvcmUuanNcIjtcbmltcG9ydCBcIi4uL3V0aWxzL2Zhc3QtanNvbi1wYXRjaC9pbmRleC5qc1wiO1xuaW1wb3J0IHsgQmFzZVRyYWNlciB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0gfSBmcm9tIFwiLi4vdXRpbHMvc3RyZWFtLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdHJhY2Vycy9sb2dfc3RyZWFtLnRzXG52YXIgbG9nX3N0cmVhbV9leHBvcnRzID0ge307XG5fX2V4cG9ydChsb2dfc3RyZWFtX2V4cG9ydHMsIHtcblx0TG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyOiAoKSA9PiBMb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIsXG5cdFJ1bkxvZzogKCkgPT4gUnVuTG9nLFxuXHRSdW5Mb2dQYXRjaDogKCkgPT4gUnVuTG9nUGF0Y2gsXG5cdGlzTG9nU3RyZWFtSGFuZGxlcjogKCkgPT4gaXNMb2dTdHJlYW1IYW5kbGVyXG59KTtcbi8qKlxuKiBMaXN0IG9mIGpzb25wYXRjaCBKU09OUGF0Y2hPcGVyYXRpb25zLCB3aGljaCBkZXNjcmliZSBob3cgdG8gY3JlYXRlIHRoZSBydW4gc3RhdGVcbiogZnJvbSBhbiBlbXB0eSBkaWN0LiBUaGlzIGlzIHRoZSBtaW5pbWFsIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBsb2csIGRlc2lnbmVkIHRvXG4qIGJlIHNlcmlhbGl6ZWQgYXMgSlNPTiBhbmQgc2VudCBvdmVyIHRoZSB3aXJlIHRvIHJlY29uc3RydWN0IHRoZSBsb2cgb24gdGhlIG90aGVyXG4qIHNpZGUuIFJlY29uc3RydWN0aW9uIG9mIHRoZSBzdGF0ZSBjYW4gYmUgZG9uZSB3aXRoIGFueSBqc29ucGF0Y2gtY29tcGxpYW50IGxpYnJhcnksXG4qIHNlZSBodHRwczovL2pzb25wYXRjaC5jb20gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4qL1xudmFyIFJ1bkxvZ1BhdGNoID0gY2xhc3Mge1xuXHRvcHM7XG5cdGNvbnN0cnVjdG9yKGZpZWxkcykge1xuXHRcdHRoaXMub3BzID0gZmllbGRzLm9wcyA/PyBbXTtcblx0fVxuXHRjb25jYXQob3RoZXIpIHtcblx0XHRjb25zdCBvcHMgPSB0aGlzLm9wcy5jb25jYXQob3RoZXIub3BzKTtcblx0XHRjb25zdCBzdGF0ZXMgPSBhcHBseVBhdGNoKHt9LCBvcHMpO1xuXHRcdHJldHVybiBuZXcgUnVuTG9nKHtcblx0XHRcdG9wcyxcblx0XHRcdHN0YXRlOiBzdGF0ZXNbc3RhdGVzLmxlbmd0aCAtIDFdLm5ld0RvY3VtZW50XG5cdFx0fSk7XG5cdH1cbn07XG52YXIgUnVuTG9nID0gY2xhc3MgUnVuTG9nIGV4dGVuZHMgUnVuTG9nUGF0Y2gge1xuXHRzdGF0ZTtcblx0Y29uc3RydWN0b3IoZmllbGRzKSB7XG5cdFx0c3VwZXIoZmllbGRzKTtcblx0XHR0aGlzLnN0YXRlID0gZmllbGRzLnN0YXRlO1xuXHR9XG5cdGNvbmNhdChvdGhlcikge1xuXHRcdGNvbnN0IG9wcyA9IHRoaXMub3BzLmNvbmNhdChvdGhlci5vcHMpO1xuXHRcdGNvbnN0IHN0YXRlcyA9IGFwcGx5UGF0Y2godGhpcy5zdGF0ZSwgb3RoZXIub3BzKTtcblx0XHRyZXR1cm4gbmV3IFJ1bkxvZyh7XG5cdFx0XHRvcHMsXG5cdFx0XHRzdGF0ZTogc3RhdGVzW3N0YXRlcy5sZW5ndGggLSAxXS5uZXdEb2N1bWVudFxuXHRcdH0pO1xuXHR9XG5cdHN0YXRpYyBmcm9tUnVuTG9nUGF0Y2gocGF0Y2gpIHtcblx0XHRjb25zdCBzdGF0ZXMgPSBhcHBseVBhdGNoKHt9LCBwYXRjaC5vcHMpO1xuXHRcdHJldHVybiBuZXcgUnVuTG9nKHtcblx0XHRcdG9wczogcGF0Y2gub3BzLFxuXHRcdFx0c3RhdGU6IHN0YXRlc1tzdGF0ZXMubGVuZ3RoIC0gMV0ubmV3RG9jdW1lbnRcblx0XHR9KTtcblx0fVxufTtcbmNvbnN0IGlzTG9nU3RyZWFtSGFuZGxlciA9IChoYW5kbGVyKSA9PiBoYW5kbGVyLm5hbWUgPT09IFwibG9nX3N0cmVhbV90cmFjZXJcIjtcbi8qKlxuKiBFeHRyYWN0IHN0YW5kYXJkaXplZCBpbnB1dHMgZnJvbSBhIHJ1bi5cbipcbiogU3RhbmRhcmRpemVzIHRoZSBpbnB1dHMgYmFzZWQgb24gdGhlIHR5cGUgb2YgdGhlIHJ1bm5hYmxlIHVzZWQuXG4qXG4qIEBwYXJhbSBydW4gLSBSdW4gb2JqZWN0XG4qIEBwYXJhbSBzY2hlbWFGb3JtYXQgLSBUaGUgc2NoZW1hIGZvcm1hdCB0byB1c2UuXG4qXG4qIEByZXR1cm5zIFZhbGlkIGlucHV0cyBhcmUgb25seSBkaWN0LiBCeSBjb252ZW50aW9ucywgaW5wdXRzIGFsd2F5cyByZXByZXNlbnRlZFxuKiBpbnZvY2F0aW9uIHVzaW5nIG5hbWVkIGFyZ3VtZW50cy5cbiogQSBudWxsIG1lYW5zIHRoYXQgdGhlIGlucHV0IGlzIG5vdCB5ZXQga25vd24hXG4qL1xuYXN5bmMgZnVuY3Rpb24gX2dldFN0YW5kYXJkaXplZElucHV0cyhydW4sIHNjaGVtYUZvcm1hdCkge1xuXHRpZiAoc2NoZW1hRm9ybWF0ID09PSBcIm9yaWdpbmFsXCIpIHRocm93IG5ldyBFcnJvcihcIkRvIG5vdCBhc3NpZ24gaW5wdXRzIHdpdGggb3JpZ2luYWwgc2NoZW1hIGRyb3AgdGhlIGtleSBmb3Igbm93LiBXaGVuIGlucHV0cyBhcmUgYWRkZWQgdG8gc3RyZWFtTG9nIHRoZXkgc2hvdWxkIGJlIGFkZGVkIHdpdGggc3RhbmRhcmRpemVkIHNjaGVtYSBmb3Igc3RyZWFtaW5nIGV2ZW50cy5cIik7XG5cdGNvbnN0IHsgaW5wdXRzIH0gPSBydW47XG5cdGlmIChbXG5cdFx0XCJyZXRyaWV2ZXJcIixcblx0XHRcImxsbVwiLFxuXHRcdFwicHJvbXB0XCJcblx0XS5pbmNsdWRlcyhydW4ucnVuX3R5cGUpKSByZXR1cm4gaW5wdXRzO1xuXHRpZiAoT2JqZWN0LmtleXMoaW5wdXRzKS5sZW5ndGggPT09IDEgJiYgaW5wdXRzPy5pbnB1dCA9PT0gXCJcIikgcmV0dXJuIHZvaWQgMDtcblx0cmV0dXJuIGlucHV0cy5pbnB1dDtcbn1cbmFzeW5jIGZ1bmN0aW9uIF9nZXRTdGFuZGFyZGl6ZWRPdXRwdXRzKHJ1biwgc2NoZW1hRm9ybWF0KSB7XG5cdGNvbnN0IHsgb3V0cHV0cyB9ID0gcnVuO1xuXHRpZiAoc2NoZW1hRm9ybWF0ID09PSBcIm9yaWdpbmFsXCIpIHJldHVybiBvdXRwdXRzO1xuXHRpZiAoW1xuXHRcdFwicmV0cmlldmVyXCIsXG5cdFx0XCJsbG1cIixcblx0XHRcInByb21wdFwiXG5cdF0uaW5jbHVkZXMocnVuLnJ1bl90eXBlKSkgcmV0dXJuIG91dHB1dHM7XG5cdGlmIChvdXRwdXRzICE9PSB2b2lkIDAgJiYgT2JqZWN0LmtleXMob3V0cHV0cykubGVuZ3RoID09PSAxICYmIG91dHB1dHM/Lm91dHB1dCAhPT0gdm9pZCAwKSByZXR1cm4gb3V0cHV0cy5vdXRwdXQ7XG5cdHJldHVybiBvdXRwdXRzO1xufVxuZnVuY3Rpb24gaXNDaGF0R2VuZXJhdGlvbkNodW5rKHgpIHtcblx0cmV0dXJuIHggIT09IHZvaWQgMCAmJiB4Lm1lc3NhZ2UgIT09IHZvaWQgMDtcbn1cbi8qKlxuKiBDbGFzcyB0aGF0IGV4dGVuZHMgdGhlIGBCYXNlVHJhY2VyYCBjbGFzcyBmcm9tIHRoZVxuKiBgbGFuZ2NoYWluLmNhbGxiYWNrcy50cmFjZXJzLmJhc2VgIG1vZHVsZS4gSXQgcmVwcmVzZW50cyBhIGNhbGxiYWNrXG4qIGhhbmRsZXIgdGhhdCBsb2dzIHRoZSBleGVjdXRpb24gb2YgcnVucyBhbmQgZW1pdHMgYFJ1bkxvZ2AgaW5zdGFuY2VzIHRvIGFcbiogYFJ1bkxvZ1N0cmVhbWAuXG4qL1xudmFyIExvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciA9IGNsYXNzIGV4dGVuZHMgQmFzZVRyYWNlciB7XG5cdGF1dG9DbG9zZSA9IHRydWU7XG5cdGluY2x1ZGVOYW1lcztcblx0aW5jbHVkZVR5cGVzO1xuXHRpbmNsdWRlVGFncztcblx0ZXhjbHVkZU5hbWVzO1xuXHRleGNsdWRlVHlwZXM7XG5cdGV4Y2x1ZGVUYWdzO1xuXHRfc2NoZW1hRm9ybWF0ID0gXCJvcmlnaW5hbFwiO1xuXHRyb290SWQ7XG5cdGtleU1hcEJ5UnVuSWQgPSB7fTtcblx0Y291bnRlck1hcEJ5UnVuTmFtZSA9IHt9O1xuXHR0cmFuc2Zvcm1TdHJlYW07XG5cdHdyaXRlcjtcblx0cmVjZWl2ZVN0cmVhbTtcblx0bmFtZSA9IFwibG9nX3N0cmVhbV90cmFjZXJcIjtcblx0bGNfcHJlZmVyX3N0cmVhbWluZyA9IHRydWU7XG5cdGNvbnN0cnVjdG9yKGZpZWxkcykge1xuXHRcdHN1cGVyKHtcblx0XHRcdF9hd2FpdEhhbmRsZXI6IHRydWUsXG5cdFx0XHQuLi5maWVsZHNcblx0XHR9KTtcblx0XHR0aGlzLmF1dG9DbG9zZSA9IGZpZWxkcz8uYXV0b0Nsb3NlID8/IHRydWU7XG5cdFx0dGhpcy5pbmNsdWRlTmFtZXMgPSBmaWVsZHM/LmluY2x1ZGVOYW1lcztcblx0XHR0aGlzLmluY2x1ZGVUeXBlcyA9IGZpZWxkcz8uaW5jbHVkZVR5cGVzO1xuXHRcdHRoaXMuaW5jbHVkZVRhZ3MgPSBmaWVsZHM/LmluY2x1ZGVUYWdzO1xuXHRcdHRoaXMuZXhjbHVkZU5hbWVzID0gZmllbGRzPy5leGNsdWRlTmFtZXM7XG5cdFx0dGhpcy5leGNsdWRlVHlwZXMgPSBmaWVsZHM/LmV4Y2x1ZGVUeXBlcztcblx0XHR0aGlzLmV4Y2x1ZGVUYWdzID0gZmllbGRzPy5leGNsdWRlVGFncztcblx0XHR0aGlzLl9zY2hlbWFGb3JtYXQgPSBmaWVsZHM/Ll9zY2hlbWFGb3JtYXQgPz8gdGhpcy5fc2NoZW1hRm9ybWF0O1xuXHRcdHRoaXMudHJhbnNmb3JtU3RyZWFtID0gbmV3IFRyYW5zZm9ybVN0cmVhbSgpO1xuXHRcdHRoaXMud3JpdGVyID0gdGhpcy50cmFuc2Zvcm1TdHJlYW0ud3JpdGFibGUuZ2V0V3JpdGVyKCk7XG5cdFx0dGhpcy5yZWNlaXZlU3RyZWFtID0gSXRlcmFibGVSZWFkYWJsZVN0cmVhbS5mcm9tUmVhZGFibGVTdHJlYW0odGhpcy50cmFuc2Zvcm1TdHJlYW0ucmVhZGFibGUpO1xuXHR9XG5cdFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG5cdFx0cmV0dXJuIHRoaXMucmVjZWl2ZVN0cmVhbTtcblx0fVxuXHRhc3luYyBwZXJzaXN0UnVuKF9ydW4pIHt9XG5cdF9pbmNsdWRlUnVuKHJ1bikge1xuXHRcdGlmIChydW4uaWQgPT09IHRoaXMucm9vdElkKSByZXR1cm4gZmFsc2U7XG5cdFx0Y29uc3QgcnVuVGFncyA9IHJ1bi50YWdzID8/IFtdO1xuXHRcdGxldCBpbmNsdWRlID0gdGhpcy5pbmNsdWRlTmFtZXMgPT09IHZvaWQgMCAmJiB0aGlzLmluY2x1ZGVUYWdzID09PSB2b2lkIDAgJiYgdGhpcy5pbmNsdWRlVHlwZXMgPT09IHZvaWQgMDtcblx0XHRpZiAodGhpcy5pbmNsdWRlTmFtZXMgIT09IHZvaWQgMCkgaW5jbHVkZSA9IGluY2x1ZGUgfHwgdGhpcy5pbmNsdWRlTmFtZXMuaW5jbHVkZXMocnVuLm5hbWUpO1xuXHRcdGlmICh0aGlzLmluY2x1ZGVUeXBlcyAhPT0gdm9pZCAwKSBpbmNsdWRlID0gaW5jbHVkZSB8fCB0aGlzLmluY2x1ZGVUeXBlcy5pbmNsdWRlcyhydW4ucnVuX3R5cGUpO1xuXHRcdGlmICh0aGlzLmluY2x1ZGVUYWdzICE9PSB2b2lkIDApIGluY2x1ZGUgPSBpbmNsdWRlIHx8IHJ1blRhZ3MuZmluZCgodGFnKSA9PiB0aGlzLmluY2x1ZGVUYWdzPy5pbmNsdWRlcyh0YWcpKSAhPT0gdm9pZCAwO1xuXHRcdGlmICh0aGlzLmV4Y2x1ZGVOYW1lcyAhPT0gdm9pZCAwKSBpbmNsdWRlID0gaW5jbHVkZSAmJiAhdGhpcy5leGNsdWRlTmFtZXMuaW5jbHVkZXMocnVuLm5hbWUpO1xuXHRcdGlmICh0aGlzLmV4Y2x1ZGVUeXBlcyAhPT0gdm9pZCAwKSBpbmNsdWRlID0gaW5jbHVkZSAmJiAhdGhpcy5leGNsdWRlVHlwZXMuaW5jbHVkZXMocnVuLnJ1bl90eXBlKTtcblx0XHRpZiAodGhpcy5leGNsdWRlVGFncyAhPT0gdm9pZCAwKSBpbmNsdWRlID0gaW5jbHVkZSAmJiBydW5UYWdzLmV2ZXJ5KCh0YWcpID0+ICF0aGlzLmV4Y2x1ZGVUYWdzPy5pbmNsdWRlcyh0YWcpKTtcblx0XHRyZXR1cm4gaW5jbHVkZTtcblx0fVxuXHRhc3luYyAqdGFwT3V0cHV0SXRlcmFibGUocnVuSWQsIG91dHB1dCkge1xuXHRcdGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygb3V0cHV0KSB7XG5cdFx0XHRpZiAocnVuSWQgIT09IHRoaXMucm9vdElkKSB7XG5cdFx0XHRcdGNvbnN0IGtleSA9IHRoaXMua2V5TWFwQnlSdW5JZFtydW5JZF07XG5cdFx0XHRcdGlmIChrZXkpIGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKG5ldyBSdW5Mb2dQYXRjaCh7IG9wczogW3tcblx0XHRcdFx0XHRvcDogXCJhZGRcIixcblx0XHRcdFx0XHRwYXRoOiBgL2xvZ3MvJHtrZXl9L3N0cmVhbWVkX291dHB1dC8tYCxcblx0XHRcdFx0XHR2YWx1ZTogY2h1bmtcblx0XHRcdFx0fV0gfSkpO1xuXHRcdFx0fVxuXHRcdFx0eWllbGQgY2h1bms7XG5cdFx0fVxuXHR9XG5cdGFzeW5jIG9uUnVuQ3JlYXRlKHJ1bikge1xuXHRcdGlmICh0aGlzLnJvb3RJZCA9PT0gdm9pZCAwKSB7XG5cdFx0XHR0aGlzLnJvb3RJZCA9IHJ1bi5pZDtcblx0XHRcdGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKG5ldyBSdW5Mb2dQYXRjaCh7IG9wczogW3tcblx0XHRcdFx0b3A6IFwicmVwbGFjZVwiLFxuXHRcdFx0XHRwYXRoOiBcIlwiLFxuXHRcdFx0XHR2YWx1ZToge1xuXHRcdFx0XHRcdGlkOiBydW4uaWQsXG5cdFx0XHRcdFx0bmFtZTogcnVuLm5hbWUsXG5cdFx0XHRcdFx0dHlwZTogcnVuLnJ1bl90eXBlLFxuXHRcdFx0XHRcdHN0cmVhbWVkX291dHB1dDogW10sXG5cdFx0XHRcdFx0ZmluYWxfb3V0cHV0OiB2b2lkIDAsXG5cdFx0XHRcdFx0bG9nczoge31cblx0XHRcdFx0fVxuXHRcdFx0fV0gfSkpO1xuXHRcdH1cblx0XHRpZiAoIXRoaXMuX2luY2x1ZGVSdW4ocnVuKSkgcmV0dXJuO1xuXHRcdGlmICh0aGlzLmNvdW50ZXJNYXBCeVJ1bk5hbWVbcnVuLm5hbWVdID09PSB2b2lkIDApIHRoaXMuY291bnRlck1hcEJ5UnVuTmFtZVtydW4ubmFtZV0gPSAwO1xuXHRcdHRoaXMuY291bnRlck1hcEJ5UnVuTmFtZVtydW4ubmFtZV0gKz0gMTtcblx0XHRjb25zdCBjb3VudCA9IHRoaXMuY291bnRlck1hcEJ5UnVuTmFtZVtydW4ubmFtZV07XG5cdFx0dGhpcy5rZXlNYXBCeVJ1bklkW3J1bi5pZF0gPSBjb3VudCA9PT0gMSA/IHJ1bi5uYW1lIDogYCR7cnVuLm5hbWV9OiR7Y291bnR9YDtcblx0XHRjb25zdCBsb2dFbnRyeSA9IHtcblx0XHRcdGlkOiBydW4uaWQsXG5cdFx0XHRuYW1lOiBydW4ubmFtZSxcblx0XHRcdHR5cGU6IHJ1bi5ydW5fdHlwZSxcblx0XHRcdHRhZ3M6IHJ1bi50YWdzID8/IFtdLFxuXHRcdFx0bWV0YWRhdGE6IHJ1bi5leHRyYT8ubWV0YWRhdGEgPz8ge30sXG5cdFx0XHRzdGFydF90aW1lOiBuZXcgRGF0ZShydW4uc3RhcnRfdGltZSkudG9JU09TdHJpbmcoKSxcblx0XHRcdHN0cmVhbWVkX291dHB1dDogW10sXG5cdFx0XHRzdHJlYW1lZF9vdXRwdXRfc3RyOiBbXSxcblx0XHRcdGZpbmFsX291dHB1dDogdm9pZCAwLFxuXHRcdFx0ZW5kX3RpbWU6IHZvaWQgMFxuXHRcdH07XG5cdFx0aWYgKHRoaXMuX3NjaGVtYUZvcm1hdCA9PT0gXCJzdHJlYW1pbmdfZXZlbnRzXCIpIGxvZ0VudHJ5LmlucHV0cyA9IGF3YWl0IF9nZXRTdGFuZGFyZGl6ZWRJbnB1dHMocnVuLCB0aGlzLl9zY2hlbWFGb3JtYXQpO1xuXHRcdGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKG5ldyBSdW5Mb2dQYXRjaCh7IG9wczogW3tcblx0XHRcdG9wOiBcImFkZFwiLFxuXHRcdFx0cGF0aDogYC9sb2dzLyR7dGhpcy5rZXlNYXBCeVJ1bklkW3J1bi5pZF19YCxcblx0XHRcdHZhbHVlOiBsb2dFbnRyeVxuXHRcdH1dIH0pKTtcblx0fVxuXHRhc3luYyBvblJ1blVwZGF0ZShydW4pIHtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgcnVuTmFtZSA9IHRoaXMua2V5TWFwQnlSdW5JZFtydW4uaWRdO1xuXHRcdFx0aWYgKHJ1bk5hbWUgPT09IHZvaWQgMCkgcmV0dXJuO1xuXHRcdFx0Y29uc3Qgb3BzID0gW107XG5cdFx0XHRpZiAodGhpcy5fc2NoZW1hRm9ybWF0ID09PSBcInN0cmVhbWluZ19ldmVudHNcIikgb3BzLnB1c2goe1xuXHRcdFx0XHRvcDogXCJyZXBsYWNlXCIsXG5cdFx0XHRcdHBhdGg6IGAvbG9ncy8ke3J1bk5hbWV9L2lucHV0c2AsXG5cdFx0XHRcdHZhbHVlOiBhd2FpdCBfZ2V0U3RhbmRhcmRpemVkSW5wdXRzKHJ1biwgdGhpcy5fc2NoZW1hRm9ybWF0KVxuXHRcdFx0fSk7XG5cdFx0XHRvcHMucHVzaCh7XG5cdFx0XHRcdG9wOiBcImFkZFwiLFxuXHRcdFx0XHRwYXRoOiBgL2xvZ3MvJHtydW5OYW1lfS9maW5hbF9vdXRwdXRgLFxuXHRcdFx0XHR2YWx1ZTogYXdhaXQgX2dldFN0YW5kYXJkaXplZE91dHB1dHMocnVuLCB0aGlzLl9zY2hlbWFGb3JtYXQpXG5cdFx0XHR9KTtcblx0XHRcdGlmIChydW4uZW5kX3RpbWUgIT09IHZvaWQgMCkgb3BzLnB1c2goe1xuXHRcdFx0XHRvcDogXCJhZGRcIixcblx0XHRcdFx0cGF0aDogYC9sb2dzLyR7cnVuTmFtZX0vZW5kX3RpbWVgLFxuXHRcdFx0XHR2YWx1ZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpXG5cdFx0XHR9KTtcblx0XHRcdGNvbnN0IHBhdGNoID0gbmV3IFJ1bkxvZ1BhdGNoKHsgb3BzIH0pO1xuXHRcdFx0YXdhaXQgdGhpcy53cml0ZXIud3JpdGUocGF0Y2gpO1xuXHRcdH0gZmluYWxseSB7XG5cdFx0XHRpZiAocnVuLmlkID09PSB0aGlzLnJvb3RJZCkge1xuXHRcdFx0XHRjb25zdCBwYXRjaCA9IG5ldyBSdW5Mb2dQYXRjaCh7IG9wczogW3tcblx0XHRcdFx0XHRvcDogXCJyZXBsYWNlXCIsXG5cdFx0XHRcdFx0cGF0aDogXCIvZmluYWxfb3V0cHV0XCIsXG5cdFx0XHRcdFx0dmFsdWU6IGF3YWl0IF9nZXRTdGFuZGFyZGl6ZWRPdXRwdXRzKHJ1biwgdGhpcy5fc2NoZW1hRm9ybWF0KVxuXHRcdFx0XHR9XSB9KTtcblx0XHRcdFx0YXdhaXQgdGhpcy53cml0ZXIud3JpdGUocGF0Y2gpO1xuXHRcdFx0XHRpZiAodGhpcy5hdXRvQ2xvc2UpIGF3YWl0IHRoaXMud3JpdGVyLmNsb3NlKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdGFzeW5jIG9uTExNTmV3VG9rZW4ocnVuLCB0b2tlbiwga3dhcmdzKSB7XG5cdFx0Y29uc3QgcnVuTmFtZSA9IHRoaXMua2V5TWFwQnlSdW5JZFtydW4uaWRdO1xuXHRcdGlmIChydW5OYW1lID09PSB2b2lkIDApIHJldHVybjtcblx0XHRjb25zdCBpc0NoYXRNb2RlbCA9IHJ1bi5pbnB1dHMubWVzc2FnZXMgIT09IHZvaWQgMDtcblx0XHRsZXQgc3RyZWFtZWRPdXRwdXRWYWx1ZTtcblx0XHRpZiAoaXNDaGF0TW9kZWwpIGlmIChpc0NoYXRHZW5lcmF0aW9uQ2h1bmsoa3dhcmdzPy5jaHVuaykpIHN0cmVhbWVkT3V0cHV0VmFsdWUgPSBrd2FyZ3M/LmNodW5rO1xuXHRcdGVsc2Ugc3RyZWFtZWRPdXRwdXRWYWx1ZSA9IG5ldyBBSU1lc3NhZ2VDaHVuayh7XG5cdFx0XHRpZDogYHJ1bi0ke3J1bi5pZH1gLFxuXHRcdFx0Y29udGVudDogdG9rZW5cblx0XHR9KTtcblx0XHRlbHNlIHN0cmVhbWVkT3V0cHV0VmFsdWUgPSB0b2tlbjtcblx0XHRjb25zdCBwYXRjaCA9IG5ldyBSdW5Mb2dQYXRjaCh7IG9wczogW3tcblx0XHRcdG9wOiBcImFkZFwiLFxuXHRcdFx0cGF0aDogYC9sb2dzLyR7cnVuTmFtZX0vc3RyZWFtZWRfb3V0cHV0X3N0ci8tYCxcblx0XHRcdHZhbHVlOiB0b2tlblxuXHRcdH0sIHtcblx0XHRcdG9wOiBcImFkZFwiLFxuXHRcdFx0cGF0aDogYC9sb2dzLyR7cnVuTmFtZX0vc3RyZWFtZWRfb3V0cHV0Ly1gLFxuXHRcdFx0dmFsdWU6IHN0cmVhbWVkT3V0cHV0VmFsdWVcblx0XHR9XSB9KTtcblx0XHRhd2FpdCB0aGlzLndyaXRlci53cml0ZShwYXRjaCk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgTG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyLCBSdW5Mb2csIFJ1bkxvZ1BhdGNoLCBpc0xvZ1N0cmVhbUhhbmRsZXIsIGxvZ19zdHJlYW1fZXhwb3J0cyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9nX3N0cmVhbS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/tracers/log_stream.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/tracers/root_listener.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/root_listener.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RootListenersTracer: () => (/* binding */ RootListenersTracer)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/tracers/base.js\");\n\n\n//#region src/tracers/root_listener.ts\nvar RootListenersTracer = class extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseTracer {\n\tname = \"RootListenersTracer\";\n\t/** The Run's ID. Type UUID */\n\trootId;\n\tconfig;\n\targOnStart;\n\targOnEnd;\n\targOnError;\n\tconstructor({ config, onStart, onEnd, onError }) {\n\t\tsuper({ _awaitHandler: true });\n\t\tthis.config = config;\n\t\tthis.argOnStart = onStart;\n\t\tthis.argOnEnd = onEnd;\n\t\tthis.argOnError = onError;\n\t}\n\t/**\n\t* This is a legacy method only called once for an entire run tree\n\t* therefore not useful here\n\t* @param {Run} _ Not used\n\t*/\n\tpersistRun(_) {\n\t\treturn Promise.resolve();\n\t}\n\tasync onRunCreate(run) {\n\t\tif (this.rootId) return;\n\t\tthis.rootId = run.id;\n\t\tif (this.argOnStart) await this.argOnStart(run, this.config);\n\t}\n\tasync onRunUpdate(run) {\n\t\tif (run.id !== this.rootId) return;\n\t\tif (!run.error) {\n\t\t\tif (this.argOnEnd) await this.argOnEnd(run, this.config);\n\t\t} else if (this.argOnError) await this.argOnError(run, this.config);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=root_listener.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9yb290X2xpc3RlbmVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXVDOztBQUV2QztBQUNBLHdDQUF3QyxnREFBVTtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsaUNBQWlDO0FBQ2hELFVBQVUscUJBQXFCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLEtBQUs7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUMrQjtBQUMvQiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvcm9vdF9saXN0ZW5lci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlVHJhY2VyIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3RyYWNlcnMvcm9vdF9saXN0ZW5lci50c1xudmFyIFJvb3RMaXN0ZW5lcnNUcmFjZXIgPSBjbGFzcyBleHRlbmRzIEJhc2VUcmFjZXIge1xuXHRuYW1lID0gXCJSb290TGlzdGVuZXJzVHJhY2VyXCI7XG5cdC8qKiBUaGUgUnVuJ3MgSUQuIFR5cGUgVVVJRCAqL1xuXHRyb290SWQ7XG5cdGNvbmZpZztcblx0YXJnT25TdGFydDtcblx0YXJnT25FbmQ7XG5cdGFyZ09uRXJyb3I7XG5cdGNvbnN0cnVjdG9yKHsgY29uZmlnLCBvblN0YXJ0LCBvbkVuZCwgb25FcnJvciB9KSB7XG5cdFx0c3VwZXIoeyBfYXdhaXRIYW5kbGVyOiB0cnVlIH0pO1xuXHRcdHRoaXMuY29uZmlnID0gY29uZmlnO1xuXHRcdHRoaXMuYXJnT25TdGFydCA9IG9uU3RhcnQ7XG5cdFx0dGhpcy5hcmdPbkVuZCA9IG9uRW5kO1xuXHRcdHRoaXMuYXJnT25FcnJvciA9IG9uRXJyb3I7XG5cdH1cblx0LyoqXG5cdCogVGhpcyBpcyBhIGxlZ2FjeSBtZXRob2Qgb25seSBjYWxsZWQgb25jZSBmb3IgYW4gZW50aXJlIHJ1biB0cmVlXG5cdCogdGhlcmVmb3JlIG5vdCB1c2VmdWwgaGVyZVxuXHQqIEBwYXJhbSB7UnVufSBfIE5vdCB1c2VkXG5cdCovXG5cdHBlcnNpc3RSdW4oXykge1xuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblx0fVxuXHRhc3luYyBvblJ1bkNyZWF0ZShydW4pIHtcblx0XHRpZiAodGhpcy5yb290SWQpIHJldHVybjtcblx0XHR0aGlzLnJvb3RJZCA9IHJ1bi5pZDtcblx0XHRpZiAodGhpcy5hcmdPblN0YXJ0KSBhd2FpdCB0aGlzLmFyZ09uU3RhcnQocnVuLCB0aGlzLmNvbmZpZyk7XG5cdH1cblx0YXN5bmMgb25SdW5VcGRhdGUocnVuKSB7XG5cdFx0aWYgKHJ1bi5pZCAhPT0gdGhpcy5yb290SWQpIHJldHVybjtcblx0XHRpZiAoIXJ1bi5lcnJvcikge1xuXHRcdFx0aWYgKHRoaXMuYXJnT25FbmQpIGF3YWl0IHRoaXMuYXJnT25FbmQocnVuLCB0aGlzLmNvbmZpZyk7XG5cdFx0fSBlbHNlIGlmICh0aGlzLmFyZ09uRXJyb3IpIGF3YWl0IHRoaXMuYXJnT25FcnJvcihydW4sIHRoaXMuY29uZmlnKTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBSb290TGlzdGVuZXJzVHJhY2VyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yb290X2xpc3RlbmVyLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/tracers/root_listener.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/tracers/run_collector.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/run_collector.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RunCollectorCallbackHandler: () => (/* binding */ RunCollectorCallbackHandler),\n/* harmony export */   run_collector_exports: () => (/* binding */ run_collector_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/tracers/base.js\");\n\n\n\n//#region src/tracers/run_collector.ts\nvar run_collector_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(run_collector_exports, { RunCollectorCallbackHandler: () => RunCollectorCallbackHandler });\n/**\n* A callback handler that collects traced runs and makes it easy to fetch the traced run object from calls through any langchain object.\n* For instance, it makes it easy to fetch the run ID and then do things with that, such as log feedback.\n*/\nvar RunCollectorCallbackHandler = class extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseTracer {\n\t/** The name of the callback handler. */\n\tname = \"run_collector\";\n\t/** The ID of the example. */\n\texampleId;\n\t/** An array of traced runs. */\n\ttracedRuns;\n\t/**\n\t* Creates a new instance of the RunCollectorCallbackHandler class.\n\t* @param exampleId The ID of the example.\n\t*/\n\tconstructor({ exampleId } = {}) {\n\t\tsuper({ _awaitHandler: true });\n\t\tthis.exampleId = exampleId;\n\t\tthis.tracedRuns = [];\n\t}\n\t/**\n\t* Persists the given run object.\n\t* @param run The run object to persist.\n\t*/\n\tasync persistRun(run) {\n\t\tconst run_ = { ...run };\n\t\trun_.reference_example_id = this.exampleId;\n\t\tthis.tracedRuns.push(run_);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=run_collector.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9ydW5fY29sbGVjdG9yLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBMkQ7QUFDcEI7O0FBRXZDO0FBQ0E7QUFDQSxzRUFBUSwwQkFBMEIsZ0VBQWdFO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELGdEQUFVO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxZQUFZLElBQUk7QUFDL0IsVUFBVSxxQkFBcUI7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUM4RDtBQUM5RCIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvcnVuX2NvbGxlY3Rvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4cG9ydCB9IGZyb20gXCIuLi9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyBCYXNlVHJhY2VyIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3RyYWNlcnMvcnVuX2NvbGxlY3Rvci50c1xudmFyIHJ1bl9jb2xsZWN0b3JfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQocnVuX2NvbGxlY3Rvcl9leHBvcnRzLCB7IFJ1bkNvbGxlY3RvckNhbGxiYWNrSGFuZGxlcjogKCkgPT4gUnVuQ29sbGVjdG9yQ2FsbGJhY2tIYW5kbGVyIH0pO1xuLyoqXG4qIEEgY2FsbGJhY2sgaGFuZGxlciB0aGF0IGNvbGxlY3RzIHRyYWNlZCBydW5zIGFuZCBtYWtlcyBpdCBlYXN5IHRvIGZldGNoIHRoZSB0cmFjZWQgcnVuIG9iamVjdCBmcm9tIGNhbGxzIHRocm91Z2ggYW55IGxhbmdjaGFpbiBvYmplY3QuXG4qIEZvciBpbnN0YW5jZSwgaXQgbWFrZXMgaXQgZWFzeSB0byBmZXRjaCB0aGUgcnVuIElEIGFuZCB0aGVuIGRvIHRoaW5ncyB3aXRoIHRoYXQsIHN1Y2ggYXMgbG9nIGZlZWRiYWNrLlxuKi9cbnZhciBSdW5Db2xsZWN0b3JDYWxsYmFja0hhbmRsZXIgPSBjbGFzcyBleHRlbmRzIEJhc2VUcmFjZXIge1xuXHQvKiogVGhlIG5hbWUgb2YgdGhlIGNhbGxiYWNrIGhhbmRsZXIuICovXG5cdG5hbWUgPSBcInJ1bl9jb2xsZWN0b3JcIjtcblx0LyoqIFRoZSBJRCBvZiB0aGUgZXhhbXBsZS4gKi9cblx0ZXhhbXBsZUlkO1xuXHQvKiogQW4gYXJyYXkgb2YgdHJhY2VkIHJ1bnMuICovXG5cdHRyYWNlZFJ1bnM7XG5cdC8qKlxuXHQqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFJ1bkNvbGxlY3RvckNhbGxiYWNrSGFuZGxlciBjbGFzcy5cblx0KiBAcGFyYW0gZXhhbXBsZUlkIFRoZSBJRCBvZiB0aGUgZXhhbXBsZS5cblx0Ki9cblx0Y29uc3RydWN0b3IoeyBleGFtcGxlSWQgfSA9IHt9KSB7XG5cdFx0c3VwZXIoeyBfYXdhaXRIYW5kbGVyOiB0cnVlIH0pO1xuXHRcdHRoaXMuZXhhbXBsZUlkID0gZXhhbXBsZUlkO1xuXHRcdHRoaXMudHJhY2VkUnVucyA9IFtdO1xuXHR9XG5cdC8qKlxuXHQqIFBlcnNpc3RzIHRoZSBnaXZlbiBydW4gb2JqZWN0LlxuXHQqIEBwYXJhbSBydW4gVGhlIHJ1biBvYmplY3QgdG8gcGVyc2lzdC5cblx0Ki9cblx0YXN5bmMgcGVyc2lzdFJ1bihydW4pIHtcblx0XHRjb25zdCBydW5fID0geyAuLi5ydW4gfTtcblx0XHRydW5fLnJlZmVyZW5jZV9leGFtcGxlX2lkID0gdGhpcy5leGFtcGxlSWQ7XG5cdFx0dGhpcy50cmFjZWRSdW5zLnB1c2gocnVuXyk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgUnVuQ29sbGVjdG9yQ2FsbGJhY2tIYW5kbGVyLCBydW5fY29sbGVjdG9yX2V4cG9ydHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJ1bl9jb2xsZWN0b3IuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/tracers/run_collector.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/tracers/tracer_langchain.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/tracer_langchain.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LangChainTracer: () => (/* binding */ LangChainTracer),\n/* harmony export */   tracer_langchain_exports: () => (/* binding */ tracer_langchain_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _messages_metadata_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../messages/metadata.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/metadata.js\");\n/* harmony import */ var _messages_ai_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../messages/ai.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/core/dist/tracers/base.js\");\n/* harmony import */ var _singletons_tracer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../singletons/tracer.js */ \"(ssr)/./node_modules/@langchain/core/dist/singletons/tracer.js\");\n/* harmony import */ var langsmith_singletons_traceable__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! langsmith/singletons/traceable */ \"(ssr)/./node_modules/langsmith/singletons/traceable.js\");\n/* harmony import */ var langsmith_run_trees__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! langsmith/run_trees */ \"(ssr)/./node_modules/langsmith/run_trees.js\");\n/* harmony import */ var langsmith__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! langsmith */ \"(ssr)/./node_modules/langsmith/index.js\");\n\n\n\n\n\n\n\n\n\n//#region src/tracers/tracer_langchain.ts\nvar tracer_langchain_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(tracer_langchain_exports, { LangChainTracer: () => LangChainTracer });\n/**\n* Extract usage_metadata from chat generations.\n*\n* Iterates through generations to find and aggregates all usage_metadata\n* found in chat messages. This is typically present in chat model outputs.\n*/\nfunction _getUsageMetadataFromGenerations(generations) {\n\tlet output = void 0;\n\tfor (const generationBatch of generations) for (const generation of generationBatch) if (_messages_ai_js__WEBPACK_IMPORTED_MODULE_2__.AIMessage.isInstance(generation.message) && generation.message.usage_metadata !== void 0) output = (0,_messages_metadata_js__WEBPACK_IMPORTED_MODULE_1__.mergeUsageMetadata)(output, generation.message.usage_metadata);\n\treturn output;\n}\nvar LangChainTracer = class LangChainTracer extends _base_js__WEBPACK_IMPORTED_MODULE_3__.BaseTracer {\n\tname = \"langchain_tracer\";\n\tprojectName;\n\texampleId;\n\tclient;\n\treplicas;\n\tusesRunTreeMap = true;\n\tconstructor(fields = {}) {\n\t\tsuper(fields);\n\t\tconst { exampleId, projectName, client, replicas } = fields;\n\t\tthis.projectName = projectName ?? (0,langsmith__WEBPACK_IMPORTED_MODULE_7__.getDefaultProjectName)();\n\t\tthis.replicas = replicas;\n\t\tthis.exampleId = exampleId;\n\t\tthis.client = client ?? (0,_singletons_tracer_js__WEBPACK_IMPORTED_MODULE_4__.getDefaultLangChainClientSingleton)();\n\t\tconst traceableTree = LangChainTracer.getTraceableRunTree();\n\t\tif (traceableTree) this.updateFromRunTree(traceableTree);\n\t}\n\tasync persistRun(_run) {}\n\tasync onRunCreate(run) {\n\t\tif (!run.extra?.lc_defers_inputs) {\n\t\t\tconst runTree = this.getRunTreeWithTracingConfig(run.id);\n\t\t\tawait runTree?.postRun();\n\t\t}\n\t}\n\tasync onRunUpdate(run) {\n\t\tconst runTree = this.getRunTreeWithTracingConfig(run.id);\n\t\tif (run.extra?.lc_defers_inputs) await runTree?.postRun();\n\t\telse await runTree?.patchRun();\n\t}\n\tonLLMEnd(run) {\n\t\tconst outputs = run.outputs;\n\t\tif (outputs?.generations) {\n\t\t\tconst usageMetadata = _getUsageMetadataFromGenerations(outputs.generations);\n\t\t\tif (usageMetadata !== void 0) {\n\t\t\t\trun.extra = run.extra ?? {};\n\t\t\t\tconst metadata = run.extra.metadata ?? {};\n\t\t\t\tmetadata.usage_metadata = usageMetadata;\n\t\t\t\trun.extra.metadata = metadata;\n\t\t\t}\n\t\t}\n\t}\n\tgetRun(id) {\n\t\treturn this.runTreeMap.get(id);\n\t}\n\tupdateFromRunTree(runTree) {\n\t\tthis.runTreeMap.set(runTree.id, runTree);\n\t\tlet rootRun = runTree;\n\t\tconst visited = /* @__PURE__ */ new Set();\n\t\twhile (rootRun.parent_run) {\n\t\t\tif (visited.has(rootRun.id)) break;\n\t\t\tvisited.add(rootRun.id);\n\t\t\tif (!rootRun.parent_run) break;\n\t\t\trootRun = rootRun.parent_run;\n\t\t}\n\t\tvisited.clear();\n\t\tconst queue = [rootRun];\n\t\twhile (queue.length > 0) {\n\t\t\tconst current = queue.shift();\n\t\t\tif (!current || visited.has(current.id)) continue;\n\t\t\tvisited.add(current.id);\n\t\t\tthis.runTreeMap.set(current.id, current);\n\t\t\tif (current.child_runs) queue.push(...current.child_runs);\n\t\t}\n\t\tthis.client = runTree.client ?? this.client;\n\t\tthis.replicas = runTree.replicas ?? this.replicas;\n\t\tthis.projectName = runTree.project_name ?? this.projectName;\n\t\tthis.exampleId = runTree.reference_example_id ?? this.exampleId;\n\t}\n\tgetRunTreeWithTracingConfig(id) {\n\t\tconst runTree = this.runTreeMap.get(id);\n\t\tif (!runTree) return void 0;\n\t\treturn new langsmith_run_trees__WEBPACK_IMPORTED_MODULE_6__.RunTree({\n\t\t\t...runTree,\n\t\t\tclient: this.client,\n\t\t\tproject_name: this.projectName,\n\t\t\treplicas: this.replicas,\n\t\t\treference_example_id: this.exampleId,\n\t\t\ttracingEnabled: true\n\t\t});\n\t}\n\tstatic getTraceableRunTree() {\n\t\ttry {\n\t\t\treturn (0,langsmith_singletons_traceable__WEBPACK_IMPORTED_MODULE_5__.getCurrentRunTree)(true);\n\t\t} catch {\n\t\t\treturn void 0;\n\t\t}\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=tracer_langchain.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy90cmFjZXJfbGFuZ2NoYWluLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBMkQ7QUFDRTtBQUNmO0FBQ1A7QUFDc0M7QUFDVjtBQUNyQjtBQUNJOztBQUVsRDtBQUNBO0FBQ0Esc0VBQVEsNkJBQTZCLHdDQUF3QztBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEZBQTBGLHNEQUFTLDBGQUEwRix5RUFBa0I7QUFDL007QUFDQTtBQUNBLG9EQUFvRCxnREFBVTtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQSxVQUFVLDJDQUEyQztBQUNyRCxvQ0FBb0MsZ0VBQXFCO0FBQ3pEO0FBQ0E7QUFDQSwwQkFBMEIseUZBQWtDO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsd0RBQU87QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLFVBQVUsaUZBQWlCO0FBQzNCLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNxRDtBQUNyRCIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvdHJhY2VyX2xhbmdjaGFpbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4cG9ydCB9IGZyb20gXCIuLi9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyBtZXJnZVVzYWdlTWV0YWRhdGEgfSBmcm9tIFwiLi4vbWVzc2FnZXMvbWV0YWRhdGEuanNcIjtcbmltcG9ydCB7IEFJTWVzc2FnZSB9IGZyb20gXCIuLi9tZXNzYWdlcy9haS5qc1wiO1xuaW1wb3J0IHsgQmFzZVRyYWNlciB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IGdldERlZmF1bHRMYW5nQ2hhaW5DbGllbnRTaW5nbGV0b24gfSBmcm9tIFwiLi4vc2luZ2xldG9ucy90cmFjZXIuanNcIjtcbmltcG9ydCB7IGdldEN1cnJlbnRSdW5UcmVlIH0gZnJvbSBcImxhbmdzbWl0aC9zaW5nbGV0b25zL3RyYWNlYWJsZVwiO1xuaW1wb3J0IHsgUnVuVHJlZSB9IGZyb20gXCJsYW5nc21pdGgvcnVuX3RyZWVzXCI7XG5pbXBvcnQgeyBnZXREZWZhdWx0UHJvamVjdE5hbWUgfSBmcm9tIFwibGFuZ3NtaXRoXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdHJhY2Vycy90cmFjZXJfbGFuZ2NoYWluLnRzXG52YXIgdHJhY2VyX2xhbmdjaGFpbl9leHBvcnRzID0ge307XG5fX2V4cG9ydCh0cmFjZXJfbGFuZ2NoYWluX2V4cG9ydHMsIHsgTGFuZ0NoYWluVHJhY2VyOiAoKSA9PiBMYW5nQ2hhaW5UcmFjZXIgfSk7XG4vKipcbiogRXh0cmFjdCB1c2FnZV9tZXRhZGF0YSBmcm9tIGNoYXQgZ2VuZXJhdGlvbnMuXG4qXG4qIEl0ZXJhdGVzIHRocm91Z2ggZ2VuZXJhdGlvbnMgdG8gZmluZCBhbmQgYWdncmVnYXRlcyBhbGwgdXNhZ2VfbWV0YWRhdGFcbiogZm91bmQgaW4gY2hhdCBtZXNzYWdlcy4gVGhpcyBpcyB0eXBpY2FsbHkgcHJlc2VudCBpbiBjaGF0IG1vZGVsIG91dHB1dHMuXG4qL1xuZnVuY3Rpb24gX2dldFVzYWdlTWV0YWRhdGFGcm9tR2VuZXJhdGlvbnMoZ2VuZXJhdGlvbnMpIHtcblx0bGV0IG91dHB1dCA9IHZvaWQgMDtcblx0Zm9yIChjb25zdCBnZW5lcmF0aW9uQmF0Y2ggb2YgZ2VuZXJhdGlvbnMpIGZvciAoY29uc3QgZ2VuZXJhdGlvbiBvZiBnZW5lcmF0aW9uQmF0Y2gpIGlmIChBSU1lc3NhZ2UuaXNJbnN0YW5jZShnZW5lcmF0aW9uLm1lc3NhZ2UpICYmIGdlbmVyYXRpb24ubWVzc2FnZS51c2FnZV9tZXRhZGF0YSAhPT0gdm9pZCAwKSBvdXRwdXQgPSBtZXJnZVVzYWdlTWV0YWRhdGEob3V0cHV0LCBnZW5lcmF0aW9uLm1lc3NhZ2UudXNhZ2VfbWV0YWRhdGEpO1xuXHRyZXR1cm4gb3V0cHV0O1xufVxudmFyIExhbmdDaGFpblRyYWNlciA9IGNsYXNzIExhbmdDaGFpblRyYWNlciBleHRlbmRzIEJhc2VUcmFjZXIge1xuXHRuYW1lID0gXCJsYW5nY2hhaW5fdHJhY2VyXCI7XG5cdHByb2plY3ROYW1lO1xuXHRleGFtcGxlSWQ7XG5cdGNsaWVudDtcblx0cmVwbGljYXM7XG5cdHVzZXNSdW5UcmVlTWFwID0gdHJ1ZTtcblx0Y29uc3RydWN0b3IoZmllbGRzID0ge30pIHtcblx0XHRzdXBlcihmaWVsZHMpO1xuXHRcdGNvbnN0IHsgZXhhbXBsZUlkLCBwcm9qZWN0TmFtZSwgY2xpZW50LCByZXBsaWNhcyB9ID0gZmllbGRzO1xuXHRcdHRoaXMucHJvamVjdE5hbWUgPSBwcm9qZWN0TmFtZSA/PyBnZXREZWZhdWx0UHJvamVjdE5hbWUoKTtcblx0XHR0aGlzLnJlcGxpY2FzID0gcmVwbGljYXM7XG5cdFx0dGhpcy5leGFtcGxlSWQgPSBleGFtcGxlSWQ7XG5cdFx0dGhpcy5jbGllbnQgPSBjbGllbnQgPz8gZ2V0RGVmYXVsdExhbmdDaGFpbkNsaWVudFNpbmdsZXRvbigpO1xuXHRcdGNvbnN0IHRyYWNlYWJsZVRyZWUgPSBMYW5nQ2hhaW5UcmFjZXIuZ2V0VHJhY2VhYmxlUnVuVHJlZSgpO1xuXHRcdGlmICh0cmFjZWFibGVUcmVlKSB0aGlzLnVwZGF0ZUZyb21SdW5UcmVlKHRyYWNlYWJsZVRyZWUpO1xuXHR9XG5cdGFzeW5jIHBlcnNpc3RSdW4oX3J1bikge31cblx0YXN5bmMgb25SdW5DcmVhdGUocnVuKSB7XG5cdFx0aWYgKCFydW4uZXh0cmE/LmxjX2RlZmVyc19pbnB1dHMpIHtcblx0XHRcdGNvbnN0IHJ1blRyZWUgPSB0aGlzLmdldFJ1blRyZWVXaXRoVHJhY2luZ0NvbmZpZyhydW4uaWQpO1xuXHRcdFx0YXdhaXQgcnVuVHJlZT8ucG9zdFJ1bigpO1xuXHRcdH1cblx0fVxuXHRhc3luYyBvblJ1blVwZGF0ZShydW4pIHtcblx0XHRjb25zdCBydW5UcmVlID0gdGhpcy5nZXRSdW5UcmVlV2l0aFRyYWNpbmdDb25maWcocnVuLmlkKTtcblx0XHRpZiAocnVuLmV4dHJhPy5sY19kZWZlcnNfaW5wdXRzKSBhd2FpdCBydW5UcmVlPy5wb3N0UnVuKCk7XG5cdFx0ZWxzZSBhd2FpdCBydW5UcmVlPy5wYXRjaFJ1bigpO1xuXHR9XG5cdG9uTExNRW5kKHJ1bikge1xuXHRcdGNvbnN0IG91dHB1dHMgPSBydW4ub3V0cHV0cztcblx0XHRpZiAob3V0cHV0cz8uZ2VuZXJhdGlvbnMpIHtcblx0XHRcdGNvbnN0IHVzYWdlTWV0YWRhdGEgPSBfZ2V0VXNhZ2VNZXRhZGF0YUZyb21HZW5lcmF0aW9ucyhvdXRwdXRzLmdlbmVyYXRpb25zKTtcblx0XHRcdGlmICh1c2FnZU1ldGFkYXRhICE9PSB2b2lkIDApIHtcblx0XHRcdFx0cnVuLmV4dHJhID0gcnVuLmV4dHJhID8/IHt9O1xuXHRcdFx0XHRjb25zdCBtZXRhZGF0YSA9IHJ1bi5leHRyYS5tZXRhZGF0YSA/PyB7fTtcblx0XHRcdFx0bWV0YWRhdGEudXNhZ2VfbWV0YWRhdGEgPSB1c2FnZU1ldGFkYXRhO1xuXHRcdFx0XHRydW4uZXh0cmEubWV0YWRhdGEgPSBtZXRhZGF0YTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0Z2V0UnVuKGlkKSB7XG5cdFx0cmV0dXJuIHRoaXMucnVuVHJlZU1hcC5nZXQoaWQpO1xuXHR9XG5cdHVwZGF0ZUZyb21SdW5UcmVlKHJ1blRyZWUpIHtcblx0XHR0aGlzLnJ1blRyZWVNYXAuc2V0KHJ1blRyZWUuaWQsIHJ1blRyZWUpO1xuXHRcdGxldCByb290UnVuID0gcnVuVHJlZTtcblx0XHRjb25zdCB2aXNpdGVkID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcblx0XHR3aGlsZSAocm9vdFJ1bi5wYXJlbnRfcnVuKSB7XG5cdFx0XHRpZiAodmlzaXRlZC5oYXMocm9vdFJ1bi5pZCkpIGJyZWFrO1xuXHRcdFx0dmlzaXRlZC5hZGQocm9vdFJ1bi5pZCk7XG5cdFx0XHRpZiAoIXJvb3RSdW4ucGFyZW50X3J1bikgYnJlYWs7XG5cdFx0XHRyb290UnVuID0gcm9vdFJ1bi5wYXJlbnRfcnVuO1xuXHRcdH1cblx0XHR2aXNpdGVkLmNsZWFyKCk7XG5cdFx0Y29uc3QgcXVldWUgPSBbcm9vdFJ1bl07XG5cdFx0d2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcblx0XHRcdGNvbnN0IGN1cnJlbnQgPSBxdWV1ZS5zaGlmdCgpO1xuXHRcdFx0aWYgKCFjdXJyZW50IHx8IHZpc2l0ZWQuaGFzKGN1cnJlbnQuaWQpKSBjb250aW51ZTtcblx0XHRcdHZpc2l0ZWQuYWRkKGN1cnJlbnQuaWQpO1xuXHRcdFx0dGhpcy5ydW5UcmVlTWFwLnNldChjdXJyZW50LmlkLCBjdXJyZW50KTtcblx0XHRcdGlmIChjdXJyZW50LmNoaWxkX3J1bnMpIHF1ZXVlLnB1c2goLi4uY3VycmVudC5jaGlsZF9ydW5zKTtcblx0XHR9XG5cdFx0dGhpcy5jbGllbnQgPSBydW5UcmVlLmNsaWVudCA/PyB0aGlzLmNsaWVudDtcblx0XHR0aGlzLnJlcGxpY2FzID0gcnVuVHJlZS5yZXBsaWNhcyA/PyB0aGlzLnJlcGxpY2FzO1xuXHRcdHRoaXMucHJvamVjdE5hbWUgPSBydW5UcmVlLnByb2plY3RfbmFtZSA/PyB0aGlzLnByb2plY3ROYW1lO1xuXHRcdHRoaXMuZXhhbXBsZUlkID0gcnVuVHJlZS5yZWZlcmVuY2VfZXhhbXBsZV9pZCA/PyB0aGlzLmV4YW1wbGVJZDtcblx0fVxuXHRnZXRSdW5UcmVlV2l0aFRyYWNpbmdDb25maWcoaWQpIHtcblx0XHRjb25zdCBydW5UcmVlID0gdGhpcy5ydW5UcmVlTWFwLmdldChpZCk7XG5cdFx0aWYgKCFydW5UcmVlKSByZXR1cm4gdm9pZCAwO1xuXHRcdHJldHVybiBuZXcgUnVuVHJlZSh7XG5cdFx0XHQuLi5ydW5UcmVlLFxuXHRcdFx0Y2xpZW50OiB0aGlzLmNsaWVudCxcblx0XHRcdHByb2plY3RfbmFtZTogdGhpcy5wcm9qZWN0TmFtZSxcblx0XHRcdHJlcGxpY2FzOiB0aGlzLnJlcGxpY2FzLFxuXHRcdFx0cmVmZXJlbmNlX2V4YW1wbGVfaWQ6IHRoaXMuZXhhbXBsZUlkLFxuXHRcdFx0dHJhY2luZ0VuYWJsZWQ6IHRydWVcblx0XHR9KTtcblx0fVxuXHRzdGF0aWMgZ2V0VHJhY2VhYmxlUnVuVHJlZSgpIHtcblx0XHR0cnkge1xuXHRcdFx0cmV0dXJuIGdldEN1cnJlbnRSdW5UcmVlKHRydWUpO1xuXHRcdH0gY2F0Y2gge1xuXHRcdFx0cmV0dXJuIHZvaWQgMDtcblx0XHR9XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgTGFuZ0NoYWluVHJhY2VyLCB0cmFjZXJfbGFuZ2NoYWluX2V4cG9ydHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYWNlcl9sYW5nY2hhaW4uanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/tracers/tracer_langchain.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/types/stream.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/types/stream.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   stream_exports: () => (/* binding */ stream_exports)\n/* harmony export */ });\n//#region src/types/stream.ts\nvar stream_exports = {};\n\n//#endregion\n\n//# sourceMappingURL=stream.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHlwZXMvc3RyZWFtLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBOztBQUVBO0FBQzBCO0FBQzFCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHlwZXMvc3RyZWFtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvdHlwZXMvc3RyZWFtLnRzXG52YXIgc3RyZWFtX2V4cG9ydHMgPSB7fTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBzdHJlYW1fZXhwb3J0cyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RyZWFtLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/types/stream.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/async_caller.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/async_caller.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncCaller: () => (/* binding */ AsyncCaller),\n/* harmony export */   async_caller_exports: () => (/* binding */ async_caller_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _signal_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./signal.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/signal.js\");\n/* harmony import */ var _p_retry_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./p-retry/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/p-retry/index.js\");\n/* harmony import */ var p_queue__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! p-queue */ \"(ssr)/./node_modules/p-queue/dist/index.js\");\n\n\n\n\n\n//#region src/utils/async_caller.ts\nvar async_caller_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(async_caller_exports, { AsyncCaller: () => AsyncCaller });\nconst STATUS_NO_RETRY = [\n\t400,\n\t401,\n\t402,\n\t403,\n\t404,\n\t405,\n\t406,\n\t407,\n\t409\n];\nconst defaultFailedAttemptHandler = (error) => {\n\tif (error.message.startsWith(\"Cancel\") || error.message.startsWith(\"AbortError\") || error.name === \"AbortError\") throw error;\n\tif (error?.code === \"ECONNABORTED\") throw error;\n\tconst status = error?.response?.status ?? error?.status;\n\tif (status && STATUS_NO_RETRY.includes(+status)) throw error;\n\tif (error?.error?.code === \"insufficient_quota\") {\n\t\tconst err = new Error(error?.message);\n\t\terr.name = \"InsufficientQuotaError\";\n\t\tthrow err;\n\t}\n};\n/**\n* A class that can be used to make async calls with concurrency and retry logic.\n*\n* This is useful for making calls to any kind of \"expensive\" external resource,\n* be it because it's rate-limited, subject to network issues, etc.\n*\n* Concurrent calls are limited by the `maxConcurrency` parameter, which defaults\n* to `Infinity`. This means that by default, all calls will be made in parallel.\n*\n* Retries are limited by the `maxRetries` parameter, which defaults to 6. This\n* means that by default, each call will be retried up to 6 times, with an\n* exponential backoff between each attempt.\n*/\nvar AsyncCaller = class {\n\tmaxConcurrency;\n\tmaxRetries;\n\tonFailedAttempt;\n\tqueue;\n\tconstructor(params) {\n\t\tthis.maxConcurrency = params.maxConcurrency ?? Infinity;\n\t\tthis.maxRetries = params.maxRetries ?? 6;\n\t\tthis.onFailedAttempt = params.onFailedAttempt ?? defaultFailedAttemptHandler;\n\t\tconst PQueue =  true ? p_queue__WEBPACK_IMPORTED_MODULE_3__[\"default\"] : p_queue__WEBPACK_IMPORTED_MODULE_3__;\n\t\tthis.queue = new PQueue({ concurrency: this.maxConcurrency });\n\t}\n\tasync call(callable, ...args) {\n\t\treturn this.queue.add(() => (0,_p_retry_index_js__WEBPACK_IMPORTED_MODULE_2__.pRetry)(() => callable(...args).catch((error) => {\n\t\t\tif (error instanceof Error) throw error;\n\t\t\telse throw new Error(error);\n\t\t}), {\n\t\t\tonFailedAttempt: ({ error }) => this.onFailedAttempt?.(error),\n\t\t\tretries: this.maxRetries,\n\t\t\trandomize: true\n\t\t}), { throwOnTimeout: true });\n\t}\n\tcallWithOptions(options, callable, ...args) {\n\t\tif (options.signal) {\n\t\t\tlet listener;\n\t\t\treturn Promise.race([this.call(callable, ...args), new Promise((_, reject) => {\n\t\t\t\tlistener = () => {\n\t\t\t\t\treject((0,_signal_js__WEBPACK_IMPORTED_MODULE_1__.getAbortSignalError)(options.signal));\n\t\t\t\t};\n\t\t\t\toptions.signal?.addEventListener(\"abort\", listener);\n\t\t\t})]).finally(() => {\n\t\t\t\tif (options.signal && listener) options.signal.removeEventListener(\"abort\", listener);\n\t\t\t});\n\t\t}\n\t\treturn this.call(callable, ...args);\n\t}\n\tfetch(...args) {\n\t\treturn this.call(() => fetch(...args).then((res) => res.ok ? res : Promise.reject(res)));\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=async_caller.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvYXN5bmNfY2FsbGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUEyRDtBQUNUO0FBQ047QUFDWjs7QUFFaEM7QUFDQTtBQUNBLHNFQUFRLHlCQUF5QixnQ0FBZ0M7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixLQUFzQixHQUFHLCtDQUFpQixHQUFHLG9DQUFTO0FBQ3ZFLDRCQUE0QixrQ0FBa0M7QUFDOUQ7QUFDQTtBQUNBLDhCQUE4Qix5REFBTTtBQUNwQztBQUNBO0FBQ0EsR0FBRztBQUNILHVCQUF1QixPQUFPO0FBQzlCO0FBQ0E7QUFDQSxHQUFHLEtBQUssc0JBQXNCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksK0RBQW1CO0FBQy9CO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDNkM7QUFDN0MiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9hc3luY19jYWxsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19leHBvcnQgfSBmcm9tIFwiLi4vX3ZpcnR1YWwvcm9sbGRvd25fcnVudGltZS5qc1wiO1xuaW1wb3J0IHsgZ2V0QWJvcnRTaWduYWxFcnJvciB9IGZyb20gXCIuL3NpZ25hbC5qc1wiO1xuaW1wb3J0IHsgcFJldHJ5IH0gZnJvbSBcIi4vcC1yZXRyeS9pbmRleC5qc1wiO1xuaW1wb3J0IFBRdWV1ZU1vZCBmcm9tIFwicC1xdWV1ZVwiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL2FzeW5jX2NhbGxlci50c1xudmFyIGFzeW5jX2NhbGxlcl9leHBvcnRzID0ge307XG5fX2V4cG9ydChhc3luY19jYWxsZXJfZXhwb3J0cywgeyBBc3luY0NhbGxlcjogKCkgPT4gQXN5bmNDYWxsZXIgfSk7XG5jb25zdCBTVEFUVVNfTk9fUkVUUlkgPSBbXG5cdDQwMCxcblx0NDAxLFxuXHQ0MDIsXG5cdDQwMyxcblx0NDA0LFxuXHQ0MDUsXG5cdDQwNixcblx0NDA3LFxuXHQ0MDlcbl07XG5jb25zdCBkZWZhdWx0RmFpbGVkQXR0ZW1wdEhhbmRsZXIgPSAoZXJyb3IpID0+IHtcblx0aWYgKGVycm9yLm1lc3NhZ2Uuc3RhcnRzV2l0aChcIkNhbmNlbFwiKSB8fCBlcnJvci5tZXNzYWdlLnN0YXJ0c1dpdGgoXCJBYm9ydEVycm9yXCIpIHx8IGVycm9yLm5hbWUgPT09IFwiQWJvcnRFcnJvclwiKSB0aHJvdyBlcnJvcjtcblx0aWYgKGVycm9yPy5jb2RlID09PSBcIkVDT05OQUJPUlRFRFwiKSB0aHJvdyBlcnJvcjtcblx0Y29uc3Qgc3RhdHVzID0gZXJyb3I/LnJlc3BvbnNlPy5zdGF0dXMgPz8gZXJyb3I/LnN0YXR1cztcblx0aWYgKHN0YXR1cyAmJiBTVEFUVVNfTk9fUkVUUlkuaW5jbHVkZXMoK3N0YXR1cykpIHRocm93IGVycm9yO1xuXHRpZiAoZXJyb3I/LmVycm9yPy5jb2RlID09PSBcImluc3VmZmljaWVudF9xdW90YVwiKSB7XG5cdFx0Y29uc3QgZXJyID0gbmV3IEVycm9yKGVycm9yPy5tZXNzYWdlKTtcblx0XHRlcnIubmFtZSA9IFwiSW5zdWZmaWNpZW50UXVvdGFFcnJvclwiO1xuXHRcdHRocm93IGVycjtcblx0fVxufTtcbi8qKlxuKiBBIGNsYXNzIHRoYXQgY2FuIGJlIHVzZWQgdG8gbWFrZSBhc3luYyBjYWxscyB3aXRoIGNvbmN1cnJlbmN5IGFuZCByZXRyeSBsb2dpYy5cbipcbiogVGhpcyBpcyB1c2VmdWwgZm9yIG1ha2luZyBjYWxscyB0byBhbnkga2luZCBvZiBcImV4cGVuc2l2ZVwiIGV4dGVybmFsIHJlc291cmNlLFxuKiBiZSBpdCBiZWNhdXNlIGl0J3MgcmF0ZS1saW1pdGVkLCBzdWJqZWN0IHRvIG5ldHdvcmsgaXNzdWVzLCBldGMuXG4qXG4qIENvbmN1cnJlbnQgY2FsbHMgYXJlIGxpbWl0ZWQgYnkgdGhlIGBtYXhDb25jdXJyZW5jeWAgcGFyYW1ldGVyLCB3aGljaCBkZWZhdWx0c1xuKiB0byBgSW5maW5pdHlgLiBUaGlzIG1lYW5zIHRoYXQgYnkgZGVmYXVsdCwgYWxsIGNhbGxzIHdpbGwgYmUgbWFkZSBpbiBwYXJhbGxlbC5cbipcbiogUmV0cmllcyBhcmUgbGltaXRlZCBieSB0aGUgYG1heFJldHJpZXNgIHBhcmFtZXRlciwgd2hpY2ggZGVmYXVsdHMgdG8gNi4gVGhpc1xuKiBtZWFucyB0aGF0IGJ5IGRlZmF1bHQsIGVhY2ggY2FsbCB3aWxsIGJlIHJldHJpZWQgdXAgdG8gNiB0aW1lcywgd2l0aCBhblxuKiBleHBvbmVudGlhbCBiYWNrb2ZmIGJldHdlZW4gZWFjaCBhdHRlbXB0LlxuKi9cbnZhciBBc3luY0NhbGxlciA9IGNsYXNzIHtcblx0bWF4Q29uY3VycmVuY3k7XG5cdG1heFJldHJpZXM7XG5cdG9uRmFpbGVkQXR0ZW1wdDtcblx0cXVldWU7XG5cdGNvbnN0cnVjdG9yKHBhcmFtcykge1xuXHRcdHRoaXMubWF4Q29uY3VycmVuY3kgPSBwYXJhbXMubWF4Q29uY3VycmVuY3kgPz8gSW5maW5pdHk7XG5cdFx0dGhpcy5tYXhSZXRyaWVzID0gcGFyYW1zLm1heFJldHJpZXMgPz8gNjtcblx0XHR0aGlzLm9uRmFpbGVkQXR0ZW1wdCA9IHBhcmFtcy5vbkZhaWxlZEF0dGVtcHQgPz8gZGVmYXVsdEZhaWxlZEF0dGVtcHRIYW5kbGVyO1xuXHRcdGNvbnN0IFBRdWV1ZSA9IFwiZGVmYXVsdFwiIGluIFBRdWV1ZU1vZCA/IFBRdWV1ZU1vZC5kZWZhdWx0IDogUFF1ZXVlTW9kO1xuXHRcdHRoaXMucXVldWUgPSBuZXcgUFF1ZXVlKHsgY29uY3VycmVuY3k6IHRoaXMubWF4Q29uY3VycmVuY3kgfSk7XG5cdH1cblx0YXN5bmMgY2FsbChjYWxsYWJsZSwgLi4uYXJncykge1xuXHRcdHJldHVybiB0aGlzLnF1ZXVlLmFkZCgoKSA9PiBwUmV0cnkoKCkgPT4gY2FsbGFibGUoLi4uYXJncykuY2F0Y2goKGVycm9yKSA9PiB7XG5cdFx0XHRpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikgdGhyb3cgZXJyb3I7XG5cdFx0XHRlbHNlIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG5cdFx0fSksIHtcblx0XHRcdG9uRmFpbGVkQXR0ZW1wdDogKHsgZXJyb3IgfSkgPT4gdGhpcy5vbkZhaWxlZEF0dGVtcHQ/LihlcnJvciksXG5cdFx0XHRyZXRyaWVzOiB0aGlzLm1heFJldHJpZXMsXG5cdFx0XHRyYW5kb21pemU6IHRydWVcblx0XHR9KSwgeyB0aHJvd09uVGltZW91dDogdHJ1ZSB9KTtcblx0fVxuXHRjYWxsV2l0aE9wdGlvbnMob3B0aW9ucywgY2FsbGFibGUsIC4uLmFyZ3MpIHtcblx0XHRpZiAob3B0aW9ucy5zaWduYWwpIHtcblx0XHRcdGxldCBsaXN0ZW5lcjtcblx0XHRcdHJldHVybiBQcm9taXNlLnJhY2UoW3RoaXMuY2FsbChjYWxsYWJsZSwgLi4uYXJncyksIG5ldyBQcm9taXNlKChfLCByZWplY3QpID0+IHtcblx0XHRcdFx0bGlzdGVuZXIgPSAoKSA9PiB7XG5cdFx0XHRcdFx0cmVqZWN0KGdldEFib3J0U2lnbmFsRXJyb3Iob3B0aW9ucy5zaWduYWwpKTtcblx0XHRcdFx0fTtcblx0XHRcdFx0b3B0aW9ucy5zaWduYWw/LmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBsaXN0ZW5lcik7XG5cdFx0XHR9KV0pLmZpbmFsbHkoKCkgPT4ge1xuXHRcdFx0XHRpZiAob3B0aW9ucy5zaWduYWwgJiYgbGlzdGVuZXIpIG9wdGlvbnMuc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBsaXN0ZW5lcik7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuY2FsbChjYWxsYWJsZSwgLi4uYXJncyk7XG5cdH1cblx0ZmV0Y2goLi4uYXJncykge1xuXHRcdHJldHVybiB0aGlzLmNhbGwoKCkgPT4gZmV0Y2goLi4uYXJncykudGhlbigocmVzKSA9PiByZXMub2sgPyByZXMgOiBQcm9taXNlLnJlamVjdChyZXMpKSk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQXN5bmNDYWxsZXIsIGFzeW5jX2NhbGxlcl9leHBvcnRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hc3luY19jYWxsZXIuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/async_caller.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/callbacks.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/callbacks.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isTracingEnabled: () => (/* binding */ isTracingEnabled)\n/* harmony export */ });\n/* harmony import */ var _env_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./env.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/env.js\");\n\n\n//#region src/utils/callbacks.ts\nconst isTracingEnabled = (tracingEnabled) => {\n\tif (tracingEnabled !== void 0) return tracingEnabled;\n\tconst envVars = [\n\t\t\"LANGSMITH_TRACING_V2\",\n\t\t\"LANGCHAIN_TRACING_V2\",\n\t\t\"LANGSMITH_TRACING\",\n\t\t\"LANGCHAIN_TRACING\"\n\t];\n\treturn !!envVars.find((envVar) => (0,_env_js__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(envVar) === \"true\");\n};\n\n//#endregion\n\n//# sourceMappingURL=callbacks.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvY2FsbGJhY2tzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWtEOztBQUVsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsK0RBQXNCO0FBQ3pEOztBQUVBO0FBQzRCO0FBQzVCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvY2FsbGJhY2tzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEVudmlyb25tZW50VmFyaWFibGUgfSBmcm9tIFwiLi9lbnYuanNcIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy9jYWxsYmFja3MudHNcbmNvbnN0IGlzVHJhY2luZ0VuYWJsZWQgPSAodHJhY2luZ0VuYWJsZWQpID0+IHtcblx0aWYgKHRyYWNpbmdFbmFibGVkICE9PSB2b2lkIDApIHJldHVybiB0cmFjaW5nRW5hYmxlZDtcblx0Y29uc3QgZW52VmFycyA9IFtcblx0XHRcIkxBTkdTTUlUSF9UUkFDSU5HX1YyXCIsXG5cdFx0XCJMQU5HQ0hBSU5fVFJBQ0lOR19WMlwiLFxuXHRcdFwiTEFOR1NNSVRIX1RSQUNJTkdcIixcblx0XHRcIkxBTkdDSEFJTl9UUkFDSU5HXCJcblx0XTtcblx0cmV0dXJuICEhZW52VmFycy5maW5kKChlbnZWYXIpID0+IGdldEVudmlyb25tZW50VmFyaWFibGUoZW52VmFyKSA9PT0gXCJ0cnVlXCIpO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBpc1RyYWNpbmdFbmFibGVkIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYWxsYmFja3MuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/callbacks.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/chunk_array.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/chunk_array.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   chunkArray: () => (/* binding */ chunkArray),\n/* harmony export */   chunk_array_exports: () => (/* binding */ chunk_array_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n\n\n//#region src/utils/chunk_array.ts\nvar chunk_array_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(chunk_array_exports, { chunkArray: () => chunkArray });\nconst chunkArray = (arr, chunkSize) => arr.reduce((chunks, elem, index) => {\n\tconst chunkIndex = Math.floor(index / chunkSize);\n\tconst chunk = chunks[chunkIndex] || [];\n\tchunks[chunkIndex] = chunk.concat([elem]);\n\treturn chunks;\n}, []);\n\n//#endregion\n\n//# sourceMappingURL=chunk_array.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvY2h1bmtfYXJyYXkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTJEOztBQUUzRDtBQUNBO0FBQ0Esc0VBQVEsd0JBQXdCLDhCQUE4QjtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUMyQztBQUMzQyIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2NodW5rX2FycmF5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy9jaHVua19hcnJheS50c1xudmFyIGNodW5rX2FycmF5X2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KGNodW5rX2FycmF5X2V4cG9ydHMsIHsgY2h1bmtBcnJheTogKCkgPT4gY2h1bmtBcnJheSB9KTtcbmNvbnN0IGNodW5rQXJyYXkgPSAoYXJyLCBjaHVua1NpemUpID0+IGFyci5yZWR1Y2UoKGNodW5rcywgZWxlbSwgaW5kZXgpID0+IHtcblx0Y29uc3QgY2h1bmtJbmRleCA9IE1hdGguZmxvb3IoaW5kZXggLyBjaHVua1NpemUpO1xuXHRjb25zdCBjaHVuayA9IGNodW5rc1tjaHVua0luZGV4XSB8fCBbXTtcblx0Y2h1bmtzW2NodW5rSW5kZXhdID0gY2h1bmsuY29uY2F0KFtlbGVtXSk7XG5cdHJldHVybiBjaHVua3M7XG59LCBbXSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY2h1bmtBcnJheSwgY2h1bmtfYXJyYXlfZXhwb3J0cyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2h1bmtfYXJyYXkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/chunk_array.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/context.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/context.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   context: () => (/* binding */ context),\n/* harmony export */   context_exports: () => (/* binding */ context_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n\n\n//#region src/utils/context.ts\nvar context_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(context_exports, { context: () => context });\n/**\n* A tagged template function for creating formatted strings.\n*\n* This utility provides a clean, template literal-based API for string formatting\n* that can be used for prompts, descriptions, and other text formatting needs.\n*\n* It automatically handles whitespace normalization and indentation, making it\n* ideal for multi-line strings in code.\n*\n* When using this utility, it will:\n* - Strip common leading indentation from all lines\n* - Trim leading/trailing whitespace\n* - Align multi-line interpolated values to match indentation\n* - Support escape sequences: `\\\\n` (newline), `\\\\`` (backtick), `\\\\$` (dollar), `\\\\{` (brace)\n*\n* @example\n* ```typescript\n* import { context } from \"@langchain/core/utils/context\";\n*\n* const role = \"agent\";\n* const prompt = context`\n*   You are an ${role}.\n*   Your task is to help users.\n* `;\n* // Returns: \"You are an agent.\\nYour task is to help users.\"\n* ```\n*\n* @example\n* ```typescript\n* // Multi-line interpolated values are aligned\n* const items = \"- Item 1\\n- Item 2\\n- Item 3\";\n* const message = context`\n*   Shopping list:\n*     ${items}\n*   End of list.\n* `;\n* // The items will be indented to match \"    \" (4 spaces)\n* ```\n*/\nfunction context(strings, ...values) {\n\tconst raw = strings.raw;\n\tlet result = \"\";\n\tfor (let i = 0; i < raw.length; i++) {\n\t\tconst next = raw[i].replace(/\\\\\\n[ \\t]*/g, \"\").replace(/\\\\`/g, \"`\").replace(/\\\\\\$/g, \"$\").replace(/\\\\\\{/g, \"{\");\n\t\tresult += next;\n\t\tif (i < values.length) {\n\t\t\tconst value = alignValue(values[i], result);\n\t\t\tresult += typeof value === \"string\" ? value : JSON.stringify(value);\n\t\t}\n\t}\n\tresult = stripIndent(result);\n\tresult = result.trim();\n\tresult = result.replace(/\\\\n/g, \"\\n\");\n\treturn result;\n}\n/**\n* Adjusts the indentation of a multi-line interpolated value to match the current line.\n*\n* @param value - The interpolated value\n* @param precedingText - The text that comes before this value\n* @returns The value with adjusted indentation\n*/\nfunction alignValue(value, precedingText) {\n\tif (typeof value !== \"string\" || !value.includes(\"\\n\")) return value;\n\tconst currentLine = precedingText.slice(precedingText.lastIndexOf(\"\\n\") + 1);\n\tconst indentMatch = currentLine.match(/^(\\s+)/);\n\tif (indentMatch) {\n\t\tconst indent = indentMatch[1];\n\t\treturn value.replace(/\\n/g, `\\n${indent}`);\n\t}\n\treturn value;\n}\n/**\n* Strips common leading indentation from all lines.\n*\n* @param text - The text to process\n* @returns The text with common indentation removed\n*/\nfunction stripIndent(text) {\n\tconst lines = text.split(\"\\n\");\n\tlet minIndent = null;\n\tfor (const line of lines) {\n\t\tconst match = line.match(/^(\\s+)\\S+/);\n\t\tif (match) {\n\t\t\tconst indent = match[1].length;\n\t\t\tif (minIndent === null) minIndent = indent;\n\t\t\telse minIndent = Math.min(minIndent, indent);\n\t\t}\n\t}\n\tif (minIndent === null) return text;\n\treturn lines.map((line) => line[0] === \" \" || line[0] === \"\t\" ? line.slice(minIndent) : line).join(\"\\n\");\n}\n\n//#endregion\n\n//# sourceMappingURL=context.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvY29udGV4dC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMkQ7O0FBRTNEO0FBQ0E7QUFDQSxzRUFBUSxvQkFBb0Isd0JBQXdCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUZBQXFGO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBLFdBQVcsVUFBVTtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsS0FBSztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsZ0JBQWdCO0FBQ2pDLHlHQUF5RyxNQUFNO0FBQy9HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxPQUFPO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDb0M7QUFDcEMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9jb250ZXh0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy9jb250ZXh0LnRzXG52YXIgY29udGV4dF9leHBvcnRzID0ge307XG5fX2V4cG9ydChjb250ZXh0X2V4cG9ydHMsIHsgY29udGV4dDogKCkgPT4gY29udGV4dCB9KTtcbi8qKlxuKiBBIHRhZ2dlZCB0ZW1wbGF0ZSBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgZm9ybWF0dGVkIHN0cmluZ3MuXG4qXG4qIFRoaXMgdXRpbGl0eSBwcm92aWRlcyBhIGNsZWFuLCB0ZW1wbGF0ZSBsaXRlcmFsLWJhc2VkIEFQSSBmb3Igc3RyaW5nIGZvcm1hdHRpbmdcbiogdGhhdCBjYW4gYmUgdXNlZCBmb3IgcHJvbXB0cywgZGVzY3JpcHRpb25zLCBhbmQgb3RoZXIgdGV4dCBmb3JtYXR0aW5nIG5lZWRzLlxuKlxuKiBJdCBhdXRvbWF0aWNhbGx5IGhhbmRsZXMgd2hpdGVzcGFjZSBub3JtYWxpemF0aW9uIGFuZCBpbmRlbnRhdGlvbiwgbWFraW5nIGl0XG4qIGlkZWFsIGZvciBtdWx0aS1saW5lIHN0cmluZ3MgaW4gY29kZS5cbipcbiogV2hlbiB1c2luZyB0aGlzIHV0aWxpdHksIGl0IHdpbGw6XG4qIC0gU3RyaXAgY29tbW9uIGxlYWRpbmcgaW5kZW50YXRpb24gZnJvbSBhbGwgbGluZXNcbiogLSBUcmltIGxlYWRpbmcvdHJhaWxpbmcgd2hpdGVzcGFjZVxuKiAtIEFsaWduIG11bHRpLWxpbmUgaW50ZXJwb2xhdGVkIHZhbHVlcyB0byBtYXRjaCBpbmRlbnRhdGlvblxuKiAtIFN1cHBvcnQgZXNjYXBlIHNlcXVlbmNlczogYFxcXFxuYCAobmV3bGluZSksIGBcXFxcYGAgKGJhY2t0aWNrKSwgYFxcXFwkYCAoZG9sbGFyKSwgYFxcXFx7YCAoYnJhY2UpXG4qXG4qIEBleGFtcGxlXG4qIGBgYHR5cGVzY3JpcHRcbiogaW1wb3J0IHsgY29udGV4dCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvdXRpbHMvY29udGV4dFwiO1xuKlxuKiBjb25zdCByb2xlID0gXCJhZ2VudFwiO1xuKiBjb25zdCBwcm9tcHQgPSBjb250ZXh0YFxuKiAgIFlvdSBhcmUgYW4gJHtyb2xlfS5cbiogICBZb3VyIHRhc2sgaXMgdG8gaGVscCB1c2Vycy5cbiogYDtcbiogLy8gUmV0dXJuczogXCJZb3UgYXJlIGFuIGFnZW50LlxcbllvdXIgdGFzayBpcyB0byBoZWxwIHVzZXJzLlwiXG4qIGBgYFxuKlxuKiBAZXhhbXBsZVxuKiBgYGB0eXBlc2NyaXB0XG4qIC8vIE11bHRpLWxpbmUgaW50ZXJwb2xhdGVkIHZhbHVlcyBhcmUgYWxpZ25lZFxuKiBjb25zdCBpdGVtcyA9IFwiLSBJdGVtIDFcXG4tIEl0ZW0gMlxcbi0gSXRlbSAzXCI7XG4qIGNvbnN0IG1lc3NhZ2UgPSBjb250ZXh0YFxuKiAgIFNob3BwaW5nIGxpc3Q6XG4qICAgICAke2l0ZW1zfVxuKiAgIEVuZCBvZiBsaXN0LlxuKiBgO1xuKiAvLyBUaGUgaXRlbXMgd2lsbCBiZSBpbmRlbnRlZCB0byBtYXRjaCBcIiAgICBcIiAoNCBzcGFjZXMpXG4qIGBgYFxuKi9cbmZ1bmN0aW9uIGNvbnRleHQoc3RyaW5ncywgLi4udmFsdWVzKSB7XG5cdGNvbnN0IHJhdyA9IHN0cmluZ3MucmF3O1xuXHRsZXQgcmVzdWx0ID0gXCJcIjtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCByYXcubGVuZ3RoOyBpKyspIHtcblx0XHRjb25zdCBuZXh0ID0gcmF3W2ldLnJlcGxhY2UoL1xcXFxcXG5bIFxcdF0qL2csIFwiXCIpLnJlcGxhY2UoL1xcXFxgL2csIFwiYFwiKS5yZXBsYWNlKC9cXFxcXFwkL2csIFwiJFwiKS5yZXBsYWNlKC9cXFxcXFx7L2csIFwie1wiKTtcblx0XHRyZXN1bHQgKz0gbmV4dDtcblx0XHRpZiAoaSA8IHZhbHVlcy5sZW5ndGgpIHtcblx0XHRcdGNvbnN0IHZhbHVlID0gYWxpZ25WYWx1ZSh2YWx1ZXNbaV0sIHJlc3VsdCk7XG5cdFx0XHRyZXN1bHQgKz0gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiID8gdmFsdWUgOiBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG5cdFx0fVxuXHR9XG5cdHJlc3VsdCA9IHN0cmlwSW5kZW50KHJlc3VsdCk7XG5cdHJlc3VsdCA9IHJlc3VsdC50cmltKCk7XG5cdHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC9cXFxcbi9nLCBcIlxcblwiKTtcblx0cmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuKiBBZGp1c3RzIHRoZSBpbmRlbnRhdGlvbiBvZiBhIG11bHRpLWxpbmUgaW50ZXJwb2xhdGVkIHZhbHVlIHRvIG1hdGNoIHRoZSBjdXJyZW50IGxpbmUuXG4qXG4qIEBwYXJhbSB2YWx1ZSAtIFRoZSBpbnRlcnBvbGF0ZWQgdmFsdWVcbiogQHBhcmFtIHByZWNlZGluZ1RleHQgLSBUaGUgdGV4dCB0aGF0IGNvbWVzIGJlZm9yZSB0aGlzIHZhbHVlXG4qIEByZXR1cm5zIFRoZSB2YWx1ZSB3aXRoIGFkanVzdGVkIGluZGVudGF0aW9uXG4qL1xuZnVuY3Rpb24gYWxpZ25WYWx1ZSh2YWx1ZSwgcHJlY2VkaW5nVGV4dCkge1xuXHRpZiAodHlwZW9mIHZhbHVlICE9PSBcInN0cmluZ1wiIHx8ICF2YWx1ZS5pbmNsdWRlcyhcIlxcblwiKSkgcmV0dXJuIHZhbHVlO1xuXHRjb25zdCBjdXJyZW50TGluZSA9IHByZWNlZGluZ1RleHQuc2xpY2UocHJlY2VkaW5nVGV4dC5sYXN0SW5kZXhPZihcIlxcblwiKSArIDEpO1xuXHRjb25zdCBpbmRlbnRNYXRjaCA9IGN1cnJlbnRMaW5lLm1hdGNoKC9eKFxccyspLyk7XG5cdGlmIChpbmRlbnRNYXRjaCkge1xuXHRcdGNvbnN0IGluZGVudCA9IGluZGVudE1hdGNoWzFdO1xuXHRcdHJldHVybiB2YWx1ZS5yZXBsYWNlKC9cXG4vZywgYFxcbiR7aW5kZW50fWApO1xuXHR9XG5cdHJldHVybiB2YWx1ZTtcbn1cbi8qKlxuKiBTdHJpcHMgY29tbW9uIGxlYWRpbmcgaW5kZW50YXRpb24gZnJvbSBhbGwgbGluZXMuXG4qXG4qIEBwYXJhbSB0ZXh0IC0gVGhlIHRleHQgdG8gcHJvY2Vzc1xuKiBAcmV0dXJucyBUaGUgdGV4dCB3aXRoIGNvbW1vbiBpbmRlbnRhdGlvbiByZW1vdmVkXG4qL1xuZnVuY3Rpb24gc3RyaXBJbmRlbnQodGV4dCkge1xuXHRjb25zdCBsaW5lcyA9IHRleHQuc3BsaXQoXCJcXG5cIik7XG5cdGxldCBtaW5JbmRlbnQgPSBudWxsO1xuXHRmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcblx0XHRjb25zdCBtYXRjaCA9IGxpbmUubWF0Y2goL14oXFxzKylcXFMrLyk7XG5cdFx0aWYgKG1hdGNoKSB7XG5cdFx0XHRjb25zdCBpbmRlbnQgPSBtYXRjaFsxXS5sZW5ndGg7XG5cdFx0XHRpZiAobWluSW5kZW50ID09PSBudWxsKSBtaW5JbmRlbnQgPSBpbmRlbnQ7XG5cdFx0XHRlbHNlIG1pbkluZGVudCA9IE1hdGgubWluKG1pbkluZGVudCwgaW5kZW50KTtcblx0XHR9XG5cdH1cblx0aWYgKG1pbkluZGVudCA9PT0gbnVsbCkgcmV0dXJuIHRleHQ7XG5cdHJldHVybiBsaW5lcy5tYXAoKGxpbmUpID0+IGxpbmVbMF0gPT09IFwiIFwiIHx8IGxpbmVbMF0gPT09IFwiXHRcIiA/IGxpbmUuc2xpY2UobWluSW5kZW50KSA6IGxpbmUpLmpvaW4oXCJcXG5cIik7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY29udGV4dCwgY29udGV4dF9leHBvcnRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb250ZXh0LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/context.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/env.js":
/*!********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/env.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   env_exports: () => (/* binding */ env_exports),\n/* harmony export */   getEnv: () => (/* binding */ getEnv),\n/* harmony export */   getEnvironmentVariable: () => (/* binding */ getEnvironmentVariable),\n/* harmony export */   getRuntimeEnvironment: () => (/* binding */ getRuntimeEnvironment),\n/* harmony export */   isBrowser: () => (/* binding */ isBrowser),\n/* harmony export */   isDeno: () => (/* binding */ isDeno),\n/* harmony export */   isJsDom: () => (/* binding */ isJsDom),\n/* harmony export */   isNode: () => (/* binding */ isNode),\n/* harmony export */   isWebWorker: () => (/* binding */ isWebWorker)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n\n\n//#region src/utils/env.ts\nvar env_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(env_exports, {\n\tgetEnv: () => getEnv,\n\tgetEnvironmentVariable: () => getEnvironmentVariable,\n\tgetRuntimeEnvironment: () => getRuntimeEnvironment,\n\tisBrowser: () => isBrowser,\n\tisDeno: () => isDeno,\n\tisJsDom: () => isJsDom,\n\tisNode: () => isNode,\n\tisWebWorker: () => isWebWorker\n});\nconst isBrowser = () => typeof window !== \"undefined\" && typeof window.document !== \"undefined\";\nconst isWebWorker = () => typeof globalThis === \"object\" && globalThis.constructor && globalThis.constructor.name === \"DedicatedWorkerGlobalScope\";\nconst isJsDom = () => typeof window !== \"undefined\" && window.name === \"nodejs\" || typeof navigator !== \"undefined\" && navigator.userAgent.includes(\"jsdom\");\nconst isDeno = () => typeof Deno !== \"undefined\";\nconst isNode = () => typeof process !== \"undefined\" && typeof process.versions !== \"undefined\" && typeof process.versions.node !== \"undefined\" && !isDeno();\nconst getEnv = () => {\n\tlet env;\n\tif (isBrowser()) env = \"browser\";\n\telse if (isNode()) env = \"node\";\n\telse if (isWebWorker()) env = \"webworker\";\n\telse if (isJsDom()) env = \"jsdom\";\n\telse if (isDeno()) env = \"deno\";\n\telse env = \"other\";\n\treturn env;\n};\nlet runtimeEnvironment;\nfunction getRuntimeEnvironment() {\n\tif (runtimeEnvironment === void 0) {\n\t\tconst env = getEnv();\n\t\truntimeEnvironment = {\n\t\t\tlibrary: \"langchain-js\",\n\t\t\truntime: env\n\t\t};\n\t}\n\treturn runtimeEnvironment;\n}\nfunction getEnvironmentVariable(name) {\n\ttry {\n\t\tif (typeof process !== \"undefined\") return process.env?.[name];\n\t\telse if (isDeno()) return Deno?.env.get(name);\n\t\telse return void 0;\n\t} catch {\n\t\treturn void 0;\n\t}\n}\n\n//#endregion\n\n//# sourceMappingURL=env.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZW52LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBMkQ7O0FBRTNEO0FBQ0E7QUFDQSxzRUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQytIO0FBQy9IIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZW52LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy9lbnYudHNcbnZhciBlbnZfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQoZW52X2V4cG9ydHMsIHtcblx0Z2V0RW52OiAoKSA9PiBnZXRFbnYsXG5cdGdldEVudmlyb25tZW50VmFyaWFibGU6ICgpID0+IGdldEVudmlyb25tZW50VmFyaWFibGUsXG5cdGdldFJ1bnRpbWVFbnZpcm9ubWVudDogKCkgPT4gZ2V0UnVudGltZUVudmlyb25tZW50LFxuXHRpc0Jyb3dzZXI6ICgpID0+IGlzQnJvd3Nlcixcblx0aXNEZW5vOiAoKSA9PiBpc0Rlbm8sXG5cdGlzSnNEb206ICgpID0+IGlzSnNEb20sXG5cdGlzTm9kZTogKCkgPT4gaXNOb2RlLFxuXHRpc1dlYldvcmtlcjogKCkgPT4gaXNXZWJXb3JrZXJcbn0pO1xuY29uc3QgaXNCcm93c2VyID0gKCkgPT4gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2Ygd2luZG93LmRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiO1xuY29uc3QgaXNXZWJXb3JrZXIgPSAoKSA9PiB0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gXCJvYmplY3RcIiAmJiBnbG9iYWxUaGlzLmNvbnN0cnVjdG9yICYmIGdsb2JhbFRoaXMuY29uc3RydWN0b3IubmFtZSA9PT0gXCJEZWRpY2F0ZWRXb3JrZXJHbG9iYWxTY29wZVwiO1xuY29uc3QgaXNKc0RvbSA9ICgpID0+IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93Lm5hbWUgPT09IFwibm9kZWpzXCIgfHwgdHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKFwianNkb21cIik7XG5jb25zdCBpc0Rlbm8gPSAoKSA9PiB0eXBlb2YgRGVubyAhPT0gXCJ1bmRlZmluZWRcIjtcbmNvbnN0IGlzTm9kZSA9ICgpID0+IHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBwcm9jZXNzLnZlcnNpb25zICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBwcm9jZXNzLnZlcnNpb25zLm5vZGUgIT09IFwidW5kZWZpbmVkXCIgJiYgIWlzRGVubygpO1xuY29uc3QgZ2V0RW52ID0gKCkgPT4ge1xuXHRsZXQgZW52O1xuXHRpZiAoaXNCcm93c2VyKCkpIGVudiA9IFwiYnJvd3NlclwiO1xuXHRlbHNlIGlmIChpc05vZGUoKSkgZW52ID0gXCJub2RlXCI7XG5cdGVsc2UgaWYgKGlzV2ViV29ya2VyKCkpIGVudiA9IFwid2Vid29ya2VyXCI7XG5cdGVsc2UgaWYgKGlzSnNEb20oKSkgZW52ID0gXCJqc2RvbVwiO1xuXHRlbHNlIGlmIChpc0Rlbm8oKSkgZW52ID0gXCJkZW5vXCI7XG5cdGVsc2UgZW52ID0gXCJvdGhlclwiO1xuXHRyZXR1cm4gZW52O1xufTtcbmxldCBydW50aW1lRW52aXJvbm1lbnQ7XG5mdW5jdGlvbiBnZXRSdW50aW1lRW52aXJvbm1lbnQoKSB7XG5cdGlmIChydW50aW1lRW52aXJvbm1lbnQgPT09IHZvaWQgMCkge1xuXHRcdGNvbnN0IGVudiA9IGdldEVudigpO1xuXHRcdHJ1bnRpbWVFbnZpcm9ubWVudCA9IHtcblx0XHRcdGxpYnJhcnk6IFwibGFuZ2NoYWluLWpzXCIsXG5cdFx0XHRydW50aW1lOiBlbnZcblx0XHR9O1xuXHR9XG5cdHJldHVybiBydW50aW1lRW52aXJvbm1lbnQ7XG59XG5mdW5jdGlvbiBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKG5hbWUpIHtcblx0dHJ5IHtcblx0XHRpZiAodHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBwcm9jZXNzLmVudj8uW25hbWVdO1xuXHRcdGVsc2UgaWYgKGlzRGVubygpKSByZXR1cm4gRGVubz8uZW52LmdldChuYW1lKTtcblx0XHRlbHNlIHJldHVybiB2b2lkIDA7XG5cdH0gY2F0Y2gge1xuXHRcdHJldHVybiB2b2lkIDA7XG5cdH1cbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBlbnZfZXhwb3J0cywgZ2V0RW52LCBnZXRFbnZpcm9ubWVudFZhcmlhYmxlLCBnZXRSdW50aW1lRW52aXJvbm1lbnQsIGlzQnJvd3NlciwgaXNEZW5vLCBpc0pzRG9tLCBpc05vZGUsIGlzV2ViV29ya2VyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbnYuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/env.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/event_source_parse.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/event_source_parse.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EventStreamContentType: () => (/* binding */ EventStreamContentType),\n/* harmony export */   convertEventStreamToIterableReadableDataStream: () => (/* binding */ convertEventStreamToIterableReadableDataStream),\n/* harmony export */   event_source_parse_exports: () => (/* binding */ event_source_parse_exports),\n/* harmony export */   getBytes: () => (/* binding */ getBytes),\n/* harmony export */   getLines: () => (/* binding */ getLines),\n/* harmony export */   getMessages: () => (/* binding */ getMessages)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _stream_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stream.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/stream.js\");\n\n\n\n//#region src/utils/event_source_parse.ts\nvar event_source_parse_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(event_source_parse_exports, {\n\tEventStreamContentType: () => EventStreamContentType,\n\tconvertEventStreamToIterableReadableDataStream: () => convertEventStreamToIterableReadableDataStream,\n\tgetBytes: () => getBytes,\n\tgetLines: () => getLines,\n\tgetMessages: () => getMessages\n});\nconst EventStreamContentType = \"text/event-stream\";\n/**\n* Converts a ReadableStream into a callback pattern.\n* @param stream The input ReadableStream.\n* @param onChunk A function that will be called on each new byte chunk in the stream.\n* @returns {Promise<void>} A promise that will be resolved when the stream closes.\n*/\nasync function getBytes(stream, onChunk) {\n\tif (stream instanceof ReadableStream) {\n\t\tconst reader = stream.getReader();\n\t\twhile (true) {\n\t\t\tconst result = await reader.read();\n\t\t\tif (result.done) {\n\t\t\t\tonChunk(new Uint8Array(), true);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tonChunk(result.value);\n\t\t}\n\t} else try {\n\t\tfor await (const chunk of stream) onChunk(new Uint8Array(chunk));\n\t\tonChunk(new Uint8Array(), true);\n\t} catch (e) {\n\t\tthrow new Error([\n\t\t\t\"Parsing event source stream failed.\",\n\t\t\t\"Ensure your implementation of fetch returns a web or Node readable stream.\",\n\t\t\t`Error: ${e.message}`\n\t\t].join(\"\\n\"));\n\t}\n}\nvar ControlChars = /* @__PURE__ */ function(ControlChars$1) {\n\tControlChars$1[ControlChars$1[\"NewLine\"] = 10] = \"NewLine\";\n\tControlChars$1[ControlChars$1[\"CarriageReturn\"] = 13] = \"CarriageReturn\";\n\tControlChars$1[ControlChars$1[\"Space\"] = 32] = \"Space\";\n\tControlChars$1[ControlChars$1[\"Colon\"] = 58] = \"Colon\";\n\treturn ControlChars$1;\n}(ControlChars || {});\n/**\n* Parses arbitary byte chunks into EventSource line buffers.\n* Each line should be of the format \"field: value\" and ends with \\r, \\n, or \\r\\n.\n* @param onLine A function that will be called on each new EventSource line.\n* @returns A function that should be called for each incoming byte chunk.\n*/\nfunction getLines(onLine) {\n\tlet buffer;\n\tlet position;\n\tlet fieldLength;\n\tlet discardTrailingNewline = false;\n\treturn function onChunk(arr, flush) {\n\t\tif (flush) {\n\t\t\tonLine(arr, 0, true);\n\t\t\treturn;\n\t\t}\n\t\tif (buffer === void 0) {\n\t\t\tbuffer = arr;\n\t\t\tposition = 0;\n\t\t\tfieldLength = -1;\n\t\t} else buffer = concat(buffer, arr);\n\t\tconst bufLength = buffer.length;\n\t\tlet lineStart = 0;\n\t\twhile (position < bufLength) {\n\t\t\tif (discardTrailingNewline) {\n\t\t\t\tif (buffer[position] === ControlChars.NewLine) lineStart = ++position;\n\t\t\t\tdiscardTrailingNewline = false;\n\t\t\t}\n\t\t\tlet lineEnd = -1;\n\t\t\tfor (; position < bufLength && lineEnd === -1; ++position) switch (buffer[position]) {\n\t\t\t\tcase ControlChars.Colon:\n\t\t\t\t\tif (fieldLength === -1) fieldLength = position - lineStart;\n\t\t\t\t\tbreak;\n\t\t\t\tcase ControlChars.CarriageReturn: discardTrailingNewline = true;\n\t\t\t\tcase ControlChars.NewLine:\n\t\t\t\t\tlineEnd = position;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (lineEnd === -1) break;\n\t\t\tonLine(buffer.subarray(lineStart, lineEnd), fieldLength);\n\t\t\tlineStart = position;\n\t\t\tfieldLength = -1;\n\t\t}\n\t\tif (lineStart === bufLength) buffer = void 0;\n\t\telse if (lineStart !== 0) {\n\t\t\tbuffer = buffer.subarray(lineStart);\n\t\t\tposition -= lineStart;\n\t\t}\n\t};\n}\n/**\n* Parses line buffers into EventSourceMessages.\n* @param onId A function that will be called on each `id` field.\n* @param onRetry A function that will be called on each `retry` field.\n* @param onMessage A function that will be called on each message.\n* @returns A function that should be called for each incoming line buffer.\n*/\nfunction getMessages(onMessage, onId, onRetry) {\n\tlet message = newMessage();\n\tconst decoder = new TextDecoder();\n\treturn function onLine(line, fieldLength, flush) {\n\t\tif (flush) {\n\t\t\tif (!isEmpty(message)) {\n\t\t\t\tonMessage?.(message);\n\t\t\t\tmessage = newMessage();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tif (line.length === 0) {\n\t\t\tonMessage?.(message);\n\t\t\tmessage = newMessage();\n\t\t} else if (fieldLength > 0) {\n\t\t\tconst field = decoder.decode(line.subarray(0, fieldLength));\n\t\t\tconst valueOffset = fieldLength + (line[fieldLength + 1] === ControlChars.Space ? 2 : 1);\n\t\t\tconst value = decoder.decode(line.subarray(valueOffset));\n\t\t\tswitch (field) {\n\t\t\t\tcase \"data\":\n\t\t\t\t\tmessage.data = message.data ? message.data + \"\\n\" + value : value;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"event\":\n\t\t\t\t\tmessage.event = value;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"id\":\n\t\t\t\t\tonId?.(message.id = value);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"retry\": {\n\t\t\t\t\tconst retry = parseInt(value, 10);\n\t\t\t\t\tif (!Number.isNaN(retry)) onRetry?.(message.retry = retry);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\nfunction concat(a, b) {\n\tconst res = new Uint8Array(a.length + b.length);\n\tres.set(a);\n\tres.set(b, a.length);\n\treturn res;\n}\nfunction newMessage() {\n\treturn {\n\t\tdata: \"\",\n\t\tevent: \"\",\n\t\tid: \"\",\n\t\tretry: void 0\n\t};\n}\nfunction convertEventStreamToIterableReadableDataStream(stream, onMetadataEvent) {\n\tconst dataStream = new ReadableStream({ async start(controller) {\n\t\tconst enqueueLine = getMessages((msg) => {\n\t\t\tif (msg.event === \"error\") throw new Error(msg.data ?? \"Unspecified event streaming error.\");\n\t\t\telse if (msg.event === \"metadata\") onMetadataEvent?.(msg);\n\t\t\telse if (msg.data) controller.enqueue(msg.data);\n\t\t});\n\t\tconst onLine = (line, fieldLength, flush) => {\n\t\t\tenqueueLine(line, fieldLength, flush);\n\t\t\tif (flush) controller.close();\n\t\t};\n\t\tawait getBytes(stream, getLines(onLine));\n\t} });\n\treturn _stream_js__WEBPACK_IMPORTED_MODULE_1__.IterableReadableStream.fromReadableStream(dataStream);\n}\nfunction isEmpty(message) {\n\treturn message.data === \"\" && message.event === \"\" && message.id === \"\" && message.retry === void 0;\n}\n\n//#endregion\n\n//# sourceMappingURL=event_source_parse.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZXZlbnRfc291cmNlX3BhcnNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQTJEO0FBQ047O0FBRXJEO0FBQ0E7QUFDQSxzRUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZUFBZTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxhQUFhLFVBQVU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxtQkFBbUI7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSx3Q0FBd0M7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLFFBQVEsOERBQXNCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQytJO0FBQy9JIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZXZlbnRfc291cmNlX3BhcnNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0gfSBmcm9tIFwiLi9zdHJlYW0uanNcIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy9ldmVudF9zb3VyY2VfcGFyc2UudHNcbnZhciBldmVudF9zb3VyY2VfcGFyc2VfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQoZXZlbnRfc291cmNlX3BhcnNlX2V4cG9ydHMsIHtcblx0RXZlbnRTdHJlYW1Db250ZW50VHlwZTogKCkgPT4gRXZlbnRTdHJlYW1Db250ZW50VHlwZSxcblx0Y29udmVydEV2ZW50U3RyZWFtVG9JdGVyYWJsZVJlYWRhYmxlRGF0YVN0cmVhbTogKCkgPT4gY29udmVydEV2ZW50U3RyZWFtVG9JdGVyYWJsZVJlYWRhYmxlRGF0YVN0cmVhbSxcblx0Z2V0Qnl0ZXM6ICgpID0+IGdldEJ5dGVzLFxuXHRnZXRMaW5lczogKCkgPT4gZ2V0TGluZXMsXG5cdGdldE1lc3NhZ2VzOiAoKSA9PiBnZXRNZXNzYWdlc1xufSk7XG5jb25zdCBFdmVudFN0cmVhbUNvbnRlbnRUeXBlID0gXCJ0ZXh0L2V2ZW50LXN0cmVhbVwiO1xuLyoqXG4qIENvbnZlcnRzIGEgUmVhZGFibGVTdHJlYW0gaW50byBhIGNhbGxiYWNrIHBhdHRlcm4uXG4qIEBwYXJhbSBzdHJlYW0gVGhlIGlucHV0IFJlYWRhYmxlU3RyZWFtLlxuKiBAcGFyYW0gb25DaHVuayBBIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgb24gZWFjaCBuZXcgYnl0ZSBjaHVuayBpbiB0aGUgc3RyZWFtLlxuKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn0gQSBwcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aGVuIHRoZSBzdHJlYW0gY2xvc2VzLlxuKi9cbmFzeW5jIGZ1bmN0aW9uIGdldEJ5dGVzKHN0cmVhbSwgb25DaHVuaykge1xuXHRpZiAoc3RyZWFtIGluc3RhbmNlb2YgUmVhZGFibGVTdHJlYW0pIHtcblx0XHRjb25zdCByZWFkZXIgPSBzdHJlYW0uZ2V0UmVhZGVyKCk7XG5cdFx0d2hpbGUgKHRydWUpIHtcblx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XG5cdFx0XHRpZiAocmVzdWx0LmRvbmUpIHtcblx0XHRcdFx0b25DaHVuayhuZXcgVWludDhBcnJheSgpLCB0cnVlKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRvbkNodW5rKHJlc3VsdC52YWx1ZSk7XG5cdFx0fVxuXHR9IGVsc2UgdHJ5IHtcblx0XHRmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHN0cmVhbSkgb25DaHVuayhuZXcgVWludDhBcnJheShjaHVuaykpO1xuXHRcdG9uQ2h1bmsobmV3IFVpbnQ4QXJyYXkoKSwgdHJ1ZSk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoW1xuXHRcdFx0XCJQYXJzaW5nIGV2ZW50IHNvdXJjZSBzdHJlYW0gZmFpbGVkLlwiLFxuXHRcdFx0XCJFbnN1cmUgeW91ciBpbXBsZW1lbnRhdGlvbiBvZiBmZXRjaCByZXR1cm5zIGEgd2ViIG9yIE5vZGUgcmVhZGFibGUgc3RyZWFtLlwiLFxuXHRcdFx0YEVycm9yOiAke2UubWVzc2FnZX1gXG5cdFx0XS5qb2luKFwiXFxuXCIpKTtcblx0fVxufVxudmFyIENvbnRyb2xDaGFycyA9IC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbihDb250cm9sQ2hhcnMkMSkge1xuXHRDb250cm9sQ2hhcnMkMVtDb250cm9sQ2hhcnMkMVtcIk5ld0xpbmVcIl0gPSAxMF0gPSBcIk5ld0xpbmVcIjtcblx0Q29udHJvbENoYXJzJDFbQ29udHJvbENoYXJzJDFbXCJDYXJyaWFnZVJldHVyblwiXSA9IDEzXSA9IFwiQ2FycmlhZ2VSZXR1cm5cIjtcblx0Q29udHJvbENoYXJzJDFbQ29udHJvbENoYXJzJDFbXCJTcGFjZVwiXSA9IDMyXSA9IFwiU3BhY2VcIjtcblx0Q29udHJvbENoYXJzJDFbQ29udHJvbENoYXJzJDFbXCJDb2xvblwiXSA9IDU4XSA9IFwiQ29sb25cIjtcblx0cmV0dXJuIENvbnRyb2xDaGFycyQxO1xufShDb250cm9sQ2hhcnMgfHwge30pO1xuLyoqXG4qIFBhcnNlcyBhcmJpdGFyeSBieXRlIGNodW5rcyBpbnRvIEV2ZW50U291cmNlIGxpbmUgYnVmZmVycy5cbiogRWFjaCBsaW5lIHNob3VsZCBiZSBvZiB0aGUgZm9ybWF0IFwiZmllbGQ6IHZhbHVlXCIgYW5kIGVuZHMgd2l0aCBcXHIsIFxcbiwgb3IgXFxyXFxuLlxuKiBAcGFyYW0gb25MaW5lIEEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCBvbiBlYWNoIG5ldyBFdmVudFNvdXJjZSBsaW5lLlxuKiBAcmV0dXJucyBBIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGJlIGNhbGxlZCBmb3IgZWFjaCBpbmNvbWluZyBieXRlIGNodW5rLlxuKi9cbmZ1bmN0aW9uIGdldExpbmVzKG9uTGluZSkge1xuXHRsZXQgYnVmZmVyO1xuXHRsZXQgcG9zaXRpb247XG5cdGxldCBmaWVsZExlbmd0aDtcblx0bGV0IGRpc2NhcmRUcmFpbGluZ05ld2xpbmUgPSBmYWxzZTtcblx0cmV0dXJuIGZ1bmN0aW9uIG9uQ2h1bmsoYXJyLCBmbHVzaCkge1xuXHRcdGlmIChmbHVzaCkge1xuXHRcdFx0b25MaW5lKGFyciwgMCwgdHJ1ZSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmIChidWZmZXIgPT09IHZvaWQgMCkge1xuXHRcdFx0YnVmZmVyID0gYXJyO1xuXHRcdFx0cG9zaXRpb24gPSAwO1xuXHRcdFx0ZmllbGRMZW5ndGggPSAtMTtcblx0XHR9IGVsc2UgYnVmZmVyID0gY29uY2F0KGJ1ZmZlciwgYXJyKTtcblx0XHRjb25zdCBidWZMZW5ndGggPSBidWZmZXIubGVuZ3RoO1xuXHRcdGxldCBsaW5lU3RhcnQgPSAwO1xuXHRcdHdoaWxlIChwb3NpdGlvbiA8IGJ1Zkxlbmd0aCkge1xuXHRcdFx0aWYgKGRpc2NhcmRUcmFpbGluZ05ld2xpbmUpIHtcblx0XHRcdFx0aWYgKGJ1ZmZlcltwb3NpdGlvbl0gPT09IENvbnRyb2xDaGFycy5OZXdMaW5lKSBsaW5lU3RhcnQgPSArK3Bvc2l0aW9uO1xuXHRcdFx0XHRkaXNjYXJkVHJhaWxpbmdOZXdsaW5lID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRsZXQgbGluZUVuZCA9IC0xO1xuXHRcdFx0Zm9yICg7IHBvc2l0aW9uIDwgYnVmTGVuZ3RoICYmIGxpbmVFbmQgPT09IC0xOyArK3Bvc2l0aW9uKSBzd2l0Y2ggKGJ1ZmZlcltwb3NpdGlvbl0pIHtcblx0XHRcdFx0Y2FzZSBDb250cm9sQ2hhcnMuQ29sb246XG5cdFx0XHRcdFx0aWYgKGZpZWxkTGVuZ3RoID09PSAtMSkgZmllbGRMZW5ndGggPSBwb3NpdGlvbiAtIGxpbmVTdGFydDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBDb250cm9sQ2hhcnMuQ2FycmlhZ2VSZXR1cm46IGRpc2NhcmRUcmFpbGluZ05ld2xpbmUgPSB0cnVlO1xuXHRcdFx0XHRjYXNlIENvbnRyb2xDaGFycy5OZXdMaW5lOlxuXHRcdFx0XHRcdGxpbmVFbmQgPSBwb3NpdGlvbjtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGlmIChsaW5lRW5kID09PSAtMSkgYnJlYWs7XG5cdFx0XHRvbkxpbmUoYnVmZmVyLnN1YmFycmF5KGxpbmVTdGFydCwgbGluZUVuZCksIGZpZWxkTGVuZ3RoKTtcblx0XHRcdGxpbmVTdGFydCA9IHBvc2l0aW9uO1xuXHRcdFx0ZmllbGRMZW5ndGggPSAtMTtcblx0XHR9XG5cdFx0aWYgKGxpbmVTdGFydCA9PT0gYnVmTGVuZ3RoKSBidWZmZXIgPSB2b2lkIDA7XG5cdFx0ZWxzZSBpZiAobGluZVN0YXJ0ICE9PSAwKSB7XG5cdFx0XHRidWZmZXIgPSBidWZmZXIuc3ViYXJyYXkobGluZVN0YXJ0KTtcblx0XHRcdHBvc2l0aW9uIC09IGxpbmVTdGFydDtcblx0XHR9XG5cdH07XG59XG4vKipcbiogUGFyc2VzIGxpbmUgYnVmZmVycyBpbnRvIEV2ZW50U291cmNlTWVzc2FnZXMuXG4qIEBwYXJhbSBvbklkIEEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCBvbiBlYWNoIGBpZGAgZmllbGQuXG4qIEBwYXJhbSBvblJldHJ5IEEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCBvbiBlYWNoIGByZXRyeWAgZmllbGQuXG4qIEBwYXJhbSBvbk1lc3NhZ2UgQSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIG9uIGVhY2ggbWVzc2FnZS5cbiogQHJldHVybnMgQSBmdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBjYWxsZWQgZm9yIGVhY2ggaW5jb21pbmcgbGluZSBidWZmZXIuXG4qL1xuZnVuY3Rpb24gZ2V0TWVzc2FnZXMob25NZXNzYWdlLCBvbklkLCBvblJldHJ5KSB7XG5cdGxldCBtZXNzYWdlID0gbmV3TWVzc2FnZSgpO1xuXHRjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG5cdHJldHVybiBmdW5jdGlvbiBvbkxpbmUobGluZSwgZmllbGRMZW5ndGgsIGZsdXNoKSB7XG5cdFx0aWYgKGZsdXNoKSB7XG5cdFx0XHRpZiAoIWlzRW1wdHkobWVzc2FnZSkpIHtcblx0XHRcdFx0b25NZXNzYWdlPy4obWVzc2FnZSk7XG5cdFx0XHRcdG1lc3NhZ2UgPSBuZXdNZXNzYWdlKCk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmIChsaW5lLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0b25NZXNzYWdlPy4obWVzc2FnZSk7XG5cdFx0XHRtZXNzYWdlID0gbmV3TWVzc2FnZSgpO1xuXHRcdH0gZWxzZSBpZiAoZmllbGRMZW5ndGggPiAwKSB7XG5cdFx0XHRjb25zdCBmaWVsZCA9IGRlY29kZXIuZGVjb2RlKGxpbmUuc3ViYXJyYXkoMCwgZmllbGRMZW5ndGgpKTtcblx0XHRcdGNvbnN0IHZhbHVlT2Zmc2V0ID0gZmllbGRMZW5ndGggKyAobGluZVtmaWVsZExlbmd0aCArIDFdID09PSBDb250cm9sQ2hhcnMuU3BhY2UgPyAyIDogMSk7XG5cdFx0XHRjb25zdCB2YWx1ZSA9IGRlY29kZXIuZGVjb2RlKGxpbmUuc3ViYXJyYXkodmFsdWVPZmZzZXQpKTtcblx0XHRcdHN3aXRjaCAoZmllbGQpIHtcblx0XHRcdFx0Y2FzZSBcImRhdGFcIjpcblx0XHRcdFx0XHRtZXNzYWdlLmRhdGEgPSBtZXNzYWdlLmRhdGEgPyBtZXNzYWdlLmRhdGEgKyBcIlxcblwiICsgdmFsdWUgOiB2YWx1ZTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcImV2ZW50XCI6XG5cdFx0XHRcdFx0bWVzc2FnZS5ldmVudCA9IHZhbHVlO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwiaWRcIjpcblx0XHRcdFx0XHRvbklkPy4obWVzc2FnZS5pZCA9IHZhbHVlKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcInJldHJ5XCI6IHtcblx0XHRcdFx0XHRjb25zdCByZXRyeSA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG5cdFx0XHRcdFx0aWYgKCFOdW1iZXIuaXNOYU4ocmV0cnkpKSBvblJldHJ5Py4obWVzc2FnZS5yZXRyeSA9IHJldHJ5KTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn1cbmZ1bmN0aW9uIGNvbmNhdChhLCBiKSB7XG5cdGNvbnN0IHJlcyA9IG5ldyBVaW50OEFycmF5KGEubGVuZ3RoICsgYi5sZW5ndGgpO1xuXHRyZXMuc2V0KGEpO1xuXHRyZXMuc2V0KGIsIGEubGVuZ3RoKTtcblx0cmV0dXJuIHJlcztcbn1cbmZ1bmN0aW9uIG5ld01lc3NhZ2UoKSB7XG5cdHJldHVybiB7XG5cdFx0ZGF0YTogXCJcIixcblx0XHRldmVudDogXCJcIixcblx0XHRpZDogXCJcIixcblx0XHRyZXRyeTogdm9pZCAwXG5cdH07XG59XG5mdW5jdGlvbiBjb252ZXJ0RXZlbnRTdHJlYW1Ub0l0ZXJhYmxlUmVhZGFibGVEYXRhU3RyZWFtKHN0cmVhbSwgb25NZXRhZGF0YUV2ZW50KSB7XG5cdGNvbnN0IGRhdGFTdHJlYW0gPSBuZXcgUmVhZGFibGVTdHJlYW0oeyBhc3luYyBzdGFydChjb250cm9sbGVyKSB7XG5cdFx0Y29uc3QgZW5xdWV1ZUxpbmUgPSBnZXRNZXNzYWdlcygobXNnKSA9PiB7XG5cdFx0XHRpZiAobXNnLmV2ZW50ID09PSBcImVycm9yXCIpIHRocm93IG5ldyBFcnJvcihtc2cuZGF0YSA/PyBcIlVuc3BlY2lmaWVkIGV2ZW50IHN0cmVhbWluZyBlcnJvci5cIik7XG5cdFx0XHRlbHNlIGlmIChtc2cuZXZlbnQgPT09IFwibWV0YWRhdGFcIikgb25NZXRhZGF0YUV2ZW50Py4obXNnKTtcblx0XHRcdGVsc2UgaWYgKG1zZy5kYXRhKSBjb250cm9sbGVyLmVucXVldWUobXNnLmRhdGEpO1xuXHRcdH0pO1xuXHRcdGNvbnN0IG9uTGluZSA9IChsaW5lLCBmaWVsZExlbmd0aCwgZmx1c2gpID0+IHtcblx0XHRcdGVucXVldWVMaW5lKGxpbmUsIGZpZWxkTGVuZ3RoLCBmbHVzaCk7XG5cdFx0XHRpZiAoZmx1c2gpIGNvbnRyb2xsZXIuY2xvc2UoKTtcblx0XHR9O1xuXHRcdGF3YWl0IGdldEJ5dGVzKHN0cmVhbSwgZ2V0TGluZXMob25MaW5lKSk7XG5cdH0gfSk7XG5cdHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21SZWFkYWJsZVN0cmVhbShkYXRhU3RyZWFtKTtcbn1cbmZ1bmN0aW9uIGlzRW1wdHkobWVzc2FnZSkge1xuXHRyZXR1cm4gbWVzc2FnZS5kYXRhID09PSBcIlwiICYmIG1lc3NhZ2UuZXZlbnQgPT09IFwiXCIgJiYgbWVzc2FnZS5pZCA9PT0gXCJcIiAmJiBtZXNzYWdlLnJldHJ5ID09PSB2b2lkIDA7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgRXZlbnRTdHJlYW1Db250ZW50VHlwZSwgY29udmVydEV2ZW50U3RyZWFtVG9JdGVyYWJsZVJlYWRhYmxlRGF0YVN0cmVhbSwgZXZlbnRfc291cmNlX3BhcnNlX2V4cG9ydHMsIGdldEJ5dGVzLCBnZXRMaW5lcywgZ2V0TWVzc2FnZXMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZW50X3NvdXJjZV9wYXJzZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/event_source_parse.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _src_helpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/helpers.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n/* harmony import */ var _src_core_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./src/core.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\");\n/* harmony import */ var _src_duplex_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/duplex.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js\");\n\n\n\n\n//#region src/utils/fast-json-patch/index.ts\nvar fast_json_patch_default = {\n\t..._src_core_js__WEBPACK_IMPORTED_MODULE_1__.core_exports,\n\tJsonPatchError: _src_helpers_js__WEBPACK_IMPORTED_MODULE_0__.PatchError,\n\tdeepClone: _src_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone,\n\tescapePathComponent: _src_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent,\n\tunescapePathComponent: _src_helpers_js__WEBPACK_IMPORTED_MODULE_0__.unescapePathComponent\n};\n\n//#endregion\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBc0c7QUFDcUM7QUFDakc7O0FBRTFDO0FBQ0E7QUFDQSxJQUFJLHNEQUFZO0FBQ2hCLGlCQUFpQix1REFBVTtBQUMzQixZQUFZLHVEQUFVO0FBQ3RCLG9CQUFvQjtBQUNwQixzQkFBc0I7QUFDdEI7O0FBRUE7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2Zhc3QtanNvbi1wYXRjaC9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYXRjaEVycm9yLCBfZGVlcENsb25lLCBlc2NhcGVQYXRoQ29tcG9uZW50LCB1bmVzY2FwZVBhdGhDb21wb25lbnQgfSBmcm9tIFwiLi9zcmMvaGVscGVycy5qc1wiO1xuaW1wb3J0IHsgX2FyZUVxdWFscywgYXBwbHlPcGVyYXRpb24sIGFwcGx5UGF0Y2gsIGFwcGx5UmVkdWNlciwgY29yZV9leHBvcnRzLCBnZXRWYWx1ZUJ5UG9pbnRlciwgdmFsaWRhdGUsIHZhbGlkYXRvciB9IGZyb20gXCIuL3NyYy9jb3JlLmpzXCI7XG5pbXBvcnQgeyBjb21wYXJlIH0gZnJvbSBcIi4vc3JjL2R1cGxleC5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL2Zhc3QtanNvbi1wYXRjaC9pbmRleC50c1xudmFyIGZhc3RfanNvbl9wYXRjaF9kZWZhdWx0ID0ge1xuXHQuLi5jb3JlX2V4cG9ydHMsXG5cdEpzb25QYXRjaEVycm9yOiBQYXRjaEVycm9yLFxuXHRkZWVwQ2xvbmU6IF9kZWVwQ2xvbmUsXG5cdGVzY2FwZVBhdGhDb21wb25lbnQsXG5cdHVuZXNjYXBlUGF0aENvbXBvbmVudFxufTtcblxuLy8jZW5kcmVnaW9uXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _areEquals: () => (/* binding */ _areEquals),\n/* harmony export */   applyOperation: () => (/* binding */ applyOperation),\n/* harmony export */   applyPatch: () => (/* binding */ applyPatch),\n/* harmony export */   applyReducer: () => (/* binding */ applyReducer),\n/* harmony export */   core_exports: () => (/* binding */ core_exports),\n/* harmony export */   getValueByPointer: () => (/* binding */ getValueByPointer),\n/* harmony export */   validate: () => (/* binding */ validate),\n/* harmony export */   validator: () => (/* binding */ validator)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _helpers_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helpers.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n\n\n\n//#region src/utils/fast-json-patch/src/core.ts\nvar core_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(core_exports, {\n\tJsonPatchError: () => JsonPatchError,\n\t_areEquals: () => _areEquals,\n\tapplyOperation: () => applyOperation,\n\tapplyPatch: () => applyPatch,\n\tapplyReducer: () => applyReducer,\n\tdeepClone: () => deepClone,\n\tgetValueByPointer: () => getValueByPointer,\n\tvalidate: () => validate,\n\tvalidator: () => validator\n});\nconst JsonPatchError = _helpers_js__WEBPACK_IMPORTED_MODULE_1__.PatchError;\nconst deepClone = _helpers_js__WEBPACK_IMPORTED_MODULE_1__._deepClone;\n/**\n* Check if a key is a dangerous prototype property that could lead to prototype pollution.\n* This provides defense-in-depth alongside the check in applyOperation.\n*/\nfunction isDangerousKey(key) {\n\treturn Object.getOwnPropertyNames(Object.prototype).includes(key);\n}\nconst objOps = {\n\tadd: function(obj, key, document) {\n\t\tif (isDangerousKey(key)) throw new TypeError(\"JSON-Patch: modifying `__proto__`, `constructor`, or `prototype` prop is banned for security reasons\");\n\t\tobj[key] = this.value;\n\t\treturn { newDocument: document };\n\t},\n\tremove: function(obj, key, document) {\n\t\tif (isDangerousKey(key)) throw new TypeError(\"JSON-Patch: modifying `__proto__`, `constructor`, or `prototype` prop is banned for security reasons\");\n\t\tvar removed = obj[key];\n\t\tdelete obj[key];\n\t\treturn {\n\t\t\tnewDocument: document,\n\t\t\tremoved\n\t\t};\n\t},\n\treplace: function(obj, key, document) {\n\t\tif (isDangerousKey(key)) throw new TypeError(\"JSON-Patch: modifying `__proto__`, `constructor`, or `prototype` prop is banned for security reasons\");\n\t\tvar removed = obj[key];\n\t\tobj[key] = this.value;\n\t\treturn {\n\t\t\tnewDocument: document,\n\t\t\tremoved\n\t\t};\n\t},\n\tmove: function(obj, key, document) {\n\t\tlet removed = getValueByPointer(document, this.path);\n\t\tif (removed) removed = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__._deepClone)(removed);\n\t\tconst originalValue = applyOperation(document, {\n\t\t\top: \"remove\",\n\t\t\tpath: this.from\n\t\t}).removed;\n\t\tapplyOperation(document, {\n\t\t\top: \"add\",\n\t\t\tpath: this.path,\n\t\t\tvalue: originalValue\n\t\t});\n\t\treturn {\n\t\t\tnewDocument: document,\n\t\t\tremoved\n\t\t};\n\t},\n\tcopy: function(obj, key, document) {\n\t\tconst valueToCopy = getValueByPointer(document, this.from);\n\t\tapplyOperation(document, {\n\t\t\top: \"add\",\n\t\t\tpath: this.path,\n\t\t\tvalue: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__._deepClone)(valueToCopy)\n\t\t});\n\t\treturn { newDocument: document };\n\t},\n\ttest: function(obj, key, document) {\n\t\treturn {\n\t\t\tnewDocument: document,\n\t\t\ttest: _areEquals(obj[key], this.value)\n\t\t};\n\t},\n\t_get: function(obj, key, document) {\n\t\tthis.value = obj[key];\n\t\treturn { newDocument: document };\n\t}\n};\nvar arrOps = {\n\tadd: function(arr, i, document) {\n\t\tif ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__.isInteger)(i)) arr.splice(i, 0, this.value);\n\t\telse arr[i] = this.value;\n\t\treturn {\n\t\t\tnewDocument: document,\n\t\t\tindex: i\n\t\t};\n\t},\n\tremove: function(arr, i, document) {\n\t\tvar removedList = arr.splice(i, 1);\n\t\treturn {\n\t\t\tnewDocument: document,\n\t\t\tremoved: removedList[0]\n\t\t};\n\t},\n\treplace: function(arr, i, document) {\n\t\tvar removed = arr[i];\n\t\tarr[i] = this.value;\n\t\treturn {\n\t\t\tnewDocument: document,\n\t\t\tremoved\n\t\t};\n\t},\n\tmove: objOps.move,\n\tcopy: objOps.copy,\n\ttest: objOps.test,\n\t_get: objOps._get\n};\n/**\n* Retrieves a value from a JSON document by a JSON pointer.\n* Returns the value.\n*\n* @param document The document to get the value from\n* @param pointer an escaped JSON pointer\n* @return The retrieved value\n*/\nfunction getValueByPointer(document, pointer) {\n\tif (pointer == \"\") return document;\n\tvar getOriginalDestination = {\n\t\top: \"_get\",\n\t\tpath: pointer\n\t};\n\tapplyOperation(document, getOriginalDestination);\n\treturn getOriginalDestination.value;\n}\n/**\n* Apply a single JSON Patch Operation on a JSON document.\n* Returns the {newDocument, result} of the operation.\n* It modifies the `document` and `operation` objects - it gets the values by reference.\n* If you would like to avoid touching your values, clone them:\n* `jsonpatch.applyOperation(document, jsonpatch._deepClone(operation))`.\n*\n* @param document The document to patch\n* @param operation The operation to apply\n* @param validateOperation `false` is without validation, `true` to use default jsonpatch's validation, or you can pass a `validateOperation` callback to be used for validation.\n* @param mutateDocument Whether to mutate the original document or clone it before applying\n* @param banPrototypeModifications Whether to ban modifications to `__proto__`, defaults to `true`.\n* @return `{newDocument, result}` after the operation\n*/\nfunction applyOperation(document, operation, validateOperation = false, mutateDocument = true, banPrototypeModifications = true, index = 0) {\n\tif (validateOperation) if (typeof validateOperation == \"function\") validateOperation(operation, 0, document, operation.path);\n\telse validator(operation, 0);\n\tif (operation.path === \"\") {\n\t\tlet returnValue = { newDocument: document };\n\t\tif (operation.op === \"add\") {\n\t\t\treturnValue.newDocument = operation.value;\n\t\t\treturn returnValue;\n\t\t} else if (operation.op === \"replace\") {\n\t\t\treturnValue.newDocument = operation.value;\n\t\t\treturnValue.removed = document;\n\t\t\treturn returnValue;\n\t\t} else if (operation.op === \"move\" || operation.op === \"copy\") {\n\t\t\treturnValue.newDocument = getValueByPointer(document, operation.from);\n\t\t\tif (operation.op === \"move\") returnValue.removed = document;\n\t\t\treturn returnValue;\n\t\t} else if (operation.op === \"test\") {\n\t\t\treturnValue.test = _areEquals(document, operation.value);\n\t\t\tif (returnValue.test === false) throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n\t\t\treturnValue.newDocument = document;\n\t\t\treturn returnValue;\n\t\t} else if (operation.op === \"remove\") {\n\t\t\treturnValue.removed = document;\n\t\t\treturnValue.newDocument = null;\n\t\t\treturn returnValue;\n\t\t} else if (operation.op === \"_get\") {\n\t\t\toperation.value = document;\n\t\t\treturn returnValue;\n\t\t} else if (validateOperation) throw new JsonPatchError(\"Operation `op` property is not one of operations defined in RFC-6902\", \"OPERATION_OP_INVALID\", index, operation, document);\n\t\telse return returnValue;\n\t} else {\n\t\tif (!mutateDocument) document = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__._deepClone)(document);\n\t\tconst path = operation.path || \"\";\n\t\tconst keys = path.split(\"/\");\n\t\tlet obj = document;\n\t\tlet t = 1;\n\t\tlet len = keys.length;\n\t\tlet existingPathFragment = void 0;\n\t\tlet key;\n\t\tlet validateFunction;\n\t\tif (typeof validateOperation == \"function\") validateFunction = validateOperation;\n\t\telse validateFunction = validator;\n\t\twhile (true) {\n\t\t\tkey = keys[t];\n\t\t\tif (key && key.indexOf(\"~\") != -1) key = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__.unescapePathComponent)(key);\n\t\t\tif (banPrototypeModifications && (key == \"__proto__\" || key == \"prototype\" && t > 0 && keys[t - 1] == \"constructor\")) throw new TypeError(\"JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README\");\n\t\t\tif (validateOperation) {\n\t\t\t\tif (existingPathFragment === void 0) {\n\t\t\t\t\tif (obj[key] === void 0) existingPathFragment = keys.slice(0, t).join(\"/\");\n\t\t\t\t\telse if (t == len - 1) existingPathFragment = operation.path;\n\t\t\t\t\tif (existingPathFragment !== void 0) validateFunction(operation, 0, document, existingPathFragment);\n\t\t\t\t}\n\t\t\t}\n\t\t\tt++;\n\t\t\tif (Array.isArray(obj)) {\n\t\t\t\tif (key === \"-\") key = obj.length;\n\t\t\t\telse if (validateOperation && !(0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__.isInteger)(key)) throw new JsonPatchError(\"Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index\", \"OPERATION_PATH_ILLEGAL_ARRAY_INDEX\", index, operation, document);\n\t\t\t\telse if ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__.isInteger)(key)) key = ~~key;\n\t\t\t\tif (t >= len) {\n\t\t\t\t\tif (validateOperation && operation.op === \"add\" && key > obj.length) throw new JsonPatchError(\"The specified index MUST NOT be greater than the number of elements in the array\", \"OPERATION_VALUE_OUT_OF_BOUNDS\", index, operation, document);\n\t\t\t\t\tconst returnValue = arrOps[operation.op].call(operation, obj, key, document);\n\t\t\t\t\tif (returnValue.test === false) throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n\t\t\t\t\treturn returnValue;\n\t\t\t\t}\n\t\t\t} else if (t >= len) {\n\t\t\t\tconst returnValue = objOps[operation.op].call(operation, obj, key, document);\n\t\t\t\tif (returnValue.test === false) throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n\t\t\t\treturn returnValue;\n\t\t\t}\n\t\t\tobj = obj[key];\n\t\t\tif (validateOperation && t < len && (!obj || typeof obj !== \"object\")) throw new JsonPatchError(\"Cannot perform operation at the desired path\", \"OPERATION_PATH_UNRESOLVABLE\", index, operation, document);\n\t\t}\n\t}\n}\n/**\n* Apply a full JSON Patch array on a JSON document.\n* Returns the {newDocument, result} of the patch.\n* It modifies the `document` object and `patch` - it gets the values by reference.\n* If you would like to avoid touching your values, clone them:\n* `jsonpatch.applyPatch(document, jsonpatch._deepClone(patch))`.\n*\n* @param document The document to patch\n* @param patch The patch to apply\n* @param validateOperation `false` is without validation, `true` to use default jsonpatch's validation, or you can pass a `validateOperation` callback to be used for validation.\n* @param mutateDocument Whether to mutate the original document or clone it before applying\n* @param banPrototypeModifications Whether to ban modifications to `__proto__`, defaults to `true`.\n* @return An array of `{newDocument, result}` after the patch\n*/\nfunction applyPatch(document, patch, validateOperation, mutateDocument = true, banPrototypeModifications = true) {\n\tif (validateOperation) {\n\t\tif (!Array.isArray(patch)) throw new JsonPatchError(\"Patch sequence must be an array\", \"SEQUENCE_NOT_AN_ARRAY\");\n\t}\n\tif (!mutateDocument) document = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__._deepClone)(document);\n\tconst results = new Array(patch.length);\n\tfor (let i = 0, length = patch.length; i < length; i++) {\n\t\tresults[i] = applyOperation(document, patch[i], validateOperation, true, banPrototypeModifications, i);\n\t\tdocument = results[i].newDocument;\n\t}\n\tresults.newDocument = document;\n\treturn results;\n}\n/**\n* Apply a single JSON Patch Operation on a JSON document.\n* Returns the updated document.\n* Suitable as a reducer.\n*\n* @param document The document to patch\n* @param operation The operation to apply\n* @return The updated document\n*/\nfunction applyReducer(document, operation, index) {\n\tconst operationResult = applyOperation(document, operation);\n\tif (operationResult.test === false) throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n\treturn operationResult.newDocument;\n}\n/**\n* Validates a single operation. Called from `jsonpatch.validate`. Throws `JsonPatchError` in case of an error.\n* @param {object} operation - operation object (patch)\n* @param {number} index - index of operation in the sequence\n* @param {object} [document] - object where the operation is supposed to be applied\n* @param {string} [existingPathFragment] - comes along with `document`\n*/\nfunction validator(operation, index, document, existingPathFragment) {\n\tif (typeof operation !== \"object\" || operation === null || Array.isArray(operation)) throw new JsonPatchError(\"Operation is not an object\", \"OPERATION_NOT_AN_OBJECT\", index, operation, document);\n\telse if (!objOps[operation.op]) throw new JsonPatchError(\"Operation `op` property is not one of operations defined in RFC-6902\", \"OPERATION_OP_INVALID\", index, operation, document);\n\telse if (typeof operation.path !== \"string\") throw new JsonPatchError(\"Operation `path` property is not a string\", \"OPERATION_PATH_INVALID\", index, operation, document);\n\telse if (operation.path.indexOf(\"/\") !== 0 && operation.path.length > 0) throw new JsonPatchError(\"Operation `path` property must start with \\\"/\\\"\", \"OPERATION_PATH_INVALID\", index, operation, document);\n\telse if ((operation.op === \"move\" || operation.op === \"copy\") && typeof operation.from !== \"string\") throw new JsonPatchError(\"Operation `from` property is not present (applicable in `move` and `copy` operations)\", \"OPERATION_FROM_REQUIRED\", index, operation, document);\n\telse if ((operation.op === \"add\" || operation.op === \"replace\" || operation.op === \"test\") && operation.value === void 0) throw new JsonPatchError(\"Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)\", \"OPERATION_VALUE_REQUIRED\", index, operation, document);\n\telse if ((operation.op === \"add\" || operation.op === \"replace\" || operation.op === \"test\") && (0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__.hasUndefined)(operation.value)) throw new JsonPatchError(\"Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)\", \"OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED\", index, operation, document);\n\telse if (document) {\n\t\tif (operation.op == \"add\") {\n\t\t\tvar pathLen = operation.path.split(\"/\").length;\n\t\t\tvar existingPathLen = existingPathFragment.split(\"/\").length;\n\t\t\tif (pathLen !== existingPathLen + 1 && pathLen !== existingPathLen) throw new JsonPatchError(\"Cannot perform an `add` operation at the desired path\", \"OPERATION_PATH_CANNOT_ADD\", index, operation, document);\n\t\t} else if (operation.op === \"replace\" || operation.op === \"remove\" || operation.op === \"_get\") {\n\t\t\tif (operation.path !== existingPathFragment) throw new JsonPatchError(\"Cannot perform the operation at a path that does not exist\", \"OPERATION_PATH_UNRESOLVABLE\", index, operation, document);\n\t\t} else if (operation.op === \"move\" || operation.op === \"copy\") {\n\t\t\tvar existingValue = {\n\t\t\t\top: \"_get\",\n\t\t\t\tpath: operation.from,\n\t\t\t\tvalue: void 0\n\t\t\t};\n\t\t\tvar error = validate([existingValue], document);\n\t\t\tif (error && error.name === \"OPERATION_PATH_UNRESOLVABLE\") throw new JsonPatchError(\"Cannot perform the operation from a path that does not exist\", \"OPERATION_FROM_UNRESOLVABLE\", index, operation, document);\n\t\t}\n\t}\n}\n/**\n* Validates a sequence of operations. If `document` parameter is provided, the sequence is additionally validated against the object document.\n* If error is encountered, returns a JsonPatchError object\n* @param sequence\n* @param document\n* @returns {JsonPatchError|undefined}\n*/\nfunction validate(sequence, document, externalValidator) {\n\ttry {\n\t\tif (!Array.isArray(sequence)) throw new JsonPatchError(\"Patch sequence must be an array\", \"SEQUENCE_NOT_AN_ARRAY\");\n\t\tif (document) applyPatch((0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__._deepClone)(document), (0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__._deepClone)(sequence), externalValidator || true);\n\t\telse {\n\t\t\texternalValidator = externalValidator || validator;\n\t\t\tfor (var i = 0; i < sequence.length; i++) externalValidator(sequence[i], i, document, void 0);\n\t\t}\n\t} catch (e) {\n\t\tif (e instanceof JsonPatchError) return e;\n\t\telse throw e;\n\t}\n}\nfunction _areEquals(a, b) {\n\tif (a === b) return true;\n\tif (a && b && typeof a == \"object\" && typeof b == \"object\") {\n\t\tvar arrA = Array.isArray(a), arrB = Array.isArray(b), i, length, key;\n\t\tif (arrA && arrB) {\n\t\t\tlength = a.length;\n\t\t\tif (length != b.length) return false;\n\t\t\tfor (i = length; i-- !== 0;) if (!_areEquals(a[i], b[i])) return false;\n\t\t\treturn true;\n\t\t}\n\t\tif (arrA != arrB) return false;\n\t\tvar keys = Object.keys(a);\n\t\tlength = keys.length;\n\t\tif (length !== Object.keys(b).length) return false;\n\t\tfor (i = length; i-- !== 0;) if (!b.hasOwnProperty(keys[i])) return false;\n\t\tfor (i = length; i-- !== 0;) {\n\t\t\tkey = keys[i];\n\t\t\tif (!_areEquals(a[key], b[key])) return false;\n\t\t}\n\t\treturn true;\n\t}\n\treturn a !== a && b !== b;\n}\n\n//#endregion\n\n//# sourceMappingURL=core.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9jb3JlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBaUU7QUFDcUM7O0FBRXRHO0FBQ0E7QUFDQSxzRUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCx1QkFBdUIsbURBQVU7QUFDakMsa0JBQWtCLG1EQUFVO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EseUJBQXlCLHVEQUFVO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSx1REFBVTtBQUNwQixHQUFHO0FBQ0gsV0FBVztBQUNYLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHNEQUFTO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxxQkFBcUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxvQkFBb0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEdBQUc7QUFDSCxrQ0FBa0MsdURBQVU7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLGtFQUFxQjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHNEQUFTO0FBQzVDLGFBQWEsc0RBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHFCQUFxQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isb0JBQW9CO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsdURBQVU7QUFDM0M7QUFDQSx3Q0FBd0MsWUFBWTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsUUFBUTtBQUNsQixVQUFVLFFBQVE7QUFDbEIsVUFBVSxRQUFRO0FBQ2xCLFVBQVUsUUFBUTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0ZBQStGLHlEQUFZO0FBQzNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHVEQUFVLFlBQVksdURBQVU7QUFDM0Q7QUFDQTtBQUNBLG1CQUFtQixxQkFBcUI7QUFDeEM7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixVQUFVO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixVQUFVO0FBQzdCLG1CQUFtQixVQUFVO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3NIO0FBQ3RIIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9jb3JlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4uLy4uLy4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IFBhdGNoRXJyb3IsIF9kZWVwQ2xvbmUsIGhhc1VuZGVmaW5lZCwgaXNJbnRlZ2VyLCB1bmVzY2FwZVBhdGhDb21wb25lbnQgfSBmcm9tIFwiLi9oZWxwZXJzLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9jb3JlLnRzXG52YXIgY29yZV9leHBvcnRzID0ge307XG5fX2V4cG9ydChjb3JlX2V4cG9ydHMsIHtcblx0SnNvblBhdGNoRXJyb3I6ICgpID0+IEpzb25QYXRjaEVycm9yLFxuXHRfYXJlRXF1YWxzOiAoKSA9PiBfYXJlRXF1YWxzLFxuXHRhcHBseU9wZXJhdGlvbjogKCkgPT4gYXBwbHlPcGVyYXRpb24sXG5cdGFwcGx5UGF0Y2g6ICgpID0+IGFwcGx5UGF0Y2gsXG5cdGFwcGx5UmVkdWNlcjogKCkgPT4gYXBwbHlSZWR1Y2VyLFxuXHRkZWVwQ2xvbmU6ICgpID0+IGRlZXBDbG9uZSxcblx0Z2V0VmFsdWVCeVBvaW50ZXI6ICgpID0+IGdldFZhbHVlQnlQb2ludGVyLFxuXHR2YWxpZGF0ZTogKCkgPT4gdmFsaWRhdGUsXG5cdHZhbGlkYXRvcjogKCkgPT4gdmFsaWRhdG9yXG59KTtcbmNvbnN0IEpzb25QYXRjaEVycm9yID0gUGF0Y2hFcnJvcjtcbmNvbnN0IGRlZXBDbG9uZSA9IF9kZWVwQ2xvbmU7XG4vKipcbiogQ2hlY2sgaWYgYSBrZXkgaXMgYSBkYW5nZXJvdXMgcHJvdG90eXBlIHByb3BlcnR5IHRoYXQgY291bGQgbGVhZCB0byBwcm90b3R5cGUgcG9sbHV0aW9uLlxuKiBUaGlzIHByb3ZpZGVzIGRlZmVuc2UtaW4tZGVwdGggYWxvbmdzaWRlIHRoZSBjaGVjayBpbiBhcHBseU9wZXJhdGlvbi5cbiovXG5mdW5jdGlvbiBpc0Rhbmdlcm91c0tleShrZXkpIHtcblx0cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE9iamVjdC5wcm90b3R5cGUpLmluY2x1ZGVzKGtleSk7XG59XG5jb25zdCBvYmpPcHMgPSB7XG5cdGFkZDogZnVuY3Rpb24ob2JqLCBrZXksIGRvY3VtZW50KSB7XG5cdFx0aWYgKGlzRGFuZ2Vyb3VzS2V5KGtleSkpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJKU09OLVBhdGNoOiBtb2RpZnlpbmcgYF9fcHJvdG9fX2AsIGBjb25zdHJ1Y3RvcmAsIG9yIGBwcm90b3R5cGVgIHByb3AgaXMgYmFubmVkIGZvciBzZWN1cml0eSByZWFzb25zXCIpO1xuXHRcdG9ialtrZXldID0gdGhpcy52YWx1ZTtcblx0XHRyZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQgfTtcblx0fSxcblx0cmVtb3ZlOiBmdW5jdGlvbihvYmosIGtleSwgZG9jdW1lbnQpIHtcblx0XHRpZiAoaXNEYW5nZXJvdXNLZXkoa2V5KSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkpTT04tUGF0Y2g6IG1vZGlmeWluZyBgX19wcm90b19fYCwgYGNvbnN0cnVjdG9yYCwgb3IgYHByb3RvdHlwZWAgcHJvcCBpcyBiYW5uZWQgZm9yIHNlY3VyaXR5IHJlYXNvbnNcIik7XG5cdFx0dmFyIHJlbW92ZWQgPSBvYmpba2V5XTtcblx0XHRkZWxldGUgb2JqW2tleV07XG5cdFx0cmV0dXJuIHtcblx0XHRcdG5ld0RvY3VtZW50OiBkb2N1bWVudCxcblx0XHRcdHJlbW92ZWRcblx0XHR9O1xuXHR9LFxuXHRyZXBsYWNlOiBmdW5jdGlvbihvYmosIGtleSwgZG9jdW1lbnQpIHtcblx0XHRpZiAoaXNEYW5nZXJvdXNLZXkoa2V5KSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkpTT04tUGF0Y2g6IG1vZGlmeWluZyBgX19wcm90b19fYCwgYGNvbnN0cnVjdG9yYCwgb3IgYHByb3RvdHlwZWAgcHJvcCBpcyBiYW5uZWQgZm9yIHNlY3VyaXR5IHJlYXNvbnNcIik7XG5cdFx0dmFyIHJlbW92ZWQgPSBvYmpba2V5XTtcblx0XHRvYmpba2V5XSA9IHRoaXMudmFsdWU7XG5cdFx0cmV0dXJuIHtcblx0XHRcdG5ld0RvY3VtZW50OiBkb2N1bWVudCxcblx0XHRcdHJlbW92ZWRcblx0XHR9O1xuXHR9LFxuXHRtb3ZlOiBmdW5jdGlvbihvYmosIGtleSwgZG9jdW1lbnQpIHtcblx0XHRsZXQgcmVtb3ZlZCA9IGdldFZhbHVlQnlQb2ludGVyKGRvY3VtZW50LCB0aGlzLnBhdGgpO1xuXHRcdGlmIChyZW1vdmVkKSByZW1vdmVkID0gX2RlZXBDbG9uZShyZW1vdmVkKTtcblx0XHRjb25zdCBvcmlnaW5hbFZhbHVlID0gYXBwbHlPcGVyYXRpb24oZG9jdW1lbnQsIHtcblx0XHRcdG9wOiBcInJlbW92ZVwiLFxuXHRcdFx0cGF0aDogdGhpcy5mcm9tXG5cdFx0fSkucmVtb3ZlZDtcblx0XHRhcHBseU9wZXJhdGlvbihkb2N1bWVudCwge1xuXHRcdFx0b3A6IFwiYWRkXCIsXG5cdFx0XHRwYXRoOiB0aGlzLnBhdGgsXG5cdFx0XHR2YWx1ZTogb3JpZ2luYWxWYWx1ZVxuXHRcdH0pO1xuXHRcdHJldHVybiB7XG5cdFx0XHRuZXdEb2N1bWVudDogZG9jdW1lbnQsXG5cdFx0XHRyZW1vdmVkXG5cdFx0fTtcblx0fSxcblx0Y29weTogZnVuY3Rpb24ob2JqLCBrZXksIGRvY3VtZW50KSB7XG5cdFx0Y29uc3QgdmFsdWVUb0NvcHkgPSBnZXRWYWx1ZUJ5UG9pbnRlcihkb2N1bWVudCwgdGhpcy5mcm9tKTtcblx0XHRhcHBseU9wZXJhdGlvbihkb2N1bWVudCwge1xuXHRcdFx0b3A6IFwiYWRkXCIsXG5cdFx0XHRwYXRoOiB0aGlzLnBhdGgsXG5cdFx0XHR2YWx1ZTogX2RlZXBDbG9uZSh2YWx1ZVRvQ29weSlcblx0XHR9KTtcblx0XHRyZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQgfTtcblx0fSxcblx0dGVzdDogZnVuY3Rpb24ob2JqLCBrZXksIGRvY3VtZW50KSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdG5ld0RvY3VtZW50OiBkb2N1bWVudCxcblx0XHRcdHRlc3Q6IF9hcmVFcXVhbHMob2JqW2tleV0sIHRoaXMudmFsdWUpXG5cdFx0fTtcblx0fSxcblx0X2dldDogZnVuY3Rpb24ob2JqLCBrZXksIGRvY3VtZW50KSB7XG5cdFx0dGhpcy52YWx1ZSA9IG9ialtrZXldO1xuXHRcdHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCB9O1xuXHR9XG59O1xudmFyIGFyck9wcyA9IHtcblx0YWRkOiBmdW5jdGlvbihhcnIsIGksIGRvY3VtZW50KSB7XG5cdFx0aWYgKGlzSW50ZWdlcihpKSkgYXJyLnNwbGljZShpLCAwLCB0aGlzLnZhbHVlKTtcblx0XHRlbHNlIGFycltpXSA9IHRoaXMudmFsdWU7XG5cdFx0cmV0dXJuIHtcblx0XHRcdG5ld0RvY3VtZW50OiBkb2N1bWVudCxcblx0XHRcdGluZGV4OiBpXG5cdFx0fTtcblx0fSxcblx0cmVtb3ZlOiBmdW5jdGlvbihhcnIsIGksIGRvY3VtZW50KSB7XG5cdFx0dmFyIHJlbW92ZWRMaXN0ID0gYXJyLnNwbGljZShpLCAxKTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0bmV3RG9jdW1lbnQ6IGRvY3VtZW50LFxuXHRcdFx0cmVtb3ZlZDogcmVtb3ZlZExpc3RbMF1cblx0XHR9O1xuXHR9LFxuXHRyZXBsYWNlOiBmdW5jdGlvbihhcnIsIGksIGRvY3VtZW50KSB7XG5cdFx0dmFyIHJlbW92ZWQgPSBhcnJbaV07XG5cdFx0YXJyW2ldID0gdGhpcy52YWx1ZTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0bmV3RG9jdW1lbnQ6IGRvY3VtZW50LFxuXHRcdFx0cmVtb3ZlZFxuXHRcdH07XG5cdH0sXG5cdG1vdmU6IG9iak9wcy5tb3ZlLFxuXHRjb3B5OiBvYmpPcHMuY29weSxcblx0dGVzdDogb2JqT3BzLnRlc3QsXG5cdF9nZXQ6IG9iak9wcy5fZ2V0XG59O1xuLyoqXG4qIFJldHJpZXZlcyBhIHZhbHVlIGZyb20gYSBKU09OIGRvY3VtZW50IGJ5IGEgSlNPTiBwb2ludGVyLlxuKiBSZXR1cm5zIHRoZSB2YWx1ZS5cbipcbiogQHBhcmFtIGRvY3VtZW50IFRoZSBkb2N1bWVudCB0byBnZXQgdGhlIHZhbHVlIGZyb21cbiogQHBhcmFtIHBvaW50ZXIgYW4gZXNjYXBlZCBKU09OIHBvaW50ZXJcbiogQHJldHVybiBUaGUgcmV0cmlldmVkIHZhbHVlXG4qL1xuZnVuY3Rpb24gZ2V0VmFsdWVCeVBvaW50ZXIoZG9jdW1lbnQsIHBvaW50ZXIpIHtcblx0aWYgKHBvaW50ZXIgPT0gXCJcIikgcmV0dXJuIGRvY3VtZW50O1xuXHR2YXIgZ2V0T3JpZ2luYWxEZXN0aW5hdGlvbiA9IHtcblx0XHRvcDogXCJfZ2V0XCIsXG5cdFx0cGF0aDogcG9pbnRlclxuXHR9O1xuXHRhcHBseU9wZXJhdGlvbihkb2N1bWVudCwgZ2V0T3JpZ2luYWxEZXN0aW5hdGlvbik7XG5cdHJldHVybiBnZXRPcmlnaW5hbERlc3RpbmF0aW9uLnZhbHVlO1xufVxuLyoqXG4qIEFwcGx5IGEgc2luZ2xlIEpTT04gUGF0Y2ggT3BlcmF0aW9uIG9uIGEgSlNPTiBkb2N1bWVudC5cbiogUmV0dXJucyB0aGUge25ld0RvY3VtZW50LCByZXN1bHR9IG9mIHRoZSBvcGVyYXRpb24uXG4qIEl0IG1vZGlmaWVzIHRoZSBgZG9jdW1lbnRgIGFuZCBgb3BlcmF0aW9uYCBvYmplY3RzIC0gaXQgZ2V0cyB0aGUgdmFsdWVzIGJ5IHJlZmVyZW5jZS5cbiogSWYgeW91IHdvdWxkIGxpa2UgdG8gYXZvaWQgdG91Y2hpbmcgeW91ciB2YWx1ZXMsIGNsb25lIHRoZW06XG4qIGBqc29ucGF0Y2guYXBwbHlPcGVyYXRpb24oZG9jdW1lbnQsIGpzb25wYXRjaC5fZGVlcENsb25lKG9wZXJhdGlvbikpYC5cbipcbiogQHBhcmFtIGRvY3VtZW50IFRoZSBkb2N1bWVudCB0byBwYXRjaFxuKiBAcGFyYW0gb3BlcmF0aW9uIFRoZSBvcGVyYXRpb24gdG8gYXBwbHlcbiogQHBhcmFtIHZhbGlkYXRlT3BlcmF0aW9uIGBmYWxzZWAgaXMgd2l0aG91dCB2YWxpZGF0aW9uLCBgdHJ1ZWAgdG8gdXNlIGRlZmF1bHQganNvbnBhdGNoJ3MgdmFsaWRhdGlvbiwgb3IgeW91IGNhbiBwYXNzIGEgYHZhbGlkYXRlT3BlcmF0aW9uYCBjYWxsYmFjayB0byBiZSB1c2VkIGZvciB2YWxpZGF0aW9uLlxuKiBAcGFyYW0gbXV0YXRlRG9jdW1lbnQgV2hldGhlciB0byBtdXRhdGUgdGhlIG9yaWdpbmFsIGRvY3VtZW50IG9yIGNsb25lIGl0IGJlZm9yZSBhcHBseWluZ1xuKiBAcGFyYW0gYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9ucyBXaGV0aGVyIHRvIGJhbiBtb2RpZmljYXRpb25zIHRvIGBfX3Byb3RvX19gLCBkZWZhdWx0cyB0byBgdHJ1ZWAuXG4qIEByZXR1cm4gYHtuZXdEb2N1bWVudCwgcmVzdWx0fWAgYWZ0ZXIgdGhlIG9wZXJhdGlvblxuKi9cbmZ1bmN0aW9uIGFwcGx5T3BlcmF0aW9uKGRvY3VtZW50LCBvcGVyYXRpb24sIHZhbGlkYXRlT3BlcmF0aW9uID0gZmFsc2UsIG11dGF0ZURvY3VtZW50ID0gdHJ1ZSwgYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9ucyA9IHRydWUsIGluZGV4ID0gMCkge1xuXHRpZiAodmFsaWRhdGVPcGVyYXRpb24pIGlmICh0eXBlb2YgdmFsaWRhdGVPcGVyYXRpb24gPT0gXCJmdW5jdGlvblwiKSB2YWxpZGF0ZU9wZXJhdGlvbihvcGVyYXRpb24sIDAsIGRvY3VtZW50LCBvcGVyYXRpb24ucGF0aCk7XG5cdGVsc2UgdmFsaWRhdG9yKG9wZXJhdGlvbiwgMCk7XG5cdGlmIChvcGVyYXRpb24ucGF0aCA9PT0gXCJcIikge1xuXHRcdGxldCByZXR1cm5WYWx1ZSA9IHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50IH07XG5cdFx0aWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJhZGRcIikge1xuXHRcdFx0cmV0dXJuVmFsdWUubmV3RG9jdW1lbnQgPSBvcGVyYXRpb24udmFsdWU7XG5cdFx0XHRyZXR1cm4gcmV0dXJuVmFsdWU7XG5cdFx0fSBlbHNlIGlmIChvcGVyYXRpb24ub3AgPT09IFwicmVwbGFjZVwiKSB7XG5cdFx0XHRyZXR1cm5WYWx1ZS5uZXdEb2N1bWVudCA9IG9wZXJhdGlvbi52YWx1ZTtcblx0XHRcdHJldHVyblZhbHVlLnJlbW92ZWQgPSBkb2N1bWVudDtcblx0XHRcdHJldHVybiByZXR1cm5WYWx1ZTtcblx0XHR9IGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJtb3ZlXCIgfHwgb3BlcmF0aW9uLm9wID09PSBcImNvcHlcIikge1xuXHRcdFx0cmV0dXJuVmFsdWUubmV3RG9jdW1lbnQgPSBnZXRWYWx1ZUJ5UG9pbnRlcihkb2N1bWVudCwgb3BlcmF0aW9uLmZyb20pO1xuXHRcdFx0aWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJtb3ZlXCIpIHJldHVyblZhbHVlLnJlbW92ZWQgPSBkb2N1bWVudDtcblx0XHRcdHJldHVybiByZXR1cm5WYWx1ZTtcblx0XHR9IGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJ0ZXN0XCIpIHtcblx0XHRcdHJldHVyblZhbHVlLnRlc3QgPSBfYXJlRXF1YWxzKGRvY3VtZW50LCBvcGVyYXRpb24udmFsdWUpO1xuXHRcdFx0aWYgKHJldHVyblZhbHVlLnRlc3QgPT09IGZhbHNlKSB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJUZXN0IG9wZXJhdGlvbiBmYWlsZWRcIiwgXCJURVNUX09QRVJBVElPTl9GQUlMRURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuXHRcdFx0cmV0dXJuVmFsdWUubmV3RG9jdW1lbnQgPSBkb2N1bWVudDtcblx0XHRcdHJldHVybiByZXR1cm5WYWx1ZTtcblx0XHR9IGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJyZW1vdmVcIikge1xuXHRcdFx0cmV0dXJuVmFsdWUucmVtb3ZlZCA9IGRvY3VtZW50O1xuXHRcdFx0cmV0dXJuVmFsdWUubmV3RG9jdW1lbnQgPSBudWxsO1xuXHRcdFx0cmV0dXJuIHJldHVyblZhbHVlO1xuXHRcdH0gZWxzZSBpZiAob3BlcmF0aW9uLm9wID09PSBcIl9nZXRcIikge1xuXHRcdFx0b3BlcmF0aW9uLnZhbHVlID0gZG9jdW1lbnQ7XG5cdFx0XHRyZXR1cm4gcmV0dXJuVmFsdWU7XG5cdFx0fSBlbHNlIGlmICh2YWxpZGF0ZU9wZXJhdGlvbikgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiT3BlcmF0aW9uIGBvcGAgcHJvcGVydHkgaXMgbm90IG9uZSBvZiBvcGVyYXRpb25zIGRlZmluZWQgaW4gUkZDLTY5MDJcIiwgXCJPUEVSQVRJT05fT1BfSU5WQUxJRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG5cdFx0ZWxzZSByZXR1cm4gcmV0dXJuVmFsdWU7XG5cdH0gZWxzZSB7XG5cdFx0aWYgKCFtdXRhdGVEb2N1bWVudCkgZG9jdW1lbnQgPSBfZGVlcENsb25lKGRvY3VtZW50KTtcblx0XHRjb25zdCBwYXRoID0gb3BlcmF0aW9uLnBhdGggfHwgXCJcIjtcblx0XHRjb25zdCBrZXlzID0gcGF0aC5zcGxpdChcIi9cIik7XG5cdFx0bGV0IG9iaiA9IGRvY3VtZW50O1xuXHRcdGxldCB0ID0gMTtcblx0XHRsZXQgbGVuID0ga2V5cy5sZW5ndGg7XG5cdFx0bGV0IGV4aXN0aW5nUGF0aEZyYWdtZW50ID0gdm9pZCAwO1xuXHRcdGxldCBrZXk7XG5cdFx0bGV0IHZhbGlkYXRlRnVuY3Rpb247XG5cdFx0aWYgKHR5cGVvZiB2YWxpZGF0ZU9wZXJhdGlvbiA9PSBcImZ1bmN0aW9uXCIpIHZhbGlkYXRlRnVuY3Rpb24gPSB2YWxpZGF0ZU9wZXJhdGlvbjtcblx0XHRlbHNlIHZhbGlkYXRlRnVuY3Rpb24gPSB2YWxpZGF0b3I7XG5cdFx0d2hpbGUgKHRydWUpIHtcblx0XHRcdGtleSA9IGtleXNbdF07XG5cdFx0XHRpZiAoa2V5ICYmIGtleS5pbmRleE9mKFwiflwiKSAhPSAtMSkga2V5ID0gdW5lc2NhcGVQYXRoQ29tcG9uZW50KGtleSk7XG5cdFx0XHRpZiAoYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9ucyAmJiAoa2V5ID09IFwiX19wcm90b19fXCIgfHwga2V5ID09IFwicHJvdG90eXBlXCIgJiYgdCA+IDAgJiYga2V5c1t0IC0gMV0gPT0gXCJjb25zdHJ1Y3RvclwiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkpTT04tUGF0Y2g6IG1vZGlmeWluZyBgX19wcm90b19fYCBvciBgY29uc3RydWN0b3IvcHJvdG90eXBlYCBwcm9wIGlzIGJhbm5lZCBmb3Igc2VjdXJpdHkgcmVhc29ucywgaWYgdGhpcyB3YXMgb24gcHVycG9zZSwgcGxlYXNlIHNldCBgYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9uc2AgZmxhZyBmYWxzZSBhbmQgcGFzcyBpdCB0byB0aGlzIGZ1bmN0aW9uLiBNb3JlIGluZm8gaW4gZmFzdC1qc29uLXBhdGNoIFJFQURNRVwiKTtcblx0XHRcdGlmICh2YWxpZGF0ZU9wZXJhdGlvbikge1xuXHRcdFx0XHRpZiAoZXhpc3RpbmdQYXRoRnJhZ21lbnQgPT09IHZvaWQgMCkge1xuXHRcdFx0XHRcdGlmIChvYmpba2V5XSA9PT0gdm9pZCAwKSBleGlzdGluZ1BhdGhGcmFnbWVudCA9IGtleXMuc2xpY2UoMCwgdCkuam9pbihcIi9cIik7XG5cdFx0XHRcdFx0ZWxzZSBpZiAodCA9PSBsZW4gLSAxKSBleGlzdGluZ1BhdGhGcmFnbWVudCA9IG9wZXJhdGlvbi5wYXRoO1xuXHRcdFx0XHRcdGlmIChleGlzdGluZ1BhdGhGcmFnbWVudCAhPT0gdm9pZCAwKSB2YWxpZGF0ZUZ1bmN0aW9uKG9wZXJhdGlvbiwgMCwgZG9jdW1lbnQsIGV4aXN0aW5nUGF0aEZyYWdtZW50KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0dCsrO1xuXHRcdFx0aWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuXHRcdFx0XHRpZiAoa2V5ID09PSBcIi1cIikga2V5ID0gb2JqLmxlbmd0aDtcblx0XHRcdFx0ZWxzZSBpZiAodmFsaWRhdGVPcGVyYXRpb24gJiYgIWlzSW50ZWdlcihrZXkpKSB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJFeHBlY3RlZCBhbiB1bnNpZ25lZCBiYXNlLTEwIGludGVnZXIgdmFsdWUsIG1ha2luZyB0aGUgbmV3IHJlZmVyZW5jZWQgdmFsdWUgdGhlIGFycmF5IGVsZW1lbnQgd2l0aCB0aGUgemVyby1iYXNlZCBpbmRleFwiLCBcIk9QRVJBVElPTl9QQVRIX0lMTEVHQUxfQVJSQVlfSU5ERVhcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuXHRcdFx0XHRlbHNlIGlmIChpc0ludGVnZXIoa2V5KSkga2V5ID0gfn5rZXk7XG5cdFx0XHRcdGlmICh0ID49IGxlbikge1xuXHRcdFx0XHRcdGlmICh2YWxpZGF0ZU9wZXJhdGlvbiAmJiBvcGVyYXRpb24ub3AgPT09IFwiYWRkXCIgJiYga2V5ID4gb2JqLmxlbmd0aCkgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiVGhlIHNwZWNpZmllZCBpbmRleCBNVVNUIE5PVCBiZSBncmVhdGVyIHRoYW4gdGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiB0aGUgYXJyYXlcIiwgXCJPUEVSQVRJT05fVkFMVUVfT1VUX09GX0JPVU5EU1wiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG5cdFx0XHRcdFx0Y29uc3QgcmV0dXJuVmFsdWUgPSBhcnJPcHNbb3BlcmF0aW9uLm9wXS5jYWxsKG9wZXJhdGlvbiwgb2JqLCBrZXksIGRvY3VtZW50KTtcblx0XHRcdFx0XHRpZiAocmV0dXJuVmFsdWUudGVzdCA9PT0gZmFsc2UpIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIlRlc3Qgb3BlcmF0aW9uIGZhaWxlZFwiLCBcIlRFU1RfT1BFUkFUSU9OX0ZBSUxFRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG5cdFx0XHRcdFx0cmV0dXJuIHJldHVyblZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHQgPj0gbGVuKSB7XG5cdFx0XHRcdGNvbnN0IHJldHVyblZhbHVlID0gb2JqT3BzW29wZXJhdGlvbi5vcF0uY2FsbChvcGVyYXRpb24sIG9iaiwga2V5LCBkb2N1bWVudCk7XG5cdFx0XHRcdGlmIChyZXR1cm5WYWx1ZS50ZXN0ID09PSBmYWxzZSkgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiVGVzdCBvcGVyYXRpb24gZmFpbGVkXCIsIFwiVEVTVF9PUEVSQVRJT05fRkFJTEVEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcblx0XHRcdFx0cmV0dXJuIHJldHVyblZhbHVlO1xuXHRcdFx0fVxuXHRcdFx0b2JqID0gb2JqW2tleV07XG5cdFx0XHRpZiAodmFsaWRhdGVPcGVyYXRpb24gJiYgdCA8IGxlbiAmJiAoIW9iaiB8fCB0eXBlb2Ygb2JqICE9PSBcIm9iamVjdFwiKSkgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiQ2Fubm90IHBlcmZvcm0gb3BlcmF0aW9uIGF0IHRoZSBkZXNpcmVkIHBhdGhcIiwgXCJPUEVSQVRJT05fUEFUSF9VTlJFU09MVkFCTEVcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuXHRcdH1cblx0fVxufVxuLyoqXG4qIEFwcGx5IGEgZnVsbCBKU09OIFBhdGNoIGFycmF5IG9uIGEgSlNPTiBkb2N1bWVudC5cbiogUmV0dXJucyB0aGUge25ld0RvY3VtZW50LCByZXN1bHR9IG9mIHRoZSBwYXRjaC5cbiogSXQgbW9kaWZpZXMgdGhlIGBkb2N1bWVudGAgb2JqZWN0IGFuZCBgcGF0Y2hgIC0gaXQgZ2V0cyB0aGUgdmFsdWVzIGJ5IHJlZmVyZW5jZS5cbiogSWYgeW91IHdvdWxkIGxpa2UgdG8gYXZvaWQgdG91Y2hpbmcgeW91ciB2YWx1ZXMsIGNsb25lIHRoZW06XG4qIGBqc29ucGF0Y2guYXBwbHlQYXRjaChkb2N1bWVudCwganNvbnBhdGNoLl9kZWVwQ2xvbmUocGF0Y2gpKWAuXG4qXG4qIEBwYXJhbSBkb2N1bWVudCBUaGUgZG9jdW1lbnQgdG8gcGF0Y2hcbiogQHBhcmFtIHBhdGNoIFRoZSBwYXRjaCB0byBhcHBseVxuKiBAcGFyYW0gdmFsaWRhdGVPcGVyYXRpb24gYGZhbHNlYCBpcyB3aXRob3V0IHZhbGlkYXRpb24sIGB0cnVlYCB0byB1c2UgZGVmYXVsdCBqc29ucGF0Y2gncyB2YWxpZGF0aW9uLCBvciB5b3UgY2FuIHBhc3MgYSBgdmFsaWRhdGVPcGVyYXRpb25gIGNhbGxiYWNrIHRvIGJlIHVzZWQgZm9yIHZhbGlkYXRpb24uXG4qIEBwYXJhbSBtdXRhdGVEb2N1bWVudCBXaGV0aGVyIHRvIG11dGF0ZSB0aGUgb3JpZ2luYWwgZG9jdW1lbnQgb3IgY2xvbmUgaXQgYmVmb3JlIGFwcGx5aW5nXG4qIEBwYXJhbSBiYW5Qcm90b3R5cGVNb2RpZmljYXRpb25zIFdoZXRoZXIgdG8gYmFuIG1vZGlmaWNhdGlvbnMgdG8gYF9fcHJvdG9fX2AsIGRlZmF1bHRzIHRvIGB0cnVlYC5cbiogQHJldHVybiBBbiBhcnJheSBvZiBge25ld0RvY3VtZW50LCByZXN1bHR9YCBhZnRlciB0aGUgcGF0Y2hcbiovXG5mdW5jdGlvbiBhcHBseVBhdGNoKGRvY3VtZW50LCBwYXRjaCwgdmFsaWRhdGVPcGVyYXRpb24sIG11dGF0ZURvY3VtZW50ID0gdHJ1ZSwgYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9ucyA9IHRydWUpIHtcblx0aWYgKHZhbGlkYXRlT3BlcmF0aW9uKSB7XG5cdFx0aWYgKCFBcnJheS5pc0FycmF5KHBhdGNoKSkgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiUGF0Y2ggc2VxdWVuY2UgbXVzdCBiZSBhbiBhcnJheVwiLCBcIlNFUVVFTkNFX05PVF9BTl9BUlJBWVwiKTtcblx0fVxuXHRpZiAoIW11dGF0ZURvY3VtZW50KSBkb2N1bWVudCA9IF9kZWVwQ2xvbmUoZG9jdW1lbnQpO1xuXHRjb25zdCByZXN1bHRzID0gbmV3IEFycmF5KHBhdGNoLmxlbmd0aCk7XG5cdGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSBwYXRjaC5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuXHRcdHJlc3VsdHNbaV0gPSBhcHBseU9wZXJhdGlvbihkb2N1bWVudCwgcGF0Y2hbaV0sIHZhbGlkYXRlT3BlcmF0aW9uLCB0cnVlLCBiYW5Qcm90b3R5cGVNb2RpZmljYXRpb25zLCBpKTtcblx0XHRkb2N1bWVudCA9IHJlc3VsdHNbaV0ubmV3RG9jdW1lbnQ7XG5cdH1cblx0cmVzdWx0cy5uZXdEb2N1bWVudCA9IGRvY3VtZW50O1xuXHRyZXR1cm4gcmVzdWx0cztcbn1cbi8qKlxuKiBBcHBseSBhIHNpbmdsZSBKU09OIFBhdGNoIE9wZXJhdGlvbiBvbiBhIEpTT04gZG9jdW1lbnQuXG4qIFJldHVybnMgdGhlIHVwZGF0ZWQgZG9jdW1lbnQuXG4qIFN1aXRhYmxlIGFzIGEgcmVkdWNlci5cbipcbiogQHBhcmFtIGRvY3VtZW50IFRoZSBkb2N1bWVudCB0byBwYXRjaFxuKiBAcGFyYW0gb3BlcmF0aW9uIFRoZSBvcGVyYXRpb24gdG8gYXBwbHlcbiogQHJldHVybiBUaGUgdXBkYXRlZCBkb2N1bWVudFxuKi9cbmZ1bmN0aW9uIGFwcGx5UmVkdWNlcihkb2N1bWVudCwgb3BlcmF0aW9uLCBpbmRleCkge1xuXHRjb25zdCBvcGVyYXRpb25SZXN1bHQgPSBhcHBseU9wZXJhdGlvbihkb2N1bWVudCwgb3BlcmF0aW9uKTtcblx0aWYgKG9wZXJhdGlvblJlc3VsdC50ZXN0ID09PSBmYWxzZSkgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiVGVzdCBvcGVyYXRpb24gZmFpbGVkXCIsIFwiVEVTVF9PUEVSQVRJT05fRkFJTEVEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcblx0cmV0dXJuIG9wZXJhdGlvblJlc3VsdC5uZXdEb2N1bWVudDtcbn1cbi8qKlxuKiBWYWxpZGF0ZXMgYSBzaW5nbGUgb3BlcmF0aW9uLiBDYWxsZWQgZnJvbSBganNvbnBhdGNoLnZhbGlkYXRlYC4gVGhyb3dzIGBKc29uUGF0Y2hFcnJvcmAgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiogQHBhcmFtIHtvYmplY3R9IG9wZXJhdGlvbiAtIG9wZXJhdGlvbiBvYmplY3QgKHBhdGNoKVxuKiBAcGFyYW0ge251bWJlcn0gaW5kZXggLSBpbmRleCBvZiBvcGVyYXRpb24gaW4gdGhlIHNlcXVlbmNlXG4qIEBwYXJhbSB7b2JqZWN0fSBbZG9jdW1lbnRdIC0gb2JqZWN0IHdoZXJlIHRoZSBvcGVyYXRpb24gaXMgc3VwcG9zZWQgdG8gYmUgYXBwbGllZFxuKiBAcGFyYW0ge3N0cmluZ30gW2V4aXN0aW5nUGF0aEZyYWdtZW50XSAtIGNvbWVzIGFsb25nIHdpdGggYGRvY3VtZW50YFxuKi9cbmZ1bmN0aW9uIHZhbGlkYXRvcihvcGVyYXRpb24sIGluZGV4LCBkb2N1bWVudCwgZXhpc3RpbmdQYXRoRnJhZ21lbnQpIHtcblx0aWYgKHR5cGVvZiBvcGVyYXRpb24gIT09IFwib2JqZWN0XCIgfHwgb3BlcmF0aW9uID09PSBudWxsIHx8IEFycmF5LmlzQXJyYXkob3BlcmF0aW9uKSkgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiT3BlcmF0aW9uIGlzIG5vdCBhbiBvYmplY3RcIiwgXCJPUEVSQVRJT05fTk9UX0FOX09CSkVDVFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG5cdGVsc2UgaWYgKCFvYmpPcHNbb3BlcmF0aW9uLm9wXSkgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiT3BlcmF0aW9uIGBvcGAgcHJvcGVydHkgaXMgbm90IG9uZSBvZiBvcGVyYXRpb25zIGRlZmluZWQgaW4gUkZDLTY5MDJcIiwgXCJPUEVSQVRJT05fT1BfSU5WQUxJRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG5cdGVsc2UgaWYgKHR5cGVvZiBvcGVyYXRpb24ucGF0aCAhPT0gXCJzdHJpbmdcIikgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiT3BlcmF0aW9uIGBwYXRoYCBwcm9wZXJ0eSBpcyBub3QgYSBzdHJpbmdcIiwgXCJPUEVSQVRJT05fUEFUSF9JTlZBTElEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcblx0ZWxzZSBpZiAob3BlcmF0aW9uLnBhdGguaW5kZXhPZihcIi9cIikgIT09IDAgJiYgb3BlcmF0aW9uLnBhdGgubGVuZ3RoID4gMCkgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiT3BlcmF0aW9uIGBwYXRoYCBwcm9wZXJ0eSBtdXN0IHN0YXJ0IHdpdGggXFxcIi9cXFwiXCIsIFwiT1BFUkFUSU9OX1BBVEhfSU5WQUxJRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG5cdGVsc2UgaWYgKChvcGVyYXRpb24ub3AgPT09IFwibW92ZVwiIHx8IG9wZXJhdGlvbi5vcCA9PT0gXCJjb3B5XCIpICYmIHR5cGVvZiBvcGVyYXRpb24uZnJvbSAhPT0gXCJzdHJpbmdcIikgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiT3BlcmF0aW9uIGBmcm9tYCBwcm9wZXJ0eSBpcyBub3QgcHJlc2VudCAoYXBwbGljYWJsZSBpbiBgbW92ZWAgYW5kIGBjb3B5YCBvcGVyYXRpb25zKVwiLCBcIk9QRVJBVElPTl9GUk9NX1JFUVVJUkVEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcblx0ZWxzZSBpZiAoKG9wZXJhdGlvbi5vcCA9PT0gXCJhZGRcIiB8fCBvcGVyYXRpb24ub3AgPT09IFwicmVwbGFjZVwiIHx8IG9wZXJhdGlvbi5vcCA9PT0gXCJ0ZXN0XCIpICYmIG9wZXJhdGlvbi52YWx1ZSA9PT0gdm9pZCAwKSB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJPcGVyYXRpb24gYHZhbHVlYCBwcm9wZXJ0eSBpcyBub3QgcHJlc2VudCAoYXBwbGljYWJsZSBpbiBgYWRkYCwgYHJlcGxhY2VgIGFuZCBgdGVzdGAgb3BlcmF0aW9ucylcIiwgXCJPUEVSQVRJT05fVkFMVUVfUkVRVUlSRURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuXHRlbHNlIGlmICgob3BlcmF0aW9uLm9wID09PSBcImFkZFwiIHx8IG9wZXJhdGlvbi5vcCA9PT0gXCJyZXBsYWNlXCIgfHwgb3BlcmF0aW9uLm9wID09PSBcInRlc3RcIikgJiYgaGFzVW5kZWZpbmVkKG9wZXJhdGlvbi52YWx1ZSkpIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIk9wZXJhdGlvbiBgdmFsdWVgIHByb3BlcnR5IGlzIG5vdCBwcmVzZW50IChhcHBsaWNhYmxlIGluIGBhZGRgLCBgcmVwbGFjZWAgYW5kIGB0ZXN0YCBvcGVyYXRpb25zKVwiLCBcIk9QRVJBVElPTl9WQUxVRV9DQU5OT1RfQ09OVEFJTl9VTkRFRklORURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuXHRlbHNlIGlmIChkb2N1bWVudCkge1xuXHRcdGlmIChvcGVyYXRpb24ub3AgPT0gXCJhZGRcIikge1xuXHRcdFx0dmFyIHBhdGhMZW4gPSBvcGVyYXRpb24ucGF0aC5zcGxpdChcIi9cIikubGVuZ3RoO1xuXHRcdFx0dmFyIGV4aXN0aW5nUGF0aExlbiA9IGV4aXN0aW5nUGF0aEZyYWdtZW50LnNwbGl0KFwiL1wiKS5sZW5ndGg7XG5cdFx0XHRpZiAocGF0aExlbiAhPT0gZXhpc3RpbmdQYXRoTGVuICsgMSAmJiBwYXRoTGVuICE9PSBleGlzdGluZ1BhdGhMZW4pIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIkNhbm5vdCBwZXJmb3JtIGFuIGBhZGRgIG9wZXJhdGlvbiBhdCB0aGUgZGVzaXJlZCBwYXRoXCIsIFwiT1BFUkFUSU9OX1BBVEhfQ0FOTk9UX0FERFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG5cdFx0fSBlbHNlIGlmIChvcGVyYXRpb24ub3AgPT09IFwicmVwbGFjZVwiIHx8IG9wZXJhdGlvbi5vcCA9PT0gXCJyZW1vdmVcIiB8fCBvcGVyYXRpb24ub3AgPT09IFwiX2dldFwiKSB7XG5cdFx0XHRpZiAob3BlcmF0aW9uLnBhdGggIT09IGV4aXN0aW5nUGF0aEZyYWdtZW50KSB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJDYW5ub3QgcGVyZm9ybSB0aGUgb3BlcmF0aW9uIGF0IGEgcGF0aCB0aGF0IGRvZXMgbm90IGV4aXN0XCIsIFwiT1BFUkFUSU9OX1BBVEhfVU5SRVNPTFZBQkxFXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcblx0XHR9IGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJtb3ZlXCIgfHwgb3BlcmF0aW9uLm9wID09PSBcImNvcHlcIikge1xuXHRcdFx0dmFyIGV4aXN0aW5nVmFsdWUgPSB7XG5cdFx0XHRcdG9wOiBcIl9nZXRcIixcblx0XHRcdFx0cGF0aDogb3BlcmF0aW9uLmZyb20sXG5cdFx0XHRcdHZhbHVlOiB2b2lkIDBcblx0XHRcdH07XG5cdFx0XHR2YXIgZXJyb3IgPSB2YWxpZGF0ZShbZXhpc3RpbmdWYWx1ZV0sIGRvY3VtZW50KTtcblx0XHRcdGlmIChlcnJvciAmJiBlcnJvci5uYW1lID09PSBcIk9QRVJBVElPTl9QQVRIX1VOUkVTT0xWQUJMRVwiKSB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJDYW5ub3QgcGVyZm9ybSB0aGUgb3BlcmF0aW9uIGZyb20gYSBwYXRoIHRoYXQgZG9lcyBub3QgZXhpc3RcIiwgXCJPUEVSQVRJT05fRlJPTV9VTlJFU09MVkFCTEVcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuXHRcdH1cblx0fVxufVxuLyoqXG4qIFZhbGlkYXRlcyBhIHNlcXVlbmNlIG9mIG9wZXJhdGlvbnMuIElmIGBkb2N1bWVudGAgcGFyYW1ldGVyIGlzIHByb3ZpZGVkLCB0aGUgc2VxdWVuY2UgaXMgYWRkaXRpb25hbGx5IHZhbGlkYXRlZCBhZ2FpbnN0IHRoZSBvYmplY3QgZG9jdW1lbnQuXG4qIElmIGVycm9yIGlzIGVuY291bnRlcmVkLCByZXR1cm5zIGEgSnNvblBhdGNoRXJyb3Igb2JqZWN0XG4qIEBwYXJhbSBzZXF1ZW5jZVxuKiBAcGFyYW0gZG9jdW1lbnRcbiogQHJldHVybnMge0pzb25QYXRjaEVycm9yfHVuZGVmaW5lZH1cbiovXG5mdW5jdGlvbiB2YWxpZGF0ZShzZXF1ZW5jZSwgZG9jdW1lbnQsIGV4dGVybmFsVmFsaWRhdG9yKSB7XG5cdHRyeSB7XG5cdFx0aWYgKCFBcnJheS5pc0FycmF5KHNlcXVlbmNlKSkgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiUGF0Y2ggc2VxdWVuY2UgbXVzdCBiZSBhbiBhcnJheVwiLCBcIlNFUVVFTkNFX05PVF9BTl9BUlJBWVwiKTtcblx0XHRpZiAoZG9jdW1lbnQpIGFwcGx5UGF0Y2goX2RlZXBDbG9uZShkb2N1bWVudCksIF9kZWVwQ2xvbmUoc2VxdWVuY2UpLCBleHRlcm5hbFZhbGlkYXRvciB8fCB0cnVlKTtcblx0XHRlbHNlIHtcblx0XHRcdGV4dGVybmFsVmFsaWRhdG9yID0gZXh0ZXJuYWxWYWxpZGF0b3IgfHwgdmFsaWRhdG9yO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzZXF1ZW5jZS5sZW5ndGg7IGkrKykgZXh0ZXJuYWxWYWxpZGF0b3Ioc2VxdWVuY2VbaV0sIGksIGRvY3VtZW50LCB2b2lkIDApO1xuXHRcdH1cblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmIChlIGluc3RhbmNlb2YgSnNvblBhdGNoRXJyb3IpIHJldHVybiBlO1xuXHRcdGVsc2UgdGhyb3cgZTtcblx0fVxufVxuZnVuY3Rpb24gX2FyZUVxdWFscyhhLCBiKSB7XG5cdGlmIChhID09PSBiKSByZXR1cm4gdHJ1ZTtcblx0aWYgKGEgJiYgYiAmJiB0eXBlb2YgYSA9PSBcIm9iamVjdFwiICYmIHR5cGVvZiBiID09IFwib2JqZWN0XCIpIHtcblx0XHR2YXIgYXJyQSA9IEFycmF5LmlzQXJyYXkoYSksIGFyckIgPSBBcnJheS5pc0FycmF5KGIpLCBpLCBsZW5ndGgsIGtleTtcblx0XHRpZiAoYXJyQSAmJiBhcnJCKSB7XG5cdFx0XHRsZW5ndGggPSBhLmxlbmd0aDtcblx0XHRcdGlmIChsZW5ndGggIT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcblx0XHRcdGZvciAoaSA9IGxlbmd0aDsgaS0tICE9PSAwOykgaWYgKCFfYXJlRXF1YWxzKGFbaV0sIGJbaV0pKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0aWYgKGFyckEgIT0gYXJyQikgcmV0dXJuIGZhbHNlO1xuXHRcdHZhciBrZXlzID0gT2JqZWN0LmtleXMoYSk7XG5cdFx0bGVuZ3RoID0ga2V5cy5sZW5ndGg7XG5cdFx0aWYgKGxlbmd0aCAhPT0gT2JqZWN0LmtleXMoYikubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG5cdFx0Zm9yIChpID0gbGVuZ3RoOyBpLS0gIT09IDA7KSBpZiAoIWIuaGFzT3duUHJvcGVydHkoa2V5c1tpXSkpIHJldHVybiBmYWxzZTtcblx0XHRmb3IgKGkgPSBsZW5ndGg7IGktLSAhPT0gMDspIHtcblx0XHRcdGtleSA9IGtleXNbaV07XG5cdFx0XHRpZiAoIV9hcmVFcXVhbHMoYVtrZXldLCBiW2tleV0pKSByZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdHJldHVybiBhICE9PSBhICYmIGIgIT09IGI7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgX2FyZUVxdWFscywgYXBwbHlPcGVyYXRpb24sIGFwcGx5UGF0Y2gsIGFwcGx5UmVkdWNlciwgY29yZV9leHBvcnRzLCBnZXRWYWx1ZUJ5UG9pbnRlciwgdmFsaWRhdGUsIHZhbGlkYXRvciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29yZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   compare: () => (/* binding */ compare)\n/* harmony export */ });\n/* harmony import */ var _helpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n/* harmony import */ var _core_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\");\n\n\n\n//#region src/utils/fast-json-patch/src/duplex.ts\nfunction _generate(mirror, obj, patches, path, invertible) {\n\tif (obj === mirror) return;\n\tif (typeof obj.toJSON === \"function\") obj = obj.toJSON();\n\tvar newKeys = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._objectKeys)(obj);\n\tvar oldKeys = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._objectKeys)(mirror);\n\tvar changed = false;\n\tvar deleted = false;\n\tfor (var t = oldKeys.length - 1; t >= 0; t--) {\n\t\tvar key = oldKeys[t];\n\t\tvar oldVal = mirror[key];\n\t\tif ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(obj, key) && !(obj[key] === void 0 && oldVal !== void 0 && Array.isArray(obj) === false)) {\n\t\t\tvar newVal = obj[key];\n\t\t\tif (typeof oldVal == \"object\" && oldVal != null && typeof newVal == \"object\" && newVal != null && Array.isArray(oldVal) === Array.isArray(newVal)) _generate(oldVal, newVal, patches, path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key), invertible);\n\t\t\telse if (oldVal !== newVal) {\n\t\t\t\tchanged = true;\n\t\t\t\tif (invertible) patches.push({\n\t\t\t\t\top: \"test\",\n\t\t\t\t\tpath: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n\t\t\t\t\tvalue: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(oldVal)\n\t\t\t\t});\n\t\t\t\tpatches.push({\n\t\t\t\t\top: \"replace\",\n\t\t\t\t\tpath: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n\t\t\t\t\tvalue: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(newVal)\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (Array.isArray(mirror) === Array.isArray(obj)) {\n\t\t\tif (invertible) patches.push({\n\t\t\t\top: \"test\",\n\t\t\t\tpath: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n\t\t\t\tvalue: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(oldVal)\n\t\t\t});\n\t\t\tpatches.push({\n\t\t\t\top: \"remove\",\n\t\t\t\tpath: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key)\n\t\t\t});\n\t\t\tdeleted = true;\n\t\t} else {\n\t\t\tif (invertible) patches.push({\n\t\t\t\top: \"test\",\n\t\t\t\tpath,\n\t\t\t\tvalue: mirror\n\t\t\t});\n\t\t\tpatches.push({\n\t\t\t\top: \"replace\",\n\t\t\t\tpath,\n\t\t\t\tvalue: obj\n\t\t\t});\n\t\t\tchanged = true;\n\t\t}\n\t}\n\tif (!deleted && newKeys.length == oldKeys.length) return;\n\tfor (var t = 0; t < newKeys.length; t++) {\n\t\tvar key = newKeys[t];\n\t\tif (!(0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(mirror, key) && obj[key] !== void 0) patches.push({\n\t\t\top: \"add\",\n\t\t\tpath: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n\t\t\tvalue: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(obj[key])\n\t\t});\n\t}\n}\n/**\n* Create an array of patches from the differences in two objects\n*/\nfunction compare(tree1, tree2, invertible = false) {\n\tvar patches = [];\n\t_generate(tree1, tree2, patches, \"\", invertible);\n\treturn patches;\n}\n\n//#endregion\n\n//# sourceMappingURL=duplex.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9kdXBsZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTRGO0FBQ3pFOztBQUVuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsd0RBQVc7QUFDMUIsZUFBZSx3REFBVztBQUMxQjtBQUNBO0FBQ0Esa0NBQWtDLFFBQVE7QUFDMUM7QUFDQTtBQUNBLE1BQU0sMkRBQWM7QUFDcEI7QUFDQSxzTUFBc00sZ0VBQW1CO0FBQ3pOO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdFQUFtQjtBQUMzQyxZQUFZLHVEQUFVO0FBQ3RCLEtBQUs7QUFDTDtBQUNBO0FBQ0Esd0JBQXdCLGdFQUFtQjtBQUMzQyxZQUFZLHVEQUFVO0FBQ3RCLEtBQUs7QUFDTDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsdUJBQXVCLGdFQUFtQjtBQUMxQyxXQUFXLHVEQUFVO0FBQ3JCLElBQUk7QUFDSjtBQUNBO0FBQ0EsdUJBQXVCLGdFQUFtQjtBQUMxQyxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsb0JBQW9CO0FBQ3JDO0FBQ0EsT0FBTywyREFBYztBQUNyQjtBQUNBLHNCQUFzQixnRUFBbUI7QUFDekMsVUFBVSx1REFBVTtBQUNwQixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDbUI7QUFDbkIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9mYXN0LWpzb24tcGF0Y2gvc3JjL2R1cGxleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfZGVlcENsb25lLCBfb2JqZWN0S2V5cywgZXNjYXBlUGF0aENvbXBvbmVudCwgaGFzT3duUHJvcGVydHkgfSBmcm9tIFwiLi9oZWxwZXJzLmpzXCI7XG5pbXBvcnQgXCIuL2NvcmUuanNcIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy9mYXN0LWpzb24tcGF0Y2gvc3JjL2R1cGxleC50c1xuZnVuY3Rpb24gX2dlbmVyYXRlKG1pcnJvciwgb2JqLCBwYXRjaGVzLCBwYXRoLCBpbnZlcnRpYmxlKSB7XG5cdGlmIChvYmogPT09IG1pcnJvcikgcmV0dXJuO1xuXHRpZiAodHlwZW9mIG9iai50b0pTT04gPT09IFwiZnVuY3Rpb25cIikgb2JqID0gb2JqLnRvSlNPTigpO1xuXHR2YXIgbmV3S2V5cyA9IF9vYmplY3RLZXlzKG9iaik7XG5cdHZhciBvbGRLZXlzID0gX29iamVjdEtleXMobWlycm9yKTtcblx0dmFyIGNoYW5nZWQgPSBmYWxzZTtcblx0dmFyIGRlbGV0ZWQgPSBmYWxzZTtcblx0Zm9yICh2YXIgdCA9IG9sZEtleXMubGVuZ3RoIC0gMTsgdCA+PSAwOyB0LS0pIHtcblx0XHR2YXIga2V5ID0gb2xkS2V5c1t0XTtcblx0XHR2YXIgb2xkVmFsID0gbWlycm9yW2tleV07XG5cdFx0aWYgKGhhc093blByb3BlcnR5KG9iaiwga2V5KSAmJiAhKG9ialtrZXldID09PSB2b2lkIDAgJiYgb2xkVmFsICE9PSB2b2lkIDAgJiYgQXJyYXkuaXNBcnJheShvYmopID09PSBmYWxzZSkpIHtcblx0XHRcdHZhciBuZXdWYWwgPSBvYmpba2V5XTtcblx0XHRcdGlmICh0eXBlb2Ygb2xkVmFsID09IFwib2JqZWN0XCIgJiYgb2xkVmFsICE9IG51bGwgJiYgdHlwZW9mIG5ld1ZhbCA9PSBcIm9iamVjdFwiICYmIG5ld1ZhbCAhPSBudWxsICYmIEFycmF5LmlzQXJyYXkob2xkVmFsKSA9PT0gQXJyYXkuaXNBcnJheShuZXdWYWwpKSBfZ2VuZXJhdGUob2xkVmFsLCBuZXdWYWwsIHBhdGNoZXMsIHBhdGggKyBcIi9cIiArIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KSwgaW52ZXJ0aWJsZSk7XG5cdFx0XHRlbHNlIGlmIChvbGRWYWwgIT09IG5ld1ZhbCkge1xuXHRcdFx0XHRjaGFuZ2VkID0gdHJ1ZTtcblx0XHRcdFx0aWYgKGludmVydGlibGUpIHBhdGNoZXMucHVzaCh7XG5cdFx0XHRcdFx0b3A6IFwidGVzdFwiLFxuXHRcdFx0XHRcdHBhdGg6IHBhdGggKyBcIi9cIiArIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KSxcblx0XHRcdFx0XHR2YWx1ZTogX2RlZXBDbG9uZShvbGRWYWwpXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRwYXRjaGVzLnB1c2goe1xuXHRcdFx0XHRcdG9wOiBcInJlcGxhY2VcIixcblx0XHRcdFx0XHRwYXRoOiBwYXRoICsgXCIvXCIgKyBlc2NhcGVQYXRoQ29tcG9uZW50KGtleSksXG5cdFx0XHRcdFx0dmFsdWU6IF9kZWVwQ2xvbmUobmV3VmFsKVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkobWlycm9yKSA9PT0gQXJyYXkuaXNBcnJheShvYmopKSB7XG5cdFx0XHRpZiAoaW52ZXJ0aWJsZSkgcGF0Y2hlcy5wdXNoKHtcblx0XHRcdFx0b3A6IFwidGVzdFwiLFxuXHRcdFx0XHRwYXRoOiBwYXRoICsgXCIvXCIgKyBlc2NhcGVQYXRoQ29tcG9uZW50KGtleSksXG5cdFx0XHRcdHZhbHVlOiBfZGVlcENsb25lKG9sZFZhbClcblx0XHRcdH0pO1xuXHRcdFx0cGF0Y2hlcy5wdXNoKHtcblx0XHRcdFx0b3A6IFwicmVtb3ZlXCIsXG5cdFx0XHRcdHBhdGg6IHBhdGggKyBcIi9cIiArIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KVxuXHRcdFx0fSk7XG5cdFx0XHRkZWxldGVkID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKGludmVydGlibGUpIHBhdGNoZXMucHVzaCh7XG5cdFx0XHRcdG9wOiBcInRlc3RcIixcblx0XHRcdFx0cGF0aCxcblx0XHRcdFx0dmFsdWU6IG1pcnJvclxuXHRcdFx0fSk7XG5cdFx0XHRwYXRjaGVzLnB1c2goe1xuXHRcdFx0XHRvcDogXCJyZXBsYWNlXCIsXG5cdFx0XHRcdHBhdGgsXG5cdFx0XHRcdHZhbHVlOiBvYmpcblx0XHRcdH0pO1xuXHRcdFx0Y2hhbmdlZCA9IHRydWU7XG5cdFx0fVxuXHR9XG5cdGlmICghZGVsZXRlZCAmJiBuZXdLZXlzLmxlbmd0aCA9PSBvbGRLZXlzLmxlbmd0aCkgcmV0dXJuO1xuXHRmb3IgKHZhciB0ID0gMDsgdCA8IG5ld0tleXMubGVuZ3RoOyB0KyspIHtcblx0XHR2YXIga2V5ID0gbmV3S2V5c1t0XTtcblx0XHRpZiAoIWhhc093blByb3BlcnR5KG1pcnJvciwga2V5KSAmJiBvYmpba2V5XSAhPT0gdm9pZCAwKSBwYXRjaGVzLnB1c2goe1xuXHRcdFx0b3A6IFwiYWRkXCIsXG5cdFx0XHRwYXRoOiBwYXRoICsgXCIvXCIgKyBlc2NhcGVQYXRoQ29tcG9uZW50KGtleSksXG5cdFx0XHR2YWx1ZTogX2RlZXBDbG9uZShvYmpba2V5XSlcblx0XHR9KTtcblx0fVxufVxuLyoqXG4qIENyZWF0ZSBhbiBhcnJheSBvZiBwYXRjaGVzIGZyb20gdGhlIGRpZmZlcmVuY2VzIGluIHR3byBvYmplY3RzXG4qL1xuZnVuY3Rpb24gY29tcGFyZSh0cmVlMSwgdHJlZTIsIGludmVydGlibGUgPSBmYWxzZSkge1xuXHR2YXIgcGF0Y2hlcyA9IFtdO1xuXHRfZ2VuZXJhdGUodHJlZTEsIHRyZWUyLCBwYXRjaGVzLCBcIlwiLCBpbnZlcnRpYmxlKTtcblx0cmV0dXJuIHBhdGNoZXM7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY29tcGFyZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZHVwbGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PatchError: () => (/* binding */ PatchError),\n/* harmony export */   _deepClone: () => (/* binding */ _deepClone),\n/* harmony export */   _objectKeys: () => (/* binding */ _objectKeys),\n/* harmony export */   escapePathComponent: () => (/* binding */ escapePathComponent),\n/* harmony export */   hasOwnProperty: () => (/* binding */ hasOwnProperty),\n/* harmony export */   hasUndefined: () => (/* binding */ hasUndefined),\n/* harmony export */   isInteger: () => (/* binding */ isInteger),\n/* harmony export */   unescapePathComponent: () => (/* binding */ unescapePathComponent)\n/* harmony export */ });\n//#region src/utils/fast-json-patch/src/helpers.ts\n/*!\n* https://github.com/Starcounter-Jack/JSON-Patch\n* (c) 2017-2022 Joachim Wester\n* MIT licensed\n*/\nconst _hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwnProperty(obj, key) {\n\treturn _hasOwnProperty.call(obj, key);\n}\nfunction _objectKeys(obj) {\n\tif (Array.isArray(obj)) {\n\t\tconst keys$1 = new Array(obj.length);\n\t\tfor (let k = 0; k < keys$1.length; k++) keys$1[k] = \"\" + k;\n\t\treturn keys$1;\n\t}\n\tif (Object.keys) return Object.keys(obj);\n\tlet keys = [];\n\tfor (let i in obj) if (hasOwnProperty(obj, i)) keys.push(i);\n\treturn keys;\n}\n/**\n* Deeply clone the object.\n* https://jsperf.com/deep-copy-vs-json-stringify-json-parse/25 (recursiveDeepCopy)\n* @param  {any} obj value to clone\n* @return {any} cloned obj\n*/\nfunction _deepClone(obj) {\n\tswitch (typeof obj) {\n\t\tcase \"object\": return JSON.parse(JSON.stringify(obj));\n\t\tcase \"undefined\": return null;\n\t\tdefault: return obj;\n\t}\n}\nfunction isInteger(str) {\n\tlet i = 0;\n\tconst len = str.length;\n\tlet charCode;\n\twhile (i < len) {\n\t\tcharCode = str.charCodeAt(i);\n\t\tif (charCode >= 48 && charCode <= 57) {\n\t\t\ti++;\n\t\t\tcontinue;\n\t\t}\n\t\treturn false;\n\t}\n\treturn true;\n}\n/**\n* Escapes a json pointer path\n* @param path The raw pointer\n* @return the Escaped path\n*/\nfunction escapePathComponent(path) {\n\tif (path.indexOf(\"/\") === -1 && path.indexOf(\"~\") === -1) return path;\n\treturn path.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n}\n/**\n* Unescapes a json pointer path\n* @param path The escaped pointer\n* @return The unescaped path\n*/\nfunction unescapePathComponent(path) {\n\treturn path.replace(/~1/g, \"/\").replace(/~0/g, \"~\");\n}\n/**\n* Recursively checks whether an object has any undefined values inside.\n*/\nfunction hasUndefined(obj) {\n\tif (obj === void 0) return true;\n\tif (obj) {\n\t\tif (Array.isArray(obj)) {\n\t\t\tfor (let i$1 = 0, len = obj.length; i$1 < len; i$1++) if (hasUndefined(obj[i$1])) return true;\n\t\t} else if (typeof obj === \"object\") {\n\t\t\tconst objKeys = _objectKeys(obj);\n\t\t\tconst objKeysLength = objKeys.length;\n\t\t\tfor (var i = 0; i < objKeysLength; i++) if (hasUndefined(obj[objKeys[i]])) return true;\n\t\t}\n\t}\n\treturn false;\n}\nfunction patchErrorMessageFormatter(message, args) {\n\tconst messageParts = [message];\n\tfor (const key in args) {\n\t\tconst value = typeof args[key] === \"object\" ? JSON.stringify(args[key], null, 2) : args[key];\n\t\tif (typeof value !== \"undefined\") messageParts.push(`${key}: ${value}`);\n\t}\n\treturn messageParts.join(\"\\n\");\n}\nvar PatchError = class extends Error {\n\tconstructor(message, name, index, operation, tree) {\n\t\tsuper(patchErrorMessageFormatter(message, {\n\t\t\tname,\n\t\t\tindex,\n\t\t\toperation,\n\t\t\ttree\n\t\t}));\n\t\tthis.name = name;\n\t\tthis.index = index;\n\t\tthis.operation = operation;\n\t\tthis.tree = tree;\n\t\tObject.setPrototypeOf(this, new.target.prototype);\n\t\tthis.message = patchErrorMessageFormatter(message, {\n\t\t\tname,\n\t\t\tindex,\n\t\t\toperation,\n\t\t\ttree\n\t\t});\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=helpers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9oZWxwZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsbUJBQW1CO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxLQUFLO0FBQ2hCLFdBQVcsS0FBSztBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxXQUFXO0FBQ2xELElBQUk7QUFDSjtBQUNBO0FBQ0EsbUJBQW1CLG1CQUFtQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELElBQUksSUFBSSxNQUFNO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDb0k7QUFDcEkiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9mYXN0LWpzb24tcGF0Y2gvc3JjL2hlbHBlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy9mYXN0LWpzb24tcGF0Y2gvc3JjL2hlbHBlcnMudHNcbi8qIVxuKiBodHRwczovL2dpdGh1Yi5jb20vU3RhcmNvdW50ZXItSmFjay9KU09OLVBhdGNoXG4qIChjKSAyMDE3LTIwMjIgSm9hY2hpbSBXZXN0ZXJcbiogTUlUIGxpY2Vuc2VkXG4qL1xuY29uc3QgX2hhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbmZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwga2V5KSB7XG5cdHJldHVybiBfaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG59XG5mdW5jdGlvbiBfb2JqZWN0S2V5cyhvYmopIHtcblx0aWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuXHRcdGNvbnN0IGtleXMkMSA9IG5ldyBBcnJheShvYmoubGVuZ3RoKTtcblx0XHRmb3IgKGxldCBrID0gMDsgayA8IGtleXMkMS5sZW5ndGg7IGsrKykga2V5cyQxW2tdID0gXCJcIiArIGs7XG5cdFx0cmV0dXJuIGtleXMkMTtcblx0fVxuXHRpZiAoT2JqZWN0LmtleXMpIHJldHVybiBPYmplY3Qua2V5cyhvYmopO1xuXHRsZXQga2V5cyA9IFtdO1xuXHRmb3IgKGxldCBpIGluIG9iaikgaWYgKGhhc093blByb3BlcnR5KG9iaiwgaSkpIGtleXMucHVzaChpKTtcblx0cmV0dXJuIGtleXM7XG59XG4vKipcbiogRGVlcGx5IGNsb25lIHRoZSBvYmplY3QuXG4qIGh0dHBzOi8vanNwZXJmLmNvbS9kZWVwLWNvcHktdnMtanNvbi1zdHJpbmdpZnktanNvbi1wYXJzZS8yNSAocmVjdXJzaXZlRGVlcENvcHkpXG4qIEBwYXJhbSAge2FueX0gb2JqIHZhbHVlIHRvIGNsb25lXG4qIEByZXR1cm4ge2FueX0gY2xvbmVkIG9ialxuKi9cbmZ1bmN0aW9uIF9kZWVwQ2xvbmUob2JqKSB7XG5cdHN3aXRjaCAodHlwZW9mIG9iaikge1xuXHRcdGNhc2UgXCJvYmplY3RcIjogcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSk7XG5cdFx0Y2FzZSBcInVuZGVmaW5lZFwiOiByZXR1cm4gbnVsbDtcblx0XHRkZWZhdWx0OiByZXR1cm4gb2JqO1xuXHR9XG59XG5mdW5jdGlvbiBpc0ludGVnZXIoc3RyKSB7XG5cdGxldCBpID0gMDtcblx0Y29uc3QgbGVuID0gc3RyLmxlbmd0aDtcblx0bGV0IGNoYXJDb2RlO1xuXHR3aGlsZSAoaSA8IGxlbikge1xuXHRcdGNoYXJDb2RlID0gc3RyLmNoYXJDb2RlQXQoaSk7XG5cdFx0aWYgKGNoYXJDb2RlID49IDQ4ICYmIGNoYXJDb2RlIDw9IDU3KSB7XG5cdFx0XHRpKys7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdHJldHVybiB0cnVlO1xufVxuLyoqXG4qIEVzY2FwZXMgYSBqc29uIHBvaW50ZXIgcGF0aFxuKiBAcGFyYW0gcGF0aCBUaGUgcmF3IHBvaW50ZXJcbiogQHJldHVybiB0aGUgRXNjYXBlZCBwYXRoXG4qL1xuZnVuY3Rpb24gZXNjYXBlUGF0aENvbXBvbmVudChwYXRoKSB7XG5cdGlmIChwYXRoLmluZGV4T2YoXCIvXCIpID09PSAtMSAmJiBwYXRoLmluZGV4T2YoXCJ+XCIpID09PSAtMSkgcmV0dXJuIHBhdGg7XG5cdHJldHVybiBwYXRoLnJlcGxhY2UoL34vZywgXCJ+MFwiKS5yZXBsYWNlKC9cXC8vZywgXCJ+MVwiKTtcbn1cbi8qKlxuKiBVbmVzY2FwZXMgYSBqc29uIHBvaW50ZXIgcGF0aFxuKiBAcGFyYW0gcGF0aCBUaGUgZXNjYXBlZCBwb2ludGVyXG4qIEByZXR1cm4gVGhlIHVuZXNjYXBlZCBwYXRoXG4qL1xuZnVuY3Rpb24gdW5lc2NhcGVQYXRoQ29tcG9uZW50KHBhdGgpIHtcblx0cmV0dXJuIHBhdGgucmVwbGFjZSgvfjEvZywgXCIvXCIpLnJlcGxhY2UoL34wL2csIFwiflwiKTtcbn1cbi8qKlxuKiBSZWN1cnNpdmVseSBjaGVja3Mgd2hldGhlciBhbiBvYmplY3QgaGFzIGFueSB1bmRlZmluZWQgdmFsdWVzIGluc2lkZS5cbiovXG5mdW5jdGlvbiBoYXNVbmRlZmluZWQob2JqKSB7XG5cdGlmIChvYmogPT09IHZvaWQgMCkgcmV0dXJuIHRydWU7XG5cdGlmIChvYmopIHtcblx0XHRpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG5cdFx0XHRmb3IgKGxldCBpJDEgPSAwLCBsZW4gPSBvYmoubGVuZ3RoOyBpJDEgPCBsZW47IGkkMSsrKSBpZiAoaGFzVW5kZWZpbmVkKG9ialtpJDFdKSkgcmV0dXJuIHRydWU7XG5cdFx0fSBlbHNlIGlmICh0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiKSB7XG5cdFx0XHRjb25zdCBvYmpLZXlzID0gX29iamVjdEtleXMob2JqKTtcblx0XHRcdGNvbnN0IG9iaktleXNMZW5ndGggPSBvYmpLZXlzLmxlbmd0aDtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgb2JqS2V5c0xlbmd0aDsgaSsrKSBpZiAoaGFzVW5kZWZpbmVkKG9ialtvYmpLZXlzW2ldXSkpIHJldHVybiB0cnVlO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBwYXRjaEVycm9yTWVzc2FnZUZvcm1hdHRlcihtZXNzYWdlLCBhcmdzKSB7XG5cdGNvbnN0IG1lc3NhZ2VQYXJ0cyA9IFttZXNzYWdlXTtcblx0Zm9yIChjb25zdCBrZXkgaW4gYXJncykge1xuXHRcdGNvbnN0IHZhbHVlID0gdHlwZW9mIGFyZ3Nba2V5XSA9PT0gXCJvYmplY3RcIiA/IEpTT04uc3RyaW5naWZ5KGFyZ3Nba2V5XSwgbnVsbCwgMikgOiBhcmdzW2tleV07XG5cdFx0aWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikgbWVzc2FnZVBhcnRzLnB1c2goYCR7a2V5fTogJHt2YWx1ZX1gKTtcblx0fVxuXHRyZXR1cm4gbWVzc2FnZVBhcnRzLmpvaW4oXCJcXG5cIik7XG59XG52YXIgUGF0Y2hFcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuXHRjb25zdHJ1Y3RvcihtZXNzYWdlLCBuYW1lLCBpbmRleCwgb3BlcmF0aW9uLCB0cmVlKSB7XG5cdFx0c3VwZXIocGF0Y2hFcnJvck1lc3NhZ2VGb3JtYXR0ZXIobWVzc2FnZSwge1xuXHRcdFx0bmFtZSxcblx0XHRcdGluZGV4LFxuXHRcdFx0b3BlcmF0aW9uLFxuXHRcdFx0dHJlZVxuXHRcdH0pKTtcblx0XHR0aGlzLm5hbWUgPSBuYW1lO1xuXHRcdHRoaXMuaW5kZXggPSBpbmRleDtcblx0XHR0aGlzLm9wZXJhdGlvbiA9IG9wZXJhdGlvbjtcblx0XHR0aGlzLnRyZWUgPSB0cmVlO1xuXHRcdE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBuZXcudGFyZ2V0LnByb3RvdHlwZSk7XG5cdFx0dGhpcy5tZXNzYWdlID0gcGF0Y2hFcnJvck1lc3NhZ2VGb3JtYXR0ZXIobWVzc2FnZSwge1xuXHRcdFx0bmFtZSxcblx0XHRcdGluZGV4LFxuXHRcdFx0b3BlcmF0aW9uLFxuXHRcdFx0dHJlZVxuXHRcdH0pO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IFBhdGNoRXJyb3IsIF9kZWVwQ2xvbmUsIF9vYmplY3RLZXlzLCBlc2NhcGVQYXRoQ29tcG9uZW50LCBoYXNPd25Qcm9wZXJ0eSwgaGFzVW5kZWZpbmVkLCBpc0ludGVnZXIsIHVuZXNjYXBlUGF0aENvbXBvbmVudCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGVscGVycy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/format.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/format.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   format_exports: () => (/* binding */ format_exports)\n/* harmony export */ });\n//#region src/utils/format.ts\nvar format_exports = {};\n\n//#endregion\n\n//# sourceMappingURL=format.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZm9ybWF0LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBOztBQUVBO0FBQzBCO0FBQzFCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZm9ybWF0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvdXRpbHMvZm9ybWF0LnRzXG52YXIgZm9ybWF0X2V4cG9ydHMgPSB7fTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBmb3JtYXRfZXhwb3J0cyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Zm9ybWF0LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/format.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/function_calling.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/function_calling.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertToOpenAIFunction: () => (/* binding */ convertToOpenAIFunction),\n/* harmony export */   convertToOpenAITool: () => (/* binding */ convertToOpenAITool),\n/* harmony export */   function_calling_exports: () => (/* binding */ function_calling_exports),\n/* harmony export */   isLangChainTool: () => (/* reexport safe */ _tools_types_js__WEBPACK_IMPORTED_MODULE_2__.isLangChainTool),\n/* harmony export */   isRunnableToolLike: () => (/* reexport safe */ _tools_types_js__WEBPACK_IMPORTED_MODULE_2__.isRunnableToolLike),\n/* harmony export */   isStructuredTool: () => (/* reexport safe */ _tools_types_js__WEBPACK_IMPORTED_MODULE_2__.isStructuredTool),\n/* harmony export */   isStructuredToolParams: () => (/* reexport safe */ _tools_types_js__WEBPACK_IMPORTED_MODULE_2__.isStructuredToolParams)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _json_schema_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./json_schema.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/json_schema.js\");\n/* harmony import */ var _tools_types_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tools/types.js */ \"(ssr)/./node_modules/@langchain/core/dist/tools/types.js\");\n\n\n\n\n//#region src/utils/function_calling.ts\nvar function_calling_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(function_calling_exports, {\n\tconvertToOpenAIFunction: () => convertToOpenAIFunction,\n\tconvertToOpenAITool: () => convertToOpenAITool,\n\tisLangChainTool: () => _tools_types_js__WEBPACK_IMPORTED_MODULE_2__.isLangChainTool,\n\tisRunnableToolLike: () => _tools_types_js__WEBPACK_IMPORTED_MODULE_2__.isRunnableToolLike,\n\tisStructuredTool: () => _tools_types_js__WEBPACK_IMPORTED_MODULE_2__.isStructuredTool,\n\tisStructuredToolParams: () => _tools_types_js__WEBPACK_IMPORTED_MODULE_2__.isStructuredToolParams\n});\n/**\n* Formats a `StructuredTool` or `RunnableToolLike` instance into a format\n* that is compatible with OpenAI function calling. If `StructuredTool` or\n* `RunnableToolLike` has a zod schema, the output will be converted into a\n* JSON schema, which is then used as the parameters for the OpenAI tool.\n*\n* @param {StructuredToolInterface | RunnableToolLike} tool The tool to convert to an OpenAI function.\n* @returns {FunctionDefinition} The inputted tool in OpenAI function format.\n*/\nfunction convertToOpenAIFunction(tool, fields) {\n\tconst fieldsCopy = typeof fields === \"number\" ? void 0 : fields;\n\treturn {\n\t\tname: tool.name,\n\t\tdescription: tool.description,\n\t\tparameters: (0,_json_schema_js__WEBPACK_IMPORTED_MODULE_1__.toJsonSchema)(tool.schema),\n\t\t...fieldsCopy?.strict !== void 0 ? { strict: fieldsCopy.strict } : {}\n\t};\n}\n/**\n* Formats a `StructuredTool` or `RunnableToolLike` instance into a\n* format that is compatible with OpenAI tool calling. If `StructuredTool` or\n* `RunnableToolLike` has a zod schema, the output will be converted into a\n* JSON schema, which is then used as the parameters for the OpenAI tool.\n*\n* @param {StructuredToolInterface | Record<string, any> | RunnableToolLike} tool The tool to convert to an OpenAI tool.\n* @returns {ToolDefinition} The inputted tool in OpenAI tool format.\n*/\nfunction convertToOpenAITool(tool, fields) {\n\tconst fieldsCopy = typeof fields === \"number\" ? void 0 : fields;\n\tlet toolDef;\n\tif ((0,_tools_types_js__WEBPACK_IMPORTED_MODULE_2__.isLangChainTool)(tool)) toolDef = {\n\t\ttype: \"function\",\n\t\tfunction: convertToOpenAIFunction(tool)\n\t};\n\telse toolDef = tool;\n\tif (fieldsCopy?.strict !== void 0) toolDef.function.strict = fieldsCopy.strict;\n\treturn toolDef;\n}\n\n//#endregion\n\n//# sourceMappingURL=function_calling.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZnVuY3Rpb25fY2FsbGluZy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQTJEO0FBQ1g7QUFDa0U7O0FBRWxIO0FBQ0E7QUFDQSxzRUFBUTtBQUNSO0FBQ0E7QUFDQSx3QkFBd0IsNERBQWU7QUFDdkMsMkJBQTJCLCtEQUFrQjtBQUM3Qyx5QkFBeUIsNkRBQWdCO0FBQ3pDLCtCQUErQixtRUFBc0I7QUFDckQsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsNENBQTRDO0FBQ3RELFlBQVksb0JBQW9CO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsNkRBQVk7QUFDMUIsdUNBQXVDLDRCQUE0QjtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxrRUFBa0U7QUFDNUUsWUFBWSxnQkFBZ0I7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLGdFQUFlO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ2lLO0FBQ2pLIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZnVuY3Rpb25fY2FsbGluZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4cG9ydCB9IGZyb20gXCIuLi9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyB0b0pzb25TY2hlbWEgfSBmcm9tIFwiLi9qc29uX3NjaGVtYS5qc1wiO1xuaW1wb3J0IHsgaXNMYW5nQ2hhaW5Ub29sLCBpc1J1bm5hYmxlVG9vbExpa2UsIGlzU3RydWN0dXJlZFRvb2wsIGlzU3RydWN0dXJlZFRvb2xQYXJhbXMgfSBmcm9tIFwiLi4vdG9vbHMvdHlwZXMuanNcIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy9mdW5jdGlvbl9jYWxsaW5nLnRzXG52YXIgZnVuY3Rpb25fY2FsbGluZ19leHBvcnRzID0ge307XG5fX2V4cG9ydChmdW5jdGlvbl9jYWxsaW5nX2V4cG9ydHMsIHtcblx0Y29udmVydFRvT3BlbkFJRnVuY3Rpb246ICgpID0+IGNvbnZlcnRUb09wZW5BSUZ1bmN0aW9uLFxuXHRjb252ZXJ0VG9PcGVuQUlUb29sOiAoKSA9PiBjb252ZXJ0VG9PcGVuQUlUb29sLFxuXHRpc0xhbmdDaGFpblRvb2w6ICgpID0+IGlzTGFuZ0NoYWluVG9vbCxcblx0aXNSdW5uYWJsZVRvb2xMaWtlOiAoKSA9PiBpc1J1bm5hYmxlVG9vbExpa2UsXG5cdGlzU3RydWN0dXJlZFRvb2w6ICgpID0+IGlzU3RydWN0dXJlZFRvb2wsXG5cdGlzU3RydWN0dXJlZFRvb2xQYXJhbXM6ICgpID0+IGlzU3RydWN0dXJlZFRvb2xQYXJhbXNcbn0pO1xuLyoqXG4qIEZvcm1hdHMgYSBgU3RydWN0dXJlZFRvb2xgIG9yIGBSdW5uYWJsZVRvb2xMaWtlYCBpbnN0YW5jZSBpbnRvIGEgZm9ybWF0XG4qIHRoYXQgaXMgY29tcGF0aWJsZSB3aXRoIE9wZW5BSSBmdW5jdGlvbiBjYWxsaW5nLiBJZiBgU3RydWN0dXJlZFRvb2xgIG9yXG4qIGBSdW5uYWJsZVRvb2xMaWtlYCBoYXMgYSB6b2Qgc2NoZW1hLCB0aGUgb3V0cHV0IHdpbGwgYmUgY29udmVydGVkIGludG8gYVxuKiBKU09OIHNjaGVtYSwgd2hpY2ggaXMgdGhlbiB1c2VkIGFzIHRoZSBwYXJhbWV0ZXJzIGZvciB0aGUgT3BlbkFJIHRvb2wuXG4qXG4qIEBwYXJhbSB7U3RydWN0dXJlZFRvb2xJbnRlcmZhY2UgfCBSdW5uYWJsZVRvb2xMaWtlfSB0b29sIFRoZSB0b29sIHRvIGNvbnZlcnQgdG8gYW4gT3BlbkFJIGZ1bmN0aW9uLlxuKiBAcmV0dXJucyB7RnVuY3Rpb25EZWZpbml0aW9ufSBUaGUgaW5wdXR0ZWQgdG9vbCBpbiBPcGVuQUkgZnVuY3Rpb24gZm9ybWF0LlxuKi9cbmZ1bmN0aW9uIGNvbnZlcnRUb09wZW5BSUZ1bmN0aW9uKHRvb2wsIGZpZWxkcykge1xuXHRjb25zdCBmaWVsZHNDb3B5ID0gdHlwZW9mIGZpZWxkcyA9PT0gXCJudW1iZXJcIiA/IHZvaWQgMCA6IGZpZWxkcztcblx0cmV0dXJuIHtcblx0XHRuYW1lOiB0b29sLm5hbWUsXG5cdFx0ZGVzY3JpcHRpb246IHRvb2wuZGVzY3JpcHRpb24sXG5cdFx0cGFyYW1ldGVyczogdG9Kc29uU2NoZW1hKHRvb2wuc2NoZW1hKSxcblx0XHQuLi5maWVsZHNDb3B5Py5zdHJpY3QgIT09IHZvaWQgMCA/IHsgc3RyaWN0OiBmaWVsZHNDb3B5LnN0cmljdCB9IDoge31cblx0fTtcbn1cbi8qKlxuKiBGb3JtYXRzIGEgYFN0cnVjdHVyZWRUb29sYCBvciBgUnVubmFibGVUb29sTGlrZWAgaW5zdGFuY2UgaW50byBhXG4qIGZvcm1hdCB0aGF0IGlzIGNvbXBhdGlibGUgd2l0aCBPcGVuQUkgdG9vbCBjYWxsaW5nLiBJZiBgU3RydWN0dXJlZFRvb2xgIG9yXG4qIGBSdW5uYWJsZVRvb2xMaWtlYCBoYXMgYSB6b2Qgc2NoZW1hLCB0aGUgb3V0cHV0IHdpbGwgYmUgY29udmVydGVkIGludG8gYVxuKiBKU09OIHNjaGVtYSwgd2hpY2ggaXMgdGhlbiB1c2VkIGFzIHRoZSBwYXJhbWV0ZXJzIGZvciB0aGUgT3BlbkFJIHRvb2wuXG4qXG4qIEBwYXJhbSB7U3RydWN0dXJlZFRvb2xJbnRlcmZhY2UgfCBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgUnVubmFibGVUb29sTGlrZX0gdG9vbCBUaGUgdG9vbCB0byBjb252ZXJ0IHRvIGFuIE9wZW5BSSB0b29sLlxuKiBAcmV0dXJucyB7VG9vbERlZmluaXRpb259IFRoZSBpbnB1dHRlZCB0b29sIGluIE9wZW5BSSB0b29sIGZvcm1hdC5cbiovXG5mdW5jdGlvbiBjb252ZXJ0VG9PcGVuQUlUb29sKHRvb2wsIGZpZWxkcykge1xuXHRjb25zdCBmaWVsZHNDb3B5ID0gdHlwZW9mIGZpZWxkcyA9PT0gXCJudW1iZXJcIiA/IHZvaWQgMCA6IGZpZWxkcztcblx0bGV0IHRvb2xEZWY7XG5cdGlmIChpc0xhbmdDaGFpblRvb2wodG9vbCkpIHRvb2xEZWYgPSB7XG5cdFx0dHlwZTogXCJmdW5jdGlvblwiLFxuXHRcdGZ1bmN0aW9uOiBjb252ZXJ0VG9PcGVuQUlGdW5jdGlvbih0b29sKVxuXHR9O1xuXHRlbHNlIHRvb2xEZWYgPSB0b29sO1xuXHRpZiAoZmllbGRzQ29weT8uc3RyaWN0ICE9PSB2b2lkIDApIHRvb2xEZWYuZnVuY3Rpb24uc3RyaWN0ID0gZmllbGRzQ29weS5zdHJpY3Q7XG5cdHJldHVybiB0b29sRGVmO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNvbnZlcnRUb09wZW5BSUZ1bmN0aW9uLCBjb252ZXJ0VG9PcGVuQUlUb29sLCBmdW5jdGlvbl9jYWxsaW5nX2V4cG9ydHMsIGlzTGFuZ0NoYWluVG9vbCwgaXNSdW5uYWJsZVRvb2xMaWtlLCBpc1N0cnVjdHVyZWRUb29sLCBpc1N0cnVjdHVyZWRUb29sUGFyYW1zIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mdW5jdGlvbl9jYWxsaW5nLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/function_calling.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/hash.js":
/*!*********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/hash.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hash_exports: () => (/* binding */ hash_exports),\n/* harmony export */   sha256: () => (/* reexport safe */ _js_sha256_hash_js__WEBPACK_IMPORTED_MODULE_1__.sha256)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _js_sha256_hash_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./js-sha256/hash.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/js-sha256/hash.js\");\n\n\n\n//#region src/utils/hash.ts\nvar hash_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(hash_exports, { sha256: () => _js_sha256_hash_js__WEBPACK_IMPORTED_MODULE_1__.sha256 });\n\n//#endregion\n\n//# sourceMappingURL=hash.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvaGFzaC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTJEO0FBQ2Q7O0FBRTdDO0FBQ0E7QUFDQSxzRUFBUSxpQkFBaUIsY0FBYyxzREFBTSxFQUFFOztBQUUvQztBQUNnQztBQUNoQyIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2hhc2guanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19leHBvcnQgfSBmcm9tIFwiLi4vX3ZpcnR1YWwvcm9sbGRvd25fcnVudGltZS5qc1wiO1xuaW1wb3J0IHsgc2hhMjU2IH0gZnJvbSBcIi4vanMtc2hhMjU2L2hhc2guanNcIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy9oYXNoLnRzXG52YXIgaGFzaF9leHBvcnRzID0ge307XG5fX2V4cG9ydChoYXNoX2V4cG9ydHMsIHsgc2hhMjU2OiAoKSA9PiBzaGEyNTYgfSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgaGFzaF9leHBvcnRzLCBzaGEyNTYgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhhc2guanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/hash.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/is-network-error/index.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/is-network-error/index.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isNetworkError: () => (/* binding */ isNetworkError)\n/* harmony export */ });\n//#region src/utils/is-network-error/index.js\nconst objectToString = Object.prototype.toString;\nconst isError = (value) => objectToString.call(value) === \"[object Error]\";\nconst errorMessages = new Set([\n\t\"network error\",\n\t\"Failed to fetch\",\n\t\"NetworkError when attempting to fetch resource.\",\n\t\"The Internet connection appears to be offline.\",\n\t\"Network request failed\",\n\t\"fetch failed\",\n\t\"terminated\",\n\t\" A network error occurred.\",\n\t\"Network connection lost\"\n]);\nfunction isNetworkError(error) {\n\tconst isValid = error && isError(error) && error.name === \"TypeError\" && typeof error.message === \"string\";\n\tif (!isValid) return false;\n\tconst { message, stack } = error;\n\tif (message === \"Load failed\") return stack === void 0 || \"__sentry_captured__\" in error;\n\tif (message.startsWith(\"error sending request for url\")) return true;\n\treturn errorMessages.has(message);\n}\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvaXMtbmV0d29yay1lcnJvci9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsaUJBQWlCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzBCO0FBQzFCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvaXMtbmV0d29yay1lcnJvci9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3V0aWxzL2lzLW5ldHdvcmstZXJyb3IvaW5kZXguanNcbmNvbnN0IG9iamVjdFRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbmNvbnN0IGlzRXJyb3IgPSAodmFsdWUpID0+IG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09PSBcIltvYmplY3QgRXJyb3JdXCI7XG5jb25zdCBlcnJvck1lc3NhZ2VzID0gbmV3IFNldChbXG5cdFwibmV0d29yayBlcnJvclwiLFxuXHRcIkZhaWxlZCB0byBmZXRjaFwiLFxuXHRcIk5ldHdvcmtFcnJvciB3aGVuIGF0dGVtcHRpbmcgdG8gZmV0Y2ggcmVzb3VyY2UuXCIsXG5cdFwiVGhlIEludGVybmV0IGNvbm5lY3Rpb24gYXBwZWFycyB0byBiZSBvZmZsaW5lLlwiLFxuXHRcIk5ldHdvcmsgcmVxdWVzdCBmYWlsZWRcIixcblx0XCJmZXRjaCBmYWlsZWRcIixcblx0XCJ0ZXJtaW5hdGVkXCIsXG5cdFwiIEEgbmV0d29yayBlcnJvciBvY2N1cnJlZC5cIixcblx0XCJOZXR3b3JrIGNvbm5lY3Rpb24gbG9zdFwiXG5dKTtcbmZ1bmN0aW9uIGlzTmV0d29ya0Vycm9yKGVycm9yKSB7XG5cdGNvbnN0IGlzVmFsaWQgPSBlcnJvciAmJiBpc0Vycm9yKGVycm9yKSAmJiBlcnJvci5uYW1lID09PSBcIlR5cGVFcnJvclwiICYmIHR5cGVvZiBlcnJvci5tZXNzYWdlID09PSBcInN0cmluZ1wiO1xuXHRpZiAoIWlzVmFsaWQpIHJldHVybiBmYWxzZTtcblx0Y29uc3QgeyBtZXNzYWdlLCBzdGFjayB9ID0gZXJyb3I7XG5cdGlmIChtZXNzYWdlID09PSBcIkxvYWQgZmFpbGVkXCIpIHJldHVybiBzdGFjayA9PT0gdm9pZCAwIHx8IFwiX19zZW50cnlfY2FwdHVyZWRfX1wiIGluIGVycm9yO1xuXHRpZiAobWVzc2FnZS5zdGFydHNXaXRoKFwiZXJyb3Igc2VuZGluZyByZXF1ZXN0IGZvciB1cmxcIikpIHJldHVybiB0cnVlO1xuXHRyZXR1cm4gZXJyb3JNZXNzYWdlcy5oYXMobWVzc2FnZSk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgaXNOZXR3b3JrRXJyb3IgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/is-network-error/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/js-sha256/hash.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/js-sha256/hash.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sha256: () => (/* binding */ sha256)\n/* harmony export */ });\n\n\n//#region src/utils/js-sha256/hash.ts\nvar HEX_CHARS = \"0123456789abcdef\".split(\"\");\nvar EXTRA = [\n\t-2147483648,\n\t8388608,\n\t32768,\n\t128\n];\nvar SHIFT = [\n\t24,\n\t16,\n\t8,\n\t0\n];\nvar K = [\n\t1116352408,\n\t1899447441,\n\t3049323471,\n\t3921009573,\n\t961987163,\n\t1508970993,\n\t2453635748,\n\t2870763221,\n\t3624381080,\n\t310598401,\n\t607225278,\n\t1426881987,\n\t1925078388,\n\t2162078206,\n\t2614888103,\n\t3248222580,\n\t3835390401,\n\t4022224774,\n\t264347078,\n\t604807628,\n\t770255983,\n\t1249150122,\n\t1555081692,\n\t1996064986,\n\t2554220882,\n\t2821834349,\n\t2952996808,\n\t3210313671,\n\t3336571891,\n\t3584528711,\n\t113926993,\n\t338241895,\n\t666307205,\n\t773529912,\n\t1294757372,\n\t1396182291,\n\t1695183700,\n\t1986661051,\n\t2177026350,\n\t2456956037,\n\t2730485921,\n\t2820302411,\n\t3259730800,\n\t3345764771,\n\t3516065817,\n\t3600352804,\n\t4094571909,\n\t275423344,\n\t430227734,\n\t506948616,\n\t659060556,\n\t883997877,\n\t958139571,\n\t1322822218,\n\t1537002063,\n\t1747873779,\n\t1955562222,\n\t2024104815,\n\t2227730452,\n\t2361852424,\n\t2428436474,\n\t2756734187,\n\t3204031479,\n\t3329325298\n];\nvar blocks = [];\nfunction Sha256(is224, sharedMemory) {\n\tif (sharedMemory) {\n\t\tblocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] = blocks[4] = blocks[5] = blocks[6] = blocks[7] = blocks[8] = blocks[9] = blocks[10] = blocks[11] = blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n\t\tthis.blocks = blocks;\n\t} else this.blocks = [\n\t\t0,\n\t\t0,\n\t\t0,\n\t\t0,\n\t\t0,\n\t\t0,\n\t\t0,\n\t\t0,\n\t\t0,\n\t\t0,\n\t\t0,\n\t\t0,\n\t\t0,\n\t\t0,\n\t\t0,\n\t\t0,\n\t\t0\n\t];\n\tif (is224) {\n\t\tthis.h0 = 3238371032;\n\t\tthis.h1 = 914150663;\n\t\tthis.h2 = 812702999;\n\t\tthis.h3 = 4144912697;\n\t\tthis.h4 = 4290775857;\n\t\tthis.h5 = 1750603025;\n\t\tthis.h6 = 1694076839;\n\t\tthis.h7 = 3204075428;\n\t} else {\n\t\tthis.h0 = 1779033703;\n\t\tthis.h1 = 3144134277;\n\t\tthis.h2 = 1013904242;\n\t\tthis.h3 = 2773480762;\n\t\tthis.h4 = 1359893119;\n\t\tthis.h5 = 2600822924;\n\t\tthis.h6 = 528734635;\n\t\tthis.h7 = 1541459225;\n\t}\n\tthis.block = this.start = this.bytes = this.hBytes = 0;\n\tthis.finalized = this.hashed = false;\n\tthis.first = true;\n\tthis.is224 = is224;\n}\nSha256.prototype.update = function(message) {\n\tif (this.finalized) return;\n\tvar notString, type = typeof message;\n\tif (type !== \"string\") {\n\t\tif (type === \"object\") {\n\t\t\tif (message === null) throw new Error(ERROR);\n\t\t\telse if (ARRAY_BUFFER && message.constructor === ArrayBuffer) message = new Uint8Array(message);\n\t\t\telse if (!Array.isArray(message)) {\n\t\t\t\tif (!ARRAY_BUFFER || !ArrayBuffer.isView(message)) throw new Error(ERROR);\n\t\t\t}\n\t\t} else throw new Error(ERROR);\n\t\tnotString = true;\n\t}\n\tvar code, index = 0, i, length = message.length, blocks$1 = this.blocks;\n\twhile (index < length) {\n\t\tif (this.hashed) {\n\t\t\tthis.hashed = false;\n\t\t\tblocks$1[0] = this.block;\n\t\t\tthis.block = blocks$1[16] = blocks$1[1] = blocks$1[2] = blocks$1[3] = blocks$1[4] = blocks$1[5] = blocks$1[6] = blocks$1[7] = blocks$1[8] = blocks$1[9] = blocks$1[10] = blocks$1[11] = blocks$1[12] = blocks$1[13] = blocks$1[14] = blocks$1[15] = 0;\n\t\t}\n\t\tif (notString) for (i = this.start; index < length && i < 64; ++index) blocks$1[i >>> 2] |= message[index] << SHIFT[i++ & 3];\n\t\telse for (i = this.start; index < length && i < 64; ++index) {\n\t\t\tcode = message.charCodeAt(index);\n\t\t\tif (code < 128) blocks$1[i >>> 2] |= code << SHIFT[i++ & 3];\n\t\t\telse if (code < 2048) {\n\t\t\t\tblocks$1[i >>> 2] |= (192 | code >>> 6) << SHIFT[i++ & 3];\n\t\t\t\tblocks$1[i >>> 2] |= (128 | code & 63) << SHIFT[i++ & 3];\n\t\t\t} else if (code < 55296 || code >= 57344) {\n\t\t\t\tblocks$1[i >>> 2] |= (224 | code >>> 12) << SHIFT[i++ & 3];\n\t\t\t\tblocks$1[i >>> 2] |= (128 | code >>> 6 & 63) << SHIFT[i++ & 3];\n\t\t\t\tblocks$1[i >>> 2] |= (128 | code & 63) << SHIFT[i++ & 3];\n\t\t\t} else {\n\t\t\t\tcode = 65536 + ((code & 1023) << 10 | message.charCodeAt(++index) & 1023);\n\t\t\t\tblocks$1[i >>> 2] |= (240 | code >>> 18) << SHIFT[i++ & 3];\n\t\t\t\tblocks$1[i >>> 2] |= (128 | code >>> 12 & 63) << SHIFT[i++ & 3];\n\t\t\t\tblocks$1[i >>> 2] |= (128 | code >>> 6 & 63) << SHIFT[i++ & 3];\n\t\t\t\tblocks$1[i >>> 2] |= (128 | code & 63) << SHIFT[i++ & 3];\n\t\t\t}\n\t\t}\n\t\tthis.lastByteIndex = i;\n\t\tthis.bytes += i - this.start;\n\t\tif (i >= 64) {\n\t\t\tthis.block = blocks$1[16];\n\t\t\tthis.start = i - 64;\n\t\t\tthis.hash();\n\t\t\tthis.hashed = true;\n\t\t} else this.start = i;\n\t}\n\tif (this.bytes > 4294967295) {\n\t\tthis.hBytes += this.bytes / 4294967296 << 0;\n\t\tthis.bytes = this.bytes % 4294967296;\n\t}\n\treturn this;\n};\nSha256.prototype.finalize = function() {\n\tif (this.finalized) return;\n\tthis.finalized = true;\n\tvar blocks$1 = this.blocks, i = this.lastByteIndex;\n\tblocks$1[16] = this.block;\n\tblocks$1[i >>> 2] |= EXTRA[i & 3];\n\tthis.block = blocks$1[16];\n\tif (i >= 56) {\n\t\tif (!this.hashed) this.hash();\n\t\tblocks$1[0] = this.block;\n\t\tblocks$1[16] = blocks$1[1] = blocks$1[2] = blocks$1[3] = blocks$1[4] = blocks$1[5] = blocks$1[6] = blocks$1[7] = blocks$1[8] = blocks$1[9] = blocks$1[10] = blocks$1[11] = blocks$1[12] = blocks$1[13] = blocks$1[14] = blocks$1[15] = 0;\n\t}\n\tblocks$1[14] = this.hBytes << 3 | this.bytes >>> 29;\n\tblocks$1[15] = this.bytes << 3;\n\tthis.hash();\n};\nSha256.prototype.hash = function() {\n\tvar a = this.h0, b = this.h1, c = this.h2, d = this.h3, e = this.h4, f = this.h5, g = this.h6, h = this.h7, blocks$1 = this.blocks, j, s0, s1, maj, t1, t2, ch, ab, da, cd, bc;\n\tfor (j = 16; j < 64; ++j) {\n\t\tt1 = blocks$1[j - 15];\n\t\ts0 = (t1 >>> 7 | t1 << 25) ^ (t1 >>> 18 | t1 << 14) ^ t1 >>> 3;\n\t\tt1 = blocks$1[j - 2];\n\t\ts1 = (t1 >>> 17 | t1 << 15) ^ (t1 >>> 19 | t1 << 13) ^ t1 >>> 10;\n\t\tblocks$1[j] = blocks$1[j - 16] + s0 + blocks$1[j - 7] + s1 << 0;\n\t}\n\tbc = b & c;\n\tfor (j = 0; j < 64; j += 4) {\n\t\tif (this.first) {\n\t\t\tif (this.is224) {\n\t\t\t\tab = 300032;\n\t\t\t\tt1 = blocks$1[0] - 1413257819;\n\t\t\t\th = t1 - 150054599 << 0;\n\t\t\t\td = t1 + 24177077 << 0;\n\t\t\t} else {\n\t\t\t\tab = 704751109;\n\t\t\t\tt1 = blocks$1[0] - 210244248;\n\t\t\t\th = t1 - 1521486534 << 0;\n\t\t\t\td = t1 + 143694565 << 0;\n\t\t\t}\n\t\t\tthis.first = false;\n\t\t} else {\n\t\t\ts0 = (a >>> 2 | a << 30) ^ (a >>> 13 | a << 19) ^ (a >>> 22 | a << 10);\n\t\t\ts1 = (e >>> 6 | e << 26) ^ (e >>> 11 | e << 21) ^ (e >>> 25 | e << 7);\n\t\t\tab = a & b;\n\t\t\tmaj = ab ^ a & c ^ bc;\n\t\t\tch = e & f ^ ~e & g;\n\t\t\tt1 = h + s1 + ch + K[j] + blocks$1[j];\n\t\t\tt2 = s0 + maj;\n\t\t\th = d + t1 << 0;\n\t\t\td = t1 + t2 << 0;\n\t\t}\n\t\ts0 = (d >>> 2 | d << 30) ^ (d >>> 13 | d << 19) ^ (d >>> 22 | d << 10);\n\t\ts1 = (h >>> 6 | h << 26) ^ (h >>> 11 | h << 21) ^ (h >>> 25 | h << 7);\n\t\tda = d & a;\n\t\tmaj = da ^ d & b ^ ab;\n\t\tch = g & h ^ ~g & e;\n\t\tt1 = f + s1 + ch + K[j + 1] + blocks$1[j + 1];\n\t\tt2 = s0 + maj;\n\t\tg = c + t1 << 0;\n\t\tc = t1 + t2 << 0;\n\t\ts0 = (c >>> 2 | c << 30) ^ (c >>> 13 | c << 19) ^ (c >>> 22 | c << 10);\n\t\ts1 = (g >>> 6 | g << 26) ^ (g >>> 11 | g << 21) ^ (g >>> 25 | g << 7);\n\t\tcd = c & d;\n\t\tmaj = cd ^ c & a ^ da;\n\t\tch = f & g ^ ~f & h;\n\t\tt1 = e + s1 + ch + K[j + 2] + blocks$1[j + 2];\n\t\tt2 = s0 + maj;\n\t\tf = b + t1 << 0;\n\t\tb = t1 + t2 << 0;\n\t\ts0 = (b >>> 2 | b << 30) ^ (b >>> 13 | b << 19) ^ (b >>> 22 | b << 10);\n\t\ts1 = (f >>> 6 | f << 26) ^ (f >>> 11 | f << 21) ^ (f >>> 25 | f << 7);\n\t\tbc = b & c;\n\t\tmaj = bc ^ b & d ^ cd;\n\t\tch = f & g ^ ~f & h;\n\t\tt1 = e + s1 + ch + K[j + 3] + blocks$1[j + 3];\n\t\tt2 = s0 + maj;\n\t\te = a + t1 << 0;\n\t\ta = t1 + t2 << 0;\n\t\tthis.chromeBugWorkAround = true;\n\t}\n\tthis.h0 = this.h0 + a << 0;\n\tthis.h1 = this.h1 + b << 0;\n\tthis.h2 = this.h2 + c << 0;\n\tthis.h3 = this.h3 + d << 0;\n\tthis.h4 = this.h4 + e << 0;\n\tthis.h5 = this.h5 + f << 0;\n\tthis.h6 = this.h6 + g << 0;\n\tthis.h7 = this.h7 + h << 0;\n};\nSha256.prototype.hex = function() {\n\tthis.finalize();\n\tvar h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5, h6 = this.h6, h7 = this.h7;\n\tvar hex = HEX_CHARS[h0 >>> 28 & 15] + HEX_CHARS[h0 >>> 24 & 15] + HEX_CHARS[h0 >>> 20 & 15] + HEX_CHARS[h0 >>> 16 & 15] + HEX_CHARS[h0 >>> 12 & 15] + HEX_CHARS[h0 >>> 8 & 15] + HEX_CHARS[h0 >>> 4 & 15] + HEX_CHARS[h0 & 15] + HEX_CHARS[h1 >>> 28 & 15] + HEX_CHARS[h1 >>> 24 & 15] + HEX_CHARS[h1 >>> 20 & 15] + HEX_CHARS[h1 >>> 16 & 15] + HEX_CHARS[h1 >>> 12 & 15] + HEX_CHARS[h1 >>> 8 & 15] + HEX_CHARS[h1 >>> 4 & 15] + HEX_CHARS[h1 & 15] + HEX_CHARS[h2 >>> 28 & 15] + HEX_CHARS[h2 >>> 24 & 15] + HEX_CHARS[h2 >>> 20 & 15] + HEX_CHARS[h2 >>> 16 & 15] + HEX_CHARS[h2 >>> 12 & 15] + HEX_CHARS[h2 >>> 8 & 15] + HEX_CHARS[h2 >>> 4 & 15] + HEX_CHARS[h2 & 15] + HEX_CHARS[h3 >>> 28 & 15] + HEX_CHARS[h3 >>> 24 & 15] + HEX_CHARS[h3 >>> 20 & 15] + HEX_CHARS[h3 >>> 16 & 15] + HEX_CHARS[h3 >>> 12 & 15] + HEX_CHARS[h3 >>> 8 & 15] + HEX_CHARS[h3 >>> 4 & 15] + HEX_CHARS[h3 & 15] + HEX_CHARS[h4 >>> 28 & 15] + HEX_CHARS[h4 >>> 24 & 15] + HEX_CHARS[h4 >>> 20 & 15] + HEX_CHARS[h4 >>> 16 & 15] + HEX_CHARS[h4 >>> 12 & 15] + HEX_CHARS[h4 >>> 8 & 15] + HEX_CHARS[h4 >>> 4 & 15] + HEX_CHARS[h4 & 15] + HEX_CHARS[h5 >>> 28 & 15] + HEX_CHARS[h5 >>> 24 & 15] + HEX_CHARS[h5 >>> 20 & 15] + HEX_CHARS[h5 >>> 16 & 15] + HEX_CHARS[h5 >>> 12 & 15] + HEX_CHARS[h5 >>> 8 & 15] + HEX_CHARS[h5 >>> 4 & 15] + HEX_CHARS[h5 & 15] + HEX_CHARS[h6 >>> 28 & 15] + HEX_CHARS[h6 >>> 24 & 15] + HEX_CHARS[h6 >>> 20 & 15] + HEX_CHARS[h6 >>> 16 & 15] + HEX_CHARS[h6 >>> 12 & 15] + HEX_CHARS[h6 >>> 8 & 15] + HEX_CHARS[h6 >>> 4 & 15] + HEX_CHARS[h6 & 15];\n\tif (!this.is224) hex += HEX_CHARS[h7 >>> 28 & 15] + HEX_CHARS[h7 >>> 24 & 15] + HEX_CHARS[h7 >>> 20 & 15] + HEX_CHARS[h7 >>> 16 & 15] + HEX_CHARS[h7 >>> 12 & 15] + HEX_CHARS[h7 >>> 8 & 15] + HEX_CHARS[h7 >>> 4 & 15] + HEX_CHARS[h7 & 15];\n\treturn hex;\n};\nSha256.prototype.toString = Sha256.prototype.hex;\nSha256.prototype.digest = function() {\n\tthis.finalize();\n\tvar h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5, h6 = this.h6, h7 = this.h7;\n\tvar arr = [\n\t\th0 >>> 24 & 255,\n\t\th0 >>> 16 & 255,\n\t\th0 >>> 8 & 255,\n\t\th0 & 255,\n\t\th1 >>> 24 & 255,\n\t\th1 >>> 16 & 255,\n\t\th1 >>> 8 & 255,\n\t\th1 & 255,\n\t\th2 >>> 24 & 255,\n\t\th2 >>> 16 & 255,\n\t\th2 >>> 8 & 255,\n\t\th2 & 255,\n\t\th3 >>> 24 & 255,\n\t\th3 >>> 16 & 255,\n\t\th3 >>> 8 & 255,\n\t\th3 & 255,\n\t\th4 >>> 24 & 255,\n\t\th4 >>> 16 & 255,\n\t\th4 >>> 8 & 255,\n\t\th4 & 255,\n\t\th5 >>> 24 & 255,\n\t\th5 >>> 16 & 255,\n\t\th5 >>> 8 & 255,\n\t\th5 & 255,\n\t\th6 >>> 24 & 255,\n\t\th6 >>> 16 & 255,\n\t\th6 >>> 8 & 255,\n\t\th6 & 255\n\t];\n\tif (!this.is224) arr.push(h7 >>> 24 & 255, h7 >>> 16 & 255, h7 >>> 8 & 255, h7 & 255);\n\treturn arr;\n};\nSha256.prototype.array = Sha256.prototype.digest;\nSha256.prototype.arrayBuffer = function() {\n\tthis.finalize();\n\tvar buffer = /* @__PURE__ */ new ArrayBuffer(this.is224 ? 28 : 32);\n\tvar dataView = new DataView(buffer);\n\tdataView.setUint32(0, this.h0);\n\tdataView.setUint32(4, this.h1);\n\tdataView.setUint32(8, this.h2);\n\tdataView.setUint32(12, this.h3);\n\tdataView.setUint32(16, this.h4);\n\tdataView.setUint32(20, this.h5);\n\tdataView.setUint32(24, this.h6);\n\tif (!this.is224) dataView.setUint32(28, this.h7);\n\treturn buffer;\n};\nconst sha256 = (...strings) => {\n\treturn new Sha256(false, true).update(strings.join(\"\")).hex();\n};\n\n//#endregion\n\n//# sourceMappingURL=hash.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanMtc2hhMjU2L2hhc2guanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsMEJBQTBCO0FBQ2hFLDRCQUE0QiwwQkFBMEI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsUUFBUTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDa0I7QUFDbEIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9qcy1zaGEyNTYvaGFzaC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcblxuLy8jcmVnaW9uIHNyYy91dGlscy9qcy1zaGEyNTYvaGFzaC50c1xudmFyIEhFWF9DSEFSUyA9IFwiMDEyMzQ1Njc4OWFiY2RlZlwiLnNwbGl0KFwiXCIpO1xudmFyIEVYVFJBID0gW1xuXHQtMjE0NzQ4MzY0OCxcblx0ODM4ODYwOCxcblx0MzI3NjgsXG5cdDEyOFxuXTtcbnZhciBTSElGVCA9IFtcblx0MjQsXG5cdDE2LFxuXHQ4LFxuXHQwXG5dO1xudmFyIEsgPSBbXG5cdDExMTYzNTI0MDgsXG5cdDE4OTk0NDc0NDEsXG5cdDMwNDkzMjM0NzEsXG5cdDM5MjEwMDk1NzMsXG5cdDk2MTk4NzE2Myxcblx0MTUwODk3MDk5Myxcblx0MjQ1MzYzNTc0OCxcblx0Mjg3MDc2MzIyMSxcblx0MzYyNDM4MTA4MCxcblx0MzEwNTk4NDAxLFxuXHQ2MDcyMjUyNzgsXG5cdDE0MjY4ODE5ODcsXG5cdDE5MjUwNzgzODgsXG5cdDIxNjIwNzgyMDYsXG5cdDI2MTQ4ODgxMDMsXG5cdDMyNDgyMjI1ODAsXG5cdDM4MzUzOTA0MDEsXG5cdDQwMjIyMjQ3NzQsXG5cdDI2NDM0NzA3OCxcblx0NjA0ODA3NjI4LFxuXHQ3NzAyNTU5ODMsXG5cdDEyNDkxNTAxMjIsXG5cdDE1NTUwODE2OTIsXG5cdDE5OTYwNjQ5ODYsXG5cdDI1NTQyMjA4ODIsXG5cdDI4MjE4MzQzNDksXG5cdDI5NTI5OTY4MDgsXG5cdDMyMTAzMTM2NzEsXG5cdDMzMzY1NzE4OTEsXG5cdDM1ODQ1Mjg3MTEsXG5cdDExMzkyNjk5Myxcblx0MzM4MjQxODk1LFxuXHQ2NjYzMDcyMDUsXG5cdDc3MzUyOTkxMixcblx0MTI5NDc1NzM3Mixcblx0MTM5NjE4MjI5MSxcblx0MTY5NTE4MzcwMCxcblx0MTk4NjY2MTA1MSxcblx0MjE3NzAyNjM1MCxcblx0MjQ1Njk1NjAzNyxcblx0MjczMDQ4NTkyMSxcblx0MjgyMDMwMjQxMSxcblx0MzI1OTczMDgwMCxcblx0MzM0NTc2NDc3MSxcblx0MzUxNjA2NTgxNyxcblx0MzYwMDM1MjgwNCxcblx0NDA5NDU3MTkwOSxcblx0Mjc1NDIzMzQ0LFxuXHQ0MzAyMjc3MzQsXG5cdDUwNjk0ODYxNixcblx0NjU5MDYwNTU2LFxuXHQ4ODM5OTc4NzcsXG5cdDk1ODEzOTU3MSxcblx0MTMyMjgyMjIxOCxcblx0MTUzNzAwMjA2Myxcblx0MTc0Nzg3Mzc3OSxcblx0MTk1NTU2MjIyMixcblx0MjAyNDEwNDgxNSxcblx0MjIyNzczMDQ1Mixcblx0MjM2MTg1MjQyNCxcblx0MjQyODQzNjQ3NCxcblx0Mjc1NjczNDE4Nyxcblx0MzIwNDAzMTQ3OSxcblx0MzMyOTMyNTI5OFxuXTtcbnZhciBibG9ja3MgPSBbXTtcbmZ1bmN0aW9uIFNoYTI1NihpczIyNCwgc2hhcmVkTWVtb3J5KSB7XG5cdGlmIChzaGFyZWRNZW1vcnkpIHtcblx0XHRibG9ja3NbMF0gPSBibG9ja3NbMTZdID0gYmxvY2tzWzFdID0gYmxvY2tzWzJdID0gYmxvY2tzWzNdID0gYmxvY2tzWzRdID0gYmxvY2tzWzVdID0gYmxvY2tzWzZdID0gYmxvY2tzWzddID0gYmxvY2tzWzhdID0gYmxvY2tzWzldID0gYmxvY2tzWzEwXSA9IGJsb2Nrc1sxMV0gPSBibG9ja3NbMTJdID0gYmxvY2tzWzEzXSA9IGJsb2Nrc1sxNF0gPSBibG9ja3NbMTVdID0gMDtcblx0XHR0aGlzLmJsb2NrcyA9IGJsb2Nrcztcblx0fSBlbHNlIHRoaXMuYmxvY2tzID0gW1xuXHRcdDAsXG5cdFx0MCxcblx0XHQwLFxuXHRcdDAsXG5cdFx0MCxcblx0XHQwLFxuXHRcdDAsXG5cdFx0MCxcblx0XHQwLFxuXHRcdDAsXG5cdFx0MCxcblx0XHQwLFxuXHRcdDAsXG5cdFx0MCxcblx0XHQwLFxuXHRcdDAsXG5cdFx0MFxuXHRdO1xuXHRpZiAoaXMyMjQpIHtcblx0XHR0aGlzLmgwID0gMzIzODM3MTAzMjtcblx0XHR0aGlzLmgxID0gOTE0MTUwNjYzO1xuXHRcdHRoaXMuaDIgPSA4MTI3MDI5OTk7XG5cdFx0dGhpcy5oMyA9IDQxNDQ5MTI2OTc7XG5cdFx0dGhpcy5oNCA9IDQyOTA3NzU4NTc7XG5cdFx0dGhpcy5oNSA9IDE3NTA2MDMwMjU7XG5cdFx0dGhpcy5oNiA9IDE2OTQwNzY4Mzk7XG5cdFx0dGhpcy5oNyA9IDMyMDQwNzU0Mjg7XG5cdH0gZWxzZSB7XG5cdFx0dGhpcy5oMCA9IDE3NzkwMzM3MDM7XG5cdFx0dGhpcy5oMSA9IDMxNDQxMzQyNzc7XG5cdFx0dGhpcy5oMiA9IDEwMTM5MDQyNDI7XG5cdFx0dGhpcy5oMyA9IDI3NzM0ODA3NjI7XG5cdFx0dGhpcy5oNCA9IDEzNTk4OTMxMTk7XG5cdFx0dGhpcy5oNSA9IDI2MDA4MjI5MjQ7XG5cdFx0dGhpcy5oNiA9IDUyODczNDYzNTtcblx0XHR0aGlzLmg3ID0gMTU0MTQ1OTIyNTtcblx0fVxuXHR0aGlzLmJsb2NrID0gdGhpcy5zdGFydCA9IHRoaXMuYnl0ZXMgPSB0aGlzLmhCeXRlcyA9IDA7XG5cdHRoaXMuZmluYWxpemVkID0gdGhpcy5oYXNoZWQgPSBmYWxzZTtcblx0dGhpcy5maXJzdCA9IHRydWU7XG5cdHRoaXMuaXMyMjQgPSBpczIyNDtcbn1cblNoYTI1Ni5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24obWVzc2FnZSkge1xuXHRpZiAodGhpcy5maW5hbGl6ZWQpIHJldHVybjtcblx0dmFyIG5vdFN0cmluZywgdHlwZSA9IHR5cGVvZiBtZXNzYWdlO1xuXHRpZiAodHlwZSAhPT0gXCJzdHJpbmdcIikge1xuXHRcdGlmICh0eXBlID09PSBcIm9iamVjdFwiKSB7XG5cdFx0XHRpZiAobWVzc2FnZSA9PT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKEVSUk9SKTtcblx0XHRcdGVsc2UgaWYgKEFSUkFZX0JVRkZFUiAmJiBtZXNzYWdlLmNvbnN0cnVjdG9yID09PSBBcnJheUJ1ZmZlcikgbWVzc2FnZSA9IG5ldyBVaW50OEFycmF5KG1lc3NhZ2UpO1xuXHRcdFx0ZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkobWVzc2FnZSkpIHtcblx0XHRcdFx0aWYgKCFBUlJBWV9CVUZGRVIgfHwgIUFycmF5QnVmZmVyLmlzVmlldyhtZXNzYWdlKSkgdGhyb3cgbmV3IEVycm9yKEVSUk9SKTtcblx0XHRcdH1cblx0XHR9IGVsc2UgdGhyb3cgbmV3IEVycm9yKEVSUk9SKTtcblx0XHRub3RTdHJpbmcgPSB0cnVlO1xuXHR9XG5cdHZhciBjb2RlLCBpbmRleCA9IDAsIGksIGxlbmd0aCA9IG1lc3NhZ2UubGVuZ3RoLCBibG9ja3MkMSA9IHRoaXMuYmxvY2tzO1xuXHR3aGlsZSAoaW5kZXggPCBsZW5ndGgpIHtcblx0XHRpZiAodGhpcy5oYXNoZWQpIHtcblx0XHRcdHRoaXMuaGFzaGVkID0gZmFsc2U7XG5cdFx0XHRibG9ja3MkMVswXSA9IHRoaXMuYmxvY2s7XG5cdFx0XHR0aGlzLmJsb2NrID0gYmxvY2tzJDFbMTZdID0gYmxvY2tzJDFbMV0gPSBibG9ja3MkMVsyXSA9IGJsb2NrcyQxWzNdID0gYmxvY2tzJDFbNF0gPSBibG9ja3MkMVs1XSA9IGJsb2NrcyQxWzZdID0gYmxvY2tzJDFbN10gPSBibG9ja3MkMVs4XSA9IGJsb2NrcyQxWzldID0gYmxvY2tzJDFbMTBdID0gYmxvY2tzJDFbMTFdID0gYmxvY2tzJDFbMTJdID0gYmxvY2tzJDFbMTNdID0gYmxvY2tzJDFbMTRdID0gYmxvY2tzJDFbMTVdID0gMDtcblx0XHR9XG5cdFx0aWYgKG5vdFN0cmluZykgZm9yIChpID0gdGhpcy5zdGFydDsgaW5kZXggPCBsZW5ndGggJiYgaSA8IDY0OyArK2luZGV4KSBibG9ja3MkMVtpID4+PiAyXSB8PSBtZXNzYWdlW2luZGV4XSA8PCBTSElGVFtpKysgJiAzXTtcblx0XHRlbHNlIGZvciAoaSA9IHRoaXMuc3RhcnQ7IGluZGV4IDwgbGVuZ3RoICYmIGkgPCA2NDsgKytpbmRleCkge1xuXHRcdFx0Y29kZSA9IG1lc3NhZ2UuY2hhckNvZGVBdChpbmRleCk7XG5cdFx0XHRpZiAoY29kZSA8IDEyOCkgYmxvY2tzJDFbaSA+Pj4gMl0gfD0gY29kZSA8PCBTSElGVFtpKysgJiAzXTtcblx0XHRcdGVsc2UgaWYgKGNvZGUgPCAyMDQ4KSB7XG5cdFx0XHRcdGJsb2NrcyQxW2kgPj4+IDJdIHw9ICgxOTIgfCBjb2RlID4+PiA2KSA8PCBTSElGVFtpKysgJiAzXTtcblx0XHRcdFx0YmxvY2tzJDFbaSA+Pj4gMl0gfD0gKDEyOCB8IGNvZGUgJiA2MykgPDwgU0hJRlRbaSsrICYgM107XG5cdFx0XHR9IGVsc2UgaWYgKGNvZGUgPCA1NTI5NiB8fCBjb2RlID49IDU3MzQ0KSB7XG5cdFx0XHRcdGJsb2NrcyQxW2kgPj4+IDJdIHw9ICgyMjQgfCBjb2RlID4+PiAxMikgPDwgU0hJRlRbaSsrICYgM107XG5cdFx0XHRcdGJsb2NrcyQxW2kgPj4+IDJdIHw9ICgxMjggfCBjb2RlID4+PiA2ICYgNjMpIDw8IFNISUZUW2krKyAmIDNdO1xuXHRcdFx0XHRibG9ja3MkMVtpID4+PiAyXSB8PSAoMTI4IHwgY29kZSAmIDYzKSA8PCBTSElGVFtpKysgJiAzXTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvZGUgPSA2NTUzNiArICgoY29kZSAmIDEwMjMpIDw8IDEwIHwgbWVzc2FnZS5jaGFyQ29kZUF0KCsraW5kZXgpICYgMTAyMyk7XG5cdFx0XHRcdGJsb2NrcyQxW2kgPj4+IDJdIHw9ICgyNDAgfCBjb2RlID4+PiAxOCkgPDwgU0hJRlRbaSsrICYgM107XG5cdFx0XHRcdGJsb2NrcyQxW2kgPj4+IDJdIHw9ICgxMjggfCBjb2RlID4+PiAxMiAmIDYzKSA8PCBTSElGVFtpKysgJiAzXTtcblx0XHRcdFx0YmxvY2tzJDFbaSA+Pj4gMl0gfD0gKDEyOCB8IGNvZGUgPj4+IDYgJiA2MykgPDwgU0hJRlRbaSsrICYgM107XG5cdFx0XHRcdGJsb2NrcyQxW2kgPj4+IDJdIHw9ICgxMjggfCBjb2RlICYgNjMpIDw8IFNISUZUW2krKyAmIDNdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHR0aGlzLmxhc3RCeXRlSW5kZXggPSBpO1xuXHRcdHRoaXMuYnl0ZXMgKz0gaSAtIHRoaXMuc3RhcnQ7XG5cdFx0aWYgKGkgPj0gNjQpIHtcblx0XHRcdHRoaXMuYmxvY2sgPSBibG9ja3MkMVsxNl07XG5cdFx0XHR0aGlzLnN0YXJ0ID0gaSAtIDY0O1xuXHRcdFx0dGhpcy5oYXNoKCk7XG5cdFx0XHR0aGlzLmhhc2hlZCA9IHRydWU7XG5cdFx0fSBlbHNlIHRoaXMuc3RhcnQgPSBpO1xuXHR9XG5cdGlmICh0aGlzLmJ5dGVzID4gNDI5NDk2NzI5NSkge1xuXHRcdHRoaXMuaEJ5dGVzICs9IHRoaXMuYnl0ZXMgLyA0Mjk0OTY3Mjk2IDw8IDA7XG5cdFx0dGhpcy5ieXRlcyA9IHRoaXMuYnl0ZXMgJSA0Mjk0OTY3Mjk2O1xuXHR9XG5cdHJldHVybiB0aGlzO1xufTtcblNoYTI1Ni5wcm90b3R5cGUuZmluYWxpemUgPSBmdW5jdGlvbigpIHtcblx0aWYgKHRoaXMuZmluYWxpemVkKSByZXR1cm47XG5cdHRoaXMuZmluYWxpemVkID0gdHJ1ZTtcblx0dmFyIGJsb2NrcyQxID0gdGhpcy5ibG9ja3MsIGkgPSB0aGlzLmxhc3RCeXRlSW5kZXg7XG5cdGJsb2NrcyQxWzE2XSA9IHRoaXMuYmxvY2s7XG5cdGJsb2NrcyQxW2kgPj4+IDJdIHw9IEVYVFJBW2kgJiAzXTtcblx0dGhpcy5ibG9jayA9IGJsb2NrcyQxWzE2XTtcblx0aWYgKGkgPj0gNTYpIHtcblx0XHRpZiAoIXRoaXMuaGFzaGVkKSB0aGlzLmhhc2goKTtcblx0XHRibG9ja3MkMVswXSA9IHRoaXMuYmxvY2s7XG5cdFx0YmxvY2tzJDFbMTZdID0gYmxvY2tzJDFbMV0gPSBibG9ja3MkMVsyXSA9IGJsb2NrcyQxWzNdID0gYmxvY2tzJDFbNF0gPSBibG9ja3MkMVs1XSA9IGJsb2NrcyQxWzZdID0gYmxvY2tzJDFbN10gPSBibG9ja3MkMVs4XSA9IGJsb2NrcyQxWzldID0gYmxvY2tzJDFbMTBdID0gYmxvY2tzJDFbMTFdID0gYmxvY2tzJDFbMTJdID0gYmxvY2tzJDFbMTNdID0gYmxvY2tzJDFbMTRdID0gYmxvY2tzJDFbMTVdID0gMDtcblx0fVxuXHRibG9ja3MkMVsxNF0gPSB0aGlzLmhCeXRlcyA8PCAzIHwgdGhpcy5ieXRlcyA+Pj4gMjk7XG5cdGJsb2NrcyQxWzE1XSA9IHRoaXMuYnl0ZXMgPDwgMztcblx0dGhpcy5oYXNoKCk7XG59O1xuU2hhMjU2LnByb3RvdHlwZS5oYXNoID0gZnVuY3Rpb24oKSB7XG5cdHZhciBhID0gdGhpcy5oMCwgYiA9IHRoaXMuaDEsIGMgPSB0aGlzLmgyLCBkID0gdGhpcy5oMywgZSA9IHRoaXMuaDQsIGYgPSB0aGlzLmg1LCBnID0gdGhpcy5oNiwgaCA9IHRoaXMuaDcsIGJsb2NrcyQxID0gdGhpcy5ibG9ja3MsIGosIHMwLCBzMSwgbWFqLCB0MSwgdDIsIGNoLCBhYiwgZGEsIGNkLCBiYztcblx0Zm9yIChqID0gMTY7IGogPCA2NDsgKytqKSB7XG5cdFx0dDEgPSBibG9ja3MkMVtqIC0gMTVdO1xuXHRcdHMwID0gKHQxID4+PiA3IHwgdDEgPDwgMjUpIF4gKHQxID4+PiAxOCB8IHQxIDw8IDE0KSBeIHQxID4+PiAzO1xuXHRcdHQxID0gYmxvY2tzJDFbaiAtIDJdO1xuXHRcdHMxID0gKHQxID4+PiAxNyB8IHQxIDw8IDE1KSBeICh0MSA+Pj4gMTkgfCB0MSA8PCAxMykgXiB0MSA+Pj4gMTA7XG5cdFx0YmxvY2tzJDFbal0gPSBibG9ja3MkMVtqIC0gMTZdICsgczAgKyBibG9ja3MkMVtqIC0gN10gKyBzMSA8PCAwO1xuXHR9XG5cdGJjID0gYiAmIGM7XG5cdGZvciAoaiA9IDA7IGogPCA2NDsgaiArPSA0KSB7XG5cdFx0aWYgKHRoaXMuZmlyc3QpIHtcblx0XHRcdGlmICh0aGlzLmlzMjI0KSB7XG5cdFx0XHRcdGFiID0gMzAwMDMyO1xuXHRcdFx0XHR0MSA9IGJsb2NrcyQxWzBdIC0gMTQxMzI1NzgxOTtcblx0XHRcdFx0aCA9IHQxIC0gMTUwMDU0NTk5IDw8IDA7XG5cdFx0XHRcdGQgPSB0MSArIDI0MTc3MDc3IDw8IDA7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRhYiA9IDcwNDc1MTEwOTtcblx0XHRcdFx0dDEgPSBibG9ja3MkMVswXSAtIDIxMDI0NDI0ODtcblx0XHRcdFx0aCA9IHQxIC0gMTUyMTQ4NjUzNCA8PCAwO1xuXHRcdFx0XHRkID0gdDEgKyAxNDM2OTQ1NjUgPDwgMDtcblx0XHRcdH1cblx0XHRcdHRoaXMuZmlyc3QgPSBmYWxzZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0czAgPSAoYSA+Pj4gMiB8IGEgPDwgMzApIF4gKGEgPj4+IDEzIHwgYSA8PCAxOSkgXiAoYSA+Pj4gMjIgfCBhIDw8IDEwKTtcblx0XHRcdHMxID0gKGUgPj4+IDYgfCBlIDw8IDI2KSBeIChlID4+PiAxMSB8IGUgPDwgMjEpIF4gKGUgPj4+IDI1IHwgZSA8PCA3KTtcblx0XHRcdGFiID0gYSAmIGI7XG5cdFx0XHRtYWogPSBhYiBeIGEgJiBjIF4gYmM7XG5cdFx0XHRjaCA9IGUgJiBmIF4gfmUgJiBnO1xuXHRcdFx0dDEgPSBoICsgczEgKyBjaCArIEtbal0gKyBibG9ja3MkMVtqXTtcblx0XHRcdHQyID0gczAgKyBtYWo7XG5cdFx0XHRoID0gZCArIHQxIDw8IDA7XG5cdFx0XHRkID0gdDEgKyB0MiA8PCAwO1xuXHRcdH1cblx0XHRzMCA9IChkID4+PiAyIHwgZCA8PCAzMCkgXiAoZCA+Pj4gMTMgfCBkIDw8IDE5KSBeIChkID4+PiAyMiB8IGQgPDwgMTApO1xuXHRcdHMxID0gKGggPj4+IDYgfCBoIDw8IDI2KSBeIChoID4+PiAxMSB8IGggPDwgMjEpIF4gKGggPj4+IDI1IHwgaCA8PCA3KTtcblx0XHRkYSA9IGQgJiBhO1xuXHRcdG1haiA9IGRhIF4gZCAmIGIgXiBhYjtcblx0XHRjaCA9IGcgJiBoIF4gfmcgJiBlO1xuXHRcdHQxID0gZiArIHMxICsgY2ggKyBLW2ogKyAxXSArIGJsb2NrcyQxW2ogKyAxXTtcblx0XHR0MiA9IHMwICsgbWFqO1xuXHRcdGcgPSBjICsgdDEgPDwgMDtcblx0XHRjID0gdDEgKyB0MiA8PCAwO1xuXHRcdHMwID0gKGMgPj4+IDIgfCBjIDw8IDMwKSBeIChjID4+PiAxMyB8IGMgPDwgMTkpIF4gKGMgPj4+IDIyIHwgYyA8PCAxMCk7XG5cdFx0czEgPSAoZyA+Pj4gNiB8IGcgPDwgMjYpIF4gKGcgPj4+IDExIHwgZyA8PCAyMSkgXiAoZyA+Pj4gMjUgfCBnIDw8IDcpO1xuXHRcdGNkID0gYyAmIGQ7XG5cdFx0bWFqID0gY2QgXiBjICYgYSBeIGRhO1xuXHRcdGNoID0gZiAmIGcgXiB+ZiAmIGg7XG5cdFx0dDEgPSBlICsgczEgKyBjaCArIEtbaiArIDJdICsgYmxvY2tzJDFbaiArIDJdO1xuXHRcdHQyID0gczAgKyBtYWo7XG5cdFx0ZiA9IGIgKyB0MSA8PCAwO1xuXHRcdGIgPSB0MSArIHQyIDw8IDA7XG5cdFx0czAgPSAoYiA+Pj4gMiB8IGIgPDwgMzApIF4gKGIgPj4+IDEzIHwgYiA8PCAxOSkgXiAoYiA+Pj4gMjIgfCBiIDw8IDEwKTtcblx0XHRzMSA9IChmID4+PiA2IHwgZiA8PCAyNikgXiAoZiA+Pj4gMTEgfCBmIDw8IDIxKSBeIChmID4+PiAyNSB8IGYgPDwgNyk7XG5cdFx0YmMgPSBiICYgYztcblx0XHRtYWogPSBiYyBeIGIgJiBkIF4gY2Q7XG5cdFx0Y2ggPSBmICYgZyBeIH5mICYgaDtcblx0XHR0MSA9IGUgKyBzMSArIGNoICsgS1tqICsgM10gKyBibG9ja3MkMVtqICsgM107XG5cdFx0dDIgPSBzMCArIG1hajtcblx0XHRlID0gYSArIHQxIDw8IDA7XG5cdFx0YSA9IHQxICsgdDIgPDwgMDtcblx0XHR0aGlzLmNocm9tZUJ1Z1dvcmtBcm91bmQgPSB0cnVlO1xuXHR9XG5cdHRoaXMuaDAgPSB0aGlzLmgwICsgYSA8PCAwO1xuXHR0aGlzLmgxID0gdGhpcy5oMSArIGIgPDwgMDtcblx0dGhpcy5oMiA9IHRoaXMuaDIgKyBjIDw8IDA7XG5cdHRoaXMuaDMgPSB0aGlzLmgzICsgZCA8PCAwO1xuXHR0aGlzLmg0ID0gdGhpcy5oNCArIGUgPDwgMDtcblx0dGhpcy5oNSA9IHRoaXMuaDUgKyBmIDw8IDA7XG5cdHRoaXMuaDYgPSB0aGlzLmg2ICsgZyA8PCAwO1xuXHR0aGlzLmg3ID0gdGhpcy5oNyArIGggPDwgMDtcbn07XG5TaGEyNTYucHJvdG90eXBlLmhleCA9IGZ1bmN0aW9uKCkge1xuXHR0aGlzLmZpbmFsaXplKCk7XG5cdHZhciBoMCA9IHRoaXMuaDAsIGgxID0gdGhpcy5oMSwgaDIgPSB0aGlzLmgyLCBoMyA9IHRoaXMuaDMsIGg0ID0gdGhpcy5oNCwgaDUgPSB0aGlzLmg1LCBoNiA9IHRoaXMuaDYsIGg3ID0gdGhpcy5oNztcblx0dmFyIGhleCA9IEhFWF9DSEFSU1toMCA+Pj4gMjggJiAxNV0gKyBIRVhfQ0hBUlNbaDAgPj4+IDI0ICYgMTVdICsgSEVYX0NIQVJTW2gwID4+PiAyMCAmIDE1XSArIEhFWF9DSEFSU1toMCA+Pj4gMTYgJiAxNV0gKyBIRVhfQ0hBUlNbaDAgPj4+IDEyICYgMTVdICsgSEVYX0NIQVJTW2gwID4+PiA4ICYgMTVdICsgSEVYX0NIQVJTW2gwID4+PiA0ICYgMTVdICsgSEVYX0NIQVJTW2gwICYgMTVdICsgSEVYX0NIQVJTW2gxID4+PiAyOCAmIDE1XSArIEhFWF9DSEFSU1toMSA+Pj4gMjQgJiAxNV0gKyBIRVhfQ0hBUlNbaDEgPj4+IDIwICYgMTVdICsgSEVYX0NIQVJTW2gxID4+PiAxNiAmIDE1XSArIEhFWF9DSEFSU1toMSA+Pj4gMTIgJiAxNV0gKyBIRVhfQ0hBUlNbaDEgPj4+IDggJiAxNV0gKyBIRVhfQ0hBUlNbaDEgPj4+IDQgJiAxNV0gKyBIRVhfQ0hBUlNbaDEgJiAxNV0gKyBIRVhfQ0hBUlNbaDIgPj4+IDI4ICYgMTVdICsgSEVYX0NIQVJTW2gyID4+PiAyNCAmIDE1XSArIEhFWF9DSEFSU1toMiA+Pj4gMjAgJiAxNV0gKyBIRVhfQ0hBUlNbaDIgPj4+IDE2ICYgMTVdICsgSEVYX0NIQVJTW2gyID4+PiAxMiAmIDE1XSArIEhFWF9DSEFSU1toMiA+Pj4gOCAmIDE1XSArIEhFWF9DSEFSU1toMiA+Pj4gNCAmIDE1XSArIEhFWF9DSEFSU1toMiAmIDE1XSArIEhFWF9DSEFSU1toMyA+Pj4gMjggJiAxNV0gKyBIRVhfQ0hBUlNbaDMgPj4+IDI0ICYgMTVdICsgSEVYX0NIQVJTW2gzID4+PiAyMCAmIDE1XSArIEhFWF9DSEFSU1toMyA+Pj4gMTYgJiAxNV0gKyBIRVhfQ0hBUlNbaDMgPj4+IDEyICYgMTVdICsgSEVYX0NIQVJTW2gzID4+PiA4ICYgMTVdICsgSEVYX0NIQVJTW2gzID4+PiA0ICYgMTVdICsgSEVYX0NIQVJTW2gzICYgMTVdICsgSEVYX0NIQVJTW2g0ID4+PiAyOCAmIDE1XSArIEhFWF9DSEFSU1toNCA+Pj4gMjQgJiAxNV0gKyBIRVhfQ0hBUlNbaDQgPj4+IDIwICYgMTVdICsgSEVYX0NIQVJTW2g0ID4+PiAxNiAmIDE1XSArIEhFWF9DSEFSU1toNCA+Pj4gMTIgJiAxNV0gKyBIRVhfQ0hBUlNbaDQgPj4+IDggJiAxNV0gKyBIRVhfQ0hBUlNbaDQgPj4+IDQgJiAxNV0gKyBIRVhfQ0hBUlNbaDQgJiAxNV0gKyBIRVhfQ0hBUlNbaDUgPj4+IDI4ICYgMTVdICsgSEVYX0NIQVJTW2g1ID4+PiAyNCAmIDE1XSArIEhFWF9DSEFSU1toNSA+Pj4gMjAgJiAxNV0gKyBIRVhfQ0hBUlNbaDUgPj4+IDE2ICYgMTVdICsgSEVYX0NIQVJTW2g1ID4+PiAxMiAmIDE1XSArIEhFWF9DSEFSU1toNSA+Pj4gOCAmIDE1XSArIEhFWF9DSEFSU1toNSA+Pj4gNCAmIDE1XSArIEhFWF9DSEFSU1toNSAmIDE1XSArIEhFWF9DSEFSU1toNiA+Pj4gMjggJiAxNV0gKyBIRVhfQ0hBUlNbaDYgPj4+IDI0ICYgMTVdICsgSEVYX0NIQVJTW2g2ID4+PiAyMCAmIDE1XSArIEhFWF9DSEFSU1toNiA+Pj4gMTYgJiAxNV0gKyBIRVhfQ0hBUlNbaDYgPj4+IDEyICYgMTVdICsgSEVYX0NIQVJTW2g2ID4+PiA4ICYgMTVdICsgSEVYX0NIQVJTW2g2ID4+PiA0ICYgMTVdICsgSEVYX0NIQVJTW2g2ICYgMTVdO1xuXHRpZiAoIXRoaXMuaXMyMjQpIGhleCArPSBIRVhfQ0hBUlNbaDcgPj4+IDI4ICYgMTVdICsgSEVYX0NIQVJTW2g3ID4+PiAyNCAmIDE1XSArIEhFWF9DSEFSU1toNyA+Pj4gMjAgJiAxNV0gKyBIRVhfQ0hBUlNbaDcgPj4+IDE2ICYgMTVdICsgSEVYX0NIQVJTW2g3ID4+PiAxMiAmIDE1XSArIEhFWF9DSEFSU1toNyA+Pj4gOCAmIDE1XSArIEhFWF9DSEFSU1toNyA+Pj4gNCAmIDE1XSArIEhFWF9DSEFSU1toNyAmIDE1XTtcblx0cmV0dXJuIGhleDtcbn07XG5TaGEyNTYucHJvdG90eXBlLnRvU3RyaW5nID0gU2hhMjU2LnByb3RvdHlwZS5oZXg7XG5TaGEyNTYucHJvdG90eXBlLmRpZ2VzdCA9IGZ1bmN0aW9uKCkge1xuXHR0aGlzLmZpbmFsaXplKCk7XG5cdHZhciBoMCA9IHRoaXMuaDAsIGgxID0gdGhpcy5oMSwgaDIgPSB0aGlzLmgyLCBoMyA9IHRoaXMuaDMsIGg0ID0gdGhpcy5oNCwgaDUgPSB0aGlzLmg1LCBoNiA9IHRoaXMuaDYsIGg3ID0gdGhpcy5oNztcblx0dmFyIGFyciA9IFtcblx0XHRoMCA+Pj4gMjQgJiAyNTUsXG5cdFx0aDAgPj4+IDE2ICYgMjU1LFxuXHRcdGgwID4+PiA4ICYgMjU1LFxuXHRcdGgwICYgMjU1LFxuXHRcdGgxID4+PiAyNCAmIDI1NSxcblx0XHRoMSA+Pj4gMTYgJiAyNTUsXG5cdFx0aDEgPj4+IDggJiAyNTUsXG5cdFx0aDEgJiAyNTUsXG5cdFx0aDIgPj4+IDI0ICYgMjU1LFxuXHRcdGgyID4+PiAxNiAmIDI1NSxcblx0XHRoMiA+Pj4gOCAmIDI1NSxcblx0XHRoMiAmIDI1NSxcblx0XHRoMyA+Pj4gMjQgJiAyNTUsXG5cdFx0aDMgPj4+IDE2ICYgMjU1LFxuXHRcdGgzID4+PiA4ICYgMjU1LFxuXHRcdGgzICYgMjU1LFxuXHRcdGg0ID4+PiAyNCAmIDI1NSxcblx0XHRoNCA+Pj4gMTYgJiAyNTUsXG5cdFx0aDQgPj4+IDggJiAyNTUsXG5cdFx0aDQgJiAyNTUsXG5cdFx0aDUgPj4+IDI0ICYgMjU1LFxuXHRcdGg1ID4+PiAxNiAmIDI1NSxcblx0XHRoNSA+Pj4gOCAmIDI1NSxcblx0XHRoNSAmIDI1NSxcblx0XHRoNiA+Pj4gMjQgJiAyNTUsXG5cdFx0aDYgPj4+IDE2ICYgMjU1LFxuXHRcdGg2ID4+PiA4ICYgMjU1LFxuXHRcdGg2ICYgMjU1XG5cdF07XG5cdGlmICghdGhpcy5pczIyNCkgYXJyLnB1c2goaDcgPj4+IDI0ICYgMjU1LCBoNyA+Pj4gMTYgJiAyNTUsIGg3ID4+PiA4ICYgMjU1LCBoNyAmIDI1NSk7XG5cdHJldHVybiBhcnI7XG59O1xuU2hhMjU2LnByb3RvdHlwZS5hcnJheSA9IFNoYTI1Ni5wcm90b3R5cGUuZGlnZXN0O1xuU2hhMjU2LnByb3RvdHlwZS5hcnJheUJ1ZmZlciA9IGZ1bmN0aW9uKCkge1xuXHR0aGlzLmZpbmFsaXplKCk7XG5cdHZhciBidWZmZXIgPSAvKiBAX19QVVJFX18gKi8gbmV3IEFycmF5QnVmZmVyKHRoaXMuaXMyMjQgPyAyOCA6IDMyKTtcblx0dmFyIGRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7XG5cdGRhdGFWaWV3LnNldFVpbnQzMigwLCB0aGlzLmgwKTtcblx0ZGF0YVZpZXcuc2V0VWludDMyKDQsIHRoaXMuaDEpO1xuXHRkYXRhVmlldy5zZXRVaW50MzIoOCwgdGhpcy5oMik7XG5cdGRhdGFWaWV3LnNldFVpbnQzMigxMiwgdGhpcy5oMyk7XG5cdGRhdGFWaWV3LnNldFVpbnQzMigxNiwgdGhpcy5oNCk7XG5cdGRhdGFWaWV3LnNldFVpbnQzMigyMCwgdGhpcy5oNSk7XG5cdGRhdGFWaWV3LnNldFVpbnQzMigyNCwgdGhpcy5oNik7XG5cdGlmICghdGhpcy5pczIyNCkgZGF0YVZpZXcuc2V0VWludDMyKDI4LCB0aGlzLmg3KTtcblx0cmV0dXJuIGJ1ZmZlcjtcbn07XG5jb25zdCBzaGEyNTYgPSAoLi4uc3RyaW5ncykgPT4ge1xuXHRyZXR1cm4gbmV3IFNoYTI1NihmYWxzZSwgdHJ1ZSkudXBkYXRlKHN0cmluZ3Muam9pbihcIlwiKSkuaGV4KCk7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHNoYTI1NiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGFzaC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/js-sha256/hash.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/json.js":
/*!*********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/json.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseJsonMarkdown: () => (/* binding */ parseJsonMarkdown),\n/* harmony export */   parsePartialJson: () => (/* binding */ parsePartialJson)\n/* harmony export */ });\n//#region src/utils/json.ts\nfunction parseJsonMarkdown(s, parser = parsePartialJson) {\n\ts = s.trim();\n\tconst firstFenceIndex = s.indexOf(\"```\");\n\tif (firstFenceIndex === -1) return parser(s);\n\tlet contentAfterFence = s.substring(firstFenceIndex + 3);\n\tif (contentAfterFence.startsWith(\"json\\n\")) contentAfterFence = contentAfterFence.substring(5);\n\telse if (contentAfterFence.startsWith(\"json\")) contentAfterFence = contentAfterFence.substring(4);\n\telse if (contentAfterFence.startsWith(\"\\n\")) contentAfterFence = contentAfterFence.substring(1);\n\tconst closingFenceIndex = contentAfterFence.indexOf(\"```\");\n\tlet finalContent = contentAfterFence;\n\tif (closingFenceIndex !== -1) finalContent = contentAfterFence.substring(0, closingFenceIndex);\n\treturn parser(finalContent.trim());\n}\n/**\n* Recursive descent partial JSON parser.\n* @param s - The string to parse.\n* @returns The parsed value.\n* @throws Error if the input is a malformed JSON string.\n*/\nfunction strictParsePartialJson(s) {\n\ttry {\n\t\treturn JSON.parse(s);\n\t} catch {}\n\tconst buffer = s.trim();\n\tif (buffer.length === 0) throw new Error(\"Unexpected end of JSON input\");\n\tlet pos = 0;\n\tfunction skipWhitespace() {\n\t\twhile (pos < buffer.length && /\\s/.test(buffer[pos])) pos += 1;\n\t}\n\tfunction parseString() {\n\t\tif (buffer[pos] !== \"\\\"\") throw new Error(`Expected '\"' at position ${pos}, got '${buffer[pos]}'`);\n\t\tpos += 1;\n\t\tlet result = \"\";\n\t\tlet escaped = false;\n\t\twhile (pos < buffer.length) {\n\t\t\tconst char = buffer[pos];\n\t\t\tif (escaped) {\n\t\t\t\tif (char === \"n\") result += \"\\n\";\n\t\t\t\telse if (char === \"t\") result += \"\t\";\n\t\t\t\telse if (char === \"r\") result += \"\\r\";\n\t\t\t\telse if (char === \"\\\\\") result += \"\\\\\";\n\t\t\t\telse if (char === \"\\\"\") result += \"\\\"\";\n\t\t\t\telse if (char === \"b\") result += \"\\b\";\n\t\t\t\telse if (char === \"f\") result += \"\\f\";\n\t\t\t\telse if (char === \"/\") result += \"/\";\n\t\t\t\telse if (char === \"u\") {\n\t\t\t\t\tconst hex = buffer.substring(pos + 1, pos + 5);\n\t\t\t\t\tif (/^[0-9A-Fa-f]{0,4}$/.test(hex)) {\n\t\t\t\t\t\tif (hex.length === 4) result += String.fromCharCode(Number.parseInt(hex, 16));\n\t\t\t\t\t\telse result += `u${hex}`;\n\t\t\t\t\t\tpos += hex.length;\n\t\t\t\t\t} else throw new Error(`Invalid unicode escape sequence '\\\\u${hex}' at position ${pos}`);\n\t\t\t\t} else throw new Error(`Invalid escape sequence '\\\\${char}' at position ${pos}`);\n\t\t\t\tescaped = false;\n\t\t\t} else if (char === \"\\\\\") escaped = true;\n\t\t\telse if (char === \"\\\"\") {\n\t\t\t\tpos += 1;\n\t\t\t\treturn result;\n\t\t\t} else result += char;\n\t\t\tpos += 1;\n\t\t}\n\t\tif (escaped) result += \"\\\\\";\n\t\treturn result;\n\t}\n\tfunction parseNumber() {\n\t\tconst start = pos;\n\t\tlet numStr = \"\";\n\t\tif (buffer[pos] === \"-\") {\n\t\t\tnumStr += \"-\";\n\t\t\tpos += 1;\n\t\t}\n\t\tif (pos < buffer.length && buffer[pos] === \"0\") {\n\t\t\tnumStr += \"0\";\n\t\t\tpos += 1;\n\t\t\tif (buffer[pos] >= \"0\" && buffer[pos] <= \"9\") throw new Error(`Invalid number at position ${start}`);\n\t\t}\n\t\tif (pos < buffer.length && buffer[pos] >= \"1\" && buffer[pos] <= \"9\") while (pos < buffer.length && buffer[pos] >= \"0\" && buffer[pos] <= \"9\") {\n\t\t\tnumStr += buffer[pos];\n\t\t\tpos += 1;\n\t\t}\n\t\tif (pos < buffer.length && buffer[pos] === \".\") {\n\t\t\tnumStr += \".\";\n\t\t\tpos += 1;\n\t\t\twhile (pos < buffer.length && buffer[pos] >= \"0\" && buffer[pos] <= \"9\") {\n\t\t\t\tnumStr += buffer[pos];\n\t\t\t\tpos += 1;\n\t\t\t}\n\t\t}\n\t\tif (pos < buffer.length && (buffer[pos] === \"e\" || buffer[pos] === \"E\")) {\n\t\t\tnumStr += buffer[pos];\n\t\t\tpos += 1;\n\t\t\tif (pos < buffer.length && (buffer[pos] === \"+\" || buffer[pos] === \"-\")) {\n\t\t\t\tnumStr += buffer[pos];\n\t\t\t\tpos += 1;\n\t\t\t}\n\t\t\twhile (pos < buffer.length && buffer[pos] >= \"0\" && buffer[pos] <= \"9\") {\n\t\t\t\tnumStr += buffer[pos];\n\t\t\t\tpos += 1;\n\t\t\t}\n\t\t}\n\t\tif (numStr === \"-\") return -0;\n\t\tconst num = Number.parseFloat(numStr);\n\t\tif (Number.isNaN(num)) {\n\t\t\tpos = start;\n\t\t\tthrow new Error(`Invalid number '${numStr}' at position ${start}`);\n\t\t}\n\t\treturn num;\n\t}\n\tfunction parseValue() {\n\t\tskipWhitespace();\n\t\tif (pos >= buffer.length) throw new Error(`Unexpected end of input at position ${pos}`);\n\t\tconst char = buffer[pos];\n\t\tif (char === \"{\") return parseObject();\n\t\tif (char === \"[\") return parseArray();\n\t\tif (char === \"\\\"\") return parseString();\n\t\tif (\"null\".startsWith(buffer.substring(pos, pos + 4))) {\n\t\t\tpos += Math.min(4, buffer.length - pos);\n\t\t\treturn null;\n\t\t}\n\t\tif (\"true\".startsWith(buffer.substring(pos, pos + 4))) {\n\t\t\tpos += Math.min(4, buffer.length - pos);\n\t\t\treturn true;\n\t\t}\n\t\tif (\"false\".startsWith(buffer.substring(pos, pos + 5))) {\n\t\t\tpos += Math.min(5, buffer.length - pos);\n\t\t\treturn false;\n\t\t}\n\t\tif (char === \"-\" || char >= \"0\" && char <= \"9\") return parseNumber();\n\t\tthrow new Error(`Unexpected character '${char}' at position ${pos}`);\n\t}\n\tfunction parseArray() {\n\t\tif (buffer[pos] !== \"[\") throw new Error(`Expected '[' at position ${pos}, got '${buffer[pos]}'`);\n\t\tconst arr = [];\n\t\tpos += 1;\n\t\tskipWhitespace();\n\t\tif (pos >= buffer.length) return arr;\n\t\tif (buffer[pos] === \"]\") {\n\t\t\tpos += 1;\n\t\t\treturn arr;\n\t\t}\n\t\twhile (pos < buffer.length) {\n\t\t\tskipWhitespace();\n\t\t\tif (pos >= buffer.length) return arr;\n\t\t\tarr.push(parseValue());\n\t\t\tskipWhitespace();\n\t\t\tif (pos >= buffer.length) return arr;\n\t\t\tif (buffer[pos] === \"]\") {\n\t\t\t\tpos += 1;\n\t\t\t\treturn arr;\n\t\t\t} else if (buffer[pos] === \",\") {\n\t\t\t\tpos += 1;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tthrow new Error(`Expected ',' or ']' at position ${pos}, got '${buffer[pos]}'`);\n\t\t}\n\t\treturn arr;\n\t}\n\tfunction parseObject() {\n\t\tif (buffer[pos] !== \"{\") throw new Error(`Expected '{' at position ${pos}, got '${buffer[pos]}'`);\n\t\tconst obj = {};\n\t\tpos += 1;\n\t\tskipWhitespace();\n\t\tif (pos >= buffer.length) return obj;\n\t\tif (buffer[pos] === \"}\") {\n\t\t\tpos += 1;\n\t\t\treturn obj;\n\t\t}\n\t\twhile (pos < buffer.length) {\n\t\t\tskipWhitespace();\n\t\t\tif (pos >= buffer.length) return obj;\n\t\t\tconst key = parseString();\n\t\t\tskipWhitespace();\n\t\t\tif (pos >= buffer.length) return obj;\n\t\t\tif (buffer[pos] !== \":\") throw new Error(`Expected ':' at position ${pos}, got '${buffer[pos]}'`);\n\t\t\tpos += 1;\n\t\t\tskipWhitespace();\n\t\t\tif (pos >= buffer.length) return obj;\n\t\t\tobj[key] = parseValue();\n\t\t\tskipWhitespace();\n\t\t\tif (pos >= buffer.length) return obj;\n\t\t\tif (buffer[pos] === \"}\") {\n\t\t\t\tpos += 1;\n\t\t\t\treturn obj;\n\t\t\t} else if (buffer[pos] === \",\") {\n\t\t\t\tpos += 1;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tthrow new Error(`Expected ',' or '}' at position ${pos}, got '${buffer[pos]}'`);\n\t\t}\n\t\treturn obj;\n\t}\n\tconst value = parseValue();\n\tskipWhitespace();\n\tif (pos < buffer.length) throw new Error(`Unexpected character '${buffer[pos]}' at position ${pos}`);\n\treturn value;\n}\nfunction parsePartialJson(s) {\n\ttry {\n\t\tif (typeof s === \"undefined\") return null;\n\t\treturn strictParsePartialJson(s);\n\t} catch {\n\t\treturn null;\n\t}\n}\n\n//#endregion\n\n//# sourceMappingURL=json.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanNvbi5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3RUFBd0UsSUFBSSxTQUFTLFlBQVk7QUFDakc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsSUFBSTtBQUMzQjtBQUNBLHlCQUF5QixJQUFJO0FBQzdCO0FBQ0EsT0FBTyw0REFBNEQsSUFBSSxnQkFBZ0IsSUFBSTtBQUMzRixNQUFNLG1EQUFtRCxLQUFLLGdCQUFnQixJQUFJO0FBQ2xGO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRkFBK0YsTUFBTTtBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLE9BQU8sZ0JBQWdCLE1BQU07QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1GQUFtRixJQUFJO0FBQ3ZGO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxLQUFLLGdCQUFnQixJQUFJO0FBQ3BFO0FBQ0E7QUFDQSx1RUFBdUUsSUFBSSxTQUFTLFlBQVk7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsSUFBSSxTQUFTLFlBQVk7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsK0JBQStCLGdCQUFnQixJQUFJLFNBQVMsWUFBWTtBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3RUFBd0UsSUFBSSxTQUFTLFlBQVk7QUFDakc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLGdCQUFnQixJQUFJLFNBQVMsWUFBWTtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FLFlBQVksZ0JBQWdCLElBQUk7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUMrQztBQUMvQyIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2pzb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy9qc29uLnRzXG5mdW5jdGlvbiBwYXJzZUpzb25NYXJrZG93bihzLCBwYXJzZXIgPSBwYXJzZVBhcnRpYWxKc29uKSB7XG5cdHMgPSBzLnRyaW0oKTtcblx0Y29uc3QgZmlyc3RGZW5jZUluZGV4ID0gcy5pbmRleE9mKFwiYGBgXCIpO1xuXHRpZiAoZmlyc3RGZW5jZUluZGV4ID09PSAtMSkgcmV0dXJuIHBhcnNlcihzKTtcblx0bGV0IGNvbnRlbnRBZnRlckZlbmNlID0gcy5zdWJzdHJpbmcoZmlyc3RGZW5jZUluZGV4ICsgMyk7XG5cdGlmIChjb250ZW50QWZ0ZXJGZW5jZS5zdGFydHNXaXRoKFwianNvblxcblwiKSkgY29udGVudEFmdGVyRmVuY2UgPSBjb250ZW50QWZ0ZXJGZW5jZS5zdWJzdHJpbmcoNSk7XG5cdGVsc2UgaWYgKGNvbnRlbnRBZnRlckZlbmNlLnN0YXJ0c1dpdGgoXCJqc29uXCIpKSBjb250ZW50QWZ0ZXJGZW5jZSA9IGNvbnRlbnRBZnRlckZlbmNlLnN1YnN0cmluZyg0KTtcblx0ZWxzZSBpZiAoY29udGVudEFmdGVyRmVuY2Uuc3RhcnRzV2l0aChcIlxcblwiKSkgY29udGVudEFmdGVyRmVuY2UgPSBjb250ZW50QWZ0ZXJGZW5jZS5zdWJzdHJpbmcoMSk7XG5cdGNvbnN0IGNsb3NpbmdGZW5jZUluZGV4ID0gY29udGVudEFmdGVyRmVuY2UuaW5kZXhPZihcImBgYFwiKTtcblx0bGV0IGZpbmFsQ29udGVudCA9IGNvbnRlbnRBZnRlckZlbmNlO1xuXHRpZiAoY2xvc2luZ0ZlbmNlSW5kZXggIT09IC0xKSBmaW5hbENvbnRlbnQgPSBjb250ZW50QWZ0ZXJGZW5jZS5zdWJzdHJpbmcoMCwgY2xvc2luZ0ZlbmNlSW5kZXgpO1xuXHRyZXR1cm4gcGFyc2VyKGZpbmFsQ29udGVudC50cmltKCkpO1xufVxuLyoqXG4qIFJlY3Vyc2l2ZSBkZXNjZW50IHBhcnRpYWwgSlNPTiBwYXJzZXIuXG4qIEBwYXJhbSBzIC0gVGhlIHN0cmluZyB0byBwYXJzZS5cbiogQHJldHVybnMgVGhlIHBhcnNlZCB2YWx1ZS5cbiogQHRocm93cyBFcnJvciBpZiB0aGUgaW5wdXQgaXMgYSBtYWxmb3JtZWQgSlNPTiBzdHJpbmcuXG4qL1xuZnVuY3Rpb24gc3RyaWN0UGFyc2VQYXJ0aWFsSnNvbihzKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIEpTT04ucGFyc2Uocyk7XG5cdH0gY2F0Y2gge31cblx0Y29uc3QgYnVmZmVyID0gcy50cmltKCk7XG5cdGlmIChidWZmZXIubGVuZ3RoID09PSAwKSB0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIGVuZCBvZiBKU09OIGlucHV0XCIpO1xuXHRsZXQgcG9zID0gMDtcblx0ZnVuY3Rpb24gc2tpcFdoaXRlc3BhY2UoKSB7XG5cdFx0d2hpbGUgKHBvcyA8IGJ1ZmZlci5sZW5ndGggJiYgL1xccy8udGVzdChidWZmZXJbcG9zXSkpIHBvcyArPSAxO1xuXHR9XG5cdGZ1bmN0aW9uIHBhcnNlU3RyaW5nKCkge1xuXHRcdGlmIChidWZmZXJbcG9zXSAhPT0gXCJcXFwiXCIpIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgJ1wiJyBhdCBwb3NpdGlvbiAke3Bvc30sIGdvdCAnJHtidWZmZXJbcG9zXX0nYCk7XG5cdFx0cG9zICs9IDE7XG5cdFx0bGV0IHJlc3VsdCA9IFwiXCI7XG5cdFx0bGV0IGVzY2FwZWQgPSBmYWxzZTtcblx0XHR3aGlsZSAocG9zIDwgYnVmZmVyLmxlbmd0aCkge1xuXHRcdFx0Y29uc3QgY2hhciA9IGJ1ZmZlcltwb3NdO1xuXHRcdFx0aWYgKGVzY2FwZWQpIHtcblx0XHRcdFx0aWYgKGNoYXIgPT09IFwiblwiKSByZXN1bHQgKz0gXCJcXG5cIjtcblx0XHRcdFx0ZWxzZSBpZiAoY2hhciA9PT0gXCJ0XCIpIHJlc3VsdCArPSBcIlx0XCI7XG5cdFx0XHRcdGVsc2UgaWYgKGNoYXIgPT09IFwiclwiKSByZXN1bHQgKz0gXCJcXHJcIjtcblx0XHRcdFx0ZWxzZSBpZiAoY2hhciA9PT0gXCJcXFxcXCIpIHJlc3VsdCArPSBcIlxcXFxcIjtcblx0XHRcdFx0ZWxzZSBpZiAoY2hhciA9PT0gXCJcXFwiXCIpIHJlc3VsdCArPSBcIlxcXCJcIjtcblx0XHRcdFx0ZWxzZSBpZiAoY2hhciA9PT0gXCJiXCIpIHJlc3VsdCArPSBcIlxcYlwiO1xuXHRcdFx0XHRlbHNlIGlmIChjaGFyID09PSBcImZcIikgcmVzdWx0ICs9IFwiXFxmXCI7XG5cdFx0XHRcdGVsc2UgaWYgKGNoYXIgPT09IFwiL1wiKSByZXN1bHQgKz0gXCIvXCI7XG5cdFx0XHRcdGVsc2UgaWYgKGNoYXIgPT09IFwidVwiKSB7XG5cdFx0XHRcdFx0Y29uc3QgaGV4ID0gYnVmZmVyLnN1YnN0cmluZyhwb3MgKyAxLCBwb3MgKyA1KTtcblx0XHRcdFx0XHRpZiAoL15bMC05QS1GYS1mXXswLDR9JC8udGVzdChoZXgpKSB7XG5cdFx0XHRcdFx0XHRpZiAoaGV4Lmxlbmd0aCA9PT0gNCkgcmVzdWx0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoTnVtYmVyLnBhcnNlSW50KGhleCwgMTYpKTtcblx0XHRcdFx0XHRcdGVsc2UgcmVzdWx0ICs9IGB1JHtoZXh9YDtcblx0XHRcdFx0XHRcdHBvcyArPSBoZXgubGVuZ3RoO1xuXHRcdFx0XHRcdH0gZWxzZSB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdW5pY29kZSBlc2NhcGUgc2VxdWVuY2UgJ1xcXFx1JHtoZXh9JyBhdCBwb3NpdGlvbiAke3Bvc31gKTtcblx0XHRcdFx0fSBlbHNlIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBlc2NhcGUgc2VxdWVuY2UgJ1xcXFwke2NoYXJ9JyBhdCBwb3NpdGlvbiAke3Bvc31gKTtcblx0XHRcdFx0ZXNjYXBlZCA9IGZhbHNlO1xuXHRcdFx0fSBlbHNlIGlmIChjaGFyID09PSBcIlxcXFxcIikgZXNjYXBlZCA9IHRydWU7XG5cdFx0XHRlbHNlIGlmIChjaGFyID09PSBcIlxcXCJcIikge1xuXHRcdFx0XHRwb3MgKz0gMTtcblx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdH0gZWxzZSByZXN1bHQgKz0gY2hhcjtcblx0XHRcdHBvcyArPSAxO1xuXHRcdH1cblx0XHRpZiAoZXNjYXBlZCkgcmVzdWx0ICs9IFwiXFxcXFwiO1xuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblx0ZnVuY3Rpb24gcGFyc2VOdW1iZXIoKSB7XG5cdFx0Y29uc3Qgc3RhcnQgPSBwb3M7XG5cdFx0bGV0IG51bVN0ciA9IFwiXCI7XG5cdFx0aWYgKGJ1ZmZlcltwb3NdID09PSBcIi1cIikge1xuXHRcdFx0bnVtU3RyICs9IFwiLVwiO1xuXHRcdFx0cG9zICs9IDE7XG5cdFx0fVxuXHRcdGlmIChwb3MgPCBidWZmZXIubGVuZ3RoICYmIGJ1ZmZlcltwb3NdID09PSBcIjBcIikge1xuXHRcdFx0bnVtU3RyICs9IFwiMFwiO1xuXHRcdFx0cG9zICs9IDE7XG5cdFx0XHRpZiAoYnVmZmVyW3Bvc10gPj0gXCIwXCIgJiYgYnVmZmVyW3Bvc10gPD0gXCI5XCIpIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBudW1iZXIgYXQgcG9zaXRpb24gJHtzdGFydH1gKTtcblx0XHR9XG5cdFx0aWYgKHBvcyA8IGJ1ZmZlci5sZW5ndGggJiYgYnVmZmVyW3Bvc10gPj0gXCIxXCIgJiYgYnVmZmVyW3Bvc10gPD0gXCI5XCIpIHdoaWxlIChwb3MgPCBidWZmZXIubGVuZ3RoICYmIGJ1ZmZlcltwb3NdID49IFwiMFwiICYmIGJ1ZmZlcltwb3NdIDw9IFwiOVwiKSB7XG5cdFx0XHRudW1TdHIgKz0gYnVmZmVyW3Bvc107XG5cdFx0XHRwb3MgKz0gMTtcblx0XHR9XG5cdFx0aWYgKHBvcyA8IGJ1ZmZlci5sZW5ndGggJiYgYnVmZmVyW3Bvc10gPT09IFwiLlwiKSB7XG5cdFx0XHRudW1TdHIgKz0gXCIuXCI7XG5cdFx0XHRwb3MgKz0gMTtcblx0XHRcdHdoaWxlIChwb3MgPCBidWZmZXIubGVuZ3RoICYmIGJ1ZmZlcltwb3NdID49IFwiMFwiICYmIGJ1ZmZlcltwb3NdIDw9IFwiOVwiKSB7XG5cdFx0XHRcdG51bVN0ciArPSBidWZmZXJbcG9zXTtcblx0XHRcdFx0cG9zICs9IDE7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmIChwb3MgPCBidWZmZXIubGVuZ3RoICYmIChidWZmZXJbcG9zXSA9PT0gXCJlXCIgfHwgYnVmZmVyW3Bvc10gPT09IFwiRVwiKSkge1xuXHRcdFx0bnVtU3RyICs9IGJ1ZmZlcltwb3NdO1xuXHRcdFx0cG9zICs9IDE7XG5cdFx0XHRpZiAocG9zIDwgYnVmZmVyLmxlbmd0aCAmJiAoYnVmZmVyW3Bvc10gPT09IFwiK1wiIHx8IGJ1ZmZlcltwb3NdID09PSBcIi1cIikpIHtcblx0XHRcdFx0bnVtU3RyICs9IGJ1ZmZlcltwb3NdO1xuXHRcdFx0XHRwb3MgKz0gMTtcblx0XHRcdH1cblx0XHRcdHdoaWxlIChwb3MgPCBidWZmZXIubGVuZ3RoICYmIGJ1ZmZlcltwb3NdID49IFwiMFwiICYmIGJ1ZmZlcltwb3NdIDw9IFwiOVwiKSB7XG5cdFx0XHRcdG51bVN0ciArPSBidWZmZXJbcG9zXTtcblx0XHRcdFx0cG9zICs9IDE7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmIChudW1TdHIgPT09IFwiLVwiKSByZXR1cm4gLTA7XG5cdFx0Y29uc3QgbnVtID0gTnVtYmVyLnBhcnNlRmxvYXQobnVtU3RyKTtcblx0XHRpZiAoTnVtYmVyLmlzTmFOKG51bSkpIHtcblx0XHRcdHBvcyA9IHN0YXJ0O1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG51bWJlciAnJHtudW1TdHJ9JyBhdCBwb3NpdGlvbiAke3N0YXJ0fWApO1xuXHRcdH1cblx0XHRyZXR1cm4gbnVtO1xuXHR9XG5cdGZ1bmN0aW9uIHBhcnNlVmFsdWUoKSB7XG5cdFx0c2tpcFdoaXRlc3BhY2UoKTtcblx0XHRpZiAocG9zID49IGJ1ZmZlci5sZW5ndGgpIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCBlbmQgb2YgaW5wdXQgYXQgcG9zaXRpb24gJHtwb3N9YCk7XG5cdFx0Y29uc3QgY2hhciA9IGJ1ZmZlcltwb3NdO1xuXHRcdGlmIChjaGFyID09PSBcIntcIikgcmV0dXJuIHBhcnNlT2JqZWN0KCk7XG5cdFx0aWYgKGNoYXIgPT09IFwiW1wiKSByZXR1cm4gcGFyc2VBcnJheSgpO1xuXHRcdGlmIChjaGFyID09PSBcIlxcXCJcIikgcmV0dXJuIHBhcnNlU3RyaW5nKCk7XG5cdFx0aWYgKFwibnVsbFwiLnN0YXJ0c1dpdGgoYnVmZmVyLnN1YnN0cmluZyhwb3MsIHBvcyArIDQpKSkge1xuXHRcdFx0cG9zICs9IE1hdGgubWluKDQsIGJ1ZmZlci5sZW5ndGggLSBwb3MpO1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHRcdGlmIChcInRydWVcIi5zdGFydHNXaXRoKGJ1ZmZlci5zdWJzdHJpbmcocG9zLCBwb3MgKyA0KSkpIHtcblx0XHRcdHBvcyArPSBNYXRoLm1pbig0LCBidWZmZXIubGVuZ3RoIC0gcG9zKTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHRpZiAoXCJmYWxzZVwiLnN0YXJ0c1dpdGgoYnVmZmVyLnN1YnN0cmluZyhwb3MsIHBvcyArIDUpKSkge1xuXHRcdFx0cG9zICs9IE1hdGgubWluKDUsIGJ1ZmZlci5sZW5ndGggLSBwb3MpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRpZiAoY2hhciA9PT0gXCItXCIgfHwgY2hhciA+PSBcIjBcIiAmJiBjaGFyIDw9IFwiOVwiKSByZXR1cm4gcGFyc2VOdW1iZXIoKTtcblx0XHR0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgY2hhcmFjdGVyICcke2NoYXJ9JyBhdCBwb3NpdGlvbiAke3Bvc31gKTtcblx0fVxuXHRmdW5jdGlvbiBwYXJzZUFycmF5KCkge1xuXHRcdGlmIChidWZmZXJbcG9zXSAhPT0gXCJbXCIpIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgJ1snIGF0IHBvc2l0aW9uICR7cG9zfSwgZ290ICcke2J1ZmZlcltwb3NdfSdgKTtcblx0XHRjb25zdCBhcnIgPSBbXTtcblx0XHRwb3MgKz0gMTtcblx0XHRza2lwV2hpdGVzcGFjZSgpO1xuXHRcdGlmIChwb3MgPj0gYnVmZmVyLmxlbmd0aCkgcmV0dXJuIGFycjtcblx0XHRpZiAoYnVmZmVyW3Bvc10gPT09IFwiXVwiKSB7XG5cdFx0XHRwb3MgKz0gMTtcblx0XHRcdHJldHVybiBhcnI7XG5cdFx0fVxuXHRcdHdoaWxlIChwb3MgPCBidWZmZXIubGVuZ3RoKSB7XG5cdFx0XHRza2lwV2hpdGVzcGFjZSgpO1xuXHRcdFx0aWYgKHBvcyA+PSBidWZmZXIubGVuZ3RoKSByZXR1cm4gYXJyO1xuXHRcdFx0YXJyLnB1c2gocGFyc2VWYWx1ZSgpKTtcblx0XHRcdHNraXBXaGl0ZXNwYWNlKCk7XG5cdFx0XHRpZiAocG9zID49IGJ1ZmZlci5sZW5ndGgpIHJldHVybiBhcnI7XG5cdFx0XHRpZiAoYnVmZmVyW3Bvc10gPT09IFwiXVwiKSB7XG5cdFx0XHRcdHBvcyArPSAxO1xuXHRcdFx0XHRyZXR1cm4gYXJyO1xuXHRcdFx0fSBlbHNlIGlmIChidWZmZXJbcG9zXSA9PT0gXCIsXCIpIHtcblx0XHRcdFx0cG9zICs9IDE7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCAnLCcgb3IgJ10nIGF0IHBvc2l0aW9uICR7cG9zfSwgZ290ICcke2J1ZmZlcltwb3NdfSdgKTtcblx0XHR9XG5cdFx0cmV0dXJuIGFycjtcblx0fVxuXHRmdW5jdGlvbiBwYXJzZU9iamVjdCgpIHtcblx0XHRpZiAoYnVmZmVyW3Bvc10gIT09IFwie1wiKSB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkICd7JyBhdCBwb3NpdGlvbiAke3Bvc30sIGdvdCAnJHtidWZmZXJbcG9zXX0nYCk7XG5cdFx0Y29uc3Qgb2JqID0ge307XG5cdFx0cG9zICs9IDE7XG5cdFx0c2tpcFdoaXRlc3BhY2UoKTtcblx0XHRpZiAocG9zID49IGJ1ZmZlci5sZW5ndGgpIHJldHVybiBvYmo7XG5cdFx0aWYgKGJ1ZmZlcltwb3NdID09PSBcIn1cIikge1xuXHRcdFx0cG9zICs9IDE7XG5cdFx0XHRyZXR1cm4gb2JqO1xuXHRcdH1cblx0XHR3aGlsZSAocG9zIDwgYnVmZmVyLmxlbmd0aCkge1xuXHRcdFx0c2tpcFdoaXRlc3BhY2UoKTtcblx0XHRcdGlmIChwb3MgPj0gYnVmZmVyLmxlbmd0aCkgcmV0dXJuIG9iajtcblx0XHRcdGNvbnN0IGtleSA9IHBhcnNlU3RyaW5nKCk7XG5cdFx0XHRza2lwV2hpdGVzcGFjZSgpO1xuXHRcdFx0aWYgKHBvcyA+PSBidWZmZXIubGVuZ3RoKSByZXR1cm4gb2JqO1xuXHRcdFx0aWYgKGJ1ZmZlcltwb3NdICE9PSBcIjpcIikgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCAnOicgYXQgcG9zaXRpb24gJHtwb3N9LCBnb3QgJyR7YnVmZmVyW3Bvc119J2ApO1xuXHRcdFx0cG9zICs9IDE7XG5cdFx0XHRza2lwV2hpdGVzcGFjZSgpO1xuXHRcdFx0aWYgKHBvcyA+PSBidWZmZXIubGVuZ3RoKSByZXR1cm4gb2JqO1xuXHRcdFx0b2JqW2tleV0gPSBwYXJzZVZhbHVlKCk7XG5cdFx0XHRza2lwV2hpdGVzcGFjZSgpO1xuXHRcdFx0aWYgKHBvcyA+PSBidWZmZXIubGVuZ3RoKSByZXR1cm4gb2JqO1xuXHRcdFx0aWYgKGJ1ZmZlcltwb3NdID09PSBcIn1cIikge1xuXHRcdFx0XHRwb3MgKz0gMTtcblx0XHRcdFx0cmV0dXJuIG9iajtcblx0XHRcdH0gZWxzZSBpZiAoYnVmZmVyW3Bvc10gPT09IFwiLFwiKSB7XG5cdFx0XHRcdHBvcyArPSAxO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgJywnIG9yICd9JyBhdCBwb3NpdGlvbiAke3Bvc30sIGdvdCAnJHtidWZmZXJbcG9zXX0nYCk7XG5cdFx0fVxuXHRcdHJldHVybiBvYmo7XG5cdH1cblx0Y29uc3QgdmFsdWUgPSBwYXJzZVZhbHVlKCk7XG5cdHNraXBXaGl0ZXNwYWNlKCk7XG5cdGlmIChwb3MgPCBidWZmZXIubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgY2hhcmFjdGVyICcke2J1ZmZlcltwb3NdfScgYXQgcG9zaXRpb24gJHtwb3N9YCk7XG5cdHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHBhcnNlUGFydGlhbEpzb24ocykge1xuXHR0cnkge1xuXHRcdGlmICh0eXBlb2YgcyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIG51bGw7XG5cdFx0cmV0dXJuIHN0cmljdFBhcnNlUGFydGlhbEpzb24ocyk7XG5cdH0gY2F0Y2gge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgcGFyc2VKc29uTWFya2Rvd24sIHBhcnNlUGFydGlhbEpzb24gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWpzb24uanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/json.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/json_patch.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/json_patch.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   applyPatch: () => (/* reexport safe */ _fast_json_patch_src_core_js__WEBPACK_IMPORTED_MODULE_1__.applyPatch),\n/* harmony export */   compare: () => (/* reexport safe */ _fast_json_patch_src_duplex_js__WEBPACK_IMPORTED_MODULE_2__.compare),\n/* harmony export */   json_patch_exports: () => (/* binding */ json_patch_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _fast_json_patch_src_core_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./fast-json-patch/src/core.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\");\n/* harmony import */ var _fast_json_patch_src_duplex_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./fast-json-patch/src/duplex.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js\");\n/* harmony import */ var _fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./fast-json-patch/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js\");\n\n\n\n\n\n//#region src/utils/json_patch.ts\nvar json_patch_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(json_patch_exports, {\n\tapplyPatch: () => _fast_json_patch_src_core_js__WEBPACK_IMPORTED_MODULE_1__.applyPatch,\n\tcompare: () => _fast_json_patch_src_duplex_js__WEBPACK_IMPORTED_MODULE_2__.compare\n});\n\n//#endregion\n\n//# sourceMappingURL=json_patch.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanNvbl9wYXRjaC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTJEO0FBQ0E7QUFDRDtBQUN0Qjs7QUFFcEM7QUFDQTtBQUNBLHNFQUFRO0FBQ1IsbUJBQW1CLG9FQUFVO0FBQzdCLGdCQUFnQixtRUFBTztBQUN2QixDQUFDOztBQUVEO0FBQ21EO0FBQ25EIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanNvbl9wYXRjaC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4cG9ydCB9IGZyb20gXCIuLi9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyBhcHBseVBhdGNoIH0gZnJvbSBcIi4vZmFzdC1qc29uLXBhdGNoL3NyYy9jb3JlLmpzXCI7XG5pbXBvcnQgeyBjb21wYXJlIH0gZnJvbSBcIi4vZmFzdC1qc29uLXBhdGNoL3NyYy9kdXBsZXguanNcIjtcbmltcG9ydCBcIi4vZmFzdC1qc29uLXBhdGNoL2luZGV4LmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvanNvbl9wYXRjaC50c1xudmFyIGpzb25fcGF0Y2hfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQoanNvbl9wYXRjaF9leHBvcnRzLCB7XG5cdGFwcGx5UGF0Y2g6ICgpID0+IGFwcGx5UGF0Y2gsXG5cdGNvbXBhcmU6ICgpID0+IGNvbXBhcmVcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGFwcGx5UGF0Y2gsIGNvbXBhcmUsIGpzb25fcGF0Y2hfZXhwb3J0cyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9anNvbl9wYXRjaC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/json_patch.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/json_schema.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/json_schema.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Validator: () => (/* reexport safe */ _cfworker_json_schema__WEBPACK_IMPORTED_MODULE_5__.Validator),\n/* harmony export */   deepCompareStrict: () => (/* reexport safe */ _cfworker_json_schema__WEBPACK_IMPORTED_MODULE_5__.deepCompareStrict),\n/* harmony export */   json_schema_exports: () => (/* binding */ json_schema_exports),\n/* harmony export */   toJsonSchema: () => (/* binding */ toJsonSchema),\n/* harmony export */   validatesOnlyStrings: () => (/* binding */ validatesOnlyStrings)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _types_zod_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./types/zod.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/types/zod.js\");\n/* harmony import */ var _zod_to_json_schema_zodToJsonSchema_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./zod-to-json-schema/zodToJsonSchema.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/zodToJsonSchema.js\");\n/* harmony import */ var _zod_to_json_schema_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./zod-to-json-schema/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/index.js\");\n/* harmony import */ var zod_v4_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! zod/v4/core */ \"(ssr)/./node_modules/zod/v4/core/index.js\");\n/* harmony import */ var _cfworker_json_schema__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @cfworker/json-schema */ \"(ssr)/./node_modules/@cfworker/json-schema/dist/esm/index.js\");\n\n\n\n\n\n\n\n//#region src/utils/json_schema.ts\nvar json_schema_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(json_schema_exports, {\n\tValidator: () => _cfworker_json_schema__WEBPACK_IMPORTED_MODULE_5__.Validator,\n\tdeepCompareStrict: () => _cfworker_json_schema__WEBPACK_IMPORTED_MODULE_5__.deepCompareStrict,\n\ttoJsonSchema: () => toJsonSchema,\n\tvalidatesOnlyStrings: () => validatesOnlyStrings\n});\n/**\n* Converts a Zod schema or JSON schema to a JSON schema.\n* @param schema - The schema to convert.\n* @param params - The parameters to pass to the toJSONSchema function.\n* @returns The converted schema.\n*/\nfunction toJsonSchema(schema, params) {\n\tif ((0,_types_zod_js__WEBPACK_IMPORTED_MODULE_1__.isZodSchemaV4)(schema)) {\n\t\tconst inputSchema = (0,_types_zod_js__WEBPACK_IMPORTED_MODULE_1__.interopZodTransformInputSchema)(schema, true);\n\t\tif ((0,_types_zod_js__WEBPACK_IMPORTED_MODULE_1__.isZodObjectV4)(inputSchema)) {\n\t\t\tconst strictSchema = (0,_types_zod_js__WEBPACK_IMPORTED_MODULE_1__.interopZodObjectStrict)(inputSchema, true);\n\t\t\treturn (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_4__.toJSONSchema)(strictSchema, params);\n\t\t} else return (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_4__.toJSONSchema)(schema, params);\n\t}\n\tif ((0,_types_zod_js__WEBPACK_IMPORTED_MODULE_1__.isZodSchemaV3)(schema)) return (0,_zod_to_json_schema_zodToJsonSchema_js__WEBPACK_IMPORTED_MODULE_2__.zodToJsonSchema)(schema);\n\treturn schema;\n}\n/**\n* Validates if a JSON schema validates only strings. May return false negatives in some edge cases\n* (like recursive or unresolvable refs).\n*\n* @param schema - The schema to validate.\n* @returns `true` if the schema validates only strings, `false` otherwise.\n*/\nfunction validatesOnlyStrings(schema) {\n\tif (!schema || typeof schema !== \"object\" || Object.keys(schema).length === 0 || Array.isArray(schema)) return false;\n\tif (\"type\" in schema) {\n\t\tif (typeof schema.type === \"string\") return schema.type === \"string\";\n\t\tif (Array.isArray(schema.type)) return schema.type.every((t) => t === \"string\");\n\t\treturn false;\n\t}\n\tif (\"enum\" in schema) return Array.isArray(schema.enum) && schema.enum.length > 0 && schema.enum.every((val) => typeof val === \"string\");\n\tif (\"const\" in schema) return typeof schema.const === \"string\";\n\tif (\"allOf\" in schema && Array.isArray(schema.allOf)) return schema.allOf.some((subschema) => validatesOnlyStrings(subschema));\n\tif (\"anyOf\" in schema && Array.isArray(schema.anyOf) || \"oneOf\" in schema && Array.isArray(schema.oneOf)) {\n\t\tconst subschemas = \"anyOf\" in schema ? schema.anyOf : schema.oneOf;\n\t\treturn subschemas.length > 0 && subschemas.every((subschema) => validatesOnlyStrings(subschema));\n\t}\n\tif (\"not\" in schema) return false;\n\tif (\"$ref\" in schema && typeof schema.$ref === \"string\") {\n\t\tconst ref = schema.$ref;\n\t\tconst resolved = (0,_cfworker_json_schema__WEBPACK_IMPORTED_MODULE_5__.dereference)(schema);\n\t\tif (resolved[ref]) return validatesOnlyStrings(resolved[ref]);\n\t\treturn false;\n\t}\n\treturn false;\n}\n\n//#endregion\n\n//# sourceMappingURL=json_schema.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanNvbl9zY2hlbWEuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBMkQ7QUFDMEU7QUFDM0Q7QUFDbkM7QUFDSTtBQUN1Qzs7QUFFbEY7QUFDQTtBQUNBLHNFQUFRO0FBQ1Isa0JBQWtCLDREQUFTO0FBQzNCLDBCQUEwQixvRUFBaUI7QUFDM0M7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssNERBQWE7QUFDbEIsc0JBQXNCLDZFQUE4QjtBQUNwRCxNQUFNLDREQUFhO0FBQ25CLHdCQUF3QixxRUFBc0I7QUFDOUMsVUFBVSx5REFBWTtBQUN0QixJQUFJLFlBQVkseURBQVk7QUFDNUI7QUFDQSxLQUFLLDREQUFhLGlCQUFpQix1RkFBZTtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGtFQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDaUc7QUFDakciLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9qc29uX3NjaGVtYS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4cG9ydCB9IGZyb20gXCIuLi9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyBpbnRlcm9wWm9kT2JqZWN0U3RyaWN0LCBpbnRlcm9wWm9kVHJhbnNmb3JtSW5wdXRTY2hlbWEsIGlzWm9kT2JqZWN0VjQsIGlzWm9kU2NoZW1hVjMsIGlzWm9kU2NoZW1hVjQgfSBmcm9tIFwiLi90eXBlcy96b2QuanNcIjtcbmltcG9ydCB7IHpvZFRvSnNvblNjaGVtYSB9IGZyb20gXCIuL3pvZC10by1qc29uLXNjaGVtYS96b2RUb0pzb25TY2hlbWEuanNcIjtcbmltcG9ydCBcIi4vem9kLXRvLWpzb24tc2NoZW1hL2luZGV4LmpzXCI7XG5pbXBvcnQgeyB0b0pTT05TY2hlbWEgfSBmcm9tIFwiem9kL3Y0L2NvcmVcIjtcbmltcG9ydCB7IFZhbGlkYXRvciwgZGVlcENvbXBhcmVTdHJpY3QsIGRlcmVmZXJlbmNlIH0gZnJvbSBcIkBjZndvcmtlci9qc29uLXNjaGVtYVwiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL2pzb25fc2NoZW1hLnRzXG52YXIganNvbl9zY2hlbWFfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQoanNvbl9zY2hlbWFfZXhwb3J0cywge1xuXHRWYWxpZGF0b3I6ICgpID0+IFZhbGlkYXRvcixcblx0ZGVlcENvbXBhcmVTdHJpY3Q6ICgpID0+IGRlZXBDb21wYXJlU3RyaWN0LFxuXHR0b0pzb25TY2hlbWE6ICgpID0+IHRvSnNvblNjaGVtYSxcblx0dmFsaWRhdGVzT25seVN0cmluZ3M6ICgpID0+IHZhbGlkYXRlc09ubHlTdHJpbmdzXG59KTtcbi8qKlxuKiBDb252ZXJ0cyBhIFpvZCBzY2hlbWEgb3IgSlNPTiBzY2hlbWEgdG8gYSBKU09OIHNjaGVtYS5cbiogQHBhcmFtIHNjaGVtYSAtIFRoZSBzY2hlbWEgdG8gY29udmVydC5cbiogQHBhcmFtIHBhcmFtcyAtIFRoZSBwYXJhbWV0ZXJzIHRvIHBhc3MgdG8gdGhlIHRvSlNPTlNjaGVtYSBmdW5jdGlvbi5cbiogQHJldHVybnMgVGhlIGNvbnZlcnRlZCBzY2hlbWEuXG4qL1xuZnVuY3Rpb24gdG9Kc29uU2NoZW1hKHNjaGVtYSwgcGFyYW1zKSB7XG5cdGlmIChpc1pvZFNjaGVtYVY0KHNjaGVtYSkpIHtcblx0XHRjb25zdCBpbnB1dFNjaGVtYSA9IGludGVyb3Bab2RUcmFuc2Zvcm1JbnB1dFNjaGVtYShzY2hlbWEsIHRydWUpO1xuXHRcdGlmIChpc1pvZE9iamVjdFY0KGlucHV0U2NoZW1hKSkge1xuXHRcdFx0Y29uc3Qgc3RyaWN0U2NoZW1hID0gaW50ZXJvcFpvZE9iamVjdFN0cmljdChpbnB1dFNjaGVtYSwgdHJ1ZSk7XG5cdFx0XHRyZXR1cm4gdG9KU09OU2NoZW1hKHN0cmljdFNjaGVtYSwgcGFyYW1zKTtcblx0XHR9IGVsc2UgcmV0dXJuIHRvSlNPTlNjaGVtYShzY2hlbWEsIHBhcmFtcyk7XG5cdH1cblx0aWYgKGlzWm9kU2NoZW1hVjMoc2NoZW1hKSkgcmV0dXJuIHpvZFRvSnNvblNjaGVtYShzY2hlbWEpO1xuXHRyZXR1cm4gc2NoZW1hO1xufVxuLyoqXG4qIFZhbGlkYXRlcyBpZiBhIEpTT04gc2NoZW1hIHZhbGlkYXRlcyBvbmx5IHN0cmluZ3MuIE1heSByZXR1cm4gZmFsc2UgbmVnYXRpdmVzIGluIHNvbWUgZWRnZSBjYXNlc1xuKiAobGlrZSByZWN1cnNpdmUgb3IgdW5yZXNvbHZhYmxlIHJlZnMpLlxuKlxuKiBAcGFyYW0gc2NoZW1hIC0gVGhlIHNjaGVtYSB0byB2YWxpZGF0ZS5cbiogQHJldHVybnMgYHRydWVgIGlmIHRoZSBzY2hlbWEgdmFsaWRhdGVzIG9ubHkgc3RyaW5ncywgYGZhbHNlYCBvdGhlcndpc2UuXG4qL1xuZnVuY3Rpb24gdmFsaWRhdGVzT25seVN0cmluZ3Moc2NoZW1hKSB7XG5cdGlmICghc2NoZW1hIHx8IHR5cGVvZiBzY2hlbWEgIT09IFwib2JqZWN0XCIgfHwgT2JqZWN0LmtleXMoc2NoZW1hKS5sZW5ndGggPT09IDAgfHwgQXJyYXkuaXNBcnJheShzY2hlbWEpKSByZXR1cm4gZmFsc2U7XG5cdGlmIChcInR5cGVcIiBpbiBzY2hlbWEpIHtcblx0XHRpZiAodHlwZW9mIHNjaGVtYS50eXBlID09PSBcInN0cmluZ1wiKSByZXR1cm4gc2NoZW1hLnR5cGUgPT09IFwic3RyaW5nXCI7XG5cdFx0aWYgKEFycmF5LmlzQXJyYXkoc2NoZW1hLnR5cGUpKSByZXR1cm4gc2NoZW1hLnR5cGUuZXZlcnkoKHQpID0+IHQgPT09IFwic3RyaW5nXCIpO1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRpZiAoXCJlbnVtXCIgaW4gc2NoZW1hKSByZXR1cm4gQXJyYXkuaXNBcnJheShzY2hlbWEuZW51bSkgJiYgc2NoZW1hLmVudW0ubGVuZ3RoID4gMCAmJiBzY2hlbWEuZW51bS5ldmVyeSgodmFsKSA9PiB0eXBlb2YgdmFsID09PSBcInN0cmluZ1wiKTtcblx0aWYgKFwiY29uc3RcIiBpbiBzY2hlbWEpIHJldHVybiB0eXBlb2Ygc2NoZW1hLmNvbnN0ID09PSBcInN0cmluZ1wiO1xuXHRpZiAoXCJhbGxPZlwiIGluIHNjaGVtYSAmJiBBcnJheS5pc0FycmF5KHNjaGVtYS5hbGxPZikpIHJldHVybiBzY2hlbWEuYWxsT2Yuc29tZSgoc3Vic2NoZW1hKSA9PiB2YWxpZGF0ZXNPbmx5U3RyaW5ncyhzdWJzY2hlbWEpKTtcblx0aWYgKFwiYW55T2ZcIiBpbiBzY2hlbWEgJiYgQXJyYXkuaXNBcnJheShzY2hlbWEuYW55T2YpIHx8IFwib25lT2ZcIiBpbiBzY2hlbWEgJiYgQXJyYXkuaXNBcnJheShzY2hlbWEub25lT2YpKSB7XG5cdFx0Y29uc3Qgc3Vic2NoZW1hcyA9IFwiYW55T2ZcIiBpbiBzY2hlbWEgPyBzY2hlbWEuYW55T2YgOiBzY2hlbWEub25lT2Y7XG5cdFx0cmV0dXJuIHN1YnNjaGVtYXMubGVuZ3RoID4gMCAmJiBzdWJzY2hlbWFzLmV2ZXJ5KChzdWJzY2hlbWEpID0+IHZhbGlkYXRlc09ubHlTdHJpbmdzKHN1YnNjaGVtYSkpO1xuXHR9XG5cdGlmIChcIm5vdFwiIGluIHNjaGVtYSkgcmV0dXJuIGZhbHNlO1xuXHRpZiAoXCIkcmVmXCIgaW4gc2NoZW1hICYmIHR5cGVvZiBzY2hlbWEuJHJlZiA9PT0gXCJzdHJpbmdcIikge1xuXHRcdGNvbnN0IHJlZiA9IHNjaGVtYS4kcmVmO1xuXHRcdGNvbnN0IHJlc29sdmVkID0gZGVyZWZlcmVuY2Uoc2NoZW1hKTtcblx0XHRpZiAocmVzb2x2ZWRbcmVmXSkgcmV0dXJuIHZhbGlkYXRlc09ubHlTdHJpbmdzKHJlc29sdmVkW3JlZl0pO1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRyZXR1cm4gZmFsc2U7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgVmFsaWRhdG9yLCBkZWVwQ29tcGFyZVN0cmljdCwganNvbl9zY2hlbWFfZXhwb3J0cywgdG9Kc29uU2NoZW1hLCB2YWxpZGF0ZXNPbmx5U3RyaW5ncyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9anNvbl9zY2hlbWEuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/json_schema.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/math.js":
/*!*********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/math.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cosineSimilarity: () => (/* binding */ cosineSimilarity),\n/* harmony export */   euclideanDistance: () => (/* binding */ euclideanDistance),\n/* harmony export */   innerProduct: () => (/* binding */ innerProduct$1),\n/* harmony export */   math_exports: () => (/* binding */ math_exports),\n/* harmony export */   matrixFunc: () => (/* binding */ matrixFunc),\n/* harmony export */   maximalMarginalRelevance: () => (/* binding */ maximalMarginalRelevance),\n/* harmony export */   normalize: () => (/* binding */ normalize)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _ml_distance_similarities_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ml-distance/similarities.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/ml-distance/similarities.js\");\n/* harmony import */ var _ml_distance_distances_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ml-distance/distances.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/ml-distance/distances.js\");\n/* harmony import */ var _ml_distance_euclidean_euclidean_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ml-distance-euclidean/euclidean.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/ml-distance-euclidean/euclidean.js\");\n\n\n\n\n\n//#region src/utils/math.ts\nvar math_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(math_exports, {\n\tcosineSimilarity: () => cosineSimilarity,\n\teuclideanDistance: () => euclideanDistance,\n\tinnerProduct: () => innerProduct$1,\n\tmatrixFunc: () => matrixFunc,\n\tmaximalMarginalRelevance: () => maximalMarginalRelevance,\n\tnormalize: () => normalize\n});\n/**\n* Apply a row-wise function between two matrices with the same number of columns.\n*\n* @param {number[][]} X - The first matrix.\n* @param {number[][]} Y - The second matrix.\n* @param {VectorFunction} func - The function to apply.\n*\n* @throws {Error} If the number of columns in X and Y are not the same.\n*\n* @returns {number[][] | [[]]} A matrix where each row represents the result of applying the function between the corresponding rows of X and Y.\n*/\nfunction matrixFunc(X, Y, func) {\n\tif (X.length === 0 || X[0].length === 0 || Y.length === 0 || Y[0].length === 0) return [[]];\n\tif (X[0].length !== Y[0].length) throw new Error(`Number of columns in X and Y must be the same. X has shape ${[X.length, X[0].length]} and Y has shape ${[Y.length, Y[0].length]}.`);\n\treturn X.map((xVector) => Y.map((yVector) => func(xVector, yVector)).map((similarity) => Number.isNaN(similarity) ? 0 : similarity));\n}\nfunction normalize(M, similarity = false) {\n\tconst max = matrixMaxVal(M);\n\treturn M.map((row) => row.map((val) => similarity ? 1 - val / max : val / max));\n}\n/**\n* This function calculates the row-wise cosine similarity between two matrices with the same number of columns.\n*\n* @param {number[][]} X - The first matrix.\n* @param {number[][]} Y - The second matrix.\n*\n* @throws {Error} If the number of columns in X and Y are not the same.\n*\n* @returns {number[][] | [[]]} A matrix where each row represents the cosine similarity values between the corresponding rows of X and Y.\n*/\nfunction cosineSimilarity(X, Y) {\n\treturn matrixFunc(X, Y, _ml_distance_similarities_js__WEBPACK_IMPORTED_MODULE_1__.cosine);\n}\nfunction innerProduct$1(X, Y) {\n\treturn matrixFunc(X, Y, _ml_distance_distances_js__WEBPACK_IMPORTED_MODULE_2__.innerProduct);\n}\nfunction euclideanDistance(X, Y) {\n\treturn matrixFunc(X, Y, _ml_distance_euclidean_euclidean_js__WEBPACK_IMPORTED_MODULE_3__.euclidean);\n}\n/**\n* This function implements the Maximal Marginal Relevance algorithm\n* to select a set of embeddings that maximizes the diversity and relevance to a query embedding.\n*\n* @param {number[]|number[][]} queryEmbedding - The query embedding.\n* @param {number[][]} embeddingList - The list of embeddings to select from.\n* @param {number} [lambda=0.5] - The trade-off parameter between relevance and diversity.\n* @param {number} [k=4] - The maximum number of embeddings to select.\n*\n* @returns {number[]} The indexes of the selected embeddings in the embeddingList.\n*/\nfunction maximalMarginalRelevance(queryEmbedding, embeddingList, lambda = .5, k = 4) {\n\tif (Math.min(k, embeddingList.length) <= 0) return [];\n\tconst queryEmbeddingExpanded = Array.isArray(queryEmbedding[0]) ? queryEmbedding : [queryEmbedding];\n\tconst similarityToQuery = cosineSimilarity(queryEmbeddingExpanded, embeddingList)[0];\n\tconst mostSimilarEmbeddingIndex = argMax(similarityToQuery).maxIndex;\n\tconst selectedEmbeddings = [embeddingList[mostSimilarEmbeddingIndex]];\n\tconst selectedEmbeddingsIndexes = [mostSimilarEmbeddingIndex];\n\twhile (selectedEmbeddingsIndexes.length < Math.min(k, embeddingList.length)) {\n\t\tlet bestScore = -Infinity;\n\t\tlet bestIndex = -1;\n\t\tconst similarityToSelected = cosineSimilarity(embeddingList, selectedEmbeddings);\n\t\tsimilarityToQuery.forEach((queryScore, queryScoreIndex) => {\n\t\t\tif (selectedEmbeddingsIndexes.includes(queryScoreIndex)) return;\n\t\t\tconst maxSimilarityToSelected = Math.max(...similarityToSelected[queryScoreIndex]);\n\t\t\tconst score = lambda * queryScore - (1 - lambda) * maxSimilarityToSelected;\n\t\t\tif (score > bestScore) {\n\t\t\t\tbestScore = score;\n\t\t\t\tbestIndex = queryScoreIndex;\n\t\t\t}\n\t\t});\n\t\tselectedEmbeddings.push(embeddingList[bestIndex]);\n\t\tselectedEmbeddingsIndexes.push(bestIndex);\n\t}\n\treturn selectedEmbeddingsIndexes;\n}\n/**\n* Finds the index of the maximum value in the given array.\n* @param {number[]} array - The input array.\n*\n* @returns {number} The index of the maximum value in the array. If the array is empty, returns -1.\n*/\nfunction argMax(array) {\n\tif (array.length === 0) return {\n\t\tmaxIndex: -1,\n\t\tmaxValue: NaN\n\t};\n\tlet maxValue = array[0];\n\tlet maxIndex = 0;\n\tfor (let i = 1; i < array.length; i += 1) if (array[i] > maxValue) {\n\t\tmaxIndex = i;\n\t\tmaxValue = array[i];\n\t}\n\treturn {\n\t\tmaxIndex,\n\t\tmaxValue\n\t};\n}\nfunction matrixMaxVal(arrays) {\n\treturn arrays.reduce((acc, array) => Math.max(acc, argMax(array).maxValue), 0);\n}\n\n//#endregion\n\n//# sourceMappingURL=math.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvbWF0aC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUEyRDtBQUNKO0FBQ0c7QUFDTzs7QUFFakU7QUFDQTtBQUNBLHNFQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFVBQVUsWUFBWTtBQUN0QixVQUFVLFlBQVk7QUFDdEIsVUFBVSxnQkFBZ0I7QUFDMUI7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQSxZQUFZLG1CQUFtQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxnSEFBZ0gseUJBQXlCLGtCQUFrQix3QkFBd0I7QUFDbkw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxZQUFZO0FBQ3RCLFVBQVUsWUFBWTtBQUN0QjtBQUNBLFdBQVcsT0FBTztBQUNsQjtBQUNBLFlBQVksbUJBQW1CO0FBQy9CO0FBQ0E7QUFDQSx5QkFBeUIsZ0VBQU07QUFDL0I7QUFDQTtBQUNBLHlCQUF5QixtRUFBWTtBQUNyQztBQUNBO0FBQ0EseUJBQXlCLDBFQUFTO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHFCQUFxQjtBQUMvQixVQUFVLFlBQVk7QUFDdEIsVUFBVSxRQUFRO0FBQ2xCLFVBQVUsUUFBUTtBQUNsQjtBQUNBLFlBQVksVUFBVTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxVQUFVO0FBQ3BCO0FBQ0EsWUFBWSxRQUFRO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsa0JBQWtCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDOEk7QUFDOUkiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9tYXRoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IGNvc2luZSB9IGZyb20gXCIuL21sLWRpc3RhbmNlL3NpbWlsYXJpdGllcy5qc1wiO1xuaW1wb3J0IHsgaW5uZXJQcm9kdWN0IH0gZnJvbSBcIi4vbWwtZGlzdGFuY2UvZGlzdGFuY2VzLmpzXCI7XG5pbXBvcnQgeyBldWNsaWRlYW4gfSBmcm9tIFwiLi9tbC1kaXN0YW5jZS1ldWNsaWRlYW4vZXVjbGlkZWFuLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvbWF0aC50c1xudmFyIG1hdGhfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQobWF0aF9leHBvcnRzLCB7XG5cdGNvc2luZVNpbWlsYXJpdHk6ICgpID0+IGNvc2luZVNpbWlsYXJpdHksXG5cdGV1Y2xpZGVhbkRpc3RhbmNlOiAoKSA9PiBldWNsaWRlYW5EaXN0YW5jZSxcblx0aW5uZXJQcm9kdWN0OiAoKSA9PiBpbm5lclByb2R1Y3QkMSxcblx0bWF0cml4RnVuYzogKCkgPT4gbWF0cml4RnVuYyxcblx0bWF4aW1hbE1hcmdpbmFsUmVsZXZhbmNlOiAoKSA9PiBtYXhpbWFsTWFyZ2luYWxSZWxldmFuY2UsXG5cdG5vcm1hbGl6ZTogKCkgPT4gbm9ybWFsaXplXG59KTtcbi8qKlxuKiBBcHBseSBhIHJvdy13aXNlIGZ1bmN0aW9uIGJldHdlZW4gdHdvIG1hdHJpY2VzIHdpdGggdGhlIHNhbWUgbnVtYmVyIG9mIGNvbHVtbnMuXG4qXG4qIEBwYXJhbSB7bnVtYmVyW11bXX0gWCAtIFRoZSBmaXJzdCBtYXRyaXguXG4qIEBwYXJhbSB7bnVtYmVyW11bXX0gWSAtIFRoZSBzZWNvbmQgbWF0cml4LlxuKiBAcGFyYW0ge1ZlY3RvckZ1bmN0aW9ufSBmdW5jIC0gVGhlIGZ1bmN0aW9uIHRvIGFwcGx5LlxuKlxuKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIG51bWJlciBvZiBjb2x1bW5zIGluIFggYW5kIFkgYXJlIG5vdCB0aGUgc2FtZS5cbipcbiogQHJldHVybnMge251bWJlcltdW10gfCBbW11dfSBBIG1hdHJpeCB3aGVyZSBlYWNoIHJvdyByZXByZXNlbnRzIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlIGZ1bmN0aW9uIGJldHdlZW4gdGhlIGNvcnJlc3BvbmRpbmcgcm93cyBvZiBYIGFuZCBZLlxuKi9cbmZ1bmN0aW9uIG1hdHJpeEZ1bmMoWCwgWSwgZnVuYykge1xuXHRpZiAoWC5sZW5ndGggPT09IDAgfHwgWFswXS5sZW5ndGggPT09IDAgfHwgWS5sZW5ndGggPT09IDAgfHwgWVswXS5sZW5ndGggPT09IDApIHJldHVybiBbW11dO1xuXHRpZiAoWFswXS5sZW5ndGggIT09IFlbMF0ubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoYE51bWJlciBvZiBjb2x1bW5zIGluIFggYW5kIFkgbXVzdCBiZSB0aGUgc2FtZS4gWCBoYXMgc2hhcGUgJHtbWC5sZW5ndGgsIFhbMF0ubGVuZ3RoXX0gYW5kIFkgaGFzIHNoYXBlICR7W1kubGVuZ3RoLCBZWzBdLmxlbmd0aF19LmApO1xuXHRyZXR1cm4gWC5tYXAoKHhWZWN0b3IpID0+IFkubWFwKCh5VmVjdG9yKSA9PiBmdW5jKHhWZWN0b3IsIHlWZWN0b3IpKS5tYXAoKHNpbWlsYXJpdHkpID0+IE51bWJlci5pc05hTihzaW1pbGFyaXR5KSA/IDAgOiBzaW1pbGFyaXR5KSk7XG59XG5mdW5jdGlvbiBub3JtYWxpemUoTSwgc2ltaWxhcml0eSA9IGZhbHNlKSB7XG5cdGNvbnN0IG1heCA9IG1hdHJpeE1heFZhbChNKTtcblx0cmV0dXJuIE0ubWFwKChyb3cpID0+IHJvdy5tYXAoKHZhbCkgPT4gc2ltaWxhcml0eSA/IDEgLSB2YWwgLyBtYXggOiB2YWwgLyBtYXgpKTtcbn1cbi8qKlxuKiBUaGlzIGZ1bmN0aW9uIGNhbGN1bGF0ZXMgdGhlIHJvdy13aXNlIGNvc2luZSBzaW1pbGFyaXR5IGJldHdlZW4gdHdvIG1hdHJpY2VzIHdpdGggdGhlIHNhbWUgbnVtYmVyIG9mIGNvbHVtbnMuXG4qXG4qIEBwYXJhbSB7bnVtYmVyW11bXX0gWCAtIFRoZSBmaXJzdCBtYXRyaXguXG4qIEBwYXJhbSB7bnVtYmVyW11bXX0gWSAtIFRoZSBzZWNvbmQgbWF0cml4LlxuKlxuKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIG51bWJlciBvZiBjb2x1bW5zIGluIFggYW5kIFkgYXJlIG5vdCB0aGUgc2FtZS5cbipcbiogQHJldHVybnMge251bWJlcltdW10gfCBbW11dfSBBIG1hdHJpeCB3aGVyZSBlYWNoIHJvdyByZXByZXNlbnRzIHRoZSBjb3NpbmUgc2ltaWxhcml0eSB2YWx1ZXMgYmV0d2VlbiB0aGUgY29ycmVzcG9uZGluZyByb3dzIG9mIFggYW5kIFkuXG4qL1xuZnVuY3Rpb24gY29zaW5lU2ltaWxhcml0eShYLCBZKSB7XG5cdHJldHVybiBtYXRyaXhGdW5jKFgsIFksIGNvc2luZSk7XG59XG5mdW5jdGlvbiBpbm5lclByb2R1Y3QkMShYLCBZKSB7XG5cdHJldHVybiBtYXRyaXhGdW5jKFgsIFksIGlubmVyUHJvZHVjdCk7XG59XG5mdW5jdGlvbiBldWNsaWRlYW5EaXN0YW5jZShYLCBZKSB7XG5cdHJldHVybiBtYXRyaXhGdW5jKFgsIFksIGV1Y2xpZGVhbik7XG59XG4vKipcbiogVGhpcyBmdW5jdGlvbiBpbXBsZW1lbnRzIHRoZSBNYXhpbWFsIE1hcmdpbmFsIFJlbGV2YW5jZSBhbGdvcml0aG1cbiogdG8gc2VsZWN0IGEgc2V0IG9mIGVtYmVkZGluZ3MgdGhhdCBtYXhpbWl6ZXMgdGhlIGRpdmVyc2l0eSBhbmQgcmVsZXZhbmNlIHRvIGEgcXVlcnkgZW1iZWRkaW5nLlxuKlxuKiBAcGFyYW0ge251bWJlcltdfG51bWJlcltdW119IHF1ZXJ5RW1iZWRkaW5nIC0gVGhlIHF1ZXJ5IGVtYmVkZGluZy5cbiogQHBhcmFtIHtudW1iZXJbXVtdfSBlbWJlZGRpbmdMaXN0IC0gVGhlIGxpc3Qgb2YgZW1iZWRkaW5ncyB0byBzZWxlY3QgZnJvbS5cbiogQHBhcmFtIHtudW1iZXJ9IFtsYW1iZGE9MC41XSAtIFRoZSB0cmFkZS1vZmYgcGFyYW1ldGVyIGJldHdlZW4gcmVsZXZhbmNlIGFuZCBkaXZlcnNpdHkuXG4qIEBwYXJhbSB7bnVtYmVyfSBbaz00XSAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBlbWJlZGRpbmdzIHRvIHNlbGVjdC5cbipcbiogQHJldHVybnMge251bWJlcltdfSBUaGUgaW5kZXhlcyBvZiB0aGUgc2VsZWN0ZWQgZW1iZWRkaW5ncyBpbiB0aGUgZW1iZWRkaW5nTGlzdC5cbiovXG5mdW5jdGlvbiBtYXhpbWFsTWFyZ2luYWxSZWxldmFuY2UocXVlcnlFbWJlZGRpbmcsIGVtYmVkZGluZ0xpc3QsIGxhbWJkYSA9IC41LCBrID0gNCkge1xuXHRpZiAoTWF0aC5taW4oaywgZW1iZWRkaW5nTGlzdC5sZW5ndGgpIDw9IDApIHJldHVybiBbXTtcblx0Y29uc3QgcXVlcnlFbWJlZGRpbmdFeHBhbmRlZCA9IEFycmF5LmlzQXJyYXkocXVlcnlFbWJlZGRpbmdbMF0pID8gcXVlcnlFbWJlZGRpbmcgOiBbcXVlcnlFbWJlZGRpbmddO1xuXHRjb25zdCBzaW1pbGFyaXR5VG9RdWVyeSA9IGNvc2luZVNpbWlsYXJpdHkocXVlcnlFbWJlZGRpbmdFeHBhbmRlZCwgZW1iZWRkaW5nTGlzdClbMF07XG5cdGNvbnN0IG1vc3RTaW1pbGFyRW1iZWRkaW5nSW5kZXggPSBhcmdNYXgoc2ltaWxhcml0eVRvUXVlcnkpLm1heEluZGV4O1xuXHRjb25zdCBzZWxlY3RlZEVtYmVkZGluZ3MgPSBbZW1iZWRkaW5nTGlzdFttb3N0U2ltaWxhckVtYmVkZGluZ0luZGV4XV07XG5cdGNvbnN0IHNlbGVjdGVkRW1iZWRkaW5nc0luZGV4ZXMgPSBbbW9zdFNpbWlsYXJFbWJlZGRpbmdJbmRleF07XG5cdHdoaWxlIChzZWxlY3RlZEVtYmVkZGluZ3NJbmRleGVzLmxlbmd0aCA8IE1hdGgubWluKGssIGVtYmVkZGluZ0xpc3QubGVuZ3RoKSkge1xuXHRcdGxldCBiZXN0U2NvcmUgPSAtSW5maW5pdHk7XG5cdFx0bGV0IGJlc3RJbmRleCA9IC0xO1xuXHRcdGNvbnN0IHNpbWlsYXJpdHlUb1NlbGVjdGVkID0gY29zaW5lU2ltaWxhcml0eShlbWJlZGRpbmdMaXN0LCBzZWxlY3RlZEVtYmVkZGluZ3MpO1xuXHRcdHNpbWlsYXJpdHlUb1F1ZXJ5LmZvckVhY2goKHF1ZXJ5U2NvcmUsIHF1ZXJ5U2NvcmVJbmRleCkgPT4ge1xuXHRcdFx0aWYgKHNlbGVjdGVkRW1iZWRkaW5nc0luZGV4ZXMuaW5jbHVkZXMocXVlcnlTY29yZUluZGV4KSkgcmV0dXJuO1xuXHRcdFx0Y29uc3QgbWF4U2ltaWxhcml0eVRvU2VsZWN0ZWQgPSBNYXRoLm1heCguLi5zaW1pbGFyaXR5VG9TZWxlY3RlZFtxdWVyeVNjb3JlSW5kZXhdKTtcblx0XHRcdGNvbnN0IHNjb3JlID0gbGFtYmRhICogcXVlcnlTY29yZSAtICgxIC0gbGFtYmRhKSAqIG1heFNpbWlsYXJpdHlUb1NlbGVjdGVkO1xuXHRcdFx0aWYgKHNjb3JlID4gYmVzdFNjb3JlKSB7XG5cdFx0XHRcdGJlc3RTY29yZSA9IHNjb3JlO1xuXHRcdFx0XHRiZXN0SW5kZXggPSBxdWVyeVNjb3JlSW5kZXg7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0c2VsZWN0ZWRFbWJlZGRpbmdzLnB1c2goZW1iZWRkaW5nTGlzdFtiZXN0SW5kZXhdKTtcblx0XHRzZWxlY3RlZEVtYmVkZGluZ3NJbmRleGVzLnB1c2goYmVzdEluZGV4KTtcblx0fVxuXHRyZXR1cm4gc2VsZWN0ZWRFbWJlZGRpbmdzSW5kZXhlcztcbn1cbi8qKlxuKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIG1heGltdW0gdmFsdWUgaW4gdGhlIGdpdmVuIGFycmF5LlxuKiBAcGFyYW0ge251bWJlcltdfSBhcnJheSAtIFRoZSBpbnB1dCBhcnJheS5cbipcbiogQHJldHVybnMge251bWJlcn0gVGhlIGluZGV4IG9mIHRoZSBtYXhpbXVtIHZhbHVlIGluIHRoZSBhcnJheS4gSWYgdGhlIGFycmF5IGlzIGVtcHR5LCByZXR1cm5zIC0xLlxuKi9cbmZ1bmN0aW9uIGFyZ01heChhcnJheSkge1xuXHRpZiAoYXJyYXkubGVuZ3RoID09PSAwKSByZXR1cm4ge1xuXHRcdG1heEluZGV4OiAtMSxcblx0XHRtYXhWYWx1ZTogTmFOXG5cdH07XG5cdGxldCBtYXhWYWx1ZSA9IGFycmF5WzBdO1xuXHRsZXQgbWF4SW5kZXggPSAwO1xuXHRmb3IgKGxldCBpID0gMTsgaSA8IGFycmF5Lmxlbmd0aDsgaSArPSAxKSBpZiAoYXJyYXlbaV0gPiBtYXhWYWx1ZSkge1xuXHRcdG1heEluZGV4ID0gaTtcblx0XHRtYXhWYWx1ZSA9IGFycmF5W2ldO1xuXHR9XG5cdHJldHVybiB7XG5cdFx0bWF4SW5kZXgsXG5cdFx0bWF4VmFsdWVcblx0fTtcbn1cbmZ1bmN0aW9uIG1hdHJpeE1heFZhbChhcnJheXMpIHtcblx0cmV0dXJuIGFycmF5cy5yZWR1Y2UoKGFjYywgYXJyYXkpID0+IE1hdGgubWF4KGFjYywgYXJnTWF4KGFycmF5KS5tYXhWYWx1ZSksIDApO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNvc2luZVNpbWlsYXJpdHksIGV1Y2xpZGVhbkRpc3RhbmNlLCBpbm5lclByb2R1Y3QkMSBhcyBpbm5lclByb2R1Y3QsIG1hdGhfZXhwb3J0cywgbWF0cml4RnVuYywgbWF4aW1hbE1hcmdpbmFsUmVsZXZhbmNlLCBub3JtYWxpemUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hdGguanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/math.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/ml-distance-euclidean/euclidean.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/ml-distance-euclidean/euclidean.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   euclidean: () => (/* binding */ euclidean)\n/* harmony export */ });\n//#region src/utils/ml-distance-euclidean/euclidean.ts\nfunction squaredEuclidean(p, q) {\n\tlet d = 0;\n\tfor (let i = 0; i < p.length; i++) d += (p[i] - q[i]) * (p[i] - q[i]);\n\treturn d;\n}\nfunction euclidean(p, q) {\n\treturn Math.sqrt(squaredEuclidean(p, q));\n}\n\n//#endregion\n\n//# sourceMappingURL=euclidean.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvbWwtZGlzdGFuY2UtZXVjbGlkZWFuL2V1Y2xpZGVhbi5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGNBQWM7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNxQjtBQUNyQiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL21sLWRpc3RhbmNlLWV1Y2xpZGVhbi9ldWNsaWRlYW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy9tbC1kaXN0YW5jZS1ldWNsaWRlYW4vZXVjbGlkZWFuLnRzXG5mdW5jdGlvbiBzcXVhcmVkRXVjbGlkZWFuKHAsIHEpIHtcblx0bGV0IGQgPSAwO1xuXHRmb3IgKGxldCBpID0gMDsgaSA8IHAubGVuZ3RoOyBpKyspIGQgKz0gKHBbaV0gLSBxW2ldKSAqIChwW2ldIC0gcVtpXSk7XG5cdHJldHVybiBkO1xufVxuZnVuY3Rpb24gZXVjbGlkZWFuKHAsIHEpIHtcblx0cmV0dXJuIE1hdGguc3FydChzcXVhcmVkRXVjbGlkZWFuKHAsIHEpKTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBldWNsaWRlYW4gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV1Y2xpZGVhbi5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/ml-distance-euclidean/euclidean.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/ml-distance/distances.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/ml-distance/distances.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   innerProduct: () => (/* binding */ innerProduct)\n/* harmony export */ });\n//#region src/utils/ml-distance/distances.ts\n/**\n*Returns the Inner Product similarity between vectors a and b\n* @link [Inner Product Similarity algorithm](https://www.naun.org/main/NAUN/ijmmas/mmmas-49.pdf)\n* @param a - first vector\n* @param b - second vector\n*\n*/\nfunction innerProduct(a, b) {\n\tlet ans = 0;\n\tfor (let i = 0; i < a.length; i++) ans += a[i] * b[i];\n\treturn ans;\n}\n\n//#endregion\n\n//# sourceMappingURL=distances.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvbWwtZGlzdGFuY2UvZGlzdGFuY2VzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixjQUFjO0FBQy9CO0FBQ0E7O0FBRUE7QUFDd0I7QUFDeEIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9tbC1kaXN0YW5jZS9kaXN0YW5jZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy9tbC1kaXN0YW5jZS9kaXN0YW5jZXMudHNcbi8qKlxuKlJldHVybnMgdGhlIElubmVyIFByb2R1Y3Qgc2ltaWxhcml0eSBiZXR3ZWVuIHZlY3RvcnMgYSBhbmQgYlxuKiBAbGluayBbSW5uZXIgUHJvZHVjdCBTaW1pbGFyaXR5IGFsZ29yaXRobV0oaHR0cHM6Ly93d3cubmF1bi5vcmcvbWFpbi9OQVVOL2lqbW1hcy9tbW1hcy00OS5wZGYpXG4qIEBwYXJhbSBhIC0gZmlyc3QgdmVjdG9yXG4qIEBwYXJhbSBiIC0gc2Vjb25kIHZlY3RvclxuKlxuKi9cbmZ1bmN0aW9uIGlubmVyUHJvZHVjdChhLCBiKSB7XG5cdGxldCBhbnMgPSAwO1xuXHRmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIGFucyArPSBhW2ldICogYltpXTtcblx0cmV0dXJuIGFucztcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBpbm5lclByb2R1Y3QgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpc3RhbmNlcy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/ml-distance/distances.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/ml-distance/similarities.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/ml-distance/similarities.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cosine: () => (/* binding */ cosine)\n/* harmony export */ });\n//#region src/utils/ml-distance/similarities.ts\n/**\n* Returns the average of cosine distances between vectors a and b\n* @param a - first vector\n* @param b - second vector\n*\n*/\nfunction cosine(a, b) {\n\tlet p = 0;\n\tlet p2 = 0;\n\tlet q2 = 0;\n\tfor (let i = 0; i < a.length; i++) {\n\t\tp += a[i] * b[i];\n\t\tp2 += a[i] * a[i];\n\t\tq2 += b[i] * b[i];\n\t}\n\treturn p / (Math.sqrt(p2) * Math.sqrt(q2));\n}\n\n//#endregion\n\n//# sourceMappingURL=similarities.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvbWwtZGlzdGFuY2Uvc2ltaWxhcml0aWVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGNBQWM7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ2tCO0FBQ2xCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvbWwtZGlzdGFuY2Uvc2ltaWxhcml0aWVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvdXRpbHMvbWwtZGlzdGFuY2Uvc2ltaWxhcml0aWVzLnRzXG4vKipcbiogUmV0dXJucyB0aGUgYXZlcmFnZSBvZiBjb3NpbmUgZGlzdGFuY2VzIGJldHdlZW4gdmVjdG9ycyBhIGFuZCBiXG4qIEBwYXJhbSBhIC0gZmlyc3QgdmVjdG9yXG4qIEBwYXJhbSBiIC0gc2Vjb25kIHZlY3RvclxuKlxuKi9cbmZ1bmN0aW9uIGNvc2luZShhLCBiKSB7XG5cdGxldCBwID0gMDtcblx0bGV0IHAyID0gMDtcblx0bGV0IHEyID0gMDtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG5cdFx0cCArPSBhW2ldICogYltpXTtcblx0XHRwMiArPSBhW2ldICogYVtpXTtcblx0XHRxMiArPSBiW2ldICogYltpXTtcblx0fVxuXHRyZXR1cm4gcCAvIChNYXRoLnNxcnQocDIpICogTWF0aC5zcXJ0KHEyKSk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY29zaW5lIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaW1pbGFyaXRpZXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/ml-distance/similarities.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/p-retry/index.js":
/*!******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/p-retry/index.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pRetry: () => (/* binding */ pRetry)\n/* harmony export */ });\n/* harmony import */ var _is_network_error_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../is-network-error/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/is-network-error/index.js\");\n\n\n//#region src/utils/p-retry/index.js\nfunction validateRetries(retries) {\n\tif (typeof retries === \"number\") {\n\t\tif (retries < 0) throw new TypeError(\"Expected `retries` to be a non-negative number.\");\n\t\tif (Number.isNaN(retries)) throw new TypeError(\"Expected `retries` to be a valid number or Infinity, got NaN.\");\n\t} else if (retries !== void 0) throw new TypeError(\"Expected `retries` to be a number or Infinity.\");\n}\nfunction validateNumberOption(name, value, { min = 0, allowInfinity = false } = {}) {\n\tif (value === void 0) return;\n\tif (typeof value !== \"number\" || Number.isNaN(value)) throw new TypeError(`Expected \\`${name}\\` to be a number${allowInfinity ? \" or Infinity\" : \"\"}.`);\n\tif (!allowInfinity && !Number.isFinite(value)) throw new TypeError(`Expected \\`${name}\\` to be a finite number.`);\n\tif (value < min) throw new TypeError(`Expected \\`${name}\\` to be \\u2265 ${min}.`);\n}\nvar AbortError = class extends Error {\n\tconstructor(message) {\n\t\tsuper();\n\t\tif (message instanceof Error) {\n\t\t\tthis.originalError = message;\n\t\t\t({message} = message);\n\t\t} else {\n\t\t\tthis.originalError = new Error(message);\n\t\t\tthis.originalError.stack = this.stack;\n\t\t}\n\t\tthis.name = \"AbortError\";\n\t\tthis.message = message;\n\t}\n};\nfunction calculateDelay(retriesConsumed, options) {\n\tconst attempt = Math.max(1, retriesConsumed + 1);\n\tconst random = options.randomize ? Math.random() + 1 : 1;\n\tlet timeout = Math.round(random * options.minTimeout * options.factor ** (attempt - 1));\n\ttimeout = Math.min(timeout, options.maxTimeout);\n\treturn timeout;\n}\nfunction calculateRemainingTime(start, max) {\n\tif (!Number.isFinite(max)) return max;\n\treturn max - (performance.now() - start);\n}\nasync function onAttemptFailure({ error, attemptNumber, retriesConsumed, startTime, options }) {\n\tconst normalizedError = error instanceof Error ? error : /* @__PURE__ */ new TypeError(`Non-error was thrown: \"${error}\". You should only throw errors.`);\n\tif (normalizedError instanceof AbortError) throw normalizedError.originalError;\n\tconst retriesLeft = Number.isFinite(options.retries) ? Math.max(0, options.retries - retriesConsumed) : options.retries;\n\tconst maxRetryTime = options.maxRetryTime ?? Number.POSITIVE_INFINITY;\n\tconst context = Object.freeze({\n\t\terror: normalizedError,\n\t\tattemptNumber,\n\t\tretriesLeft,\n\t\tretriesConsumed\n\t});\n\tawait options.onFailedAttempt(context);\n\tif (calculateRemainingTime(startTime, maxRetryTime) <= 0) throw normalizedError;\n\tconst consumeRetry = await options.shouldConsumeRetry(context);\n\tconst remainingTime = calculateRemainingTime(startTime, maxRetryTime);\n\tif (remainingTime <= 0 || retriesLeft <= 0) throw normalizedError;\n\tif (normalizedError instanceof TypeError && !(0,_is_network_error_index_js__WEBPACK_IMPORTED_MODULE_0__.isNetworkError)(normalizedError)) {\n\t\tif (consumeRetry) throw normalizedError;\n\t\toptions.signal?.throwIfAborted();\n\t\treturn false;\n\t}\n\tif (!await options.shouldRetry(context)) throw normalizedError;\n\tif (!consumeRetry) {\n\t\toptions.signal?.throwIfAborted();\n\t\treturn false;\n\t}\n\tconst delayTime = calculateDelay(retriesConsumed, options);\n\tconst finalDelay = Math.min(delayTime, remainingTime);\n\tif (finalDelay > 0) await new Promise((resolve, reject) => {\n\t\tconst onAbort = () => {\n\t\t\tclearTimeout(timeoutToken);\n\t\t\toptions.signal?.removeEventListener(\"abort\", onAbort);\n\t\t\treject(options.signal.reason);\n\t\t};\n\t\tconst timeoutToken = setTimeout(() => {\n\t\t\toptions.signal?.removeEventListener(\"abort\", onAbort);\n\t\t\tresolve();\n\t\t}, finalDelay);\n\t\tif (options.unref) timeoutToken.unref?.();\n\t\toptions.signal?.addEventListener(\"abort\", onAbort, { once: true });\n\t});\n\toptions.signal?.throwIfAborted();\n\treturn true;\n}\nasync function pRetry(input, options = {}) {\n\toptions = { ...options };\n\tvalidateRetries(options.retries);\n\tif (Object.hasOwn(options, \"forever\")) throw new Error(\"The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.\");\n\toptions.retries ??= 10;\n\toptions.factor ??= 2;\n\toptions.minTimeout ??= 1e3;\n\toptions.maxTimeout ??= Number.POSITIVE_INFINITY;\n\toptions.maxRetryTime ??= Number.POSITIVE_INFINITY;\n\toptions.randomize ??= false;\n\toptions.onFailedAttempt ??= () => {};\n\toptions.shouldRetry ??= () => true;\n\toptions.shouldConsumeRetry ??= () => true;\n\tvalidateNumberOption(\"factor\", options.factor, {\n\t\tmin: 0,\n\t\tallowInfinity: false\n\t});\n\tvalidateNumberOption(\"minTimeout\", options.minTimeout, {\n\t\tmin: 0,\n\t\tallowInfinity: false\n\t});\n\tvalidateNumberOption(\"maxTimeout\", options.maxTimeout, {\n\t\tmin: 0,\n\t\tallowInfinity: true\n\t});\n\tvalidateNumberOption(\"maxRetryTime\", options.maxRetryTime, {\n\t\tmin: 0,\n\t\tallowInfinity: true\n\t});\n\tif (!(options.factor > 0)) options.factor = 1;\n\toptions.signal?.throwIfAborted();\n\tlet attemptNumber = 0;\n\tlet retriesConsumed = 0;\n\tconst startTime = performance.now();\n\twhile (Number.isFinite(options.retries) ? retriesConsumed <= options.retries : true) {\n\t\tattemptNumber++;\n\t\ttry {\n\t\t\toptions.signal?.throwIfAborted();\n\t\t\tconst result = await input(attemptNumber);\n\t\t\toptions.signal?.throwIfAborted();\n\t\t\treturn result;\n\t\t} catch (error) {\n\t\t\tif (await onAttemptFailure({\n\t\t\t\terror,\n\t\t\t\tattemptNumber,\n\t\t\t\tretriesConsumed,\n\t\t\t\tstartTime,\n\t\t\t\toptions\n\t\t\t})) retriesConsumed++;\n\t\t}\n\t}\n\tthrow new Error(\"Retry attempts exhausted without throwing an error.\");\n}\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvcC1yZXRyeS9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE4RDs7QUFFOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLDZDQUE2QyxpQ0FBaUMsSUFBSTtBQUNsRjtBQUNBLHlGQUF5RixLQUFLLG1CQUFtQixvQ0FBb0M7QUFDckosa0ZBQWtGLEtBQUs7QUFDdkYsb0RBQW9ELEtBQUssa0JBQWtCLElBQUk7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxTQUFTO0FBQ2QsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQywyREFBMkQ7QUFDN0Ysa0hBQWtILE1BQU07QUFDeEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLDBFQUFjO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSx1REFBdUQsWUFBWTtBQUNuRSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EseUNBQXlDO0FBQ3pDLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDa0I7QUFDbEIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9wLXJldHJ5L2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzTmV0d29ya0Vycm9yIH0gZnJvbSBcIi4uL2lzLW5ldHdvcmstZXJyb3IvaW5kZXguanNcIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy9wLXJldHJ5L2luZGV4LmpzXG5mdW5jdGlvbiB2YWxpZGF0ZVJldHJpZXMocmV0cmllcykge1xuXHRpZiAodHlwZW9mIHJldHJpZXMgPT09IFwibnVtYmVyXCIpIHtcblx0XHRpZiAocmV0cmllcyA8IDApIHRocm93IG5ldyBUeXBlRXJyb3IoXCJFeHBlY3RlZCBgcmV0cmllc2AgdG8gYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLlwiKTtcblx0XHRpZiAoTnVtYmVyLmlzTmFOKHJldHJpZXMpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRXhwZWN0ZWQgYHJldHJpZXNgIHRvIGJlIGEgdmFsaWQgbnVtYmVyIG9yIEluZmluaXR5LCBnb3QgTmFOLlwiKTtcblx0fSBlbHNlIGlmIChyZXRyaWVzICE9PSB2b2lkIDApIHRocm93IG5ldyBUeXBlRXJyb3IoXCJFeHBlY3RlZCBgcmV0cmllc2AgdG8gYmUgYSBudW1iZXIgb3IgSW5maW5pdHkuXCIpO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVOdW1iZXJPcHRpb24obmFtZSwgdmFsdWUsIHsgbWluID0gMCwgYWxsb3dJbmZpbml0eSA9IGZhbHNlIH0gPSB7fSkge1xuXHRpZiAodmFsdWUgPT09IHZvaWQgMCkgcmV0dXJuO1xuXHRpZiAodHlwZW9mIHZhbHVlICE9PSBcIm51bWJlclwiIHx8IE51bWJlci5pc05hTih2YWx1ZSkpIHRocm93IG5ldyBUeXBlRXJyb3IoYEV4cGVjdGVkIFxcYCR7bmFtZX1cXGAgdG8gYmUgYSBudW1iZXIke2FsbG93SW5maW5pdHkgPyBcIiBvciBJbmZpbml0eVwiIDogXCJcIn0uYCk7XG5cdGlmICghYWxsb3dJbmZpbml0eSAmJiAhTnVtYmVyLmlzRmluaXRlKHZhbHVlKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihgRXhwZWN0ZWQgXFxgJHtuYW1lfVxcYCB0byBiZSBhIGZpbml0ZSBudW1iZXIuYCk7XG5cdGlmICh2YWx1ZSA8IG1pbikgdGhyb3cgbmV3IFR5cGVFcnJvcihgRXhwZWN0ZWQgXFxgJHtuYW1lfVxcYCB0byBiZSBcXHUyMjY1ICR7bWlufS5gKTtcbn1cbnZhciBBYm9ydEVycm9yID0gY2xhc3MgZXh0ZW5kcyBFcnJvciB7XG5cdGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcblx0XHRzdXBlcigpO1xuXHRcdGlmIChtZXNzYWdlIGluc3RhbmNlb2YgRXJyb3IpIHtcblx0XHRcdHRoaXMub3JpZ2luYWxFcnJvciA9IG1lc3NhZ2U7XG5cdFx0XHQoe21lc3NhZ2V9ID0gbWVzc2FnZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMub3JpZ2luYWxFcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlKTtcblx0XHRcdHRoaXMub3JpZ2luYWxFcnJvci5zdGFjayA9IHRoaXMuc3RhY2s7XG5cdFx0fVxuXHRcdHRoaXMubmFtZSA9IFwiQWJvcnRFcnJvclwiO1xuXHRcdHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG5cdH1cbn07XG5mdW5jdGlvbiBjYWxjdWxhdGVEZWxheShyZXRyaWVzQ29uc3VtZWQsIG9wdGlvbnMpIHtcblx0Y29uc3QgYXR0ZW1wdCA9IE1hdGgubWF4KDEsIHJldHJpZXNDb25zdW1lZCArIDEpO1xuXHRjb25zdCByYW5kb20gPSBvcHRpb25zLnJhbmRvbWl6ZSA/IE1hdGgucmFuZG9tKCkgKyAxIDogMTtcblx0bGV0IHRpbWVvdXQgPSBNYXRoLnJvdW5kKHJhbmRvbSAqIG9wdGlvbnMubWluVGltZW91dCAqIG9wdGlvbnMuZmFjdG9yICoqIChhdHRlbXB0IC0gMSkpO1xuXHR0aW1lb3V0ID0gTWF0aC5taW4odGltZW91dCwgb3B0aW9ucy5tYXhUaW1lb3V0KTtcblx0cmV0dXJuIHRpbWVvdXQ7XG59XG5mdW5jdGlvbiBjYWxjdWxhdGVSZW1haW5pbmdUaW1lKHN0YXJ0LCBtYXgpIHtcblx0aWYgKCFOdW1iZXIuaXNGaW5pdGUobWF4KSkgcmV0dXJuIG1heDtcblx0cmV0dXJuIG1heCAtIChwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIG9uQXR0ZW1wdEZhaWx1cmUoeyBlcnJvciwgYXR0ZW1wdE51bWJlciwgcmV0cmllc0NvbnN1bWVkLCBzdGFydFRpbWUsIG9wdGlvbnMgfSkge1xuXHRjb25zdCBub3JtYWxpemVkRXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiAvKiBAX19QVVJFX18gKi8gbmV3IFR5cGVFcnJvcihgTm9uLWVycm9yIHdhcyB0aHJvd246IFwiJHtlcnJvcn1cIi4gWW91IHNob3VsZCBvbmx5IHRocm93IGVycm9ycy5gKTtcblx0aWYgKG5vcm1hbGl6ZWRFcnJvciBpbnN0YW5jZW9mIEFib3J0RXJyb3IpIHRocm93IG5vcm1hbGl6ZWRFcnJvci5vcmlnaW5hbEVycm9yO1xuXHRjb25zdCByZXRyaWVzTGVmdCA9IE51bWJlci5pc0Zpbml0ZShvcHRpb25zLnJldHJpZXMpID8gTWF0aC5tYXgoMCwgb3B0aW9ucy5yZXRyaWVzIC0gcmV0cmllc0NvbnN1bWVkKSA6IG9wdGlvbnMucmV0cmllcztcblx0Y29uc3QgbWF4UmV0cnlUaW1lID0gb3B0aW9ucy5tYXhSZXRyeVRpbWUgPz8gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuXHRjb25zdCBjb250ZXh0ID0gT2JqZWN0LmZyZWV6ZSh7XG5cdFx0ZXJyb3I6IG5vcm1hbGl6ZWRFcnJvcixcblx0XHRhdHRlbXB0TnVtYmVyLFxuXHRcdHJldHJpZXNMZWZ0LFxuXHRcdHJldHJpZXNDb25zdW1lZFxuXHR9KTtcblx0YXdhaXQgb3B0aW9ucy5vbkZhaWxlZEF0dGVtcHQoY29udGV4dCk7XG5cdGlmIChjYWxjdWxhdGVSZW1haW5pbmdUaW1lKHN0YXJ0VGltZSwgbWF4UmV0cnlUaW1lKSA8PSAwKSB0aHJvdyBub3JtYWxpemVkRXJyb3I7XG5cdGNvbnN0IGNvbnN1bWVSZXRyeSA9IGF3YWl0IG9wdGlvbnMuc2hvdWxkQ29uc3VtZVJldHJ5KGNvbnRleHQpO1xuXHRjb25zdCByZW1haW5pbmdUaW1lID0gY2FsY3VsYXRlUmVtYWluaW5nVGltZShzdGFydFRpbWUsIG1heFJldHJ5VGltZSk7XG5cdGlmIChyZW1haW5pbmdUaW1lIDw9IDAgfHwgcmV0cmllc0xlZnQgPD0gMCkgdGhyb3cgbm9ybWFsaXplZEVycm9yO1xuXHRpZiAobm9ybWFsaXplZEVycm9yIGluc3RhbmNlb2YgVHlwZUVycm9yICYmICFpc05ldHdvcmtFcnJvcihub3JtYWxpemVkRXJyb3IpKSB7XG5cdFx0aWYgKGNvbnN1bWVSZXRyeSkgdGhyb3cgbm9ybWFsaXplZEVycm9yO1xuXHRcdG9wdGlvbnMuc2lnbmFsPy50aHJvd0lmQWJvcnRlZCgpO1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRpZiAoIWF3YWl0IG9wdGlvbnMuc2hvdWxkUmV0cnkoY29udGV4dCkpIHRocm93IG5vcm1hbGl6ZWRFcnJvcjtcblx0aWYgKCFjb25zdW1lUmV0cnkpIHtcblx0XHRvcHRpb25zLnNpZ25hbD8udGhyb3dJZkFib3J0ZWQoKTtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0Y29uc3QgZGVsYXlUaW1lID0gY2FsY3VsYXRlRGVsYXkocmV0cmllc0NvbnN1bWVkLCBvcHRpb25zKTtcblx0Y29uc3QgZmluYWxEZWxheSA9IE1hdGgubWluKGRlbGF5VGltZSwgcmVtYWluaW5nVGltZSk7XG5cdGlmIChmaW5hbERlbGF5ID4gMCkgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdGNvbnN0IG9uQWJvcnQgPSAoKSA9PiB7XG5cdFx0XHRjbGVhclRpbWVvdXQodGltZW91dFRva2VuKTtcblx0XHRcdG9wdGlvbnMuc2lnbmFsPy5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgb25BYm9ydCk7XG5cdFx0XHRyZWplY3Qob3B0aW9ucy5zaWduYWwucmVhc29uKTtcblx0XHR9O1xuXHRcdGNvbnN0IHRpbWVvdXRUb2tlbiA9IHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0b3B0aW9ucy5zaWduYWw/LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBvbkFib3J0KTtcblx0XHRcdHJlc29sdmUoKTtcblx0XHR9LCBmaW5hbERlbGF5KTtcblx0XHRpZiAob3B0aW9ucy51bnJlZikgdGltZW91dFRva2VuLnVucmVmPy4oKTtcblx0XHRvcHRpb25zLnNpZ25hbD8uYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIG9uQWJvcnQsIHsgb25jZTogdHJ1ZSB9KTtcblx0fSk7XG5cdG9wdGlvbnMuc2lnbmFsPy50aHJvd0lmQWJvcnRlZCgpO1xuXHRyZXR1cm4gdHJ1ZTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHBSZXRyeShpbnB1dCwgb3B0aW9ucyA9IHt9KSB7XG5cdG9wdGlvbnMgPSB7IC4uLm9wdGlvbnMgfTtcblx0dmFsaWRhdGVSZXRyaWVzKG9wdGlvbnMucmV0cmllcyk7XG5cdGlmIChPYmplY3QuaGFzT3duKG9wdGlvbnMsIFwiZm9yZXZlclwiKSkgdGhyb3cgbmV3IEVycm9yKFwiVGhlIGBmb3JldmVyYCBvcHRpb24gaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZC4gRm9yIG1hbnkgdXNlLWNhc2VzLCB5b3UgY2FuIHNldCBgcmV0cmllczogSW5maW5pdHlgIGluc3RlYWQuXCIpO1xuXHRvcHRpb25zLnJldHJpZXMgPz89IDEwO1xuXHRvcHRpb25zLmZhY3RvciA/Pz0gMjtcblx0b3B0aW9ucy5taW5UaW1lb3V0ID8/PSAxZTM7XG5cdG9wdGlvbnMubWF4VGltZW91dCA/Pz0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuXHRvcHRpb25zLm1heFJldHJ5VGltZSA/Pz0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuXHRvcHRpb25zLnJhbmRvbWl6ZSA/Pz0gZmFsc2U7XG5cdG9wdGlvbnMub25GYWlsZWRBdHRlbXB0ID8/PSAoKSA9PiB7fTtcblx0b3B0aW9ucy5zaG91bGRSZXRyeSA/Pz0gKCkgPT4gdHJ1ZTtcblx0b3B0aW9ucy5zaG91bGRDb25zdW1lUmV0cnkgPz89ICgpID0+IHRydWU7XG5cdHZhbGlkYXRlTnVtYmVyT3B0aW9uKFwiZmFjdG9yXCIsIG9wdGlvbnMuZmFjdG9yLCB7XG5cdFx0bWluOiAwLFxuXHRcdGFsbG93SW5maW5pdHk6IGZhbHNlXG5cdH0pO1xuXHR2YWxpZGF0ZU51bWJlck9wdGlvbihcIm1pblRpbWVvdXRcIiwgb3B0aW9ucy5taW5UaW1lb3V0LCB7XG5cdFx0bWluOiAwLFxuXHRcdGFsbG93SW5maW5pdHk6IGZhbHNlXG5cdH0pO1xuXHR2YWxpZGF0ZU51bWJlck9wdGlvbihcIm1heFRpbWVvdXRcIiwgb3B0aW9ucy5tYXhUaW1lb3V0LCB7XG5cdFx0bWluOiAwLFxuXHRcdGFsbG93SW5maW5pdHk6IHRydWVcblx0fSk7XG5cdHZhbGlkYXRlTnVtYmVyT3B0aW9uKFwibWF4UmV0cnlUaW1lXCIsIG9wdGlvbnMubWF4UmV0cnlUaW1lLCB7XG5cdFx0bWluOiAwLFxuXHRcdGFsbG93SW5maW5pdHk6IHRydWVcblx0fSk7XG5cdGlmICghKG9wdGlvbnMuZmFjdG9yID4gMCkpIG9wdGlvbnMuZmFjdG9yID0gMTtcblx0b3B0aW9ucy5zaWduYWw/LnRocm93SWZBYm9ydGVkKCk7XG5cdGxldCBhdHRlbXB0TnVtYmVyID0gMDtcblx0bGV0IHJldHJpZXNDb25zdW1lZCA9IDA7XG5cdGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuXHR3aGlsZSAoTnVtYmVyLmlzRmluaXRlKG9wdGlvbnMucmV0cmllcykgPyByZXRyaWVzQ29uc3VtZWQgPD0gb3B0aW9ucy5yZXRyaWVzIDogdHJ1ZSkge1xuXHRcdGF0dGVtcHROdW1iZXIrKztcblx0XHR0cnkge1xuXHRcdFx0b3B0aW9ucy5zaWduYWw/LnRocm93SWZBYm9ydGVkKCk7XG5cdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBpbnB1dChhdHRlbXB0TnVtYmVyKTtcblx0XHRcdG9wdGlvbnMuc2lnbmFsPy50aHJvd0lmQWJvcnRlZCgpO1xuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0aWYgKGF3YWl0IG9uQXR0ZW1wdEZhaWx1cmUoe1xuXHRcdFx0XHRlcnJvcixcblx0XHRcdFx0YXR0ZW1wdE51bWJlcixcblx0XHRcdFx0cmV0cmllc0NvbnN1bWVkLFxuXHRcdFx0XHRzdGFydFRpbWUsXG5cdFx0XHRcdG9wdGlvbnNcblx0XHRcdH0pKSByZXRyaWVzQ29uc3VtZWQrKztcblx0XHR9XG5cdH1cblx0dGhyb3cgbmV3IEVycm9yKFwiUmV0cnkgYXR0ZW1wdHMgZXhoYXVzdGVkIHdpdGhvdXQgdGhyb3dpbmcgYW4gZXJyb3IuXCIpO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHBSZXRyeSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/p-retry/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/sax-js/sax.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/sax-js/sax.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sax: () => (/* binding */ sax)\n/* harmony export */ });\n//#region src/utils/sax-js/sax.ts\nconst initializeSax = function() {\n\tconst sax$1 = {};\n\tsax$1.parser = function(strict, opt) {\n\t\treturn new SAXParser(strict, opt);\n\t};\n\tsax$1.SAXParser = SAXParser;\n\tsax$1.SAXStream = SAXStream;\n\tsax$1.createStream = createStream;\n\tsax$1.MAX_BUFFER_LENGTH = 64 * 1024;\n\tconst buffers = [\n\t\t\"comment\",\n\t\t\"sgmlDecl\",\n\t\t\"textNode\",\n\t\t\"tagName\",\n\t\t\"doctype\",\n\t\t\"procInstName\",\n\t\t\"procInstBody\",\n\t\t\"entity\",\n\t\t\"attribName\",\n\t\t\"attribValue\",\n\t\t\"cdata\",\n\t\t\"script\"\n\t];\n\tsax$1.EVENTS = [\n\t\t\"text\",\n\t\t\"processinginstruction\",\n\t\t\"sgmldeclaration\",\n\t\t\"doctype\",\n\t\t\"comment\",\n\t\t\"opentagstart\",\n\t\t\"attribute\",\n\t\t\"opentag\",\n\t\t\"closetag\",\n\t\t\"opencdata\",\n\t\t\"cdata\",\n\t\t\"closecdata\",\n\t\t\"error\",\n\t\t\"end\",\n\t\t\"ready\",\n\t\t\"script\",\n\t\t\"opennamespace\",\n\t\t\"closenamespace\"\n\t];\n\tfunction SAXParser(strict, opt) {\n\t\tif (!(this instanceof SAXParser)) return new SAXParser(strict, opt);\n\t\tvar parser = this;\n\t\tclearBuffers(parser);\n\t\tparser.q = parser.c = \"\";\n\t\tparser.bufferCheckPosition = sax$1.MAX_BUFFER_LENGTH;\n\t\tparser.opt = opt || {};\n\t\tparser.opt.lowercase = parser.opt.lowercase || parser.opt.lowercasetags;\n\t\tparser.looseCase = parser.opt.lowercase ? \"toLowerCase\" : \"toUpperCase\";\n\t\tparser.tags = [];\n\t\tparser.closed = parser.closedRoot = parser.sawRoot = false;\n\t\tparser.tag = parser.error = null;\n\t\tparser.strict = !!strict;\n\t\tparser.noscript = !!(strict || parser.opt.noscript);\n\t\tparser.state = S.BEGIN;\n\t\tparser.strictEntities = parser.opt.strictEntities;\n\t\tparser.ENTITIES = parser.strictEntities ? Object.create(sax$1.XML_ENTITIES) : Object.create(sax$1.ENTITIES);\n\t\tparser.attribList = [];\n\t\tif (parser.opt.xmlns) parser.ns = Object.create(rootNS);\n\t\tparser.trackPosition = parser.opt.position !== false;\n\t\tif (parser.trackPosition) parser.position = parser.line = parser.column = 0;\n\t\temit(parser, \"onready\");\n\t}\n\tif (!Object.create) Object.create = function(o) {\n\t\tfunction F() {}\n\t\tF.prototype = o;\n\t\tvar newf = new F();\n\t\treturn newf;\n\t};\n\tif (!Object.keys) Object.keys = function(o) {\n\t\tvar a = [];\n\t\tfor (var i in o) if (o.hasOwnProperty(i)) a.push(i);\n\t\treturn a;\n\t};\n\tfunction checkBufferLength(parser) {\n\t\tvar maxAllowed = Math.max(sax$1.MAX_BUFFER_LENGTH, 10);\n\t\tvar maxActual = 0;\n\t\tfor (var i = 0, l = buffers.length; i < l; i++) {\n\t\t\tvar len = parser[buffers[i]].length;\n\t\t\tif (len > maxAllowed) switch (buffers[i]) {\n\t\t\t\tcase \"textNode\":\n\t\t\t\t\tcloseText(parser);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"cdata\":\n\t\t\t\t\temitNode(parser, \"oncdata\", parser.cdata);\n\t\t\t\t\tparser.cdata = \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"script\":\n\t\t\t\t\temitNode(parser, \"onscript\", parser.script);\n\t\t\t\t\tparser.script = \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tdefault: error(parser, \"Max buffer length exceeded: \" + buffers[i]);\n\t\t\t}\n\t\t\tmaxActual = Math.max(maxActual, len);\n\t\t}\n\t\tvar m = sax$1.MAX_BUFFER_LENGTH - maxActual;\n\t\tparser.bufferCheckPosition = m + parser.position;\n\t}\n\tfunction clearBuffers(parser) {\n\t\tfor (var i = 0, l = buffers.length; i < l; i++) parser[buffers[i]] = \"\";\n\t}\n\tfunction flushBuffers(parser) {\n\t\tcloseText(parser);\n\t\tif (parser.cdata !== \"\") {\n\t\t\temitNode(parser, \"oncdata\", parser.cdata);\n\t\t\tparser.cdata = \"\";\n\t\t}\n\t\tif (parser.script !== \"\") {\n\t\t\temitNode(parser, \"onscript\", parser.script);\n\t\t\tparser.script = \"\";\n\t\t}\n\t}\n\tSAXParser.prototype = {\n\t\tend: function() {\n\t\t\tend(this);\n\t\t},\n\t\twrite,\n\t\tresume: function() {\n\t\t\tthis.error = null;\n\t\t\treturn this;\n\t\t},\n\t\tclose: function() {\n\t\t\treturn this.write(null);\n\t\t},\n\t\tflush: function() {\n\t\t\tflushBuffers(this);\n\t\t}\n\t};\n\tvar Stream = ReadableStream;\n\tif (!Stream) Stream = function() {};\n\tvar streamWraps = sax$1.EVENTS.filter(function(ev) {\n\t\treturn ev !== \"error\" && ev !== \"end\";\n\t});\n\tfunction createStream(strict, opt) {\n\t\treturn new SAXStream(strict, opt);\n\t}\n\tfunction SAXStream(strict, opt) {\n\t\tif (!(this instanceof SAXStream)) return new SAXStream(strict, opt);\n\t\tStream.apply(this);\n\t\tthis._parser = new SAXParser(strict, opt);\n\t\tthis.writable = true;\n\t\tthis.readable = true;\n\t\tvar me = this;\n\t\tthis._parser.onend = function() {\n\t\t\tme.emit(\"end\");\n\t\t};\n\t\tthis._parser.onerror = function(er) {\n\t\t\tme.emit(\"error\", er);\n\t\t\tme._parser.error = null;\n\t\t};\n\t\tthis._decoder = null;\n\t\tstreamWraps.forEach(function(ev) {\n\t\t\tObject.defineProperty(me, \"on\" + ev, {\n\t\t\t\tget: function() {\n\t\t\t\t\treturn me._parser[\"on\" + ev];\n\t\t\t\t},\n\t\t\t\tset: function(h) {\n\t\t\t\t\tif (!h) {\n\t\t\t\t\t\tme.removeAllListeners(ev);\n\t\t\t\t\t\tme._parser[\"on\" + ev] = h;\n\t\t\t\t\t\treturn h;\n\t\t\t\t\t}\n\t\t\t\t\tme.on(ev, h);\n\t\t\t\t},\n\t\t\t\tenumerable: true,\n\t\t\t\tconfigurable: false\n\t\t\t});\n\t\t});\n\t}\n\tSAXStream.prototype = Object.create(Stream.prototype, { constructor: { value: SAXStream } });\n\tSAXStream.prototype.write = function(data) {\n\t\tthis._parser.write(data.toString());\n\t\tthis.emit(\"data\", data);\n\t\treturn true;\n\t};\n\tSAXStream.prototype.end = function(chunk) {\n\t\tif (chunk && chunk.length) this.write(chunk);\n\t\tthis._parser.end();\n\t\treturn true;\n\t};\n\tSAXStream.prototype.on = function(ev, handler) {\n\t\tvar me = this;\n\t\tif (!me._parser[\"on\" + ev] && streamWraps.indexOf(ev) !== -1) me._parser[\"on\" + ev] = function() {\n\t\t\tvar args = arguments.length === 1 ? [arguments[0]] : Array.apply(null, arguments);\n\t\t\targs.splice(0, 0, ev);\n\t\t\tme.emit.apply(me, args);\n\t\t};\n\t\treturn Stream.prototype.on.call(me, ev, handler);\n\t};\n\tvar CDATA = \"[CDATA[\";\n\tvar DOCTYPE = \"DOCTYPE\";\n\tvar XML_NAMESPACE = \"http://www.w3.org/XML/1998/namespace\";\n\tvar XMLNS_NAMESPACE = \"http://www.w3.org/2000/xmlns/\";\n\tvar rootNS = {\n\t\txml: XML_NAMESPACE,\n\t\txmlns: XMLNS_NAMESPACE\n\t};\n\tvar nameStart = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/;\n\tvar nameBody = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/;\n\tvar entityStart = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/;\n\tvar entityBody = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/;\n\tfunction isWhitespace(c) {\n\t\treturn c === \" \" || c === \"\\n\" || c === \"\\r\" || c === \"\t\";\n\t}\n\tfunction isQuote(c) {\n\t\treturn c === \"\\\"\" || c === \"'\";\n\t}\n\tfunction isAttribEnd(c) {\n\t\treturn c === \">\" || isWhitespace(c);\n\t}\n\tfunction isMatch(regex, c) {\n\t\treturn regex.test(c);\n\t}\n\tfunction notMatch(regex, c) {\n\t\treturn !isMatch(regex, c);\n\t}\n\tvar S = 0;\n\tsax$1.STATE = {\n\t\tBEGIN: S++,\n\t\tBEGIN_WHITESPACE: S++,\n\t\tTEXT: S++,\n\t\tTEXT_ENTITY: S++,\n\t\tOPEN_WAKA: S++,\n\t\tSGML_DECL: S++,\n\t\tSGML_DECL_QUOTED: S++,\n\t\tDOCTYPE: S++,\n\t\tDOCTYPE_QUOTED: S++,\n\t\tDOCTYPE_DTD: S++,\n\t\tDOCTYPE_DTD_QUOTED: S++,\n\t\tCOMMENT_STARTING: S++,\n\t\tCOMMENT: S++,\n\t\tCOMMENT_ENDING: S++,\n\t\tCOMMENT_ENDED: S++,\n\t\tCDATA: S++,\n\t\tCDATA_ENDING: S++,\n\t\tCDATA_ENDING_2: S++,\n\t\tPROC_INST: S++,\n\t\tPROC_INST_BODY: S++,\n\t\tPROC_INST_ENDING: S++,\n\t\tOPEN_TAG: S++,\n\t\tOPEN_TAG_SLASH: S++,\n\t\tATTRIB: S++,\n\t\tATTRIB_NAME: S++,\n\t\tATTRIB_NAME_SAW_WHITE: S++,\n\t\tATTRIB_VALUE: S++,\n\t\tATTRIB_VALUE_QUOTED: S++,\n\t\tATTRIB_VALUE_CLOSED: S++,\n\t\tATTRIB_VALUE_UNQUOTED: S++,\n\t\tATTRIB_VALUE_ENTITY_Q: S++,\n\t\tATTRIB_VALUE_ENTITY_U: S++,\n\t\tCLOSE_TAG: S++,\n\t\tCLOSE_TAG_SAW_WHITE: S++,\n\t\tSCRIPT: S++,\n\t\tSCRIPT_ENDING: S++\n\t};\n\tsax$1.XML_ENTITIES = {\n\t\tamp: \"&\",\n\t\tgt: \">\",\n\t\tlt: \"<\",\n\t\tquot: \"\\\"\",\n\t\tapos: \"'\"\n\t};\n\tsax$1.ENTITIES = {\n\t\tamp: \"&\",\n\t\tgt: \">\",\n\t\tlt: \"<\",\n\t\tquot: \"\\\"\",\n\t\tapos: \"'\",\n\t\tAElig: 198,\n\t\tAacute: 193,\n\t\tAcirc: 194,\n\t\tAgrave: 192,\n\t\tAring: 197,\n\t\tAtilde: 195,\n\t\tAuml: 196,\n\t\tCcedil: 199,\n\t\tETH: 208,\n\t\tEacute: 201,\n\t\tEcirc: 202,\n\t\tEgrave: 200,\n\t\tEuml: 203,\n\t\tIacute: 205,\n\t\tIcirc: 206,\n\t\tIgrave: 204,\n\t\tIuml: 207,\n\t\tNtilde: 209,\n\t\tOacute: 211,\n\t\tOcirc: 212,\n\t\tOgrave: 210,\n\t\tOslash: 216,\n\t\tOtilde: 213,\n\t\tOuml: 214,\n\t\tTHORN: 222,\n\t\tUacute: 218,\n\t\tUcirc: 219,\n\t\tUgrave: 217,\n\t\tUuml: 220,\n\t\tYacute: 221,\n\t\taacute: 225,\n\t\tacirc: 226,\n\t\taelig: 230,\n\t\tagrave: 224,\n\t\taring: 229,\n\t\tatilde: 227,\n\t\tauml: 228,\n\t\tccedil: 231,\n\t\teacute: 233,\n\t\tecirc: 234,\n\t\tegrave: 232,\n\t\teth: 240,\n\t\teuml: 235,\n\t\tiacute: 237,\n\t\ticirc: 238,\n\t\tigrave: 236,\n\t\tiuml: 239,\n\t\tntilde: 241,\n\t\toacute: 243,\n\t\tocirc: 244,\n\t\tograve: 242,\n\t\toslash: 248,\n\t\totilde: 245,\n\t\touml: 246,\n\t\tszlig: 223,\n\t\tthorn: 254,\n\t\tuacute: 250,\n\t\tucirc: 251,\n\t\tugrave: 249,\n\t\tuuml: 252,\n\t\tyacute: 253,\n\t\tyuml: 255,\n\t\tcopy: 169,\n\t\treg: 174,\n\t\tnbsp: 160,\n\t\tiexcl: 161,\n\t\tcent: 162,\n\t\tpound: 163,\n\t\tcurren: 164,\n\t\tyen: 165,\n\t\tbrvbar: 166,\n\t\tsect: 167,\n\t\tuml: 168,\n\t\tordf: 170,\n\t\tlaquo: 171,\n\t\tnot: 172,\n\t\tshy: 173,\n\t\tmacr: 175,\n\t\tdeg: 176,\n\t\tplusmn: 177,\n\t\tsup1: 185,\n\t\tsup2: 178,\n\t\tsup3: 179,\n\t\tacute: 180,\n\t\tmicro: 181,\n\t\tpara: 182,\n\t\tmiddot: 183,\n\t\tcedil: 184,\n\t\tordm: 186,\n\t\traquo: 187,\n\t\tfrac14: 188,\n\t\tfrac12: 189,\n\t\tfrac34: 190,\n\t\tiquest: 191,\n\t\ttimes: 215,\n\t\tdivide: 247,\n\t\tOElig: 338,\n\t\toelig: 339,\n\t\tScaron: 352,\n\t\tscaron: 353,\n\t\tYuml: 376,\n\t\tfnof: 402,\n\t\tcirc: 710,\n\t\ttilde: 732,\n\t\tAlpha: 913,\n\t\tBeta: 914,\n\t\tGamma: 915,\n\t\tDelta: 916,\n\t\tEpsilon: 917,\n\t\tZeta: 918,\n\t\tEta: 919,\n\t\tTheta: 920,\n\t\tIota: 921,\n\t\tKappa: 922,\n\t\tLambda: 923,\n\t\tMu: 924,\n\t\tNu: 925,\n\t\tXi: 926,\n\t\tOmicron: 927,\n\t\tPi: 928,\n\t\tRho: 929,\n\t\tSigma: 931,\n\t\tTau: 932,\n\t\tUpsilon: 933,\n\t\tPhi: 934,\n\t\tChi: 935,\n\t\tPsi: 936,\n\t\tOmega: 937,\n\t\talpha: 945,\n\t\tbeta: 946,\n\t\tgamma: 947,\n\t\tdelta: 948,\n\t\tepsilon: 949,\n\t\tzeta: 950,\n\t\teta: 951,\n\t\ttheta: 952,\n\t\tiota: 953,\n\t\tkappa: 954,\n\t\tlambda: 955,\n\t\tmu: 956,\n\t\tnu: 957,\n\t\txi: 958,\n\t\tomicron: 959,\n\t\tpi: 960,\n\t\trho: 961,\n\t\tsigmaf: 962,\n\t\tsigma: 963,\n\t\ttau: 964,\n\t\tupsilon: 965,\n\t\tphi: 966,\n\t\tchi: 967,\n\t\tpsi: 968,\n\t\tomega: 969,\n\t\tthetasym: 977,\n\t\tupsih: 978,\n\t\tpiv: 982,\n\t\tensp: 8194,\n\t\temsp: 8195,\n\t\tthinsp: 8201,\n\t\tzwnj: 8204,\n\t\tzwj: 8205,\n\t\tlrm: 8206,\n\t\trlm: 8207,\n\t\tndash: 8211,\n\t\tmdash: 8212,\n\t\tlsquo: 8216,\n\t\trsquo: 8217,\n\t\tsbquo: 8218,\n\t\tldquo: 8220,\n\t\trdquo: 8221,\n\t\tbdquo: 8222,\n\t\tdagger: 8224,\n\t\tDagger: 8225,\n\t\tbull: 8226,\n\t\thellip: 8230,\n\t\tpermil: 8240,\n\t\tprime: 8242,\n\t\tPrime: 8243,\n\t\tlsaquo: 8249,\n\t\trsaquo: 8250,\n\t\toline: 8254,\n\t\tfrasl: 8260,\n\t\teuro: 8364,\n\t\timage: 8465,\n\t\tweierp: 8472,\n\t\treal: 8476,\n\t\ttrade: 8482,\n\t\talefsym: 8501,\n\t\tlarr: 8592,\n\t\tuarr: 8593,\n\t\trarr: 8594,\n\t\tdarr: 8595,\n\t\tharr: 8596,\n\t\tcrarr: 8629,\n\t\tlArr: 8656,\n\t\tuArr: 8657,\n\t\trArr: 8658,\n\t\tdArr: 8659,\n\t\thArr: 8660,\n\t\tforall: 8704,\n\t\tpart: 8706,\n\t\texist: 8707,\n\t\tempty: 8709,\n\t\tnabla: 8711,\n\t\tisin: 8712,\n\t\tnotin: 8713,\n\t\tni: 8715,\n\t\tprod: 8719,\n\t\tsum: 8721,\n\t\tminus: 8722,\n\t\tlowast: 8727,\n\t\tradic: 8730,\n\t\tprop: 8733,\n\t\tinfin: 8734,\n\t\tang: 8736,\n\t\tand: 8743,\n\t\tor: 8744,\n\t\tcap: 8745,\n\t\tcup: 8746,\n\t\tint: 8747,\n\t\tthere4: 8756,\n\t\tsim: 8764,\n\t\tcong: 8773,\n\t\tasymp: 8776,\n\t\tne: 8800,\n\t\tequiv: 8801,\n\t\tle: 8804,\n\t\tge: 8805,\n\t\tsub: 8834,\n\t\tsup: 8835,\n\t\tnsub: 8836,\n\t\tsube: 8838,\n\t\tsupe: 8839,\n\t\toplus: 8853,\n\t\totimes: 8855,\n\t\tperp: 8869,\n\t\tsdot: 8901,\n\t\tlceil: 8968,\n\t\trceil: 8969,\n\t\tlfloor: 8970,\n\t\trfloor: 8971,\n\t\tlang: 9001,\n\t\trang: 9002,\n\t\tloz: 9674,\n\t\tspades: 9824,\n\t\tclubs: 9827,\n\t\thearts: 9829,\n\t\tdiams: 9830\n\t};\n\tObject.keys(sax$1.ENTITIES).forEach(function(key) {\n\t\tvar e = sax$1.ENTITIES[key];\n\t\tvar s$1 = typeof e === \"number\" ? String.fromCharCode(e) : e;\n\t\tsax$1.ENTITIES[key] = s$1;\n\t});\n\tfor (var s in sax$1.STATE) sax$1.STATE[sax$1.STATE[s]] = s;\n\tS = sax$1.STATE;\n\tfunction emit(parser, event, data) {\n\t\tparser[event] && parser[event](data);\n\t}\n\tfunction emitNode(parser, nodeType, data) {\n\t\tif (parser.textNode) closeText(parser);\n\t\temit(parser, nodeType, data);\n\t}\n\tfunction closeText(parser) {\n\t\tparser.textNode = textopts(parser.opt, parser.textNode);\n\t\tif (parser.textNode) emit(parser, \"ontext\", parser.textNode);\n\t\tparser.textNode = \"\";\n\t}\n\tfunction textopts(opt, text) {\n\t\tif (opt.trim) text = text.trim();\n\t\tif (opt.normalize) text = text.replace(/\\s+/g, \" \");\n\t\treturn text;\n\t}\n\tfunction error(parser, er) {\n\t\tcloseText(parser);\n\t\tif (parser.trackPosition) er += \"\\nLine: \" + parser.line + \"\\nColumn: \" + parser.column + \"\\nChar: \" + parser.c;\n\t\ter = new Error(er);\n\t\tparser.error = er;\n\t\temit(parser, \"onerror\", er);\n\t\treturn parser;\n\t}\n\tfunction end(parser) {\n\t\tif (parser.sawRoot && !parser.closedRoot) strictFail(parser, \"Unclosed root tag\");\n\t\tif (parser.state !== S.BEGIN && parser.state !== S.BEGIN_WHITESPACE && parser.state !== S.TEXT) error(parser, \"Unexpected end\");\n\t\tcloseText(parser);\n\t\tparser.c = \"\";\n\t\tparser.closed = true;\n\t\temit(parser, \"onend\");\n\t\tSAXParser.call(parser, parser.strict, parser.opt);\n\t\treturn parser;\n\t}\n\tfunction strictFail(parser, message) {\n\t\tif (typeof parser !== \"object\" || !(parser instanceof SAXParser)) throw new Error(\"bad call to strictFail\");\n\t\tif (parser.strict) error(parser, message);\n\t}\n\tfunction newTag(parser) {\n\t\tif (!parser.strict) parser.tagName = parser.tagName[parser.looseCase]();\n\t\tvar parent = parser.tags[parser.tags.length - 1] || parser;\n\t\tvar tag = parser.tag = {\n\t\t\tname: parser.tagName,\n\t\t\tattributes: {}\n\t\t};\n\t\tif (parser.opt.xmlns) tag.ns = parent.ns;\n\t\tparser.attribList.length = 0;\n\t\temitNode(parser, \"onopentagstart\", tag);\n\t}\n\tfunction qname(name, attribute) {\n\t\tvar i = name.indexOf(\":\");\n\t\tvar qualName = i < 0 ? [\"\", name] : name.split(\":\");\n\t\tvar prefix = qualName[0];\n\t\tvar local = qualName[1];\n\t\tif (attribute && name === \"xmlns\") {\n\t\t\tprefix = \"xmlns\";\n\t\t\tlocal = \"\";\n\t\t}\n\t\treturn {\n\t\t\tprefix,\n\t\t\tlocal\n\t\t};\n\t}\n\tfunction attrib(parser) {\n\t\tif (!parser.strict) parser.attribName = parser.attribName[parser.looseCase]();\n\t\tif (parser.attribList.indexOf(parser.attribName) !== -1 || parser.tag.attributes.hasOwnProperty(parser.attribName)) {\n\t\t\tparser.attribName = parser.attribValue = \"\";\n\t\t\treturn;\n\t\t}\n\t\tif (parser.opt.xmlns) {\n\t\t\tvar qn = qname(parser.attribName, true);\n\t\t\tvar prefix = qn.prefix;\n\t\t\tvar local = qn.local;\n\t\t\tif (prefix === \"xmlns\") if (local === \"xml\" && parser.attribValue !== XML_NAMESPACE) strictFail(parser, \"xml: prefix must be bound to \" + XML_NAMESPACE + \"\\nActual: \" + parser.attribValue);\n\t\t\telse if (local === \"xmlns\" && parser.attribValue !== XMLNS_NAMESPACE) strictFail(parser, \"xmlns: prefix must be bound to \" + XMLNS_NAMESPACE + \"\\nActual: \" + parser.attribValue);\n\t\t\telse {\n\t\t\t\tvar tag = parser.tag;\n\t\t\t\tvar parent = parser.tags[parser.tags.length - 1] || parser;\n\t\t\t\tif (tag.ns === parent.ns) tag.ns = Object.create(parent.ns);\n\t\t\t\ttag.ns[local] = parser.attribValue;\n\t\t\t}\n\t\t\tparser.attribList.push([parser.attribName, parser.attribValue]);\n\t\t} else {\n\t\t\tparser.tag.attributes[parser.attribName] = parser.attribValue;\n\t\t\temitNode(parser, \"onattribute\", {\n\t\t\t\tname: parser.attribName,\n\t\t\t\tvalue: parser.attribValue\n\t\t\t});\n\t\t}\n\t\tparser.attribName = parser.attribValue = \"\";\n\t}\n\tfunction openTag(parser, selfClosing) {\n\t\tif (parser.opt.xmlns) {\n\t\t\tvar tag = parser.tag;\n\t\t\tvar qn = qname(parser.tagName);\n\t\t\ttag.prefix = qn.prefix;\n\t\t\ttag.local = qn.local;\n\t\t\ttag.uri = tag.ns[qn.prefix] || \"\";\n\t\t\tif (tag.prefix && !tag.uri) {\n\t\t\t\tstrictFail(parser, \"Unbound namespace prefix: \" + JSON.stringify(parser.tagName));\n\t\t\t\ttag.uri = qn.prefix;\n\t\t\t}\n\t\t\tvar parent = parser.tags[parser.tags.length - 1] || parser;\n\t\t\tif (tag.ns && parent.ns !== tag.ns) Object.keys(tag.ns).forEach(function(p) {\n\t\t\t\temitNode(parser, \"onopennamespace\", {\n\t\t\t\t\tprefix: p,\n\t\t\t\t\turi: tag.ns[p]\n\t\t\t\t});\n\t\t\t});\n\t\t\tfor (var i = 0, l = parser.attribList.length; i < l; i++) {\n\t\t\t\tvar nv = parser.attribList[i];\n\t\t\t\tvar name = nv[0];\n\t\t\t\tvar value = nv[1];\n\t\t\t\tvar qualName = qname(name, true);\n\t\t\t\tvar prefix = qualName.prefix;\n\t\t\t\tvar local = qualName.local;\n\t\t\t\tvar uri = prefix === \"\" ? \"\" : tag.ns[prefix] || \"\";\n\t\t\t\tvar a = {\n\t\t\t\t\tname,\n\t\t\t\t\tvalue,\n\t\t\t\t\tprefix,\n\t\t\t\t\tlocal,\n\t\t\t\t\turi\n\t\t\t\t};\n\t\t\t\tif (prefix && prefix !== \"xmlns\" && !uri) {\n\t\t\t\t\tstrictFail(parser, \"Unbound namespace prefix: \" + JSON.stringify(prefix));\n\t\t\t\t\ta.uri = prefix;\n\t\t\t\t}\n\t\t\t\tparser.tag.attributes[name] = a;\n\t\t\t\temitNode(parser, \"onattribute\", a);\n\t\t\t}\n\t\t\tparser.attribList.length = 0;\n\t\t}\n\t\tparser.tag.isSelfClosing = !!selfClosing;\n\t\tparser.sawRoot = true;\n\t\tparser.tags.push(parser.tag);\n\t\temitNode(parser, \"onopentag\", parser.tag);\n\t\tif (!selfClosing) {\n\t\t\tif (!parser.noscript && parser.tagName.toLowerCase() === \"script\") parser.state = S.SCRIPT;\n\t\t\telse parser.state = S.TEXT;\n\t\t\tparser.tag = null;\n\t\t\tparser.tagName = \"\";\n\t\t}\n\t\tparser.attribName = parser.attribValue = \"\";\n\t\tparser.attribList.length = 0;\n\t}\n\tfunction closeTag(parser) {\n\t\tif (!parser.tagName) {\n\t\t\tstrictFail(parser, \"Weird empty close tag.\");\n\t\t\tparser.textNode += \"</>\";\n\t\t\tparser.state = S.TEXT;\n\t\t\treturn;\n\t\t}\n\t\tif (parser.script) {\n\t\t\tif (parser.tagName !== \"script\") {\n\t\t\t\tparser.script += \"</\" + parser.tagName + \">\";\n\t\t\t\tparser.tagName = \"\";\n\t\t\t\tparser.state = S.SCRIPT;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\temitNode(parser, \"onscript\", parser.script);\n\t\t\tparser.script = \"\";\n\t\t}\n\t\tvar t = parser.tags.length;\n\t\tvar tagName = parser.tagName;\n\t\tif (!parser.strict) tagName = tagName[parser.looseCase]();\n\t\tvar closeTo = tagName;\n\t\twhile (t--) {\n\t\t\tvar close = parser.tags[t];\n\t\t\tif (close.name !== closeTo) strictFail(parser, \"Unexpected close tag\");\n\t\t\telse break;\n\t\t}\n\t\tif (t < 0) {\n\t\t\tstrictFail(parser, \"Unmatched closing tag: \" + parser.tagName);\n\t\t\tparser.textNode += \"</\" + parser.tagName + \">\";\n\t\t\tparser.state = S.TEXT;\n\t\t\treturn;\n\t\t}\n\t\tparser.tagName = tagName;\n\t\tvar s$1 = parser.tags.length;\n\t\twhile (s$1-- > t) {\n\t\t\tvar tag = parser.tag = parser.tags.pop();\n\t\t\tparser.tagName = parser.tag.name;\n\t\t\temitNode(parser, \"onclosetag\", parser.tagName);\n\t\t\tvar x = {};\n\t\t\tfor (var i in tag.ns) x[i] = tag.ns[i];\n\t\t\tvar parent = parser.tags[parser.tags.length - 1] || parser;\n\t\t\tif (parser.opt.xmlns && tag.ns !== parent.ns) Object.keys(tag.ns).forEach(function(p) {\n\t\t\t\tvar n = tag.ns[p];\n\t\t\t\temitNode(parser, \"onclosenamespace\", {\n\t\t\t\t\tprefix: p,\n\t\t\t\t\turi: n\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\tif (t === 0) parser.closedRoot = true;\n\t\tparser.tagName = parser.attribValue = parser.attribName = \"\";\n\t\tparser.attribList.length = 0;\n\t\tparser.state = S.TEXT;\n\t}\n\tfunction parseEntity(parser) {\n\t\tvar entity = parser.entity;\n\t\tvar entityLC = entity.toLowerCase();\n\t\tvar num;\n\t\tvar numStr = \"\";\n\t\tif (parser.ENTITIES[entity]) return parser.ENTITIES[entity];\n\t\tif (parser.ENTITIES[entityLC]) return parser.ENTITIES[entityLC];\n\t\tentity = entityLC;\n\t\tif (entity.charAt(0) === \"#\") if (entity.charAt(1) === \"x\") {\n\t\t\tentity = entity.slice(2);\n\t\t\tnum = parseInt(entity, 16);\n\t\t\tnumStr = num.toString(16);\n\t\t} else {\n\t\t\tentity = entity.slice(1);\n\t\t\tnum = parseInt(entity, 10);\n\t\t\tnumStr = num.toString(10);\n\t\t}\n\t\tentity = entity.replace(/^0+/, \"\");\n\t\tif (isNaN(num) || numStr.toLowerCase() !== entity) {\n\t\t\tstrictFail(parser, \"Invalid character entity\");\n\t\t\treturn \"&\" + parser.entity + \";\";\n\t\t}\n\t\treturn String.fromCodePoint(num);\n\t}\n\tfunction beginWhiteSpace(parser, c) {\n\t\tif (c === \"<\") {\n\t\t\tparser.state = S.OPEN_WAKA;\n\t\t\tparser.startTagPosition = parser.position;\n\t\t} else if (!isWhitespace(c)) {\n\t\t\tstrictFail(parser, \"Non-whitespace before first tag.\");\n\t\t\tparser.textNode = c;\n\t\t\tparser.state = S.TEXT;\n\t\t}\n\t}\n\tfunction charAt(chunk, i) {\n\t\tvar result = \"\";\n\t\tif (i < chunk.length) result = chunk.charAt(i);\n\t\treturn result;\n\t}\n\tfunction write(chunk) {\n\t\tvar parser = this;\n\t\tif (this.error) throw this.error;\n\t\tif (parser.closed) return error(parser, \"Cannot write after close. Assign an onready handler.\");\n\t\tif (chunk === null) return end(parser);\n\t\tif (typeof chunk === \"object\") chunk = chunk.toString();\n\t\tvar i = 0;\n\t\tvar c = \"\";\n\t\twhile (true) {\n\t\t\tc = charAt(chunk, i++);\n\t\t\tparser.c = c;\n\t\t\tif (!c) break;\n\t\t\tif (parser.trackPosition) {\n\t\t\t\tparser.position++;\n\t\t\t\tif (c === \"\\n\") {\n\t\t\t\t\tparser.line++;\n\t\t\t\t\tparser.column = 0;\n\t\t\t\t} else parser.column++;\n\t\t\t}\n\t\t\tswitch (parser.state) {\n\t\t\t\tcase S.BEGIN:\n\t\t\t\t\tparser.state = S.BEGIN_WHITESPACE;\n\t\t\t\t\tif (c === \"\") continue;\n\t\t\t\t\tbeginWhiteSpace(parser, c);\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.BEGIN_WHITESPACE:\n\t\t\t\t\tbeginWhiteSpace(parser, c);\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.TEXT:\n\t\t\t\t\tif (parser.sawRoot && !parser.closedRoot) {\n\t\t\t\t\t\tvar starti = i - 1;\n\t\t\t\t\t\twhile (c && c !== \"<\" && c !== \"&\") {\n\t\t\t\t\t\t\tc = charAt(chunk, i++);\n\t\t\t\t\t\t\tif (c && parser.trackPosition) {\n\t\t\t\t\t\t\t\tparser.position++;\n\t\t\t\t\t\t\t\tif (c === \"\\n\") {\n\t\t\t\t\t\t\t\t\tparser.line++;\n\t\t\t\t\t\t\t\t\tparser.column = 0;\n\t\t\t\t\t\t\t\t} else parser.column++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tparser.textNode += chunk.substring(starti, i - 1);\n\t\t\t\t\t}\n\t\t\t\t\tif (c === \"<\" && !(parser.sawRoot && parser.closedRoot && !parser.strict)) {\n\t\t\t\t\t\tparser.state = S.OPEN_WAKA;\n\t\t\t\t\t\tparser.startTagPosition = parser.position;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!isWhitespace(c) && (!parser.sawRoot || parser.closedRoot)) strictFail(parser, \"Text data outside of root node.\");\n\t\t\t\t\t\tif (c === \"&\") parser.state = S.TEXT_ENTITY;\n\t\t\t\t\t\telse parser.textNode += c;\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.SCRIPT:\n\t\t\t\t\tif (c === \"<\") parser.state = S.SCRIPT_ENDING;\n\t\t\t\t\telse parser.script += c;\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.SCRIPT_ENDING:\n\t\t\t\t\tif (c === \"/\") parser.state = S.CLOSE_TAG;\n\t\t\t\t\telse {\n\t\t\t\t\t\tparser.script += \"<\" + c;\n\t\t\t\t\t\tparser.state = S.SCRIPT;\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.OPEN_WAKA:\n\t\t\t\t\tif (c === \"!\") {\n\t\t\t\t\t\tparser.state = S.SGML_DECL;\n\t\t\t\t\t\tparser.sgmlDecl = \"\";\n\t\t\t\t\t} else if (isWhitespace(c)) {} else if (isMatch(nameStart, c)) {\n\t\t\t\t\t\tparser.state = S.OPEN_TAG;\n\t\t\t\t\t\tparser.tagName = c;\n\t\t\t\t\t} else if (c === \"/\") {\n\t\t\t\t\t\tparser.state = S.CLOSE_TAG;\n\t\t\t\t\t\tparser.tagName = \"\";\n\t\t\t\t\t} else if (c === \"?\") {\n\t\t\t\t\t\tparser.state = S.PROC_INST;\n\t\t\t\t\t\tparser.procInstName = parser.procInstBody = \"\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstrictFail(parser, \"Unencoded <\");\n\t\t\t\t\t\tif (parser.startTagPosition + 1 < parser.position) {\n\t\t\t\t\t\t\tvar pad = parser.position - parser.startTagPosition;\n\t\t\t\t\t\t\tc = new Array(pad).join(\" \") + c;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tparser.textNode += \"<\" + c;\n\t\t\t\t\t\tparser.state = S.TEXT;\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.SGML_DECL:\n\t\t\t\t\tif ((parser.sgmlDecl + c).toUpperCase() === CDATA) {\n\t\t\t\t\t\temitNode(parser, \"onopencdata\");\n\t\t\t\t\t\tparser.state = S.CDATA;\n\t\t\t\t\t\tparser.sgmlDecl = \"\";\n\t\t\t\t\t\tparser.cdata = \"\";\n\t\t\t\t\t} else if (parser.sgmlDecl + c === \"--\") {\n\t\t\t\t\t\tparser.state = S.COMMENT;\n\t\t\t\t\t\tparser.comment = \"\";\n\t\t\t\t\t\tparser.sgmlDecl = \"\";\n\t\t\t\t\t} else if ((parser.sgmlDecl + c).toUpperCase() === DOCTYPE) {\n\t\t\t\t\t\tparser.state = S.DOCTYPE;\n\t\t\t\t\t\tif (parser.doctype || parser.sawRoot) strictFail(parser, \"Inappropriately located doctype declaration\");\n\t\t\t\t\t\tparser.doctype = \"\";\n\t\t\t\t\t\tparser.sgmlDecl = \"\";\n\t\t\t\t\t} else if (c === \">\") {\n\t\t\t\t\t\temitNode(parser, \"onsgmldeclaration\", parser.sgmlDecl);\n\t\t\t\t\t\tparser.sgmlDecl = \"\";\n\t\t\t\t\t\tparser.state = S.TEXT;\n\t\t\t\t\t} else if (isQuote(c)) {\n\t\t\t\t\t\tparser.state = S.SGML_DECL_QUOTED;\n\t\t\t\t\t\tparser.sgmlDecl += c;\n\t\t\t\t\t} else parser.sgmlDecl += c;\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.SGML_DECL_QUOTED:\n\t\t\t\t\tif (c === parser.q) {\n\t\t\t\t\t\tparser.state = S.SGML_DECL;\n\t\t\t\t\t\tparser.q = \"\";\n\t\t\t\t\t}\n\t\t\t\t\tparser.sgmlDecl += c;\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.DOCTYPE:\n\t\t\t\t\tif (c === \">\") {\n\t\t\t\t\t\tparser.state = S.TEXT;\n\t\t\t\t\t\temitNode(parser, \"ondoctype\", parser.doctype);\n\t\t\t\t\t\tparser.doctype = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparser.doctype += c;\n\t\t\t\t\t\tif (c === \"[\") parser.state = S.DOCTYPE_DTD;\n\t\t\t\t\t\telse if (isQuote(c)) {\n\t\t\t\t\t\t\tparser.state = S.DOCTYPE_QUOTED;\n\t\t\t\t\t\t\tparser.q = c;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.DOCTYPE_QUOTED:\n\t\t\t\t\tparser.doctype += c;\n\t\t\t\t\tif (c === parser.q) {\n\t\t\t\t\t\tparser.q = \"\";\n\t\t\t\t\t\tparser.state = S.DOCTYPE;\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.DOCTYPE_DTD:\n\t\t\t\t\tparser.doctype += c;\n\t\t\t\t\tif (c === \"]\") parser.state = S.DOCTYPE;\n\t\t\t\t\telse if (isQuote(c)) {\n\t\t\t\t\t\tparser.state = S.DOCTYPE_DTD_QUOTED;\n\t\t\t\t\t\tparser.q = c;\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.DOCTYPE_DTD_QUOTED:\n\t\t\t\t\tparser.doctype += c;\n\t\t\t\t\tif (c === parser.q) {\n\t\t\t\t\t\tparser.state = S.DOCTYPE_DTD;\n\t\t\t\t\t\tparser.q = \"\";\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.COMMENT:\n\t\t\t\t\tif (c === \"-\") parser.state = S.COMMENT_ENDING;\n\t\t\t\t\telse parser.comment += c;\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.COMMENT_ENDING:\n\t\t\t\t\tif (c === \"-\") {\n\t\t\t\t\t\tparser.state = S.COMMENT_ENDED;\n\t\t\t\t\t\tparser.comment = textopts(parser.opt, parser.comment);\n\t\t\t\t\t\tif (parser.comment) emitNode(parser, \"oncomment\", parser.comment);\n\t\t\t\t\t\tparser.comment = \"\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparser.comment += \"-\" + c;\n\t\t\t\t\t\tparser.state = S.COMMENT;\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.COMMENT_ENDED:\n\t\t\t\t\tif (c !== \">\") {\n\t\t\t\t\t\tstrictFail(parser, \"Malformed comment\");\n\t\t\t\t\t\tparser.comment += \"--\" + c;\n\t\t\t\t\t\tparser.state = S.COMMENT;\n\t\t\t\t\t} else parser.state = S.TEXT;\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.CDATA:\n\t\t\t\t\tif (c === \"]\") parser.state = S.CDATA_ENDING;\n\t\t\t\t\telse parser.cdata += c;\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.CDATA_ENDING:\n\t\t\t\t\tif (c === \"]\") parser.state = S.CDATA_ENDING_2;\n\t\t\t\t\telse {\n\t\t\t\t\t\tparser.cdata += \"]\" + c;\n\t\t\t\t\t\tparser.state = S.CDATA;\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.CDATA_ENDING_2:\n\t\t\t\t\tif (c === \">\") {\n\t\t\t\t\t\tif (parser.cdata) emitNode(parser, \"oncdata\", parser.cdata);\n\t\t\t\t\t\temitNode(parser, \"onclosecdata\");\n\t\t\t\t\t\tparser.cdata = \"\";\n\t\t\t\t\t\tparser.state = S.TEXT;\n\t\t\t\t\t} else if (c === \"]\") parser.cdata += \"]\";\n\t\t\t\t\telse {\n\t\t\t\t\t\tparser.cdata += \"]]\" + c;\n\t\t\t\t\t\tparser.state = S.CDATA;\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.PROC_INST:\n\t\t\t\t\tif (c === \"?\") parser.state = S.PROC_INST_ENDING;\n\t\t\t\t\telse if (isWhitespace(c)) parser.state = S.PROC_INST_BODY;\n\t\t\t\t\telse parser.procInstName += c;\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.PROC_INST_BODY:\n\t\t\t\t\tif (!parser.procInstBody && isWhitespace(c)) continue;\n\t\t\t\t\telse if (c === \"?\") parser.state = S.PROC_INST_ENDING;\n\t\t\t\t\telse parser.procInstBody += c;\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.PROC_INST_ENDING:\n\t\t\t\t\tif (c === \">\") {\n\t\t\t\t\t\temitNode(parser, \"onprocessinginstruction\", {\n\t\t\t\t\t\t\tname: parser.procInstName,\n\t\t\t\t\t\t\tbody: parser.procInstBody\n\t\t\t\t\t\t});\n\t\t\t\t\t\tparser.procInstName = parser.procInstBody = \"\";\n\t\t\t\t\t\tparser.state = S.TEXT;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparser.procInstBody += \"?\" + c;\n\t\t\t\t\t\tparser.state = S.PROC_INST_BODY;\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.OPEN_TAG:\n\t\t\t\t\tif (isMatch(nameBody, c)) parser.tagName += c;\n\t\t\t\t\telse {\n\t\t\t\t\t\tnewTag(parser);\n\t\t\t\t\t\tif (c === \">\") openTag(parser);\n\t\t\t\t\t\telse if (c === \"/\") parser.state = S.OPEN_TAG_SLASH;\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tif (!isWhitespace(c)) strictFail(parser, \"Invalid character in tag name\");\n\t\t\t\t\t\t\tparser.state = S.ATTRIB;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.OPEN_TAG_SLASH:\n\t\t\t\t\tif (c === \">\") {\n\t\t\t\t\t\topenTag(parser, true);\n\t\t\t\t\t\tcloseTag(parser);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstrictFail(parser, \"Forward-slash in opening tag not followed by >\");\n\t\t\t\t\t\tparser.state = S.ATTRIB;\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.ATTRIB:\n\t\t\t\t\tif (isWhitespace(c)) continue;\n\t\t\t\t\telse if (c === \">\") openTag(parser);\n\t\t\t\t\telse if (c === \"/\") parser.state = S.OPEN_TAG_SLASH;\n\t\t\t\t\telse if (isMatch(nameStart, c)) {\n\t\t\t\t\t\tparser.attribName = c;\n\t\t\t\t\t\tparser.attribValue = \"\";\n\t\t\t\t\t\tparser.state = S.ATTRIB_NAME;\n\t\t\t\t\t} else strictFail(parser, \"Invalid attribute name\");\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.ATTRIB_NAME:\n\t\t\t\t\tif (c === \"=\") parser.state = S.ATTRIB_VALUE;\n\t\t\t\t\telse if (c === \">\") {\n\t\t\t\t\t\tstrictFail(parser, \"Attribute without value\");\n\t\t\t\t\t\tparser.attribValue = parser.attribName;\n\t\t\t\t\t\tattrib(parser);\n\t\t\t\t\t\topenTag(parser);\n\t\t\t\t\t} else if (isWhitespace(c)) parser.state = S.ATTRIB_NAME_SAW_WHITE;\n\t\t\t\t\telse if (isMatch(nameBody, c)) parser.attribName += c;\n\t\t\t\t\telse strictFail(parser, \"Invalid attribute name\");\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.ATTRIB_NAME_SAW_WHITE:\n\t\t\t\t\tif (c === \"=\") parser.state = S.ATTRIB_VALUE;\n\t\t\t\t\telse if (isWhitespace(c)) continue;\n\t\t\t\t\telse {\n\t\t\t\t\t\tstrictFail(parser, \"Attribute without value\");\n\t\t\t\t\t\tparser.tag.attributes[parser.attribName] = \"\";\n\t\t\t\t\t\tparser.attribValue = \"\";\n\t\t\t\t\t\temitNode(parser, \"onattribute\", {\n\t\t\t\t\t\t\tname: parser.attribName,\n\t\t\t\t\t\t\tvalue: \"\"\n\t\t\t\t\t\t});\n\t\t\t\t\t\tparser.attribName = \"\";\n\t\t\t\t\t\tif (c === \">\") openTag(parser);\n\t\t\t\t\t\telse if (isMatch(nameStart, c)) {\n\t\t\t\t\t\t\tparser.attribName = c;\n\t\t\t\t\t\t\tparser.state = S.ATTRIB_NAME;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstrictFail(parser, \"Invalid attribute name\");\n\t\t\t\t\t\t\tparser.state = S.ATTRIB;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.ATTRIB_VALUE:\n\t\t\t\t\tif (isWhitespace(c)) continue;\n\t\t\t\t\telse if (isQuote(c)) {\n\t\t\t\t\t\tparser.q = c;\n\t\t\t\t\t\tparser.state = S.ATTRIB_VALUE_QUOTED;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstrictFail(parser, \"Unquoted attribute value\");\n\t\t\t\t\t\tparser.state = S.ATTRIB_VALUE_UNQUOTED;\n\t\t\t\t\t\tparser.attribValue = c;\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.ATTRIB_VALUE_QUOTED:\n\t\t\t\t\tif (c !== parser.q) {\n\t\t\t\t\t\tif (c === \"&\") parser.state = S.ATTRIB_VALUE_ENTITY_Q;\n\t\t\t\t\t\telse parser.attribValue += c;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tattrib(parser);\n\t\t\t\t\tparser.q = \"\";\n\t\t\t\t\tparser.state = S.ATTRIB_VALUE_CLOSED;\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.ATTRIB_VALUE_CLOSED:\n\t\t\t\t\tif (isWhitespace(c)) parser.state = S.ATTRIB;\n\t\t\t\t\telse if (c === \">\") openTag(parser);\n\t\t\t\t\telse if (c === \"/\") parser.state = S.OPEN_TAG_SLASH;\n\t\t\t\t\telse if (isMatch(nameStart, c)) {\n\t\t\t\t\t\tstrictFail(parser, \"No whitespace between attributes\");\n\t\t\t\t\t\tparser.attribName = c;\n\t\t\t\t\t\tparser.attribValue = \"\";\n\t\t\t\t\t\tparser.state = S.ATTRIB_NAME;\n\t\t\t\t\t} else strictFail(parser, \"Invalid attribute name\");\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.ATTRIB_VALUE_UNQUOTED:\n\t\t\t\t\tif (!isAttribEnd(c)) {\n\t\t\t\t\t\tif (c === \"&\") parser.state = S.ATTRIB_VALUE_ENTITY_U;\n\t\t\t\t\t\telse parser.attribValue += c;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tattrib(parser);\n\t\t\t\t\tif (c === \">\") openTag(parser);\n\t\t\t\t\telse parser.state = S.ATTRIB;\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.CLOSE_TAG:\n\t\t\t\t\tif (!parser.tagName) if (isWhitespace(c)) continue;\n\t\t\t\t\telse if (notMatch(nameStart, c)) if (parser.script) {\n\t\t\t\t\t\tparser.script += \"</\" + c;\n\t\t\t\t\t\tparser.state = S.SCRIPT;\n\t\t\t\t\t} else strictFail(parser, \"Invalid tagname in closing tag.\");\n\t\t\t\t\telse parser.tagName = c;\n\t\t\t\t\telse if (c === \">\") closeTag(parser);\n\t\t\t\t\telse if (isMatch(nameBody, c)) parser.tagName += c;\n\t\t\t\t\telse if (parser.script) {\n\t\t\t\t\t\tparser.script += \"</\" + parser.tagName;\n\t\t\t\t\t\tparser.tagName = \"\";\n\t\t\t\t\t\tparser.state = S.SCRIPT;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!isWhitespace(c)) strictFail(parser, \"Invalid tagname in closing tag\");\n\t\t\t\t\t\tparser.state = S.CLOSE_TAG_SAW_WHITE;\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.CLOSE_TAG_SAW_WHITE:\n\t\t\t\t\tif (isWhitespace(c)) continue;\n\t\t\t\t\tif (c === \">\") closeTag(parser);\n\t\t\t\t\telse strictFail(parser, \"Invalid characters in closing tag\");\n\t\t\t\t\tcontinue;\n\t\t\t\tcase S.TEXT_ENTITY:\n\t\t\t\tcase S.ATTRIB_VALUE_ENTITY_Q:\n\t\t\t\tcase S.ATTRIB_VALUE_ENTITY_U:\n\t\t\t\t\tvar returnState;\n\t\t\t\t\tvar buffer;\n\t\t\t\t\tswitch (parser.state) {\n\t\t\t\t\t\tcase S.TEXT_ENTITY:\n\t\t\t\t\t\t\treturnState = S.TEXT;\n\t\t\t\t\t\t\tbuffer = \"textNode\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase S.ATTRIB_VALUE_ENTITY_Q:\n\t\t\t\t\t\t\treturnState = S.ATTRIB_VALUE_QUOTED;\n\t\t\t\t\t\t\tbuffer = \"attribValue\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase S.ATTRIB_VALUE_ENTITY_U:\n\t\t\t\t\t\t\treturnState = S.ATTRIB_VALUE_UNQUOTED;\n\t\t\t\t\t\t\tbuffer = \"attribValue\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (c === \";\") if (parser.opt.unparsedEntities) {\n\t\t\t\t\t\tvar parsedEntity = parseEntity(parser);\n\t\t\t\t\t\tparser.entity = \"\";\n\t\t\t\t\t\tparser.state = returnState;\n\t\t\t\t\t\tparser.write(parsedEntity);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparser[buffer] += parseEntity(parser);\n\t\t\t\t\t\tparser.entity = \"\";\n\t\t\t\t\t\tparser.state = returnState;\n\t\t\t\t\t}\n\t\t\t\t\telse if (isMatch(parser.entity.length ? entityBody : entityStart, c)) parser.entity += c;\n\t\t\t\t\telse {\n\t\t\t\t\t\tstrictFail(parser, \"Invalid character in entity name\");\n\t\t\t\t\t\tparser[buffer] += \"&\" + parser.entity + c;\n\t\t\t\t\t\tparser.entity = \"\";\n\t\t\t\t\t\tparser.state = returnState;\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\tdefault: throw new Error(parser, \"Unknown state: \" + parser.state);\n\t\t\t}\n\t\t}\n\t\tif (parser.position >= parser.bufferCheckPosition) checkBufferLength(parser);\n\t\treturn parser;\n\t}\n\t/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */\n\t/* istanbul ignore next */\n\tif (!String.fromCodePoint) (function() {\n\t\tvar stringFromCharCode = String.fromCharCode;\n\t\tvar floor = Math.floor;\n\t\tvar fromCodePoint = function() {\n\t\t\tvar MAX_SIZE = 16384;\n\t\t\tvar codeUnits = [];\n\t\t\tvar highSurrogate;\n\t\t\tvar lowSurrogate;\n\t\t\tvar index = -1;\n\t\t\tvar length = arguments.length;\n\t\t\tif (!length) return \"\";\n\t\t\tvar result = \"\";\n\t\t\twhile (++index < length) {\n\t\t\t\tvar codePoint = Number(arguments[index]);\n\t\t\t\tif (!isFinite(codePoint) || codePoint < 0 || codePoint > 1114111 || floor(codePoint) !== codePoint) throw RangeError(\"Invalid code point: \" + codePoint);\n\t\t\t\tif (codePoint <= 65535) codeUnits.push(codePoint);\n\t\t\t\telse {\n\t\t\t\t\tcodePoint -= 65536;\n\t\t\t\t\thighSurrogate = (codePoint >> 10) + 55296;\n\t\t\t\t\tlowSurrogate = codePoint % 1024 + 56320;\n\t\t\t\t\tcodeUnits.push(highSurrogate, lowSurrogate);\n\t\t\t\t}\n\t\t\t\tif (index + 1 === length || codeUnits.length > MAX_SIZE) {\n\t\t\t\t\tresult += stringFromCharCode.apply(null, codeUnits);\n\t\t\t\t\tcodeUnits.length = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t};\n\t\t/* istanbul ignore next */\n\t\tif (Object.defineProperty) Object.defineProperty(String, \"fromCodePoint\", {\n\t\t\tvalue: fromCodePoint,\n\t\t\tconfigurable: true,\n\t\t\twritable: true\n\t\t});\n\t\telse String.fromCodePoint = fromCodePoint;\n\t})();\n\treturn sax$1;\n};\nconst sax = initializeSax();\n\n//#endregion\n\n//# sourceMappingURL=sax.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvc2F4LWpzL3NheC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLE9BQU87QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLE9BQU87QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLHlEQUF5RCxlQUFlLG9CQUFvQjtBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLGlEQUFpRCxPQUFPO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sNkJBQTZCO0FBQ3BDO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBOztBQUVBO0FBQ2U7QUFDZiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3NheC1qcy9zYXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy9zYXgtanMvc2F4LnRzXG5jb25zdCBpbml0aWFsaXplU2F4ID0gZnVuY3Rpb24oKSB7XG5cdGNvbnN0IHNheCQxID0ge307XG5cdHNheCQxLnBhcnNlciA9IGZ1bmN0aW9uKHN0cmljdCwgb3B0KSB7XG5cdFx0cmV0dXJuIG5ldyBTQVhQYXJzZXIoc3RyaWN0LCBvcHQpO1xuXHR9O1xuXHRzYXgkMS5TQVhQYXJzZXIgPSBTQVhQYXJzZXI7XG5cdHNheCQxLlNBWFN0cmVhbSA9IFNBWFN0cmVhbTtcblx0c2F4JDEuY3JlYXRlU3RyZWFtID0gY3JlYXRlU3RyZWFtO1xuXHRzYXgkMS5NQVhfQlVGRkVSX0xFTkdUSCA9IDY0ICogMTAyNDtcblx0Y29uc3QgYnVmZmVycyA9IFtcblx0XHRcImNvbW1lbnRcIixcblx0XHRcInNnbWxEZWNsXCIsXG5cdFx0XCJ0ZXh0Tm9kZVwiLFxuXHRcdFwidGFnTmFtZVwiLFxuXHRcdFwiZG9jdHlwZVwiLFxuXHRcdFwicHJvY0luc3ROYW1lXCIsXG5cdFx0XCJwcm9jSW5zdEJvZHlcIixcblx0XHRcImVudGl0eVwiLFxuXHRcdFwiYXR0cmliTmFtZVwiLFxuXHRcdFwiYXR0cmliVmFsdWVcIixcblx0XHRcImNkYXRhXCIsXG5cdFx0XCJzY3JpcHRcIlxuXHRdO1xuXHRzYXgkMS5FVkVOVFMgPSBbXG5cdFx0XCJ0ZXh0XCIsXG5cdFx0XCJwcm9jZXNzaW5naW5zdHJ1Y3Rpb25cIixcblx0XHRcInNnbWxkZWNsYXJhdGlvblwiLFxuXHRcdFwiZG9jdHlwZVwiLFxuXHRcdFwiY29tbWVudFwiLFxuXHRcdFwib3BlbnRhZ3N0YXJ0XCIsXG5cdFx0XCJhdHRyaWJ1dGVcIixcblx0XHRcIm9wZW50YWdcIixcblx0XHRcImNsb3NldGFnXCIsXG5cdFx0XCJvcGVuY2RhdGFcIixcblx0XHRcImNkYXRhXCIsXG5cdFx0XCJjbG9zZWNkYXRhXCIsXG5cdFx0XCJlcnJvclwiLFxuXHRcdFwiZW5kXCIsXG5cdFx0XCJyZWFkeVwiLFxuXHRcdFwic2NyaXB0XCIsXG5cdFx0XCJvcGVubmFtZXNwYWNlXCIsXG5cdFx0XCJjbG9zZW5hbWVzcGFjZVwiXG5cdF07XG5cdGZ1bmN0aW9uIFNBWFBhcnNlcihzdHJpY3QsIG9wdCkge1xuXHRcdGlmICghKHRoaXMgaW5zdGFuY2VvZiBTQVhQYXJzZXIpKSByZXR1cm4gbmV3IFNBWFBhcnNlcihzdHJpY3QsIG9wdCk7XG5cdFx0dmFyIHBhcnNlciA9IHRoaXM7XG5cdFx0Y2xlYXJCdWZmZXJzKHBhcnNlcik7XG5cdFx0cGFyc2VyLnEgPSBwYXJzZXIuYyA9IFwiXCI7XG5cdFx0cGFyc2VyLmJ1ZmZlckNoZWNrUG9zaXRpb24gPSBzYXgkMS5NQVhfQlVGRkVSX0xFTkdUSDtcblx0XHRwYXJzZXIub3B0ID0gb3B0IHx8IHt9O1xuXHRcdHBhcnNlci5vcHQubG93ZXJjYXNlID0gcGFyc2VyLm9wdC5sb3dlcmNhc2UgfHwgcGFyc2VyLm9wdC5sb3dlcmNhc2V0YWdzO1xuXHRcdHBhcnNlci5sb29zZUNhc2UgPSBwYXJzZXIub3B0Lmxvd2VyY2FzZSA/IFwidG9Mb3dlckNhc2VcIiA6IFwidG9VcHBlckNhc2VcIjtcblx0XHRwYXJzZXIudGFncyA9IFtdO1xuXHRcdHBhcnNlci5jbG9zZWQgPSBwYXJzZXIuY2xvc2VkUm9vdCA9IHBhcnNlci5zYXdSb290ID0gZmFsc2U7XG5cdFx0cGFyc2VyLnRhZyA9IHBhcnNlci5lcnJvciA9IG51bGw7XG5cdFx0cGFyc2VyLnN0cmljdCA9ICEhc3RyaWN0O1xuXHRcdHBhcnNlci5ub3NjcmlwdCA9ICEhKHN0cmljdCB8fCBwYXJzZXIub3B0Lm5vc2NyaXB0KTtcblx0XHRwYXJzZXIuc3RhdGUgPSBTLkJFR0lOO1xuXHRcdHBhcnNlci5zdHJpY3RFbnRpdGllcyA9IHBhcnNlci5vcHQuc3RyaWN0RW50aXRpZXM7XG5cdFx0cGFyc2VyLkVOVElUSUVTID0gcGFyc2VyLnN0cmljdEVudGl0aWVzID8gT2JqZWN0LmNyZWF0ZShzYXgkMS5YTUxfRU5USVRJRVMpIDogT2JqZWN0LmNyZWF0ZShzYXgkMS5FTlRJVElFUyk7XG5cdFx0cGFyc2VyLmF0dHJpYkxpc3QgPSBbXTtcblx0XHRpZiAocGFyc2VyLm9wdC54bWxucykgcGFyc2VyLm5zID0gT2JqZWN0LmNyZWF0ZShyb290TlMpO1xuXHRcdHBhcnNlci50cmFja1Bvc2l0aW9uID0gcGFyc2VyLm9wdC5wb3NpdGlvbiAhPT0gZmFsc2U7XG5cdFx0aWYgKHBhcnNlci50cmFja1Bvc2l0aW9uKSBwYXJzZXIucG9zaXRpb24gPSBwYXJzZXIubGluZSA9IHBhcnNlci5jb2x1bW4gPSAwO1xuXHRcdGVtaXQocGFyc2VyLCBcIm9ucmVhZHlcIik7XG5cdH1cblx0aWYgKCFPYmplY3QuY3JlYXRlKSBPYmplY3QuY3JlYXRlID0gZnVuY3Rpb24obykge1xuXHRcdGZ1bmN0aW9uIEYoKSB7fVxuXHRcdEYucHJvdG90eXBlID0gbztcblx0XHR2YXIgbmV3ZiA9IG5ldyBGKCk7XG5cdFx0cmV0dXJuIG5ld2Y7XG5cdH07XG5cdGlmICghT2JqZWN0LmtleXMpIE9iamVjdC5rZXlzID0gZnVuY3Rpb24obykge1xuXHRcdHZhciBhID0gW107XG5cdFx0Zm9yICh2YXIgaSBpbiBvKSBpZiAoby5oYXNPd25Qcm9wZXJ0eShpKSkgYS5wdXNoKGkpO1xuXHRcdHJldHVybiBhO1xuXHR9O1xuXHRmdW5jdGlvbiBjaGVja0J1ZmZlckxlbmd0aChwYXJzZXIpIHtcblx0XHR2YXIgbWF4QWxsb3dlZCA9IE1hdGgubWF4KHNheCQxLk1BWF9CVUZGRVJfTEVOR1RILCAxMCk7XG5cdFx0dmFyIG1heEFjdHVhbCA9IDA7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIGwgPSBidWZmZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHRcdFx0dmFyIGxlbiA9IHBhcnNlcltidWZmZXJzW2ldXS5sZW5ndGg7XG5cdFx0XHRpZiAobGVuID4gbWF4QWxsb3dlZCkgc3dpdGNoIChidWZmZXJzW2ldKSB7XG5cdFx0XHRcdGNhc2UgXCJ0ZXh0Tm9kZVwiOlxuXHRcdFx0XHRcdGNsb3NlVGV4dChwYXJzZXIpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwiY2RhdGFcIjpcblx0XHRcdFx0XHRlbWl0Tm9kZShwYXJzZXIsIFwib25jZGF0YVwiLCBwYXJzZXIuY2RhdGEpO1xuXHRcdFx0XHRcdHBhcnNlci5jZGF0YSA9IFwiXCI7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJzY3JpcHRcIjpcblx0XHRcdFx0XHRlbWl0Tm9kZShwYXJzZXIsIFwib25zY3JpcHRcIiwgcGFyc2VyLnNjcmlwdCk7XG5cdFx0XHRcdFx0cGFyc2VyLnNjcmlwdCA9IFwiXCI7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6IGVycm9yKHBhcnNlciwgXCJNYXggYnVmZmVyIGxlbmd0aCBleGNlZWRlZDogXCIgKyBidWZmZXJzW2ldKTtcblx0XHRcdH1cblx0XHRcdG1heEFjdHVhbCA9IE1hdGgubWF4KG1heEFjdHVhbCwgbGVuKTtcblx0XHR9XG5cdFx0dmFyIG0gPSBzYXgkMS5NQVhfQlVGRkVSX0xFTkdUSCAtIG1heEFjdHVhbDtcblx0XHRwYXJzZXIuYnVmZmVyQ2hlY2tQb3NpdGlvbiA9IG0gKyBwYXJzZXIucG9zaXRpb247XG5cdH1cblx0ZnVuY3Rpb24gY2xlYXJCdWZmZXJzKHBhcnNlcikge1xuXHRcdGZvciAodmFyIGkgPSAwLCBsID0gYnVmZmVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHBhcnNlcltidWZmZXJzW2ldXSA9IFwiXCI7XG5cdH1cblx0ZnVuY3Rpb24gZmx1c2hCdWZmZXJzKHBhcnNlcikge1xuXHRcdGNsb3NlVGV4dChwYXJzZXIpO1xuXHRcdGlmIChwYXJzZXIuY2RhdGEgIT09IFwiXCIpIHtcblx0XHRcdGVtaXROb2RlKHBhcnNlciwgXCJvbmNkYXRhXCIsIHBhcnNlci5jZGF0YSk7XG5cdFx0XHRwYXJzZXIuY2RhdGEgPSBcIlwiO1xuXHRcdH1cblx0XHRpZiAocGFyc2VyLnNjcmlwdCAhPT0gXCJcIikge1xuXHRcdFx0ZW1pdE5vZGUocGFyc2VyLCBcIm9uc2NyaXB0XCIsIHBhcnNlci5zY3JpcHQpO1xuXHRcdFx0cGFyc2VyLnNjcmlwdCA9IFwiXCI7XG5cdFx0fVxuXHR9XG5cdFNBWFBhcnNlci5wcm90b3R5cGUgPSB7XG5cdFx0ZW5kOiBmdW5jdGlvbigpIHtcblx0XHRcdGVuZCh0aGlzKTtcblx0XHR9LFxuXHRcdHdyaXRlLFxuXHRcdHJlc3VtZTogZnVuY3Rpb24oKSB7XG5cdFx0XHR0aGlzLmVycm9yID0gbnVsbDtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0Y2xvc2U6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMud3JpdGUobnVsbCk7XG5cdFx0fSxcblx0XHRmbHVzaDogZnVuY3Rpb24oKSB7XG5cdFx0XHRmbHVzaEJ1ZmZlcnModGhpcyk7XG5cdFx0fVxuXHR9O1xuXHR2YXIgU3RyZWFtID0gUmVhZGFibGVTdHJlYW07XG5cdGlmICghU3RyZWFtKSBTdHJlYW0gPSBmdW5jdGlvbigpIHt9O1xuXHR2YXIgc3RyZWFtV3JhcHMgPSBzYXgkMS5FVkVOVFMuZmlsdGVyKGZ1bmN0aW9uKGV2KSB7XG5cdFx0cmV0dXJuIGV2ICE9PSBcImVycm9yXCIgJiYgZXYgIT09IFwiZW5kXCI7XG5cdH0pO1xuXHRmdW5jdGlvbiBjcmVhdGVTdHJlYW0oc3RyaWN0LCBvcHQpIHtcblx0XHRyZXR1cm4gbmV3IFNBWFN0cmVhbShzdHJpY3QsIG9wdCk7XG5cdH1cblx0ZnVuY3Rpb24gU0FYU3RyZWFtKHN0cmljdCwgb3B0KSB7XG5cdFx0aWYgKCEodGhpcyBpbnN0YW5jZW9mIFNBWFN0cmVhbSkpIHJldHVybiBuZXcgU0FYU3RyZWFtKHN0cmljdCwgb3B0KTtcblx0XHRTdHJlYW0uYXBwbHkodGhpcyk7XG5cdFx0dGhpcy5fcGFyc2VyID0gbmV3IFNBWFBhcnNlcihzdHJpY3QsIG9wdCk7XG5cdFx0dGhpcy53cml0YWJsZSA9IHRydWU7XG5cdFx0dGhpcy5yZWFkYWJsZSA9IHRydWU7XG5cdFx0dmFyIG1lID0gdGhpcztcblx0XHR0aGlzLl9wYXJzZXIub25lbmQgPSBmdW5jdGlvbigpIHtcblx0XHRcdG1lLmVtaXQoXCJlbmRcIik7XG5cdFx0fTtcblx0XHR0aGlzLl9wYXJzZXIub25lcnJvciA9IGZ1bmN0aW9uKGVyKSB7XG5cdFx0XHRtZS5lbWl0KFwiZXJyb3JcIiwgZXIpO1xuXHRcdFx0bWUuX3BhcnNlci5lcnJvciA9IG51bGw7XG5cdFx0fTtcblx0XHR0aGlzLl9kZWNvZGVyID0gbnVsbDtcblx0XHRzdHJlYW1XcmFwcy5mb3JFYWNoKGZ1bmN0aW9uKGV2KSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobWUsIFwib25cIiArIGV2LCB7XG5cdFx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG1lLl9wYXJzZXJbXCJvblwiICsgZXZdO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRzZXQ6IGZ1bmN0aW9uKGgpIHtcblx0XHRcdFx0XHRpZiAoIWgpIHtcblx0XHRcdFx0XHRcdG1lLnJlbW92ZUFsbExpc3RlbmVycyhldik7XG5cdFx0XHRcdFx0XHRtZS5fcGFyc2VyW1wib25cIiArIGV2XSA9IGg7XG5cdFx0XHRcdFx0XHRyZXR1cm4gaDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0bWUub24oZXYsIGgpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlXG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXHRTQVhTdHJlYW0ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdHJlYW0ucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBTQVhTdHJlYW0gfSB9KTtcblx0U0FYU3RyZWFtLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uKGRhdGEpIHtcblx0XHR0aGlzLl9wYXJzZXIud3JpdGUoZGF0YS50b1N0cmluZygpKTtcblx0XHR0aGlzLmVtaXQoXCJkYXRhXCIsIGRhdGEpO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9O1xuXHRTQVhTdHJlYW0ucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uKGNodW5rKSB7XG5cdFx0aWYgKGNodW5rICYmIGNodW5rLmxlbmd0aCkgdGhpcy53cml0ZShjaHVuayk7XG5cdFx0dGhpcy5fcGFyc2VyLmVuZCgpO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9O1xuXHRTQVhTdHJlYW0ucHJvdG90eXBlLm9uID0gZnVuY3Rpb24oZXYsIGhhbmRsZXIpIHtcblx0XHR2YXIgbWUgPSB0aGlzO1xuXHRcdGlmICghbWUuX3BhcnNlcltcIm9uXCIgKyBldl0gJiYgc3RyZWFtV3JhcHMuaW5kZXhPZihldikgIT09IC0xKSBtZS5fcGFyc2VyW1wib25cIiArIGV2XSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gW2FyZ3VtZW50c1swXV0gOiBBcnJheS5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuXHRcdFx0YXJncy5zcGxpY2UoMCwgMCwgZXYpO1xuXHRcdFx0bWUuZW1pdC5hcHBseShtZSwgYXJncyk7XG5cdFx0fTtcblx0XHRyZXR1cm4gU3RyZWFtLnByb3RvdHlwZS5vbi5jYWxsKG1lLCBldiwgaGFuZGxlcik7XG5cdH07XG5cdHZhciBDREFUQSA9IFwiW0NEQVRBW1wiO1xuXHR2YXIgRE9DVFlQRSA9IFwiRE9DVFlQRVwiO1xuXHR2YXIgWE1MX05BTUVTUEFDRSA9IFwiaHR0cDovL3d3dy53My5vcmcvWE1MLzE5OTgvbmFtZXNwYWNlXCI7XG5cdHZhciBYTUxOU19OQU1FU1BBQ0UgPSBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAveG1sbnMvXCI7XG5cdHZhciByb290TlMgPSB7XG5cdFx0eG1sOiBYTUxfTkFNRVNQQUNFLFxuXHRcdHhtbG5zOiBYTUxOU19OQU1FU1BBQ0Vcblx0fTtcblx0dmFyIG5hbWVTdGFydCA9IC9bOl9BLVphLXpcXHUwMEMwLVxcdTAwRDZcXHUwMEQ4LVxcdTAwRjZcXHUwMEY4LVxcdTAyRkZcXHUwMzcwLVxcdTAzN0RcXHUwMzdGLVxcdTFGRkZcXHUyMDBDLVxcdTIwMERcXHUyMDcwLVxcdTIxOEZcXHUyQzAwLVxcdTJGRUZcXHUzMDAxLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRkRdLztcblx0dmFyIG5hbWVCb2R5ID0gL1s6X0EtWmEtelxcdTAwQzAtXFx1MDBENlxcdTAwRDgtXFx1MDBGNlxcdTAwRjgtXFx1MDJGRlxcdTAzNzAtXFx1MDM3RFxcdTAzN0YtXFx1MUZGRlxcdTIwMEMtXFx1MjAwRFxcdTIwNzAtXFx1MjE4RlxcdTJDMDAtXFx1MkZFRlxcdTMwMDEtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZGRFxcdTAwQjdcXHUwMzAwLVxcdTAzNkZcXHUyMDNGLVxcdTIwNDAuXFxkLV0vO1xuXHR2YXIgZW50aXR5U3RhcnQgPSAvWyM6X0EtWmEtelxcdTAwQzAtXFx1MDBENlxcdTAwRDgtXFx1MDBGNlxcdTAwRjgtXFx1MDJGRlxcdTAzNzAtXFx1MDM3RFxcdTAzN0YtXFx1MUZGRlxcdTIwMEMtXFx1MjAwRFxcdTIwNzAtXFx1MjE4RlxcdTJDMDAtXFx1MkZFRlxcdTMwMDEtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZGRF0vO1xuXHR2YXIgZW50aXR5Qm9keSA9IC9bIzpfQS1aYS16XFx1MDBDMC1cXHUwMEQ2XFx1MDBEOC1cXHUwMEY2XFx1MDBGOC1cXHUwMkZGXFx1MDM3MC1cXHUwMzdEXFx1MDM3Ri1cXHUxRkZGXFx1MjAwQy1cXHUyMDBEXFx1MjA3MC1cXHUyMThGXFx1MkMwMC1cXHUyRkVGXFx1MzAwMS1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkZEXFx1MDBCN1xcdTAzMDAtXFx1MDM2RlxcdTIwM0YtXFx1MjA0MC5cXGQtXS87XG5cdGZ1bmN0aW9uIGlzV2hpdGVzcGFjZShjKSB7XG5cdFx0cmV0dXJuIGMgPT09IFwiIFwiIHx8IGMgPT09IFwiXFxuXCIgfHwgYyA9PT0gXCJcXHJcIiB8fCBjID09PSBcIlx0XCI7XG5cdH1cblx0ZnVuY3Rpb24gaXNRdW90ZShjKSB7XG5cdFx0cmV0dXJuIGMgPT09IFwiXFxcIlwiIHx8IGMgPT09IFwiJ1wiO1xuXHR9XG5cdGZ1bmN0aW9uIGlzQXR0cmliRW5kKGMpIHtcblx0XHRyZXR1cm4gYyA9PT0gXCI+XCIgfHwgaXNXaGl0ZXNwYWNlKGMpO1xuXHR9XG5cdGZ1bmN0aW9uIGlzTWF0Y2gocmVnZXgsIGMpIHtcblx0XHRyZXR1cm4gcmVnZXgudGVzdChjKTtcblx0fVxuXHRmdW5jdGlvbiBub3RNYXRjaChyZWdleCwgYykge1xuXHRcdHJldHVybiAhaXNNYXRjaChyZWdleCwgYyk7XG5cdH1cblx0dmFyIFMgPSAwO1xuXHRzYXgkMS5TVEFURSA9IHtcblx0XHRCRUdJTjogUysrLFxuXHRcdEJFR0lOX1dISVRFU1BBQ0U6IFMrKyxcblx0XHRURVhUOiBTKyssXG5cdFx0VEVYVF9FTlRJVFk6IFMrKyxcblx0XHRPUEVOX1dBS0E6IFMrKyxcblx0XHRTR01MX0RFQ0w6IFMrKyxcblx0XHRTR01MX0RFQ0xfUVVPVEVEOiBTKyssXG5cdFx0RE9DVFlQRTogUysrLFxuXHRcdERPQ1RZUEVfUVVPVEVEOiBTKyssXG5cdFx0RE9DVFlQRV9EVEQ6IFMrKyxcblx0XHRET0NUWVBFX0RURF9RVU9URUQ6IFMrKyxcblx0XHRDT01NRU5UX1NUQVJUSU5HOiBTKyssXG5cdFx0Q09NTUVOVDogUysrLFxuXHRcdENPTU1FTlRfRU5ESU5HOiBTKyssXG5cdFx0Q09NTUVOVF9FTkRFRDogUysrLFxuXHRcdENEQVRBOiBTKyssXG5cdFx0Q0RBVEFfRU5ESU5HOiBTKyssXG5cdFx0Q0RBVEFfRU5ESU5HXzI6IFMrKyxcblx0XHRQUk9DX0lOU1Q6IFMrKyxcblx0XHRQUk9DX0lOU1RfQk9EWTogUysrLFxuXHRcdFBST0NfSU5TVF9FTkRJTkc6IFMrKyxcblx0XHRPUEVOX1RBRzogUysrLFxuXHRcdE9QRU5fVEFHX1NMQVNIOiBTKyssXG5cdFx0QVRUUklCOiBTKyssXG5cdFx0QVRUUklCX05BTUU6IFMrKyxcblx0XHRBVFRSSUJfTkFNRV9TQVdfV0hJVEU6IFMrKyxcblx0XHRBVFRSSUJfVkFMVUU6IFMrKyxcblx0XHRBVFRSSUJfVkFMVUVfUVVPVEVEOiBTKyssXG5cdFx0QVRUUklCX1ZBTFVFX0NMT1NFRDogUysrLFxuXHRcdEFUVFJJQl9WQUxVRV9VTlFVT1RFRDogUysrLFxuXHRcdEFUVFJJQl9WQUxVRV9FTlRJVFlfUTogUysrLFxuXHRcdEFUVFJJQl9WQUxVRV9FTlRJVFlfVTogUysrLFxuXHRcdENMT1NFX1RBRzogUysrLFxuXHRcdENMT1NFX1RBR19TQVdfV0hJVEU6IFMrKyxcblx0XHRTQ1JJUFQ6IFMrKyxcblx0XHRTQ1JJUFRfRU5ESU5HOiBTKytcblx0fTtcblx0c2F4JDEuWE1MX0VOVElUSUVTID0ge1xuXHRcdGFtcDogXCImXCIsXG5cdFx0Z3Q6IFwiPlwiLFxuXHRcdGx0OiBcIjxcIixcblx0XHRxdW90OiBcIlxcXCJcIixcblx0XHRhcG9zOiBcIidcIlxuXHR9O1xuXHRzYXgkMS5FTlRJVElFUyA9IHtcblx0XHRhbXA6IFwiJlwiLFxuXHRcdGd0OiBcIj5cIixcblx0XHRsdDogXCI8XCIsXG5cdFx0cXVvdDogXCJcXFwiXCIsXG5cdFx0YXBvczogXCInXCIsXG5cdFx0QUVsaWc6IDE5OCxcblx0XHRBYWN1dGU6IDE5Myxcblx0XHRBY2lyYzogMTk0LFxuXHRcdEFncmF2ZTogMTkyLFxuXHRcdEFyaW5nOiAxOTcsXG5cdFx0QXRpbGRlOiAxOTUsXG5cdFx0QXVtbDogMTk2LFxuXHRcdENjZWRpbDogMTk5LFxuXHRcdEVUSDogMjA4LFxuXHRcdEVhY3V0ZTogMjAxLFxuXHRcdEVjaXJjOiAyMDIsXG5cdFx0RWdyYXZlOiAyMDAsXG5cdFx0RXVtbDogMjAzLFxuXHRcdElhY3V0ZTogMjA1LFxuXHRcdEljaXJjOiAyMDYsXG5cdFx0SWdyYXZlOiAyMDQsXG5cdFx0SXVtbDogMjA3LFxuXHRcdE50aWxkZTogMjA5LFxuXHRcdE9hY3V0ZTogMjExLFxuXHRcdE9jaXJjOiAyMTIsXG5cdFx0T2dyYXZlOiAyMTAsXG5cdFx0T3NsYXNoOiAyMTYsXG5cdFx0T3RpbGRlOiAyMTMsXG5cdFx0T3VtbDogMjE0LFxuXHRcdFRIT1JOOiAyMjIsXG5cdFx0VWFjdXRlOiAyMTgsXG5cdFx0VWNpcmM6IDIxOSxcblx0XHRVZ3JhdmU6IDIxNyxcblx0XHRVdW1sOiAyMjAsXG5cdFx0WWFjdXRlOiAyMjEsXG5cdFx0YWFjdXRlOiAyMjUsXG5cdFx0YWNpcmM6IDIyNixcblx0XHRhZWxpZzogMjMwLFxuXHRcdGFncmF2ZTogMjI0LFxuXHRcdGFyaW5nOiAyMjksXG5cdFx0YXRpbGRlOiAyMjcsXG5cdFx0YXVtbDogMjI4LFxuXHRcdGNjZWRpbDogMjMxLFxuXHRcdGVhY3V0ZTogMjMzLFxuXHRcdGVjaXJjOiAyMzQsXG5cdFx0ZWdyYXZlOiAyMzIsXG5cdFx0ZXRoOiAyNDAsXG5cdFx0ZXVtbDogMjM1LFxuXHRcdGlhY3V0ZTogMjM3LFxuXHRcdGljaXJjOiAyMzgsXG5cdFx0aWdyYXZlOiAyMzYsXG5cdFx0aXVtbDogMjM5LFxuXHRcdG50aWxkZTogMjQxLFxuXHRcdG9hY3V0ZTogMjQzLFxuXHRcdG9jaXJjOiAyNDQsXG5cdFx0b2dyYXZlOiAyNDIsXG5cdFx0b3NsYXNoOiAyNDgsXG5cdFx0b3RpbGRlOiAyNDUsXG5cdFx0b3VtbDogMjQ2LFxuXHRcdHN6bGlnOiAyMjMsXG5cdFx0dGhvcm46IDI1NCxcblx0XHR1YWN1dGU6IDI1MCxcblx0XHR1Y2lyYzogMjUxLFxuXHRcdHVncmF2ZTogMjQ5LFxuXHRcdHV1bWw6IDI1Mixcblx0XHR5YWN1dGU6IDI1Myxcblx0XHR5dW1sOiAyNTUsXG5cdFx0Y29weTogMTY5LFxuXHRcdHJlZzogMTc0LFxuXHRcdG5ic3A6IDE2MCxcblx0XHRpZXhjbDogMTYxLFxuXHRcdGNlbnQ6IDE2Mixcblx0XHRwb3VuZDogMTYzLFxuXHRcdGN1cnJlbjogMTY0LFxuXHRcdHllbjogMTY1LFxuXHRcdGJydmJhcjogMTY2LFxuXHRcdHNlY3Q6IDE2Nyxcblx0XHR1bWw6IDE2OCxcblx0XHRvcmRmOiAxNzAsXG5cdFx0bGFxdW86IDE3MSxcblx0XHRub3Q6IDE3Mixcblx0XHRzaHk6IDE3Myxcblx0XHRtYWNyOiAxNzUsXG5cdFx0ZGVnOiAxNzYsXG5cdFx0cGx1c21uOiAxNzcsXG5cdFx0c3VwMTogMTg1LFxuXHRcdHN1cDI6IDE3OCxcblx0XHRzdXAzOiAxNzksXG5cdFx0YWN1dGU6IDE4MCxcblx0XHRtaWNybzogMTgxLFxuXHRcdHBhcmE6IDE4Mixcblx0XHRtaWRkb3Q6IDE4Myxcblx0XHRjZWRpbDogMTg0LFxuXHRcdG9yZG06IDE4Nixcblx0XHRyYXF1bzogMTg3LFxuXHRcdGZyYWMxNDogMTg4LFxuXHRcdGZyYWMxMjogMTg5LFxuXHRcdGZyYWMzNDogMTkwLFxuXHRcdGlxdWVzdDogMTkxLFxuXHRcdHRpbWVzOiAyMTUsXG5cdFx0ZGl2aWRlOiAyNDcsXG5cdFx0T0VsaWc6IDMzOCxcblx0XHRvZWxpZzogMzM5LFxuXHRcdFNjYXJvbjogMzUyLFxuXHRcdHNjYXJvbjogMzUzLFxuXHRcdFl1bWw6IDM3Nixcblx0XHRmbm9mOiA0MDIsXG5cdFx0Y2lyYzogNzEwLFxuXHRcdHRpbGRlOiA3MzIsXG5cdFx0QWxwaGE6IDkxMyxcblx0XHRCZXRhOiA5MTQsXG5cdFx0R2FtbWE6IDkxNSxcblx0XHREZWx0YTogOTE2LFxuXHRcdEVwc2lsb246IDkxNyxcblx0XHRaZXRhOiA5MTgsXG5cdFx0RXRhOiA5MTksXG5cdFx0VGhldGE6IDkyMCxcblx0XHRJb3RhOiA5MjEsXG5cdFx0S2FwcGE6IDkyMixcblx0XHRMYW1iZGE6IDkyMyxcblx0XHRNdTogOTI0LFxuXHRcdE51OiA5MjUsXG5cdFx0WGk6IDkyNixcblx0XHRPbWljcm9uOiA5MjcsXG5cdFx0UGk6IDkyOCxcblx0XHRSaG86IDkyOSxcblx0XHRTaWdtYTogOTMxLFxuXHRcdFRhdTogOTMyLFxuXHRcdFVwc2lsb246IDkzMyxcblx0XHRQaGk6IDkzNCxcblx0XHRDaGk6IDkzNSxcblx0XHRQc2k6IDkzNixcblx0XHRPbWVnYTogOTM3LFxuXHRcdGFscGhhOiA5NDUsXG5cdFx0YmV0YTogOTQ2LFxuXHRcdGdhbW1hOiA5NDcsXG5cdFx0ZGVsdGE6IDk0OCxcblx0XHRlcHNpbG9uOiA5NDksXG5cdFx0emV0YTogOTUwLFxuXHRcdGV0YTogOTUxLFxuXHRcdHRoZXRhOiA5NTIsXG5cdFx0aW90YTogOTUzLFxuXHRcdGthcHBhOiA5NTQsXG5cdFx0bGFtYmRhOiA5NTUsXG5cdFx0bXU6IDk1Nixcblx0XHRudTogOTU3LFxuXHRcdHhpOiA5NTgsXG5cdFx0b21pY3JvbjogOTU5LFxuXHRcdHBpOiA5NjAsXG5cdFx0cmhvOiA5NjEsXG5cdFx0c2lnbWFmOiA5NjIsXG5cdFx0c2lnbWE6IDk2Myxcblx0XHR0YXU6IDk2NCxcblx0XHR1cHNpbG9uOiA5NjUsXG5cdFx0cGhpOiA5NjYsXG5cdFx0Y2hpOiA5NjcsXG5cdFx0cHNpOiA5NjgsXG5cdFx0b21lZ2E6IDk2OSxcblx0XHR0aGV0YXN5bTogOTc3LFxuXHRcdHVwc2loOiA5NzgsXG5cdFx0cGl2OiA5ODIsXG5cdFx0ZW5zcDogODE5NCxcblx0XHRlbXNwOiA4MTk1LFxuXHRcdHRoaW5zcDogODIwMSxcblx0XHR6d25qOiA4MjA0LFxuXHRcdHp3ajogODIwNSxcblx0XHRscm06IDgyMDYsXG5cdFx0cmxtOiA4MjA3LFxuXHRcdG5kYXNoOiA4MjExLFxuXHRcdG1kYXNoOiA4MjEyLFxuXHRcdGxzcXVvOiA4MjE2LFxuXHRcdHJzcXVvOiA4MjE3LFxuXHRcdHNicXVvOiA4MjE4LFxuXHRcdGxkcXVvOiA4MjIwLFxuXHRcdHJkcXVvOiA4MjIxLFxuXHRcdGJkcXVvOiA4MjIyLFxuXHRcdGRhZ2dlcjogODIyNCxcblx0XHREYWdnZXI6IDgyMjUsXG5cdFx0YnVsbDogODIyNixcblx0XHRoZWxsaXA6IDgyMzAsXG5cdFx0cGVybWlsOiA4MjQwLFxuXHRcdHByaW1lOiA4MjQyLFxuXHRcdFByaW1lOiA4MjQzLFxuXHRcdGxzYXF1bzogODI0OSxcblx0XHRyc2FxdW86IDgyNTAsXG5cdFx0b2xpbmU6IDgyNTQsXG5cdFx0ZnJhc2w6IDgyNjAsXG5cdFx0ZXVybzogODM2NCxcblx0XHRpbWFnZTogODQ2NSxcblx0XHR3ZWllcnA6IDg0NzIsXG5cdFx0cmVhbDogODQ3Nixcblx0XHR0cmFkZTogODQ4Mixcblx0XHRhbGVmc3ltOiA4NTAxLFxuXHRcdGxhcnI6IDg1OTIsXG5cdFx0dWFycjogODU5Myxcblx0XHRyYXJyOiA4NTk0LFxuXHRcdGRhcnI6IDg1OTUsXG5cdFx0aGFycjogODU5Nixcblx0XHRjcmFycjogODYyOSxcblx0XHRsQXJyOiA4NjU2LFxuXHRcdHVBcnI6IDg2NTcsXG5cdFx0ckFycjogODY1OCxcblx0XHRkQXJyOiA4NjU5LFxuXHRcdGhBcnI6IDg2NjAsXG5cdFx0Zm9yYWxsOiA4NzA0LFxuXHRcdHBhcnQ6IDg3MDYsXG5cdFx0ZXhpc3Q6IDg3MDcsXG5cdFx0ZW1wdHk6IDg3MDksXG5cdFx0bmFibGE6IDg3MTEsXG5cdFx0aXNpbjogODcxMixcblx0XHRub3RpbjogODcxMyxcblx0XHRuaTogODcxNSxcblx0XHRwcm9kOiA4NzE5LFxuXHRcdHN1bTogODcyMSxcblx0XHRtaW51czogODcyMixcblx0XHRsb3dhc3Q6IDg3MjcsXG5cdFx0cmFkaWM6IDg3MzAsXG5cdFx0cHJvcDogODczMyxcblx0XHRpbmZpbjogODczNCxcblx0XHRhbmc6IDg3MzYsXG5cdFx0YW5kOiA4NzQzLFxuXHRcdG9yOiA4NzQ0LFxuXHRcdGNhcDogODc0NSxcblx0XHRjdXA6IDg3NDYsXG5cdFx0aW50OiA4NzQ3LFxuXHRcdHRoZXJlNDogODc1Nixcblx0XHRzaW06IDg3NjQsXG5cdFx0Y29uZzogODc3Myxcblx0XHRhc3ltcDogODc3Nixcblx0XHRuZTogODgwMCxcblx0XHRlcXVpdjogODgwMSxcblx0XHRsZTogODgwNCxcblx0XHRnZTogODgwNSxcblx0XHRzdWI6IDg4MzQsXG5cdFx0c3VwOiA4ODM1LFxuXHRcdG5zdWI6IDg4MzYsXG5cdFx0c3ViZTogODgzOCxcblx0XHRzdXBlOiA4ODM5LFxuXHRcdG9wbHVzOiA4ODUzLFxuXHRcdG90aW1lczogODg1NSxcblx0XHRwZXJwOiA4ODY5LFxuXHRcdHNkb3Q6IDg5MDEsXG5cdFx0bGNlaWw6IDg5NjgsXG5cdFx0cmNlaWw6IDg5NjksXG5cdFx0bGZsb29yOiA4OTcwLFxuXHRcdHJmbG9vcjogODk3MSxcblx0XHRsYW5nOiA5MDAxLFxuXHRcdHJhbmc6IDkwMDIsXG5cdFx0bG96OiA5Njc0LFxuXHRcdHNwYWRlczogOTgyNCxcblx0XHRjbHViczogOTgyNyxcblx0XHRoZWFydHM6IDk4MjksXG5cdFx0ZGlhbXM6IDk4MzBcblx0fTtcblx0T2JqZWN0LmtleXMoc2F4JDEuRU5USVRJRVMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cdFx0dmFyIGUgPSBzYXgkMS5FTlRJVElFU1trZXldO1xuXHRcdHZhciBzJDEgPSB0eXBlb2YgZSA9PT0gXCJudW1iZXJcIiA/IFN0cmluZy5mcm9tQ2hhckNvZGUoZSkgOiBlO1xuXHRcdHNheCQxLkVOVElUSUVTW2tleV0gPSBzJDE7XG5cdH0pO1xuXHRmb3IgKHZhciBzIGluIHNheCQxLlNUQVRFKSBzYXgkMS5TVEFURVtzYXgkMS5TVEFURVtzXV0gPSBzO1xuXHRTID0gc2F4JDEuU1RBVEU7XG5cdGZ1bmN0aW9uIGVtaXQocGFyc2VyLCBldmVudCwgZGF0YSkge1xuXHRcdHBhcnNlcltldmVudF0gJiYgcGFyc2VyW2V2ZW50XShkYXRhKTtcblx0fVxuXHRmdW5jdGlvbiBlbWl0Tm9kZShwYXJzZXIsIG5vZGVUeXBlLCBkYXRhKSB7XG5cdFx0aWYgKHBhcnNlci50ZXh0Tm9kZSkgY2xvc2VUZXh0KHBhcnNlcik7XG5cdFx0ZW1pdChwYXJzZXIsIG5vZGVUeXBlLCBkYXRhKTtcblx0fVxuXHRmdW5jdGlvbiBjbG9zZVRleHQocGFyc2VyKSB7XG5cdFx0cGFyc2VyLnRleHROb2RlID0gdGV4dG9wdHMocGFyc2VyLm9wdCwgcGFyc2VyLnRleHROb2RlKTtcblx0XHRpZiAocGFyc2VyLnRleHROb2RlKSBlbWl0KHBhcnNlciwgXCJvbnRleHRcIiwgcGFyc2VyLnRleHROb2RlKTtcblx0XHRwYXJzZXIudGV4dE5vZGUgPSBcIlwiO1xuXHR9XG5cdGZ1bmN0aW9uIHRleHRvcHRzKG9wdCwgdGV4dCkge1xuXHRcdGlmIChvcHQudHJpbSkgdGV4dCA9IHRleHQudHJpbSgpO1xuXHRcdGlmIChvcHQubm9ybWFsaXplKSB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKTtcblx0XHRyZXR1cm4gdGV4dDtcblx0fVxuXHRmdW5jdGlvbiBlcnJvcihwYXJzZXIsIGVyKSB7XG5cdFx0Y2xvc2VUZXh0KHBhcnNlcik7XG5cdFx0aWYgKHBhcnNlci50cmFja1Bvc2l0aW9uKSBlciArPSBcIlxcbkxpbmU6IFwiICsgcGFyc2VyLmxpbmUgKyBcIlxcbkNvbHVtbjogXCIgKyBwYXJzZXIuY29sdW1uICsgXCJcXG5DaGFyOiBcIiArIHBhcnNlci5jO1xuXHRcdGVyID0gbmV3IEVycm9yKGVyKTtcblx0XHRwYXJzZXIuZXJyb3IgPSBlcjtcblx0XHRlbWl0KHBhcnNlciwgXCJvbmVycm9yXCIsIGVyKTtcblx0XHRyZXR1cm4gcGFyc2VyO1xuXHR9XG5cdGZ1bmN0aW9uIGVuZChwYXJzZXIpIHtcblx0XHRpZiAocGFyc2VyLnNhd1Jvb3QgJiYgIXBhcnNlci5jbG9zZWRSb290KSBzdHJpY3RGYWlsKHBhcnNlciwgXCJVbmNsb3NlZCByb290IHRhZ1wiKTtcblx0XHRpZiAocGFyc2VyLnN0YXRlICE9PSBTLkJFR0lOICYmIHBhcnNlci5zdGF0ZSAhPT0gUy5CRUdJTl9XSElURVNQQUNFICYmIHBhcnNlci5zdGF0ZSAhPT0gUy5URVhUKSBlcnJvcihwYXJzZXIsIFwiVW5leHBlY3RlZCBlbmRcIik7XG5cdFx0Y2xvc2VUZXh0KHBhcnNlcik7XG5cdFx0cGFyc2VyLmMgPSBcIlwiO1xuXHRcdHBhcnNlci5jbG9zZWQgPSB0cnVlO1xuXHRcdGVtaXQocGFyc2VyLCBcIm9uZW5kXCIpO1xuXHRcdFNBWFBhcnNlci5jYWxsKHBhcnNlciwgcGFyc2VyLnN0cmljdCwgcGFyc2VyLm9wdCk7XG5cdFx0cmV0dXJuIHBhcnNlcjtcblx0fVxuXHRmdW5jdGlvbiBzdHJpY3RGYWlsKHBhcnNlciwgbWVzc2FnZSkge1xuXHRcdGlmICh0eXBlb2YgcGFyc2VyICE9PSBcIm9iamVjdFwiIHx8ICEocGFyc2VyIGluc3RhbmNlb2YgU0FYUGFyc2VyKSkgdGhyb3cgbmV3IEVycm9yKFwiYmFkIGNhbGwgdG8gc3RyaWN0RmFpbFwiKTtcblx0XHRpZiAocGFyc2VyLnN0cmljdCkgZXJyb3IocGFyc2VyLCBtZXNzYWdlKTtcblx0fVxuXHRmdW5jdGlvbiBuZXdUYWcocGFyc2VyKSB7XG5cdFx0aWYgKCFwYXJzZXIuc3RyaWN0KSBwYXJzZXIudGFnTmFtZSA9IHBhcnNlci50YWdOYW1lW3BhcnNlci5sb29zZUNhc2VdKCk7XG5cdFx0dmFyIHBhcmVudCA9IHBhcnNlci50YWdzW3BhcnNlci50YWdzLmxlbmd0aCAtIDFdIHx8IHBhcnNlcjtcblx0XHR2YXIgdGFnID0gcGFyc2VyLnRhZyA9IHtcblx0XHRcdG5hbWU6IHBhcnNlci50YWdOYW1lLFxuXHRcdFx0YXR0cmlidXRlczoge31cblx0XHR9O1xuXHRcdGlmIChwYXJzZXIub3B0LnhtbG5zKSB0YWcubnMgPSBwYXJlbnQubnM7XG5cdFx0cGFyc2VyLmF0dHJpYkxpc3QubGVuZ3RoID0gMDtcblx0XHRlbWl0Tm9kZShwYXJzZXIsIFwib25vcGVudGFnc3RhcnRcIiwgdGFnKTtcblx0fVxuXHRmdW5jdGlvbiBxbmFtZShuYW1lLCBhdHRyaWJ1dGUpIHtcblx0XHR2YXIgaSA9IG5hbWUuaW5kZXhPZihcIjpcIik7XG5cdFx0dmFyIHF1YWxOYW1lID0gaSA8IDAgPyBbXCJcIiwgbmFtZV0gOiBuYW1lLnNwbGl0KFwiOlwiKTtcblx0XHR2YXIgcHJlZml4ID0gcXVhbE5hbWVbMF07XG5cdFx0dmFyIGxvY2FsID0gcXVhbE5hbWVbMV07XG5cdFx0aWYgKGF0dHJpYnV0ZSAmJiBuYW1lID09PSBcInhtbG5zXCIpIHtcblx0XHRcdHByZWZpeCA9IFwieG1sbnNcIjtcblx0XHRcdGxvY2FsID0gXCJcIjtcblx0XHR9XG5cdFx0cmV0dXJuIHtcblx0XHRcdHByZWZpeCxcblx0XHRcdGxvY2FsXG5cdFx0fTtcblx0fVxuXHRmdW5jdGlvbiBhdHRyaWIocGFyc2VyKSB7XG5cdFx0aWYgKCFwYXJzZXIuc3RyaWN0KSBwYXJzZXIuYXR0cmliTmFtZSA9IHBhcnNlci5hdHRyaWJOYW1lW3BhcnNlci5sb29zZUNhc2VdKCk7XG5cdFx0aWYgKHBhcnNlci5hdHRyaWJMaXN0LmluZGV4T2YocGFyc2VyLmF0dHJpYk5hbWUpICE9PSAtMSB8fCBwYXJzZXIudGFnLmF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkocGFyc2VyLmF0dHJpYk5hbWUpKSB7XG5cdFx0XHRwYXJzZXIuYXR0cmliTmFtZSA9IHBhcnNlci5hdHRyaWJWYWx1ZSA9IFwiXCI7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmIChwYXJzZXIub3B0LnhtbG5zKSB7XG5cdFx0XHR2YXIgcW4gPSBxbmFtZShwYXJzZXIuYXR0cmliTmFtZSwgdHJ1ZSk7XG5cdFx0XHR2YXIgcHJlZml4ID0gcW4ucHJlZml4O1xuXHRcdFx0dmFyIGxvY2FsID0gcW4ubG9jYWw7XG5cdFx0XHRpZiAocHJlZml4ID09PSBcInhtbG5zXCIpIGlmIChsb2NhbCA9PT0gXCJ4bWxcIiAmJiBwYXJzZXIuYXR0cmliVmFsdWUgIT09IFhNTF9OQU1FU1BBQ0UpIHN0cmljdEZhaWwocGFyc2VyLCBcInhtbDogcHJlZml4IG11c3QgYmUgYm91bmQgdG8gXCIgKyBYTUxfTkFNRVNQQUNFICsgXCJcXG5BY3R1YWw6IFwiICsgcGFyc2VyLmF0dHJpYlZhbHVlKTtcblx0XHRcdGVsc2UgaWYgKGxvY2FsID09PSBcInhtbG5zXCIgJiYgcGFyc2VyLmF0dHJpYlZhbHVlICE9PSBYTUxOU19OQU1FU1BBQ0UpIHN0cmljdEZhaWwocGFyc2VyLCBcInhtbG5zOiBwcmVmaXggbXVzdCBiZSBib3VuZCB0byBcIiArIFhNTE5TX05BTUVTUEFDRSArIFwiXFxuQWN0dWFsOiBcIiArIHBhcnNlci5hdHRyaWJWYWx1ZSk7XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0dmFyIHRhZyA9IHBhcnNlci50YWc7XG5cdFx0XHRcdHZhciBwYXJlbnQgPSBwYXJzZXIudGFnc1twYXJzZXIudGFncy5sZW5ndGggLSAxXSB8fCBwYXJzZXI7XG5cdFx0XHRcdGlmICh0YWcubnMgPT09IHBhcmVudC5ucykgdGFnLm5zID0gT2JqZWN0LmNyZWF0ZShwYXJlbnQubnMpO1xuXHRcdFx0XHR0YWcubnNbbG9jYWxdID0gcGFyc2VyLmF0dHJpYlZhbHVlO1xuXHRcdFx0fVxuXHRcdFx0cGFyc2VyLmF0dHJpYkxpc3QucHVzaChbcGFyc2VyLmF0dHJpYk5hbWUsIHBhcnNlci5hdHRyaWJWYWx1ZV0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRwYXJzZXIudGFnLmF0dHJpYnV0ZXNbcGFyc2VyLmF0dHJpYk5hbWVdID0gcGFyc2VyLmF0dHJpYlZhbHVlO1xuXHRcdFx0ZW1pdE5vZGUocGFyc2VyLCBcIm9uYXR0cmlidXRlXCIsIHtcblx0XHRcdFx0bmFtZTogcGFyc2VyLmF0dHJpYk5hbWUsXG5cdFx0XHRcdHZhbHVlOiBwYXJzZXIuYXR0cmliVmFsdWVcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRwYXJzZXIuYXR0cmliTmFtZSA9IHBhcnNlci5hdHRyaWJWYWx1ZSA9IFwiXCI7XG5cdH1cblx0ZnVuY3Rpb24gb3BlblRhZyhwYXJzZXIsIHNlbGZDbG9zaW5nKSB7XG5cdFx0aWYgKHBhcnNlci5vcHQueG1sbnMpIHtcblx0XHRcdHZhciB0YWcgPSBwYXJzZXIudGFnO1xuXHRcdFx0dmFyIHFuID0gcW5hbWUocGFyc2VyLnRhZ05hbWUpO1xuXHRcdFx0dGFnLnByZWZpeCA9IHFuLnByZWZpeDtcblx0XHRcdHRhZy5sb2NhbCA9IHFuLmxvY2FsO1xuXHRcdFx0dGFnLnVyaSA9IHRhZy5uc1txbi5wcmVmaXhdIHx8IFwiXCI7XG5cdFx0XHRpZiAodGFnLnByZWZpeCAmJiAhdGFnLnVyaSkge1xuXHRcdFx0XHRzdHJpY3RGYWlsKHBhcnNlciwgXCJVbmJvdW5kIG5hbWVzcGFjZSBwcmVmaXg6IFwiICsgSlNPTi5zdHJpbmdpZnkocGFyc2VyLnRhZ05hbWUpKTtcblx0XHRcdFx0dGFnLnVyaSA9IHFuLnByZWZpeDtcblx0XHRcdH1cblx0XHRcdHZhciBwYXJlbnQgPSBwYXJzZXIudGFnc1twYXJzZXIudGFncy5sZW5ndGggLSAxXSB8fCBwYXJzZXI7XG5cdFx0XHRpZiAodGFnLm5zICYmIHBhcmVudC5ucyAhPT0gdGFnLm5zKSBPYmplY3Qua2V5cyh0YWcubnMpLmZvckVhY2goZnVuY3Rpb24ocCkge1xuXHRcdFx0XHRlbWl0Tm9kZShwYXJzZXIsIFwib25vcGVubmFtZXNwYWNlXCIsIHtcblx0XHRcdFx0XHRwcmVmaXg6IHAsXG5cdFx0XHRcdFx0dXJpOiB0YWcubnNbcF1cblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHRcdGZvciAodmFyIGkgPSAwLCBsID0gcGFyc2VyLmF0dHJpYkxpc3QubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHRcdHZhciBudiA9IHBhcnNlci5hdHRyaWJMaXN0W2ldO1xuXHRcdFx0XHR2YXIgbmFtZSA9IG52WzBdO1xuXHRcdFx0XHR2YXIgdmFsdWUgPSBudlsxXTtcblx0XHRcdFx0dmFyIHF1YWxOYW1lID0gcW5hbWUobmFtZSwgdHJ1ZSk7XG5cdFx0XHRcdHZhciBwcmVmaXggPSBxdWFsTmFtZS5wcmVmaXg7XG5cdFx0XHRcdHZhciBsb2NhbCA9IHF1YWxOYW1lLmxvY2FsO1xuXHRcdFx0XHR2YXIgdXJpID0gcHJlZml4ID09PSBcIlwiID8gXCJcIiA6IHRhZy5uc1twcmVmaXhdIHx8IFwiXCI7XG5cdFx0XHRcdHZhciBhID0ge1xuXHRcdFx0XHRcdG5hbWUsXG5cdFx0XHRcdFx0dmFsdWUsXG5cdFx0XHRcdFx0cHJlZml4LFxuXHRcdFx0XHRcdGxvY2FsLFxuXHRcdFx0XHRcdHVyaVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRpZiAocHJlZml4ICYmIHByZWZpeCAhPT0gXCJ4bWxuc1wiICYmICF1cmkpIHtcblx0XHRcdFx0XHRzdHJpY3RGYWlsKHBhcnNlciwgXCJVbmJvdW5kIG5hbWVzcGFjZSBwcmVmaXg6IFwiICsgSlNPTi5zdHJpbmdpZnkocHJlZml4KSk7XG5cdFx0XHRcdFx0YS51cmkgPSBwcmVmaXg7XG5cdFx0XHRcdH1cblx0XHRcdFx0cGFyc2VyLnRhZy5hdHRyaWJ1dGVzW25hbWVdID0gYTtcblx0XHRcdFx0ZW1pdE5vZGUocGFyc2VyLCBcIm9uYXR0cmlidXRlXCIsIGEpO1xuXHRcdFx0fVxuXHRcdFx0cGFyc2VyLmF0dHJpYkxpc3QubGVuZ3RoID0gMDtcblx0XHR9XG5cdFx0cGFyc2VyLnRhZy5pc1NlbGZDbG9zaW5nID0gISFzZWxmQ2xvc2luZztcblx0XHRwYXJzZXIuc2F3Um9vdCA9IHRydWU7XG5cdFx0cGFyc2VyLnRhZ3MucHVzaChwYXJzZXIudGFnKTtcblx0XHRlbWl0Tm9kZShwYXJzZXIsIFwib25vcGVudGFnXCIsIHBhcnNlci50YWcpO1xuXHRcdGlmICghc2VsZkNsb3NpbmcpIHtcblx0XHRcdGlmICghcGFyc2VyLm5vc2NyaXB0ICYmIHBhcnNlci50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwic2NyaXB0XCIpIHBhcnNlci5zdGF0ZSA9IFMuU0NSSVBUO1xuXHRcdFx0ZWxzZSBwYXJzZXIuc3RhdGUgPSBTLlRFWFQ7XG5cdFx0XHRwYXJzZXIudGFnID0gbnVsbDtcblx0XHRcdHBhcnNlci50YWdOYW1lID0gXCJcIjtcblx0XHR9XG5cdFx0cGFyc2VyLmF0dHJpYk5hbWUgPSBwYXJzZXIuYXR0cmliVmFsdWUgPSBcIlwiO1xuXHRcdHBhcnNlci5hdHRyaWJMaXN0Lmxlbmd0aCA9IDA7XG5cdH1cblx0ZnVuY3Rpb24gY2xvc2VUYWcocGFyc2VyKSB7XG5cdFx0aWYgKCFwYXJzZXIudGFnTmFtZSkge1xuXHRcdFx0c3RyaWN0RmFpbChwYXJzZXIsIFwiV2VpcmQgZW1wdHkgY2xvc2UgdGFnLlwiKTtcblx0XHRcdHBhcnNlci50ZXh0Tm9kZSArPSBcIjwvPlwiO1xuXHRcdFx0cGFyc2VyLnN0YXRlID0gUy5URVhUO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZiAocGFyc2VyLnNjcmlwdCkge1xuXHRcdFx0aWYgKHBhcnNlci50YWdOYW1lICE9PSBcInNjcmlwdFwiKSB7XG5cdFx0XHRcdHBhcnNlci5zY3JpcHQgKz0gXCI8L1wiICsgcGFyc2VyLnRhZ05hbWUgKyBcIj5cIjtcblx0XHRcdFx0cGFyc2VyLnRhZ05hbWUgPSBcIlwiO1xuXHRcdFx0XHRwYXJzZXIuc3RhdGUgPSBTLlNDUklQVDtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0ZW1pdE5vZGUocGFyc2VyLCBcIm9uc2NyaXB0XCIsIHBhcnNlci5zY3JpcHQpO1xuXHRcdFx0cGFyc2VyLnNjcmlwdCA9IFwiXCI7XG5cdFx0fVxuXHRcdHZhciB0ID0gcGFyc2VyLnRhZ3MubGVuZ3RoO1xuXHRcdHZhciB0YWdOYW1lID0gcGFyc2VyLnRhZ05hbWU7XG5cdFx0aWYgKCFwYXJzZXIuc3RyaWN0KSB0YWdOYW1lID0gdGFnTmFtZVtwYXJzZXIubG9vc2VDYXNlXSgpO1xuXHRcdHZhciBjbG9zZVRvID0gdGFnTmFtZTtcblx0XHR3aGlsZSAodC0tKSB7XG5cdFx0XHR2YXIgY2xvc2UgPSBwYXJzZXIudGFnc1t0XTtcblx0XHRcdGlmIChjbG9zZS5uYW1lICE9PSBjbG9zZVRvKSBzdHJpY3RGYWlsKHBhcnNlciwgXCJVbmV4cGVjdGVkIGNsb3NlIHRhZ1wiKTtcblx0XHRcdGVsc2UgYnJlYWs7XG5cdFx0fVxuXHRcdGlmICh0IDwgMCkge1xuXHRcdFx0c3RyaWN0RmFpbChwYXJzZXIsIFwiVW5tYXRjaGVkIGNsb3NpbmcgdGFnOiBcIiArIHBhcnNlci50YWdOYW1lKTtcblx0XHRcdHBhcnNlci50ZXh0Tm9kZSArPSBcIjwvXCIgKyBwYXJzZXIudGFnTmFtZSArIFwiPlwiO1xuXHRcdFx0cGFyc2VyLnN0YXRlID0gUy5URVhUO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRwYXJzZXIudGFnTmFtZSA9IHRhZ05hbWU7XG5cdFx0dmFyIHMkMSA9IHBhcnNlci50YWdzLmxlbmd0aDtcblx0XHR3aGlsZSAocyQxLS0gPiB0KSB7XG5cdFx0XHR2YXIgdGFnID0gcGFyc2VyLnRhZyA9IHBhcnNlci50YWdzLnBvcCgpO1xuXHRcdFx0cGFyc2VyLnRhZ05hbWUgPSBwYXJzZXIudGFnLm5hbWU7XG5cdFx0XHRlbWl0Tm9kZShwYXJzZXIsIFwib25jbG9zZXRhZ1wiLCBwYXJzZXIudGFnTmFtZSk7XG5cdFx0XHR2YXIgeCA9IHt9O1xuXHRcdFx0Zm9yICh2YXIgaSBpbiB0YWcubnMpIHhbaV0gPSB0YWcubnNbaV07XG5cdFx0XHR2YXIgcGFyZW50ID0gcGFyc2VyLnRhZ3NbcGFyc2VyLnRhZ3MubGVuZ3RoIC0gMV0gfHwgcGFyc2VyO1xuXHRcdFx0aWYgKHBhcnNlci5vcHQueG1sbnMgJiYgdGFnLm5zICE9PSBwYXJlbnQubnMpIE9iamVjdC5rZXlzKHRhZy5ucykuZm9yRWFjaChmdW5jdGlvbihwKSB7XG5cdFx0XHRcdHZhciBuID0gdGFnLm5zW3BdO1xuXHRcdFx0XHRlbWl0Tm9kZShwYXJzZXIsIFwib25jbG9zZW5hbWVzcGFjZVwiLCB7XG5cdFx0XHRcdFx0cHJlZml4OiBwLFxuXHRcdFx0XHRcdHVyaTogblxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRpZiAodCA9PT0gMCkgcGFyc2VyLmNsb3NlZFJvb3QgPSB0cnVlO1xuXHRcdHBhcnNlci50YWdOYW1lID0gcGFyc2VyLmF0dHJpYlZhbHVlID0gcGFyc2VyLmF0dHJpYk5hbWUgPSBcIlwiO1xuXHRcdHBhcnNlci5hdHRyaWJMaXN0Lmxlbmd0aCA9IDA7XG5cdFx0cGFyc2VyLnN0YXRlID0gUy5URVhUO1xuXHR9XG5cdGZ1bmN0aW9uIHBhcnNlRW50aXR5KHBhcnNlcikge1xuXHRcdHZhciBlbnRpdHkgPSBwYXJzZXIuZW50aXR5O1xuXHRcdHZhciBlbnRpdHlMQyA9IGVudGl0eS50b0xvd2VyQ2FzZSgpO1xuXHRcdHZhciBudW07XG5cdFx0dmFyIG51bVN0ciA9IFwiXCI7XG5cdFx0aWYgKHBhcnNlci5FTlRJVElFU1tlbnRpdHldKSByZXR1cm4gcGFyc2VyLkVOVElUSUVTW2VudGl0eV07XG5cdFx0aWYgKHBhcnNlci5FTlRJVElFU1tlbnRpdHlMQ10pIHJldHVybiBwYXJzZXIuRU5USVRJRVNbZW50aXR5TENdO1xuXHRcdGVudGl0eSA9IGVudGl0eUxDO1xuXHRcdGlmIChlbnRpdHkuY2hhckF0KDApID09PSBcIiNcIikgaWYgKGVudGl0eS5jaGFyQXQoMSkgPT09IFwieFwiKSB7XG5cdFx0XHRlbnRpdHkgPSBlbnRpdHkuc2xpY2UoMik7XG5cdFx0XHRudW0gPSBwYXJzZUludChlbnRpdHksIDE2KTtcblx0XHRcdG51bVN0ciA9IG51bS50b1N0cmluZygxNik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGVudGl0eSA9IGVudGl0eS5zbGljZSgxKTtcblx0XHRcdG51bSA9IHBhcnNlSW50KGVudGl0eSwgMTApO1xuXHRcdFx0bnVtU3RyID0gbnVtLnRvU3RyaW5nKDEwKTtcblx0XHR9XG5cdFx0ZW50aXR5ID0gZW50aXR5LnJlcGxhY2UoL14wKy8sIFwiXCIpO1xuXHRcdGlmIChpc05hTihudW0pIHx8IG51bVN0ci50b0xvd2VyQ2FzZSgpICE9PSBlbnRpdHkpIHtcblx0XHRcdHN0cmljdEZhaWwocGFyc2VyLCBcIkludmFsaWQgY2hhcmFjdGVyIGVudGl0eVwiKTtcblx0XHRcdHJldHVybiBcIiZcIiArIHBhcnNlci5lbnRpdHkgKyBcIjtcIjtcblx0XHR9XG5cdFx0cmV0dXJuIFN0cmluZy5mcm9tQ29kZVBvaW50KG51bSk7XG5cdH1cblx0ZnVuY3Rpb24gYmVnaW5XaGl0ZVNwYWNlKHBhcnNlciwgYykge1xuXHRcdGlmIChjID09PSBcIjxcIikge1xuXHRcdFx0cGFyc2VyLnN0YXRlID0gUy5PUEVOX1dBS0E7XG5cdFx0XHRwYXJzZXIuc3RhcnRUYWdQb3NpdGlvbiA9IHBhcnNlci5wb3NpdGlvbjtcblx0XHR9IGVsc2UgaWYgKCFpc1doaXRlc3BhY2UoYykpIHtcblx0XHRcdHN0cmljdEZhaWwocGFyc2VyLCBcIk5vbi13aGl0ZXNwYWNlIGJlZm9yZSBmaXJzdCB0YWcuXCIpO1xuXHRcdFx0cGFyc2VyLnRleHROb2RlID0gYztcblx0XHRcdHBhcnNlci5zdGF0ZSA9IFMuVEVYVDtcblx0XHR9XG5cdH1cblx0ZnVuY3Rpb24gY2hhckF0KGNodW5rLCBpKSB7XG5cdFx0dmFyIHJlc3VsdCA9IFwiXCI7XG5cdFx0aWYgKGkgPCBjaHVuay5sZW5ndGgpIHJlc3VsdCA9IGNodW5rLmNoYXJBdChpKTtcblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9XG5cdGZ1bmN0aW9uIHdyaXRlKGNodW5rKSB7XG5cdFx0dmFyIHBhcnNlciA9IHRoaXM7XG5cdFx0aWYgKHRoaXMuZXJyb3IpIHRocm93IHRoaXMuZXJyb3I7XG5cdFx0aWYgKHBhcnNlci5jbG9zZWQpIHJldHVybiBlcnJvcihwYXJzZXIsIFwiQ2Fubm90IHdyaXRlIGFmdGVyIGNsb3NlLiBBc3NpZ24gYW4gb25yZWFkeSBoYW5kbGVyLlwiKTtcblx0XHRpZiAoY2h1bmsgPT09IG51bGwpIHJldHVybiBlbmQocGFyc2VyKTtcblx0XHRpZiAodHlwZW9mIGNodW5rID09PSBcIm9iamVjdFwiKSBjaHVuayA9IGNodW5rLnRvU3RyaW5nKCk7XG5cdFx0dmFyIGkgPSAwO1xuXHRcdHZhciBjID0gXCJcIjtcblx0XHR3aGlsZSAodHJ1ZSkge1xuXHRcdFx0YyA9IGNoYXJBdChjaHVuaywgaSsrKTtcblx0XHRcdHBhcnNlci5jID0gYztcblx0XHRcdGlmICghYykgYnJlYWs7XG5cdFx0XHRpZiAocGFyc2VyLnRyYWNrUG9zaXRpb24pIHtcblx0XHRcdFx0cGFyc2VyLnBvc2l0aW9uKys7XG5cdFx0XHRcdGlmIChjID09PSBcIlxcblwiKSB7XG5cdFx0XHRcdFx0cGFyc2VyLmxpbmUrKztcblx0XHRcdFx0XHRwYXJzZXIuY29sdW1uID0gMDtcblx0XHRcdFx0fSBlbHNlIHBhcnNlci5jb2x1bW4rKztcblx0XHRcdH1cblx0XHRcdHN3aXRjaCAocGFyc2VyLnN0YXRlKSB7XG5cdFx0XHRcdGNhc2UgUy5CRUdJTjpcblx0XHRcdFx0XHRwYXJzZXIuc3RhdGUgPSBTLkJFR0lOX1dISVRFU1BBQ0U7XG5cdFx0XHRcdFx0aWYgKGMgPT09IFwi77u/XCIpIGNvbnRpbnVlO1xuXHRcdFx0XHRcdGJlZ2luV2hpdGVTcGFjZShwYXJzZXIsIGMpO1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRjYXNlIFMuQkVHSU5fV0hJVEVTUEFDRTpcblx0XHRcdFx0XHRiZWdpbldoaXRlU3BhY2UocGFyc2VyLCBjKTtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0Y2FzZSBTLlRFWFQ6XG5cdFx0XHRcdFx0aWYgKHBhcnNlci5zYXdSb290ICYmICFwYXJzZXIuY2xvc2VkUm9vdCkge1xuXHRcdFx0XHRcdFx0dmFyIHN0YXJ0aSA9IGkgLSAxO1xuXHRcdFx0XHRcdFx0d2hpbGUgKGMgJiYgYyAhPT0gXCI8XCIgJiYgYyAhPT0gXCImXCIpIHtcblx0XHRcdFx0XHRcdFx0YyA9IGNoYXJBdChjaHVuaywgaSsrKTtcblx0XHRcdFx0XHRcdFx0aWYgKGMgJiYgcGFyc2VyLnRyYWNrUG9zaXRpb24pIHtcblx0XHRcdFx0XHRcdFx0XHRwYXJzZXIucG9zaXRpb24rKztcblx0XHRcdFx0XHRcdFx0XHRpZiAoYyA9PT0gXCJcXG5cIikge1xuXHRcdFx0XHRcdFx0XHRcdFx0cGFyc2VyLmxpbmUrKztcblx0XHRcdFx0XHRcdFx0XHRcdHBhcnNlci5jb2x1bW4gPSAwO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBwYXJzZXIuY29sdW1uKys7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHBhcnNlci50ZXh0Tm9kZSArPSBjaHVuay5zdWJzdHJpbmcoc3RhcnRpLCBpIC0gMSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChjID09PSBcIjxcIiAmJiAhKHBhcnNlci5zYXdSb290ICYmIHBhcnNlci5jbG9zZWRSb290ICYmICFwYXJzZXIuc3RyaWN0KSkge1xuXHRcdFx0XHRcdFx0cGFyc2VyLnN0YXRlID0gUy5PUEVOX1dBS0E7XG5cdFx0XHRcdFx0XHRwYXJzZXIuc3RhcnRUYWdQb3NpdGlvbiA9IHBhcnNlci5wb3NpdGlvbjtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0aWYgKCFpc1doaXRlc3BhY2UoYykgJiYgKCFwYXJzZXIuc2F3Um9vdCB8fCBwYXJzZXIuY2xvc2VkUm9vdCkpIHN0cmljdEZhaWwocGFyc2VyLCBcIlRleHQgZGF0YSBvdXRzaWRlIG9mIHJvb3Qgbm9kZS5cIik7XG5cdFx0XHRcdFx0XHRpZiAoYyA9PT0gXCImXCIpIHBhcnNlci5zdGF0ZSA9IFMuVEVYVF9FTlRJVFk7XG5cdFx0XHRcdFx0XHRlbHNlIHBhcnNlci50ZXh0Tm9kZSArPSBjO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0Y2FzZSBTLlNDUklQVDpcblx0XHRcdFx0XHRpZiAoYyA9PT0gXCI8XCIpIHBhcnNlci5zdGF0ZSA9IFMuU0NSSVBUX0VORElORztcblx0XHRcdFx0XHRlbHNlIHBhcnNlci5zY3JpcHQgKz0gYztcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0Y2FzZSBTLlNDUklQVF9FTkRJTkc6XG5cdFx0XHRcdFx0aWYgKGMgPT09IFwiL1wiKSBwYXJzZXIuc3RhdGUgPSBTLkNMT1NFX1RBRztcblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdHBhcnNlci5zY3JpcHQgKz0gXCI8XCIgKyBjO1xuXHRcdFx0XHRcdFx0cGFyc2VyLnN0YXRlID0gUy5TQ1JJUFQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRjYXNlIFMuT1BFTl9XQUtBOlxuXHRcdFx0XHRcdGlmIChjID09PSBcIiFcIikge1xuXHRcdFx0XHRcdFx0cGFyc2VyLnN0YXRlID0gUy5TR01MX0RFQ0w7XG5cdFx0XHRcdFx0XHRwYXJzZXIuc2dtbERlY2wgPSBcIlwiO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoaXNXaGl0ZXNwYWNlKGMpKSB7fSBlbHNlIGlmIChpc01hdGNoKG5hbWVTdGFydCwgYykpIHtcblx0XHRcdFx0XHRcdHBhcnNlci5zdGF0ZSA9IFMuT1BFTl9UQUc7XG5cdFx0XHRcdFx0XHRwYXJzZXIudGFnTmFtZSA9IGM7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChjID09PSBcIi9cIikge1xuXHRcdFx0XHRcdFx0cGFyc2VyLnN0YXRlID0gUy5DTE9TRV9UQUc7XG5cdFx0XHRcdFx0XHRwYXJzZXIudGFnTmFtZSA9IFwiXCI7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChjID09PSBcIj9cIikge1xuXHRcdFx0XHRcdFx0cGFyc2VyLnN0YXRlID0gUy5QUk9DX0lOU1Q7XG5cdFx0XHRcdFx0XHRwYXJzZXIucHJvY0luc3ROYW1lID0gcGFyc2VyLnByb2NJbnN0Qm9keSA9IFwiXCI7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHN0cmljdEZhaWwocGFyc2VyLCBcIlVuZW5jb2RlZCA8XCIpO1xuXHRcdFx0XHRcdFx0aWYgKHBhcnNlci5zdGFydFRhZ1Bvc2l0aW9uICsgMSA8IHBhcnNlci5wb3NpdGlvbikge1xuXHRcdFx0XHRcdFx0XHR2YXIgcGFkID0gcGFyc2VyLnBvc2l0aW9uIC0gcGFyc2VyLnN0YXJ0VGFnUG9zaXRpb247XG5cdFx0XHRcdFx0XHRcdGMgPSBuZXcgQXJyYXkocGFkKS5qb2luKFwiIFwiKSArIGM7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRwYXJzZXIudGV4dE5vZGUgKz0gXCI8XCIgKyBjO1xuXHRcdFx0XHRcdFx0cGFyc2VyLnN0YXRlID0gUy5URVhUO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0Y2FzZSBTLlNHTUxfREVDTDpcblx0XHRcdFx0XHRpZiAoKHBhcnNlci5zZ21sRGVjbCArIGMpLnRvVXBwZXJDYXNlKCkgPT09IENEQVRBKSB7XG5cdFx0XHRcdFx0XHRlbWl0Tm9kZShwYXJzZXIsIFwib25vcGVuY2RhdGFcIik7XG5cdFx0XHRcdFx0XHRwYXJzZXIuc3RhdGUgPSBTLkNEQVRBO1xuXHRcdFx0XHRcdFx0cGFyc2VyLnNnbWxEZWNsID0gXCJcIjtcblx0XHRcdFx0XHRcdHBhcnNlci5jZGF0YSA9IFwiXCI7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChwYXJzZXIuc2dtbERlY2wgKyBjID09PSBcIi0tXCIpIHtcblx0XHRcdFx0XHRcdHBhcnNlci5zdGF0ZSA9IFMuQ09NTUVOVDtcblx0XHRcdFx0XHRcdHBhcnNlci5jb21tZW50ID0gXCJcIjtcblx0XHRcdFx0XHRcdHBhcnNlci5zZ21sRGVjbCA9IFwiXCI7XG5cdFx0XHRcdFx0fSBlbHNlIGlmICgocGFyc2VyLnNnbWxEZWNsICsgYykudG9VcHBlckNhc2UoKSA9PT0gRE9DVFlQRSkge1xuXHRcdFx0XHRcdFx0cGFyc2VyLnN0YXRlID0gUy5ET0NUWVBFO1xuXHRcdFx0XHRcdFx0aWYgKHBhcnNlci5kb2N0eXBlIHx8IHBhcnNlci5zYXdSb290KSBzdHJpY3RGYWlsKHBhcnNlciwgXCJJbmFwcHJvcHJpYXRlbHkgbG9jYXRlZCBkb2N0eXBlIGRlY2xhcmF0aW9uXCIpO1xuXHRcdFx0XHRcdFx0cGFyc2VyLmRvY3R5cGUgPSBcIlwiO1xuXHRcdFx0XHRcdFx0cGFyc2VyLnNnbWxEZWNsID0gXCJcIjtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGMgPT09IFwiPlwiKSB7XG5cdFx0XHRcdFx0XHRlbWl0Tm9kZShwYXJzZXIsIFwib25zZ21sZGVjbGFyYXRpb25cIiwgcGFyc2VyLnNnbWxEZWNsKTtcblx0XHRcdFx0XHRcdHBhcnNlci5zZ21sRGVjbCA9IFwiXCI7XG5cdFx0XHRcdFx0XHRwYXJzZXIuc3RhdGUgPSBTLlRFWFQ7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChpc1F1b3RlKGMpKSB7XG5cdFx0XHRcdFx0XHRwYXJzZXIuc3RhdGUgPSBTLlNHTUxfREVDTF9RVU9URUQ7XG5cdFx0XHRcdFx0XHRwYXJzZXIuc2dtbERlY2wgKz0gYztcblx0XHRcdFx0XHR9IGVsc2UgcGFyc2VyLnNnbWxEZWNsICs9IGM7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdGNhc2UgUy5TR01MX0RFQ0xfUVVPVEVEOlxuXHRcdFx0XHRcdGlmIChjID09PSBwYXJzZXIucSkge1xuXHRcdFx0XHRcdFx0cGFyc2VyLnN0YXRlID0gUy5TR01MX0RFQ0w7XG5cdFx0XHRcdFx0XHRwYXJzZXIucSA9IFwiXCI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHBhcnNlci5zZ21sRGVjbCArPSBjO1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRjYXNlIFMuRE9DVFlQRTpcblx0XHRcdFx0XHRpZiAoYyA9PT0gXCI+XCIpIHtcblx0XHRcdFx0XHRcdHBhcnNlci5zdGF0ZSA9IFMuVEVYVDtcblx0XHRcdFx0XHRcdGVtaXROb2RlKHBhcnNlciwgXCJvbmRvY3R5cGVcIiwgcGFyc2VyLmRvY3R5cGUpO1xuXHRcdFx0XHRcdFx0cGFyc2VyLmRvY3R5cGUgPSB0cnVlO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRwYXJzZXIuZG9jdHlwZSArPSBjO1xuXHRcdFx0XHRcdFx0aWYgKGMgPT09IFwiW1wiKSBwYXJzZXIuc3RhdGUgPSBTLkRPQ1RZUEVfRFREO1xuXHRcdFx0XHRcdFx0ZWxzZSBpZiAoaXNRdW90ZShjKSkge1xuXHRcdFx0XHRcdFx0XHRwYXJzZXIuc3RhdGUgPSBTLkRPQ1RZUEVfUVVPVEVEO1xuXHRcdFx0XHRcdFx0XHRwYXJzZXIucSA9IGM7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRjYXNlIFMuRE9DVFlQRV9RVU9URUQ6XG5cdFx0XHRcdFx0cGFyc2VyLmRvY3R5cGUgKz0gYztcblx0XHRcdFx0XHRpZiAoYyA9PT0gcGFyc2VyLnEpIHtcblx0XHRcdFx0XHRcdHBhcnNlci5xID0gXCJcIjtcblx0XHRcdFx0XHRcdHBhcnNlci5zdGF0ZSA9IFMuRE9DVFlQRTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdGNhc2UgUy5ET0NUWVBFX0RURDpcblx0XHRcdFx0XHRwYXJzZXIuZG9jdHlwZSArPSBjO1xuXHRcdFx0XHRcdGlmIChjID09PSBcIl1cIikgcGFyc2VyLnN0YXRlID0gUy5ET0NUWVBFO1xuXHRcdFx0XHRcdGVsc2UgaWYgKGlzUXVvdGUoYykpIHtcblx0XHRcdFx0XHRcdHBhcnNlci5zdGF0ZSA9IFMuRE9DVFlQRV9EVERfUVVPVEVEO1xuXHRcdFx0XHRcdFx0cGFyc2VyLnEgPSBjO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0Y2FzZSBTLkRPQ1RZUEVfRFREX1FVT1RFRDpcblx0XHRcdFx0XHRwYXJzZXIuZG9jdHlwZSArPSBjO1xuXHRcdFx0XHRcdGlmIChjID09PSBwYXJzZXIucSkge1xuXHRcdFx0XHRcdFx0cGFyc2VyLnN0YXRlID0gUy5ET0NUWVBFX0RURDtcblx0XHRcdFx0XHRcdHBhcnNlci5xID0gXCJcIjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdGNhc2UgUy5DT01NRU5UOlxuXHRcdFx0XHRcdGlmIChjID09PSBcIi1cIikgcGFyc2VyLnN0YXRlID0gUy5DT01NRU5UX0VORElORztcblx0XHRcdFx0XHRlbHNlIHBhcnNlci5jb21tZW50ICs9IGM7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdGNhc2UgUy5DT01NRU5UX0VORElORzpcblx0XHRcdFx0XHRpZiAoYyA9PT0gXCItXCIpIHtcblx0XHRcdFx0XHRcdHBhcnNlci5zdGF0ZSA9IFMuQ09NTUVOVF9FTkRFRDtcblx0XHRcdFx0XHRcdHBhcnNlci5jb21tZW50ID0gdGV4dG9wdHMocGFyc2VyLm9wdCwgcGFyc2VyLmNvbW1lbnQpO1xuXHRcdFx0XHRcdFx0aWYgKHBhcnNlci5jb21tZW50KSBlbWl0Tm9kZShwYXJzZXIsIFwib25jb21tZW50XCIsIHBhcnNlci5jb21tZW50KTtcblx0XHRcdFx0XHRcdHBhcnNlci5jb21tZW50ID0gXCJcIjtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cGFyc2VyLmNvbW1lbnQgKz0gXCItXCIgKyBjO1xuXHRcdFx0XHRcdFx0cGFyc2VyLnN0YXRlID0gUy5DT01NRU5UO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0Y2FzZSBTLkNPTU1FTlRfRU5ERUQ6XG5cdFx0XHRcdFx0aWYgKGMgIT09IFwiPlwiKSB7XG5cdFx0XHRcdFx0XHRzdHJpY3RGYWlsKHBhcnNlciwgXCJNYWxmb3JtZWQgY29tbWVudFwiKTtcblx0XHRcdFx0XHRcdHBhcnNlci5jb21tZW50ICs9IFwiLS1cIiArIGM7XG5cdFx0XHRcdFx0XHRwYXJzZXIuc3RhdGUgPSBTLkNPTU1FTlQ7XG5cdFx0XHRcdFx0fSBlbHNlIHBhcnNlci5zdGF0ZSA9IFMuVEVYVDtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0Y2FzZSBTLkNEQVRBOlxuXHRcdFx0XHRcdGlmIChjID09PSBcIl1cIikgcGFyc2VyLnN0YXRlID0gUy5DREFUQV9FTkRJTkc7XG5cdFx0XHRcdFx0ZWxzZSBwYXJzZXIuY2RhdGEgKz0gYztcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0Y2FzZSBTLkNEQVRBX0VORElORzpcblx0XHRcdFx0XHRpZiAoYyA9PT0gXCJdXCIpIHBhcnNlci5zdGF0ZSA9IFMuQ0RBVEFfRU5ESU5HXzI7XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRwYXJzZXIuY2RhdGEgKz0gXCJdXCIgKyBjO1xuXHRcdFx0XHRcdFx0cGFyc2VyLnN0YXRlID0gUy5DREFUQTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdGNhc2UgUy5DREFUQV9FTkRJTkdfMjpcblx0XHRcdFx0XHRpZiAoYyA9PT0gXCI+XCIpIHtcblx0XHRcdFx0XHRcdGlmIChwYXJzZXIuY2RhdGEpIGVtaXROb2RlKHBhcnNlciwgXCJvbmNkYXRhXCIsIHBhcnNlci5jZGF0YSk7XG5cdFx0XHRcdFx0XHRlbWl0Tm9kZShwYXJzZXIsIFwib25jbG9zZWNkYXRhXCIpO1xuXHRcdFx0XHRcdFx0cGFyc2VyLmNkYXRhID0gXCJcIjtcblx0XHRcdFx0XHRcdHBhcnNlci5zdGF0ZSA9IFMuVEVYVDtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGMgPT09IFwiXVwiKSBwYXJzZXIuY2RhdGEgKz0gXCJdXCI7XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRwYXJzZXIuY2RhdGEgKz0gXCJdXVwiICsgYztcblx0XHRcdFx0XHRcdHBhcnNlci5zdGF0ZSA9IFMuQ0RBVEE7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRjYXNlIFMuUFJPQ19JTlNUOlxuXHRcdFx0XHRcdGlmIChjID09PSBcIj9cIikgcGFyc2VyLnN0YXRlID0gUy5QUk9DX0lOU1RfRU5ESU5HO1xuXHRcdFx0XHRcdGVsc2UgaWYgKGlzV2hpdGVzcGFjZShjKSkgcGFyc2VyLnN0YXRlID0gUy5QUk9DX0lOU1RfQk9EWTtcblx0XHRcdFx0XHRlbHNlIHBhcnNlci5wcm9jSW5zdE5hbWUgKz0gYztcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0Y2FzZSBTLlBST0NfSU5TVF9CT0RZOlxuXHRcdFx0XHRcdGlmICghcGFyc2VyLnByb2NJbnN0Qm9keSAmJiBpc1doaXRlc3BhY2UoYykpIGNvbnRpbnVlO1xuXHRcdFx0XHRcdGVsc2UgaWYgKGMgPT09IFwiP1wiKSBwYXJzZXIuc3RhdGUgPSBTLlBST0NfSU5TVF9FTkRJTkc7XG5cdFx0XHRcdFx0ZWxzZSBwYXJzZXIucHJvY0luc3RCb2R5ICs9IGM7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdGNhc2UgUy5QUk9DX0lOU1RfRU5ESU5HOlxuXHRcdFx0XHRcdGlmIChjID09PSBcIj5cIikge1xuXHRcdFx0XHRcdFx0ZW1pdE5vZGUocGFyc2VyLCBcIm9ucHJvY2Vzc2luZ2luc3RydWN0aW9uXCIsIHtcblx0XHRcdFx0XHRcdFx0bmFtZTogcGFyc2VyLnByb2NJbnN0TmFtZSxcblx0XHRcdFx0XHRcdFx0Ym9keTogcGFyc2VyLnByb2NJbnN0Qm9keVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRwYXJzZXIucHJvY0luc3ROYW1lID0gcGFyc2VyLnByb2NJbnN0Qm9keSA9IFwiXCI7XG5cdFx0XHRcdFx0XHRwYXJzZXIuc3RhdGUgPSBTLlRFWFQ7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHBhcnNlci5wcm9jSW5zdEJvZHkgKz0gXCI/XCIgKyBjO1xuXHRcdFx0XHRcdFx0cGFyc2VyLnN0YXRlID0gUy5QUk9DX0lOU1RfQk9EWTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdGNhc2UgUy5PUEVOX1RBRzpcblx0XHRcdFx0XHRpZiAoaXNNYXRjaChuYW1lQm9keSwgYykpIHBhcnNlci50YWdOYW1lICs9IGM7XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRuZXdUYWcocGFyc2VyKTtcblx0XHRcdFx0XHRcdGlmIChjID09PSBcIj5cIikgb3BlblRhZyhwYXJzZXIpO1xuXHRcdFx0XHRcdFx0ZWxzZSBpZiAoYyA9PT0gXCIvXCIpIHBhcnNlci5zdGF0ZSA9IFMuT1BFTl9UQUdfU0xBU0g7XG5cdFx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdFx0aWYgKCFpc1doaXRlc3BhY2UoYykpIHN0cmljdEZhaWwocGFyc2VyLCBcIkludmFsaWQgY2hhcmFjdGVyIGluIHRhZyBuYW1lXCIpO1xuXHRcdFx0XHRcdFx0XHRwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdGNhc2UgUy5PUEVOX1RBR19TTEFTSDpcblx0XHRcdFx0XHRpZiAoYyA9PT0gXCI+XCIpIHtcblx0XHRcdFx0XHRcdG9wZW5UYWcocGFyc2VyLCB0cnVlKTtcblx0XHRcdFx0XHRcdGNsb3NlVGFnKHBhcnNlcik7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHN0cmljdEZhaWwocGFyc2VyLCBcIkZvcndhcmQtc2xhc2ggaW4gb3BlbmluZyB0YWcgbm90IGZvbGxvd2VkIGJ5ID5cIik7XG5cdFx0XHRcdFx0XHRwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdGNhc2UgUy5BVFRSSUI6XG5cdFx0XHRcdFx0aWYgKGlzV2hpdGVzcGFjZShjKSkgY29udGludWU7XG5cdFx0XHRcdFx0ZWxzZSBpZiAoYyA9PT0gXCI+XCIpIG9wZW5UYWcocGFyc2VyKTtcblx0XHRcdFx0XHRlbHNlIGlmIChjID09PSBcIi9cIikgcGFyc2VyLnN0YXRlID0gUy5PUEVOX1RBR19TTEFTSDtcblx0XHRcdFx0XHRlbHNlIGlmIChpc01hdGNoKG5hbWVTdGFydCwgYykpIHtcblx0XHRcdFx0XHRcdHBhcnNlci5hdHRyaWJOYW1lID0gYztcblx0XHRcdFx0XHRcdHBhcnNlci5hdHRyaWJWYWx1ZSA9IFwiXCI7XG5cdFx0XHRcdFx0XHRwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9OQU1FO1xuXHRcdFx0XHRcdH0gZWxzZSBzdHJpY3RGYWlsKHBhcnNlciwgXCJJbnZhbGlkIGF0dHJpYnV0ZSBuYW1lXCIpO1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRjYXNlIFMuQVRUUklCX05BTUU6XG5cdFx0XHRcdFx0aWYgKGMgPT09IFwiPVwiKSBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9WQUxVRTtcblx0XHRcdFx0XHRlbHNlIGlmIChjID09PSBcIj5cIikge1xuXHRcdFx0XHRcdFx0c3RyaWN0RmFpbChwYXJzZXIsIFwiQXR0cmlidXRlIHdpdGhvdXQgdmFsdWVcIik7XG5cdFx0XHRcdFx0XHRwYXJzZXIuYXR0cmliVmFsdWUgPSBwYXJzZXIuYXR0cmliTmFtZTtcblx0XHRcdFx0XHRcdGF0dHJpYihwYXJzZXIpO1xuXHRcdFx0XHRcdFx0b3BlblRhZyhwYXJzZXIpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoaXNXaGl0ZXNwYWNlKGMpKSBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9OQU1FX1NBV19XSElURTtcblx0XHRcdFx0XHRlbHNlIGlmIChpc01hdGNoKG5hbWVCb2R5LCBjKSkgcGFyc2VyLmF0dHJpYk5hbWUgKz0gYztcblx0XHRcdFx0XHRlbHNlIHN0cmljdEZhaWwocGFyc2VyLCBcIkludmFsaWQgYXR0cmlidXRlIG5hbWVcIik7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdGNhc2UgUy5BVFRSSUJfTkFNRV9TQVdfV0hJVEU6XG5cdFx0XHRcdFx0aWYgKGMgPT09IFwiPVwiKSBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9WQUxVRTtcblx0XHRcdFx0XHRlbHNlIGlmIChpc1doaXRlc3BhY2UoYykpIGNvbnRpbnVlO1xuXHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0c3RyaWN0RmFpbChwYXJzZXIsIFwiQXR0cmlidXRlIHdpdGhvdXQgdmFsdWVcIik7XG5cdFx0XHRcdFx0XHRwYXJzZXIudGFnLmF0dHJpYnV0ZXNbcGFyc2VyLmF0dHJpYk5hbWVdID0gXCJcIjtcblx0XHRcdFx0XHRcdHBhcnNlci5hdHRyaWJWYWx1ZSA9IFwiXCI7XG5cdFx0XHRcdFx0XHRlbWl0Tm9kZShwYXJzZXIsIFwib25hdHRyaWJ1dGVcIiwge1xuXHRcdFx0XHRcdFx0XHRuYW1lOiBwYXJzZXIuYXR0cmliTmFtZSxcblx0XHRcdFx0XHRcdFx0dmFsdWU6IFwiXCJcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0cGFyc2VyLmF0dHJpYk5hbWUgPSBcIlwiO1xuXHRcdFx0XHRcdFx0aWYgKGMgPT09IFwiPlwiKSBvcGVuVGFnKHBhcnNlcik7XG5cdFx0XHRcdFx0XHRlbHNlIGlmIChpc01hdGNoKG5hbWVTdGFydCwgYykpIHtcblx0XHRcdFx0XHRcdFx0cGFyc2VyLmF0dHJpYk5hbWUgPSBjO1xuXHRcdFx0XHRcdFx0XHRwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9OQU1FO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0c3RyaWN0RmFpbChwYXJzZXIsIFwiSW52YWxpZCBhdHRyaWJ1dGUgbmFtZVwiKTtcblx0XHRcdFx0XHRcdFx0cGFyc2VyLnN0YXRlID0gUy5BVFRSSUI7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRjYXNlIFMuQVRUUklCX1ZBTFVFOlxuXHRcdFx0XHRcdGlmIChpc1doaXRlc3BhY2UoYykpIGNvbnRpbnVlO1xuXHRcdFx0XHRcdGVsc2UgaWYgKGlzUXVvdGUoYykpIHtcblx0XHRcdFx0XHRcdHBhcnNlci5xID0gYztcblx0XHRcdFx0XHRcdHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX1ZBTFVFX1FVT1RFRDtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0c3RyaWN0RmFpbChwYXJzZXIsIFwiVW5xdW90ZWQgYXR0cmlidXRlIHZhbHVlXCIpO1xuXHRcdFx0XHRcdFx0cGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfVkFMVUVfVU5RVU9URUQ7XG5cdFx0XHRcdFx0XHRwYXJzZXIuYXR0cmliVmFsdWUgPSBjO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0Y2FzZSBTLkFUVFJJQl9WQUxVRV9RVU9URUQ6XG5cdFx0XHRcdFx0aWYgKGMgIT09IHBhcnNlci5xKSB7XG5cdFx0XHRcdFx0XHRpZiAoYyA9PT0gXCImXCIpIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX1ZBTFVFX0VOVElUWV9RO1xuXHRcdFx0XHRcdFx0ZWxzZSBwYXJzZXIuYXR0cmliVmFsdWUgKz0gYztcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRhdHRyaWIocGFyc2VyKTtcblx0XHRcdFx0XHRwYXJzZXIucSA9IFwiXCI7XG5cdFx0XHRcdFx0cGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfVkFMVUVfQ0xPU0VEO1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRjYXNlIFMuQVRUUklCX1ZBTFVFX0NMT1NFRDpcblx0XHRcdFx0XHRpZiAoaXNXaGl0ZXNwYWNlKGMpKSBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQjtcblx0XHRcdFx0XHRlbHNlIGlmIChjID09PSBcIj5cIikgb3BlblRhZyhwYXJzZXIpO1xuXHRcdFx0XHRcdGVsc2UgaWYgKGMgPT09IFwiL1wiKSBwYXJzZXIuc3RhdGUgPSBTLk9QRU5fVEFHX1NMQVNIO1xuXHRcdFx0XHRcdGVsc2UgaWYgKGlzTWF0Y2gobmFtZVN0YXJ0LCBjKSkge1xuXHRcdFx0XHRcdFx0c3RyaWN0RmFpbChwYXJzZXIsIFwiTm8gd2hpdGVzcGFjZSBiZXR3ZWVuIGF0dHJpYnV0ZXNcIik7XG5cdFx0XHRcdFx0XHRwYXJzZXIuYXR0cmliTmFtZSA9IGM7XG5cdFx0XHRcdFx0XHRwYXJzZXIuYXR0cmliVmFsdWUgPSBcIlwiO1xuXHRcdFx0XHRcdFx0cGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfTkFNRTtcblx0XHRcdFx0XHR9IGVsc2Ugc3RyaWN0RmFpbChwYXJzZXIsIFwiSW52YWxpZCBhdHRyaWJ1dGUgbmFtZVwiKTtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0Y2FzZSBTLkFUVFJJQl9WQUxVRV9VTlFVT1RFRDpcblx0XHRcdFx0XHRpZiAoIWlzQXR0cmliRW5kKGMpKSB7XG5cdFx0XHRcdFx0XHRpZiAoYyA9PT0gXCImXCIpIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX1ZBTFVFX0VOVElUWV9VO1xuXHRcdFx0XHRcdFx0ZWxzZSBwYXJzZXIuYXR0cmliVmFsdWUgKz0gYztcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRhdHRyaWIocGFyc2VyKTtcblx0XHRcdFx0XHRpZiAoYyA9PT0gXCI+XCIpIG9wZW5UYWcocGFyc2VyKTtcblx0XHRcdFx0XHRlbHNlIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCO1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRjYXNlIFMuQ0xPU0VfVEFHOlxuXHRcdFx0XHRcdGlmICghcGFyc2VyLnRhZ05hbWUpIGlmIChpc1doaXRlc3BhY2UoYykpIGNvbnRpbnVlO1xuXHRcdFx0XHRcdGVsc2UgaWYgKG5vdE1hdGNoKG5hbWVTdGFydCwgYykpIGlmIChwYXJzZXIuc2NyaXB0KSB7XG5cdFx0XHRcdFx0XHRwYXJzZXIuc2NyaXB0ICs9IFwiPC9cIiArIGM7XG5cdFx0XHRcdFx0XHRwYXJzZXIuc3RhdGUgPSBTLlNDUklQVDtcblx0XHRcdFx0XHR9IGVsc2Ugc3RyaWN0RmFpbChwYXJzZXIsIFwiSW52YWxpZCB0YWduYW1lIGluIGNsb3NpbmcgdGFnLlwiKTtcblx0XHRcdFx0XHRlbHNlIHBhcnNlci50YWdOYW1lID0gYztcblx0XHRcdFx0XHRlbHNlIGlmIChjID09PSBcIj5cIikgY2xvc2VUYWcocGFyc2VyKTtcblx0XHRcdFx0XHRlbHNlIGlmIChpc01hdGNoKG5hbWVCb2R5LCBjKSkgcGFyc2VyLnRhZ05hbWUgKz0gYztcblx0XHRcdFx0XHRlbHNlIGlmIChwYXJzZXIuc2NyaXB0KSB7XG5cdFx0XHRcdFx0XHRwYXJzZXIuc2NyaXB0ICs9IFwiPC9cIiArIHBhcnNlci50YWdOYW1lO1xuXHRcdFx0XHRcdFx0cGFyc2VyLnRhZ05hbWUgPSBcIlwiO1xuXHRcdFx0XHRcdFx0cGFyc2VyLnN0YXRlID0gUy5TQ1JJUFQ7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGlmICghaXNXaGl0ZXNwYWNlKGMpKSBzdHJpY3RGYWlsKHBhcnNlciwgXCJJbnZhbGlkIHRhZ25hbWUgaW4gY2xvc2luZyB0YWdcIik7XG5cdFx0XHRcdFx0XHRwYXJzZXIuc3RhdGUgPSBTLkNMT1NFX1RBR19TQVdfV0hJVEU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRjYXNlIFMuQ0xPU0VfVEFHX1NBV19XSElURTpcblx0XHRcdFx0XHRpZiAoaXNXaGl0ZXNwYWNlKGMpKSBjb250aW51ZTtcblx0XHRcdFx0XHRpZiAoYyA9PT0gXCI+XCIpIGNsb3NlVGFnKHBhcnNlcik7XG5cdFx0XHRcdFx0ZWxzZSBzdHJpY3RGYWlsKHBhcnNlciwgXCJJbnZhbGlkIGNoYXJhY3RlcnMgaW4gY2xvc2luZyB0YWdcIik7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdGNhc2UgUy5URVhUX0VOVElUWTpcblx0XHRcdFx0Y2FzZSBTLkFUVFJJQl9WQUxVRV9FTlRJVFlfUTpcblx0XHRcdFx0Y2FzZSBTLkFUVFJJQl9WQUxVRV9FTlRJVFlfVTpcblx0XHRcdFx0XHR2YXIgcmV0dXJuU3RhdGU7XG5cdFx0XHRcdFx0dmFyIGJ1ZmZlcjtcblx0XHRcdFx0XHRzd2l0Y2ggKHBhcnNlci5zdGF0ZSkge1xuXHRcdFx0XHRcdFx0Y2FzZSBTLlRFWFRfRU5USVRZOlxuXHRcdFx0XHRcdFx0XHRyZXR1cm5TdGF0ZSA9IFMuVEVYVDtcblx0XHRcdFx0XHRcdFx0YnVmZmVyID0gXCJ0ZXh0Tm9kZVwiO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdGNhc2UgUy5BVFRSSUJfVkFMVUVfRU5USVRZX1E6XG5cdFx0XHRcdFx0XHRcdHJldHVyblN0YXRlID0gUy5BVFRSSUJfVkFMVUVfUVVPVEVEO1xuXHRcdFx0XHRcdFx0XHRidWZmZXIgPSBcImF0dHJpYlZhbHVlXCI7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0Y2FzZSBTLkFUVFJJQl9WQUxVRV9FTlRJVFlfVTpcblx0XHRcdFx0XHRcdFx0cmV0dXJuU3RhdGUgPSBTLkFUVFJJQl9WQUxVRV9VTlFVT1RFRDtcblx0XHRcdFx0XHRcdFx0YnVmZmVyID0gXCJhdHRyaWJWYWx1ZVwiO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKGMgPT09IFwiO1wiKSBpZiAocGFyc2VyLm9wdC51bnBhcnNlZEVudGl0aWVzKSB7XG5cdFx0XHRcdFx0XHR2YXIgcGFyc2VkRW50aXR5ID0gcGFyc2VFbnRpdHkocGFyc2VyKTtcblx0XHRcdFx0XHRcdHBhcnNlci5lbnRpdHkgPSBcIlwiO1xuXHRcdFx0XHRcdFx0cGFyc2VyLnN0YXRlID0gcmV0dXJuU3RhdGU7XG5cdFx0XHRcdFx0XHRwYXJzZXIud3JpdGUocGFyc2VkRW50aXR5KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cGFyc2VyW2J1ZmZlcl0gKz0gcGFyc2VFbnRpdHkocGFyc2VyKTtcblx0XHRcdFx0XHRcdHBhcnNlci5lbnRpdHkgPSBcIlwiO1xuXHRcdFx0XHRcdFx0cGFyc2VyLnN0YXRlID0gcmV0dXJuU3RhdGU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2UgaWYgKGlzTWF0Y2gocGFyc2VyLmVudGl0eS5sZW5ndGggPyBlbnRpdHlCb2R5IDogZW50aXR5U3RhcnQsIGMpKSBwYXJzZXIuZW50aXR5ICs9IGM7XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRzdHJpY3RGYWlsKHBhcnNlciwgXCJJbnZhbGlkIGNoYXJhY3RlciBpbiBlbnRpdHkgbmFtZVwiKTtcblx0XHRcdFx0XHRcdHBhcnNlcltidWZmZXJdICs9IFwiJlwiICsgcGFyc2VyLmVudGl0eSArIGM7XG5cdFx0XHRcdFx0XHRwYXJzZXIuZW50aXR5ID0gXCJcIjtcblx0XHRcdFx0XHRcdHBhcnNlci5zdGF0ZSA9IHJldHVyblN0YXRlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0ZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKHBhcnNlciwgXCJVbmtub3duIHN0YXRlOiBcIiArIHBhcnNlci5zdGF0ZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmIChwYXJzZXIucG9zaXRpb24gPj0gcGFyc2VyLmJ1ZmZlckNoZWNrUG9zaXRpb24pIGNoZWNrQnVmZmVyTGVuZ3RoKHBhcnNlcik7XG5cdFx0cmV0dXJuIHBhcnNlcjtcblx0fVxuXHQvKiEgaHR0cDovL210aHMuYmUvZnJvbWNvZGVwb2ludCB2MC4xLjAgYnkgQG1hdGhpYXMgKi9cblx0LyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0aWYgKCFTdHJpbmcuZnJvbUNvZGVQb2ludCkgKGZ1bmN0aW9uKCkge1xuXHRcdHZhciBzdHJpbmdGcm9tQ2hhckNvZGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlO1xuXHRcdHZhciBmbG9vciA9IE1hdGguZmxvb3I7XG5cdFx0dmFyIGZyb21Db2RlUG9pbnQgPSBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBNQVhfU0laRSA9IDE2Mzg0O1xuXHRcdFx0dmFyIGNvZGVVbml0cyA9IFtdO1xuXHRcdFx0dmFyIGhpZ2hTdXJyb2dhdGU7XG5cdFx0XHR2YXIgbG93U3Vycm9nYXRlO1xuXHRcdFx0dmFyIGluZGV4ID0gLTE7XG5cdFx0XHR2YXIgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcblx0XHRcdGlmICghbGVuZ3RoKSByZXR1cm4gXCJcIjtcblx0XHRcdHZhciByZXN1bHQgPSBcIlwiO1xuXHRcdFx0d2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcblx0XHRcdFx0dmFyIGNvZGVQb2ludCA9IE51bWJlcihhcmd1bWVudHNbaW5kZXhdKTtcblx0XHRcdFx0aWYgKCFpc0Zpbml0ZShjb2RlUG9pbnQpIHx8IGNvZGVQb2ludCA8IDAgfHwgY29kZVBvaW50ID4gMTExNDExMSB8fCBmbG9vcihjb2RlUG9pbnQpICE9PSBjb2RlUG9pbnQpIHRocm93IFJhbmdlRXJyb3IoXCJJbnZhbGlkIGNvZGUgcG9pbnQ6IFwiICsgY29kZVBvaW50KTtcblx0XHRcdFx0aWYgKGNvZGVQb2ludCA8PSA2NTUzNSkgY29kZVVuaXRzLnB1c2goY29kZVBvaW50KTtcblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0Y29kZVBvaW50IC09IDY1NTM2O1xuXHRcdFx0XHRcdGhpZ2hTdXJyb2dhdGUgPSAoY29kZVBvaW50ID4+IDEwKSArIDU1Mjk2O1xuXHRcdFx0XHRcdGxvd1N1cnJvZ2F0ZSA9IGNvZGVQb2ludCAlIDEwMjQgKyA1NjMyMDtcblx0XHRcdFx0XHRjb2RlVW5pdHMucHVzaChoaWdoU3Vycm9nYXRlLCBsb3dTdXJyb2dhdGUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChpbmRleCArIDEgPT09IGxlbmd0aCB8fCBjb2RlVW5pdHMubGVuZ3RoID4gTUFYX1NJWkUpIHtcblx0XHRcdFx0XHRyZXN1bHQgKz0gc3RyaW5nRnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGNvZGVVbml0cyk7XG5cdFx0XHRcdFx0Y29kZVVuaXRzLmxlbmd0aCA9IDA7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fTtcblx0XHQvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHRcdGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmcsIFwiZnJvbUNvZGVQb2ludFwiLCB7XG5cdFx0XHR2YWx1ZTogZnJvbUNvZGVQb2ludCxcblx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblx0XHRcdHdyaXRhYmxlOiB0cnVlXG5cdFx0fSk7XG5cdFx0ZWxzZSBTdHJpbmcuZnJvbUNvZGVQb2ludCA9IGZyb21Db2RlUG9pbnQ7XG5cdH0pKCk7XG5cdHJldHVybiBzYXgkMTtcbn07XG5jb25zdCBzYXggPSBpbml0aWFsaXplU2F4KCk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgc2F4IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zYXguanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/sax-js/sax.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/signal.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/signal.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAbortSignalError: () => (/* binding */ getAbortSignalError),\n/* harmony export */   raceWithSignal: () => (/* binding */ raceWithSignal)\n/* harmony export */ });\n//#region src/utils/signal.ts\n/**\n* Race a promise with an abort signal. If the signal is aborted, the promise will\n* be rejected with the error from the signal. If the promise is rejected, the signal will be aborted.\n*\n* @param promise - The promise to race.\n* @param signal - The abort signal.\n* @returns The result of the promise.\n*/\nasync function raceWithSignal(promise, signal) {\n\tif (signal === void 0) return promise;\n\tlet listener;\n\treturn Promise.race([promise.catch((err) => {\n\t\tif (!signal?.aborted) throw err;\n\t\telse return void 0;\n\t}), new Promise((_, reject) => {\n\t\tlistener = () => {\n\t\t\treject(getAbortSignalError(signal));\n\t\t};\n\t\tsignal.addEventListener(\"abort\", listener);\n\t\tif (signal.aborted) reject(getAbortSignalError(signal));\n\t})]).finally(() => signal.removeEventListener(\"abort\", listener));\n}\n/**\n* Get the error from an abort signal. Since you can set the reason to anything,\n* we have to do some type gymnastics to get a proper error message.\n*\n* @param signal - The abort signal.\n* @returns The error from the abort signal.\n*/\nfunction getAbortSignalError(signal) {\n\tif (signal?.reason instanceof Error) return signal.reason;\n\tif (typeof signal?.reason === \"string\") return new Error(signal.reason);\n\treturn /* @__PURE__ */ new Error(\"Aborted\");\n}\n\n//#endregion\n\n//# sourceMappingURL=signal.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvc2lnbmFsLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDK0M7QUFDL0MiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9zaWduYWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy9zaWduYWwudHNcbi8qKlxuKiBSYWNlIGEgcHJvbWlzZSB3aXRoIGFuIGFib3J0IHNpZ25hbC4gSWYgdGhlIHNpZ25hbCBpcyBhYm9ydGVkLCB0aGUgcHJvbWlzZSB3aWxsXG4qIGJlIHJlamVjdGVkIHdpdGggdGhlIGVycm9yIGZyb20gdGhlIHNpZ25hbC4gSWYgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQsIHRoZSBzaWduYWwgd2lsbCBiZSBhYm9ydGVkLlxuKlxuKiBAcGFyYW0gcHJvbWlzZSAtIFRoZSBwcm9taXNlIHRvIHJhY2UuXG4qIEBwYXJhbSBzaWduYWwgLSBUaGUgYWJvcnQgc2lnbmFsLlxuKiBAcmV0dXJucyBUaGUgcmVzdWx0IG9mIHRoZSBwcm9taXNlLlxuKi9cbmFzeW5jIGZ1bmN0aW9uIHJhY2VXaXRoU2lnbmFsKHByb21pc2UsIHNpZ25hbCkge1xuXHRpZiAoc2lnbmFsID09PSB2b2lkIDApIHJldHVybiBwcm9taXNlO1xuXHRsZXQgbGlzdGVuZXI7XG5cdHJldHVybiBQcm9taXNlLnJhY2UoW3Byb21pc2UuY2F0Y2goKGVycikgPT4ge1xuXHRcdGlmICghc2lnbmFsPy5hYm9ydGVkKSB0aHJvdyBlcnI7XG5cdFx0ZWxzZSByZXR1cm4gdm9pZCAwO1xuXHR9KSwgbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4ge1xuXHRcdGxpc3RlbmVyID0gKCkgPT4ge1xuXHRcdFx0cmVqZWN0KGdldEFib3J0U2lnbmFsRXJyb3Ioc2lnbmFsKSk7XG5cdFx0fTtcblx0XHRzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIGxpc3RlbmVyKTtcblx0XHRpZiAoc2lnbmFsLmFib3J0ZWQpIHJlamVjdChnZXRBYm9ydFNpZ25hbEVycm9yKHNpZ25hbCkpO1xuXHR9KV0pLmZpbmFsbHkoKCkgPT4gc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBsaXN0ZW5lcikpO1xufVxuLyoqXG4qIEdldCB0aGUgZXJyb3IgZnJvbSBhbiBhYm9ydCBzaWduYWwuIFNpbmNlIHlvdSBjYW4gc2V0IHRoZSByZWFzb24gdG8gYW55dGhpbmcsXG4qIHdlIGhhdmUgdG8gZG8gc29tZSB0eXBlIGd5bW5hc3RpY3MgdG8gZ2V0IGEgcHJvcGVyIGVycm9yIG1lc3NhZ2UuXG4qXG4qIEBwYXJhbSBzaWduYWwgLSBUaGUgYWJvcnQgc2lnbmFsLlxuKiBAcmV0dXJucyBUaGUgZXJyb3IgZnJvbSB0aGUgYWJvcnQgc2lnbmFsLlxuKi9cbmZ1bmN0aW9uIGdldEFib3J0U2lnbmFsRXJyb3Ioc2lnbmFsKSB7XG5cdGlmIChzaWduYWw/LnJlYXNvbiBpbnN0YW5jZW9mIEVycm9yKSByZXR1cm4gc2lnbmFsLnJlYXNvbjtcblx0aWYgKHR5cGVvZiBzaWduYWw/LnJlYXNvbiA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIG5ldyBFcnJvcihzaWduYWwucmVhc29uKTtcblx0cmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBuZXcgRXJyb3IoXCJBYm9ydGVkXCIpO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldEFib3J0U2lnbmFsRXJyb3IsIHJhY2VXaXRoU2lnbmFsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaWduYWwuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/signal.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/stream.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/stream.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncGeneratorWithSetup: () => (/* binding */ AsyncGeneratorWithSetup),\n/* harmony export */   IterableReadableStream: () => (/* binding */ IterableReadableStream),\n/* harmony export */   atee: () => (/* binding */ atee),\n/* harmony export */   concat: () => (/* binding */ concat),\n/* harmony export */   pipeGeneratorWithSetup: () => (/* binding */ pipeGeneratorWithSetup),\n/* harmony export */   stream_exports: () => (/* binding */ stream_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _singletons_async_local_storage_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../singletons/async_local_storage/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/singletons/async_local_storage/index.js\");\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../singletons/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/singletons/index.js\");\n/* harmony import */ var _runnables_config_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../runnables/config.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/config.js\");\n/* harmony import */ var _signal_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./signal.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/signal.js\");\n\n\n\n\n\n\n//#region src/utils/stream.ts\nvar stream_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(stream_exports, {\n\tAsyncGeneratorWithSetup: () => AsyncGeneratorWithSetup,\n\tIterableReadableStream: () => IterableReadableStream,\n\tatee: () => atee,\n\tconcat: () => concat,\n\tpipeGeneratorWithSetup: () => pipeGeneratorWithSetup\n});\nvar IterableReadableStream = class IterableReadableStream extends ReadableStream {\n\treader;\n\tensureReader() {\n\t\tif (!this.reader) this.reader = this.getReader();\n\t}\n\tasync next() {\n\t\tthis.ensureReader();\n\t\ttry {\n\t\t\tconst result = await this.reader.read();\n\t\t\tif (result.done) {\n\t\t\t\tthis.reader.releaseLock();\n\t\t\t\treturn {\n\t\t\t\t\tdone: true,\n\t\t\t\t\tvalue: void 0\n\t\t\t\t};\n\t\t\t} else return {\n\t\t\t\tdone: false,\n\t\t\t\tvalue: result.value\n\t\t\t};\n\t\t} catch (e) {\n\t\t\tthis.reader.releaseLock();\n\t\t\tthrow e;\n\t\t}\n\t}\n\tasync return() {\n\t\tthis.ensureReader();\n\t\tif (this.locked) {\n\t\t\tconst cancelPromise = this.reader.cancel();\n\t\t\tthis.reader.releaseLock();\n\t\t\tawait cancelPromise;\n\t\t}\n\t\treturn {\n\t\t\tdone: true,\n\t\t\tvalue: void 0\n\t\t};\n\t}\n\tasync throw(e) {\n\t\tthis.ensureReader();\n\t\tif (this.locked) {\n\t\t\tconst cancelPromise = this.reader.cancel();\n\t\t\tthis.reader.releaseLock();\n\t\t\tawait cancelPromise;\n\t\t}\n\t\tthrow e;\n\t}\n\t[Symbol.asyncIterator]() {\n\t\treturn this;\n\t}\n\tasync [Symbol.asyncDispose]() {\n\t\tawait this.return();\n\t}\n\tstatic fromReadableStream(stream) {\n\t\tconst reader = stream.getReader();\n\t\treturn new IterableReadableStream({\n\t\t\tstart(controller) {\n\t\t\t\treturn pump();\n\t\t\t\tfunction pump() {\n\t\t\t\t\treturn reader.read().then(({ done, value }) => {\n\t\t\t\t\t\tif (done) {\n\t\t\t\t\t\t\tcontroller.close();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontroller.enqueue(value);\n\t\t\t\t\t\treturn pump();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tcancel() {\n\t\t\t\treader.releaseLock();\n\t\t\t}\n\t\t});\n\t}\n\tstatic fromAsyncGenerator(generator) {\n\t\treturn new IterableReadableStream({\n\t\t\tasync pull(controller) {\n\t\t\t\tconst { value, done } = await generator.next();\n\t\t\t\tif (done) controller.close();\n\t\t\t\tcontroller.enqueue(value);\n\t\t\t},\n\t\t\tasync cancel(reason) {\n\t\t\t\tawait generator.return(reason);\n\t\t\t}\n\t\t});\n\t}\n};\nfunction atee(iter, length = 2) {\n\tconst buffers = Array.from({ length }, () => []);\n\treturn buffers.map(async function* makeIter(buffer) {\n\t\twhile (true) if (buffer.length === 0) {\n\t\t\tconst result = await iter.next();\n\t\t\tfor (const buffer$1 of buffers) buffer$1.push(result);\n\t\t} else if (buffer[0].done) return;\n\t\telse yield buffer.shift().value;\n\t});\n}\nfunction concat(first, second) {\n\tif (Array.isArray(first) && Array.isArray(second)) return first.concat(second);\n\telse if (typeof first === \"string\" && typeof second === \"string\") return first + second;\n\telse if (typeof first === \"number\" && typeof second === \"number\") return first + second;\n\telse if (\"concat\" in first && typeof first.concat === \"function\") return first.concat(second);\n\telse if (typeof first === \"object\" && typeof second === \"object\") {\n\t\tconst chunk = { ...first };\n\t\tfor (const [key, value] of Object.entries(second)) if (key in chunk && !Array.isArray(chunk[key])) chunk[key] = concat(chunk[key], value);\n\t\telse chunk[key] = value;\n\t\treturn chunk;\n\t} else throw new Error(`Cannot concat ${typeof first} and ${typeof second}`);\n}\nvar AsyncGeneratorWithSetup = class {\n\tgenerator;\n\tsetup;\n\tconfig;\n\tsignal;\n\tfirstResult;\n\tfirstResultUsed = false;\n\tconstructor(params) {\n\t\tthis.generator = params.generator;\n\t\tthis.config = params.config;\n\t\tthis.signal = params.signal ?? this.config?.signal;\n\t\tthis.setup = new Promise((resolve, reject) => {\n\t\t\t_singletons_async_local_storage_index_js__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.runWithConfig((0,_runnables_config_js__WEBPACK_IMPORTED_MODULE_3__.pickRunnableConfigKeys)(params.config), async () => {\n\t\t\t\tthis.firstResult = params.generator.next();\n\t\t\t\tif (params.startSetup) this.firstResult.then(params.startSetup).then(resolve, reject);\n\t\t\t\telse this.firstResult.then((_result) => resolve(void 0), reject);\n\t\t\t}, true);\n\t\t});\n\t}\n\tasync next(...args) {\n\t\tthis.signal?.throwIfAborted();\n\t\tif (!this.firstResultUsed) {\n\t\t\tthis.firstResultUsed = true;\n\t\t\treturn this.firstResult;\n\t\t}\n\t\treturn _singletons_async_local_storage_index_js__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.runWithConfig((0,_runnables_config_js__WEBPACK_IMPORTED_MODULE_3__.pickRunnableConfigKeys)(this.config), this.signal ? async () => {\n\t\t\treturn (0,_signal_js__WEBPACK_IMPORTED_MODULE_4__.raceWithSignal)(this.generator.next(...args), this.signal);\n\t\t} : async () => {\n\t\t\treturn this.generator.next(...args);\n\t\t}, true);\n\t}\n\tasync return(value) {\n\t\treturn this.generator.return(value);\n\t}\n\tasync throw(e) {\n\t\treturn this.generator.throw(e);\n\t}\n\t[Symbol.asyncIterator]() {\n\t\treturn this;\n\t}\n\tasync [Symbol.asyncDispose]() {\n\t\tawait this.return();\n\t}\n};\nasync function pipeGeneratorWithSetup(to, generator, startSetup, signal, ...args) {\n\tconst gen = new AsyncGeneratorWithSetup({\n\t\tgenerator,\n\t\tstartSetup,\n\t\tsignal\n\t});\n\tconst setup = await gen.setup;\n\treturn {\n\t\toutput: to(gen, setup, ...args),\n\t\tsetup\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=stream.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvc3RyZWFtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQTJEO0FBQ3FDO0FBQ2hFO0FBQ2dDO0FBQ25COztBQUU3QztBQUNBO0FBQ0Esc0VBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsYUFBYTtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxjQUFjO0FBQzFCO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixRQUFRO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLEdBQUcsc0NBQXNDLGNBQWMsTUFBTSxjQUFjO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyx3R0FBa0MsZUFBZSw0RUFBc0I7QUFDMUU7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsd0dBQWtDLGVBQWUsNEVBQXNCO0FBQ2hGLFVBQVUsMERBQWM7QUFDeEIsSUFBSTtBQUNKO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNpSDtBQUNqSCIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3N0cmVhbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4cG9ydCB9IGZyb20gXCIuLi9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIH0gZnJvbSBcIi4uL3NpbmdsZXRvbnMvYXN5bmNfbG9jYWxfc3RvcmFnZS9pbmRleC5qc1wiO1xuaW1wb3J0IFwiLi4vc2luZ2xldG9ucy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgcGlja1J1bm5hYmxlQ29uZmlnS2V5cyB9IGZyb20gXCIuLi9ydW5uYWJsZXMvY29uZmlnLmpzXCI7XG5pbXBvcnQgeyByYWNlV2l0aFNpZ25hbCB9IGZyb20gXCIuL3NpZ25hbC5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL3N0cmVhbS50c1xudmFyIHN0cmVhbV9leHBvcnRzID0ge307XG5fX2V4cG9ydChzdHJlYW1fZXhwb3J0cywge1xuXHRBc3luY0dlbmVyYXRvcldpdGhTZXR1cDogKCkgPT4gQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAsXG5cdEl0ZXJhYmxlUmVhZGFibGVTdHJlYW06ICgpID0+IEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0sXG5cdGF0ZWU6ICgpID0+IGF0ZWUsXG5cdGNvbmNhdDogKCkgPT4gY29uY2F0LFxuXHRwaXBlR2VuZXJhdG9yV2l0aFNldHVwOiAoKSA9PiBwaXBlR2VuZXJhdG9yV2l0aFNldHVwXG59KTtcbnZhciBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtID0gY2xhc3MgSXRlcmFibGVSZWFkYWJsZVN0cmVhbSBleHRlbmRzIFJlYWRhYmxlU3RyZWFtIHtcblx0cmVhZGVyO1xuXHRlbnN1cmVSZWFkZXIoKSB7XG5cdFx0aWYgKCF0aGlzLnJlYWRlcikgdGhpcy5yZWFkZXIgPSB0aGlzLmdldFJlYWRlcigpO1xuXHR9XG5cdGFzeW5jIG5leHQoKSB7XG5cdFx0dGhpcy5lbnN1cmVSZWFkZXIoKTtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5yZWFkZXIucmVhZCgpO1xuXHRcdFx0aWYgKHJlc3VsdC5kb25lKSB7XG5cdFx0XHRcdHRoaXMucmVhZGVyLnJlbGVhc2VMb2NrKCk7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0ZG9uZTogdHJ1ZSxcblx0XHRcdFx0XHR2YWx1ZTogdm9pZCAwXG5cdFx0XHRcdH07XG5cdFx0XHR9IGVsc2UgcmV0dXJuIHtcblx0XHRcdFx0ZG9uZTogZmFsc2UsXG5cdFx0XHRcdHZhbHVlOiByZXN1bHQudmFsdWVcblx0XHRcdH07XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0dGhpcy5yZWFkZXIucmVsZWFzZUxvY2soKTtcblx0XHRcdHRocm93IGU7XG5cdFx0fVxuXHR9XG5cdGFzeW5jIHJldHVybigpIHtcblx0XHR0aGlzLmVuc3VyZVJlYWRlcigpO1xuXHRcdGlmICh0aGlzLmxvY2tlZCkge1xuXHRcdFx0Y29uc3QgY2FuY2VsUHJvbWlzZSA9IHRoaXMucmVhZGVyLmNhbmNlbCgpO1xuXHRcdFx0dGhpcy5yZWFkZXIucmVsZWFzZUxvY2soKTtcblx0XHRcdGF3YWl0IGNhbmNlbFByb21pc2U7XG5cdFx0fVxuXHRcdHJldHVybiB7XG5cdFx0XHRkb25lOiB0cnVlLFxuXHRcdFx0dmFsdWU6IHZvaWQgMFxuXHRcdH07XG5cdH1cblx0YXN5bmMgdGhyb3coZSkge1xuXHRcdHRoaXMuZW5zdXJlUmVhZGVyKCk7XG5cdFx0aWYgKHRoaXMubG9ja2VkKSB7XG5cdFx0XHRjb25zdCBjYW5jZWxQcm9taXNlID0gdGhpcy5yZWFkZXIuY2FuY2VsKCk7XG5cdFx0XHR0aGlzLnJlYWRlci5yZWxlYXNlTG9jaygpO1xuXHRcdFx0YXdhaXQgY2FuY2VsUHJvbWlzZTtcblx0XHR9XG5cdFx0dGhyb3cgZTtcblx0fVxuXHRbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cdGFzeW5jIFtTeW1ib2wuYXN5bmNEaXNwb3NlXSgpIHtcblx0XHRhd2FpdCB0aGlzLnJldHVybigpO1xuXHR9XG5cdHN0YXRpYyBmcm9tUmVhZGFibGVTdHJlYW0oc3RyZWFtKSB7XG5cdFx0Y29uc3QgcmVhZGVyID0gc3RyZWFtLmdldFJlYWRlcigpO1xuXHRcdHJldHVybiBuZXcgSXRlcmFibGVSZWFkYWJsZVN0cmVhbSh7XG5cdFx0XHRzdGFydChjb250cm9sbGVyKSB7XG5cdFx0XHRcdHJldHVybiBwdW1wKCk7XG5cdFx0XHRcdGZ1bmN0aW9uIHB1bXAoKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHJlYWRlci5yZWFkKCkudGhlbigoeyBkb25lLCB2YWx1ZSB9KSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoZG9uZSkge1xuXHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLmNsb3NlKCk7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuZW5xdWV1ZSh2YWx1ZSk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcHVtcCgpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0Y2FuY2VsKCkge1xuXHRcdFx0XHRyZWFkZXIucmVsZWFzZUxvY2soKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXHRzdGF0aWMgZnJvbUFzeW5jR2VuZXJhdG9yKGdlbmVyYXRvcikge1xuXHRcdHJldHVybiBuZXcgSXRlcmFibGVSZWFkYWJsZVN0cmVhbSh7XG5cdFx0XHRhc3luYyBwdWxsKGNvbnRyb2xsZXIpIHtcblx0XHRcdFx0Y29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgZ2VuZXJhdG9yLm5leHQoKTtcblx0XHRcdFx0aWYgKGRvbmUpIGNvbnRyb2xsZXIuY2xvc2UoKTtcblx0XHRcdFx0Y29udHJvbGxlci5lbnF1ZXVlKHZhbHVlKTtcblx0XHRcdH0sXG5cdFx0XHRhc3luYyBjYW5jZWwocmVhc29uKSB7XG5cdFx0XHRcdGF3YWl0IGdlbmVyYXRvci5yZXR1cm4ocmVhc29uKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxufTtcbmZ1bmN0aW9uIGF0ZWUoaXRlciwgbGVuZ3RoID0gMikge1xuXHRjb25zdCBidWZmZXJzID0gQXJyYXkuZnJvbSh7IGxlbmd0aCB9LCAoKSA9PiBbXSk7XG5cdHJldHVybiBidWZmZXJzLm1hcChhc3luYyBmdW5jdGlvbiogbWFrZUl0ZXIoYnVmZmVyKSB7XG5cdFx0d2hpbGUgKHRydWUpIGlmIChidWZmZXIubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBpdGVyLm5leHQoKTtcblx0XHRcdGZvciAoY29uc3QgYnVmZmVyJDEgb2YgYnVmZmVycykgYnVmZmVyJDEucHVzaChyZXN1bHQpO1xuXHRcdH0gZWxzZSBpZiAoYnVmZmVyWzBdLmRvbmUpIHJldHVybjtcblx0XHRlbHNlIHlpZWxkIGJ1ZmZlci5zaGlmdCgpLnZhbHVlO1xuXHR9KTtcbn1cbmZ1bmN0aW9uIGNvbmNhdChmaXJzdCwgc2Vjb25kKSB7XG5cdGlmIChBcnJheS5pc0FycmF5KGZpcnN0KSAmJiBBcnJheS5pc0FycmF5KHNlY29uZCkpIHJldHVybiBmaXJzdC5jb25jYXQoc2Vjb25kKTtcblx0ZWxzZSBpZiAodHlwZW9mIGZpcnN0ID09PSBcInN0cmluZ1wiICYmIHR5cGVvZiBzZWNvbmQgPT09IFwic3RyaW5nXCIpIHJldHVybiBmaXJzdCArIHNlY29uZDtcblx0ZWxzZSBpZiAodHlwZW9mIGZpcnN0ID09PSBcIm51bWJlclwiICYmIHR5cGVvZiBzZWNvbmQgPT09IFwibnVtYmVyXCIpIHJldHVybiBmaXJzdCArIHNlY29uZDtcblx0ZWxzZSBpZiAoXCJjb25jYXRcIiBpbiBmaXJzdCAmJiB0eXBlb2YgZmlyc3QuY29uY2F0ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBmaXJzdC5jb25jYXQoc2Vjb25kKTtcblx0ZWxzZSBpZiAodHlwZW9mIGZpcnN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBzZWNvbmQgPT09IFwib2JqZWN0XCIpIHtcblx0XHRjb25zdCBjaHVuayA9IHsgLi4uZmlyc3QgfTtcblx0XHRmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhzZWNvbmQpKSBpZiAoa2V5IGluIGNodW5rICYmICFBcnJheS5pc0FycmF5KGNodW5rW2tleV0pKSBjaHVua1trZXldID0gY29uY2F0KGNodW5rW2tleV0sIHZhbHVlKTtcblx0XHRlbHNlIGNodW5rW2tleV0gPSB2YWx1ZTtcblx0XHRyZXR1cm4gY2h1bms7XG5cdH0gZWxzZSB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBjb25jYXQgJHt0eXBlb2YgZmlyc3R9IGFuZCAke3R5cGVvZiBzZWNvbmR9YCk7XG59XG52YXIgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAgPSBjbGFzcyB7XG5cdGdlbmVyYXRvcjtcblx0c2V0dXA7XG5cdGNvbmZpZztcblx0c2lnbmFsO1xuXHRmaXJzdFJlc3VsdDtcblx0Zmlyc3RSZXN1bHRVc2VkID0gZmFsc2U7XG5cdGNvbnN0cnVjdG9yKHBhcmFtcykge1xuXHRcdHRoaXMuZ2VuZXJhdG9yID0gcGFyYW1zLmdlbmVyYXRvcjtcblx0XHR0aGlzLmNvbmZpZyA9IHBhcmFtcy5jb25maWc7XG5cdFx0dGhpcy5zaWduYWwgPSBwYXJhbXMuc2lnbmFsID8/IHRoaXMuY29uZmlnPy5zaWduYWw7XG5cdFx0dGhpcy5zZXR1cCA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24ucnVuV2l0aENvbmZpZyhwaWNrUnVubmFibGVDb25maWdLZXlzKHBhcmFtcy5jb25maWcpLCBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuZmlyc3RSZXN1bHQgPSBwYXJhbXMuZ2VuZXJhdG9yLm5leHQoKTtcblx0XHRcdFx0aWYgKHBhcmFtcy5zdGFydFNldHVwKSB0aGlzLmZpcnN0UmVzdWx0LnRoZW4ocGFyYW1zLnN0YXJ0U2V0dXApLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcblx0XHRcdFx0ZWxzZSB0aGlzLmZpcnN0UmVzdWx0LnRoZW4oKF9yZXN1bHQpID0+IHJlc29sdmUodm9pZCAwKSwgcmVqZWN0KTtcblx0XHRcdH0sIHRydWUpO1xuXHRcdH0pO1xuXHR9XG5cdGFzeW5jIG5leHQoLi4uYXJncykge1xuXHRcdHRoaXMuc2lnbmFsPy50aHJvd0lmQWJvcnRlZCgpO1xuXHRcdGlmICghdGhpcy5maXJzdFJlc3VsdFVzZWQpIHtcblx0XHRcdHRoaXMuZmlyc3RSZXN1bHRVc2VkID0gdHJ1ZTtcblx0XHRcdHJldHVybiB0aGlzLmZpcnN0UmVzdWx0O1xuXHRcdH1cblx0XHRyZXR1cm4gQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbi5ydW5XaXRoQ29uZmlnKHBpY2tSdW5uYWJsZUNvbmZpZ0tleXModGhpcy5jb25maWcpLCB0aGlzLnNpZ25hbCA/IGFzeW5jICgpID0+IHtcblx0XHRcdHJldHVybiByYWNlV2l0aFNpZ25hbCh0aGlzLmdlbmVyYXRvci5uZXh0KC4uLmFyZ3MpLCB0aGlzLnNpZ25hbCk7XG5cdFx0fSA6IGFzeW5jICgpID0+IHtcblx0XHRcdHJldHVybiB0aGlzLmdlbmVyYXRvci5uZXh0KC4uLmFyZ3MpO1xuXHRcdH0sIHRydWUpO1xuXHR9XG5cdGFzeW5jIHJldHVybih2YWx1ZSkge1xuXHRcdHJldHVybiB0aGlzLmdlbmVyYXRvci5yZXR1cm4odmFsdWUpO1xuXHR9XG5cdGFzeW5jIHRocm93KGUpIHtcblx0XHRyZXR1cm4gdGhpcy5nZW5lcmF0b3IudGhyb3coZSk7XG5cdH1cblx0W1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXHRhc3luYyBbU3ltYm9sLmFzeW5jRGlzcG9zZV0oKSB7XG5cdFx0YXdhaXQgdGhpcy5yZXR1cm4oKTtcblx0fVxufTtcbmFzeW5jIGZ1bmN0aW9uIHBpcGVHZW5lcmF0b3JXaXRoU2V0dXAodG8sIGdlbmVyYXRvciwgc3RhcnRTZXR1cCwgc2lnbmFsLCAuLi5hcmdzKSB7XG5cdGNvbnN0IGdlbiA9IG5ldyBBc3luY0dlbmVyYXRvcldpdGhTZXR1cCh7XG5cdFx0Z2VuZXJhdG9yLFxuXHRcdHN0YXJ0U2V0dXAsXG5cdFx0c2lnbmFsXG5cdH0pO1xuXHRjb25zdCBzZXR1cCA9IGF3YWl0IGdlbi5zZXR1cDtcblx0cmV0dXJuIHtcblx0XHRvdXRwdXQ6IHRvKGdlbiwgc2V0dXAsIC4uLmFyZ3MpLFxuXHRcdHNldHVwXG5cdH07XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAsIEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0sIGF0ZWUsIGNvbmNhdCwgcGlwZUdlbmVyYXRvcldpdGhTZXR1cCwgc3RyZWFtX2V4cG9ydHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0cmVhbS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/stream.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/testing/chat_models.js":
/*!************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/testing/chat_models.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FakeChatModel: () => (/* binding */ FakeChatModel),\n/* harmony export */   FakeListChatModel: () => (/* binding */ FakeListChatModel),\n/* harmony export */   FakeStreamingChatModel: () => (/* binding */ FakeStreamingChatModel)\n/* harmony export */ });\n/* harmony import */ var _messages_ai_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../messages/ai.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _outputs_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../outputs.js */ \"(ssr)/./node_modules/@langchain/core/dist/outputs.js\");\n/* harmony import */ var _json_schema_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../json_schema.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/json_schema.js\");\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../runnables/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../messages/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _language_models_chat_models_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../language_models/chat_models.js */ \"(ssr)/./node_modules/@langchain/core/dist/language_models/chat_models.js\");\n\n\n\n\n\n\n\n//#region src/utils/testing/chat_models.ts\nvar FakeChatModel = class extends _language_models_chat_models_js__WEBPACK_IMPORTED_MODULE_5__.BaseChatModel {\n\t_combineLLMOutput() {\n\t\treturn [];\n\t}\n\t_llmType() {\n\t\treturn \"fake\";\n\t}\n\tasync _generate(messages, options, runManager) {\n\t\tif (options?.stop?.length) return { generations: [{\n\t\t\tmessage: new _messages_ai_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage(options.stop[0]),\n\t\t\ttext: options.stop[0]\n\t\t}] };\n\t\tconst text = messages.map((m) => {\n\t\t\tif (typeof m.content === \"string\") return m.content;\n\t\t\treturn JSON.stringify(m.content, null, 2);\n\t\t}).join(\"\\n\");\n\t\tawait runManager?.handleLLMNewToken(text);\n\t\treturn {\n\t\t\tgenerations: [{\n\t\t\t\tmessage: new _messages_ai_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage(text),\n\t\t\t\ttext\n\t\t\t}],\n\t\t\tllmOutput: {}\n\t\t};\n\t}\n};\nvar FakeStreamingChatModel = class FakeStreamingChatModel extends _language_models_chat_models_js__WEBPACK_IMPORTED_MODULE_5__.BaseChatModel {\n\tsleep = 50;\n\tresponses = [];\n\tchunks = [];\n\ttoolStyle = \"openai\";\n\tthrownErrorString;\n\ttools = [];\n\tconstructor({ sleep = 50, responses = [], chunks = [], toolStyle = \"openai\", thrownErrorString,...rest }) {\n\t\tsuper(rest);\n\t\tthis.sleep = sleep;\n\t\tthis.responses = responses;\n\t\tthis.chunks = chunks;\n\t\tthis.toolStyle = toolStyle;\n\t\tthis.thrownErrorString = thrownErrorString;\n\t}\n\t_llmType() {\n\t\treturn \"fake\";\n\t}\n\tbindTools(tools) {\n\t\tconst merged = [...this.tools, ...tools];\n\t\tconst toolDicts = merged.map((t) => {\n\t\t\tswitch (this.toolStyle) {\n\t\t\t\tcase \"openai\": return {\n\t\t\t\t\ttype: \"function\",\n\t\t\t\t\tfunction: {\n\t\t\t\t\t\tname: t.name,\n\t\t\t\t\t\tdescription: t.description,\n\t\t\t\t\t\tparameters: (0,_json_schema_js__WEBPACK_IMPORTED_MODULE_2__.toJsonSchema)(t.schema)\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tcase \"anthropic\": return {\n\t\t\t\t\tname: t.name,\n\t\t\t\t\tdescription: t.description,\n\t\t\t\t\tinput_schema: (0,_json_schema_js__WEBPACK_IMPORTED_MODULE_2__.toJsonSchema)(t.schema)\n\t\t\t\t};\n\t\t\t\tcase \"bedrock\": return { toolSpec: {\n\t\t\t\t\tname: t.name,\n\t\t\t\t\tdescription: t.description,\n\t\t\t\t\tinputSchema: (0,_json_schema_js__WEBPACK_IMPORTED_MODULE_2__.toJsonSchema)(t.schema)\n\t\t\t\t} };\n\t\t\t\tcase \"google\": return {\n\t\t\t\t\tname: t.name,\n\t\t\t\t\tdescription: t.description,\n\t\t\t\t\tparameters: (0,_json_schema_js__WEBPACK_IMPORTED_MODULE_2__.toJsonSchema)(t.schema)\n\t\t\t\t};\n\t\t\t\tdefault: throw new Error(`Unsupported tool style: ${this.toolStyle}`);\n\t\t\t}\n\t\t});\n\t\tconst wrapped = this.toolStyle === \"google\" ? [{ functionDeclarations: toolDicts }] : toolDicts;\n\t\tconst next = new FakeStreamingChatModel({\n\t\t\tsleep: this.sleep,\n\t\t\tresponses: this.responses,\n\t\t\tchunks: this.chunks,\n\t\t\ttoolStyle: this.toolStyle,\n\t\t\tthrownErrorString: this.thrownErrorString\n\t\t});\n\t\tnext.tools = merged;\n\t\treturn next.withConfig({ tools: wrapped });\n\t}\n\tasync _generate(messages, _options, _runManager) {\n\t\tif (this.thrownErrorString) throw new Error(this.thrownErrorString);\n\t\tconst content = this.responses?.[0]?.content ?? messages[0].content ?? \"\";\n\t\tconst generation = { generations: [{\n\t\t\ttext: \"\",\n\t\t\tmessage: new _messages_ai_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage({\n\t\t\t\tcontent,\n\t\t\t\ttool_calls: this.chunks?.[0]?.tool_calls\n\t\t\t})\n\t\t}] };\n\t\treturn generation;\n\t}\n\tasync *_streamResponseChunks(_messages, options, runManager) {\n\t\tif (this.thrownErrorString) throw new Error(this.thrownErrorString);\n\t\tif (this.chunks?.length) {\n\t\t\tfor (const msgChunk of this.chunks) {\n\t\t\t\tconst cg = new _outputs_js__WEBPACK_IMPORTED_MODULE_1__.ChatGenerationChunk({\n\t\t\t\t\tmessage: new _messages_ai_js__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk({\n\t\t\t\t\t\tcontent: msgChunk.content,\n\t\t\t\t\t\ttool_calls: msgChunk.tool_calls,\n\t\t\t\t\t\tadditional_kwargs: msgChunk.additional_kwargs ?? {}\n\t\t\t\t\t}),\n\t\t\t\t\ttext: msgChunk.content?.toString() ?? \"\"\n\t\t\t\t});\n\t\t\t\tif (options.signal?.aborted) break;\n\t\t\t\tyield cg;\n\t\t\t\tawait runManager?.handleLLMNewToken(msgChunk.content, void 0, void 0, void 0, void 0, { chunk: cg });\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tconst fallback = this.responses?.[0] ?? new _messages_ai_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage(typeof _messages[0].content === \"string\" ? _messages[0].content : \"\");\n\t\tconst text = typeof fallback.content === \"string\" ? fallback.content : \"\";\n\t\tfor (const ch of text) {\n\t\t\tawait new Promise((r) => setTimeout(r, this.sleep));\n\t\t\tconst cg = new _outputs_js__WEBPACK_IMPORTED_MODULE_1__.ChatGenerationChunk({\n\t\t\t\tmessage: new _messages_ai_js__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk({ content: ch }),\n\t\t\t\ttext: ch\n\t\t\t});\n\t\t\tif (options.signal?.aborted) break;\n\t\t\tyield cg;\n\t\t\tawait runManager?.handleLLMNewToken(ch, void 0, void 0, void 0, void 0, { chunk: cg });\n\t\t}\n\t}\n};\n/**\n* A fake Chat Model that returns a predefined list of responses. It can be used\n* for testing purposes.\n* @example\n* ```typescript\n* const chat = new FakeListChatModel({\n*   responses: [\"I'll callback later.\", \"You 'console' them!\"]\n* });\n*\n* const firstMessage = new HumanMessage(\"You want to hear a JavaScript joke?\");\n* const secondMessage = new HumanMessage(\"How do you cheer up a JavaScript developer?\");\n*\n* // Call the chat model with a message and log the response\n* const firstResponse = await chat.call([firstMessage]);\n* console.log({ firstResponse });\n*\n* const secondResponse = await chat.call([secondMessage]);\n* console.log({ secondResponse });\n* ```\n*/\nvar FakeListChatModel = class FakeListChatModel extends _language_models_chat_models_js__WEBPACK_IMPORTED_MODULE_5__.BaseChatModel {\n\tstatic lc_name() {\n\t\treturn \"FakeListChatModel\";\n\t}\n\tlc_serializable = true;\n\tresponses;\n\ti = 0;\n\tsleep;\n\temitCustomEvent = false;\n\tgenerationInfo;\n\ttools = [];\n\ttoolStyle = \"openai\";\n\tconstructor(params) {\n\t\tsuper(params);\n\t\tconst { responses, sleep, emitCustomEvent, generationInfo } = params;\n\t\tthis.responses = responses;\n\t\tthis.sleep = sleep;\n\t\tthis.emitCustomEvent = emitCustomEvent ?? this.emitCustomEvent;\n\t\tthis.generationInfo = generationInfo;\n\t}\n\t_combineLLMOutput() {\n\t\treturn [];\n\t}\n\t_llmType() {\n\t\treturn \"fake-list\";\n\t}\n\tasync _generate(_messages, options, runManager) {\n\t\tawait this._sleepIfRequested();\n\t\tif (options?.thrownErrorString) throw new Error(options.thrownErrorString);\n\t\tif (this.emitCustomEvent) await runManager?.handleCustomEvent(\"some_test_event\", { someval: true });\n\t\tif (options?.stop?.length) return { generations: [this._formatGeneration(options.stop[0])] };\n\t\telse {\n\t\t\tconst response = this._currentResponse();\n\t\t\tthis._incrementResponse();\n\t\t\treturn {\n\t\t\t\tgenerations: [this._formatGeneration(response)],\n\t\t\t\tllmOutput: {}\n\t\t\t};\n\t\t}\n\t}\n\t_formatGeneration(text) {\n\t\treturn {\n\t\t\tmessage: new _messages_ai_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage(text),\n\t\t\ttext\n\t\t};\n\t}\n\tasync *_streamResponseChunks(_messages, options, runManager) {\n\t\tconst response = this._currentResponse();\n\t\tthis._incrementResponse();\n\t\tif (this.emitCustomEvent) await runManager?.handleCustomEvent(\"some_test_event\", { someval: true });\n\t\tconst responseChars = [...response];\n\t\tfor (let i = 0; i < responseChars.length; i++) {\n\t\t\tconst text = responseChars[i];\n\t\t\tconst isLastChunk = i === responseChars.length - 1;\n\t\t\tawait this._sleepIfRequested();\n\t\t\tif (options?.thrownErrorString) throw new Error(options.thrownErrorString);\n\t\t\tconst chunk = this._createResponseChunk(text, isLastChunk ? this.generationInfo : void 0);\n\t\t\tif (options.signal?.aborted) break;\n\t\t\tyield chunk;\n\t\t\trunManager?.handleLLMNewToken(text);\n\t\t}\n\t}\n\tasync _sleepIfRequested() {\n\t\tif (this.sleep !== void 0) await this._sleep();\n\t}\n\tasync _sleep() {\n\t\treturn new Promise((resolve) => {\n\t\t\tsetTimeout(() => resolve(), this.sleep);\n\t\t});\n\t}\n\t_createResponseChunk(text, generationInfo) {\n\t\treturn new _outputs_js__WEBPACK_IMPORTED_MODULE_1__.ChatGenerationChunk({\n\t\t\tmessage: new _messages_ai_js__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk({ content: text }),\n\t\t\ttext,\n\t\t\tgenerationInfo\n\t\t});\n\t}\n\t_currentResponse() {\n\t\treturn this.responses[this.i];\n\t}\n\t_incrementResponse() {\n\t\tif (this.i < this.responses.length - 1) this.i += 1;\n\t\telse this.i = 0;\n\t}\n\tbindTools(tools) {\n\t\tconst merged = [...this.tools, ...tools];\n\t\tconst toolDicts = merged.map((t) => {\n\t\t\tswitch (this.toolStyle) {\n\t\t\t\tcase \"openai\": return {\n\t\t\t\t\ttype: \"function\",\n\t\t\t\t\tfunction: {\n\t\t\t\t\t\tname: t.name,\n\t\t\t\t\t\tdescription: t.description,\n\t\t\t\t\t\tparameters: (0,_json_schema_js__WEBPACK_IMPORTED_MODULE_2__.toJsonSchema)(t.schema)\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tcase \"anthropic\": return {\n\t\t\t\t\tname: t.name,\n\t\t\t\t\tdescription: t.description,\n\t\t\t\t\tinput_schema: (0,_json_schema_js__WEBPACK_IMPORTED_MODULE_2__.toJsonSchema)(t.schema)\n\t\t\t\t};\n\t\t\t\tcase \"bedrock\": return { toolSpec: {\n\t\t\t\t\tname: t.name,\n\t\t\t\t\tdescription: t.description,\n\t\t\t\t\tinputSchema: (0,_json_schema_js__WEBPACK_IMPORTED_MODULE_2__.toJsonSchema)(t.schema)\n\t\t\t\t} };\n\t\t\t\tcase \"google\": return {\n\t\t\t\t\tname: t.name,\n\t\t\t\t\tdescription: t.description,\n\t\t\t\t\tparameters: (0,_json_schema_js__WEBPACK_IMPORTED_MODULE_2__.toJsonSchema)(t.schema)\n\t\t\t\t};\n\t\t\t\tdefault: throw new Error(`Unsupported tool style: ${this.toolStyle}`);\n\t\t\t}\n\t\t});\n\t\tconst wrapped = this.toolStyle === \"google\" ? [{ functionDeclarations: toolDicts }] : toolDicts;\n\t\tconst next = new FakeListChatModel({\n\t\t\tresponses: this.responses,\n\t\t\tsleep: this.sleep,\n\t\t\temitCustomEvent: this.emitCustomEvent,\n\t\t\tgenerationInfo: this.generationInfo\n\t\t});\n\t\tnext.tools = merged;\n\t\tnext.toolStyle = this.toolStyle;\n\t\tnext.i = this.i;\n\t\treturn next.withConfig({ tools: wrapped });\n\t}\n\twithStructuredOutput(_params, _config) {\n\t\treturn _runnables_base_js__WEBPACK_IMPORTED_MODULE_3__.RunnableLambda.from(async (input) => {\n\t\t\tconst message = await this.invoke(input);\n\t\t\tif (message.tool_calls?.[0]?.args) return message.tool_calls[0].args;\n\t\t\tif (typeof message.content === \"string\") return JSON.parse(message.content);\n\t\t\tthrow new Error(\"No structured output found\");\n\t\t});\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=chat_models.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdGVzdGluZy9jaGF0X21vZGVscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBaUU7QUFDVjtBQUNOO0FBQ1E7QUFDeEI7QUFDb0M7O0FBRXJFO0FBQ0Esa0NBQWtDLDBFQUFhO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDLGdCQUFnQixzREFBUztBQUN6QjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHNEQUFTO0FBQzFCO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLDBFQUFhO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMEZBQTBGO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDZEQUFZO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNkRBQVk7QUFDL0I7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBLGtCQUFrQiw2REFBWTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw2REFBWTtBQUM3QjtBQUNBLHdEQUF3RCxlQUFlO0FBQ3ZFO0FBQ0EsR0FBRztBQUNILG1EQUFtRCxpQ0FBaUM7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsMkJBQTJCLGdCQUFnQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBLGdCQUFnQixzREFBUztBQUN6QjtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNERBQW1CO0FBQ3RDLGtCQUFrQiwyREFBYztBQUNoQztBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDRGQUE0RixXQUFXO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxzREFBUztBQUN2RDtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsNERBQW1CO0FBQ3JDLGlCQUFpQiwyREFBYyxHQUFHLGFBQWE7QUFDL0M7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLDZFQUE2RSxXQUFXO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixlQUFlO0FBQy9CO0FBQ0E7QUFDQSxnQkFBZ0IsZ0JBQWdCO0FBQ2hDO0FBQ0E7QUFDQSx3REFBd0QsMEVBQWE7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLG9EQUFvRDtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUZBQXFGLGVBQWU7QUFDcEcsc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isc0RBQVM7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUZBQXFGLGVBQWU7QUFDcEc7QUFDQSxrQkFBa0IsMEJBQTBCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxhQUFhLDREQUFtQjtBQUNoQyxnQkFBZ0IsMkRBQWMsR0FBRyxlQUFlO0FBQ2hEO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw2REFBWTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDZEQUFZO0FBQy9CO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQSxrQkFBa0IsNkRBQVk7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsNkRBQVk7QUFDN0I7QUFDQSx3REFBd0QsZUFBZTtBQUN2RTtBQUNBLEdBQUc7QUFDSCxtREFBbUQsaUNBQWlDO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGdCQUFnQjtBQUMzQztBQUNBO0FBQ0EsU0FBUyw4REFBYztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ29FO0FBQ3BFIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdGVzdGluZy9jaGF0X21vZGVscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBSU1lc3NhZ2UsIEFJTWVzc2FnZUNodW5rIH0gZnJvbSBcIi4uLy4uL21lc3NhZ2VzL2FpLmpzXCI7XG5pbXBvcnQgeyBDaGF0R2VuZXJhdGlvbkNodW5rIH0gZnJvbSBcIi4uLy4uL291dHB1dHMuanNcIjtcbmltcG9ydCB7IHRvSnNvblNjaGVtYSB9IGZyb20gXCIuLi9qc29uX3NjaGVtYS5qc1wiO1xuaW1wb3J0IHsgUnVubmFibGVMYW1iZGEgfSBmcm9tIFwiLi4vLi4vcnVubmFibGVzL2Jhc2UuanNcIjtcbmltcG9ydCBcIi4uLy4uL21lc3NhZ2VzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBCYXNlQ2hhdE1vZGVsIH0gZnJvbSBcIi4uLy4uL2xhbmd1YWdlX21vZGVscy9jaGF0X21vZGVscy5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL3Rlc3RpbmcvY2hhdF9tb2RlbHMudHNcbnZhciBGYWtlQ2hhdE1vZGVsID0gY2xhc3MgZXh0ZW5kcyBCYXNlQ2hhdE1vZGVsIHtcblx0X2NvbWJpbmVMTE1PdXRwdXQoKSB7XG5cdFx0cmV0dXJuIFtdO1xuXHR9XG5cdF9sbG1UeXBlKCkge1xuXHRcdHJldHVybiBcImZha2VcIjtcblx0fVxuXHRhc3luYyBfZ2VuZXJhdGUobWVzc2FnZXMsIG9wdGlvbnMsIHJ1bk1hbmFnZXIpIHtcblx0XHRpZiAob3B0aW9ucz8uc3RvcD8ubGVuZ3RoKSByZXR1cm4geyBnZW5lcmF0aW9uczogW3tcblx0XHRcdG1lc3NhZ2U6IG5ldyBBSU1lc3NhZ2Uob3B0aW9ucy5zdG9wWzBdKSxcblx0XHRcdHRleHQ6IG9wdGlvbnMuc3RvcFswXVxuXHRcdH1dIH07XG5cdFx0Y29uc3QgdGV4dCA9IG1lc3NhZ2VzLm1hcCgobSkgPT4ge1xuXHRcdFx0aWYgKHR5cGVvZiBtLmNvbnRlbnQgPT09IFwic3RyaW5nXCIpIHJldHVybiBtLmNvbnRlbnQ7XG5cdFx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkobS5jb250ZW50LCBudWxsLCAyKTtcblx0XHR9KS5qb2luKFwiXFxuXCIpO1xuXHRcdGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUxMTU5ld1Rva2VuKHRleHQpO1xuXHRcdHJldHVybiB7XG5cdFx0XHRnZW5lcmF0aW9uczogW3tcblx0XHRcdFx0bWVzc2FnZTogbmV3IEFJTWVzc2FnZSh0ZXh0KSxcblx0XHRcdFx0dGV4dFxuXHRcdFx0fV0sXG5cdFx0XHRsbG1PdXRwdXQ6IHt9XG5cdFx0fTtcblx0fVxufTtcbnZhciBGYWtlU3RyZWFtaW5nQ2hhdE1vZGVsID0gY2xhc3MgRmFrZVN0cmVhbWluZ0NoYXRNb2RlbCBleHRlbmRzIEJhc2VDaGF0TW9kZWwge1xuXHRzbGVlcCA9IDUwO1xuXHRyZXNwb25zZXMgPSBbXTtcblx0Y2h1bmtzID0gW107XG5cdHRvb2xTdHlsZSA9IFwib3BlbmFpXCI7XG5cdHRocm93bkVycm9yU3RyaW5nO1xuXHR0b29scyA9IFtdO1xuXHRjb25zdHJ1Y3Rvcih7IHNsZWVwID0gNTAsIHJlc3BvbnNlcyA9IFtdLCBjaHVua3MgPSBbXSwgdG9vbFN0eWxlID0gXCJvcGVuYWlcIiwgdGhyb3duRXJyb3JTdHJpbmcsLi4ucmVzdCB9KSB7XG5cdFx0c3VwZXIocmVzdCk7XG5cdFx0dGhpcy5zbGVlcCA9IHNsZWVwO1xuXHRcdHRoaXMucmVzcG9uc2VzID0gcmVzcG9uc2VzO1xuXHRcdHRoaXMuY2h1bmtzID0gY2h1bmtzO1xuXHRcdHRoaXMudG9vbFN0eWxlID0gdG9vbFN0eWxlO1xuXHRcdHRoaXMudGhyb3duRXJyb3JTdHJpbmcgPSB0aHJvd25FcnJvclN0cmluZztcblx0fVxuXHRfbGxtVHlwZSgpIHtcblx0XHRyZXR1cm4gXCJmYWtlXCI7XG5cdH1cblx0YmluZFRvb2xzKHRvb2xzKSB7XG5cdFx0Y29uc3QgbWVyZ2VkID0gWy4uLnRoaXMudG9vbHMsIC4uLnRvb2xzXTtcblx0XHRjb25zdCB0b29sRGljdHMgPSBtZXJnZWQubWFwKCh0KSA9PiB7XG5cdFx0XHRzd2l0Y2ggKHRoaXMudG9vbFN0eWxlKSB7XG5cdFx0XHRcdGNhc2UgXCJvcGVuYWlcIjogcmV0dXJuIHtcblx0XHRcdFx0XHR0eXBlOiBcImZ1bmN0aW9uXCIsXG5cdFx0XHRcdFx0ZnVuY3Rpb246IHtcblx0XHRcdFx0XHRcdG5hbWU6IHQubmFtZSxcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiB0LmRlc2NyaXB0aW9uLFxuXHRcdFx0XHRcdFx0cGFyYW1ldGVyczogdG9Kc29uU2NoZW1hKHQuc2NoZW1hKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdFx0Y2FzZSBcImFudGhyb3BpY1wiOiByZXR1cm4ge1xuXHRcdFx0XHRcdG5hbWU6IHQubmFtZSxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogdC5kZXNjcmlwdGlvbixcblx0XHRcdFx0XHRpbnB1dF9zY2hlbWE6IHRvSnNvblNjaGVtYSh0LnNjaGVtYSlcblx0XHRcdFx0fTtcblx0XHRcdFx0Y2FzZSBcImJlZHJvY2tcIjogcmV0dXJuIHsgdG9vbFNwZWM6IHtcblx0XHRcdFx0XHRuYW1lOiB0Lm5hbWUsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IHQuZGVzY3JpcHRpb24sXG5cdFx0XHRcdFx0aW5wdXRTY2hlbWE6IHRvSnNvblNjaGVtYSh0LnNjaGVtYSlcblx0XHRcdFx0fSB9O1xuXHRcdFx0XHRjYXNlIFwiZ29vZ2xlXCI6IHJldHVybiB7XG5cdFx0XHRcdFx0bmFtZTogdC5uYW1lLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiB0LmRlc2NyaXB0aW9uLFxuXHRcdFx0XHRcdHBhcmFtZXRlcnM6IHRvSnNvblNjaGVtYSh0LnNjaGVtYSlcblx0XHRcdFx0fTtcblx0XHRcdFx0ZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCB0b29sIHN0eWxlOiAke3RoaXMudG9vbFN0eWxlfWApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGNvbnN0IHdyYXBwZWQgPSB0aGlzLnRvb2xTdHlsZSA9PT0gXCJnb29nbGVcIiA/IFt7IGZ1bmN0aW9uRGVjbGFyYXRpb25zOiB0b29sRGljdHMgfV0gOiB0b29sRGljdHM7XG5cdFx0Y29uc3QgbmV4dCA9IG5ldyBGYWtlU3RyZWFtaW5nQ2hhdE1vZGVsKHtcblx0XHRcdHNsZWVwOiB0aGlzLnNsZWVwLFxuXHRcdFx0cmVzcG9uc2VzOiB0aGlzLnJlc3BvbnNlcyxcblx0XHRcdGNodW5rczogdGhpcy5jaHVua3MsXG5cdFx0XHR0b29sU3R5bGU6IHRoaXMudG9vbFN0eWxlLFxuXHRcdFx0dGhyb3duRXJyb3JTdHJpbmc6IHRoaXMudGhyb3duRXJyb3JTdHJpbmdcblx0XHR9KTtcblx0XHRuZXh0LnRvb2xzID0gbWVyZ2VkO1xuXHRcdHJldHVybiBuZXh0LndpdGhDb25maWcoeyB0b29sczogd3JhcHBlZCB9KTtcblx0fVxuXHRhc3luYyBfZ2VuZXJhdGUobWVzc2FnZXMsIF9vcHRpb25zLCBfcnVuTWFuYWdlcikge1xuXHRcdGlmICh0aGlzLnRocm93bkVycm9yU3RyaW5nKSB0aHJvdyBuZXcgRXJyb3IodGhpcy50aHJvd25FcnJvclN0cmluZyk7XG5cdFx0Y29uc3QgY29udGVudCA9IHRoaXMucmVzcG9uc2VzPy5bMF0/LmNvbnRlbnQgPz8gbWVzc2FnZXNbMF0uY29udGVudCA/PyBcIlwiO1xuXHRcdGNvbnN0IGdlbmVyYXRpb24gPSB7IGdlbmVyYXRpb25zOiBbe1xuXHRcdFx0dGV4dDogXCJcIixcblx0XHRcdG1lc3NhZ2U6IG5ldyBBSU1lc3NhZ2Uoe1xuXHRcdFx0XHRjb250ZW50LFxuXHRcdFx0XHR0b29sX2NhbGxzOiB0aGlzLmNodW5rcz8uWzBdPy50b29sX2NhbGxzXG5cdFx0XHR9KVxuXHRcdH1dIH07XG5cdFx0cmV0dXJuIGdlbmVyYXRpb247XG5cdH1cblx0YXN5bmMgKl9zdHJlYW1SZXNwb25zZUNodW5rcyhfbWVzc2FnZXMsIG9wdGlvbnMsIHJ1bk1hbmFnZXIpIHtcblx0XHRpZiAodGhpcy50aHJvd25FcnJvclN0cmluZykgdGhyb3cgbmV3IEVycm9yKHRoaXMudGhyb3duRXJyb3JTdHJpbmcpO1xuXHRcdGlmICh0aGlzLmNodW5rcz8ubGVuZ3RoKSB7XG5cdFx0XHRmb3IgKGNvbnN0IG1zZ0NodW5rIG9mIHRoaXMuY2h1bmtzKSB7XG5cdFx0XHRcdGNvbnN0IGNnID0gbmV3IENoYXRHZW5lcmF0aW9uQ2h1bmsoe1xuXHRcdFx0XHRcdG1lc3NhZ2U6IG5ldyBBSU1lc3NhZ2VDaHVuayh7XG5cdFx0XHRcdFx0XHRjb250ZW50OiBtc2dDaHVuay5jb250ZW50LFxuXHRcdFx0XHRcdFx0dG9vbF9jYWxsczogbXNnQ2h1bmsudG9vbF9jYWxscyxcblx0XHRcdFx0XHRcdGFkZGl0aW9uYWxfa3dhcmdzOiBtc2dDaHVuay5hZGRpdGlvbmFsX2t3YXJncyA/PyB7fVxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdHRleHQ6IG1zZ0NodW5rLmNvbnRlbnQ/LnRvU3RyaW5nKCkgPz8gXCJcIlxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKG9wdGlvbnMuc2lnbmFsPy5hYm9ydGVkKSBicmVhaztcblx0XHRcdFx0eWllbGQgY2c7XG5cdFx0XHRcdGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUxMTU5ld1Rva2VuKG1zZ0NodW5rLmNvbnRlbnQsIHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgeyBjaHVuazogY2cgfSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGNvbnN0IGZhbGxiYWNrID0gdGhpcy5yZXNwb25zZXM/LlswXSA/PyBuZXcgQUlNZXNzYWdlKHR5cGVvZiBfbWVzc2FnZXNbMF0uY29udGVudCA9PT0gXCJzdHJpbmdcIiA/IF9tZXNzYWdlc1swXS5jb250ZW50IDogXCJcIik7XG5cdFx0Y29uc3QgdGV4dCA9IHR5cGVvZiBmYWxsYmFjay5jb250ZW50ID09PSBcInN0cmluZ1wiID8gZmFsbGJhY2suY29udGVudCA6IFwiXCI7XG5cdFx0Zm9yIChjb25zdCBjaCBvZiB0ZXh0KSB7XG5cdFx0XHRhd2FpdCBuZXcgUHJvbWlzZSgocikgPT4gc2V0VGltZW91dChyLCB0aGlzLnNsZWVwKSk7XG5cdFx0XHRjb25zdCBjZyA9IG5ldyBDaGF0R2VuZXJhdGlvbkNodW5rKHtcblx0XHRcdFx0bWVzc2FnZTogbmV3IEFJTWVzc2FnZUNodW5rKHsgY29udGVudDogY2ggfSksXG5cdFx0XHRcdHRleHQ6IGNoXG5cdFx0XHR9KTtcblx0XHRcdGlmIChvcHRpb25zLnNpZ25hbD8uYWJvcnRlZCkgYnJlYWs7XG5cdFx0XHR5aWVsZCBjZztcblx0XHRcdGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUxMTU5ld1Rva2VuKGNoLCB2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIHsgY2h1bms6IGNnIH0pO1xuXHRcdH1cblx0fVxufTtcbi8qKlxuKiBBIGZha2UgQ2hhdCBNb2RlbCB0aGF0IHJldHVybnMgYSBwcmVkZWZpbmVkIGxpc3Qgb2YgcmVzcG9uc2VzLiBJdCBjYW4gYmUgdXNlZFxuKiBmb3IgdGVzdGluZyBwdXJwb3Nlcy5cbiogQGV4YW1wbGVcbiogYGBgdHlwZXNjcmlwdFxuKiBjb25zdCBjaGF0ID0gbmV3IEZha2VMaXN0Q2hhdE1vZGVsKHtcbiogICByZXNwb25zZXM6IFtcIkknbGwgY2FsbGJhY2sgbGF0ZXIuXCIsIFwiWW91ICdjb25zb2xlJyB0aGVtIVwiXVxuKiB9KTtcbipcbiogY29uc3QgZmlyc3RNZXNzYWdlID0gbmV3IEh1bWFuTWVzc2FnZShcIllvdSB3YW50IHRvIGhlYXIgYSBKYXZhU2NyaXB0IGpva2U/XCIpO1xuKiBjb25zdCBzZWNvbmRNZXNzYWdlID0gbmV3IEh1bWFuTWVzc2FnZShcIkhvdyBkbyB5b3UgY2hlZXIgdXAgYSBKYXZhU2NyaXB0IGRldmVsb3Blcj9cIik7XG4qXG4qIC8vIENhbGwgdGhlIGNoYXQgbW9kZWwgd2l0aCBhIG1lc3NhZ2UgYW5kIGxvZyB0aGUgcmVzcG9uc2VcbiogY29uc3QgZmlyc3RSZXNwb25zZSA9IGF3YWl0IGNoYXQuY2FsbChbZmlyc3RNZXNzYWdlXSk7XG4qIGNvbnNvbGUubG9nKHsgZmlyc3RSZXNwb25zZSB9KTtcbipcbiogY29uc3Qgc2Vjb25kUmVzcG9uc2UgPSBhd2FpdCBjaGF0LmNhbGwoW3NlY29uZE1lc3NhZ2VdKTtcbiogY29uc29sZS5sb2coeyBzZWNvbmRSZXNwb25zZSB9KTtcbiogYGBgXG4qL1xudmFyIEZha2VMaXN0Q2hhdE1vZGVsID0gY2xhc3MgRmFrZUxpc3RDaGF0TW9kZWwgZXh0ZW5kcyBCYXNlQ2hhdE1vZGVsIHtcblx0c3RhdGljIGxjX25hbWUoKSB7XG5cdFx0cmV0dXJuIFwiRmFrZUxpc3RDaGF0TW9kZWxcIjtcblx0fVxuXHRsY19zZXJpYWxpemFibGUgPSB0cnVlO1xuXHRyZXNwb25zZXM7XG5cdGkgPSAwO1xuXHRzbGVlcDtcblx0ZW1pdEN1c3RvbUV2ZW50ID0gZmFsc2U7XG5cdGdlbmVyYXRpb25JbmZvO1xuXHR0b29scyA9IFtdO1xuXHR0b29sU3R5bGUgPSBcIm9wZW5haVwiO1xuXHRjb25zdHJ1Y3RvcihwYXJhbXMpIHtcblx0XHRzdXBlcihwYXJhbXMpO1xuXHRcdGNvbnN0IHsgcmVzcG9uc2VzLCBzbGVlcCwgZW1pdEN1c3RvbUV2ZW50LCBnZW5lcmF0aW9uSW5mbyB9ID0gcGFyYW1zO1xuXHRcdHRoaXMucmVzcG9uc2VzID0gcmVzcG9uc2VzO1xuXHRcdHRoaXMuc2xlZXAgPSBzbGVlcDtcblx0XHR0aGlzLmVtaXRDdXN0b21FdmVudCA9IGVtaXRDdXN0b21FdmVudCA/PyB0aGlzLmVtaXRDdXN0b21FdmVudDtcblx0XHR0aGlzLmdlbmVyYXRpb25JbmZvID0gZ2VuZXJhdGlvbkluZm87XG5cdH1cblx0X2NvbWJpbmVMTE1PdXRwdXQoKSB7XG5cdFx0cmV0dXJuIFtdO1xuXHR9XG5cdF9sbG1UeXBlKCkge1xuXHRcdHJldHVybiBcImZha2UtbGlzdFwiO1xuXHR9XG5cdGFzeW5jIF9nZW5lcmF0ZShfbWVzc2FnZXMsIG9wdGlvbnMsIHJ1bk1hbmFnZXIpIHtcblx0XHRhd2FpdCB0aGlzLl9zbGVlcElmUmVxdWVzdGVkKCk7XG5cdFx0aWYgKG9wdGlvbnM/LnRocm93bkVycm9yU3RyaW5nKSB0aHJvdyBuZXcgRXJyb3Iob3B0aW9ucy50aHJvd25FcnJvclN0cmluZyk7XG5cdFx0aWYgKHRoaXMuZW1pdEN1c3RvbUV2ZW50KSBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDdXN0b21FdmVudChcInNvbWVfdGVzdF9ldmVudFwiLCB7IHNvbWV2YWw6IHRydWUgfSk7XG5cdFx0aWYgKG9wdGlvbnM/LnN0b3A/Lmxlbmd0aCkgcmV0dXJuIHsgZ2VuZXJhdGlvbnM6IFt0aGlzLl9mb3JtYXRHZW5lcmF0aW9uKG9wdGlvbnMuc3RvcFswXSldIH07XG5cdFx0ZWxzZSB7XG5cdFx0XHRjb25zdCByZXNwb25zZSA9IHRoaXMuX2N1cnJlbnRSZXNwb25zZSgpO1xuXHRcdFx0dGhpcy5faW5jcmVtZW50UmVzcG9uc2UoKTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGdlbmVyYXRpb25zOiBbdGhpcy5fZm9ybWF0R2VuZXJhdGlvbihyZXNwb25zZSldLFxuXHRcdFx0XHRsbG1PdXRwdXQ6IHt9XG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXHRfZm9ybWF0R2VuZXJhdGlvbih0ZXh0KSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdG1lc3NhZ2U6IG5ldyBBSU1lc3NhZ2UodGV4dCksXG5cdFx0XHR0ZXh0XG5cdFx0fTtcblx0fVxuXHRhc3luYyAqX3N0cmVhbVJlc3BvbnNlQ2h1bmtzKF9tZXNzYWdlcywgb3B0aW9ucywgcnVuTWFuYWdlcikge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gdGhpcy5fY3VycmVudFJlc3BvbnNlKCk7XG5cdFx0dGhpcy5faW5jcmVtZW50UmVzcG9uc2UoKTtcblx0XHRpZiAodGhpcy5lbWl0Q3VzdG9tRXZlbnQpIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUN1c3RvbUV2ZW50KFwic29tZV90ZXN0X2V2ZW50XCIsIHsgc29tZXZhbDogdHJ1ZSB9KTtcblx0XHRjb25zdCByZXNwb25zZUNoYXJzID0gWy4uLnJlc3BvbnNlXTtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHJlc3BvbnNlQ2hhcnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IHRleHQgPSByZXNwb25zZUNoYXJzW2ldO1xuXHRcdFx0Y29uc3QgaXNMYXN0Q2h1bmsgPSBpID09PSByZXNwb25zZUNoYXJzLmxlbmd0aCAtIDE7XG5cdFx0XHRhd2FpdCB0aGlzLl9zbGVlcElmUmVxdWVzdGVkKCk7XG5cdFx0XHRpZiAob3B0aW9ucz8udGhyb3duRXJyb3JTdHJpbmcpIHRocm93IG5ldyBFcnJvcihvcHRpb25zLnRocm93bkVycm9yU3RyaW5nKTtcblx0XHRcdGNvbnN0IGNodW5rID0gdGhpcy5fY3JlYXRlUmVzcG9uc2VDaHVuayh0ZXh0LCBpc0xhc3RDaHVuayA/IHRoaXMuZ2VuZXJhdGlvbkluZm8gOiB2b2lkIDApO1xuXHRcdFx0aWYgKG9wdGlvbnMuc2lnbmFsPy5hYm9ydGVkKSBicmVhaztcblx0XHRcdHlpZWxkIGNodW5rO1xuXHRcdFx0cnVuTWFuYWdlcj8uaGFuZGxlTExNTmV3VG9rZW4odGV4dCk7XG5cdFx0fVxuXHR9XG5cdGFzeW5jIF9zbGVlcElmUmVxdWVzdGVkKCkge1xuXHRcdGlmICh0aGlzLnNsZWVwICE9PSB2b2lkIDApIGF3YWl0IHRoaXMuX3NsZWVwKCk7XG5cdH1cblx0YXN5bmMgX3NsZWVwKCkge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuXHRcdFx0c2V0VGltZW91dCgoKSA9PiByZXNvbHZlKCksIHRoaXMuc2xlZXApO1xuXHRcdH0pO1xuXHR9XG5cdF9jcmVhdGVSZXNwb25zZUNodW5rKHRleHQsIGdlbmVyYXRpb25JbmZvKSB7XG5cdFx0cmV0dXJuIG5ldyBDaGF0R2VuZXJhdGlvbkNodW5rKHtcblx0XHRcdG1lc3NhZ2U6IG5ldyBBSU1lc3NhZ2VDaHVuayh7IGNvbnRlbnQ6IHRleHQgfSksXG5cdFx0XHR0ZXh0LFxuXHRcdFx0Z2VuZXJhdGlvbkluZm9cblx0XHR9KTtcblx0fVxuXHRfY3VycmVudFJlc3BvbnNlKCkge1xuXHRcdHJldHVybiB0aGlzLnJlc3BvbnNlc1t0aGlzLmldO1xuXHR9XG5cdF9pbmNyZW1lbnRSZXNwb25zZSgpIHtcblx0XHRpZiAodGhpcy5pIDwgdGhpcy5yZXNwb25zZXMubGVuZ3RoIC0gMSkgdGhpcy5pICs9IDE7XG5cdFx0ZWxzZSB0aGlzLmkgPSAwO1xuXHR9XG5cdGJpbmRUb29scyh0b29scykge1xuXHRcdGNvbnN0IG1lcmdlZCA9IFsuLi50aGlzLnRvb2xzLCAuLi50b29sc107XG5cdFx0Y29uc3QgdG9vbERpY3RzID0gbWVyZ2VkLm1hcCgodCkgPT4ge1xuXHRcdFx0c3dpdGNoICh0aGlzLnRvb2xTdHlsZSkge1xuXHRcdFx0XHRjYXNlIFwib3BlbmFpXCI6IHJldHVybiB7XG5cdFx0XHRcdFx0dHlwZTogXCJmdW5jdGlvblwiLFxuXHRcdFx0XHRcdGZ1bmN0aW9uOiB7XG5cdFx0XHRcdFx0XHRuYW1lOiB0Lm5hbWUsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogdC5kZXNjcmlwdGlvbixcblx0XHRcdFx0XHRcdHBhcmFtZXRlcnM6IHRvSnNvblNjaGVtYSh0LnNjaGVtYSlcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0XHRcdGNhc2UgXCJhbnRocm9waWNcIjogcmV0dXJuIHtcblx0XHRcdFx0XHRuYW1lOiB0Lm5hbWUsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IHQuZGVzY3JpcHRpb24sXG5cdFx0XHRcdFx0aW5wdXRfc2NoZW1hOiB0b0pzb25TY2hlbWEodC5zY2hlbWEpXG5cdFx0XHRcdH07XG5cdFx0XHRcdGNhc2UgXCJiZWRyb2NrXCI6IHJldHVybiB7IHRvb2xTcGVjOiB7XG5cdFx0XHRcdFx0bmFtZTogdC5uYW1lLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiB0LmRlc2NyaXB0aW9uLFxuXHRcdFx0XHRcdGlucHV0U2NoZW1hOiB0b0pzb25TY2hlbWEodC5zY2hlbWEpXG5cdFx0XHRcdH0gfTtcblx0XHRcdFx0Y2FzZSBcImdvb2dsZVwiOiByZXR1cm4ge1xuXHRcdFx0XHRcdG5hbWU6IHQubmFtZSxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogdC5kZXNjcmlwdGlvbixcblx0XHRcdFx0XHRwYXJhbWV0ZXJzOiB0b0pzb25TY2hlbWEodC5zY2hlbWEpXG5cdFx0XHRcdH07XG5cdFx0XHRcdGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgdG9vbCBzdHlsZTogJHt0aGlzLnRvb2xTdHlsZX1gKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRjb25zdCB3cmFwcGVkID0gdGhpcy50b29sU3R5bGUgPT09IFwiZ29vZ2xlXCIgPyBbeyBmdW5jdGlvbkRlY2xhcmF0aW9uczogdG9vbERpY3RzIH1dIDogdG9vbERpY3RzO1xuXHRcdGNvbnN0IG5leHQgPSBuZXcgRmFrZUxpc3RDaGF0TW9kZWwoe1xuXHRcdFx0cmVzcG9uc2VzOiB0aGlzLnJlc3BvbnNlcyxcblx0XHRcdHNsZWVwOiB0aGlzLnNsZWVwLFxuXHRcdFx0ZW1pdEN1c3RvbUV2ZW50OiB0aGlzLmVtaXRDdXN0b21FdmVudCxcblx0XHRcdGdlbmVyYXRpb25JbmZvOiB0aGlzLmdlbmVyYXRpb25JbmZvXG5cdFx0fSk7XG5cdFx0bmV4dC50b29scyA9IG1lcmdlZDtcblx0XHRuZXh0LnRvb2xTdHlsZSA9IHRoaXMudG9vbFN0eWxlO1xuXHRcdG5leHQuaSA9IHRoaXMuaTtcblx0XHRyZXR1cm4gbmV4dC53aXRoQ29uZmlnKHsgdG9vbHM6IHdyYXBwZWQgfSk7XG5cdH1cblx0d2l0aFN0cnVjdHVyZWRPdXRwdXQoX3BhcmFtcywgX2NvbmZpZykge1xuXHRcdHJldHVybiBSdW5uYWJsZUxhbWJkYS5mcm9tKGFzeW5jIChpbnB1dCkgPT4ge1xuXHRcdFx0Y29uc3QgbWVzc2FnZSA9IGF3YWl0IHRoaXMuaW52b2tlKGlucHV0KTtcblx0XHRcdGlmIChtZXNzYWdlLnRvb2xfY2FsbHM/LlswXT8uYXJncykgcmV0dXJuIG1lc3NhZ2UudG9vbF9jYWxsc1swXS5hcmdzO1xuXHRcdFx0aWYgKHR5cGVvZiBtZXNzYWdlLmNvbnRlbnQgPT09IFwic3RyaW5nXCIpIHJldHVybiBKU09OLnBhcnNlKG1lc3NhZ2UuY29udGVudCk7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJObyBzdHJ1Y3R1cmVkIG91dHB1dCBmb3VuZFwiKTtcblx0XHR9KTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBGYWtlQ2hhdE1vZGVsLCBGYWtlTGlzdENoYXRNb2RlbCwgRmFrZVN0cmVhbWluZ0NoYXRNb2RlbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2hhdF9tb2RlbHMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/testing/chat_models.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/testing/embeddings.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/testing/embeddings.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FakeEmbeddings: () => (/* binding */ FakeEmbeddings),\n/* harmony export */   SyntheticEmbeddings: () => (/* binding */ SyntheticEmbeddings)\n/* harmony export */ });\n/* harmony import */ var _embeddings_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../embeddings.js */ \"(ssr)/./node_modules/@langchain/core/dist/embeddings.js\");\n\n\n//#region src/utils/testing/embeddings.ts\n/**\n* A class that provides synthetic embeddings by overriding the\n* embedDocuments and embedQuery methods to generate embeddings based on\n* the input documents. The embeddings are generated by converting each\n* document into chunks, calculating a numerical value for each chunk, and\n* returning an array of these values as the embedding.\n*/\nvar SyntheticEmbeddings = class extends _embeddings_js__WEBPACK_IMPORTED_MODULE_0__.Embeddings {\n\tvectorSize;\n\tconstructor(params) {\n\t\tsuper(params ?? {});\n\t\tthis.vectorSize = params?.vectorSize ?? 4;\n\t}\n\t/**\n\t* Generates synthetic embeddings for a list of documents.\n\t* @param documents List of documents to generate embeddings for.\n\t* @returns A promise that resolves with a list of synthetic embeddings for each document.\n\t*/\n\tasync embedDocuments(documents) {\n\t\treturn Promise.all(documents.map((doc) => this.embedQuery(doc)));\n\t}\n\t/**\n\t* Generates a synthetic embedding for a document. The document is\n\t* converted into chunks, a numerical value is calculated for each chunk,\n\t* and an array of these values is returned as the embedding.\n\t* @param document The document to generate an embedding for.\n\t* @returns A promise that resolves with a synthetic embedding for the document.\n\t*/\n\tasync embedQuery(document) {\n\t\tlet doc = document;\n\t\tdoc = doc.toLowerCase().replaceAll(/[^a-z ]/g, \"\");\n\t\tconst padMod = doc.length % this.vectorSize;\n\t\tconst padGapSize = padMod === 0 ? 0 : this.vectorSize - padMod;\n\t\tconst padSize = doc.length + padGapSize;\n\t\tdoc = doc.padEnd(padSize, \" \");\n\t\tconst chunkSize = doc.length / this.vectorSize;\n\t\tconst docChunk = [];\n\t\tfor (let co = 0; co < doc.length; co += chunkSize) docChunk.push(doc.slice(co, co + chunkSize));\n\t\tconst ret = docChunk.map((s) => {\n\t\t\tlet sum = 0;\n\t\t\tfor (let co = 0; co < s.length; co += 1) sum += s === \" \" ? 0 : s.charCodeAt(co);\n\t\t\tconst ret$1 = sum % 26 / 26;\n\t\t\treturn ret$1;\n\t\t});\n\t\treturn ret;\n\t}\n};\n/**\n* A class that provides fake embeddings by overriding the embedDocuments\n* and embedQuery methods to return fixed values.\n*/\nvar FakeEmbeddings = class extends _embeddings_js__WEBPACK_IMPORTED_MODULE_0__.Embeddings {\n\tconstructor(params) {\n\t\tsuper(params ?? {});\n\t}\n\t/**\n\t* Generates fixed embeddings for a list of documents.\n\t* @param documents List of documents to generate embeddings for.\n\t* @returns A promise that resolves with a list of fixed embeddings for each document.\n\t*/\n\tembedDocuments(documents) {\n\t\treturn Promise.resolve(documents.map(() => [\n\t\t\t.1,\n\t\t\t.2,\n\t\t\t.3,\n\t\t\t.4\n\t\t]));\n\t}\n\t/**\n\t* Generates a fixed embedding for a query.\n\t* @param _ The query to generate an embedding for.\n\t* @returns A promise that resolves with a fixed embedding for the query.\n\t*/\n\tembedQuery(_) {\n\t\treturn Promise.resolve([\n\t\t\t.1,\n\t\t\t.2,\n\t\t\t.3,\n\t\t\t.4\n\t\t]);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=embeddings.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdGVzdGluZy9lbWJlZGRpbmdzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFpRDs7QUFFakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxzREFBVTtBQUNsRDtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsaUJBQWlCO0FBQ3BDO0FBQ0E7QUFDQSxvQkFBb0IsZUFBZTtBQUNuQztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHNEQUFVO0FBQzdDO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQytDO0FBQy9DIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdGVzdGluZy9lbWJlZGRpbmdzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVtYmVkZGluZ3MgfSBmcm9tIFwiLi4vLi4vZW1iZWRkaW5ncy5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL3Rlc3RpbmcvZW1iZWRkaW5ncy50c1xuLyoqXG4qIEEgY2xhc3MgdGhhdCBwcm92aWRlcyBzeW50aGV0aWMgZW1iZWRkaW5ncyBieSBvdmVycmlkaW5nIHRoZVxuKiBlbWJlZERvY3VtZW50cyBhbmQgZW1iZWRRdWVyeSBtZXRob2RzIHRvIGdlbmVyYXRlIGVtYmVkZGluZ3MgYmFzZWQgb25cbiogdGhlIGlucHV0IGRvY3VtZW50cy4gVGhlIGVtYmVkZGluZ3MgYXJlIGdlbmVyYXRlZCBieSBjb252ZXJ0aW5nIGVhY2hcbiogZG9jdW1lbnQgaW50byBjaHVua3MsIGNhbGN1bGF0aW5nIGEgbnVtZXJpY2FsIHZhbHVlIGZvciBlYWNoIGNodW5rLCBhbmRcbiogcmV0dXJuaW5nIGFuIGFycmF5IG9mIHRoZXNlIHZhbHVlcyBhcyB0aGUgZW1iZWRkaW5nLlxuKi9cbnZhciBTeW50aGV0aWNFbWJlZGRpbmdzID0gY2xhc3MgZXh0ZW5kcyBFbWJlZGRpbmdzIHtcblx0dmVjdG9yU2l6ZTtcblx0Y29uc3RydWN0b3IocGFyYW1zKSB7XG5cdFx0c3VwZXIocGFyYW1zID8/IHt9KTtcblx0XHR0aGlzLnZlY3RvclNpemUgPSBwYXJhbXM/LnZlY3RvclNpemUgPz8gNDtcblx0fVxuXHQvKipcblx0KiBHZW5lcmF0ZXMgc3ludGhldGljIGVtYmVkZGluZ3MgZm9yIGEgbGlzdCBvZiBkb2N1bWVudHMuXG5cdCogQHBhcmFtIGRvY3VtZW50cyBMaXN0IG9mIGRvY3VtZW50cyB0byBnZW5lcmF0ZSBlbWJlZGRpbmdzIGZvci5cblx0KiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIGEgbGlzdCBvZiBzeW50aGV0aWMgZW1iZWRkaW5ncyBmb3IgZWFjaCBkb2N1bWVudC5cblx0Ki9cblx0YXN5bmMgZW1iZWREb2N1bWVudHMoZG9jdW1lbnRzKSB7XG5cdFx0cmV0dXJuIFByb21pc2UuYWxsKGRvY3VtZW50cy5tYXAoKGRvYykgPT4gdGhpcy5lbWJlZFF1ZXJ5KGRvYykpKTtcblx0fVxuXHQvKipcblx0KiBHZW5lcmF0ZXMgYSBzeW50aGV0aWMgZW1iZWRkaW5nIGZvciBhIGRvY3VtZW50LiBUaGUgZG9jdW1lbnQgaXNcblx0KiBjb252ZXJ0ZWQgaW50byBjaHVua3MsIGEgbnVtZXJpY2FsIHZhbHVlIGlzIGNhbGN1bGF0ZWQgZm9yIGVhY2ggY2h1bmssXG5cdCogYW5kIGFuIGFycmF5IG9mIHRoZXNlIHZhbHVlcyBpcyByZXR1cm5lZCBhcyB0aGUgZW1iZWRkaW5nLlxuXHQqIEBwYXJhbSBkb2N1bWVudCBUaGUgZG9jdW1lbnQgdG8gZ2VuZXJhdGUgYW4gZW1iZWRkaW5nIGZvci5cblx0KiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIGEgc3ludGhldGljIGVtYmVkZGluZyBmb3IgdGhlIGRvY3VtZW50LlxuXHQqL1xuXHRhc3luYyBlbWJlZFF1ZXJ5KGRvY3VtZW50KSB7XG5cdFx0bGV0IGRvYyA9IGRvY3VtZW50O1xuXHRcdGRvYyA9IGRvYy50b0xvd2VyQ2FzZSgpLnJlcGxhY2VBbGwoL1teYS16IF0vZywgXCJcIik7XG5cdFx0Y29uc3QgcGFkTW9kID0gZG9jLmxlbmd0aCAlIHRoaXMudmVjdG9yU2l6ZTtcblx0XHRjb25zdCBwYWRHYXBTaXplID0gcGFkTW9kID09PSAwID8gMCA6IHRoaXMudmVjdG9yU2l6ZSAtIHBhZE1vZDtcblx0XHRjb25zdCBwYWRTaXplID0gZG9jLmxlbmd0aCArIHBhZEdhcFNpemU7XG5cdFx0ZG9jID0gZG9jLnBhZEVuZChwYWRTaXplLCBcIiBcIik7XG5cdFx0Y29uc3QgY2h1bmtTaXplID0gZG9jLmxlbmd0aCAvIHRoaXMudmVjdG9yU2l6ZTtcblx0XHRjb25zdCBkb2NDaHVuayA9IFtdO1xuXHRcdGZvciAobGV0IGNvID0gMDsgY28gPCBkb2MubGVuZ3RoOyBjbyArPSBjaHVua1NpemUpIGRvY0NodW5rLnB1c2goZG9jLnNsaWNlKGNvLCBjbyArIGNodW5rU2l6ZSkpO1xuXHRcdGNvbnN0IHJldCA9IGRvY0NodW5rLm1hcCgocykgPT4ge1xuXHRcdFx0bGV0IHN1bSA9IDA7XG5cdFx0XHRmb3IgKGxldCBjbyA9IDA7IGNvIDwgcy5sZW5ndGg7IGNvICs9IDEpIHN1bSArPSBzID09PSBcIiBcIiA/IDAgOiBzLmNoYXJDb2RlQXQoY28pO1xuXHRcdFx0Y29uc3QgcmV0JDEgPSBzdW0gJSAyNiAvIDI2O1xuXHRcdFx0cmV0dXJuIHJldCQxO1xuXHRcdH0pO1xuXHRcdHJldHVybiByZXQ7XG5cdH1cbn07XG4vKipcbiogQSBjbGFzcyB0aGF0IHByb3ZpZGVzIGZha2UgZW1iZWRkaW5ncyBieSBvdmVycmlkaW5nIHRoZSBlbWJlZERvY3VtZW50c1xuKiBhbmQgZW1iZWRRdWVyeSBtZXRob2RzIHRvIHJldHVybiBmaXhlZCB2YWx1ZXMuXG4qL1xudmFyIEZha2VFbWJlZGRpbmdzID0gY2xhc3MgZXh0ZW5kcyBFbWJlZGRpbmdzIHtcblx0Y29uc3RydWN0b3IocGFyYW1zKSB7XG5cdFx0c3VwZXIocGFyYW1zID8/IHt9KTtcblx0fVxuXHQvKipcblx0KiBHZW5lcmF0ZXMgZml4ZWQgZW1iZWRkaW5ncyBmb3IgYSBsaXN0IG9mIGRvY3VtZW50cy5cblx0KiBAcGFyYW0gZG9jdW1lbnRzIExpc3Qgb2YgZG9jdW1lbnRzIHRvIGdlbmVyYXRlIGVtYmVkZGluZ3MgZm9yLlxuXHQqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYSBsaXN0IG9mIGZpeGVkIGVtYmVkZGluZ3MgZm9yIGVhY2ggZG9jdW1lbnQuXG5cdCovXG5cdGVtYmVkRG9jdW1lbnRzKGRvY3VtZW50cykge1xuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoZG9jdW1lbnRzLm1hcCgoKSA9PiBbXG5cdFx0XHQuMSxcblx0XHRcdC4yLFxuXHRcdFx0LjMsXG5cdFx0XHQuNFxuXHRcdF0pKTtcblx0fVxuXHQvKipcblx0KiBHZW5lcmF0ZXMgYSBmaXhlZCBlbWJlZGRpbmcgZm9yIGEgcXVlcnkuXG5cdCogQHBhcmFtIF8gVGhlIHF1ZXJ5IHRvIGdlbmVyYXRlIGFuIGVtYmVkZGluZyBmb3IuXG5cdCogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBhIGZpeGVkIGVtYmVkZGluZyBmb3IgdGhlIHF1ZXJ5LlxuXHQqL1xuXHRlbWJlZFF1ZXJ5KF8pIHtcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtcblx0XHRcdC4xLFxuXHRcdFx0LjIsXG5cdFx0XHQuMyxcblx0XHRcdC40XG5cdFx0XSk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgRmFrZUVtYmVkZGluZ3MsIFN5bnRoZXRpY0VtYmVkZGluZ3MgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVtYmVkZGluZ3MuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/testing/embeddings.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/testing/index.js":
/*!******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/testing/index.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FakeChatMessageHistory: () => (/* reexport safe */ _message_history_js__WEBPACK_IMPORTED_MODULE_4__.FakeChatMessageHistory),\n/* harmony export */   FakeChatModel: () => (/* reexport safe */ _chat_models_js__WEBPACK_IMPORTED_MODULE_1__.FakeChatModel),\n/* harmony export */   FakeEmbeddings: () => (/* reexport safe */ _embeddings_js__WEBPACK_IMPORTED_MODULE_2__.FakeEmbeddings),\n/* harmony export */   FakeLLM: () => (/* reexport safe */ _llms_js__WEBPACK_IMPORTED_MODULE_3__.FakeLLM),\n/* harmony export */   FakeListChatMessageHistory: () => (/* reexport safe */ _message_history_js__WEBPACK_IMPORTED_MODULE_4__.FakeListChatMessageHistory),\n/* harmony export */   FakeListChatModel: () => (/* reexport safe */ _chat_models_js__WEBPACK_IMPORTED_MODULE_1__.FakeListChatModel),\n/* harmony export */   FakeRetriever: () => (/* reexport safe */ _retrievers_js__WEBPACK_IMPORTED_MODULE_6__.FakeRetriever),\n/* harmony export */   FakeRunnable: () => (/* reexport safe */ _runnables_js__WEBPACK_IMPORTED_MODULE_7__.FakeRunnable),\n/* harmony export */   FakeSplitIntoListParser: () => (/* reexport safe */ _output_parsers_js__WEBPACK_IMPORTED_MODULE_5__.FakeSplitIntoListParser),\n/* harmony export */   FakeStreamingChatModel: () => (/* reexport safe */ _chat_models_js__WEBPACK_IMPORTED_MODULE_1__.FakeStreamingChatModel),\n/* harmony export */   FakeStreamingLLM: () => (/* reexport safe */ _llms_js__WEBPACK_IMPORTED_MODULE_3__.FakeStreamingLLM),\n/* harmony export */   FakeTool: () => (/* reexport safe */ _tools_js__WEBPACK_IMPORTED_MODULE_8__.FakeTool),\n/* harmony export */   FakeTracer: () => (/* reexport safe */ _message_history_js__WEBPACK_IMPORTED_MODULE_4__.FakeTracer),\n/* harmony export */   FakeVectorStore: () => (/* reexport safe */ _vectorstores_js__WEBPACK_IMPORTED_MODULE_10__.FakeVectorStore),\n/* harmony export */   SingleRunExtractor: () => (/* reexport safe */ _tracers_js__WEBPACK_IMPORTED_MODULE_9__.SingleRunExtractor),\n/* harmony export */   SyntheticEmbeddings: () => (/* reexport safe */ _embeddings_js__WEBPACK_IMPORTED_MODULE_2__.SyntheticEmbeddings),\n/* harmony export */   testing_exports: () => (/* binding */ testing_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _chat_models_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chat_models.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/testing/chat_models.js\");\n/* harmony import */ var _embeddings_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./embeddings.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/testing/embeddings.js\");\n/* harmony import */ var _llms_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./llms.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/testing/llms.js\");\n/* harmony import */ var _message_history_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./message_history.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/testing/message_history.js\");\n/* harmony import */ var _output_parsers_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./output_parsers.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/testing/output_parsers.js\");\n/* harmony import */ var _retrievers_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./retrievers.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/testing/retrievers.js\");\n/* harmony import */ var _runnables_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./runnables.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/testing/runnables.js\");\n/* harmony import */ var _tools_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./tools.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/testing/tools.js\");\n/* harmony import */ var _tracers_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./tracers.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/testing/tracers.js\");\n/* harmony import */ var _vectorstores_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./vectorstores.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/testing/vectorstores.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/utils/testing/index.ts\nvar testing_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(testing_exports, {\n\tFakeChatMessageHistory: () => _message_history_js__WEBPACK_IMPORTED_MODULE_4__.FakeChatMessageHistory,\n\tFakeChatModel: () => _chat_models_js__WEBPACK_IMPORTED_MODULE_1__.FakeChatModel,\n\tFakeEmbeddings: () => _embeddings_js__WEBPACK_IMPORTED_MODULE_2__.FakeEmbeddings,\n\tFakeLLM: () => _llms_js__WEBPACK_IMPORTED_MODULE_3__.FakeLLM,\n\tFakeListChatMessageHistory: () => _message_history_js__WEBPACK_IMPORTED_MODULE_4__.FakeListChatMessageHistory,\n\tFakeListChatModel: () => _chat_models_js__WEBPACK_IMPORTED_MODULE_1__.FakeListChatModel,\n\tFakeRetriever: () => _retrievers_js__WEBPACK_IMPORTED_MODULE_6__.FakeRetriever,\n\tFakeRunnable: () => _runnables_js__WEBPACK_IMPORTED_MODULE_7__.FakeRunnable,\n\tFakeSplitIntoListParser: () => _output_parsers_js__WEBPACK_IMPORTED_MODULE_5__.FakeSplitIntoListParser,\n\tFakeStreamingChatModel: () => _chat_models_js__WEBPACK_IMPORTED_MODULE_1__.FakeStreamingChatModel,\n\tFakeStreamingLLM: () => _llms_js__WEBPACK_IMPORTED_MODULE_3__.FakeStreamingLLM,\n\tFakeTool: () => _tools_js__WEBPACK_IMPORTED_MODULE_8__.FakeTool,\n\tFakeTracer: () => _message_history_js__WEBPACK_IMPORTED_MODULE_4__.FakeTracer,\n\tFakeVectorStore: () => _vectorstores_js__WEBPACK_IMPORTED_MODULE_10__.FakeVectorStore,\n\tSingleRunExtractor: () => _tracers_js__WEBPACK_IMPORTED_MODULE_9__.SingleRunExtractor,\n\tSyntheticEmbeddings: () => _embeddings_js__WEBPACK_IMPORTED_MODULE_2__.SyntheticEmbeddings\n});\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdGVzdGluZy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQThEO0FBQzhCO0FBQ3RCO0FBQ2hCO0FBQ2dEO0FBQ3hDO0FBQ2Q7QUFDRjtBQUNSO0FBQ1k7QUFDRTs7QUFFcEQ7QUFDQTtBQUNBLHNFQUFRO0FBQ1IsK0JBQStCLHVFQUFzQjtBQUNyRCxzQkFBc0IsMERBQWE7QUFDbkMsdUJBQXVCLDBEQUFjO0FBQ3JDLGdCQUFnQiw2Q0FBTztBQUN2QixtQ0FBbUMsMkVBQTBCO0FBQzdELDBCQUEwQiw4REFBaUI7QUFDM0Msc0JBQXNCLHlEQUFhO0FBQ25DLHFCQUFxQix1REFBWTtBQUNqQyxnQ0FBZ0MsdUVBQXVCO0FBQ3ZELCtCQUErQixtRUFBc0I7QUFDckQseUJBQXlCLHNEQUFnQjtBQUN6QyxpQkFBaUIsK0NBQVE7QUFDekIsbUJBQW1CLDJEQUFVO0FBQzdCLHdCQUF3Qiw4REFBZTtBQUN2QywyQkFBMkIsMkRBQWtCO0FBQzdDLDRCQUE0QiwrREFBbUI7QUFDL0MsQ0FBQzs7QUFFRDtBQUMwVDtBQUMxVCIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3Rlc3RpbmcvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19leHBvcnQgfSBmcm9tIFwiLi4vLi4vX3ZpcnR1YWwvcm9sbGRvd25fcnVudGltZS5qc1wiO1xuaW1wb3J0IHsgRmFrZUNoYXRNb2RlbCwgRmFrZUxpc3RDaGF0TW9kZWwsIEZha2VTdHJlYW1pbmdDaGF0TW9kZWwgfSBmcm9tIFwiLi9jaGF0X21vZGVscy5qc1wiO1xuaW1wb3J0IHsgRmFrZUVtYmVkZGluZ3MsIFN5bnRoZXRpY0VtYmVkZGluZ3MgfSBmcm9tIFwiLi9lbWJlZGRpbmdzLmpzXCI7XG5pbXBvcnQgeyBGYWtlTExNLCBGYWtlU3RyZWFtaW5nTExNIH0gZnJvbSBcIi4vbGxtcy5qc1wiO1xuaW1wb3J0IHsgRmFrZUNoYXRNZXNzYWdlSGlzdG9yeSwgRmFrZUxpc3RDaGF0TWVzc2FnZUhpc3RvcnksIEZha2VUcmFjZXIgfSBmcm9tIFwiLi9tZXNzYWdlX2hpc3RvcnkuanNcIjtcbmltcG9ydCB7IEZha2VTcGxpdEludG9MaXN0UGFyc2VyIH0gZnJvbSBcIi4vb3V0cHV0X3BhcnNlcnMuanNcIjtcbmltcG9ydCB7IEZha2VSZXRyaWV2ZXIgfSBmcm9tIFwiLi9yZXRyaWV2ZXJzLmpzXCI7XG5pbXBvcnQgeyBGYWtlUnVubmFibGUgfSBmcm9tIFwiLi9ydW5uYWJsZXMuanNcIjtcbmltcG9ydCB7IEZha2VUb29sIH0gZnJvbSBcIi4vdG9vbHMuanNcIjtcbmltcG9ydCB7IFNpbmdsZVJ1bkV4dHJhY3RvciB9IGZyb20gXCIuL3RyYWNlcnMuanNcIjtcbmltcG9ydCB7IEZha2VWZWN0b3JTdG9yZSB9IGZyb20gXCIuL3ZlY3RvcnN0b3Jlcy5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL3Rlc3RpbmcvaW5kZXgudHNcbnZhciB0ZXN0aW5nX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KHRlc3RpbmdfZXhwb3J0cywge1xuXHRGYWtlQ2hhdE1lc3NhZ2VIaXN0b3J5OiAoKSA9PiBGYWtlQ2hhdE1lc3NhZ2VIaXN0b3J5LFxuXHRGYWtlQ2hhdE1vZGVsOiAoKSA9PiBGYWtlQ2hhdE1vZGVsLFxuXHRGYWtlRW1iZWRkaW5nczogKCkgPT4gRmFrZUVtYmVkZGluZ3MsXG5cdEZha2VMTE06ICgpID0+IEZha2VMTE0sXG5cdEZha2VMaXN0Q2hhdE1lc3NhZ2VIaXN0b3J5OiAoKSA9PiBGYWtlTGlzdENoYXRNZXNzYWdlSGlzdG9yeSxcblx0RmFrZUxpc3RDaGF0TW9kZWw6ICgpID0+IEZha2VMaXN0Q2hhdE1vZGVsLFxuXHRGYWtlUmV0cmlldmVyOiAoKSA9PiBGYWtlUmV0cmlldmVyLFxuXHRGYWtlUnVubmFibGU6ICgpID0+IEZha2VSdW5uYWJsZSxcblx0RmFrZVNwbGl0SW50b0xpc3RQYXJzZXI6ICgpID0+IEZha2VTcGxpdEludG9MaXN0UGFyc2VyLFxuXHRGYWtlU3RyZWFtaW5nQ2hhdE1vZGVsOiAoKSA9PiBGYWtlU3RyZWFtaW5nQ2hhdE1vZGVsLFxuXHRGYWtlU3RyZWFtaW5nTExNOiAoKSA9PiBGYWtlU3RyZWFtaW5nTExNLFxuXHRGYWtlVG9vbDogKCkgPT4gRmFrZVRvb2wsXG5cdEZha2VUcmFjZXI6ICgpID0+IEZha2VUcmFjZXIsXG5cdEZha2VWZWN0b3JTdG9yZTogKCkgPT4gRmFrZVZlY3RvclN0b3JlLFxuXHRTaW5nbGVSdW5FeHRyYWN0b3I6ICgpID0+IFNpbmdsZVJ1bkV4dHJhY3Rvcixcblx0U3ludGhldGljRW1iZWRkaW5nczogKCkgPT4gU3ludGhldGljRW1iZWRkaW5nc1xufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgRmFrZUNoYXRNZXNzYWdlSGlzdG9yeSwgRmFrZUNoYXRNb2RlbCwgRmFrZUVtYmVkZGluZ3MsIEZha2VMTE0sIEZha2VMaXN0Q2hhdE1lc3NhZ2VIaXN0b3J5LCBGYWtlTGlzdENoYXRNb2RlbCwgRmFrZVJldHJpZXZlciwgRmFrZVJ1bm5hYmxlLCBGYWtlU3BsaXRJbnRvTGlzdFBhcnNlciwgRmFrZVN0cmVhbWluZ0NoYXRNb2RlbCwgRmFrZVN0cmVhbWluZ0xMTSwgRmFrZVRvb2wsIEZha2VUcmFjZXIsIEZha2VWZWN0b3JTdG9yZSwgU2luZ2xlUnVuRXh0cmFjdG9yLCBTeW50aGV0aWNFbWJlZGRpbmdzLCB0ZXN0aW5nX2V4cG9ydHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/testing/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/testing/llms.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/testing/llms.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FakeLLM: () => (/* binding */ FakeLLM),\n/* harmony export */   FakeStreamingLLM: () => (/* binding */ FakeStreamingLLM)\n/* harmony export */ });\n/* harmony import */ var _language_models_llms_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../language_models/llms.js */ \"(ssr)/./node_modules/@langchain/core/dist/language_models/llms.js\");\n\n\n//#region src/utils/testing/llms.ts\nvar FakeLLM = class extends _language_models_llms_js__WEBPACK_IMPORTED_MODULE_0__.LLM {\n\tresponse;\n\tthrownErrorString;\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.response = fields.response;\n\t\tthis.thrownErrorString = fields.thrownErrorString;\n\t}\n\t_llmType() {\n\t\treturn \"fake\";\n\t}\n\tasync _call(prompt, _options, runManager) {\n\t\tif (this.thrownErrorString) throw new Error(this.thrownErrorString);\n\t\tconst response = this.response ?? prompt;\n\t\tawait runManager?.handleLLMNewToken(response);\n\t\treturn response;\n\t}\n};\nvar FakeStreamingLLM = class extends _language_models_llms_js__WEBPACK_IMPORTED_MODULE_0__.LLM {\n\tsleep = 50;\n\tresponses;\n\tthrownErrorString;\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.sleep = fields.sleep ?? this.sleep;\n\t\tthis.responses = fields.responses;\n\t\tthis.thrownErrorString = fields.thrownErrorString;\n\t}\n\t_llmType() {\n\t\treturn \"fake\";\n\t}\n\tasync _call(prompt) {\n\t\tif (this.thrownErrorString) throw new Error(this.thrownErrorString);\n\t\tconst response = this.responses?.[0];\n\t\tthis.responses = this.responses?.slice(1);\n\t\treturn response ?? prompt;\n\t}\n\tasync *_streamResponseChunks(input, _options, runManager) {\n\t\tif (this.thrownErrorString) throw new Error(this.thrownErrorString);\n\t\tconst response = this.responses?.[0];\n\t\tthis.responses = this.responses?.slice(1);\n\t\tfor (const c of response ?? input) {\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, this.sleep));\n\t\t\tyield {\n\t\t\t\ttext: c,\n\t\t\t\tgenerationInfo: {}\n\t\t\t};\n\t\t\tawait runManager?.handleLLMNewToken(c);\n\t\t}\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=llms.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdGVzdGluZy9sbG1zLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFvRDs7QUFFcEQ7QUFDQSw0QkFBNEIseURBQUc7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyx5REFBRztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3FDO0FBQ3JDIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdGVzdGluZy9sbG1zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IExMTSB9IGZyb20gXCIuLi8uLi9sYW5ndWFnZV9tb2RlbHMvbGxtcy5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL3Rlc3RpbmcvbGxtcy50c1xudmFyIEZha2VMTE0gPSBjbGFzcyBleHRlbmRzIExMTSB7XG5cdHJlc3BvbnNlO1xuXHR0aHJvd25FcnJvclN0cmluZztcblx0Y29uc3RydWN0b3IoZmllbGRzKSB7XG5cdFx0c3VwZXIoZmllbGRzKTtcblx0XHR0aGlzLnJlc3BvbnNlID0gZmllbGRzLnJlc3BvbnNlO1xuXHRcdHRoaXMudGhyb3duRXJyb3JTdHJpbmcgPSBmaWVsZHMudGhyb3duRXJyb3JTdHJpbmc7XG5cdH1cblx0X2xsbVR5cGUoKSB7XG5cdFx0cmV0dXJuIFwiZmFrZVwiO1xuXHR9XG5cdGFzeW5jIF9jYWxsKHByb21wdCwgX29wdGlvbnMsIHJ1bk1hbmFnZXIpIHtcblx0XHRpZiAodGhpcy50aHJvd25FcnJvclN0cmluZykgdGhyb3cgbmV3IEVycm9yKHRoaXMudGhyb3duRXJyb3JTdHJpbmcpO1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gdGhpcy5yZXNwb25zZSA/PyBwcm9tcHQ7XG5cdFx0YXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlTExNTmV3VG9rZW4ocmVzcG9uc2UpO1xuXHRcdHJldHVybiByZXNwb25zZTtcblx0fVxufTtcbnZhciBGYWtlU3RyZWFtaW5nTExNID0gY2xhc3MgZXh0ZW5kcyBMTE0ge1xuXHRzbGVlcCA9IDUwO1xuXHRyZXNwb25zZXM7XG5cdHRocm93bkVycm9yU3RyaW5nO1xuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHRzdXBlcihmaWVsZHMpO1xuXHRcdHRoaXMuc2xlZXAgPSBmaWVsZHMuc2xlZXAgPz8gdGhpcy5zbGVlcDtcblx0XHR0aGlzLnJlc3BvbnNlcyA9IGZpZWxkcy5yZXNwb25zZXM7XG5cdFx0dGhpcy50aHJvd25FcnJvclN0cmluZyA9IGZpZWxkcy50aHJvd25FcnJvclN0cmluZztcblx0fVxuXHRfbGxtVHlwZSgpIHtcblx0XHRyZXR1cm4gXCJmYWtlXCI7XG5cdH1cblx0YXN5bmMgX2NhbGwocHJvbXB0KSB7XG5cdFx0aWYgKHRoaXMudGhyb3duRXJyb3JTdHJpbmcpIHRocm93IG5ldyBFcnJvcih0aGlzLnRocm93bkVycm9yU3RyaW5nKTtcblx0XHRjb25zdCByZXNwb25zZSA9IHRoaXMucmVzcG9uc2VzPy5bMF07XG5cdFx0dGhpcy5yZXNwb25zZXMgPSB0aGlzLnJlc3BvbnNlcz8uc2xpY2UoMSk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlID8/IHByb21wdDtcblx0fVxuXHRhc3luYyAqX3N0cmVhbVJlc3BvbnNlQ2h1bmtzKGlucHV0LCBfb3B0aW9ucywgcnVuTWFuYWdlcikge1xuXHRcdGlmICh0aGlzLnRocm93bkVycm9yU3RyaW5nKSB0aHJvdyBuZXcgRXJyb3IodGhpcy50aHJvd25FcnJvclN0cmluZyk7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSB0aGlzLnJlc3BvbnNlcz8uWzBdO1xuXHRcdHRoaXMucmVzcG9uc2VzID0gdGhpcy5yZXNwb25zZXM/LnNsaWNlKDEpO1xuXHRcdGZvciAoY29uc3QgYyBvZiByZXNwb25zZSA/PyBpbnB1dCkge1xuXHRcdFx0YXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgdGhpcy5zbGVlcCkpO1xuXHRcdFx0eWllbGQge1xuXHRcdFx0XHR0ZXh0OiBjLFxuXHRcdFx0XHRnZW5lcmF0aW9uSW5mbzoge31cblx0XHRcdH07XG5cdFx0XHRhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVMTE1OZXdUb2tlbihjKTtcblx0XHR9XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgRmFrZUxMTSwgRmFrZVN0cmVhbWluZ0xMTSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGxtcy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/testing/llms.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/testing/message_history.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/testing/message_history.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FakeChatMessageHistory: () => (/* binding */ FakeChatMessageHistory),\n/* harmony export */   FakeListChatMessageHistory: () => (/* binding */ FakeListChatMessageHistory),\n/* harmony export */   FakeTracer: () => (/* binding */ FakeTracer)\n/* harmony export */ });\n/* harmony import */ var _messages_human_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../messages/human.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/human.js\");\n/* harmony import */ var _messages_ai_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../messages/ai.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _tracers_base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../tracers/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/tracers/base.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../messages/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _chat_history_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../chat_history.js */ \"(ssr)/./node_modules/@langchain/core/dist/chat_history.js\");\n\n\n\n\n\n\n//#region src/utils/testing/message_history.ts\nvar FakeChatMessageHistory = class extends _chat_history_js__WEBPACK_IMPORTED_MODULE_4__.BaseChatMessageHistory {\n\tlc_namespace = [\n\t\t\"langchain_core\",\n\t\t\"message\",\n\t\t\"fake\"\n\t];\n\tmessages = [];\n\tconstructor() {\n\t\tsuper();\n\t}\n\tasync getMessages() {\n\t\treturn this.messages;\n\t}\n\tasync addMessage(message) {\n\t\tthis.messages.push(message);\n\t}\n\tasync addUserMessage(message) {\n\t\tthis.messages.push(new _messages_human_js__WEBPACK_IMPORTED_MODULE_0__.HumanMessage(message));\n\t}\n\tasync addAIMessage(message) {\n\t\tthis.messages.push(new _messages_ai_js__WEBPACK_IMPORTED_MODULE_1__.AIMessage(message));\n\t}\n\tasync clear() {\n\t\tthis.messages = [];\n\t}\n};\nvar FakeListChatMessageHistory = class extends _chat_history_js__WEBPACK_IMPORTED_MODULE_4__.BaseListChatMessageHistory {\n\tlc_namespace = [\n\t\t\"langchain_core\",\n\t\t\"message\",\n\t\t\"fake\"\n\t];\n\tmessages = [];\n\tconstructor() {\n\t\tsuper();\n\t}\n\tasync addMessage(message) {\n\t\tthis.messages.push(message);\n\t}\n\tasync getMessages() {\n\t\treturn this.messages;\n\t}\n};\nvar FakeTracer = class extends _tracers_base_js__WEBPACK_IMPORTED_MODULE_2__.BaseTracer {\n\tname = \"fake_tracer\";\n\truns = [];\n\tconstructor() {\n\t\tsuper();\n\t}\n\tpersistRun(run) {\n\t\tthis.runs.push(run);\n\t\treturn Promise.resolve();\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=message_history.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdGVzdGluZy9tZXNzYWdlX2hpc3RvcnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBdUQ7QUFDTjtBQUNFO0FBQ2xCO0FBQzBEOztBQUUzRjtBQUNBLDJDQUEyQyxvRUFBc0I7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsNERBQVk7QUFDckM7QUFDQTtBQUNBLHlCQUF5QixzREFBUztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLHdFQUEwQjtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQix3REFBVTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUMwRTtBQUMxRSIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3Rlc3RpbmcvbWVzc2FnZV9oaXN0b3J5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEh1bWFuTWVzc2FnZSB9IGZyb20gXCIuLi8uLi9tZXNzYWdlcy9odW1hbi5qc1wiO1xuaW1wb3J0IHsgQUlNZXNzYWdlIH0gZnJvbSBcIi4uLy4uL21lc3NhZ2VzL2FpLmpzXCI7XG5pbXBvcnQgeyBCYXNlVHJhY2VyIH0gZnJvbSBcIi4uLy4uL3RyYWNlcnMvYmFzZS5qc1wiO1xuaW1wb3J0IFwiLi4vLi4vbWVzc2FnZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IEJhc2VDaGF0TWVzc2FnZUhpc3RvcnksIEJhc2VMaXN0Q2hhdE1lc3NhZ2VIaXN0b3J5IH0gZnJvbSBcIi4uLy4uL2NoYXRfaGlzdG9yeS5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL3Rlc3RpbmcvbWVzc2FnZV9oaXN0b3J5LnRzXG52YXIgRmFrZUNoYXRNZXNzYWdlSGlzdG9yeSA9IGNsYXNzIGV4dGVuZHMgQmFzZUNoYXRNZXNzYWdlSGlzdG9yeSB7XG5cdGxjX25hbWVzcGFjZSA9IFtcblx0XHRcImxhbmdjaGFpbl9jb3JlXCIsXG5cdFx0XCJtZXNzYWdlXCIsXG5cdFx0XCJmYWtlXCJcblx0XTtcblx0bWVzc2FnZXMgPSBbXTtcblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0c3VwZXIoKTtcblx0fVxuXHRhc3luYyBnZXRNZXNzYWdlcygpIHtcblx0XHRyZXR1cm4gdGhpcy5tZXNzYWdlcztcblx0fVxuXHRhc3luYyBhZGRNZXNzYWdlKG1lc3NhZ2UpIHtcblx0XHR0aGlzLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG5cdH1cblx0YXN5bmMgYWRkVXNlck1lc3NhZ2UobWVzc2FnZSkge1xuXHRcdHRoaXMubWVzc2FnZXMucHVzaChuZXcgSHVtYW5NZXNzYWdlKG1lc3NhZ2UpKTtcblx0fVxuXHRhc3luYyBhZGRBSU1lc3NhZ2UobWVzc2FnZSkge1xuXHRcdHRoaXMubWVzc2FnZXMucHVzaChuZXcgQUlNZXNzYWdlKG1lc3NhZ2UpKTtcblx0fVxuXHRhc3luYyBjbGVhcigpIHtcblx0XHR0aGlzLm1lc3NhZ2VzID0gW107XG5cdH1cbn07XG52YXIgRmFrZUxpc3RDaGF0TWVzc2FnZUhpc3RvcnkgPSBjbGFzcyBleHRlbmRzIEJhc2VMaXN0Q2hhdE1lc3NhZ2VIaXN0b3J5IHtcblx0bGNfbmFtZXNwYWNlID0gW1xuXHRcdFwibGFuZ2NoYWluX2NvcmVcIixcblx0XHRcIm1lc3NhZ2VcIixcblx0XHRcImZha2VcIlxuXHRdO1xuXHRtZXNzYWdlcyA9IFtdO1xuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHRzdXBlcigpO1xuXHR9XG5cdGFzeW5jIGFkZE1lc3NhZ2UobWVzc2FnZSkge1xuXHRcdHRoaXMubWVzc2FnZXMucHVzaChtZXNzYWdlKTtcblx0fVxuXHRhc3luYyBnZXRNZXNzYWdlcygpIHtcblx0XHRyZXR1cm4gdGhpcy5tZXNzYWdlcztcblx0fVxufTtcbnZhciBGYWtlVHJhY2VyID0gY2xhc3MgZXh0ZW5kcyBCYXNlVHJhY2VyIHtcblx0bmFtZSA9IFwiZmFrZV90cmFjZXJcIjtcblx0cnVucyA9IFtdO1xuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHRzdXBlcigpO1xuXHR9XG5cdHBlcnNpc3RSdW4ocnVuKSB7XG5cdFx0dGhpcy5ydW5zLnB1c2gocnVuKTtcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgRmFrZUNoYXRNZXNzYWdlSGlzdG9yeSwgRmFrZUxpc3RDaGF0TWVzc2FnZUhpc3RvcnksIEZha2VUcmFjZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lc3NhZ2VfaGlzdG9yeS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/testing/message_history.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/testing/output_parsers.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/testing/output_parsers.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FakeSplitIntoListParser: () => (/* binding */ FakeSplitIntoListParser)\n/* harmony export */ });\n/* harmony import */ var _output_parsers_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../output_parsers/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/output_parsers/base.js\");\n\n\n//#region src/utils/testing/output_parsers.ts\n/**\n* Parser for comma-separated values. It splits the input text by commas\n* and trims the resulting values.\n*/\nvar FakeSplitIntoListParser = class extends _output_parsers_base_js__WEBPACK_IMPORTED_MODULE_0__.BaseOutputParser {\n\tlc_namespace = [\"tests\", \"fake\"];\n\tgetFormatInstructions() {\n\t\treturn \"\";\n\t}\n\tasync parse(text) {\n\t\treturn text.split(\",\").map((value) => value.trim());\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=output_parsers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdGVzdGluZy9vdXRwdXRfcGFyc2Vycy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFnRTs7QUFFaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxxRUFBZ0I7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNtQztBQUNuQyIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3Rlc3Rpbmcvb3V0cHV0X3BhcnNlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZU91dHB1dFBhcnNlciB9IGZyb20gXCIuLi8uLi9vdXRwdXRfcGFyc2Vycy9iYXNlLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvdGVzdGluZy9vdXRwdXRfcGFyc2Vycy50c1xuLyoqXG4qIFBhcnNlciBmb3IgY29tbWEtc2VwYXJhdGVkIHZhbHVlcy4gSXQgc3BsaXRzIHRoZSBpbnB1dCB0ZXh0IGJ5IGNvbW1hc1xuKiBhbmQgdHJpbXMgdGhlIHJlc3VsdGluZyB2YWx1ZXMuXG4qL1xudmFyIEZha2VTcGxpdEludG9MaXN0UGFyc2VyID0gY2xhc3MgZXh0ZW5kcyBCYXNlT3V0cHV0UGFyc2VyIHtcblx0bGNfbmFtZXNwYWNlID0gW1widGVzdHNcIiwgXCJmYWtlXCJdO1xuXHRnZXRGb3JtYXRJbnN0cnVjdGlvbnMoKSB7XG5cdFx0cmV0dXJuIFwiXCI7XG5cdH1cblx0YXN5bmMgcGFyc2UodGV4dCkge1xuXHRcdHJldHVybiB0ZXh0LnNwbGl0KFwiLFwiKS5tYXAoKHZhbHVlKSA9PiB2YWx1ZS50cmltKCkpO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEZha2VTcGxpdEludG9MaXN0UGFyc2VyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vdXRwdXRfcGFyc2Vycy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/testing/output_parsers.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/testing/retrievers.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/testing/retrievers.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FakeRetriever: () => (/* binding */ FakeRetriever)\n/* harmony export */ });\n/* harmony import */ var _retrievers_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../retrievers/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/retrievers/index.js\");\n/* harmony import */ var _documents_document_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../documents/document.js */ \"(ssr)/./node_modules/@langchain/core/dist/documents/document.js\");\n\n\n\n//#region src/utils/testing/retrievers.ts\nvar FakeRetriever = class extends _retrievers_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseRetriever {\n\tlc_namespace = [\"test\", \"fake\"];\n\toutput = [new _documents_document_js__WEBPACK_IMPORTED_MODULE_1__.Document({ pageContent: \"foo\" }), new _documents_document_js__WEBPACK_IMPORTED_MODULE_1__.Document({ pageContent: \"bar\" })];\n\tconstructor(fields) {\n\t\tsuper();\n\t\tthis.output = fields?.output ?? this.output;\n\t}\n\tasync _getRelevantDocuments(_query) {\n\t\treturn this.output;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=retrievers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdGVzdGluZy9yZXRyaWV2ZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEwRDtBQUNIOztBQUV2RDtBQUNBLGtDQUFrQywrREFBYTtBQUMvQztBQUNBLGVBQWUsNERBQVEsR0FBRyxvQkFBb0IsT0FBTyw0REFBUSxHQUFHLG9CQUFvQjtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3lCO0FBQ3pCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdGVzdGluZy9yZXRyaWV2ZXJzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VSZXRyaWV2ZXIgfSBmcm9tIFwiLi4vLi4vcmV0cmlldmVycy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgRG9jdW1lbnQgfSBmcm9tIFwiLi4vLi4vZG9jdW1lbnRzL2RvY3VtZW50LmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvdGVzdGluZy9yZXRyaWV2ZXJzLnRzXG52YXIgRmFrZVJldHJpZXZlciA9IGNsYXNzIGV4dGVuZHMgQmFzZVJldHJpZXZlciB7XG5cdGxjX25hbWVzcGFjZSA9IFtcInRlc3RcIiwgXCJmYWtlXCJdO1xuXHRvdXRwdXQgPSBbbmV3IERvY3VtZW50KHsgcGFnZUNvbnRlbnQ6IFwiZm9vXCIgfSksIG5ldyBEb2N1bWVudCh7IHBhZ2VDb250ZW50OiBcImJhclwiIH0pXTtcblx0Y29uc3RydWN0b3IoZmllbGRzKSB7XG5cdFx0c3VwZXIoKTtcblx0XHR0aGlzLm91dHB1dCA9IGZpZWxkcz8ub3V0cHV0ID8/IHRoaXMub3V0cHV0O1xuXHR9XG5cdGFzeW5jIF9nZXRSZWxldmFudERvY3VtZW50cyhfcXVlcnkpIHtcblx0XHRyZXR1cm4gdGhpcy5vdXRwdXQ7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgRmFrZVJldHJpZXZlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmV0cmlldmVycy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/testing/retrievers.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/testing/runnables.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/testing/runnables.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FakeRunnable: () => (/* binding */ FakeRunnable)\n/* harmony export */ });\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../runnables/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/base.js\");\n\n\n//#region src/utils/testing/runnables.ts\nvar FakeRunnable = class extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__.Runnable {\n\tlc_namespace = [\"tests\", \"fake\"];\n\treturnOptions;\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.returnOptions = fields.returnOptions;\n\t}\n\tasync invoke(input, options) {\n\t\tif (this.returnOptions) return options ?? {};\n\t\treturn { input };\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=runnables.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdGVzdGluZy9ydW5uYWJsZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBbUQ7O0FBRW5EO0FBQ0EsaUNBQWlDLHdEQUFRO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTs7QUFFQTtBQUN3QjtBQUN4QiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3Rlc3RpbmcvcnVubmFibGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJ1bm5hYmxlIH0gZnJvbSBcIi4uLy4uL3J1bm5hYmxlcy9iYXNlLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvdGVzdGluZy9ydW5uYWJsZXMudHNcbnZhciBGYWtlUnVubmFibGUgPSBjbGFzcyBleHRlbmRzIFJ1bm5hYmxlIHtcblx0bGNfbmFtZXNwYWNlID0gW1widGVzdHNcIiwgXCJmYWtlXCJdO1xuXHRyZXR1cm5PcHRpb25zO1xuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHRzdXBlcihmaWVsZHMpO1xuXHRcdHRoaXMucmV0dXJuT3B0aW9ucyA9IGZpZWxkcy5yZXR1cm5PcHRpb25zO1xuXHR9XG5cdGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuXHRcdGlmICh0aGlzLnJldHVybk9wdGlvbnMpIHJldHVybiBvcHRpb25zID8/IHt9O1xuXHRcdHJldHVybiB7IGlucHV0IH07XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgRmFrZVJ1bm5hYmxlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ydW5uYWJsZXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/testing/runnables.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/testing/tools.js":
/*!******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/testing/tools.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FakeTool: () => (/* binding */ FakeTool)\n/* harmony export */ });\n/* harmony import */ var _tools_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../tools/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/tools/index.js\");\n\n\n//#region src/utils/testing/tools.ts\nvar FakeTool = class extends _tools_index_js__WEBPACK_IMPORTED_MODULE_0__.StructuredTool {\n\tname;\n\tdescription;\n\tschema;\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.name = fields.name;\n\t\tthis.description = fields.description;\n\t\tthis.schema = fields.schema;\n\t}\n\tasync _call(arg, _runManager) {\n\t\treturn JSON.stringify(arg);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=tools.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdGVzdGluZy90b29scy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFzRDs7QUFFdEQ7QUFDQSw2QkFBNkIsMkRBQWM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDb0I7QUFDcEIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy90ZXN0aW5nL3Rvb2xzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0cnVjdHVyZWRUb29sIH0gZnJvbSBcIi4uLy4uL3Rvb2xzL2luZGV4LmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvdGVzdGluZy90b29scy50c1xudmFyIEZha2VUb29sID0gY2xhc3MgZXh0ZW5kcyBTdHJ1Y3R1cmVkVG9vbCB7XG5cdG5hbWU7XG5cdGRlc2NyaXB0aW9uO1xuXHRzY2hlbWE7XG5cdGNvbnN0cnVjdG9yKGZpZWxkcykge1xuXHRcdHN1cGVyKGZpZWxkcyk7XG5cdFx0dGhpcy5uYW1lID0gZmllbGRzLm5hbWU7XG5cdFx0dGhpcy5kZXNjcmlwdGlvbiA9IGZpZWxkcy5kZXNjcmlwdGlvbjtcblx0XHR0aGlzLnNjaGVtYSA9IGZpZWxkcy5zY2hlbWE7XG5cdH1cblx0YXN5bmMgX2NhbGwoYXJnLCBfcnVuTWFuYWdlcikge1xuXHRcdHJldHVybiBKU09OLnN0cmluZ2lmeShhcmcpO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEZha2VUb29sIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b29scy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/testing/tools.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/testing/tracers.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/testing/tracers.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SingleRunExtractor: () => (/* binding */ SingleRunExtractor)\n/* harmony export */ });\n/* harmony import */ var _tracers_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../tracers/base.js */ \"(ssr)/./node_modules/@langchain/core/dist/tracers/base.js\");\n\n\n//#region src/utils/testing/tracers.ts\nvar SingleRunExtractor = class extends _tracers_base_js__WEBPACK_IMPORTED_MODULE_0__.BaseTracer {\n\trunPromiseResolver;\n\trunPromise;\n\t/** The name of the callback handler. */\n\tname = \"single_run_extractor\";\n\tconstructor() {\n\t\tsuper();\n\t\tthis.runPromise = new Promise((extract) => {\n\t\t\tthis.runPromiseResolver = extract;\n\t\t});\n\t}\n\tasync persistRun(run) {\n\t\tthis.runPromiseResolver(run);\n\t}\n\tasync extract() {\n\t\treturn this.runPromise;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=tracers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdGVzdGluZy90cmFjZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQW1EOztBQUVuRDtBQUNBLHVDQUF1Qyx3REFBVTtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDOEI7QUFDOUIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy90ZXN0aW5nL3RyYWNlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZVRyYWNlciB9IGZyb20gXCIuLi8uLi90cmFjZXJzL2Jhc2UuanNcIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy90ZXN0aW5nL3RyYWNlcnMudHNcbnZhciBTaW5nbGVSdW5FeHRyYWN0b3IgPSBjbGFzcyBleHRlbmRzIEJhc2VUcmFjZXIge1xuXHRydW5Qcm9taXNlUmVzb2x2ZXI7XG5cdHJ1blByb21pc2U7XG5cdC8qKiBUaGUgbmFtZSBvZiB0aGUgY2FsbGJhY2sgaGFuZGxlci4gKi9cblx0bmFtZSA9IFwic2luZ2xlX3J1bl9leHRyYWN0b3JcIjtcblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0c3VwZXIoKTtcblx0XHR0aGlzLnJ1blByb21pc2UgPSBuZXcgUHJvbWlzZSgoZXh0cmFjdCkgPT4ge1xuXHRcdFx0dGhpcy5ydW5Qcm9taXNlUmVzb2x2ZXIgPSBleHRyYWN0O1xuXHRcdH0pO1xuXHR9XG5cdGFzeW5jIHBlcnNpc3RSdW4ocnVuKSB7XG5cdFx0dGhpcy5ydW5Qcm9taXNlUmVzb2x2ZXIocnVuKTtcblx0fVxuXHRhc3luYyBleHRyYWN0KCkge1xuXHRcdHJldHVybiB0aGlzLnJ1blByb21pc2U7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgU2luZ2xlUnVuRXh0cmFjdG9yIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFjZXJzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/testing/tracers.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/testing/vectorstores.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/testing/vectorstores.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FakeVectorStore: () => (/* binding */ FakeVectorStore)\n/* harmony export */ });\n/* harmony import */ var _vectorstores_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../vectorstores.js */ \"(ssr)/./node_modules/@langchain/core/dist/vectorstores.js\");\n/* harmony import */ var _documents_document_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../documents/document.js */ \"(ssr)/./node_modules/@langchain/core/dist/documents/document.js\");\n/* harmony import */ var _ml_distance_similarities_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../ml-distance/similarities.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/ml-distance/similarities.js\");\n\n\n\n\n//#region src/utils/testing/vectorstores.ts\n/**\n* Class that extends `VectorStore` to store vectors in memory. Provides\n* methods for adding documents, performing similarity searches, and\n* creating instances from texts, documents, or an existing index.\n*/\nvar FakeVectorStore = class FakeVectorStore extends _vectorstores_js__WEBPACK_IMPORTED_MODULE_0__.VectorStore {\n\tmemoryVectors = [];\n\tsimilarity;\n\t_vectorstoreType() {\n\t\treturn \"memory\";\n\t}\n\tconstructor(embeddings, { similarity,...rest } = {}) {\n\t\tsuper(embeddings, rest);\n\t\tthis.similarity = similarity ?? _ml_distance_similarities_js__WEBPACK_IMPORTED_MODULE_2__.cosine;\n\t}\n\t/**\n\t* Method to add documents to the memory vector store. It extracts the\n\t* text from each document, generates embeddings for them, and adds the\n\t* resulting vectors to the store.\n\t* @param documents Array of `Document` instances to be added to the store.\n\t* @returns Promise that resolves when all documents have been added.\n\t*/\n\tasync addDocuments(documents) {\n\t\tconst texts = documents.map(({ pageContent }) => pageContent);\n\t\treturn this.addVectors(await this.embeddings.embedDocuments(texts), documents);\n\t}\n\t/**\n\t* Method to add vectors to the memory vector store. It creates\n\t* `MemoryVector` instances for each vector and document pair and adds\n\t* them to the store.\n\t* @param vectors Array of vectors to be added to the store.\n\t* @param documents Array of `Document` instances corresponding to the vectors.\n\t* @returns Promise that resolves when all vectors have been added.\n\t*/\n\tasync addVectors(vectors, documents) {\n\t\tconst memoryVectors = vectors.map((embedding, idx) => ({\n\t\t\tcontent: documents[idx].pageContent,\n\t\t\tembedding,\n\t\t\tmetadata: documents[idx].metadata\n\t\t}));\n\t\tthis.memoryVectors = this.memoryVectors.concat(memoryVectors);\n\t}\n\t/**\n\t* Method to perform a similarity search in the memory vector store. It\n\t* calculates the similarity between the query vector and each vector in\n\t* the store, sorts the results by similarity, and returns the top `k`\n\t* results along with their scores.\n\t* @param query Query vector to compare against the vectors in the store.\n\t* @param k Number of top results to return.\n\t* @param filter Optional filter function to apply to the vectors before performing the search.\n\t* @returns Promise that resolves with an array of tuples, each containing a `Document` and its similarity score.\n\t*/\n\tasync similaritySearchVectorWithScore(query, k, filter) {\n\t\tconst filterFunction = (memoryVector) => {\n\t\t\tif (!filter) return true;\n\t\t\tconst doc = new _documents_document_js__WEBPACK_IMPORTED_MODULE_1__.Document({\n\t\t\t\tmetadata: memoryVector.metadata,\n\t\t\t\tpageContent: memoryVector.content\n\t\t\t});\n\t\t\treturn filter(doc);\n\t\t};\n\t\tconst filteredMemoryVectors = this.memoryVectors.filter(filterFunction);\n\t\tconst searches = filteredMemoryVectors.map((vector, index) => ({\n\t\t\tsimilarity: this.similarity(query, vector.embedding),\n\t\t\tindex\n\t\t})).sort((a, b) => a.similarity > b.similarity ? -1 : 0).slice(0, k);\n\t\tconst result = searches.map((search) => [new _documents_document_js__WEBPACK_IMPORTED_MODULE_1__.Document({\n\t\t\tmetadata: filteredMemoryVectors[search.index].metadata,\n\t\t\tpageContent: filteredMemoryVectors[search.index].content\n\t\t}), search.similarity]);\n\t\treturn result;\n\t}\n\t/**\n\t* Static method to create a `FakeVectorStore` instance from an array of\n\t* texts. It creates a `Document` for each text and metadata pair, and\n\t* adds them to the store.\n\t* @param texts Array of texts to be added to the store.\n\t* @param metadatas Array or single object of metadata corresponding to the texts.\n\t* @param embeddings `Embeddings` instance used to generate embeddings for the texts.\n\t* @param dbConfig Optional `FakeVectorStoreArgs` to configure the `FakeVectorStore` instance.\n\t* @returns Promise that resolves with a new `FakeVectorStore` instance.\n\t*/\n\tstatic async fromTexts(texts, metadatas, embeddings, dbConfig) {\n\t\tconst docs = [];\n\t\tfor (let i = 0; i < texts.length; i += 1) {\n\t\t\tconst metadata = Array.isArray(metadatas) ? metadatas[i] : metadatas;\n\t\t\tconst newDoc = new _documents_document_js__WEBPACK_IMPORTED_MODULE_1__.Document({\n\t\t\t\tpageContent: texts[i],\n\t\t\t\tmetadata\n\t\t\t});\n\t\t\tdocs.push(newDoc);\n\t\t}\n\t\treturn FakeVectorStore.fromDocuments(docs, embeddings, dbConfig);\n\t}\n\t/**\n\t* Static method to create a `FakeVectorStore` instance from an array of\n\t* `Document` instances. It adds the documents to the store.\n\t* @param docs Array of `Document` instances to be added to the store.\n\t* @param embeddings `Embeddings` instance used to generate embeddings for the documents.\n\t* @param dbConfig Optional `FakeVectorStoreArgs` to configure the `FakeVectorStore` instance.\n\t* @returns Promise that resolves with a new `FakeVectorStore` instance.\n\t*/\n\tstatic async fromDocuments(docs, embeddings, dbConfig) {\n\t\tconst instance = new this(embeddings, dbConfig);\n\t\tawait instance.addDocuments(docs);\n\t\treturn instance;\n\t}\n\t/**\n\t* Static method to create a `FakeVectorStore` instance from an existing\n\t* index. It creates a new `FakeVectorStore` instance without adding any\n\t* documents or vectors.\n\t* @param embeddings `Embeddings` instance used to generate embeddings for the documents.\n\t* @param dbConfig Optional `FakeVectorStoreArgs` to configure the `FakeVectorStore` instance.\n\t* @returns Promise that resolves with a new `FakeVectorStore` instance.\n\t*/\n\tstatic async fromExistingIndex(embeddings, dbConfig) {\n\t\tconst instance = new this(embeddings, dbConfig);\n\t\treturn instance;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=vectorstores.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdGVzdGluZy92ZWN0b3JzdG9yZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFvRDtBQUNHO0FBQ0M7O0FBRXhEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCx5REFBVztBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHFCQUFxQixJQUFJO0FBQ3BEO0FBQ0Esa0NBQWtDLGdFQUFNO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxhQUFhO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNERBQVE7QUFDM0I7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsK0NBQStDLDREQUFRO0FBQ3ZEO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixrQkFBa0I7QUFDcEM7QUFDQSxzQkFBc0IsNERBQVE7QUFDOUI7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDMkI7QUFDM0IiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy90ZXN0aW5nL3ZlY3RvcnN0b3Jlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWZWN0b3JTdG9yZSB9IGZyb20gXCIuLi8uLi92ZWN0b3JzdG9yZXMuanNcIjtcbmltcG9ydCB7IERvY3VtZW50IH0gZnJvbSBcIi4uLy4uL2RvY3VtZW50cy9kb2N1bWVudC5qc1wiO1xuaW1wb3J0IHsgY29zaW5lIH0gZnJvbSBcIi4uL21sLWRpc3RhbmNlL3NpbWlsYXJpdGllcy5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL3Rlc3RpbmcvdmVjdG9yc3RvcmVzLnRzXG4vKipcbiogQ2xhc3MgdGhhdCBleHRlbmRzIGBWZWN0b3JTdG9yZWAgdG8gc3RvcmUgdmVjdG9ycyBpbiBtZW1vcnkuIFByb3ZpZGVzXG4qIG1ldGhvZHMgZm9yIGFkZGluZyBkb2N1bWVudHMsIHBlcmZvcm1pbmcgc2ltaWxhcml0eSBzZWFyY2hlcywgYW5kXG4qIGNyZWF0aW5nIGluc3RhbmNlcyBmcm9tIHRleHRzLCBkb2N1bWVudHMsIG9yIGFuIGV4aXN0aW5nIGluZGV4LlxuKi9cbnZhciBGYWtlVmVjdG9yU3RvcmUgPSBjbGFzcyBGYWtlVmVjdG9yU3RvcmUgZXh0ZW5kcyBWZWN0b3JTdG9yZSB7XG5cdG1lbW9yeVZlY3RvcnMgPSBbXTtcblx0c2ltaWxhcml0eTtcblx0X3ZlY3RvcnN0b3JlVHlwZSgpIHtcblx0XHRyZXR1cm4gXCJtZW1vcnlcIjtcblx0fVxuXHRjb25zdHJ1Y3RvcihlbWJlZGRpbmdzLCB7IHNpbWlsYXJpdHksLi4ucmVzdCB9ID0ge30pIHtcblx0XHRzdXBlcihlbWJlZGRpbmdzLCByZXN0KTtcblx0XHR0aGlzLnNpbWlsYXJpdHkgPSBzaW1pbGFyaXR5ID8/IGNvc2luZTtcblx0fVxuXHQvKipcblx0KiBNZXRob2QgdG8gYWRkIGRvY3VtZW50cyB0byB0aGUgbWVtb3J5IHZlY3RvciBzdG9yZS4gSXQgZXh0cmFjdHMgdGhlXG5cdCogdGV4dCBmcm9tIGVhY2ggZG9jdW1lbnQsIGdlbmVyYXRlcyBlbWJlZGRpbmdzIGZvciB0aGVtLCBhbmQgYWRkcyB0aGVcblx0KiByZXN1bHRpbmcgdmVjdG9ycyB0byB0aGUgc3RvcmUuXG5cdCogQHBhcmFtIGRvY3VtZW50cyBBcnJheSBvZiBgRG9jdW1lbnRgIGluc3RhbmNlcyB0byBiZSBhZGRlZCB0byB0aGUgc3RvcmUuXG5cdCogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gYWxsIGRvY3VtZW50cyBoYXZlIGJlZW4gYWRkZWQuXG5cdCovXG5cdGFzeW5jIGFkZERvY3VtZW50cyhkb2N1bWVudHMpIHtcblx0XHRjb25zdCB0ZXh0cyA9IGRvY3VtZW50cy5tYXAoKHsgcGFnZUNvbnRlbnQgfSkgPT4gcGFnZUNvbnRlbnQpO1xuXHRcdHJldHVybiB0aGlzLmFkZFZlY3RvcnMoYXdhaXQgdGhpcy5lbWJlZGRpbmdzLmVtYmVkRG9jdW1lbnRzKHRleHRzKSwgZG9jdW1lbnRzKTtcblx0fVxuXHQvKipcblx0KiBNZXRob2QgdG8gYWRkIHZlY3RvcnMgdG8gdGhlIG1lbW9yeSB2ZWN0b3Igc3RvcmUuIEl0IGNyZWF0ZXNcblx0KiBgTWVtb3J5VmVjdG9yYCBpbnN0YW5jZXMgZm9yIGVhY2ggdmVjdG9yIGFuZCBkb2N1bWVudCBwYWlyIGFuZCBhZGRzXG5cdCogdGhlbSB0byB0aGUgc3RvcmUuXG5cdCogQHBhcmFtIHZlY3RvcnMgQXJyYXkgb2YgdmVjdG9ycyB0byBiZSBhZGRlZCB0byB0aGUgc3RvcmUuXG5cdCogQHBhcmFtIGRvY3VtZW50cyBBcnJheSBvZiBgRG9jdW1lbnRgIGluc3RhbmNlcyBjb3JyZXNwb25kaW5nIHRvIHRoZSB2ZWN0b3JzLlxuXHQqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIGFsbCB2ZWN0b3JzIGhhdmUgYmVlbiBhZGRlZC5cblx0Ki9cblx0YXN5bmMgYWRkVmVjdG9ycyh2ZWN0b3JzLCBkb2N1bWVudHMpIHtcblx0XHRjb25zdCBtZW1vcnlWZWN0b3JzID0gdmVjdG9ycy5tYXAoKGVtYmVkZGluZywgaWR4KSA9PiAoe1xuXHRcdFx0Y29udGVudDogZG9jdW1lbnRzW2lkeF0ucGFnZUNvbnRlbnQsXG5cdFx0XHRlbWJlZGRpbmcsXG5cdFx0XHRtZXRhZGF0YTogZG9jdW1lbnRzW2lkeF0ubWV0YWRhdGFcblx0XHR9KSk7XG5cdFx0dGhpcy5tZW1vcnlWZWN0b3JzID0gdGhpcy5tZW1vcnlWZWN0b3JzLmNvbmNhdChtZW1vcnlWZWN0b3JzKTtcblx0fVxuXHQvKipcblx0KiBNZXRob2QgdG8gcGVyZm9ybSBhIHNpbWlsYXJpdHkgc2VhcmNoIGluIHRoZSBtZW1vcnkgdmVjdG9yIHN0b3JlLiBJdFxuXHQqIGNhbGN1bGF0ZXMgdGhlIHNpbWlsYXJpdHkgYmV0d2VlbiB0aGUgcXVlcnkgdmVjdG9yIGFuZCBlYWNoIHZlY3RvciBpblxuXHQqIHRoZSBzdG9yZSwgc29ydHMgdGhlIHJlc3VsdHMgYnkgc2ltaWxhcml0eSwgYW5kIHJldHVybnMgdGhlIHRvcCBga2Bcblx0KiByZXN1bHRzIGFsb25nIHdpdGggdGhlaXIgc2NvcmVzLlxuXHQqIEBwYXJhbSBxdWVyeSBRdWVyeSB2ZWN0b3IgdG8gY29tcGFyZSBhZ2FpbnN0IHRoZSB2ZWN0b3JzIGluIHRoZSBzdG9yZS5cblx0KiBAcGFyYW0gayBOdW1iZXIgb2YgdG9wIHJlc3VsdHMgdG8gcmV0dXJuLlxuXHQqIEBwYXJhbSBmaWx0ZXIgT3B0aW9uYWwgZmlsdGVyIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIHRoZSB2ZWN0b3JzIGJlZm9yZSBwZXJmb3JtaW5nIHRoZSBzZWFyY2guXG5cdCogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYW4gYXJyYXkgb2YgdHVwbGVzLCBlYWNoIGNvbnRhaW5pbmcgYSBgRG9jdW1lbnRgIGFuZCBpdHMgc2ltaWxhcml0eSBzY29yZS5cblx0Ki9cblx0YXN5bmMgc2ltaWxhcml0eVNlYXJjaFZlY3RvcldpdGhTY29yZShxdWVyeSwgaywgZmlsdGVyKSB7XG5cdFx0Y29uc3QgZmlsdGVyRnVuY3Rpb24gPSAobWVtb3J5VmVjdG9yKSA9PiB7XG5cdFx0XHRpZiAoIWZpbHRlcikgcmV0dXJuIHRydWU7XG5cdFx0XHRjb25zdCBkb2MgPSBuZXcgRG9jdW1lbnQoe1xuXHRcdFx0XHRtZXRhZGF0YTogbWVtb3J5VmVjdG9yLm1ldGFkYXRhLFxuXHRcdFx0XHRwYWdlQ29udGVudDogbWVtb3J5VmVjdG9yLmNvbnRlbnRcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGZpbHRlcihkb2MpO1xuXHRcdH07XG5cdFx0Y29uc3QgZmlsdGVyZWRNZW1vcnlWZWN0b3JzID0gdGhpcy5tZW1vcnlWZWN0b3JzLmZpbHRlcihmaWx0ZXJGdW5jdGlvbik7XG5cdFx0Y29uc3Qgc2VhcmNoZXMgPSBmaWx0ZXJlZE1lbW9yeVZlY3RvcnMubWFwKCh2ZWN0b3IsIGluZGV4KSA9PiAoe1xuXHRcdFx0c2ltaWxhcml0eTogdGhpcy5zaW1pbGFyaXR5KHF1ZXJ5LCB2ZWN0b3IuZW1iZWRkaW5nKSxcblx0XHRcdGluZGV4XG5cdFx0fSkpLnNvcnQoKGEsIGIpID0+IGEuc2ltaWxhcml0eSA+IGIuc2ltaWxhcml0eSA/IC0xIDogMCkuc2xpY2UoMCwgayk7XG5cdFx0Y29uc3QgcmVzdWx0ID0gc2VhcmNoZXMubWFwKChzZWFyY2gpID0+IFtuZXcgRG9jdW1lbnQoe1xuXHRcdFx0bWV0YWRhdGE6IGZpbHRlcmVkTWVtb3J5VmVjdG9yc1tzZWFyY2guaW5kZXhdLm1ldGFkYXRhLFxuXHRcdFx0cGFnZUNvbnRlbnQ6IGZpbHRlcmVkTWVtb3J5VmVjdG9yc1tzZWFyY2guaW5kZXhdLmNvbnRlbnRcblx0XHR9KSwgc2VhcmNoLnNpbWlsYXJpdHldKTtcblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9XG5cdC8qKlxuXHQqIFN0YXRpYyBtZXRob2QgdG8gY3JlYXRlIGEgYEZha2VWZWN0b3JTdG9yZWAgaW5zdGFuY2UgZnJvbSBhbiBhcnJheSBvZlxuXHQqIHRleHRzLiBJdCBjcmVhdGVzIGEgYERvY3VtZW50YCBmb3IgZWFjaCB0ZXh0IGFuZCBtZXRhZGF0YSBwYWlyLCBhbmRcblx0KiBhZGRzIHRoZW0gdG8gdGhlIHN0b3JlLlxuXHQqIEBwYXJhbSB0ZXh0cyBBcnJheSBvZiB0ZXh0cyB0byBiZSBhZGRlZCB0byB0aGUgc3RvcmUuXG5cdCogQHBhcmFtIG1ldGFkYXRhcyBBcnJheSBvciBzaW5nbGUgb2JqZWN0IG9mIG1ldGFkYXRhIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHRleHRzLlxuXHQqIEBwYXJhbSBlbWJlZGRpbmdzIGBFbWJlZGRpbmdzYCBpbnN0YW5jZSB1c2VkIHRvIGdlbmVyYXRlIGVtYmVkZGluZ3MgZm9yIHRoZSB0ZXh0cy5cblx0KiBAcGFyYW0gZGJDb25maWcgT3B0aW9uYWwgYEZha2VWZWN0b3JTdG9yZUFyZ3NgIHRvIGNvbmZpZ3VyZSB0aGUgYEZha2VWZWN0b3JTdG9yZWAgaW5zdGFuY2UuXG5cdCogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYSBuZXcgYEZha2VWZWN0b3JTdG9yZWAgaW5zdGFuY2UuXG5cdCovXG5cdHN0YXRpYyBhc3luYyBmcm9tVGV4dHModGV4dHMsIG1ldGFkYXRhcywgZW1iZWRkaW5ncywgZGJDb25maWcpIHtcblx0XHRjb25zdCBkb2NzID0gW107XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0ZXh0cy5sZW5ndGg7IGkgKz0gMSkge1xuXHRcdFx0Y29uc3QgbWV0YWRhdGEgPSBBcnJheS5pc0FycmF5KG1ldGFkYXRhcykgPyBtZXRhZGF0YXNbaV0gOiBtZXRhZGF0YXM7XG5cdFx0XHRjb25zdCBuZXdEb2MgPSBuZXcgRG9jdW1lbnQoe1xuXHRcdFx0XHRwYWdlQ29udGVudDogdGV4dHNbaV0sXG5cdFx0XHRcdG1ldGFkYXRhXG5cdFx0XHR9KTtcblx0XHRcdGRvY3MucHVzaChuZXdEb2MpO1xuXHRcdH1cblx0XHRyZXR1cm4gRmFrZVZlY3RvclN0b3JlLmZyb21Eb2N1bWVudHMoZG9jcywgZW1iZWRkaW5ncywgZGJDb25maWcpO1xuXHR9XG5cdC8qKlxuXHQqIFN0YXRpYyBtZXRob2QgdG8gY3JlYXRlIGEgYEZha2VWZWN0b3JTdG9yZWAgaW5zdGFuY2UgZnJvbSBhbiBhcnJheSBvZlxuXHQqIGBEb2N1bWVudGAgaW5zdGFuY2VzLiBJdCBhZGRzIHRoZSBkb2N1bWVudHMgdG8gdGhlIHN0b3JlLlxuXHQqIEBwYXJhbSBkb2NzIEFycmF5IG9mIGBEb2N1bWVudGAgaW5zdGFuY2VzIHRvIGJlIGFkZGVkIHRvIHRoZSBzdG9yZS5cblx0KiBAcGFyYW0gZW1iZWRkaW5ncyBgRW1iZWRkaW5nc2AgaW5zdGFuY2UgdXNlZCB0byBnZW5lcmF0ZSBlbWJlZGRpbmdzIGZvciB0aGUgZG9jdW1lbnRzLlxuXHQqIEBwYXJhbSBkYkNvbmZpZyBPcHRpb25hbCBgRmFrZVZlY3RvclN0b3JlQXJnc2AgdG8gY29uZmlndXJlIHRoZSBgRmFrZVZlY3RvclN0b3JlYCBpbnN0YW5jZS5cblx0KiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBhIG5ldyBgRmFrZVZlY3RvclN0b3JlYCBpbnN0YW5jZS5cblx0Ki9cblx0c3RhdGljIGFzeW5jIGZyb21Eb2N1bWVudHMoZG9jcywgZW1iZWRkaW5ncywgZGJDb25maWcpIHtcblx0XHRjb25zdCBpbnN0YW5jZSA9IG5ldyB0aGlzKGVtYmVkZGluZ3MsIGRiQ29uZmlnKTtcblx0XHRhd2FpdCBpbnN0YW5jZS5hZGREb2N1bWVudHMoZG9jcyk7XG5cdFx0cmV0dXJuIGluc3RhbmNlO1xuXHR9XG5cdC8qKlxuXHQqIFN0YXRpYyBtZXRob2QgdG8gY3JlYXRlIGEgYEZha2VWZWN0b3JTdG9yZWAgaW5zdGFuY2UgZnJvbSBhbiBleGlzdGluZ1xuXHQqIGluZGV4LiBJdCBjcmVhdGVzIGEgbmV3IGBGYWtlVmVjdG9yU3RvcmVgIGluc3RhbmNlIHdpdGhvdXQgYWRkaW5nIGFueVxuXHQqIGRvY3VtZW50cyBvciB2ZWN0b3JzLlxuXHQqIEBwYXJhbSBlbWJlZGRpbmdzIGBFbWJlZGRpbmdzYCBpbnN0YW5jZSB1c2VkIHRvIGdlbmVyYXRlIGVtYmVkZGluZ3MgZm9yIHRoZSBkb2N1bWVudHMuXG5cdCogQHBhcmFtIGRiQ29uZmlnIE9wdGlvbmFsIGBGYWtlVmVjdG9yU3RvcmVBcmdzYCB0byBjb25maWd1cmUgdGhlIGBGYWtlVmVjdG9yU3RvcmVgIGluc3RhbmNlLlxuXHQqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIGEgbmV3IGBGYWtlVmVjdG9yU3RvcmVgIGluc3RhbmNlLlxuXHQqL1xuXHRzdGF0aWMgYXN5bmMgZnJvbUV4aXN0aW5nSW5kZXgoZW1iZWRkaW5ncywgZGJDb25maWcpIHtcblx0XHRjb25zdCBpbnN0YW5jZSA9IG5ldyB0aGlzKGVtYmVkZGluZ3MsIGRiQ29uZmlnKTtcblx0XHRyZXR1cm4gaW5zdGFuY2U7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgRmFrZVZlY3RvclN0b3JlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD12ZWN0b3JzdG9yZXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/testing/vectorstores.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/tiktoken.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/tiktoken.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encodingForModel: () => (/* binding */ encodingForModel),\n/* harmony export */   getEncoding: () => (/* binding */ getEncoding),\n/* harmony export */   tiktoken_exports: () => (/* binding */ tiktoken_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _async_caller_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./async_caller.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/async_caller.js\");\n/* harmony import */ var js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js-tiktoken/lite */ \"(ssr)/./node_modules/js-tiktoken/dist/lite.js\");\n\n\n\n\n//#region src/utils/tiktoken.ts\nvar tiktoken_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(tiktoken_exports, {\n\tencodingForModel: () => encodingForModel,\n\tgetEncoding: () => getEncoding\n});\nconst cache = {};\nconst caller = /* @__PURE__ */ new _async_caller_js__WEBPACK_IMPORTED_MODULE_1__.AsyncCaller({});\nasync function getEncoding(encoding) {\n\tif (!(encoding in cache)) cache[encoding] = caller.fetch(`https://tiktoken.pages.dev/js/${encoding}.json`).then((res) => res.json()).then((data) => new js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_2__.Tiktoken(data)).catch((e) => {\n\t\tdelete cache[encoding];\n\t\tthrow e;\n\t});\n\treturn await cache[encoding];\n}\nasync function encodingForModel(model) {\n\treturn getEncoding((0,js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_2__.getEncodingNameForModel)(model));\n}\n\n//#endregion\n\n//# sourceMappingURL=tiktoken.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdGlrdG9rZW4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTJEO0FBQ1g7QUFDcUI7O0FBRXJFO0FBQ0E7QUFDQSxzRUFBUTtBQUNSO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxtQ0FBbUMseURBQVcsR0FBRztBQUNqRDtBQUNBLDJGQUEyRixTQUFTLHFEQUFxRCxzREFBUTtBQUNqSztBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix5RUFBdUI7QUFDM0M7O0FBRUE7QUFDMkQ7QUFDM0QiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy90aWt0b2tlbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4cG9ydCB9IGZyb20gXCIuLi9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyBBc3luY0NhbGxlciB9IGZyb20gXCIuL2FzeW5jX2NhbGxlci5qc1wiO1xuaW1wb3J0IHsgVGlrdG9rZW4sIGdldEVuY29kaW5nTmFtZUZvck1vZGVsIH0gZnJvbSBcImpzLXRpa3Rva2VuL2xpdGVcIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy90aWt0b2tlbi50c1xudmFyIHRpa3Rva2VuX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KHRpa3Rva2VuX2V4cG9ydHMsIHtcblx0ZW5jb2RpbmdGb3JNb2RlbDogKCkgPT4gZW5jb2RpbmdGb3JNb2RlbCxcblx0Z2V0RW5jb2Rpbmc6ICgpID0+IGdldEVuY29kaW5nXG59KTtcbmNvbnN0IGNhY2hlID0ge307XG5jb25zdCBjYWxsZXIgPSAvKiBAX19QVVJFX18gKi8gbmV3IEFzeW5jQ2FsbGVyKHt9KTtcbmFzeW5jIGZ1bmN0aW9uIGdldEVuY29kaW5nKGVuY29kaW5nKSB7XG5cdGlmICghKGVuY29kaW5nIGluIGNhY2hlKSkgY2FjaGVbZW5jb2RpbmddID0gY2FsbGVyLmZldGNoKGBodHRwczovL3Rpa3Rva2VuLnBhZ2VzLmRldi9qcy8ke2VuY29kaW5nfS5qc29uYCkudGhlbigocmVzKSA9PiByZXMuanNvbigpKS50aGVuKChkYXRhKSA9PiBuZXcgVGlrdG9rZW4oZGF0YSkpLmNhdGNoKChlKSA9PiB7XG5cdFx0ZGVsZXRlIGNhY2hlW2VuY29kaW5nXTtcblx0XHR0aHJvdyBlO1xuXHR9KTtcblx0cmV0dXJuIGF3YWl0IGNhY2hlW2VuY29kaW5nXTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGVuY29kaW5nRm9yTW9kZWwobW9kZWwpIHtcblx0cmV0dXJuIGdldEVuY29kaW5nKGdldEVuY29kaW5nTmFtZUZvck1vZGVsKG1vZGVsKSk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZW5jb2RpbmdGb3JNb2RlbCwgZ2V0RW5jb2RpbmcsIHRpa3Rva2VuX2V4cG9ydHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRpa3Rva2VuLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/tiktoken.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/types/index.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/types/index.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extendInteropZodObject: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.extendInteropZodObject),\n/* harmony export */   getInteropZodDefaultGetter: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.getInteropZodDefaultGetter),\n/* harmony export */   getInteropZodObjectShape: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.getInteropZodObjectShape),\n/* harmony export */   getSchemaDescription: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.getSchemaDescription),\n/* harmony export */   interopParse: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.interopParse),\n/* harmony export */   interopParseAsync: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.interopParseAsync),\n/* harmony export */   interopSafeParse: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.interopSafeParse),\n/* harmony export */   interopSafeParseAsync: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.interopSafeParseAsync),\n/* harmony export */   interopZodObjectMakeFieldsOptional: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.interopZodObjectMakeFieldsOptional),\n/* harmony export */   interopZodObjectPartial: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.interopZodObjectPartial),\n/* harmony export */   interopZodObjectPassthrough: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.interopZodObjectPassthrough),\n/* harmony export */   interopZodObjectStrict: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.interopZodObjectStrict),\n/* harmony export */   interopZodTransformInputSchema: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.interopZodTransformInputSchema),\n/* harmony export */   isInteropZodError: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.isInteropZodError),\n/* harmony export */   isInteropZodLiteral: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.isInteropZodLiteral),\n/* harmony export */   isInteropZodObject: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.isInteropZodObject),\n/* harmony export */   isInteropZodSchema: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.isInteropZodSchema),\n/* harmony export */   isShapelessZodSchema: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.isShapelessZodSchema),\n/* harmony export */   isSimpleStringZodSchema: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.isSimpleStringZodSchema),\n/* harmony export */   isZodArrayV4: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.isZodArrayV4),\n/* harmony export */   isZodLiteralV3: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.isZodLiteralV3),\n/* harmony export */   isZodLiteralV4: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.isZodLiteralV4),\n/* harmony export */   isZodNullableV4: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.isZodNullableV4),\n/* harmony export */   isZodObjectV3: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.isZodObjectV3),\n/* harmony export */   isZodObjectV4: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.isZodObjectV4),\n/* harmony export */   isZodOptionalV4: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.isZodOptionalV4),\n/* harmony export */   isZodSchema: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.isZodSchema),\n/* harmony export */   isZodSchemaV3: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.isZodSchemaV3),\n/* harmony export */   isZodSchemaV4: () => (/* reexport safe */ _zod_js__WEBPACK_IMPORTED_MODULE_1__.isZodSchemaV4),\n/* harmony export */   types_exports: () => (/* binding */ types_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _zod_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./zod.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/types/zod.js\");\n\n\n\n//#region src/utils/types/index.ts\nvar types_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(types_exports, {\n\textendInteropZodObject: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.extendInteropZodObject,\n\tgetInteropZodDefaultGetter: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.getInteropZodDefaultGetter,\n\tgetInteropZodObjectShape: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.getInteropZodObjectShape,\n\tgetSchemaDescription: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.getSchemaDescription,\n\tinteropParse: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.interopParse,\n\tinteropParseAsync: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.interopParseAsync,\n\tinteropSafeParse: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.interopSafeParse,\n\tinteropSafeParseAsync: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.interopSafeParseAsync,\n\tinteropZodObjectMakeFieldsOptional: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.interopZodObjectMakeFieldsOptional,\n\tinteropZodObjectPartial: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.interopZodObjectPartial,\n\tinteropZodObjectPassthrough: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.interopZodObjectPassthrough,\n\tinteropZodObjectStrict: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.interopZodObjectStrict,\n\tinteropZodTransformInputSchema: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.interopZodTransformInputSchema,\n\tisInteropZodError: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.isInteropZodError,\n\tisInteropZodLiteral: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.isInteropZodLiteral,\n\tisInteropZodObject: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.isInteropZodObject,\n\tisInteropZodSchema: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.isInteropZodSchema,\n\tisShapelessZodSchema: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.isShapelessZodSchema,\n\tisSimpleStringZodSchema: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.isSimpleStringZodSchema,\n\tisZodArrayV4: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.isZodArrayV4,\n\tisZodLiteralV3: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.isZodLiteralV3,\n\tisZodLiteralV4: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.isZodLiteralV4,\n\tisZodNullableV4: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.isZodNullableV4,\n\tisZodObjectV3: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.isZodObjectV3,\n\tisZodObjectV4: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.isZodObjectV4,\n\tisZodOptionalV4: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.isZodOptionalV4,\n\tisZodSchema: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.isZodSchema,\n\tisZodSchemaV3: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.isZodSchemaV3,\n\tisZodSchemaV4: () => _zod_js__WEBPACK_IMPORTED_MODULE_1__.isZodSchemaV4\n});\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdHlwZXMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBOEQ7QUFDb2pCOztBQUVsbkI7QUFDQTtBQUNBLHNFQUFRO0FBQ1IsK0JBQStCLDJEQUFzQjtBQUNyRCxtQ0FBbUMsK0RBQTBCO0FBQzdELGlDQUFpQyw2REFBd0I7QUFDekQsNkJBQTZCLHlEQUFvQjtBQUNqRCxxQkFBcUIsaURBQVk7QUFDakMsMEJBQTBCLHNEQUFpQjtBQUMzQyx5QkFBeUIscURBQWdCO0FBQ3pDLDhCQUE4QiwwREFBcUI7QUFDbkQsMkNBQTJDLHVFQUFrQztBQUM3RSxnQ0FBZ0MsNERBQXVCO0FBQ3ZELG9DQUFvQyxnRUFBMkI7QUFDL0QsK0JBQStCLDJEQUFzQjtBQUNyRCx1Q0FBdUMsbUVBQThCO0FBQ3JFLDBCQUEwQixzREFBaUI7QUFDM0MsNEJBQTRCLHdEQUFtQjtBQUMvQywyQkFBMkIsdURBQWtCO0FBQzdDLDJCQUEyQix1REFBa0I7QUFDN0MsNkJBQTZCLHlEQUFvQjtBQUNqRCxnQ0FBZ0MsNERBQXVCO0FBQ3ZELHFCQUFxQixpREFBWTtBQUNqQyx1QkFBdUIsbURBQWM7QUFDckMsdUJBQXVCLG1EQUFjO0FBQ3JDLHdCQUF3QixvREFBZTtBQUN2QyxzQkFBc0Isa0RBQWE7QUFDbkMsc0JBQXNCLGtEQUFhO0FBQ25DLHdCQUF3QixvREFBZTtBQUN2QyxvQkFBb0IsZ0RBQVc7QUFDL0Isc0JBQXNCLGtEQUFhO0FBQ25DLHNCQUFzQixrREFBYTtBQUNuQyxDQUFDOztBQUVEO0FBQ2luQjtBQUNqbkIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy90eXBlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4cG9ydCB9IGZyb20gXCIuLi8uLi9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyBleHRlbmRJbnRlcm9wWm9kT2JqZWN0LCBnZXRJbnRlcm9wWm9kRGVmYXVsdEdldHRlciwgZ2V0SW50ZXJvcFpvZE9iamVjdFNoYXBlLCBnZXRTY2hlbWFEZXNjcmlwdGlvbiwgaW50ZXJvcFBhcnNlLCBpbnRlcm9wUGFyc2VBc3luYywgaW50ZXJvcFNhZmVQYXJzZSwgaW50ZXJvcFNhZmVQYXJzZUFzeW5jLCBpbnRlcm9wWm9kT2JqZWN0TWFrZUZpZWxkc09wdGlvbmFsLCBpbnRlcm9wWm9kT2JqZWN0UGFydGlhbCwgaW50ZXJvcFpvZE9iamVjdFBhc3N0aHJvdWdoLCBpbnRlcm9wWm9kT2JqZWN0U3RyaWN0LCBpbnRlcm9wWm9kVHJhbnNmb3JtSW5wdXRTY2hlbWEsIGlzSW50ZXJvcFpvZEVycm9yLCBpc0ludGVyb3Bab2RMaXRlcmFsLCBpc0ludGVyb3Bab2RPYmplY3QsIGlzSW50ZXJvcFpvZFNjaGVtYSwgaXNTaGFwZWxlc3Nab2RTY2hlbWEsIGlzU2ltcGxlU3RyaW5nWm9kU2NoZW1hLCBpc1pvZEFycmF5VjQsIGlzWm9kTGl0ZXJhbFYzLCBpc1pvZExpdGVyYWxWNCwgaXNab2ROdWxsYWJsZVY0LCBpc1pvZE9iamVjdFYzLCBpc1pvZE9iamVjdFY0LCBpc1pvZE9wdGlvbmFsVjQsIGlzWm9kU2NoZW1hLCBpc1pvZFNjaGVtYVYzLCBpc1pvZFNjaGVtYVY0IH0gZnJvbSBcIi4vem9kLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvdHlwZXMvaW5kZXgudHNcbnZhciB0eXBlc19leHBvcnRzID0ge307XG5fX2V4cG9ydCh0eXBlc19leHBvcnRzLCB7XG5cdGV4dGVuZEludGVyb3Bab2RPYmplY3Q6ICgpID0+IGV4dGVuZEludGVyb3Bab2RPYmplY3QsXG5cdGdldEludGVyb3Bab2REZWZhdWx0R2V0dGVyOiAoKSA9PiBnZXRJbnRlcm9wWm9kRGVmYXVsdEdldHRlcixcblx0Z2V0SW50ZXJvcFpvZE9iamVjdFNoYXBlOiAoKSA9PiBnZXRJbnRlcm9wWm9kT2JqZWN0U2hhcGUsXG5cdGdldFNjaGVtYURlc2NyaXB0aW9uOiAoKSA9PiBnZXRTY2hlbWFEZXNjcmlwdGlvbixcblx0aW50ZXJvcFBhcnNlOiAoKSA9PiBpbnRlcm9wUGFyc2UsXG5cdGludGVyb3BQYXJzZUFzeW5jOiAoKSA9PiBpbnRlcm9wUGFyc2VBc3luYyxcblx0aW50ZXJvcFNhZmVQYXJzZTogKCkgPT4gaW50ZXJvcFNhZmVQYXJzZSxcblx0aW50ZXJvcFNhZmVQYXJzZUFzeW5jOiAoKSA9PiBpbnRlcm9wU2FmZVBhcnNlQXN5bmMsXG5cdGludGVyb3Bab2RPYmplY3RNYWtlRmllbGRzT3B0aW9uYWw6ICgpID0+IGludGVyb3Bab2RPYmplY3RNYWtlRmllbGRzT3B0aW9uYWwsXG5cdGludGVyb3Bab2RPYmplY3RQYXJ0aWFsOiAoKSA9PiBpbnRlcm9wWm9kT2JqZWN0UGFydGlhbCxcblx0aW50ZXJvcFpvZE9iamVjdFBhc3N0aHJvdWdoOiAoKSA9PiBpbnRlcm9wWm9kT2JqZWN0UGFzc3Rocm91Z2gsXG5cdGludGVyb3Bab2RPYmplY3RTdHJpY3Q6ICgpID0+IGludGVyb3Bab2RPYmplY3RTdHJpY3QsXG5cdGludGVyb3Bab2RUcmFuc2Zvcm1JbnB1dFNjaGVtYTogKCkgPT4gaW50ZXJvcFpvZFRyYW5zZm9ybUlucHV0U2NoZW1hLFxuXHRpc0ludGVyb3Bab2RFcnJvcjogKCkgPT4gaXNJbnRlcm9wWm9kRXJyb3IsXG5cdGlzSW50ZXJvcFpvZExpdGVyYWw6ICgpID0+IGlzSW50ZXJvcFpvZExpdGVyYWwsXG5cdGlzSW50ZXJvcFpvZE9iamVjdDogKCkgPT4gaXNJbnRlcm9wWm9kT2JqZWN0LFxuXHRpc0ludGVyb3Bab2RTY2hlbWE6ICgpID0+IGlzSW50ZXJvcFpvZFNjaGVtYSxcblx0aXNTaGFwZWxlc3Nab2RTY2hlbWE6ICgpID0+IGlzU2hhcGVsZXNzWm9kU2NoZW1hLFxuXHRpc1NpbXBsZVN0cmluZ1pvZFNjaGVtYTogKCkgPT4gaXNTaW1wbGVTdHJpbmdab2RTY2hlbWEsXG5cdGlzWm9kQXJyYXlWNDogKCkgPT4gaXNab2RBcnJheVY0LFxuXHRpc1pvZExpdGVyYWxWMzogKCkgPT4gaXNab2RMaXRlcmFsVjMsXG5cdGlzWm9kTGl0ZXJhbFY0OiAoKSA9PiBpc1pvZExpdGVyYWxWNCxcblx0aXNab2ROdWxsYWJsZVY0OiAoKSA9PiBpc1pvZE51bGxhYmxlVjQsXG5cdGlzWm9kT2JqZWN0VjM6ICgpID0+IGlzWm9kT2JqZWN0VjMsXG5cdGlzWm9kT2JqZWN0VjQ6ICgpID0+IGlzWm9kT2JqZWN0VjQsXG5cdGlzWm9kT3B0aW9uYWxWNDogKCkgPT4gaXNab2RPcHRpb25hbFY0LFxuXHRpc1pvZFNjaGVtYTogKCkgPT4gaXNab2RTY2hlbWEsXG5cdGlzWm9kU2NoZW1hVjM6ICgpID0+IGlzWm9kU2NoZW1hVjMsXG5cdGlzWm9kU2NoZW1hVjQ6ICgpID0+IGlzWm9kU2NoZW1hVjRcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGV4dGVuZEludGVyb3Bab2RPYmplY3QsIGdldEludGVyb3Bab2REZWZhdWx0R2V0dGVyLCBnZXRJbnRlcm9wWm9kT2JqZWN0U2hhcGUsIGdldFNjaGVtYURlc2NyaXB0aW9uLCBpbnRlcm9wUGFyc2UsIGludGVyb3BQYXJzZUFzeW5jLCBpbnRlcm9wU2FmZVBhcnNlLCBpbnRlcm9wU2FmZVBhcnNlQXN5bmMsIGludGVyb3Bab2RPYmplY3RNYWtlRmllbGRzT3B0aW9uYWwsIGludGVyb3Bab2RPYmplY3RQYXJ0aWFsLCBpbnRlcm9wWm9kT2JqZWN0UGFzc3Rocm91Z2gsIGludGVyb3Bab2RPYmplY3RTdHJpY3QsIGludGVyb3Bab2RUcmFuc2Zvcm1JbnB1dFNjaGVtYSwgaXNJbnRlcm9wWm9kRXJyb3IsIGlzSW50ZXJvcFpvZExpdGVyYWwsIGlzSW50ZXJvcFpvZE9iamVjdCwgaXNJbnRlcm9wWm9kU2NoZW1hLCBpc1NoYXBlbGVzc1pvZFNjaGVtYSwgaXNTaW1wbGVTdHJpbmdab2RTY2hlbWEsIGlzWm9kQXJyYXlWNCwgaXNab2RMaXRlcmFsVjMsIGlzWm9kTGl0ZXJhbFY0LCBpc1pvZE51bGxhYmxlVjQsIGlzWm9kT2JqZWN0VjMsIGlzWm9kT2JqZWN0VjQsIGlzWm9kT3B0aW9uYWxWNCwgaXNab2RTY2hlbWEsIGlzWm9kU2NoZW1hVjMsIGlzWm9kU2NoZW1hVjQsIHR5cGVzX2V4cG9ydHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/types/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/types/zod.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/types/zod.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extendInteropZodObject: () => (/* binding */ extendInteropZodObject),\n/* harmony export */   getInteropZodDefaultGetter: () => (/* binding */ getInteropZodDefaultGetter),\n/* harmony export */   getInteropZodObjectShape: () => (/* binding */ getInteropZodObjectShape),\n/* harmony export */   getSchemaDescription: () => (/* binding */ getSchemaDescription),\n/* harmony export */   interopParse: () => (/* binding */ interopParse),\n/* harmony export */   interopParseAsync: () => (/* binding */ interopParseAsync),\n/* harmony export */   interopSafeParse: () => (/* binding */ interopSafeParse),\n/* harmony export */   interopSafeParseAsync: () => (/* binding */ interopSafeParseAsync),\n/* harmony export */   interopZodObjectMakeFieldsOptional: () => (/* binding */ interopZodObjectMakeFieldsOptional),\n/* harmony export */   interopZodObjectPartial: () => (/* binding */ interopZodObjectPartial),\n/* harmony export */   interopZodObjectPassthrough: () => (/* binding */ interopZodObjectPassthrough),\n/* harmony export */   interopZodObjectStrict: () => (/* binding */ interopZodObjectStrict),\n/* harmony export */   interopZodTransformInputSchema: () => (/* binding */ interopZodTransformInputSchema),\n/* harmony export */   isInteropZodError: () => (/* binding */ isInteropZodError),\n/* harmony export */   isInteropZodLiteral: () => (/* binding */ isInteropZodLiteral),\n/* harmony export */   isInteropZodObject: () => (/* binding */ isInteropZodObject),\n/* harmony export */   isInteropZodSchema: () => (/* binding */ isInteropZodSchema),\n/* harmony export */   isShapelessZodSchema: () => (/* binding */ isShapelessZodSchema),\n/* harmony export */   isSimpleStringZodSchema: () => (/* binding */ isSimpleStringZodSchema),\n/* harmony export */   isZodArrayV4: () => (/* binding */ isZodArrayV4),\n/* harmony export */   isZodLiteralV3: () => (/* binding */ isZodLiteralV3),\n/* harmony export */   isZodLiteralV4: () => (/* binding */ isZodLiteralV4),\n/* harmony export */   isZodNullableV4: () => (/* binding */ isZodNullableV4),\n/* harmony export */   isZodObjectV3: () => (/* binding */ isZodObjectV3),\n/* harmony export */   isZodObjectV4: () => (/* binding */ isZodObjectV4),\n/* harmony export */   isZodOptionalV4: () => (/* binding */ isZodOptionalV4),\n/* harmony export */   isZodSchema: () => (/* binding */ isZodSchema),\n/* harmony export */   isZodSchemaV3: () => (/* binding */ isZodSchemaV3),\n/* harmony export */   isZodSchemaV4: () => (/* binding */ isZodSchemaV4)\n/* harmony export */ });\n/* harmony import */ var zod_v4_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod/v4/core */ \"(ssr)/./node_modules/zod/v4/core/index.js\");\n\n\n//#region src/utils/types/zod.ts\nfunction isZodSchemaV4(schema) {\n\tif (typeof schema !== \"object\" || schema === null) return false;\n\tconst obj = schema;\n\tif (!(\"_zod\" in obj)) return false;\n\tconst zod = obj._zod;\n\treturn typeof zod === \"object\" && zod !== null && \"def\" in zod;\n}\nfunction isZodSchemaV3(schema) {\n\tif (typeof schema !== \"object\" || schema === null) return false;\n\tconst obj = schema;\n\tif (!(\"_def\" in obj) || \"_zod\" in obj) return false;\n\tconst def = obj._def;\n\treturn typeof def === \"object\" && def != null && \"typeName\" in def;\n}\n/** Backward compatible isZodSchema for Zod 3 */\nfunction isZodSchema(schema) {\n\tif (isZodSchemaV4(schema)) console.warn(\"[WARNING] Attempting to use Zod 4 schema in a context where Zod 3 schema is expected. This may cause unexpected behavior.\");\n\treturn isZodSchemaV3(schema);\n}\n/**\n* Given either a Zod schema, or plain object, determine if the input is a Zod schema.\n*\n* @param {unknown} input\n* @returns {boolean} Whether or not the provided input is a Zod schema.\n*/\nfunction isInteropZodSchema(input) {\n\tif (!input) return false;\n\tif (typeof input !== \"object\") return false;\n\tif (Array.isArray(input)) return false;\n\tif (isZodSchemaV4(input) || isZodSchemaV3(input)) return true;\n\treturn false;\n}\nfunction isZodLiteralV3(obj) {\n\tif (typeof obj === \"object\" && obj !== null && \"_def\" in obj && typeof obj._def === \"object\" && obj._def !== null && \"typeName\" in obj._def && obj._def.typeName === \"ZodLiteral\") return true;\n\treturn false;\n}\nfunction isZodLiteralV4(obj) {\n\tif (!isZodSchemaV4(obj)) return false;\n\tif (typeof obj === \"object\" && obj !== null && \"_zod\" in obj && typeof obj._zod === \"object\" && obj._zod !== null && \"def\" in obj._zod && typeof obj._zod.def === \"object\" && obj._zod.def !== null && \"type\" in obj._zod.def && obj._zod.def.type === \"literal\") return true;\n\treturn false;\n}\n/**\n* Determines if the provided value is an InteropZodLiteral (Zod v3 or v4 literal schema).\n*\n* @param obj The value to check.\n* @returns {boolean} True if the value is a Zod v3 or v4 literal schema, false otherwise.\n*/\nfunction isInteropZodLiteral(obj) {\n\tif (isZodLiteralV3(obj)) return true;\n\tif (isZodLiteralV4(obj)) return true;\n\treturn false;\n}\n/**\n* Asynchronously parses the input using the provided Zod schema (v3 or v4) and returns a safe parse result.\n* This function handles both Zod v3 and v4 schemas, returning a result object indicating success or failure.\n*\n* @template T - The expected output type of the schema.\n* @param {InteropZodType<T>} schema - The Zod schema (v3 or v4) to use for parsing.\n* @param {unknown} input - The input value to parse.\n* @returns {Promise<InteropZodSafeParseResult<T>>} A promise that resolves to a safe parse result object.\n* @throws {Error} If the schema is not a recognized Zod v3 or v4 schema.\n*/\nasync function interopSafeParseAsync(schema, input) {\n\tif (isZodSchemaV4(schema)) try {\n\t\tconst data = await (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.parseAsync)(schema, input);\n\t\treturn {\n\t\t\tsuccess: true,\n\t\t\tdata\n\t\t};\n\t} catch (error) {\n\t\treturn {\n\t\t\tsuccess: false,\n\t\t\terror\n\t\t};\n\t}\n\tif (isZodSchemaV3(schema)) return await schema.safeParseAsync(input);\n\tthrow new Error(\"Schema must be an instance of z3.ZodType or z4.$ZodType\");\n}\n/**\n* Asynchronously parses the input using the provided Zod schema (v3 or v4) and returns the parsed value.\n* Throws an error if parsing fails or if the schema is not a recognized Zod v3 or v4 schema.\n*\n* @template T - The expected output type of the schema.\n* @param {InteropZodType<T>} schema - The Zod schema (v3 or v4) to use for parsing.\n* @param {unknown} input - The input value to parse.\n* @returns {Promise<T>} A promise that resolves to the parsed value.\n* @throws {Error} If parsing fails or the schema is not a recognized Zod v3 or v4 schema.\n*/\nasync function interopParseAsync(schema, input) {\n\tif (isZodSchemaV4(schema)) return await (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.parseAsync)(schema, input);\n\tif (isZodSchemaV3(schema)) return await schema.parseAsync(input);\n\tthrow new Error(\"Schema must be an instance of z3.ZodType or z4.$ZodType\");\n}\n/**\n* Safely parses the input using the provided Zod schema (v3 or v4) and returns a result object\n* indicating success or failure. This function is compatible with both Zod v3 and v4 schemas.\n*\n* @template T - The expected output type of the schema.\n* @param {InteropZodType<T>} schema - The Zod schema (v3 or v4) to use for parsing.\n* @param {unknown} input - The input value to parse.\n* @returns {InteropZodSafeParseResult<T>} An object with either the parsed data (on success)\n*   or the error (on failure).\n* @throws {Error} If the schema is not a recognized Zod v3 or v4 schema.\n*/\nfunction interopSafeParse(schema, input) {\n\tif (isZodSchemaV4(schema)) try {\n\t\tconst data = (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.parse)(schema, input);\n\t\treturn {\n\t\t\tsuccess: true,\n\t\t\tdata\n\t\t};\n\t} catch (error) {\n\t\treturn {\n\t\t\tsuccess: false,\n\t\t\terror\n\t\t};\n\t}\n\tif (isZodSchemaV3(schema)) return schema.safeParse(input);\n\tthrow new Error(\"Schema must be an instance of z3.ZodType or z4.$ZodType\");\n}\n/**\n* Parses the input using the provided Zod schema (v3 or v4) and returns the parsed value.\n* Throws an error if parsing fails or if the schema is not a recognized Zod v3 or v4 schema.\n*\n* @template T - The expected output type of the schema.\n* @param {InteropZodType<T>} schema - The Zod schema (v3 or v4) to use for parsing.\n* @param {unknown} input - The input value to parse.\n* @returns {T} The parsed value.\n* @throws {Error} If parsing fails or the schema is not a recognized Zod v3 or v4 schema.\n*/\nfunction interopParse(schema, input) {\n\tif (isZodSchemaV4(schema)) return (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.parse)(schema, input);\n\tif (isZodSchemaV3(schema)) return schema.parse(input);\n\tthrow new Error(\"Schema must be an instance of z3.ZodType or z4.$ZodType\");\n}\n/**\n* Retrieves the description from a schema definition (v3, v4, or plain object), if available.\n*\n* @param {unknown} schema - The schema to extract the description from.\n* @returns {string | undefined} The description of the schema, or undefined if not present.\n*/\nfunction getSchemaDescription(schema) {\n\tif (isZodSchemaV4(schema)) return zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.globalRegistry.get(schema)?.description;\n\tif (isZodSchemaV3(schema)) return schema.description;\n\tif (\"description\" in schema && typeof schema.description === \"string\") return schema.description;\n\treturn void 0;\n}\n/**\n* Determines if the provided Zod schema is \"shapeless\".\n* A shapeless schema is one that does not define any object shape,\n* such as ZodString, ZodNumber, ZodBoolean, ZodAny, etc.\n* For ZodObject, it must have no shape keys to be considered shapeless.\n* ZodRecord schemas are considered shapeless since they define dynamic\n* key-value mappings without fixed keys.\n*\n* @param schema The Zod schema to check.\n* @returns {boolean} True if the schema is shapeless, false otherwise.\n*/\nfunction isShapelessZodSchema(schema) {\n\tif (!isInteropZodSchema(schema)) return false;\n\tif (isZodSchemaV3(schema)) {\n\t\tconst def = schema._def;\n\t\tif (def.typeName === \"ZodObject\") {\n\t\t\tconst obj = schema;\n\t\t\treturn !obj.shape || Object.keys(obj.shape).length === 0;\n\t\t}\n\t\tif (def.typeName === \"ZodRecord\") return true;\n\t}\n\tif (isZodSchemaV4(schema)) {\n\t\tconst def = schema._zod.def;\n\t\tif (def.type === \"object\") {\n\t\t\tconst obj = schema;\n\t\t\treturn !obj.shape || Object.keys(obj.shape).length === 0;\n\t\t}\n\t\tif (def.type === \"record\") return true;\n\t}\n\tif (typeof schema === \"object\" && schema !== null && !(\"shape\" in schema)) return true;\n\treturn false;\n}\n/**\n* Determines if the provided Zod schema should be treated as a simple string schema\n* that maps to DynamicTool. This aligns with the type-level constraint of\n* InteropZodType<string | undefined> which only matches basic string schemas.\n* If the provided schema is just z.string(), we can make the determination that\n* the tool is just a generic string tool that doesn't require any input validation.\n*\n* This function only returns true for basic ZodString schemas, including:\n* - Basic string schemas (z.string())\n* - String schemas with validations (z.string().min(1), z.string().email(), etc.)\n*\n* This function returns false for everything else, including:\n* - String schemas with defaults (z.string().default(\"value\"))\n* - Branded string schemas (z.string().brand<\"UserId\">())\n* - String schemas with catch operations (z.string().catch(\"default\"))\n* - Optional/nullable string schemas (z.string().optional())\n* - Transformed schemas (z.string().transform() or z.object().transform())\n* - Object or record schemas, even if they're empty\n* - Any other schema type\n*\n* @param schema The Zod schema to check.\n* @returns {boolean} True if the schema is a basic ZodString, false otherwise.\n*/\nfunction isSimpleStringZodSchema(schema) {\n\tif (!isInteropZodSchema(schema)) return false;\n\tif (isZodSchemaV3(schema)) {\n\t\tconst def = schema._def;\n\t\treturn def.typeName === \"ZodString\";\n\t}\n\tif (isZodSchemaV4(schema)) {\n\t\tconst def = schema._zod.def;\n\t\treturn def.type === \"string\";\n\t}\n\treturn false;\n}\nfunction isZodObjectV3(obj) {\n\tif (typeof obj === \"object\" && obj !== null && \"_def\" in obj && typeof obj._def === \"object\" && obj._def !== null && \"typeName\" in obj._def && obj._def.typeName === \"ZodObject\") return true;\n\treturn false;\n}\nfunction isZodObjectV4(obj) {\n\tif (!isZodSchemaV4(obj)) return false;\n\tif (typeof obj === \"object\" && obj !== null && \"_zod\" in obj && typeof obj._zod === \"object\" && obj._zod !== null && \"def\" in obj._zod && typeof obj._zod.def === \"object\" && obj._zod.def !== null && \"type\" in obj._zod.def && obj._zod.def.type === \"object\") return true;\n\treturn false;\n}\nfunction isZodArrayV4(obj) {\n\tif (!isZodSchemaV4(obj)) return false;\n\tif (typeof obj === \"object\" && obj !== null && \"_zod\" in obj && typeof obj._zod === \"object\" && obj._zod !== null && \"def\" in obj._zod && typeof obj._zod.def === \"object\" && obj._zod.def !== null && \"type\" in obj._zod.def && obj._zod.def.type === \"array\") return true;\n\treturn false;\n}\nfunction isZodOptionalV4(obj) {\n\tif (!isZodSchemaV4(obj)) return false;\n\tif (typeof obj === \"object\" && obj !== null && \"_zod\" in obj && typeof obj._zod === \"object\" && obj._zod !== null && \"def\" in obj._zod && typeof obj._zod.def === \"object\" && obj._zod.def !== null && \"type\" in obj._zod.def && obj._zod.def.type === \"optional\") return true;\n\treturn false;\n}\nfunction isZodNullableV4(obj) {\n\tif (!isZodSchemaV4(obj)) return false;\n\tif (typeof obj === \"object\" && obj !== null && \"_zod\" in obj && typeof obj._zod === \"object\" && obj._zod !== null && \"def\" in obj._zod && typeof obj._zod.def === \"object\" && obj._zod.def !== null && \"type\" in obj._zod.def && obj._zod.def.type === \"nullable\") return true;\n\treturn false;\n}\n/**\n* Determines if the provided value is an InteropZodObject (Zod v3 or v4 object schema).\n*\n* @param obj The value to check.\n* @returns {boolean} True if the value is a Zod v3 or v4 object schema, false otherwise.\n*/\nfunction isInteropZodObject(obj) {\n\tif (isZodObjectV3(obj)) return true;\n\tif (isZodObjectV4(obj)) return true;\n\treturn false;\n}\n/**\n* Retrieves the shape (fields) of a Zod object schema, supporting both Zod v3 and v4.\n*\n* @template T - The type of the Zod object schema.\n* @param {T} schema - The Zod object schema instance (either v3 or v4).\n* @returns {InteropZodObjectShape<T>} The shape of the object schema.\n* @throws {Error} If the schema is not a Zod v3 or v4 object.\n*/\nfunction getInteropZodObjectShape(schema) {\n\tif (isZodSchemaV3(schema)) return schema.shape;\n\tif (isZodSchemaV4(schema)) return schema._zod.def.shape;\n\tthrow new Error(\"Schema must be an instance of z3.ZodObject or z4.$ZodObject\");\n}\n/**\n* Extends a Zod object schema with additional fields, supporting both Zod v3 and v4.\n*\n* @template T - The type of the Zod object schema.\n* @param {T} schema - The Zod object schema instance (either v3 or v4).\n* @param {InteropZodObjectShape} extension - The fields to add to the schema.\n* @returns {InteropZodObject} The extended Zod object schema.\n* @throws {Error} If the schema is not a Zod v3 or v4 object.\n*/\nfunction extendInteropZodObject(schema, extension) {\n\tif (isZodSchemaV3(schema)) return schema.extend(extension);\n\tif (isZodSchemaV4(schema)) return zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.util.extend(schema, extension);\n\tthrow new Error(\"Schema must be an instance of z3.ZodObject or z4.$ZodObject\");\n}\n/**\n* Returns a partial version of a Zod object schema, making all fields optional.\n* Supports both Zod v3 and v4.\n*\n* @template T - The type of the Zod object schema.\n* @param {T} schema - The Zod object schema instance (either v3 or v4).\n* @returns {InteropZodObject} The partial Zod object schema.\n* @throws {Error} If the schema is not a Zod v3 or v4 object.\n*/\nfunction interopZodObjectPartial(schema) {\n\tif (isZodSchemaV3(schema)) return schema.partial();\n\tif (isZodSchemaV4(schema)) return zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.util.partial(zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.$ZodOptional, schema, void 0);\n\tthrow new Error(\"Schema must be an instance of z3.ZodObject or z4.$ZodObject\");\n}\n/**\n* Returns a strict version of a Zod object schema, disallowing unknown keys.\n* Supports both Zod v3 and v4 object schemas. If `recursive` is true, applies strictness\n* recursively to all nested object schemas and arrays of object schemas.\n*\n* @template T - The type of the Zod object schema.\n* @param {T} schema - The Zod object schema instance (either v3 or v4).\n* @param {boolean} [recursive=false] - Whether to apply strictness recursively to nested objects/arrays.\n* @returns {InteropZodObject} The strict Zod object schema.\n* @throws {Error} If the schema is not a Zod v3 or v4 object.\n*/\nfunction interopZodObjectStrict(schema, recursive = false) {\n\tif (isZodSchemaV3(schema)) return schema.strict();\n\tif (isZodObjectV4(schema)) {\n\t\tconst outputShape = schema._zod.def.shape;\n\t\tif (recursive) for (const [key, keySchema] of Object.entries(schema._zod.def.shape)) {\n\t\t\tif (isZodObjectV4(keySchema)) {\n\t\t\t\tconst outputSchema = interopZodObjectStrict(keySchema, recursive);\n\t\t\t\toutputShape[key] = outputSchema;\n\t\t\t} else if (isZodArrayV4(keySchema)) {\n\t\t\t\tlet elementSchema = keySchema._zod.def.element;\n\t\t\t\tif (isZodObjectV4(elementSchema)) elementSchema = interopZodObjectStrict(elementSchema, recursive);\n\t\t\t\toutputShape[key] = (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.clone)(keySchema, {\n\t\t\t\t\t...keySchema._zod.def,\n\t\t\t\t\telement: elementSchema\n\t\t\t\t});\n\t\t\t} else outputShape[key] = keySchema;\n\t\t\tconst meta$1 = zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.globalRegistry.get(keySchema);\n\t\t\tif (meta$1) zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.globalRegistry.add(outputShape[key], meta$1);\n\t\t}\n\t\tconst modifiedSchema = (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.clone)(schema, {\n\t\t\t...schema._zod.def,\n\t\t\tshape: outputShape,\n\t\t\tcatchall: (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_0__._never)(zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.$ZodNever)\n\t\t});\n\t\tconst meta = zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.globalRegistry.get(schema);\n\t\tif (meta) zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.globalRegistry.add(modifiedSchema, meta);\n\t\treturn modifiedSchema;\n\t}\n\tthrow new Error(\"Schema must be an instance of z3.ZodObject or z4.$ZodObject\");\n}\n/**\n* Returns a passthrough version of a Zod object schema, allowing unknown keys.\n* Supports both Zod v3 and v4 object schemas. If `recursive` is true, applies passthrough\n* recursively to all nested object schemas and arrays of object schemas.\n*\n* @template T - The type of the Zod object schema.\n* @param {T} schema - The Zod object schema instance (either v3 or v4).\n* @param {boolean} [recursive=false] - Whether to apply passthrough recursively to nested objects/arrays.\n* @returns {InteropZodObject} The passthrough Zod object schema.\n* @throws {Error} If the schema is not a Zod v3 or v4 object.\n*/\nfunction interopZodObjectPassthrough(schema, recursive = false) {\n\tif (isZodObjectV3(schema)) return schema.passthrough();\n\tif (isZodObjectV4(schema)) {\n\t\tconst outputShape = schema._zod.def.shape;\n\t\tif (recursive) for (const [key, keySchema] of Object.entries(schema._zod.def.shape)) {\n\t\t\tif (isZodObjectV4(keySchema)) {\n\t\t\t\tconst outputSchema = interopZodObjectPassthrough(keySchema, recursive);\n\t\t\t\toutputShape[key] = outputSchema;\n\t\t\t} else if (isZodArrayV4(keySchema)) {\n\t\t\t\tlet elementSchema = keySchema._zod.def.element;\n\t\t\t\tif (isZodObjectV4(elementSchema)) elementSchema = interopZodObjectPassthrough(elementSchema, recursive);\n\t\t\t\toutputShape[key] = (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.clone)(keySchema, {\n\t\t\t\t\t...keySchema._zod.def,\n\t\t\t\t\telement: elementSchema\n\t\t\t\t});\n\t\t\t} else outputShape[key] = keySchema;\n\t\t\tconst meta$1 = zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.globalRegistry.get(keySchema);\n\t\t\tif (meta$1) zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.globalRegistry.add(outputShape[key], meta$1);\n\t\t}\n\t\tconst modifiedSchema = (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.clone)(schema, {\n\t\t\t...schema._zod.def,\n\t\t\tshape: outputShape,\n\t\t\tcatchall: (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_0__._unknown)(zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.$ZodUnknown)\n\t\t});\n\t\tconst meta = zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.globalRegistry.get(schema);\n\t\tif (meta) zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.globalRegistry.add(modifiedSchema, meta);\n\t\treturn modifiedSchema;\n\t}\n\tthrow new Error(\"Schema must be an instance of z3.ZodObject or z4.$ZodObject\");\n}\n/**\n* Returns a getter function for the default value of a Zod schema, if one is defined.\n* Supports both Zod v3 and v4 schemas. If the schema has a default value,\n* the returned function will return that value when called. If no default is defined,\n* returns undefined.\n*\n* @template T - The type of the Zod schema.\n* @param {T} schema - The Zod schema instance (either v3 or v4).\n* @returns {(() => InferInteropZodOutput<T>) | undefined} A function that returns the default value, or undefined if no default is set.\n*/\nfunction getInteropZodDefaultGetter(schema) {\n\tif (isZodSchemaV3(schema)) try {\n\t\tconst defaultValue = schema.parse(void 0);\n\t\treturn () => defaultValue;\n\t} catch {\n\t\treturn void 0;\n\t}\n\tif (isZodSchemaV4(schema)) try {\n\t\tconst defaultValue = (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.parse)(schema, void 0);\n\t\treturn () => defaultValue;\n\t} catch {\n\t\treturn void 0;\n\t}\n\treturn void 0;\n}\nfunction isZodTransformV3(schema) {\n\treturn isZodSchemaV3(schema) && \"typeName\" in schema._def && schema._def.typeName === \"ZodEffects\";\n}\nfunction isZodTransformV4(schema) {\n\treturn isZodSchemaV4(schema) && schema._zod.def.type === \"pipe\";\n}\nfunction interopZodTransformInputSchemaImpl(schema, recursive, cache) {\n\tconst cached = cache.get(schema);\n\tif (cached !== void 0) return cached;\n\tif (isZodSchemaV3(schema)) {\n\t\tif (isZodTransformV3(schema)) return interopZodTransformInputSchemaImpl(schema._def.schema, recursive, cache);\n\t\treturn schema;\n\t}\n\tif (isZodSchemaV4(schema)) {\n\t\tlet outputSchema = schema;\n\t\tif (isZodTransformV4(schema)) outputSchema = interopZodTransformInputSchemaImpl(schema._zod.def.in, recursive, cache);\n\t\tif (recursive) {\n\t\t\tif (isZodObjectV4(outputSchema)) {\n\t\t\t\tconst outputShape = {};\n\t\t\t\tfor (const [key, keySchema] of Object.entries(outputSchema._zod.def.shape)) outputShape[key] = interopZodTransformInputSchemaImpl(keySchema, recursive, cache);\n\t\t\t\toutputSchema = (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.clone)(outputSchema, {\n\t\t\t\t\t...outputSchema._zod.def,\n\t\t\t\t\tshape: outputShape\n\t\t\t\t});\n\t\t\t} else if (isZodArrayV4(outputSchema)) {\n\t\t\t\tconst elementSchema = interopZodTransformInputSchemaImpl(outputSchema._zod.def.element, recursive, cache);\n\t\t\t\toutputSchema = (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.clone)(outputSchema, {\n\t\t\t\t\t...outputSchema._zod.def,\n\t\t\t\t\telement: elementSchema\n\t\t\t\t});\n\t\t\t} else if (isZodOptionalV4(outputSchema)) {\n\t\t\t\tconst innerSchema = interopZodTransformInputSchemaImpl(outputSchema._zod.def.innerType, recursive, cache);\n\t\t\t\toutputSchema = (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.clone)(outputSchema, {\n\t\t\t\t\t...outputSchema._zod.def,\n\t\t\t\t\tinnerType: innerSchema\n\t\t\t\t});\n\t\t\t} else if (isZodNullableV4(outputSchema)) {\n\t\t\t\tconst innerSchema = interopZodTransformInputSchemaImpl(outputSchema._zod.def.innerType, recursive, cache);\n\t\t\t\toutputSchema = (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.clone)(outputSchema, {\n\t\t\t\t\t...outputSchema._zod.def,\n\t\t\t\t\tinnerType: innerSchema\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tconst meta = zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.globalRegistry.get(schema);\n\t\tif (meta) zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.globalRegistry.add(outputSchema, meta);\n\t\tcache.set(schema, outputSchema);\n\t\treturn outputSchema;\n\t}\n\tthrow new Error(\"Schema must be an instance of z3.ZodType or z4.$ZodType\");\n}\n/**\n* Returns the input type of a Zod transform schema, for both v3 and v4.\n* If the schema is not a transform, returns undefined. If `recursive` is true,\n* recursively processes nested object schemas and arrays of object schemas.\n*\n* @param schema - The Zod schema instance (v3 or v4)\n* @param {boolean} [recursive=false] - Whether to recursively process nested objects/arrays.\n* @returns The input Zod schema of the transform, or undefined if not a transform\n*/\nfunction interopZodTransformInputSchema(schema, recursive = false) {\n\tconst cache = /* @__PURE__ */ new WeakMap();\n\treturn interopZodTransformInputSchemaImpl(schema, recursive, cache);\n}\n/**\n* Creates a modified version of a Zod object schema where fields matching a predicate are made optional.\n* Supports both Zod v3 and v4 schemas and preserves the original schema version.\n*\n* @template T - The type of the Zod object schema.\n* @param {T} schema - The Zod object schema instance (either v3 or v4).\n* @param {(key: string, value: InteropZodType) => boolean} predicate - Function to determine which fields should be optional.\n* @returns {InteropZodObject} The modified Zod object schema.\n* @throws {Error} If the schema is not a Zod v3 or v4 object.\n*/\nfunction interopZodObjectMakeFieldsOptional(schema, predicate) {\n\tif (isZodSchemaV3(schema)) {\n\t\tconst shape = getInteropZodObjectShape(schema);\n\t\tconst modifiedShape = {};\n\t\tfor (const [key, value] of Object.entries(shape)) if (predicate(key, value)) modifiedShape[key] = value.optional();\n\t\telse modifiedShape[key] = value;\n\t\treturn schema.extend(modifiedShape);\n\t}\n\tif (isZodSchemaV4(schema)) {\n\t\tconst shape = getInteropZodObjectShape(schema);\n\t\tconst outputShape = { ...schema._zod.def.shape };\n\t\tfor (const [key, value] of Object.entries(shape)) if (predicate(key, value)) outputShape[key] = new zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.$ZodOptional({\n\t\t\ttype: \"optional\",\n\t\t\tinnerType: value\n\t\t});\n\t\tconst modifiedSchema = (0,zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.clone)(schema, {\n\t\t\t...schema._zod.def,\n\t\t\tshape: outputShape\n\t\t});\n\t\tconst meta = zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.globalRegistry.get(schema);\n\t\tif (meta) zod_v4_core__WEBPACK_IMPORTED_MODULE_0__.globalRegistry.add(modifiedSchema, meta);\n\t\treturn modifiedSchema;\n\t}\n\tthrow new Error(\"Schema must be an instance of z3.ZodObject or z4.$ZodObject\");\n}\nfunction isInteropZodError(e) {\n\treturn e instanceof Error && (e.constructor.name === \"ZodError\" || e.constructor.name === \"$ZodError\");\n}\n\n//#endregion\n\n//# sourceMappingURL=zod.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdHlwZXMvem9kLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFxSTs7QUFFckk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsU0FBUztBQUNuQixZQUFZLFNBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxTQUFTO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLG1CQUFtQjtBQUM3QixVQUFVLFNBQVM7QUFDbkIsWUFBWSx1Q0FBdUM7QUFDbkQsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix1REFBVTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsbUJBQW1CO0FBQzdCLFVBQVUsU0FBUztBQUNuQixZQUFZLFlBQVk7QUFDeEIsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQSx5Q0FBeUMsdURBQVU7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsbUJBQW1CO0FBQzdCLFVBQVUsU0FBUztBQUNuQixZQUFZLDhCQUE4QjtBQUMxQztBQUNBLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQSxlQUFlLGtEQUFLO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxtQkFBbUI7QUFDN0IsVUFBVSxTQUFTO0FBQ25CLFlBQVksR0FBRztBQUNmLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0EsbUNBQW1DLGtEQUFLO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsU0FBUztBQUNuQixZQUFZLG9CQUFvQjtBQUNoQztBQUNBO0FBQ0EsbUNBQW1DLHVEQUFjO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxTQUFTO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxTQUFTO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFNBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLEdBQUc7QUFDYixZQUFZLDBCQUEwQjtBQUN0QyxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLEdBQUc7QUFDYixVQUFVLHVCQUF1QjtBQUNqQyxZQUFZLGtCQUFrQjtBQUM5QixXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLG9EQUFXO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxHQUFHO0FBQ2IsWUFBWSxrQkFBa0I7QUFDOUIsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxxREFBWSxDQUFDLHFEQUFZO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLEdBQUc7QUFDYixVQUFVLFNBQVM7QUFDbkIsWUFBWSxrQkFBa0I7QUFDOUIsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsdUJBQXVCLGtEQUFLO0FBQzVCO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsS0FBSztBQUNMLGtCQUFrQix1REFBYztBQUNoQyxlQUFlLHVEQUFjO0FBQzdCO0FBQ0EseUJBQXlCLGtEQUFLO0FBQzlCO0FBQ0E7QUFDQSxhQUFhLG1EQUFNLENBQUMsa0RBQVM7QUFDN0IsR0FBRztBQUNILGVBQWUsdURBQWM7QUFDN0IsWUFBWSx1REFBYztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsR0FBRztBQUNiLFVBQVUsU0FBUztBQUNuQixZQUFZLGtCQUFrQjtBQUM5QixXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSx1QkFBdUIsa0RBQUs7QUFDNUI7QUFDQTtBQUNBLEtBQUs7QUFDTCxLQUFLO0FBQ0wsa0JBQWtCLHVEQUFjO0FBQ2hDLGVBQWUsdURBQWM7QUFDN0I7QUFDQSx5QkFBeUIsa0RBQUs7QUFDOUI7QUFDQTtBQUNBLGFBQWEscURBQVEsQ0FBQyxvREFBVztBQUNqQyxHQUFHO0FBQ0gsZUFBZSx1REFBYztBQUM3QixZQUFZLHVEQUFjO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLEdBQUc7QUFDYixZQUFZLDhDQUE4QztBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixrREFBSztBQUM1QjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQUs7QUFDeEI7QUFDQTtBQUNBLEtBQUs7QUFDTCxLQUFLO0FBQ0w7QUFDQSxtQkFBbUIsa0RBQUs7QUFDeEI7QUFDQTtBQUNBLEtBQUs7QUFDTCxLQUFLO0FBQ0w7QUFDQSxtQkFBbUIsa0RBQUs7QUFDeEI7QUFDQTtBQUNBLEtBQUs7QUFDTCxLQUFLO0FBQ0w7QUFDQSxtQkFBbUIsa0RBQUs7QUFDeEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsZUFBZSx1REFBYztBQUM3QixZQUFZLHVEQUFjO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLFNBQVM7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsR0FBRztBQUNiLFVBQVUsaURBQWlEO0FBQzNELFlBQVksa0JBQWtCO0FBQzlCLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCLHNHQUFzRyxxREFBWTtBQUNsSDtBQUNBO0FBQ0EsR0FBRztBQUNILHlCQUF5QixrREFBSztBQUM5QjtBQUNBO0FBQ0EsR0FBRztBQUNILGVBQWUsdURBQWM7QUFDN0IsWUFBWSx1REFBYztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNrbUI7QUFDbG1CIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdHlwZXMvem9kLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7ICRab2ROZXZlciwgJFpvZE9wdGlvbmFsLCAkWm9kVW5rbm93biwgX25ldmVyLCBfdW5rbm93biwgY2xvbmUsIGdsb2JhbFJlZ2lzdHJ5LCBwYXJzZSwgcGFyc2VBc3luYywgdXRpbCB9IGZyb20gXCJ6b2QvdjQvY29yZVwiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL3R5cGVzL3pvZC50c1xuZnVuY3Rpb24gaXNab2RTY2hlbWFWNChzY2hlbWEpIHtcblx0aWYgKHR5cGVvZiBzY2hlbWEgIT09IFwib2JqZWN0XCIgfHwgc2NoZW1hID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cdGNvbnN0IG9iaiA9IHNjaGVtYTtcblx0aWYgKCEoXCJfem9kXCIgaW4gb2JqKSkgcmV0dXJuIGZhbHNlO1xuXHRjb25zdCB6b2QgPSBvYmouX3pvZDtcblx0cmV0dXJuIHR5cGVvZiB6b2QgPT09IFwib2JqZWN0XCIgJiYgem9kICE9PSBudWxsICYmIFwiZGVmXCIgaW4gem9kO1xufVxuZnVuY3Rpb24gaXNab2RTY2hlbWFWMyhzY2hlbWEpIHtcblx0aWYgKHR5cGVvZiBzY2hlbWEgIT09IFwib2JqZWN0XCIgfHwgc2NoZW1hID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cdGNvbnN0IG9iaiA9IHNjaGVtYTtcblx0aWYgKCEoXCJfZGVmXCIgaW4gb2JqKSB8fCBcIl96b2RcIiBpbiBvYmopIHJldHVybiBmYWxzZTtcblx0Y29uc3QgZGVmID0gb2JqLl9kZWY7XG5cdHJldHVybiB0eXBlb2YgZGVmID09PSBcIm9iamVjdFwiICYmIGRlZiAhPSBudWxsICYmIFwidHlwZU5hbWVcIiBpbiBkZWY7XG59XG4vKiogQmFja3dhcmQgY29tcGF0aWJsZSBpc1pvZFNjaGVtYSBmb3IgWm9kIDMgKi9cbmZ1bmN0aW9uIGlzWm9kU2NoZW1hKHNjaGVtYSkge1xuXHRpZiAoaXNab2RTY2hlbWFWNChzY2hlbWEpKSBjb25zb2xlLndhcm4oXCJbV0FSTklOR10gQXR0ZW1wdGluZyB0byB1c2UgWm9kIDQgc2NoZW1hIGluIGEgY29udGV4dCB3aGVyZSBab2QgMyBzY2hlbWEgaXMgZXhwZWN0ZWQuIFRoaXMgbWF5IGNhdXNlIHVuZXhwZWN0ZWQgYmVoYXZpb3IuXCIpO1xuXHRyZXR1cm4gaXNab2RTY2hlbWFWMyhzY2hlbWEpO1xufVxuLyoqXG4qIEdpdmVuIGVpdGhlciBhIFpvZCBzY2hlbWEsIG9yIHBsYWluIG9iamVjdCwgZGV0ZXJtaW5lIGlmIHRoZSBpbnB1dCBpcyBhIFpvZCBzY2hlbWEuXG4qXG4qIEBwYXJhbSB7dW5rbm93bn0gaW5wdXRcbiogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgb3Igbm90IHRoZSBwcm92aWRlZCBpbnB1dCBpcyBhIFpvZCBzY2hlbWEuXG4qL1xuZnVuY3Rpb24gaXNJbnRlcm9wWm9kU2NoZW1hKGlucHV0KSB7XG5cdGlmICghaW5wdXQpIHJldHVybiBmYWxzZTtcblx0aWYgKHR5cGVvZiBpbnB1dCAhPT0gXCJvYmplY3RcIikgcmV0dXJuIGZhbHNlO1xuXHRpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHJldHVybiBmYWxzZTtcblx0aWYgKGlzWm9kU2NoZW1hVjQoaW5wdXQpIHx8IGlzWm9kU2NoZW1hVjMoaW5wdXQpKSByZXR1cm4gdHJ1ZTtcblx0cmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gaXNab2RMaXRlcmFsVjMob2JqKSB7XG5cdGlmICh0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiICYmIG9iaiAhPT0gbnVsbCAmJiBcIl9kZWZcIiBpbiBvYmogJiYgdHlwZW9mIG9iai5fZGVmID09PSBcIm9iamVjdFwiICYmIG9iai5fZGVmICE9PSBudWxsICYmIFwidHlwZU5hbWVcIiBpbiBvYmouX2RlZiAmJiBvYmouX2RlZi50eXBlTmFtZSA9PT0gXCJab2RMaXRlcmFsXCIpIHJldHVybiB0cnVlO1xuXHRyZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBpc1pvZExpdGVyYWxWNChvYmopIHtcblx0aWYgKCFpc1pvZFNjaGVtYVY0KG9iaikpIHJldHVybiBmYWxzZTtcblx0aWYgKHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgJiYgb2JqICE9PSBudWxsICYmIFwiX3pvZFwiIGluIG9iaiAmJiB0eXBlb2Ygb2JqLl96b2QgPT09IFwib2JqZWN0XCIgJiYgb2JqLl96b2QgIT09IG51bGwgJiYgXCJkZWZcIiBpbiBvYmouX3pvZCAmJiB0eXBlb2Ygb2JqLl96b2QuZGVmID09PSBcIm9iamVjdFwiICYmIG9iai5fem9kLmRlZiAhPT0gbnVsbCAmJiBcInR5cGVcIiBpbiBvYmouX3pvZC5kZWYgJiYgb2JqLl96b2QuZGVmLnR5cGUgPT09IFwibGl0ZXJhbFwiKSByZXR1cm4gdHJ1ZTtcblx0cmV0dXJuIGZhbHNlO1xufVxuLyoqXG4qIERldGVybWluZXMgaWYgdGhlIHByb3ZpZGVkIHZhbHVlIGlzIGFuIEludGVyb3Bab2RMaXRlcmFsIChab2QgdjMgb3IgdjQgbGl0ZXJhbCBzY2hlbWEpLlxuKlxuKiBAcGFyYW0gb2JqIFRoZSB2YWx1ZSB0byBjaGVjay5cbiogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHZhbHVlIGlzIGEgWm9kIHYzIG9yIHY0IGxpdGVyYWwgc2NoZW1hLCBmYWxzZSBvdGhlcndpc2UuXG4qL1xuZnVuY3Rpb24gaXNJbnRlcm9wWm9kTGl0ZXJhbChvYmopIHtcblx0aWYgKGlzWm9kTGl0ZXJhbFYzKG9iaikpIHJldHVybiB0cnVlO1xuXHRpZiAoaXNab2RMaXRlcmFsVjQob2JqKSkgcmV0dXJuIHRydWU7XG5cdHJldHVybiBmYWxzZTtcbn1cbi8qKlxuKiBBc3luY2hyb25vdXNseSBwYXJzZXMgdGhlIGlucHV0IHVzaW5nIHRoZSBwcm92aWRlZCBab2Qgc2NoZW1hICh2MyBvciB2NCkgYW5kIHJldHVybnMgYSBzYWZlIHBhcnNlIHJlc3VsdC5cbiogVGhpcyBmdW5jdGlvbiBoYW5kbGVzIGJvdGggWm9kIHYzIGFuZCB2NCBzY2hlbWFzLCByZXR1cm5pbmcgYSByZXN1bHQgb2JqZWN0IGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlLlxuKlxuKiBAdGVtcGxhdGUgVCAtIFRoZSBleHBlY3RlZCBvdXRwdXQgdHlwZSBvZiB0aGUgc2NoZW1hLlxuKiBAcGFyYW0ge0ludGVyb3Bab2RUeXBlPFQ+fSBzY2hlbWEgLSBUaGUgWm9kIHNjaGVtYSAodjMgb3IgdjQpIHRvIHVzZSBmb3IgcGFyc2luZy5cbiogQHBhcmFtIHt1bmtub3dufSBpbnB1dCAtIFRoZSBpbnB1dCB2YWx1ZSB0byBwYXJzZS5cbiogQHJldHVybnMge1Byb21pc2U8SW50ZXJvcFpvZFNhZmVQYXJzZVJlc3VsdDxUPj59IEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgc2FmZSBwYXJzZSByZXN1bHQgb2JqZWN0LlxuKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHNjaGVtYSBpcyBub3QgYSByZWNvZ25pemVkIFpvZCB2MyBvciB2NCBzY2hlbWEuXG4qL1xuYXN5bmMgZnVuY3Rpb24gaW50ZXJvcFNhZmVQYXJzZUFzeW5jKHNjaGVtYSwgaW5wdXQpIHtcblx0aWYgKGlzWm9kU2NoZW1hVjQoc2NoZW1hKSkgdHJ5IHtcblx0XHRjb25zdCBkYXRhID0gYXdhaXQgcGFyc2VBc3luYyhzY2hlbWEsIGlucHV0KTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0c3VjY2VzczogdHJ1ZSxcblx0XHRcdGRhdGFcblx0XHR9O1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdHJldHVybiB7XG5cdFx0XHRzdWNjZXNzOiBmYWxzZSxcblx0XHRcdGVycm9yXG5cdFx0fTtcblx0fVxuXHRpZiAoaXNab2RTY2hlbWFWMyhzY2hlbWEpKSByZXR1cm4gYXdhaXQgc2NoZW1hLnNhZmVQYXJzZUFzeW5jKGlucHV0KTtcblx0dGhyb3cgbmV3IEVycm9yKFwiU2NoZW1hIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgejMuWm9kVHlwZSBvciB6NC4kWm9kVHlwZVwiKTtcbn1cbi8qKlxuKiBBc3luY2hyb25vdXNseSBwYXJzZXMgdGhlIGlucHV0IHVzaW5nIHRoZSBwcm92aWRlZCBab2Qgc2NoZW1hICh2MyBvciB2NCkgYW5kIHJldHVybnMgdGhlIHBhcnNlZCB2YWx1ZS5cbiogVGhyb3dzIGFuIGVycm9yIGlmIHBhcnNpbmcgZmFpbHMgb3IgaWYgdGhlIHNjaGVtYSBpcyBub3QgYSByZWNvZ25pemVkIFpvZCB2MyBvciB2NCBzY2hlbWEuXG4qXG4qIEB0ZW1wbGF0ZSBUIC0gVGhlIGV4cGVjdGVkIG91dHB1dCB0eXBlIG9mIHRoZSBzY2hlbWEuXG4qIEBwYXJhbSB7SW50ZXJvcFpvZFR5cGU8VD59IHNjaGVtYSAtIFRoZSBab2Qgc2NoZW1hICh2MyBvciB2NCkgdG8gdXNlIGZvciBwYXJzaW5nLlxuKiBAcGFyYW0ge3Vua25vd259IGlucHV0IC0gVGhlIGlucHV0IHZhbHVlIHRvIHBhcnNlLlxuKiBAcmV0dXJucyB7UHJvbWlzZTxUPn0gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIHBhcnNlZCB2YWx1ZS5cbiogQHRocm93cyB7RXJyb3J9IElmIHBhcnNpbmcgZmFpbHMgb3IgdGhlIHNjaGVtYSBpcyBub3QgYSByZWNvZ25pemVkIFpvZCB2MyBvciB2NCBzY2hlbWEuXG4qL1xuYXN5bmMgZnVuY3Rpb24gaW50ZXJvcFBhcnNlQXN5bmMoc2NoZW1hLCBpbnB1dCkge1xuXHRpZiAoaXNab2RTY2hlbWFWNChzY2hlbWEpKSByZXR1cm4gYXdhaXQgcGFyc2VBc3luYyhzY2hlbWEsIGlucHV0KTtcblx0aWYgKGlzWm9kU2NoZW1hVjMoc2NoZW1hKSkgcmV0dXJuIGF3YWl0IHNjaGVtYS5wYXJzZUFzeW5jKGlucHV0KTtcblx0dGhyb3cgbmV3IEVycm9yKFwiU2NoZW1hIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgejMuWm9kVHlwZSBvciB6NC4kWm9kVHlwZVwiKTtcbn1cbi8qKlxuKiBTYWZlbHkgcGFyc2VzIHRoZSBpbnB1dCB1c2luZyB0aGUgcHJvdmlkZWQgWm9kIHNjaGVtYSAodjMgb3IgdjQpIGFuZCByZXR1cm5zIGEgcmVzdWx0IG9iamVjdFxuKiBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZS4gVGhpcyBmdW5jdGlvbiBpcyBjb21wYXRpYmxlIHdpdGggYm90aCBab2QgdjMgYW5kIHY0IHNjaGVtYXMuXG4qXG4qIEB0ZW1wbGF0ZSBUIC0gVGhlIGV4cGVjdGVkIG91dHB1dCB0eXBlIG9mIHRoZSBzY2hlbWEuXG4qIEBwYXJhbSB7SW50ZXJvcFpvZFR5cGU8VD59IHNjaGVtYSAtIFRoZSBab2Qgc2NoZW1hICh2MyBvciB2NCkgdG8gdXNlIGZvciBwYXJzaW5nLlxuKiBAcGFyYW0ge3Vua25vd259IGlucHV0IC0gVGhlIGlucHV0IHZhbHVlIHRvIHBhcnNlLlxuKiBAcmV0dXJucyB7SW50ZXJvcFpvZFNhZmVQYXJzZVJlc3VsdDxUPn0gQW4gb2JqZWN0IHdpdGggZWl0aGVyIHRoZSBwYXJzZWQgZGF0YSAob24gc3VjY2VzcylcbiogICBvciB0aGUgZXJyb3IgKG9uIGZhaWx1cmUpLlxuKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHNjaGVtYSBpcyBub3QgYSByZWNvZ25pemVkIFpvZCB2MyBvciB2NCBzY2hlbWEuXG4qL1xuZnVuY3Rpb24gaW50ZXJvcFNhZmVQYXJzZShzY2hlbWEsIGlucHV0KSB7XG5cdGlmIChpc1pvZFNjaGVtYVY0KHNjaGVtYSkpIHRyeSB7XG5cdFx0Y29uc3QgZGF0YSA9IHBhcnNlKHNjaGVtYSwgaW5wdXQpO1xuXHRcdHJldHVybiB7XG5cdFx0XHRzdWNjZXNzOiB0cnVlLFxuXHRcdFx0ZGF0YVxuXHRcdH07XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHN1Y2Nlc3M6IGZhbHNlLFxuXHRcdFx0ZXJyb3Jcblx0XHR9O1xuXHR9XG5cdGlmIChpc1pvZFNjaGVtYVYzKHNjaGVtYSkpIHJldHVybiBzY2hlbWEuc2FmZVBhcnNlKGlucHV0KTtcblx0dGhyb3cgbmV3IEVycm9yKFwiU2NoZW1hIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgejMuWm9kVHlwZSBvciB6NC4kWm9kVHlwZVwiKTtcbn1cbi8qKlxuKiBQYXJzZXMgdGhlIGlucHV0IHVzaW5nIHRoZSBwcm92aWRlZCBab2Qgc2NoZW1hICh2MyBvciB2NCkgYW5kIHJldHVybnMgdGhlIHBhcnNlZCB2YWx1ZS5cbiogVGhyb3dzIGFuIGVycm9yIGlmIHBhcnNpbmcgZmFpbHMgb3IgaWYgdGhlIHNjaGVtYSBpcyBub3QgYSByZWNvZ25pemVkIFpvZCB2MyBvciB2NCBzY2hlbWEuXG4qXG4qIEB0ZW1wbGF0ZSBUIC0gVGhlIGV4cGVjdGVkIG91dHB1dCB0eXBlIG9mIHRoZSBzY2hlbWEuXG4qIEBwYXJhbSB7SW50ZXJvcFpvZFR5cGU8VD59IHNjaGVtYSAtIFRoZSBab2Qgc2NoZW1hICh2MyBvciB2NCkgdG8gdXNlIGZvciBwYXJzaW5nLlxuKiBAcGFyYW0ge3Vua25vd259IGlucHV0IC0gVGhlIGlucHV0IHZhbHVlIHRvIHBhcnNlLlxuKiBAcmV0dXJucyB7VH0gVGhlIHBhcnNlZCB2YWx1ZS5cbiogQHRocm93cyB7RXJyb3J9IElmIHBhcnNpbmcgZmFpbHMgb3IgdGhlIHNjaGVtYSBpcyBub3QgYSByZWNvZ25pemVkIFpvZCB2MyBvciB2NCBzY2hlbWEuXG4qL1xuZnVuY3Rpb24gaW50ZXJvcFBhcnNlKHNjaGVtYSwgaW5wdXQpIHtcblx0aWYgKGlzWm9kU2NoZW1hVjQoc2NoZW1hKSkgcmV0dXJuIHBhcnNlKHNjaGVtYSwgaW5wdXQpO1xuXHRpZiAoaXNab2RTY2hlbWFWMyhzY2hlbWEpKSByZXR1cm4gc2NoZW1hLnBhcnNlKGlucHV0KTtcblx0dGhyb3cgbmV3IEVycm9yKFwiU2NoZW1hIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgejMuWm9kVHlwZSBvciB6NC4kWm9kVHlwZVwiKTtcbn1cbi8qKlxuKiBSZXRyaWV2ZXMgdGhlIGRlc2NyaXB0aW9uIGZyb20gYSBzY2hlbWEgZGVmaW5pdGlvbiAodjMsIHY0LCBvciBwbGFpbiBvYmplY3QpLCBpZiBhdmFpbGFibGUuXG4qXG4qIEBwYXJhbSB7dW5rbm93bn0gc2NoZW1hIC0gVGhlIHNjaGVtYSB0byBleHRyYWN0IHRoZSBkZXNjcmlwdGlvbiBmcm9tLlxuKiBAcmV0dXJucyB7c3RyaW5nIHwgdW5kZWZpbmVkfSBUaGUgZGVzY3JpcHRpb24gb2YgdGhlIHNjaGVtYSwgb3IgdW5kZWZpbmVkIGlmIG5vdCBwcmVzZW50LlxuKi9cbmZ1bmN0aW9uIGdldFNjaGVtYURlc2NyaXB0aW9uKHNjaGVtYSkge1xuXHRpZiAoaXNab2RTY2hlbWFWNChzY2hlbWEpKSByZXR1cm4gZ2xvYmFsUmVnaXN0cnkuZ2V0KHNjaGVtYSk/LmRlc2NyaXB0aW9uO1xuXHRpZiAoaXNab2RTY2hlbWFWMyhzY2hlbWEpKSByZXR1cm4gc2NoZW1hLmRlc2NyaXB0aW9uO1xuXHRpZiAoXCJkZXNjcmlwdGlvblwiIGluIHNjaGVtYSAmJiB0eXBlb2Ygc2NoZW1hLmRlc2NyaXB0aW9uID09PSBcInN0cmluZ1wiKSByZXR1cm4gc2NoZW1hLmRlc2NyaXB0aW9uO1xuXHRyZXR1cm4gdm9pZCAwO1xufVxuLyoqXG4qIERldGVybWluZXMgaWYgdGhlIHByb3ZpZGVkIFpvZCBzY2hlbWEgaXMgXCJzaGFwZWxlc3NcIi5cbiogQSBzaGFwZWxlc3Mgc2NoZW1hIGlzIG9uZSB0aGF0IGRvZXMgbm90IGRlZmluZSBhbnkgb2JqZWN0IHNoYXBlLFxuKiBzdWNoIGFzIFpvZFN0cmluZywgWm9kTnVtYmVyLCBab2RCb29sZWFuLCBab2RBbnksIGV0Yy5cbiogRm9yIFpvZE9iamVjdCwgaXQgbXVzdCBoYXZlIG5vIHNoYXBlIGtleXMgdG8gYmUgY29uc2lkZXJlZCBzaGFwZWxlc3MuXG4qIFpvZFJlY29yZCBzY2hlbWFzIGFyZSBjb25zaWRlcmVkIHNoYXBlbGVzcyBzaW5jZSB0aGV5IGRlZmluZSBkeW5hbWljXG4qIGtleS12YWx1ZSBtYXBwaW5ncyB3aXRob3V0IGZpeGVkIGtleXMuXG4qXG4qIEBwYXJhbSBzY2hlbWEgVGhlIFpvZCBzY2hlbWEgdG8gY2hlY2suXG4qIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBzY2hlbWEgaXMgc2hhcGVsZXNzLCBmYWxzZSBvdGhlcndpc2UuXG4qL1xuZnVuY3Rpb24gaXNTaGFwZWxlc3Nab2RTY2hlbWEoc2NoZW1hKSB7XG5cdGlmICghaXNJbnRlcm9wWm9kU2NoZW1hKHNjaGVtYSkpIHJldHVybiBmYWxzZTtcblx0aWYgKGlzWm9kU2NoZW1hVjMoc2NoZW1hKSkge1xuXHRcdGNvbnN0IGRlZiA9IHNjaGVtYS5fZGVmO1xuXHRcdGlmIChkZWYudHlwZU5hbWUgPT09IFwiWm9kT2JqZWN0XCIpIHtcblx0XHRcdGNvbnN0IG9iaiA9IHNjaGVtYTtcblx0XHRcdHJldHVybiAhb2JqLnNoYXBlIHx8IE9iamVjdC5rZXlzKG9iai5zaGFwZSkubGVuZ3RoID09PSAwO1xuXHRcdH1cblx0XHRpZiAoZGVmLnR5cGVOYW1lID09PSBcIlpvZFJlY29yZFwiKSByZXR1cm4gdHJ1ZTtcblx0fVxuXHRpZiAoaXNab2RTY2hlbWFWNChzY2hlbWEpKSB7XG5cdFx0Y29uc3QgZGVmID0gc2NoZW1hLl96b2QuZGVmO1xuXHRcdGlmIChkZWYudHlwZSA9PT0gXCJvYmplY3RcIikge1xuXHRcdFx0Y29uc3Qgb2JqID0gc2NoZW1hO1xuXHRcdFx0cmV0dXJuICFvYmouc2hhcGUgfHwgT2JqZWN0LmtleXMob2JqLnNoYXBlKS5sZW5ndGggPT09IDA7XG5cdFx0fVxuXHRcdGlmIChkZWYudHlwZSA9PT0gXCJyZWNvcmRcIikgcmV0dXJuIHRydWU7XG5cdH1cblx0aWYgKHR5cGVvZiBzY2hlbWEgPT09IFwib2JqZWN0XCIgJiYgc2NoZW1hICE9PSBudWxsICYmICEoXCJzaGFwZVwiIGluIHNjaGVtYSkpIHJldHVybiB0cnVlO1xuXHRyZXR1cm4gZmFsc2U7XG59XG4vKipcbiogRGV0ZXJtaW5lcyBpZiB0aGUgcHJvdmlkZWQgWm9kIHNjaGVtYSBzaG91bGQgYmUgdHJlYXRlZCBhcyBhIHNpbXBsZSBzdHJpbmcgc2NoZW1hXG4qIHRoYXQgbWFwcyB0byBEeW5hbWljVG9vbC4gVGhpcyBhbGlnbnMgd2l0aCB0aGUgdHlwZS1sZXZlbCBjb25zdHJhaW50IG9mXG4qIEludGVyb3Bab2RUeXBlPHN0cmluZyB8IHVuZGVmaW5lZD4gd2hpY2ggb25seSBtYXRjaGVzIGJhc2ljIHN0cmluZyBzY2hlbWFzLlxuKiBJZiB0aGUgcHJvdmlkZWQgc2NoZW1hIGlzIGp1c3Qgei5zdHJpbmcoKSwgd2UgY2FuIG1ha2UgdGhlIGRldGVybWluYXRpb24gdGhhdFxuKiB0aGUgdG9vbCBpcyBqdXN0IGEgZ2VuZXJpYyBzdHJpbmcgdG9vbCB0aGF0IGRvZXNuJ3QgcmVxdWlyZSBhbnkgaW5wdXQgdmFsaWRhdGlvbi5cbipcbiogVGhpcyBmdW5jdGlvbiBvbmx5IHJldHVybnMgdHJ1ZSBmb3IgYmFzaWMgWm9kU3RyaW5nIHNjaGVtYXMsIGluY2x1ZGluZzpcbiogLSBCYXNpYyBzdHJpbmcgc2NoZW1hcyAoei5zdHJpbmcoKSlcbiogLSBTdHJpbmcgc2NoZW1hcyB3aXRoIHZhbGlkYXRpb25zICh6LnN0cmluZygpLm1pbigxKSwgei5zdHJpbmcoKS5lbWFpbCgpLCBldGMuKVxuKlxuKiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgZmFsc2UgZm9yIGV2ZXJ5dGhpbmcgZWxzZSwgaW5jbHVkaW5nOlxuKiAtIFN0cmluZyBzY2hlbWFzIHdpdGggZGVmYXVsdHMgKHouc3RyaW5nKCkuZGVmYXVsdChcInZhbHVlXCIpKVxuKiAtIEJyYW5kZWQgc3RyaW5nIHNjaGVtYXMgKHouc3RyaW5nKCkuYnJhbmQ8XCJVc2VySWRcIj4oKSlcbiogLSBTdHJpbmcgc2NoZW1hcyB3aXRoIGNhdGNoIG9wZXJhdGlvbnMgKHouc3RyaW5nKCkuY2F0Y2goXCJkZWZhdWx0XCIpKVxuKiAtIE9wdGlvbmFsL251bGxhYmxlIHN0cmluZyBzY2hlbWFzICh6LnN0cmluZygpLm9wdGlvbmFsKCkpXG4qIC0gVHJhbnNmb3JtZWQgc2NoZW1hcyAoei5zdHJpbmcoKS50cmFuc2Zvcm0oKSBvciB6Lm9iamVjdCgpLnRyYW5zZm9ybSgpKVxuKiAtIE9iamVjdCBvciByZWNvcmQgc2NoZW1hcywgZXZlbiBpZiB0aGV5J3JlIGVtcHR5XG4qIC0gQW55IG90aGVyIHNjaGVtYSB0eXBlXG4qXG4qIEBwYXJhbSBzY2hlbWEgVGhlIFpvZCBzY2hlbWEgdG8gY2hlY2suXG4qIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBzY2hlbWEgaXMgYSBiYXNpYyBab2RTdHJpbmcsIGZhbHNlIG90aGVyd2lzZS5cbiovXG5mdW5jdGlvbiBpc1NpbXBsZVN0cmluZ1pvZFNjaGVtYShzY2hlbWEpIHtcblx0aWYgKCFpc0ludGVyb3Bab2RTY2hlbWEoc2NoZW1hKSkgcmV0dXJuIGZhbHNlO1xuXHRpZiAoaXNab2RTY2hlbWFWMyhzY2hlbWEpKSB7XG5cdFx0Y29uc3QgZGVmID0gc2NoZW1hLl9kZWY7XG5cdFx0cmV0dXJuIGRlZi50eXBlTmFtZSA9PT0gXCJab2RTdHJpbmdcIjtcblx0fVxuXHRpZiAoaXNab2RTY2hlbWFWNChzY2hlbWEpKSB7XG5cdFx0Y29uc3QgZGVmID0gc2NoZW1hLl96b2QuZGVmO1xuXHRcdHJldHVybiBkZWYudHlwZSA9PT0gXCJzdHJpbmdcIjtcblx0fVxuXHRyZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBpc1pvZE9iamVjdFYzKG9iaikge1xuXHRpZiAodHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJiBvYmogIT09IG51bGwgJiYgXCJfZGVmXCIgaW4gb2JqICYmIHR5cGVvZiBvYmouX2RlZiA9PT0gXCJvYmplY3RcIiAmJiBvYmouX2RlZiAhPT0gbnVsbCAmJiBcInR5cGVOYW1lXCIgaW4gb2JqLl9kZWYgJiYgb2JqLl9kZWYudHlwZU5hbWUgPT09IFwiWm9kT2JqZWN0XCIpIHJldHVybiB0cnVlO1xuXHRyZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBpc1pvZE9iamVjdFY0KG9iaikge1xuXHRpZiAoIWlzWm9kU2NoZW1hVjQob2JqKSkgcmV0dXJuIGZhbHNlO1xuXHRpZiAodHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJiBvYmogIT09IG51bGwgJiYgXCJfem9kXCIgaW4gb2JqICYmIHR5cGVvZiBvYmouX3pvZCA9PT0gXCJvYmplY3RcIiAmJiBvYmouX3pvZCAhPT0gbnVsbCAmJiBcImRlZlwiIGluIG9iai5fem9kICYmIHR5cGVvZiBvYmouX3pvZC5kZWYgPT09IFwib2JqZWN0XCIgJiYgb2JqLl96b2QuZGVmICE9PSBudWxsICYmIFwidHlwZVwiIGluIG9iai5fem9kLmRlZiAmJiBvYmouX3pvZC5kZWYudHlwZSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIHRydWU7XG5cdHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGlzWm9kQXJyYXlWNChvYmopIHtcblx0aWYgKCFpc1pvZFNjaGVtYVY0KG9iaikpIHJldHVybiBmYWxzZTtcblx0aWYgKHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgJiYgb2JqICE9PSBudWxsICYmIFwiX3pvZFwiIGluIG9iaiAmJiB0eXBlb2Ygb2JqLl96b2QgPT09IFwib2JqZWN0XCIgJiYgb2JqLl96b2QgIT09IG51bGwgJiYgXCJkZWZcIiBpbiBvYmouX3pvZCAmJiB0eXBlb2Ygb2JqLl96b2QuZGVmID09PSBcIm9iamVjdFwiICYmIG9iai5fem9kLmRlZiAhPT0gbnVsbCAmJiBcInR5cGVcIiBpbiBvYmouX3pvZC5kZWYgJiYgb2JqLl96b2QuZGVmLnR5cGUgPT09IFwiYXJyYXlcIikgcmV0dXJuIHRydWU7XG5cdHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGlzWm9kT3B0aW9uYWxWNChvYmopIHtcblx0aWYgKCFpc1pvZFNjaGVtYVY0KG9iaikpIHJldHVybiBmYWxzZTtcblx0aWYgKHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgJiYgb2JqICE9PSBudWxsICYmIFwiX3pvZFwiIGluIG9iaiAmJiB0eXBlb2Ygb2JqLl96b2QgPT09IFwib2JqZWN0XCIgJiYgb2JqLl96b2QgIT09IG51bGwgJiYgXCJkZWZcIiBpbiBvYmouX3pvZCAmJiB0eXBlb2Ygb2JqLl96b2QuZGVmID09PSBcIm9iamVjdFwiICYmIG9iai5fem9kLmRlZiAhPT0gbnVsbCAmJiBcInR5cGVcIiBpbiBvYmouX3pvZC5kZWYgJiYgb2JqLl96b2QuZGVmLnR5cGUgPT09IFwib3B0aW9uYWxcIikgcmV0dXJuIHRydWU7XG5cdHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGlzWm9kTnVsbGFibGVWNChvYmopIHtcblx0aWYgKCFpc1pvZFNjaGVtYVY0KG9iaikpIHJldHVybiBmYWxzZTtcblx0aWYgKHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgJiYgb2JqICE9PSBudWxsICYmIFwiX3pvZFwiIGluIG9iaiAmJiB0eXBlb2Ygb2JqLl96b2QgPT09IFwib2JqZWN0XCIgJiYgb2JqLl96b2QgIT09IG51bGwgJiYgXCJkZWZcIiBpbiBvYmouX3pvZCAmJiB0eXBlb2Ygb2JqLl96b2QuZGVmID09PSBcIm9iamVjdFwiICYmIG9iai5fem9kLmRlZiAhPT0gbnVsbCAmJiBcInR5cGVcIiBpbiBvYmouX3pvZC5kZWYgJiYgb2JqLl96b2QuZGVmLnR5cGUgPT09IFwibnVsbGFibGVcIikgcmV0dXJuIHRydWU7XG5cdHJldHVybiBmYWxzZTtcbn1cbi8qKlxuKiBEZXRlcm1pbmVzIGlmIHRoZSBwcm92aWRlZCB2YWx1ZSBpcyBhbiBJbnRlcm9wWm9kT2JqZWN0IChab2QgdjMgb3IgdjQgb2JqZWN0IHNjaGVtYSkuXG4qXG4qIEBwYXJhbSBvYmogVGhlIHZhbHVlIHRvIGNoZWNrLlxuKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgYSBab2QgdjMgb3IgdjQgb2JqZWN0IHNjaGVtYSwgZmFsc2Ugb3RoZXJ3aXNlLlxuKi9cbmZ1bmN0aW9uIGlzSW50ZXJvcFpvZE9iamVjdChvYmopIHtcblx0aWYgKGlzWm9kT2JqZWN0VjMob2JqKSkgcmV0dXJuIHRydWU7XG5cdGlmIChpc1pvZE9iamVjdFY0KG9iaikpIHJldHVybiB0cnVlO1xuXHRyZXR1cm4gZmFsc2U7XG59XG4vKipcbiogUmV0cmlldmVzIHRoZSBzaGFwZSAoZmllbGRzKSBvZiBhIFpvZCBvYmplY3Qgc2NoZW1hLCBzdXBwb3J0aW5nIGJvdGggWm9kIHYzIGFuZCB2NC5cbipcbiogQHRlbXBsYXRlIFQgLSBUaGUgdHlwZSBvZiB0aGUgWm9kIG9iamVjdCBzY2hlbWEuXG4qIEBwYXJhbSB7VH0gc2NoZW1hIC0gVGhlIFpvZCBvYmplY3Qgc2NoZW1hIGluc3RhbmNlIChlaXRoZXIgdjMgb3IgdjQpLlxuKiBAcmV0dXJucyB7SW50ZXJvcFpvZE9iamVjdFNoYXBlPFQ+fSBUaGUgc2hhcGUgb2YgdGhlIG9iamVjdCBzY2hlbWEuXG4qIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgc2NoZW1hIGlzIG5vdCBhIFpvZCB2MyBvciB2NCBvYmplY3QuXG4qL1xuZnVuY3Rpb24gZ2V0SW50ZXJvcFpvZE9iamVjdFNoYXBlKHNjaGVtYSkge1xuXHRpZiAoaXNab2RTY2hlbWFWMyhzY2hlbWEpKSByZXR1cm4gc2NoZW1hLnNoYXBlO1xuXHRpZiAoaXNab2RTY2hlbWFWNChzY2hlbWEpKSByZXR1cm4gc2NoZW1hLl96b2QuZGVmLnNoYXBlO1xuXHR0aHJvdyBuZXcgRXJyb3IoXCJTY2hlbWEgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiB6My5ab2RPYmplY3Qgb3IgejQuJFpvZE9iamVjdFwiKTtcbn1cbi8qKlxuKiBFeHRlbmRzIGEgWm9kIG9iamVjdCBzY2hlbWEgd2l0aCBhZGRpdGlvbmFsIGZpZWxkcywgc3VwcG9ydGluZyBib3RoIFpvZCB2MyBhbmQgdjQuXG4qXG4qIEB0ZW1wbGF0ZSBUIC0gVGhlIHR5cGUgb2YgdGhlIFpvZCBvYmplY3Qgc2NoZW1hLlxuKiBAcGFyYW0ge1R9IHNjaGVtYSAtIFRoZSBab2Qgb2JqZWN0IHNjaGVtYSBpbnN0YW5jZSAoZWl0aGVyIHYzIG9yIHY0KS5cbiogQHBhcmFtIHtJbnRlcm9wWm9kT2JqZWN0U2hhcGV9IGV4dGVuc2lvbiAtIFRoZSBmaWVsZHMgdG8gYWRkIHRvIHRoZSBzY2hlbWEuXG4qIEByZXR1cm5zIHtJbnRlcm9wWm9kT2JqZWN0fSBUaGUgZXh0ZW5kZWQgWm9kIG9iamVjdCBzY2hlbWEuXG4qIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgc2NoZW1hIGlzIG5vdCBhIFpvZCB2MyBvciB2NCBvYmplY3QuXG4qL1xuZnVuY3Rpb24gZXh0ZW5kSW50ZXJvcFpvZE9iamVjdChzY2hlbWEsIGV4dGVuc2lvbikge1xuXHRpZiAoaXNab2RTY2hlbWFWMyhzY2hlbWEpKSByZXR1cm4gc2NoZW1hLmV4dGVuZChleHRlbnNpb24pO1xuXHRpZiAoaXNab2RTY2hlbWFWNChzY2hlbWEpKSByZXR1cm4gdXRpbC5leHRlbmQoc2NoZW1hLCBleHRlbnNpb24pO1xuXHR0aHJvdyBuZXcgRXJyb3IoXCJTY2hlbWEgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiB6My5ab2RPYmplY3Qgb3IgejQuJFpvZE9iamVjdFwiKTtcbn1cbi8qKlxuKiBSZXR1cm5zIGEgcGFydGlhbCB2ZXJzaW9uIG9mIGEgWm9kIG9iamVjdCBzY2hlbWEsIG1ha2luZyBhbGwgZmllbGRzIG9wdGlvbmFsLlxuKiBTdXBwb3J0cyBib3RoIFpvZCB2MyBhbmQgdjQuXG4qXG4qIEB0ZW1wbGF0ZSBUIC0gVGhlIHR5cGUgb2YgdGhlIFpvZCBvYmplY3Qgc2NoZW1hLlxuKiBAcGFyYW0ge1R9IHNjaGVtYSAtIFRoZSBab2Qgb2JqZWN0IHNjaGVtYSBpbnN0YW5jZSAoZWl0aGVyIHYzIG9yIHY0KS5cbiogQHJldHVybnMge0ludGVyb3Bab2RPYmplY3R9IFRoZSBwYXJ0aWFsIFpvZCBvYmplY3Qgc2NoZW1hLlxuKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHNjaGVtYSBpcyBub3QgYSBab2QgdjMgb3IgdjQgb2JqZWN0LlxuKi9cbmZ1bmN0aW9uIGludGVyb3Bab2RPYmplY3RQYXJ0aWFsKHNjaGVtYSkge1xuXHRpZiAoaXNab2RTY2hlbWFWMyhzY2hlbWEpKSByZXR1cm4gc2NoZW1hLnBhcnRpYWwoKTtcblx0aWYgKGlzWm9kU2NoZW1hVjQoc2NoZW1hKSkgcmV0dXJuIHV0aWwucGFydGlhbCgkWm9kT3B0aW9uYWwsIHNjaGVtYSwgdm9pZCAwKTtcblx0dGhyb3cgbmV3IEVycm9yKFwiU2NoZW1hIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgejMuWm9kT2JqZWN0IG9yIHo0LiRab2RPYmplY3RcIik7XG59XG4vKipcbiogUmV0dXJucyBhIHN0cmljdCB2ZXJzaW9uIG9mIGEgWm9kIG9iamVjdCBzY2hlbWEsIGRpc2FsbG93aW5nIHVua25vd24ga2V5cy5cbiogU3VwcG9ydHMgYm90aCBab2QgdjMgYW5kIHY0IG9iamVjdCBzY2hlbWFzLiBJZiBgcmVjdXJzaXZlYCBpcyB0cnVlLCBhcHBsaWVzIHN0cmljdG5lc3NcbiogcmVjdXJzaXZlbHkgdG8gYWxsIG5lc3RlZCBvYmplY3Qgc2NoZW1hcyBhbmQgYXJyYXlzIG9mIG9iamVjdCBzY2hlbWFzLlxuKlxuKiBAdGVtcGxhdGUgVCAtIFRoZSB0eXBlIG9mIHRoZSBab2Qgb2JqZWN0IHNjaGVtYS5cbiogQHBhcmFtIHtUfSBzY2hlbWEgLSBUaGUgWm9kIG9iamVjdCBzY2hlbWEgaW5zdGFuY2UgKGVpdGhlciB2MyBvciB2NCkuXG4qIEBwYXJhbSB7Ym9vbGVhbn0gW3JlY3Vyc2l2ZT1mYWxzZV0gLSBXaGV0aGVyIHRvIGFwcGx5IHN0cmljdG5lc3MgcmVjdXJzaXZlbHkgdG8gbmVzdGVkIG9iamVjdHMvYXJyYXlzLlxuKiBAcmV0dXJucyB7SW50ZXJvcFpvZE9iamVjdH0gVGhlIHN0cmljdCBab2Qgb2JqZWN0IHNjaGVtYS5cbiogQHRocm93cyB7RXJyb3J9IElmIHRoZSBzY2hlbWEgaXMgbm90IGEgWm9kIHYzIG9yIHY0IG9iamVjdC5cbiovXG5mdW5jdGlvbiBpbnRlcm9wWm9kT2JqZWN0U3RyaWN0KHNjaGVtYSwgcmVjdXJzaXZlID0gZmFsc2UpIHtcblx0aWYgKGlzWm9kU2NoZW1hVjMoc2NoZW1hKSkgcmV0dXJuIHNjaGVtYS5zdHJpY3QoKTtcblx0aWYgKGlzWm9kT2JqZWN0VjQoc2NoZW1hKSkge1xuXHRcdGNvbnN0IG91dHB1dFNoYXBlID0gc2NoZW1hLl96b2QuZGVmLnNoYXBlO1xuXHRcdGlmIChyZWN1cnNpdmUpIGZvciAoY29uc3QgW2tleSwga2V5U2NoZW1hXSBvZiBPYmplY3QuZW50cmllcyhzY2hlbWEuX3pvZC5kZWYuc2hhcGUpKSB7XG5cdFx0XHRpZiAoaXNab2RPYmplY3RWNChrZXlTY2hlbWEpKSB7XG5cdFx0XHRcdGNvbnN0IG91dHB1dFNjaGVtYSA9IGludGVyb3Bab2RPYmplY3RTdHJpY3Qoa2V5U2NoZW1hLCByZWN1cnNpdmUpO1xuXHRcdFx0XHRvdXRwdXRTaGFwZVtrZXldID0gb3V0cHV0U2NoZW1hO1xuXHRcdFx0fSBlbHNlIGlmIChpc1pvZEFycmF5VjQoa2V5U2NoZW1hKSkge1xuXHRcdFx0XHRsZXQgZWxlbWVudFNjaGVtYSA9IGtleVNjaGVtYS5fem9kLmRlZi5lbGVtZW50O1xuXHRcdFx0XHRpZiAoaXNab2RPYmplY3RWNChlbGVtZW50U2NoZW1hKSkgZWxlbWVudFNjaGVtYSA9IGludGVyb3Bab2RPYmplY3RTdHJpY3QoZWxlbWVudFNjaGVtYSwgcmVjdXJzaXZlKTtcblx0XHRcdFx0b3V0cHV0U2hhcGVba2V5XSA9IGNsb25lKGtleVNjaGVtYSwge1xuXHRcdFx0XHRcdC4uLmtleVNjaGVtYS5fem9kLmRlZixcblx0XHRcdFx0XHRlbGVtZW50OiBlbGVtZW50U2NoZW1hXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIG91dHB1dFNoYXBlW2tleV0gPSBrZXlTY2hlbWE7XG5cdFx0XHRjb25zdCBtZXRhJDEgPSBnbG9iYWxSZWdpc3RyeS5nZXQoa2V5U2NoZW1hKTtcblx0XHRcdGlmIChtZXRhJDEpIGdsb2JhbFJlZ2lzdHJ5LmFkZChvdXRwdXRTaGFwZVtrZXldLCBtZXRhJDEpO1xuXHRcdH1cblx0XHRjb25zdCBtb2RpZmllZFNjaGVtYSA9IGNsb25lKHNjaGVtYSwge1xuXHRcdFx0Li4uc2NoZW1hLl96b2QuZGVmLFxuXHRcdFx0c2hhcGU6IG91dHB1dFNoYXBlLFxuXHRcdFx0Y2F0Y2hhbGw6IF9uZXZlcigkWm9kTmV2ZXIpXG5cdFx0fSk7XG5cdFx0Y29uc3QgbWV0YSA9IGdsb2JhbFJlZ2lzdHJ5LmdldChzY2hlbWEpO1xuXHRcdGlmIChtZXRhKSBnbG9iYWxSZWdpc3RyeS5hZGQobW9kaWZpZWRTY2hlbWEsIG1ldGEpO1xuXHRcdHJldHVybiBtb2RpZmllZFNjaGVtYTtcblx0fVxuXHR0aHJvdyBuZXcgRXJyb3IoXCJTY2hlbWEgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiB6My5ab2RPYmplY3Qgb3IgejQuJFpvZE9iamVjdFwiKTtcbn1cbi8qKlxuKiBSZXR1cm5zIGEgcGFzc3Rocm91Z2ggdmVyc2lvbiBvZiBhIFpvZCBvYmplY3Qgc2NoZW1hLCBhbGxvd2luZyB1bmtub3duIGtleXMuXG4qIFN1cHBvcnRzIGJvdGggWm9kIHYzIGFuZCB2NCBvYmplY3Qgc2NoZW1hcy4gSWYgYHJlY3Vyc2l2ZWAgaXMgdHJ1ZSwgYXBwbGllcyBwYXNzdGhyb3VnaFxuKiByZWN1cnNpdmVseSB0byBhbGwgbmVzdGVkIG9iamVjdCBzY2hlbWFzIGFuZCBhcnJheXMgb2Ygb2JqZWN0IHNjaGVtYXMuXG4qXG4qIEB0ZW1wbGF0ZSBUIC0gVGhlIHR5cGUgb2YgdGhlIFpvZCBvYmplY3Qgc2NoZW1hLlxuKiBAcGFyYW0ge1R9IHNjaGVtYSAtIFRoZSBab2Qgb2JqZWN0IHNjaGVtYSBpbnN0YW5jZSAoZWl0aGVyIHYzIG9yIHY0KS5cbiogQHBhcmFtIHtib29sZWFufSBbcmVjdXJzaXZlPWZhbHNlXSAtIFdoZXRoZXIgdG8gYXBwbHkgcGFzc3Rocm91Z2ggcmVjdXJzaXZlbHkgdG8gbmVzdGVkIG9iamVjdHMvYXJyYXlzLlxuKiBAcmV0dXJucyB7SW50ZXJvcFpvZE9iamVjdH0gVGhlIHBhc3N0aHJvdWdoIFpvZCBvYmplY3Qgc2NoZW1hLlxuKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHNjaGVtYSBpcyBub3QgYSBab2QgdjMgb3IgdjQgb2JqZWN0LlxuKi9cbmZ1bmN0aW9uIGludGVyb3Bab2RPYmplY3RQYXNzdGhyb3VnaChzY2hlbWEsIHJlY3Vyc2l2ZSA9IGZhbHNlKSB7XG5cdGlmIChpc1pvZE9iamVjdFYzKHNjaGVtYSkpIHJldHVybiBzY2hlbWEucGFzc3Rocm91Z2goKTtcblx0aWYgKGlzWm9kT2JqZWN0VjQoc2NoZW1hKSkge1xuXHRcdGNvbnN0IG91dHB1dFNoYXBlID0gc2NoZW1hLl96b2QuZGVmLnNoYXBlO1xuXHRcdGlmIChyZWN1cnNpdmUpIGZvciAoY29uc3QgW2tleSwga2V5U2NoZW1hXSBvZiBPYmplY3QuZW50cmllcyhzY2hlbWEuX3pvZC5kZWYuc2hhcGUpKSB7XG5cdFx0XHRpZiAoaXNab2RPYmplY3RWNChrZXlTY2hlbWEpKSB7XG5cdFx0XHRcdGNvbnN0IG91dHB1dFNjaGVtYSA9IGludGVyb3Bab2RPYmplY3RQYXNzdGhyb3VnaChrZXlTY2hlbWEsIHJlY3Vyc2l2ZSk7XG5cdFx0XHRcdG91dHB1dFNoYXBlW2tleV0gPSBvdXRwdXRTY2hlbWE7XG5cdFx0XHR9IGVsc2UgaWYgKGlzWm9kQXJyYXlWNChrZXlTY2hlbWEpKSB7XG5cdFx0XHRcdGxldCBlbGVtZW50U2NoZW1hID0ga2V5U2NoZW1hLl96b2QuZGVmLmVsZW1lbnQ7XG5cdFx0XHRcdGlmIChpc1pvZE9iamVjdFY0KGVsZW1lbnRTY2hlbWEpKSBlbGVtZW50U2NoZW1hID0gaW50ZXJvcFpvZE9iamVjdFBhc3N0aHJvdWdoKGVsZW1lbnRTY2hlbWEsIHJlY3Vyc2l2ZSk7XG5cdFx0XHRcdG91dHB1dFNoYXBlW2tleV0gPSBjbG9uZShrZXlTY2hlbWEsIHtcblx0XHRcdFx0XHQuLi5rZXlTY2hlbWEuX3pvZC5kZWYsXG5cdFx0XHRcdFx0ZWxlbWVudDogZWxlbWVudFNjaGVtYVxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSBvdXRwdXRTaGFwZVtrZXldID0ga2V5U2NoZW1hO1xuXHRcdFx0Y29uc3QgbWV0YSQxID0gZ2xvYmFsUmVnaXN0cnkuZ2V0KGtleVNjaGVtYSk7XG5cdFx0XHRpZiAobWV0YSQxKSBnbG9iYWxSZWdpc3RyeS5hZGQob3V0cHV0U2hhcGVba2V5XSwgbWV0YSQxKTtcblx0XHR9XG5cdFx0Y29uc3QgbW9kaWZpZWRTY2hlbWEgPSBjbG9uZShzY2hlbWEsIHtcblx0XHRcdC4uLnNjaGVtYS5fem9kLmRlZixcblx0XHRcdHNoYXBlOiBvdXRwdXRTaGFwZSxcblx0XHRcdGNhdGNoYWxsOiBfdW5rbm93bigkWm9kVW5rbm93bilcblx0XHR9KTtcblx0XHRjb25zdCBtZXRhID0gZ2xvYmFsUmVnaXN0cnkuZ2V0KHNjaGVtYSk7XG5cdFx0aWYgKG1ldGEpIGdsb2JhbFJlZ2lzdHJ5LmFkZChtb2RpZmllZFNjaGVtYSwgbWV0YSk7XG5cdFx0cmV0dXJuIG1vZGlmaWVkU2NoZW1hO1xuXHR9XG5cdHRocm93IG5ldyBFcnJvcihcIlNjaGVtYSBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIHozLlpvZE9iamVjdCBvciB6NC4kWm9kT2JqZWN0XCIpO1xufVxuLyoqXG4qIFJldHVybnMgYSBnZXR0ZXIgZnVuY3Rpb24gZm9yIHRoZSBkZWZhdWx0IHZhbHVlIG9mIGEgWm9kIHNjaGVtYSwgaWYgb25lIGlzIGRlZmluZWQuXG4qIFN1cHBvcnRzIGJvdGggWm9kIHYzIGFuZCB2NCBzY2hlbWFzLiBJZiB0aGUgc2NoZW1hIGhhcyBhIGRlZmF1bHQgdmFsdWUsXG4qIHRoZSByZXR1cm5lZCBmdW5jdGlvbiB3aWxsIHJldHVybiB0aGF0IHZhbHVlIHdoZW4gY2FsbGVkLiBJZiBubyBkZWZhdWx0IGlzIGRlZmluZWQsXG4qIHJldHVybnMgdW5kZWZpbmVkLlxuKlxuKiBAdGVtcGxhdGUgVCAtIFRoZSB0eXBlIG9mIHRoZSBab2Qgc2NoZW1hLlxuKiBAcGFyYW0ge1R9IHNjaGVtYSAtIFRoZSBab2Qgc2NoZW1hIGluc3RhbmNlIChlaXRoZXIgdjMgb3IgdjQpLlxuKiBAcmV0dXJucyB7KCgpID0+IEluZmVySW50ZXJvcFpvZE91dHB1dDxUPikgfCB1bmRlZmluZWR9IEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBkZWZhdWx0IHZhbHVlLCBvciB1bmRlZmluZWQgaWYgbm8gZGVmYXVsdCBpcyBzZXQuXG4qL1xuZnVuY3Rpb24gZ2V0SW50ZXJvcFpvZERlZmF1bHRHZXR0ZXIoc2NoZW1hKSB7XG5cdGlmIChpc1pvZFNjaGVtYVYzKHNjaGVtYSkpIHRyeSB7XG5cdFx0Y29uc3QgZGVmYXVsdFZhbHVlID0gc2NoZW1hLnBhcnNlKHZvaWQgMCk7XG5cdFx0cmV0dXJuICgpID0+IGRlZmF1bHRWYWx1ZTtcblx0fSBjYXRjaCB7XG5cdFx0cmV0dXJuIHZvaWQgMDtcblx0fVxuXHRpZiAoaXNab2RTY2hlbWFWNChzY2hlbWEpKSB0cnkge1xuXHRcdGNvbnN0IGRlZmF1bHRWYWx1ZSA9IHBhcnNlKHNjaGVtYSwgdm9pZCAwKTtcblx0XHRyZXR1cm4gKCkgPT4gZGVmYXVsdFZhbHVlO1xuXHR9IGNhdGNoIHtcblx0XHRyZXR1cm4gdm9pZCAwO1xuXHR9XG5cdHJldHVybiB2b2lkIDA7XG59XG5mdW5jdGlvbiBpc1pvZFRyYW5zZm9ybVYzKHNjaGVtYSkge1xuXHRyZXR1cm4gaXNab2RTY2hlbWFWMyhzY2hlbWEpICYmIFwidHlwZU5hbWVcIiBpbiBzY2hlbWEuX2RlZiAmJiBzY2hlbWEuX2RlZi50eXBlTmFtZSA9PT0gXCJab2RFZmZlY3RzXCI7XG59XG5mdW5jdGlvbiBpc1pvZFRyYW5zZm9ybVY0KHNjaGVtYSkge1xuXHRyZXR1cm4gaXNab2RTY2hlbWFWNChzY2hlbWEpICYmIHNjaGVtYS5fem9kLmRlZi50eXBlID09PSBcInBpcGVcIjtcbn1cbmZ1bmN0aW9uIGludGVyb3Bab2RUcmFuc2Zvcm1JbnB1dFNjaGVtYUltcGwoc2NoZW1hLCByZWN1cnNpdmUsIGNhY2hlKSB7XG5cdGNvbnN0IGNhY2hlZCA9IGNhY2hlLmdldChzY2hlbWEpO1xuXHRpZiAoY2FjaGVkICE9PSB2b2lkIDApIHJldHVybiBjYWNoZWQ7XG5cdGlmIChpc1pvZFNjaGVtYVYzKHNjaGVtYSkpIHtcblx0XHRpZiAoaXNab2RUcmFuc2Zvcm1WMyhzY2hlbWEpKSByZXR1cm4gaW50ZXJvcFpvZFRyYW5zZm9ybUlucHV0U2NoZW1hSW1wbChzY2hlbWEuX2RlZi5zY2hlbWEsIHJlY3Vyc2l2ZSwgY2FjaGUpO1xuXHRcdHJldHVybiBzY2hlbWE7XG5cdH1cblx0aWYgKGlzWm9kU2NoZW1hVjQoc2NoZW1hKSkge1xuXHRcdGxldCBvdXRwdXRTY2hlbWEgPSBzY2hlbWE7XG5cdFx0aWYgKGlzWm9kVHJhbnNmb3JtVjQoc2NoZW1hKSkgb3V0cHV0U2NoZW1hID0gaW50ZXJvcFpvZFRyYW5zZm9ybUlucHV0U2NoZW1hSW1wbChzY2hlbWEuX3pvZC5kZWYuaW4sIHJlY3Vyc2l2ZSwgY2FjaGUpO1xuXHRcdGlmIChyZWN1cnNpdmUpIHtcblx0XHRcdGlmIChpc1pvZE9iamVjdFY0KG91dHB1dFNjaGVtYSkpIHtcblx0XHRcdFx0Y29uc3Qgb3V0cHV0U2hhcGUgPSB7fTtcblx0XHRcdFx0Zm9yIChjb25zdCBba2V5LCBrZXlTY2hlbWFdIG9mIE9iamVjdC5lbnRyaWVzKG91dHB1dFNjaGVtYS5fem9kLmRlZi5zaGFwZSkpIG91dHB1dFNoYXBlW2tleV0gPSBpbnRlcm9wWm9kVHJhbnNmb3JtSW5wdXRTY2hlbWFJbXBsKGtleVNjaGVtYSwgcmVjdXJzaXZlLCBjYWNoZSk7XG5cdFx0XHRcdG91dHB1dFNjaGVtYSA9IGNsb25lKG91dHB1dFNjaGVtYSwge1xuXHRcdFx0XHRcdC4uLm91dHB1dFNjaGVtYS5fem9kLmRlZixcblx0XHRcdFx0XHRzaGFwZTogb3V0cHV0U2hhcGVcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2UgaWYgKGlzWm9kQXJyYXlWNChvdXRwdXRTY2hlbWEpKSB7XG5cdFx0XHRcdGNvbnN0IGVsZW1lbnRTY2hlbWEgPSBpbnRlcm9wWm9kVHJhbnNmb3JtSW5wdXRTY2hlbWFJbXBsKG91dHB1dFNjaGVtYS5fem9kLmRlZi5lbGVtZW50LCByZWN1cnNpdmUsIGNhY2hlKTtcblx0XHRcdFx0b3V0cHV0U2NoZW1hID0gY2xvbmUob3V0cHV0U2NoZW1hLCB7XG5cdFx0XHRcdFx0Li4ub3V0cHV0U2NoZW1hLl96b2QuZGVmLFxuXHRcdFx0XHRcdGVsZW1lbnQ6IGVsZW1lbnRTY2hlbWFcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2UgaWYgKGlzWm9kT3B0aW9uYWxWNChvdXRwdXRTY2hlbWEpKSB7XG5cdFx0XHRcdGNvbnN0IGlubmVyU2NoZW1hID0gaW50ZXJvcFpvZFRyYW5zZm9ybUlucHV0U2NoZW1hSW1wbChvdXRwdXRTY2hlbWEuX3pvZC5kZWYuaW5uZXJUeXBlLCByZWN1cnNpdmUsIGNhY2hlKTtcblx0XHRcdFx0b3V0cHV0U2NoZW1hID0gY2xvbmUob3V0cHV0U2NoZW1hLCB7XG5cdFx0XHRcdFx0Li4ub3V0cHV0U2NoZW1hLl96b2QuZGVmLFxuXHRcdFx0XHRcdGlubmVyVHlwZTogaW5uZXJTY2hlbWFcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2UgaWYgKGlzWm9kTnVsbGFibGVWNChvdXRwdXRTY2hlbWEpKSB7XG5cdFx0XHRcdGNvbnN0IGlubmVyU2NoZW1hID0gaW50ZXJvcFpvZFRyYW5zZm9ybUlucHV0U2NoZW1hSW1wbChvdXRwdXRTY2hlbWEuX3pvZC5kZWYuaW5uZXJUeXBlLCByZWN1cnNpdmUsIGNhY2hlKTtcblx0XHRcdFx0b3V0cHV0U2NoZW1hID0gY2xvbmUob3V0cHV0U2NoZW1hLCB7XG5cdFx0XHRcdFx0Li4ub3V0cHV0U2NoZW1hLl96b2QuZGVmLFxuXHRcdFx0XHRcdGlubmVyVHlwZTogaW5uZXJTY2hlbWFcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IG1ldGEgPSBnbG9iYWxSZWdpc3RyeS5nZXQoc2NoZW1hKTtcblx0XHRpZiAobWV0YSkgZ2xvYmFsUmVnaXN0cnkuYWRkKG91dHB1dFNjaGVtYSwgbWV0YSk7XG5cdFx0Y2FjaGUuc2V0KHNjaGVtYSwgb3V0cHV0U2NoZW1hKTtcblx0XHRyZXR1cm4gb3V0cHV0U2NoZW1hO1xuXHR9XG5cdHRocm93IG5ldyBFcnJvcihcIlNjaGVtYSBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIHozLlpvZFR5cGUgb3IgejQuJFpvZFR5cGVcIik7XG59XG4vKipcbiogUmV0dXJucyB0aGUgaW5wdXQgdHlwZSBvZiBhIFpvZCB0cmFuc2Zvcm0gc2NoZW1hLCBmb3IgYm90aCB2MyBhbmQgdjQuXG4qIElmIHRoZSBzY2hlbWEgaXMgbm90IGEgdHJhbnNmb3JtLCByZXR1cm5zIHVuZGVmaW5lZC4gSWYgYHJlY3Vyc2l2ZWAgaXMgdHJ1ZSxcbiogcmVjdXJzaXZlbHkgcHJvY2Vzc2VzIG5lc3RlZCBvYmplY3Qgc2NoZW1hcyBhbmQgYXJyYXlzIG9mIG9iamVjdCBzY2hlbWFzLlxuKlxuKiBAcGFyYW0gc2NoZW1hIC0gVGhlIFpvZCBzY2hlbWEgaW5zdGFuY2UgKHYzIG9yIHY0KVxuKiBAcGFyYW0ge2Jvb2xlYW59IFtyZWN1cnNpdmU9ZmFsc2VdIC0gV2hldGhlciB0byByZWN1cnNpdmVseSBwcm9jZXNzIG5lc3RlZCBvYmplY3RzL2FycmF5cy5cbiogQHJldHVybnMgVGhlIGlucHV0IFpvZCBzY2hlbWEgb2YgdGhlIHRyYW5zZm9ybSwgb3IgdW5kZWZpbmVkIGlmIG5vdCBhIHRyYW5zZm9ybVxuKi9cbmZ1bmN0aW9uIGludGVyb3Bab2RUcmFuc2Zvcm1JbnB1dFNjaGVtYShzY2hlbWEsIHJlY3Vyc2l2ZSA9IGZhbHNlKSB7XG5cdGNvbnN0IGNhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5cdHJldHVybiBpbnRlcm9wWm9kVHJhbnNmb3JtSW5wdXRTY2hlbWFJbXBsKHNjaGVtYSwgcmVjdXJzaXZlLCBjYWNoZSk7XG59XG4vKipcbiogQ3JlYXRlcyBhIG1vZGlmaWVkIHZlcnNpb24gb2YgYSBab2Qgb2JqZWN0IHNjaGVtYSB3aGVyZSBmaWVsZHMgbWF0Y2hpbmcgYSBwcmVkaWNhdGUgYXJlIG1hZGUgb3B0aW9uYWwuXG4qIFN1cHBvcnRzIGJvdGggWm9kIHYzIGFuZCB2NCBzY2hlbWFzIGFuZCBwcmVzZXJ2ZXMgdGhlIG9yaWdpbmFsIHNjaGVtYSB2ZXJzaW9uLlxuKlxuKiBAdGVtcGxhdGUgVCAtIFRoZSB0eXBlIG9mIHRoZSBab2Qgb2JqZWN0IHNjaGVtYS5cbiogQHBhcmFtIHtUfSBzY2hlbWEgLSBUaGUgWm9kIG9iamVjdCBzY2hlbWEgaW5zdGFuY2UgKGVpdGhlciB2MyBvciB2NCkuXG4qIEBwYXJhbSB7KGtleTogc3RyaW5nLCB2YWx1ZTogSW50ZXJvcFpvZFR5cGUpID0+IGJvb2xlYW59IHByZWRpY2F0ZSAtIEZ1bmN0aW9uIHRvIGRldGVybWluZSB3aGljaCBmaWVsZHMgc2hvdWxkIGJlIG9wdGlvbmFsLlxuKiBAcmV0dXJucyB7SW50ZXJvcFpvZE9iamVjdH0gVGhlIG1vZGlmaWVkIFpvZCBvYmplY3Qgc2NoZW1hLlxuKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHNjaGVtYSBpcyBub3QgYSBab2QgdjMgb3IgdjQgb2JqZWN0LlxuKi9cbmZ1bmN0aW9uIGludGVyb3Bab2RPYmplY3RNYWtlRmllbGRzT3B0aW9uYWwoc2NoZW1hLCBwcmVkaWNhdGUpIHtcblx0aWYgKGlzWm9kU2NoZW1hVjMoc2NoZW1hKSkge1xuXHRcdGNvbnN0IHNoYXBlID0gZ2V0SW50ZXJvcFpvZE9iamVjdFNoYXBlKHNjaGVtYSk7XG5cdFx0Y29uc3QgbW9kaWZpZWRTaGFwZSA9IHt9O1xuXHRcdGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHNoYXBlKSkgaWYgKHByZWRpY2F0ZShrZXksIHZhbHVlKSkgbW9kaWZpZWRTaGFwZVtrZXldID0gdmFsdWUub3B0aW9uYWwoKTtcblx0XHRlbHNlIG1vZGlmaWVkU2hhcGVba2V5XSA9IHZhbHVlO1xuXHRcdHJldHVybiBzY2hlbWEuZXh0ZW5kKG1vZGlmaWVkU2hhcGUpO1xuXHR9XG5cdGlmIChpc1pvZFNjaGVtYVY0KHNjaGVtYSkpIHtcblx0XHRjb25zdCBzaGFwZSA9IGdldEludGVyb3Bab2RPYmplY3RTaGFwZShzY2hlbWEpO1xuXHRcdGNvbnN0IG91dHB1dFNoYXBlID0geyAuLi5zY2hlbWEuX3pvZC5kZWYuc2hhcGUgfTtcblx0XHRmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhzaGFwZSkpIGlmIChwcmVkaWNhdGUoa2V5LCB2YWx1ZSkpIG91dHB1dFNoYXBlW2tleV0gPSBuZXcgJFpvZE9wdGlvbmFsKHtcblx0XHRcdHR5cGU6IFwib3B0aW9uYWxcIixcblx0XHRcdGlubmVyVHlwZTogdmFsdWVcblx0XHR9KTtcblx0XHRjb25zdCBtb2RpZmllZFNjaGVtYSA9IGNsb25lKHNjaGVtYSwge1xuXHRcdFx0Li4uc2NoZW1hLl96b2QuZGVmLFxuXHRcdFx0c2hhcGU6IG91dHB1dFNoYXBlXG5cdFx0fSk7XG5cdFx0Y29uc3QgbWV0YSA9IGdsb2JhbFJlZ2lzdHJ5LmdldChzY2hlbWEpO1xuXHRcdGlmIChtZXRhKSBnbG9iYWxSZWdpc3RyeS5hZGQobW9kaWZpZWRTY2hlbWEsIG1ldGEpO1xuXHRcdHJldHVybiBtb2RpZmllZFNjaGVtYTtcblx0fVxuXHR0aHJvdyBuZXcgRXJyb3IoXCJTY2hlbWEgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiB6My5ab2RPYmplY3Qgb3IgejQuJFpvZE9iamVjdFwiKTtcbn1cbmZ1bmN0aW9uIGlzSW50ZXJvcFpvZEVycm9yKGUpIHtcblx0cmV0dXJuIGUgaW5zdGFuY2VvZiBFcnJvciAmJiAoZS5jb25zdHJ1Y3Rvci5uYW1lID09PSBcIlpvZEVycm9yXCIgfHwgZS5jb25zdHJ1Y3Rvci5uYW1lID09PSBcIiRab2RFcnJvclwiKTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBleHRlbmRJbnRlcm9wWm9kT2JqZWN0LCBnZXRJbnRlcm9wWm9kRGVmYXVsdEdldHRlciwgZ2V0SW50ZXJvcFpvZE9iamVjdFNoYXBlLCBnZXRTY2hlbWFEZXNjcmlwdGlvbiwgaW50ZXJvcFBhcnNlLCBpbnRlcm9wUGFyc2VBc3luYywgaW50ZXJvcFNhZmVQYXJzZSwgaW50ZXJvcFNhZmVQYXJzZUFzeW5jLCBpbnRlcm9wWm9kT2JqZWN0TWFrZUZpZWxkc09wdGlvbmFsLCBpbnRlcm9wWm9kT2JqZWN0UGFydGlhbCwgaW50ZXJvcFpvZE9iamVjdFBhc3N0aHJvdWdoLCBpbnRlcm9wWm9kT2JqZWN0U3RyaWN0LCBpbnRlcm9wWm9kVHJhbnNmb3JtSW5wdXRTY2hlbWEsIGlzSW50ZXJvcFpvZEVycm9yLCBpc0ludGVyb3Bab2RMaXRlcmFsLCBpc0ludGVyb3Bab2RPYmplY3QsIGlzSW50ZXJvcFpvZFNjaGVtYSwgaXNTaGFwZWxlc3Nab2RTY2hlbWEsIGlzU2ltcGxlU3RyaW5nWm9kU2NoZW1hLCBpc1pvZEFycmF5VjQsIGlzWm9kTGl0ZXJhbFYzLCBpc1pvZExpdGVyYWxWNCwgaXNab2ROdWxsYWJsZVY0LCBpc1pvZE9iamVjdFYzLCBpc1pvZE9iamVjdFY0LCBpc1pvZE9wdGlvbmFsVjQsIGlzWm9kU2NoZW1hLCBpc1pvZFNjaGVtYVYzLCBpc1pvZFNjaGVtYVY0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD16b2QuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/types/zod.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/Options.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/Options.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defaultOptions: () => (/* binding */ defaultOptions),\n/* harmony export */   getDefaultOptions: () => (/* binding */ getDefaultOptions),\n/* harmony export */   ignoreOverride: () => (/* binding */ ignoreOverride)\n/* harmony export */ });\n//#region src/utils/zod-to-json-schema/Options.ts\nconst ignoreOverride = Symbol(\"Let zodToJsonSchema decide on which parser to use\");\nconst defaultOptions = {\n\tname: void 0,\n\t$refStrategy: \"root\",\n\tbasePath: [\"#\"],\n\teffectStrategy: \"input\",\n\tpipeStrategy: \"all\",\n\tdateStrategy: \"format:date-time\",\n\tmapStrategy: \"entries\",\n\tremoveAdditionalStrategy: \"passthrough\",\n\tallowedAdditionalProperties: true,\n\trejectedAdditionalProperties: false,\n\tdefinitionPath: \"definitions\",\n\ttarget: \"jsonSchema7\",\n\tstrictUnions: false,\n\tdefinitions: {},\n\terrorMessages: false,\n\tmarkdownDescription: false,\n\tpatternStrategy: \"escape\",\n\tapplyRegexFlags: false,\n\temailStrategy: \"format:email\",\n\tbase64Strategy: \"contentEncoding:base64\",\n\tnameStrategy: \"ref\",\n\topenAiAnyTypeName: \"OpenAiAnyType\"\n};\nconst getDefaultOptions = (options) => typeof options === \"string\" ? {\n\t...defaultOptions,\n\tname: options\n} : {\n\t...defaultOptions,\n\t...options\n};\n\n//#endregion\n\n//# sourceMappingURL=Options.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL09wdGlvbnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTs7QUFFQTtBQUM2RDtBQUM3RCIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3pvZC10by1qc29uLXNjaGVtYS9PcHRpb25zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL09wdGlvbnMudHNcbmNvbnN0IGlnbm9yZU92ZXJyaWRlID0gU3ltYm9sKFwiTGV0IHpvZFRvSnNvblNjaGVtYSBkZWNpZGUgb24gd2hpY2ggcGFyc2VyIHRvIHVzZVwiKTtcbmNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xuXHRuYW1lOiB2b2lkIDAsXG5cdCRyZWZTdHJhdGVneTogXCJyb290XCIsXG5cdGJhc2VQYXRoOiBbXCIjXCJdLFxuXHRlZmZlY3RTdHJhdGVneTogXCJpbnB1dFwiLFxuXHRwaXBlU3RyYXRlZ3k6IFwiYWxsXCIsXG5cdGRhdGVTdHJhdGVneTogXCJmb3JtYXQ6ZGF0ZS10aW1lXCIsXG5cdG1hcFN0cmF0ZWd5OiBcImVudHJpZXNcIixcblx0cmVtb3ZlQWRkaXRpb25hbFN0cmF0ZWd5OiBcInBhc3N0aHJvdWdoXCIsXG5cdGFsbG93ZWRBZGRpdGlvbmFsUHJvcGVydGllczogdHJ1ZSxcblx0cmVqZWN0ZWRBZGRpdGlvbmFsUHJvcGVydGllczogZmFsc2UsXG5cdGRlZmluaXRpb25QYXRoOiBcImRlZmluaXRpb25zXCIsXG5cdHRhcmdldDogXCJqc29uU2NoZW1hN1wiLFxuXHRzdHJpY3RVbmlvbnM6IGZhbHNlLFxuXHRkZWZpbml0aW9uczoge30sXG5cdGVycm9yTWVzc2FnZXM6IGZhbHNlLFxuXHRtYXJrZG93bkRlc2NyaXB0aW9uOiBmYWxzZSxcblx0cGF0dGVyblN0cmF0ZWd5OiBcImVzY2FwZVwiLFxuXHRhcHBseVJlZ2V4RmxhZ3M6IGZhbHNlLFxuXHRlbWFpbFN0cmF0ZWd5OiBcImZvcm1hdDplbWFpbFwiLFxuXHRiYXNlNjRTdHJhdGVneTogXCJjb250ZW50RW5jb2Rpbmc6YmFzZTY0XCIsXG5cdG5hbWVTdHJhdGVneTogXCJyZWZcIixcblx0b3BlbkFpQW55VHlwZU5hbWU6IFwiT3BlbkFpQW55VHlwZVwiXG59O1xuY29uc3QgZ2V0RGVmYXVsdE9wdGlvbnMgPSAob3B0aW9ucykgPT4gdHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgPyB7XG5cdC4uLmRlZmF1bHRPcHRpb25zLFxuXHRuYW1lOiBvcHRpb25zXG59IDoge1xuXHQuLi5kZWZhdWx0T3B0aW9ucyxcblx0Li4ub3B0aW9uc1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBkZWZhdWx0T3B0aW9ucywgZ2V0RGVmYXVsdE9wdGlvbnMsIGlnbm9yZU92ZXJyaWRlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PcHRpb25zLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/Options.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/Refs.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/Refs.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getRefs: () => (/* binding */ getRefs)\n/* harmony export */ });\n/* harmony import */ var _Options_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Options.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/Options.js\");\n\n\n//#region src/utils/zod-to-json-schema/Refs.ts\nconst getRefs = (options) => {\n\tconst _options = (0,_Options_js__WEBPACK_IMPORTED_MODULE_0__.getDefaultOptions)(options);\n\tconst currentPath = _options.name !== void 0 ? [\n\t\t..._options.basePath,\n\t\t_options.definitionPath,\n\t\t_options.name\n\t] : _options.basePath;\n\treturn {\n\t\t..._options,\n\t\tflags: { hasReferencedOpenAiAnyType: false },\n\t\tcurrentPath,\n\t\tpropertyPath: void 0,\n\t\tseen: new Map(Object.entries(_options.definitions).map(([name, def]) => [def._def, {\n\t\t\tdef: def._def,\n\t\t\tpath: [\n\t\t\t\t..._options.basePath,\n\t\t\t\t_options.definitionPath,\n\t\t\t\tname\n\t\t\t],\n\t\t\tjsonSchema: void 0\n\t\t}]))\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=Refs.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL1JlZnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBaUQ7O0FBRWpEO0FBQ0E7QUFDQSxrQkFBa0IsOERBQWlCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxtQ0FBbUM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNtQjtBQUNuQiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3pvZC10by1qc29uLXNjaGVtYS9SZWZzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldERlZmF1bHRPcHRpb25zIH0gZnJvbSBcIi4vT3B0aW9ucy5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL3pvZC10by1qc29uLXNjaGVtYS9SZWZzLnRzXG5jb25zdCBnZXRSZWZzID0gKG9wdGlvbnMpID0+IHtcblx0Y29uc3QgX29wdGlvbnMgPSBnZXREZWZhdWx0T3B0aW9ucyhvcHRpb25zKTtcblx0Y29uc3QgY3VycmVudFBhdGggPSBfb3B0aW9ucy5uYW1lICE9PSB2b2lkIDAgPyBbXG5cdFx0Li4uX29wdGlvbnMuYmFzZVBhdGgsXG5cdFx0X29wdGlvbnMuZGVmaW5pdGlvblBhdGgsXG5cdFx0X29wdGlvbnMubmFtZVxuXHRdIDogX29wdGlvbnMuYmFzZVBhdGg7XG5cdHJldHVybiB7XG5cdFx0Li4uX29wdGlvbnMsXG5cdFx0ZmxhZ3M6IHsgaGFzUmVmZXJlbmNlZE9wZW5BaUFueVR5cGU6IGZhbHNlIH0sXG5cdFx0Y3VycmVudFBhdGgsXG5cdFx0cHJvcGVydHlQYXRoOiB2b2lkIDAsXG5cdFx0c2VlbjogbmV3IE1hcChPYmplY3QuZW50cmllcyhfb3B0aW9ucy5kZWZpbml0aW9ucykubWFwKChbbmFtZSwgZGVmXSkgPT4gW2RlZi5fZGVmLCB7XG5cdFx0XHRkZWY6IGRlZi5fZGVmLFxuXHRcdFx0cGF0aDogW1xuXHRcdFx0XHQuLi5fb3B0aW9ucy5iYXNlUGF0aCxcblx0XHRcdFx0X29wdGlvbnMuZGVmaW5pdGlvblBhdGgsXG5cdFx0XHRcdG5hbWVcblx0XHRcdF0sXG5cdFx0XHRqc29uU2NoZW1hOiB2b2lkIDBcblx0XHR9XSkpXG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldFJlZnMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlZnMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/Refs.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/errorMessages.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/errorMessages.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addErrorMessage: () => (/* binding */ addErrorMessage),\n/* harmony export */   setResponseValueAndErrors: () => (/* binding */ setResponseValueAndErrors)\n/* harmony export */ });\n//#region src/utils/zod-to-json-schema/errorMessages.ts\nfunction addErrorMessage(res, key, errorMessage, refs) {\n\tif (!refs?.errorMessages) return;\n\tif (errorMessage) res.errorMessage = {\n\t\t...res.errorMessage,\n\t\t[key]: errorMessage\n\t};\n}\nfunction setResponseValueAndErrors(res, key, value, errorMessage, refs) {\n\tres[key] = value;\n\taddErrorMessage(res, key, errorMessage, refs);\n}\n\n//#endregion\n\n//# sourceMappingURL=errorMessages.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL2Vycm9yTWVzc2FnZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDc0Q7QUFDdEQiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvZXJyb3JNZXNzYWdlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3V0aWxzL3pvZC10by1qc29uLXNjaGVtYS9lcnJvck1lc3NhZ2VzLnRzXG5mdW5jdGlvbiBhZGRFcnJvck1lc3NhZ2UocmVzLCBrZXksIGVycm9yTWVzc2FnZSwgcmVmcykge1xuXHRpZiAoIXJlZnM/LmVycm9yTWVzc2FnZXMpIHJldHVybjtcblx0aWYgKGVycm9yTWVzc2FnZSkgcmVzLmVycm9yTWVzc2FnZSA9IHtcblx0XHQuLi5yZXMuZXJyb3JNZXNzYWdlLFxuXHRcdFtrZXldOiBlcnJvck1lc3NhZ2Vcblx0fTtcbn1cbmZ1bmN0aW9uIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCBrZXksIHZhbHVlLCBlcnJvck1lc3NhZ2UsIHJlZnMpIHtcblx0cmVzW2tleV0gPSB2YWx1ZTtcblx0YWRkRXJyb3JNZXNzYWdlKHJlcywga2V5LCBlcnJvck1lc3NhZ2UsIHJlZnMpO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGFkZEVycm9yTWVzc2FnZSwgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JNZXNzYWdlcy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/errorMessages.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/getRelativePath.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/getRelativePath.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getRelativePath: () => (/* binding */ getRelativePath)\n/* harmony export */ });\n//#region src/utils/zod-to-json-schema/getRelativePath.ts\nconst getRelativePath = (pathA, pathB) => {\n\tlet i = 0;\n\tfor (; i < pathA.length && i < pathB.length; i++) if (pathA[i] !== pathB[i]) break;\n\treturn [(pathA.length - i).toString(), ...pathB.slice(i)].join(\"/\");\n};\n\n//#endregion\n\n//# sourceMappingURL=getRelativePath.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL2dldFJlbGF0aXZlUGF0aC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzQ0FBc0M7QUFDOUM7QUFDQTs7QUFFQTtBQUMyQjtBQUMzQiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3pvZC10by1qc29uLXNjaGVtYS9nZXRSZWxhdGl2ZVBhdGguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvZ2V0UmVsYXRpdmVQYXRoLnRzXG5jb25zdCBnZXRSZWxhdGl2ZVBhdGggPSAocGF0aEEsIHBhdGhCKSA9PiB7XG5cdGxldCBpID0gMDtcblx0Zm9yICg7IGkgPCBwYXRoQS5sZW5ndGggJiYgaSA8IHBhdGhCLmxlbmd0aDsgaSsrKSBpZiAocGF0aEFbaV0gIT09IHBhdGhCW2ldKSBicmVhaztcblx0cmV0dXJuIFsocGF0aEEubGVuZ3RoIC0gaSkudG9TdHJpbmcoKSwgLi4ucGF0aEIuc2xpY2UoaSldLmpvaW4oXCIvXCIpO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRSZWxhdGl2ZVBhdGggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldFJlbGF0aXZlUGF0aC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/getRelativePath.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/index.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/index.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Options_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Options.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/Options.js\");\n/* harmony import */ var _Refs_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Refs.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/Refs.js\");\n/* harmony import */ var _errorMessages_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./errorMessages.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/errorMessages.js\");\n/* harmony import */ var _getRelativePath_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./getRelativePath.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/getRelativePath.js\");\n/* harmony import */ var _parsers_any_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./parsers/any.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/any.js\");\n/* harmony import */ var _parsers_array_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./parsers/array.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/array.js\");\n/* harmony import */ var _parsers_bigint_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./parsers/bigint.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/bigint.js\");\n/* harmony import */ var _parsers_boolean_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./parsers/boolean.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/boolean.js\");\n/* harmony import */ var _parsers_branded_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./parsers/branded.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/branded.js\");\n/* harmony import */ var _parsers_catch_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./parsers/catch.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/catch.js\");\n/* harmony import */ var _parsers_date_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./parsers/date.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/date.js\");\n/* harmony import */ var _parsers_default_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./parsers/default.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/default.js\");\n/* harmony import */ var _parsers_effects_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./parsers/effects.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/effects.js\");\n/* harmony import */ var _parsers_enum_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./parsers/enum.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/enum.js\");\n/* harmony import */ var _parsers_intersection_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./parsers/intersection.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/intersection.js\");\n/* harmony import */ var _parsers_literal_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./parsers/literal.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/literal.js\");\n/* harmony import */ var _parsers_string_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./parsers/string.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/string.js\");\n/* harmony import */ var _parsers_record_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./parsers/record.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/record.js\");\n/* harmony import */ var _parsers_map_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./parsers/map.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/map.js\");\n/* harmony import */ var _parsers_nativeEnum_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./parsers/nativeEnum.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/nativeEnum.js\");\n/* harmony import */ var _parsers_never_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./parsers/never.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/never.js\");\n/* harmony import */ var _parsers_null_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./parsers/null.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/null.js\");\n/* harmony import */ var _parsers_union_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./parsers/union.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/union.js\");\n/* harmony import */ var _parsers_nullable_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./parsers/nullable.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/nullable.js\");\n/* harmony import */ var _parsers_number_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./parsers/number.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/number.js\");\n/* harmony import */ var _parsers_object_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./parsers/object.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/object.js\");\n/* harmony import */ var _parsers_optional_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./parsers/optional.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/optional.js\");\n/* harmony import */ var _parsers_pipeline_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./parsers/pipeline.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/pipeline.js\");\n/* harmony import */ var _parsers_promise_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./parsers/promise.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/promise.js\");\n/* harmony import */ var _parsers_set_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./parsers/set.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/set.js\");\n/* harmony import */ var _parsers_tuple_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./parsers/tuple.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/tuple.js\");\n/* harmony import */ var _parsers_undefined_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./parsers/undefined.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/undefined.js\");\n/* harmony import */ var _parsers_unknown_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./parsers/unknown.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/unknown.js\");\n/* harmony import */ var _parsers_readonly_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./parsers/readonly.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/readonly.js\");\n/* harmony import */ var _selectParser_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./selectParser.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/selectParser.js\");\n/* harmony import */ var _parseDef_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./parseDef.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parseDef.js\");\n/* harmony import */ var _zodToJsonSchema_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./zodToJsonSchema.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/zodToJsonSchema.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWlGO0FBQzdDO0FBQzRDO0FBQ3pCO0FBQ1I7QUFDSTtBQUNFO0FBQ0U7QUFDQTtBQUNKO0FBQ0Y7QUFDTTtBQUNBO0FBQ047QUFDZ0I7QUFDVjtBQUNXO0FBQ2I7QUFDTjtBQUNjO0FBQ1Y7QUFDRjtBQUNxQjtBQUNiO0FBQ0o7QUFDQTtBQUNJO0FBQ0E7QUFDRjtBQUNSO0FBQ0k7QUFDUTtBQUNKO0FBQ0U7QUFDUjtBQUNSO0FBQ2MiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVmYXVsdE9wdGlvbnMsIGdldERlZmF1bHRPcHRpb25zLCBpZ25vcmVPdmVycmlkZSB9IGZyb20gXCIuL09wdGlvbnMuanNcIjtcbmltcG9ydCB7IGdldFJlZnMgfSBmcm9tIFwiLi9SZWZzLmpzXCI7XG5pbXBvcnQgeyBhZGRFcnJvck1lc3NhZ2UsIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi9lcnJvck1lc3NhZ2VzLmpzXCI7XG5pbXBvcnQgeyBnZXRSZWxhdGl2ZVBhdGggfSBmcm9tIFwiLi9nZXRSZWxhdGl2ZVBhdGguanNcIjtcbmltcG9ydCB7IHBhcnNlQW55RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9hbnkuanNcIjtcbmltcG9ydCB7IHBhcnNlQXJyYXlEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2FycmF5LmpzXCI7XG5pbXBvcnQgeyBwYXJzZUJpZ2ludERlZiB9IGZyb20gXCIuL3BhcnNlcnMvYmlnaW50LmpzXCI7XG5pbXBvcnQgeyBwYXJzZUJvb2xlYW5EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2Jvb2xlYW4uanNcIjtcbmltcG9ydCB7IHBhcnNlQnJhbmRlZERlZiB9IGZyb20gXCIuL3BhcnNlcnMvYnJhbmRlZC5qc1wiO1xuaW1wb3J0IHsgcGFyc2VDYXRjaERlZiB9IGZyb20gXCIuL3BhcnNlcnMvY2F0Y2guanNcIjtcbmltcG9ydCB7IHBhcnNlRGF0ZURlZiB9IGZyb20gXCIuL3BhcnNlcnMvZGF0ZS5qc1wiO1xuaW1wb3J0IHsgcGFyc2VEZWZhdWx0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9kZWZhdWx0LmpzXCI7XG5pbXBvcnQgeyBwYXJzZUVmZmVjdHNEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2VmZmVjdHMuanNcIjtcbmltcG9ydCB7IHBhcnNlRW51bURlZiB9IGZyb20gXCIuL3BhcnNlcnMvZW51bS5qc1wiO1xuaW1wb3J0IHsgcGFyc2VJbnRlcnNlY3Rpb25EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2ludGVyc2VjdGlvbi5qc1wiO1xuaW1wb3J0IHsgcGFyc2VMaXRlcmFsRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9saXRlcmFsLmpzXCI7XG5pbXBvcnQgeyBwYXJzZVN0cmluZ0RlZiwgem9kUGF0dGVybnMgfSBmcm9tIFwiLi9wYXJzZXJzL3N0cmluZy5qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWNvcmREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3JlY29yZC5qc1wiO1xuaW1wb3J0IHsgcGFyc2VNYXBEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL21hcC5qc1wiO1xuaW1wb3J0IHsgcGFyc2VOYXRpdmVFbnVtRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9uYXRpdmVFbnVtLmpzXCI7XG5pbXBvcnQgeyBwYXJzZU5ldmVyRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9uZXZlci5qc1wiO1xuaW1wb3J0IHsgcGFyc2VOdWxsRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9udWxsLmpzXCI7XG5pbXBvcnQgeyBwYXJzZVVuaW9uRGVmLCBwcmltaXRpdmVNYXBwaW5ncyB9IGZyb20gXCIuL3BhcnNlcnMvdW5pb24uanNcIjtcbmltcG9ydCB7IHBhcnNlTnVsbGFibGVEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL251bGxhYmxlLmpzXCI7XG5pbXBvcnQgeyBwYXJzZU51bWJlckRlZiB9IGZyb20gXCIuL3BhcnNlcnMvbnVtYmVyLmpzXCI7XG5pbXBvcnQgeyBwYXJzZU9iamVjdERlZiB9IGZyb20gXCIuL3BhcnNlcnMvb2JqZWN0LmpzXCI7XG5pbXBvcnQgeyBwYXJzZU9wdGlvbmFsRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9vcHRpb25hbC5qc1wiO1xuaW1wb3J0IHsgcGFyc2VQaXBlbGluZURlZiB9IGZyb20gXCIuL3BhcnNlcnMvcGlwZWxpbmUuanNcIjtcbmltcG9ydCB7IHBhcnNlUHJvbWlzZURlZiB9IGZyb20gXCIuL3BhcnNlcnMvcHJvbWlzZS5qc1wiO1xuaW1wb3J0IHsgcGFyc2VTZXREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3NldC5qc1wiO1xuaW1wb3J0IHsgcGFyc2VUdXBsZURlZiB9IGZyb20gXCIuL3BhcnNlcnMvdHVwbGUuanNcIjtcbmltcG9ydCB7IHBhcnNlVW5kZWZpbmVkRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy91bmRlZmluZWQuanNcIjtcbmltcG9ydCB7IHBhcnNlVW5rbm93bkRlZiB9IGZyb20gXCIuL3BhcnNlcnMvdW5rbm93bi5qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWFkb25seURlZiB9IGZyb20gXCIuL3BhcnNlcnMvcmVhZG9ubHkuanNcIjtcbmltcG9ydCB7IHNlbGVjdFBhcnNlciB9IGZyb20gXCIuL3NlbGVjdFBhcnNlci5qc1wiO1xuaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi9wYXJzZURlZi5qc1wiO1xuaW1wb3J0IHsgem9kVG9Kc29uU2NoZW1hIH0gZnJvbSBcIi4vem9kVG9Kc29uU2NoZW1hLmpzXCI7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parseDef.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parseDef.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseDef: () => (/* binding */ parseDef)\n/* harmony export */ });\n/* harmony import */ var _Options_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Options.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/Options.js\");\n/* harmony import */ var _getRelativePath_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getRelativePath.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/getRelativePath.js\");\n/* harmony import */ var _parsers_any_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./parsers/any.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/any.js\");\n/* harmony import */ var _selectParser_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./selectParser.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/selectParser.js\");\n\n\n\n\n\n//#region src/utils/zod-to-json-schema/parseDef.ts\nfunction parseDef(def, refs, forceResolution = false) {\n\tconst seenItem = refs.seen.get(def);\n\tif (refs.override) {\n\t\tconst overrideResult = refs.override?.(def, refs, seenItem, forceResolution);\n\t\tif (overrideResult !== _Options_js__WEBPACK_IMPORTED_MODULE_0__.ignoreOverride) return overrideResult;\n\t}\n\tif (seenItem && !forceResolution) {\n\t\tconst seenSchema = get$ref(seenItem, refs);\n\t\tif (seenSchema !== void 0) return seenSchema;\n\t}\n\tconst newItem = {\n\t\tdef,\n\t\tpath: refs.currentPath,\n\t\tjsonSchema: void 0\n\t};\n\trefs.seen.set(def, newItem);\n\tconst jsonSchemaOrGetter = (0,_selectParser_js__WEBPACK_IMPORTED_MODULE_3__.selectParser)(def, def.typeName, refs);\n\tconst jsonSchema = typeof jsonSchemaOrGetter === \"function\" ? parseDef(jsonSchemaOrGetter(), refs) : jsonSchemaOrGetter;\n\tif (jsonSchema) addMeta(def, refs, jsonSchema);\n\tif (refs.postProcess) {\n\t\tconst postProcessResult = refs.postProcess(jsonSchema, def, refs);\n\t\tnewItem.jsonSchema = jsonSchema;\n\t\treturn postProcessResult;\n\t}\n\tnewItem.jsonSchema = jsonSchema;\n\treturn jsonSchema;\n}\nconst get$ref = (item, refs) => {\n\tswitch (refs.$refStrategy) {\n\t\tcase \"root\": return { $ref: item.path.join(\"/\") };\n\t\tcase \"relative\": return { $ref: (0,_getRelativePath_js__WEBPACK_IMPORTED_MODULE_1__.getRelativePath)(refs.currentPath, item.path) };\n\t\tcase \"none\":\n\t\tcase \"seen\":\n\t\t\tif (item.path.length < refs.currentPath.length && item.path.every((value, index) => refs.currentPath[index] === value)) {\n\t\t\t\tconsole.warn(`Recursive reference detected at ${refs.currentPath.join(\"/\")}! Defaulting to any`);\n\t\t\t\treturn (0,_parsers_any_js__WEBPACK_IMPORTED_MODULE_2__.parseAnyDef)(refs);\n\t\t\t}\n\t\t\treturn refs.$refStrategy === \"seen\" ? (0,_parsers_any_js__WEBPACK_IMPORTED_MODULE_2__.parseAnyDef)(refs) : void 0;\n\t}\n};\nconst addMeta = (def, refs, jsonSchema) => {\n\tif (def.description) {\n\t\tjsonSchema.description = def.description;\n\t\tif (refs.markdownDescription) jsonSchema.markdownDescription = def.description;\n\t}\n\treturn jsonSchema;\n};\n\n//#endregion\n\n//# sourceMappingURL=parseDef.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlRGVmLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQThDO0FBQ1M7QUFDUjtBQUNFOztBQUVqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVEQUFjO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsOERBQVk7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCLDRCQUE0QixNQUFNLG9FQUFlO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCwyQkFBMkI7QUFDL0UsV0FBVyw0REFBVztBQUN0QjtBQUNBLHlDQUF5Qyw0REFBVztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDb0I7QUFDcEIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2VEZWYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaWdub3JlT3ZlcnJpZGUgfSBmcm9tIFwiLi9PcHRpb25zLmpzXCI7XG5pbXBvcnQgeyBnZXRSZWxhdGl2ZVBhdGggfSBmcm9tIFwiLi9nZXRSZWxhdGl2ZVBhdGguanNcIjtcbmltcG9ydCB7IHBhcnNlQW55RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9hbnkuanNcIjtcbmltcG9ydCB7IHNlbGVjdFBhcnNlciB9IGZyb20gXCIuL3NlbGVjdFBhcnNlci5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZURlZi50c1xuZnVuY3Rpb24gcGFyc2VEZWYoZGVmLCByZWZzLCBmb3JjZVJlc29sdXRpb24gPSBmYWxzZSkge1xuXHRjb25zdCBzZWVuSXRlbSA9IHJlZnMuc2Vlbi5nZXQoZGVmKTtcblx0aWYgKHJlZnMub3ZlcnJpZGUpIHtcblx0XHRjb25zdCBvdmVycmlkZVJlc3VsdCA9IHJlZnMub3ZlcnJpZGU/LihkZWYsIHJlZnMsIHNlZW5JdGVtLCBmb3JjZVJlc29sdXRpb24pO1xuXHRcdGlmIChvdmVycmlkZVJlc3VsdCAhPT0gaWdub3JlT3ZlcnJpZGUpIHJldHVybiBvdmVycmlkZVJlc3VsdDtcblx0fVxuXHRpZiAoc2Vlbkl0ZW0gJiYgIWZvcmNlUmVzb2x1dGlvbikge1xuXHRcdGNvbnN0IHNlZW5TY2hlbWEgPSBnZXQkcmVmKHNlZW5JdGVtLCByZWZzKTtcblx0XHRpZiAoc2VlblNjaGVtYSAhPT0gdm9pZCAwKSByZXR1cm4gc2VlblNjaGVtYTtcblx0fVxuXHRjb25zdCBuZXdJdGVtID0ge1xuXHRcdGRlZixcblx0XHRwYXRoOiByZWZzLmN1cnJlbnRQYXRoLFxuXHRcdGpzb25TY2hlbWE6IHZvaWQgMFxuXHR9O1xuXHRyZWZzLnNlZW4uc2V0KGRlZiwgbmV3SXRlbSk7XG5cdGNvbnN0IGpzb25TY2hlbWFPckdldHRlciA9IHNlbGVjdFBhcnNlcihkZWYsIGRlZi50eXBlTmFtZSwgcmVmcyk7XG5cdGNvbnN0IGpzb25TY2hlbWEgPSB0eXBlb2YganNvblNjaGVtYU9yR2V0dGVyID09PSBcImZ1bmN0aW9uXCIgPyBwYXJzZURlZihqc29uU2NoZW1hT3JHZXR0ZXIoKSwgcmVmcykgOiBqc29uU2NoZW1hT3JHZXR0ZXI7XG5cdGlmIChqc29uU2NoZW1hKSBhZGRNZXRhKGRlZiwgcmVmcywganNvblNjaGVtYSk7XG5cdGlmIChyZWZzLnBvc3RQcm9jZXNzKSB7XG5cdFx0Y29uc3QgcG9zdFByb2Nlc3NSZXN1bHQgPSByZWZzLnBvc3RQcm9jZXNzKGpzb25TY2hlbWEsIGRlZiwgcmVmcyk7XG5cdFx0bmV3SXRlbS5qc29uU2NoZW1hID0ganNvblNjaGVtYTtcblx0XHRyZXR1cm4gcG9zdFByb2Nlc3NSZXN1bHQ7XG5cdH1cblx0bmV3SXRlbS5qc29uU2NoZW1hID0ganNvblNjaGVtYTtcblx0cmV0dXJuIGpzb25TY2hlbWE7XG59XG5jb25zdCBnZXQkcmVmID0gKGl0ZW0sIHJlZnMpID0+IHtcblx0c3dpdGNoIChyZWZzLiRyZWZTdHJhdGVneSkge1xuXHRcdGNhc2UgXCJyb290XCI6IHJldHVybiB7ICRyZWY6IGl0ZW0ucGF0aC5qb2luKFwiL1wiKSB9O1xuXHRcdGNhc2UgXCJyZWxhdGl2ZVwiOiByZXR1cm4geyAkcmVmOiBnZXRSZWxhdGl2ZVBhdGgocmVmcy5jdXJyZW50UGF0aCwgaXRlbS5wYXRoKSB9O1xuXHRcdGNhc2UgXCJub25lXCI6XG5cdFx0Y2FzZSBcInNlZW5cIjpcblx0XHRcdGlmIChpdGVtLnBhdGgubGVuZ3RoIDwgcmVmcy5jdXJyZW50UGF0aC5sZW5ndGggJiYgaXRlbS5wYXRoLmV2ZXJ5KCh2YWx1ZSwgaW5kZXgpID0+IHJlZnMuY3VycmVudFBhdGhbaW5kZXhdID09PSB2YWx1ZSkpIHtcblx0XHRcdFx0Y29uc29sZS53YXJuKGBSZWN1cnNpdmUgcmVmZXJlbmNlIGRldGVjdGVkIGF0ICR7cmVmcy5jdXJyZW50UGF0aC5qb2luKFwiL1wiKX0hIERlZmF1bHRpbmcgdG8gYW55YCk7XG5cdFx0XHRcdHJldHVybiBwYXJzZUFueURlZihyZWZzKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZWZzLiRyZWZTdHJhdGVneSA9PT0gXCJzZWVuXCIgPyBwYXJzZUFueURlZihyZWZzKSA6IHZvaWQgMDtcblx0fVxufTtcbmNvbnN0IGFkZE1ldGEgPSAoZGVmLCByZWZzLCBqc29uU2NoZW1hKSA9PiB7XG5cdGlmIChkZWYuZGVzY3JpcHRpb24pIHtcblx0XHRqc29uU2NoZW1hLmRlc2NyaXB0aW9uID0gZGVmLmRlc2NyaXB0aW9uO1xuXHRcdGlmIChyZWZzLm1hcmtkb3duRGVzY3JpcHRpb24pIGpzb25TY2hlbWEubWFya2Rvd25EZXNjcmlwdGlvbiA9IGRlZi5kZXNjcmlwdGlvbjtcblx0fVxuXHRyZXR1cm4ganNvblNjaGVtYTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgcGFyc2VEZWYgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlRGVmLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parseDef.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/any.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/any.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseAnyDef: () => (/* binding */ parseAnyDef)\n/* harmony export */ });\n/* harmony import */ var _getRelativePath_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../getRelativePath.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/getRelativePath.js\");\n\n\n//#region src/utils/zod-to-json-schema/parsers/any.ts\nfunction parseAnyDef(refs) {\n\tif (refs.target !== \"openAi\") return {};\n\tconst anyDefinitionPath = [\n\t\t...refs.basePath,\n\t\trefs.definitionPath,\n\t\trefs.openAiAnyTypeName\n\t];\n\trefs.flags.hasReferencedOpenAiAnyType = true;\n\treturn { $ref: refs.$refStrategy === \"relative\" ? (0,_getRelativePath_js__WEBPACK_IMPORTED_MODULE_0__.getRelativePath)(anyDefinitionPath, refs.currentPath) : anyDefinitionPath.join(\"/\") };\n}\n\n//#endregion\n\n//# sourceMappingURL=any.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvYW55LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXdEOztBQUV4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHlDQUF5QyxvRUFBZTtBQUNsRTs7QUFFQTtBQUN1QjtBQUN2QiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2FueS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRSZWxhdGl2ZVBhdGggfSBmcm9tIFwiLi4vZ2V0UmVsYXRpdmVQYXRoLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvYW55LnRzXG5mdW5jdGlvbiBwYXJzZUFueURlZihyZWZzKSB7XG5cdGlmIChyZWZzLnRhcmdldCAhPT0gXCJvcGVuQWlcIikgcmV0dXJuIHt9O1xuXHRjb25zdCBhbnlEZWZpbml0aW9uUGF0aCA9IFtcblx0XHQuLi5yZWZzLmJhc2VQYXRoLFxuXHRcdHJlZnMuZGVmaW5pdGlvblBhdGgsXG5cdFx0cmVmcy5vcGVuQWlBbnlUeXBlTmFtZVxuXHRdO1xuXHRyZWZzLmZsYWdzLmhhc1JlZmVyZW5jZWRPcGVuQWlBbnlUeXBlID0gdHJ1ZTtcblx0cmV0dXJuIHsgJHJlZjogcmVmcy4kcmVmU3RyYXRlZ3kgPT09IFwicmVsYXRpdmVcIiA/IGdldFJlbGF0aXZlUGF0aChhbnlEZWZpbml0aW9uUGF0aCwgcmVmcy5jdXJyZW50UGF0aCkgOiBhbnlEZWZpbml0aW9uUGF0aC5qb2luKFwiL1wiKSB9O1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHBhcnNlQW55RGVmIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hbnkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/any.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/array.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/array.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseArrayDef: () => (/* binding */ parseArrayDef)\n/* harmony export */ });\n/* harmony import */ var _errorMessages_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errorMessages.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/errorMessages.js\");\n/* harmony import */ var _parseDef_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../parseDef.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parseDef.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod/v3 */ \"(ssr)/./node_modules/zod/v3/index.js\");\n\n\n\n\n//#region src/utils/zod-to-json-schema/parsers/array.ts\nfunction parseArrayDef(def, refs) {\n\tconst res = { type: \"array\" };\n\tif (def.type?._def && def.type?._def?.typeName !== zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodAny) res.items = (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_1__.parseDef)(def.type._def, {\n\t\t...refs,\n\t\tcurrentPath: [...refs.currentPath, \"items\"]\n\t});\n\tif (def.minLength) (0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(res, \"minItems\", def.minLength.value, def.minLength.message, refs);\n\tif (def.maxLength) (0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(res, \"maxItems\", def.maxLength.value, def.maxLength.message, refs);\n\tif (def.exactLength) {\n\t\t(0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(res, \"minItems\", def.exactLength.value, def.exactLength.message, refs);\n\t\t(0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(res, \"maxItems\", def.exactLength.value, def.exactLength.message, refs);\n\t}\n\treturn res;\n}\n\n//#endregion\n\n//# sourceMappingURL=array.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvYXJyYXkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFnRTtBQUN0QjtBQUNLOztBQUUvQztBQUNBO0FBQ0EsZUFBZTtBQUNmLG9EQUFvRCx5REFBcUIscUJBQXFCLHNEQUFRO0FBQ3RHO0FBQ0E7QUFDQSxFQUFFO0FBQ0Ysb0JBQW9CLDRFQUF5QjtBQUM3QyxvQkFBb0IsNEVBQXlCO0FBQzdDO0FBQ0EsRUFBRSw0RUFBeUI7QUFDM0IsRUFBRSw0RUFBeUI7QUFDM0I7QUFDQTtBQUNBOztBQUVBO0FBQ3lCO0FBQ3pCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvYXJyYXkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyB9IGZyb20gXCIuLi9lcnJvck1lc3NhZ2VzLmpzXCI7XG5pbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5qc1wiO1xuaW1wb3J0IHsgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIH0gZnJvbSBcInpvZC92M1wiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2FycmF5LnRzXG5mdW5jdGlvbiBwYXJzZUFycmF5RGVmKGRlZiwgcmVmcykge1xuXHRjb25zdCByZXMgPSB7IHR5cGU6IFwiYXJyYXlcIiB9O1xuXHRpZiAoZGVmLnR5cGU/Ll9kZWYgJiYgZGVmLnR5cGU/Ll9kZWY/LnR5cGVOYW1lICE9PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQW55KSByZXMuaXRlbXMgPSBwYXJzZURlZihkZWYudHlwZS5fZGVmLCB7XG5cdFx0Li4ucmVmcyxcblx0XHRjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsIFwiaXRlbXNcIl1cblx0fSk7XG5cdGlmIChkZWYubWluTGVuZ3RoKSBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgXCJtaW5JdGVtc1wiLCBkZWYubWluTGVuZ3RoLnZhbHVlLCBkZWYubWluTGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuXHRpZiAoZGVmLm1heExlbmd0aCkgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsIFwibWF4SXRlbXNcIiwgZGVmLm1heExlbmd0aC52YWx1ZSwgZGVmLm1heExlbmd0aC5tZXNzYWdlLCByZWZzKTtcblx0aWYgKGRlZi5leGFjdExlbmd0aCkge1xuXHRcdHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCBcIm1pbkl0ZW1zXCIsIGRlZi5leGFjdExlbmd0aC52YWx1ZSwgZGVmLmV4YWN0TGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuXHRcdHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCBcIm1heEl0ZW1zXCIsIGRlZi5leGFjdExlbmd0aC52YWx1ZSwgZGVmLmV4YWN0TGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuXHR9XG5cdHJldHVybiByZXM7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgcGFyc2VBcnJheURlZiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJyYXkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/array.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/bigint.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/bigint.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseBigintDef: () => (/* binding */ parseBigintDef)\n/* harmony export */ });\n/* harmony import */ var _errorMessages_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errorMessages.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/errorMessages.js\");\n\n\n//#region src/utils/zod-to-json-schema/parsers/bigint.ts\nfunction parseBigintDef(def, refs) {\n\tconst res = {\n\t\ttype: \"integer\",\n\t\tformat: \"int64\"\n\t};\n\tif (!def.checks) return res;\n\tfor (const check of def.checks) switch (check.kind) {\n\t\tcase \"min\":\n\t\t\tif (refs.target === \"jsonSchema7\") if (check.inclusive) (0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(res, \"minimum\", check.value, check.message, refs);\n\t\t\telse (0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(res, \"exclusiveMinimum\", check.value, check.message, refs);\n\t\t\telse {\n\t\t\t\tif (!check.inclusive) res.exclusiveMinimum = true;\n\t\t\t\t(0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(res, \"minimum\", check.value, check.message, refs);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"max\":\n\t\t\tif (refs.target === \"jsonSchema7\") if (check.inclusive) (0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(res, \"maximum\", check.value, check.message, refs);\n\t\t\telse (0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(res, \"exclusiveMaximum\", check.value, check.message, refs);\n\t\t\telse {\n\t\t\t\tif (!check.inclusive) res.exclusiveMaximum = true;\n\t\t\t\t(0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(res, \"maximum\", check.value, check.message, refs);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"multipleOf\":\n\t\t\t(0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(res, \"multipleOf\", check.value, check.message, refs);\n\t\t\tbreak;\n\t}\n\treturn res;\n}\n\n//#endregion\n\n//# sourceMappingURL=bigint.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvYmlnaW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWdFOztBQUVoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsNEVBQXlCO0FBQ3BGLFFBQVEsNEVBQXlCO0FBQ2pDO0FBQ0E7QUFDQSxJQUFJLDRFQUF5QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsNEVBQXlCO0FBQ3BGLFFBQVEsNEVBQXlCO0FBQ2pDO0FBQ0E7QUFDQSxJQUFJLDRFQUF5QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxHQUFHLDRFQUF5QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUMwQjtBQUMxQiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2JpZ2ludC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMuanNcIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9iaWdpbnQudHNcbmZ1bmN0aW9uIHBhcnNlQmlnaW50RGVmKGRlZiwgcmVmcykge1xuXHRjb25zdCByZXMgPSB7XG5cdFx0dHlwZTogXCJpbnRlZ2VyXCIsXG5cdFx0Zm9ybWF0OiBcImludDY0XCJcblx0fTtcblx0aWYgKCFkZWYuY2hlY2tzKSByZXR1cm4gcmVzO1xuXHRmb3IgKGNvbnN0IGNoZWNrIG9mIGRlZi5jaGVja3MpIHN3aXRjaCAoY2hlY2sua2luZCkge1xuXHRcdGNhc2UgXCJtaW5cIjpcblx0XHRcdGlmIChyZWZzLnRhcmdldCA9PT0gXCJqc29uU2NoZW1hN1wiKSBpZiAoY2hlY2suaW5jbHVzaXZlKSBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgXCJtaW5pbXVtXCIsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcblx0XHRcdGVsc2Ugc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsIFwiZXhjbHVzaXZlTWluaW11bVwiLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0aWYgKCFjaGVjay5pbmNsdXNpdmUpIHJlcy5leGNsdXNpdmVNaW5pbXVtID0gdHJ1ZTtcblx0XHRcdFx0c2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsIFwibWluaW11bVwiLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG5cdFx0XHR9XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwibWF4XCI6XG5cdFx0XHRpZiAocmVmcy50YXJnZXQgPT09IFwianNvblNjaGVtYTdcIikgaWYgKGNoZWNrLmluY2x1c2l2ZSkgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsIFwibWF4aW11bVwiLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG5cdFx0XHRlbHNlIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCBcImV4Y2x1c2l2ZU1heGltdW1cIiwgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGlmICghY2hlY2suaW5jbHVzaXZlKSByZXMuZXhjbHVzaXZlTWF4aW11bSA9IHRydWU7XG5cdFx0XHRcdHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCBcIm1heGltdW1cIiwgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuXHRcdFx0fVxuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcIm11bHRpcGxlT2ZcIjpcblx0XHRcdHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCBcIm11bHRpcGxlT2ZcIiwgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuXHRcdFx0YnJlYWs7XG5cdH1cblx0cmV0dXJuIHJlcztcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBwYXJzZUJpZ2ludERlZiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmlnaW50LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/bigint.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/boolean.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/boolean.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseBooleanDef: () => (/* binding */ parseBooleanDef)\n/* harmony export */ });\n//#region src/utils/zod-to-json-schema/parsers/boolean.ts\nfunction parseBooleanDef() {\n\treturn { type: \"boolean\" };\n}\n\n//#endregion\n\n//# sourceMappingURL=boolean.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvYm9vbGVhbi5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBLFVBQVU7QUFDVjs7QUFFQTtBQUMyQjtBQUMzQiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2Jvb2xlYW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9ib29sZWFuLnRzXG5mdW5jdGlvbiBwYXJzZUJvb2xlYW5EZWYoKSB7XG5cdHJldHVybiB7IHR5cGU6IFwiYm9vbGVhblwiIH07XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgcGFyc2VCb29sZWFuRGVmIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ib29sZWFuLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/boolean.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/branded.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/branded.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseBrandedDef: () => (/* binding */ parseBrandedDef)\n/* harmony export */ });\n/* harmony import */ var _parseDef_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../parseDef.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parseDef.js\");\n\n\n//#region src/utils/zod-to-json-schema/parsers/branded.ts\nfunction parseBrandedDef(_def, refs) {\n\treturn (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_0__.parseDef)(_def.type._def, refs);\n}\n\n//#endregion\n\n//# sourceMappingURL=branded.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvYnJhbmRlZC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUEwQzs7QUFFMUM7QUFDQTtBQUNBLFFBQVEsc0RBQVE7QUFDaEI7O0FBRUE7QUFDMkI7QUFDM0IiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9icmFuZGVkLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvYnJhbmRlZC50c1xuZnVuY3Rpb24gcGFyc2VCcmFuZGVkRGVmKF9kZWYsIHJlZnMpIHtcblx0cmV0dXJuIHBhcnNlRGVmKF9kZWYudHlwZS5fZGVmLCByZWZzKTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBwYXJzZUJyYW5kZWREZWYgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJyYW5kZWQuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/branded.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/catch.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/catch.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseCatchDef: () => (/* binding */ parseCatchDef)\n/* harmony export */ });\n/* harmony import */ var _parseDef_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../parseDef.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parseDef.js\");\n\n\n//#region src/utils/zod-to-json-schema/parsers/catch.ts\nconst parseCatchDef = (def, refs) => {\n\treturn (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_0__.parseDef)(def.innerType._def, refs);\n};\n\n//#endregion\n\n//# sourceMappingURL=catch.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvY2F0Y2guanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMEM7O0FBRTFDO0FBQ0E7QUFDQSxRQUFRLHNEQUFRO0FBQ2hCOztBQUVBO0FBQ3lCO0FBQ3pCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvY2F0Y2guanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYuanNcIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9jYXRjaC50c1xuY29uc3QgcGFyc2VDYXRjaERlZiA9IChkZWYsIHJlZnMpID0+IHtcblx0cmV0dXJuIHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyk7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHBhcnNlQ2F0Y2hEZWYgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhdGNoLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/catch.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/date.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/date.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseDateDef: () => (/* binding */ parseDateDef)\n/* harmony export */ });\n/* harmony import */ var _errorMessages_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errorMessages.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/errorMessages.js\");\n\n\n//#region src/utils/zod-to-json-schema/parsers/date.ts\nfunction parseDateDef(def, refs, overrideDateStrategy) {\n\tconst strategy = overrideDateStrategy ?? refs.dateStrategy;\n\tif (Array.isArray(strategy)) return { anyOf: strategy.map((item) => parseDateDef(def, refs, item)) };\n\tswitch (strategy) {\n\t\tcase \"string\":\n\t\tcase \"format:date-time\": return {\n\t\t\ttype: \"string\",\n\t\t\tformat: \"date-time\"\n\t\t};\n\t\tcase \"format:date\": return {\n\t\t\ttype: \"string\",\n\t\t\tformat: \"date\"\n\t\t};\n\t\tcase \"integer\": return integerDateParser(def, refs);\n\t}\n}\nconst integerDateParser = (def, refs) => {\n\tconst res = {\n\t\ttype: \"integer\",\n\t\tformat: \"unix-time\"\n\t};\n\tif (refs.target === \"openApi3\") return res;\n\tfor (const check of def.checks) switch (check.kind) {\n\t\tcase \"min\":\n\t\t\t(0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(res, \"minimum\", check.value, check.message, refs);\n\t\t\tbreak;\n\t\tcase \"max\":\n\t\t\t(0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(res, \"maximum\", check.value, check.message, refs);\n\t\t\tbreak;\n\t}\n\treturn res;\n};\n\n//#endregion\n\n//# sourceMappingURL=date.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZGF0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFnRTs7QUFFaEU7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsNEVBQXlCO0FBQzVCO0FBQ0E7QUFDQSxHQUFHLDRFQUF5QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUN3QjtBQUN4QiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2RhdGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyB9IGZyb20gXCIuLi9lcnJvck1lc3NhZ2VzLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZGF0ZS50c1xuZnVuY3Rpb24gcGFyc2VEYXRlRGVmKGRlZiwgcmVmcywgb3ZlcnJpZGVEYXRlU3RyYXRlZ3kpIHtcblx0Y29uc3Qgc3RyYXRlZ3kgPSBvdmVycmlkZURhdGVTdHJhdGVneSA/PyByZWZzLmRhdGVTdHJhdGVneTtcblx0aWYgKEFycmF5LmlzQXJyYXkoc3RyYXRlZ3kpKSByZXR1cm4geyBhbnlPZjogc3RyYXRlZ3kubWFwKChpdGVtKSA9PiBwYXJzZURhdGVEZWYoZGVmLCByZWZzLCBpdGVtKSkgfTtcblx0c3dpdGNoIChzdHJhdGVneSkge1xuXHRcdGNhc2UgXCJzdHJpbmdcIjpcblx0XHRjYXNlIFwiZm9ybWF0OmRhdGUtdGltZVwiOiByZXR1cm4ge1xuXHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIlxuXHRcdH07XG5cdFx0Y2FzZSBcImZvcm1hdDpkYXRlXCI6IHJldHVybiB7XG5cdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0Zm9ybWF0OiBcImRhdGVcIlxuXHRcdH07XG5cdFx0Y2FzZSBcImludGVnZXJcIjogcmV0dXJuIGludGVnZXJEYXRlUGFyc2VyKGRlZiwgcmVmcyk7XG5cdH1cbn1cbmNvbnN0IGludGVnZXJEYXRlUGFyc2VyID0gKGRlZiwgcmVmcykgPT4ge1xuXHRjb25zdCByZXMgPSB7XG5cdFx0dHlwZTogXCJpbnRlZ2VyXCIsXG5cdFx0Zm9ybWF0OiBcInVuaXgtdGltZVwiXG5cdH07XG5cdGlmIChyZWZzLnRhcmdldCA9PT0gXCJvcGVuQXBpM1wiKSByZXR1cm4gcmVzO1xuXHRmb3IgKGNvbnN0IGNoZWNrIG9mIGRlZi5jaGVja3MpIHN3aXRjaCAoY2hlY2sua2luZCkge1xuXHRcdGNhc2UgXCJtaW5cIjpcblx0XHRcdHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCBcIm1pbmltdW1cIiwgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcIm1heFwiOlxuXHRcdFx0c2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsIFwibWF4aW11bVwiLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG5cdFx0XHRicmVhaztcblx0fVxuXHRyZXR1cm4gcmVzO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBwYXJzZURhdGVEZWYgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/date.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/default.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/default.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseDefaultDef: () => (/* binding */ parseDefaultDef)\n/* harmony export */ });\n/* harmony import */ var _parseDef_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../parseDef.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parseDef.js\");\n\n\n//#region src/utils/zod-to-json-schema/parsers/default.ts\nfunction parseDefaultDef(_def, refs) {\n\treturn {\n\t\t...(0,_parseDef_js__WEBPACK_IMPORTED_MODULE_0__.parseDef)(_def.innerType._def, refs),\n\t\tdefault: _def.defaultValue()\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=default.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZGVmYXVsdC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUEwQzs7QUFFMUM7QUFDQTtBQUNBO0FBQ0EsS0FBSyxzREFBUTtBQUNiO0FBQ0E7QUFDQTs7QUFFQTtBQUMyQjtBQUMzQiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2RlZmF1bHQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYuanNcIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9kZWZhdWx0LnRzXG5mdW5jdGlvbiBwYXJzZURlZmF1bHREZWYoX2RlZiwgcmVmcykge1xuXHRyZXR1cm4ge1xuXHRcdC4uLnBhcnNlRGVmKF9kZWYuaW5uZXJUeXBlLl9kZWYsIHJlZnMpLFxuXHRcdGRlZmF1bHQ6IF9kZWYuZGVmYXVsdFZhbHVlKClcblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBwYXJzZURlZmF1bHREZWYgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHQuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/default.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/effects.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/effects.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseEffectsDef: () => (/* binding */ parseEffectsDef)\n/* harmony export */ });\n/* harmony import */ var _any_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./any.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/any.js\");\n/* harmony import */ var _parseDef_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../parseDef.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parseDef.js\");\n\n\n\n//#region src/utils/zod-to-json-schema/parsers/effects.ts\nfunction parseEffectsDef(_def, refs) {\n\treturn refs.effectStrategy === \"input\" ? (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_1__.parseDef)(_def.schema._def, refs) : (0,_any_js__WEBPACK_IMPORTED_MODULE_0__.parseAnyDef)(refs);\n}\n\n//#endregion\n\n//# sourceMappingURL=effects.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZWZmZWN0cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBdUM7QUFDRzs7QUFFMUM7QUFDQTtBQUNBLDBDQUEwQyxzREFBUSwyQkFBMkIsb0RBQVc7QUFDeEY7O0FBRUE7QUFDMkI7QUFDM0IiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9lZmZlY3RzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlQW55RGVmIH0gZnJvbSBcIi4vYW55LmpzXCI7XG5pbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2VmZmVjdHMudHNcbmZ1bmN0aW9uIHBhcnNlRWZmZWN0c0RlZihfZGVmLCByZWZzKSB7XG5cdHJldHVybiByZWZzLmVmZmVjdFN0cmF0ZWd5ID09PSBcImlucHV0XCIgPyBwYXJzZURlZihfZGVmLnNjaGVtYS5fZGVmLCByZWZzKSA6IHBhcnNlQW55RGVmKHJlZnMpO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHBhcnNlRWZmZWN0c0RlZiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZWZmZWN0cy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/effects.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/enum.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/enum.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseEnumDef: () => (/* binding */ parseEnumDef)\n/* harmony export */ });\n//#region src/utils/zod-to-json-schema/parsers/enum.ts\nfunction parseEnumDef(def) {\n\treturn {\n\t\ttype: \"string\",\n\t\tenum: Array.from(def.values)\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=enum.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZW51bS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDd0I7QUFDeEIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9lbnVtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZW51bS50c1xuZnVuY3Rpb24gcGFyc2VFbnVtRGVmKGRlZikge1xuXHRyZXR1cm4ge1xuXHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0ZW51bTogQXJyYXkuZnJvbShkZWYudmFsdWVzKVxuXHR9O1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHBhcnNlRW51bURlZiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW51bS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/enum.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/intersection.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/intersection.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseIntersectionDef: () => (/* binding */ parseIntersectionDef)\n/* harmony export */ });\n/* harmony import */ var _parseDef_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../parseDef.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parseDef.js\");\n\n\n//#region src/utils/zod-to-json-schema/parsers/intersection.ts\nconst isJsonSchema7AllOfType = (type) => {\n\tif (\"type\" in type && type.type === \"string\") return false;\n\treturn \"allOf\" in type;\n};\nfunction parseIntersectionDef(def, refs) {\n\tconst allOf = [(0,_parseDef_js__WEBPACK_IMPORTED_MODULE_0__.parseDef)(def.left._def, {\n\t\t...refs,\n\t\tcurrentPath: [\n\t\t\t...refs.currentPath,\n\t\t\t\"allOf\",\n\t\t\t\"0\"\n\t\t]\n\t}), (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_0__.parseDef)(def.right._def, {\n\t\t...refs,\n\t\tcurrentPath: [\n\t\t\t...refs.currentPath,\n\t\t\t\"allOf\",\n\t\t\t\"1\"\n\t\t]\n\t})].filter((x) => !!x);\n\tlet unevaluatedProperties = refs.target === \"jsonSchema2019-09\" ? { unevaluatedProperties: false } : void 0;\n\tconst mergedAllOf = [];\n\tallOf.forEach((schema) => {\n\t\tif (isJsonSchema7AllOfType(schema)) {\n\t\t\tmergedAllOf.push(...schema.allOf);\n\t\t\tif (schema.unevaluatedProperties === void 0) unevaluatedProperties = void 0;\n\t\t} else {\n\t\t\tlet nestedSchema = schema;\n\t\t\tif (\"additionalProperties\" in schema && schema.additionalProperties === false) {\n\t\t\t\tconst { additionalProperties,...rest } = schema;\n\t\t\t\tnestedSchema = rest;\n\t\t\t} else unevaluatedProperties = void 0;\n\t\t\tmergedAllOf.push(nestedSchema);\n\t\t}\n\t});\n\treturn mergedAllOf.length ? {\n\t\tallOf: mergedAllOf,\n\t\t...unevaluatedProperties\n\t} : void 0;\n}\n\n//#endregion\n\n//# sourceMappingURL=intersection.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvaW50ZXJzZWN0aW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTBDOztBQUUxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isc0RBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxHQUFHLHNEQUFRO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLHFFQUFxRSwrQkFBK0I7QUFDcEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsWUFBWSwrQkFBK0I7QUFDM0M7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDZ0M7QUFDaEMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9pbnRlcnNlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYuanNcIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9pbnRlcnNlY3Rpb24udHNcbmNvbnN0IGlzSnNvblNjaGVtYTdBbGxPZlR5cGUgPSAodHlwZSkgPT4ge1xuXHRpZiAoXCJ0eXBlXCIgaW4gdHlwZSAmJiB0eXBlLnR5cGUgPT09IFwic3RyaW5nXCIpIHJldHVybiBmYWxzZTtcblx0cmV0dXJuIFwiYWxsT2ZcIiBpbiB0eXBlO1xufTtcbmZ1bmN0aW9uIHBhcnNlSW50ZXJzZWN0aW9uRGVmKGRlZiwgcmVmcykge1xuXHRjb25zdCBhbGxPZiA9IFtwYXJzZURlZihkZWYubGVmdC5fZGVmLCB7XG5cdFx0Li4ucmVmcyxcblx0XHRjdXJyZW50UGF0aDogW1xuXHRcdFx0Li4ucmVmcy5jdXJyZW50UGF0aCxcblx0XHRcdFwiYWxsT2ZcIixcblx0XHRcdFwiMFwiXG5cdFx0XVxuXHR9KSwgcGFyc2VEZWYoZGVmLnJpZ2h0Ll9kZWYsIHtcblx0XHQuLi5yZWZzLFxuXHRcdGN1cnJlbnRQYXRoOiBbXG5cdFx0XHQuLi5yZWZzLmN1cnJlbnRQYXRoLFxuXHRcdFx0XCJhbGxPZlwiLFxuXHRcdFx0XCIxXCJcblx0XHRdXG5cdH0pXS5maWx0ZXIoKHgpID0+ICEheCk7XG5cdGxldCB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSByZWZzLnRhcmdldCA9PT0gXCJqc29uU2NoZW1hMjAxOS0wOVwiID8geyB1bmV2YWx1YXRlZFByb3BlcnRpZXM6IGZhbHNlIH0gOiB2b2lkIDA7XG5cdGNvbnN0IG1lcmdlZEFsbE9mID0gW107XG5cdGFsbE9mLmZvckVhY2goKHNjaGVtYSkgPT4ge1xuXHRcdGlmIChpc0pzb25TY2hlbWE3QWxsT2ZUeXBlKHNjaGVtYSkpIHtcblx0XHRcdG1lcmdlZEFsbE9mLnB1c2goLi4uc2NoZW1hLmFsbE9mKTtcblx0XHRcdGlmIChzY2hlbWEudW5ldmFsdWF0ZWRQcm9wZXJ0aWVzID09PSB2b2lkIDApIHVuZXZhbHVhdGVkUHJvcGVydGllcyA9IHZvaWQgMDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bGV0IG5lc3RlZFNjaGVtYSA9IHNjaGVtYTtcblx0XHRcdGlmIChcImFkZGl0aW9uYWxQcm9wZXJ0aWVzXCIgaW4gc2NoZW1hICYmIHNjaGVtYS5hZGRpdGlvbmFsUHJvcGVydGllcyA9PT0gZmFsc2UpIHtcblx0XHRcdFx0Y29uc3QgeyBhZGRpdGlvbmFsUHJvcGVydGllcywuLi5yZXN0IH0gPSBzY2hlbWE7XG5cdFx0XHRcdG5lc3RlZFNjaGVtYSA9IHJlc3Q7XG5cdFx0XHR9IGVsc2UgdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzID0gdm9pZCAwO1xuXHRcdFx0bWVyZ2VkQWxsT2YucHVzaChuZXN0ZWRTY2hlbWEpO1xuXHRcdH1cblx0fSk7XG5cdHJldHVybiBtZXJnZWRBbGxPZi5sZW5ndGggPyB7XG5cdFx0YWxsT2Y6IG1lcmdlZEFsbE9mLFxuXHRcdC4uLnVuZXZhbHVhdGVkUHJvcGVydGllc1xuXHR9IDogdm9pZCAwO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHBhcnNlSW50ZXJzZWN0aW9uRGVmIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcnNlY3Rpb24uanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/intersection.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/literal.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/literal.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseLiteralDef: () => (/* binding */ parseLiteralDef)\n/* harmony export */ });\n//#region src/utils/zod-to-json-schema/parsers/literal.ts\nfunction parseLiteralDef(def, refs) {\n\tconst parsedType = typeof def.value;\n\tif (parsedType !== \"bigint\" && parsedType !== \"number\" && parsedType !== \"boolean\" && parsedType !== \"string\") return { type: Array.isArray(def.value) ? \"array\" : \"object\" };\n\tif (refs.target === \"openApi3\") return {\n\t\ttype: parsedType === \"bigint\" ? \"integer\" : parsedType,\n\t\tenum: [def.value]\n\t};\n\treturn {\n\t\ttype: parsedType === \"bigint\" ? \"integer\" : parsedType,\n\t\tconst: def.value\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=literal.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbGl0ZXJhbC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0EseUhBQXlIO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUMyQjtBQUMzQiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2xpdGVyYWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9saXRlcmFsLnRzXG5mdW5jdGlvbiBwYXJzZUxpdGVyYWxEZWYoZGVmLCByZWZzKSB7XG5cdGNvbnN0IHBhcnNlZFR5cGUgPSB0eXBlb2YgZGVmLnZhbHVlO1xuXHRpZiAocGFyc2VkVHlwZSAhPT0gXCJiaWdpbnRcIiAmJiBwYXJzZWRUeXBlICE9PSBcIm51bWJlclwiICYmIHBhcnNlZFR5cGUgIT09IFwiYm9vbGVhblwiICYmIHBhcnNlZFR5cGUgIT09IFwic3RyaW5nXCIpIHJldHVybiB7IHR5cGU6IEFycmF5LmlzQXJyYXkoZGVmLnZhbHVlKSA/IFwiYXJyYXlcIiA6IFwib2JqZWN0XCIgfTtcblx0aWYgKHJlZnMudGFyZ2V0ID09PSBcIm9wZW5BcGkzXCIpIHJldHVybiB7XG5cdFx0dHlwZTogcGFyc2VkVHlwZSA9PT0gXCJiaWdpbnRcIiA/IFwiaW50ZWdlclwiIDogcGFyc2VkVHlwZSxcblx0XHRlbnVtOiBbZGVmLnZhbHVlXVxuXHR9O1xuXHRyZXR1cm4ge1xuXHRcdHR5cGU6IHBhcnNlZFR5cGUgPT09IFwiYmlnaW50XCIgPyBcImludGVnZXJcIiA6IHBhcnNlZFR5cGUsXG5cdFx0Y29uc3Q6IGRlZi52YWx1ZVxuXHR9O1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHBhcnNlTGl0ZXJhbERlZiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGl0ZXJhbC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/literal.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/map.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/map.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseMapDef: () => (/* binding */ parseMapDef)\n/* harmony export */ });\n/* harmony import */ var _any_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./any.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/any.js\");\n/* harmony import */ var _record_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./record.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/record.js\");\n/* harmony import */ var _parseDef_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../parseDef.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parseDef.js\");\n\n\n\n\n//#region src/utils/zod-to-json-schema/parsers/map.ts\nfunction parseMapDef(def, refs) {\n\tif (refs.mapStrategy === \"record\") return (0,_record_js__WEBPACK_IMPORTED_MODULE_1__.parseRecordDef)(def, refs);\n\tconst keys = (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_2__.parseDef)(def.keyType._def, {\n\t\t...refs,\n\t\tcurrentPath: [\n\t\t\t...refs.currentPath,\n\t\t\t\"items\",\n\t\t\t\"items\",\n\t\t\t\"0\"\n\t\t]\n\t}) || (0,_any_js__WEBPACK_IMPORTED_MODULE_0__.parseAnyDef)(refs);\n\tconst values = (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_2__.parseDef)(def.valueType._def, {\n\t\t...refs,\n\t\tcurrentPath: [\n\t\t\t...refs.currentPath,\n\t\t\t\"items\",\n\t\t\t\"items\",\n\t\t\t\"1\"\n\t\t]\n\t}) || (0,_any_js__WEBPACK_IMPORTED_MODULE_0__.parseAnyDef)(refs);\n\treturn {\n\t\ttype: \"array\",\n\t\tmaxItems: 125,\n\t\titems: {\n\t\t\ttype: \"array\",\n\t\t\titems: [keys, values],\n\t\t\tminItems: 2,\n\t\t\tmaxItems: 2\n\t\t}\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=map.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbWFwLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBdUM7QUFDTTtBQUNIOztBQUUxQztBQUNBO0FBQ0EsMkNBQTJDLDBEQUFjO0FBQ3pELGNBQWMsc0RBQVE7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLEtBQUssb0RBQVc7QUFDbEIsZ0JBQWdCLHNEQUFRO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxLQUFLLG9EQUFXO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDdUI7QUFDdkIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9tYXAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VBbnlEZWYgfSBmcm9tIFwiLi9hbnkuanNcIjtcbmltcG9ydCB7IHBhcnNlUmVjb3JkRGVmIH0gZnJvbSBcIi4vcmVjb3JkLmpzXCI7XG5pbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL21hcC50c1xuZnVuY3Rpb24gcGFyc2VNYXBEZWYoZGVmLCByZWZzKSB7XG5cdGlmIChyZWZzLm1hcFN0cmF0ZWd5ID09PSBcInJlY29yZFwiKSByZXR1cm4gcGFyc2VSZWNvcmREZWYoZGVmLCByZWZzKTtcblx0Y29uc3Qga2V5cyA9IHBhcnNlRGVmKGRlZi5rZXlUeXBlLl9kZWYsIHtcblx0XHQuLi5yZWZzLFxuXHRcdGN1cnJlbnRQYXRoOiBbXG5cdFx0XHQuLi5yZWZzLmN1cnJlbnRQYXRoLFxuXHRcdFx0XCJpdGVtc1wiLFxuXHRcdFx0XCJpdGVtc1wiLFxuXHRcdFx0XCIwXCJcblx0XHRdXG5cdH0pIHx8IHBhcnNlQW55RGVmKHJlZnMpO1xuXHRjb25zdCB2YWx1ZXMgPSBwYXJzZURlZihkZWYudmFsdWVUeXBlLl9kZWYsIHtcblx0XHQuLi5yZWZzLFxuXHRcdGN1cnJlbnRQYXRoOiBbXG5cdFx0XHQuLi5yZWZzLmN1cnJlbnRQYXRoLFxuXHRcdFx0XCJpdGVtc1wiLFxuXHRcdFx0XCJpdGVtc1wiLFxuXHRcdFx0XCIxXCJcblx0XHRdXG5cdH0pIHx8IHBhcnNlQW55RGVmKHJlZnMpO1xuXHRyZXR1cm4ge1xuXHRcdHR5cGU6IFwiYXJyYXlcIixcblx0XHRtYXhJdGVtczogMTI1LFxuXHRcdGl0ZW1zOiB7XG5cdFx0XHR0eXBlOiBcImFycmF5XCIsXG5cdFx0XHRpdGVtczogW2tleXMsIHZhbHVlc10sXG5cdFx0XHRtaW5JdGVtczogMixcblx0XHRcdG1heEl0ZW1zOiAyXG5cdFx0fVxuXHR9O1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHBhcnNlTWFwRGVmIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXAuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/map.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/nativeEnum.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/nativeEnum.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseNativeEnumDef: () => (/* binding */ parseNativeEnumDef)\n/* harmony export */ });\n//#region src/utils/zod-to-json-schema/parsers/nativeEnum.ts\nfunction parseNativeEnumDef(def) {\n\tconst object = def.values;\n\tconst actualKeys = Object.keys(def.values).filter((key) => {\n\t\treturn typeof object[object[key]] !== \"number\";\n\t});\n\tconst actualValues = actualKeys.map((key) => object[key]);\n\tconst parsedTypes = Array.from(new Set(actualValues.map((values) => typeof values)));\n\treturn {\n\t\ttype: parsedTypes.length === 1 ? parsedTypes[0] === \"string\" ? \"string\" : \"number\" : [\"string\", \"number\"],\n\t\tenum: actualValues\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=nativeEnum.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbmF0aXZlRW51bS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUM4QjtBQUM5QiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL25hdGl2ZUVudW0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9uYXRpdmVFbnVtLnRzXG5mdW5jdGlvbiBwYXJzZU5hdGl2ZUVudW1EZWYoZGVmKSB7XG5cdGNvbnN0IG9iamVjdCA9IGRlZi52YWx1ZXM7XG5cdGNvbnN0IGFjdHVhbEtleXMgPSBPYmplY3Qua2V5cyhkZWYudmFsdWVzKS5maWx0ZXIoKGtleSkgPT4ge1xuXHRcdHJldHVybiB0eXBlb2Ygb2JqZWN0W29iamVjdFtrZXldXSAhPT0gXCJudW1iZXJcIjtcblx0fSk7XG5cdGNvbnN0IGFjdHVhbFZhbHVlcyA9IGFjdHVhbEtleXMubWFwKChrZXkpID0+IG9iamVjdFtrZXldKTtcblx0Y29uc3QgcGFyc2VkVHlwZXMgPSBBcnJheS5mcm9tKG5ldyBTZXQoYWN0dWFsVmFsdWVzLm1hcCgodmFsdWVzKSA9PiB0eXBlb2YgdmFsdWVzKSkpO1xuXHRyZXR1cm4ge1xuXHRcdHR5cGU6IHBhcnNlZFR5cGVzLmxlbmd0aCA9PT0gMSA/IHBhcnNlZFR5cGVzWzBdID09PSBcInN0cmluZ1wiID8gXCJzdHJpbmdcIiA6IFwibnVtYmVyXCIgOiBbXCJzdHJpbmdcIiwgXCJudW1iZXJcIl0sXG5cdFx0ZW51bTogYWN0dWFsVmFsdWVzXG5cdH07XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgcGFyc2VOYXRpdmVFbnVtRGVmIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1uYXRpdmVFbnVtLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/nativeEnum.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/never.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/never.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseNeverDef: () => (/* binding */ parseNeverDef)\n/* harmony export */ });\n/* harmony import */ var _any_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./any.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/any.js\");\n\n\n//#region src/utils/zod-to-json-schema/parsers/never.ts\nfunction parseNeverDef(refs) {\n\treturn refs.target === \"openAi\" ? void 0 : { not: (0,_any_js__WEBPACK_IMPORTED_MODULE_0__.parseAnyDef)({\n\t\t...refs,\n\t\tcurrentPath: [...refs.currentPath, \"not\"]\n\t}) };\n}\n\n//#endregion\n\n//# sourceMappingURL=never.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbmV2ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBdUM7O0FBRXZDO0FBQ0E7QUFDQSw4Q0FBOEMsS0FBSyxvREFBVztBQUM5RDtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ3lCO0FBQ3pCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbmV2ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VBbnlEZWYgfSBmcm9tIFwiLi9hbnkuanNcIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9uZXZlci50c1xuZnVuY3Rpb24gcGFyc2VOZXZlckRlZihyZWZzKSB7XG5cdHJldHVybiByZWZzLnRhcmdldCA9PT0gXCJvcGVuQWlcIiA/IHZvaWQgMCA6IHsgbm90OiBwYXJzZUFueURlZih7XG5cdFx0Li4ucmVmcyxcblx0XHRjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsIFwibm90XCJdXG5cdH0pIH07XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgcGFyc2VOZXZlckRlZiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bmV2ZXIuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/never.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/null.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/null.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseNullDef: () => (/* binding */ parseNullDef)\n/* harmony export */ });\n//#region src/utils/zod-to-json-schema/parsers/null.ts\nfunction parseNullDef(refs) {\n\treturn refs.target === \"openApi3\" ? {\n\t\tenum: [\"null\"],\n\t\tnullable: true\n\t} : { type: \"null\" };\n}\n\n//#endregion\n\n//# sourceMappingURL=null.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbnVsbC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsSUFBSTtBQUNQOztBQUVBO0FBQ3dCO0FBQ3hCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbnVsbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3V0aWxzL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL251bGwudHNcbmZ1bmN0aW9uIHBhcnNlTnVsbERlZihyZWZzKSB7XG5cdHJldHVybiByZWZzLnRhcmdldCA9PT0gXCJvcGVuQXBpM1wiID8ge1xuXHRcdGVudW06IFtcIm51bGxcIl0sXG5cdFx0bnVsbGFibGU6IHRydWVcblx0fSA6IHsgdHlwZTogXCJudWxsXCIgfTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBwYXJzZU51bGxEZWYgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW51bGwuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/null.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/nullable.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/nullable.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseNullableDef: () => (/* binding */ parseNullableDef)\n/* harmony export */ });\n/* harmony import */ var _union_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./union.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/union.js\");\n/* harmony import */ var _parseDef_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../parseDef.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parseDef.js\");\n\n\n\n//#region src/utils/zod-to-json-schema/parsers/nullable.ts\nfunction parseNullableDef(def, refs) {\n\tif ([\n\t\t\"ZodString\",\n\t\t\"ZodNumber\",\n\t\t\"ZodBigInt\",\n\t\t\"ZodBoolean\",\n\t\t\"ZodNull\"\n\t].includes(def.innerType._def.typeName) && (!def.innerType._def.checks || !def.innerType._def.checks.length)) {\n\t\tif (refs.target === \"openApi3\") return {\n\t\t\ttype: _union_js__WEBPACK_IMPORTED_MODULE_0__.primitiveMappings[def.innerType._def.typeName],\n\t\t\tnullable: true\n\t\t};\n\t\treturn { type: [_union_js__WEBPACK_IMPORTED_MODULE_0__.primitiveMappings[def.innerType._def.typeName], \"null\"] };\n\t}\n\tif (refs.target === \"openApi3\") {\n\t\tconst base$1 = (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_1__.parseDef)(def.innerType._def, {\n\t\t\t...refs,\n\t\t\tcurrentPath: [...refs.currentPath]\n\t\t});\n\t\tif (base$1 && \"$ref\" in base$1) return {\n\t\t\tallOf: [base$1],\n\t\t\tnullable: true\n\t\t};\n\t\treturn base$1 && {\n\t\t\t...base$1,\n\t\t\tnullable: true\n\t\t};\n\t}\n\tconst base = (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_1__.parseDef)(def.innerType._def, {\n\t\t...refs,\n\t\tcurrentPath: [\n\t\t\t...refs.currentPath,\n\t\t\t\"anyOf\",\n\t\t\t\"0\"\n\t\t]\n\t});\n\treturn base && { anyOf: [base, { type: \"null\" }] };\n}\n\n//#endregion\n\n//# sourceMappingURL=nullable.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbnVsbGFibGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQStDO0FBQ0w7O0FBRTFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyx3REFBaUI7QUFDMUI7QUFDQTtBQUNBLFdBQVcsT0FBTyx3REFBaUI7QUFDbkM7QUFDQTtBQUNBLGlCQUFpQixzREFBUTtBQUN6QjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsc0RBQVE7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLGtCQUFrQixnQkFBZ0IsY0FBYztBQUNoRDs7QUFFQTtBQUM0QjtBQUM1QiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL251bGxhYmxlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHByaW1pdGl2ZU1hcHBpbmdzIH0gZnJvbSBcIi4vdW5pb24uanNcIjtcbmltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbnVsbGFibGUudHNcbmZ1bmN0aW9uIHBhcnNlTnVsbGFibGVEZWYoZGVmLCByZWZzKSB7XG5cdGlmIChbXG5cdFx0XCJab2RTdHJpbmdcIixcblx0XHRcIlpvZE51bWJlclwiLFxuXHRcdFwiWm9kQmlnSW50XCIsXG5cdFx0XCJab2RCb29sZWFuXCIsXG5cdFx0XCJab2ROdWxsXCJcblx0XS5pbmNsdWRlcyhkZWYuaW5uZXJUeXBlLl9kZWYudHlwZU5hbWUpICYmICghZGVmLmlubmVyVHlwZS5fZGVmLmNoZWNrcyB8fCAhZGVmLmlubmVyVHlwZS5fZGVmLmNoZWNrcy5sZW5ndGgpKSB7XG5cdFx0aWYgKHJlZnMudGFyZ2V0ID09PSBcIm9wZW5BcGkzXCIpIHJldHVybiB7XG5cdFx0XHR0eXBlOiBwcmltaXRpdmVNYXBwaW5nc1tkZWYuaW5uZXJUeXBlLl9kZWYudHlwZU5hbWVdLFxuXHRcdFx0bnVsbGFibGU6IHRydWVcblx0XHR9O1xuXHRcdHJldHVybiB7IHR5cGU6IFtwcmltaXRpdmVNYXBwaW5nc1tkZWYuaW5uZXJUeXBlLl9kZWYudHlwZU5hbWVdLCBcIm51bGxcIl0gfTtcblx0fVxuXHRpZiAocmVmcy50YXJnZXQgPT09IFwib3BlbkFwaTNcIikge1xuXHRcdGNvbnN0IGJhc2UkMSA9IHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwge1xuXHRcdFx0Li4ucmVmcyxcblx0XHRcdGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aF1cblx0XHR9KTtcblx0XHRpZiAoYmFzZSQxICYmIFwiJHJlZlwiIGluIGJhc2UkMSkgcmV0dXJuIHtcblx0XHRcdGFsbE9mOiBbYmFzZSQxXSxcblx0XHRcdG51bGxhYmxlOiB0cnVlXG5cdFx0fTtcblx0XHRyZXR1cm4gYmFzZSQxICYmIHtcblx0XHRcdC4uLmJhc2UkMSxcblx0XHRcdG51bGxhYmxlOiB0cnVlXG5cdFx0fTtcblx0fVxuXHRjb25zdCBiYXNlID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG5cdFx0Li4ucmVmcyxcblx0XHRjdXJyZW50UGF0aDogW1xuXHRcdFx0Li4ucmVmcy5jdXJyZW50UGF0aCxcblx0XHRcdFwiYW55T2ZcIixcblx0XHRcdFwiMFwiXG5cdFx0XVxuXHR9KTtcblx0cmV0dXJuIGJhc2UgJiYgeyBhbnlPZjogW2Jhc2UsIHsgdHlwZTogXCJudWxsXCIgfV0gfTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBwYXJzZU51bGxhYmxlRGVmIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1udWxsYWJsZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/nullable.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/number.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/number.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseNumberDef: () => (/* binding */ parseNumberDef)\n/* harmony export */ });\n/* harmony import */ var _errorMessages_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errorMessages.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/errorMessages.js\");\n\n\n//#region src/utils/zod-to-json-schema/parsers/number.ts\nfunction parseNumberDef(def, refs) {\n\tconst res = { type: \"number\" };\n\tif (!def.checks) return res;\n\tfor (const check of def.checks) switch (check.kind) {\n\t\tcase \"int\":\n\t\t\tres.type = \"integer\";\n\t\t\t(0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.addErrorMessage)(res, \"type\", check.message, refs);\n\t\t\tbreak;\n\t\tcase \"min\":\n\t\t\tif (refs.target === \"jsonSchema7\") if (check.inclusive) (0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(res, \"minimum\", check.value, check.message, refs);\n\t\t\telse (0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(res, \"exclusiveMinimum\", check.value, check.message, refs);\n\t\t\telse {\n\t\t\t\tif (!check.inclusive) res.exclusiveMinimum = true;\n\t\t\t\t(0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(res, \"minimum\", check.value, check.message, refs);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"max\":\n\t\t\tif (refs.target === \"jsonSchema7\") if (check.inclusive) (0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(res, \"maximum\", check.value, check.message, refs);\n\t\t\telse (0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(res, \"exclusiveMaximum\", check.value, check.message, refs);\n\t\t\telse {\n\t\t\t\tif (!check.inclusive) res.exclusiveMaximum = true;\n\t\t\t\t(0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(res, \"maximum\", check.value, check.message, refs);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"multipleOf\":\n\t\t\t(0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(res, \"multipleOf\", check.value, check.message, refs);\n\t\t\tbreak;\n\t}\n\treturn res;\n}\n\n//#endregion\n\n//# sourceMappingURL=number.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbnVtYmVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWlGOztBQUVqRjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxrRUFBZTtBQUNsQjtBQUNBO0FBQ0EsMkRBQTJELDRFQUF5QjtBQUNwRixRQUFRLDRFQUF5QjtBQUNqQztBQUNBO0FBQ0EsSUFBSSw0RUFBeUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELDRFQUF5QjtBQUNwRixRQUFRLDRFQUF5QjtBQUNqQztBQUNBO0FBQ0EsSUFBSSw0RUFBeUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsR0FBRyw0RUFBeUI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDMEI7QUFDMUIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9udW1iZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYWRkRXJyb3JNZXNzYWdlLCBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMuanNcIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9udW1iZXIudHNcbmZ1bmN0aW9uIHBhcnNlTnVtYmVyRGVmKGRlZiwgcmVmcykge1xuXHRjb25zdCByZXMgPSB7IHR5cGU6IFwibnVtYmVyXCIgfTtcblx0aWYgKCFkZWYuY2hlY2tzKSByZXR1cm4gcmVzO1xuXHRmb3IgKGNvbnN0IGNoZWNrIG9mIGRlZi5jaGVja3MpIHN3aXRjaCAoY2hlY2sua2luZCkge1xuXHRcdGNhc2UgXCJpbnRcIjpcblx0XHRcdHJlcy50eXBlID0gXCJpbnRlZ2VyXCI7XG5cdFx0XHRhZGRFcnJvck1lc3NhZ2UocmVzLCBcInR5cGVcIiwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwibWluXCI6XG5cdFx0XHRpZiAocmVmcy50YXJnZXQgPT09IFwianNvblNjaGVtYTdcIikgaWYgKGNoZWNrLmluY2x1c2l2ZSkgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsIFwibWluaW11bVwiLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG5cdFx0XHRlbHNlIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCBcImV4Y2x1c2l2ZU1pbmltdW1cIiwgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGlmICghY2hlY2suaW5jbHVzaXZlKSByZXMuZXhjbHVzaXZlTWluaW11bSA9IHRydWU7XG5cdFx0XHRcdHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCBcIm1pbmltdW1cIiwgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuXHRcdFx0fVxuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcIm1heFwiOlxuXHRcdFx0aWYgKHJlZnMudGFyZ2V0ID09PSBcImpzb25TY2hlbWE3XCIpIGlmIChjaGVjay5pbmNsdXNpdmUpIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCBcIm1heGltdW1cIiwgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuXHRcdFx0ZWxzZSBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgXCJleGNsdXNpdmVNYXhpbXVtXCIsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRpZiAoIWNoZWNrLmluY2x1c2l2ZSkgcmVzLmV4Y2x1c2l2ZU1heGltdW0gPSB0cnVlO1xuXHRcdFx0XHRzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgXCJtYXhpbXVtXCIsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcblx0XHRcdH1cblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJtdWx0aXBsZU9mXCI6XG5cdFx0XHRzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgXCJtdWx0aXBsZU9mXCIsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcblx0XHRcdGJyZWFrO1xuXHR9XG5cdHJldHVybiByZXM7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgcGFyc2VOdW1iZXJEZWYgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW51bWJlci5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/number.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/object.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/object.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseObjectDef: () => (/* binding */ parseObjectDef)\n/* harmony export */ });\n/* harmony import */ var _parseDef_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../parseDef.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parseDef.js\");\n\n\n//#region src/utils/zod-to-json-schema/parsers/object.ts\nfunction parseObjectDef(def, refs) {\n\tconst forceOptionalIntoNullable = refs.target === \"openAi\";\n\tconst result = {\n\t\ttype: \"object\",\n\t\tproperties: {}\n\t};\n\tconst required = [];\n\tconst shape = def.shape();\n\tfor (const propName in shape) {\n\t\tlet propDef = shape[propName];\n\t\tif (propDef === void 0 || propDef._def === void 0) continue;\n\t\tlet propOptional = safeIsOptional(propDef);\n\t\tif (propOptional && forceOptionalIntoNullable) {\n\t\t\tif (propDef._def.typeName === \"ZodOptional\") propDef = propDef._def.innerType;\n\t\t\tif (!propDef.isNullable()) propDef = propDef.nullable();\n\t\t\tpropOptional = false;\n\t\t}\n\t\tconst parsedDef = (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_0__.parseDef)(propDef._def, {\n\t\t\t...refs,\n\t\t\tcurrentPath: [\n\t\t\t\t...refs.currentPath,\n\t\t\t\t\"properties\",\n\t\t\t\tpropName\n\t\t\t],\n\t\t\tpropertyPath: [\n\t\t\t\t...refs.currentPath,\n\t\t\t\t\"properties\",\n\t\t\t\tpropName\n\t\t\t]\n\t\t});\n\t\tif (parsedDef === void 0) continue;\n\t\tresult.properties[propName] = parsedDef;\n\t\tif (!propOptional) required.push(propName);\n\t}\n\tif (required.length) result.required = required;\n\tconst additionalProperties = decideAdditionalProperties(def, refs);\n\tif (additionalProperties !== void 0) result.additionalProperties = additionalProperties;\n\treturn result;\n}\nfunction decideAdditionalProperties(def, refs) {\n\tif (def.catchall._def.typeName !== \"ZodNever\") return (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_0__.parseDef)(def.catchall._def, {\n\t\t...refs,\n\t\tcurrentPath: [...refs.currentPath, \"additionalProperties\"]\n\t});\n\tswitch (def.unknownKeys) {\n\t\tcase \"passthrough\": return refs.allowedAdditionalProperties;\n\t\tcase \"strict\": return refs.rejectedAdditionalProperties;\n\t\tcase \"strip\": return refs.removeAdditionalStrategy === \"strict\" ? refs.allowedAdditionalProperties : refs.rejectedAdditionalProperties;\n\t}\n}\nfunction safeIsOptional(schema) {\n\ttry {\n\t\treturn schema.isOptional();\n\t} catch {\n\t\treturn true;\n\t}\n}\n\n//#endregion\n\n//# sourceMappingURL=object.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvb2JqZWN0LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTBDOztBQUUxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isc0RBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RCxzREFBUTtBQUMvRDtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDMEI7QUFDMUIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9vYmplY3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYuanNcIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9vYmplY3QudHNcbmZ1bmN0aW9uIHBhcnNlT2JqZWN0RGVmKGRlZiwgcmVmcykge1xuXHRjb25zdCBmb3JjZU9wdGlvbmFsSW50b051bGxhYmxlID0gcmVmcy50YXJnZXQgPT09IFwib3BlbkFpXCI7XG5cdGNvbnN0IHJlc3VsdCA9IHtcblx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdHByb3BlcnRpZXM6IHt9XG5cdH07XG5cdGNvbnN0IHJlcXVpcmVkID0gW107XG5cdGNvbnN0IHNoYXBlID0gZGVmLnNoYXBlKCk7XG5cdGZvciAoY29uc3QgcHJvcE5hbWUgaW4gc2hhcGUpIHtcblx0XHRsZXQgcHJvcERlZiA9IHNoYXBlW3Byb3BOYW1lXTtcblx0XHRpZiAocHJvcERlZiA9PT0gdm9pZCAwIHx8IHByb3BEZWYuX2RlZiA9PT0gdm9pZCAwKSBjb250aW51ZTtcblx0XHRsZXQgcHJvcE9wdGlvbmFsID0gc2FmZUlzT3B0aW9uYWwocHJvcERlZik7XG5cdFx0aWYgKHByb3BPcHRpb25hbCAmJiBmb3JjZU9wdGlvbmFsSW50b051bGxhYmxlKSB7XG5cdFx0XHRpZiAocHJvcERlZi5fZGVmLnR5cGVOYW1lID09PSBcIlpvZE9wdGlvbmFsXCIpIHByb3BEZWYgPSBwcm9wRGVmLl9kZWYuaW5uZXJUeXBlO1xuXHRcdFx0aWYgKCFwcm9wRGVmLmlzTnVsbGFibGUoKSkgcHJvcERlZiA9IHByb3BEZWYubnVsbGFibGUoKTtcblx0XHRcdHByb3BPcHRpb25hbCA9IGZhbHNlO1xuXHRcdH1cblx0XHRjb25zdCBwYXJzZWREZWYgPSBwYXJzZURlZihwcm9wRGVmLl9kZWYsIHtcblx0XHRcdC4uLnJlZnMsXG5cdFx0XHRjdXJyZW50UGF0aDogW1xuXHRcdFx0XHQuLi5yZWZzLmN1cnJlbnRQYXRoLFxuXHRcdFx0XHRcInByb3BlcnRpZXNcIixcblx0XHRcdFx0cHJvcE5hbWVcblx0XHRcdF0sXG5cdFx0XHRwcm9wZXJ0eVBhdGg6IFtcblx0XHRcdFx0Li4ucmVmcy5jdXJyZW50UGF0aCxcblx0XHRcdFx0XCJwcm9wZXJ0aWVzXCIsXG5cdFx0XHRcdHByb3BOYW1lXG5cdFx0XHRdXG5cdFx0fSk7XG5cdFx0aWYgKHBhcnNlZERlZiA9PT0gdm9pZCAwKSBjb250aW51ZTtcblx0XHRyZXN1bHQucHJvcGVydGllc1twcm9wTmFtZV0gPSBwYXJzZWREZWY7XG5cdFx0aWYgKCFwcm9wT3B0aW9uYWwpIHJlcXVpcmVkLnB1c2gocHJvcE5hbWUpO1xuXHR9XG5cdGlmIChyZXF1aXJlZC5sZW5ndGgpIHJlc3VsdC5yZXF1aXJlZCA9IHJlcXVpcmVkO1xuXHRjb25zdCBhZGRpdGlvbmFsUHJvcGVydGllcyA9IGRlY2lkZUFkZGl0aW9uYWxQcm9wZXJ0aWVzKGRlZiwgcmVmcyk7XG5cdGlmIChhZGRpdGlvbmFsUHJvcGVydGllcyAhPT0gdm9pZCAwKSByZXN1bHQuYWRkaXRpb25hbFByb3BlcnRpZXMgPSBhZGRpdGlvbmFsUHJvcGVydGllcztcblx0cmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGRlY2lkZUFkZGl0aW9uYWxQcm9wZXJ0aWVzKGRlZiwgcmVmcykge1xuXHRpZiAoZGVmLmNhdGNoYWxsLl9kZWYudHlwZU5hbWUgIT09IFwiWm9kTmV2ZXJcIikgcmV0dXJuIHBhcnNlRGVmKGRlZi5jYXRjaGFsbC5fZGVmLCB7XG5cdFx0Li4ucmVmcyxcblx0XHRjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsIFwiYWRkaXRpb25hbFByb3BlcnRpZXNcIl1cblx0fSk7XG5cdHN3aXRjaCAoZGVmLnVua25vd25LZXlzKSB7XG5cdFx0Y2FzZSBcInBhc3N0aHJvdWdoXCI6IHJldHVybiByZWZzLmFsbG93ZWRBZGRpdGlvbmFsUHJvcGVydGllcztcblx0XHRjYXNlIFwic3RyaWN0XCI6IHJldHVybiByZWZzLnJlamVjdGVkQWRkaXRpb25hbFByb3BlcnRpZXM7XG5cdFx0Y2FzZSBcInN0cmlwXCI6IHJldHVybiByZWZzLnJlbW92ZUFkZGl0aW9uYWxTdHJhdGVneSA9PT0gXCJzdHJpY3RcIiA/IHJlZnMuYWxsb3dlZEFkZGl0aW9uYWxQcm9wZXJ0aWVzIDogcmVmcy5yZWplY3RlZEFkZGl0aW9uYWxQcm9wZXJ0aWVzO1xuXHR9XG59XG5mdW5jdGlvbiBzYWZlSXNPcHRpb25hbChzY2hlbWEpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gc2NoZW1hLmlzT3B0aW9uYWwoKTtcblx0fSBjYXRjaCB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBwYXJzZU9iamVjdERlZiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2JqZWN0LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/object.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/optional.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/optional.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseOptionalDef: () => (/* binding */ parseOptionalDef)\n/* harmony export */ });\n/* harmony import */ var _any_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./any.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/any.js\");\n/* harmony import */ var _parseDef_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../parseDef.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parseDef.js\");\n\n\n\n//#region src/utils/zod-to-json-schema/parsers/optional.ts\nconst parseOptionalDef = (def, refs) => {\n\tif (refs.currentPath.toString() === refs.propertyPath?.toString()) return (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_1__.parseDef)(def.innerType._def, refs);\n\tconst innerSchema = (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_1__.parseDef)(def.innerType._def, {\n\t\t...refs,\n\t\tcurrentPath: [\n\t\t\t...refs.currentPath,\n\t\t\t\"anyOf\",\n\t\t\t\"1\"\n\t\t]\n\t});\n\treturn innerSchema ? { anyOf: [{ not: (0,_any_js__WEBPACK_IMPORTED_MODULE_0__.parseAnyDef)(refs) }, innerSchema] } : (0,_any_js__WEBPACK_IMPORTED_MODULE_0__.parseAnyDef)(refs);\n};\n\n//#endregion\n\n//# sourceMappingURL=optional.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvb3B0aW9uYWwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXVDO0FBQ0c7O0FBRTFDO0FBQ0E7QUFDQSwyRUFBMkUsc0RBQVE7QUFDbkYscUJBQXFCLHNEQUFRO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRix3QkFBd0IsVUFBVSxLQUFLLG9EQUFXLFFBQVEsaUJBQWlCLEVBQUUsb0RBQVc7QUFDeEY7O0FBRUE7QUFDNEI7QUFDNUIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9vcHRpb25hbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZUFueURlZiB9IGZyb20gXCIuL2FueS5qc1wiO1xuaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYuanNcIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9vcHRpb25hbC50c1xuY29uc3QgcGFyc2VPcHRpb25hbERlZiA9IChkZWYsIHJlZnMpID0+IHtcblx0aWYgKHJlZnMuY3VycmVudFBhdGgudG9TdHJpbmcoKSA9PT0gcmVmcy5wcm9wZXJ0eVBhdGg/LnRvU3RyaW5nKCkpIHJldHVybiBwYXJzZURlZihkZWYuaW5uZXJUeXBlLl9kZWYsIHJlZnMpO1xuXHRjb25zdCBpbm5lclNjaGVtYSA9IHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwge1xuXHRcdC4uLnJlZnMsXG5cdFx0Y3VycmVudFBhdGg6IFtcblx0XHRcdC4uLnJlZnMuY3VycmVudFBhdGgsXG5cdFx0XHRcImFueU9mXCIsXG5cdFx0XHRcIjFcIlxuXHRcdF1cblx0fSk7XG5cdHJldHVybiBpbm5lclNjaGVtYSA/IHsgYW55T2Y6IFt7IG5vdDogcGFyc2VBbnlEZWYocmVmcykgfSwgaW5uZXJTY2hlbWFdIH0gOiBwYXJzZUFueURlZihyZWZzKTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgcGFyc2VPcHRpb25hbERlZiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3B0aW9uYWwuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/optional.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/pipeline.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/pipeline.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parsePipelineDef: () => (/* binding */ parsePipelineDef)\n/* harmony export */ });\n/* harmony import */ var _parseDef_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../parseDef.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parseDef.js\");\n\n\n//#region src/utils/zod-to-json-schema/parsers/pipeline.ts\nconst parsePipelineDef = (def, refs) => {\n\tif (refs.pipeStrategy === \"input\") return (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_0__.parseDef)(def.in._def, refs);\n\telse if (refs.pipeStrategy === \"output\") return (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_0__.parseDef)(def.out._def, refs);\n\tconst a = (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_0__.parseDef)(def.in._def, {\n\t\t...refs,\n\t\tcurrentPath: [\n\t\t\t...refs.currentPath,\n\t\t\t\"allOf\",\n\t\t\t\"0\"\n\t\t]\n\t});\n\tconst b = (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_0__.parseDef)(def.out._def, {\n\t\t...refs,\n\t\tcurrentPath: [\n\t\t\t...refs.currentPath,\n\t\t\t\"allOf\",\n\t\t\ta ? \"1\" : \"0\"\n\t\t]\n\t});\n\treturn { allOf: [a, b].filter((x) => x !== void 0) };\n};\n\n//#endregion\n\n//# sourceMappingURL=pipeline.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvcGlwZWxpbmUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMEM7O0FBRTFDO0FBQ0E7QUFDQSwyQ0FBMkMsc0RBQVE7QUFDbkQsaURBQWlELHNEQUFRO0FBQ3pELFdBQVcsc0RBQVE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLFdBQVcsc0RBQVE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLFVBQVU7QUFDVjs7QUFFQTtBQUM0QjtBQUM1QiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3BpcGVsaW5lLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvcGlwZWxpbmUudHNcbmNvbnN0IHBhcnNlUGlwZWxpbmVEZWYgPSAoZGVmLCByZWZzKSA9PiB7XG5cdGlmIChyZWZzLnBpcGVTdHJhdGVneSA9PT0gXCJpbnB1dFwiKSByZXR1cm4gcGFyc2VEZWYoZGVmLmluLl9kZWYsIHJlZnMpO1xuXHRlbHNlIGlmIChyZWZzLnBpcGVTdHJhdGVneSA9PT0gXCJvdXRwdXRcIikgcmV0dXJuIHBhcnNlRGVmKGRlZi5vdXQuX2RlZiwgcmVmcyk7XG5cdGNvbnN0IGEgPSBwYXJzZURlZihkZWYuaW4uX2RlZiwge1xuXHRcdC4uLnJlZnMsXG5cdFx0Y3VycmVudFBhdGg6IFtcblx0XHRcdC4uLnJlZnMuY3VycmVudFBhdGgsXG5cdFx0XHRcImFsbE9mXCIsXG5cdFx0XHRcIjBcIlxuXHRcdF1cblx0fSk7XG5cdGNvbnN0IGIgPSBwYXJzZURlZihkZWYub3V0Ll9kZWYsIHtcblx0XHQuLi5yZWZzLFxuXHRcdGN1cnJlbnRQYXRoOiBbXG5cdFx0XHQuLi5yZWZzLmN1cnJlbnRQYXRoLFxuXHRcdFx0XCJhbGxPZlwiLFxuXHRcdFx0YSA/IFwiMVwiIDogXCIwXCJcblx0XHRdXG5cdH0pO1xuXHRyZXR1cm4geyBhbGxPZjogW2EsIGJdLmZpbHRlcigoeCkgPT4geCAhPT0gdm9pZCAwKSB9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBwYXJzZVBpcGVsaW5lRGVmIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1waXBlbGluZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/pipeline.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/promise.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/promise.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parsePromiseDef: () => (/* binding */ parsePromiseDef)\n/* harmony export */ });\n/* harmony import */ var _parseDef_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../parseDef.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parseDef.js\");\n\n\n//#region src/utils/zod-to-json-schema/parsers/promise.ts\nfunction parsePromiseDef(def, refs) {\n\treturn (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_0__.parseDef)(def.type._def, refs);\n}\n\n//#endregion\n\n//# sourceMappingURL=promise.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvcHJvbWlzZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUEwQzs7QUFFMUM7QUFDQTtBQUNBLFFBQVEsc0RBQVE7QUFDaEI7O0FBRUE7QUFDMkI7QUFDM0IiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9wcm9taXNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvcHJvbWlzZS50c1xuZnVuY3Rpb24gcGFyc2VQcm9taXNlRGVmKGRlZiwgcmVmcykge1xuXHRyZXR1cm4gcGFyc2VEZWYoZGVmLnR5cGUuX2RlZiwgcmVmcyk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgcGFyc2VQcm9taXNlRGVmIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9taXNlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/promise.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/readonly.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/readonly.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseReadonlyDef: () => (/* binding */ parseReadonlyDef)\n/* harmony export */ });\n/* harmony import */ var _parseDef_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../parseDef.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parseDef.js\");\n\n\n//#region src/utils/zod-to-json-schema/parsers/readonly.ts\nconst parseReadonlyDef = (def, refs) => {\n\treturn (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_0__.parseDef)(def.innerType._def, refs);\n};\n\n//#endregion\n\n//# sourceMappingURL=readonly.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvcmVhZG9ubHkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMEM7O0FBRTFDO0FBQ0E7QUFDQSxRQUFRLHNEQUFRO0FBQ2hCOztBQUVBO0FBQzRCO0FBQzVCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvcmVhZG9ubHkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYuanNcIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9yZWFkb25seS50c1xuY29uc3QgcGFyc2VSZWFkb25seURlZiA9IChkZWYsIHJlZnMpID0+IHtcblx0cmV0dXJuIHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyk7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHBhcnNlUmVhZG9ubHlEZWYgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWRvbmx5LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/readonly.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/record.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/record.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseRecordDef: () => (/* binding */ parseRecordDef)\n/* harmony export */ });\n/* harmony import */ var _any_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./any.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/any.js\");\n/* harmony import */ var _branded_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./branded.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/branded.js\");\n/* harmony import */ var _string_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./string.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/string.js\");\n/* harmony import */ var _parseDef_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../parseDef.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parseDef.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! zod/v3 */ \"(ssr)/./node_modules/zod/v3/index.js\");\n\n\n\n\n\n\n//#region src/utils/zod-to-json-schema/parsers/record.ts\nfunction parseRecordDef(def, refs) {\n\tif (refs.target === \"openAi\") console.warn(\"Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead.\");\n\tif (refs.target === \"openApi3\" && def.keyType?._def.typeName === zod_v3__WEBPACK_IMPORTED_MODULE_4__.ZodFirstPartyTypeKind.ZodEnum) return {\n\t\ttype: \"object\",\n\t\trequired: def.keyType._def.values,\n\t\tproperties: def.keyType._def.values.reduce((acc, key) => ({\n\t\t\t...acc,\n\t\t\t[key]: (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_3__.parseDef)(def.valueType._def, {\n\t\t\t\t...refs,\n\t\t\t\tcurrentPath: [\n\t\t\t\t\t...refs.currentPath,\n\t\t\t\t\t\"properties\",\n\t\t\t\t\tkey\n\t\t\t\t]\n\t\t\t}) ?? (0,_any_js__WEBPACK_IMPORTED_MODULE_0__.parseAnyDef)(refs)\n\t\t}), {}),\n\t\tadditionalProperties: refs.rejectedAdditionalProperties\n\t};\n\tconst schema = {\n\t\ttype: \"object\",\n\t\tadditionalProperties: (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_3__.parseDef)(def.valueType._def, {\n\t\t\t...refs,\n\t\t\tcurrentPath: [...refs.currentPath, \"additionalProperties\"]\n\t\t}) ?? refs.allowedAdditionalProperties\n\t};\n\tif (refs.target === \"openApi3\") return schema;\n\tif (def.keyType?._def.typeName === zod_v3__WEBPACK_IMPORTED_MODULE_4__.ZodFirstPartyTypeKind.ZodString && def.keyType._def.checks?.length) {\n\t\tconst { type,...keyType } = (0,_string_js__WEBPACK_IMPORTED_MODULE_2__.parseStringDef)(def.keyType._def, refs);\n\t\treturn {\n\t\t\t...schema,\n\t\t\tpropertyNames: keyType\n\t\t};\n\t} else if (def.keyType?._def.typeName === zod_v3__WEBPACK_IMPORTED_MODULE_4__.ZodFirstPartyTypeKind.ZodEnum) return {\n\t\t...schema,\n\t\tpropertyNames: { enum: def.keyType._def.values }\n\t};\n\telse if (def.keyType?._def.typeName === zod_v3__WEBPACK_IMPORTED_MODULE_4__.ZodFirstPartyTypeKind.ZodBranded && def.keyType._def.type._def.typeName === zod_v3__WEBPACK_IMPORTED_MODULE_4__.ZodFirstPartyTypeKind.ZodString && def.keyType._def.type._def.checks?.length) {\n\t\tconst { type,...keyType } = (0,_branded_js__WEBPACK_IMPORTED_MODULE_1__.parseBrandedDef)(def.keyType._def, refs);\n\t\treturn {\n\t\t\t...schema,\n\t\t\tpropertyNames: keyType\n\t\t};\n\t}\n\treturn schema;\n}\n\n//#endregion\n\n//# sourceMappingURL=record.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvcmVjb3JkLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF1QztBQUNRO0FBQ0Y7QUFDSDtBQUNLOztBQUUvQztBQUNBO0FBQ0E7QUFDQSxrRUFBa0UseURBQXFCO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxzREFBUTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLEtBQUssb0RBQVc7QUFDcEIsR0FBRyxLQUFLO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isc0RBQVE7QUFDaEM7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0Esb0NBQW9DLHlEQUFxQjtBQUN6RCxVQUFVLGtCQUFrQixFQUFFLDBEQUFjO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyx3Q0FBd0MseURBQXFCO0FBQ2hFO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0EseUNBQXlDLHlEQUFxQix1REFBdUQseURBQXFCO0FBQzFJLFVBQVUsa0JBQWtCLEVBQUUsNERBQWU7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDMEI7QUFDMUIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9yZWNvcmQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VBbnlEZWYgfSBmcm9tIFwiLi9hbnkuanNcIjtcbmltcG9ydCB7IHBhcnNlQnJhbmRlZERlZiB9IGZyb20gXCIuL2JyYW5kZWQuanNcIjtcbmltcG9ydCB7IHBhcnNlU3RyaW5nRGVmIH0gZnJvbSBcIi4vc3RyaW5nLmpzXCI7XG5pbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5qc1wiO1xuaW1wb3J0IHsgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIH0gZnJvbSBcInpvZC92M1wiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3JlY29yZC50c1xuZnVuY3Rpb24gcGFyc2VSZWNvcmREZWYoZGVmLCByZWZzKSB7XG5cdGlmIChyZWZzLnRhcmdldCA9PT0gXCJvcGVuQWlcIikgY29uc29sZS53YXJuKFwiV2FybmluZzogT3BlbkFJIG1heSBub3Qgc3VwcG9ydCByZWNvcmRzIGluIHNjaGVtYXMhIFRyeSBhbiBhcnJheSBvZiBrZXktdmFsdWUgcGFpcnMgaW5zdGVhZC5cIik7XG5cdGlmIChyZWZzLnRhcmdldCA9PT0gXCJvcGVuQXBpM1wiICYmIGRlZi5rZXlUeXBlPy5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRW51bSkgcmV0dXJuIHtcblx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdHJlcXVpcmVkOiBkZWYua2V5VHlwZS5fZGVmLnZhbHVlcyxcblx0XHRwcm9wZXJ0aWVzOiBkZWYua2V5VHlwZS5fZGVmLnZhbHVlcy5yZWR1Y2UoKGFjYywga2V5KSA9PiAoe1xuXHRcdFx0Li4uYWNjLFxuXHRcdFx0W2tleV06IHBhcnNlRGVmKGRlZi52YWx1ZVR5cGUuX2RlZiwge1xuXHRcdFx0XHQuLi5yZWZzLFxuXHRcdFx0XHRjdXJyZW50UGF0aDogW1xuXHRcdFx0XHRcdC4uLnJlZnMuY3VycmVudFBhdGgsXG5cdFx0XHRcdFx0XCJwcm9wZXJ0aWVzXCIsXG5cdFx0XHRcdFx0a2V5XG5cdFx0XHRcdF1cblx0XHRcdH0pID8/IHBhcnNlQW55RGVmKHJlZnMpXG5cdFx0fSksIHt9KSxcblx0XHRhZGRpdGlvbmFsUHJvcGVydGllczogcmVmcy5yZWplY3RlZEFkZGl0aW9uYWxQcm9wZXJ0aWVzXG5cdH07XG5cdGNvbnN0IHNjaGVtYSA9IHtcblx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBwYXJzZURlZihkZWYudmFsdWVUeXBlLl9kZWYsIHtcblx0XHRcdC4uLnJlZnMsXG5cdFx0XHRjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsIFwiYWRkaXRpb25hbFByb3BlcnRpZXNcIl1cblx0XHR9KSA/PyByZWZzLmFsbG93ZWRBZGRpdGlvbmFsUHJvcGVydGllc1xuXHR9O1xuXHRpZiAocmVmcy50YXJnZXQgPT09IFwib3BlbkFwaTNcIikgcmV0dXJuIHNjaGVtYTtcblx0aWYgKGRlZi5rZXlUeXBlPy5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nICYmIGRlZi5rZXlUeXBlLl9kZWYuY2hlY2tzPy5sZW5ndGgpIHtcblx0XHRjb25zdCB7IHR5cGUsLi4ua2V5VHlwZSB9ID0gcGFyc2VTdHJpbmdEZWYoZGVmLmtleVR5cGUuX2RlZiwgcmVmcyk7XG5cdFx0cmV0dXJuIHtcblx0XHRcdC4uLnNjaGVtYSxcblx0XHRcdHByb3BlcnR5TmFtZXM6IGtleVR5cGVcblx0XHR9O1xuXHR9IGVsc2UgaWYgKGRlZi5rZXlUeXBlPy5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRW51bSkgcmV0dXJuIHtcblx0XHQuLi5zY2hlbWEsXG5cdFx0cHJvcGVydHlOYW1lczogeyBlbnVtOiBkZWYua2V5VHlwZS5fZGVmLnZhbHVlcyB9XG5cdH07XG5cdGVsc2UgaWYgKGRlZi5rZXlUeXBlPy5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQnJhbmRlZCAmJiBkZWYua2V5VHlwZS5fZGVmLnR5cGUuX2RlZi50eXBlTmFtZSA9PT0gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFN0cmluZyAmJiBkZWYua2V5VHlwZS5fZGVmLnR5cGUuX2RlZi5jaGVja3M/Lmxlbmd0aCkge1xuXHRcdGNvbnN0IHsgdHlwZSwuLi5rZXlUeXBlIH0gPSBwYXJzZUJyYW5kZWREZWYoZGVmLmtleVR5cGUuX2RlZiwgcmVmcyk7XG5cdFx0cmV0dXJuIHtcblx0XHRcdC4uLnNjaGVtYSxcblx0XHRcdHByb3BlcnR5TmFtZXM6IGtleVR5cGVcblx0XHR9O1xuXHR9XG5cdHJldHVybiBzY2hlbWE7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgcGFyc2VSZWNvcmREZWYgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlY29yZC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/record.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/set.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/set.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseSetDef: () => (/* binding */ parseSetDef)\n/* harmony export */ });\n/* harmony import */ var _errorMessages_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errorMessages.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/errorMessages.js\");\n/* harmony import */ var _parseDef_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../parseDef.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parseDef.js\");\n\n\n\n//#region src/utils/zod-to-json-schema/parsers/set.ts\nfunction parseSetDef(def, refs) {\n\tconst items = (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_1__.parseDef)(def.valueType._def, {\n\t\t...refs,\n\t\tcurrentPath: [...refs.currentPath, \"items\"]\n\t});\n\tconst schema = {\n\t\ttype: \"array\",\n\t\tuniqueItems: true,\n\t\titems\n\t};\n\tif (def.minSize) (0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(schema, \"minItems\", def.minSize.value, def.minSize.message, refs);\n\tif (def.maxSize) (0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(schema, \"maxItems\", def.maxSize.value, def.maxSize.message, refs);\n\treturn schema;\n}\n\n//#endregion\n\n//# sourceMappingURL=set.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvc2V0LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnRTtBQUN0Qjs7QUFFMUM7QUFDQTtBQUNBLGVBQWUsc0RBQVE7QUFDdkI7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDRFQUF5QjtBQUMzQyxrQkFBa0IsNEVBQXlCO0FBQzNDO0FBQ0E7O0FBRUE7QUFDdUI7QUFDdkIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9zZXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyB9IGZyb20gXCIuLi9lcnJvck1lc3NhZ2VzLmpzXCI7XG5pbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3NldC50c1xuZnVuY3Rpb24gcGFyc2VTZXREZWYoZGVmLCByZWZzKSB7XG5cdGNvbnN0IGl0ZW1zID0gcGFyc2VEZWYoZGVmLnZhbHVlVHlwZS5fZGVmLCB7XG5cdFx0Li4ucmVmcyxcblx0XHRjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsIFwiaXRlbXNcIl1cblx0fSk7XG5cdGNvbnN0IHNjaGVtYSA9IHtcblx0XHR0eXBlOiBcImFycmF5XCIsXG5cdFx0dW5pcXVlSXRlbXM6IHRydWUsXG5cdFx0aXRlbXNcblx0fTtcblx0aWYgKGRlZi5taW5TaXplKSBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHNjaGVtYSwgXCJtaW5JdGVtc1wiLCBkZWYubWluU2l6ZS52YWx1ZSwgZGVmLm1pblNpemUubWVzc2FnZSwgcmVmcyk7XG5cdGlmIChkZWYubWF4U2l6ZSkgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhzY2hlbWEsIFwibWF4SXRlbXNcIiwgZGVmLm1heFNpemUudmFsdWUsIGRlZi5tYXhTaXplLm1lc3NhZ2UsIHJlZnMpO1xuXHRyZXR1cm4gc2NoZW1hO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHBhcnNlU2V0RGVmIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXQuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/set.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/string.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/string.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseStringDef: () => (/* binding */ parseStringDef),\n/* harmony export */   zodPatterns: () => (/* binding */ zodPatterns)\n/* harmony export */ });\n/* harmony import */ var _errorMessages_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errorMessages.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/errorMessages.js\");\n\n\n//#region src/utils/zod-to-json-schema/parsers/string.ts\nlet emojiRegex = void 0;\n/**\n* Generated from the regular expressions found here as of 2024-05-22:\n* https://github.com/colinhacks/zod/blob/master/src/types.ts.\n*\n* Expressions with /i flag have been changed accordingly.\n*/\nconst zodPatterns = {\n\tcuid: /^[cC][^\\s-]{8,}$/,\n\tcuid2: /^[0-9a-z]+$/,\n\tulid: /^[0-9A-HJKMNP-TV-Z]{26}$/,\n\temail: /^(?!\\.)(?!.*\\.\\.)([a-zA-Z0-9_'+\\-\\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\\-]*\\.)+[a-zA-Z]{2,}$/,\n\temoji: () => {\n\t\tif (emojiRegex === void 0) emojiRegex = RegExp(\"^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$\", \"u\");\n\t\treturn emojiRegex;\n\t},\n\tuuid: /^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/,\n\tipv4: /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,\n\tipv4Cidr: /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/(3[0-2]|[12]?[0-9])$/,\n\tipv6: /^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,\n\tipv6Cidr: /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,\n\tbase64: /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,\n\tbase64url: /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,\n\tnanoid: /^[a-zA-Z0-9_-]{21}$/,\n\tjwt: /^[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]*$/\n};\nfunction parseStringDef(def, refs) {\n\tconst res = { type: \"string\" };\n\tif (def.checks) for (const check of def.checks) switch (check.kind) {\n\t\tcase \"min\":\n\t\t\t(0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(res, \"minLength\", typeof res.minLength === \"number\" ? Math.max(res.minLength, check.value) : check.value, check.message, refs);\n\t\t\tbreak;\n\t\tcase \"max\":\n\t\t\t(0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(res, \"maxLength\", typeof res.maxLength === \"number\" ? Math.min(res.maxLength, check.value) : check.value, check.message, refs);\n\t\t\tbreak;\n\t\tcase \"email\":\n\t\t\tswitch (refs.emailStrategy) {\n\t\t\t\tcase \"format:email\":\n\t\t\t\t\taddFormat(res, \"email\", check.message, refs);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"format:idn-email\":\n\t\t\t\t\taddFormat(res, \"idn-email\", check.message, refs);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"pattern:zod\":\n\t\t\t\t\taddPattern(res, zodPatterns.email, check.message, refs);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"url\":\n\t\t\taddFormat(res, \"uri\", check.message, refs);\n\t\t\tbreak;\n\t\tcase \"uuid\":\n\t\t\taddFormat(res, \"uuid\", check.message, refs);\n\t\t\tbreak;\n\t\tcase \"regex\":\n\t\t\taddPattern(res, check.regex, check.message, refs);\n\t\t\tbreak;\n\t\tcase \"cuid\":\n\t\t\taddPattern(res, zodPatterns.cuid, check.message, refs);\n\t\t\tbreak;\n\t\tcase \"cuid2\":\n\t\t\taddPattern(res, zodPatterns.cuid2, check.message, refs);\n\t\t\tbreak;\n\t\tcase \"startsWith\":\n\t\t\taddPattern(res, RegExp(`^${escapeLiteralCheckValue(check.value, refs)}`), check.message, refs);\n\t\t\tbreak;\n\t\tcase \"endsWith\":\n\t\t\taddPattern(res, RegExp(`${escapeLiteralCheckValue(check.value, refs)}$`), check.message, refs);\n\t\t\tbreak;\n\t\tcase \"datetime\":\n\t\t\taddFormat(res, \"date-time\", check.message, refs);\n\t\t\tbreak;\n\t\tcase \"date\":\n\t\t\taddFormat(res, \"date\", check.message, refs);\n\t\t\tbreak;\n\t\tcase \"time\":\n\t\t\taddFormat(res, \"time\", check.message, refs);\n\t\t\tbreak;\n\t\tcase \"duration\":\n\t\t\taddFormat(res, \"duration\", check.message, refs);\n\t\t\tbreak;\n\t\tcase \"length\":\n\t\t\t(0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(res, \"minLength\", typeof res.minLength === \"number\" ? Math.max(res.minLength, check.value) : check.value, check.message, refs);\n\t\t\t(0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(res, \"maxLength\", typeof res.maxLength === \"number\" ? Math.min(res.maxLength, check.value) : check.value, check.message, refs);\n\t\t\tbreak;\n\t\tcase \"includes\":\n\t\t\taddPattern(res, RegExp(escapeLiteralCheckValue(check.value, refs)), check.message, refs);\n\t\t\tbreak;\n\t\tcase \"ip\":\n\t\t\tif (check.version !== \"v6\") addFormat(res, \"ipv4\", check.message, refs);\n\t\t\tif (check.version !== \"v4\") addFormat(res, \"ipv6\", check.message, refs);\n\t\t\tbreak;\n\t\tcase \"base64url\":\n\t\t\taddPattern(res, zodPatterns.base64url, check.message, refs);\n\t\t\tbreak;\n\t\tcase \"jwt\":\n\t\t\taddPattern(res, zodPatterns.jwt, check.message, refs);\n\t\t\tbreak;\n\t\tcase \"cidr\":\n\t\t\tif (check.version !== \"v6\") addPattern(res, zodPatterns.ipv4Cidr, check.message, refs);\n\t\t\tif (check.version !== \"v4\") addPattern(res, zodPatterns.ipv6Cidr, check.message, refs);\n\t\t\tbreak;\n\t\tcase \"emoji\":\n\t\t\taddPattern(res, zodPatterns.emoji(), check.message, refs);\n\t\t\tbreak;\n\t\tcase \"ulid\":\n\t\t\taddPattern(res, zodPatterns.ulid, check.message, refs);\n\t\t\tbreak;\n\t\tcase \"base64\":\n\t\t\tswitch (refs.base64Strategy) {\n\t\t\t\tcase \"format:binary\":\n\t\t\t\t\taddFormat(res, \"binary\", check.message, refs);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"contentEncoding:base64\":\n\t\t\t\t\t(0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(res, \"contentEncoding\", \"base64\", check.message, refs);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"pattern:zod\":\n\t\t\t\t\taddPattern(res, zodPatterns.base64, check.message, refs);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"nanoid\":\n\t\t\taddPattern(res, zodPatterns.nanoid, check.message, refs);\n\t\t\tbreak;\n\t\tcase \"toLowerCase\":\n\t\tcase \"toUpperCase\":\n\t\tcase \"trim\": break;\n\t\tdefault:\n /* c8 ignore next */\n\t\t((_) => {})(check);\n\t}\n\treturn res;\n}\nfunction escapeLiteralCheckValue(literal, refs) {\n\treturn refs.patternStrategy === \"escape\" ? escapeNonAlphaNumeric(literal) : literal;\n}\nconst ALPHA_NUMERIC = /* @__PURE__ */ new Set(\"ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789\");\nfunction escapeNonAlphaNumeric(source) {\n\tlet result = \"\";\n\tfor (let i = 0; i < source.length; i++) {\n\t\tif (!ALPHA_NUMERIC.has(source[i])) result += \"\\\\\";\n\t\tresult += source[i];\n\t}\n\treturn result;\n}\nfunction addFormat(schema, value, message, refs) {\n\tif (schema.format || schema.anyOf?.some((x) => x.format)) {\n\t\tif (!schema.anyOf) schema.anyOf = [];\n\t\tif (schema.format) {\n\t\t\tschema.anyOf.push({\n\t\t\t\tformat: schema.format,\n\t\t\t\t...schema.errorMessage && refs.errorMessages && { errorMessage: { format: schema.errorMessage.format } }\n\t\t\t});\n\t\t\tdelete schema.format;\n\t\t\tif (schema.errorMessage) {\n\t\t\t\tdelete schema.errorMessage.format;\n\t\t\t\tif (Object.keys(schema.errorMessage).length === 0) delete schema.errorMessage;\n\t\t\t}\n\t\t}\n\t\tschema.anyOf.push({\n\t\t\tformat: value,\n\t\t\t...message && refs.errorMessages && { errorMessage: { format: message } }\n\t\t});\n\t} else (0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(schema, \"format\", value, message, refs);\n}\nfunction addPattern(schema, regex, message, refs) {\n\tif (schema.pattern || schema.allOf?.some((x) => x.pattern)) {\n\t\tif (!schema.allOf) schema.allOf = [];\n\t\tif (schema.pattern) {\n\t\t\tschema.allOf.push({\n\t\t\t\tpattern: schema.pattern,\n\t\t\t\t...schema.errorMessage && refs.errorMessages && { errorMessage: { pattern: schema.errorMessage.pattern } }\n\t\t\t});\n\t\t\tdelete schema.pattern;\n\t\t\tif (schema.errorMessage) {\n\t\t\t\tdelete schema.errorMessage.pattern;\n\t\t\t\tif (Object.keys(schema.errorMessage).length === 0) delete schema.errorMessage;\n\t\t\t}\n\t\t}\n\t\tschema.allOf.push({\n\t\t\tpattern: stringifyRegExpWithFlags(regex, refs),\n\t\t\t...message && refs.errorMessages && { errorMessage: { pattern: message } }\n\t\t});\n\t} else (0,_errorMessages_js__WEBPACK_IMPORTED_MODULE_0__.setResponseValueAndErrors)(schema, \"pattern\", stringifyRegExpWithFlags(regex, refs), message, refs);\n}\nfunction stringifyRegExpWithFlags(regex, refs) {\n\tif (!refs.applyRegexFlags || !regex.flags) return regex.source;\n\tconst flags = {\n\t\ti: regex.flags.includes(\"i\"),\n\t\tm: regex.flags.includes(\"m\"),\n\t\ts: regex.flags.includes(\"s\")\n\t};\n\tconst source = flags.i ? regex.source.toLowerCase() : regex.source;\n\tlet pattern = \"\";\n\tlet isEscaped = false;\n\tlet inCharGroup = false;\n\tlet inCharRange = false;\n\tfor (let i = 0; i < source.length; i++) {\n\t\tif (isEscaped) {\n\t\t\tpattern += source[i];\n\t\t\tisEscaped = false;\n\t\t\tcontinue;\n\t\t}\n\t\tif (flags.i) {\n\t\t\tif (inCharGroup) {\n\t\t\t\tif (source[i].match(/[a-z]/)) {\n\t\t\t\t\tif (inCharRange) {\n\t\t\t\t\t\tpattern += source[i];\n\t\t\t\t\t\tpattern += `${source[i - 2]}-${source[i]}`.toUpperCase();\n\t\t\t\t\t\tinCharRange = false;\n\t\t\t\t\t} else if (source[i + 1] === \"-\" && source[i + 2]?.match(/[a-z]/)) {\n\t\t\t\t\t\tpattern += source[i];\n\t\t\t\t\t\tinCharRange = true;\n\t\t\t\t\t} else pattern += `${source[i]}${source[i].toUpperCase()}`;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t} else if (source[i].match(/[a-z]/)) {\n\t\t\t\tpattern += `[${source[i]}${source[i].toUpperCase()}]`;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\t\tif (flags.m) {\n\t\t\tif (source[i] === \"^\") {\n\t\t\t\tpattern += `(^|(?<=[\\r\\n]))`;\n\t\t\t\tcontinue;\n\t\t\t} else if (source[i] === \"$\") {\n\t\t\t\tpattern += `($|(?=[\\r\\n]))`;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\t\tif (flags.s && source[i] === \".\") {\n\t\t\tpattern += inCharGroup ? `${source[i]}\\r\\n` : `[${source[i]}\\r\\n]`;\n\t\t\tcontinue;\n\t\t}\n\t\tpattern += source[i];\n\t\tif (source[i] === \"\\\\\") isEscaped = true;\n\t\telse if (inCharGroup && source[i] === \"]\") inCharGroup = false;\n\t\telse if (!inCharGroup && source[i] === \"[\") inCharGroup = true;\n\t}\n\ttry {\n\t\tnew RegExp(pattern);\n\t} catch {\n\t\tconsole.warn(`Could not convert regex pattern at ${refs.currentPath.join(\"/\")} to a flag-independent form! Falling back to the flag-ignorant source`);\n\t\treturn regex.source;\n\t}\n\treturn pattern;\n}\n\n//#endregion\n\n//# sourceMappingURL=string.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvc3RyaW5nLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnRTs7QUFFaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLEdBQUc7QUFDdkI7QUFDQSw0QkFBNEIsR0FBRztBQUMvQixxR0FBcUcsR0FBRztBQUN4RztBQUNBLHdEQUF3RCxzQkFBc0IsS0FBSyxnQkFBZ0I7QUFDbkc7QUFDQSxFQUFFO0FBQ0YscUJBQXFCLEVBQUUsZUFBZSxFQUFFLGVBQWUsRUFBRSxlQUFlLEVBQUUsZUFBZSxHQUFHO0FBQzVGLG9FQUFvRSxFQUFFO0FBQ3RFLHdFQUF3RSxFQUFFO0FBQzFFLG9CQUFvQixJQUFJLEdBQUcsRUFBRSxhQUFhLElBQUksR0FBRyxJQUFJLFdBQVcsSUFBSSxHQUFHLEVBQUUsV0FBVyxJQUFJLEdBQUcsSUFBSSxXQUFXLElBQUksR0FBRyxFQUFFLFdBQVcsSUFBSSxHQUFHLElBQUksV0FBVyxJQUFJLEdBQUcsRUFBRSxXQUFXLElBQUksR0FBRyxJQUFJLFdBQVcsSUFBSSxHQUFHLEVBQUUsV0FBVyxJQUFJLEdBQUcsSUFBSSxXQUFXLElBQUksR0FBRyxFQUFFLFdBQVcsSUFBSSxHQUFHLElBQUksV0FBVyxJQUFJLG1DQUFtQyxFQUFFLFNBQVMsSUFBSSxNQUFNLEVBQUUsaUNBQWlDLEVBQUUsU0FBUyxJQUFJO0FBQ2hZLDJCQUEyQixJQUFJLEdBQUcsSUFBSSxZQUFZLElBQUksY0FBYyxJQUFJLEdBQUcsSUFBSSxlQUFlLElBQUksR0FBRyxJQUFJLGFBQWEsSUFBSSxjQUFjLElBQUksR0FBRyxJQUFJLGNBQWMsSUFBSSxFQUFFLElBQUksY0FBYyxJQUFJLEdBQUcsSUFBSSxjQUFjLElBQUksRUFBRSxJQUFJLGNBQWMsSUFBSSxHQUFHLElBQUksY0FBYyxJQUFJLEVBQUUsSUFBSSxjQUFjLElBQUksR0FBRyxJQUFJLGNBQWMsSUFBSSxFQUFFLElBQUksYUFBYSxJQUFJLGdCQUFnQixJQUFJLEVBQUUsSUFBSSxrQkFBa0IsSUFBSSxFQUFFLElBQUksdUJBQXVCLElBQUksRUFBRSxJQUFJLGFBQWEsR0FBRyxZQUFZLElBQUksRUFBRSxJQUFJLEdBQUcsSUFBSSxvQkFBb0IsSUFBSSxPQUFPLElBQUksVUFBVSxJQUFJLG1CQUFtQixJQUFJLE9BQU8sSUFBSSxvQkFBb0IsSUFBSSxHQUFHLElBQUkscUJBQXFCLElBQUksT0FBTyxJQUFJLFVBQVUsSUFBSSxtQkFBbUIsSUFBSSxPQUFPLElBQUk7QUFDenBCLDBCQUEwQixFQUFFLGtCQUFrQixFQUFFLG1CQUFtQixFQUFFO0FBQ3JFLDZCQUE2QixFQUFFLGtCQUFrQixFQUFFLHNCQUFzQixFQUFFO0FBQzNFLHlCQUF5QixHQUFHO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0EsR0FBRyw0RUFBeUI7QUFDNUI7QUFDQTtBQUNBLEdBQUcsNEVBQXlCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QiwyQ0FBMkM7QUFDekU7QUFDQTtBQUNBLDZCQUE2QiwyQ0FBMkM7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsNEVBQXlCO0FBQzVCLEdBQUcsNEVBQXlCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssNEVBQXlCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLG1CQUFtQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELGdCQUFnQjtBQUN0RSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxnQkFBZ0I7QUFDekQsR0FBRztBQUNILEdBQUcsS0FBSyw0RUFBeUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsZ0JBQWdCO0FBQ3RFLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLGdCQUFnQjtBQUN6RCxHQUFHO0FBQ0gsR0FBRyxLQUFLLDRFQUF5QjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixtQkFBbUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsY0FBYyxHQUFHLFVBQVU7QUFDL0M7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU8sbUJBQW1CLFVBQVUsRUFBRSx3QkFBd0I7QUFDOUQ7QUFDQTtBQUNBLEtBQUs7QUFDTCxtQkFBbUIsVUFBVSxFQUFFLHdCQUF3QjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLFVBQVUsWUFBWSxVQUFVO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxxREFBcUQsNEJBQTRCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3VDO0FBQ3ZDIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvc3RyaW5nLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3N0cmluZy50c1xubGV0IGVtb2ppUmVnZXggPSB2b2lkIDA7XG4vKipcbiogR2VuZXJhdGVkIGZyb20gdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbnMgZm91bmQgaGVyZSBhcyBvZiAyMDI0LTA1LTIyOlxuKiBodHRwczovL2dpdGh1Yi5jb20vY29saW5oYWNrcy96b2QvYmxvYi9tYXN0ZXIvc3JjL3R5cGVzLnRzLlxuKlxuKiBFeHByZXNzaW9ucyB3aXRoIC9pIGZsYWcgaGF2ZSBiZWVuIGNoYW5nZWQgYWNjb3JkaW5nbHkuXG4qL1xuY29uc3Qgem9kUGF0dGVybnMgPSB7XG5cdGN1aWQ6IC9eW2NDXVteXFxzLV17OCx9JC8sXG5cdGN1aWQyOiAvXlswLTlhLXpdKyQvLFxuXHR1bGlkOiAvXlswLTlBLUhKS01OUC1UVi1aXXsyNn0kLyxcblx0ZW1haWw6IC9eKD8hXFwuKSg/IS4qXFwuXFwuKShbYS16QS1aMC05XycrXFwtXFwuXSopW2EtekEtWjAtOV8rLV1AKFthLXpBLVowLTldW2EtekEtWjAtOVxcLV0qXFwuKStbYS16QS1aXXsyLH0kLyxcblx0ZW1vamk6ICgpID0+IHtcblx0XHRpZiAoZW1vamlSZWdleCA9PT0gdm9pZCAwKSBlbW9qaVJlZ2V4ID0gUmVnRXhwKFwiXihcXFxccHtFeHRlbmRlZF9QaWN0b2dyYXBoaWN9fFxcXFxwe0Vtb2ppX0NvbXBvbmVudH0pKyRcIiwgXCJ1XCIpO1xuXHRcdHJldHVybiBlbW9qaVJlZ2V4O1xuXHR9LFxuXHR1dWlkOiAvXlswLTlhLWZBLUZdezh9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezEyfSQvLFxuXHRpcHY0OiAvXig/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSlcXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKSQvLFxuXHRpcHY0Q2lkcjogL14oPzooPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSlcXC8oM1swLTJdfFsxMl0/WzAtOV0pJC8sXG5cdGlwdjY6IC9eKChbYS1mMC05XXsxLDR9Oil7N318OjooW2EtZjAtOV17MSw0fTopezAsNn18KFthLWYwLTldezEsNH06KXsxfTooW2EtZjAtOV17MSw0fTopezAsNX18KFthLWYwLTldezEsNH06KXsyfTooW2EtZjAtOV17MSw0fTopezAsNH18KFthLWYwLTldezEsNH06KXszfTooW2EtZjAtOV17MSw0fTopezAsM318KFthLWYwLTldezEsNH06KXs0fTooW2EtZjAtOV17MSw0fTopezAsMn18KFthLWYwLTldezEsNH06KXs1fTooW2EtZjAtOV17MSw0fTopezAsMX0pKFthLWYwLTldezEsNH18KCgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFwuKXszfSgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpKSQvLFxuXHRpcHY2Q2lkcjogL14oKFswLTlhLWZBLUZdezEsNH06KXs3LDd9WzAtOWEtZkEtRl17MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsN306fChbMC05YS1mQS1GXXsxLDR9Oil7MSw2fTpbMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw1fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwyfXwoWzAtOWEtZkEtRl17MSw0fTopezEsNH0oOlswLTlhLWZBLUZdezEsNH0pezEsM318KFswLTlhLWZBLUZdezEsNH06KXsxLDN9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSwyfSg6WzAtOWEtZkEtRl17MSw0fSl7MSw1fXxbMC05YS1mQS1GXXsxLDR9OigoOlswLTlhLWZBLUZdezEsNH0pezEsNn0pfDooKDpbMC05YS1mQS1GXXsxLDR9KXsxLDd9fDopfGZlODA6KDpbMC05YS1mQS1GXXswLDR9KXswLDR9JVswLTlhLXpBLVpdezEsfXw6OihmZmZmKDowezEsNH0pezAsMX06KXswLDF9KCgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSlcXC4pezMsM30oMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pfChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fTooKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSkpXFwvKDEyWzAtOF18MVswMV1bMC05XXxbMS05XT9bMC05XSkkLyxcblx0YmFzZTY0OiAvXihbMC05YS16QS1aKy9dezR9KSooKFswLTlhLXpBLVorL117Mn09PSl8KFswLTlhLXpBLVorL117M309KSk/JC8sXG5cdGJhc2U2NHVybDogL14oWzAtOWEtekEtWi1fXXs0fSkqKChbMC05YS16QS1aLV9dezJ9KD09KT8pfChbMC05YS16QS1aLV9dezN9KD0pPykpPyQvLFxuXHRuYW5vaWQ6IC9eW2EtekEtWjAtOV8tXXsyMX0kLyxcblx0and0OiAvXltBLVphLXowLTktX10rXFwuW0EtWmEtejAtOS1fXStcXC5bQS1aYS16MC05LV9dKiQvXG59O1xuZnVuY3Rpb24gcGFyc2VTdHJpbmdEZWYoZGVmLCByZWZzKSB7XG5cdGNvbnN0IHJlcyA9IHsgdHlwZTogXCJzdHJpbmdcIiB9O1xuXHRpZiAoZGVmLmNoZWNrcykgZm9yIChjb25zdCBjaGVjayBvZiBkZWYuY2hlY2tzKSBzd2l0Y2ggKGNoZWNrLmtpbmQpIHtcblx0XHRjYXNlIFwibWluXCI6XG5cdFx0XHRzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgXCJtaW5MZW5ndGhcIiwgdHlwZW9mIHJlcy5taW5MZW5ndGggPT09IFwibnVtYmVyXCIgPyBNYXRoLm1heChyZXMubWluTGVuZ3RoLCBjaGVjay52YWx1ZSkgOiBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwibWF4XCI6XG5cdFx0XHRzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgXCJtYXhMZW5ndGhcIiwgdHlwZW9mIHJlcy5tYXhMZW5ndGggPT09IFwibnVtYmVyXCIgPyBNYXRoLm1pbihyZXMubWF4TGVuZ3RoLCBjaGVjay52YWx1ZSkgOiBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwiZW1haWxcIjpcblx0XHRcdHN3aXRjaCAocmVmcy5lbWFpbFN0cmF0ZWd5KSB7XG5cdFx0XHRcdGNhc2UgXCJmb3JtYXQ6ZW1haWxcIjpcblx0XHRcdFx0XHRhZGRGb3JtYXQocmVzLCBcImVtYWlsXCIsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwiZm9ybWF0Omlkbi1lbWFpbFwiOlxuXHRcdFx0XHRcdGFkZEZvcm1hdChyZXMsIFwiaWRuLWVtYWlsXCIsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwicGF0dGVybjp6b2RcIjpcblx0XHRcdFx0XHRhZGRQYXR0ZXJuKHJlcywgem9kUGF0dGVybnMuZW1haWwsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcInVybFwiOlxuXHRcdFx0YWRkRm9ybWF0KHJlcywgXCJ1cmlcIiwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwidXVpZFwiOlxuXHRcdFx0YWRkRm9ybWF0KHJlcywgXCJ1dWlkXCIsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcInJlZ2V4XCI6XG5cdFx0XHRhZGRQYXR0ZXJuKHJlcywgY2hlY2sucmVnZXgsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcImN1aWRcIjpcblx0XHRcdGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5jdWlkLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJjdWlkMlwiOlxuXHRcdFx0YWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLmN1aWQyLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJzdGFydHNXaXRoXCI6XG5cdFx0XHRhZGRQYXR0ZXJuKHJlcywgUmVnRXhwKGBeJHtlc2NhcGVMaXRlcmFsQ2hlY2tWYWx1ZShjaGVjay52YWx1ZSwgcmVmcyl9YCksIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcImVuZHNXaXRoXCI6XG5cdFx0XHRhZGRQYXR0ZXJuKHJlcywgUmVnRXhwKGAke2VzY2FwZUxpdGVyYWxDaGVja1ZhbHVlKGNoZWNrLnZhbHVlLCByZWZzKX0kYCksIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcImRhdGV0aW1lXCI6XG5cdFx0XHRhZGRGb3JtYXQocmVzLCBcImRhdGUtdGltZVwiLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJkYXRlXCI6XG5cdFx0XHRhZGRGb3JtYXQocmVzLCBcImRhdGVcIiwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwidGltZVwiOlxuXHRcdFx0YWRkRm9ybWF0KHJlcywgXCJ0aW1lXCIsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcImR1cmF0aW9uXCI6XG5cdFx0XHRhZGRGb3JtYXQocmVzLCBcImR1cmF0aW9uXCIsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcImxlbmd0aFwiOlxuXHRcdFx0c2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsIFwibWluTGVuZ3RoXCIsIHR5cGVvZiByZXMubWluTGVuZ3RoID09PSBcIm51bWJlclwiID8gTWF0aC5tYXgocmVzLm1pbkxlbmd0aCwgY2hlY2sudmFsdWUpIDogY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuXHRcdFx0c2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsIFwibWF4TGVuZ3RoXCIsIHR5cGVvZiByZXMubWF4TGVuZ3RoID09PSBcIm51bWJlclwiID8gTWF0aC5taW4ocmVzLm1heExlbmd0aCwgY2hlY2sudmFsdWUpIDogY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcImluY2x1ZGVzXCI6XG5cdFx0XHRhZGRQYXR0ZXJuKHJlcywgUmVnRXhwKGVzY2FwZUxpdGVyYWxDaGVja1ZhbHVlKGNoZWNrLnZhbHVlLCByZWZzKSksIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcImlwXCI6XG5cdFx0XHRpZiAoY2hlY2sudmVyc2lvbiAhPT0gXCJ2NlwiKSBhZGRGb3JtYXQocmVzLCBcImlwdjRcIiwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG5cdFx0XHRpZiAoY2hlY2sudmVyc2lvbiAhPT0gXCJ2NFwiKSBhZGRGb3JtYXQocmVzLCBcImlwdjZcIiwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwiYmFzZTY0dXJsXCI6XG5cdFx0XHRhZGRQYXR0ZXJuKHJlcywgem9kUGF0dGVybnMuYmFzZTY0dXJsLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJqd3RcIjpcblx0XHRcdGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5qd3QsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcImNpZHJcIjpcblx0XHRcdGlmIChjaGVjay52ZXJzaW9uICE9PSBcInY2XCIpIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5pcHY0Q2lkciwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG5cdFx0XHRpZiAoY2hlY2sudmVyc2lvbiAhPT0gXCJ2NFwiKSBhZGRQYXR0ZXJuKHJlcywgem9kUGF0dGVybnMuaXB2NkNpZHIsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcImVtb2ppXCI6XG5cdFx0XHRhZGRQYXR0ZXJuKHJlcywgem9kUGF0dGVybnMuZW1vamkoKSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwidWxpZFwiOlxuXHRcdFx0YWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLnVsaWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcImJhc2U2NFwiOlxuXHRcdFx0c3dpdGNoIChyZWZzLmJhc2U2NFN0cmF0ZWd5KSB7XG5cdFx0XHRcdGNhc2UgXCJmb3JtYXQ6YmluYXJ5XCI6XG5cdFx0XHRcdFx0YWRkRm9ybWF0KHJlcywgXCJiaW5hcnlcIiwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJjb250ZW50RW5jb2Rpbmc6YmFzZTY0XCI6XG5cdFx0XHRcdFx0c2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsIFwiY29udGVudEVuY29kaW5nXCIsIFwiYmFzZTY0XCIsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwicGF0dGVybjp6b2RcIjpcblx0XHRcdFx0XHRhZGRQYXR0ZXJuKHJlcywgem9kUGF0dGVybnMuYmFzZTY0LCBjaGVjay5tZXNzYWdlLCByZWZzKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJuYW5vaWRcIjpcblx0XHRcdGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5uYW5vaWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcInRvTG93ZXJDYXNlXCI6XG5cdFx0Y2FzZSBcInRvVXBwZXJDYXNlXCI6XG5cdFx0Y2FzZSBcInRyaW1cIjogYnJlYWs7XG5cdFx0ZGVmYXVsdDpcbiAvKiBjOCBpZ25vcmUgbmV4dCAqL1xuXHRcdCgoXykgPT4ge30pKGNoZWNrKTtcblx0fVxuXHRyZXR1cm4gcmVzO1xufVxuZnVuY3Rpb24gZXNjYXBlTGl0ZXJhbENoZWNrVmFsdWUobGl0ZXJhbCwgcmVmcykge1xuXHRyZXR1cm4gcmVmcy5wYXR0ZXJuU3RyYXRlZ3kgPT09IFwiZXNjYXBlXCIgPyBlc2NhcGVOb25BbHBoYU51bWVyaWMobGl0ZXJhbCkgOiBsaXRlcmFsO1xufVxuY29uc3QgQUxQSEFfTlVNRVJJQyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVlhZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ4eXowMTIzNDU2Nzg5XCIpO1xuZnVuY3Rpb24gZXNjYXBlTm9uQWxwaGFOdW1lcmljKHNvdXJjZSkge1xuXHRsZXQgcmVzdWx0ID0gXCJcIjtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBzb3VyY2UubGVuZ3RoOyBpKyspIHtcblx0XHRpZiAoIUFMUEhBX05VTUVSSUMuaGFzKHNvdXJjZVtpXSkpIHJlc3VsdCArPSBcIlxcXFxcIjtcblx0XHRyZXN1bHQgKz0gc291cmNlW2ldO1xuXHR9XG5cdHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBhZGRGb3JtYXQoc2NoZW1hLCB2YWx1ZSwgbWVzc2FnZSwgcmVmcykge1xuXHRpZiAoc2NoZW1hLmZvcm1hdCB8fCBzY2hlbWEuYW55T2Y/LnNvbWUoKHgpID0+IHguZm9ybWF0KSkge1xuXHRcdGlmICghc2NoZW1hLmFueU9mKSBzY2hlbWEuYW55T2YgPSBbXTtcblx0XHRpZiAoc2NoZW1hLmZvcm1hdCkge1xuXHRcdFx0c2NoZW1hLmFueU9mLnB1c2goe1xuXHRcdFx0XHRmb3JtYXQ6IHNjaGVtYS5mb3JtYXQsXG5cdFx0XHRcdC4uLnNjaGVtYS5lcnJvck1lc3NhZ2UgJiYgcmVmcy5lcnJvck1lc3NhZ2VzICYmIHsgZXJyb3JNZXNzYWdlOiB7IGZvcm1hdDogc2NoZW1hLmVycm9yTWVzc2FnZS5mb3JtYXQgfSB9XG5cdFx0XHR9KTtcblx0XHRcdGRlbGV0ZSBzY2hlbWEuZm9ybWF0O1xuXHRcdFx0aWYgKHNjaGVtYS5lcnJvck1lc3NhZ2UpIHtcblx0XHRcdFx0ZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2UuZm9ybWF0O1xuXHRcdFx0XHRpZiAoT2JqZWN0LmtleXMoc2NoZW1hLmVycm9yTWVzc2FnZSkubGVuZ3RoID09PSAwKSBkZWxldGUgc2NoZW1hLmVycm9yTWVzc2FnZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0c2NoZW1hLmFueU9mLnB1c2goe1xuXHRcdFx0Zm9ybWF0OiB2YWx1ZSxcblx0XHRcdC4uLm1lc3NhZ2UgJiYgcmVmcy5lcnJvck1lc3NhZ2VzICYmIHsgZXJyb3JNZXNzYWdlOiB7IGZvcm1hdDogbWVzc2FnZSB9IH1cblx0XHR9KTtcblx0fSBlbHNlIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMoc2NoZW1hLCBcImZvcm1hdFwiLCB2YWx1ZSwgbWVzc2FnZSwgcmVmcyk7XG59XG5mdW5jdGlvbiBhZGRQYXR0ZXJuKHNjaGVtYSwgcmVnZXgsIG1lc3NhZ2UsIHJlZnMpIHtcblx0aWYgKHNjaGVtYS5wYXR0ZXJuIHx8IHNjaGVtYS5hbGxPZj8uc29tZSgoeCkgPT4geC5wYXR0ZXJuKSkge1xuXHRcdGlmICghc2NoZW1hLmFsbE9mKSBzY2hlbWEuYWxsT2YgPSBbXTtcblx0XHRpZiAoc2NoZW1hLnBhdHRlcm4pIHtcblx0XHRcdHNjaGVtYS5hbGxPZi5wdXNoKHtcblx0XHRcdFx0cGF0dGVybjogc2NoZW1hLnBhdHRlcm4sXG5cdFx0XHRcdC4uLnNjaGVtYS5lcnJvck1lc3NhZ2UgJiYgcmVmcy5lcnJvck1lc3NhZ2VzICYmIHsgZXJyb3JNZXNzYWdlOiB7IHBhdHRlcm46IHNjaGVtYS5lcnJvck1lc3NhZ2UucGF0dGVybiB9IH1cblx0XHRcdH0pO1xuXHRcdFx0ZGVsZXRlIHNjaGVtYS5wYXR0ZXJuO1xuXHRcdFx0aWYgKHNjaGVtYS5lcnJvck1lc3NhZ2UpIHtcblx0XHRcdFx0ZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2UucGF0dGVybjtcblx0XHRcdFx0aWYgKE9iamVjdC5rZXlzKHNjaGVtYS5lcnJvck1lc3NhZ2UpLmxlbmd0aCA9PT0gMCkgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2U7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHNjaGVtYS5hbGxPZi5wdXNoKHtcblx0XHRcdHBhdHRlcm46IHN0cmluZ2lmeVJlZ0V4cFdpdGhGbGFncyhyZWdleCwgcmVmcyksXG5cdFx0XHQuLi5tZXNzYWdlICYmIHJlZnMuZXJyb3JNZXNzYWdlcyAmJiB7IGVycm9yTWVzc2FnZTogeyBwYXR0ZXJuOiBtZXNzYWdlIH0gfVxuXHRcdH0pO1xuXHR9IGVsc2Ugc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhzY2hlbWEsIFwicGF0dGVyblwiLCBzdHJpbmdpZnlSZWdFeHBXaXRoRmxhZ3MocmVnZXgsIHJlZnMpLCBtZXNzYWdlLCByZWZzKTtcbn1cbmZ1bmN0aW9uIHN0cmluZ2lmeVJlZ0V4cFdpdGhGbGFncyhyZWdleCwgcmVmcykge1xuXHRpZiAoIXJlZnMuYXBwbHlSZWdleEZsYWdzIHx8ICFyZWdleC5mbGFncykgcmV0dXJuIHJlZ2V4LnNvdXJjZTtcblx0Y29uc3QgZmxhZ3MgPSB7XG5cdFx0aTogcmVnZXguZmxhZ3MuaW5jbHVkZXMoXCJpXCIpLFxuXHRcdG06IHJlZ2V4LmZsYWdzLmluY2x1ZGVzKFwibVwiKSxcblx0XHRzOiByZWdleC5mbGFncy5pbmNsdWRlcyhcInNcIilcblx0fTtcblx0Y29uc3Qgc291cmNlID0gZmxhZ3MuaSA/IHJlZ2V4LnNvdXJjZS50b0xvd2VyQ2FzZSgpIDogcmVnZXguc291cmNlO1xuXHRsZXQgcGF0dGVybiA9IFwiXCI7XG5cdGxldCBpc0VzY2FwZWQgPSBmYWxzZTtcblx0bGV0IGluQ2hhckdyb3VwID0gZmFsc2U7XG5cdGxldCBpbkNoYXJSYW5nZSA9IGZhbHNlO1xuXHRmb3IgKGxldCBpID0gMDsgaSA8IHNvdXJjZS5sZW5ndGg7IGkrKykge1xuXHRcdGlmIChpc0VzY2FwZWQpIHtcblx0XHRcdHBhdHRlcm4gKz0gc291cmNlW2ldO1xuXHRcdFx0aXNFc2NhcGVkID0gZmFsc2U7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0aWYgKGZsYWdzLmkpIHtcblx0XHRcdGlmIChpbkNoYXJHcm91cCkge1xuXHRcdFx0XHRpZiAoc291cmNlW2ldLm1hdGNoKC9bYS16XS8pKSB7XG5cdFx0XHRcdFx0aWYgKGluQ2hhclJhbmdlKSB7XG5cdFx0XHRcdFx0XHRwYXR0ZXJuICs9IHNvdXJjZVtpXTtcblx0XHRcdFx0XHRcdHBhdHRlcm4gKz0gYCR7c291cmNlW2kgLSAyXX0tJHtzb3VyY2VbaV19YC50b1VwcGVyQ2FzZSgpO1xuXHRcdFx0XHRcdFx0aW5DaGFyUmFuZ2UgPSBmYWxzZTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKHNvdXJjZVtpICsgMV0gPT09IFwiLVwiICYmIHNvdXJjZVtpICsgMl0/Lm1hdGNoKC9bYS16XS8pKSB7XG5cdFx0XHRcdFx0XHRwYXR0ZXJuICs9IHNvdXJjZVtpXTtcblx0XHRcdFx0XHRcdGluQ2hhclJhbmdlID0gdHJ1ZTtcblx0XHRcdFx0XHR9IGVsc2UgcGF0dGVybiArPSBgJHtzb3VyY2VbaV19JHtzb3VyY2VbaV0udG9VcHBlckNhc2UoKX1gO1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHNvdXJjZVtpXS5tYXRjaCgvW2Etel0vKSkge1xuXHRcdFx0XHRwYXR0ZXJuICs9IGBbJHtzb3VyY2VbaV19JHtzb3VyY2VbaV0udG9VcHBlckNhc2UoKX1dYDtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmIChmbGFncy5tKSB7XG5cdFx0XHRpZiAoc291cmNlW2ldID09PSBcIl5cIikge1xuXHRcdFx0XHRwYXR0ZXJuICs9IGAoXnwoPzw9W1xcclxcbl0pKWA7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fSBlbHNlIGlmIChzb3VyY2VbaV0gPT09IFwiJFwiKSB7XG5cdFx0XHRcdHBhdHRlcm4gKz0gYCgkfCg/PVtcXHJcXG5dKSlgO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKGZsYWdzLnMgJiYgc291cmNlW2ldID09PSBcIi5cIikge1xuXHRcdFx0cGF0dGVybiArPSBpbkNoYXJHcm91cCA/IGAke3NvdXJjZVtpXX1cXHJcXG5gIDogYFske3NvdXJjZVtpXX1cXHJcXG5dYDtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHRwYXR0ZXJuICs9IHNvdXJjZVtpXTtcblx0XHRpZiAoc291cmNlW2ldID09PSBcIlxcXFxcIikgaXNFc2NhcGVkID0gdHJ1ZTtcblx0XHRlbHNlIGlmIChpbkNoYXJHcm91cCAmJiBzb3VyY2VbaV0gPT09IFwiXVwiKSBpbkNoYXJHcm91cCA9IGZhbHNlO1xuXHRcdGVsc2UgaWYgKCFpbkNoYXJHcm91cCAmJiBzb3VyY2VbaV0gPT09IFwiW1wiKSBpbkNoYXJHcm91cCA9IHRydWU7XG5cdH1cblx0dHJ5IHtcblx0XHRuZXcgUmVnRXhwKHBhdHRlcm4pO1xuXHR9IGNhdGNoIHtcblx0XHRjb25zb2xlLndhcm4oYENvdWxkIG5vdCBjb252ZXJ0IHJlZ2V4IHBhdHRlcm4gYXQgJHtyZWZzLmN1cnJlbnRQYXRoLmpvaW4oXCIvXCIpfSB0byBhIGZsYWctaW5kZXBlbmRlbnQgZm9ybSEgRmFsbGluZyBiYWNrIHRvIHRoZSBmbGFnLWlnbm9yYW50IHNvdXJjZWApO1xuXHRcdHJldHVybiByZWdleC5zb3VyY2U7XG5cdH1cblx0cmV0dXJuIHBhdHRlcm47XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgcGFyc2VTdHJpbmdEZWYsIHpvZFBhdHRlcm5zIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdHJpbmcuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/string.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/tuple.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/tuple.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseTupleDef: () => (/* binding */ parseTupleDef)\n/* harmony export */ });\n/* harmony import */ var _parseDef_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../parseDef.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parseDef.js\");\n\n\n//#region src/utils/zod-to-json-schema/parsers/tuple.ts\nfunction parseTupleDef(def, refs) {\n\tif (def.rest) return {\n\t\ttype: \"array\",\n\t\tminItems: def.items.length,\n\t\titems: def.items.map((x, i) => (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_0__.parseDef)(x._def, {\n\t\t\t...refs,\n\t\t\tcurrentPath: [\n\t\t\t\t...refs.currentPath,\n\t\t\t\t\"items\",\n\t\t\t\t`${i}`\n\t\t\t]\n\t\t})).reduce((acc, x) => x === void 0 ? acc : [...acc, x], []),\n\t\tadditionalItems: (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_0__.parseDef)(def.rest._def, {\n\t\t\t...refs,\n\t\t\tcurrentPath: [...refs.currentPath, \"additionalItems\"]\n\t\t})\n\t};\n\telse return {\n\t\ttype: \"array\",\n\t\tminItems: def.items.length,\n\t\tmaxItems: def.items.length,\n\t\titems: def.items.map((x, i) => (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_0__.parseDef)(x._def, {\n\t\t\t...refs,\n\t\t\tcurrentPath: [\n\t\t\t\t...refs.currentPath,\n\t\t\t\t\"items\",\n\t\t\t\t`${i}`\n\t\t\t]\n\t\t})).reduce((acc, x) => x === void 0 ? acc : [...acc, x], [])\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=tuple.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdHVwbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMEM7O0FBRTFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsc0RBQVE7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLEVBQUU7QUFDVDtBQUNBLEdBQUc7QUFDSCxtQkFBbUIsc0RBQVE7QUFDM0I7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLHNEQUFRO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxFQUFFO0FBQ1Q7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUN5QjtBQUN6QiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3R1cGxlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdHVwbGUudHNcbmZ1bmN0aW9uIHBhcnNlVHVwbGVEZWYoZGVmLCByZWZzKSB7XG5cdGlmIChkZWYucmVzdCkgcmV0dXJuIHtcblx0XHR0eXBlOiBcImFycmF5XCIsXG5cdFx0bWluSXRlbXM6IGRlZi5pdGVtcy5sZW5ndGgsXG5cdFx0aXRlbXM6IGRlZi5pdGVtcy5tYXAoKHgsIGkpID0+IHBhcnNlRGVmKHguX2RlZiwge1xuXHRcdFx0Li4ucmVmcyxcblx0XHRcdGN1cnJlbnRQYXRoOiBbXG5cdFx0XHRcdC4uLnJlZnMuY3VycmVudFBhdGgsXG5cdFx0XHRcdFwiaXRlbXNcIixcblx0XHRcdFx0YCR7aX1gXG5cdFx0XHRdXG5cdFx0fSkpLnJlZHVjZSgoYWNjLCB4KSA9PiB4ID09PSB2b2lkIDAgPyBhY2MgOiBbLi4uYWNjLCB4XSwgW10pLFxuXHRcdGFkZGl0aW9uYWxJdGVtczogcGFyc2VEZWYoZGVmLnJlc3QuX2RlZiwge1xuXHRcdFx0Li4ucmVmcyxcblx0XHRcdGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgXCJhZGRpdGlvbmFsSXRlbXNcIl1cblx0XHR9KVxuXHR9O1xuXHRlbHNlIHJldHVybiB7XG5cdFx0dHlwZTogXCJhcnJheVwiLFxuXHRcdG1pbkl0ZW1zOiBkZWYuaXRlbXMubGVuZ3RoLFxuXHRcdG1heEl0ZW1zOiBkZWYuaXRlbXMubGVuZ3RoLFxuXHRcdGl0ZW1zOiBkZWYuaXRlbXMubWFwKCh4LCBpKSA9PiBwYXJzZURlZih4Ll9kZWYsIHtcblx0XHRcdC4uLnJlZnMsXG5cdFx0XHRjdXJyZW50UGF0aDogW1xuXHRcdFx0XHQuLi5yZWZzLmN1cnJlbnRQYXRoLFxuXHRcdFx0XHRcIml0ZW1zXCIsXG5cdFx0XHRcdGAke2l9YFxuXHRcdFx0XVxuXHRcdH0pKS5yZWR1Y2UoKGFjYywgeCkgPT4geCA9PT0gdm9pZCAwID8gYWNjIDogWy4uLmFjYywgeF0sIFtdKVxuXHR9O1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHBhcnNlVHVwbGVEZWYgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXR1cGxlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/tuple.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/undefined.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/undefined.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseUndefinedDef: () => (/* binding */ parseUndefinedDef)\n/* harmony export */ });\n/* harmony import */ var _any_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./any.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/any.js\");\n\n\n//#region src/utils/zod-to-json-schema/parsers/undefined.ts\nfunction parseUndefinedDef(refs) {\n\treturn { not: (0,_any_js__WEBPACK_IMPORTED_MODULE_0__.parseAnyDef)(refs) };\n}\n\n//#endregion\n\n//# sourceMappingURL=undefined.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdW5kZWZpbmVkLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXVDOztBQUV2QztBQUNBO0FBQ0EsVUFBVSxLQUFLLG9EQUFXO0FBQzFCOztBQUVBO0FBQzZCO0FBQzdCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdW5kZWZpbmVkLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlQW55RGVmIH0gZnJvbSBcIi4vYW55LmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdW5kZWZpbmVkLnRzXG5mdW5jdGlvbiBwYXJzZVVuZGVmaW5lZERlZihyZWZzKSB7XG5cdHJldHVybiB7IG5vdDogcGFyc2VBbnlEZWYocmVmcykgfTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBwYXJzZVVuZGVmaW5lZERlZiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dW5kZWZpbmVkLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/undefined.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/union.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/union.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseUnionDef: () => (/* binding */ parseUnionDef),\n/* harmony export */   primitiveMappings: () => (/* binding */ primitiveMappings)\n/* harmony export */ });\n/* harmony import */ var _parseDef_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../parseDef.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parseDef.js\");\n\n\n//#region src/utils/zod-to-json-schema/parsers/union.ts\nconst primitiveMappings = {\n\tZodString: \"string\",\n\tZodNumber: \"number\",\n\tZodBigInt: \"integer\",\n\tZodBoolean: \"boolean\",\n\tZodNull: \"null\"\n};\nfunction parseUnionDef(def, refs) {\n\tif (refs.target === \"openApi3\") return asAnyOf(def, refs);\n\tconst options = def.options instanceof Map ? Array.from(def.options.values()) : def.options;\n\tif (options.every((x) => x._def.typeName in primitiveMappings && (!x._def.checks || !x._def.checks.length))) {\n\t\tconst types = options.reduce((types$1, x) => {\n\t\t\tconst type = primitiveMappings[x._def.typeName];\n\t\t\treturn type && !types$1.includes(type) ? [...types$1, type] : types$1;\n\t\t}, []);\n\t\treturn { type: types.length > 1 ? types : types[0] };\n\t} else if (options.every((x) => x._def.typeName === \"ZodLiteral\" && !x.description)) {\n\t\tconst types = options.reduce((acc, x) => {\n\t\t\tconst type = typeof x._def.value;\n\t\t\tswitch (type) {\n\t\t\t\tcase \"string\":\n\t\t\t\tcase \"number\":\n\t\t\t\tcase \"boolean\": return [...acc, type];\n\t\t\t\tcase \"bigint\": return [...acc, \"integer\"];\n\t\t\t\tcase \"object\":\n\t\t\t\t\tif (x._def.value === null) return [...acc, \"null\"];\n\t\t\t\t\treturn acc;\n\t\t\t\tcase \"symbol\":\n\t\t\t\tcase \"undefined\":\n\t\t\t\tcase \"function\":\n\t\t\t\tdefault: return acc;\n\t\t\t}\n\t\t}, []);\n\t\tif (types.length === options.length) {\n\t\t\tconst uniqueTypes = types.filter((x, i, a) => a.indexOf(x) === i);\n\t\t\treturn {\n\t\t\t\ttype: uniqueTypes.length > 1 ? uniqueTypes : uniqueTypes[0],\n\t\t\t\tenum: options.reduce((acc, x) => {\n\t\t\t\t\treturn acc.includes(x._def.value) ? acc : [...acc, x._def.value];\n\t\t\t\t}, [])\n\t\t\t};\n\t\t}\n\t} else if (options.every((x) => x._def.typeName === \"ZodEnum\")) return {\n\t\ttype: \"string\",\n\t\tenum: options.reduce((acc, x) => [...acc, ...x._def.values.filter((x$1) => !acc.includes(x$1))], [])\n\t};\n\treturn asAnyOf(def, refs);\n}\nconst asAnyOf = (def, refs) => {\n\tconst anyOf = (def.options instanceof Map ? Array.from(def.options.values()) : def.options).map((x, i) => (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_0__.parseDef)(x._def, {\n\t\t...refs,\n\t\tcurrentPath: [\n\t\t\t...refs.currentPath,\n\t\t\t\"anyOf\",\n\t\t\t`${i}`\n\t\t]\n\t})).filter((x) => !!x && (!refs.strictUnions || typeof x === \"object\" && Object.keys(x).length > 0));\n\treturn anyOf.length ? { anyOf } : void 0;\n};\n\n//#endregion\n\n//# sourceMappingURL=union.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdW5pb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTBDOztBQUUxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsV0FBVztBQUNYLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkdBQTJHLHNEQUFRO0FBQ25IO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxFQUFFO0FBQ1I7QUFDQSxFQUFFO0FBQ0YseUJBQXlCLFFBQVE7QUFDakM7O0FBRUE7QUFDNEM7QUFDNUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy91bmlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3VuaW9uLnRzXG5jb25zdCBwcmltaXRpdmVNYXBwaW5ncyA9IHtcblx0Wm9kU3RyaW5nOiBcInN0cmluZ1wiLFxuXHRab2ROdW1iZXI6IFwibnVtYmVyXCIsXG5cdFpvZEJpZ0ludDogXCJpbnRlZ2VyXCIsXG5cdFpvZEJvb2xlYW46IFwiYm9vbGVhblwiLFxuXHRab2ROdWxsOiBcIm51bGxcIlxufTtcbmZ1bmN0aW9uIHBhcnNlVW5pb25EZWYoZGVmLCByZWZzKSB7XG5cdGlmIChyZWZzLnRhcmdldCA9PT0gXCJvcGVuQXBpM1wiKSByZXR1cm4gYXNBbnlPZihkZWYsIHJlZnMpO1xuXHRjb25zdCBvcHRpb25zID0gZGVmLm9wdGlvbnMgaW5zdGFuY2VvZiBNYXAgPyBBcnJheS5mcm9tKGRlZi5vcHRpb25zLnZhbHVlcygpKSA6IGRlZi5vcHRpb25zO1xuXHRpZiAob3B0aW9ucy5ldmVyeSgoeCkgPT4geC5fZGVmLnR5cGVOYW1lIGluIHByaW1pdGl2ZU1hcHBpbmdzICYmICgheC5fZGVmLmNoZWNrcyB8fCAheC5fZGVmLmNoZWNrcy5sZW5ndGgpKSkge1xuXHRcdGNvbnN0IHR5cGVzID0gb3B0aW9ucy5yZWR1Y2UoKHR5cGVzJDEsIHgpID0+IHtcblx0XHRcdGNvbnN0IHR5cGUgPSBwcmltaXRpdmVNYXBwaW5nc1t4Ll9kZWYudHlwZU5hbWVdO1xuXHRcdFx0cmV0dXJuIHR5cGUgJiYgIXR5cGVzJDEuaW5jbHVkZXModHlwZSkgPyBbLi4udHlwZXMkMSwgdHlwZV0gOiB0eXBlcyQxO1xuXHRcdH0sIFtdKTtcblx0XHRyZXR1cm4geyB0eXBlOiB0eXBlcy5sZW5ndGggPiAxID8gdHlwZXMgOiB0eXBlc1swXSB9O1xuXHR9IGVsc2UgaWYgKG9wdGlvbnMuZXZlcnkoKHgpID0+IHguX2RlZi50eXBlTmFtZSA9PT0gXCJab2RMaXRlcmFsXCIgJiYgIXguZGVzY3JpcHRpb24pKSB7XG5cdFx0Y29uc3QgdHlwZXMgPSBvcHRpb25zLnJlZHVjZSgoYWNjLCB4KSA9PiB7XG5cdFx0XHRjb25zdCB0eXBlID0gdHlwZW9mIHguX2RlZi52YWx1ZTtcblx0XHRcdHN3aXRjaCAodHlwZSkge1xuXHRcdFx0XHRjYXNlIFwic3RyaW5nXCI6XG5cdFx0XHRcdGNhc2UgXCJudW1iZXJcIjpcblx0XHRcdFx0Y2FzZSBcImJvb2xlYW5cIjogcmV0dXJuIFsuLi5hY2MsIHR5cGVdO1xuXHRcdFx0XHRjYXNlIFwiYmlnaW50XCI6IHJldHVybiBbLi4uYWNjLCBcImludGVnZXJcIl07XG5cdFx0XHRcdGNhc2UgXCJvYmplY3RcIjpcblx0XHRcdFx0XHRpZiAoeC5fZGVmLnZhbHVlID09PSBudWxsKSByZXR1cm4gWy4uLmFjYywgXCJudWxsXCJdO1xuXHRcdFx0XHRcdHJldHVybiBhY2M7XG5cdFx0XHRcdGNhc2UgXCJzeW1ib2xcIjpcblx0XHRcdFx0Y2FzZSBcInVuZGVmaW5lZFwiOlxuXHRcdFx0XHRjYXNlIFwiZnVuY3Rpb25cIjpcblx0XHRcdFx0ZGVmYXVsdDogcmV0dXJuIGFjYztcblx0XHRcdH1cblx0XHR9LCBbXSk7XG5cdFx0aWYgKHR5cGVzLmxlbmd0aCA9PT0gb3B0aW9ucy5sZW5ndGgpIHtcblx0XHRcdGNvbnN0IHVuaXF1ZVR5cGVzID0gdHlwZXMuZmlsdGVyKCh4LCBpLCBhKSA9PiBhLmluZGV4T2YoeCkgPT09IGkpO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0dHlwZTogdW5pcXVlVHlwZXMubGVuZ3RoID4gMSA/IHVuaXF1ZVR5cGVzIDogdW5pcXVlVHlwZXNbMF0sXG5cdFx0XHRcdGVudW06IG9wdGlvbnMucmVkdWNlKChhY2MsIHgpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gYWNjLmluY2x1ZGVzKHguX2RlZi52YWx1ZSkgPyBhY2MgOiBbLi4uYWNjLCB4Ll9kZWYudmFsdWVdO1xuXHRcdFx0XHR9LCBbXSlcblx0XHRcdH07XG5cdFx0fVxuXHR9IGVsc2UgaWYgKG9wdGlvbnMuZXZlcnkoKHgpID0+IHguX2RlZi50eXBlTmFtZSA9PT0gXCJab2RFbnVtXCIpKSByZXR1cm4ge1xuXHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0ZW51bTogb3B0aW9ucy5yZWR1Y2UoKGFjYywgeCkgPT4gWy4uLmFjYywgLi4ueC5fZGVmLnZhbHVlcy5maWx0ZXIoKHgkMSkgPT4gIWFjYy5pbmNsdWRlcyh4JDEpKV0sIFtdKVxuXHR9O1xuXHRyZXR1cm4gYXNBbnlPZihkZWYsIHJlZnMpO1xufVxuY29uc3QgYXNBbnlPZiA9IChkZWYsIHJlZnMpID0+IHtcblx0Y29uc3QgYW55T2YgPSAoZGVmLm9wdGlvbnMgaW5zdGFuY2VvZiBNYXAgPyBBcnJheS5mcm9tKGRlZi5vcHRpb25zLnZhbHVlcygpKSA6IGRlZi5vcHRpb25zKS5tYXAoKHgsIGkpID0+IHBhcnNlRGVmKHguX2RlZiwge1xuXHRcdC4uLnJlZnMsXG5cdFx0Y3VycmVudFBhdGg6IFtcblx0XHRcdC4uLnJlZnMuY3VycmVudFBhdGgsXG5cdFx0XHRcImFueU9mXCIsXG5cdFx0XHRgJHtpfWBcblx0XHRdXG5cdH0pKS5maWx0ZXIoKHgpID0+ICEheCAmJiAoIXJlZnMuc3RyaWN0VW5pb25zIHx8IHR5cGVvZiB4ID09PSBcIm9iamVjdFwiICYmIE9iamVjdC5rZXlzKHgpLmxlbmd0aCA+IDApKTtcblx0cmV0dXJuIGFueU9mLmxlbmd0aCA/IHsgYW55T2YgfSA6IHZvaWQgMDtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgcGFyc2VVbmlvbkRlZiwgcHJpbWl0aXZlTWFwcGluZ3MgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVuaW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/union.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/unknown.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/unknown.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseUnknownDef: () => (/* binding */ parseUnknownDef)\n/* harmony export */ });\n/* harmony import */ var _any_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./any.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/any.js\");\n\n\n//#region src/utils/zod-to-json-schema/parsers/unknown.ts\nfunction parseUnknownDef(refs) {\n\treturn (0,_any_js__WEBPACK_IMPORTED_MODULE_0__.parseAnyDef)(refs);\n}\n\n//#endregion\n\n//# sourceMappingURL=unknown.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdW5rbm93bi5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF1Qzs7QUFFdkM7QUFDQTtBQUNBLFFBQVEsb0RBQVc7QUFDbkI7O0FBRUE7QUFDMkI7QUFDM0IiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy91bmtub3duLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlQW55RGVmIH0gZnJvbSBcIi4vYW55LmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdW5rbm93bi50c1xuZnVuY3Rpb24gcGFyc2VVbmtub3duRGVmKHJlZnMpIHtcblx0cmV0dXJuIHBhcnNlQW55RGVmKHJlZnMpO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHBhcnNlVW5rbm93bkRlZiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dW5rbm93bi5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/unknown.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/selectParser.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/selectParser.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   selectParser: () => (/* binding */ selectParser)\n/* harmony export */ });\n/* harmony import */ var _parsers_any_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./parsers/any.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/any.js\");\n/* harmony import */ var _parsers_array_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./parsers/array.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/array.js\");\n/* harmony import */ var _parsers_bigint_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./parsers/bigint.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/bigint.js\");\n/* harmony import */ var _parsers_boolean_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./parsers/boolean.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/boolean.js\");\n/* harmony import */ var _parsers_branded_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./parsers/branded.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/branded.js\");\n/* harmony import */ var _parsers_catch_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./parsers/catch.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/catch.js\");\n/* harmony import */ var _parsers_date_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./parsers/date.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/date.js\");\n/* harmony import */ var _parsers_default_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./parsers/default.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/default.js\");\n/* harmony import */ var _parsers_effects_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./parsers/effects.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/effects.js\");\n/* harmony import */ var _parsers_enum_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./parsers/enum.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/enum.js\");\n/* harmony import */ var _parsers_intersection_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./parsers/intersection.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/intersection.js\");\n/* harmony import */ var _parsers_literal_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./parsers/literal.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/literal.js\");\n/* harmony import */ var _parsers_string_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./parsers/string.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/string.js\");\n/* harmony import */ var _parsers_record_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./parsers/record.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/record.js\");\n/* harmony import */ var _parsers_map_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./parsers/map.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/map.js\");\n/* harmony import */ var _parsers_nativeEnum_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./parsers/nativeEnum.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/nativeEnum.js\");\n/* harmony import */ var _parsers_never_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./parsers/never.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/never.js\");\n/* harmony import */ var _parsers_null_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./parsers/null.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/null.js\");\n/* harmony import */ var _parsers_union_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./parsers/union.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/union.js\");\n/* harmony import */ var _parsers_nullable_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./parsers/nullable.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/nullable.js\");\n/* harmony import */ var _parsers_number_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./parsers/number.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/number.js\");\n/* harmony import */ var _parsers_object_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./parsers/object.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/object.js\");\n/* harmony import */ var _parsers_optional_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./parsers/optional.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/optional.js\");\n/* harmony import */ var _parsers_pipeline_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./parsers/pipeline.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/pipeline.js\");\n/* harmony import */ var _parsers_promise_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./parsers/promise.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/promise.js\");\n/* harmony import */ var _parsers_set_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./parsers/set.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/set.js\");\n/* harmony import */ var _parsers_tuple_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./parsers/tuple.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/tuple.js\");\n/* harmony import */ var _parsers_undefined_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./parsers/undefined.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/undefined.js\");\n/* harmony import */ var _parsers_unknown_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./parsers/unknown.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/unknown.js\");\n/* harmony import */ var _parsers_readonly_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./parsers/readonly.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/readonly.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! zod/v3 */ \"(ssr)/./node_modules/zod/v3/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/utils/zod-to-json-schema/selectParser.ts\nconst selectParser = (def, typeName, refs) => {\n\tswitch (typeName) {\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodString: return (0,_parsers_string_js__WEBPACK_IMPORTED_MODULE_12__.parseStringDef)(def, refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodNumber: return (0,_parsers_number_js__WEBPACK_IMPORTED_MODULE_20__.parseNumberDef)(def, refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodObject: return (0,_parsers_object_js__WEBPACK_IMPORTED_MODULE_21__.parseObjectDef)(def, refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodBigInt: return (0,_parsers_bigint_js__WEBPACK_IMPORTED_MODULE_2__.parseBigintDef)(def, refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodBoolean: return (0,_parsers_boolean_js__WEBPACK_IMPORTED_MODULE_3__.parseBooleanDef)();\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodDate: return (0,_parsers_date_js__WEBPACK_IMPORTED_MODULE_6__.parseDateDef)(def, refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodUndefined: return (0,_parsers_undefined_js__WEBPACK_IMPORTED_MODULE_27__.parseUndefinedDef)(refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodNull: return (0,_parsers_null_js__WEBPACK_IMPORTED_MODULE_17__.parseNullDef)(refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodArray: return (0,_parsers_array_js__WEBPACK_IMPORTED_MODULE_1__.parseArrayDef)(def, refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodUnion:\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodDiscriminatedUnion: return (0,_parsers_union_js__WEBPACK_IMPORTED_MODULE_18__.parseUnionDef)(def, refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodIntersection: return (0,_parsers_intersection_js__WEBPACK_IMPORTED_MODULE_10__.parseIntersectionDef)(def, refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodTuple: return (0,_parsers_tuple_js__WEBPACK_IMPORTED_MODULE_26__.parseTupleDef)(def, refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodRecord: return (0,_parsers_record_js__WEBPACK_IMPORTED_MODULE_13__.parseRecordDef)(def, refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodLiteral: return (0,_parsers_literal_js__WEBPACK_IMPORTED_MODULE_11__.parseLiteralDef)(def, refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodEnum: return (0,_parsers_enum_js__WEBPACK_IMPORTED_MODULE_9__.parseEnumDef)(def);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodNativeEnum: return (0,_parsers_nativeEnum_js__WEBPACK_IMPORTED_MODULE_15__.parseNativeEnumDef)(def);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodNullable: return (0,_parsers_nullable_js__WEBPACK_IMPORTED_MODULE_19__.parseNullableDef)(def, refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodOptional: return (0,_parsers_optional_js__WEBPACK_IMPORTED_MODULE_22__.parseOptionalDef)(def, refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodMap: return (0,_parsers_map_js__WEBPACK_IMPORTED_MODULE_14__.parseMapDef)(def, refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodSet: return (0,_parsers_set_js__WEBPACK_IMPORTED_MODULE_25__.parseSetDef)(def, refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodLazy: return () => def.getter()._def;\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodPromise: return (0,_parsers_promise_js__WEBPACK_IMPORTED_MODULE_24__.parsePromiseDef)(def, refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodNaN:\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodNever: return (0,_parsers_never_js__WEBPACK_IMPORTED_MODULE_16__.parseNeverDef)(refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodEffects: return (0,_parsers_effects_js__WEBPACK_IMPORTED_MODULE_8__.parseEffectsDef)(def, refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodAny: return (0,_parsers_any_js__WEBPACK_IMPORTED_MODULE_0__.parseAnyDef)(refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodUnknown: return (0,_parsers_unknown_js__WEBPACK_IMPORTED_MODULE_28__.parseUnknownDef)(refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodDefault: return (0,_parsers_default_js__WEBPACK_IMPORTED_MODULE_7__.parseDefaultDef)(def, refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodBranded: return (0,_parsers_branded_js__WEBPACK_IMPORTED_MODULE_4__.parseBrandedDef)(def, refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodReadonly: return (0,_parsers_readonly_js__WEBPACK_IMPORTED_MODULE_29__.parseReadonlyDef)(def, refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodCatch: return (0,_parsers_catch_js__WEBPACK_IMPORTED_MODULE_5__.parseCatchDef)(def, refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodPipeline: return (0,_parsers_pipeline_js__WEBPACK_IMPORTED_MODULE_23__.parsePipelineDef)(def, refs);\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodFunction:\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodVoid:\n\t\tcase zod_v3__WEBPACK_IMPORTED_MODULE_30__.ZodFirstPartyTypeKind.ZodSymbol: return void 0;\n\t\tdefault:\n /* c8 ignore next */\n\t\treturn ((_) => void 0)(typeName);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=selectParser.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3NlbGVjdFBhcnNlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUErQztBQUNJO0FBQ0U7QUFDRTtBQUNBO0FBQ0o7QUFDRjtBQUNNO0FBQ0E7QUFDTjtBQUNnQjtBQUNWO0FBQ0Y7QUFDQTtBQUNOO0FBQ2M7QUFDVjtBQUNGO0FBQ0U7QUFDTTtBQUNKO0FBQ0E7QUFDSTtBQUNBO0FBQ0Y7QUFDUjtBQUNJO0FBQ1E7QUFDSjtBQUNFO0FBQ1Y7O0FBRS9DO0FBQ0E7QUFDQTtBQUNBLE9BQU8sMERBQXFCLG1CQUFtQixtRUFBYztBQUM3RCxPQUFPLDBEQUFxQixtQkFBbUIsbUVBQWM7QUFDN0QsT0FBTywwREFBcUIsbUJBQW1CLG1FQUFjO0FBQzdELE9BQU8sMERBQXFCLG1CQUFtQixrRUFBYztBQUM3RCxPQUFPLDBEQUFxQixvQkFBb0Isb0VBQWU7QUFDL0QsT0FBTywwREFBcUIsaUJBQWlCLDhEQUFZO0FBQ3pELE9BQU8sMERBQXFCLHNCQUFzQix5RUFBaUI7QUFDbkUsT0FBTywwREFBcUIsaUJBQWlCLCtEQUFZO0FBQ3pELE9BQU8sMERBQXFCLGtCQUFrQixnRUFBYTtBQUMzRCxPQUFPLDBEQUFxQjtBQUM1QixPQUFPLDBEQUFxQiwrQkFBK0IsaUVBQWE7QUFDeEUsT0FBTywwREFBcUIseUJBQXlCLCtFQUFvQjtBQUN6RSxPQUFPLDBEQUFxQixrQkFBa0IsaUVBQWE7QUFDM0QsT0FBTywwREFBcUIsbUJBQW1CLG1FQUFjO0FBQzdELE9BQU8sMERBQXFCLG9CQUFvQixxRUFBZTtBQUMvRCxPQUFPLDBEQUFxQixpQkFBaUIsOERBQVk7QUFDekQsT0FBTywwREFBcUIsdUJBQXVCLDJFQUFrQjtBQUNyRSxPQUFPLDBEQUFxQixxQkFBcUIsdUVBQWdCO0FBQ2pFLE9BQU8sMERBQXFCLHFCQUFxQix1RUFBZ0I7QUFDakUsT0FBTywwREFBcUIsZ0JBQWdCLDZEQUFXO0FBQ3ZELE9BQU8sMERBQXFCLGdCQUFnQiw2REFBVztBQUN2RCxPQUFPLDBEQUFxQjtBQUM1QixPQUFPLDBEQUFxQixvQkFBb0IscUVBQWU7QUFDL0QsT0FBTywwREFBcUI7QUFDNUIsT0FBTywwREFBcUIsa0JBQWtCLGlFQUFhO0FBQzNELE9BQU8sMERBQXFCLG9CQUFvQixvRUFBZTtBQUMvRCxPQUFPLDBEQUFxQixnQkFBZ0IsNERBQVc7QUFDdkQsT0FBTywwREFBcUIsb0JBQW9CLHFFQUFlO0FBQy9ELE9BQU8sMERBQXFCLG9CQUFvQixvRUFBZTtBQUMvRCxPQUFPLDBEQUFxQixvQkFBb0Isb0VBQWU7QUFDL0QsT0FBTywwREFBcUIscUJBQXFCLHVFQUFnQjtBQUNqRSxPQUFPLDBEQUFxQixrQkFBa0IsZ0VBQWE7QUFDM0QsT0FBTywwREFBcUIscUJBQXFCLHVFQUFnQjtBQUNqRSxPQUFPLDBEQUFxQjtBQUM1QixPQUFPLDBEQUFxQjtBQUM1QixPQUFPLDBEQUFxQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3dCO0FBQ3hCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3NlbGVjdFBhcnNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZUFueURlZiB9IGZyb20gXCIuL3BhcnNlcnMvYW55LmpzXCI7XG5pbXBvcnQgeyBwYXJzZUFycmF5RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9hcnJheS5qc1wiO1xuaW1wb3J0IHsgcGFyc2VCaWdpbnREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2JpZ2ludC5qc1wiO1xuaW1wb3J0IHsgcGFyc2VCb29sZWFuRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9ib29sZWFuLmpzXCI7XG5pbXBvcnQgeyBwYXJzZUJyYW5kZWREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2JyYW5kZWQuanNcIjtcbmltcG9ydCB7IHBhcnNlQ2F0Y2hEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2NhdGNoLmpzXCI7XG5pbXBvcnQgeyBwYXJzZURhdGVEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2RhdGUuanNcIjtcbmltcG9ydCB7IHBhcnNlRGVmYXVsdERlZiB9IGZyb20gXCIuL3BhcnNlcnMvZGVmYXVsdC5qc1wiO1xuaW1wb3J0IHsgcGFyc2VFZmZlY3RzRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9lZmZlY3RzLmpzXCI7XG5pbXBvcnQgeyBwYXJzZUVudW1EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2VudW0uanNcIjtcbmltcG9ydCB7IHBhcnNlSW50ZXJzZWN0aW9uRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9pbnRlcnNlY3Rpb24uanNcIjtcbmltcG9ydCB7IHBhcnNlTGl0ZXJhbERlZiB9IGZyb20gXCIuL3BhcnNlcnMvbGl0ZXJhbC5qc1wiO1xuaW1wb3J0IHsgcGFyc2VTdHJpbmdEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3N0cmluZy5qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWNvcmREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3JlY29yZC5qc1wiO1xuaW1wb3J0IHsgcGFyc2VNYXBEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL21hcC5qc1wiO1xuaW1wb3J0IHsgcGFyc2VOYXRpdmVFbnVtRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9uYXRpdmVFbnVtLmpzXCI7XG5pbXBvcnQgeyBwYXJzZU5ldmVyRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9uZXZlci5qc1wiO1xuaW1wb3J0IHsgcGFyc2VOdWxsRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9udWxsLmpzXCI7XG5pbXBvcnQgeyBwYXJzZVVuaW9uRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy91bmlvbi5qc1wiO1xuaW1wb3J0IHsgcGFyc2VOdWxsYWJsZURlZiB9IGZyb20gXCIuL3BhcnNlcnMvbnVsbGFibGUuanNcIjtcbmltcG9ydCB7IHBhcnNlTnVtYmVyRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9udW1iZXIuanNcIjtcbmltcG9ydCB7IHBhcnNlT2JqZWN0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9vYmplY3QuanNcIjtcbmltcG9ydCB7IHBhcnNlT3B0aW9uYWxEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL29wdGlvbmFsLmpzXCI7XG5pbXBvcnQgeyBwYXJzZVBpcGVsaW5lRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9waXBlbGluZS5qc1wiO1xuaW1wb3J0IHsgcGFyc2VQcm9taXNlRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9wcm9taXNlLmpzXCI7XG5pbXBvcnQgeyBwYXJzZVNldERlZiB9IGZyb20gXCIuL3BhcnNlcnMvc2V0LmpzXCI7XG5pbXBvcnQgeyBwYXJzZVR1cGxlRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy90dXBsZS5qc1wiO1xuaW1wb3J0IHsgcGFyc2VVbmRlZmluZWREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3VuZGVmaW5lZC5qc1wiO1xuaW1wb3J0IHsgcGFyc2VVbmtub3duRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy91bmtub3duLmpzXCI7XG5pbXBvcnQgeyBwYXJzZVJlYWRvbmx5RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9yZWFkb25seS5qc1wiO1xuaW1wb3J0IHsgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIH0gZnJvbSBcInpvZC92M1wiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL3pvZC10by1qc29uLXNjaGVtYS9zZWxlY3RQYXJzZXIudHNcbmNvbnN0IHNlbGVjdFBhcnNlciA9IChkZWYsIHR5cGVOYW1lLCByZWZzKSA9PiB7XG5cdHN3aXRjaCAodHlwZU5hbWUpIHtcblx0XHRjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTdHJpbmc6IHJldHVybiBwYXJzZVN0cmluZ0RlZihkZWYsIHJlZnMpO1xuXHRcdGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bWJlcjogcmV0dXJuIHBhcnNlTnVtYmVyRGVmKGRlZiwgcmVmcyk7XG5cdFx0Y2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0OiByZXR1cm4gcGFyc2VPYmplY3REZWYoZGVmLCByZWZzKTtcblx0XHRjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RCaWdJbnQ6IHJldHVybiBwYXJzZUJpZ2ludERlZihkZWYsIHJlZnMpO1xuXHRcdGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJvb2xlYW46IHJldHVybiBwYXJzZUJvb2xlYW5EZWYoKTtcblx0XHRjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REYXRlOiByZXR1cm4gcGFyc2VEYXRlRGVmKGRlZiwgcmVmcyk7XG5cdFx0Y2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5kZWZpbmVkOiByZXR1cm4gcGFyc2VVbmRlZmluZWREZWYocmVmcyk7XG5cdFx0Y2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVsbDogcmV0dXJuIHBhcnNlTnVsbERlZihyZWZzKTtcblx0XHRjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RBcnJheTogcmV0dXJuIHBhcnNlQXJyYXlEZWYoZGVmLCByZWZzKTtcblx0XHRjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmlvbjpcblx0XHRjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REaXNjcmltaW5hdGVkVW5pb246IHJldHVybiBwYXJzZVVuaW9uRGVmKGRlZiwgcmVmcyk7XG5cdFx0Y2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kSW50ZXJzZWN0aW9uOiByZXR1cm4gcGFyc2VJbnRlcnNlY3Rpb25EZWYoZGVmLCByZWZzKTtcblx0XHRjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RUdXBsZTogcmV0dXJuIHBhcnNlVHVwbGVEZWYoZGVmLCByZWZzKTtcblx0XHRjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RSZWNvcmQ6IHJldHVybiBwYXJzZVJlY29yZERlZihkZWYsIHJlZnMpO1xuXHRcdGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZExpdGVyYWw6IHJldHVybiBwYXJzZUxpdGVyYWxEZWYoZGVmLCByZWZzKTtcblx0XHRjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtOiByZXR1cm4gcGFyc2VFbnVtRGVmKGRlZik7XG5cdFx0Y2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmF0aXZlRW51bTogcmV0dXJuIHBhcnNlTmF0aXZlRW51bURlZihkZWYpO1xuXHRcdGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGxhYmxlOiByZXR1cm4gcGFyc2VOdWxsYWJsZURlZihkZWYsIHJlZnMpO1xuXHRcdGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9wdGlvbmFsOiByZXR1cm4gcGFyc2VPcHRpb25hbERlZihkZWYsIHJlZnMpO1xuXHRcdGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE1hcDogcmV0dXJuIHBhcnNlTWFwRGVmKGRlZiwgcmVmcyk7XG5cdFx0Y2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU2V0OiByZXR1cm4gcGFyc2VTZXREZWYoZGVmLCByZWZzKTtcblx0XHRjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RMYXp5OiByZXR1cm4gKCkgPT4gZGVmLmdldHRlcigpLl9kZWY7XG5cdFx0Y2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUHJvbWlzZTogcmV0dXJuIHBhcnNlUHJvbWlzZURlZihkZWYsIHJlZnMpO1xuXHRcdGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hTjpcblx0XHRjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROZXZlcjogcmV0dXJuIHBhcnNlTmV2ZXJEZWYocmVmcyk7XG5cdFx0Y2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0czogcmV0dXJuIHBhcnNlRWZmZWN0c0RlZihkZWYsIHJlZnMpO1xuXHRcdGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFueTogcmV0dXJuIHBhcnNlQW55RGVmKHJlZnMpO1xuXHRcdGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFVua25vd246IHJldHVybiBwYXJzZVVua25vd25EZWYocmVmcyk7XG5cdFx0Y2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGVmYXVsdDogcmV0dXJuIHBhcnNlRGVmYXVsdERlZihkZWYsIHJlZnMpO1xuXHRcdGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJyYW5kZWQ6IHJldHVybiBwYXJzZUJyYW5kZWREZWYoZGVmLCByZWZzKTtcblx0XHRjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RSZWFkb25seTogcmV0dXJuIHBhcnNlUmVhZG9ubHlEZWYoZGVmLCByZWZzKTtcblx0XHRjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RDYXRjaDogcmV0dXJuIHBhcnNlQ2F0Y2hEZWYoZGVmLCByZWZzKTtcblx0XHRjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RQaXBlbGluZTogcmV0dXJuIHBhcnNlUGlwZWxpbmVEZWYoZGVmLCByZWZzKTtcblx0XHRjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RGdW5jdGlvbjpcblx0XHRjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RWb2lkOlxuXHRcdGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFN5bWJvbDogcmV0dXJuIHZvaWQgMDtcblx0XHRkZWZhdWx0OlxuIC8qIGM4IGlnbm9yZSBuZXh0ICovXG5cdFx0cmV0dXJuICgoXykgPT4gdm9pZCAwKSh0eXBlTmFtZSk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgc2VsZWN0UGFyc2VyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZWxlY3RQYXJzZXIuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/selectParser.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/zodToJsonSchema.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/zod-to-json-schema/zodToJsonSchema.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   zodToJsonSchema: () => (/* binding */ zodToJsonSchema)\n/* harmony export */ });\n/* harmony import */ var _Refs_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Refs.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/Refs.js\");\n/* harmony import */ var _parsers_any_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./parsers/any.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parsers/any.js\");\n/* harmony import */ var _parseDef_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./parseDef.js */ \"(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/parseDef.js\");\n\n\n\n\n//#region src/utils/zod-to-json-schema/zodToJsonSchema.ts\nconst zodToJsonSchema = (schema, options) => {\n\tconst refs = (0,_Refs_js__WEBPACK_IMPORTED_MODULE_0__.getRefs)(options);\n\tlet definitions = typeof options === \"object\" && options.definitions ? Object.entries(options.definitions).reduce((acc, [name$1, schema$1]) => ({\n\t\t...acc,\n\t\t[name$1]: (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_2__.parseDef)(schema$1._def, {\n\t\t\t...refs,\n\t\t\tcurrentPath: [\n\t\t\t\t...refs.basePath,\n\t\t\t\trefs.definitionPath,\n\t\t\t\tname$1\n\t\t\t]\n\t\t}, true) ?? (0,_parsers_any_js__WEBPACK_IMPORTED_MODULE_1__.parseAnyDef)(refs)\n\t}), {}) : void 0;\n\tconst name = typeof options === \"string\" ? options : options?.nameStrategy === \"title\" ? void 0 : options?.name;\n\tconst main = (0,_parseDef_js__WEBPACK_IMPORTED_MODULE_2__.parseDef)(schema._def, name === void 0 ? refs : {\n\t\t...refs,\n\t\tcurrentPath: [\n\t\t\t...refs.basePath,\n\t\t\trefs.definitionPath,\n\t\t\tname\n\t\t]\n\t}, false) ?? (0,_parsers_any_js__WEBPACK_IMPORTED_MODULE_1__.parseAnyDef)(refs);\n\tconst title = typeof options === \"object\" && options.name !== void 0 && options.nameStrategy === \"title\" ? options.name : void 0;\n\tif (title !== void 0) main.title = title;\n\tif (refs.flags.hasReferencedOpenAiAnyType) {\n\t\tif (!definitions) definitions = {};\n\t\tif (!definitions[refs.openAiAnyTypeName]) definitions[refs.openAiAnyTypeName] = {\n\t\t\ttype: [\n\t\t\t\t\"string\",\n\t\t\t\t\"number\",\n\t\t\t\t\"integer\",\n\t\t\t\t\"boolean\",\n\t\t\t\t\"array\",\n\t\t\t\t\"null\"\n\t\t\t],\n\t\t\titems: { $ref: refs.$refStrategy === \"relative\" ? \"1\" : [\n\t\t\t\t...refs.basePath,\n\t\t\t\trefs.definitionPath,\n\t\t\t\trefs.openAiAnyTypeName\n\t\t\t].join(\"/\") }\n\t\t};\n\t}\n\tconst combined = name === void 0 ? definitions ? {\n\t\t...main,\n\t\t[refs.definitionPath]: definitions\n\t} : main : {\n\t\t$ref: [\n\t\t\t...refs.$refStrategy === \"relative\" ? [] : refs.basePath,\n\t\t\trefs.definitionPath,\n\t\t\tname\n\t\t].join(\"/\"),\n\t\t[refs.definitionPath]: {\n\t\t\t...definitions,\n\t\t\t[name]: main\n\t\t}\n\t};\n\tif (refs.target === \"jsonSchema7\") combined.$schema = \"http://json-schema.org/draft-07/schema#\";\n\telse if (refs.target === \"jsonSchema2019-09\" || refs.target === \"openAi\") combined.$schema = \"https://json-schema.org/draft/2019-09/schema#\";\n\tif (refs.target === \"openAi\" && (\"anyOf\" in combined || \"oneOf\" in combined || \"allOf\" in combined || \"type\" in combined && Array.isArray(combined.type))) console.warn(\"Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property.\");\n\treturn combined;\n};\n\n//#endregion\n\n//# sourceMappingURL=zodToJsonSchema.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvem9kLXRvLWpzb24tc2NoZW1hL3pvZFRvSnNvblNjaGVtYS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQW9DO0FBQ1c7QUFDTjs7QUFFekM7QUFDQTtBQUNBLGNBQWMsaURBQU87QUFDckI7QUFDQTtBQUNBLFlBQVksc0RBQVE7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxXQUFXLDREQUFXO0FBQ3pCLEVBQUUsS0FBSztBQUNQO0FBQ0EsY0FBYyxzREFBUTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLFlBQVksNERBQVc7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUMyQjtBQUMzQiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3pvZC10by1qc29uLXNjaGVtYS96b2RUb0pzb25TY2hlbWEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0UmVmcyB9IGZyb20gXCIuL1JlZnMuanNcIjtcbmltcG9ydCB7IHBhcnNlQW55RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9hbnkuanNcIjtcbmltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4vcGFyc2VEZWYuanNcIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy96b2QtdG8tanNvbi1zY2hlbWEvem9kVG9Kc29uU2NoZW1hLnRzXG5jb25zdCB6b2RUb0pzb25TY2hlbWEgPSAoc2NoZW1hLCBvcHRpb25zKSA9PiB7XG5cdGNvbnN0IHJlZnMgPSBnZXRSZWZzKG9wdGlvbnMpO1xuXHRsZXQgZGVmaW5pdGlvbnMgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJvYmplY3RcIiAmJiBvcHRpb25zLmRlZmluaXRpb25zID8gT2JqZWN0LmVudHJpZXMob3B0aW9ucy5kZWZpbml0aW9ucykucmVkdWNlKChhY2MsIFtuYW1lJDEsIHNjaGVtYSQxXSkgPT4gKHtcblx0XHQuLi5hY2MsXG5cdFx0W25hbWUkMV06IHBhcnNlRGVmKHNjaGVtYSQxLl9kZWYsIHtcblx0XHRcdC4uLnJlZnMsXG5cdFx0XHRjdXJyZW50UGF0aDogW1xuXHRcdFx0XHQuLi5yZWZzLmJhc2VQYXRoLFxuXHRcdFx0XHRyZWZzLmRlZmluaXRpb25QYXRoLFxuXHRcdFx0XHRuYW1lJDFcblx0XHRcdF1cblx0XHR9LCB0cnVlKSA/PyBwYXJzZUFueURlZihyZWZzKVxuXHR9KSwge30pIDogdm9pZCAwO1xuXHRjb25zdCBuYW1lID0gdHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgPyBvcHRpb25zIDogb3B0aW9ucz8ubmFtZVN0cmF0ZWd5ID09PSBcInRpdGxlXCIgPyB2b2lkIDAgOiBvcHRpb25zPy5uYW1lO1xuXHRjb25zdCBtYWluID0gcGFyc2VEZWYoc2NoZW1hLl9kZWYsIG5hbWUgPT09IHZvaWQgMCA/IHJlZnMgOiB7XG5cdFx0Li4ucmVmcyxcblx0XHRjdXJyZW50UGF0aDogW1xuXHRcdFx0Li4ucmVmcy5iYXNlUGF0aCxcblx0XHRcdHJlZnMuZGVmaW5pdGlvblBhdGgsXG5cdFx0XHRuYW1lXG5cdFx0XVxuXHR9LCBmYWxzZSkgPz8gcGFyc2VBbnlEZWYocmVmcyk7XG5cdGNvbnN0IHRpdGxlID0gdHlwZW9mIG9wdGlvbnMgPT09IFwib2JqZWN0XCIgJiYgb3B0aW9ucy5uYW1lICE9PSB2b2lkIDAgJiYgb3B0aW9ucy5uYW1lU3RyYXRlZ3kgPT09IFwidGl0bGVcIiA/IG9wdGlvbnMubmFtZSA6IHZvaWQgMDtcblx0aWYgKHRpdGxlICE9PSB2b2lkIDApIG1haW4udGl0bGUgPSB0aXRsZTtcblx0aWYgKHJlZnMuZmxhZ3MuaGFzUmVmZXJlbmNlZE9wZW5BaUFueVR5cGUpIHtcblx0XHRpZiAoIWRlZmluaXRpb25zKSBkZWZpbml0aW9ucyA9IHt9O1xuXHRcdGlmICghZGVmaW5pdGlvbnNbcmVmcy5vcGVuQWlBbnlUeXBlTmFtZV0pIGRlZmluaXRpb25zW3JlZnMub3BlbkFpQW55VHlwZU5hbWVdID0ge1xuXHRcdFx0dHlwZTogW1xuXHRcdFx0XHRcInN0cmluZ1wiLFxuXHRcdFx0XHRcIm51bWJlclwiLFxuXHRcdFx0XHRcImludGVnZXJcIixcblx0XHRcdFx0XCJib29sZWFuXCIsXG5cdFx0XHRcdFwiYXJyYXlcIixcblx0XHRcdFx0XCJudWxsXCJcblx0XHRcdF0sXG5cdFx0XHRpdGVtczogeyAkcmVmOiByZWZzLiRyZWZTdHJhdGVneSA9PT0gXCJyZWxhdGl2ZVwiID8gXCIxXCIgOiBbXG5cdFx0XHRcdC4uLnJlZnMuYmFzZVBhdGgsXG5cdFx0XHRcdHJlZnMuZGVmaW5pdGlvblBhdGgsXG5cdFx0XHRcdHJlZnMub3BlbkFpQW55VHlwZU5hbWVcblx0XHRcdF0uam9pbihcIi9cIikgfVxuXHRcdH07XG5cdH1cblx0Y29uc3QgY29tYmluZWQgPSBuYW1lID09PSB2b2lkIDAgPyBkZWZpbml0aW9ucyA/IHtcblx0XHQuLi5tYWluLFxuXHRcdFtyZWZzLmRlZmluaXRpb25QYXRoXTogZGVmaW5pdGlvbnNcblx0fSA6IG1haW4gOiB7XG5cdFx0JHJlZjogW1xuXHRcdFx0Li4ucmVmcy4kcmVmU3RyYXRlZ3kgPT09IFwicmVsYXRpdmVcIiA/IFtdIDogcmVmcy5iYXNlUGF0aCxcblx0XHRcdHJlZnMuZGVmaW5pdGlvblBhdGgsXG5cdFx0XHRuYW1lXG5cdFx0XS5qb2luKFwiL1wiKSxcblx0XHRbcmVmcy5kZWZpbml0aW9uUGF0aF06IHtcblx0XHRcdC4uLmRlZmluaXRpb25zLFxuXHRcdFx0W25hbWVdOiBtYWluXG5cdFx0fVxuXHR9O1xuXHRpZiAocmVmcy50YXJnZXQgPT09IFwianNvblNjaGVtYTdcIikgY29tYmluZWQuJHNjaGVtYSA9IFwiaHR0cDovL2pzb24tc2NoZW1hLm9yZy9kcmFmdC0wNy9zY2hlbWEjXCI7XG5cdGVsc2UgaWYgKHJlZnMudGFyZ2V0ID09PSBcImpzb25TY2hlbWEyMDE5LTA5XCIgfHwgcmVmcy50YXJnZXQgPT09IFwib3BlbkFpXCIpIGNvbWJpbmVkLiRzY2hlbWEgPSBcImh0dHBzOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LzIwMTktMDkvc2NoZW1hI1wiO1xuXHRpZiAocmVmcy50YXJnZXQgPT09IFwib3BlbkFpXCIgJiYgKFwiYW55T2ZcIiBpbiBjb21iaW5lZCB8fCBcIm9uZU9mXCIgaW4gY29tYmluZWQgfHwgXCJhbGxPZlwiIGluIGNvbWJpbmVkIHx8IFwidHlwZVwiIGluIGNvbWJpbmVkICYmIEFycmF5LmlzQXJyYXkoY29tYmluZWQudHlwZSkpKSBjb25zb2xlLndhcm4oXCJXYXJuaW5nOiBPcGVuQUkgbWF5IG5vdCBzdXBwb3J0IHNjaGVtYXMgd2l0aCB1bmlvbnMgYXMgcm9vdHMhIFRyeSB3cmFwcGluZyBpdCBpbiBhbiBvYmplY3QgcHJvcGVydHkuXCIpO1xuXHRyZXR1cm4gY29tYmluZWQ7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHpvZFRvSnNvblNjaGVtYSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9em9kVG9Kc29uU2NoZW1hLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/utils/zod-to-json-schema/zodToJsonSchema.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/dist/vectorstores.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/vectorstores.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SaveableVectorStore: () => (/* binding */ SaveableVectorStore),\n/* harmony export */   VectorStore: () => (/* binding */ VectorStore),\n/* harmony export */   VectorStoreRetriever: () => (/* binding */ VectorStoreRetriever),\n/* harmony export */   vectorstores_exports: () => (/* binding */ vectorstores_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_virtual/rolldown_runtime.js */ \"(ssr)/./node_modules/@langchain/core/dist/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./load/serializable.js */ \"(ssr)/./node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _retrievers_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./retrievers/index.js */ \"(ssr)/./node_modules/@langchain/core/dist/retrievers/index.js\");\n\n\n\n\n//#region src/vectorstores.ts\nvar vectorstores_exports = {};\n(0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)(vectorstores_exports, {\n\tSaveableVectorStore: () => SaveableVectorStore,\n\tVectorStore: () => VectorStore,\n\tVectorStoreRetriever: () => VectorStoreRetriever\n});\n/**\n* Class for retrieving documents from a `VectorStore` based on vector similarity\n* or maximal marginal relevance (MMR).\n*\n* `VectorStoreRetriever` extends `BaseRetriever`, implementing methods for\n* adding documents to the underlying vector store and performing document\n* retrieval with optional configurations.\n*\n* @class VectorStoreRetriever\n* @extends BaseRetriever\n* @implements VectorStoreRetrieverInterface\n* @template V - Type of vector store implementing `VectorStoreInterface`.\n*/\nvar VectorStoreRetriever = class extends _retrievers_index_js__WEBPACK_IMPORTED_MODULE_2__.BaseRetriever {\n\tstatic lc_name() {\n\t\treturn \"VectorStoreRetriever\";\n\t}\n\tget lc_namespace() {\n\t\treturn [\"langchain_core\", \"vectorstores\"];\n\t}\n\t/**\n\t* The instance of `VectorStore` used for storing and retrieving document embeddings.\n\t* This vector store must implement the `VectorStoreInterface` to be compatible\n\t* with the retrievers operations.\n\t*/\n\tvectorStore;\n\t/**\n\t* Specifies the number of documents to retrieve for each search query.\n\t* Defaults to 4 if not specified, providing a basic result count for similarity or MMR searches.\n\t*/\n\tk = 4;\n\t/**\n\t* Determines the type of search operation to perform on the vector store.\n\t*\n\t* - `\"similarity\"` (default): Conducts a similarity search based purely on vector similarity\n\t*   to the query.\n\t* - `\"mmr\"`: Executes a maximal marginal relevance (MMR) search, balancing relevance and\n\t*   diversity in the retrieved results.\n\t*/\n\tsearchType = \"similarity\";\n\t/**\n\t* Additional options specific to maximal marginal relevance (MMR) search, applicable\n\t* only if `searchType` is set to `\"mmr\"`.\n\t*\n\t* Includes:\n\t* - `fetchK`: The initial number of documents fetched before applying the MMR algorithm,\n\t*   allowing for a larger selection from which to choose the most diverse results.\n\t* - `lambda`: A parameter between 0 and 1 to adjust the relevance-diversity balance,\n\t*   where 0 prioritizes diversity and 1 prioritizes relevance.\n\t*/\n\tsearchKwargs;\n\t/**\n\t* Optional filter applied to search results, defined by the `FilterType` of the vector store.\n\t* Allows for refined, targeted results by restricting the returned documents based\n\t* on specified filter criteria.\n\t*/\n\tfilter;\n\t/**\n\t* Returns the type of vector store, as defined by the `vectorStore` instance.\n\t*\n\t* @returns {string} The vector store type.\n\t*/\n\t_vectorstoreType() {\n\t\treturn this.vectorStore._vectorstoreType();\n\t}\n\t/**\n\t* Initializes a new instance of `VectorStoreRetriever` with the specified configuration.\n\t*\n\t* This constructor configures the retriever to interact with a given `VectorStore`\n\t* and supports different retrieval strategies, including similarity search and maximal\n\t* marginal relevance (MMR) search. Various options allow customization of the number\n\t* of documents retrieved per query, filtering based on conditions, and fine-tuning\n\t* MMR-specific parameters.\n\t*\n\t* @param fields - Configuration options for setting up the retriever:\n\t*\n\t*   - `vectorStore` (required): The `VectorStore` instance implementing `VectorStoreInterface`\n\t*     that will be used to store and retrieve document embeddings. This is the core component\n\t*     of the retriever, enabling vector-based similarity and MMR searches.\n\t*\n\t*   - `k` (optional): Specifies the number of documents to retrieve per search query. If not\n\t*     provided, defaults to 4. This count determines the number of most relevant documents returned\n\t*     for each search operation, balancing performance with comprehensiveness.\n\t*\n\t*   - `searchType` (optional): Defines the search approach used by the retriever, allowing for\n\t*     flexibility between two methods:\n\t*       - `\"similarity\"` (default): A similarity-based search, retrieving documents with high vector\n\t*         similarity to the query. This type prioritizes relevance and is often used when diversity\n\t*         among results is less critical.\n\t*       - `\"mmr\"`: Maximal Marginal Relevance search, which combines relevance with diversity. MMR\n\t*         is useful for scenarios where varied content is essential, as it selects results that\n\t*         both match the query and introduce content diversity.\n\t*\n\t*   - `filter` (optional): A filter of type `FilterType`, defined by the vector store, that allows\n\t*     for refined and targeted search results. This filter applies specified conditions to limit\n\t*     which documents are eligible for retrieval, offering control over the scope of results.\n\t*\n\t*   - `searchKwargs` (optional, applicable only if `searchType` is `\"mmr\"`): Additional settings\n\t*     for configuring MMR-specific behavior. These parameters allow further tuning of the MMR\n\t*     search process:\n\t*       - `fetchK`: The initial number of documents fetched from the vector store before the MMR\n\t*         algorithm is applied. Fetching a larger set enables the algorithm to select a more\n\t*         diverse subset of documents.\n\t*       - `lambda`: A parameter controlling the relevance-diversity balance, where 0 emphasizes\n\t*         diversity and 1 prioritizes relevance. Intermediate values provide a blend of the two,\n\t*         allowing customization based on the importance of content variety relative to query relevance.\n\t*/\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tthis.vectorStore = fields.vectorStore;\n\t\tthis.k = fields.k ?? this.k;\n\t\tthis.searchType = fields.searchType ?? this.searchType;\n\t\tthis.filter = fields.filter;\n\t\tif (fields.searchType === \"mmr\") this.searchKwargs = fields.searchKwargs;\n\t}\n\t/**\n\t* Retrieves relevant documents based on the specified query, using either\n\t* similarity or maximal marginal relevance (MMR) search.\n\t*\n\t* If `searchType` is set to `\"mmr\"`, performs an MMR search to balance\n\t* similarity and diversity among results. If `searchType` is `\"similarity\"`,\n\t* retrieves results purely based on similarity to the query.\n\t*\n\t* @param query - The query string used to find relevant documents.\n\t* @param runManager - Optional callback manager for tracking retrieval progress.\n\t* @returns A promise that resolves to an array of `DocumentInterface` instances\n\t*          representing the most relevant documents to the query.\n\t* @throws {Error} Throws an error if MMR search is requested but not supported\n\t*                 by the vector store.\n\t* @protected\n\t*/\n\tasync _getRelevantDocuments(query, runManager) {\n\t\tif (this.searchType === \"mmr\") {\n\t\t\tif (typeof this.vectorStore.maxMarginalRelevanceSearch !== \"function\") throw new Error(`The vector store backing this retriever, ${this._vectorstoreType()} does not support max marginal relevance search.`);\n\t\t\treturn this.vectorStore.maxMarginalRelevanceSearch(query, {\n\t\t\t\tk: this.k,\n\t\t\t\tfilter: this.filter,\n\t\t\t\t...this.searchKwargs\n\t\t\t}, runManager?.getChild(\"vectorstore\"));\n\t\t}\n\t\treturn this.vectorStore.similaritySearch(query, this.k, this.filter, runManager?.getChild(\"vectorstore\"));\n\t}\n\t/**\n\t* Adds an array of documents to the vector store, embedding them as part of\n\t* the storage process.\n\t*\n\t* This method delegates document embedding and storage to the `addDocuments`\n\t* method of the underlying vector store.\n\t*\n\t* @param documents - An array of documents to embed and add to the vector store.\n\t* @param options - Optional settings to customize document addition.\n\t* @returns A promise that resolves to an array of document IDs or `void`,\n\t*          depending on the vector store's implementation.\n\t*/\n\tasync addDocuments(documents, options) {\n\t\treturn this.vectorStore.addDocuments(documents, options);\n\t}\n};\n/**\n* Abstract class representing a vector storage system for performing\n* similarity searches on embedded documents.\n*\n* `VectorStore` provides methods for adding precomputed vectors or documents,\n* removing documents based on criteria, and performing similarity searches\n* with optional scoring. Subclasses are responsible for implementing specific\n* storage mechanisms and the exact behavior of certain abstract methods.\n*\n* @abstract\n* @extends Serializable\n* @implements VectorStoreInterface\n*/\nvar VectorStore = class extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_1__.Serializable {\n\t/**\n\t* Namespace within LangChain to uniquely identify this vector store's\n\t* location, based on the vector store type.\n\t*\n\t* @internal\n\t*/\n\tlc_namespace = [\n\t\t\"langchain\",\n\t\t\"vectorstores\",\n\t\tthis._vectorstoreType()\n\t];\n\t/**\n\t* Embeddings interface for generating vector embeddings from text queries,\n\t* enabling vector-based similarity searches.\n\t*/\n\tembeddings;\n\t/**\n\t* Initializes a new vector store with embeddings and database configuration.\n\t*\n\t* @param embeddings - Instance of `EmbeddingsInterface` used to embed queries.\n\t* @param dbConfig - Configuration settings for the database or storage system.\n\t*/\n\tconstructor(embeddings, dbConfig) {\n\t\tsuper(dbConfig);\n\t\tthis.embeddings = embeddings;\n\t}\n\t/**\n\t* Deletes documents from the vector store based on the specified parameters.\n\t*\n\t* @param _params - Flexible key-value pairs defining conditions for document deletion.\n\t* @returns A promise that resolves once the deletion is complete.\n\t*/\n\tasync delete(_params) {\n\t\tthrow new Error(\"Not implemented.\");\n\t}\n\t/**\n\t* Searches for documents similar to a text query by embedding the query and\n\t* performing a similarity search on the resulting vector.\n\t*\n\t* @param query - Text query for finding similar documents.\n\t* @param k - Number of similar results to return. Defaults to 4.\n\t* @param filter - Optional filter based on `FilterType`.\n\t* @param _callbacks - Optional callbacks for monitoring search progress\n\t* @returns A promise resolving to an array of `DocumentInterface` instances representing similar documents.\n\t*/\n\tasync similaritySearch(query, k = 4, filter = void 0, _callbacks = void 0) {\n\t\tconst results = await this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(query), k, filter);\n\t\treturn results.map((result) => result[0]);\n\t}\n\t/**\n\t* Searches for documents similar to a text query by embedding the query,\n\t* and returns results with similarity scores.\n\t*\n\t* @param query - Text query for finding similar documents.\n\t* @param k - Number of similar results to return. Defaults to 4.\n\t* @param filter - Optional filter based on `FilterType`.\n\t* @param _callbacks - Optional callbacks for monitoring search progress\n\t* @returns A promise resolving to an array of tuples, each containing a\n\t*          document and its similarity score.\n\t*/\n\tasync similaritySearchWithScore(query, k = 4, filter = void 0, _callbacks = void 0) {\n\t\treturn this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(query), k, filter);\n\t}\n\t/**\n\t* Creates a `VectorStore` instance from an array of text strings and optional\n\t* metadata, using the specified embeddings and database configuration.\n\t*\n\t* Subclasses must implement this method to define how text and metadata\n\t* are embedded and stored in the vector store. Throws an error if not overridden.\n\t*\n\t* @param _texts - Array of strings representing the text documents to be stored.\n\t* @param _metadatas - Metadata for the texts, either as an array (one for each text)\n\t*                     or a single object (applied to all texts).\n\t* @param _embeddings - Instance of `EmbeddingsInterface` to embed the texts.\n\t* @param _dbConfig - Database configuration settings.\n\t* @returns A promise that resolves to a new `VectorStore` instance.\n\t* @throws {Error} Throws an error if this method is not overridden by a subclass.\n\t*/\n\tstatic fromTexts(_texts, _metadatas, _embeddings, _dbConfig) {\n\t\tthrow new Error(\"the Langchain vectorstore implementation you are using forgot to override this, please report a bug\");\n\t}\n\t/**\n\t* Creates a `VectorStore` instance from an array of documents, using the specified\n\t* embeddings and database configuration.\n\t*\n\t* Subclasses must implement this method to define how documents are embedded\n\t* and stored. Throws an error if not overridden.\n\t*\n\t* @param _docs - Array of `DocumentInterface` instances representing the documents to be stored.\n\t* @param _embeddings - Instance of `EmbeddingsInterface` to embed the documents.\n\t* @param _dbConfig - Database configuration settings.\n\t* @returns A promise that resolves to a new `VectorStore` instance.\n\t* @throws {Error} Throws an error if this method is not overridden by a subclass.\n\t*/\n\tstatic fromDocuments(_docs, _embeddings, _dbConfig) {\n\t\tthrow new Error(\"the Langchain vectorstore implementation you are using forgot to override this, please report a bug\");\n\t}\n\t/**\n\t* Creates a `VectorStoreRetriever` instance with flexible configuration options.\n\t*\n\t* @param kOrFields\n\t*    - If a number is provided, it sets the `k` parameter (number of items to retrieve).\n\t*    - If an object is provided, it should contain various configuration options.\n\t* @param filter\n\t*    - Optional filter criteria to limit the items retrieved based on the specified filter type.\n\t* @param callbacks\n\t*    - Optional callbacks that may be triggered at specific stages of the retrieval process.\n\t* @param tags\n\t*    - Tags to categorize or label the `VectorStoreRetriever`. Defaults to an empty array if not provided.\n\t* @param metadata\n\t*    - Additional metadata as key-value pairs to add contextual information for the retrieval process.\n\t* @param verbose\n\t*    - If `true`, enables detailed logging for the retrieval process. Defaults to `false`.\n\t*\n\t* @returns\n\t*    - A configured `VectorStoreRetriever` instance based on the provided parameters.\n\t*\n\t* @example\n\t* Basic usage with a `k` value:\n\t* ```typescript\n\t* const retriever = myVectorStore.asRetriever(5);\n\t* ```\n\t*\n\t* Usage with a configuration object:\n\t* ```typescript\n\t* const retriever = myVectorStore.asRetriever({\n\t*   k: 10,\n\t*   filter: myFilter,\n\t*   tags: ['example', 'test'],\n\t*   verbose: true,\n\t*   searchType: 'mmr',\n\t*   searchKwargs: { alpha: 0.5 },\n\t* });\n\t* ```\n\t*/\n\tasRetriever(kOrFields, filter, callbacks, tags, metadata, verbose) {\n\t\tif (typeof kOrFields === \"number\") return new VectorStoreRetriever({\n\t\t\tvectorStore: this,\n\t\t\tk: kOrFields,\n\t\t\tfilter,\n\t\t\ttags: [...tags ?? [], this._vectorstoreType()],\n\t\t\tmetadata,\n\t\t\tverbose,\n\t\t\tcallbacks\n\t\t});\n\t\telse {\n\t\t\tconst params = {\n\t\t\t\tvectorStore: this,\n\t\t\t\tk: kOrFields?.k,\n\t\t\t\tfilter: kOrFields?.filter,\n\t\t\t\ttags: [...kOrFields?.tags ?? [], this._vectorstoreType()],\n\t\t\t\tmetadata: kOrFields?.metadata,\n\t\t\t\tverbose: kOrFields?.verbose,\n\t\t\t\tcallbacks: kOrFields?.callbacks,\n\t\t\t\tsearchType: kOrFields?.searchType\n\t\t\t};\n\t\t\tif (kOrFields?.searchType === \"mmr\") return new VectorStoreRetriever({\n\t\t\t\t...params,\n\t\t\t\tsearchKwargs: kOrFields.searchKwargs\n\t\t\t});\n\t\t\treturn new VectorStoreRetriever({ ...params });\n\t\t}\n\t}\n};\n/**\n* Abstract class extending `VectorStore` that defines a contract for saving\n* and loading vector store instances.\n*\n* The `SaveableVectorStore` class allows vector store implementations to\n* persist their data and retrieve it when needed.The format for saving and\n* loading data is left to the implementing subclass.\n*\n* Subclasses must implement the `save` method to handle their custom\n* serialization logic, while the `load` method enables reconstruction of a\n* vector store from saved data, requiring compatible embeddings through the\n* `EmbeddingsInterface`.\n*\n* @abstract\n* @extends VectorStore\n*/\nvar SaveableVectorStore = class extends VectorStore {\n\t/**\n\t* Loads a vector store instance from the specified directory, using the\n\t* provided embeddings to ensure compatibility.\n\t*\n\t* This static method reconstructs a `SaveableVectorStore` from previously\n\t* saved data. Implementations should interpret the saved data format to\n\t* recreate the vector store instance.\n\t*\n\t* @param _directory - The directory path from which the vector store\n\t* data will be loaded.\n\t* @param _embeddings - An instance of `EmbeddingsInterface` to align\n\t* the embeddings with the loaded vector data.\n\t* @returns A promise that resolves to a `SaveableVectorStore` instance\n\t* constructed from the saved data.\n\t*/\n\tstatic load(_directory, _embeddings) {\n\t\tthrow new Error(\"Not implemented\");\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=vectorstores.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdmVjdG9yc3RvcmVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBMEQ7QUFDSjtBQUNBOztBQUV0RDtBQUNBO0FBQ0Esc0VBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsK0RBQWE7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzSUFBc0kseUJBQXlCO0FBQy9KO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsK0RBQVk7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsWUFBWTtBQUNqQyxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLHFDQUFxQyxXQUFXO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUN3RjtBQUN4RiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3ZlY3RvcnN0b3Jlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4cG9ydCB9IGZyb20gXCIuL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IFNlcmlhbGl6YWJsZSB9IGZyb20gXCIuL2xvYWQvc2VyaWFsaXphYmxlLmpzXCI7XG5pbXBvcnQgeyBCYXNlUmV0cmlldmVyIH0gZnJvbSBcIi4vcmV0cmlldmVycy9pbmRleC5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3ZlY3RvcnN0b3Jlcy50c1xudmFyIHZlY3RvcnN0b3Jlc19leHBvcnRzID0ge307XG5fX2V4cG9ydCh2ZWN0b3JzdG9yZXNfZXhwb3J0cywge1xuXHRTYXZlYWJsZVZlY3RvclN0b3JlOiAoKSA9PiBTYXZlYWJsZVZlY3RvclN0b3JlLFxuXHRWZWN0b3JTdG9yZTogKCkgPT4gVmVjdG9yU3RvcmUsXG5cdFZlY3RvclN0b3JlUmV0cmlldmVyOiAoKSA9PiBWZWN0b3JTdG9yZVJldHJpZXZlclxufSk7XG4vKipcbiogQ2xhc3MgZm9yIHJldHJpZXZpbmcgZG9jdW1lbnRzIGZyb20gYSBgVmVjdG9yU3RvcmVgIGJhc2VkIG9uIHZlY3RvciBzaW1pbGFyaXR5XG4qIG9yIG1heGltYWwgbWFyZ2luYWwgcmVsZXZhbmNlIChNTVIpLlxuKlxuKiBgVmVjdG9yU3RvcmVSZXRyaWV2ZXJgIGV4dGVuZHMgYEJhc2VSZXRyaWV2ZXJgLCBpbXBsZW1lbnRpbmcgbWV0aG9kcyBmb3JcbiogYWRkaW5nIGRvY3VtZW50cyB0byB0aGUgdW5kZXJseWluZyB2ZWN0b3Igc3RvcmUgYW5kIHBlcmZvcm1pbmcgZG9jdW1lbnRcbiogcmV0cmlldmFsIHdpdGggb3B0aW9uYWwgY29uZmlndXJhdGlvbnMuXG4qXG4qIEBjbGFzcyBWZWN0b3JTdG9yZVJldHJpZXZlclxuKiBAZXh0ZW5kcyBCYXNlUmV0cmlldmVyXG4qIEBpbXBsZW1lbnRzIFZlY3RvclN0b3JlUmV0cmlldmVySW50ZXJmYWNlXG4qIEB0ZW1wbGF0ZSBWIC0gVHlwZSBvZiB2ZWN0b3Igc3RvcmUgaW1wbGVtZW50aW5nIGBWZWN0b3JTdG9yZUludGVyZmFjZWAuXG4qL1xudmFyIFZlY3RvclN0b3JlUmV0cmlldmVyID0gY2xhc3MgZXh0ZW5kcyBCYXNlUmV0cmlldmVyIHtcblx0c3RhdGljIGxjX25hbWUoKSB7XG5cdFx0cmV0dXJuIFwiVmVjdG9yU3RvcmVSZXRyaWV2ZXJcIjtcblx0fVxuXHRnZXQgbGNfbmFtZXNwYWNlKCkge1xuXHRcdHJldHVybiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInZlY3RvcnN0b3Jlc1wiXTtcblx0fVxuXHQvKipcblx0KiBUaGUgaW5zdGFuY2Ugb2YgYFZlY3RvclN0b3JlYCB1c2VkIGZvciBzdG9yaW5nIGFuZCByZXRyaWV2aW5nIGRvY3VtZW50IGVtYmVkZGluZ3MuXG5cdCogVGhpcyB2ZWN0b3Igc3RvcmUgbXVzdCBpbXBsZW1lbnQgdGhlIGBWZWN0b3JTdG9yZUludGVyZmFjZWAgdG8gYmUgY29tcGF0aWJsZVxuXHQqIHdpdGggdGhlIHJldHJpZXZlcuKAmXMgb3BlcmF0aW9ucy5cblx0Ki9cblx0dmVjdG9yU3RvcmU7XG5cdC8qKlxuXHQqIFNwZWNpZmllcyB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyB0byByZXRyaWV2ZSBmb3IgZWFjaCBzZWFyY2ggcXVlcnkuXG5cdCogRGVmYXVsdHMgdG8gNCBpZiBub3Qgc3BlY2lmaWVkLCBwcm92aWRpbmcgYSBiYXNpYyByZXN1bHQgY291bnQgZm9yIHNpbWlsYXJpdHkgb3IgTU1SIHNlYXJjaGVzLlxuXHQqL1xuXHRrID0gNDtcblx0LyoqXG5cdCogRGV0ZXJtaW5lcyB0aGUgdHlwZSBvZiBzZWFyY2ggb3BlcmF0aW9uIHRvIHBlcmZvcm0gb24gdGhlIHZlY3RvciBzdG9yZS5cblx0KlxuXHQqIC0gYFwic2ltaWxhcml0eVwiYCAoZGVmYXVsdCk6IENvbmR1Y3RzIGEgc2ltaWxhcml0eSBzZWFyY2ggYmFzZWQgcHVyZWx5IG9uIHZlY3RvciBzaW1pbGFyaXR5XG5cdCogICB0byB0aGUgcXVlcnkuXG5cdCogLSBgXCJtbXJcImA6IEV4ZWN1dGVzIGEgbWF4aW1hbCBtYXJnaW5hbCByZWxldmFuY2UgKE1NUikgc2VhcmNoLCBiYWxhbmNpbmcgcmVsZXZhbmNlIGFuZFxuXHQqICAgZGl2ZXJzaXR5IGluIHRoZSByZXRyaWV2ZWQgcmVzdWx0cy5cblx0Ki9cblx0c2VhcmNoVHlwZSA9IFwic2ltaWxhcml0eVwiO1xuXHQvKipcblx0KiBBZGRpdGlvbmFsIG9wdGlvbnMgc3BlY2lmaWMgdG8gbWF4aW1hbCBtYXJnaW5hbCByZWxldmFuY2UgKE1NUikgc2VhcmNoLCBhcHBsaWNhYmxlXG5cdCogb25seSBpZiBgc2VhcmNoVHlwZWAgaXMgc2V0IHRvIGBcIm1tclwiYC5cblx0KlxuXHQqIEluY2x1ZGVzOlxuXHQqIC0gYGZldGNoS2A6IFRoZSBpbml0aWFsIG51bWJlciBvZiBkb2N1bWVudHMgZmV0Y2hlZCBiZWZvcmUgYXBwbHlpbmcgdGhlIE1NUiBhbGdvcml0aG0sXG5cdCogICBhbGxvd2luZyBmb3IgYSBsYXJnZXIgc2VsZWN0aW9uIGZyb20gd2hpY2ggdG8gY2hvb3NlIHRoZSBtb3N0IGRpdmVyc2UgcmVzdWx0cy5cblx0KiAtIGBsYW1iZGFgOiBBIHBhcmFtZXRlciBiZXR3ZWVuIDAgYW5kIDEgdG8gYWRqdXN0IHRoZSByZWxldmFuY2UtZGl2ZXJzaXR5IGJhbGFuY2UsXG5cdCogICB3aGVyZSAwIHByaW9yaXRpemVzIGRpdmVyc2l0eSBhbmQgMSBwcmlvcml0aXplcyByZWxldmFuY2UuXG5cdCovXG5cdHNlYXJjaEt3YXJncztcblx0LyoqXG5cdCogT3B0aW9uYWwgZmlsdGVyIGFwcGxpZWQgdG8gc2VhcmNoIHJlc3VsdHMsIGRlZmluZWQgYnkgdGhlIGBGaWx0ZXJUeXBlYCBvZiB0aGUgdmVjdG9yIHN0b3JlLlxuXHQqIEFsbG93cyBmb3IgcmVmaW5lZCwgdGFyZ2V0ZWQgcmVzdWx0cyBieSByZXN0cmljdGluZyB0aGUgcmV0dXJuZWQgZG9jdW1lbnRzIGJhc2VkXG5cdCogb24gc3BlY2lmaWVkIGZpbHRlciBjcml0ZXJpYS5cblx0Ki9cblx0ZmlsdGVyO1xuXHQvKipcblx0KiBSZXR1cm5zIHRoZSB0eXBlIG9mIHZlY3RvciBzdG9yZSwgYXMgZGVmaW5lZCBieSB0aGUgYHZlY3RvclN0b3JlYCBpbnN0YW5jZS5cblx0KlxuXHQqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSB2ZWN0b3Igc3RvcmUgdHlwZS5cblx0Ki9cblx0X3ZlY3RvcnN0b3JlVHlwZSgpIHtcblx0XHRyZXR1cm4gdGhpcy52ZWN0b3JTdG9yZS5fdmVjdG9yc3RvcmVUeXBlKCk7XG5cdH1cblx0LyoqXG5cdCogSW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgYFZlY3RvclN0b3JlUmV0cmlldmVyYCB3aXRoIHRoZSBzcGVjaWZpZWQgY29uZmlndXJhdGlvbi5cblx0KlxuXHQqIFRoaXMgY29uc3RydWN0b3IgY29uZmlndXJlcyB0aGUgcmV0cmlldmVyIHRvIGludGVyYWN0IHdpdGggYSBnaXZlbiBgVmVjdG9yU3RvcmVgXG5cdCogYW5kIHN1cHBvcnRzIGRpZmZlcmVudCByZXRyaWV2YWwgc3RyYXRlZ2llcywgaW5jbHVkaW5nIHNpbWlsYXJpdHkgc2VhcmNoIGFuZCBtYXhpbWFsXG5cdCogbWFyZ2luYWwgcmVsZXZhbmNlIChNTVIpIHNlYXJjaC4gVmFyaW91cyBvcHRpb25zIGFsbG93IGN1c3RvbWl6YXRpb24gb2YgdGhlIG51bWJlclxuXHQqIG9mIGRvY3VtZW50cyByZXRyaWV2ZWQgcGVyIHF1ZXJ5LCBmaWx0ZXJpbmcgYmFzZWQgb24gY29uZGl0aW9ucywgYW5kIGZpbmUtdHVuaW5nXG5cdCogTU1SLXNwZWNpZmljIHBhcmFtZXRlcnMuXG5cdCpcblx0KiBAcGFyYW0gZmllbGRzIC0gQ29uZmlndXJhdGlvbiBvcHRpb25zIGZvciBzZXR0aW5nIHVwIHRoZSByZXRyaWV2ZXI6XG5cdCpcblx0KiAgIC0gYHZlY3RvclN0b3JlYCAocmVxdWlyZWQpOiBUaGUgYFZlY3RvclN0b3JlYCBpbnN0YW5jZSBpbXBsZW1lbnRpbmcgYFZlY3RvclN0b3JlSW50ZXJmYWNlYFxuXHQqICAgICB0aGF0IHdpbGwgYmUgdXNlZCB0byBzdG9yZSBhbmQgcmV0cmlldmUgZG9jdW1lbnQgZW1iZWRkaW5ncy4gVGhpcyBpcyB0aGUgY29yZSBjb21wb25lbnRcblx0KiAgICAgb2YgdGhlIHJldHJpZXZlciwgZW5hYmxpbmcgdmVjdG9yLWJhc2VkIHNpbWlsYXJpdHkgYW5kIE1NUiBzZWFyY2hlcy5cblx0KlxuXHQqICAgLSBga2AgKG9wdGlvbmFsKTogU3BlY2lmaWVzIHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHRvIHJldHJpZXZlIHBlciBzZWFyY2ggcXVlcnkuIElmIG5vdFxuXHQqICAgICBwcm92aWRlZCwgZGVmYXVsdHMgdG8gNC4gVGhpcyBjb3VudCBkZXRlcm1pbmVzIHRoZSBudW1iZXIgb2YgbW9zdCByZWxldmFudCBkb2N1bWVudHMgcmV0dXJuZWRcblx0KiAgICAgZm9yIGVhY2ggc2VhcmNoIG9wZXJhdGlvbiwgYmFsYW5jaW5nIHBlcmZvcm1hbmNlIHdpdGggY29tcHJlaGVuc2l2ZW5lc3MuXG5cdCpcblx0KiAgIC0gYHNlYXJjaFR5cGVgIChvcHRpb25hbCk6IERlZmluZXMgdGhlIHNlYXJjaCBhcHByb2FjaCB1c2VkIGJ5IHRoZSByZXRyaWV2ZXIsIGFsbG93aW5nIGZvclxuXHQqICAgICBmbGV4aWJpbGl0eSBiZXR3ZWVuIHR3byBtZXRob2RzOlxuXHQqICAgICAgIC0gYFwic2ltaWxhcml0eVwiYCAoZGVmYXVsdCk6IEEgc2ltaWxhcml0eS1iYXNlZCBzZWFyY2gsIHJldHJpZXZpbmcgZG9jdW1lbnRzIHdpdGggaGlnaCB2ZWN0b3Jcblx0KiAgICAgICAgIHNpbWlsYXJpdHkgdG8gdGhlIHF1ZXJ5LiBUaGlzIHR5cGUgcHJpb3JpdGl6ZXMgcmVsZXZhbmNlIGFuZCBpcyBvZnRlbiB1c2VkIHdoZW4gZGl2ZXJzaXR5XG5cdCogICAgICAgICBhbW9uZyByZXN1bHRzIGlzIGxlc3MgY3JpdGljYWwuXG5cdCogICAgICAgLSBgXCJtbXJcImA6IE1heGltYWwgTWFyZ2luYWwgUmVsZXZhbmNlIHNlYXJjaCwgd2hpY2ggY29tYmluZXMgcmVsZXZhbmNlIHdpdGggZGl2ZXJzaXR5LiBNTVJcblx0KiAgICAgICAgIGlzIHVzZWZ1bCBmb3Igc2NlbmFyaW9zIHdoZXJlIHZhcmllZCBjb250ZW50IGlzIGVzc2VudGlhbCwgYXMgaXQgc2VsZWN0cyByZXN1bHRzIHRoYXRcblx0KiAgICAgICAgIGJvdGggbWF0Y2ggdGhlIHF1ZXJ5IGFuZCBpbnRyb2R1Y2UgY29udGVudCBkaXZlcnNpdHkuXG5cdCpcblx0KiAgIC0gYGZpbHRlcmAgKG9wdGlvbmFsKTogQSBmaWx0ZXIgb2YgdHlwZSBgRmlsdGVyVHlwZWAsIGRlZmluZWQgYnkgdGhlIHZlY3RvciBzdG9yZSwgdGhhdCBhbGxvd3Ncblx0KiAgICAgZm9yIHJlZmluZWQgYW5kIHRhcmdldGVkIHNlYXJjaCByZXN1bHRzLiBUaGlzIGZpbHRlciBhcHBsaWVzIHNwZWNpZmllZCBjb25kaXRpb25zIHRvIGxpbWl0XG5cdCogICAgIHdoaWNoIGRvY3VtZW50cyBhcmUgZWxpZ2libGUgZm9yIHJldHJpZXZhbCwgb2ZmZXJpbmcgY29udHJvbCBvdmVyIHRoZSBzY29wZSBvZiByZXN1bHRzLlxuXHQqXG5cdCogICAtIGBzZWFyY2hLd2FyZ3NgIChvcHRpb25hbCwgYXBwbGljYWJsZSBvbmx5IGlmIGBzZWFyY2hUeXBlYCBpcyBgXCJtbXJcImApOiBBZGRpdGlvbmFsIHNldHRpbmdzXG5cdCogICAgIGZvciBjb25maWd1cmluZyBNTVItc3BlY2lmaWMgYmVoYXZpb3IuIFRoZXNlIHBhcmFtZXRlcnMgYWxsb3cgZnVydGhlciB0dW5pbmcgb2YgdGhlIE1NUlxuXHQqICAgICBzZWFyY2ggcHJvY2Vzczpcblx0KiAgICAgICAtIGBmZXRjaEtgOiBUaGUgaW5pdGlhbCBudW1iZXIgb2YgZG9jdW1lbnRzIGZldGNoZWQgZnJvbSB0aGUgdmVjdG9yIHN0b3JlIGJlZm9yZSB0aGUgTU1SXG5cdCogICAgICAgICBhbGdvcml0aG0gaXMgYXBwbGllZC4gRmV0Y2hpbmcgYSBsYXJnZXIgc2V0IGVuYWJsZXMgdGhlIGFsZ29yaXRobSB0byBzZWxlY3QgYSBtb3JlXG5cdCogICAgICAgICBkaXZlcnNlIHN1YnNldCBvZiBkb2N1bWVudHMuXG5cdCogICAgICAgLSBgbGFtYmRhYDogQSBwYXJhbWV0ZXIgY29udHJvbGxpbmcgdGhlIHJlbGV2YW5jZS1kaXZlcnNpdHkgYmFsYW5jZSwgd2hlcmUgMCBlbXBoYXNpemVzXG5cdCogICAgICAgICBkaXZlcnNpdHkgYW5kIDEgcHJpb3JpdGl6ZXMgcmVsZXZhbmNlLiBJbnRlcm1lZGlhdGUgdmFsdWVzIHByb3ZpZGUgYSBibGVuZCBvZiB0aGUgdHdvLFxuXHQqICAgICAgICAgYWxsb3dpbmcgY3VzdG9taXphdGlvbiBiYXNlZCBvbiB0aGUgaW1wb3J0YW5jZSBvZiBjb250ZW50IHZhcmlldHkgcmVsYXRpdmUgdG8gcXVlcnkgcmVsZXZhbmNlLlxuXHQqL1xuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHRzdXBlcihmaWVsZHMpO1xuXHRcdHRoaXMudmVjdG9yU3RvcmUgPSBmaWVsZHMudmVjdG9yU3RvcmU7XG5cdFx0dGhpcy5rID0gZmllbGRzLmsgPz8gdGhpcy5rO1xuXHRcdHRoaXMuc2VhcmNoVHlwZSA9IGZpZWxkcy5zZWFyY2hUeXBlID8/IHRoaXMuc2VhcmNoVHlwZTtcblx0XHR0aGlzLmZpbHRlciA9IGZpZWxkcy5maWx0ZXI7XG5cdFx0aWYgKGZpZWxkcy5zZWFyY2hUeXBlID09PSBcIm1tclwiKSB0aGlzLnNlYXJjaEt3YXJncyA9IGZpZWxkcy5zZWFyY2hLd2FyZ3M7XG5cdH1cblx0LyoqXG5cdCogUmV0cmlldmVzIHJlbGV2YW50IGRvY3VtZW50cyBiYXNlZCBvbiB0aGUgc3BlY2lmaWVkIHF1ZXJ5LCB1c2luZyBlaXRoZXJcblx0KiBzaW1pbGFyaXR5IG9yIG1heGltYWwgbWFyZ2luYWwgcmVsZXZhbmNlIChNTVIpIHNlYXJjaC5cblx0KlxuXHQqIElmIGBzZWFyY2hUeXBlYCBpcyBzZXQgdG8gYFwibW1yXCJgLCBwZXJmb3JtcyBhbiBNTVIgc2VhcmNoIHRvIGJhbGFuY2Vcblx0KiBzaW1pbGFyaXR5IGFuZCBkaXZlcnNpdHkgYW1vbmcgcmVzdWx0cy4gSWYgYHNlYXJjaFR5cGVgIGlzIGBcInNpbWlsYXJpdHlcImAsXG5cdCogcmV0cmlldmVzIHJlc3VsdHMgcHVyZWx5IGJhc2VkIG9uIHNpbWlsYXJpdHkgdG8gdGhlIHF1ZXJ5LlxuXHQqXG5cdCogQHBhcmFtIHF1ZXJ5IC0gVGhlIHF1ZXJ5IHN0cmluZyB1c2VkIHRvIGZpbmQgcmVsZXZhbnQgZG9jdW1lbnRzLlxuXHQqIEBwYXJhbSBydW5NYW5hZ2VyIC0gT3B0aW9uYWwgY2FsbGJhY2sgbWFuYWdlciBmb3IgdHJhY2tpbmcgcmV0cmlldmFsIHByb2dyZXNzLlxuXHQqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGFuIGFycmF5IG9mIGBEb2N1bWVudEludGVyZmFjZWAgaW5zdGFuY2VzXG5cdCogICAgICAgICAgcmVwcmVzZW50aW5nIHRoZSBtb3N0IHJlbGV2YW50IGRvY3VtZW50cyB0byB0aGUgcXVlcnkuXG5cdCogQHRocm93cyB7RXJyb3J9IFRocm93cyBhbiBlcnJvciBpZiBNTVIgc2VhcmNoIGlzIHJlcXVlc3RlZCBidXQgbm90IHN1cHBvcnRlZFxuXHQqICAgICAgICAgICAgICAgICBieSB0aGUgdmVjdG9yIHN0b3JlLlxuXHQqIEBwcm90ZWN0ZWRcblx0Ki9cblx0YXN5bmMgX2dldFJlbGV2YW50RG9jdW1lbnRzKHF1ZXJ5LCBydW5NYW5hZ2VyKSB7XG5cdFx0aWYgKHRoaXMuc2VhcmNoVHlwZSA9PT0gXCJtbXJcIikge1xuXHRcdFx0aWYgKHR5cGVvZiB0aGlzLnZlY3RvclN0b3JlLm1heE1hcmdpbmFsUmVsZXZhbmNlU2VhcmNoICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBFcnJvcihgVGhlIHZlY3RvciBzdG9yZSBiYWNraW5nIHRoaXMgcmV0cmlldmVyLCAke3RoaXMuX3ZlY3RvcnN0b3JlVHlwZSgpfSBkb2VzIG5vdCBzdXBwb3J0IG1heCBtYXJnaW5hbCByZWxldmFuY2Ugc2VhcmNoLmApO1xuXHRcdFx0cmV0dXJuIHRoaXMudmVjdG9yU3RvcmUubWF4TWFyZ2luYWxSZWxldmFuY2VTZWFyY2gocXVlcnksIHtcblx0XHRcdFx0azogdGhpcy5rLFxuXHRcdFx0XHRmaWx0ZXI6IHRoaXMuZmlsdGVyLFxuXHRcdFx0XHQuLi50aGlzLnNlYXJjaEt3YXJnc1xuXHRcdFx0fSwgcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoXCJ2ZWN0b3JzdG9yZVwiKSk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLnZlY3RvclN0b3JlLnNpbWlsYXJpdHlTZWFyY2gocXVlcnksIHRoaXMuaywgdGhpcy5maWx0ZXIsIHJ1bk1hbmFnZXI/LmdldENoaWxkKFwidmVjdG9yc3RvcmVcIikpO1xuXHR9XG5cdC8qKlxuXHQqIEFkZHMgYW4gYXJyYXkgb2YgZG9jdW1lbnRzIHRvIHRoZSB2ZWN0b3Igc3RvcmUsIGVtYmVkZGluZyB0aGVtIGFzIHBhcnQgb2Zcblx0KiB0aGUgc3RvcmFnZSBwcm9jZXNzLlxuXHQqXG5cdCogVGhpcyBtZXRob2QgZGVsZWdhdGVzIGRvY3VtZW50IGVtYmVkZGluZyBhbmQgc3RvcmFnZSB0byB0aGUgYGFkZERvY3VtZW50c2Bcblx0KiBtZXRob2Qgb2YgdGhlIHVuZGVybHlpbmcgdmVjdG9yIHN0b3JlLlxuXHQqXG5cdCogQHBhcmFtIGRvY3VtZW50cyAtIEFuIGFycmF5IG9mIGRvY3VtZW50cyB0byBlbWJlZCBhbmQgYWRkIHRvIHRoZSB2ZWN0b3Igc3RvcmUuXG5cdCogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyB0byBjdXN0b21pemUgZG9jdW1lbnQgYWRkaXRpb24uXG5cdCogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gYXJyYXkgb2YgZG9jdW1lbnQgSURzIG9yIGB2b2lkYCxcblx0KiAgICAgICAgICBkZXBlbmRpbmcgb24gdGhlIHZlY3RvciBzdG9yZSdzIGltcGxlbWVudGF0aW9uLlxuXHQqL1xuXHRhc3luYyBhZGREb2N1bWVudHMoZG9jdW1lbnRzLCBvcHRpb25zKSB7XG5cdFx0cmV0dXJuIHRoaXMudmVjdG9yU3RvcmUuYWRkRG9jdW1lbnRzKGRvY3VtZW50cywgb3B0aW9ucyk7XG5cdH1cbn07XG4vKipcbiogQWJzdHJhY3QgY2xhc3MgcmVwcmVzZW50aW5nIGEgdmVjdG9yIHN0b3JhZ2Ugc3lzdGVtIGZvciBwZXJmb3JtaW5nXG4qIHNpbWlsYXJpdHkgc2VhcmNoZXMgb24gZW1iZWRkZWQgZG9jdW1lbnRzLlxuKlxuKiBgVmVjdG9yU3RvcmVgIHByb3ZpZGVzIG1ldGhvZHMgZm9yIGFkZGluZyBwcmVjb21wdXRlZCB2ZWN0b3JzIG9yIGRvY3VtZW50cyxcbiogcmVtb3ZpbmcgZG9jdW1lbnRzIGJhc2VkIG9uIGNyaXRlcmlhLCBhbmQgcGVyZm9ybWluZyBzaW1pbGFyaXR5IHNlYXJjaGVzXG4qIHdpdGggb3B0aW9uYWwgc2NvcmluZy4gU3ViY2xhc3NlcyBhcmUgcmVzcG9uc2libGUgZm9yIGltcGxlbWVudGluZyBzcGVjaWZpY1xuKiBzdG9yYWdlIG1lY2hhbmlzbXMgYW5kIHRoZSBleGFjdCBiZWhhdmlvciBvZiBjZXJ0YWluIGFic3RyYWN0IG1ldGhvZHMuXG4qXG4qIEBhYnN0cmFjdFxuKiBAZXh0ZW5kcyBTZXJpYWxpemFibGVcbiogQGltcGxlbWVudHMgVmVjdG9yU3RvcmVJbnRlcmZhY2VcbiovXG52YXIgVmVjdG9yU3RvcmUgPSBjbGFzcyBleHRlbmRzIFNlcmlhbGl6YWJsZSB7XG5cdC8qKlxuXHQqIE5hbWVzcGFjZSB3aXRoaW4gTGFuZ0NoYWluIHRvIHVuaXF1ZWx5IGlkZW50aWZ5IHRoaXMgdmVjdG9yIHN0b3JlJ3Ncblx0KiBsb2NhdGlvbiwgYmFzZWQgb24gdGhlIHZlY3RvciBzdG9yZSB0eXBlLlxuXHQqXG5cdCogQGludGVybmFsXG5cdCovXG5cdGxjX25hbWVzcGFjZSA9IFtcblx0XHRcImxhbmdjaGFpblwiLFxuXHRcdFwidmVjdG9yc3RvcmVzXCIsXG5cdFx0dGhpcy5fdmVjdG9yc3RvcmVUeXBlKClcblx0XTtcblx0LyoqXG5cdCogRW1iZWRkaW5ncyBpbnRlcmZhY2UgZm9yIGdlbmVyYXRpbmcgdmVjdG9yIGVtYmVkZGluZ3MgZnJvbSB0ZXh0IHF1ZXJpZXMsXG5cdCogZW5hYmxpbmcgdmVjdG9yLWJhc2VkIHNpbWlsYXJpdHkgc2VhcmNoZXMuXG5cdCovXG5cdGVtYmVkZGluZ3M7XG5cdC8qKlxuXHQqIEluaXRpYWxpemVzIGEgbmV3IHZlY3RvciBzdG9yZSB3aXRoIGVtYmVkZGluZ3MgYW5kIGRhdGFiYXNlIGNvbmZpZ3VyYXRpb24uXG5cdCpcblx0KiBAcGFyYW0gZW1iZWRkaW5ncyAtIEluc3RhbmNlIG9mIGBFbWJlZGRpbmdzSW50ZXJmYWNlYCB1c2VkIHRvIGVtYmVkIHF1ZXJpZXMuXG5cdCogQHBhcmFtIGRiQ29uZmlnIC0gQ29uZmlndXJhdGlvbiBzZXR0aW5ncyBmb3IgdGhlIGRhdGFiYXNlIG9yIHN0b3JhZ2Ugc3lzdGVtLlxuXHQqL1xuXHRjb25zdHJ1Y3RvcihlbWJlZGRpbmdzLCBkYkNvbmZpZykge1xuXHRcdHN1cGVyKGRiQ29uZmlnKTtcblx0XHR0aGlzLmVtYmVkZGluZ3MgPSBlbWJlZGRpbmdzO1xuXHR9XG5cdC8qKlxuXHQqIERlbGV0ZXMgZG9jdW1lbnRzIGZyb20gdGhlIHZlY3RvciBzdG9yZSBiYXNlZCBvbiB0aGUgc3BlY2lmaWVkIHBhcmFtZXRlcnMuXG5cdCpcblx0KiBAcGFyYW0gX3BhcmFtcyAtIEZsZXhpYmxlIGtleS12YWx1ZSBwYWlycyBkZWZpbmluZyBjb25kaXRpb25zIGZvciBkb2N1bWVudCBkZWxldGlvbi5cblx0KiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyBvbmNlIHRoZSBkZWxldGlvbiBpcyBjb21wbGV0ZS5cblx0Ki9cblx0YXN5bmMgZGVsZXRlKF9wYXJhbXMpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWQuXCIpO1xuXHR9XG5cdC8qKlxuXHQqIFNlYXJjaGVzIGZvciBkb2N1bWVudHMgc2ltaWxhciB0byBhIHRleHQgcXVlcnkgYnkgZW1iZWRkaW5nIHRoZSBxdWVyeSBhbmRcblx0KiBwZXJmb3JtaW5nIGEgc2ltaWxhcml0eSBzZWFyY2ggb24gdGhlIHJlc3VsdGluZyB2ZWN0b3IuXG5cdCpcblx0KiBAcGFyYW0gcXVlcnkgLSBUZXh0IHF1ZXJ5IGZvciBmaW5kaW5nIHNpbWlsYXIgZG9jdW1lbnRzLlxuXHQqIEBwYXJhbSBrIC0gTnVtYmVyIG9mIHNpbWlsYXIgcmVzdWx0cyB0byByZXR1cm4uIERlZmF1bHRzIHRvIDQuXG5cdCogQHBhcmFtIGZpbHRlciAtIE9wdGlvbmFsIGZpbHRlciBiYXNlZCBvbiBgRmlsdGVyVHlwZWAuXG5cdCogQHBhcmFtIF9jYWxsYmFja3MgLSBPcHRpb25hbCBjYWxsYmFja3MgZm9yIG1vbml0b3Jpbmcgc2VhcmNoIHByb2dyZXNzXG5cdCogQHJldHVybnMgQSBwcm9taXNlIHJlc29sdmluZyB0byBhbiBhcnJheSBvZiBgRG9jdW1lbnRJbnRlcmZhY2VgIGluc3RhbmNlcyByZXByZXNlbnRpbmcgc2ltaWxhciBkb2N1bWVudHMuXG5cdCovXG5cdGFzeW5jIHNpbWlsYXJpdHlTZWFyY2gocXVlcnksIGsgPSA0LCBmaWx0ZXIgPSB2b2lkIDAsIF9jYWxsYmFja3MgPSB2b2lkIDApIHtcblx0XHRjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5zaW1pbGFyaXR5U2VhcmNoVmVjdG9yV2l0aFNjb3JlKGF3YWl0IHRoaXMuZW1iZWRkaW5ncy5lbWJlZFF1ZXJ5KHF1ZXJ5KSwgaywgZmlsdGVyKTtcblx0XHRyZXR1cm4gcmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4gcmVzdWx0WzBdKTtcblx0fVxuXHQvKipcblx0KiBTZWFyY2hlcyBmb3IgZG9jdW1lbnRzIHNpbWlsYXIgdG8gYSB0ZXh0IHF1ZXJ5IGJ5IGVtYmVkZGluZyB0aGUgcXVlcnksXG5cdCogYW5kIHJldHVybnMgcmVzdWx0cyB3aXRoIHNpbWlsYXJpdHkgc2NvcmVzLlxuXHQqXG5cdCogQHBhcmFtIHF1ZXJ5IC0gVGV4dCBxdWVyeSBmb3IgZmluZGluZyBzaW1pbGFyIGRvY3VtZW50cy5cblx0KiBAcGFyYW0gayAtIE51bWJlciBvZiBzaW1pbGFyIHJlc3VsdHMgdG8gcmV0dXJuLiBEZWZhdWx0cyB0byA0LlxuXHQqIEBwYXJhbSBmaWx0ZXIgLSBPcHRpb25hbCBmaWx0ZXIgYmFzZWQgb24gYEZpbHRlclR5cGVgLlxuXHQqIEBwYXJhbSBfY2FsbGJhY2tzIC0gT3B0aW9uYWwgY2FsbGJhY2tzIGZvciBtb25pdG9yaW5nIHNlYXJjaCBwcm9ncmVzc1xuXHQqIEByZXR1cm5zIEEgcHJvbWlzZSByZXNvbHZpbmcgdG8gYW4gYXJyYXkgb2YgdHVwbGVzLCBlYWNoIGNvbnRhaW5pbmcgYVxuXHQqICAgICAgICAgIGRvY3VtZW50IGFuZCBpdHMgc2ltaWxhcml0eSBzY29yZS5cblx0Ki9cblx0YXN5bmMgc2ltaWxhcml0eVNlYXJjaFdpdGhTY29yZShxdWVyeSwgayA9IDQsIGZpbHRlciA9IHZvaWQgMCwgX2NhbGxiYWNrcyA9IHZvaWQgMCkge1xuXHRcdHJldHVybiB0aGlzLnNpbWlsYXJpdHlTZWFyY2hWZWN0b3JXaXRoU2NvcmUoYXdhaXQgdGhpcy5lbWJlZGRpbmdzLmVtYmVkUXVlcnkocXVlcnkpLCBrLCBmaWx0ZXIpO1xuXHR9XG5cdC8qKlxuXHQqIENyZWF0ZXMgYSBgVmVjdG9yU3RvcmVgIGluc3RhbmNlIGZyb20gYW4gYXJyYXkgb2YgdGV4dCBzdHJpbmdzIGFuZCBvcHRpb25hbFxuXHQqIG1ldGFkYXRhLCB1c2luZyB0aGUgc3BlY2lmaWVkIGVtYmVkZGluZ3MgYW5kIGRhdGFiYXNlIGNvbmZpZ3VyYXRpb24uXG5cdCpcblx0KiBTdWJjbGFzc2VzIG11c3QgaW1wbGVtZW50IHRoaXMgbWV0aG9kIHRvIGRlZmluZSBob3cgdGV4dCBhbmQgbWV0YWRhdGFcblx0KiBhcmUgZW1iZWRkZWQgYW5kIHN0b3JlZCBpbiB0aGUgdmVjdG9yIHN0b3JlLiBUaHJvd3MgYW4gZXJyb3IgaWYgbm90IG92ZXJyaWRkZW4uXG5cdCpcblx0KiBAcGFyYW0gX3RleHRzIC0gQXJyYXkgb2Ygc3RyaW5ncyByZXByZXNlbnRpbmcgdGhlIHRleHQgZG9jdW1lbnRzIHRvIGJlIHN0b3JlZC5cblx0KiBAcGFyYW0gX21ldGFkYXRhcyAtIE1ldGFkYXRhIGZvciB0aGUgdGV4dHMsIGVpdGhlciBhcyBhbiBhcnJheSAob25lIGZvciBlYWNoIHRleHQpXG5cdCogICAgICAgICAgICAgICAgICAgICBvciBhIHNpbmdsZSBvYmplY3QgKGFwcGxpZWQgdG8gYWxsIHRleHRzKS5cblx0KiBAcGFyYW0gX2VtYmVkZGluZ3MgLSBJbnN0YW5jZSBvZiBgRW1iZWRkaW5nc0ludGVyZmFjZWAgdG8gZW1iZWQgdGhlIHRleHRzLlxuXHQqIEBwYXJhbSBfZGJDb25maWcgLSBEYXRhYmFzZSBjb25maWd1cmF0aW9uIHNldHRpbmdzLlxuXHQqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgbmV3IGBWZWN0b3JTdG9yZWAgaW5zdGFuY2UuXG5cdCogQHRocm93cyB7RXJyb3J9IFRocm93cyBhbiBlcnJvciBpZiB0aGlzIG1ldGhvZCBpcyBub3Qgb3ZlcnJpZGRlbiBieSBhIHN1YmNsYXNzLlxuXHQqL1xuXHRzdGF0aWMgZnJvbVRleHRzKF90ZXh0cywgX21ldGFkYXRhcywgX2VtYmVkZGluZ3MsIF9kYkNvbmZpZykge1xuXHRcdHRocm93IG5ldyBFcnJvcihcInRoZSBMYW5nY2hhaW4gdmVjdG9yc3RvcmUgaW1wbGVtZW50YXRpb24geW91IGFyZSB1c2luZyBmb3Jnb3QgdG8gb3ZlcnJpZGUgdGhpcywgcGxlYXNlIHJlcG9ydCBhIGJ1Z1wiKTtcblx0fVxuXHQvKipcblx0KiBDcmVhdGVzIGEgYFZlY3RvclN0b3JlYCBpbnN0YW5jZSBmcm9tIGFuIGFycmF5IG9mIGRvY3VtZW50cywgdXNpbmcgdGhlIHNwZWNpZmllZFxuXHQqIGVtYmVkZGluZ3MgYW5kIGRhdGFiYXNlIGNvbmZpZ3VyYXRpb24uXG5cdCpcblx0KiBTdWJjbGFzc2VzIG11c3QgaW1wbGVtZW50IHRoaXMgbWV0aG9kIHRvIGRlZmluZSBob3cgZG9jdW1lbnRzIGFyZSBlbWJlZGRlZFxuXHQqIGFuZCBzdG9yZWQuIFRocm93cyBhbiBlcnJvciBpZiBub3Qgb3ZlcnJpZGRlbi5cblx0KlxuXHQqIEBwYXJhbSBfZG9jcyAtIEFycmF5IG9mIGBEb2N1bWVudEludGVyZmFjZWAgaW5zdGFuY2VzIHJlcHJlc2VudGluZyB0aGUgZG9jdW1lbnRzIHRvIGJlIHN0b3JlZC5cblx0KiBAcGFyYW0gX2VtYmVkZGluZ3MgLSBJbnN0YW5jZSBvZiBgRW1iZWRkaW5nc0ludGVyZmFjZWAgdG8gZW1iZWQgdGhlIGRvY3VtZW50cy5cblx0KiBAcGFyYW0gX2RiQ29uZmlnIC0gRGF0YWJhc2UgY29uZmlndXJhdGlvbiBzZXR0aW5ncy5cblx0KiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIG5ldyBgVmVjdG9yU3RvcmVgIGluc3RhbmNlLlxuXHQqIEB0aHJvd3Mge0Vycm9yfSBUaHJvd3MgYW4gZXJyb3IgaWYgdGhpcyBtZXRob2QgaXMgbm90IG92ZXJyaWRkZW4gYnkgYSBzdWJjbGFzcy5cblx0Ki9cblx0c3RhdGljIGZyb21Eb2N1bWVudHMoX2RvY3MsIF9lbWJlZGRpbmdzLCBfZGJDb25maWcpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJ0aGUgTGFuZ2NoYWluIHZlY3RvcnN0b3JlIGltcGxlbWVudGF0aW9uIHlvdSBhcmUgdXNpbmcgZm9yZ290IHRvIG92ZXJyaWRlIHRoaXMsIHBsZWFzZSByZXBvcnQgYSBidWdcIik7XG5cdH1cblx0LyoqXG5cdCogQ3JlYXRlcyBhIGBWZWN0b3JTdG9yZVJldHJpZXZlcmAgaW5zdGFuY2Ugd2l0aCBmbGV4aWJsZSBjb25maWd1cmF0aW9uIG9wdGlvbnMuXG5cdCpcblx0KiBAcGFyYW0ga09yRmllbGRzXG5cdCogICAgLSBJZiBhIG51bWJlciBpcyBwcm92aWRlZCwgaXQgc2V0cyB0aGUgYGtgIHBhcmFtZXRlciAobnVtYmVyIG9mIGl0ZW1zIHRvIHJldHJpZXZlKS5cblx0KiAgICAtIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCwgaXQgc2hvdWxkIGNvbnRhaW4gdmFyaW91cyBjb25maWd1cmF0aW9uIG9wdGlvbnMuXG5cdCogQHBhcmFtIGZpbHRlclxuXHQqICAgIC0gT3B0aW9uYWwgZmlsdGVyIGNyaXRlcmlhIHRvIGxpbWl0IHRoZSBpdGVtcyByZXRyaWV2ZWQgYmFzZWQgb24gdGhlIHNwZWNpZmllZCBmaWx0ZXIgdHlwZS5cblx0KiBAcGFyYW0gY2FsbGJhY2tzXG5cdCogICAgLSBPcHRpb25hbCBjYWxsYmFja3MgdGhhdCBtYXkgYmUgdHJpZ2dlcmVkIGF0IHNwZWNpZmljIHN0YWdlcyBvZiB0aGUgcmV0cmlldmFsIHByb2Nlc3MuXG5cdCogQHBhcmFtIHRhZ3Ncblx0KiAgICAtIFRhZ3MgdG8gY2F0ZWdvcml6ZSBvciBsYWJlbCB0aGUgYFZlY3RvclN0b3JlUmV0cmlldmVyYC4gRGVmYXVsdHMgdG8gYW4gZW1wdHkgYXJyYXkgaWYgbm90IHByb3ZpZGVkLlxuXHQqIEBwYXJhbSBtZXRhZGF0YVxuXHQqICAgIC0gQWRkaXRpb25hbCBtZXRhZGF0YSBhcyBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGNvbnRleHR1YWwgaW5mb3JtYXRpb24gZm9yIHRoZSByZXRyaWV2YWwgcHJvY2Vzcy5cblx0KiBAcGFyYW0gdmVyYm9zZVxuXHQqICAgIC0gSWYgYHRydWVgLCBlbmFibGVzIGRldGFpbGVkIGxvZ2dpbmcgZm9yIHRoZSByZXRyaWV2YWwgcHJvY2Vzcy4gRGVmYXVsdHMgdG8gYGZhbHNlYC5cblx0KlxuXHQqIEByZXR1cm5zXG5cdCogICAgLSBBIGNvbmZpZ3VyZWQgYFZlY3RvclN0b3JlUmV0cmlldmVyYCBpbnN0YW5jZSBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgcGFyYW1ldGVycy5cblx0KlxuXHQqIEBleGFtcGxlXG5cdCogQmFzaWMgdXNhZ2Ugd2l0aCBhIGBrYCB2YWx1ZTpcblx0KiBgYGB0eXBlc2NyaXB0XG5cdCogY29uc3QgcmV0cmlldmVyID0gbXlWZWN0b3JTdG9yZS5hc1JldHJpZXZlcig1KTtcblx0KiBgYGBcblx0KlxuXHQqIFVzYWdlIHdpdGggYSBjb25maWd1cmF0aW9uIG9iamVjdDpcblx0KiBgYGB0eXBlc2NyaXB0XG5cdCogY29uc3QgcmV0cmlldmVyID0gbXlWZWN0b3JTdG9yZS5hc1JldHJpZXZlcih7XG5cdCogICBrOiAxMCxcblx0KiAgIGZpbHRlcjogbXlGaWx0ZXIsXG5cdCogICB0YWdzOiBbJ2V4YW1wbGUnLCAndGVzdCddLFxuXHQqICAgdmVyYm9zZTogdHJ1ZSxcblx0KiAgIHNlYXJjaFR5cGU6ICdtbXInLFxuXHQqICAgc2VhcmNoS3dhcmdzOiB7IGFscGhhOiAwLjUgfSxcblx0KiB9KTtcblx0KiBgYGBcblx0Ki9cblx0YXNSZXRyaWV2ZXIoa09yRmllbGRzLCBmaWx0ZXIsIGNhbGxiYWNrcywgdGFncywgbWV0YWRhdGEsIHZlcmJvc2UpIHtcblx0XHRpZiAodHlwZW9mIGtPckZpZWxkcyA9PT0gXCJudW1iZXJcIikgcmV0dXJuIG5ldyBWZWN0b3JTdG9yZVJldHJpZXZlcih7XG5cdFx0XHR2ZWN0b3JTdG9yZTogdGhpcyxcblx0XHRcdGs6IGtPckZpZWxkcyxcblx0XHRcdGZpbHRlcixcblx0XHRcdHRhZ3M6IFsuLi50YWdzID8/IFtdLCB0aGlzLl92ZWN0b3JzdG9yZVR5cGUoKV0sXG5cdFx0XHRtZXRhZGF0YSxcblx0XHRcdHZlcmJvc2UsXG5cdFx0XHRjYWxsYmFja3Ncblx0XHR9KTtcblx0XHRlbHNlIHtcblx0XHRcdGNvbnN0IHBhcmFtcyA9IHtcblx0XHRcdFx0dmVjdG9yU3RvcmU6IHRoaXMsXG5cdFx0XHRcdGs6IGtPckZpZWxkcz8uayxcblx0XHRcdFx0ZmlsdGVyOiBrT3JGaWVsZHM/LmZpbHRlcixcblx0XHRcdFx0dGFnczogWy4uLmtPckZpZWxkcz8udGFncyA/PyBbXSwgdGhpcy5fdmVjdG9yc3RvcmVUeXBlKCldLFxuXHRcdFx0XHRtZXRhZGF0YToga09yRmllbGRzPy5tZXRhZGF0YSxcblx0XHRcdFx0dmVyYm9zZToga09yRmllbGRzPy52ZXJib3NlLFxuXHRcdFx0XHRjYWxsYmFja3M6IGtPckZpZWxkcz8uY2FsbGJhY2tzLFxuXHRcdFx0XHRzZWFyY2hUeXBlOiBrT3JGaWVsZHM/LnNlYXJjaFR5cGVcblx0XHRcdH07XG5cdFx0XHRpZiAoa09yRmllbGRzPy5zZWFyY2hUeXBlID09PSBcIm1tclwiKSByZXR1cm4gbmV3IFZlY3RvclN0b3JlUmV0cmlldmVyKHtcblx0XHRcdFx0Li4ucGFyYW1zLFxuXHRcdFx0XHRzZWFyY2hLd2FyZ3M6IGtPckZpZWxkcy5zZWFyY2hLd2FyZ3Ncblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIG5ldyBWZWN0b3JTdG9yZVJldHJpZXZlcih7IC4uLnBhcmFtcyB9KTtcblx0XHR9XG5cdH1cbn07XG4vKipcbiogQWJzdHJhY3QgY2xhc3MgZXh0ZW5kaW5nIGBWZWN0b3JTdG9yZWAgdGhhdCBkZWZpbmVzIGEgY29udHJhY3QgZm9yIHNhdmluZ1xuKiBhbmQgbG9hZGluZyB2ZWN0b3Igc3RvcmUgaW5zdGFuY2VzLlxuKlxuKiBUaGUgYFNhdmVhYmxlVmVjdG9yU3RvcmVgIGNsYXNzIGFsbG93cyB2ZWN0b3Igc3RvcmUgaW1wbGVtZW50YXRpb25zIHRvXG4qIHBlcnNpc3QgdGhlaXIgZGF0YSBhbmQgcmV0cmlldmUgaXQgd2hlbiBuZWVkZWQuVGhlIGZvcm1hdCBmb3Igc2F2aW5nIGFuZFxuKiBsb2FkaW5nIGRhdGEgaXMgbGVmdCB0byB0aGUgaW1wbGVtZW50aW5nIHN1YmNsYXNzLlxuKlxuKiBTdWJjbGFzc2VzIG11c3QgaW1wbGVtZW50IHRoZSBgc2F2ZWAgbWV0aG9kIHRvIGhhbmRsZSB0aGVpciBjdXN0b21cbiogc2VyaWFsaXphdGlvbiBsb2dpYywgd2hpbGUgdGhlIGBsb2FkYCBtZXRob2QgZW5hYmxlcyByZWNvbnN0cnVjdGlvbiBvZiBhXG4qIHZlY3RvciBzdG9yZSBmcm9tIHNhdmVkIGRhdGEsIHJlcXVpcmluZyBjb21wYXRpYmxlIGVtYmVkZGluZ3MgdGhyb3VnaCB0aGVcbiogYEVtYmVkZGluZ3NJbnRlcmZhY2VgLlxuKlxuKiBAYWJzdHJhY3RcbiogQGV4dGVuZHMgVmVjdG9yU3RvcmVcbiovXG52YXIgU2F2ZWFibGVWZWN0b3JTdG9yZSA9IGNsYXNzIGV4dGVuZHMgVmVjdG9yU3RvcmUge1xuXHQvKipcblx0KiBMb2FkcyBhIHZlY3RvciBzdG9yZSBpbnN0YW5jZSBmcm9tIHRoZSBzcGVjaWZpZWQgZGlyZWN0b3J5LCB1c2luZyB0aGVcblx0KiBwcm92aWRlZCBlbWJlZGRpbmdzIHRvIGVuc3VyZSBjb21wYXRpYmlsaXR5LlxuXHQqXG5cdCogVGhpcyBzdGF0aWMgbWV0aG9kIHJlY29uc3RydWN0cyBhIGBTYXZlYWJsZVZlY3RvclN0b3JlYCBmcm9tIHByZXZpb3VzbHlcblx0KiBzYXZlZCBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgc2hvdWxkIGludGVycHJldCB0aGUgc2F2ZWQgZGF0YSBmb3JtYXQgdG9cblx0KiByZWNyZWF0ZSB0aGUgdmVjdG9yIHN0b3JlIGluc3RhbmNlLlxuXHQqXG5cdCogQHBhcmFtIF9kaXJlY3RvcnkgLSBUaGUgZGlyZWN0b3J5IHBhdGggZnJvbSB3aGljaCB0aGUgdmVjdG9yIHN0b3JlXG5cdCogZGF0YSB3aWxsIGJlIGxvYWRlZC5cblx0KiBAcGFyYW0gX2VtYmVkZGluZ3MgLSBBbiBpbnN0YW5jZSBvZiBgRW1iZWRkaW5nc0ludGVyZmFjZWAgdG8gYWxpZ25cblx0KiB0aGUgZW1iZWRkaW5ncyB3aXRoIHRoZSBsb2FkZWQgdmVjdG9yIGRhdGEuXG5cdCogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBgU2F2ZWFibGVWZWN0b3JTdG9yZWAgaW5zdGFuY2Vcblx0KiBjb25zdHJ1Y3RlZCBmcm9tIHRoZSBzYXZlZCBkYXRhLlxuXHQqL1xuXHRzdGF0aWMgbG9hZChfZGlyZWN0b3J5LCBfZW1iZWRkaW5ncykge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZFwiKTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBTYXZlYWJsZVZlY3RvclN0b3JlLCBWZWN0b3JTdG9yZSwgVmVjdG9yU3RvcmVSZXRyaWV2ZXIsIHZlY3RvcnN0b3Jlc19leHBvcnRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD12ZWN0b3JzdG9yZXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/dist/vectorstores.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/native.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/native.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_crypto__WEBPACK_IMPORTED_MODULE_0__);\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  randomUUID: (node_crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID)\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvbmF0aXZlLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFpQztBQUNqQyxpRUFBZTtBQUNmLGNBQWMsK0RBQWlCO0FBQy9CLENBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS9uYXRpdmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyeXB0byBmcm9tICdub2RlOmNyeXB0byc7XG5leHBvcnQgZGVmYXVsdCB7XG4gIHJhbmRvbVVVSUQ6IGNyeXB0by5yYW5kb21VVUlEXG59OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/native.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/parse.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/parse.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validate.js */ \"(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/validate.js\");\n\nfunction parse(uuid) {\n  if (!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n  let v;\n  const arr = new Uint8Array(16);\n\n  // Parse ########-....-....-....-............\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff;\n\n  // Parse ........-####-....-....-............\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff;\n\n  // Parse ........-....-####-....-............\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff;\n\n  // Parse ........-....-....-####-............\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff;\n\n  // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (parse);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvcGFyc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBcUM7QUFDckM7QUFDQSxPQUFPLHdEQUFRO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFlLEtBQUsiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS9wYXJzZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdmFsaWRhdGUgZnJvbSAnLi92YWxpZGF0ZS5qcyc7XG5mdW5jdGlvbiBwYXJzZSh1dWlkKSB7XG4gIGlmICghdmFsaWRhdGUodXVpZCkpIHtcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ0ludmFsaWQgVVVJRCcpO1xuICB9XG4gIGxldCB2O1xuICBjb25zdCBhcnIgPSBuZXcgVWludDhBcnJheSgxNik7XG5cbiAgLy8gUGFyc2UgIyMjIyMjIyMtLi4uLi0uLi4uLS4uLi4tLi4uLi4uLi4uLi4uXG4gIGFyclswXSA9ICh2ID0gcGFyc2VJbnQodXVpZC5zbGljZSgwLCA4KSwgMTYpKSA+Pj4gMjQ7XG4gIGFyclsxXSA9IHYgPj4+IDE2ICYgMHhmZjtcbiAgYXJyWzJdID0gdiA+Pj4gOCAmIDB4ZmY7XG4gIGFyclszXSA9IHYgJiAweGZmO1xuXG4gIC8vIFBhcnNlIC4uLi4uLi4uLSMjIyMtLi4uLi0uLi4uLS4uLi4uLi4uLi4uLlxuICBhcnJbNF0gPSAodiA9IHBhcnNlSW50KHV1aWQuc2xpY2UoOSwgMTMpLCAxNikpID4+PiA4O1xuICBhcnJbNV0gPSB2ICYgMHhmZjtcblxuICAvLyBQYXJzZSAuLi4uLi4uLi0uLi4uLSMjIyMtLi4uLi0uLi4uLi4uLi4uLi5cbiAgYXJyWzZdID0gKHYgPSBwYXJzZUludCh1dWlkLnNsaWNlKDE0LCAxOCksIDE2KSkgPj4+IDg7XG4gIGFycls3XSA9IHYgJiAweGZmO1xuXG4gIC8vIFBhcnNlIC4uLi4uLi4uLS4uLi4tLi4uLi0jIyMjLS4uLi4uLi4uLi4uLlxuICBhcnJbOF0gPSAodiA9IHBhcnNlSW50KHV1aWQuc2xpY2UoMTksIDIzKSwgMTYpKSA+Pj4gODtcbiAgYXJyWzldID0gdiAmIDB4ZmY7XG5cbiAgLy8gUGFyc2UgLi4uLi4uLi4tLi4uLi0uLi4uLS4uLi4tIyMjIyMjIyMjIyMjXG4gIC8vIChVc2UgXCIvXCIgdG8gYXZvaWQgMzItYml0IHRydW5jYXRpb24gd2hlbiBiaXQtc2hpZnRpbmcgaGlnaC1vcmRlciBieXRlcylcbiAgYXJyWzEwXSA9ICh2ID0gcGFyc2VJbnQodXVpZC5zbGljZSgyNCwgMzYpLCAxNikpIC8gMHgxMDAwMDAwMDAwMCAmIDB4ZmY7XG4gIGFyclsxMV0gPSB2IC8gMHgxMDAwMDAwMDAgJiAweGZmO1xuICBhcnJbMTJdID0gdiA+Pj4gMjQgJiAweGZmO1xuICBhcnJbMTNdID0gdiA+Pj4gMTYgJiAweGZmO1xuICBhcnJbMTRdID0gdiA+Pj4gOCAmIDB4ZmY7XG4gIGFyclsxNV0gPSB2ICYgMHhmZjtcbiAgcmV0dXJuIGFycjtcbn1cbmV4cG9ydCBkZWZhdWx0IHBhcnNlOyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/parse.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/regex.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/regex.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvcmVnZXguanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLGlFQUFlLGNBQWMsRUFBRSxVQUFVLEVBQUUsZUFBZSxFQUFFLGdCQUFnQixFQUFFLFVBQVUsR0FBRyw4RUFBOEUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS9yZWdleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCAvXig/OlswLTlhLWZdezh9LVswLTlhLWZdezR9LVsxLThdWzAtOWEtZl17M30tWzg5YWJdWzAtOWEtZl17M30tWzAtOWEtZl17MTJ9fDAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMHxmZmZmZmZmZi1mZmZmLWZmZmYtZmZmZi1mZmZmZmZmZmZmZmYpJC9pOyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/regex.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/rng.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/rng.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ rng)\n/* harmony export */ });\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_crypto__WEBPACK_IMPORTED_MODULE_0__);\n\nconst rnds8Pool = new Uint8Array(256); // # of random values to pre-allocate\nlet poolPtr = rnds8Pool.length;\nfunction rng() {\n  if (poolPtr > rnds8Pool.length - 16) {\n    node_crypto__WEBPACK_IMPORTED_MODULE_0___default().randomFillSync(rnds8Pool);\n    poolPtr = 0;\n  }\n  return rnds8Pool.slice(poolPtr, poolPtr += 16);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvcm5nLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFpQztBQUNqQyx1Q0FBdUM7QUFDdkM7QUFDZTtBQUNmO0FBQ0EsSUFBSSxpRUFBcUI7QUFDekI7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS9ybmcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyeXB0byBmcm9tICdub2RlOmNyeXB0byc7XG5jb25zdCBybmRzOFBvb2wgPSBuZXcgVWludDhBcnJheSgyNTYpOyAvLyAjIG9mIHJhbmRvbSB2YWx1ZXMgdG8gcHJlLWFsbG9jYXRlXG5sZXQgcG9vbFB0ciA9IHJuZHM4UG9vbC5sZW5ndGg7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBybmcoKSB7XG4gIGlmIChwb29sUHRyID4gcm5kczhQb29sLmxlbmd0aCAtIDE2KSB7XG4gICAgY3J5cHRvLnJhbmRvbUZpbGxTeW5jKHJuZHM4UG9vbCk7XG4gICAgcG9vbFB0ciA9IDA7XG4gIH1cbiAgcmV0dXJuIHJuZHM4UG9vbC5zbGljZShwb29sUHRyLCBwb29sUHRyICs9IDE2KTtcbn0iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/rng.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/sha1.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/sha1.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_crypto__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction sha1(bytes) {\n  if (Array.isArray(bytes)) {\n    bytes = Buffer.from(bytes);\n  } else if (typeof bytes === 'string') {\n    bytes = Buffer.from(bytes, 'utf8');\n  }\n  return node_crypto__WEBPACK_IMPORTED_MODULE_0___default().createHash('sha1').update(bytes).digest();\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (sha1);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvc2hhMS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxTQUFTLDZEQUFpQjtBQUMxQjtBQUNBLGlFQUFlLElBQUkiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS9zaGExLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjcnlwdG8gZnJvbSAnbm9kZTpjcnlwdG8nO1xuZnVuY3Rpb24gc2hhMShieXRlcykge1xuICBpZiAoQXJyYXkuaXNBcnJheShieXRlcykpIHtcbiAgICBieXRlcyA9IEJ1ZmZlci5mcm9tKGJ5dGVzKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgYnl0ZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgYnl0ZXMgPSBCdWZmZXIuZnJvbShieXRlcywgJ3V0ZjgnKTtcbiAgfVxuICByZXR1cm4gY3J5cHRvLmNyZWF0ZUhhc2goJ3NoYTEnKS51cGRhdGUoYnl0ZXMpLmRpZ2VzdCgpO1xufVxuZXhwb3J0IGRlZmF1bHQgc2hhMTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/sha1.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/stringify.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/stringify.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   unsafeStringify: () => (/* binding */ unsafeStringify)\n/* harmony export */ });\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validate.js */ \"(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/validate.js\");\n\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nfunction unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  //\n  // Note to future-self: No, you can't remove the `toLowerCase()` call.\n  // REF: https://github.com/uuidjs/uuid/pull/677#issuecomment-1757351351\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset);\n  // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n  if (!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n  return uuid;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (stringify);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvc3RyaW5naWZ5LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFxQzs7QUFFckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLHdEQUFRO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBZSxTQUFTIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvc3RyaW5naWZ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB2YWxpZGF0ZSBmcm9tICcuL3ZhbGlkYXRlLmpzJztcblxuLyoqXG4gKiBDb252ZXJ0IGFycmF5IG9mIDE2IGJ5dGUgdmFsdWVzIHRvIFVVSUQgc3RyaW5nIGZvcm1hdCBvZiB0aGUgZm9ybTpcbiAqIFhYWFhYWFhYLVhYWFgtWFhYWC1YWFhYLVhYWFhYWFhYWFhYWFxuICovXG5jb25zdCBieXRlVG9IZXggPSBbXTtcbmZvciAobGV0IGkgPSAwOyBpIDwgMjU2OyArK2kpIHtcbiAgYnl0ZVRvSGV4LnB1c2goKGkgKyAweDEwMCkudG9TdHJpbmcoMTYpLnNsaWNlKDEpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB1bnNhZmVTdHJpbmdpZnkoYXJyLCBvZmZzZXQgPSAwKSB7XG4gIC8vIE5vdGU6IEJlIGNhcmVmdWwgZWRpdGluZyB0aGlzIGNvZGUhICBJdCdzIGJlZW4gdHVuZWQgZm9yIHBlcmZvcm1hbmNlXG4gIC8vIGFuZCB3b3JrcyBpbiB3YXlzIHlvdSBtYXkgbm90IGV4cGVjdC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZC9wdWxsLzQzNFxuICAvL1xuICAvLyBOb3RlIHRvIGZ1dHVyZS1zZWxmOiBObywgeW91IGNhbid0IHJlbW92ZSB0aGUgYHRvTG93ZXJDYXNlKClgIGNhbGwuXG4gIC8vIFJFRjogaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkL3B1bGwvNjc3I2lzc3VlY29tbWVudC0xNzU3MzUxMzUxXG4gIHJldHVybiAoYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDFdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAzXV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDRdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNV1dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA2XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDddXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgOF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA5XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDExXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEyXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEzXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE0XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE1XV0pLnRvTG93ZXJDYXNlKCk7XG59XG5mdW5jdGlvbiBzdHJpbmdpZnkoYXJyLCBvZmZzZXQgPSAwKSB7XG4gIGNvbnN0IHV1aWQgPSB1bnNhZmVTdHJpbmdpZnkoYXJyLCBvZmZzZXQpO1xuICAvLyBDb25zaXN0ZW5jeSBjaGVjayBmb3IgdmFsaWQgVVVJRC4gIElmIHRoaXMgdGhyb3dzLCBpdCdzIGxpa2VseSBkdWUgdG8gb25lXG4gIC8vIG9mIHRoZSBmb2xsb3dpbmc6XG4gIC8vIC0gT25lIG9yIG1vcmUgaW5wdXQgYXJyYXkgdmFsdWVzIGRvbid0IG1hcCB0byBhIGhleCBvY3RldCAobGVhZGluZyB0b1xuICAvLyBcInVuZGVmaW5lZFwiIGluIHRoZSB1dWlkKVxuICAvLyAtIEludmFsaWQgaW5wdXQgdmFsdWVzIGZvciB0aGUgUkZDIGB2ZXJzaW9uYCBvciBgdmFyaWFudGAgZmllbGRzXG4gIGlmICghdmFsaWRhdGUodXVpZCkpIHtcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ1N0cmluZ2lmaWVkIFVVSUQgaXMgaW52YWxpZCcpO1xuICB9XG4gIHJldHVybiB1dWlkO1xufVxuZXhwb3J0IGRlZmF1bHQgc3RyaW5naWZ5OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/stringify.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/v35.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/v35.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DNS: () => (/* binding */ DNS),\n/* harmony export */   URL: () => (/* binding */ URL),\n/* harmony export */   \"default\": () => (/* binding */ v35)\n/* harmony export */ });\n/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stringify.js */ \"(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/stringify.js\");\n/* harmony import */ var _parse_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./parse.js */ \"(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/parse.js\");\n\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  const bytes = [];\n  for (let i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n  return bytes;\n}\nconst DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nconst URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nfunction v35(name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    var _namespace;\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n    if (typeof namespace === 'string') {\n      namespace = (0,_parse_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(namespace);\n    }\n    if (((_namespace = namespace) === null || _namespace === void 0 ? void 0 : _namespace.length) !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    }\n\n    // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n    let bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n    if (buf) {\n      offset = offset || 0;\n      for (let i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n      return buf;\n    }\n    return (0,_stringify_js__WEBPACK_IMPORTED_MODULE_1__.unsafeStringify)(bytes);\n  }\n\n  // Function#name is not settable on some platforms (#270)\n  try {\n    generateUUID.name = name;\n  } catch (err) {}\n\n  // For CommonJS default export support\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvdjM1LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQWlEO0FBQ2xCO0FBQy9CO0FBQ0EsMkNBQTJDOztBQUUzQztBQUNBLGtCQUFrQixnQkFBZ0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNBO0FBQ1E7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IscURBQUs7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixRQUFRO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyw4REFBZTtBQUMxQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS92MzUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdW5zYWZlU3RyaW5naWZ5IH0gZnJvbSAnLi9zdHJpbmdpZnkuanMnO1xuaW1wb3J0IHBhcnNlIGZyb20gJy4vcGFyc2UuanMnO1xuZnVuY3Rpb24gc3RyaW5nVG9CeXRlcyhzdHIpIHtcbiAgc3RyID0gdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHN0cikpOyAvLyBVVEY4IGVzY2FwZVxuXG4gIGNvbnN0IGJ5dGVzID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG4gICAgYnl0ZXMucHVzaChzdHIuY2hhckNvZGVBdChpKSk7XG4gIH1cbiAgcmV0dXJuIGJ5dGVzO1xufVxuZXhwb3J0IGNvbnN0IEROUyA9ICc2YmE3YjgxMC05ZGFkLTExZDEtODBiNC0wMGMwNGZkNDMwYzgnO1xuZXhwb3J0IGNvbnN0IFVSTCA9ICc2YmE3YjgxMS05ZGFkLTExZDEtODBiNC0wMGMwNGZkNDMwYzgnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdjM1KG5hbWUsIHZlcnNpb24sIGhhc2hmdW5jKSB7XG4gIGZ1bmN0aW9uIGdlbmVyYXRlVVVJRCh2YWx1ZSwgbmFtZXNwYWNlLCBidWYsIG9mZnNldCkge1xuICAgIHZhciBfbmFtZXNwYWNlO1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICB2YWx1ZSA9IHN0cmluZ1RvQnl0ZXModmFsdWUpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG5hbWVzcGFjZSA9IHBhcnNlKG5hbWVzcGFjZSk7XG4gICAgfVxuICAgIGlmICgoKF9uYW1lc3BhY2UgPSBuYW1lc3BhY2UpID09PSBudWxsIHx8IF9uYW1lc3BhY2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9uYW1lc3BhY2UubGVuZ3RoKSAhPT0gMTYpIHtcbiAgICAgIHRocm93IFR5cGVFcnJvcignTmFtZXNwYWNlIG11c3QgYmUgYXJyYXktbGlrZSAoMTYgaXRlcmFibGUgaW50ZWdlciB2YWx1ZXMsIDAtMjU1KScpO1xuICAgIH1cblxuICAgIC8vIENvbXB1dGUgaGFzaCBvZiBuYW1lc3BhY2UgYW5kIHZhbHVlLCBQZXIgNC4zXG4gICAgLy8gRnV0dXJlOiBVc2Ugc3ByZWFkIHN5bnRheCB3aGVuIHN1cHBvcnRlZCBvbiBhbGwgcGxhdGZvcm1zLCBlLmcuIGBieXRlcyA9XG4gICAgLy8gaGFzaGZ1bmMoWy4uLm5hbWVzcGFjZSwgLi4uIHZhbHVlXSlgXG4gICAgbGV0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoMTYgKyB2YWx1ZS5sZW5ndGgpO1xuICAgIGJ5dGVzLnNldChuYW1lc3BhY2UpO1xuICAgIGJ5dGVzLnNldCh2YWx1ZSwgbmFtZXNwYWNlLmxlbmd0aCk7XG4gICAgYnl0ZXMgPSBoYXNoZnVuYyhieXRlcyk7XG4gICAgYnl0ZXNbNl0gPSBieXRlc1s2XSAmIDB4MGYgfCB2ZXJzaW9uO1xuICAgIGJ5dGVzWzhdID0gYnl0ZXNbOF0gJiAweDNmIHwgMHg4MDtcbiAgICBpZiAoYnVmKSB7XG4gICAgICBvZmZzZXQgPSBvZmZzZXQgfHwgMDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7ICsraSkge1xuICAgICAgICBidWZbb2Zmc2V0ICsgaV0gPSBieXRlc1tpXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBidWY7XG4gICAgfVxuICAgIHJldHVybiB1bnNhZmVTdHJpbmdpZnkoYnl0ZXMpO1xuICB9XG5cbiAgLy8gRnVuY3Rpb24jbmFtZSBpcyBub3Qgc2V0dGFibGUgb24gc29tZSBwbGF0Zm9ybXMgKCMyNzApXG4gIHRyeSB7XG4gICAgZ2VuZXJhdGVVVUlELm5hbWUgPSBuYW1lO1xuICB9IGNhdGNoIChlcnIpIHt9XG5cbiAgLy8gRm9yIENvbW1vbkpTIGRlZmF1bHQgZXhwb3J0IHN1cHBvcnRcbiAgZ2VuZXJhdGVVVUlELkROUyA9IEROUztcbiAgZ2VuZXJhdGVVVUlELlVSTCA9IFVSTDtcbiAgcmV0dXJuIGdlbmVyYXRlVVVJRDtcbn0iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/v35.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/v4.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/v4.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _native_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./native.js */ \"(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/native.js\");\n/* harmony import */ var _rng_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rng.js */ \"(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/rng.js\");\n/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./stringify.js */ \"(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/stringify.js\");\n\n\n\nfunction v4(options, buf, offset) {\n  if (_native_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].randomUUID && !buf && !options) {\n    return _native_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].randomUUID();\n  }\n  options = options || {};\n  const rnds = options.random || (options.rng || _rng_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    offset = offset || 0;\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n    return buf;\n  }\n  return (0,_stringify_js__WEBPACK_IMPORTED_MODULE_2__.unsafeStringify)(rnds);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (v4);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvdjQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpQztBQUNOO0FBQ3NCO0FBQ2pEO0FBQ0EsTUFBTSxrREFBTTtBQUNaLFdBQVcsa0RBQU07QUFDakI7QUFDQTtBQUNBLGlEQUFpRCwrQ0FBRzs7QUFFcEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyw4REFBZTtBQUN4QjtBQUNBLGlFQUFlLEVBQUUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS92NC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbmF0aXZlIGZyb20gJy4vbmF0aXZlLmpzJztcbmltcG9ydCBybmcgZnJvbSAnLi9ybmcuanMnO1xuaW1wb3J0IHsgdW5zYWZlU3RyaW5naWZ5IH0gZnJvbSAnLi9zdHJpbmdpZnkuanMnO1xuZnVuY3Rpb24gdjQob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgaWYgKG5hdGl2ZS5yYW5kb21VVUlEICYmICFidWYgJiYgIW9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmF0aXZlLnJhbmRvbVVVSUQoKTtcbiAgfVxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgY29uc3Qgcm5kcyA9IG9wdGlvbnMucmFuZG9tIHx8IChvcHRpb25zLnJuZyB8fCBybmcpKCk7XG5cbiAgLy8gUGVyIDQuNCwgc2V0IGJpdHMgZm9yIHZlcnNpb24gYW5kIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYFxuICBybmRzWzZdID0gcm5kc1s2XSAmIDB4MGYgfCAweDQwO1xuICBybmRzWzhdID0gcm5kc1s4XSAmIDB4M2YgfCAweDgwO1xuXG4gIC8vIENvcHkgYnl0ZXMgdG8gYnVmZmVyLCBpZiBwcm92aWRlZFxuICBpZiAoYnVmKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHx8IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgKytpKSB7XG4gICAgICBidWZbb2Zmc2V0ICsgaV0gPSBybmRzW2ldO1xuICAgIH1cbiAgICByZXR1cm4gYnVmO1xuICB9XG4gIHJldHVybiB1bnNhZmVTdHJpbmdpZnkocm5kcyk7XG59XG5leHBvcnQgZGVmYXVsdCB2NDsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/v4.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/v5.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/v5.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _v35_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./v35.js */ \"(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/v35.js\");\n/* harmony import */ var _sha1_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sha1.js */ \"(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/sha1.js\");\n\n\nconst v5 = (0,_v35_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('v5', 0x50, _sha1_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (v5);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvdjUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTJCO0FBQ0U7QUFDN0IsV0FBVyxtREFBRyxhQUFhLGdEQUFJO0FBQy9CLGlFQUFlLEVBQUUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS92NS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdjM1IGZyb20gJy4vdjM1LmpzJztcbmltcG9ydCBzaGExIGZyb20gJy4vc2hhMS5qcyc7XG5jb25zdCB2NSA9IHYzNSgndjUnLCAweDUwLCBzaGExKTtcbmV4cG9ydCBkZWZhdWx0IHY1OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/v5.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/v7.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/v7.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _rng_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rng.js */ \"(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/rng.js\");\n/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stringify.js */ \"(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/stringify.js\");\n\n\n\n/**\n * UUID V7 - Unix Epoch time-based UUID\n *\n * The IETF has published RFC9562, introducing 3 new UUID versions (6,7,8). This\n * implementation of V7 is based on the accepted, though not yet approved,\n * revisions.\n *\n * RFC 9562:https://www.rfc-editor.org/rfc/rfc9562.html Universally Unique\n * IDentifiers (UUIDs)\n\n *\n * Sample V7 value:\n * https://www.rfc-editor.org/rfc/rfc9562.html#name-example-of-a-uuidv7-value\n *\n * Monotonic Bit Layout: RFC rfc9562.6.2 Method 1, Dedicated Counter Bits ref:\n *     https://www.rfc-editor.org/rfc/rfc9562.html#section-6.2-5.1\n *\n *   0                   1                   2                   3 0 1 2 3 4 5 6\n *   7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n *  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n *  |                          unix_ts_ms                           |\n *  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n *  |          unix_ts_ms           |  ver  |        seq_hi         |\n *  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n *  |var|               seq_low               |        rand         |\n *  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n *  |                             rand                              |\n *  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n *\n * seq is a 31 bit serialized counter; comprised of 12 bit seq_hi and 19 bit\n * seq_low, and randomly initialized upon timestamp change. 31 bit counter size\n * was selected as any bitwise operations in node are done as _signed_ 32 bit\n * ints. we exclude the sign bit.\n */\n\nlet _seqLow = null;\nlet _seqHigh = null;\nlet _msecs = 0;\nfunction v7(options, buf, offset) {\n  options = options || {};\n\n  // initialize buffer and pointer\n  let i = buf && offset || 0;\n  const b = buf || new Uint8Array(16);\n\n  // rnds is Uint8Array(16) filled with random bytes\n  const rnds = options.random || (options.rng || _rng_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n\n  // milliseconds since unix epoch, 1970-01-01 00:00\n  const msecs = options.msecs !== undefined ? options.msecs : Date.now();\n\n  // seq is user provided 31 bit counter\n  let seq = options.seq !== undefined ? options.seq : null;\n\n  // initialize local seq high/low parts\n  let seqHigh = _seqHigh;\n  let seqLow = _seqLow;\n\n  // check if clock has advanced and user has not provided msecs\n  if (msecs > _msecs && options.msecs === undefined) {\n    _msecs = msecs;\n\n    // unless user provided seq, reset seq parts\n    if (seq !== null) {\n      seqHigh = null;\n      seqLow = null;\n    }\n  }\n\n  // if we have a user provided seq\n  if (seq !== null) {\n    // trim provided seq to 31 bits of value, avoiding overflow\n    if (seq > 0x7fffffff) {\n      seq = 0x7fffffff;\n    }\n\n    // split provided seq into high/low parts\n    seqHigh = seq >>> 19 & 0xfff;\n    seqLow = seq & 0x7ffff;\n  }\n\n  // randomly initialize seq\n  if (seqHigh === null || seqLow === null) {\n    seqHigh = rnds[6] & 0x7f;\n    seqHigh = seqHigh << 8 | rnds[7];\n    seqLow = rnds[8] & 0x3f; // pad for var\n    seqLow = seqLow << 8 | rnds[9];\n    seqLow = seqLow << 5 | rnds[10] >>> 3;\n  }\n\n  // increment seq if within msecs window\n  if (msecs + 10000 > _msecs && seq === null) {\n    if (++seqLow > 0x7ffff) {\n      seqLow = 0;\n      if (++seqHigh > 0xfff) {\n        seqHigh = 0;\n\n        // increment internal _msecs. this allows us to continue incrementing\n        // while staying monotonic. Note, once we hit 10k milliseconds beyond system\n        // clock, we will reset breaking monotonicity (after (2^31)*10000 generations)\n        _msecs++;\n      }\n    }\n  } else {\n    // resetting; we have advanced more than\n    // 10k milliseconds beyond system clock\n    _msecs = msecs;\n  }\n  _seqHigh = seqHigh;\n  _seqLow = seqLow;\n\n  // [bytes 0-5] 48 bits of local timestamp\n  b[i++] = _msecs / 0x10000000000 & 0xff;\n  b[i++] = _msecs / 0x100000000 & 0xff;\n  b[i++] = _msecs / 0x1000000 & 0xff;\n  b[i++] = _msecs / 0x10000 & 0xff;\n  b[i++] = _msecs / 0x100 & 0xff;\n  b[i++] = _msecs & 0xff;\n\n  // [byte 6] - set 4 bits of version (7) with first 4 bits seq_hi\n  b[i++] = seqHigh >>> 4 & 0x0f | 0x70;\n\n  // [byte 7] remaining 8 bits of seq_hi\n  b[i++] = seqHigh & 0xff;\n\n  // [byte 8] - variant (2 bits), first 6 bits seq_low\n  b[i++] = seqLow >>> 13 & 0x3f | 0x80;\n\n  // [byte 9] 8 bits seq_low\n  b[i++] = seqLow >>> 5 & 0xff;\n\n  // [byte 10] remaining 5 bits seq_low, 3 bits random\n  b[i++] = seqLow << 3 & 0xff | rnds[10] & 0x07;\n\n  // [bytes 11-15] always random\n  b[i++] = rnds[11];\n  b[i++] = rnds[12];\n  b[i++] = rnds[13];\n  b[i++] = rnds[14];\n  b[i++] = rnds[15];\n  return buf || (0,_stringify_js__WEBPACK_IMPORTED_MODULE_1__.unsafeStringify)(b);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (v7);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvdjcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTJCO0FBQ3NCOztBQUVqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpREFBaUQsK0NBQUc7O0FBRXBEO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiw4REFBZTtBQUMvQjtBQUNBLGlFQUFlLEVBQUUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS92Ny5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcm5nIGZyb20gJy4vcm5nLmpzJztcbmltcG9ydCB7IHVuc2FmZVN0cmluZ2lmeSB9IGZyb20gJy4vc3RyaW5naWZ5LmpzJztcblxuLyoqXG4gKiBVVUlEIFY3IC0gVW5peCBFcG9jaCB0aW1lLWJhc2VkIFVVSURcbiAqXG4gKiBUaGUgSUVURiBoYXMgcHVibGlzaGVkIFJGQzk1NjIsIGludHJvZHVjaW5nIDMgbmV3IFVVSUQgdmVyc2lvbnMgKDYsNyw4KS4gVGhpc1xuICogaW1wbGVtZW50YXRpb24gb2YgVjcgaXMgYmFzZWQgb24gdGhlIGFjY2VwdGVkLCB0aG91Z2ggbm90IHlldCBhcHByb3ZlZCxcbiAqIHJldmlzaW9ucy5cbiAqXG4gKiBSRkMgOTU2MjpodHRwczovL3d3dy5yZmMtZWRpdG9yLm9yZy9yZmMvcmZjOTU2Mi5odG1sIFVuaXZlcnNhbGx5IFVuaXF1ZVxuICogSURlbnRpZmllcnMgKFVVSURzKVxuXG4gKlxuICogU2FtcGxlIFY3IHZhbHVlOlxuICogaHR0cHM6Ly93d3cucmZjLWVkaXRvci5vcmcvcmZjL3JmYzk1NjIuaHRtbCNuYW1lLWV4YW1wbGUtb2YtYS11dWlkdjctdmFsdWVcbiAqXG4gKiBNb25vdG9uaWMgQml0IExheW91dDogUkZDIHJmYzk1NjIuNi4yIE1ldGhvZCAxLCBEZWRpY2F0ZWQgQ291bnRlciBCaXRzIHJlZjpcbiAqICAgICBodHRwczovL3d3dy5yZmMtZWRpdG9yLm9yZy9yZmMvcmZjOTU2Mi5odG1sI3NlY3Rpb24tNi4yLTUuMVxuICpcbiAqICAgMCAgICAgICAgICAgICAgICAgICAxICAgICAgICAgICAgICAgICAgIDIgICAgICAgICAgICAgICAgICAgMyAwIDEgMiAzIDQgNSA2XG4gKiAgIDcgOCA5IDAgMSAyIDMgNCA1IDYgNyA4IDkgMCAxIDIgMyA0IDUgNiA3IDggOSAwIDFcbiAqICArLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstK1xuICogIHwgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXhfdHNfbXMgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiAgKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLStcbiAqICB8ICAgICAgICAgIHVuaXhfdHNfbXMgICAgICAgICAgIHwgIHZlciAgfCAgICAgICAgc2VxX2hpICAgICAgICAgfFxuICogICstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rXG4gKiAgfHZhcnwgICAgICAgICAgICAgICBzZXFfbG93ICAgICAgICAgICAgICAgfCAgICAgICAgcmFuZCAgICAgICAgIHxcbiAqICArLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstK1xuICogIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiAgKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLSstKy0rLStcbiAqXG4gKiBzZXEgaXMgYSAzMSBiaXQgc2VyaWFsaXplZCBjb3VudGVyOyBjb21wcmlzZWQgb2YgMTIgYml0IHNlcV9oaSBhbmQgMTkgYml0XG4gKiBzZXFfbG93LCBhbmQgcmFuZG9tbHkgaW5pdGlhbGl6ZWQgdXBvbiB0aW1lc3RhbXAgY2hhbmdlLiAzMSBiaXQgY291bnRlciBzaXplXG4gKiB3YXMgc2VsZWN0ZWQgYXMgYW55IGJpdHdpc2Ugb3BlcmF0aW9ucyBpbiBub2RlIGFyZSBkb25lIGFzIF9zaWduZWRfIDMyIGJpdFxuICogaW50cy4gd2UgZXhjbHVkZSB0aGUgc2lnbiBiaXQuXG4gKi9cblxubGV0IF9zZXFMb3cgPSBudWxsO1xubGV0IF9zZXFIaWdoID0gbnVsbDtcbmxldCBfbXNlY3MgPSAwO1xuZnVuY3Rpb24gdjcob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgLy8gaW5pdGlhbGl6ZSBidWZmZXIgYW5kIHBvaW50ZXJcbiAgbGV0IGkgPSBidWYgJiYgb2Zmc2V0IHx8IDA7XG4gIGNvbnN0IGIgPSBidWYgfHwgbmV3IFVpbnQ4QXJyYXkoMTYpO1xuXG4gIC8vIHJuZHMgaXMgVWludDhBcnJheSgxNikgZmlsbGVkIHdpdGggcmFuZG9tIGJ5dGVzXG4gIGNvbnN0IHJuZHMgPSBvcHRpb25zLnJhbmRvbSB8fCAob3B0aW9ucy5ybmcgfHwgcm5nKSgpO1xuXG4gIC8vIG1pbGxpc2Vjb25kcyBzaW5jZSB1bml4IGVwb2NoLCAxOTcwLTAxLTAxIDAwOjAwXG4gIGNvbnN0IG1zZWNzID0gb3B0aW9ucy5tc2VjcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tc2VjcyA6IERhdGUubm93KCk7XG5cbiAgLy8gc2VxIGlzIHVzZXIgcHJvdmlkZWQgMzEgYml0IGNvdW50ZXJcbiAgbGV0IHNlcSA9IG9wdGlvbnMuc2VxICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnNlcSA6IG51bGw7XG5cbiAgLy8gaW5pdGlhbGl6ZSBsb2NhbCBzZXEgaGlnaC9sb3cgcGFydHNcbiAgbGV0IHNlcUhpZ2ggPSBfc2VxSGlnaDtcbiAgbGV0IHNlcUxvdyA9IF9zZXFMb3c7XG5cbiAgLy8gY2hlY2sgaWYgY2xvY2sgaGFzIGFkdmFuY2VkIGFuZCB1c2VyIGhhcyBub3QgcHJvdmlkZWQgbXNlY3NcbiAgaWYgKG1zZWNzID4gX21zZWNzICYmIG9wdGlvbnMubXNlY3MgPT09IHVuZGVmaW5lZCkge1xuICAgIF9tc2VjcyA9IG1zZWNzO1xuXG4gICAgLy8gdW5sZXNzIHVzZXIgcHJvdmlkZWQgc2VxLCByZXNldCBzZXEgcGFydHNcbiAgICBpZiAoc2VxICE9PSBudWxsKSB7XG4gICAgICBzZXFIaWdoID0gbnVsbDtcbiAgICAgIHNlcUxvdyA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLy8gaWYgd2UgaGF2ZSBhIHVzZXIgcHJvdmlkZWQgc2VxXG4gIGlmIChzZXEgIT09IG51bGwpIHtcbiAgICAvLyB0cmltIHByb3ZpZGVkIHNlcSB0byAzMSBiaXRzIG9mIHZhbHVlLCBhdm9pZGluZyBvdmVyZmxvd1xuICAgIGlmIChzZXEgPiAweDdmZmZmZmZmKSB7XG4gICAgICBzZXEgPSAweDdmZmZmZmZmO1xuICAgIH1cblxuICAgIC8vIHNwbGl0IHByb3ZpZGVkIHNlcSBpbnRvIGhpZ2gvbG93IHBhcnRzXG4gICAgc2VxSGlnaCA9IHNlcSA+Pj4gMTkgJiAweGZmZjtcbiAgICBzZXFMb3cgPSBzZXEgJiAweDdmZmZmO1xuICB9XG5cbiAgLy8gcmFuZG9tbHkgaW5pdGlhbGl6ZSBzZXFcbiAgaWYgKHNlcUhpZ2ggPT09IG51bGwgfHwgc2VxTG93ID09PSBudWxsKSB7XG4gICAgc2VxSGlnaCA9IHJuZHNbNl0gJiAweDdmO1xuICAgIHNlcUhpZ2ggPSBzZXFIaWdoIDw8IDggfCBybmRzWzddO1xuICAgIHNlcUxvdyA9IHJuZHNbOF0gJiAweDNmOyAvLyBwYWQgZm9yIHZhclxuICAgIHNlcUxvdyA9IHNlcUxvdyA8PCA4IHwgcm5kc1s5XTtcbiAgICBzZXFMb3cgPSBzZXFMb3cgPDwgNSB8IHJuZHNbMTBdID4+PiAzO1xuICB9XG5cbiAgLy8gaW5jcmVtZW50IHNlcSBpZiB3aXRoaW4gbXNlY3Mgd2luZG93XG4gIGlmIChtc2VjcyArIDEwMDAwID4gX21zZWNzICYmIHNlcSA9PT0gbnVsbCkge1xuICAgIGlmICgrK3NlcUxvdyA+IDB4N2ZmZmYpIHtcbiAgICAgIHNlcUxvdyA9IDA7XG4gICAgICBpZiAoKytzZXFIaWdoID4gMHhmZmYpIHtcbiAgICAgICAgc2VxSGlnaCA9IDA7XG5cbiAgICAgICAgLy8gaW5jcmVtZW50IGludGVybmFsIF9tc2Vjcy4gdGhpcyBhbGxvd3MgdXMgdG8gY29udGludWUgaW5jcmVtZW50aW5nXG4gICAgICAgIC8vIHdoaWxlIHN0YXlpbmcgbW9ub3RvbmljLiBOb3RlLCBvbmNlIHdlIGhpdCAxMGsgbWlsbGlzZWNvbmRzIGJleW9uZCBzeXN0ZW1cbiAgICAgICAgLy8gY2xvY2ssIHdlIHdpbGwgcmVzZXQgYnJlYWtpbmcgbW9ub3RvbmljaXR5IChhZnRlciAoMl4zMSkqMTAwMDAgZ2VuZXJhdGlvbnMpXG4gICAgICAgIF9tc2VjcysrO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyByZXNldHRpbmc7IHdlIGhhdmUgYWR2YW5jZWQgbW9yZSB0aGFuXG4gICAgLy8gMTBrIG1pbGxpc2Vjb25kcyBiZXlvbmQgc3lzdGVtIGNsb2NrXG4gICAgX21zZWNzID0gbXNlY3M7XG4gIH1cbiAgX3NlcUhpZ2ggPSBzZXFIaWdoO1xuICBfc2VxTG93ID0gc2VxTG93O1xuXG4gIC8vIFtieXRlcyAwLTVdIDQ4IGJpdHMgb2YgbG9jYWwgdGltZXN0YW1wXG4gIGJbaSsrXSA9IF9tc2VjcyAvIDB4MTAwMDAwMDAwMDAgJiAweGZmO1xuICBiW2krK10gPSBfbXNlY3MgLyAweDEwMDAwMDAwMCAmIDB4ZmY7XG4gIGJbaSsrXSA9IF9tc2VjcyAvIDB4MTAwMDAwMCAmIDB4ZmY7XG4gIGJbaSsrXSA9IF9tc2VjcyAvIDB4MTAwMDAgJiAweGZmO1xuICBiW2krK10gPSBfbXNlY3MgLyAweDEwMCAmIDB4ZmY7XG4gIGJbaSsrXSA9IF9tc2VjcyAmIDB4ZmY7XG5cbiAgLy8gW2J5dGUgNl0gLSBzZXQgNCBiaXRzIG9mIHZlcnNpb24gKDcpIHdpdGggZmlyc3QgNCBiaXRzIHNlcV9oaVxuICBiW2krK10gPSBzZXFIaWdoID4+PiA0ICYgMHgwZiB8IDB4NzA7XG5cbiAgLy8gW2J5dGUgN10gcmVtYWluaW5nIDggYml0cyBvZiBzZXFfaGlcbiAgYltpKytdID0gc2VxSGlnaCAmIDB4ZmY7XG5cbiAgLy8gW2J5dGUgOF0gLSB2YXJpYW50ICgyIGJpdHMpLCBmaXJzdCA2IGJpdHMgc2VxX2xvd1xuICBiW2krK10gPSBzZXFMb3cgPj4+IDEzICYgMHgzZiB8IDB4ODA7XG5cbiAgLy8gW2J5dGUgOV0gOCBiaXRzIHNlcV9sb3dcbiAgYltpKytdID0gc2VxTG93ID4+PiA1ICYgMHhmZjtcblxuICAvLyBbYnl0ZSAxMF0gcmVtYWluaW5nIDUgYml0cyBzZXFfbG93LCAzIGJpdHMgcmFuZG9tXG4gIGJbaSsrXSA9IHNlcUxvdyA8PCAzICYgMHhmZiB8IHJuZHNbMTBdICYgMHgwNztcblxuICAvLyBbYnl0ZXMgMTEtMTVdIGFsd2F5cyByYW5kb21cbiAgYltpKytdID0gcm5kc1sxMV07XG4gIGJbaSsrXSA9IHJuZHNbMTJdO1xuICBiW2krK10gPSBybmRzWzEzXTtcbiAgYltpKytdID0gcm5kc1sxNF07XG4gIGJbaSsrXSA9IHJuZHNbMTVdO1xuICByZXR1cm4gYnVmIHx8IHVuc2FmZVN0cmluZ2lmeShiKTtcbn1cbmV4cG9ydCBkZWZhdWx0IHY3OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/v7.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/validate.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/validate.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _regex_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./regex.js */ \"(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/regex.js\");\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && _regex_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].test(uuid);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (validate);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvdmFsaWRhdGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBK0I7QUFDL0I7QUFDQSxxQ0FBcUMsaURBQUs7QUFDMUM7QUFDQSxpRUFBZSxRQUFRIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvdmFsaWRhdGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJFR0VYIGZyb20gJy4vcmVnZXguanMnO1xuZnVuY3Rpb24gdmFsaWRhdGUodXVpZCkge1xuICByZXR1cm4gdHlwZW9mIHV1aWQgPT09ICdzdHJpbmcnICYmIFJFR0VYLnRlc3QodXVpZCk7XG59XG5leHBvcnQgZGVmYXVsdCB2YWxpZGF0ZTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/core/node_modules/uuid/dist/esm-node/validate.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/base.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-checkpoint/dist/base.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCheckpointSaver: () => (/* binding */ BaseCheckpointSaver),\n/* harmony export */   WRITES_IDX_MAP: () => (/* binding */ WRITES_IDX_MAP),\n/* harmony export */   compareChannelVersions: () => (/* binding */ compareChannelVersions),\n/* harmony export */   copyCheckpoint: () => (/* binding */ copyCheckpoint),\n/* harmony export */   deepCopy: () => (/* binding */ deepCopy),\n/* harmony export */   emptyCheckpoint: () => (/* binding */ emptyCheckpoint),\n/* harmony export */   getCheckpointId: () => (/* binding */ getCheckpointId),\n/* harmony export */   maxChannelVersion: () => (/* binding */ maxChannelVersion)\n/* harmony export */ });\n/* harmony import */ var _id_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./id.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/id.js\");\n/* harmony import */ var _serde_types_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./serde/types.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/serde/types.js\");\n/* harmony import */ var _serde_jsonplus_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./serde/jsonplus.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/serde/jsonplus.js\");\n\n\n\n\n//#region src/base.ts\nfunction deepCopy(obj) {\n\tif (typeof obj !== \"object\" || obj === null) return obj;\n\tconst newObj = Array.isArray(obj) ? [] : {};\n\tfor (const key in obj) if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = deepCopy(obj[key]);\n\treturn newObj;\n}\n/** @hidden */\nfunction emptyCheckpoint() {\n\treturn {\n\t\tv: 4,\n\t\tid: (0,_id_js__WEBPACK_IMPORTED_MODULE_0__.uuid6)(-2),\n\t\tts: (/* @__PURE__ */ new Date()).toISOString(),\n\t\tchannel_values: {},\n\t\tchannel_versions: {},\n\t\tversions_seen: {}\n\t};\n}\n/** @hidden */\nfunction copyCheckpoint(checkpoint) {\n\treturn {\n\t\tv: checkpoint.v,\n\t\tid: checkpoint.id,\n\t\tts: checkpoint.ts,\n\t\tchannel_values: { ...checkpoint.channel_values },\n\t\tchannel_versions: { ...checkpoint.channel_versions },\n\t\tversions_seen: deepCopy(checkpoint.versions_seen)\n\t};\n}\nvar BaseCheckpointSaver = class {\n\tserde = new _serde_jsonplus_js__WEBPACK_IMPORTED_MODULE_2__.JsonPlusSerializer();\n\tconstructor(serde) {\n\t\tthis.serde = serde || this.serde;\n\t}\n\tasync get(config) {\n\t\tconst value = await this.getTuple(config);\n\t\treturn value ? value.checkpoint : void 0;\n\t}\n\t/**\n\t* Generate the next version ID for a channel.\n\t*\n\t* Default is to use integer versions, incrementing by 1. If you override, you can use str/int/float versions,\n\t* as long as they are monotonically increasing.\n\t*/\n\tgetNextVersion(current) {\n\t\tif (typeof current === \"string\") throw new Error(\"Please override this method to use string versions.\");\n\t\treturn current !== void 0 && typeof current === \"number\" ? current + 1 : 1;\n\t}\n};\nfunction compareChannelVersions(a, b) {\n\tif (typeof a === \"number\" && typeof b === \"number\") return Math.sign(a - b);\n\treturn String(a).localeCompare(String(b));\n}\nfunction maxChannelVersion(...versions) {\n\treturn versions.reduce((max, version, idx) => {\n\t\tif (idx === 0) return version;\n\t\treturn compareChannelVersions(max, version) >= 0 ? max : version;\n\t});\n}\n/**\n* Mapping from error type to error index.\n* Regular writes just map to their index in the list of writes being saved.\n* Special writes (e.g. errors) map to negative indices, to avoid those writes from\n* conflicting with regular writes.\n* Each Checkpointer implementation should use this mapping in put_writes.\n*/\nconst WRITES_IDX_MAP = {\n\t[_serde_types_js__WEBPACK_IMPORTED_MODULE_1__.ERROR]: -1,\n\t[_serde_types_js__WEBPACK_IMPORTED_MODULE_1__.SCHEDULED]: -2,\n\t[_serde_types_js__WEBPACK_IMPORTED_MODULE_1__.INTERRUPT]: -3,\n\t[_serde_types_js__WEBPACK_IMPORTED_MODULE_1__.RESUME]: -4\n};\nfunction getCheckpointId(config) {\n\treturn config.configurable?.checkpoint_id || config.configurable?.thread_ts || \"\";\n}\n\n//#endregion\n\n//# sourceMappingURL=base.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9kaXN0L2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBZ0M7QUFDdUM7QUFDZDs7QUFFekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sNkNBQUs7QUFDWDtBQUNBLG9CQUFvQjtBQUNwQixzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDhCQUE4QjtBQUNsRCxzQkFBc0IsZ0NBQWdDO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxrRUFBa0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLGtEQUFLO0FBQ1AsRUFBRSxzREFBUztBQUNYLEVBQUUsc0RBQVM7QUFDWCxFQUFFLG1EQUFNO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDc0o7QUFDdEoiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC1jaGVja3BvaW50L2Rpc3QvYmFzZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1dWlkNiB9IGZyb20gXCIuL2lkLmpzXCI7XG5pbXBvcnQgeyBFUlJPUiwgSU5URVJSVVBULCBSRVNVTUUsIFNDSEVEVUxFRCB9IGZyb20gXCIuL3NlcmRlL3R5cGVzLmpzXCI7XG5pbXBvcnQgeyBKc29uUGx1c1NlcmlhbGl6ZXIgfSBmcm9tIFwiLi9zZXJkZS9qc29ucGx1cy5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL2Jhc2UudHNcbmZ1bmN0aW9uIGRlZXBDb3B5KG9iaikge1xuXHRpZiAodHlwZW9mIG9iaiAhPT0gXCJvYmplY3RcIiB8fCBvYmogPT09IG51bGwpIHJldHVybiBvYmo7XG5cdGNvbnN0IG5ld09iaiA9IEFycmF5LmlzQXJyYXkob2JqKSA/IFtdIDoge307XG5cdGZvciAoY29uc3Qga2V5IGluIG9iaikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIG5ld09ialtrZXldID0gZGVlcENvcHkob2JqW2tleV0pO1xuXHRyZXR1cm4gbmV3T2JqO1xufVxuLyoqIEBoaWRkZW4gKi9cbmZ1bmN0aW9uIGVtcHR5Q2hlY2twb2ludCgpIHtcblx0cmV0dXJuIHtcblx0XHR2OiA0LFxuXHRcdGlkOiB1dWlkNigtMiksXG5cdFx0dHM6ICgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkudG9JU09TdHJpbmcoKSxcblx0XHRjaGFubmVsX3ZhbHVlczoge30sXG5cdFx0Y2hhbm5lbF92ZXJzaW9uczoge30sXG5cdFx0dmVyc2lvbnNfc2Vlbjoge31cblx0fTtcbn1cbi8qKiBAaGlkZGVuICovXG5mdW5jdGlvbiBjb3B5Q2hlY2twb2ludChjaGVja3BvaW50KSB7XG5cdHJldHVybiB7XG5cdFx0djogY2hlY2twb2ludC52LFxuXHRcdGlkOiBjaGVja3BvaW50LmlkLFxuXHRcdHRzOiBjaGVja3BvaW50LnRzLFxuXHRcdGNoYW5uZWxfdmFsdWVzOiB7IC4uLmNoZWNrcG9pbnQuY2hhbm5lbF92YWx1ZXMgfSxcblx0XHRjaGFubmVsX3ZlcnNpb25zOiB7IC4uLmNoZWNrcG9pbnQuY2hhbm5lbF92ZXJzaW9ucyB9LFxuXHRcdHZlcnNpb25zX3NlZW46IGRlZXBDb3B5KGNoZWNrcG9pbnQudmVyc2lvbnNfc2Vlbilcblx0fTtcbn1cbnZhciBCYXNlQ2hlY2twb2ludFNhdmVyID0gY2xhc3Mge1xuXHRzZXJkZSA9IG5ldyBKc29uUGx1c1NlcmlhbGl6ZXIoKTtcblx0Y29uc3RydWN0b3Ioc2VyZGUpIHtcblx0XHR0aGlzLnNlcmRlID0gc2VyZGUgfHwgdGhpcy5zZXJkZTtcblx0fVxuXHRhc3luYyBnZXQoY29uZmlnKSB7XG5cdFx0Y29uc3QgdmFsdWUgPSBhd2FpdCB0aGlzLmdldFR1cGxlKGNvbmZpZyk7XG5cdFx0cmV0dXJuIHZhbHVlID8gdmFsdWUuY2hlY2twb2ludCA6IHZvaWQgMDtcblx0fVxuXHQvKipcblx0KiBHZW5lcmF0ZSB0aGUgbmV4dCB2ZXJzaW9uIElEIGZvciBhIGNoYW5uZWwuXG5cdCpcblx0KiBEZWZhdWx0IGlzIHRvIHVzZSBpbnRlZ2VyIHZlcnNpb25zLCBpbmNyZW1lbnRpbmcgYnkgMS4gSWYgeW91IG92ZXJyaWRlLCB5b3UgY2FuIHVzZSBzdHIvaW50L2Zsb2F0IHZlcnNpb25zLFxuXHQqIGFzIGxvbmcgYXMgdGhleSBhcmUgbW9ub3RvbmljYWxseSBpbmNyZWFzaW5nLlxuXHQqL1xuXHRnZXROZXh0VmVyc2lvbihjdXJyZW50KSB7XG5cdFx0aWYgKHR5cGVvZiBjdXJyZW50ID09PSBcInN0cmluZ1wiKSB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2Ugb3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gdXNlIHN0cmluZyB2ZXJzaW9ucy5cIik7XG5cdFx0cmV0dXJuIGN1cnJlbnQgIT09IHZvaWQgMCAmJiB0eXBlb2YgY3VycmVudCA9PT0gXCJudW1iZXJcIiA/IGN1cnJlbnQgKyAxIDogMTtcblx0fVxufTtcbmZ1bmN0aW9uIGNvbXBhcmVDaGFubmVsVmVyc2lvbnMoYSwgYikge1xuXHRpZiAodHlwZW9mIGEgPT09IFwibnVtYmVyXCIgJiYgdHlwZW9mIGIgPT09IFwibnVtYmVyXCIpIHJldHVybiBNYXRoLnNpZ24oYSAtIGIpO1xuXHRyZXR1cm4gU3RyaW5nKGEpLmxvY2FsZUNvbXBhcmUoU3RyaW5nKGIpKTtcbn1cbmZ1bmN0aW9uIG1heENoYW5uZWxWZXJzaW9uKC4uLnZlcnNpb25zKSB7XG5cdHJldHVybiB2ZXJzaW9ucy5yZWR1Y2UoKG1heCwgdmVyc2lvbiwgaWR4KSA9PiB7XG5cdFx0aWYgKGlkeCA9PT0gMCkgcmV0dXJuIHZlcnNpb247XG5cdFx0cmV0dXJuIGNvbXBhcmVDaGFubmVsVmVyc2lvbnMobWF4LCB2ZXJzaW9uKSA+PSAwID8gbWF4IDogdmVyc2lvbjtcblx0fSk7XG59XG4vKipcbiogTWFwcGluZyBmcm9tIGVycm9yIHR5cGUgdG8gZXJyb3IgaW5kZXguXG4qIFJlZ3VsYXIgd3JpdGVzIGp1c3QgbWFwIHRvIHRoZWlyIGluZGV4IGluIHRoZSBsaXN0IG9mIHdyaXRlcyBiZWluZyBzYXZlZC5cbiogU3BlY2lhbCB3cml0ZXMgKGUuZy4gZXJyb3JzKSBtYXAgdG8gbmVnYXRpdmUgaW5kaWNlcywgdG8gYXZvaWQgdGhvc2Ugd3JpdGVzIGZyb21cbiogY29uZmxpY3Rpbmcgd2l0aCByZWd1bGFyIHdyaXRlcy5cbiogRWFjaCBDaGVja3BvaW50ZXIgaW1wbGVtZW50YXRpb24gc2hvdWxkIHVzZSB0aGlzIG1hcHBpbmcgaW4gcHV0X3dyaXRlcy5cbiovXG5jb25zdCBXUklURVNfSURYX01BUCA9IHtcblx0W0VSUk9SXTogLTEsXG5cdFtTQ0hFRFVMRURdOiAtMixcblx0W0lOVEVSUlVQVF06IC0zLFxuXHRbUkVTVU1FXTogLTRcbn07XG5mdW5jdGlvbiBnZXRDaGVja3BvaW50SWQoY29uZmlnKSB7XG5cdHJldHVybiBjb25maWcuY29uZmlndXJhYmxlPy5jaGVja3BvaW50X2lkIHx8IGNvbmZpZy5jb25maWd1cmFibGU/LnRocmVhZF90cyB8fCBcIlwiO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEJhc2VDaGVja3BvaW50U2F2ZXIsIFdSSVRFU19JRFhfTUFQLCBjb21wYXJlQ2hhbm5lbFZlcnNpb25zLCBjb3B5Q2hlY2twb2ludCwgZGVlcENvcHksIGVtcHR5Q2hlY2twb2ludCwgZ2V0Q2hlY2twb2ludElkLCBtYXhDaGFubmVsVmVyc2lvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmFzZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/base.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/cache/base.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-checkpoint/dist/cache/base.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCache: () => (/* binding */ BaseCache)\n/* harmony export */ });\n/* harmony import */ var _serde_jsonplus_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../serde/jsonplus.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/serde/jsonplus.js\");\n\n\n//#region src/cache/base.ts\nvar BaseCache = class {\n\tserde = new _serde_jsonplus_js__WEBPACK_IMPORTED_MODULE_0__.JsonPlusSerializer();\n\t/**\n\t* Initialize the cache with a serializer.\n\t*\n\t* @param serde - The serializer to use.\n\t*/\n\tconstructor(serde) {\n\t\tthis.serde = serde || this.serde;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=base.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9kaXN0L2NhY2hlL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMEQ7O0FBRTFEO0FBQ0E7QUFDQSxhQUFhLGtFQUFrQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDcUI7QUFDckIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC1jaGVja3BvaW50L2Rpc3QvY2FjaGUvYmFzZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBKc29uUGx1c1NlcmlhbGl6ZXIgfSBmcm9tIFwiLi4vc2VyZGUvanNvbnBsdXMuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9jYWNoZS9iYXNlLnRzXG52YXIgQmFzZUNhY2hlID0gY2xhc3Mge1xuXHRzZXJkZSA9IG5ldyBKc29uUGx1c1NlcmlhbGl6ZXIoKTtcblx0LyoqXG5cdCogSW5pdGlhbGl6ZSB0aGUgY2FjaGUgd2l0aCBhIHNlcmlhbGl6ZXIuXG5cdCpcblx0KiBAcGFyYW0gc2VyZGUgLSBUaGUgc2VyaWFsaXplciB0byB1c2UuXG5cdCovXG5cdGNvbnN0cnVjdG9yKHNlcmRlKSB7XG5cdFx0dGhpcy5zZXJkZSA9IHNlcmRlIHx8IHRoaXMuc2VyZGU7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQmFzZUNhY2hlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iYXNlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/cache/base.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/cache/index.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-checkpoint/dist/cache/index.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/cache/base.js\");\n/* harmony import */ var _memory_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./memory.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/cache/memory.js\");\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9kaXN0L2NhY2hlL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7OztBQUFzQztBQUNNIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9kaXN0L2NhY2hlL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VDYWNoZSB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IEluTWVtb3J5Q2FjaGUgfSBmcm9tIFwiLi9tZW1vcnkuanNcIjtcblxuZXhwb3J0IHsgIH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/cache/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/cache/memory.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-checkpoint/dist/cache/memory.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InMemoryCache: () => (/* binding */ InMemoryCache)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/cache/base.js\");\n\n\n//#region src/cache/memory.ts\nvar InMemoryCache = class extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseCache {\n\tcache = {};\n\tasync get(keys) {\n\t\tif (!keys.length) return [];\n\t\tconst now = Date.now();\n\t\treturn (await Promise.all(keys.map(async (fullKey) => {\n\t\t\tconst [namespace, key] = fullKey;\n\t\t\tconst strNamespace = namespace.join(\",\");\n\t\t\tif (strNamespace in this.cache && key in this.cache[strNamespace]) {\n\t\t\t\tconst cached = this.cache[strNamespace][key];\n\t\t\t\tif (cached.exp == null || now < cached.exp) {\n\t\t\t\t\tconst value = await this.serde.loadsTyped(cached.enc, cached.val);\n\t\t\t\t\treturn [{\n\t\t\t\t\t\tkey: fullKey,\n\t\t\t\t\t\tvalue\n\t\t\t\t\t}];\n\t\t\t\t} else delete this.cache[strNamespace][key];\n\t\t\t}\n\t\t\treturn [];\n\t\t}))).flat();\n\t}\n\tasync set(pairs) {\n\t\tconst now = Date.now();\n\t\tfor (const { key: fullKey, value, ttl } of pairs) {\n\t\t\tconst [namespace, key] = fullKey;\n\t\t\tconst strNamespace = namespace.join(\",\");\n\t\t\tconst [enc, val] = await this.serde.dumpsTyped(value);\n\t\t\tconst exp = ttl != null ? ttl * 1e3 + now : null;\n\t\t\tthis.cache[strNamespace] ??= {};\n\t\t\tthis.cache[strNamespace][key] = {\n\t\t\t\tenc,\n\t\t\t\tval,\n\t\t\t\texp\n\t\t\t};\n\t\t}\n\t}\n\tasync clear(namespaces) {\n\t\tif (!namespaces.length) {\n\t\t\tthis.cache = {};\n\t\t\treturn;\n\t\t}\n\t\tfor (const namespace of namespaces) {\n\t\t\tconst strNamespace = namespace.join(\",\");\n\t\t\tif (strNamespace in this.cache) delete this.cache[strNamespace];\n\t\t}\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=memory.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9kaXN0L2NhY2hlL21lbW9yeS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFzQzs7QUFFdEM7QUFDQSxrQ0FBa0MsK0NBQVM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixNQUFNO0FBQ047QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxlQUFlLDJCQUEyQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3lCO0FBQ3pCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9kaXN0L2NhY2hlL21lbW9yeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlQ2FjaGUgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY2FjaGUvbWVtb3J5LnRzXG52YXIgSW5NZW1vcnlDYWNoZSA9IGNsYXNzIGV4dGVuZHMgQmFzZUNhY2hlIHtcblx0Y2FjaGUgPSB7fTtcblx0YXN5bmMgZ2V0KGtleXMpIHtcblx0XHRpZiAoIWtleXMubGVuZ3RoKSByZXR1cm4gW107XG5cdFx0Y29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblx0XHRyZXR1cm4gKGF3YWl0IFByb21pc2UuYWxsKGtleXMubWFwKGFzeW5jIChmdWxsS2V5KSA9PiB7XG5cdFx0XHRjb25zdCBbbmFtZXNwYWNlLCBrZXldID0gZnVsbEtleTtcblx0XHRcdGNvbnN0IHN0ck5hbWVzcGFjZSA9IG5hbWVzcGFjZS5qb2luKFwiLFwiKTtcblx0XHRcdGlmIChzdHJOYW1lc3BhY2UgaW4gdGhpcy5jYWNoZSAmJiBrZXkgaW4gdGhpcy5jYWNoZVtzdHJOYW1lc3BhY2VdKSB7XG5cdFx0XHRcdGNvbnN0IGNhY2hlZCA9IHRoaXMuY2FjaGVbc3RyTmFtZXNwYWNlXVtrZXldO1xuXHRcdFx0XHRpZiAoY2FjaGVkLmV4cCA9PSBudWxsIHx8IG5vdyA8IGNhY2hlZC5leHApIHtcblx0XHRcdFx0XHRjb25zdCB2YWx1ZSA9IGF3YWl0IHRoaXMuc2VyZGUubG9hZHNUeXBlZChjYWNoZWQuZW5jLCBjYWNoZWQudmFsKTtcblx0XHRcdFx0XHRyZXR1cm4gW3tcblx0XHRcdFx0XHRcdGtleTogZnVsbEtleSxcblx0XHRcdFx0XHRcdHZhbHVlXG5cdFx0XHRcdFx0fV07XG5cdFx0XHRcdH0gZWxzZSBkZWxldGUgdGhpcy5jYWNoZVtzdHJOYW1lc3BhY2VdW2tleV07XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gW107XG5cdFx0fSkpKS5mbGF0KCk7XG5cdH1cblx0YXN5bmMgc2V0KHBhaXJzKSB7XG5cdFx0Y29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblx0XHRmb3IgKGNvbnN0IHsga2V5OiBmdWxsS2V5LCB2YWx1ZSwgdHRsIH0gb2YgcGFpcnMpIHtcblx0XHRcdGNvbnN0IFtuYW1lc3BhY2UsIGtleV0gPSBmdWxsS2V5O1xuXHRcdFx0Y29uc3Qgc3RyTmFtZXNwYWNlID0gbmFtZXNwYWNlLmpvaW4oXCIsXCIpO1xuXHRcdFx0Y29uc3QgW2VuYywgdmFsXSA9IGF3YWl0IHRoaXMuc2VyZGUuZHVtcHNUeXBlZCh2YWx1ZSk7XG5cdFx0XHRjb25zdCBleHAgPSB0dGwgIT0gbnVsbCA/IHR0bCAqIDFlMyArIG5vdyA6IG51bGw7XG5cdFx0XHR0aGlzLmNhY2hlW3N0ck5hbWVzcGFjZV0gPz89IHt9O1xuXHRcdFx0dGhpcy5jYWNoZVtzdHJOYW1lc3BhY2VdW2tleV0gPSB7XG5cdFx0XHRcdGVuYyxcblx0XHRcdFx0dmFsLFxuXHRcdFx0XHRleHBcblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cdGFzeW5jIGNsZWFyKG5hbWVzcGFjZXMpIHtcblx0XHRpZiAoIW5hbWVzcGFjZXMubGVuZ3RoKSB7XG5cdFx0XHR0aGlzLmNhY2hlID0ge307XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGZvciAoY29uc3QgbmFtZXNwYWNlIG9mIG5hbWVzcGFjZXMpIHtcblx0XHRcdGNvbnN0IHN0ck5hbWVzcGFjZSA9IG5hbWVzcGFjZS5qb2luKFwiLFwiKTtcblx0XHRcdGlmIChzdHJOYW1lc3BhY2UgaW4gdGhpcy5jYWNoZSkgZGVsZXRlIHRoaXMuY2FjaGVbc3RyTmFtZXNwYWNlXTtcblx0XHR9XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgSW5NZW1vcnlDYWNoZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVtb3J5LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/cache/memory.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/id.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-checkpoint/dist/id.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   uuid5: () => (/* binding */ uuid5),\n/* harmony export */   uuid6: () => (/* binding */ uuid6)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! uuid */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/v6.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/v5.js\");\n\n\n//#region src/id.ts\nfunction uuid6(clockseq) {\n\treturn (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({ clockseq });\n}\nfunction uuid5(name, namespace) {\n\tconst namespaceBytes = namespace.replace(/-/g, \"\").match(/.{2}/g).map((byte) => parseInt(byte, 16));\n\treturn (0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(name, new Uint8Array(namespaceBytes));\n}\n\n//#endregion\n\n//# sourceMappingURL=id.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9kaXN0L2lkLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBOEI7O0FBRTlCO0FBQ0E7QUFDQSxRQUFRLGdEQUFFLEdBQUcsVUFBVTtBQUN2QjtBQUNBO0FBQ0EsNkRBQTZELEVBQUU7QUFDL0QsUUFBUSxnREFBRTtBQUNWOztBQUVBO0FBQ3dCO0FBQ3hCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9kaXN0L2lkLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHY1LCB2NiB9IGZyb20gXCJ1dWlkXCI7XG5cbi8vI3JlZ2lvbiBzcmMvaWQudHNcbmZ1bmN0aW9uIHV1aWQ2KGNsb2Nrc2VxKSB7XG5cdHJldHVybiB2Nih7IGNsb2Nrc2VxIH0pO1xufVxuZnVuY3Rpb24gdXVpZDUobmFtZSwgbmFtZXNwYWNlKSB7XG5cdGNvbnN0IG5hbWVzcGFjZUJ5dGVzID0gbmFtZXNwYWNlLnJlcGxhY2UoLy0vZywgXCJcIikubWF0Y2goLy57Mn0vZykubWFwKChieXRlKSA9PiBwYXJzZUludChieXRlLCAxNikpO1xuXHRyZXR1cm4gdjUobmFtZSwgbmV3IFVpbnQ4QXJyYXkobmFtZXNwYWNlQnl0ZXMpKTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyB1dWlkNSwgdXVpZDYgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlkLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/id.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/index.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-checkpoint/dist/index.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncBatchedStore: () => (/* reexport safe */ _store_batch_js__WEBPACK_IMPORTED_MODULE_5__.AsyncBatchedStore),\n/* harmony export */   BaseCache: () => (/* reexport safe */ _cache_base_js__WEBPACK_IMPORTED_MODULE_7__.BaseCache),\n/* harmony export */   BaseCheckpointSaver: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_2__.BaseCheckpointSaver),\n/* harmony export */   BaseStore: () => (/* reexport safe */ _store_base_js__WEBPACK_IMPORTED_MODULE_4__.BaseStore),\n/* harmony export */   ERROR: () => (/* reexport safe */ _serde_types_js__WEBPACK_IMPORTED_MODULE_1__.ERROR),\n/* harmony export */   INTERRUPT: () => (/* reexport safe */ _serde_types_js__WEBPACK_IMPORTED_MODULE_1__.INTERRUPT),\n/* harmony export */   InMemoryCache: () => (/* reexport safe */ _cache_memory_js__WEBPACK_IMPORTED_MODULE_8__.InMemoryCache),\n/* harmony export */   InMemoryStore: () => (/* reexport safe */ _store_memory_js__WEBPACK_IMPORTED_MODULE_6__.InMemoryStore),\n/* harmony export */   InvalidNamespaceError: () => (/* reexport safe */ _store_base_js__WEBPACK_IMPORTED_MODULE_4__.InvalidNamespaceError),\n/* harmony export */   MemorySaver: () => (/* reexport safe */ _memory_js__WEBPACK_IMPORTED_MODULE_3__.MemorySaver),\n/* harmony export */   MemoryStore: () => (/* reexport safe */ _store_memory_js__WEBPACK_IMPORTED_MODULE_6__.MemoryStore),\n/* harmony export */   RESUME: () => (/* reexport safe */ _serde_types_js__WEBPACK_IMPORTED_MODULE_1__.RESUME),\n/* harmony export */   SCHEDULED: () => (/* reexport safe */ _serde_types_js__WEBPACK_IMPORTED_MODULE_1__.SCHEDULED),\n/* harmony export */   TASKS: () => (/* reexport safe */ _serde_types_js__WEBPACK_IMPORTED_MODULE_1__.TASKS),\n/* harmony export */   WRITES_IDX_MAP: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_2__.WRITES_IDX_MAP),\n/* harmony export */   compareChannelVersions: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_2__.compareChannelVersions),\n/* harmony export */   copyCheckpoint: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_2__.copyCheckpoint),\n/* harmony export */   deepCopy: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_2__.deepCopy),\n/* harmony export */   emptyCheckpoint: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_2__.emptyCheckpoint),\n/* harmony export */   getCheckpointId: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_2__.getCheckpointId),\n/* harmony export */   getTextAtPath: () => (/* reexport safe */ _store_base_js__WEBPACK_IMPORTED_MODULE_4__.getTextAtPath),\n/* harmony export */   maxChannelVersion: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_2__.maxChannelVersion),\n/* harmony export */   tokenizePath: () => (/* reexport safe */ _store_base_js__WEBPACK_IMPORTED_MODULE_4__.tokenizePath),\n/* harmony export */   uuid5: () => (/* reexport safe */ _id_js__WEBPACK_IMPORTED_MODULE_0__.uuid5),\n/* harmony export */   uuid6: () => (/* reexport safe */ _id_js__WEBPACK_IMPORTED_MODULE_0__.uuid6)\n/* harmony export */ });\n/* harmony import */ var _id_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./id.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/id.js\");\n/* harmony import */ var _serde_types_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./serde/types.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/serde/types.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/base.js\");\n/* harmony import */ var _memory_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./memory.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/memory.js\");\n/* harmony import */ var _store_base_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./store/base.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/store/base.js\");\n/* harmony import */ var _store_batch_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./store/batch.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/store/batch.js\");\n/* harmony import */ var _store_memory_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./store/memory.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/store/memory.js\");\n/* harmony import */ var _cache_base_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./cache/base.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/cache/base.js\");\n/* harmony import */ var _cache_memory_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./cache/memory.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/cache/memory.js\");\n/* harmony import */ var _cache_index_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./cache/index.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/cache/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9kaXN0L2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXVDO0FBQ3VDO0FBQ3lGO0FBQzdIO0FBQ3NEO0FBQzNDO0FBQ1U7QUFDbkI7QUFDTTtBQUN4QiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoLWNoZWNrcG9pbnQvZGlzdC9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1dWlkNSwgdXVpZDYgfSBmcm9tIFwiLi9pZC5qc1wiO1xuaW1wb3J0IHsgRVJST1IsIElOVEVSUlVQVCwgUkVTVU1FLCBTQ0hFRFVMRUQsIFRBU0tTIH0gZnJvbSBcIi4vc2VyZGUvdHlwZXMuanNcIjtcbmltcG9ydCB7IEJhc2VDaGVja3BvaW50U2F2ZXIsIFdSSVRFU19JRFhfTUFQLCBjb21wYXJlQ2hhbm5lbFZlcnNpb25zLCBjb3B5Q2hlY2twb2ludCwgZGVlcENvcHksIGVtcHR5Q2hlY2twb2ludCwgZ2V0Q2hlY2twb2ludElkLCBtYXhDaGFubmVsVmVyc2lvbiB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IE1lbW9yeVNhdmVyIH0gZnJvbSBcIi4vbWVtb3J5LmpzXCI7XG5pbXBvcnQgeyBCYXNlU3RvcmUsIEludmFsaWROYW1lc3BhY2VFcnJvciwgZ2V0VGV4dEF0UGF0aCwgdG9rZW5pemVQYXRoIH0gZnJvbSBcIi4vc3RvcmUvYmFzZS5qc1wiO1xuaW1wb3J0IHsgQXN5bmNCYXRjaGVkU3RvcmUgfSBmcm9tIFwiLi9zdG9yZS9iYXRjaC5qc1wiO1xuaW1wb3J0IHsgSW5NZW1vcnlTdG9yZSwgTWVtb3J5U3RvcmUgfSBmcm9tIFwiLi9zdG9yZS9tZW1vcnkuanNcIjtcbmltcG9ydCB7IEJhc2VDYWNoZSB9IGZyb20gXCIuL2NhY2hlL2Jhc2UuanNcIjtcbmltcG9ydCB7IEluTWVtb3J5Q2FjaGUgfSBmcm9tIFwiLi9jYWNoZS9tZW1vcnkuanNcIjtcbmltcG9ydCBcIi4vY2FjaGUvaW5kZXguanNcIjtcblxuZXhwb3J0IHsgQXN5bmNCYXRjaGVkU3RvcmUsIEJhc2VDYWNoZSwgQmFzZUNoZWNrcG9pbnRTYXZlciwgQmFzZVN0b3JlLCBFUlJPUiwgSU5URVJSVVBULCBJbk1lbW9yeUNhY2hlLCBJbk1lbW9yeVN0b3JlLCBJbnZhbGlkTmFtZXNwYWNlRXJyb3IsIE1lbW9yeVNhdmVyLCBNZW1vcnlTdG9yZSwgUkVTVU1FLCBTQ0hFRFVMRUQsIFRBU0tTLCBXUklURVNfSURYX01BUCwgY29tcGFyZUNoYW5uZWxWZXJzaW9ucywgY29weUNoZWNrcG9pbnQsIGRlZXBDb3B5LCBlbXB0eUNoZWNrcG9pbnQsIGdldENoZWNrcG9pbnRJZCwgZ2V0VGV4dEF0UGF0aCwgbWF4Q2hhbm5lbFZlcnNpb24sIHRva2VuaXplUGF0aCwgdXVpZDUsIHV1aWQ2IH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/memory.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-checkpoint/dist/memory.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MemorySaver: () => (/* binding */ MemorySaver)\n/* harmony export */ });\n/* harmony import */ var _serde_types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./serde/types.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/serde/types.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/base.js\");\n\n\n\n//#region src/memory.ts\nfunction _generateKey(threadId, checkpointNamespace, checkpointId) {\n\treturn JSON.stringify([\n\t\tthreadId,\n\t\tcheckpointNamespace,\n\t\tcheckpointId\n\t]);\n}\nfunction _parseKey(key) {\n\tconst [threadId, checkpointNamespace, checkpointId] = JSON.parse(key);\n\treturn {\n\t\tthreadId,\n\t\tcheckpointNamespace,\n\t\tcheckpointId\n\t};\n}\nvar MemorySaver = class extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseCheckpointSaver {\n\tstorage = {};\n\twrites = {};\n\tconstructor(serde) {\n\t\tsuper(serde);\n\t}\n\t/** @internal */\n\tasync _migratePendingSends(mutableCheckpoint, threadId, checkpointNs, parentCheckpointId) {\n\t\tconst deseriablizableCheckpoint = mutableCheckpoint;\n\t\tconst parentKey = _generateKey(threadId, checkpointNs, parentCheckpointId);\n\t\tconst pendingSends = await Promise.all(Object.values(this.writes[parentKey] ?? {}).filter(([_taskId, channel]) => channel === _serde_types_js__WEBPACK_IMPORTED_MODULE_0__.TASKS).map(async ([_taskId, _channel, writes]) => await this.serde.loadsTyped(\"json\", writes)));\n\t\tdeseriablizableCheckpoint.channel_values ??= {};\n\t\tdeseriablizableCheckpoint.channel_values[_serde_types_js__WEBPACK_IMPORTED_MODULE_0__.TASKS] = pendingSends;\n\t\tdeseriablizableCheckpoint.channel_versions ??= {};\n\t\tdeseriablizableCheckpoint.channel_versions[_serde_types_js__WEBPACK_IMPORTED_MODULE_0__.TASKS] = Object.keys(deseriablizableCheckpoint.channel_versions).length > 0 ? (0,_base_js__WEBPACK_IMPORTED_MODULE_1__.maxChannelVersion)(...Object.values(deseriablizableCheckpoint.channel_versions)) : this.getNextVersion(void 0);\n\t}\n\tasync getTuple(config) {\n\t\tconst thread_id = config.configurable?.thread_id;\n\t\tconst checkpoint_ns = config.configurable?.checkpoint_ns ?? \"\";\n\t\tlet checkpoint_id = (0,_base_js__WEBPACK_IMPORTED_MODULE_1__.getCheckpointId)(config);\n\t\tif (checkpoint_id) {\n\t\t\tconst saved = this.storage[thread_id]?.[checkpoint_ns]?.[checkpoint_id];\n\t\t\tif (saved !== void 0) {\n\t\t\t\tconst [checkpoint, metadata, parentCheckpointId] = saved;\n\t\t\t\tconst key = _generateKey(thread_id, checkpoint_ns, checkpoint_id);\n\t\t\t\tconst deserializedCheckpoint = await this.serde.loadsTyped(\"json\", checkpoint);\n\t\t\t\tif (deserializedCheckpoint.v < 4 && parentCheckpointId !== void 0) await this._migratePendingSends(deserializedCheckpoint, thread_id, checkpoint_ns, parentCheckpointId);\n\t\t\t\tconst pendingWrites = await Promise.all(Object.values(this.writes[key] || {}).map(async ([taskId, channel, value]) => {\n\t\t\t\t\treturn [\n\t\t\t\t\t\ttaskId,\n\t\t\t\t\t\tchannel,\n\t\t\t\t\t\tawait this.serde.loadsTyped(\"json\", value)\n\t\t\t\t\t];\n\t\t\t\t}));\n\t\t\t\tconst checkpointTuple = {\n\t\t\t\t\tconfig,\n\t\t\t\t\tcheckpoint: deserializedCheckpoint,\n\t\t\t\t\tmetadata: await this.serde.loadsTyped(\"json\", metadata),\n\t\t\t\t\tpendingWrites\n\t\t\t\t};\n\t\t\t\tif (parentCheckpointId !== void 0) checkpointTuple.parentConfig = { configurable: {\n\t\t\t\t\tthread_id,\n\t\t\t\t\tcheckpoint_ns,\n\t\t\t\t\tcheckpoint_id: parentCheckpointId\n\t\t\t\t} };\n\t\t\t\treturn checkpointTuple;\n\t\t\t}\n\t\t} else {\n\t\t\tconst checkpoints = this.storage[thread_id]?.[checkpoint_ns];\n\t\t\tif (checkpoints !== void 0) {\n\t\t\t\tcheckpoint_id = Object.keys(checkpoints).sort((a, b) => b.localeCompare(a))[0];\n\t\t\t\tconst saved = checkpoints[checkpoint_id];\n\t\t\t\tconst [checkpoint, metadata, parentCheckpointId] = saved;\n\t\t\t\tconst key = _generateKey(thread_id, checkpoint_ns, checkpoint_id);\n\t\t\t\tconst deserializedCheckpoint = await this.serde.loadsTyped(\"json\", checkpoint);\n\t\t\t\tif (deserializedCheckpoint.v < 4 && parentCheckpointId !== void 0) await this._migratePendingSends(deserializedCheckpoint, thread_id, checkpoint_ns, parentCheckpointId);\n\t\t\t\tconst pendingWrites = await Promise.all(Object.values(this.writes[key] || {}).map(async ([taskId, channel, value]) => {\n\t\t\t\t\treturn [\n\t\t\t\t\t\ttaskId,\n\t\t\t\t\t\tchannel,\n\t\t\t\t\t\tawait this.serde.loadsTyped(\"json\", value)\n\t\t\t\t\t];\n\t\t\t\t}));\n\t\t\t\tconst checkpointTuple = {\n\t\t\t\t\tconfig: { configurable: {\n\t\t\t\t\t\tthread_id,\n\t\t\t\t\t\tcheckpoint_id,\n\t\t\t\t\t\tcheckpoint_ns\n\t\t\t\t\t} },\n\t\t\t\t\tcheckpoint: deserializedCheckpoint,\n\t\t\t\t\tmetadata: await this.serde.loadsTyped(\"json\", metadata),\n\t\t\t\t\tpendingWrites\n\t\t\t\t};\n\t\t\t\tif (parentCheckpointId !== void 0) checkpointTuple.parentConfig = { configurable: {\n\t\t\t\t\tthread_id,\n\t\t\t\t\tcheckpoint_ns,\n\t\t\t\t\tcheckpoint_id: parentCheckpointId\n\t\t\t\t} };\n\t\t\t\treturn checkpointTuple;\n\t\t\t}\n\t\t}\n\t\treturn void 0;\n\t}\n\tasync *list(config, options) {\n\t\tlet { before, limit, filter } = options ?? {};\n\t\tconst threadIds = config.configurable?.thread_id ? [config.configurable?.thread_id] : Object.keys(this.storage);\n\t\tconst configCheckpointNamespace = config.configurable?.checkpoint_ns;\n\t\tconst configCheckpointId = config.configurable?.checkpoint_id;\n\t\tfor (const threadId of threadIds) for (const checkpointNamespace of Object.keys(this.storage[threadId] ?? {})) {\n\t\t\tif (configCheckpointNamespace !== void 0 && checkpointNamespace !== configCheckpointNamespace) continue;\n\t\t\tconst checkpoints = this.storage[threadId]?.[checkpointNamespace] ?? {};\n\t\t\tconst sortedCheckpoints = Object.entries(checkpoints).sort((a, b) => b[0].localeCompare(a[0]));\n\t\t\tfor (const [checkpointId, [checkpoint, metadataStr, parentCheckpointId]] of sortedCheckpoints) {\n\t\t\t\tif (configCheckpointId && checkpointId !== configCheckpointId) continue;\n\t\t\t\tif (before && before.configurable?.checkpoint_id && checkpointId >= before.configurable.checkpoint_id) continue;\n\t\t\t\tconst metadata = await this.serde.loadsTyped(\"json\", metadataStr);\n\t\t\t\tif (filter && !Object.entries(filter).every(([key$1, value]) => metadata[key$1] === value)) continue;\n\t\t\t\tif (limit !== void 0) {\n\t\t\t\t\tif (limit <= 0) break;\n\t\t\t\t\tlimit -= 1;\n\t\t\t\t}\n\t\t\t\tconst key = _generateKey(threadId, checkpointNamespace, checkpointId);\n\t\t\t\tconst writes = Object.values(this.writes[key] || {});\n\t\t\t\tconst pendingWrites = await Promise.all(writes.map(async ([taskId, channel, value]) => {\n\t\t\t\t\treturn [\n\t\t\t\t\t\ttaskId,\n\t\t\t\t\t\tchannel,\n\t\t\t\t\t\tawait this.serde.loadsTyped(\"json\", value)\n\t\t\t\t\t];\n\t\t\t\t}));\n\t\t\t\tconst deserializedCheckpoint = await this.serde.loadsTyped(\"json\", checkpoint);\n\t\t\t\tif (deserializedCheckpoint.v < 4 && parentCheckpointId !== void 0) await this._migratePendingSends(deserializedCheckpoint, threadId, checkpointNamespace, parentCheckpointId);\n\t\t\t\tconst checkpointTuple = {\n\t\t\t\t\tconfig: { configurable: {\n\t\t\t\t\t\tthread_id: threadId,\n\t\t\t\t\t\tcheckpoint_ns: checkpointNamespace,\n\t\t\t\t\t\tcheckpoint_id: checkpointId\n\t\t\t\t\t} },\n\t\t\t\t\tcheckpoint: deserializedCheckpoint,\n\t\t\t\t\tmetadata,\n\t\t\t\t\tpendingWrites\n\t\t\t\t};\n\t\t\t\tif (parentCheckpointId !== void 0) checkpointTuple.parentConfig = { configurable: {\n\t\t\t\t\tthread_id: threadId,\n\t\t\t\t\tcheckpoint_ns: checkpointNamespace,\n\t\t\t\t\tcheckpoint_id: parentCheckpointId\n\t\t\t\t} };\n\t\t\t\tyield checkpointTuple;\n\t\t\t}\n\t\t}\n\t}\n\tasync put(config, checkpoint, metadata) {\n\t\tconst preparedCheckpoint = (0,_base_js__WEBPACK_IMPORTED_MODULE_1__.copyCheckpoint)(checkpoint);\n\t\tconst threadId = config.configurable?.thread_id;\n\t\tconst checkpointNamespace = config.configurable?.checkpoint_ns ?? \"\";\n\t\tif (threadId === void 0) throw new Error(`Failed to put checkpoint. The passed RunnableConfig is missing a required \"thread_id\" field in its \"configurable\" property.`);\n\t\tif (!this.storage[threadId]) this.storage[threadId] = {};\n\t\tif (!this.storage[threadId][checkpointNamespace]) this.storage[threadId][checkpointNamespace] = {};\n\t\tconst [[, serializedCheckpoint], [, serializedMetadata]] = await Promise.all([this.serde.dumpsTyped(preparedCheckpoint), this.serde.dumpsTyped(metadata)]);\n\t\tthis.storage[threadId][checkpointNamespace][checkpoint.id] = [\n\t\t\tserializedCheckpoint,\n\t\t\tserializedMetadata,\n\t\t\tconfig.configurable?.checkpoint_id\n\t\t];\n\t\treturn { configurable: {\n\t\t\tthread_id: threadId,\n\t\t\tcheckpoint_ns: checkpointNamespace,\n\t\t\tcheckpoint_id: checkpoint.id\n\t\t} };\n\t}\n\tasync putWrites(config, writes, taskId) {\n\t\tconst threadId = config.configurable?.thread_id;\n\t\tconst checkpointNamespace = config.configurable?.checkpoint_ns;\n\t\tconst checkpointId = config.configurable?.checkpoint_id;\n\t\tif (threadId === void 0) throw new Error(`Failed to put writes. The passed RunnableConfig is missing a required \"thread_id\" field in its \"configurable\" property`);\n\t\tif (checkpointId === void 0) throw new Error(`Failed to put writes. The passed RunnableConfig is missing a required \"checkpoint_id\" field in its \"configurable\" property.`);\n\t\tconst outerKey = _generateKey(threadId, checkpointNamespace, checkpointId);\n\t\tconst outerWrites_ = this.writes[outerKey];\n\t\tif (this.writes[outerKey] === void 0) this.writes[outerKey] = {};\n\t\tawait Promise.all(writes.map(async ([channel, value], idx) => {\n\t\t\tconst [, serializedValue] = await this.serde.dumpsTyped(value);\n\t\t\tconst innerKey = [taskId, _base_js__WEBPACK_IMPORTED_MODULE_1__.WRITES_IDX_MAP[channel] || idx];\n\t\t\tconst innerKeyStr = `${innerKey[0]},${innerKey[1]}`;\n\t\t\tif (innerKey[1] >= 0 && outerWrites_ && innerKeyStr in outerWrites_) return;\n\t\t\tthis.writes[outerKey][innerKeyStr] = [\n\t\t\t\ttaskId,\n\t\t\t\tchannel,\n\t\t\t\tserializedValue\n\t\t\t];\n\t\t}));\n\t}\n\tasync deleteThread(threadId) {\n\t\tdelete this.storage[threadId];\n\t\tfor (const key of Object.keys(this.writes)) if (_parseKey(key).threadId === threadId) delete this.writes[key];\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=memory.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9kaXN0L21lbW9yeS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBeUM7QUFDMkU7O0FBRXBIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHlEQUFtQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRkFBbUYsNkNBQTZDLGtEQUFLO0FBQ3JJO0FBQ0EsMkNBQTJDLGtEQUFLO0FBQ2hEO0FBQ0EsNkNBQTZDLGtEQUFLLHlFQUF5RSwyREFBaUI7QUFDNUk7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IseURBQWU7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRkFBZ0Y7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3RUFBd0U7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRkFBZ0Y7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3RUFBd0U7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHdCQUF3QjtBQUNoQztBQUNBO0FBQ0E7QUFDQSw4R0FBOEc7QUFDOUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQ7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3RUFBd0U7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHdEQUFjO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsb0RBQWM7QUFDM0MsMEJBQTBCLFlBQVksR0FBRyxZQUFZO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDdUI7QUFDdkIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC1jaGVja3BvaW50L2Rpc3QvbWVtb3J5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRBU0tTIH0gZnJvbSBcIi4vc2VyZGUvdHlwZXMuanNcIjtcbmltcG9ydCB7IEJhc2VDaGVja3BvaW50U2F2ZXIsIFdSSVRFU19JRFhfTUFQLCBjb3B5Q2hlY2twb2ludCwgZ2V0Q2hlY2twb2ludElkLCBtYXhDaGFubmVsVmVyc2lvbiB9IGZyb20gXCIuL2Jhc2UuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9tZW1vcnkudHNcbmZ1bmN0aW9uIF9nZW5lcmF0ZUtleSh0aHJlYWRJZCwgY2hlY2twb2ludE5hbWVzcGFjZSwgY2hlY2twb2ludElkKSB7XG5cdHJldHVybiBKU09OLnN0cmluZ2lmeShbXG5cdFx0dGhyZWFkSWQsXG5cdFx0Y2hlY2twb2ludE5hbWVzcGFjZSxcblx0XHRjaGVja3BvaW50SWRcblx0XSk7XG59XG5mdW5jdGlvbiBfcGFyc2VLZXkoa2V5KSB7XG5cdGNvbnN0IFt0aHJlYWRJZCwgY2hlY2twb2ludE5hbWVzcGFjZSwgY2hlY2twb2ludElkXSA9IEpTT04ucGFyc2Uoa2V5KTtcblx0cmV0dXJuIHtcblx0XHR0aHJlYWRJZCxcblx0XHRjaGVja3BvaW50TmFtZXNwYWNlLFxuXHRcdGNoZWNrcG9pbnRJZFxuXHR9O1xufVxudmFyIE1lbW9yeVNhdmVyID0gY2xhc3MgZXh0ZW5kcyBCYXNlQ2hlY2twb2ludFNhdmVyIHtcblx0c3RvcmFnZSA9IHt9O1xuXHR3cml0ZXMgPSB7fTtcblx0Y29uc3RydWN0b3Ioc2VyZGUpIHtcblx0XHRzdXBlcihzZXJkZSk7XG5cdH1cblx0LyoqIEBpbnRlcm5hbCAqL1xuXHRhc3luYyBfbWlncmF0ZVBlbmRpbmdTZW5kcyhtdXRhYmxlQ2hlY2twb2ludCwgdGhyZWFkSWQsIGNoZWNrcG9pbnROcywgcGFyZW50Q2hlY2twb2ludElkKSB7XG5cdFx0Y29uc3QgZGVzZXJpYWJsaXphYmxlQ2hlY2twb2ludCA9IG11dGFibGVDaGVja3BvaW50O1xuXHRcdGNvbnN0IHBhcmVudEtleSA9IF9nZW5lcmF0ZUtleSh0aHJlYWRJZCwgY2hlY2twb2ludE5zLCBwYXJlbnRDaGVja3BvaW50SWQpO1xuXHRcdGNvbnN0IHBlbmRpbmdTZW5kcyA9IGF3YWl0IFByb21pc2UuYWxsKE9iamVjdC52YWx1ZXModGhpcy53cml0ZXNbcGFyZW50S2V5XSA/PyB7fSkuZmlsdGVyKChbX3Rhc2tJZCwgY2hhbm5lbF0pID0+IGNoYW5uZWwgPT09IFRBU0tTKS5tYXAoYXN5bmMgKFtfdGFza0lkLCBfY2hhbm5lbCwgd3JpdGVzXSkgPT4gYXdhaXQgdGhpcy5zZXJkZS5sb2Fkc1R5cGVkKFwianNvblwiLCB3cml0ZXMpKSk7XG5cdFx0ZGVzZXJpYWJsaXphYmxlQ2hlY2twb2ludC5jaGFubmVsX3ZhbHVlcyA/Pz0ge307XG5cdFx0ZGVzZXJpYWJsaXphYmxlQ2hlY2twb2ludC5jaGFubmVsX3ZhbHVlc1tUQVNLU10gPSBwZW5kaW5nU2VuZHM7XG5cdFx0ZGVzZXJpYWJsaXphYmxlQ2hlY2twb2ludC5jaGFubmVsX3ZlcnNpb25zID8/PSB7fTtcblx0XHRkZXNlcmlhYmxpemFibGVDaGVja3BvaW50LmNoYW5uZWxfdmVyc2lvbnNbVEFTS1NdID0gT2JqZWN0LmtleXMoZGVzZXJpYWJsaXphYmxlQ2hlY2twb2ludC5jaGFubmVsX3ZlcnNpb25zKS5sZW5ndGggPiAwID8gbWF4Q2hhbm5lbFZlcnNpb24oLi4uT2JqZWN0LnZhbHVlcyhkZXNlcmlhYmxpemFibGVDaGVja3BvaW50LmNoYW5uZWxfdmVyc2lvbnMpKSA6IHRoaXMuZ2V0TmV4dFZlcnNpb24odm9pZCAwKTtcblx0fVxuXHRhc3luYyBnZXRUdXBsZShjb25maWcpIHtcblx0XHRjb25zdCB0aHJlYWRfaWQgPSBjb25maWcuY29uZmlndXJhYmxlPy50aHJlYWRfaWQ7XG5cdFx0Y29uc3QgY2hlY2twb2ludF9ucyA9IGNvbmZpZy5jb25maWd1cmFibGU/LmNoZWNrcG9pbnRfbnMgPz8gXCJcIjtcblx0XHRsZXQgY2hlY2twb2ludF9pZCA9IGdldENoZWNrcG9pbnRJZChjb25maWcpO1xuXHRcdGlmIChjaGVja3BvaW50X2lkKSB7XG5cdFx0XHRjb25zdCBzYXZlZCA9IHRoaXMuc3RvcmFnZVt0aHJlYWRfaWRdPy5bY2hlY2twb2ludF9uc10/LltjaGVja3BvaW50X2lkXTtcblx0XHRcdGlmIChzYXZlZCAhPT0gdm9pZCAwKSB7XG5cdFx0XHRcdGNvbnN0IFtjaGVja3BvaW50LCBtZXRhZGF0YSwgcGFyZW50Q2hlY2twb2ludElkXSA9IHNhdmVkO1xuXHRcdFx0XHRjb25zdCBrZXkgPSBfZ2VuZXJhdGVLZXkodGhyZWFkX2lkLCBjaGVja3BvaW50X25zLCBjaGVja3BvaW50X2lkKTtcblx0XHRcdFx0Y29uc3QgZGVzZXJpYWxpemVkQ2hlY2twb2ludCA9IGF3YWl0IHRoaXMuc2VyZGUubG9hZHNUeXBlZChcImpzb25cIiwgY2hlY2twb2ludCk7XG5cdFx0XHRcdGlmIChkZXNlcmlhbGl6ZWRDaGVja3BvaW50LnYgPCA0ICYmIHBhcmVudENoZWNrcG9pbnRJZCAhPT0gdm9pZCAwKSBhd2FpdCB0aGlzLl9taWdyYXRlUGVuZGluZ1NlbmRzKGRlc2VyaWFsaXplZENoZWNrcG9pbnQsIHRocmVhZF9pZCwgY2hlY2twb2ludF9ucywgcGFyZW50Q2hlY2twb2ludElkKTtcblx0XHRcdFx0Y29uc3QgcGVuZGluZ1dyaXRlcyA9IGF3YWl0IFByb21pc2UuYWxsKE9iamVjdC52YWx1ZXModGhpcy53cml0ZXNba2V5XSB8fCB7fSkubWFwKGFzeW5jIChbdGFza0lkLCBjaGFubmVsLCB2YWx1ZV0pID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gW1xuXHRcdFx0XHRcdFx0dGFza0lkLFxuXHRcdFx0XHRcdFx0Y2hhbm5lbCxcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2VyZGUubG9hZHNUeXBlZChcImpzb25cIiwgdmFsdWUpXG5cdFx0XHRcdFx0XTtcblx0XHRcdFx0fSkpO1xuXHRcdFx0XHRjb25zdCBjaGVja3BvaW50VHVwbGUgPSB7XG5cdFx0XHRcdFx0Y29uZmlnLFxuXHRcdFx0XHRcdGNoZWNrcG9pbnQ6IGRlc2VyaWFsaXplZENoZWNrcG9pbnQsXG5cdFx0XHRcdFx0bWV0YWRhdGE6IGF3YWl0IHRoaXMuc2VyZGUubG9hZHNUeXBlZChcImpzb25cIiwgbWV0YWRhdGEpLFxuXHRcdFx0XHRcdHBlbmRpbmdXcml0ZXNcblx0XHRcdFx0fTtcblx0XHRcdFx0aWYgKHBhcmVudENoZWNrcG9pbnRJZCAhPT0gdm9pZCAwKSBjaGVja3BvaW50VHVwbGUucGFyZW50Q29uZmlnID0geyBjb25maWd1cmFibGU6IHtcblx0XHRcdFx0XHR0aHJlYWRfaWQsXG5cdFx0XHRcdFx0Y2hlY2twb2ludF9ucyxcblx0XHRcdFx0XHRjaGVja3BvaW50X2lkOiBwYXJlbnRDaGVja3BvaW50SWRcblx0XHRcdFx0fSB9O1xuXHRcdFx0XHRyZXR1cm4gY2hlY2twb2ludFR1cGxlO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCBjaGVja3BvaW50cyA9IHRoaXMuc3RvcmFnZVt0aHJlYWRfaWRdPy5bY2hlY2twb2ludF9uc107XG5cdFx0XHRpZiAoY2hlY2twb2ludHMgIT09IHZvaWQgMCkge1xuXHRcdFx0XHRjaGVja3BvaW50X2lkID0gT2JqZWN0LmtleXMoY2hlY2twb2ludHMpLnNvcnQoKGEsIGIpID0+IGIubG9jYWxlQ29tcGFyZShhKSlbMF07XG5cdFx0XHRcdGNvbnN0IHNhdmVkID0gY2hlY2twb2ludHNbY2hlY2twb2ludF9pZF07XG5cdFx0XHRcdGNvbnN0IFtjaGVja3BvaW50LCBtZXRhZGF0YSwgcGFyZW50Q2hlY2twb2ludElkXSA9IHNhdmVkO1xuXHRcdFx0XHRjb25zdCBrZXkgPSBfZ2VuZXJhdGVLZXkodGhyZWFkX2lkLCBjaGVja3BvaW50X25zLCBjaGVja3BvaW50X2lkKTtcblx0XHRcdFx0Y29uc3QgZGVzZXJpYWxpemVkQ2hlY2twb2ludCA9IGF3YWl0IHRoaXMuc2VyZGUubG9hZHNUeXBlZChcImpzb25cIiwgY2hlY2twb2ludCk7XG5cdFx0XHRcdGlmIChkZXNlcmlhbGl6ZWRDaGVja3BvaW50LnYgPCA0ICYmIHBhcmVudENoZWNrcG9pbnRJZCAhPT0gdm9pZCAwKSBhd2FpdCB0aGlzLl9taWdyYXRlUGVuZGluZ1NlbmRzKGRlc2VyaWFsaXplZENoZWNrcG9pbnQsIHRocmVhZF9pZCwgY2hlY2twb2ludF9ucywgcGFyZW50Q2hlY2twb2ludElkKTtcblx0XHRcdFx0Y29uc3QgcGVuZGluZ1dyaXRlcyA9IGF3YWl0IFByb21pc2UuYWxsKE9iamVjdC52YWx1ZXModGhpcy53cml0ZXNba2V5XSB8fCB7fSkubWFwKGFzeW5jIChbdGFza0lkLCBjaGFubmVsLCB2YWx1ZV0pID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gW1xuXHRcdFx0XHRcdFx0dGFza0lkLFxuXHRcdFx0XHRcdFx0Y2hhbm5lbCxcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2VyZGUubG9hZHNUeXBlZChcImpzb25cIiwgdmFsdWUpXG5cdFx0XHRcdFx0XTtcblx0XHRcdFx0fSkpO1xuXHRcdFx0XHRjb25zdCBjaGVja3BvaW50VHVwbGUgPSB7XG5cdFx0XHRcdFx0Y29uZmlnOiB7IGNvbmZpZ3VyYWJsZToge1xuXHRcdFx0XHRcdFx0dGhyZWFkX2lkLFxuXHRcdFx0XHRcdFx0Y2hlY2twb2ludF9pZCxcblx0XHRcdFx0XHRcdGNoZWNrcG9pbnRfbnNcblx0XHRcdFx0XHR9IH0sXG5cdFx0XHRcdFx0Y2hlY2twb2ludDogZGVzZXJpYWxpemVkQ2hlY2twb2ludCxcblx0XHRcdFx0XHRtZXRhZGF0YTogYXdhaXQgdGhpcy5zZXJkZS5sb2Fkc1R5cGVkKFwianNvblwiLCBtZXRhZGF0YSksXG5cdFx0XHRcdFx0cGVuZGluZ1dyaXRlc1xuXHRcdFx0XHR9O1xuXHRcdFx0XHRpZiAocGFyZW50Q2hlY2twb2ludElkICE9PSB2b2lkIDApIGNoZWNrcG9pbnRUdXBsZS5wYXJlbnRDb25maWcgPSB7IGNvbmZpZ3VyYWJsZToge1xuXHRcdFx0XHRcdHRocmVhZF9pZCxcblx0XHRcdFx0XHRjaGVja3BvaW50X25zLFxuXHRcdFx0XHRcdGNoZWNrcG9pbnRfaWQ6IHBhcmVudENoZWNrcG9pbnRJZFxuXHRcdFx0XHR9IH07XG5cdFx0XHRcdHJldHVybiBjaGVja3BvaW50VHVwbGU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB2b2lkIDA7XG5cdH1cblx0YXN5bmMgKmxpc3QoY29uZmlnLCBvcHRpb25zKSB7XG5cdFx0bGV0IHsgYmVmb3JlLCBsaW1pdCwgZmlsdGVyIH0gPSBvcHRpb25zID8/IHt9O1xuXHRcdGNvbnN0IHRocmVhZElkcyA9IGNvbmZpZy5jb25maWd1cmFibGU/LnRocmVhZF9pZCA/IFtjb25maWcuY29uZmlndXJhYmxlPy50aHJlYWRfaWRdIDogT2JqZWN0LmtleXModGhpcy5zdG9yYWdlKTtcblx0XHRjb25zdCBjb25maWdDaGVja3BvaW50TmFtZXNwYWNlID0gY29uZmlnLmNvbmZpZ3VyYWJsZT8uY2hlY2twb2ludF9ucztcblx0XHRjb25zdCBjb25maWdDaGVja3BvaW50SWQgPSBjb25maWcuY29uZmlndXJhYmxlPy5jaGVja3BvaW50X2lkO1xuXHRcdGZvciAoY29uc3QgdGhyZWFkSWQgb2YgdGhyZWFkSWRzKSBmb3IgKGNvbnN0IGNoZWNrcG9pbnROYW1lc3BhY2Ugb2YgT2JqZWN0LmtleXModGhpcy5zdG9yYWdlW3RocmVhZElkXSA/PyB7fSkpIHtcblx0XHRcdGlmIChjb25maWdDaGVja3BvaW50TmFtZXNwYWNlICE9PSB2b2lkIDAgJiYgY2hlY2twb2ludE5hbWVzcGFjZSAhPT0gY29uZmlnQ2hlY2twb2ludE5hbWVzcGFjZSkgY29udGludWU7XG5cdFx0XHRjb25zdCBjaGVja3BvaW50cyA9IHRoaXMuc3RvcmFnZVt0aHJlYWRJZF0/LltjaGVja3BvaW50TmFtZXNwYWNlXSA/PyB7fTtcblx0XHRcdGNvbnN0IHNvcnRlZENoZWNrcG9pbnRzID0gT2JqZWN0LmVudHJpZXMoY2hlY2twb2ludHMpLnNvcnQoKGEsIGIpID0+IGJbMF0ubG9jYWxlQ29tcGFyZShhWzBdKSk7XG5cdFx0XHRmb3IgKGNvbnN0IFtjaGVja3BvaW50SWQsIFtjaGVja3BvaW50LCBtZXRhZGF0YVN0ciwgcGFyZW50Q2hlY2twb2ludElkXV0gb2Ygc29ydGVkQ2hlY2twb2ludHMpIHtcblx0XHRcdFx0aWYgKGNvbmZpZ0NoZWNrcG9pbnRJZCAmJiBjaGVja3BvaW50SWQgIT09IGNvbmZpZ0NoZWNrcG9pbnRJZCkgY29udGludWU7XG5cdFx0XHRcdGlmIChiZWZvcmUgJiYgYmVmb3JlLmNvbmZpZ3VyYWJsZT8uY2hlY2twb2ludF9pZCAmJiBjaGVja3BvaW50SWQgPj0gYmVmb3JlLmNvbmZpZ3VyYWJsZS5jaGVja3BvaW50X2lkKSBjb250aW51ZTtcblx0XHRcdFx0Y29uc3QgbWV0YWRhdGEgPSBhd2FpdCB0aGlzLnNlcmRlLmxvYWRzVHlwZWQoXCJqc29uXCIsIG1ldGFkYXRhU3RyKTtcblx0XHRcdFx0aWYgKGZpbHRlciAmJiAhT2JqZWN0LmVudHJpZXMoZmlsdGVyKS5ldmVyeSgoW2tleSQxLCB2YWx1ZV0pID0+IG1ldGFkYXRhW2tleSQxXSA9PT0gdmFsdWUpKSBjb250aW51ZTtcblx0XHRcdFx0aWYgKGxpbWl0ICE9PSB2b2lkIDApIHtcblx0XHRcdFx0XHRpZiAobGltaXQgPD0gMCkgYnJlYWs7XG5cdFx0XHRcdFx0bGltaXQgLT0gMTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCBrZXkgPSBfZ2VuZXJhdGVLZXkodGhyZWFkSWQsIGNoZWNrcG9pbnROYW1lc3BhY2UsIGNoZWNrcG9pbnRJZCk7XG5cdFx0XHRcdGNvbnN0IHdyaXRlcyA9IE9iamVjdC52YWx1ZXModGhpcy53cml0ZXNba2V5XSB8fCB7fSk7XG5cdFx0XHRcdGNvbnN0IHBlbmRpbmdXcml0ZXMgPSBhd2FpdCBQcm9taXNlLmFsbCh3cml0ZXMubWFwKGFzeW5jIChbdGFza0lkLCBjaGFubmVsLCB2YWx1ZV0pID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gW1xuXHRcdFx0XHRcdFx0dGFza0lkLFxuXHRcdFx0XHRcdFx0Y2hhbm5lbCxcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2VyZGUubG9hZHNUeXBlZChcImpzb25cIiwgdmFsdWUpXG5cdFx0XHRcdFx0XTtcblx0XHRcdFx0fSkpO1xuXHRcdFx0XHRjb25zdCBkZXNlcmlhbGl6ZWRDaGVja3BvaW50ID0gYXdhaXQgdGhpcy5zZXJkZS5sb2Fkc1R5cGVkKFwianNvblwiLCBjaGVja3BvaW50KTtcblx0XHRcdFx0aWYgKGRlc2VyaWFsaXplZENoZWNrcG9pbnQudiA8IDQgJiYgcGFyZW50Q2hlY2twb2ludElkICE9PSB2b2lkIDApIGF3YWl0IHRoaXMuX21pZ3JhdGVQZW5kaW5nU2VuZHMoZGVzZXJpYWxpemVkQ2hlY2twb2ludCwgdGhyZWFkSWQsIGNoZWNrcG9pbnROYW1lc3BhY2UsIHBhcmVudENoZWNrcG9pbnRJZCk7XG5cdFx0XHRcdGNvbnN0IGNoZWNrcG9pbnRUdXBsZSA9IHtcblx0XHRcdFx0XHRjb25maWc6IHsgY29uZmlndXJhYmxlOiB7XG5cdFx0XHRcdFx0XHR0aHJlYWRfaWQ6IHRocmVhZElkLFxuXHRcdFx0XHRcdFx0Y2hlY2twb2ludF9uczogY2hlY2twb2ludE5hbWVzcGFjZSxcblx0XHRcdFx0XHRcdGNoZWNrcG9pbnRfaWQ6IGNoZWNrcG9pbnRJZFxuXHRcdFx0XHRcdH0gfSxcblx0XHRcdFx0XHRjaGVja3BvaW50OiBkZXNlcmlhbGl6ZWRDaGVja3BvaW50LFxuXHRcdFx0XHRcdG1ldGFkYXRhLFxuXHRcdFx0XHRcdHBlbmRpbmdXcml0ZXNcblx0XHRcdFx0fTtcblx0XHRcdFx0aWYgKHBhcmVudENoZWNrcG9pbnRJZCAhPT0gdm9pZCAwKSBjaGVja3BvaW50VHVwbGUucGFyZW50Q29uZmlnID0geyBjb25maWd1cmFibGU6IHtcblx0XHRcdFx0XHR0aHJlYWRfaWQ6IHRocmVhZElkLFxuXHRcdFx0XHRcdGNoZWNrcG9pbnRfbnM6IGNoZWNrcG9pbnROYW1lc3BhY2UsXG5cdFx0XHRcdFx0Y2hlY2twb2ludF9pZDogcGFyZW50Q2hlY2twb2ludElkXG5cdFx0XHRcdH0gfTtcblx0XHRcdFx0eWllbGQgY2hlY2twb2ludFR1cGxlO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRhc3luYyBwdXQoY29uZmlnLCBjaGVja3BvaW50LCBtZXRhZGF0YSkge1xuXHRcdGNvbnN0IHByZXBhcmVkQ2hlY2twb2ludCA9IGNvcHlDaGVja3BvaW50KGNoZWNrcG9pbnQpO1xuXHRcdGNvbnN0IHRocmVhZElkID0gY29uZmlnLmNvbmZpZ3VyYWJsZT8udGhyZWFkX2lkO1xuXHRcdGNvbnN0IGNoZWNrcG9pbnROYW1lc3BhY2UgPSBjb25maWcuY29uZmlndXJhYmxlPy5jaGVja3BvaW50X25zID8/IFwiXCI7XG5cdFx0aWYgKHRocmVhZElkID09PSB2b2lkIDApIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHB1dCBjaGVja3BvaW50LiBUaGUgcGFzc2VkIFJ1bm5hYmxlQ29uZmlnIGlzIG1pc3NpbmcgYSByZXF1aXJlZCBcInRocmVhZF9pZFwiIGZpZWxkIGluIGl0cyBcImNvbmZpZ3VyYWJsZVwiIHByb3BlcnR5LmApO1xuXHRcdGlmICghdGhpcy5zdG9yYWdlW3RocmVhZElkXSkgdGhpcy5zdG9yYWdlW3RocmVhZElkXSA9IHt9O1xuXHRcdGlmICghdGhpcy5zdG9yYWdlW3RocmVhZElkXVtjaGVja3BvaW50TmFtZXNwYWNlXSkgdGhpcy5zdG9yYWdlW3RocmVhZElkXVtjaGVja3BvaW50TmFtZXNwYWNlXSA9IHt9O1xuXHRcdGNvbnN0IFtbLCBzZXJpYWxpemVkQ2hlY2twb2ludF0sIFssIHNlcmlhbGl6ZWRNZXRhZGF0YV1dID0gYXdhaXQgUHJvbWlzZS5hbGwoW3RoaXMuc2VyZGUuZHVtcHNUeXBlZChwcmVwYXJlZENoZWNrcG9pbnQpLCB0aGlzLnNlcmRlLmR1bXBzVHlwZWQobWV0YWRhdGEpXSk7XG5cdFx0dGhpcy5zdG9yYWdlW3RocmVhZElkXVtjaGVja3BvaW50TmFtZXNwYWNlXVtjaGVja3BvaW50LmlkXSA9IFtcblx0XHRcdHNlcmlhbGl6ZWRDaGVja3BvaW50LFxuXHRcdFx0c2VyaWFsaXplZE1ldGFkYXRhLFxuXHRcdFx0Y29uZmlnLmNvbmZpZ3VyYWJsZT8uY2hlY2twb2ludF9pZFxuXHRcdF07XG5cdFx0cmV0dXJuIHsgY29uZmlndXJhYmxlOiB7XG5cdFx0XHR0aHJlYWRfaWQ6IHRocmVhZElkLFxuXHRcdFx0Y2hlY2twb2ludF9uczogY2hlY2twb2ludE5hbWVzcGFjZSxcblx0XHRcdGNoZWNrcG9pbnRfaWQ6IGNoZWNrcG9pbnQuaWRcblx0XHR9IH07XG5cdH1cblx0YXN5bmMgcHV0V3JpdGVzKGNvbmZpZywgd3JpdGVzLCB0YXNrSWQpIHtcblx0XHRjb25zdCB0aHJlYWRJZCA9IGNvbmZpZy5jb25maWd1cmFibGU/LnRocmVhZF9pZDtcblx0XHRjb25zdCBjaGVja3BvaW50TmFtZXNwYWNlID0gY29uZmlnLmNvbmZpZ3VyYWJsZT8uY2hlY2twb2ludF9ucztcblx0XHRjb25zdCBjaGVja3BvaW50SWQgPSBjb25maWcuY29uZmlndXJhYmxlPy5jaGVja3BvaW50X2lkO1xuXHRcdGlmICh0aHJlYWRJZCA9PT0gdm9pZCAwKSB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBwdXQgd3JpdGVzLiBUaGUgcGFzc2VkIFJ1bm5hYmxlQ29uZmlnIGlzIG1pc3NpbmcgYSByZXF1aXJlZCBcInRocmVhZF9pZFwiIGZpZWxkIGluIGl0cyBcImNvbmZpZ3VyYWJsZVwiIHByb3BlcnR5YCk7XG5cdFx0aWYgKGNoZWNrcG9pbnRJZCA9PT0gdm9pZCAwKSB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBwdXQgd3JpdGVzLiBUaGUgcGFzc2VkIFJ1bm5hYmxlQ29uZmlnIGlzIG1pc3NpbmcgYSByZXF1aXJlZCBcImNoZWNrcG9pbnRfaWRcIiBmaWVsZCBpbiBpdHMgXCJjb25maWd1cmFibGVcIiBwcm9wZXJ0eS5gKTtcblx0XHRjb25zdCBvdXRlcktleSA9IF9nZW5lcmF0ZUtleSh0aHJlYWRJZCwgY2hlY2twb2ludE5hbWVzcGFjZSwgY2hlY2twb2ludElkKTtcblx0XHRjb25zdCBvdXRlcldyaXRlc18gPSB0aGlzLndyaXRlc1tvdXRlcktleV07XG5cdFx0aWYgKHRoaXMud3JpdGVzW291dGVyS2V5XSA9PT0gdm9pZCAwKSB0aGlzLndyaXRlc1tvdXRlcktleV0gPSB7fTtcblx0XHRhd2FpdCBQcm9taXNlLmFsbCh3cml0ZXMubWFwKGFzeW5jIChbY2hhbm5lbCwgdmFsdWVdLCBpZHgpID0+IHtcblx0XHRcdGNvbnN0IFssIHNlcmlhbGl6ZWRWYWx1ZV0gPSBhd2FpdCB0aGlzLnNlcmRlLmR1bXBzVHlwZWQodmFsdWUpO1xuXHRcdFx0Y29uc3QgaW5uZXJLZXkgPSBbdGFza0lkLCBXUklURVNfSURYX01BUFtjaGFubmVsXSB8fCBpZHhdO1xuXHRcdFx0Y29uc3QgaW5uZXJLZXlTdHIgPSBgJHtpbm5lcktleVswXX0sJHtpbm5lcktleVsxXX1gO1xuXHRcdFx0aWYgKGlubmVyS2V5WzFdID49IDAgJiYgb3V0ZXJXcml0ZXNfICYmIGlubmVyS2V5U3RyIGluIG91dGVyV3JpdGVzXykgcmV0dXJuO1xuXHRcdFx0dGhpcy53cml0ZXNbb3V0ZXJLZXldW2lubmVyS2V5U3RyXSA9IFtcblx0XHRcdFx0dGFza0lkLFxuXHRcdFx0XHRjaGFubmVsLFxuXHRcdFx0XHRzZXJpYWxpemVkVmFsdWVcblx0XHRcdF07XG5cdFx0fSkpO1xuXHR9XG5cdGFzeW5jIGRlbGV0ZVRocmVhZCh0aHJlYWRJZCkge1xuXHRcdGRlbGV0ZSB0aGlzLnN0b3JhZ2VbdGhyZWFkSWRdO1xuXHRcdGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHRoaXMud3JpdGVzKSkgaWYgKF9wYXJzZUtleShrZXkpLnRocmVhZElkID09PSB0aHJlYWRJZCkgZGVsZXRlIHRoaXMud3JpdGVzW2tleV07XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgTWVtb3J5U2F2ZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lbW9yeS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/memory.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/serde/jsonplus.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-checkpoint/dist/serde/jsonplus.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonPlusSerializer: () => (/* binding */ JsonPlusSerializer)\n/* harmony export */ });\n/* harmony import */ var _utils_fast_safe_stringify_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/fast-safe-stringify/index.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/serde/utils/fast-safe-stringify/index.js\");\n/* harmony import */ var _langchain_core_load__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/load */ \"(ssr)/./node_modules/@langchain/core/dist/load/index.js\");\n\n\n\n//#region src/serde/jsonplus.ts\nfunction isLangChainSerializedObject(value) {\n\treturn value !== null && value.lc === 1 && value.type === \"constructor\" && Array.isArray(value.id);\n}\n/**\n* The replacer in stringify does not allow delegation to built-in LangChain\n* serialization methods, and instead immediately calls `.toJSON()` and\n* continues to stringify subfields.\n*\n* We therefore must start from the most nested elements in the input and\n* deserialize upwards rather than top-down.\n*/\nasync function _reviver(value) {\n\tif (value && typeof value === \"object\") if (Array.isArray(value)) {\n\t\tconst revivedArray = await Promise.all(value.map((item) => _reviver(item)));\n\t\treturn revivedArray;\n\t} else {\n\t\tconst revivedObj = {};\n\t\tfor (const [k, v] of Object.entries(value)) revivedObj[k] = await _reviver(v);\n\t\tif (revivedObj.lc === 2 && revivedObj.type === \"undefined\") return void 0;\n\t\telse if (revivedObj.lc === 2 && revivedObj.type === \"constructor\" && Array.isArray(revivedObj.id)) try {\n\t\t\tconst constructorName = revivedObj.id[revivedObj.id.length - 1];\n\t\t\tlet constructor;\n\t\t\tswitch (constructorName) {\n\t\t\t\tcase \"Set\":\n\t\t\t\t\tconstructor = Set;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Map\":\n\t\t\t\t\tconstructor = Map;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"RegExp\":\n\t\t\t\t\tconstructor = RegExp;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Error\":\n\t\t\t\t\tconstructor = Error;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault: return revivedObj;\n\t\t\t}\n\t\t\tif (revivedObj.method) return constructor[revivedObj.method](...revivedObj.args || []);\n\t\t\telse return new constructor(...revivedObj.args || []);\n\t\t} catch (error) {\n\t\t\treturn revivedObj;\n\t\t}\n\t\telse if (isLangChainSerializedObject(revivedObj)) return (0,_langchain_core_load__WEBPACK_IMPORTED_MODULE_1__.load)(JSON.stringify(revivedObj));\n\t\treturn revivedObj;\n\t}\n\treturn value;\n}\nfunction _encodeConstructorArgs(constructor, method, args, kwargs) {\n\treturn {\n\t\tlc: 2,\n\t\ttype: \"constructor\",\n\t\tid: [constructor.name],\n\t\tmethod: method ?? null,\n\t\targs: args ?? [],\n\t\tkwargs: kwargs ?? {}\n\t};\n}\nfunction _default(obj) {\n\tif (obj === void 0) return {\n\t\tlc: 2,\n\t\ttype: \"undefined\"\n\t};\n\telse if (obj instanceof Set || obj instanceof Map) return _encodeConstructorArgs(obj.constructor, void 0, [Array.from(obj)]);\n\telse if (obj instanceof RegExp) return _encodeConstructorArgs(RegExp, void 0, [obj.source, obj.flags]);\n\telse if (obj instanceof Error) return _encodeConstructorArgs(obj.constructor, void 0, [obj.message]);\n\telse if (obj?.lg_name === \"Send\") return {\n\t\tnode: obj.node,\n\t\targs: obj.args\n\t};\n\telse return obj;\n}\nvar JsonPlusSerializer = class {\n\t_dumps(obj) {\n\t\tconst encoder = new TextEncoder();\n\t\treturn encoder.encode((0,_utils_fast_safe_stringify_index_js__WEBPACK_IMPORTED_MODULE_0__.stringify)(obj, (_, value) => {\n\t\t\treturn _default(value);\n\t\t}));\n\t}\n\tasync dumpsTyped(obj) {\n\t\tif (obj instanceof Uint8Array) return [\"bytes\", obj];\n\t\telse return [\"json\", this._dumps(obj)];\n\t}\n\tasync _loads(data) {\n\t\tconst parsed = JSON.parse(data);\n\t\treturn _reviver(parsed);\n\t}\n\tasync loadsTyped(type, data) {\n\t\tif (type === \"bytes\") return typeof data === \"string\" ? new TextEncoder().encode(data) : data;\n\t\telse if (type === \"json\") return this._loads(typeof data === \"string\" ? data : new TextDecoder().decode(data));\n\t\telse throw new Error(`Unknown serialization type: ${type}`);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=jsonplus.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9kaXN0L3NlcmRlL2pzb25wbHVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFpRTtBQUNyQjs7QUFFNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsMkRBQTJELDBEQUFJO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDhFQUFTO0FBQ2pDO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxLQUFLO0FBQzNEO0FBQ0E7O0FBRUE7QUFDOEI7QUFDOUIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC1jaGVja3BvaW50L2Rpc3Qvc2VyZGUvanNvbnBsdXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3RyaW5naWZ5IH0gZnJvbSBcIi4vdXRpbHMvZmFzdC1zYWZlLXN0cmluZ2lmeS9pbmRleC5qc1wiO1xuaW1wb3J0IHsgbG9hZCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvbG9hZFwiO1xuXG4vLyNyZWdpb24gc3JjL3NlcmRlL2pzb25wbHVzLnRzXG5mdW5jdGlvbiBpc0xhbmdDaGFpblNlcmlhbGl6ZWRPYmplY3QodmFsdWUpIHtcblx0cmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHZhbHVlLmxjID09PSAxICYmIHZhbHVlLnR5cGUgPT09IFwiY29uc3RydWN0b3JcIiAmJiBBcnJheS5pc0FycmF5KHZhbHVlLmlkKTtcbn1cbi8qKlxuKiBUaGUgcmVwbGFjZXIgaW4gc3RyaW5naWZ5IGRvZXMgbm90IGFsbG93IGRlbGVnYXRpb24gdG8gYnVpbHQtaW4gTGFuZ0NoYWluXG4qIHNlcmlhbGl6YXRpb24gbWV0aG9kcywgYW5kIGluc3RlYWQgaW1tZWRpYXRlbHkgY2FsbHMgYC50b0pTT04oKWAgYW5kXG4qIGNvbnRpbnVlcyB0byBzdHJpbmdpZnkgc3ViZmllbGRzLlxuKlxuKiBXZSB0aGVyZWZvcmUgbXVzdCBzdGFydCBmcm9tIHRoZSBtb3N0IG5lc3RlZCBlbGVtZW50cyBpbiB0aGUgaW5wdXQgYW5kXG4qIGRlc2VyaWFsaXplIHVwd2FyZHMgcmF0aGVyIHRoYW4gdG9wLWRvd24uXG4qL1xuYXN5bmMgZnVuY3Rpb24gX3Jldml2ZXIodmFsdWUpIHtcblx0aWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG5cdFx0Y29uc3QgcmV2aXZlZEFycmF5ID0gYXdhaXQgUHJvbWlzZS5hbGwodmFsdWUubWFwKChpdGVtKSA9PiBfcmV2aXZlcihpdGVtKSkpO1xuXHRcdHJldHVybiByZXZpdmVkQXJyYXk7XG5cdH0gZWxzZSB7XG5cdFx0Y29uc3QgcmV2aXZlZE9iaiA9IHt9O1xuXHRcdGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKHZhbHVlKSkgcmV2aXZlZE9ialtrXSA9IGF3YWl0IF9yZXZpdmVyKHYpO1xuXHRcdGlmIChyZXZpdmVkT2JqLmxjID09PSAyICYmIHJldml2ZWRPYmoudHlwZSA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIHZvaWQgMDtcblx0XHRlbHNlIGlmIChyZXZpdmVkT2JqLmxjID09PSAyICYmIHJldml2ZWRPYmoudHlwZSA9PT0gXCJjb25zdHJ1Y3RvclwiICYmIEFycmF5LmlzQXJyYXkocmV2aXZlZE9iai5pZCkpIHRyeSB7XG5cdFx0XHRjb25zdCBjb25zdHJ1Y3Rvck5hbWUgPSByZXZpdmVkT2JqLmlkW3Jldml2ZWRPYmouaWQubGVuZ3RoIC0gMV07XG5cdFx0XHRsZXQgY29uc3RydWN0b3I7XG5cdFx0XHRzd2l0Y2ggKGNvbnN0cnVjdG9yTmFtZSkge1xuXHRcdFx0XHRjYXNlIFwiU2V0XCI6XG5cdFx0XHRcdFx0Y29uc3RydWN0b3IgPSBTZXQ7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJNYXBcIjpcblx0XHRcdFx0XHRjb25zdHJ1Y3RvciA9IE1hcDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcIlJlZ0V4cFwiOlxuXHRcdFx0XHRcdGNvbnN0cnVjdG9yID0gUmVnRXhwO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwiRXJyb3JcIjpcblx0XHRcdFx0XHRjb25zdHJ1Y3RvciA9IEVycm9yO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRkZWZhdWx0OiByZXR1cm4gcmV2aXZlZE9iajtcblx0XHRcdH1cblx0XHRcdGlmIChyZXZpdmVkT2JqLm1ldGhvZCkgcmV0dXJuIGNvbnN0cnVjdG9yW3Jldml2ZWRPYmoubWV0aG9kXSguLi5yZXZpdmVkT2JqLmFyZ3MgfHwgW10pO1xuXHRcdFx0ZWxzZSByZXR1cm4gbmV3IGNvbnN0cnVjdG9yKC4uLnJldml2ZWRPYmouYXJncyB8fCBbXSk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdHJldHVybiByZXZpdmVkT2JqO1xuXHRcdH1cblx0XHRlbHNlIGlmIChpc0xhbmdDaGFpblNlcmlhbGl6ZWRPYmplY3QocmV2aXZlZE9iaikpIHJldHVybiBsb2FkKEpTT04uc3RyaW5naWZ5KHJldml2ZWRPYmopKTtcblx0XHRyZXR1cm4gcmV2aXZlZE9iajtcblx0fVxuXHRyZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiBfZW5jb2RlQ29uc3RydWN0b3JBcmdzKGNvbnN0cnVjdG9yLCBtZXRob2QsIGFyZ3MsIGt3YXJncykge1xuXHRyZXR1cm4ge1xuXHRcdGxjOiAyLFxuXHRcdHR5cGU6IFwiY29uc3RydWN0b3JcIixcblx0XHRpZDogW2NvbnN0cnVjdG9yLm5hbWVdLFxuXHRcdG1ldGhvZDogbWV0aG9kID8/IG51bGwsXG5cdFx0YXJnczogYXJncyA/PyBbXSxcblx0XHRrd2FyZ3M6IGt3YXJncyA/PyB7fVxuXHR9O1xufVxuZnVuY3Rpb24gX2RlZmF1bHQob2JqKSB7XG5cdGlmIChvYmogPT09IHZvaWQgMCkgcmV0dXJuIHtcblx0XHRsYzogMixcblx0XHR0eXBlOiBcInVuZGVmaW5lZFwiXG5cdH07XG5cdGVsc2UgaWYgKG9iaiBpbnN0YW5jZW9mIFNldCB8fCBvYmogaW5zdGFuY2VvZiBNYXApIHJldHVybiBfZW5jb2RlQ29uc3RydWN0b3JBcmdzKG9iai5jb25zdHJ1Y3Rvciwgdm9pZCAwLCBbQXJyYXkuZnJvbShvYmopXSk7XG5cdGVsc2UgaWYgKG9iaiBpbnN0YW5jZW9mIFJlZ0V4cCkgcmV0dXJuIF9lbmNvZGVDb25zdHJ1Y3RvckFyZ3MoUmVnRXhwLCB2b2lkIDAsIFtvYmouc291cmNlLCBvYmouZmxhZ3NdKTtcblx0ZWxzZSBpZiAob2JqIGluc3RhbmNlb2YgRXJyb3IpIHJldHVybiBfZW5jb2RlQ29uc3RydWN0b3JBcmdzKG9iai5jb25zdHJ1Y3Rvciwgdm9pZCAwLCBbb2JqLm1lc3NhZ2VdKTtcblx0ZWxzZSBpZiAob2JqPy5sZ19uYW1lID09PSBcIlNlbmRcIikgcmV0dXJuIHtcblx0XHRub2RlOiBvYmoubm9kZSxcblx0XHRhcmdzOiBvYmouYXJnc1xuXHR9O1xuXHRlbHNlIHJldHVybiBvYmo7XG59XG52YXIgSnNvblBsdXNTZXJpYWxpemVyID0gY2xhc3Mge1xuXHRfZHVtcHMob2JqKSB7XG5cdFx0Y29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuXHRcdHJldHVybiBlbmNvZGVyLmVuY29kZShzdHJpbmdpZnkob2JqLCAoXywgdmFsdWUpID0+IHtcblx0XHRcdHJldHVybiBfZGVmYXVsdCh2YWx1ZSk7XG5cdFx0fSkpO1xuXHR9XG5cdGFzeW5jIGR1bXBzVHlwZWQob2JqKSB7XG5cdFx0aWYgKG9iaiBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHJldHVybiBbXCJieXRlc1wiLCBvYmpdO1xuXHRcdGVsc2UgcmV0dXJuIFtcImpzb25cIiwgdGhpcy5fZHVtcHMob2JqKV07XG5cdH1cblx0YXN5bmMgX2xvYWRzKGRhdGEpIHtcblx0XHRjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGRhdGEpO1xuXHRcdHJldHVybiBfcmV2aXZlcihwYXJzZWQpO1xuXHR9XG5cdGFzeW5jIGxvYWRzVHlwZWQodHlwZSwgZGF0YSkge1xuXHRcdGlmICh0eXBlID09PSBcImJ5dGVzXCIpIHJldHVybiB0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIiA/IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShkYXRhKSA6IGRhdGE7XG5cdFx0ZWxzZSBpZiAodHlwZSA9PT0gXCJqc29uXCIpIHJldHVybiB0aGlzLl9sb2Fkcyh0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIiA/IGRhdGEgOiBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoZGF0YSkpO1xuXHRcdGVsc2UgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHNlcmlhbGl6YXRpb24gdHlwZTogJHt0eXBlfWApO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEpzb25QbHVzU2VyaWFsaXplciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9anNvbnBsdXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/serde/jsonplus.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/serde/types.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-checkpoint/dist/serde/types.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ERROR: () => (/* binding */ ERROR),\n/* harmony export */   INTERRUPT: () => (/* binding */ INTERRUPT),\n/* harmony export */   RESUME: () => (/* binding */ RESUME),\n/* harmony export */   SCHEDULED: () => (/* binding */ SCHEDULED),\n/* harmony export */   TASKS: () => (/* binding */ TASKS)\n/* harmony export */ });\n//#region src/serde/types.ts\nconst TASKS = \"__pregel_tasks\";\nconst ERROR = \"__error__\";\nconst SCHEDULED = \"__scheduled__\";\nconst INTERRUPT = \"__interrupt__\";\nconst RESUME = \"__resume__\";\n\n//#endregion\n\n//# sourceMappingURL=types.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9kaXN0L3NlcmRlL3R5cGVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3NEO0FBQ3REIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9kaXN0L3NlcmRlL3R5cGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvc2VyZGUvdHlwZXMudHNcbmNvbnN0IFRBU0tTID0gXCJfX3ByZWdlbF90YXNrc1wiO1xuY29uc3QgRVJST1IgPSBcIl9fZXJyb3JfX1wiO1xuY29uc3QgU0NIRURVTEVEID0gXCJfX3NjaGVkdWxlZF9fXCI7XG5jb25zdCBJTlRFUlJVUFQgPSBcIl9faW50ZXJydXB0X19cIjtcbmNvbnN0IFJFU1VNRSA9IFwiX19yZXN1bWVfX1wiO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEVSUk9SLCBJTlRFUlJVUFQsIFJFU1VNRSwgU0NIRURVTEVELCBUQVNLUyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHlwZXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/serde/types.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/serde/utils/fast-safe-stringify/index.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-checkpoint/dist/serde/utils/fast-safe-stringify/index.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   stringify: () => (/* binding */ stringify)\n/* harmony export */ });\n//#region src/serde/utils/fast-safe-stringify/index.ts\nvar LIMIT_REPLACE_NODE = \"[...]\";\nvar CIRCULAR_REPLACE_NODE = \"[Circular]\";\nvar arr = [];\nvar replacerStack = [];\nfunction defaultOptions() {\n\treturn {\n\t\tdepthLimit: Number.MAX_SAFE_INTEGER,\n\t\tedgesLimit: Number.MAX_SAFE_INTEGER\n\t};\n}\nfunction stringify(obj, replacer, spacer, options) {\n\tif (typeof options === \"undefined\") options = defaultOptions();\n\tdecirc(obj, \"\", 0, [], void 0, 0, options);\n\tvar res;\n\ttry {\n\t\tif (replacerStack.length === 0) res = JSON.stringify(obj, replacer, spacer);\n\t\telse res = JSON.stringify(obj, replaceGetterValues(replacer), spacer);\n\t} catch (_) {\n\t\treturn JSON.stringify(\"[unable to serialize, circular reference is too complex to analyze]\");\n\t} finally {\n\t\twhile (arr.length !== 0) {\n\t\t\tvar part = arr.pop();\n\t\t\tif (part.length === 4) Object.defineProperty(part[0], part[1], part[3]);\n\t\t\telse part[0][part[1]] = part[2];\n\t\t}\n\t}\n\treturn res;\n}\nfunction setReplace(replace, val, k, parent) {\n\tvar propertyDescriptor = Object.getOwnPropertyDescriptor(parent, k);\n\tif (propertyDescriptor.get !== void 0) if (propertyDescriptor.configurable) {\n\t\tObject.defineProperty(parent, k, { value: replace });\n\t\tarr.push([\n\t\t\tparent,\n\t\t\tk,\n\t\t\tval,\n\t\t\tpropertyDescriptor\n\t\t]);\n\t} else replacerStack.push([\n\t\tval,\n\t\tk,\n\t\treplace\n\t]);\n\telse {\n\t\tparent[k] = replace;\n\t\tarr.push([\n\t\t\tparent,\n\t\t\tk,\n\t\t\tval\n\t\t]);\n\t}\n}\nfunction decirc(val, k, edgeIndex, stack, parent, depth, options) {\n\tdepth += 1;\n\tvar i;\n\tif (typeof val === \"object\" && val !== null) {\n\t\tfor (i = 0; i < stack.length; i++) if (stack[i] === val) {\n\t\t\tsetReplace(CIRCULAR_REPLACE_NODE, val, k, parent);\n\t\t\treturn;\n\t\t}\n\t\tif (typeof options.depthLimit !== \"undefined\" && depth > options.depthLimit) {\n\t\t\tsetReplace(LIMIT_REPLACE_NODE, val, k, parent);\n\t\t\treturn;\n\t\t}\n\t\tif (typeof options.edgesLimit !== \"undefined\" && edgeIndex + 1 > options.edgesLimit) {\n\t\t\tsetReplace(LIMIT_REPLACE_NODE, val, k, parent);\n\t\t\treturn;\n\t\t}\n\t\tstack.push(val);\n\t\tif (Array.isArray(val)) for (i = 0; i < val.length; i++) decirc(val[i], i, i, stack, val, depth, options);\n\t\telse {\n\t\t\tvar keys = Object.keys(val);\n\t\t\tfor (i = 0; i < keys.length; i++) {\n\t\t\t\tvar key = keys[i];\n\t\t\t\tdecirc(val[key], key, i, stack, val, depth, options);\n\t\t\t}\n\t\t}\n\t\tstack.pop();\n\t}\n}\nfunction replaceGetterValues(replacer) {\n\treplacer = typeof replacer !== \"undefined\" ? replacer : function(k, v) {\n\t\treturn v;\n\t};\n\treturn function(key, val) {\n\t\tif (replacerStack.length > 0) for (var i = 0; i < replacerStack.length; i++) {\n\t\t\tvar part = replacerStack[i];\n\t\t\tif (part[1] === key && part[0] === val) {\n\t\t\t\tval = part[2];\n\t\t\t\treplacerStack.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn replacer.call(this, key, val);\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9kaXN0L3NlcmRlL3V0aWxzL2Zhc3Qtc2FmZS1zdHJpbmdpZnkvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLGdCQUFnQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsa0JBQWtCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxnQkFBZ0I7QUFDdEQ7QUFDQTtBQUNBLGVBQWUsaUJBQWlCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCwwQkFBMEI7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDcUI7QUFDckIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC1jaGVja3BvaW50L2Rpc3Qvc2VyZGUvdXRpbHMvZmFzdC1zYWZlLXN0cmluZ2lmeS9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3NlcmRlL3V0aWxzL2Zhc3Qtc2FmZS1zdHJpbmdpZnkvaW5kZXgudHNcbnZhciBMSU1JVF9SRVBMQUNFX05PREUgPSBcIlsuLi5dXCI7XG52YXIgQ0lSQ1VMQVJfUkVQTEFDRV9OT0RFID0gXCJbQ2lyY3VsYXJdXCI7XG52YXIgYXJyID0gW107XG52YXIgcmVwbGFjZXJTdGFjayA9IFtdO1xuZnVuY3Rpb24gZGVmYXVsdE9wdGlvbnMoKSB7XG5cdHJldHVybiB7XG5cdFx0ZGVwdGhMaW1pdDogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsXG5cdFx0ZWRnZXNMaW1pdDogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJcblx0fTtcbn1cbmZ1bmN0aW9uIHN0cmluZ2lmeShvYmosIHJlcGxhY2VyLCBzcGFjZXIsIG9wdGlvbnMpIHtcblx0aWYgKHR5cGVvZiBvcHRpb25zID09PSBcInVuZGVmaW5lZFwiKSBvcHRpb25zID0gZGVmYXVsdE9wdGlvbnMoKTtcblx0ZGVjaXJjKG9iaiwgXCJcIiwgMCwgW10sIHZvaWQgMCwgMCwgb3B0aW9ucyk7XG5cdHZhciByZXM7XG5cdHRyeSB7XG5cdFx0aWYgKHJlcGxhY2VyU3RhY2subGVuZ3RoID09PSAwKSByZXMgPSBKU09OLnN0cmluZ2lmeShvYmosIHJlcGxhY2VyLCBzcGFjZXIpO1xuXHRcdGVsc2UgcmVzID0gSlNPTi5zdHJpbmdpZnkob2JqLCByZXBsYWNlR2V0dGVyVmFsdWVzKHJlcGxhY2VyKSwgc3BhY2VyKTtcblx0fSBjYXRjaCAoXykge1xuXHRcdHJldHVybiBKU09OLnN0cmluZ2lmeShcIlt1bmFibGUgdG8gc2VyaWFsaXplLCBjaXJjdWxhciByZWZlcmVuY2UgaXMgdG9vIGNvbXBsZXggdG8gYW5hbHl6ZV1cIik7XG5cdH0gZmluYWxseSB7XG5cdFx0d2hpbGUgKGFyci5sZW5ndGggIT09IDApIHtcblx0XHRcdHZhciBwYXJ0ID0gYXJyLnBvcCgpO1xuXHRcdFx0aWYgKHBhcnQubGVuZ3RoID09PSA0KSBPYmplY3QuZGVmaW5lUHJvcGVydHkocGFydFswXSwgcGFydFsxXSwgcGFydFszXSk7XG5cdFx0XHRlbHNlIHBhcnRbMF1bcGFydFsxXV0gPSBwYXJ0WzJdO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVzO1xufVxuZnVuY3Rpb24gc2V0UmVwbGFjZShyZXBsYWNlLCB2YWwsIGssIHBhcmVudCkge1xuXHR2YXIgcHJvcGVydHlEZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihwYXJlbnQsIGspO1xuXHRpZiAocHJvcGVydHlEZXNjcmlwdG9yLmdldCAhPT0gdm9pZCAwKSBpZiAocHJvcGVydHlEZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSkge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwYXJlbnQsIGssIHsgdmFsdWU6IHJlcGxhY2UgfSk7XG5cdFx0YXJyLnB1c2goW1xuXHRcdFx0cGFyZW50LFxuXHRcdFx0ayxcblx0XHRcdHZhbCxcblx0XHRcdHByb3BlcnR5RGVzY3JpcHRvclxuXHRcdF0pO1xuXHR9IGVsc2UgcmVwbGFjZXJTdGFjay5wdXNoKFtcblx0XHR2YWwsXG5cdFx0ayxcblx0XHRyZXBsYWNlXG5cdF0pO1xuXHRlbHNlIHtcblx0XHRwYXJlbnRba10gPSByZXBsYWNlO1xuXHRcdGFyci5wdXNoKFtcblx0XHRcdHBhcmVudCxcblx0XHRcdGssXG5cdFx0XHR2YWxcblx0XHRdKTtcblx0fVxufVxuZnVuY3Rpb24gZGVjaXJjKHZhbCwgaywgZWRnZUluZGV4LCBzdGFjaywgcGFyZW50LCBkZXB0aCwgb3B0aW9ucykge1xuXHRkZXB0aCArPSAxO1xuXHR2YXIgaTtcblx0aWYgKHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIgJiYgdmFsICE9PSBudWxsKSB7XG5cdFx0Zm9yIChpID0gMDsgaSA8IHN0YWNrLmxlbmd0aDsgaSsrKSBpZiAoc3RhY2tbaV0gPT09IHZhbCkge1xuXHRcdFx0c2V0UmVwbGFjZShDSVJDVUxBUl9SRVBMQUNFX05PREUsIHZhbCwgaywgcGFyZW50KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0aWYgKHR5cGVvZiBvcHRpb25zLmRlcHRoTGltaXQgIT09IFwidW5kZWZpbmVkXCIgJiYgZGVwdGggPiBvcHRpb25zLmRlcHRoTGltaXQpIHtcblx0XHRcdHNldFJlcGxhY2UoTElNSVRfUkVQTEFDRV9OT0RFLCB2YWwsIGssIHBhcmVudCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmICh0eXBlb2Ygb3B0aW9ucy5lZGdlc0xpbWl0ICE9PSBcInVuZGVmaW5lZFwiICYmIGVkZ2VJbmRleCArIDEgPiBvcHRpb25zLmVkZ2VzTGltaXQpIHtcblx0XHRcdHNldFJlcGxhY2UoTElNSVRfUkVQTEFDRV9OT0RFLCB2YWwsIGssIHBhcmVudCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHN0YWNrLnB1c2godmFsKTtcblx0XHRpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSBmb3IgKGkgPSAwOyBpIDwgdmFsLmxlbmd0aDsgaSsrKSBkZWNpcmModmFsW2ldLCBpLCBpLCBzdGFjaywgdmFsLCBkZXB0aCwgb3B0aW9ucyk7XG5cdFx0ZWxzZSB7XG5cdFx0XHR2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbCk7XG5cdFx0XHRmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR2YXIga2V5ID0ga2V5c1tpXTtcblx0XHRcdFx0ZGVjaXJjKHZhbFtrZXldLCBrZXksIGksIHN0YWNrLCB2YWwsIGRlcHRoLCBvcHRpb25zKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0c3RhY2sucG9wKCk7XG5cdH1cbn1cbmZ1bmN0aW9uIHJlcGxhY2VHZXR0ZXJWYWx1ZXMocmVwbGFjZXIpIHtcblx0cmVwbGFjZXIgPSB0eXBlb2YgcmVwbGFjZXIgIT09IFwidW5kZWZpbmVkXCIgPyByZXBsYWNlciA6IGZ1bmN0aW9uKGssIHYpIHtcblx0XHRyZXR1cm4gdjtcblx0fTtcblx0cmV0dXJuIGZ1bmN0aW9uKGtleSwgdmFsKSB7XG5cdFx0aWYgKHJlcGxhY2VyU3RhY2subGVuZ3RoID4gMCkgZm9yICh2YXIgaSA9IDA7IGkgPCByZXBsYWNlclN0YWNrLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgcGFydCA9IHJlcGxhY2VyU3RhY2tbaV07XG5cdFx0XHRpZiAocGFydFsxXSA9PT0ga2V5ICYmIHBhcnRbMF0gPT09IHZhbCkge1xuXHRcdFx0XHR2YWwgPSBwYXJ0WzJdO1xuXHRcdFx0XHRyZXBsYWNlclN0YWNrLnNwbGljZShpLCAxKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiByZXBsYWNlci5jYWxsKHRoaXMsIGtleSwgdmFsKTtcblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBzdHJpbmdpZnkgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/serde/utils/fast-safe-stringify/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/store/base.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-checkpoint/dist/store/base.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseStore: () => (/* binding */ BaseStore),\n/* harmony export */   InvalidNamespaceError: () => (/* binding */ InvalidNamespaceError),\n/* harmony export */   getTextAtPath: () => (/* binding */ getTextAtPath),\n/* harmony export */   tokenizePath: () => (/* binding */ tokenizePath)\n/* harmony export */ });\n//#region src/store/base.ts\n/**\n* Error thrown when an invalid namespace is provided.\n*/\nvar InvalidNamespaceError = class extends Error {\n\tconstructor(message) {\n\t\tsuper(message);\n\t\tthis.name = \"InvalidNamespaceError\";\n\t}\n};\n/**\n* Validates the provided namespace.\n* @param namespace The namespace to validate.\n* @throws {InvalidNamespaceError} If the namespace is invalid.\n*/\nfunction validateNamespace(namespace) {\n\tif (namespace.length === 0) throw new InvalidNamespaceError(\"Namespace cannot be empty.\");\n\tfor (const label of namespace) {\n\t\tif (typeof label !== \"string\") throw new InvalidNamespaceError(`Invalid namespace label '${label}' found in ${namespace}. Namespace labels must be strings, but got ${typeof label}.`);\n\t\tif (label.includes(\".\")) throw new InvalidNamespaceError(`Invalid namespace label '${label}' found in ${namespace}. Namespace labels cannot contain periods ('.').`);\n\t\tif (label === \"\") throw new InvalidNamespaceError(`Namespace labels cannot be empty strings. Got ${label} in ${namespace}`);\n\t}\n\tif (namespace[0] === \"langgraph\") throw new InvalidNamespaceError(`Root label for namespace cannot be \"langgraph\". Got: ${namespace}`);\n}\n/**\n* Utility function to get text at a specific JSON path\n*/\nfunction getTextAtPath(obj, path) {\n\tconst parts = path.split(\".\");\n\tlet current = obj;\n\tfor (const part of parts) {\n\t\tif (part.includes(\"[\")) {\n\t\t\tconst [arrayName, indexStr] = part.split(\"[\");\n\t\t\tconst index = indexStr.replace(\"]\", \"\");\n\t\t\tif (!current[arrayName]) return [];\n\t\t\tif (index === \"*\") {\n\t\t\t\tconst results = [];\n\t\t\t\tfor (const item of current[arrayName]) if (typeof item === \"string\") results.push(item);\n\t\t\t\treturn results;\n\t\t\t}\n\t\t\tconst idx = parseInt(index, 10);\n\t\t\tif (Number.isNaN(idx)) return [];\n\t\t\tcurrent = current[arrayName][idx];\n\t\t} else current = current[part];\n\t\tif (current === void 0) return [];\n\t}\n\treturn typeof current === \"string\" ? [current] : [];\n}\n/**\n* Tokenizes a JSON path into parts\n*/\nfunction tokenizePath(path) {\n\treturn path.split(\".\");\n}\n/**\n* Abstract base class for persistent key-value stores.\n*\n* Stores enable persistence and memory that can be shared across threads,\n* scoped to user IDs, assistant IDs, or other arbitrary namespaces.\n*\n* Features:\n* - Hierarchical namespaces for organization\n* - Key-value storage with metadata\n* - Vector similarity search (if configured)\n* - Filtering and pagination\n*/\nvar BaseStore = class {\n\t/**\n\t* Retrieve a single item by its namespace and key.\n\t*\n\t* @param namespace Hierarchical path for the item\n\t* @param key Unique identifier within the namespace\n\t* @returns Promise resolving to the item or null if not found\n\t*/\n\tasync get(namespace, key) {\n\t\treturn (await this.batch([{\n\t\t\tnamespace,\n\t\t\tkey\n\t\t}]))[0];\n\t}\n\t/**\n\t* Search for items within a namespace prefix.\n\t* Supports both metadata filtering and vector similarity search.\n\t*\n\t* @param namespacePrefix Hierarchical path prefix to search within\n\t* @param options Search options for filtering and pagination\n\t* @returns Promise resolving to list of matching items with relevance scores\n\t*\n\t* @example\n\t* // Search with filters\n\t* await store.search([\"documents\"], {\n\t*   filter: { type: \"report\", status: \"active\" },\n\t*   limit: 5,\n\t*   offset: 10\n\t* });\n\t*\n\t* // Vector similarity search\n\t* await store.search([\"users\", \"content\"], {\n\t*   query: \"technical documentation about APIs\",\n\t*   limit: 20\n\t* });\n\t*/\n\tasync search(namespacePrefix, options = {}) {\n\t\tconst { filter, limit = 10, offset = 0, query } = options;\n\t\treturn (await this.batch([{\n\t\t\tnamespacePrefix,\n\t\t\tfilter,\n\t\t\tlimit,\n\t\t\toffset,\n\t\t\tquery\n\t\t}]))[0];\n\t}\n\t/**\n\t* Store or update an item.\n\t*\n\t* @param namespace Hierarchical path for the item\n\t* @param key Unique identifier within the namespace\n\t* @param value Object containing the item's data\n\t* @param index Optional indexing configuration\n\t*\n\t* @example\n\t* // Simple storage\n\t* await store.put([\"docs\"], \"report\", { title: \"Annual Report\" });\n\t*\n\t* // With specific field indexing\n\t* await store.put(\n\t*   [\"docs\"],\n\t*   \"report\",\n\t*   {\n\t*     title: \"Q4 Report\",\n\t*     chapters: [{ content: \"...\" }, { content: \"...\" }]\n\t*   },\n\t*   [\"title\", \"chapters[*].content\"]\n\t* );\n\t*/\n\tasync put(namespace, key, value, index) {\n\t\tvalidateNamespace(namespace);\n\t\tawait this.batch([{\n\t\t\tnamespace,\n\t\t\tkey,\n\t\t\tvalue,\n\t\t\tindex\n\t\t}]);\n\t}\n\t/**\n\t* Delete an item from the store.\n\t*\n\t* @param namespace Hierarchical path for the item\n\t* @param key Unique identifier within the namespace\n\t*/\n\tasync delete(namespace, key) {\n\t\tawait this.batch([{\n\t\t\tnamespace,\n\t\t\tkey,\n\t\t\tvalue: null\n\t\t}]);\n\t}\n\t/**\n\t* List and filter namespaces in the store.\n\t* Used to explore data organization and navigate the namespace hierarchy.\n\t*\n\t* @param options Options for listing namespaces\n\t* @returns Promise resolving to list of namespace paths\n\t*\n\t* @example\n\t* // List all namespaces under \"documents\"\n\t* await store.listNamespaces({\n\t*   prefix: [\"documents\"],\n\t*   maxDepth: 2\n\t* });\n\t*\n\t* // List namespaces ending with \"v1\"\n\t* await store.listNamespaces({\n\t*   suffix: [\"v1\"],\n\t*   limit: 50\n\t* });\n\t*/\n\tasync listNamespaces(options = {}) {\n\t\tconst { prefix, suffix, maxDepth, limit = 100, offset = 0 } = options;\n\t\tconst matchConditions = [];\n\t\tif (prefix) matchConditions.push({\n\t\t\tmatchType: \"prefix\",\n\t\t\tpath: prefix\n\t\t});\n\t\tif (suffix) matchConditions.push({\n\t\t\tmatchType: \"suffix\",\n\t\t\tpath: suffix\n\t\t});\n\t\treturn (await this.batch([{\n\t\t\tmatchConditions: matchConditions.length ? matchConditions : void 0,\n\t\t\tmaxDepth,\n\t\t\tlimit,\n\t\t\toffset\n\t\t}]))[0];\n\t}\n\t/**\n\t* Start the store. Override if initialization is needed.\n\t*/\n\tstart() {}\n\t/**\n\t* Stop the store. Override if cleanup is needed.\n\t*/\n\tstop() {}\n};\n\n//#endregion\n\n//# sourceMappingURL=base.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9kaXN0L3N0b3JlL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyx1QkFBdUI7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2RkFBNkYsTUFBTSxhQUFhLFVBQVUsOENBQThDLGFBQWE7QUFDckwsdUZBQXVGLE1BQU0sYUFBYSxVQUFVO0FBQ3BILHFHQUFxRyxPQUFPLEtBQUssVUFBVTtBQUMzSDtBQUNBLDJIQUEySCxVQUFVO0FBQ3JJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxrQ0FBa0M7QUFDakQ7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsMkNBQTJDO0FBQzNDLFVBQVUsd0NBQXdDO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLHdCQUF3QjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnQkFBZ0IsSUFBSSxnQkFBZ0I7QUFDeEQsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0Esa0NBQWtDO0FBQ2xDLFVBQVUsb0RBQW9EO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3lFO0FBQ3pFIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9kaXN0L3N0b3JlL2Jhc2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9zdG9yZS9iYXNlLnRzXG4vKipcbiogRXJyb3IgdGhyb3duIHdoZW4gYW4gaW52YWxpZCBuYW1lc3BhY2UgaXMgcHJvdmlkZWQuXG4qL1xudmFyIEludmFsaWROYW1lc3BhY2VFcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuXHRjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG5cdFx0c3VwZXIobWVzc2FnZSk7XG5cdFx0dGhpcy5uYW1lID0gXCJJbnZhbGlkTmFtZXNwYWNlRXJyb3JcIjtcblx0fVxufTtcbi8qKlxuKiBWYWxpZGF0ZXMgdGhlIHByb3ZpZGVkIG5hbWVzcGFjZS5cbiogQHBhcmFtIG5hbWVzcGFjZSBUaGUgbmFtZXNwYWNlIHRvIHZhbGlkYXRlLlxuKiBAdGhyb3dzIHtJbnZhbGlkTmFtZXNwYWNlRXJyb3J9IElmIHRoZSBuYW1lc3BhY2UgaXMgaW52YWxpZC5cbiovXG5mdW5jdGlvbiB2YWxpZGF0ZU5hbWVzcGFjZShuYW1lc3BhY2UpIHtcblx0aWYgKG5hbWVzcGFjZS5sZW5ndGggPT09IDApIHRocm93IG5ldyBJbnZhbGlkTmFtZXNwYWNlRXJyb3IoXCJOYW1lc3BhY2UgY2Fubm90IGJlIGVtcHR5LlwiKTtcblx0Zm9yIChjb25zdCBsYWJlbCBvZiBuYW1lc3BhY2UpIHtcblx0XHRpZiAodHlwZW9mIGxhYmVsICE9PSBcInN0cmluZ1wiKSB0aHJvdyBuZXcgSW52YWxpZE5hbWVzcGFjZUVycm9yKGBJbnZhbGlkIG5hbWVzcGFjZSBsYWJlbCAnJHtsYWJlbH0nIGZvdW5kIGluICR7bmFtZXNwYWNlfS4gTmFtZXNwYWNlIGxhYmVscyBtdXN0IGJlIHN0cmluZ3MsIGJ1dCBnb3QgJHt0eXBlb2YgbGFiZWx9LmApO1xuXHRcdGlmIChsYWJlbC5pbmNsdWRlcyhcIi5cIikpIHRocm93IG5ldyBJbnZhbGlkTmFtZXNwYWNlRXJyb3IoYEludmFsaWQgbmFtZXNwYWNlIGxhYmVsICcke2xhYmVsfScgZm91bmQgaW4gJHtuYW1lc3BhY2V9LiBOYW1lc3BhY2UgbGFiZWxzIGNhbm5vdCBjb250YWluIHBlcmlvZHMgKCcuJykuYCk7XG5cdFx0aWYgKGxhYmVsID09PSBcIlwiKSB0aHJvdyBuZXcgSW52YWxpZE5hbWVzcGFjZUVycm9yKGBOYW1lc3BhY2UgbGFiZWxzIGNhbm5vdCBiZSBlbXB0eSBzdHJpbmdzLiBHb3QgJHtsYWJlbH0gaW4gJHtuYW1lc3BhY2V9YCk7XG5cdH1cblx0aWYgKG5hbWVzcGFjZVswXSA9PT0gXCJsYW5nZ3JhcGhcIikgdGhyb3cgbmV3IEludmFsaWROYW1lc3BhY2VFcnJvcihgUm9vdCBsYWJlbCBmb3IgbmFtZXNwYWNlIGNhbm5vdCBiZSBcImxhbmdncmFwaFwiLiBHb3Q6ICR7bmFtZXNwYWNlfWApO1xufVxuLyoqXG4qIFV0aWxpdHkgZnVuY3Rpb24gdG8gZ2V0IHRleHQgYXQgYSBzcGVjaWZpYyBKU09OIHBhdGhcbiovXG5mdW5jdGlvbiBnZXRUZXh0QXRQYXRoKG9iaiwgcGF0aCkge1xuXHRjb25zdCBwYXJ0cyA9IHBhdGguc3BsaXQoXCIuXCIpO1xuXHRsZXQgY3VycmVudCA9IG9iajtcblx0Zm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzKSB7XG5cdFx0aWYgKHBhcnQuaW5jbHVkZXMoXCJbXCIpKSB7XG5cdFx0XHRjb25zdCBbYXJyYXlOYW1lLCBpbmRleFN0cl0gPSBwYXJ0LnNwbGl0KFwiW1wiKTtcblx0XHRcdGNvbnN0IGluZGV4ID0gaW5kZXhTdHIucmVwbGFjZShcIl1cIiwgXCJcIik7XG5cdFx0XHRpZiAoIWN1cnJlbnRbYXJyYXlOYW1lXSkgcmV0dXJuIFtdO1xuXHRcdFx0aWYgKGluZGV4ID09PSBcIipcIikge1xuXHRcdFx0XHRjb25zdCByZXN1bHRzID0gW107XG5cdFx0XHRcdGZvciAoY29uc3QgaXRlbSBvZiBjdXJyZW50W2FycmF5TmFtZV0pIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIikgcmVzdWx0cy5wdXNoKGl0ZW0pO1xuXHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdH1cblx0XHRcdGNvbnN0IGlkeCA9IHBhcnNlSW50KGluZGV4LCAxMCk7XG5cdFx0XHRpZiAoTnVtYmVyLmlzTmFOKGlkeCkpIHJldHVybiBbXTtcblx0XHRcdGN1cnJlbnQgPSBjdXJyZW50W2FycmF5TmFtZV1baWR4XTtcblx0XHR9IGVsc2UgY3VycmVudCA9IGN1cnJlbnRbcGFydF07XG5cdFx0aWYgKGN1cnJlbnQgPT09IHZvaWQgMCkgcmV0dXJuIFtdO1xuXHR9XG5cdHJldHVybiB0eXBlb2YgY3VycmVudCA9PT0gXCJzdHJpbmdcIiA/IFtjdXJyZW50XSA6IFtdO1xufVxuLyoqXG4qIFRva2VuaXplcyBhIEpTT04gcGF0aCBpbnRvIHBhcnRzXG4qL1xuZnVuY3Rpb24gdG9rZW5pemVQYXRoKHBhdGgpIHtcblx0cmV0dXJuIHBhdGguc3BsaXQoXCIuXCIpO1xufVxuLyoqXG4qIEFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIHBlcnNpc3RlbnQga2V5LXZhbHVlIHN0b3Jlcy5cbipcbiogU3RvcmVzIGVuYWJsZSBwZXJzaXN0ZW5jZSBhbmQgbWVtb3J5IHRoYXQgY2FuIGJlIHNoYXJlZCBhY3Jvc3MgdGhyZWFkcyxcbiogc2NvcGVkIHRvIHVzZXIgSURzLCBhc3Npc3RhbnQgSURzLCBvciBvdGhlciBhcmJpdHJhcnkgbmFtZXNwYWNlcy5cbipcbiogRmVhdHVyZXM6XG4qIC0gSGllcmFyY2hpY2FsIG5hbWVzcGFjZXMgZm9yIG9yZ2FuaXphdGlvblxuKiAtIEtleS12YWx1ZSBzdG9yYWdlIHdpdGggbWV0YWRhdGFcbiogLSBWZWN0b3Igc2ltaWxhcml0eSBzZWFyY2ggKGlmIGNvbmZpZ3VyZWQpXG4qIC0gRmlsdGVyaW5nIGFuZCBwYWdpbmF0aW9uXG4qL1xudmFyIEJhc2VTdG9yZSA9IGNsYXNzIHtcblx0LyoqXG5cdCogUmV0cmlldmUgYSBzaW5nbGUgaXRlbSBieSBpdHMgbmFtZXNwYWNlIGFuZCBrZXkuXG5cdCpcblx0KiBAcGFyYW0gbmFtZXNwYWNlIEhpZXJhcmNoaWNhbCBwYXRoIGZvciB0aGUgaXRlbVxuXHQqIEBwYXJhbSBrZXkgVW5pcXVlIGlkZW50aWZpZXIgd2l0aGluIHRoZSBuYW1lc3BhY2Vcblx0KiBAcmV0dXJucyBQcm9taXNlIHJlc29sdmluZyB0byB0aGUgaXRlbSBvciBudWxsIGlmIG5vdCBmb3VuZFxuXHQqL1xuXHRhc3luYyBnZXQobmFtZXNwYWNlLCBrZXkpIHtcblx0XHRyZXR1cm4gKGF3YWl0IHRoaXMuYmF0Y2goW3tcblx0XHRcdG5hbWVzcGFjZSxcblx0XHRcdGtleVxuXHRcdH1dKSlbMF07XG5cdH1cblx0LyoqXG5cdCogU2VhcmNoIGZvciBpdGVtcyB3aXRoaW4gYSBuYW1lc3BhY2UgcHJlZml4LlxuXHQqIFN1cHBvcnRzIGJvdGggbWV0YWRhdGEgZmlsdGVyaW5nIGFuZCB2ZWN0b3Igc2ltaWxhcml0eSBzZWFyY2guXG5cdCpcblx0KiBAcGFyYW0gbmFtZXNwYWNlUHJlZml4IEhpZXJhcmNoaWNhbCBwYXRoIHByZWZpeCB0byBzZWFyY2ggd2l0aGluXG5cdCogQHBhcmFtIG9wdGlvbnMgU2VhcmNoIG9wdGlvbnMgZm9yIGZpbHRlcmluZyBhbmQgcGFnaW5hdGlvblxuXHQqIEByZXR1cm5zIFByb21pc2UgcmVzb2x2aW5nIHRvIGxpc3Qgb2YgbWF0Y2hpbmcgaXRlbXMgd2l0aCByZWxldmFuY2Ugc2NvcmVzXG5cdCpcblx0KiBAZXhhbXBsZVxuXHQqIC8vIFNlYXJjaCB3aXRoIGZpbHRlcnNcblx0KiBhd2FpdCBzdG9yZS5zZWFyY2goW1wiZG9jdW1lbnRzXCJdLCB7XG5cdCogICBmaWx0ZXI6IHsgdHlwZTogXCJyZXBvcnRcIiwgc3RhdHVzOiBcImFjdGl2ZVwiIH0sXG5cdCogICBsaW1pdDogNSxcblx0KiAgIG9mZnNldDogMTBcblx0KiB9KTtcblx0KlxuXHQqIC8vIFZlY3RvciBzaW1pbGFyaXR5IHNlYXJjaFxuXHQqIGF3YWl0IHN0b3JlLnNlYXJjaChbXCJ1c2Vyc1wiLCBcImNvbnRlbnRcIl0sIHtcblx0KiAgIHF1ZXJ5OiBcInRlY2huaWNhbCBkb2N1bWVudGF0aW9uIGFib3V0IEFQSXNcIixcblx0KiAgIGxpbWl0OiAyMFxuXHQqIH0pO1xuXHQqL1xuXHRhc3luYyBzZWFyY2gobmFtZXNwYWNlUHJlZml4LCBvcHRpb25zID0ge30pIHtcblx0XHRjb25zdCB7IGZpbHRlciwgbGltaXQgPSAxMCwgb2Zmc2V0ID0gMCwgcXVlcnkgfSA9IG9wdGlvbnM7XG5cdFx0cmV0dXJuIChhd2FpdCB0aGlzLmJhdGNoKFt7XG5cdFx0XHRuYW1lc3BhY2VQcmVmaXgsXG5cdFx0XHRmaWx0ZXIsXG5cdFx0XHRsaW1pdCxcblx0XHRcdG9mZnNldCxcblx0XHRcdHF1ZXJ5XG5cdFx0fV0pKVswXTtcblx0fVxuXHQvKipcblx0KiBTdG9yZSBvciB1cGRhdGUgYW4gaXRlbS5cblx0KlxuXHQqIEBwYXJhbSBuYW1lc3BhY2UgSGllcmFyY2hpY2FsIHBhdGggZm9yIHRoZSBpdGVtXG5cdCogQHBhcmFtIGtleSBVbmlxdWUgaWRlbnRpZmllciB3aXRoaW4gdGhlIG5hbWVzcGFjZVxuXHQqIEBwYXJhbSB2YWx1ZSBPYmplY3QgY29udGFpbmluZyB0aGUgaXRlbSdzIGRhdGFcblx0KiBAcGFyYW0gaW5kZXggT3B0aW9uYWwgaW5kZXhpbmcgY29uZmlndXJhdGlvblxuXHQqXG5cdCogQGV4YW1wbGVcblx0KiAvLyBTaW1wbGUgc3RvcmFnZVxuXHQqIGF3YWl0IHN0b3JlLnB1dChbXCJkb2NzXCJdLCBcInJlcG9ydFwiLCB7IHRpdGxlOiBcIkFubnVhbCBSZXBvcnRcIiB9KTtcblx0KlxuXHQqIC8vIFdpdGggc3BlY2lmaWMgZmllbGQgaW5kZXhpbmdcblx0KiBhd2FpdCBzdG9yZS5wdXQoXG5cdCogICBbXCJkb2NzXCJdLFxuXHQqICAgXCJyZXBvcnRcIixcblx0KiAgIHtcblx0KiAgICAgdGl0bGU6IFwiUTQgUmVwb3J0XCIsXG5cdCogICAgIGNoYXB0ZXJzOiBbeyBjb250ZW50OiBcIi4uLlwiIH0sIHsgY29udGVudDogXCIuLi5cIiB9XVxuXHQqICAgfSxcblx0KiAgIFtcInRpdGxlXCIsIFwiY2hhcHRlcnNbKl0uY29udGVudFwiXVxuXHQqICk7XG5cdCovXG5cdGFzeW5jIHB1dChuYW1lc3BhY2UsIGtleSwgdmFsdWUsIGluZGV4KSB7XG5cdFx0dmFsaWRhdGVOYW1lc3BhY2UobmFtZXNwYWNlKTtcblx0XHRhd2FpdCB0aGlzLmJhdGNoKFt7XG5cdFx0XHRuYW1lc3BhY2UsXG5cdFx0XHRrZXksXG5cdFx0XHR2YWx1ZSxcblx0XHRcdGluZGV4XG5cdFx0fV0pO1xuXHR9XG5cdC8qKlxuXHQqIERlbGV0ZSBhbiBpdGVtIGZyb20gdGhlIHN0b3JlLlxuXHQqXG5cdCogQHBhcmFtIG5hbWVzcGFjZSBIaWVyYXJjaGljYWwgcGF0aCBmb3IgdGhlIGl0ZW1cblx0KiBAcGFyYW0ga2V5IFVuaXF1ZSBpZGVudGlmaWVyIHdpdGhpbiB0aGUgbmFtZXNwYWNlXG5cdCovXG5cdGFzeW5jIGRlbGV0ZShuYW1lc3BhY2UsIGtleSkge1xuXHRcdGF3YWl0IHRoaXMuYmF0Y2goW3tcblx0XHRcdG5hbWVzcGFjZSxcblx0XHRcdGtleSxcblx0XHRcdHZhbHVlOiBudWxsXG5cdFx0fV0pO1xuXHR9XG5cdC8qKlxuXHQqIExpc3QgYW5kIGZpbHRlciBuYW1lc3BhY2VzIGluIHRoZSBzdG9yZS5cblx0KiBVc2VkIHRvIGV4cGxvcmUgZGF0YSBvcmdhbml6YXRpb24gYW5kIG5hdmlnYXRlIHRoZSBuYW1lc3BhY2UgaGllcmFyY2h5LlxuXHQqXG5cdCogQHBhcmFtIG9wdGlvbnMgT3B0aW9ucyBmb3IgbGlzdGluZyBuYW1lc3BhY2VzXG5cdCogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gbGlzdCBvZiBuYW1lc3BhY2UgcGF0aHNcblx0KlxuXHQqIEBleGFtcGxlXG5cdCogLy8gTGlzdCBhbGwgbmFtZXNwYWNlcyB1bmRlciBcImRvY3VtZW50c1wiXG5cdCogYXdhaXQgc3RvcmUubGlzdE5hbWVzcGFjZXMoe1xuXHQqICAgcHJlZml4OiBbXCJkb2N1bWVudHNcIl0sXG5cdCogICBtYXhEZXB0aDogMlxuXHQqIH0pO1xuXHQqXG5cdCogLy8gTGlzdCBuYW1lc3BhY2VzIGVuZGluZyB3aXRoIFwidjFcIlxuXHQqIGF3YWl0IHN0b3JlLmxpc3ROYW1lc3BhY2VzKHtcblx0KiAgIHN1ZmZpeDogW1widjFcIl0sXG5cdCogICBsaW1pdDogNTBcblx0KiB9KTtcblx0Ki9cblx0YXN5bmMgbGlzdE5hbWVzcGFjZXMob3B0aW9ucyA9IHt9KSB7XG5cdFx0Y29uc3QgeyBwcmVmaXgsIHN1ZmZpeCwgbWF4RGVwdGgsIGxpbWl0ID0gMTAwLCBvZmZzZXQgPSAwIH0gPSBvcHRpb25zO1xuXHRcdGNvbnN0IG1hdGNoQ29uZGl0aW9ucyA9IFtdO1xuXHRcdGlmIChwcmVmaXgpIG1hdGNoQ29uZGl0aW9ucy5wdXNoKHtcblx0XHRcdG1hdGNoVHlwZTogXCJwcmVmaXhcIixcblx0XHRcdHBhdGg6IHByZWZpeFxuXHRcdH0pO1xuXHRcdGlmIChzdWZmaXgpIG1hdGNoQ29uZGl0aW9ucy5wdXNoKHtcblx0XHRcdG1hdGNoVHlwZTogXCJzdWZmaXhcIixcblx0XHRcdHBhdGg6IHN1ZmZpeFxuXHRcdH0pO1xuXHRcdHJldHVybiAoYXdhaXQgdGhpcy5iYXRjaChbe1xuXHRcdFx0bWF0Y2hDb25kaXRpb25zOiBtYXRjaENvbmRpdGlvbnMubGVuZ3RoID8gbWF0Y2hDb25kaXRpb25zIDogdm9pZCAwLFxuXHRcdFx0bWF4RGVwdGgsXG5cdFx0XHRsaW1pdCxcblx0XHRcdG9mZnNldFxuXHRcdH1dKSlbMF07XG5cdH1cblx0LyoqXG5cdCogU3RhcnQgdGhlIHN0b3JlLiBPdmVycmlkZSBpZiBpbml0aWFsaXphdGlvbiBpcyBuZWVkZWQuXG5cdCovXG5cdHN0YXJ0KCkge31cblx0LyoqXG5cdCogU3RvcCB0aGUgc3RvcmUuIE92ZXJyaWRlIGlmIGNsZWFudXAgaXMgbmVlZGVkLlxuXHQqL1xuXHRzdG9wKCkge31cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQmFzZVN0b3JlLCBJbnZhbGlkTmFtZXNwYWNlRXJyb3IsIGdldFRleHRBdFBhdGgsIHRva2VuaXplUGF0aCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmFzZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/store/base.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/store/batch.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-checkpoint/dist/store/batch.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncBatchedStore: () => (/* binding */ AsyncBatchedStore)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/store/base.js\");\n\n\n//#region src/store/batch.ts\n/**\n* Extracts and returns the underlying store from an `AsyncBatchedStore`,\n* or returns the input if it is not an `AsyncBatchedStore`.\n*/\nconst extractStore = (input) => {\n\tif (\"lg_name\" in input && input.lg_name === \"AsyncBatchedStore\") return input.store;\n\treturn input;\n};\nvar AsyncBatchedStore = class extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseStore {\n\tlg_name = \"AsyncBatchedStore\";\n\tstore;\n\tqueue = /* @__PURE__ */ new Map();\n\tnextKey = 0;\n\trunning = false;\n\tprocessingTask = null;\n\tconstructor(store) {\n\t\tsuper();\n\t\tthis.store = extractStore(store);\n\t}\n\tget isRunning() {\n\t\treturn this.running;\n\t}\n\t/**\n\t* @ignore\n\t* Batch is not implemented here as we're only extending `BaseStore`\n\t* to allow it to be passed where `BaseStore` is expected, and implement\n\t* the convenience methods (get, search, put, delete).\n\t*/\n\tasync batch(_operations) {\n\t\tthrow new Error(\"The `batch` method is not implemented on `AsyncBatchedStore`.\\n Instead, it calls the `batch` method on the wrapped store.\\n If you are seeing this error, something is wrong.\");\n\t}\n\tasync get(namespace, key) {\n\t\treturn this.enqueueOperation({\n\t\t\tnamespace,\n\t\t\tkey\n\t\t});\n\t}\n\tasync search(namespacePrefix, options) {\n\t\tconst { filter, limit = 10, offset = 0, query } = options || {};\n\t\treturn this.enqueueOperation({\n\t\t\tnamespacePrefix,\n\t\t\tfilter,\n\t\t\tlimit,\n\t\t\toffset,\n\t\t\tquery\n\t\t});\n\t}\n\tasync put(namespace, key, value) {\n\t\treturn this.enqueueOperation({\n\t\t\tnamespace,\n\t\t\tkey,\n\t\t\tvalue\n\t\t});\n\t}\n\tasync delete(namespace, key) {\n\t\treturn this.enqueueOperation({\n\t\t\tnamespace,\n\t\t\tkey,\n\t\t\tvalue: null\n\t\t});\n\t}\n\tstart() {\n\t\tif (!this.running) {\n\t\t\tthis.running = true;\n\t\t\tthis.processingTask = this.processBatchQueue();\n\t\t}\n\t}\n\tasync stop() {\n\t\tthis.running = false;\n\t\tif (this.processingTask) await this.processingTask;\n\t}\n\tenqueueOperation(operation) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst key = this.nextKey;\n\t\t\tthis.nextKey += 1;\n\t\t\tthis.queue.set(key, {\n\t\t\t\toperation,\n\t\t\t\tresolve,\n\t\t\t\treject\n\t\t\t});\n\t\t});\n\t}\n\tasync processBatchQueue() {\n\t\twhile (this.running) {\n\t\t\tawait new Promise((resolve) => {\n\t\t\t\tsetTimeout(resolve, 0);\n\t\t\t});\n\t\t\tif (this.queue.size === 0) continue;\n\t\t\tconst batch = new Map(this.queue);\n\t\t\tthis.queue.clear();\n\t\t\ttry {\n\t\t\t\tconst operations = Array.from(batch.values()).map(({ operation }) => operation);\n\t\t\t\tconst results = await this.store.batch(operations);\n\t\t\t\tbatch.forEach(({ resolve }, key) => {\n\t\t\t\t\tconst index = Array.from(batch.keys()).indexOf(key);\n\t\t\t\t\tresolve(results[index]);\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tbatch.forEach(({ reject }) => {\n\t\t\t\t\treject(e);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\ttoJSON() {\n\t\treturn {\n\t\t\tqueue: this.queue,\n\t\t\tnextKey: this.nextKey,\n\t\t\trunning: this.running,\n\t\t\tstore: \"[LangGraphStore]\"\n\t\t};\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=batch.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9kaXN0L3N0b3JlL2JhdGNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXNDOztBQUV0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsK0NBQVM7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsVUFBVSx3Q0FBd0M7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQsV0FBVztBQUNwRTtBQUNBLHFCQUFxQixTQUFTO0FBQzlCO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsS0FBSztBQUNMLHFCQUFxQixRQUFRO0FBQzdCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUM2QjtBQUM3QiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoLWNoZWNrcG9pbnQvZGlzdC9zdG9yZS9iYXRjaC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlU3RvcmUgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvc3RvcmUvYmF0Y2gudHNcbi8qKlxuKiBFeHRyYWN0cyBhbmQgcmV0dXJucyB0aGUgdW5kZXJseWluZyBzdG9yZSBmcm9tIGFuIGBBc3luY0JhdGNoZWRTdG9yZWAsXG4qIG9yIHJldHVybnMgdGhlIGlucHV0IGlmIGl0IGlzIG5vdCBhbiBgQXN5bmNCYXRjaGVkU3RvcmVgLlxuKi9cbmNvbnN0IGV4dHJhY3RTdG9yZSA9IChpbnB1dCkgPT4ge1xuXHRpZiAoXCJsZ19uYW1lXCIgaW4gaW5wdXQgJiYgaW5wdXQubGdfbmFtZSA9PT0gXCJBc3luY0JhdGNoZWRTdG9yZVwiKSByZXR1cm4gaW5wdXQuc3RvcmU7XG5cdHJldHVybiBpbnB1dDtcbn07XG52YXIgQXN5bmNCYXRjaGVkU3RvcmUgPSBjbGFzcyBleHRlbmRzIEJhc2VTdG9yZSB7XG5cdGxnX25hbWUgPSBcIkFzeW5jQmF0Y2hlZFN0b3JlXCI7XG5cdHN0b3JlO1xuXHRxdWV1ZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5cdG5leHRLZXkgPSAwO1xuXHRydW5uaW5nID0gZmFsc2U7XG5cdHByb2Nlc3NpbmdUYXNrID0gbnVsbDtcblx0Y29uc3RydWN0b3Ioc3RvcmUpIHtcblx0XHRzdXBlcigpO1xuXHRcdHRoaXMuc3RvcmUgPSBleHRyYWN0U3RvcmUoc3RvcmUpO1xuXHR9XG5cdGdldCBpc1J1bm5pbmcoKSB7XG5cdFx0cmV0dXJuIHRoaXMucnVubmluZztcblx0fVxuXHQvKipcblx0KiBAaWdub3JlXG5cdCogQmF0Y2ggaXMgbm90IGltcGxlbWVudGVkIGhlcmUgYXMgd2UncmUgb25seSBleHRlbmRpbmcgYEJhc2VTdG9yZWBcblx0KiB0byBhbGxvdyBpdCB0byBiZSBwYXNzZWQgd2hlcmUgYEJhc2VTdG9yZWAgaXMgZXhwZWN0ZWQsIGFuZCBpbXBsZW1lbnRcblx0KiB0aGUgY29udmVuaWVuY2UgbWV0aG9kcyAoZ2V0LCBzZWFyY2gsIHB1dCwgZGVsZXRlKS5cblx0Ki9cblx0YXN5bmMgYmF0Y2goX29wZXJhdGlvbnMpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJUaGUgYGJhdGNoYCBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkIG9uIGBBc3luY0JhdGNoZWRTdG9yZWAuXFxuIEluc3RlYWQsIGl0IGNhbGxzIHRoZSBgYmF0Y2hgIG1ldGhvZCBvbiB0aGUgd3JhcHBlZCBzdG9yZS5cXG4gSWYgeW91IGFyZSBzZWVpbmcgdGhpcyBlcnJvciwgc29tZXRoaW5nIGlzIHdyb25nLlwiKTtcblx0fVxuXHRhc3luYyBnZXQobmFtZXNwYWNlLCBrZXkpIHtcblx0XHRyZXR1cm4gdGhpcy5lbnF1ZXVlT3BlcmF0aW9uKHtcblx0XHRcdG5hbWVzcGFjZSxcblx0XHRcdGtleVxuXHRcdH0pO1xuXHR9XG5cdGFzeW5jIHNlYXJjaChuYW1lc3BhY2VQcmVmaXgsIG9wdGlvbnMpIHtcblx0XHRjb25zdCB7IGZpbHRlciwgbGltaXQgPSAxMCwgb2Zmc2V0ID0gMCwgcXVlcnkgfSA9IG9wdGlvbnMgfHwge307XG5cdFx0cmV0dXJuIHRoaXMuZW5xdWV1ZU9wZXJhdGlvbih7XG5cdFx0XHRuYW1lc3BhY2VQcmVmaXgsXG5cdFx0XHRmaWx0ZXIsXG5cdFx0XHRsaW1pdCxcblx0XHRcdG9mZnNldCxcblx0XHRcdHF1ZXJ5XG5cdFx0fSk7XG5cdH1cblx0YXN5bmMgcHV0KG5hbWVzcGFjZSwga2V5LCB2YWx1ZSkge1xuXHRcdHJldHVybiB0aGlzLmVucXVldWVPcGVyYXRpb24oe1xuXHRcdFx0bmFtZXNwYWNlLFxuXHRcdFx0a2V5LFxuXHRcdFx0dmFsdWVcblx0XHR9KTtcblx0fVxuXHRhc3luYyBkZWxldGUobmFtZXNwYWNlLCBrZXkpIHtcblx0XHRyZXR1cm4gdGhpcy5lbnF1ZXVlT3BlcmF0aW9uKHtcblx0XHRcdG5hbWVzcGFjZSxcblx0XHRcdGtleSxcblx0XHRcdHZhbHVlOiBudWxsXG5cdFx0fSk7XG5cdH1cblx0c3RhcnQoKSB7XG5cdFx0aWYgKCF0aGlzLnJ1bm5pbmcpIHtcblx0XHRcdHRoaXMucnVubmluZyA9IHRydWU7XG5cdFx0XHR0aGlzLnByb2Nlc3NpbmdUYXNrID0gdGhpcy5wcm9jZXNzQmF0Y2hRdWV1ZSgpO1xuXHRcdH1cblx0fVxuXHRhc3luYyBzdG9wKCkge1xuXHRcdHRoaXMucnVubmluZyA9IGZhbHNlO1xuXHRcdGlmICh0aGlzLnByb2Nlc3NpbmdUYXNrKSBhd2FpdCB0aGlzLnByb2Nlc3NpbmdUYXNrO1xuXHR9XG5cdGVucXVldWVPcGVyYXRpb24ob3BlcmF0aW9uKSB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdGNvbnN0IGtleSA9IHRoaXMubmV4dEtleTtcblx0XHRcdHRoaXMubmV4dEtleSArPSAxO1xuXHRcdFx0dGhpcy5xdWV1ZS5zZXQoa2V5LCB7XG5cdFx0XHRcdG9wZXJhdGlvbixcblx0XHRcdFx0cmVzb2x2ZSxcblx0XHRcdFx0cmVqZWN0XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXHRhc3luYyBwcm9jZXNzQmF0Y2hRdWV1ZSgpIHtcblx0XHR3aGlsZSAodGhpcy5ydW5uaW5nKSB7XG5cdFx0XHRhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuXHRcdFx0XHRzZXRUaW1lb3V0KHJlc29sdmUsIDApO1xuXHRcdFx0fSk7XG5cdFx0XHRpZiAodGhpcy5xdWV1ZS5zaXplID09PSAwKSBjb250aW51ZTtcblx0XHRcdGNvbnN0IGJhdGNoID0gbmV3IE1hcCh0aGlzLnF1ZXVlKTtcblx0XHRcdHRoaXMucXVldWUuY2xlYXIoKTtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnN0IG9wZXJhdGlvbnMgPSBBcnJheS5mcm9tKGJhdGNoLnZhbHVlcygpKS5tYXAoKHsgb3BlcmF0aW9uIH0pID0+IG9wZXJhdGlvbik7XG5cdFx0XHRcdGNvbnN0IHJlc3VsdHMgPSBhd2FpdCB0aGlzLnN0b3JlLmJhdGNoKG9wZXJhdGlvbnMpO1xuXHRcdFx0XHRiYXRjaC5mb3JFYWNoKCh7IHJlc29sdmUgfSwga2V5KSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgaW5kZXggPSBBcnJheS5mcm9tKGJhdGNoLmtleXMoKSkuaW5kZXhPZihrZXkpO1xuXHRcdFx0XHRcdHJlc29sdmUocmVzdWx0c1tpbmRleF0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0YmF0Y2guZm9yRWFjaCgoeyByZWplY3QgfSkgPT4ge1xuXHRcdFx0XHRcdHJlamVjdChlKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHRvSlNPTigpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0cXVldWU6IHRoaXMucXVldWUsXG5cdFx0XHRuZXh0S2V5OiB0aGlzLm5leHRLZXksXG5cdFx0XHRydW5uaW5nOiB0aGlzLnJ1bm5pbmcsXG5cdFx0XHRzdG9yZTogXCJbTGFuZ0dyYXBoU3RvcmVdXCJcblx0XHR9O1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEFzeW5jQmF0Y2hlZFN0b3JlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iYXRjaC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/store/batch.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/store/memory.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-checkpoint/dist/store/memory.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InMemoryStore: () => (/* binding */ InMemoryStore),\n/* harmony export */   MemoryStore: () => (/* binding */ MemoryStore)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/store/base.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/store/utils.js\");\n\n\n\n//#region src/store/memory.ts\n/**\n* In-memory key-value store with optional vector search.\n*\n* A lightweight store implementation using JavaScript Maps. Supports basic\n* key-value operations and vector search when configured with embeddings.\n*\n* @example\n* ```typescript\n* // Basic key-value storage\n* const store = new InMemoryStore();\n* await store.put([\"users\", \"123\"], \"prefs\", { theme: \"dark\" });\n* const item = await store.get([\"users\", \"123\"], \"prefs\");\n*\n* // Vector search with embeddings\n* import { OpenAIEmbeddings } from \"@langchain/openai\";\n* const store = new InMemoryStore({\n*   index: {\n*     dims: 1536,\n*     embeddings: new OpenAIEmbeddings({ modelName: \"text-embedding-3-small\" }),\n*   }\n* });\n*\n* // Store documents\n* await store.put([\"docs\"], \"doc1\", { text: \"Python tutorial\" });\n* await store.put([\"docs\"], \"doc2\", { text: \"TypeScript guide\" });\n*\n* // Search by similarity\n* const results = await store.search([\"docs\"], { query: \"python programming\" });\n* ```\n*\n* **Warning**: This store keeps all data in memory. Data is lost when the process exits.\n* For persistence, use a database-backed store.\n*/\nvar InMemoryStore = class extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseStore {\n\tdata = /* @__PURE__ */ new Map();\n\tvectors = /* @__PURE__ */ new Map();\n\t_indexConfig;\n\tconstructor(options) {\n\t\tsuper();\n\t\tif (options?.index) this._indexConfig = {\n\t\t\t...options.index,\n\t\t\t__tokenizedFields: (options.index.fields ?? [\"$\"]).map((p) => [p, p === \"$\" ? [p] : (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.tokenizePath)(p)])\n\t\t};\n\t}\n\tasync batch(operations) {\n\t\tconst results = [];\n\t\tconst putOps = /* @__PURE__ */ new Map();\n\t\tconst searchOps = /* @__PURE__ */ new Map();\n\t\tfor (let i = 0; i < operations.length; i += 1) {\n\t\t\tconst op = operations[i];\n\t\t\tif (\"key\" in op && \"namespace\" in op && !(\"value\" in op)) results.push(this.getOperation(op));\n\t\t\telse if (\"namespacePrefix\" in op) {\n\t\t\t\tconst candidates = this.filterItems(op);\n\t\t\t\tsearchOps.set(i, [op, candidates]);\n\t\t\t\tresults.push(null);\n\t\t\t} else if (\"value\" in op) {\n\t\t\t\tconst key = `${op.namespace.join(\":\")}:${op.key}`;\n\t\t\t\tputOps.set(key, op);\n\t\t\t\tresults.push(null);\n\t\t\t} else if (\"matchConditions\" in op) results.push(this.listNamespacesOperation(op));\n\t\t}\n\t\tif (searchOps.size > 0) if (this._indexConfig?.embeddings) {\n\t\t\tconst queries = /* @__PURE__ */ new Set();\n\t\t\tfor (const [op] of searchOps.values()) if (op.query) queries.add(op.query);\n\t\t\tconst queryEmbeddings = queries.size > 0 ? await Promise.all(Array.from(queries).map((q) => this._indexConfig.embeddings.embedQuery(q))) : [];\n\t\t\tconst queryVectors = Object.fromEntries(Array.from(queries).map((q, i) => [q, queryEmbeddings[i]]));\n\t\t\tfor (const [i, [op, candidates]] of searchOps.entries()) if (op.query && queryVectors[op.query]) {\n\t\t\t\tconst queryVector = queryVectors[op.query];\n\t\t\t\tconst scoredResults = this.scoreResults(candidates, queryVector, op.offset ?? 0, op.limit ?? 10);\n\t\t\t\tresults[i] = scoredResults;\n\t\t\t} else results[i] = this.paginateResults(candidates.map((item) => ({\n\t\t\t\t...item,\n\t\t\t\tscore: void 0\n\t\t\t})), op.offset ?? 0, op.limit ?? 10);\n\t\t} else for (const [i, [op, candidates]] of searchOps.entries()) results[i] = this.paginateResults(candidates.map((item) => ({\n\t\t\t...item,\n\t\t\tscore: void 0\n\t\t})), op.offset ?? 0, op.limit ?? 10);\n\t\tif (putOps.size > 0 && this._indexConfig?.embeddings) {\n\t\t\tconst toEmbed = this.extractTexts(Array.from(putOps.values()));\n\t\t\tif (Object.keys(toEmbed).length > 0) {\n\t\t\t\tconst embeddings = await this._indexConfig.embeddings.embedDocuments(Object.keys(toEmbed));\n\t\t\t\tthis.insertVectors(toEmbed, embeddings);\n\t\t\t}\n\t\t}\n\t\tfor (const op of putOps.values()) this.putOperation(op);\n\t\treturn results;\n\t}\n\tgetOperation(op) {\n\t\tconst namespaceKey = op.namespace.join(\":\");\n\t\tconst item = this.data.get(namespaceKey)?.get(op.key);\n\t\treturn item ?? null;\n\t}\n\tputOperation(op) {\n\t\tconst namespaceKey = op.namespace.join(\":\");\n\t\tif (!this.data.has(namespaceKey)) this.data.set(namespaceKey, /* @__PURE__ */ new Map());\n\t\tconst namespaceMap = this.data.get(namespaceKey);\n\t\tif (op.value === null) namespaceMap.delete(op.key);\n\t\telse {\n\t\t\tconst now = /* @__PURE__ */ new Date();\n\t\t\tif (namespaceMap.has(op.key)) {\n\t\t\t\tconst item = namespaceMap.get(op.key);\n\t\t\t\titem.value = op.value;\n\t\t\t\titem.updatedAt = now;\n\t\t\t} else namespaceMap.set(op.key, {\n\t\t\t\tvalue: op.value,\n\t\t\t\tkey: op.key,\n\t\t\t\tnamespace: op.namespace,\n\t\t\t\tcreatedAt: now,\n\t\t\t\tupdatedAt: now\n\t\t\t});\n\t\t}\n\t}\n\tlistNamespacesOperation(op) {\n\t\tconst allNamespaces = Array.from(this.data.keys()).map((ns) => ns.split(\":\"));\n\t\tlet namespaces = allNamespaces;\n\t\tif (op.matchConditions && op.matchConditions.length > 0) namespaces = namespaces.filter((ns) => op.matchConditions.every((condition) => this.doesMatch(condition, ns)));\n\t\tif (op.maxDepth !== void 0) namespaces = Array.from(new Set(namespaces.map((ns) => ns.slice(0, op.maxDepth).join(\":\")))).map((ns) => ns.split(\":\"));\n\t\tnamespaces.sort((a, b) => a.join(\":\").localeCompare(b.join(\":\")));\n\t\treturn namespaces.slice(op.offset ?? 0, (op.offset ?? 0) + (op.limit ?? namespaces.length));\n\t}\n\tdoesMatch(matchCondition, key) {\n\t\tconst { matchType, path } = matchCondition;\n\t\tif (matchType === \"prefix\") {\n\t\t\tif (path.length > key.length) return false;\n\t\t\treturn path.every((pElem, index) => {\n\t\t\t\tconst kElem = key[index];\n\t\t\t\treturn pElem === \"*\" || kElem === pElem;\n\t\t\t});\n\t\t} else if (matchType === \"suffix\") {\n\t\t\tif (path.length > key.length) return false;\n\t\t\treturn path.every((pElem, index) => {\n\t\t\t\tconst kElem = key[key.length - path.length + index];\n\t\t\t\treturn pElem === \"*\" || kElem === pElem;\n\t\t\t});\n\t\t}\n\t\tthrow new Error(`Unsupported match type: ${matchType}`);\n\t}\n\tfilterItems(op) {\n\t\tconst candidates = [];\n\t\tfor (const [namespace, items] of this.data.entries()) if (namespace.startsWith(op.namespacePrefix.join(\":\"))) candidates.push(...items.values());\n\t\tlet filteredCandidates = candidates;\n\t\tif (op.filter) filteredCandidates = candidates.filter((item) => Object.entries(op.filter).every(([key, value]) => (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.compareValues)(item.value[key], value)));\n\t\treturn filteredCandidates;\n\t}\n\tscoreResults(candidates, queryVector, offset = 0, limit = 10) {\n\t\tconst flatItems = [];\n\t\tconst flatVectors = [];\n\t\tconst scoreless = [];\n\t\tfor (const item of candidates) {\n\t\t\tconst vectors = this.getVectors(item);\n\t\t\tif (vectors.length) for (const vector of vectors) {\n\t\t\t\tflatItems.push(item);\n\t\t\t\tflatVectors.push(vector);\n\t\t\t}\n\t\t\telse scoreless.push(item);\n\t\t}\n\t\tconst scores = this.cosineSimilarity(queryVector, flatVectors);\n\t\tconst sortedResults = scores.map((score, i) => [score, flatItems[i]]).sort((a, b) => b[0] - a[0]);\n\t\tconst seen = /* @__PURE__ */ new Set();\n\t\tconst kept = [];\n\t\tfor (const [score, item] of sortedResults) {\n\t\t\tconst key = `${item.namespace.join(\":\")}:${item.key}`;\n\t\t\tif (seen.has(key)) continue;\n\t\t\tconst ix = seen.size;\n\t\t\tif (ix >= offset + limit) break;\n\t\t\tif (ix < offset) {\n\t\t\t\tseen.add(key);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tseen.add(key);\n\t\t\tkept.push([score, item]);\n\t\t}\n\t\tif (scoreless.length && kept.length < limit) for (const item of scoreless.slice(0, limit - kept.length)) {\n\t\t\tconst key = `${item.namespace.join(\":\")}:${item.key}`;\n\t\t\tif (!seen.has(key)) {\n\t\t\t\tseen.add(key);\n\t\t\t\tkept.push([void 0, item]);\n\t\t\t}\n\t\t}\n\t\treturn kept.map(([score, item]) => ({\n\t\t\t...item,\n\t\t\tscore\n\t\t}));\n\t}\n\tpaginateResults(results, offset, limit) {\n\t\treturn results.slice(offset, offset + limit);\n\t}\n\textractTexts(ops) {\n\t\tif (!ops.length || !this._indexConfig) return {};\n\t\tconst toEmbed = {};\n\t\tfor (const op of ops) if (op.value !== null && op.index !== false) {\n\t\t\tconst paths = op.index === null || op.index === void 0 ? this._indexConfig.__tokenizedFields ?? [] : op.index.map((ix) => [ix, (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.tokenizePath)(ix)]);\n\t\t\tfor (const [path, field] of paths) {\n\t\t\t\tconst texts = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.getTextAtPath)(op.value, field);\n\t\t\t\tif (texts.length) if (texts.length > 1) texts.forEach((text, i) => {\n\t\t\t\t\tif (!toEmbed[text]) toEmbed[text] = [];\n\t\t\t\t\ttoEmbed[text].push([\n\t\t\t\t\t\top.namespace,\n\t\t\t\t\t\top.key,\n\t\t\t\t\t\t`${path}.${i}`\n\t\t\t\t\t]);\n\t\t\t\t});\n\t\t\t\telse {\n\t\t\t\t\tif (!toEmbed[texts[0]]) toEmbed[texts[0]] = [];\n\t\t\t\t\ttoEmbed[texts[0]].push([\n\t\t\t\t\t\top.namespace,\n\t\t\t\t\t\top.key,\n\t\t\t\t\t\tpath\n\t\t\t\t\t]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn toEmbed;\n\t}\n\tinsertVectors(texts, embeddings) {\n\t\tfor (const [text, metadata] of Object.entries(texts)) {\n\t\t\tconst embedding = embeddings.shift();\n\t\t\tif (!embedding) throw new Error(`No embedding found for text: ${text}`);\n\t\t\tfor (const [namespace, key, field] of metadata) {\n\t\t\t\tconst namespaceKey = namespace.join(\":\");\n\t\t\t\tif (!this.vectors.has(namespaceKey)) this.vectors.set(namespaceKey, /* @__PURE__ */ new Map());\n\t\t\t\tconst namespaceMap = this.vectors.get(namespaceKey);\n\t\t\t\tif (!namespaceMap.has(key)) namespaceMap.set(key, /* @__PURE__ */ new Map());\n\t\t\t\tconst itemMap = namespaceMap.get(key);\n\t\t\t\titemMap.set(field, embedding);\n\t\t\t}\n\t\t}\n\t}\n\tgetVectors(item) {\n\t\tconst namespaceKey = item.namespace.join(\":\");\n\t\tconst itemKey = item.key;\n\t\tif (!this.vectors.has(namespaceKey)) return [];\n\t\tconst namespaceMap = this.vectors.get(namespaceKey);\n\t\tif (!namespaceMap.has(itemKey)) return [];\n\t\tconst itemMap = namespaceMap.get(itemKey);\n\t\tconst vectors = Array.from(itemMap.values());\n\t\tif (!vectors.length) return [];\n\t\treturn vectors;\n\t}\n\tcosineSimilarity(X, Y) {\n\t\tif (!Y.length) return [];\n\t\tconst dotProducts = Y.map((vector) => vector.reduce((acc, val, i) => acc + val * X[i], 0));\n\t\tconst magnitude1 = Math.sqrt(X.reduce((acc, val) => acc + val * val, 0));\n\t\tconst magnitudes2 = Y.map((vector) => Math.sqrt(vector.reduce((acc, val) => acc + val * val, 0)));\n\t\treturn dotProducts.map((dot, i) => {\n\t\t\tconst magnitude2 = magnitudes2[i];\n\t\t\treturn magnitude1 && magnitude2 ? dot / (magnitude1 * magnitude2) : 0;\n\t\t});\n\t}\n\tget indexConfig() {\n\t\treturn this._indexConfig;\n\t}\n};\n/** @deprecated Alias for InMemoryStore */\nvar MemoryStore = class extends InMemoryStore {};\n\n//#endregion\n\n//# sourceMappingURL=memory.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9kaXN0L3N0b3JlL21lbW9yeS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXNDO0FBQ2tDOztBQUV4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLGVBQWU7QUFDOUQ7QUFDQTtBQUNBO0FBQ0EsV0FBVyxtQkFBbUI7QUFDOUI7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLHFDQUFxQztBQUM5RTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0Esc0NBQXNDLHlCQUF5QjtBQUMvRCxzQ0FBc0MsMEJBQTBCO0FBQ2hFO0FBQ0E7QUFDQSxpREFBaUQsNkJBQTZCO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsK0NBQVM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RkFBdUYsdURBQVk7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVCQUF1QjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsbUJBQW1CLHVCQUF1QixHQUFHLE9BQU87QUFDcEQ7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsSUFBSTtBQUNKLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxrQkFBa0I7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSw2Q0FBNkMsVUFBVTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0hBQW9ILHdEQUFhO0FBQ2pJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHlCQUF5QixHQUFHLFNBQVM7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix5QkFBeUIsR0FBRyxTQUFTO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtJQUFrSSx1REFBWTtBQUM5STtBQUNBLGtCQUFrQix3REFBYTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxLQUFLLEdBQUcsRUFBRTtBQUNuQjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRUFBbUUsS0FBSztBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3NDO0FBQ3RDIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9kaXN0L3N0b3JlL21lbW9yeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlU3RvcmUgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBjb21wYXJlVmFsdWVzLCBnZXRUZXh0QXRQYXRoLCB0b2tlbml6ZVBhdGggfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3N0b3JlL21lbW9yeS50c1xuLyoqXG4qIEluLW1lbW9yeSBrZXktdmFsdWUgc3RvcmUgd2l0aCBvcHRpb25hbCB2ZWN0b3Igc2VhcmNoLlxuKlxuKiBBIGxpZ2h0d2VpZ2h0IHN0b3JlIGltcGxlbWVudGF0aW9uIHVzaW5nIEphdmFTY3JpcHQgTWFwcy4gU3VwcG9ydHMgYmFzaWNcbioga2V5LXZhbHVlIG9wZXJhdGlvbnMgYW5kIHZlY3RvciBzZWFyY2ggd2hlbiBjb25maWd1cmVkIHdpdGggZW1iZWRkaW5ncy5cbipcbiogQGV4YW1wbGVcbiogYGBgdHlwZXNjcmlwdFxuKiAvLyBCYXNpYyBrZXktdmFsdWUgc3RvcmFnZVxuKiBjb25zdCBzdG9yZSA9IG5ldyBJbk1lbW9yeVN0b3JlKCk7XG4qIGF3YWl0IHN0b3JlLnB1dChbXCJ1c2Vyc1wiLCBcIjEyM1wiXSwgXCJwcmVmc1wiLCB7IHRoZW1lOiBcImRhcmtcIiB9KTtcbiogY29uc3QgaXRlbSA9IGF3YWl0IHN0b3JlLmdldChbXCJ1c2Vyc1wiLCBcIjEyM1wiXSwgXCJwcmVmc1wiKTtcbipcbiogLy8gVmVjdG9yIHNlYXJjaCB3aXRoIGVtYmVkZGluZ3NcbiogaW1wb3J0IHsgT3BlbkFJRW1iZWRkaW5ncyB9IGZyb20gXCJAbGFuZ2NoYWluL29wZW5haVwiO1xuKiBjb25zdCBzdG9yZSA9IG5ldyBJbk1lbW9yeVN0b3JlKHtcbiogICBpbmRleDoge1xuKiAgICAgZGltczogMTUzNixcbiogICAgIGVtYmVkZGluZ3M6IG5ldyBPcGVuQUlFbWJlZGRpbmdzKHsgbW9kZWxOYW1lOiBcInRleHQtZW1iZWRkaW5nLTMtc21hbGxcIiB9KSxcbiogICB9XG4qIH0pO1xuKlxuKiAvLyBTdG9yZSBkb2N1bWVudHNcbiogYXdhaXQgc3RvcmUucHV0KFtcImRvY3NcIl0sIFwiZG9jMVwiLCB7IHRleHQ6IFwiUHl0aG9uIHR1dG9yaWFsXCIgfSk7XG4qIGF3YWl0IHN0b3JlLnB1dChbXCJkb2NzXCJdLCBcImRvYzJcIiwgeyB0ZXh0OiBcIlR5cGVTY3JpcHQgZ3VpZGVcIiB9KTtcbipcbiogLy8gU2VhcmNoIGJ5IHNpbWlsYXJpdHlcbiogY29uc3QgcmVzdWx0cyA9IGF3YWl0IHN0b3JlLnNlYXJjaChbXCJkb2NzXCJdLCB7IHF1ZXJ5OiBcInB5dGhvbiBwcm9ncmFtbWluZ1wiIH0pO1xuKiBgYGBcbipcbiogKipXYXJuaW5nKio6IFRoaXMgc3RvcmUga2VlcHMgYWxsIGRhdGEgaW4gbWVtb3J5LiBEYXRhIGlzIGxvc3Qgd2hlbiB0aGUgcHJvY2VzcyBleGl0cy5cbiogRm9yIHBlcnNpc3RlbmNlLCB1c2UgYSBkYXRhYmFzZS1iYWNrZWQgc3RvcmUuXG4qL1xudmFyIEluTWVtb3J5U3RvcmUgPSBjbGFzcyBleHRlbmRzIEJhc2VTdG9yZSB7XG5cdGRhdGEgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuXHR2ZWN0b3JzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcblx0X2luZGV4Q29uZmlnO1xuXHRjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG5cdFx0c3VwZXIoKTtcblx0XHRpZiAob3B0aW9ucz8uaW5kZXgpIHRoaXMuX2luZGV4Q29uZmlnID0ge1xuXHRcdFx0Li4ub3B0aW9ucy5pbmRleCxcblx0XHRcdF9fdG9rZW5pemVkRmllbGRzOiAob3B0aW9ucy5pbmRleC5maWVsZHMgPz8gW1wiJFwiXSkubWFwKChwKSA9PiBbcCwgcCA9PT0gXCIkXCIgPyBbcF0gOiB0b2tlbml6ZVBhdGgocCldKVxuXHRcdH07XG5cdH1cblx0YXN5bmMgYmF0Y2gob3BlcmF0aW9ucykge1xuXHRcdGNvbnN0IHJlc3VsdHMgPSBbXTtcblx0XHRjb25zdCBwdXRPcHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuXHRcdGNvbnN0IHNlYXJjaE9wcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBvcGVyYXRpb25zLmxlbmd0aDsgaSArPSAxKSB7XG5cdFx0XHRjb25zdCBvcCA9IG9wZXJhdGlvbnNbaV07XG5cdFx0XHRpZiAoXCJrZXlcIiBpbiBvcCAmJiBcIm5hbWVzcGFjZVwiIGluIG9wICYmICEoXCJ2YWx1ZVwiIGluIG9wKSkgcmVzdWx0cy5wdXNoKHRoaXMuZ2V0T3BlcmF0aW9uKG9wKSk7XG5cdFx0XHRlbHNlIGlmIChcIm5hbWVzcGFjZVByZWZpeFwiIGluIG9wKSB7XG5cdFx0XHRcdGNvbnN0IGNhbmRpZGF0ZXMgPSB0aGlzLmZpbHRlckl0ZW1zKG9wKTtcblx0XHRcdFx0c2VhcmNoT3BzLnNldChpLCBbb3AsIGNhbmRpZGF0ZXNdKTtcblx0XHRcdFx0cmVzdWx0cy5wdXNoKG51bGwpO1xuXHRcdFx0fSBlbHNlIGlmIChcInZhbHVlXCIgaW4gb3ApIHtcblx0XHRcdFx0Y29uc3Qga2V5ID0gYCR7b3AubmFtZXNwYWNlLmpvaW4oXCI6XCIpfToke29wLmtleX1gO1xuXHRcdFx0XHRwdXRPcHMuc2V0KGtleSwgb3ApO1xuXHRcdFx0XHRyZXN1bHRzLnB1c2gobnVsbCk7XG5cdFx0XHR9IGVsc2UgaWYgKFwibWF0Y2hDb25kaXRpb25zXCIgaW4gb3ApIHJlc3VsdHMucHVzaCh0aGlzLmxpc3ROYW1lc3BhY2VzT3BlcmF0aW9uKG9wKSk7XG5cdFx0fVxuXHRcdGlmIChzZWFyY2hPcHMuc2l6ZSA+IDApIGlmICh0aGlzLl9pbmRleENvbmZpZz8uZW1iZWRkaW5ncykge1xuXHRcdFx0Y29uc3QgcXVlcmllcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG5cdFx0XHRmb3IgKGNvbnN0IFtvcF0gb2Ygc2VhcmNoT3BzLnZhbHVlcygpKSBpZiAob3AucXVlcnkpIHF1ZXJpZXMuYWRkKG9wLnF1ZXJ5KTtcblx0XHRcdGNvbnN0IHF1ZXJ5RW1iZWRkaW5ncyA9IHF1ZXJpZXMuc2l6ZSA+IDAgPyBhd2FpdCBQcm9taXNlLmFsbChBcnJheS5mcm9tKHF1ZXJpZXMpLm1hcCgocSkgPT4gdGhpcy5faW5kZXhDb25maWcuZW1iZWRkaW5ncy5lbWJlZFF1ZXJ5KHEpKSkgOiBbXTtcblx0XHRcdGNvbnN0IHF1ZXJ5VmVjdG9ycyA9IE9iamVjdC5mcm9tRW50cmllcyhBcnJheS5mcm9tKHF1ZXJpZXMpLm1hcCgocSwgaSkgPT4gW3EsIHF1ZXJ5RW1iZWRkaW5nc1tpXV0pKTtcblx0XHRcdGZvciAoY29uc3QgW2ksIFtvcCwgY2FuZGlkYXRlc11dIG9mIHNlYXJjaE9wcy5lbnRyaWVzKCkpIGlmIChvcC5xdWVyeSAmJiBxdWVyeVZlY3RvcnNbb3AucXVlcnldKSB7XG5cdFx0XHRcdGNvbnN0IHF1ZXJ5VmVjdG9yID0gcXVlcnlWZWN0b3JzW29wLnF1ZXJ5XTtcblx0XHRcdFx0Y29uc3Qgc2NvcmVkUmVzdWx0cyA9IHRoaXMuc2NvcmVSZXN1bHRzKGNhbmRpZGF0ZXMsIHF1ZXJ5VmVjdG9yLCBvcC5vZmZzZXQgPz8gMCwgb3AubGltaXQgPz8gMTApO1xuXHRcdFx0XHRyZXN1bHRzW2ldID0gc2NvcmVkUmVzdWx0cztcblx0XHRcdH0gZWxzZSByZXN1bHRzW2ldID0gdGhpcy5wYWdpbmF0ZVJlc3VsdHMoY2FuZGlkYXRlcy5tYXAoKGl0ZW0pID0+ICh7XG5cdFx0XHRcdC4uLml0ZW0sXG5cdFx0XHRcdHNjb3JlOiB2b2lkIDBcblx0XHRcdH0pKSwgb3Aub2Zmc2V0ID8/IDAsIG9wLmxpbWl0ID8/IDEwKTtcblx0XHR9IGVsc2UgZm9yIChjb25zdCBbaSwgW29wLCBjYW5kaWRhdGVzXV0gb2Ygc2VhcmNoT3BzLmVudHJpZXMoKSkgcmVzdWx0c1tpXSA9IHRoaXMucGFnaW5hdGVSZXN1bHRzKGNhbmRpZGF0ZXMubWFwKChpdGVtKSA9PiAoe1xuXHRcdFx0Li4uaXRlbSxcblx0XHRcdHNjb3JlOiB2b2lkIDBcblx0XHR9KSksIG9wLm9mZnNldCA/PyAwLCBvcC5saW1pdCA/PyAxMCk7XG5cdFx0aWYgKHB1dE9wcy5zaXplID4gMCAmJiB0aGlzLl9pbmRleENvbmZpZz8uZW1iZWRkaW5ncykge1xuXHRcdFx0Y29uc3QgdG9FbWJlZCA9IHRoaXMuZXh0cmFjdFRleHRzKEFycmF5LmZyb20ocHV0T3BzLnZhbHVlcygpKSk7XG5cdFx0XHRpZiAoT2JqZWN0LmtleXModG9FbWJlZCkubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRjb25zdCBlbWJlZGRpbmdzID0gYXdhaXQgdGhpcy5faW5kZXhDb25maWcuZW1iZWRkaW5ncy5lbWJlZERvY3VtZW50cyhPYmplY3Qua2V5cyh0b0VtYmVkKSk7XG5cdFx0XHRcdHRoaXMuaW5zZXJ0VmVjdG9ycyh0b0VtYmVkLCBlbWJlZGRpbmdzKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0Zm9yIChjb25zdCBvcCBvZiBwdXRPcHMudmFsdWVzKCkpIHRoaXMucHV0T3BlcmF0aW9uKG9wKTtcblx0XHRyZXR1cm4gcmVzdWx0cztcblx0fVxuXHRnZXRPcGVyYXRpb24ob3ApIHtcblx0XHRjb25zdCBuYW1lc3BhY2VLZXkgPSBvcC5uYW1lc3BhY2Uuam9pbihcIjpcIik7XG5cdFx0Y29uc3QgaXRlbSA9IHRoaXMuZGF0YS5nZXQobmFtZXNwYWNlS2V5KT8uZ2V0KG9wLmtleSk7XG5cdFx0cmV0dXJuIGl0ZW0gPz8gbnVsbDtcblx0fVxuXHRwdXRPcGVyYXRpb24ob3ApIHtcblx0XHRjb25zdCBuYW1lc3BhY2VLZXkgPSBvcC5uYW1lc3BhY2Uuam9pbihcIjpcIik7XG5cdFx0aWYgKCF0aGlzLmRhdGEuaGFzKG5hbWVzcGFjZUtleSkpIHRoaXMuZGF0YS5zZXQobmFtZXNwYWNlS2V5LCAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpKTtcblx0XHRjb25zdCBuYW1lc3BhY2VNYXAgPSB0aGlzLmRhdGEuZ2V0KG5hbWVzcGFjZUtleSk7XG5cdFx0aWYgKG9wLnZhbHVlID09PSBudWxsKSBuYW1lc3BhY2VNYXAuZGVsZXRlKG9wLmtleSk7XG5cdFx0ZWxzZSB7XG5cdFx0XHRjb25zdCBub3cgPSAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcblx0XHRcdGlmIChuYW1lc3BhY2VNYXAuaGFzKG9wLmtleSkpIHtcblx0XHRcdFx0Y29uc3QgaXRlbSA9IG5hbWVzcGFjZU1hcC5nZXQob3Aua2V5KTtcblx0XHRcdFx0aXRlbS52YWx1ZSA9IG9wLnZhbHVlO1xuXHRcdFx0XHRpdGVtLnVwZGF0ZWRBdCA9IG5vdztcblx0XHRcdH0gZWxzZSBuYW1lc3BhY2VNYXAuc2V0KG9wLmtleSwge1xuXHRcdFx0XHR2YWx1ZTogb3AudmFsdWUsXG5cdFx0XHRcdGtleTogb3Aua2V5LFxuXHRcdFx0XHRuYW1lc3BhY2U6IG9wLm5hbWVzcGFjZSxcblx0XHRcdFx0Y3JlYXRlZEF0OiBub3csXG5cdFx0XHRcdHVwZGF0ZWRBdDogbm93XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblx0bGlzdE5hbWVzcGFjZXNPcGVyYXRpb24ob3ApIHtcblx0XHRjb25zdCBhbGxOYW1lc3BhY2VzID0gQXJyYXkuZnJvbSh0aGlzLmRhdGEua2V5cygpKS5tYXAoKG5zKSA9PiBucy5zcGxpdChcIjpcIikpO1xuXHRcdGxldCBuYW1lc3BhY2VzID0gYWxsTmFtZXNwYWNlcztcblx0XHRpZiAob3AubWF0Y2hDb25kaXRpb25zICYmIG9wLm1hdGNoQ29uZGl0aW9ucy5sZW5ndGggPiAwKSBuYW1lc3BhY2VzID0gbmFtZXNwYWNlcy5maWx0ZXIoKG5zKSA9PiBvcC5tYXRjaENvbmRpdGlvbnMuZXZlcnkoKGNvbmRpdGlvbikgPT4gdGhpcy5kb2VzTWF0Y2goY29uZGl0aW9uLCBucykpKTtcblx0XHRpZiAob3AubWF4RGVwdGggIT09IHZvaWQgMCkgbmFtZXNwYWNlcyA9IEFycmF5LmZyb20obmV3IFNldChuYW1lc3BhY2VzLm1hcCgobnMpID0+IG5zLnNsaWNlKDAsIG9wLm1heERlcHRoKS5qb2luKFwiOlwiKSkpKS5tYXAoKG5zKSA9PiBucy5zcGxpdChcIjpcIikpO1xuXHRcdG5hbWVzcGFjZXMuc29ydCgoYSwgYikgPT4gYS5qb2luKFwiOlwiKS5sb2NhbGVDb21wYXJlKGIuam9pbihcIjpcIikpKTtcblx0XHRyZXR1cm4gbmFtZXNwYWNlcy5zbGljZShvcC5vZmZzZXQgPz8gMCwgKG9wLm9mZnNldCA/PyAwKSArIChvcC5saW1pdCA/PyBuYW1lc3BhY2VzLmxlbmd0aCkpO1xuXHR9XG5cdGRvZXNNYXRjaChtYXRjaENvbmRpdGlvbiwga2V5KSB7XG5cdFx0Y29uc3QgeyBtYXRjaFR5cGUsIHBhdGggfSA9IG1hdGNoQ29uZGl0aW9uO1xuXHRcdGlmIChtYXRjaFR5cGUgPT09IFwicHJlZml4XCIpIHtcblx0XHRcdGlmIChwYXRoLmxlbmd0aCA+IGtleS5sZW5ndGgpIHJldHVybiBmYWxzZTtcblx0XHRcdHJldHVybiBwYXRoLmV2ZXJ5KChwRWxlbSwgaW5kZXgpID0+IHtcblx0XHRcdFx0Y29uc3Qga0VsZW0gPSBrZXlbaW5kZXhdO1xuXHRcdFx0XHRyZXR1cm4gcEVsZW0gPT09IFwiKlwiIHx8IGtFbGVtID09PSBwRWxlbTtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSBpZiAobWF0Y2hUeXBlID09PSBcInN1ZmZpeFwiKSB7XG5cdFx0XHRpZiAocGF0aC5sZW5ndGggPiBrZXkubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRyZXR1cm4gcGF0aC5ldmVyeSgocEVsZW0sIGluZGV4KSA9PiB7XG5cdFx0XHRcdGNvbnN0IGtFbGVtID0ga2V5W2tleS5sZW5ndGggLSBwYXRoLmxlbmd0aCArIGluZGV4XTtcblx0XHRcdFx0cmV0dXJuIHBFbGVtID09PSBcIipcIiB8fCBrRWxlbSA9PT0gcEVsZW07XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0dGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBtYXRjaCB0eXBlOiAke21hdGNoVHlwZX1gKTtcblx0fVxuXHRmaWx0ZXJJdGVtcyhvcCkge1xuXHRcdGNvbnN0IGNhbmRpZGF0ZXMgPSBbXTtcblx0XHRmb3IgKGNvbnN0IFtuYW1lc3BhY2UsIGl0ZW1zXSBvZiB0aGlzLmRhdGEuZW50cmllcygpKSBpZiAobmFtZXNwYWNlLnN0YXJ0c1dpdGgob3AubmFtZXNwYWNlUHJlZml4LmpvaW4oXCI6XCIpKSkgY2FuZGlkYXRlcy5wdXNoKC4uLml0ZW1zLnZhbHVlcygpKTtcblx0XHRsZXQgZmlsdGVyZWRDYW5kaWRhdGVzID0gY2FuZGlkYXRlcztcblx0XHRpZiAob3AuZmlsdGVyKSBmaWx0ZXJlZENhbmRpZGF0ZXMgPSBjYW5kaWRhdGVzLmZpbHRlcigoaXRlbSkgPT4gT2JqZWN0LmVudHJpZXMob3AuZmlsdGVyKS5ldmVyeSgoW2tleSwgdmFsdWVdKSA9PiBjb21wYXJlVmFsdWVzKGl0ZW0udmFsdWVba2V5XSwgdmFsdWUpKSk7XG5cdFx0cmV0dXJuIGZpbHRlcmVkQ2FuZGlkYXRlcztcblx0fVxuXHRzY29yZVJlc3VsdHMoY2FuZGlkYXRlcywgcXVlcnlWZWN0b3IsIG9mZnNldCA9IDAsIGxpbWl0ID0gMTApIHtcblx0XHRjb25zdCBmbGF0SXRlbXMgPSBbXTtcblx0XHRjb25zdCBmbGF0VmVjdG9ycyA9IFtdO1xuXHRcdGNvbnN0IHNjb3JlbGVzcyA9IFtdO1xuXHRcdGZvciAoY29uc3QgaXRlbSBvZiBjYW5kaWRhdGVzKSB7XG5cdFx0XHRjb25zdCB2ZWN0b3JzID0gdGhpcy5nZXRWZWN0b3JzKGl0ZW0pO1xuXHRcdFx0aWYgKHZlY3RvcnMubGVuZ3RoKSBmb3IgKGNvbnN0IHZlY3RvciBvZiB2ZWN0b3JzKSB7XG5cdFx0XHRcdGZsYXRJdGVtcy5wdXNoKGl0ZW0pO1xuXHRcdFx0XHRmbGF0VmVjdG9ycy5wdXNoKHZlY3Rvcik7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHNjb3JlbGVzcy5wdXNoKGl0ZW0pO1xuXHRcdH1cblx0XHRjb25zdCBzY29yZXMgPSB0aGlzLmNvc2luZVNpbWlsYXJpdHkocXVlcnlWZWN0b3IsIGZsYXRWZWN0b3JzKTtcblx0XHRjb25zdCBzb3J0ZWRSZXN1bHRzID0gc2NvcmVzLm1hcCgoc2NvcmUsIGkpID0+IFtzY29yZSwgZmxhdEl0ZW1zW2ldXSkuc29ydCgoYSwgYikgPT4gYlswXSAtIGFbMF0pO1xuXHRcdGNvbnN0IHNlZW4gPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuXHRcdGNvbnN0IGtlcHQgPSBbXTtcblx0XHRmb3IgKGNvbnN0IFtzY29yZSwgaXRlbV0gb2Ygc29ydGVkUmVzdWx0cykge1xuXHRcdFx0Y29uc3Qga2V5ID0gYCR7aXRlbS5uYW1lc3BhY2Uuam9pbihcIjpcIil9OiR7aXRlbS5rZXl9YDtcblx0XHRcdGlmIChzZWVuLmhhcyhrZXkpKSBjb250aW51ZTtcblx0XHRcdGNvbnN0IGl4ID0gc2Vlbi5zaXplO1xuXHRcdFx0aWYgKGl4ID49IG9mZnNldCArIGxpbWl0KSBicmVhaztcblx0XHRcdGlmIChpeCA8IG9mZnNldCkge1xuXHRcdFx0XHRzZWVuLmFkZChrZXkpO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdHNlZW4uYWRkKGtleSk7XG5cdFx0XHRrZXB0LnB1c2goW3Njb3JlLCBpdGVtXSk7XG5cdFx0fVxuXHRcdGlmIChzY29yZWxlc3MubGVuZ3RoICYmIGtlcHQubGVuZ3RoIDwgbGltaXQpIGZvciAoY29uc3QgaXRlbSBvZiBzY29yZWxlc3Muc2xpY2UoMCwgbGltaXQgLSBrZXB0Lmxlbmd0aCkpIHtcblx0XHRcdGNvbnN0IGtleSA9IGAke2l0ZW0ubmFtZXNwYWNlLmpvaW4oXCI6XCIpfToke2l0ZW0ua2V5fWA7XG5cdFx0XHRpZiAoIXNlZW4uaGFzKGtleSkpIHtcblx0XHRcdFx0c2Vlbi5hZGQoa2V5KTtcblx0XHRcdFx0a2VwdC5wdXNoKFt2b2lkIDAsIGl0ZW1dKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGtlcHQubWFwKChbc2NvcmUsIGl0ZW1dKSA9PiAoe1xuXHRcdFx0Li4uaXRlbSxcblx0XHRcdHNjb3JlXG5cdFx0fSkpO1xuXHR9XG5cdHBhZ2luYXRlUmVzdWx0cyhyZXN1bHRzLCBvZmZzZXQsIGxpbWl0KSB7XG5cdFx0cmV0dXJuIHJlc3VsdHMuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBsaW1pdCk7XG5cdH1cblx0ZXh0cmFjdFRleHRzKG9wcykge1xuXHRcdGlmICghb3BzLmxlbmd0aCB8fCAhdGhpcy5faW5kZXhDb25maWcpIHJldHVybiB7fTtcblx0XHRjb25zdCB0b0VtYmVkID0ge307XG5cdFx0Zm9yIChjb25zdCBvcCBvZiBvcHMpIGlmIChvcC52YWx1ZSAhPT0gbnVsbCAmJiBvcC5pbmRleCAhPT0gZmFsc2UpIHtcblx0XHRcdGNvbnN0IHBhdGhzID0gb3AuaW5kZXggPT09IG51bGwgfHwgb3AuaW5kZXggPT09IHZvaWQgMCA/IHRoaXMuX2luZGV4Q29uZmlnLl9fdG9rZW5pemVkRmllbGRzID8/IFtdIDogb3AuaW5kZXgubWFwKChpeCkgPT4gW2l4LCB0b2tlbml6ZVBhdGgoaXgpXSk7XG5cdFx0XHRmb3IgKGNvbnN0IFtwYXRoLCBmaWVsZF0gb2YgcGF0aHMpIHtcblx0XHRcdFx0Y29uc3QgdGV4dHMgPSBnZXRUZXh0QXRQYXRoKG9wLnZhbHVlLCBmaWVsZCk7XG5cdFx0XHRcdGlmICh0ZXh0cy5sZW5ndGgpIGlmICh0ZXh0cy5sZW5ndGggPiAxKSB0ZXh0cy5mb3JFYWNoKCh0ZXh0LCBpKSA9PiB7XG5cdFx0XHRcdFx0aWYgKCF0b0VtYmVkW3RleHRdKSB0b0VtYmVkW3RleHRdID0gW107XG5cdFx0XHRcdFx0dG9FbWJlZFt0ZXh0XS5wdXNoKFtcblx0XHRcdFx0XHRcdG9wLm5hbWVzcGFjZSxcblx0XHRcdFx0XHRcdG9wLmtleSxcblx0XHRcdFx0XHRcdGAke3BhdGh9LiR7aX1gXG5cdFx0XHRcdFx0XSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRpZiAoIXRvRW1iZWRbdGV4dHNbMF1dKSB0b0VtYmVkW3RleHRzWzBdXSA9IFtdO1xuXHRcdFx0XHRcdHRvRW1iZWRbdGV4dHNbMF1dLnB1c2goW1xuXHRcdFx0XHRcdFx0b3AubmFtZXNwYWNlLFxuXHRcdFx0XHRcdFx0b3Aua2V5LFxuXHRcdFx0XHRcdFx0cGF0aFxuXHRcdFx0XHRcdF0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB0b0VtYmVkO1xuXHR9XG5cdGluc2VydFZlY3RvcnModGV4dHMsIGVtYmVkZGluZ3MpIHtcblx0XHRmb3IgKGNvbnN0IFt0ZXh0LCBtZXRhZGF0YV0gb2YgT2JqZWN0LmVudHJpZXModGV4dHMpKSB7XG5cdFx0XHRjb25zdCBlbWJlZGRpbmcgPSBlbWJlZGRpbmdzLnNoaWZ0KCk7XG5cdFx0XHRpZiAoIWVtYmVkZGluZykgdGhyb3cgbmV3IEVycm9yKGBObyBlbWJlZGRpbmcgZm91bmQgZm9yIHRleHQ6ICR7dGV4dH1gKTtcblx0XHRcdGZvciAoY29uc3QgW25hbWVzcGFjZSwga2V5LCBmaWVsZF0gb2YgbWV0YWRhdGEpIHtcblx0XHRcdFx0Y29uc3QgbmFtZXNwYWNlS2V5ID0gbmFtZXNwYWNlLmpvaW4oXCI6XCIpO1xuXHRcdFx0XHRpZiAoIXRoaXMudmVjdG9ycy5oYXMobmFtZXNwYWNlS2V5KSkgdGhpcy52ZWN0b3JzLnNldChuYW1lc3BhY2VLZXksIC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCkpO1xuXHRcdFx0XHRjb25zdCBuYW1lc3BhY2VNYXAgPSB0aGlzLnZlY3RvcnMuZ2V0KG5hbWVzcGFjZUtleSk7XG5cdFx0XHRcdGlmICghbmFtZXNwYWNlTWFwLmhhcyhrZXkpKSBuYW1lc3BhY2VNYXAuc2V0KGtleSwgLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSk7XG5cdFx0XHRcdGNvbnN0IGl0ZW1NYXAgPSBuYW1lc3BhY2VNYXAuZ2V0KGtleSk7XG5cdFx0XHRcdGl0ZW1NYXAuc2V0KGZpZWxkLCBlbWJlZGRpbmcpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRnZXRWZWN0b3JzKGl0ZW0pIHtcblx0XHRjb25zdCBuYW1lc3BhY2VLZXkgPSBpdGVtLm5hbWVzcGFjZS5qb2luKFwiOlwiKTtcblx0XHRjb25zdCBpdGVtS2V5ID0gaXRlbS5rZXk7XG5cdFx0aWYgKCF0aGlzLnZlY3RvcnMuaGFzKG5hbWVzcGFjZUtleSkpIHJldHVybiBbXTtcblx0XHRjb25zdCBuYW1lc3BhY2VNYXAgPSB0aGlzLnZlY3RvcnMuZ2V0KG5hbWVzcGFjZUtleSk7XG5cdFx0aWYgKCFuYW1lc3BhY2VNYXAuaGFzKGl0ZW1LZXkpKSByZXR1cm4gW107XG5cdFx0Y29uc3QgaXRlbU1hcCA9IG5hbWVzcGFjZU1hcC5nZXQoaXRlbUtleSk7XG5cdFx0Y29uc3QgdmVjdG9ycyA9IEFycmF5LmZyb20oaXRlbU1hcC52YWx1ZXMoKSk7XG5cdFx0aWYgKCF2ZWN0b3JzLmxlbmd0aCkgcmV0dXJuIFtdO1xuXHRcdHJldHVybiB2ZWN0b3JzO1xuXHR9XG5cdGNvc2luZVNpbWlsYXJpdHkoWCwgWSkge1xuXHRcdGlmICghWS5sZW5ndGgpIHJldHVybiBbXTtcblx0XHRjb25zdCBkb3RQcm9kdWN0cyA9IFkubWFwKCh2ZWN0b3IpID0+IHZlY3Rvci5yZWR1Y2UoKGFjYywgdmFsLCBpKSA9PiBhY2MgKyB2YWwgKiBYW2ldLCAwKSk7XG5cdFx0Y29uc3QgbWFnbml0dWRlMSA9IE1hdGguc3FydChYLnJlZHVjZSgoYWNjLCB2YWwpID0+IGFjYyArIHZhbCAqIHZhbCwgMCkpO1xuXHRcdGNvbnN0IG1hZ25pdHVkZXMyID0gWS5tYXAoKHZlY3RvcikgPT4gTWF0aC5zcXJ0KHZlY3Rvci5yZWR1Y2UoKGFjYywgdmFsKSA9PiBhY2MgKyB2YWwgKiB2YWwsIDApKSk7XG5cdFx0cmV0dXJuIGRvdFByb2R1Y3RzLm1hcCgoZG90LCBpKSA9PiB7XG5cdFx0XHRjb25zdCBtYWduaXR1ZGUyID0gbWFnbml0dWRlczJbaV07XG5cdFx0XHRyZXR1cm4gbWFnbml0dWRlMSAmJiBtYWduaXR1ZGUyID8gZG90IC8gKG1hZ25pdHVkZTEgKiBtYWduaXR1ZGUyKSA6IDA7XG5cdFx0fSk7XG5cdH1cblx0Z2V0IGluZGV4Q29uZmlnKCkge1xuXHRcdHJldHVybiB0aGlzLl9pbmRleENvbmZpZztcblx0fVxufTtcbi8qKiBAZGVwcmVjYXRlZCBBbGlhcyBmb3IgSW5NZW1vcnlTdG9yZSAqL1xudmFyIE1lbW9yeVN0b3JlID0gY2xhc3MgZXh0ZW5kcyBJbk1lbW9yeVN0b3JlIHt9O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEluTWVtb3J5U3RvcmUsIE1lbW9yeVN0b3JlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZW1vcnkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/store/memory.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/store/utils.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-checkpoint/dist/store/utils.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   compareValues: () => (/* binding */ compareValues),\n/* harmony export */   getTextAtPath: () => (/* binding */ getTextAtPath),\n/* harmony export */   tokenizePath: () => (/* binding */ tokenizePath)\n/* harmony export */ });\n//#region src/store/utils.ts\n/**\n* Tokenize a JSON path into parts.\n* @example\n* tokenizePath(\"metadata.title\") // -> [\"metadata\", \"title\"]\n* tokenizePath(\"chapters[*].content\") // -> [\"chapters[*]\", \"content\"]\n*/\nfunction tokenizePath(path) {\n\tif (!path) return [];\n\tconst tokens = [];\n\tlet current = [];\n\tlet i = 0;\n\twhile (i < path.length) {\n\t\tconst char = path[i];\n\t\tif (char === \"[\") {\n\t\t\tif (current.length) {\n\t\t\t\ttokens.push(current.join(\"\"));\n\t\t\t\tcurrent = [];\n\t\t\t}\n\t\t\tlet bracketCount = 1;\n\t\t\tconst indexChars = [\"[\"];\n\t\t\ti += 1;\n\t\t\twhile (i < path.length && bracketCount > 0) {\n\t\t\t\tif (path[i] === \"[\") bracketCount += 1;\n\t\t\t\telse if (path[i] === \"]\") bracketCount -= 1;\n\t\t\t\tindexChars.push(path[i]);\n\t\t\t\ti += 1;\n\t\t\t}\n\t\t\ttokens.push(indexChars.join(\"\"));\n\t\t\tcontinue;\n\t\t} else if (char === \"{\") {\n\t\t\tif (current.length) {\n\t\t\t\ttokens.push(current.join(\"\"));\n\t\t\t\tcurrent = [];\n\t\t\t}\n\t\t\tlet braceCount = 1;\n\t\t\tconst fieldChars = [\"{\"];\n\t\t\ti += 1;\n\t\t\twhile (i < path.length && braceCount > 0) {\n\t\t\t\tif (path[i] === \"{\") braceCount += 1;\n\t\t\t\telse if (path[i] === \"}\") braceCount -= 1;\n\t\t\t\tfieldChars.push(path[i]);\n\t\t\t\ti += 1;\n\t\t\t}\n\t\t\ttokens.push(fieldChars.join(\"\"));\n\t\t\tcontinue;\n\t\t} else if (char === \".\") {\n\t\t\tif (current.length) {\n\t\t\t\ttokens.push(current.join(\"\"));\n\t\t\t\tcurrent = [];\n\t\t\t}\n\t\t} else current.push(char);\n\t\ti += 1;\n\t}\n\tif (current.length) tokens.push(current.join(\"\"));\n\treturn tokens;\n}\n/**\n* Type guard to check if an object is a FilterOperators\n*/\nfunction isFilterOperators(obj) {\n\treturn typeof obj === \"object\" && obj !== null && Object.keys(obj).every((key) => key === \"$eq\" || key === \"$ne\" || key === \"$gt\" || key === \"$gte\" || key === \"$lt\" || key === \"$lte\" || key === \"$in\" || key === \"$nin\");\n}\n/**\n* Compare values for filtering, supporting operator-based comparisons.\n*/\nfunction compareValues(itemValue, filterValue) {\n\tif (isFilterOperators(filterValue)) {\n\t\tconst operators = Object.keys(filterValue).filter((k) => k.startsWith(\"$\"));\n\t\treturn operators.every((op) => {\n\t\t\tconst value = filterValue[op];\n\t\t\tswitch (op) {\n\t\t\t\tcase \"$eq\": return itemValue === value;\n\t\t\t\tcase \"$ne\": return itemValue !== value;\n\t\t\t\tcase \"$gt\": return Number(itemValue) > Number(value);\n\t\t\t\tcase \"$gte\": return Number(itemValue) >= Number(value);\n\t\t\t\tcase \"$lt\": return Number(itemValue) < Number(value);\n\t\t\t\tcase \"$lte\": return Number(itemValue) <= Number(value);\n\t\t\t\tcase \"$in\": return Array.isArray(value) ? value.includes(itemValue) : false;\n\t\t\t\tcase \"$nin\": return Array.isArray(value) ? !value.includes(itemValue) : true;\n\t\t\t\tdefault: return false;\n\t\t\t}\n\t\t});\n\t}\n\treturn itemValue === filterValue;\n}\n/**\n* Extract text from a value at a specific JSON path.\n*\n* Supports:\n* - Simple paths: \"field1.field2\"\n* - Array indexing: \"[0]\", \"[*]\", \"[-1]\"\n* - Wildcards: \"*\"\n* - Multi-field selection: \"{field1,field2}\"\n* - Nested paths in multi-field: \"{field1,nested.field2}\"\n*/\nfunction getTextAtPath(obj, path) {\n\tif (!path || path === \"$\") return [JSON.stringify(obj, null, 2)];\n\tconst tokens = Array.isArray(path) ? path : tokenizePath(path);\n\tfunction extractFromObj(obj$1, tokens$1, pos) {\n\t\tif (pos >= tokens$1.length) {\n\t\t\tif (typeof obj$1 === \"string\" || typeof obj$1 === \"number\" || typeof obj$1 === \"boolean\") return [String(obj$1)];\n\t\t\tif (obj$1 === null || obj$1 === void 0) return [];\n\t\t\tif (Array.isArray(obj$1) || typeof obj$1 === \"object\") return [JSON.stringify(obj$1, null, 2)];\n\t\t\treturn [];\n\t\t}\n\t\tconst token = tokens$1[pos];\n\t\tconst results = [];\n\t\tif (pos === 0 && token === \"$\") results.push(JSON.stringify(obj$1, null, 2));\n\t\tif (token.startsWith(\"[\") && token.endsWith(\"]\")) {\n\t\t\tif (!Array.isArray(obj$1)) return [];\n\t\t\tconst index = token.slice(1, -1);\n\t\t\tif (index === \"*\") for (const item of obj$1) results.push(...extractFromObj(item, tokens$1, pos + 1));\n\t\t\telse try {\n\t\t\t\tlet idx = parseInt(index, 10);\n\t\t\t\tif (idx < 0) idx = obj$1.length + idx;\n\t\t\t\tif (idx >= 0 && idx < obj$1.length) results.push(...extractFromObj(obj$1[idx], tokens$1, pos + 1));\n\t\t\t} catch {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t} else if (token.startsWith(\"{\") && token.endsWith(\"}\")) {\n\t\t\tif (typeof obj$1 !== \"object\" || obj$1 === null) return [];\n\t\t\tconst fields = token.slice(1, -1).split(\",\").map((f) => f.trim());\n\t\t\tfor (const field of fields) {\n\t\t\t\tconst nestedTokens = tokenizePath(field);\n\t\t\t\tif (nestedTokens.length) {\n\t\t\t\t\tlet currentObj = obj$1;\n\t\t\t\t\tfor (const nestedToken of nestedTokens) if (currentObj && typeof currentObj === \"object\" && nestedToken in currentObj) currentObj = currentObj[nestedToken];\n\t\t\t\t\telse {\n\t\t\t\t\t\tcurrentObj = void 0;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (currentObj !== void 0) {\n\t\t\t\t\t\tif (typeof currentObj === \"string\" || typeof currentObj === \"number\" || typeof currentObj === \"boolean\") results.push(String(currentObj));\n\t\t\t\t\t\telse if (Array.isArray(currentObj) || typeof currentObj === \"object\") results.push(JSON.stringify(currentObj, null, 2));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (token === \"*\") {\n\t\t\tif (Array.isArray(obj$1)) for (const item of obj$1) results.push(...extractFromObj(item, tokens$1, pos + 1));\n\t\t\telse if (typeof obj$1 === \"object\" && obj$1 !== null) for (const value of Object.values(obj$1)) results.push(...extractFromObj(value, tokens$1, pos + 1));\n\t\t} else if (typeof obj$1 === \"object\" && obj$1 !== null && token in obj$1) results.push(...extractFromObj(obj$1[token], tokens$1, pos + 1));\n\t\treturn results;\n\t}\n\treturn extractFromObj(obj, tokens, 0);\n}\n\n//#endregion\n\n//# sourceMappingURL=utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9kaXN0L3N0b3JlL3V0aWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksb0JBQW9CO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QiwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsY0FBYztBQUMzQyxtQ0FBbUMscUJBQXFCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxJQUFJLDRCQUE0Qix1QkFBdUI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3NEO0FBQ3REIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9kaXN0L3N0b3JlL3V0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvc3RvcmUvdXRpbHMudHNcbi8qKlxuKiBUb2tlbml6ZSBhIEpTT04gcGF0aCBpbnRvIHBhcnRzLlxuKiBAZXhhbXBsZVxuKiB0b2tlbml6ZVBhdGgoXCJtZXRhZGF0YS50aXRsZVwiKSAvLyAtPiBbXCJtZXRhZGF0YVwiLCBcInRpdGxlXCJdXG4qIHRva2VuaXplUGF0aChcImNoYXB0ZXJzWypdLmNvbnRlbnRcIikgLy8gLT4gW1wiY2hhcHRlcnNbKl1cIiwgXCJjb250ZW50XCJdXG4qL1xuZnVuY3Rpb24gdG9rZW5pemVQYXRoKHBhdGgpIHtcblx0aWYgKCFwYXRoKSByZXR1cm4gW107XG5cdGNvbnN0IHRva2VucyA9IFtdO1xuXHRsZXQgY3VycmVudCA9IFtdO1xuXHRsZXQgaSA9IDA7XG5cdHdoaWxlIChpIDwgcGF0aC5sZW5ndGgpIHtcblx0XHRjb25zdCBjaGFyID0gcGF0aFtpXTtcblx0XHRpZiAoY2hhciA9PT0gXCJbXCIpIHtcblx0XHRcdGlmIChjdXJyZW50Lmxlbmd0aCkge1xuXHRcdFx0XHR0b2tlbnMucHVzaChjdXJyZW50LmpvaW4oXCJcIikpO1xuXHRcdFx0XHRjdXJyZW50ID0gW107XG5cdFx0XHR9XG5cdFx0XHRsZXQgYnJhY2tldENvdW50ID0gMTtcblx0XHRcdGNvbnN0IGluZGV4Q2hhcnMgPSBbXCJbXCJdO1xuXHRcdFx0aSArPSAxO1xuXHRcdFx0d2hpbGUgKGkgPCBwYXRoLmxlbmd0aCAmJiBicmFja2V0Q291bnQgPiAwKSB7XG5cdFx0XHRcdGlmIChwYXRoW2ldID09PSBcIltcIikgYnJhY2tldENvdW50ICs9IDE7XG5cdFx0XHRcdGVsc2UgaWYgKHBhdGhbaV0gPT09IFwiXVwiKSBicmFja2V0Q291bnQgLT0gMTtcblx0XHRcdFx0aW5kZXhDaGFycy5wdXNoKHBhdGhbaV0pO1xuXHRcdFx0XHRpICs9IDE7XG5cdFx0XHR9XG5cdFx0XHR0b2tlbnMucHVzaChpbmRleENoYXJzLmpvaW4oXCJcIikpO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fSBlbHNlIGlmIChjaGFyID09PSBcIntcIikge1xuXHRcdFx0aWYgKGN1cnJlbnQubGVuZ3RoKSB7XG5cdFx0XHRcdHRva2Vucy5wdXNoKGN1cnJlbnQuam9pbihcIlwiKSk7XG5cdFx0XHRcdGN1cnJlbnQgPSBbXTtcblx0XHRcdH1cblx0XHRcdGxldCBicmFjZUNvdW50ID0gMTtcblx0XHRcdGNvbnN0IGZpZWxkQ2hhcnMgPSBbXCJ7XCJdO1xuXHRcdFx0aSArPSAxO1xuXHRcdFx0d2hpbGUgKGkgPCBwYXRoLmxlbmd0aCAmJiBicmFjZUNvdW50ID4gMCkge1xuXHRcdFx0XHRpZiAocGF0aFtpXSA9PT0gXCJ7XCIpIGJyYWNlQ291bnQgKz0gMTtcblx0XHRcdFx0ZWxzZSBpZiAocGF0aFtpXSA9PT0gXCJ9XCIpIGJyYWNlQ291bnQgLT0gMTtcblx0XHRcdFx0ZmllbGRDaGFycy5wdXNoKHBhdGhbaV0pO1xuXHRcdFx0XHRpICs9IDE7XG5cdFx0XHR9XG5cdFx0XHR0b2tlbnMucHVzaChmaWVsZENoYXJzLmpvaW4oXCJcIikpO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fSBlbHNlIGlmIChjaGFyID09PSBcIi5cIikge1xuXHRcdFx0aWYgKGN1cnJlbnQubGVuZ3RoKSB7XG5cdFx0XHRcdHRva2Vucy5wdXNoKGN1cnJlbnQuam9pbihcIlwiKSk7XG5cdFx0XHRcdGN1cnJlbnQgPSBbXTtcblx0XHRcdH1cblx0XHR9IGVsc2UgY3VycmVudC5wdXNoKGNoYXIpO1xuXHRcdGkgKz0gMTtcblx0fVxuXHRpZiAoY3VycmVudC5sZW5ndGgpIHRva2Vucy5wdXNoKGN1cnJlbnQuam9pbihcIlwiKSk7XG5cdHJldHVybiB0b2tlbnM7XG59XG4vKipcbiogVHlwZSBndWFyZCB0byBjaGVjayBpZiBhbiBvYmplY3QgaXMgYSBGaWx0ZXJPcGVyYXRvcnNcbiovXG5mdW5jdGlvbiBpc0ZpbHRlck9wZXJhdG9ycyhvYmopIHtcblx0cmV0dXJuIHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgJiYgb2JqICE9PSBudWxsICYmIE9iamVjdC5rZXlzKG9iaikuZXZlcnkoKGtleSkgPT4ga2V5ID09PSBcIiRlcVwiIHx8IGtleSA9PT0gXCIkbmVcIiB8fCBrZXkgPT09IFwiJGd0XCIgfHwga2V5ID09PSBcIiRndGVcIiB8fCBrZXkgPT09IFwiJGx0XCIgfHwga2V5ID09PSBcIiRsdGVcIiB8fCBrZXkgPT09IFwiJGluXCIgfHwga2V5ID09PSBcIiRuaW5cIik7XG59XG4vKipcbiogQ29tcGFyZSB2YWx1ZXMgZm9yIGZpbHRlcmluZywgc3VwcG9ydGluZyBvcGVyYXRvci1iYXNlZCBjb21wYXJpc29ucy5cbiovXG5mdW5jdGlvbiBjb21wYXJlVmFsdWVzKGl0ZW1WYWx1ZSwgZmlsdGVyVmFsdWUpIHtcblx0aWYgKGlzRmlsdGVyT3BlcmF0b3JzKGZpbHRlclZhbHVlKSkge1xuXHRcdGNvbnN0IG9wZXJhdG9ycyA9IE9iamVjdC5rZXlzKGZpbHRlclZhbHVlKS5maWx0ZXIoKGspID0+IGsuc3RhcnRzV2l0aChcIiRcIikpO1xuXHRcdHJldHVybiBvcGVyYXRvcnMuZXZlcnkoKG9wKSA9PiB7XG5cdFx0XHRjb25zdCB2YWx1ZSA9IGZpbHRlclZhbHVlW29wXTtcblx0XHRcdHN3aXRjaCAob3ApIHtcblx0XHRcdFx0Y2FzZSBcIiRlcVwiOiByZXR1cm4gaXRlbVZhbHVlID09PSB2YWx1ZTtcblx0XHRcdFx0Y2FzZSBcIiRuZVwiOiByZXR1cm4gaXRlbVZhbHVlICE9PSB2YWx1ZTtcblx0XHRcdFx0Y2FzZSBcIiRndFwiOiByZXR1cm4gTnVtYmVyKGl0ZW1WYWx1ZSkgPiBOdW1iZXIodmFsdWUpO1xuXHRcdFx0XHRjYXNlIFwiJGd0ZVwiOiByZXR1cm4gTnVtYmVyKGl0ZW1WYWx1ZSkgPj0gTnVtYmVyKHZhbHVlKTtcblx0XHRcdFx0Y2FzZSBcIiRsdFwiOiByZXR1cm4gTnVtYmVyKGl0ZW1WYWx1ZSkgPCBOdW1iZXIodmFsdWUpO1xuXHRcdFx0XHRjYXNlIFwiJGx0ZVwiOiByZXR1cm4gTnVtYmVyKGl0ZW1WYWx1ZSkgPD0gTnVtYmVyKHZhbHVlKTtcblx0XHRcdFx0Y2FzZSBcIiRpblwiOiByZXR1cm4gQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZS5pbmNsdWRlcyhpdGVtVmFsdWUpIDogZmFsc2U7XG5cdFx0XHRcdGNhc2UgXCIkbmluXCI6IHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKSA/ICF2YWx1ZS5pbmNsdWRlcyhpdGVtVmFsdWUpIDogdHJ1ZTtcblx0XHRcdFx0ZGVmYXVsdDogcmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdHJldHVybiBpdGVtVmFsdWUgPT09IGZpbHRlclZhbHVlO1xufVxuLyoqXG4qIEV4dHJhY3QgdGV4dCBmcm9tIGEgdmFsdWUgYXQgYSBzcGVjaWZpYyBKU09OIHBhdGguXG4qXG4qIFN1cHBvcnRzOlxuKiAtIFNpbXBsZSBwYXRoczogXCJmaWVsZDEuZmllbGQyXCJcbiogLSBBcnJheSBpbmRleGluZzogXCJbMF1cIiwgXCJbKl1cIiwgXCJbLTFdXCJcbiogLSBXaWxkY2FyZHM6IFwiKlwiXG4qIC0gTXVsdGktZmllbGQgc2VsZWN0aW9uOiBcIntmaWVsZDEsZmllbGQyfVwiXG4qIC0gTmVzdGVkIHBhdGhzIGluIG11bHRpLWZpZWxkOiBcIntmaWVsZDEsbmVzdGVkLmZpZWxkMn1cIlxuKi9cbmZ1bmN0aW9uIGdldFRleHRBdFBhdGgob2JqLCBwYXRoKSB7XG5cdGlmICghcGF0aCB8fCBwYXRoID09PSBcIiRcIikgcmV0dXJuIFtKU09OLnN0cmluZ2lmeShvYmosIG51bGwsIDIpXTtcblx0Y29uc3QgdG9rZW5zID0gQXJyYXkuaXNBcnJheShwYXRoKSA/IHBhdGggOiB0b2tlbml6ZVBhdGgocGF0aCk7XG5cdGZ1bmN0aW9uIGV4dHJhY3RGcm9tT2JqKG9iaiQxLCB0b2tlbnMkMSwgcG9zKSB7XG5cdFx0aWYgKHBvcyA+PSB0b2tlbnMkMS5sZW5ndGgpIHtcblx0XHRcdGlmICh0eXBlb2Ygb2JqJDEgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIG9iaiQxID09PSBcIm51bWJlclwiIHx8IHR5cGVvZiBvYmokMSA9PT0gXCJib29sZWFuXCIpIHJldHVybiBbU3RyaW5nKG9iaiQxKV07XG5cdFx0XHRpZiAob2JqJDEgPT09IG51bGwgfHwgb2JqJDEgPT09IHZvaWQgMCkgcmV0dXJuIFtdO1xuXHRcdFx0aWYgKEFycmF5LmlzQXJyYXkob2JqJDEpIHx8IHR5cGVvZiBvYmokMSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIFtKU09OLnN0cmluZ2lmeShvYmokMSwgbnVsbCwgMildO1xuXHRcdFx0cmV0dXJuIFtdO1xuXHRcdH1cblx0XHRjb25zdCB0b2tlbiA9IHRva2VucyQxW3Bvc107XG5cdFx0Y29uc3QgcmVzdWx0cyA9IFtdO1xuXHRcdGlmIChwb3MgPT09IDAgJiYgdG9rZW4gPT09IFwiJFwiKSByZXN1bHRzLnB1c2goSlNPTi5zdHJpbmdpZnkob2JqJDEsIG51bGwsIDIpKTtcblx0XHRpZiAodG9rZW4uc3RhcnRzV2l0aChcIltcIikgJiYgdG9rZW4uZW5kc1dpdGgoXCJdXCIpKSB7XG5cdFx0XHRpZiAoIUFycmF5LmlzQXJyYXkob2JqJDEpKSByZXR1cm4gW107XG5cdFx0XHRjb25zdCBpbmRleCA9IHRva2VuLnNsaWNlKDEsIC0xKTtcblx0XHRcdGlmIChpbmRleCA9PT0gXCIqXCIpIGZvciAoY29uc3QgaXRlbSBvZiBvYmokMSkgcmVzdWx0cy5wdXNoKC4uLmV4dHJhY3RGcm9tT2JqKGl0ZW0sIHRva2VucyQxLCBwb3MgKyAxKSk7XG5cdFx0XHRlbHNlIHRyeSB7XG5cdFx0XHRcdGxldCBpZHggPSBwYXJzZUludChpbmRleCwgMTApO1xuXHRcdFx0XHRpZiAoaWR4IDwgMCkgaWR4ID0gb2JqJDEubGVuZ3RoICsgaWR4O1xuXHRcdFx0XHRpZiAoaWR4ID49IDAgJiYgaWR4IDwgb2JqJDEubGVuZ3RoKSByZXN1bHRzLnB1c2goLi4uZXh0cmFjdEZyb21PYmoob2JqJDFbaWR4XSwgdG9rZW5zJDEsIHBvcyArIDEpKTtcblx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRyZXR1cm4gW107XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmICh0b2tlbi5zdGFydHNXaXRoKFwie1wiKSAmJiB0b2tlbi5lbmRzV2l0aChcIn1cIikpIHtcblx0XHRcdGlmICh0eXBlb2Ygb2JqJDEgIT09IFwib2JqZWN0XCIgfHwgb2JqJDEgPT09IG51bGwpIHJldHVybiBbXTtcblx0XHRcdGNvbnN0IGZpZWxkcyA9IHRva2VuLnNsaWNlKDEsIC0xKS5zcGxpdChcIixcIikubWFwKChmKSA9PiBmLnRyaW0oKSk7XG5cdFx0XHRmb3IgKGNvbnN0IGZpZWxkIG9mIGZpZWxkcykge1xuXHRcdFx0XHRjb25zdCBuZXN0ZWRUb2tlbnMgPSB0b2tlbml6ZVBhdGgoZmllbGQpO1xuXHRcdFx0XHRpZiAobmVzdGVkVG9rZW5zLmxlbmd0aCkge1xuXHRcdFx0XHRcdGxldCBjdXJyZW50T2JqID0gb2JqJDE7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBuZXN0ZWRUb2tlbiBvZiBuZXN0ZWRUb2tlbnMpIGlmIChjdXJyZW50T2JqICYmIHR5cGVvZiBjdXJyZW50T2JqID09PSBcIm9iamVjdFwiICYmIG5lc3RlZFRva2VuIGluIGN1cnJlbnRPYmopIGN1cnJlbnRPYmogPSBjdXJyZW50T2JqW25lc3RlZFRva2VuXTtcblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdGN1cnJlbnRPYmogPSB2b2lkIDA7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKGN1cnJlbnRPYmogIT09IHZvaWQgMCkge1xuXHRcdFx0XHRcdFx0aWYgKHR5cGVvZiBjdXJyZW50T2JqID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBjdXJyZW50T2JqID09PSBcIm51bWJlclwiIHx8IHR5cGVvZiBjdXJyZW50T2JqID09PSBcImJvb2xlYW5cIikgcmVzdWx0cy5wdXNoKFN0cmluZyhjdXJyZW50T2JqKSk7XG5cdFx0XHRcdFx0XHRlbHNlIGlmIChBcnJheS5pc0FycmF5KGN1cnJlbnRPYmopIHx8IHR5cGVvZiBjdXJyZW50T2JqID09PSBcIm9iamVjdFwiKSByZXN1bHRzLnB1c2goSlNPTi5zdHJpbmdpZnkoY3VycmVudE9iaiwgbnVsbCwgMikpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAodG9rZW4gPT09IFwiKlwiKSB7XG5cdFx0XHRpZiAoQXJyYXkuaXNBcnJheShvYmokMSkpIGZvciAoY29uc3QgaXRlbSBvZiBvYmokMSkgcmVzdWx0cy5wdXNoKC4uLmV4dHJhY3RGcm9tT2JqKGl0ZW0sIHRva2VucyQxLCBwb3MgKyAxKSk7XG5cdFx0XHRlbHNlIGlmICh0eXBlb2Ygb2JqJDEgPT09IFwib2JqZWN0XCIgJiYgb2JqJDEgIT09IG51bGwpIGZvciAoY29uc3QgdmFsdWUgb2YgT2JqZWN0LnZhbHVlcyhvYmokMSkpIHJlc3VsdHMucHVzaCguLi5leHRyYWN0RnJvbU9iaih2YWx1ZSwgdG9rZW5zJDEsIHBvcyArIDEpKTtcblx0XHR9IGVsc2UgaWYgKHR5cGVvZiBvYmokMSA9PT0gXCJvYmplY3RcIiAmJiBvYmokMSAhPT0gbnVsbCAmJiB0b2tlbiBpbiBvYmokMSkgcmVzdWx0cy5wdXNoKC4uLmV4dHJhY3RGcm9tT2JqKG9iaiQxW3Rva2VuXSwgdG9rZW5zJDEsIHBvcyArIDEpKTtcblx0XHRyZXR1cm4gcmVzdWx0cztcblx0fVxuXHRyZXR1cm4gZXh0cmFjdEZyb21PYmoob2JqLCB0b2tlbnMsIDApO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNvbXBhcmVWYWx1ZXMsIGdldFRleHRBdFBhdGgsIHRva2VuaXplUGF0aCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/store/utils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/parse.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/parse.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validate.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/validate.js\");\n\nfunction parse(uuid) {\n  if (!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n  let v;\n  const arr = new Uint8Array(16);\n\n  // Parse ########-....-....-....-............\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff;\n\n  // Parse ........-####-....-....-............\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff;\n\n  // Parse ........-....-####-....-............\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff;\n\n  // Parse ........-....-....-####-............\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff;\n\n  // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (parse);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3BhcnNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXFDO0FBQ3JDO0FBQ0EsT0FBTyx3REFBUTtBQUNmO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBZSxLQUFLIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3BhcnNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB2YWxpZGF0ZSBmcm9tICcuL3ZhbGlkYXRlLmpzJztcbmZ1bmN0aW9uIHBhcnNlKHV1aWQpIHtcbiAgaWYgKCF2YWxpZGF0ZSh1dWlkKSkge1xuICAgIHRocm93IFR5cGVFcnJvcignSW52YWxpZCBVVUlEJyk7XG4gIH1cbiAgbGV0IHY7XG4gIGNvbnN0IGFyciA9IG5ldyBVaW50OEFycmF5KDE2KTtcblxuICAvLyBQYXJzZSAjIyMjIyMjIy0uLi4uLS4uLi4tLi4uLi0uLi4uLi4uLi4uLi5cbiAgYXJyWzBdID0gKHYgPSBwYXJzZUludCh1dWlkLnNsaWNlKDAsIDgpLCAxNikpID4+PiAyNDtcbiAgYXJyWzFdID0gdiA+Pj4gMTYgJiAweGZmO1xuICBhcnJbMl0gPSB2ID4+PiA4ICYgMHhmZjtcbiAgYXJyWzNdID0gdiAmIDB4ZmY7XG5cbiAgLy8gUGFyc2UgLi4uLi4uLi4tIyMjIy0uLi4uLS4uLi4tLi4uLi4uLi4uLi4uXG4gIGFycls0XSA9ICh2ID0gcGFyc2VJbnQodXVpZC5zbGljZSg5LCAxMyksIDE2KSkgPj4+IDg7XG4gIGFycls1XSA9IHYgJiAweGZmO1xuXG4gIC8vIFBhcnNlIC4uLi4uLi4uLS4uLi4tIyMjIy0uLi4uLS4uLi4uLi4uLi4uLlxuICBhcnJbNl0gPSAodiA9IHBhcnNlSW50KHV1aWQuc2xpY2UoMTQsIDE4KSwgMTYpKSA+Pj4gODtcbiAgYXJyWzddID0gdiAmIDB4ZmY7XG5cbiAgLy8gUGFyc2UgLi4uLi4uLi4tLi4uLi0uLi4uLSMjIyMtLi4uLi4uLi4uLi4uXG4gIGFycls4XSA9ICh2ID0gcGFyc2VJbnQodXVpZC5zbGljZSgxOSwgMjMpLCAxNikpID4+PiA4O1xuICBhcnJbOV0gPSB2ICYgMHhmZjtcblxuICAvLyBQYXJzZSAuLi4uLi4uLi0uLi4uLS4uLi4tLi4uLi0jIyMjIyMjIyMjIyNcbiAgLy8gKFVzZSBcIi9cIiB0byBhdm9pZCAzMi1iaXQgdHJ1bmNhdGlvbiB3aGVuIGJpdC1zaGlmdGluZyBoaWdoLW9yZGVyIGJ5dGVzKVxuICBhcnJbMTBdID0gKHYgPSBwYXJzZUludCh1dWlkLnNsaWNlKDI0LCAzNiksIDE2KSkgLyAweDEwMDAwMDAwMDAwICYgMHhmZjtcbiAgYXJyWzExXSA9IHYgLyAweDEwMDAwMDAwMCAmIDB4ZmY7XG4gIGFyclsxMl0gPSB2ID4+PiAyNCAmIDB4ZmY7XG4gIGFyclsxM10gPSB2ID4+PiAxNiAmIDB4ZmY7XG4gIGFyclsxNF0gPSB2ID4+PiA4ICYgMHhmZjtcbiAgYXJyWzE1XSA9IHYgJiAweGZmO1xuICByZXR1cm4gYXJyO1xufVxuZXhwb3J0IGRlZmF1bHQgcGFyc2U7Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/parse.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/regex.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/regex.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3JlZ2V4LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxpRUFBZSxjQUFjLEVBQUUsVUFBVSxFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxVQUFVLEdBQUcsOEVBQThFIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3JlZ2V4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IC9eKD86WzAtOWEtZl17OH0tWzAtOWEtZl17NH0tWzEtOF1bMC05YS1mXXszfS1bODlhYl1bMC05YS1mXXszfS1bMC05YS1mXXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwfGZmZmZmZmZmLWZmZmYtZmZmZi1mZmZmLWZmZmZmZmZmZmZmZikkL2k7Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/regex.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/rng.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/rng.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ rng)\n/* harmony export */ });\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_crypto__WEBPACK_IMPORTED_MODULE_0__);\n\nconst rnds8Pool = new Uint8Array(256); // # of random values to pre-allocate\nlet poolPtr = rnds8Pool.length;\nfunction rng() {\n  if (poolPtr > rnds8Pool.length - 16) {\n    node_crypto__WEBPACK_IMPORTED_MODULE_0___default().randomFillSync(rnds8Pool);\n    poolPtr = 0;\n  }\n  return rnds8Pool.slice(poolPtr, poolPtr += 16);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3JuZy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBaUM7QUFDakMsdUNBQXVDO0FBQ3ZDO0FBQ2U7QUFDZjtBQUNBLElBQUksaUVBQXFCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3JuZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY3J5cHRvIGZyb20gJ25vZGU6Y3J5cHRvJztcbmNvbnN0IHJuZHM4UG9vbCA9IG5ldyBVaW50OEFycmF5KDI1Nik7IC8vICMgb2YgcmFuZG9tIHZhbHVlcyB0byBwcmUtYWxsb2NhdGVcbmxldCBwb29sUHRyID0gcm5kczhQb29sLmxlbmd0aDtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJuZygpIHtcbiAgaWYgKHBvb2xQdHIgPiBybmRzOFBvb2wubGVuZ3RoIC0gMTYpIHtcbiAgICBjcnlwdG8ucmFuZG9tRmlsbFN5bmMocm5kczhQb29sKTtcbiAgICBwb29sUHRyID0gMDtcbiAgfVxuICByZXR1cm4gcm5kczhQb29sLnNsaWNlKHBvb2xQdHIsIHBvb2xQdHIgKz0gMTYpO1xufSJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/rng.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/sha1.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/sha1.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_crypto__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction sha1(bytes) {\n  if (Array.isArray(bytes)) {\n    bytes = Buffer.from(bytes);\n  } else if (typeof bytes === 'string') {\n    bytes = Buffer.from(bytes, 'utf8');\n  }\n  return node_crypto__WEBPACK_IMPORTED_MODULE_0___default().createHash('sha1').update(bytes).digest();\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (sha1);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3NoYTEuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsU0FBUyw2REFBaUI7QUFDMUI7QUFDQSxpRUFBZSxJQUFJIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3NoYTEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyeXB0byBmcm9tICdub2RlOmNyeXB0byc7XG5mdW5jdGlvbiBzaGExKGJ5dGVzKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGJ5dGVzKSkge1xuICAgIGJ5dGVzID0gQnVmZmVyLmZyb20oYnl0ZXMpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBieXRlcyA9PT0gJ3N0cmluZycpIHtcbiAgICBieXRlcyA9IEJ1ZmZlci5mcm9tKGJ5dGVzLCAndXRmOCcpO1xuICB9XG4gIHJldHVybiBjcnlwdG8uY3JlYXRlSGFzaCgnc2hhMScpLnVwZGF0ZShieXRlcykuZGlnZXN0KCk7XG59XG5leHBvcnQgZGVmYXVsdCBzaGExOyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/sha1.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/stringify.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/stringify.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   unsafeStringify: () => (/* binding */ unsafeStringify)\n/* harmony export */ });\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validate.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/validate.js\");\n\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nfunction unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  //\n  // Note to future-self: No, you can't remove the `toLowerCase()` call.\n  // REF: https://github.com/uuidjs/uuid/pull/677#issuecomment-1757351351\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset);\n  // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n  if (!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n  return uuid;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (stringify);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3N0cmluZ2lmeS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUM7O0FBRXJDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsU0FBUztBQUN6QjtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyx3REFBUTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWUsU0FBUyIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoLWNoZWNrcG9pbnQvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS9zdHJpbmdpZnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHZhbGlkYXRlIGZyb20gJy4vdmFsaWRhdGUuanMnO1xuXG4vKipcbiAqIENvbnZlcnQgYXJyYXkgb2YgMTYgYnl0ZSB2YWx1ZXMgdG8gVVVJRCBzdHJpbmcgZm9ybWF0IG9mIHRoZSBmb3JtOlxuICogWFhYWFhYWFgtWFhYWC1YWFhYLVhYWFgtWFhYWFhYWFhYWFhYXG4gKi9cbmNvbnN0IGJ5dGVUb0hleCA9IFtdO1xuZm9yIChsZXQgaSA9IDA7IGkgPCAyNTY7ICsraSkge1xuICBieXRlVG9IZXgucHVzaCgoaSArIDB4MTAwKS50b1N0cmluZygxNikuc2xpY2UoMSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHVuc2FmZVN0cmluZ2lmeShhcnIsIG9mZnNldCA9IDApIHtcbiAgLy8gTm90ZTogQmUgY2FyZWZ1bCBlZGl0aW5nIHRoaXMgY29kZSEgIEl0J3MgYmVlbiB0dW5lZCBmb3IgcGVyZm9ybWFuY2VcbiAgLy8gYW5kIHdvcmtzIGluIHdheXMgeW91IG1heSBub3QgZXhwZWN0LiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkL3B1bGwvNDM0XG4gIC8vXG4gIC8vIE5vdGUgdG8gZnV0dXJlLXNlbGY6IE5vLCB5b3UgY2FuJ3QgcmVtb3ZlIHRoZSBgdG9Mb3dlckNhc2UoKWAgY2FsbC5cbiAgLy8gUkVGOiBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQvcHVsbC82NzcjaXNzdWVjb21tZW50LTE3NTczNTEzNTFcbiAgcmV0dXJuIChieXRlVG9IZXhbYXJyW29mZnNldCArIDBdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMV1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAyXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDNdXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA1XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDZdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgN11dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA4XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDldXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTBdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTFdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTJdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTNdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTRdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTVdXSkudG9Mb3dlckNhc2UoKTtcbn1cbmZ1bmN0aW9uIHN0cmluZ2lmeShhcnIsIG9mZnNldCA9IDApIHtcbiAgY29uc3QgdXVpZCA9IHVuc2FmZVN0cmluZ2lmeShhcnIsIG9mZnNldCk7XG4gIC8vIENvbnNpc3RlbmN5IGNoZWNrIGZvciB2YWxpZCBVVUlELiAgSWYgdGhpcyB0aHJvd3MsIGl0J3MgbGlrZWx5IGR1ZSB0byBvbmVcbiAgLy8gb2YgdGhlIGZvbGxvd2luZzpcbiAgLy8gLSBPbmUgb3IgbW9yZSBpbnB1dCBhcnJheSB2YWx1ZXMgZG9uJ3QgbWFwIHRvIGEgaGV4IG9jdGV0IChsZWFkaW5nIHRvXG4gIC8vIFwidW5kZWZpbmVkXCIgaW4gdGhlIHV1aWQpXG4gIC8vIC0gSW52YWxpZCBpbnB1dCB2YWx1ZXMgZm9yIHRoZSBSRkMgYHZlcnNpb25gIG9yIGB2YXJpYW50YCBmaWVsZHNcbiAgaWYgKCF2YWxpZGF0ZSh1dWlkKSkge1xuICAgIHRocm93IFR5cGVFcnJvcignU3RyaW5naWZpZWQgVVVJRCBpcyBpbnZhbGlkJyk7XG4gIH1cbiAgcmV0dXJuIHV1aWQ7XG59XG5leHBvcnQgZGVmYXVsdCBzdHJpbmdpZnk7Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/stringify.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/v1.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/v1.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _rng_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rng.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/rng.js\");\n/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stringify.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/stringify.js\");\n\n\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nlet _nodeId;\nlet _clockseq;\n\n// Previous uuid creation time\nlet _lastMSecs = 0;\nlet _lastNSecs = 0;\n\n// See https://github.com/uuidjs/uuid for API details\nfunction v1(options, buf, offset) {\n  let i = buf && offset || 0;\n  const b = buf || new Array(16);\n  options = options || {};\n  let node = options.node;\n  let clockseq = options.clockseq;\n\n  // v1 only: Use cached `node` and `clockseq` values\n  if (!options._v6) {\n    if (!node) {\n      node = _nodeId;\n    }\n    if (clockseq == null) {\n      clockseq = _clockseq;\n    }\n  }\n\n  // Handle cases where we need entropy.  We do this lazily to minimize issues\n  // related to insufficient system entropy.  See #189\n  if (node == null || clockseq == null) {\n    const seedBytes = options.random || (options.rng || _rng_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n\n    // Randomize node\n    if (node == null) {\n      node = [seedBytes[0], seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n\n      // v1 only: cache node value for reuse\n      if (!_nodeId && !options._v6) {\n        // per RFC4122 4.5: Set MAC multicast bit (v1 only)\n        node[0] |= 0x01; // Set multicast bit\n\n        _nodeId = node;\n      }\n    }\n\n    // Randomize clockseq\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n      if (_clockseq === undefined && !options._v6) {\n        _clockseq = clockseq;\n      }\n    }\n  }\n\n  // v1 & v6 timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so time is\n  // handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  let msecs = options.msecs !== undefined ? options.msecs : Date.now();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  let nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  const dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  const tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  const tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (let n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n  return buf || (0,_stringify_js__WEBPACK_IMPORTED_MODULE_1__.unsafeStringify)(b);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (v1);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3YxLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEyQjtBQUNzQjs7QUFFakQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCwrQ0FBRzs7QUFFM0Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qjs7QUFFekI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxvQ0FBb0M7QUFDcEM7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWtCLE9BQU87QUFDekI7QUFDQTtBQUNBLGdCQUFnQiw4REFBZTtBQUMvQjtBQUNBLGlFQUFlLEVBQUUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC1jaGVja3BvaW50L25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvdjEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHJuZyBmcm9tICcuL3JuZy5qcyc7XG5pbXBvcnQgeyB1bnNhZmVTdHJpbmdpZnkgfSBmcm9tICcuL3N0cmluZ2lmeS5qcyc7XG5cbi8vICoqYHYxKClgIC0gR2VuZXJhdGUgdGltZS1iYXNlZCBVVUlEKipcbi8vXG4vLyBJbnNwaXJlZCBieSBodHRwczovL2dpdGh1Yi5jb20vTGlvc0svVVVJRC5qc1xuLy8gYW5kIGh0dHA6Ly9kb2NzLnB5dGhvbi5vcmcvbGlicmFyeS91dWlkLmh0bWxcblxubGV0IF9ub2RlSWQ7XG5sZXQgX2Nsb2Nrc2VxO1xuXG4vLyBQcmV2aW91cyB1dWlkIGNyZWF0aW9uIHRpbWVcbmxldCBfbGFzdE1TZWNzID0gMDtcbmxldCBfbGFzdE5TZWNzID0gMDtcblxuLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZCBmb3IgQVBJIGRldGFpbHNcbmZ1bmN0aW9uIHYxKG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gIGxldCBpID0gYnVmICYmIG9mZnNldCB8fCAwO1xuICBjb25zdCBiID0gYnVmIHx8IG5ldyBBcnJheSgxNik7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBsZXQgbm9kZSA9IG9wdGlvbnMubm9kZTtcbiAgbGV0IGNsb2Nrc2VxID0gb3B0aW9ucy5jbG9ja3NlcTtcblxuICAvLyB2MSBvbmx5OiBVc2UgY2FjaGVkIGBub2RlYCBhbmQgYGNsb2Nrc2VxYCB2YWx1ZXNcbiAgaWYgKCFvcHRpb25zLl92Nikge1xuICAgIGlmICghbm9kZSkge1xuICAgICAgbm9kZSA9IF9ub2RlSWQ7XG4gICAgfVxuICAgIGlmIChjbG9ja3NlcSA9PSBudWxsKSB7XG4gICAgICBjbG9ja3NlcSA9IF9jbG9ja3NlcTtcbiAgICB9XG4gIH1cblxuICAvLyBIYW5kbGUgY2FzZXMgd2hlcmUgd2UgbmVlZCBlbnRyb3B5LiAgV2UgZG8gdGhpcyBsYXppbHkgdG8gbWluaW1pemUgaXNzdWVzXG4gIC8vIHJlbGF0ZWQgdG8gaW5zdWZmaWNpZW50IHN5c3RlbSBlbnRyb3B5LiAgU2VlICMxODlcbiAgaWYgKG5vZGUgPT0gbnVsbCB8fCBjbG9ja3NlcSA9PSBudWxsKSB7XG4gICAgY29uc3Qgc2VlZEJ5dGVzID0gb3B0aW9ucy5yYW5kb20gfHwgKG9wdGlvbnMucm5nIHx8IHJuZykoKTtcblxuICAgIC8vIFJhbmRvbWl6ZSBub2RlXG4gICAgaWYgKG5vZGUgPT0gbnVsbCkge1xuICAgICAgbm9kZSA9IFtzZWVkQnl0ZXNbMF0sIHNlZWRCeXRlc1sxXSwgc2VlZEJ5dGVzWzJdLCBzZWVkQnl0ZXNbM10sIHNlZWRCeXRlc1s0XSwgc2VlZEJ5dGVzWzVdXTtcblxuICAgICAgLy8gdjEgb25seTogY2FjaGUgbm9kZSB2YWx1ZSBmb3IgcmV1c2VcbiAgICAgIGlmICghX25vZGVJZCAmJiAhb3B0aW9ucy5fdjYpIHtcbiAgICAgICAgLy8gcGVyIFJGQzQxMjIgNC41OiBTZXQgTUFDIG11bHRpY2FzdCBiaXQgKHYxIG9ubHkpXG4gICAgICAgIG5vZGVbMF0gfD0gMHgwMTsgLy8gU2V0IG11bHRpY2FzdCBiaXRcblxuICAgICAgICBfbm9kZUlkID0gbm9kZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSYW5kb21pemUgY2xvY2tzZXFcbiAgICBpZiAoY2xvY2tzZXEgPT0gbnVsbCkge1xuICAgICAgLy8gUGVyIDQuMi4yLCByYW5kb21pemUgKDE0IGJpdCkgY2xvY2tzZXFcbiAgICAgIGNsb2Nrc2VxID0gKHNlZWRCeXRlc1s2XSA8PCA4IHwgc2VlZEJ5dGVzWzddKSAmIDB4M2ZmZjtcbiAgICAgIGlmIChfY2xvY2tzZXEgPT09IHVuZGVmaW5lZCAmJiAhb3B0aW9ucy5fdjYpIHtcbiAgICAgICAgX2Nsb2Nrc2VxID0gY2xvY2tzZXE7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gdjEgJiB2NiB0aW1lc3RhbXBzIGFyZSAxMDAgbmFuby1zZWNvbmQgdW5pdHMgc2luY2UgdGhlIEdyZWdvcmlhbiBlcG9jaCxcbiAgLy8gKDE1ODItMTAtMTUgMDA6MDApLiAgSlNOdW1iZXJzIGFyZW4ndCBwcmVjaXNlIGVub3VnaCBmb3IgdGhpcywgc28gdGltZSBpc1xuICAvLyBoYW5kbGVkIGludGVybmFsbHkgYXMgJ21zZWNzJyAoaW50ZWdlciBtaWxsaXNlY29uZHMpIGFuZCAnbnNlY3MnXG4gIC8vICgxMDAtbmFub3NlY29uZHMgb2Zmc2V0IGZyb20gbXNlY3MpIHNpbmNlIHVuaXggZXBvY2gsIDE5NzAtMDEtMDEgMDA6MDAuXG4gIGxldCBtc2VjcyA9IG9wdGlvbnMubXNlY3MgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubXNlY3MgOiBEYXRlLm5vdygpO1xuXG4gIC8vIFBlciA0LjIuMS4yLCB1c2UgY291bnQgb2YgdXVpZCdzIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGN1cnJlbnQgY2xvY2tcbiAgLy8gY3ljbGUgdG8gc2ltdWxhdGUgaGlnaGVyIHJlc29sdXRpb24gY2xvY2tcbiAgbGV0IG5zZWNzID0gb3B0aW9ucy5uc2VjcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5uc2VjcyA6IF9sYXN0TlNlY3MgKyAxO1xuXG4gIC8vIFRpbWUgc2luY2UgbGFzdCB1dWlkIGNyZWF0aW9uIChpbiBtc2VjcylcbiAgY29uc3QgZHQgPSBtc2VjcyAtIF9sYXN0TVNlY3MgKyAobnNlY3MgLSBfbGFzdE5TZWNzKSAvIDEwMDAwO1xuXG4gIC8vIFBlciA0LjIuMS4yLCBCdW1wIGNsb2Nrc2VxIG9uIGNsb2NrIHJlZ3Jlc3Npb25cbiAgaWYgKGR0IDwgMCAmJiBvcHRpb25zLmNsb2Nrc2VxID09PSB1bmRlZmluZWQpIHtcbiAgICBjbG9ja3NlcSA9IGNsb2Nrc2VxICsgMSAmIDB4M2ZmZjtcbiAgfVxuXG4gIC8vIFJlc2V0IG5zZWNzIGlmIGNsb2NrIHJlZ3Jlc3NlcyAobmV3IGNsb2Nrc2VxKSBvciB3ZSd2ZSBtb3ZlZCBvbnRvIGEgbmV3XG4gIC8vIHRpbWUgaW50ZXJ2YWxcbiAgaWYgKChkdCA8IDAgfHwgbXNlY3MgPiBfbGFzdE1TZWNzKSAmJiBvcHRpb25zLm5zZWNzID09PSB1bmRlZmluZWQpIHtcbiAgICBuc2VjcyA9IDA7XG4gIH1cblxuICAvLyBQZXIgNC4yLjEuMiBUaHJvdyBlcnJvciBpZiB0b28gbWFueSB1dWlkcyBhcmUgcmVxdWVzdGVkXG4gIGlmIChuc2VjcyA+PSAxMDAwMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcInV1aWQudjEoKTogQ2FuJ3QgY3JlYXRlIG1vcmUgdGhhbiAxME0gdXVpZHMvc2VjXCIpO1xuICB9XG4gIF9sYXN0TVNlY3MgPSBtc2VjcztcbiAgX2xhc3ROU2VjcyA9IG5zZWNzO1xuICBfY2xvY2tzZXEgPSBjbG9ja3NlcTtcblxuICAvLyBQZXIgNC4xLjQgLSBDb252ZXJ0IGZyb20gdW5peCBlcG9jaCB0byBHcmVnb3JpYW4gZXBvY2hcbiAgbXNlY3MgKz0gMTIyMTkyOTI4MDAwMDA7XG5cbiAgLy8gYHRpbWVfbG93YFxuICBjb25zdCB0bCA9ICgobXNlY3MgJiAweGZmZmZmZmYpICogMTAwMDAgKyBuc2VjcykgJSAweDEwMDAwMDAwMDtcbiAgYltpKytdID0gdGwgPj4+IDI0ICYgMHhmZjtcbiAgYltpKytdID0gdGwgPj4+IDE2ICYgMHhmZjtcbiAgYltpKytdID0gdGwgPj4+IDggJiAweGZmO1xuICBiW2krK10gPSB0bCAmIDB4ZmY7XG5cbiAgLy8gYHRpbWVfbWlkYFxuICBjb25zdCB0bWggPSBtc2VjcyAvIDB4MTAwMDAwMDAwICogMTAwMDAgJiAweGZmZmZmZmY7XG4gIGJbaSsrXSA9IHRtaCA+Pj4gOCAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRtaCAmIDB4ZmY7XG5cbiAgLy8gYHRpbWVfaGlnaF9hbmRfdmVyc2lvbmBcbiAgYltpKytdID0gdG1oID4+PiAyNCAmIDB4ZiB8IDB4MTA7IC8vIGluY2x1ZGUgdmVyc2lvblxuICBiW2krK10gPSB0bWggPj4+IDE2ICYgMHhmZjtcblxuICAvLyBgY2xvY2tfc2VxX2hpX2FuZF9yZXNlcnZlZGAgKFBlciA0LjIuMiAtIGluY2x1ZGUgdmFyaWFudClcbiAgYltpKytdID0gY2xvY2tzZXEgPj4+IDggfCAweDgwO1xuXG4gIC8vIGBjbG9ja19zZXFfbG93YFxuICBiW2krK10gPSBjbG9ja3NlcSAmIDB4ZmY7XG5cbiAgLy8gYG5vZGVgXG4gIGZvciAobGV0IG4gPSAwOyBuIDwgNjsgKytuKSB7XG4gICAgYltpICsgbl0gPSBub2RlW25dO1xuICB9XG4gIHJldHVybiBidWYgfHwgdW5zYWZlU3RyaW5naWZ5KGIpO1xufVxuZXhwb3J0IGRlZmF1bHQgdjE7Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/v1.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/v1ToV6.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/v1ToV6.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ v1ToV6)\n/* harmony export */ });\n/* harmony import */ var _parse_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./parse.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/parse.js\");\n/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stringify.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/stringify.js\");\n\n\n\n/**\n * Convert a v1 UUID to a v6 UUID\n *\n * @param {string|Uint8Array} uuid - The v1 UUID to convert to v6\n * @returns {string|Uint8Array} The v6 UUID as the same type as the `uuid` arg\n * (string or Uint8Array)\n */\nfunction v1ToV6(uuid) {\n  const v1Bytes = typeof uuid === 'string' ? (0,_parse_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(uuid) : uuid;\n  const v6Bytes = _v1ToV6(v1Bytes);\n  return typeof uuid === 'string' ? (0,_stringify_js__WEBPACK_IMPORTED_MODULE_1__.unsafeStringify)(v6Bytes) : v6Bytes;\n}\n\n// Do the field transformation needed for v1 -> v6\nfunction _v1ToV6(v1Bytes, randomize = false) {\n  return Uint8Array.of((v1Bytes[6] & 0x0f) << 4 | v1Bytes[7] >> 4 & 0x0f, (v1Bytes[7] & 0x0f) << 4 | (v1Bytes[4] & 0xf0) >> 4, (v1Bytes[4] & 0x0f) << 4 | (v1Bytes[5] & 0xf0) >> 4, (v1Bytes[5] & 0x0f) << 4 | (v1Bytes[0] & 0xf0) >> 4, (v1Bytes[0] & 0x0f) << 4 | (v1Bytes[1] & 0xf0) >> 4, (v1Bytes[1] & 0x0f) << 4 | (v1Bytes[2] & 0xf0) >> 4, 0x60 | v1Bytes[2] & 0x0f, v1Bytes[3], v1Bytes[8], v1Bytes[9], v1Bytes[10], v1Bytes[11], v1Bytes[12], v1Bytes[13], v1Bytes[14], v1Bytes[15]);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3YxVG9WNi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBK0I7QUFDa0I7O0FBRWpEO0FBQ0E7QUFDQTtBQUNBLFdBQVcsbUJBQW1CO0FBQzlCLGFBQWEsbUJBQW1CO0FBQ2hDO0FBQ0E7QUFDZTtBQUNmLDZDQUE2QyxxREFBSztBQUNsRDtBQUNBLG9DQUFvQyw4REFBZTtBQUNuRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoLWNoZWNrcG9pbnQvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS92MVRvVjYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhcnNlIGZyb20gJy4vcGFyc2UuanMnO1xuaW1wb3J0IHsgdW5zYWZlU3RyaW5naWZ5IH0gZnJvbSAnLi9zdHJpbmdpZnkuanMnO1xuXG4vKipcbiAqIENvbnZlcnQgYSB2MSBVVUlEIHRvIGEgdjYgVVVJRFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfFVpbnQ4QXJyYXl9IHV1aWQgLSBUaGUgdjEgVVVJRCB0byBjb252ZXJ0IHRvIHY2XG4gKiBAcmV0dXJucyB7c3RyaW5nfFVpbnQ4QXJyYXl9IFRoZSB2NiBVVUlEIGFzIHRoZSBzYW1lIHR5cGUgYXMgdGhlIGB1dWlkYCBhcmdcbiAqIChzdHJpbmcgb3IgVWludDhBcnJheSlcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdjFUb1Y2KHV1aWQpIHtcbiAgY29uc3QgdjFCeXRlcyA9IHR5cGVvZiB1dWlkID09PSAnc3RyaW5nJyA/IHBhcnNlKHV1aWQpIDogdXVpZDtcbiAgY29uc3QgdjZCeXRlcyA9IF92MVRvVjYodjFCeXRlcyk7XG4gIHJldHVybiB0eXBlb2YgdXVpZCA9PT0gJ3N0cmluZycgPyB1bnNhZmVTdHJpbmdpZnkodjZCeXRlcykgOiB2NkJ5dGVzO1xufVxuXG4vLyBEbyB0aGUgZmllbGQgdHJhbnNmb3JtYXRpb24gbmVlZGVkIGZvciB2MSAtPiB2NlxuZnVuY3Rpb24gX3YxVG9WNih2MUJ5dGVzLCByYW5kb21pemUgPSBmYWxzZSkge1xuICByZXR1cm4gVWludDhBcnJheS5vZigodjFCeXRlc1s2XSAmIDB4MGYpIDw8IDQgfCB2MUJ5dGVzWzddID4+IDQgJiAweDBmLCAodjFCeXRlc1s3XSAmIDB4MGYpIDw8IDQgfCAodjFCeXRlc1s0XSAmIDB4ZjApID4+IDQsICh2MUJ5dGVzWzRdICYgMHgwZikgPDwgNCB8ICh2MUJ5dGVzWzVdICYgMHhmMCkgPj4gNCwgKHYxQnl0ZXNbNV0gJiAweDBmKSA8PCA0IHwgKHYxQnl0ZXNbMF0gJiAweGYwKSA+PiA0LCAodjFCeXRlc1swXSAmIDB4MGYpIDw8IDQgfCAodjFCeXRlc1sxXSAmIDB4ZjApID4+IDQsICh2MUJ5dGVzWzFdICYgMHgwZikgPDwgNCB8ICh2MUJ5dGVzWzJdICYgMHhmMCkgPj4gNCwgMHg2MCB8IHYxQnl0ZXNbMl0gJiAweDBmLCB2MUJ5dGVzWzNdLCB2MUJ5dGVzWzhdLCB2MUJ5dGVzWzldLCB2MUJ5dGVzWzEwXSwgdjFCeXRlc1sxMV0sIHYxQnl0ZXNbMTJdLCB2MUJ5dGVzWzEzXSwgdjFCeXRlc1sxNF0sIHYxQnl0ZXNbMTVdKTtcbn0iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/v1ToV6.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/v35.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/v35.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DNS: () => (/* binding */ DNS),\n/* harmony export */   URL: () => (/* binding */ URL),\n/* harmony export */   \"default\": () => (/* binding */ v35)\n/* harmony export */ });\n/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stringify.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/stringify.js\");\n/* harmony import */ var _parse_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./parse.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/parse.js\");\n\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  const bytes = [];\n  for (let i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n  return bytes;\n}\nconst DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nconst URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nfunction v35(name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    var _namespace;\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n    if (typeof namespace === 'string') {\n      namespace = (0,_parse_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(namespace);\n    }\n    if (((_namespace = namespace) === null || _namespace === void 0 ? void 0 : _namespace.length) !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    }\n\n    // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n    let bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n    if (buf) {\n      offset = offset || 0;\n      for (let i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n      return buf;\n    }\n    return (0,_stringify_js__WEBPACK_IMPORTED_MODULE_1__.unsafeStringify)(bytes);\n  }\n\n  // Function#name is not settable on some platforms (#270)\n  try {\n    generateUUID.name = name;\n  } catch (err) {}\n\n  // For CommonJS default export support\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3YzNS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFpRDtBQUNsQjtBQUMvQjtBQUNBLDJDQUEyQzs7QUFFM0M7QUFDQSxrQkFBa0IsZ0JBQWdCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDQTtBQUNRO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHFEQUFLO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsUUFBUTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsOERBQWU7QUFDMUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3YzNS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1bnNhZmVTdHJpbmdpZnkgfSBmcm9tICcuL3N0cmluZ2lmeS5qcyc7XG5pbXBvcnQgcGFyc2UgZnJvbSAnLi9wYXJzZS5qcyc7XG5mdW5jdGlvbiBzdHJpbmdUb0J5dGVzKHN0cikge1xuICBzdHIgPSB1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoc3RyKSk7IC8vIFVURjggZXNjYXBlXG5cbiAgY29uc3QgYnl0ZXMgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHtcbiAgICBieXRlcy5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpKTtcbiAgfVxuICByZXR1cm4gYnl0ZXM7XG59XG5leHBvcnQgY29uc3QgRE5TID0gJzZiYTdiODEwLTlkYWQtMTFkMS04MGI0LTAwYzA0ZmQ0MzBjOCc7XG5leHBvcnQgY29uc3QgVVJMID0gJzZiYTdiODExLTlkYWQtMTFkMS04MGI0LTAwYzA0ZmQ0MzBjOCc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB2MzUobmFtZSwgdmVyc2lvbiwgaGFzaGZ1bmMpIHtcbiAgZnVuY3Rpb24gZ2VuZXJhdGVVVUlEKHZhbHVlLCBuYW1lc3BhY2UsIGJ1Ziwgb2Zmc2V0KSB7XG4gICAgdmFyIF9uYW1lc3BhY2U7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHZhbHVlID0gc3RyaW5nVG9CeXRlcyh2YWx1ZSk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgbmFtZXNwYWNlID09PSAnc3RyaW5nJykge1xuICAgICAgbmFtZXNwYWNlID0gcGFyc2UobmFtZXNwYWNlKTtcbiAgICB9XG4gICAgaWYgKCgoX25hbWVzcGFjZSA9IG5hbWVzcGFjZSkgPT09IG51bGwgfHwgX25hbWVzcGFjZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX25hbWVzcGFjZS5sZW5ndGgpICE9PSAxNikge1xuICAgICAgdGhyb3cgVHlwZUVycm9yKCdOYW1lc3BhY2UgbXVzdCBiZSBhcnJheS1saWtlICgxNiBpdGVyYWJsZSBpbnRlZ2VyIHZhbHVlcywgMC0yNTUpJyk7XG4gICAgfVxuXG4gICAgLy8gQ29tcHV0ZSBoYXNoIG9mIG5hbWVzcGFjZSBhbmQgdmFsdWUsIFBlciA0LjNcbiAgICAvLyBGdXR1cmU6IFVzZSBzcHJlYWQgc3ludGF4IHdoZW4gc3VwcG9ydGVkIG9uIGFsbCBwbGF0Zm9ybXMsIGUuZy4gYGJ5dGVzID1cbiAgICAvLyBoYXNoZnVuYyhbLi4ubmFtZXNwYWNlLCAuLi4gdmFsdWVdKWBcbiAgICBsZXQgYnl0ZXMgPSBuZXcgVWludDhBcnJheSgxNiArIHZhbHVlLmxlbmd0aCk7XG4gICAgYnl0ZXMuc2V0KG5hbWVzcGFjZSk7XG4gICAgYnl0ZXMuc2V0KHZhbHVlLCBuYW1lc3BhY2UubGVuZ3RoKTtcbiAgICBieXRlcyA9IGhhc2hmdW5jKGJ5dGVzKTtcbiAgICBieXRlc1s2XSA9IGJ5dGVzWzZdICYgMHgwZiB8IHZlcnNpb247XG4gICAgYnl0ZXNbOF0gPSBieXRlc1s4XSAmIDB4M2YgfCAweDgwO1xuICAgIGlmIChidWYpIHtcbiAgICAgIG9mZnNldCA9IG9mZnNldCB8fCAwO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgKytpKSB7XG4gICAgICAgIGJ1ZltvZmZzZXQgKyBpXSA9IGJ5dGVzW2ldO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJ1ZjtcbiAgICB9XG4gICAgcmV0dXJuIHVuc2FmZVN0cmluZ2lmeShieXRlcyk7XG4gIH1cblxuICAvLyBGdW5jdGlvbiNuYW1lIGlzIG5vdCBzZXR0YWJsZSBvbiBzb21lIHBsYXRmb3JtcyAoIzI3MClcbiAgdHJ5IHtcbiAgICBnZW5lcmF0ZVVVSUQubmFtZSA9IG5hbWU7XG4gIH0gY2F0Y2ggKGVycikge31cblxuICAvLyBGb3IgQ29tbW9uSlMgZGVmYXVsdCBleHBvcnQgc3VwcG9ydFxuICBnZW5lcmF0ZVVVSUQuRE5TID0gRE5TO1xuICBnZW5lcmF0ZVVVSUQuVVJMID0gVVJMO1xuICByZXR1cm4gZ2VuZXJhdGVVVUlEO1xufSJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/v35.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/v5.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/v5.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _v35_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./v35.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/v35.js\");\n/* harmony import */ var _sha1_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sha1.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/sha1.js\");\n\n\nconst v5 = (0,_v35_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('v5', 0x50, _sha1_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (v5);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3Y1LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEyQjtBQUNFO0FBQzdCLFdBQVcsbURBQUcsYUFBYSxnREFBSTtBQUMvQixpRUFBZSxFQUFFIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3Y1LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB2MzUgZnJvbSAnLi92MzUuanMnO1xuaW1wb3J0IHNoYTEgZnJvbSAnLi9zaGExLmpzJztcbmNvbnN0IHY1ID0gdjM1KCd2NScsIDB4NTAsIHNoYTEpO1xuZXhwb3J0IGRlZmF1bHQgdjU7Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/v5.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/v6.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/v6.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ v6)\n/* harmony export */ });\n/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./stringify.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/stringify.js\");\n/* harmony import */ var _v1_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./v1.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/v1.js\");\n/* harmony import */ var _v1ToV6_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./v1ToV6.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/v1ToV6.js\");\n\n\n\n\n/**\n *\n * @param {object} options\n * @param {Uint8Array=} buf\n * @param {number=} offset\n * @returns\n */\nfunction v6(options = {}, buf, offset = 0) {\n  // v6 is v1 with different field layout, so we start with a v1 UUID, albeit\n  // with slightly different behavior around how the clock_seq and node fields\n  // are randomized, which is why we call v1 with _v6: true.\n  let bytes = (0,_v1_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n    ...options,\n    _v6: true\n  }, new Uint8Array(16));\n\n  // Reorder the fields to v6 layout.\n  bytes = (0,_v1ToV6_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(bytes);\n\n  // Return as a byte array if requested\n  if (buf) {\n    for (let i = 0; i < 16; i++) {\n      buf[offset + i] = bytes[i];\n    }\n    return buf;\n  }\n  return (0,_stringify_js__WEBPACK_IMPORTED_MODULE_2__.unsafeStringify)(bytes);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3Y2LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBaUQ7QUFDeEI7QUFDUTs7QUFFakM7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLGFBQWE7QUFDeEIsV0FBVyxTQUFTO0FBQ3BCO0FBQ0E7QUFDZSx3QkFBd0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsY0FBYyxrREFBRTtBQUNoQjtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLFVBQVUsc0RBQU07O0FBRWhCO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsOERBQWU7QUFDeEIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC1jaGVja3BvaW50L25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvdjYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdW5zYWZlU3RyaW5naWZ5IH0gZnJvbSAnLi9zdHJpbmdpZnkuanMnO1xuaW1wb3J0IHYxIGZyb20gJy4vdjEuanMnO1xuaW1wb3J0IHYxVG9WNiBmcm9tICcuL3YxVG9WNi5qcyc7XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXk9fSBidWZcbiAqIEBwYXJhbSB7bnVtYmVyPX0gb2Zmc2V0XG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB2NihvcHRpb25zID0ge30sIGJ1Ziwgb2Zmc2V0ID0gMCkge1xuICAvLyB2NiBpcyB2MSB3aXRoIGRpZmZlcmVudCBmaWVsZCBsYXlvdXQsIHNvIHdlIHN0YXJ0IHdpdGggYSB2MSBVVUlELCBhbGJlaXRcbiAgLy8gd2l0aCBzbGlnaHRseSBkaWZmZXJlbnQgYmVoYXZpb3IgYXJvdW5kIGhvdyB0aGUgY2xvY2tfc2VxIGFuZCBub2RlIGZpZWxkc1xuICAvLyBhcmUgcmFuZG9taXplZCwgd2hpY2ggaXMgd2h5IHdlIGNhbGwgdjEgd2l0aCBfdjY6IHRydWUuXG4gIGxldCBieXRlcyA9IHYxKHtcbiAgICAuLi5vcHRpb25zLFxuICAgIF92NjogdHJ1ZVxuICB9LCBuZXcgVWludDhBcnJheSgxNikpO1xuXG4gIC8vIFJlb3JkZXIgdGhlIGZpZWxkcyB0byB2NiBsYXlvdXQuXG4gIGJ5dGVzID0gdjFUb1Y2KGJ5dGVzKTtcblxuICAvLyBSZXR1cm4gYXMgYSBieXRlIGFycmF5IGlmIHJlcXVlc3RlZFxuICBpZiAoYnVmKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XG4gICAgICBidWZbb2Zmc2V0ICsgaV0gPSBieXRlc1tpXTtcbiAgICB9XG4gICAgcmV0dXJuIGJ1ZjtcbiAgfVxuICByZXR1cm4gdW5zYWZlU3RyaW5naWZ5KGJ5dGVzKTtcbn0iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/v6.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/validate.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/validate.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _regex_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./regex.js */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/regex.js\");\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && _regex_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].test(uuid);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (validate);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3ZhbGlkYXRlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQStCO0FBQy9CO0FBQ0EscUNBQXFDLGlEQUFLO0FBQzFDO0FBQ0EsaUVBQWUsUUFBUSIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoLWNoZWNrcG9pbnQvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS92YWxpZGF0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUkVHRVggZnJvbSAnLi9yZWdleC5qcyc7XG5mdW5jdGlvbiB2YWxpZGF0ZSh1dWlkKSB7XG4gIHJldHVybiB0eXBlb2YgdXVpZCA9PT0gJ3N0cmluZycgJiYgUkVHRVgudGVzdCh1dWlkKTtcbn1cbmV4cG9ydCBkZWZhdWx0IHZhbGlkYXRlOyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-checkpoint/node_modules/uuid/dist/esm-node/validate.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/dist/client.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/dist/client.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AssistantsClient: () => (/* binding */ AssistantsClient),\n/* harmony export */   Client: () => (/* binding */ Client),\n/* harmony export */   CronsClient: () => (/* binding */ CronsClient),\n/* harmony export */   RunsClient: () => (/* binding */ RunsClient),\n/* harmony export */   StoreClient: () => (/* binding */ StoreClient),\n/* harmony export */   ThreadsClient: () => (/* binding */ ThreadsClient),\n/* harmony export */   getApiKey: () => (/* binding */ getApiKey),\n/* harmony export */   getClientConfigHash: () => (/* binding */ getClientConfigHash)\n/* harmony export */ });\n/* harmony import */ var _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/async_caller.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/utils/async_caller.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/env.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/utils/env.js\");\n/* harmony import */ var _utils_signals_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/signals.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/utils/signals.js\");\n/* harmony import */ var _utils_sse_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/sse.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/utils/sse.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/stream.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/utils/stream.js\");\n\n\n\n\n\n\n//#region src/client.ts\nfunction* iterateHeaders(headers) {\n\tlet iter;\n\tlet shouldClear = false;\n\tif (headers instanceof Headers) {\n\t\tconst entries = [];\n\t\theaders.forEach((value, name) => {\n\t\t\tentries.push([name, value]);\n\t\t});\n\t\titer = entries;\n\t} else if (Array.isArray(headers)) iter = headers;\n\telse {\n\t\tshouldClear = true;\n\t\titer = Object.entries(headers ?? {});\n\t}\n\tfor (const item of iter) {\n\t\tconst name = item[0];\n\t\tif (typeof name !== \"string\") throw new TypeError(`Expected header name to be a string, got ${typeof name}`);\n\t\tconst values = Array.isArray(item[1]) ? item[1] : [item[1]];\n\t\tlet didClear = false;\n\t\tfor (const value of values) {\n\t\t\tif (value === void 0) continue;\n\t\t\tif (shouldClear && !didClear) {\n\t\t\t\tdidClear = true;\n\t\t\t\tyield [name, null];\n\t\t\t}\n\t\t\tyield [name, value];\n\t\t}\n\t}\n}\nfunction mergeHeaders(...headerObjects) {\n\tconst outputHeaders = new Headers();\n\tfor (const headers of headerObjects) {\n\t\tif (!headers) continue;\n\t\tfor (const [name, value] of iterateHeaders(headers)) if (value === null) outputHeaders.delete(name);\n\t\telse outputHeaders.append(name, value);\n\t}\n\tconst headerEntries = [];\n\toutputHeaders.forEach((value, name) => {\n\t\theaderEntries.push([name, value]);\n\t});\n\treturn Object.fromEntries(headerEntries);\n}\n/**\n* Get the API key from the environment.\n* Precedence:\n*   1. explicit argument (if string)\n*   2. LANGGRAPH_API_KEY\n*   3. LANGSMITH_API_KEY\n*   4. LANGCHAIN_API_KEY\n*\n* @param apiKey - API key provided as an argument. If null, skips environment lookup. If undefined, tries environment.\n* @returns The API key if found, otherwise undefined\n*/\nfunction getApiKey(apiKey) {\n\tif (apiKey === null) return;\n\tif (apiKey) return apiKey;\n\tfor (const prefix of [\n\t\t\"LANGGRAPH\",\n\t\t\"LANGSMITH\",\n\t\t\"LANGCHAIN\"\n\t]) {\n\t\tconst envKey = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(`${prefix}_API_KEY`);\n\t\tif (envKey) return envKey.trim().replace(/^[\"']|[\"']$/g, \"\");\n\t}\n}\nconst REGEX_RUN_METADATA = /(\\/threads\\/(?<thread_id>.+))?\\/runs\\/(?<run_id>.+)/;\nfunction getRunMetadataFromResponse(response) {\n\tconst contentLocation = response.headers.get(\"Content-Location\");\n\tif (!contentLocation) return void 0;\n\tconst match = REGEX_RUN_METADATA.exec(contentLocation);\n\tif (!match?.groups?.run_id) return void 0;\n\treturn {\n\t\trun_id: match.groups.run_id,\n\t\tthread_id: match.groups.thread_id || void 0\n\t};\n}\nvar BaseClient = class {\n\tasyncCaller;\n\ttimeoutMs;\n\tapiUrl;\n\tdefaultHeaders;\n\tonRequest;\n\tconstructor(config) {\n\t\tconst callerOptions = {\n\t\t\tmaxRetries: 4,\n\t\t\tmaxConcurrency: 4,\n\t\t\t...config?.callerOptions\n\t\t};\n\t\tlet defaultApiUrl = \"http://localhost:8123\";\n\t\tif (!config?.apiUrl && typeof globalThis === \"object\" && globalThis != null) {\n\t\t\tconst fetchSmb = Symbol.for(\"langgraph_api:fetch\");\n\t\t\tconst urlSmb = Symbol.for(\"langgraph_api:url\");\n\t\t\tconst global = globalThis;\n\t\t\tif (global[fetchSmb]) callerOptions.fetch ??= global[fetchSmb];\n\t\t\tif (global[urlSmb]) defaultApiUrl = global[urlSmb];\n\t\t}\n\t\tthis.asyncCaller = new _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_0__.AsyncCaller(callerOptions);\n\t\tthis.timeoutMs = config?.timeoutMs;\n\t\tthis.apiUrl = config?.apiUrl?.replace(/\\/$/, \"\") || defaultApiUrl;\n\t\tthis.defaultHeaders = config?.defaultHeaders || {};\n\t\tthis.onRequest = config?.onRequest;\n\t\tconst apiKey = getApiKey(config?.apiKey);\n\t\tif (apiKey) this.defaultHeaders[\"x-api-key\"] = apiKey;\n\t}\n\tprepareFetchOptions(path, options) {\n\t\tconst mutatedOptions = {\n\t\t\t...options,\n\t\t\theaders: mergeHeaders(this.defaultHeaders, options?.headers)\n\t\t};\n\t\tif (mutatedOptions.json) {\n\t\t\tmutatedOptions.body = JSON.stringify(mutatedOptions.json);\n\t\t\tmutatedOptions.headers = mergeHeaders(mutatedOptions.headers, { \"content-type\": \"application/json\" });\n\t\t\tdelete mutatedOptions.json;\n\t\t}\n\t\tif (mutatedOptions.withResponse) delete mutatedOptions.withResponse;\n\t\tlet timeoutSignal = null;\n\t\tif (typeof options?.timeoutMs !== \"undefined\") {\n\t\t\tif (options.timeoutMs != null) timeoutSignal = AbortSignal.timeout(options.timeoutMs);\n\t\t} else if (this.timeoutMs != null) timeoutSignal = AbortSignal.timeout(this.timeoutMs);\n\t\tmutatedOptions.signal = (0,_utils_signals_js__WEBPACK_IMPORTED_MODULE_2__.mergeSignals)(timeoutSignal, mutatedOptions.signal);\n\t\tconst targetUrl = new URL(`${this.apiUrl}${path}`);\n\t\tif (mutatedOptions.params) {\n\t\t\tfor (const [key, value] of Object.entries(mutatedOptions.params)) {\n\t\t\t\tif (value == null) continue;\n\t\t\t\tconst strValue = typeof value === \"string\" || typeof value === \"number\" ? value.toString() : JSON.stringify(value);\n\t\t\t\ttargetUrl.searchParams.append(key, strValue);\n\t\t\t}\n\t\t\tdelete mutatedOptions.params;\n\t\t}\n\t\treturn [targetUrl, mutatedOptions];\n\t}\n\tasync fetch(path, options) {\n\t\tconst [url, init] = this.prepareFetchOptions(path, options);\n\t\tlet finalInit = init;\n\t\tif (this.onRequest) finalInit = await this.onRequest(url, init);\n\t\tconst response = await this.asyncCaller.fetch(url, finalInit);\n\t\tconst body = (() => {\n\t\t\tif (response.status === 202 || response.status === 204) return;\n\t\t\treturn response.json();\n\t\t})();\n\t\tif (options?.withResponse) return [await body, response];\n\t\treturn body;\n\t}\n\t/**\n\t* Protected helper for streaming with automatic retry logic.\n\t* Handles both initial requests and reconnections with SSE.\n\t*/\n\tasync *streamWithRetry(config) {\n\t\tconst makeRequest = async (reconnectParams) => {\n\t\t\tconst requestEndpoint = reconnectParams?.reconnectPath || config.endpoint;\n\t\t\tconst isReconnect = !!reconnectParams?.lastEventId;\n\t\t\tconst method = isReconnect ? \"GET\" : config.method || \"GET\";\n\t\t\tconst requestHeaders = isReconnect && reconnectParams?.lastEventId ? {\n\t\t\t\t...config.headers,\n\t\t\t\t\"Last-Event-ID\": reconnectParams.lastEventId\n\t\t\t} : config.headers;\n\t\t\tlet [url, init] = this.prepareFetchOptions(requestEndpoint, {\n\t\t\t\tmethod,\n\t\t\t\ttimeoutMs: null,\n\t\t\t\tsignal: config.signal,\n\t\t\t\theaders: requestHeaders,\n\t\t\t\tparams: config.params,\n\t\t\t\tjson: isReconnect ? void 0 : config.json\n\t\t\t});\n\t\t\tif (this.onRequest != null) init = await this.onRequest(url, init);\n\t\t\tconst response = await this.asyncCaller.fetch(url, init);\n\t\t\tif (!isReconnect && config.onInitialResponse) await config.onInitialResponse(response);\n\t\t\treturn {\n\t\t\t\tresponse,\n\t\t\t\tstream: (response.body || new ReadableStream({ start: (ctrl) => ctrl.close() })).pipeThrough((0,_utils_sse_js__WEBPACK_IMPORTED_MODULE_3__.BytesLineDecoder)()).pipeThrough((0,_utils_sse_js__WEBPACK_IMPORTED_MODULE_3__.SSEDecoder)())\n\t\t\t};\n\t\t};\n\t\tyield* (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.streamWithRetry)(makeRequest, {\n\t\t\tmaxRetries: config.maxRetries ?? 5,\n\t\t\tsignal: config.signal,\n\t\t\tonReconnect: config.onReconnect\n\t\t});\n\t}\n};\nvar CronsClient = class extends BaseClient {\n\t/**\n\t*\n\t* @param threadId The ID of the thread.\n\t* @param assistantId Assistant ID to use for this cron job.\n\t* @param payload Payload for creating a cron job.\n\t* @returns The created background run.\n\t*/\n\tasync createForThread(threadId, assistantId, payload) {\n\t\tconst json = {\n\t\t\tschedule: payload?.schedule,\n\t\t\tinput: payload?.input,\n\t\t\tconfig: payload?.config,\n\t\t\tcontext: payload?.context,\n\t\t\tmetadata: payload?.metadata,\n\t\t\tassistant_id: assistantId,\n\t\t\tinterrupt_before: payload?.interruptBefore,\n\t\t\tinterrupt_after: payload?.interruptAfter,\n\t\t\twebhook: payload?.webhook,\n\t\t\tmultitask_strategy: payload?.multitaskStrategy,\n\t\t\tif_not_exists: payload?.ifNotExists,\n\t\t\tcheckpoint_during: payload?.checkpointDuring,\n\t\t\tdurability: payload?.durability\n\t\t};\n\t\treturn this.fetch(`/threads/${threadId}/runs/crons`, {\n\t\t\tmethod: \"POST\",\n\t\t\tjson,\n\t\t\tsignal: payload?.signal\n\t\t});\n\t}\n\t/**\n\t*\n\t* @param assistantId Assistant ID to use for this cron job.\n\t* @param payload Payload for creating a cron job.\n\t* @returns\n\t*/\n\tasync create(assistantId, payload) {\n\t\tconst json = {\n\t\t\tschedule: payload?.schedule,\n\t\t\tinput: payload?.input,\n\t\t\tconfig: payload?.config,\n\t\t\tcontext: payload?.context,\n\t\t\tmetadata: payload?.metadata,\n\t\t\tassistant_id: assistantId,\n\t\t\tinterrupt_before: payload?.interruptBefore,\n\t\t\tinterrupt_after: payload?.interruptAfter,\n\t\t\twebhook: payload?.webhook,\n\t\t\ton_run_completed: payload?.onRunCompleted,\n\t\t\tmultitask_strategy: payload?.multitaskStrategy,\n\t\t\tif_not_exists: payload?.ifNotExists,\n\t\t\tcheckpoint_during: payload?.checkpointDuring,\n\t\t\tdurability: payload?.durability\n\t\t};\n\t\treturn this.fetch(`/runs/crons`, {\n\t\t\tmethod: \"POST\",\n\t\t\tjson,\n\t\t\tsignal: payload?.signal\n\t\t});\n\t}\n\t/**\n\t*\n\t* @param cronId Cron ID of Cron job to delete.\n\t*/\n\tasync delete(cronId, options) {\n\t\tawait this.fetch(`/runs/crons/${cronId}`, {\n\t\t\tmethod: \"DELETE\",\n\t\t\tsignal: options?.signal\n\t\t});\n\t}\n\t/**\n\t*\n\t* @param query Query options.\n\t* @returns List of crons.\n\t*/\n\tasync search(query) {\n\t\treturn this.fetch(\"/runs/crons/search\", {\n\t\t\tmethod: \"POST\",\n\t\t\tjson: {\n\t\t\t\tassistant_id: query?.assistantId ?? void 0,\n\t\t\t\tthread_id: query?.threadId ?? void 0,\n\t\t\t\tlimit: query?.limit ?? 10,\n\t\t\t\toffset: query?.offset ?? 0,\n\t\t\t\tsort_by: query?.sortBy ?? void 0,\n\t\t\t\tsort_order: query?.sortOrder ?? void 0,\n\t\t\t\tselect: query?.select ?? void 0\n\t\t\t},\n\t\t\tsignal: query?.signal\n\t\t});\n\t}\n\t/**\n\t* Count cron jobs matching filters.\n\t*\n\t* @param query.assistantId Assistant ID to filter by.\n\t* @param query.threadId Thread ID to filter by.\n\t* @returns Number of cron jobs matching the criteria.\n\t*/\n\tasync count(query) {\n\t\treturn this.fetch(`/runs/crons/count`, {\n\t\t\tmethod: \"POST\",\n\t\t\tjson: {\n\t\t\t\tassistant_id: query?.assistantId ?? void 0,\n\t\t\t\tthread_id: query?.threadId ?? void 0\n\t\t\t},\n\t\t\tsignal: query?.signal\n\t\t});\n\t}\n};\nvar AssistantsClient = class extends BaseClient {\n\t/**\n\t* Get an assistant by ID.\n\t*\n\t* @param assistantId The ID of the assistant.\n\t* @returns Assistant\n\t*/\n\tasync get(assistantId, options) {\n\t\treturn this.fetch(`/assistants/${assistantId}`, { signal: options?.signal });\n\t}\n\t/**\n\t* Get the JSON representation of the graph assigned to a runnable\n\t* @param assistantId The ID of the assistant.\n\t* @param options.xray Whether to include subgraphs in the serialized graph representation. If an integer value is provided, only subgraphs with a depth less than or equal to the value will be included.\n\t* @returns Serialized graph\n\t*/\n\tasync getGraph(assistantId, options) {\n\t\treturn this.fetch(`/assistants/${assistantId}/graph`, {\n\t\t\tparams: { xray: options?.xray },\n\t\t\tsignal: options?.signal\n\t\t});\n\t}\n\t/**\n\t* Get the state and config schema of the graph assigned to a runnable\n\t* @param assistantId The ID of the assistant.\n\t* @returns Graph schema\n\t*/\n\tasync getSchemas(assistantId, options) {\n\t\treturn this.fetch(`/assistants/${assistantId}/schemas`, { signal: options?.signal });\n\t}\n\t/**\n\t* Get the schemas of an assistant by ID.\n\t*\n\t* @param assistantId The ID of the assistant to get the schema of.\n\t* @param options Additional options for getting subgraphs, such as namespace or recursion extraction.\n\t* @returns The subgraphs of the assistant.\n\t*/\n\tasync getSubgraphs(assistantId, options) {\n\t\tif (options?.namespace) return this.fetch(`/assistants/${assistantId}/subgraphs/${options.namespace}`, {\n\t\t\tparams: { recurse: options?.recurse },\n\t\t\tsignal: options?.signal\n\t\t});\n\t\treturn this.fetch(`/assistants/${assistantId}/subgraphs`, {\n\t\t\tparams: { recurse: options?.recurse },\n\t\t\tsignal: options?.signal\n\t\t});\n\t}\n\t/**\n\t* Create a new assistant.\n\t* @param payload Payload for creating an assistant.\n\t* @returns The created assistant.\n\t*/\n\tasync create(payload) {\n\t\treturn this.fetch(\"/assistants\", {\n\t\t\tmethod: \"POST\",\n\t\t\tjson: {\n\t\t\t\tgraph_id: payload.graphId,\n\t\t\t\tconfig: payload.config,\n\t\t\t\tcontext: payload.context,\n\t\t\t\tmetadata: payload.metadata,\n\t\t\t\tassistant_id: payload.assistantId,\n\t\t\t\tif_exists: payload.ifExists,\n\t\t\t\tname: payload.name,\n\t\t\t\tdescription: payload.description\n\t\t\t},\n\t\t\tsignal: payload.signal\n\t\t});\n\t}\n\t/**\n\t* Update an assistant.\n\t* @param assistantId ID of the assistant.\n\t* @param payload Payload for updating the assistant.\n\t* @returns The updated assistant.\n\t*/\n\tasync update(assistantId, payload) {\n\t\treturn this.fetch(`/assistants/${assistantId}`, {\n\t\t\tmethod: \"PATCH\",\n\t\t\tjson: {\n\t\t\t\tgraph_id: payload.graphId,\n\t\t\t\tconfig: payload.config,\n\t\t\t\tcontext: payload.context,\n\t\t\t\tmetadata: payload.metadata,\n\t\t\t\tname: payload.name,\n\t\t\t\tdescription: payload.description\n\t\t\t},\n\t\t\tsignal: payload.signal\n\t\t});\n\t}\n\t/**\n\t* Delete an assistant.\n\t*\n\t* @param assistantId ID of the assistant.\n\t* @param deleteThreads If true, delete all threads with `metadata.assistant_id` equal to `assistantId`. Defaults to false.\n\t*/\n\tasync delete(assistantId, options) {\n\t\treturn this.fetch(`/assistants/${assistantId}?delete_threads=${options?.deleteThreads ?? false}`, {\n\t\t\tmethod: \"DELETE\",\n\t\t\tsignal: options?.signal\n\t\t});\n\t}\n\tasync search(query) {\n\t\tconst json = {\n\t\t\tgraph_id: query?.graphId ?? void 0,\n\t\t\tname: query?.name ?? void 0,\n\t\t\tmetadata: query?.metadata ?? void 0,\n\t\t\tlimit: query?.limit ?? 10,\n\t\t\toffset: query?.offset ?? 0,\n\t\t\tsort_by: query?.sortBy ?? void 0,\n\t\t\tsort_order: query?.sortOrder ?? void 0,\n\t\t\tselect: query?.select ?? void 0\n\t\t};\n\t\tconst [assistants, response] = await this.fetch(\"/assistants/search\", {\n\t\t\tmethod: \"POST\",\n\t\t\tjson,\n\t\t\twithResponse: true,\n\t\t\tsignal: query?.signal\n\t\t});\n\t\tif (query?.includePagination) return {\n\t\t\tassistants,\n\t\t\tnext: response.headers.get(\"X-Pagination-Next\")\n\t\t};\n\t\treturn assistants;\n\t}\n\t/**\n\t* Count assistants matching filters.\n\t*\n\t* @param query.metadata Metadata to filter by. Exact match for each key/value.\n\t* @param query.graphId Optional graph id to filter by.\n\t* @param query.name Optional name to filter by.\n\t* @returns Number of assistants matching the criteria.\n\t*/\n\tasync count(query) {\n\t\treturn this.fetch(`/assistants/count`, {\n\t\t\tmethod: \"POST\",\n\t\t\tjson: {\n\t\t\t\tmetadata: query?.metadata ?? void 0,\n\t\t\t\tgraph_id: query?.graphId ?? void 0,\n\t\t\t\tname: query?.name ?? void 0\n\t\t\t},\n\t\t\tsignal: query?.signal\n\t\t});\n\t}\n\t/**\n\t* List all versions of an assistant.\n\t*\n\t* @param assistantId ID of the assistant.\n\t* @returns List of assistant versions.\n\t*/\n\tasync getVersions(assistantId, payload) {\n\t\treturn this.fetch(`/assistants/${assistantId}/versions`, {\n\t\t\tmethod: \"POST\",\n\t\t\tjson: {\n\t\t\t\tmetadata: payload?.metadata ?? void 0,\n\t\t\t\tlimit: payload?.limit ?? 10,\n\t\t\t\toffset: payload?.offset ?? 0\n\t\t\t},\n\t\t\tsignal: payload?.signal\n\t\t});\n\t}\n\t/**\n\t* Change the version of an assistant.\n\t*\n\t* @param assistantId ID of the assistant.\n\t* @param version The version to change to.\n\t* @returns The updated assistant.\n\t*/\n\tasync setLatest(assistantId, version, options) {\n\t\treturn this.fetch(`/assistants/${assistantId}/latest`, {\n\t\t\tmethod: \"POST\",\n\t\t\tjson: { version },\n\t\t\tsignal: options?.signal\n\t\t});\n\t}\n};\nvar ThreadsClient = class extends BaseClient {\n\t/**\n\t* Get a thread by ID.\n\t*\n\t* @param threadId ID of the thread.\n\t* @returns The thread.\n\t*/\n\tasync get(threadId, options) {\n\t\treturn this.fetch(`/threads/${threadId}`, { signal: options?.signal });\n\t}\n\t/**\n\t* Create a new thread.\n\t*\n\t* @param payload Payload for creating a thread.\n\t* @returns The created thread.\n\t*/\n\tasync create(payload) {\n\t\tconst ttlPayload = typeof payload?.ttl === \"number\" ? {\n\t\t\tttl: payload.ttl,\n\t\t\tstrategy: \"delete\"\n\t\t} : payload?.ttl;\n\t\treturn this.fetch(`/threads`, {\n\t\t\tmethod: \"POST\",\n\t\t\tjson: {\n\t\t\t\tmetadata: {\n\t\t\t\t\t...payload?.metadata,\n\t\t\t\t\tgraph_id: payload?.graphId\n\t\t\t\t},\n\t\t\t\tthread_id: payload?.threadId,\n\t\t\t\tif_exists: payload?.ifExists,\n\t\t\t\tsupersteps: payload?.supersteps?.map((s) => ({ updates: s.updates.map((u) => ({\n\t\t\t\t\tvalues: u.values,\n\t\t\t\t\tcommand: u.command,\n\t\t\t\t\tas_node: u.asNode\n\t\t\t\t})) })),\n\t\t\t\tttl: ttlPayload\n\t\t\t},\n\t\t\tsignal: payload?.signal\n\t\t});\n\t}\n\t/**\n\t* Copy an existing thread\n\t* @param threadId ID of the thread to be copied\n\t* @returns Newly copied thread\n\t*/\n\tasync copy(threadId, options) {\n\t\treturn this.fetch(`/threads/${threadId}/copy`, {\n\t\t\tmethod: \"POST\",\n\t\t\tsignal: options?.signal\n\t\t});\n\t}\n\t/**\n\t* Update a thread.\n\t*\n\t* @param threadId ID of the thread.\n\t* @param payload Payload for updating the thread.\n\t* @returns The updated thread.\n\t*/\n\tasync update(threadId, payload) {\n\t\tconst ttlPayload = typeof payload?.ttl === \"number\" ? {\n\t\t\tttl: payload.ttl,\n\t\t\tstrategy: \"delete\"\n\t\t} : payload?.ttl;\n\t\treturn this.fetch(`/threads/${threadId}`, {\n\t\t\tmethod: \"PATCH\",\n\t\t\tjson: {\n\t\t\t\tmetadata: payload?.metadata,\n\t\t\t\tttl: ttlPayload\n\t\t\t},\n\t\t\tsignal: payload?.signal\n\t\t});\n\t}\n\t/**\n\t* Delete a thread.\n\t*\n\t* @param threadId ID of the thread.\n\t*/\n\tasync delete(threadId, options) {\n\t\treturn this.fetch(`/threads/${threadId}`, {\n\t\t\tmethod: \"DELETE\",\n\t\t\tsignal: options?.signal\n\t\t});\n\t}\n\t/**\n\t* List threads\n\t*\n\t* @param query Query options\n\t* @returns List of threads\n\t*/\n\tasync search(query) {\n\t\treturn this.fetch(\"/threads/search\", {\n\t\t\tmethod: \"POST\",\n\t\t\tjson: {\n\t\t\t\tmetadata: query?.metadata ?? void 0,\n\t\t\t\tids: query?.ids ?? void 0,\n\t\t\t\tlimit: query?.limit ?? 10,\n\t\t\t\toffset: query?.offset ?? 0,\n\t\t\t\tstatus: query?.status,\n\t\t\t\tsort_by: query?.sortBy,\n\t\t\t\tsort_order: query?.sortOrder,\n\t\t\t\tselect: query?.select ?? void 0,\n\t\t\t\tvalues: query?.values ?? void 0\n\t\t\t},\n\t\t\tsignal: query?.signal\n\t\t});\n\t}\n\t/**\n\t* Count threads matching filters.\n\t*\n\t* @param query.metadata Thread metadata to filter on.\n\t* @param query.values State values to filter on.\n\t* @param query.status Thread status to filter on.\n\t* @returns Number of threads matching the criteria.\n\t*/\n\tasync count(query) {\n\t\treturn this.fetch(`/threads/count`, {\n\t\t\tmethod: \"POST\",\n\t\t\tjson: {\n\t\t\t\tmetadata: query?.metadata ?? void 0,\n\t\t\t\tvalues: query?.values ?? void 0,\n\t\t\t\tstatus: query?.status ?? void 0\n\t\t\t},\n\t\t\tsignal: query?.signal\n\t\t});\n\t}\n\t/**\n\t* Get state for a thread.\n\t*\n\t* @param threadId ID of the thread.\n\t* @returns Thread state.\n\t*/\n\tasync getState(threadId, checkpoint, options) {\n\t\tif (checkpoint != null) {\n\t\t\tif (typeof checkpoint !== \"string\") return this.fetch(`/threads/${threadId}/state/checkpoint`, {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tjson: {\n\t\t\t\t\tcheckpoint,\n\t\t\t\t\tsubgraphs: options?.subgraphs\n\t\t\t\t},\n\t\t\t\tsignal: options?.signal\n\t\t\t});\n\t\t\treturn this.fetch(`/threads/${threadId}/state/${checkpoint}`, {\n\t\t\t\tparams: { subgraphs: options?.subgraphs },\n\t\t\t\tsignal: options?.signal\n\t\t\t});\n\t\t}\n\t\treturn this.fetch(`/threads/${threadId}/state`, {\n\t\t\tparams: { subgraphs: options?.subgraphs },\n\t\t\tsignal: options?.signal\n\t\t});\n\t}\n\t/**\n\t* Add state to a thread.\n\t*\n\t* @param threadId The ID of the thread.\n\t* @returns\n\t*/\n\tasync updateState(threadId, options) {\n\t\treturn this.fetch(`/threads/${threadId}/state`, {\n\t\t\tmethod: \"POST\",\n\t\t\tjson: {\n\t\t\t\tvalues: options.values,\n\t\t\t\tcheckpoint_id: options.checkpointId,\n\t\t\t\tcheckpoint: options.checkpoint,\n\t\t\t\tas_node: options?.asNode\n\t\t\t},\n\t\t\tsignal: options?.signal\n\t\t});\n\t}\n\t/**\n\t* Patch the metadata of a thread.\n\t*\n\t* @param threadIdOrConfig Thread ID or config to patch the state of.\n\t* @param metadata Metadata to patch the state with.\n\t*/\n\tasync patchState(threadIdOrConfig, metadata, options) {\n\t\tlet threadId;\n\t\tif (typeof threadIdOrConfig !== \"string\") {\n\t\t\tif (typeof threadIdOrConfig.configurable?.thread_id !== \"string\") throw new Error(\"Thread ID is required when updating state with a config.\");\n\t\t\tthreadId = threadIdOrConfig.configurable.thread_id;\n\t\t} else threadId = threadIdOrConfig;\n\t\treturn this.fetch(`/threads/${threadId}/state`, {\n\t\t\tmethod: \"PATCH\",\n\t\t\tjson: { metadata },\n\t\t\tsignal: options?.signal\n\t\t});\n\t}\n\t/**\n\t* Get all past states for a thread.\n\t*\n\t* @param threadId ID of the thread.\n\t* @param options Additional options.\n\t* @returns List of thread states.\n\t*/\n\tasync getHistory(threadId, options) {\n\t\treturn this.fetch(`/threads/${threadId}/history`, {\n\t\t\tmethod: \"POST\",\n\t\t\tjson: {\n\t\t\t\tlimit: options?.limit ?? 10,\n\t\t\t\tbefore: options?.before,\n\t\t\t\tmetadata: options?.metadata,\n\t\t\t\tcheckpoint: options?.checkpoint\n\t\t\t},\n\t\t\tsignal: options?.signal\n\t\t});\n\t}\n\tasync *joinStream(threadId, options) {\n\t\tyield* this.streamWithRetry({\n\t\t\tendpoint: `/threads/${threadId}/stream`,\n\t\t\tmethod: \"GET\",\n\t\t\tsignal: options?.signal,\n\t\t\theaders: options?.lastEventId ? { \"Last-Event-ID\": options.lastEventId } : void 0,\n\t\t\tparams: options?.streamMode ? { stream_mode: options.streamMode } : void 0\n\t\t});\n\t}\n};\nvar RunsClient = class extends BaseClient {\n\t/**\n\t* Create a run and stream the results.\n\t*\n\t* @param threadId The ID of the thread.\n\t* @param assistantId Assistant ID to use for this run.\n\t* @param payload Payload for creating a run.\n\t*/\n\tasync *stream(threadId, assistantId, payload) {\n\t\tconst json = {\n\t\t\tinput: payload?.input,\n\t\t\tcommand: payload?.command,\n\t\t\tconfig: payload?.config,\n\t\t\tcontext: payload?.context,\n\t\t\tmetadata: payload?.metadata,\n\t\t\tstream_mode: payload?.streamMode,\n\t\t\tstream_subgraphs: payload?.streamSubgraphs,\n\t\t\tstream_resumable: payload?.streamResumable,\n\t\t\tfeedback_keys: payload?.feedbackKeys,\n\t\t\tassistant_id: assistantId,\n\t\t\tinterrupt_before: payload?.interruptBefore,\n\t\t\tinterrupt_after: payload?.interruptAfter,\n\t\t\tcheckpoint: payload?.checkpoint,\n\t\t\tcheckpoint_id: payload?.checkpointId,\n\t\t\twebhook: payload?.webhook,\n\t\t\tmultitask_strategy: payload?.multitaskStrategy,\n\t\t\ton_completion: payload?.onCompletion,\n\t\t\ton_disconnect: payload?.onDisconnect,\n\t\t\tafter_seconds: payload?.afterSeconds,\n\t\t\tif_not_exists: payload?.ifNotExists,\n\t\t\tcheckpoint_during: payload?.checkpointDuring,\n\t\t\tdurability: payload?.durability\n\t\t};\n\t\tyield* this.streamWithRetry({\n\t\t\tendpoint: threadId == null ? `/runs/stream` : `/threads/${threadId}/runs/stream`,\n\t\t\tmethod: \"POST\",\n\t\t\tjson,\n\t\t\tsignal: payload?.signal,\n\t\t\tonInitialResponse: (response) => {\n\t\t\t\tconst runMetadata = getRunMetadataFromResponse(response);\n\t\t\t\tif (runMetadata) payload?.onRunCreated?.(runMetadata);\n\t\t\t}\n\t\t});\n\t}\n\t/**\n\t* Create a run.\n\t*\n\t* @param threadId The ID of the thread.\n\t* @param assistantId Assistant ID to use for this run.\n\t* @param payload Payload for creating a run.\n\t* @returns The created run.\n\t*/\n\tasync create(threadId, assistantId, payload) {\n\t\tconst json = {\n\t\t\tinput: payload?.input,\n\t\t\tcommand: payload?.command,\n\t\t\tconfig: payload?.config,\n\t\t\tcontext: payload?.context,\n\t\t\tmetadata: payload?.metadata,\n\t\t\tstream_mode: payload?.streamMode,\n\t\t\tstream_subgraphs: payload?.streamSubgraphs,\n\t\t\tstream_resumable: payload?.streamResumable,\n\t\t\tassistant_id: assistantId,\n\t\t\tinterrupt_before: payload?.interruptBefore,\n\t\t\tinterrupt_after: payload?.interruptAfter,\n\t\t\twebhook: payload?.webhook,\n\t\t\tcheckpoint: payload?.checkpoint,\n\t\t\tcheckpoint_id: payload?.checkpointId,\n\t\t\tmultitask_strategy: payload?.multitaskStrategy,\n\t\t\tafter_seconds: payload?.afterSeconds,\n\t\t\tif_not_exists: payload?.ifNotExists,\n\t\t\tcheckpoint_during: payload?.checkpointDuring,\n\t\t\tdurability: payload?.durability,\n\t\t\tlangsmith_tracer: payload?._langsmithTracer ? {\n\t\t\t\tproject_name: payload?._langsmithTracer?.projectName,\n\t\t\t\texample_id: payload?._langsmithTracer?.exampleId\n\t\t\t} : void 0\n\t\t};\n\t\tconst endpoint = threadId === null ? \"/runs\" : `/threads/${threadId}/runs`;\n\t\tconst [run, response] = await this.fetch(endpoint, {\n\t\t\tmethod: \"POST\",\n\t\t\tjson,\n\t\t\tsignal: payload?.signal,\n\t\t\twithResponse: true\n\t\t});\n\t\tconst runMetadata = getRunMetadataFromResponse(response);\n\t\tif (runMetadata) payload?.onRunCreated?.(runMetadata);\n\t\treturn run;\n\t}\n\t/**\n\t* Create a batch of stateless background runs.\n\t*\n\t* @param payloads An array of payloads for creating runs.\n\t* @returns An array of created runs.\n\t*/\n\tasync createBatch(payloads, options) {\n\t\tconst filteredPayloads = payloads.map((payload) => ({\n\t\t\t...payload,\n\t\t\tassistant_id: payload.assistantId\n\t\t})).map((payload) => {\n\t\t\treturn Object.fromEntries(Object.entries(payload).filter(([_, v]) => v !== void 0));\n\t\t});\n\t\treturn this.fetch(\"/runs/batch\", {\n\t\t\tmethod: \"POST\",\n\t\t\tjson: filteredPayloads,\n\t\t\tsignal: options?.signal\n\t\t});\n\t}\n\t/**\n\t* Create a run and wait for it to complete.\n\t*\n\t* @param threadId The ID of the thread.\n\t* @param assistantId Assistant ID to use for this run.\n\t* @param payload Payload for creating a run.\n\t* @returns The last values chunk of the thread.\n\t*/\n\tasync wait(threadId, assistantId, payload) {\n\t\tconst json = {\n\t\t\tinput: payload?.input,\n\t\t\tcommand: payload?.command,\n\t\t\tconfig: payload?.config,\n\t\t\tcontext: payload?.context,\n\t\t\tmetadata: payload?.metadata,\n\t\t\tassistant_id: assistantId,\n\t\t\tinterrupt_before: payload?.interruptBefore,\n\t\t\tinterrupt_after: payload?.interruptAfter,\n\t\t\tcheckpoint: payload?.checkpoint,\n\t\t\tcheckpoint_id: payload?.checkpointId,\n\t\t\twebhook: payload?.webhook,\n\t\t\tmultitask_strategy: payload?.multitaskStrategy,\n\t\t\ton_completion: payload?.onCompletion,\n\t\t\ton_disconnect: payload?.onDisconnect,\n\t\t\tafter_seconds: payload?.afterSeconds,\n\t\t\tif_not_exists: payload?.ifNotExists,\n\t\t\tcheckpoint_during: payload?.checkpointDuring,\n\t\t\tdurability: payload?.durability,\n\t\t\tlangsmith_tracer: payload?._langsmithTracer ? {\n\t\t\t\tproject_name: payload?._langsmithTracer?.projectName,\n\t\t\t\texample_id: payload?._langsmithTracer?.exampleId\n\t\t\t} : void 0\n\t\t};\n\t\tconst endpoint = threadId == null ? `/runs/wait` : `/threads/${threadId}/runs/wait`;\n\t\tconst [run, response] = await this.fetch(endpoint, {\n\t\t\tmethod: \"POST\",\n\t\t\tjson,\n\t\t\ttimeoutMs: null,\n\t\t\tsignal: payload?.signal,\n\t\t\twithResponse: true\n\t\t});\n\t\tconst runMetadata = getRunMetadataFromResponse(response);\n\t\tif (runMetadata) payload?.onRunCreated?.(runMetadata);\n\t\tif ((payload?.raiseError !== void 0 ? payload.raiseError : true) && \"__error__\" in run && typeof run.__error__ === \"object\" && run.__error__ && \"error\" in run.__error__ && \"message\" in run.__error__) throw new Error(`${run.__error__?.error}: ${run.__error__?.message}`);\n\t\treturn run;\n\t}\n\t/**\n\t* List all runs for a thread.\n\t*\n\t* @param threadId The ID of the thread.\n\t* @param options Filtering and pagination options.\n\t* @returns List of runs.\n\t*/\n\tasync list(threadId, options) {\n\t\treturn this.fetch(`/threads/${threadId}/runs`, {\n\t\t\tparams: {\n\t\t\t\tlimit: options?.limit ?? 10,\n\t\t\t\toffset: options?.offset ?? 0,\n\t\t\t\tstatus: options?.status ?? void 0,\n\t\t\t\tselect: options?.select ?? void 0\n\t\t\t},\n\t\t\tsignal: options?.signal\n\t\t});\n\t}\n\t/**\n\t* Get a run by ID.\n\t*\n\t* @param threadId The ID of the thread.\n\t* @param runId The ID of the run.\n\t* @returns The run.\n\t*/\n\tasync get(threadId, runId, options) {\n\t\treturn this.fetch(`/threads/${threadId}/runs/${runId}`, { signal: options?.signal });\n\t}\n\t/**\n\t* Cancel a run.\n\t*\n\t* @param threadId The ID of the thread.\n\t* @param runId The ID of the run.\n\t* @param wait Whether to block when canceling\n\t* @param action Action to take when cancelling the run. Possible values are `interrupt` or `rollback`. Default is `interrupt`.\n\t* @returns\n\t*/\n\tasync cancel(threadId, runId, wait = false, action = \"interrupt\", options = {}) {\n\t\treturn this.fetch(`/threads/${threadId}/runs/${runId}/cancel`, {\n\t\t\tmethod: \"POST\",\n\t\t\tparams: {\n\t\t\t\twait: wait ? \"1\" : \"0\",\n\t\t\t\taction\n\t\t\t},\n\t\t\tsignal: options?.signal\n\t\t});\n\t}\n\t/**\n\t* Block until a run is done.\n\t*\n\t* @param threadId The ID of the thread.\n\t* @param runId The ID of the run.\n\t* @returns\n\t*/\n\tasync join(threadId, runId, options) {\n\t\treturn this.fetch(`/threads/${threadId}/runs/${runId}/join`, {\n\t\t\ttimeoutMs: null,\n\t\t\tsignal: options?.signal\n\t\t});\n\t}\n\t/**\n\t* Stream output from a run in real-time, until the run is done.\n\t*\n\t* @param threadId The ID of the thread. Can be set to `null` | `undefined` for stateless runs.\n\t* @param runId The ID of the run.\n\t* @param options Additional options for controlling the stream behavior:\n\t*   - signal: An AbortSignal that can be used to cancel the stream request\n\t*   - lastEventId: The ID of the last event received. Can be used to reconnect to a stream without losing events.\n\t*   - cancelOnDisconnect: When true, automatically cancels the run if the client disconnects from the stream\n\t*   - streamMode: Controls what types of events to receive from the stream (can be a single mode or array of modes)\n\t*        Must be a subset of the stream modes passed when creating the run. Background runs default to having the union of all\n\t*        stream modes enabled.\n\t* @returns An async generator yielding stream parts.\n\t*/\n\tasync *joinStream(threadId, runId, options) {\n\t\tconst opts = typeof options === \"object\" && options != null && options instanceof AbortSignal ? { signal: options } : options;\n\t\tyield* this.streamWithRetry({\n\t\t\tendpoint: threadId != null ? `/threads/${threadId}/runs/${runId}/stream` : `/runs/${runId}/stream`,\n\t\t\tmethod: \"GET\",\n\t\t\tsignal: opts?.signal,\n\t\t\theaders: opts?.lastEventId ? { \"Last-Event-ID\": opts.lastEventId } : void 0,\n\t\t\tparams: {\n\t\t\t\tcancel_on_disconnect: opts?.cancelOnDisconnect ? \"1\" : \"0\",\n\t\t\t\tstream_mode: opts?.streamMode\n\t\t\t}\n\t\t});\n\t}\n\t/**\n\t* Delete a run.\n\t*\n\t* @param threadId The ID of the thread.\n\t* @param runId The ID of the run.\n\t* @returns\n\t*/\n\tasync delete(threadId, runId, options) {\n\t\treturn this.fetch(`/threads/${threadId}/runs/${runId}`, {\n\t\t\tmethod: \"DELETE\",\n\t\t\tsignal: options?.signal\n\t\t});\n\t}\n};\nvar StoreClient = class extends BaseClient {\n\t/**\n\t* Store or update an item.\n\t*\n\t* @param namespace A list of strings representing the namespace path.\n\t* @param key The unique identifier for the item within the namespace.\n\t* @param value A dictionary containing the item's data.\n\t* @param options.index Controls search indexing - null (use defaults), false (disable), or list of field paths to index.\n\t* @param options.ttl Optional time-to-live in minutes for the item, or null for no expiration.\n\t* @returns Promise<void>\n\t*\n\t* @example\n\t* ```typescript\n\t* await client.store.putItem(\n\t*   [\"documents\", \"user123\"],\n\t*   \"item456\",\n\t*   { title: \"My Document\", content: \"Hello World\" },\n\t*   { ttl: 60 } // expires in 60 minutes\n\t* );\n\t* ```\n\t*/\n\tasync putItem(namespace, key, value, options) {\n\t\tnamespace.forEach((label) => {\n\t\t\tif (label.includes(\".\")) throw new Error(`Invalid namespace label '${label}'. Namespace labels cannot contain periods ('.')`);\n\t\t});\n\t\tconst payload = {\n\t\t\tnamespace,\n\t\t\tkey,\n\t\t\tvalue,\n\t\t\tindex: options?.index,\n\t\t\tttl: options?.ttl\n\t\t};\n\t\treturn this.fetch(\"/store/items\", {\n\t\t\tmethod: \"PUT\",\n\t\t\tjson: payload,\n\t\t\tsignal: options?.signal\n\t\t});\n\t}\n\t/**\n\t* Retrieve a single item.\n\t*\n\t* @param namespace A list of strings representing the namespace path.\n\t* @param key The unique identifier for the item.\n\t* @param options.refreshTtl Whether to refresh the TTL on this read operation. If null, uses the store's default behavior.\n\t* @returns Promise<Item>\n\t*\n\t* @example\n\t* ```typescript\n\t* const item = await client.store.getItem(\n\t*   [\"documents\", \"user123\"],\n\t*   \"item456\",\n\t*   { refreshTtl: true }\n\t* );\n\t* console.log(item);\n\t* // {\n\t* //   namespace: [\"documents\", \"user123\"],\n\t* //   key: \"item456\",\n\t* //   value: { title: \"My Document\", content: \"Hello World\" },\n\t* //   createdAt: \"2024-07-30T12:00:00Z\",\n\t* //   updatedAt: \"2024-07-30T12:00:00Z\"\n\t* // }\n\t* ```\n\t*/\n\tasync getItem(namespace, key, options) {\n\t\tnamespace.forEach((label) => {\n\t\t\tif (label.includes(\".\")) throw new Error(`Invalid namespace label '${label}'. Namespace labels cannot contain periods ('.')`);\n\t\t});\n\t\tconst params = {\n\t\t\tnamespace: namespace.join(\".\"),\n\t\t\tkey\n\t\t};\n\t\tif (options?.refreshTtl !== void 0) params.refresh_ttl = options.refreshTtl;\n\t\tconst response = await this.fetch(\"/store/items\", {\n\t\t\tparams,\n\t\t\tsignal: options?.signal\n\t\t});\n\t\treturn response ? {\n\t\t\t...response,\n\t\t\tcreatedAt: response.created_at,\n\t\t\tupdatedAt: response.updated_at\n\t\t} : null;\n\t}\n\t/**\n\t* Delete an item.\n\t*\n\t* @param namespace A list of strings representing the namespace path.\n\t* @param key The unique identifier for the item.\n\t* @returns Promise<void>\n\t*/\n\tasync deleteItem(namespace, key, options) {\n\t\tnamespace.forEach((label) => {\n\t\t\tif (label.includes(\".\")) throw new Error(`Invalid namespace label '${label}'. Namespace labels cannot contain periods ('.')`);\n\t\t});\n\t\treturn this.fetch(\"/store/items\", {\n\t\t\tmethod: \"DELETE\",\n\t\t\tjson: {\n\t\t\t\tnamespace,\n\t\t\t\tkey\n\t\t\t},\n\t\t\tsignal: options?.signal\n\t\t});\n\t}\n\t/**\n\t* Search for items within a namespace prefix.\n\t*\n\t* @param namespacePrefix List of strings representing the namespace prefix.\n\t* @param options.filter Optional dictionary of key-value pairs to filter results.\n\t* @param options.limit Maximum number of items to return (default is 10).\n\t* @param options.offset Number of items to skip before returning results (default is 0).\n\t* @param options.query Optional search query.\n\t* @param options.refreshTtl Whether to refresh the TTL on items returned by this search. If null, uses the store's default behavior.\n\t* @returns Promise<SearchItemsResponse>\n\t*\n\t* @example\n\t* ```typescript\n\t* const results = await client.store.searchItems(\n\t*   [\"documents\"],\n\t*   {\n\t*     filter: { author: \"John Doe\" },\n\t*     limit: 5,\n\t*     refreshTtl: true\n\t*   }\n\t* );\n\t* console.log(results);\n\t* // {\n\t* //   items: [\n\t* //     {\n\t* //       namespace: [\"documents\", \"user123\"],\n\t* //       key: \"item789\",\n\t* //       value: { title: \"Another Document\", author: \"John Doe\" },\n\t* //       createdAt: \"2024-07-30T12:00:00Z\",\n\t* //       updatedAt: \"2024-07-30T12:00:00Z\"\n\t* //     },\n\t* //     // ... additional items ...\n\t* //   ]\n\t* // }\n\t* ```\n\t*/\n\tasync searchItems(namespacePrefix, options) {\n\t\tconst payload = {\n\t\t\tnamespace_prefix: namespacePrefix,\n\t\t\tfilter: options?.filter,\n\t\t\tlimit: options?.limit ?? 10,\n\t\t\toffset: options?.offset ?? 0,\n\t\t\tquery: options?.query,\n\t\t\trefresh_ttl: options?.refreshTtl\n\t\t};\n\t\treturn { items: (await this.fetch(\"/store/items/search\", {\n\t\t\tmethod: \"POST\",\n\t\t\tjson: payload,\n\t\t\tsignal: options?.signal\n\t\t})).items.map((item) => ({\n\t\t\t...item,\n\t\t\tcreatedAt: item.created_at,\n\t\t\tupdatedAt: item.updated_at\n\t\t})) };\n\t}\n\t/**\n\t* List namespaces with optional match conditions.\n\t*\n\t* @param options.prefix Optional list of strings representing the prefix to filter namespaces.\n\t* @param options.suffix Optional list of strings representing the suffix to filter namespaces.\n\t* @param options.maxDepth Optional integer specifying the maximum depth of namespaces to return.\n\t* @param options.limit Maximum number of namespaces to return (default is 100).\n\t* @param options.offset Number of namespaces to skip before returning results (default is 0).\n\t* @returns Promise<ListNamespaceResponse>\n\t*/\n\tasync listNamespaces(options) {\n\t\tconst payload = {\n\t\t\tprefix: options?.prefix,\n\t\t\tsuffix: options?.suffix,\n\t\t\tmax_depth: options?.maxDepth,\n\t\t\tlimit: options?.limit ?? 100,\n\t\t\toffset: options?.offset ?? 0\n\t\t};\n\t\treturn this.fetch(\"/store/namespaces\", {\n\t\t\tmethod: \"POST\",\n\t\t\tjson: payload,\n\t\t\tsignal: options?.signal\n\t\t});\n\t}\n};\nvar UiClient = class UiClient extends BaseClient {\n\tstatic promiseCache = {};\n\tstatic getOrCached(key, fn) {\n\t\tif (UiClient.promiseCache[key] != null) return UiClient.promiseCache[key];\n\t\tconst promise = fn();\n\t\tUiClient.promiseCache[key] = promise;\n\t\treturn promise;\n\t}\n\tasync getComponent(assistantId, agentName) {\n\t\treturn UiClient.getOrCached(`${this.apiUrl}-${assistantId}-${agentName}`, async () => {\n\t\t\tlet [url, init] = this.prepareFetchOptions(`/ui/${assistantId}`, {\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: \"text/html\",\n\t\t\t\t\t\"Content-Type\": \"application/json\"\n\t\t\t\t},\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tjson: { name: agentName }\n\t\t\t});\n\t\t\tif (this.onRequest != null) init = await this.onRequest(url, init);\n\t\t\treturn (await this.asyncCaller.fetch(url, init)).text();\n\t\t});\n\t}\n};\nvar Client = class {\n\t/**\n\t* The client for interacting with assistants.\n\t*/\n\tassistants;\n\t/**\n\t* The client for interacting with threads.\n\t*/\n\tthreads;\n\t/**\n\t* The client for interacting with runs.\n\t*/\n\truns;\n\t/**\n\t* The client for interacting with cron runs.\n\t*/\n\tcrons;\n\t/**\n\t* The client for interacting with the KV store.\n\t*/\n\tstore;\n\t/**\n\t* The client for interacting with the UI.\n\t* @internal Used by LoadExternalComponent and the API might change in the future.\n\t*/\n\t\"~ui\";\n\t/**\n\t* @internal Used to obtain a stable key representing the client.\n\t*/\n\t\"~configHash\";\n\tconstructor(config) {\n\t\tthis[\"~configHash\"] = JSON.stringify({\n\t\t\tapiUrl: config?.apiUrl,\n\t\t\tapiKey: config?.apiKey,\n\t\t\ttimeoutMs: config?.timeoutMs,\n\t\t\tdefaultHeaders: config?.defaultHeaders,\n\t\t\tmaxConcurrency: config?.callerOptions?.maxConcurrency,\n\t\t\tmaxRetries: config?.callerOptions?.maxRetries,\n\t\t\tcallbacks: {\n\t\t\t\tonFailedResponseHook: config?.callerOptions?.onFailedResponseHook != null,\n\t\t\t\tonRequest: config?.onRequest != null,\n\t\t\t\tfetch: config?.callerOptions?.fetch != null\n\t\t\t}\n\t\t});\n\t\tthis.assistants = new AssistantsClient(config);\n\t\tthis.threads = new ThreadsClient(config);\n\t\tthis.runs = new RunsClient(config);\n\t\tthis.crons = new CronsClient(config);\n\t\tthis.store = new StoreClient(config);\n\t\tthis[\"~ui\"] = new UiClient(config);\n\t}\n};\n/**\n* @internal Used to obtain a stable key representing the client.\n*/\nfunction getClientConfigHash(client) {\n\treturn client[\"~configHash\"];\n}\n\n//#endregion\n\n//# sourceMappingURL=client.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL2Rpc3QvY2xpZW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0Q7QUFDRTtBQUNOO0FBQ1k7QUFDVjs7QUFFcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLGdHQUFnRyxZQUFZO0FBQzVHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixxRUFBc0IsSUFBSSxPQUFPO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLCtEQUFXO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRUFBbUUsb0NBQW9DO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSiwwQkFBMEIsK0RBQVk7QUFDdEMsK0JBQStCLFlBQVksRUFBRSxLQUFLO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCwrQkFBK0IsZUFBZSwrREFBZ0IsZ0JBQWdCLHlEQUFVO0FBQzNJO0FBQ0E7QUFDQSxTQUFTLGlFQUFlO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLFNBQVM7QUFDekM7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxPQUFPO0FBQ3pDO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLFlBQVksS0FBSyx5QkFBeUI7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxZQUFZO0FBQy9DLGFBQWEscUJBQXFCO0FBQ2xDO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLFlBQVksYUFBYSx5QkFBeUI7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELFlBQVksYUFBYSxrQkFBa0I7QUFDdEcsYUFBYSwyQkFBMkI7QUFDeEM7QUFDQSxHQUFHO0FBQ0gsbUNBQW1DLFlBQVk7QUFDL0MsYUFBYSwyQkFBMkI7QUFDeEM7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsWUFBWTtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsWUFBWSxrQkFBa0IsZ0NBQWdDO0FBQ2pHO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxZQUFZO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLFlBQVk7QUFDL0M7QUFDQSxXQUFXLFNBQVM7QUFDcEI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsU0FBUyxLQUFLLHlCQUF5QjtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsbURBQW1EO0FBQ25EO0FBQ0E7QUFDQTtBQUNBLEtBQUssSUFBSTtBQUNUO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLFNBQVM7QUFDekM7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osZ0NBQWdDLFNBQVM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsU0FBUztBQUN6QztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFLFNBQVM7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxJQUFJO0FBQ0osaUNBQWlDLFNBQVMsU0FBUyxXQUFXO0FBQzlELGNBQWMsK0JBQStCO0FBQzdDO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsZ0NBQWdDLFNBQVM7QUFDekMsYUFBYSwrQkFBK0I7QUFDNUM7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxTQUFTO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osZ0NBQWdDLFNBQVM7QUFDekM7QUFDQSxXQUFXLFVBQVU7QUFDckI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLFNBQVM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixTQUFTO0FBQ2xDO0FBQ0E7QUFDQSxxQ0FBcUMsdUNBQXVDO0FBQzVFLG1DQUFtQyxrQ0FBa0M7QUFDckUsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxTQUFTO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLDZEQUE2RCxTQUFTO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsaUVBQWlFLFNBQVM7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSw2TkFBNk4scUJBQXFCLElBQUksdUJBQXVCO0FBQzdRO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLFNBQVM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsU0FBUyxRQUFRLE1BQU0sS0FBSyx5QkFBeUI7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRUFBK0U7QUFDL0UsZ0NBQWdDLFNBQVMsUUFBUSxNQUFNO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxTQUFTLFFBQVEsTUFBTTtBQUN2RDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0dBQW9HLGtCQUFrQjtBQUN0SDtBQUNBLDRDQUE0QyxTQUFTLFFBQVEsTUFBTSxvQkFBb0IsTUFBTTtBQUM3RjtBQUNBO0FBQ0Esa0NBQWtDLG9DQUFvQztBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsU0FBUyxRQUFRLE1BQU07QUFDdkQ7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLDhDQUE4QztBQUNyRCxPQUFPLFVBQVU7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdFQUF3RSxNQUFNO0FBQzlFLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw4Q0FBOEM7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3RUFBd0UsTUFBTTtBQUM5RSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdFQUF3RSxNQUFNO0FBQzlFLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsb0JBQW9CO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLCtDQUErQztBQUNwRTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsWUFBWSxHQUFHLFlBQVksR0FBRyxVQUFVO0FBQ3pFLHFEQUFxRCxZQUFZO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLFlBQVk7QUFDWixJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUN5SDtBQUN6SCIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoLXNkay9kaXN0L2NsaWVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBc3luY0NhbGxlciB9IGZyb20gXCIuL3V0aWxzL2FzeW5jX2NhbGxlci5qc1wiO1xuaW1wb3J0IHsgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSB9IGZyb20gXCIuL3V0aWxzL2Vudi5qc1wiO1xuaW1wb3J0IHsgbWVyZ2VTaWduYWxzIH0gZnJvbSBcIi4vdXRpbHMvc2lnbmFscy5qc1wiO1xuaW1wb3J0IHsgQnl0ZXNMaW5lRGVjb2RlciwgU1NFRGVjb2RlciB9IGZyb20gXCIuL3V0aWxzL3NzZS5qc1wiO1xuaW1wb3J0IHsgc3RyZWFtV2l0aFJldHJ5IH0gZnJvbSBcIi4vdXRpbHMvc3RyZWFtLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY2xpZW50LnRzXG5mdW5jdGlvbiogaXRlcmF0ZUhlYWRlcnMoaGVhZGVycykge1xuXHRsZXQgaXRlcjtcblx0bGV0IHNob3VsZENsZWFyID0gZmFsc2U7XG5cdGlmIChoZWFkZXJzIGluc3RhbmNlb2YgSGVhZGVycykge1xuXHRcdGNvbnN0IGVudHJpZXMgPSBbXTtcblx0XHRoZWFkZXJzLmZvckVhY2goKHZhbHVlLCBuYW1lKSA9PiB7XG5cdFx0XHRlbnRyaWVzLnB1c2goW25hbWUsIHZhbHVlXSk7XG5cdFx0fSk7XG5cdFx0aXRlciA9IGVudHJpZXM7XG5cdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShoZWFkZXJzKSkgaXRlciA9IGhlYWRlcnM7XG5cdGVsc2Uge1xuXHRcdHNob3VsZENsZWFyID0gdHJ1ZTtcblx0XHRpdGVyID0gT2JqZWN0LmVudHJpZXMoaGVhZGVycyA/PyB7fSk7XG5cdH1cblx0Zm9yIChjb25zdCBpdGVtIG9mIGl0ZXIpIHtcblx0XHRjb25zdCBuYW1lID0gaXRlbVswXTtcblx0XHRpZiAodHlwZW9mIG5hbWUgIT09IFwic3RyaW5nXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoYEV4cGVjdGVkIGhlYWRlciBuYW1lIHRvIGJlIGEgc3RyaW5nLCBnb3QgJHt0eXBlb2YgbmFtZX1gKTtcblx0XHRjb25zdCB2YWx1ZXMgPSBBcnJheS5pc0FycmF5KGl0ZW1bMV0pID8gaXRlbVsxXSA6IFtpdGVtWzFdXTtcblx0XHRsZXQgZGlkQ2xlYXIgPSBmYWxzZTtcblx0XHRmb3IgKGNvbnN0IHZhbHVlIG9mIHZhbHVlcykge1xuXHRcdFx0aWYgKHZhbHVlID09PSB2b2lkIDApIGNvbnRpbnVlO1xuXHRcdFx0aWYgKHNob3VsZENsZWFyICYmICFkaWRDbGVhcikge1xuXHRcdFx0XHRkaWRDbGVhciA9IHRydWU7XG5cdFx0XHRcdHlpZWxkIFtuYW1lLCBudWxsXTtcblx0XHRcdH1cblx0XHRcdHlpZWxkIFtuYW1lLCB2YWx1ZV07XG5cdFx0fVxuXHR9XG59XG5mdW5jdGlvbiBtZXJnZUhlYWRlcnMoLi4uaGVhZGVyT2JqZWN0cykge1xuXHRjb25zdCBvdXRwdXRIZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcblx0Zm9yIChjb25zdCBoZWFkZXJzIG9mIGhlYWRlck9iamVjdHMpIHtcblx0XHRpZiAoIWhlYWRlcnMpIGNvbnRpbnVlO1xuXHRcdGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBpdGVyYXRlSGVhZGVycyhoZWFkZXJzKSkgaWYgKHZhbHVlID09PSBudWxsKSBvdXRwdXRIZWFkZXJzLmRlbGV0ZShuYW1lKTtcblx0XHRlbHNlIG91dHB1dEhlYWRlcnMuYXBwZW5kKG5hbWUsIHZhbHVlKTtcblx0fVxuXHRjb25zdCBoZWFkZXJFbnRyaWVzID0gW107XG5cdG91dHB1dEhlYWRlcnMuZm9yRWFjaCgodmFsdWUsIG5hbWUpID0+IHtcblx0XHRoZWFkZXJFbnRyaWVzLnB1c2goW25hbWUsIHZhbHVlXSk7XG5cdH0pO1xuXHRyZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKGhlYWRlckVudHJpZXMpO1xufVxuLyoqXG4qIEdldCB0aGUgQVBJIGtleSBmcm9tIHRoZSBlbnZpcm9ubWVudC5cbiogUHJlY2VkZW5jZTpcbiogICAxLiBleHBsaWNpdCBhcmd1bWVudCAoaWYgc3RyaW5nKVxuKiAgIDIuIExBTkdHUkFQSF9BUElfS0VZXG4qICAgMy4gTEFOR1NNSVRIX0FQSV9LRVlcbiogICA0LiBMQU5HQ0hBSU5fQVBJX0tFWVxuKlxuKiBAcGFyYW0gYXBpS2V5IC0gQVBJIGtleSBwcm92aWRlZCBhcyBhbiBhcmd1bWVudC4gSWYgbnVsbCwgc2tpcHMgZW52aXJvbm1lbnQgbG9va3VwLiBJZiB1bmRlZmluZWQsIHRyaWVzIGVudmlyb25tZW50LlxuKiBAcmV0dXJucyBUaGUgQVBJIGtleSBpZiBmb3VuZCwgb3RoZXJ3aXNlIHVuZGVmaW5lZFxuKi9cbmZ1bmN0aW9uIGdldEFwaUtleShhcGlLZXkpIHtcblx0aWYgKGFwaUtleSA9PT0gbnVsbCkgcmV0dXJuO1xuXHRpZiAoYXBpS2V5KSByZXR1cm4gYXBpS2V5O1xuXHRmb3IgKGNvbnN0IHByZWZpeCBvZiBbXG5cdFx0XCJMQU5HR1JBUEhcIixcblx0XHRcIkxBTkdTTUlUSFwiLFxuXHRcdFwiTEFOR0NIQUlOXCJcblx0XSkge1xuXHRcdGNvbnN0IGVudktleSA9IGdldEVudmlyb25tZW50VmFyaWFibGUoYCR7cHJlZml4fV9BUElfS0VZYCk7XG5cdFx0aWYgKGVudktleSkgcmV0dXJuIGVudktleS50cmltKCkucmVwbGFjZSgvXltcIiddfFtcIiddJC9nLCBcIlwiKTtcblx0fVxufVxuY29uc3QgUkVHRVhfUlVOX01FVEFEQVRBID0gLyhcXC90aHJlYWRzXFwvKD88dGhyZWFkX2lkPi4rKSk/XFwvcnVuc1xcLyg/PHJ1bl9pZD4uKykvO1xuZnVuY3Rpb24gZ2V0UnVuTWV0YWRhdGFGcm9tUmVzcG9uc2UocmVzcG9uc2UpIHtcblx0Y29uc3QgY29udGVudExvY2F0aW9uID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoXCJDb250ZW50LUxvY2F0aW9uXCIpO1xuXHRpZiAoIWNvbnRlbnRMb2NhdGlvbikgcmV0dXJuIHZvaWQgMDtcblx0Y29uc3QgbWF0Y2ggPSBSRUdFWF9SVU5fTUVUQURBVEEuZXhlYyhjb250ZW50TG9jYXRpb24pO1xuXHRpZiAoIW1hdGNoPy5ncm91cHM/LnJ1bl9pZCkgcmV0dXJuIHZvaWQgMDtcblx0cmV0dXJuIHtcblx0XHRydW5faWQ6IG1hdGNoLmdyb3Vwcy5ydW5faWQsXG5cdFx0dGhyZWFkX2lkOiBtYXRjaC5ncm91cHMudGhyZWFkX2lkIHx8IHZvaWQgMFxuXHR9O1xufVxudmFyIEJhc2VDbGllbnQgPSBjbGFzcyB7XG5cdGFzeW5jQ2FsbGVyO1xuXHR0aW1lb3V0TXM7XG5cdGFwaVVybDtcblx0ZGVmYXVsdEhlYWRlcnM7XG5cdG9uUmVxdWVzdDtcblx0Y29uc3RydWN0b3IoY29uZmlnKSB7XG5cdFx0Y29uc3QgY2FsbGVyT3B0aW9ucyA9IHtcblx0XHRcdG1heFJldHJpZXM6IDQsXG5cdFx0XHRtYXhDb25jdXJyZW5jeTogNCxcblx0XHRcdC4uLmNvbmZpZz8uY2FsbGVyT3B0aW9uc1xuXHRcdH07XG5cdFx0bGV0IGRlZmF1bHRBcGlVcmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6ODEyM1wiO1xuXHRcdGlmICghY29uZmlnPy5hcGlVcmwgJiYgdHlwZW9mIGdsb2JhbFRoaXMgPT09IFwib2JqZWN0XCIgJiYgZ2xvYmFsVGhpcyAhPSBudWxsKSB7XG5cdFx0XHRjb25zdCBmZXRjaFNtYiA9IFN5bWJvbC5mb3IoXCJsYW5nZ3JhcGhfYXBpOmZldGNoXCIpO1xuXHRcdFx0Y29uc3QgdXJsU21iID0gU3ltYm9sLmZvcihcImxhbmdncmFwaF9hcGk6dXJsXCIpO1xuXHRcdFx0Y29uc3QgZ2xvYmFsID0gZ2xvYmFsVGhpcztcblx0XHRcdGlmIChnbG9iYWxbZmV0Y2hTbWJdKSBjYWxsZXJPcHRpb25zLmZldGNoID8/PSBnbG9iYWxbZmV0Y2hTbWJdO1xuXHRcdFx0aWYgKGdsb2JhbFt1cmxTbWJdKSBkZWZhdWx0QXBpVXJsID0gZ2xvYmFsW3VybFNtYl07XG5cdFx0fVxuXHRcdHRoaXMuYXN5bmNDYWxsZXIgPSBuZXcgQXN5bmNDYWxsZXIoY2FsbGVyT3B0aW9ucyk7XG5cdFx0dGhpcy50aW1lb3V0TXMgPSBjb25maWc/LnRpbWVvdXRNcztcblx0XHR0aGlzLmFwaVVybCA9IGNvbmZpZz8uYXBpVXJsPy5yZXBsYWNlKC9cXC8kLywgXCJcIikgfHwgZGVmYXVsdEFwaVVybDtcblx0XHR0aGlzLmRlZmF1bHRIZWFkZXJzID0gY29uZmlnPy5kZWZhdWx0SGVhZGVycyB8fCB7fTtcblx0XHR0aGlzLm9uUmVxdWVzdCA9IGNvbmZpZz8ub25SZXF1ZXN0O1xuXHRcdGNvbnN0IGFwaUtleSA9IGdldEFwaUtleShjb25maWc/LmFwaUtleSk7XG5cdFx0aWYgKGFwaUtleSkgdGhpcy5kZWZhdWx0SGVhZGVyc1tcIngtYXBpLWtleVwiXSA9IGFwaUtleTtcblx0fVxuXHRwcmVwYXJlRmV0Y2hPcHRpb25zKHBhdGgsIG9wdGlvbnMpIHtcblx0XHRjb25zdCBtdXRhdGVkT3B0aW9ucyA9IHtcblx0XHRcdC4uLm9wdGlvbnMsXG5cdFx0XHRoZWFkZXJzOiBtZXJnZUhlYWRlcnModGhpcy5kZWZhdWx0SGVhZGVycywgb3B0aW9ucz8uaGVhZGVycylcblx0XHR9O1xuXHRcdGlmIChtdXRhdGVkT3B0aW9ucy5qc29uKSB7XG5cdFx0XHRtdXRhdGVkT3B0aW9ucy5ib2R5ID0gSlNPTi5zdHJpbmdpZnkobXV0YXRlZE9wdGlvbnMuanNvbik7XG5cdFx0XHRtdXRhdGVkT3B0aW9ucy5oZWFkZXJzID0gbWVyZ2VIZWFkZXJzKG11dGF0ZWRPcHRpb25zLmhlYWRlcnMsIHsgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSk7XG5cdFx0XHRkZWxldGUgbXV0YXRlZE9wdGlvbnMuanNvbjtcblx0XHR9XG5cdFx0aWYgKG11dGF0ZWRPcHRpb25zLndpdGhSZXNwb25zZSkgZGVsZXRlIG11dGF0ZWRPcHRpb25zLndpdGhSZXNwb25zZTtcblx0XHRsZXQgdGltZW91dFNpZ25hbCA9IG51bGw7XG5cdFx0aWYgKHR5cGVvZiBvcHRpb25zPy50aW1lb3V0TXMgIT09IFwidW5kZWZpbmVkXCIpIHtcblx0XHRcdGlmIChvcHRpb25zLnRpbWVvdXRNcyAhPSBudWxsKSB0aW1lb3V0U2lnbmFsID0gQWJvcnRTaWduYWwudGltZW91dChvcHRpb25zLnRpbWVvdXRNcyk7XG5cdFx0fSBlbHNlIGlmICh0aGlzLnRpbWVvdXRNcyAhPSBudWxsKSB0aW1lb3V0U2lnbmFsID0gQWJvcnRTaWduYWwudGltZW91dCh0aGlzLnRpbWVvdXRNcyk7XG5cdFx0bXV0YXRlZE9wdGlvbnMuc2lnbmFsID0gbWVyZ2VTaWduYWxzKHRpbWVvdXRTaWduYWwsIG11dGF0ZWRPcHRpb25zLnNpZ25hbCk7XG5cdFx0Y29uc3QgdGFyZ2V0VXJsID0gbmV3IFVSTChgJHt0aGlzLmFwaVVybH0ke3BhdGh9YCk7XG5cdFx0aWYgKG11dGF0ZWRPcHRpb25zLnBhcmFtcykge1xuXHRcdFx0Zm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMobXV0YXRlZE9wdGlvbnMucGFyYW1zKSkge1xuXHRcdFx0XHRpZiAodmFsdWUgPT0gbnVsbCkgY29udGludWU7XG5cdFx0XHRcdGNvbnN0IHN0clZhbHVlID0gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIiA/IHZhbHVlLnRvU3RyaW5nKCkgOiBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG5cdFx0XHRcdHRhcmdldFVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKGtleSwgc3RyVmFsdWUpO1xuXHRcdFx0fVxuXHRcdFx0ZGVsZXRlIG11dGF0ZWRPcHRpb25zLnBhcmFtcztcblx0XHR9XG5cdFx0cmV0dXJuIFt0YXJnZXRVcmwsIG11dGF0ZWRPcHRpb25zXTtcblx0fVxuXHRhc3luYyBmZXRjaChwYXRoLCBvcHRpb25zKSB7XG5cdFx0Y29uc3QgW3VybCwgaW5pdF0gPSB0aGlzLnByZXBhcmVGZXRjaE9wdGlvbnMocGF0aCwgb3B0aW9ucyk7XG5cdFx0bGV0IGZpbmFsSW5pdCA9IGluaXQ7XG5cdFx0aWYgKHRoaXMub25SZXF1ZXN0KSBmaW5hbEluaXQgPSBhd2FpdCB0aGlzLm9uUmVxdWVzdCh1cmwsIGluaXQpO1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hc3luY0NhbGxlci5mZXRjaCh1cmwsIGZpbmFsSW5pdCk7XG5cdFx0Y29uc3QgYm9keSA9ICgoKSA9PiB7XG5cdFx0XHRpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDIgfHwgcmVzcG9uc2Uuc3RhdHVzID09PSAyMDQpIHJldHVybjtcblx0XHRcdHJldHVybiByZXNwb25zZS5qc29uKCk7XG5cdFx0fSkoKTtcblx0XHRpZiAob3B0aW9ucz8ud2l0aFJlc3BvbnNlKSByZXR1cm4gW2F3YWl0IGJvZHksIHJlc3BvbnNlXTtcblx0XHRyZXR1cm4gYm9keTtcblx0fVxuXHQvKipcblx0KiBQcm90ZWN0ZWQgaGVscGVyIGZvciBzdHJlYW1pbmcgd2l0aCBhdXRvbWF0aWMgcmV0cnkgbG9naWMuXG5cdCogSGFuZGxlcyBib3RoIGluaXRpYWwgcmVxdWVzdHMgYW5kIHJlY29ubmVjdGlvbnMgd2l0aCBTU0UuXG5cdCovXG5cdGFzeW5jICpzdHJlYW1XaXRoUmV0cnkoY29uZmlnKSB7XG5cdFx0Y29uc3QgbWFrZVJlcXVlc3QgPSBhc3luYyAocmVjb25uZWN0UGFyYW1zKSA9PiB7XG5cdFx0XHRjb25zdCByZXF1ZXN0RW5kcG9pbnQgPSByZWNvbm5lY3RQYXJhbXM/LnJlY29ubmVjdFBhdGggfHwgY29uZmlnLmVuZHBvaW50O1xuXHRcdFx0Y29uc3QgaXNSZWNvbm5lY3QgPSAhIXJlY29ubmVjdFBhcmFtcz8ubGFzdEV2ZW50SWQ7XG5cdFx0XHRjb25zdCBtZXRob2QgPSBpc1JlY29ubmVjdCA/IFwiR0VUXCIgOiBjb25maWcubWV0aG9kIHx8IFwiR0VUXCI7XG5cdFx0XHRjb25zdCByZXF1ZXN0SGVhZGVycyA9IGlzUmVjb25uZWN0ICYmIHJlY29ubmVjdFBhcmFtcz8ubGFzdEV2ZW50SWQgPyB7XG5cdFx0XHRcdC4uLmNvbmZpZy5oZWFkZXJzLFxuXHRcdFx0XHRcIkxhc3QtRXZlbnQtSURcIjogcmVjb25uZWN0UGFyYW1zLmxhc3RFdmVudElkXG5cdFx0XHR9IDogY29uZmlnLmhlYWRlcnM7XG5cdFx0XHRsZXQgW3VybCwgaW5pdF0gPSB0aGlzLnByZXBhcmVGZXRjaE9wdGlvbnMocmVxdWVzdEVuZHBvaW50LCB7XG5cdFx0XHRcdG1ldGhvZCxcblx0XHRcdFx0dGltZW91dE1zOiBudWxsLFxuXHRcdFx0XHRzaWduYWw6IGNvbmZpZy5zaWduYWwsXG5cdFx0XHRcdGhlYWRlcnM6IHJlcXVlc3RIZWFkZXJzLFxuXHRcdFx0XHRwYXJhbXM6IGNvbmZpZy5wYXJhbXMsXG5cdFx0XHRcdGpzb246IGlzUmVjb25uZWN0ID8gdm9pZCAwIDogY29uZmlnLmpzb25cblx0XHRcdH0pO1xuXHRcdFx0aWYgKHRoaXMub25SZXF1ZXN0ICE9IG51bGwpIGluaXQgPSBhd2FpdCB0aGlzLm9uUmVxdWVzdCh1cmwsIGluaXQpO1xuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFzeW5jQ2FsbGVyLmZldGNoKHVybCwgaW5pdCk7XG5cdFx0XHRpZiAoIWlzUmVjb25uZWN0ICYmIGNvbmZpZy5vbkluaXRpYWxSZXNwb25zZSkgYXdhaXQgY29uZmlnLm9uSW5pdGlhbFJlc3BvbnNlKHJlc3BvbnNlKTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHJlc3BvbnNlLFxuXHRcdFx0XHRzdHJlYW06IChyZXNwb25zZS5ib2R5IHx8IG5ldyBSZWFkYWJsZVN0cmVhbSh7IHN0YXJ0OiAoY3RybCkgPT4gY3RybC5jbG9zZSgpIH0pKS5waXBlVGhyb3VnaChCeXRlc0xpbmVEZWNvZGVyKCkpLnBpcGVUaHJvdWdoKFNTRURlY29kZXIoKSlcblx0XHRcdH07XG5cdFx0fTtcblx0XHR5aWVsZCogc3RyZWFtV2l0aFJldHJ5KG1ha2VSZXF1ZXN0LCB7XG5cdFx0XHRtYXhSZXRyaWVzOiBjb25maWcubWF4UmV0cmllcyA/PyA1LFxuXHRcdFx0c2lnbmFsOiBjb25maWcuc2lnbmFsLFxuXHRcdFx0b25SZWNvbm5lY3Q6IGNvbmZpZy5vblJlY29ubmVjdFxuXHRcdH0pO1xuXHR9XG59O1xudmFyIENyb25zQ2xpZW50ID0gY2xhc3MgZXh0ZW5kcyBCYXNlQ2xpZW50IHtcblx0LyoqXG5cdCpcblx0KiBAcGFyYW0gdGhyZWFkSWQgVGhlIElEIG9mIHRoZSB0aHJlYWQuXG5cdCogQHBhcmFtIGFzc2lzdGFudElkIEFzc2lzdGFudCBJRCB0byB1c2UgZm9yIHRoaXMgY3JvbiBqb2IuXG5cdCogQHBhcmFtIHBheWxvYWQgUGF5bG9hZCBmb3IgY3JlYXRpbmcgYSBjcm9uIGpvYi5cblx0KiBAcmV0dXJucyBUaGUgY3JlYXRlZCBiYWNrZ3JvdW5kIHJ1bi5cblx0Ki9cblx0YXN5bmMgY3JlYXRlRm9yVGhyZWFkKHRocmVhZElkLCBhc3Npc3RhbnRJZCwgcGF5bG9hZCkge1xuXHRcdGNvbnN0IGpzb24gPSB7XG5cdFx0XHRzY2hlZHVsZTogcGF5bG9hZD8uc2NoZWR1bGUsXG5cdFx0XHRpbnB1dDogcGF5bG9hZD8uaW5wdXQsXG5cdFx0XHRjb25maWc6IHBheWxvYWQ/LmNvbmZpZyxcblx0XHRcdGNvbnRleHQ6IHBheWxvYWQ/LmNvbnRleHQsXG5cdFx0XHRtZXRhZGF0YTogcGF5bG9hZD8ubWV0YWRhdGEsXG5cdFx0XHRhc3Npc3RhbnRfaWQ6IGFzc2lzdGFudElkLFxuXHRcdFx0aW50ZXJydXB0X2JlZm9yZTogcGF5bG9hZD8uaW50ZXJydXB0QmVmb3JlLFxuXHRcdFx0aW50ZXJydXB0X2FmdGVyOiBwYXlsb2FkPy5pbnRlcnJ1cHRBZnRlcixcblx0XHRcdHdlYmhvb2s6IHBheWxvYWQ/LndlYmhvb2ssXG5cdFx0XHRtdWx0aXRhc2tfc3RyYXRlZ3k6IHBheWxvYWQ/Lm11bHRpdGFza1N0cmF0ZWd5LFxuXHRcdFx0aWZfbm90X2V4aXN0czogcGF5bG9hZD8uaWZOb3RFeGlzdHMsXG5cdFx0XHRjaGVja3BvaW50X2R1cmluZzogcGF5bG9hZD8uY2hlY2twb2ludER1cmluZyxcblx0XHRcdGR1cmFiaWxpdHk6IHBheWxvYWQ/LmR1cmFiaWxpdHlcblx0XHR9O1xuXHRcdHJldHVybiB0aGlzLmZldGNoKGAvdGhyZWFkcy8ke3RocmVhZElkfS9ydW5zL2Nyb25zYCwge1xuXHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdGpzb24sXG5cdFx0XHRzaWduYWw6IHBheWxvYWQ/LnNpZ25hbFxuXHRcdH0pO1xuXHR9XG5cdC8qKlxuXHQqXG5cdCogQHBhcmFtIGFzc2lzdGFudElkIEFzc2lzdGFudCBJRCB0byB1c2UgZm9yIHRoaXMgY3JvbiBqb2IuXG5cdCogQHBhcmFtIHBheWxvYWQgUGF5bG9hZCBmb3IgY3JlYXRpbmcgYSBjcm9uIGpvYi5cblx0KiBAcmV0dXJuc1xuXHQqL1xuXHRhc3luYyBjcmVhdGUoYXNzaXN0YW50SWQsIHBheWxvYWQpIHtcblx0XHRjb25zdCBqc29uID0ge1xuXHRcdFx0c2NoZWR1bGU6IHBheWxvYWQ/LnNjaGVkdWxlLFxuXHRcdFx0aW5wdXQ6IHBheWxvYWQ/LmlucHV0LFxuXHRcdFx0Y29uZmlnOiBwYXlsb2FkPy5jb25maWcsXG5cdFx0XHRjb250ZXh0OiBwYXlsb2FkPy5jb250ZXh0LFxuXHRcdFx0bWV0YWRhdGE6IHBheWxvYWQ/Lm1ldGFkYXRhLFxuXHRcdFx0YXNzaXN0YW50X2lkOiBhc3Npc3RhbnRJZCxcblx0XHRcdGludGVycnVwdF9iZWZvcmU6IHBheWxvYWQ/LmludGVycnVwdEJlZm9yZSxcblx0XHRcdGludGVycnVwdF9hZnRlcjogcGF5bG9hZD8uaW50ZXJydXB0QWZ0ZXIsXG5cdFx0XHR3ZWJob29rOiBwYXlsb2FkPy53ZWJob29rLFxuXHRcdFx0b25fcnVuX2NvbXBsZXRlZDogcGF5bG9hZD8ub25SdW5Db21wbGV0ZWQsXG5cdFx0XHRtdWx0aXRhc2tfc3RyYXRlZ3k6IHBheWxvYWQ/Lm11bHRpdGFza1N0cmF0ZWd5LFxuXHRcdFx0aWZfbm90X2V4aXN0czogcGF5bG9hZD8uaWZOb3RFeGlzdHMsXG5cdFx0XHRjaGVja3BvaW50X2R1cmluZzogcGF5bG9hZD8uY2hlY2twb2ludER1cmluZyxcblx0XHRcdGR1cmFiaWxpdHk6IHBheWxvYWQ/LmR1cmFiaWxpdHlcblx0XHR9O1xuXHRcdHJldHVybiB0aGlzLmZldGNoKGAvcnVucy9jcm9uc2AsIHtcblx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRqc29uLFxuXHRcdFx0c2lnbmFsOiBwYXlsb2FkPy5zaWduYWxcblx0XHR9KTtcblx0fVxuXHQvKipcblx0KlxuXHQqIEBwYXJhbSBjcm9uSWQgQ3JvbiBJRCBvZiBDcm9uIGpvYiB0byBkZWxldGUuXG5cdCovXG5cdGFzeW5jIGRlbGV0ZShjcm9uSWQsIG9wdGlvbnMpIHtcblx0XHRhd2FpdCB0aGlzLmZldGNoKGAvcnVucy9jcm9ucy8ke2Nyb25JZH1gLCB7XG5cdFx0XHRtZXRob2Q6IFwiREVMRVRFXCIsXG5cdFx0XHRzaWduYWw6IG9wdGlvbnM/LnNpZ25hbFxuXHRcdH0pO1xuXHR9XG5cdC8qKlxuXHQqXG5cdCogQHBhcmFtIHF1ZXJ5IFF1ZXJ5IG9wdGlvbnMuXG5cdCogQHJldHVybnMgTGlzdCBvZiBjcm9ucy5cblx0Ki9cblx0YXN5bmMgc2VhcmNoKHF1ZXJ5KSB7XG5cdFx0cmV0dXJuIHRoaXMuZmV0Y2goXCIvcnVucy9jcm9ucy9zZWFyY2hcIiwge1xuXHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdGpzb246IHtcblx0XHRcdFx0YXNzaXN0YW50X2lkOiBxdWVyeT8uYXNzaXN0YW50SWQgPz8gdm9pZCAwLFxuXHRcdFx0XHR0aHJlYWRfaWQ6IHF1ZXJ5Py50aHJlYWRJZCA/PyB2b2lkIDAsXG5cdFx0XHRcdGxpbWl0OiBxdWVyeT8ubGltaXQgPz8gMTAsXG5cdFx0XHRcdG9mZnNldDogcXVlcnk/Lm9mZnNldCA/PyAwLFxuXHRcdFx0XHRzb3J0X2J5OiBxdWVyeT8uc29ydEJ5ID8/IHZvaWQgMCxcblx0XHRcdFx0c29ydF9vcmRlcjogcXVlcnk/LnNvcnRPcmRlciA/PyB2b2lkIDAsXG5cdFx0XHRcdHNlbGVjdDogcXVlcnk/LnNlbGVjdCA/PyB2b2lkIDBcblx0XHRcdH0sXG5cdFx0XHRzaWduYWw6IHF1ZXJ5Py5zaWduYWxcblx0XHR9KTtcblx0fVxuXHQvKipcblx0KiBDb3VudCBjcm9uIGpvYnMgbWF0Y2hpbmcgZmlsdGVycy5cblx0KlxuXHQqIEBwYXJhbSBxdWVyeS5hc3Npc3RhbnRJZCBBc3Npc3RhbnQgSUQgdG8gZmlsdGVyIGJ5LlxuXHQqIEBwYXJhbSBxdWVyeS50aHJlYWRJZCBUaHJlYWQgSUQgdG8gZmlsdGVyIGJ5LlxuXHQqIEByZXR1cm5zIE51bWJlciBvZiBjcm9uIGpvYnMgbWF0Y2hpbmcgdGhlIGNyaXRlcmlhLlxuXHQqL1xuXHRhc3luYyBjb3VudChxdWVyeSkge1xuXHRcdHJldHVybiB0aGlzLmZldGNoKGAvcnVucy9jcm9ucy9jb3VudGAsIHtcblx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRqc29uOiB7XG5cdFx0XHRcdGFzc2lzdGFudF9pZDogcXVlcnk/LmFzc2lzdGFudElkID8/IHZvaWQgMCxcblx0XHRcdFx0dGhyZWFkX2lkOiBxdWVyeT8udGhyZWFkSWQgPz8gdm9pZCAwXG5cdFx0XHR9LFxuXHRcdFx0c2lnbmFsOiBxdWVyeT8uc2lnbmFsXG5cdFx0fSk7XG5cdH1cbn07XG52YXIgQXNzaXN0YW50c0NsaWVudCA9IGNsYXNzIGV4dGVuZHMgQmFzZUNsaWVudCB7XG5cdC8qKlxuXHQqIEdldCBhbiBhc3Npc3RhbnQgYnkgSUQuXG5cdCpcblx0KiBAcGFyYW0gYXNzaXN0YW50SWQgVGhlIElEIG9mIHRoZSBhc3Npc3RhbnQuXG5cdCogQHJldHVybnMgQXNzaXN0YW50XG5cdCovXG5cdGFzeW5jIGdldChhc3Npc3RhbnRJZCwgb3B0aW9ucykge1xuXHRcdHJldHVybiB0aGlzLmZldGNoKGAvYXNzaXN0YW50cy8ke2Fzc2lzdGFudElkfWAsIHsgc2lnbmFsOiBvcHRpb25zPy5zaWduYWwgfSk7XG5cdH1cblx0LyoqXG5cdCogR2V0IHRoZSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBncmFwaCBhc3NpZ25lZCB0byBhIHJ1bm5hYmxlXG5cdCogQHBhcmFtIGFzc2lzdGFudElkIFRoZSBJRCBvZiB0aGUgYXNzaXN0YW50LlxuXHQqIEBwYXJhbSBvcHRpb25zLnhyYXkgV2hldGhlciB0byBpbmNsdWRlIHN1YmdyYXBocyBpbiB0aGUgc2VyaWFsaXplZCBncmFwaCByZXByZXNlbnRhdGlvbi4gSWYgYW4gaW50ZWdlciB2YWx1ZSBpcyBwcm92aWRlZCwgb25seSBzdWJncmFwaHMgd2l0aCBhIGRlcHRoIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgdmFsdWUgd2lsbCBiZSBpbmNsdWRlZC5cblx0KiBAcmV0dXJucyBTZXJpYWxpemVkIGdyYXBoXG5cdCovXG5cdGFzeW5jIGdldEdyYXBoKGFzc2lzdGFudElkLCBvcHRpb25zKSB7XG5cdFx0cmV0dXJuIHRoaXMuZmV0Y2goYC9hc3Npc3RhbnRzLyR7YXNzaXN0YW50SWR9L2dyYXBoYCwge1xuXHRcdFx0cGFyYW1zOiB7IHhyYXk6IG9wdGlvbnM/LnhyYXkgfSxcblx0XHRcdHNpZ25hbDogb3B0aW9ucz8uc2lnbmFsXG5cdFx0fSk7XG5cdH1cblx0LyoqXG5cdCogR2V0IHRoZSBzdGF0ZSBhbmQgY29uZmlnIHNjaGVtYSBvZiB0aGUgZ3JhcGggYXNzaWduZWQgdG8gYSBydW5uYWJsZVxuXHQqIEBwYXJhbSBhc3Npc3RhbnRJZCBUaGUgSUQgb2YgdGhlIGFzc2lzdGFudC5cblx0KiBAcmV0dXJucyBHcmFwaCBzY2hlbWFcblx0Ki9cblx0YXN5bmMgZ2V0U2NoZW1hcyhhc3Npc3RhbnRJZCwgb3B0aW9ucykge1xuXHRcdHJldHVybiB0aGlzLmZldGNoKGAvYXNzaXN0YW50cy8ke2Fzc2lzdGFudElkfS9zY2hlbWFzYCwgeyBzaWduYWw6IG9wdGlvbnM/LnNpZ25hbCB9KTtcblx0fVxuXHQvKipcblx0KiBHZXQgdGhlIHNjaGVtYXMgb2YgYW4gYXNzaXN0YW50IGJ5IElELlxuXHQqXG5cdCogQHBhcmFtIGFzc2lzdGFudElkIFRoZSBJRCBvZiB0aGUgYXNzaXN0YW50IHRvIGdldCB0aGUgc2NoZW1hIG9mLlxuXHQqIEBwYXJhbSBvcHRpb25zIEFkZGl0aW9uYWwgb3B0aW9ucyBmb3IgZ2V0dGluZyBzdWJncmFwaHMsIHN1Y2ggYXMgbmFtZXNwYWNlIG9yIHJlY3Vyc2lvbiBleHRyYWN0aW9uLlxuXHQqIEByZXR1cm5zIFRoZSBzdWJncmFwaHMgb2YgdGhlIGFzc2lzdGFudC5cblx0Ki9cblx0YXN5bmMgZ2V0U3ViZ3JhcGhzKGFzc2lzdGFudElkLCBvcHRpb25zKSB7XG5cdFx0aWYgKG9wdGlvbnM/Lm5hbWVzcGFjZSkgcmV0dXJuIHRoaXMuZmV0Y2goYC9hc3Npc3RhbnRzLyR7YXNzaXN0YW50SWR9L3N1YmdyYXBocy8ke29wdGlvbnMubmFtZXNwYWNlfWAsIHtcblx0XHRcdHBhcmFtczogeyByZWN1cnNlOiBvcHRpb25zPy5yZWN1cnNlIH0sXG5cdFx0XHRzaWduYWw6IG9wdGlvbnM/LnNpZ25hbFxuXHRcdH0pO1xuXHRcdHJldHVybiB0aGlzLmZldGNoKGAvYXNzaXN0YW50cy8ke2Fzc2lzdGFudElkfS9zdWJncmFwaHNgLCB7XG5cdFx0XHRwYXJhbXM6IHsgcmVjdXJzZTogb3B0aW9ucz8ucmVjdXJzZSB9LFxuXHRcdFx0c2lnbmFsOiBvcHRpb25zPy5zaWduYWxcblx0XHR9KTtcblx0fVxuXHQvKipcblx0KiBDcmVhdGUgYSBuZXcgYXNzaXN0YW50LlxuXHQqIEBwYXJhbSBwYXlsb2FkIFBheWxvYWQgZm9yIGNyZWF0aW5nIGFuIGFzc2lzdGFudC5cblx0KiBAcmV0dXJucyBUaGUgY3JlYXRlZCBhc3Npc3RhbnQuXG5cdCovXG5cdGFzeW5jIGNyZWF0ZShwYXlsb2FkKSB7XG5cdFx0cmV0dXJuIHRoaXMuZmV0Y2goXCIvYXNzaXN0YW50c1wiLCB7XG5cdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0anNvbjoge1xuXHRcdFx0XHRncmFwaF9pZDogcGF5bG9hZC5ncmFwaElkLFxuXHRcdFx0XHRjb25maWc6IHBheWxvYWQuY29uZmlnLFxuXHRcdFx0XHRjb250ZXh0OiBwYXlsb2FkLmNvbnRleHQsXG5cdFx0XHRcdG1ldGFkYXRhOiBwYXlsb2FkLm1ldGFkYXRhLFxuXHRcdFx0XHRhc3Npc3RhbnRfaWQ6IHBheWxvYWQuYXNzaXN0YW50SWQsXG5cdFx0XHRcdGlmX2V4aXN0czogcGF5bG9hZC5pZkV4aXN0cyxcblx0XHRcdFx0bmFtZTogcGF5bG9hZC5uYW1lLFxuXHRcdFx0XHRkZXNjcmlwdGlvbjogcGF5bG9hZC5kZXNjcmlwdGlvblxuXHRcdFx0fSxcblx0XHRcdHNpZ25hbDogcGF5bG9hZC5zaWduYWxcblx0XHR9KTtcblx0fVxuXHQvKipcblx0KiBVcGRhdGUgYW4gYXNzaXN0YW50LlxuXHQqIEBwYXJhbSBhc3Npc3RhbnRJZCBJRCBvZiB0aGUgYXNzaXN0YW50LlxuXHQqIEBwYXJhbSBwYXlsb2FkIFBheWxvYWQgZm9yIHVwZGF0aW5nIHRoZSBhc3Npc3RhbnQuXG5cdCogQHJldHVybnMgVGhlIHVwZGF0ZWQgYXNzaXN0YW50LlxuXHQqL1xuXHRhc3luYyB1cGRhdGUoYXNzaXN0YW50SWQsIHBheWxvYWQpIHtcblx0XHRyZXR1cm4gdGhpcy5mZXRjaChgL2Fzc2lzdGFudHMvJHthc3Npc3RhbnRJZH1gLCB7XG5cdFx0XHRtZXRob2Q6IFwiUEFUQ0hcIixcblx0XHRcdGpzb246IHtcblx0XHRcdFx0Z3JhcGhfaWQ6IHBheWxvYWQuZ3JhcGhJZCxcblx0XHRcdFx0Y29uZmlnOiBwYXlsb2FkLmNvbmZpZyxcblx0XHRcdFx0Y29udGV4dDogcGF5bG9hZC5jb250ZXh0LFxuXHRcdFx0XHRtZXRhZGF0YTogcGF5bG9hZC5tZXRhZGF0YSxcblx0XHRcdFx0bmFtZTogcGF5bG9hZC5uYW1lLFxuXHRcdFx0XHRkZXNjcmlwdGlvbjogcGF5bG9hZC5kZXNjcmlwdGlvblxuXHRcdFx0fSxcblx0XHRcdHNpZ25hbDogcGF5bG9hZC5zaWduYWxcblx0XHR9KTtcblx0fVxuXHQvKipcblx0KiBEZWxldGUgYW4gYXNzaXN0YW50LlxuXHQqXG5cdCogQHBhcmFtIGFzc2lzdGFudElkIElEIG9mIHRoZSBhc3Npc3RhbnQuXG5cdCogQHBhcmFtIGRlbGV0ZVRocmVhZHMgSWYgdHJ1ZSwgZGVsZXRlIGFsbCB0aHJlYWRzIHdpdGggYG1ldGFkYXRhLmFzc2lzdGFudF9pZGAgZXF1YWwgdG8gYGFzc2lzdGFudElkYC4gRGVmYXVsdHMgdG8gZmFsc2UuXG5cdCovXG5cdGFzeW5jIGRlbGV0ZShhc3Npc3RhbnRJZCwgb3B0aW9ucykge1xuXHRcdHJldHVybiB0aGlzLmZldGNoKGAvYXNzaXN0YW50cy8ke2Fzc2lzdGFudElkfT9kZWxldGVfdGhyZWFkcz0ke29wdGlvbnM/LmRlbGV0ZVRocmVhZHMgPz8gZmFsc2V9YCwge1xuXHRcdFx0bWV0aG9kOiBcIkRFTEVURVwiLFxuXHRcdFx0c2lnbmFsOiBvcHRpb25zPy5zaWduYWxcblx0XHR9KTtcblx0fVxuXHRhc3luYyBzZWFyY2gocXVlcnkpIHtcblx0XHRjb25zdCBqc29uID0ge1xuXHRcdFx0Z3JhcGhfaWQ6IHF1ZXJ5Py5ncmFwaElkID8/IHZvaWQgMCxcblx0XHRcdG5hbWU6IHF1ZXJ5Py5uYW1lID8/IHZvaWQgMCxcblx0XHRcdG1ldGFkYXRhOiBxdWVyeT8ubWV0YWRhdGEgPz8gdm9pZCAwLFxuXHRcdFx0bGltaXQ6IHF1ZXJ5Py5saW1pdCA/PyAxMCxcblx0XHRcdG9mZnNldDogcXVlcnk/Lm9mZnNldCA/PyAwLFxuXHRcdFx0c29ydF9ieTogcXVlcnk/LnNvcnRCeSA/PyB2b2lkIDAsXG5cdFx0XHRzb3J0X29yZGVyOiBxdWVyeT8uc29ydE9yZGVyID8/IHZvaWQgMCxcblx0XHRcdHNlbGVjdDogcXVlcnk/LnNlbGVjdCA/PyB2b2lkIDBcblx0XHR9O1xuXHRcdGNvbnN0IFthc3Npc3RhbnRzLCByZXNwb25zZV0gPSBhd2FpdCB0aGlzLmZldGNoKFwiL2Fzc2lzdGFudHMvc2VhcmNoXCIsIHtcblx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRqc29uLFxuXHRcdFx0d2l0aFJlc3BvbnNlOiB0cnVlLFxuXHRcdFx0c2lnbmFsOiBxdWVyeT8uc2lnbmFsXG5cdFx0fSk7XG5cdFx0aWYgKHF1ZXJ5Py5pbmNsdWRlUGFnaW5hdGlvbikgcmV0dXJuIHtcblx0XHRcdGFzc2lzdGFudHMsXG5cdFx0XHRuZXh0OiByZXNwb25zZS5oZWFkZXJzLmdldChcIlgtUGFnaW5hdGlvbi1OZXh0XCIpXG5cdFx0fTtcblx0XHRyZXR1cm4gYXNzaXN0YW50cztcblx0fVxuXHQvKipcblx0KiBDb3VudCBhc3Npc3RhbnRzIG1hdGNoaW5nIGZpbHRlcnMuXG5cdCpcblx0KiBAcGFyYW0gcXVlcnkubWV0YWRhdGEgTWV0YWRhdGEgdG8gZmlsdGVyIGJ5LiBFeGFjdCBtYXRjaCBmb3IgZWFjaCBrZXkvdmFsdWUuXG5cdCogQHBhcmFtIHF1ZXJ5LmdyYXBoSWQgT3B0aW9uYWwgZ3JhcGggaWQgdG8gZmlsdGVyIGJ5LlxuXHQqIEBwYXJhbSBxdWVyeS5uYW1lIE9wdGlvbmFsIG5hbWUgdG8gZmlsdGVyIGJ5LlxuXHQqIEByZXR1cm5zIE51bWJlciBvZiBhc3Npc3RhbnRzIG1hdGNoaW5nIHRoZSBjcml0ZXJpYS5cblx0Ki9cblx0YXN5bmMgY291bnQocXVlcnkpIHtcblx0XHRyZXR1cm4gdGhpcy5mZXRjaChgL2Fzc2lzdGFudHMvY291bnRgLCB7XG5cdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0anNvbjoge1xuXHRcdFx0XHRtZXRhZGF0YTogcXVlcnk/Lm1ldGFkYXRhID8/IHZvaWQgMCxcblx0XHRcdFx0Z3JhcGhfaWQ6IHF1ZXJ5Py5ncmFwaElkID8/IHZvaWQgMCxcblx0XHRcdFx0bmFtZTogcXVlcnk/Lm5hbWUgPz8gdm9pZCAwXG5cdFx0XHR9LFxuXHRcdFx0c2lnbmFsOiBxdWVyeT8uc2lnbmFsXG5cdFx0fSk7XG5cdH1cblx0LyoqXG5cdCogTGlzdCBhbGwgdmVyc2lvbnMgb2YgYW4gYXNzaXN0YW50LlxuXHQqXG5cdCogQHBhcmFtIGFzc2lzdGFudElkIElEIG9mIHRoZSBhc3Npc3RhbnQuXG5cdCogQHJldHVybnMgTGlzdCBvZiBhc3Npc3RhbnQgdmVyc2lvbnMuXG5cdCovXG5cdGFzeW5jIGdldFZlcnNpb25zKGFzc2lzdGFudElkLCBwYXlsb2FkKSB7XG5cdFx0cmV0dXJuIHRoaXMuZmV0Y2goYC9hc3Npc3RhbnRzLyR7YXNzaXN0YW50SWR9L3ZlcnNpb25zYCwge1xuXHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdGpzb246IHtcblx0XHRcdFx0bWV0YWRhdGE6IHBheWxvYWQ/Lm1ldGFkYXRhID8/IHZvaWQgMCxcblx0XHRcdFx0bGltaXQ6IHBheWxvYWQ/LmxpbWl0ID8/IDEwLFxuXHRcdFx0XHRvZmZzZXQ6IHBheWxvYWQ/Lm9mZnNldCA/PyAwXG5cdFx0XHR9LFxuXHRcdFx0c2lnbmFsOiBwYXlsb2FkPy5zaWduYWxcblx0XHR9KTtcblx0fVxuXHQvKipcblx0KiBDaGFuZ2UgdGhlIHZlcnNpb24gb2YgYW4gYXNzaXN0YW50LlxuXHQqXG5cdCogQHBhcmFtIGFzc2lzdGFudElkIElEIG9mIHRoZSBhc3Npc3RhbnQuXG5cdCogQHBhcmFtIHZlcnNpb24gVGhlIHZlcnNpb24gdG8gY2hhbmdlIHRvLlxuXHQqIEByZXR1cm5zIFRoZSB1cGRhdGVkIGFzc2lzdGFudC5cblx0Ki9cblx0YXN5bmMgc2V0TGF0ZXN0KGFzc2lzdGFudElkLCB2ZXJzaW9uLCBvcHRpb25zKSB7XG5cdFx0cmV0dXJuIHRoaXMuZmV0Y2goYC9hc3Npc3RhbnRzLyR7YXNzaXN0YW50SWR9L2xhdGVzdGAsIHtcblx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRqc29uOiB7IHZlcnNpb24gfSxcblx0XHRcdHNpZ25hbDogb3B0aW9ucz8uc2lnbmFsXG5cdFx0fSk7XG5cdH1cbn07XG52YXIgVGhyZWFkc0NsaWVudCA9IGNsYXNzIGV4dGVuZHMgQmFzZUNsaWVudCB7XG5cdC8qKlxuXHQqIEdldCBhIHRocmVhZCBieSBJRC5cblx0KlxuXHQqIEBwYXJhbSB0aHJlYWRJZCBJRCBvZiB0aGUgdGhyZWFkLlxuXHQqIEByZXR1cm5zIFRoZSB0aHJlYWQuXG5cdCovXG5cdGFzeW5jIGdldCh0aHJlYWRJZCwgb3B0aW9ucykge1xuXHRcdHJldHVybiB0aGlzLmZldGNoKGAvdGhyZWFkcy8ke3RocmVhZElkfWAsIHsgc2lnbmFsOiBvcHRpb25zPy5zaWduYWwgfSk7XG5cdH1cblx0LyoqXG5cdCogQ3JlYXRlIGEgbmV3IHRocmVhZC5cblx0KlxuXHQqIEBwYXJhbSBwYXlsb2FkIFBheWxvYWQgZm9yIGNyZWF0aW5nIGEgdGhyZWFkLlxuXHQqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHRocmVhZC5cblx0Ki9cblx0YXN5bmMgY3JlYXRlKHBheWxvYWQpIHtcblx0XHRjb25zdCB0dGxQYXlsb2FkID0gdHlwZW9mIHBheWxvYWQ/LnR0bCA9PT0gXCJudW1iZXJcIiA/IHtcblx0XHRcdHR0bDogcGF5bG9hZC50dGwsXG5cdFx0XHRzdHJhdGVneTogXCJkZWxldGVcIlxuXHRcdH0gOiBwYXlsb2FkPy50dGw7XG5cdFx0cmV0dXJuIHRoaXMuZmV0Y2goYC90aHJlYWRzYCwge1xuXHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdGpzb246IHtcblx0XHRcdFx0bWV0YWRhdGE6IHtcblx0XHRcdFx0XHQuLi5wYXlsb2FkPy5tZXRhZGF0YSxcblx0XHRcdFx0XHRncmFwaF9pZDogcGF5bG9hZD8uZ3JhcGhJZFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR0aHJlYWRfaWQ6IHBheWxvYWQ/LnRocmVhZElkLFxuXHRcdFx0XHRpZl9leGlzdHM6IHBheWxvYWQ/LmlmRXhpc3RzLFxuXHRcdFx0XHRzdXBlcnN0ZXBzOiBwYXlsb2FkPy5zdXBlcnN0ZXBzPy5tYXAoKHMpID0+ICh7IHVwZGF0ZXM6IHMudXBkYXRlcy5tYXAoKHUpID0+ICh7XG5cdFx0XHRcdFx0dmFsdWVzOiB1LnZhbHVlcyxcblx0XHRcdFx0XHRjb21tYW5kOiB1LmNvbW1hbmQsXG5cdFx0XHRcdFx0YXNfbm9kZTogdS5hc05vZGVcblx0XHRcdFx0fSkpIH0pKSxcblx0XHRcdFx0dHRsOiB0dGxQYXlsb2FkXG5cdFx0XHR9LFxuXHRcdFx0c2lnbmFsOiBwYXlsb2FkPy5zaWduYWxcblx0XHR9KTtcblx0fVxuXHQvKipcblx0KiBDb3B5IGFuIGV4aXN0aW5nIHRocmVhZFxuXHQqIEBwYXJhbSB0aHJlYWRJZCBJRCBvZiB0aGUgdGhyZWFkIHRvIGJlIGNvcGllZFxuXHQqIEByZXR1cm5zIE5ld2x5IGNvcGllZCB0aHJlYWRcblx0Ki9cblx0YXN5bmMgY29weSh0aHJlYWRJZCwgb3B0aW9ucykge1xuXHRcdHJldHVybiB0aGlzLmZldGNoKGAvdGhyZWFkcy8ke3RocmVhZElkfS9jb3B5YCwge1xuXHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdHNpZ25hbDogb3B0aW9ucz8uc2lnbmFsXG5cdFx0fSk7XG5cdH1cblx0LyoqXG5cdCogVXBkYXRlIGEgdGhyZWFkLlxuXHQqXG5cdCogQHBhcmFtIHRocmVhZElkIElEIG9mIHRoZSB0aHJlYWQuXG5cdCogQHBhcmFtIHBheWxvYWQgUGF5bG9hZCBmb3IgdXBkYXRpbmcgdGhlIHRocmVhZC5cblx0KiBAcmV0dXJucyBUaGUgdXBkYXRlZCB0aHJlYWQuXG5cdCovXG5cdGFzeW5jIHVwZGF0ZSh0aHJlYWRJZCwgcGF5bG9hZCkge1xuXHRcdGNvbnN0IHR0bFBheWxvYWQgPSB0eXBlb2YgcGF5bG9hZD8udHRsID09PSBcIm51bWJlclwiID8ge1xuXHRcdFx0dHRsOiBwYXlsb2FkLnR0bCxcblx0XHRcdHN0cmF0ZWd5OiBcImRlbGV0ZVwiXG5cdFx0fSA6IHBheWxvYWQ/LnR0bDtcblx0XHRyZXR1cm4gdGhpcy5mZXRjaChgL3RocmVhZHMvJHt0aHJlYWRJZH1gLCB7XG5cdFx0XHRtZXRob2Q6IFwiUEFUQ0hcIixcblx0XHRcdGpzb246IHtcblx0XHRcdFx0bWV0YWRhdGE6IHBheWxvYWQ/Lm1ldGFkYXRhLFxuXHRcdFx0XHR0dGw6IHR0bFBheWxvYWRcblx0XHRcdH0sXG5cdFx0XHRzaWduYWw6IHBheWxvYWQ/LnNpZ25hbFxuXHRcdH0pO1xuXHR9XG5cdC8qKlxuXHQqIERlbGV0ZSBhIHRocmVhZC5cblx0KlxuXHQqIEBwYXJhbSB0aHJlYWRJZCBJRCBvZiB0aGUgdGhyZWFkLlxuXHQqL1xuXHRhc3luYyBkZWxldGUodGhyZWFkSWQsIG9wdGlvbnMpIHtcblx0XHRyZXR1cm4gdGhpcy5mZXRjaChgL3RocmVhZHMvJHt0aHJlYWRJZH1gLCB7XG5cdFx0XHRtZXRob2Q6IFwiREVMRVRFXCIsXG5cdFx0XHRzaWduYWw6IG9wdGlvbnM/LnNpZ25hbFxuXHRcdH0pO1xuXHR9XG5cdC8qKlxuXHQqIExpc3QgdGhyZWFkc1xuXHQqXG5cdCogQHBhcmFtIHF1ZXJ5IFF1ZXJ5IG9wdGlvbnNcblx0KiBAcmV0dXJucyBMaXN0IG9mIHRocmVhZHNcblx0Ki9cblx0YXN5bmMgc2VhcmNoKHF1ZXJ5KSB7XG5cdFx0cmV0dXJuIHRoaXMuZmV0Y2goXCIvdGhyZWFkcy9zZWFyY2hcIiwge1xuXHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdGpzb246IHtcblx0XHRcdFx0bWV0YWRhdGE6IHF1ZXJ5Py5tZXRhZGF0YSA/PyB2b2lkIDAsXG5cdFx0XHRcdGlkczogcXVlcnk/LmlkcyA/PyB2b2lkIDAsXG5cdFx0XHRcdGxpbWl0OiBxdWVyeT8ubGltaXQgPz8gMTAsXG5cdFx0XHRcdG9mZnNldDogcXVlcnk/Lm9mZnNldCA/PyAwLFxuXHRcdFx0XHRzdGF0dXM6IHF1ZXJ5Py5zdGF0dXMsXG5cdFx0XHRcdHNvcnRfYnk6IHF1ZXJ5Py5zb3J0QnksXG5cdFx0XHRcdHNvcnRfb3JkZXI6IHF1ZXJ5Py5zb3J0T3JkZXIsXG5cdFx0XHRcdHNlbGVjdDogcXVlcnk/LnNlbGVjdCA/PyB2b2lkIDAsXG5cdFx0XHRcdHZhbHVlczogcXVlcnk/LnZhbHVlcyA/PyB2b2lkIDBcblx0XHRcdH0sXG5cdFx0XHRzaWduYWw6IHF1ZXJ5Py5zaWduYWxcblx0XHR9KTtcblx0fVxuXHQvKipcblx0KiBDb3VudCB0aHJlYWRzIG1hdGNoaW5nIGZpbHRlcnMuXG5cdCpcblx0KiBAcGFyYW0gcXVlcnkubWV0YWRhdGEgVGhyZWFkIG1ldGFkYXRhIHRvIGZpbHRlciBvbi5cblx0KiBAcGFyYW0gcXVlcnkudmFsdWVzIFN0YXRlIHZhbHVlcyB0byBmaWx0ZXIgb24uXG5cdCogQHBhcmFtIHF1ZXJ5LnN0YXR1cyBUaHJlYWQgc3RhdHVzIHRvIGZpbHRlciBvbi5cblx0KiBAcmV0dXJucyBOdW1iZXIgb2YgdGhyZWFkcyBtYXRjaGluZyB0aGUgY3JpdGVyaWEuXG5cdCovXG5cdGFzeW5jIGNvdW50KHF1ZXJ5KSB7XG5cdFx0cmV0dXJuIHRoaXMuZmV0Y2goYC90aHJlYWRzL2NvdW50YCwge1xuXHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdGpzb246IHtcblx0XHRcdFx0bWV0YWRhdGE6IHF1ZXJ5Py5tZXRhZGF0YSA/PyB2b2lkIDAsXG5cdFx0XHRcdHZhbHVlczogcXVlcnk/LnZhbHVlcyA/PyB2b2lkIDAsXG5cdFx0XHRcdHN0YXR1czogcXVlcnk/LnN0YXR1cyA/PyB2b2lkIDBcblx0XHRcdH0sXG5cdFx0XHRzaWduYWw6IHF1ZXJ5Py5zaWduYWxcblx0XHR9KTtcblx0fVxuXHQvKipcblx0KiBHZXQgc3RhdGUgZm9yIGEgdGhyZWFkLlxuXHQqXG5cdCogQHBhcmFtIHRocmVhZElkIElEIG9mIHRoZSB0aHJlYWQuXG5cdCogQHJldHVybnMgVGhyZWFkIHN0YXRlLlxuXHQqL1xuXHRhc3luYyBnZXRTdGF0ZSh0aHJlYWRJZCwgY2hlY2twb2ludCwgb3B0aW9ucykge1xuXHRcdGlmIChjaGVja3BvaW50ICE9IG51bGwpIHtcblx0XHRcdGlmICh0eXBlb2YgY2hlY2twb2ludCAhPT0gXCJzdHJpbmdcIikgcmV0dXJuIHRoaXMuZmV0Y2goYC90aHJlYWRzLyR7dGhyZWFkSWR9L3N0YXRlL2NoZWNrcG9pbnRgLCB7XG5cdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdGpzb246IHtcblx0XHRcdFx0XHRjaGVja3BvaW50LFxuXHRcdFx0XHRcdHN1YmdyYXBoczogb3B0aW9ucz8uc3ViZ3JhcGhzXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHNpZ25hbDogb3B0aW9ucz8uc2lnbmFsXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiB0aGlzLmZldGNoKGAvdGhyZWFkcy8ke3RocmVhZElkfS9zdGF0ZS8ke2NoZWNrcG9pbnR9YCwge1xuXHRcdFx0XHRwYXJhbXM6IHsgc3ViZ3JhcGhzOiBvcHRpb25zPy5zdWJncmFwaHMgfSxcblx0XHRcdFx0c2lnbmFsOiBvcHRpb25zPy5zaWduYWxcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5mZXRjaChgL3RocmVhZHMvJHt0aHJlYWRJZH0vc3RhdGVgLCB7XG5cdFx0XHRwYXJhbXM6IHsgc3ViZ3JhcGhzOiBvcHRpb25zPy5zdWJncmFwaHMgfSxcblx0XHRcdHNpZ25hbDogb3B0aW9ucz8uc2lnbmFsXG5cdFx0fSk7XG5cdH1cblx0LyoqXG5cdCogQWRkIHN0YXRlIHRvIGEgdGhyZWFkLlxuXHQqXG5cdCogQHBhcmFtIHRocmVhZElkIFRoZSBJRCBvZiB0aGUgdGhyZWFkLlxuXHQqIEByZXR1cm5zXG5cdCovXG5cdGFzeW5jIHVwZGF0ZVN0YXRlKHRocmVhZElkLCBvcHRpb25zKSB7XG5cdFx0cmV0dXJuIHRoaXMuZmV0Y2goYC90aHJlYWRzLyR7dGhyZWFkSWR9L3N0YXRlYCwge1xuXHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdGpzb246IHtcblx0XHRcdFx0dmFsdWVzOiBvcHRpb25zLnZhbHVlcyxcblx0XHRcdFx0Y2hlY2twb2ludF9pZDogb3B0aW9ucy5jaGVja3BvaW50SWQsXG5cdFx0XHRcdGNoZWNrcG9pbnQ6IG9wdGlvbnMuY2hlY2twb2ludCxcblx0XHRcdFx0YXNfbm9kZTogb3B0aW9ucz8uYXNOb2RlXG5cdFx0XHR9LFxuXHRcdFx0c2lnbmFsOiBvcHRpb25zPy5zaWduYWxcblx0XHR9KTtcblx0fVxuXHQvKipcblx0KiBQYXRjaCB0aGUgbWV0YWRhdGEgb2YgYSB0aHJlYWQuXG5cdCpcblx0KiBAcGFyYW0gdGhyZWFkSWRPckNvbmZpZyBUaHJlYWQgSUQgb3IgY29uZmlnIHRvIHBhdGNoIHRoZSBzdGF0ZSBvZi5cblx0KiBAcGFyYW0gbWV0YWRhdGEgTWV0YWRhdGEgdG8gcGF0Y2ggdGhlIHN0YXRlIHdpdGguXG5cdCovXG5cdGFzeW5jIHBhdGNoU3RhdGUodGhyZWFkSWRPckNvbmZpZywgbWV0YWRhdGEsIG9wdGlvbnMpIHtcblx0XHRsZXQgdGhyZWFkSWQ7XG5cdFx0aWYgKHR5cGVvZiB0aHJlYWRJZE9yQ29uZmlnICE9PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRpZiAodHlwZW9mIHRocmVhZElkT3JDb25maWcuY29uZmlndXJhYmxlPy50aHJlYWRfaWQgIT09IFwic3RyaW5nXCIpIHRocm93IG5ldyBFcnJvcihcIlRocmVhZCBJRCBpcyByZXF1aXJlZCB3aGVuIHVwZGF0aW5nIHN0YXRlIHdpdGggYSBjb25maWcuXCIpO1xuXHRcdFx0dGhyZWFkSWQgPSB0aHJlYWRJZE9yQ29uZmlnLmNvbmZpZ3VyYWJsZS50aHJlYWRfaWQ7XG5cdFx0fSBlbHNlIHRocmVhZElkID0gdGhyZWFkSWRPckNvbmZpZztcblx0XHRyZXR1cm4gdGhpcy5mZXRjaChgL3RocmVhZHMvJHt0aHJlYWRJZH0vc3RhdGVgLCB7XG5cdFx0XHRtZXRob2Q6IFwiUEFUQ0hcIixcblx0XHRcdGpzb246IHsgbWV0YWRhdGEgfSxcblx0XHRcdHNpZ25hbDogb3B0aW9ucz8uc2lnbmFsXG5cdFx0fSk7XG5cdH1cblx0LyoqXG5cdCogR2V0IGFsbCBwYXN0IHN0YXRlcyBmb3IgYSB0aHJlYWQuXG5cdCpcblx0KiBAcGFyYW0gdGhyZWFkSWQgSUQgb2YgdGhlIHRocmVhZC5cblx0KiBAcGFyYW0gb3B0aW9ucyBBZGRpdGlvbmFsIG9wdGlvbnMuXG5cdCogQHJldHVybnMgTGlzdCBvZiB0aHJlYWQgc3RhdGVzLlxuXHQqL1xuXHRhc3luYyBnZXRIaXN0b3J5KHRocmVhZElkLCBvcHRpb25zKSB7XG5cdFx0cmV0dXJuIHRoaXMuZmV0Y2goYC90aHJlYWRzLyR7dGhyZWFkSWR9L2hpc3RvcnlgLCB7XG5cdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0anNvbjoge1xuXHRcdFx0XHRsaW1pdDogb3B0aW9ucz8ubGltaXQgPz8gMTAsXG5cdFx0XHRcdGJlZm9yZTogb3B0aW9ucz8uYmVmb3JlLFxuXHRcdFx0XHRtZXRhZGF0YTogb3B0aW9ucz8ubWV0YWRhdGEsXG5cdFx0XHRcdGNoZWNrcG9pbnQ6IG9wdGlvbnM/LmNoZWNrcG9pbnRcblx0XHRcdH0sXG5cdFx0XHRzaWduYWw6IG9wdGlvbnM/LnNpZ25hbFxuXHRcdH0pO1xuXHR9XG5cdGFzeW5jICpqb2luU3RyZWFtKHRocmVhZElkLCBvcHRpb25zKSB7XG5cdFx0eWllbGQqIHRoaXMuc3RyZWFtV2l0aFJldHJ5KHtcblx0XHRcdGVuZHBvaW50OiBgL3RocmVhZHMvJHt0aHJlYWRJZH0vc3RyZWFtYCxcblx0XHRcdG1ldGhvZDogXCJHRVRcIixcblx0XHRcdHNpZ25hbDogb3B0aW9ucz8uc2lnbmFsLFxuXHRcdFx0aGVhZGVyczogb3B0aW9ucz8ubGFzdEV2ZW50SWQgPyB7IFwiTGFzdC1FdmVudC1JRFwiOiBvcHRpb25zLmxhc3RFdmVudElkIH0gOiB2b2lkIDAsXG5cdFx0XHRwYXJhbXM6IG9wdGlvbnM/LnN0cmVhbU1vZGUgPyB7IHN0cmVhbV9tb2RlOiBvcHRpb25zLnN0cmVhbU1vZGUgfSA6IHZvaWQgMFxuXHRcdH0pO1xuXHR9XG59O1xudmFyIFJ1bnNDbGllbnQgPSBjbGFzcyBleHRlbmRzIEJhc2VDbGllbnQge1xuXHQvKipcblx0KiBDcmVhdGUgYSBydW4gYW5kIHN0cmVhbSB0aGUgcmVzdWx0cy5cblx0KlxuXHQqIEBwYXJhbSB0aHJlYWRJZCBUaGUgSUQgb2YgdGhlIHRocmVhZC5cblx0KiBAcGFyYW0gYXNzaXN0YW50SWQgQXNzaXN0YW50IElEIHRvIHVzZSBmb3IgdGhpcyBydW4uXG5cdCogQHBhcmFtIHBheWxvYWQgUGF5bG9hZCBmb3IgY3JlYXRpbmcgYSBydW4uXG5cdCovXG5cdGFzeW5jICpzdHJlYW0odGhyZWFkSWQsIGFzc2lzdGFudElkLCBwYXlsb2FkKSB7XG5cdFx0Y29uc3QganNvbiA9IHtcblx0XHRcdGlucHV0OiBwYXlsb2FkPy5pbnB1dCxcblx0XHRcdGNvbW1hbmQ6IHBheWxvYWQ/LmNvbW1hbmQsXG5cdFx0XHRjb25maWc6IHBheWxvYWQ/LmNvbmZpZyxcblx0XHRcdGNvbnRleHQ6IHBheWxvYWQ/LmNvbnRleHQsXG5cdFx0XHRtZXRhZGF0YTogcGF5bG9hZD8ubWV0YWRhdGEsXG5cdFx0XHRzdHJlYW1fbW9kZTogcGF5bG9hZD8uc3RyZWFtTW9kZSxcblx0XHRcdHN0cmVhbV9zdWJncmFwaHM6IHBheWxvYWQ/LnN0cmVhbVN1YmdyYXBocyxcblx0XHRcdHN0cmVhbV9yZXN1bWFibGU6IHBheWxvYWQ/LnN0cmVhbVJlc3VtYWJsZSxcblx0XHRcdGZlZWRiYWNrX2tleXM6IHBheWxvYWQ/LmZlZWRiYWNrS2V5cyxcblx0XHRcdGFzc2lzdGFudF9pZDogYXNzaXN0YW50SWQsXG5cdFx0XHRpbnRlcnJ1cHRfYmVmb3JlOiBwYXlsb2FkPy5pbnRlcnJ1cHRCZWZvcmUsXG5cdFx0XHRpbnRlcnJ1cHRfYWZ0ZXI6IHBheWxvYWQ/LmludGVycnVwdEFmdGVyLFxuXHRcdFx0Y2hlY2twb2ludDogcGF5bG9hZD8uY2hlY2twb2ludCxcblx0XHRcdGNoZWNrcG9pbnRfaWQ6IHBheWxvYWQ/LmNoZWNrcG9pbnRJZCxcblx0XHRcdHdlYmhvb2s6IHBheWxvYWQ/LndlYmhvb2ssXG5cdFx0XHRtdWx0aXRhc2tfc3RyYXRlZ3k6IHBheWxvYWQ/Lm11bHRpdGFza1N0cmF0ZWd5LFxuXHRcdFx0b25fY29tcGxldGlvbjogcGF5bG9hZD8ub25Db21wbGV0aW9uLFxuXHRcdFx0b25fZGlzY29ubmVjdDogcGF5bG9hZD8ub25EaXNjb25uZWN0LFxuXHRcdFx0YWZ0ZXJfc2Vjb25kczogcGF5bG9hZD8uYWZ0ZXJTZWNvbmRzLFxuXHRcdFx0aWZfbm90X2V4aXN0czogcGF5bG9hZD8uaWZOb3RFeGlzdHMsXG5cdFx0XHRjaGVja3BvaW50X2R1cmluZzogcGF5bG9hZD8uY2hlY2twb2ludER1cmluZyxcblx0XHRcdGR1cmFiaWxpdHk6IHBheWxvYWQ/LmR1cmFiaWxpdHlcblx0XHR9O1xuXHRcdHlpZWxkKiB0aGlzLnN0cmVhbVdpdGhSZXRyeSh7XG5cdFx0XHRlbmRwb2ludDogdGhyZWFkSWQgPT0gbnVsbCA/IGAvcnVucy9zdHJlYW1gIDogYC90aHJlYWRzLyR7dGhyZWFkSWR9L3J1bnMvc3RyZWFtYCxcblx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRqc29uLFxuXHRcdFx0c2lnbmFsOiBwYXlsb2FkPy5zaWduYWwsXG5cdFx0XHRvbkluaXRpYWxSZXNwb25zZTogKHJlc3BvbnNlKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHJ1bk1ldGFkYXRhID0gZ2V0UnVuTWV0YWRhdGFGcm9tUmVzcG9uc2UocmVzcG9uc2UpO1xuXHRcdFx0XHRpZiAocnVuTWV0YWRhdGEpIHBheWxvYWQ/Lm9uUnVuQ3JlYXRlZD8uKHJ1bk1ldGFkYXRhKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXHQvKipcblx0KiBDcmVhdGUgYSBydW4uXG5cdCpcblx0KiBAcGFyYW0gdGhyZWFkSWQgVGhlIElEIG9mIHRoZSB0aHJlYWQuXG5cdCogQHBhcmFtIGFzc2lzdGFudElkIEFzc2lzdGFudCBJRCB0byB1c2UgZm9yIHRoaXMgcnVuLlxuXHQqIEBwYXJhbSBwYXlsb2FkIFBheWxvYWQgZm9yIGNyZWF0aW5nIGEgcnVuLlxuXHQqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHJ1bi5cblx0Ki9cblx0YXN5bmMgY3JlYXRlKHRocmVhZElkLCBhc3Npc3RhbnRJZCwgcGF5bG9hZCkge1xuXHRcdGNvbnN0IGpzb24gPSB7XG5cdFx0XHRpbnB1dDogcGF5bG9hZD8uaW5wdXQsXG5cdFx0XHRjb21tYW5kOiBwYXlsb2FkPy5jb21tYW5kLFxuXHRcdFx0Y29uZmlnOiBwYXlsb2FkPy5jb25maWcsXG5cdFx0XHRjb250ZXh0OiBwYXlsb2FkPy5jb250ZXh0LFxuXHRcdFx0bWV0YWRhdGE6IHBheWxvYWQ/Lm1ldGFkYXRhLFxuXHRcdFx0c3RyZWFtX21vZGU6IHBheWxvYWQ/LnN0cmVhbU1vZGUsXG5cdFx0XHRzdHJlYW1fc3ViZ3JhcGhzOiBwYXlsb2FkPy5zdHJlYW1TdWJncmFwaHMsXG5cdFx0XHRzdHJlYW1fcmVzdW1hYmxlOiBwYXlsb2FkPy5zdHJlYW1SZXN1bWFibGUsXG5cdFx0XHRhc3Npc3RhbnRfaWQ6IGFzc2lzdGFudElkLFxuXHRcdFx0aW50ZXJydXB0X2JlZm9yZTogcGF5bG9hZD8uaW50ZXJydXB0QmVmb3JlLFxuXHRcdFx0aW50ZXJydXB0X2FmdGVyOiBwYXlsb2FkPy5pbnRlcnJ1cHRBZnRlcixcblx0XHRcdHdlYmhvb2s6IHBheWxvYWQ/LndlYmhvb2ssXG5cdFx0XHRjaGVja3BvaW50OiBwYXlsb2FkPy5jaGVja3BvaW50LFxuXHRcdFx0Y2hlY2twb2ludF9pZDogcGF5bG9hZD8uY2hlY2twb2ludElkLFxuXHRcdFx0bXVsdGl0YXNrX3N0cmF0ZWd5OiBwYXlsb2FkPy5tdWx0aXRhc2tTdHJhdGVneSxcblx0XHRcdGFmdGVyX3NlY29uZHM6IHBheWxvYWQ/LmFmdGVyU2Vjb25kcyxcblx0XHRcdGlmX25vdF9leGlzdHM6IHBheWxvYWQ/LmlmTm90RXhpc3RzLFxuXHRcdFx0Y2hlY2twb2ludF9kdXJpbmc6IHBheWxvYWQ/LmNoZWNrcG9pbnREdXJpbmcsXG5cdFx0XHRkdXJhYmlsaXR5OiBwYXlsb2FkPy5kdXJhYmlsaXR5LFxuXHRcdFx0bGFuZ3NtaXRoX3RyYWNlcjogcGF5bG9hZD8uX2xhbmdzbWl0aFRyYWNlciA/IHtcblx0XHRcdFx0cHJvamVjdF9uYW1lOiBwYXlsb2FkPy5fbGFuZ3NtaXRoVHJhY2VyPy5wcm9qZWN0TmFtZSxcblx0XHRcdFx0ZXhhbXBsZV9pZDogcGF5bG9hZD8uX2xhbmdzbWl0aFRyYWNlcj8uZXhhbXBsZUlkXG5cdFx0XHR9IDogdm9pZCAwXG5cdFx0fTtcblx0XHRjb25zdCBlbmRwb2ludCA9IHRocmVhZElkID09PSBudWxsID8gXCIvcnVuc1wiIDogYC90aHJlYWRzLyR7dGhyZWFkSWR9L3J1bnNgO1xuXHRcdGNvbnN0IFtydW4sIHJlc3BvbnNlXSA9IGF3YWl0IHRoaXMuZmV0Y2goZW5kcG9pbnQsIHtcblx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRqc29uLFxuXHRcdFx0c2lnbmFsOiBwYXlsb2FkPy5zaWduYWwsXG5cdFx0XHR3aXRoUmVzcG9uc2U6IHRydWVcblx0XHR9KTtcblx0XHRjb25zdCBydW5NZXRhZGF0YSA9IGdldFJ1bk1ldGFkYXRhRnJvbVJlc3BvbnNlKHJlc3BvbnNlKTtcblx0XHRpZiAocnVuTWV0YWRhdGEpIHBheWxvYWQ/Lm9uUnVuQ3JlYXRlZD8uKHJ1bk1ldGFkYXRhKTtcblx0XHRyZXR1cm4gcnVuO1xuXHR9XG5cdC8qKlxuXHQqIENyZWF0ZSBhIGJhdGNoIG9mIHN0YXRlbGVzcyBiYWNrZ3JvdW5kIHJ1bnMuXG5cdCpcblx0KiBAcGFyYW0gcGF5bG9hZHMgQW4gYXJyYXkgb2YgcGF5bG9hZHMgZm9yIGNyZWF0aW5nIHJ1bnMuXG5cdCogQHJldHVybnMgQW4gYXJyYXkgb2YgY3JlYXRlZCBydW5zLlxuXHQqL1xuXHRhc3luYyBjcmVhdGVCYXRjaChwYXlsb2Fkcywgb3B0aW9ucykge1xuXHRcdGNvbnN0IGZpbHRlcmVkUGF5bG9hZHMgPSBwYXlsb2Fkcy5tYXAoKHBheWxvYWQpID0+ICh7XG5cdFx0XHQuLi5wYXlsb2FkLFxuXHRcdFx0YXNzaXN0YW50X2lkOiBwYXlsb2FkLmFzc2lzdGFudElkXG5cdFx0fSkpLm1hcCgocGF5bG9hZCkgPT4ge1xuXHRcdFx0cmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhwYXlsb2FkKS5maWx0ZXIoKFtfLCB2XSkgPT4gdiAhPT0gdm9pZCAwKSk7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHRoaXMuZmV0Y2goXCIvcnVucy9iYXRjaFwiLCB7XG5cdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0anNvbjogZmlsdGVyZWRQYXlsb2Fkcyxcblx0XHRcdHNpZ25hbDogb3B0aW9ucz8uc2lnbmFsXG5cdFx0fSk7XG5cdH1cblx0LyoqXG5cdCogQ3JlYXRlIGEgcnVuIGFuZCB3YWl0IGZvciBpdCB0byBjb21wbGV0ZS5cblx0KlxuXHQqIEBwYXJhbSB0aHJlYWRJZCBUaGUgSUQgb2YgdGhlIHRocmVhZC5cblx0KiBAcGFyYW0gYXNzaXN0YW50SWQgQXNzaXN0YW50IElEIHRvIHVzZSBmb3IgdGhpcyBydW4uXG5cdCogQHBhcmFtIHBheWxvYWQgUGF5bG9hZCBmb3IgY3JlYXRpbmcgYSBydW4uXG5cdCogQHJldHVybnMgVGhlIGxhc3QgdmFsdWVzIGNodW5rIG9mIHRoZSB0aHJlYWQuXG5cdCovXG5cdGFzeW5jIHdhaXQodGhyZWFkSWQsIGFzc2lzdGFudElkLCBwYXlsb2FkKSB7XG5cdFx0Y29uc3QganNvbiA9IHtcblx0XHRcdGlucHV0OiBwYXlsb2FkPy5pbnB1dCxcblx0XHRcdGNvbW1hbmQ6IHBheWxvYWQ/LmNvbW1hbmQsXG5cdFx0XHRjb25maWc6IHBheWxvYWQ/LmNvbmZpZyxcblx0XHRcdGNvbnRleHQ6IHBheWxvYWQ/LmNvbnRleHQsXG5cdFx0XHRtZXRhZGF0YTogcGF5bG9hZD8ubWV0YWRhdGEsXG5cdFx0XHRhc3Npc3RhbnRfaWQ6IGFzc2lzdGFudElkLFxuXHRcdFx0aW50ZXJydXB0X2JlZm9yZTogcGF5bG9hZD8uaW50ZXJydXB0QmVmb3JlLFxuXHRcdFx0aW50ZXJydXB0X2FmdGVyOiBwYXlsb2FkPy5pbnRlcnJ1cHRBZnRlcixcblx0XHRcdGNoZWNrcG9pbnQ6IHBheWxvYWQ/LmNoZWNrcG9pbnQsXG5cdFx0XHRjaGVja3BvaW50X2lkOiBwYXlsb2FkPy5jaGVja3BvaW50SWQsXG5cdFx0XHR3ZWJob29rOiBwYXlsb2FkPy53ZWJob29rLFxuXHRcdFx0bXVsdGl0YXNrX3N0cmF0ZWd5OiBwYXlsb2FkPy5tdWx0aXRhc2tTdHJhdGVneSxcblx0XHRcdG9uX2NvbXBsZXRpb246IHBheWxvYWQ/Lm9uQ29tcGxldGlvbixcblx0XHRcdG9uX2Rpc2Nvbm5lY3Q6IHBheWxvYWQ/Lm9uRGlzY29ubmVjdCxcblx0XHRcdGFmdGVyX3NlY29uZHM6IHBheWxvYWQ/LmFmdGVyU2Vjb25kcyxcblx0XHRcdGlmX25vdF9leGlzdHM6IHBheWxvYWQ/LmlmTm90RXhpc3RzLFxuXHRcdFx0Y2hlY2twb2ludF9kdXJpbmc6IHBheWxvYWQ/LmNoZWNrcG9pbnREdXJpbmcsXG5cdFx0XHRkdXJhYmlsaXR5OiBwYXlsb2FkPy5kdXJhYmlsaXR5LFxuXHRcdFx0bGFuZ3NtaXRoX3RyYWNlcjogcGF5bG9hZD8uX2xhbmdzbWl0aFRyYWNlciA/IHtcblx0XHRcdFx0cHJvamVjdF9uYW1lOiBwYXlsb2FkPy5fbGFuZ3NtaXRoVHJhY2VyPy5wcm9qZWN0TmFtZSxcblx0XHRcdFx0ZXhhbXBsZV9pZDogcGF5bG9hZD8uX2xhbmdzbWl0aFRyYWNlcj8uZXhhbXBsZUlkXG5cdFx0XHR9IDogdm9pZCAwXG5cdFx0fTtcblx0XHRjb25zdCBlbmRwb2ludCA9IHRocmVhZElkID09IG51bGwgPyBgL3J1bnMvd2FpdGAgOiBgL3RocmVhZHMvJHt0aHJlYWRJZH0vcnVucy93YWl0YDtcblx0XHRjb25zdCBbcnVuLCByZXNwb25zZV0gPSBhd2FpdCB0aGlzLmZldGNoKGVuZHBvaW50LCB7XG5cdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0anNvbixcblx0XHRcdHRpbWVvdXRNczogbnVsbCxcblx0XHRcdHNpZ25hbDogcGF5bG9hZD8uc2lnbmFsLFxuXHRcdFx0d2l0aFJlc3BvbnNlOiB0cnVlXG5cdFx0fSk7XG5cdFx0Y29uc3QgcnVuTWV0YWRhdGEgPSBnZXRSdW5NZXRhZGF0YUZyb21SZXNwb25zZShyZXNwb25zZSk7XG5cdFx0aWYgKHJ1bk1ldGFkYXRhKSBwYXlsb2FkPy5vblJ1bkNyZWF0ZWQ/LihydW5NZXRhZGF0YSk7XG5cdFx0aWYgKChwYXlsb2FkPy5yYWlzZUVycm9yICE9PSB2b2lkIDAgPyBwYXlsb2FkLnJhaXNlRXJyb3IgOiB0cnVlKSAmJiBcIl9fZXJyb3JfX1wiIGluIHJ1biAmJiB0eXBlb2YgcnVuLl9fZXJyb3JfXyA9PT0gXCJvYmplY3RcIiAmJiBydW4uX19lcnJvcl9fICYmIFwiZXJyb3JcIiBpbiBydW4uX19lcnJvcl9fICYmIFwibWVzc2FnZVwiIGluIHJ1bi5fX2Vycm9yX18pIHRocm93IG5ldyBFcnJvcihgJHtydW4uX19lcnJvcl9fPy5lcnJvcn06ICR7cnVuLl9fZXJyb3JfXz8ubWVzc2FnZX1gKTtcblx0XHRyZXR1cm4gcnVuO1xuXHR9XG5cdC8qKlxuXHQqIExpc3QgYWxsIHJ1bnMgZm9yIGEgdGhyZWFkLlxuXHQqXG5cdCogQHBhcmFtIHRocmVhZElkIFRoZSBJRCBvZiB0aGUgdGhyZWFkLlxuXHQqIEBwYXJhbSBvcHRpb25zIEZpbHRlcmluZyBhbmQgcGFnaW5hdGlvbiBvcHRpb25zLlxuXHQqIEByZXR1cm5zIExpc3Qgb2YgcnVucy5cblx0Ki9cblx0YXN5bmMgbGlzdCh0aHJlYWRJZCwgb3B0aW9ucykge1xuXHRcdHJldHVybiB0aGlzLmZldGNoKGAvdGhyZWFkcy8ke3RocmVhZElkfS9ydW5zYCwge1xuXHRcdFx0cGFyYW1zOiB7XG5cdFx0XHRcdGxpbWl0OiBvcHRpb25zPy5saW1pdCA/PyAxMCxcblx0XHRcdFx0b2Zmc2V0OiBvcHRpb25zPy5vZmZzZXQgPz8gMCxcblx0XHRcdFx0c3RhdHVzOiBvcHRpb25zPy5zdGF0dXMgPz8gdm9pZCAwLFxuXHRcdFx0XHRzZWxlY3Q6IG9wdGlvbnM/LnNlbGVjdCA/PyB2b2lkIDBcblx0XHRcdH0sXG5cdFx0XHRzaWduYWw6IG9wdGlvbnM/LnNpZ25hbFxuXHRcdH0pO1xuXHR9XG5cdC8qKlxuXHQqIEdldCBhIHJ1biBieSBJRC5cblx0KlxuXHQqIEBwYXJhbSB0aHJlYWRJZCBUaGUgSUQgb2YgdGhlIHRocmVhZC5cblx0KiBAcGFyYW0gcnVuSWQgVGhlIElEIG9mIHRoZSBydW4uXG5cdCogQHJldHVybnMgVGhlIHJ1bi5cblx0Ki9cblx0YXN5bmMgZ2V0KHRocmVhZElkLCBydW5JZCwgb3B0aW9ucykge1xuXHRcdHJldHVybiB0aGlzLmZldGNoKGAvdGhyZWFkcy8ke3RocmVhZElkfS9ydW5zLyR7cnVuSWR9YCwgeyBzaWduYWw6IG9wdGlvbnM/LnNpZ25hbCB9KTtcblx0fVxuXHQvKipcblx0KiBDYW5jZWwgYSBydW4uXG5cdCpcblx0KiBAcGFyYW0gdGhyZWFkSWQgVGhlIElEIG9mIHRoZSB0aHJlYWQuXG5cdCogQHBhcmFtIHJ1bklkIFRoZSBJRCBvZiB0aGUgcnVuLlxuXHQqIEBwYXJhbSB3YWl0IFdoZXRoZXIgdG8gYmxvY2sgd2hlbiBjYW5jZWxpbmdcblx0KiBAcGFyYW0gYWN0aW9uIEFjdGlvbiB0byB0YWtlIHdoZW4gY2FuY2VsbGluZyB0aGUgcnVuLiBQb3NzaWJsZSB2YWx1ZXMgYXJlIGBpbnRlcnJ1cHRgIG9yIGByb2xsYmFja2AuIERlZmF1bHQgaXMgYGludGVycnVwdGAuXG5cdCogQHJldHVybnNcblx0Ki9cblx0YXN5bmMgY2FuY2VsKHRocmVhZElkLCBydW5JZCwgd2FpdCA9IGZhbHNlLCBhY3Rpb24gPSBcImludGVycnVwdFwiLCBvcHRpb25zID0ge30pIHtcblx0XHRyZXR1cm4gdGhpcy5mZXRjaChgL3RocmVhZHMvJHt0aHJlYWRJZH0vcnVucy8ke3J1bklkfS9jYW5jZWxgLCB7XG5cdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0cGFyYW1zOiB7XG5cdFx0XHRcdHdhaXQ6IHdhaXQgPyBcIjFcIiA6IFwiMFwiLFxuXHRcdFx0XHRhY3Rpb25cblx0XHRcdH0sXG5cdFx0XHRzaWduYWw6IG9wdGlvbnM/LnNpZ25hbFxuXHRcdH0pO1xuXHR9XG5cdC8qKlxuXHQqIEJsb2NrIHVudGlsIGEgcnVuIGlzIGRvbmUuXG5cdCpcblx0KiBAcGFyYW0gdGhyZWFkSWQgVGhlIElEIG9mIHRoZSB0aHJlYWQuXG5cdCogQHBhcmFtIHJ1bklkIFRoZSBJRCBvZiB0aGUgcnVuLlxuXHQqIEByZXR1cm5zXG5cdCovXG5cdGFzeW5jIGpvaW4odGhyZWFkSWQsIHJ1bklkLCBvcHRpb25zKSB7XG5cdFx0cmV0dXJuIHRoaXMuZmV0Y2goYC90aHJlYWRzLyR7dGhyZWFkSWR9L3J1bnMvJHtydW5JZH0vam9pbmAsIHtcblx0XHRcdHRpbWVvdXRNczogbnVsbCxcblx0XHRcdHNpZ25hbDogb3B0aW9ucz8uc2lnbmFsXG5cdFx0fSk7XG5cdH1cblx0LyoqXG5cdCogU3RyZWFtIG91dHB1dCBmcm9tIGEgcnVuIGluIHJlYWwtdGltZSwgdW50aWwgdGhlIHJ1biBpcyBkb25lLlxuXHQqXG5cdCogQHBhcmFtIHRocmVhZElkIFRoZSBJRCBvZiB0aGUgdGhyZWFkLiBDYW4gYmUgc2V0IHRvIGBudWxsYCB8IGB1bmRlZmluZWRgIGZvciBzdGF0ZWxlc3MgcnVucy5cblx0KiBAcGFyYW0gcnVuSWQgVGhlIElEIG9mIHRoZSBydW4uXG5cdCogQHBhcmFtIG9wdGlvbnMgQWRkaXRpb25hbCBvcHRpb25zIGZvciBjb250cm9sbGluZyB0aGUgc3RyZWFtIGJlaGF2aW9yOlxuXHQqICAgLSBzaWduYWw6IEFuIEFib3J0U2lnbmFsIHRoYXQgY2FuIGJlIHVzZWQgdG8gY2FuY2VsIHRoZSBzdHJlYW0gcmVxdWVzdFxuXHQqICAgLSBsYXN0RXZlbnRJZDogVGhlIElEIG9mIHRoZSBsYXN0IGV2ZW50IHJlY2VpdmVkLiBDYW4gYmUgdXNlZCB0byByZWNvbm5lY3QgdG8gYSBzdHJlYW0gd2l0aG91dCBsb3NpbmcgZXZlbnRzLlxuXHQqICAgLSBjYW5jZWxPbkRpc2Nvbm5lY3Q6IFdoZW4gdHJ1ZSwgYXV0b21hdGljYWxseSBjYW5jZWxzIHRoZSBydW4gaWYgdGhlIGNsaWVudCBkaXNjb25uZWN0cyBmcm9tIHRoZSBzdHJlYW1cblx0KiAgIC0gc3RyZWFtTW9kZTogQ29udHJvbHMgd2hhdCB0eXBlcyBvZiBldmVudHMgdG8gcmVjZWl2ZSBmcm9tIHRoZSBzdHJlYW0gKGNhbiBiZSBhIHNpbmdsZSBtb2RlIG9yIGFycmF5IG9mIG1vZGVzKVxuXHQqICAgICAgICBNdXN0IGJlIGEgc3Vic2V0IG9mIHRoZSBzdHJlYW0gbW9kZXMgcGFzc2VkIHdoZW4gY3JlYXRpbmcgdGhlIHJ1bi4gQmFja2dyb3VuZCBydW5zIGRlZmF1bHQgdG8gaGF2aW5nIHRoZSB1bmlvbiBvZiBhbGxcblx0KiAgICAgICAgc3RyZWFtIG1vZGVzIGVuYWJsZWQuXG5cdCogQHJldHVybnMgQW4gYXN5bmMgZ2VuZXJhdG9yIHlpZWxkaW5nIHN0cmVhbSBwYXJ0cy5cblx0Ki9cblx0YXN5bmMgKmpvaW5TdHJlYW0odGhyZWFkSWQsIHJ1bklkLCBvcHRpb25zKSB7XG5cdFx0Y29uc3Qgb3B0cyA9IHR5cGVvZiBvcHRpb25zID09PSBcIm9iamVjdFwiICYmIG9wdGlvbnMgIT0gbnVsbCAmJiBvcHRpb25zIGluc3RhbmNlb2YgQWJvcnRTaWduYWwgPyB7IHNpZ25hbDogb3B0aW9ucyB9IDogb3B0aW9ucztcblx0XHR5aWVsZCogdGhpcy5zdHJlYW1XaXRoUmV0cnkoe1xuXHRcdFx0ZW5kcG9pbnQ6IHRocmVhZElkICE9IG51bGwgPyBgL3RocmVhZHMvJHt0aHJlYWRJZH0vcnVucy8ke3J1bklkfS9zdHJlYW1gIDogYC9ydW5zLyR7cnVuSWR9L3N0cmVhbWAsXG5cdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRzaWduYWw6IG9wdHM/LnNpZ25hbCxcblx0XHRcdGhlYWRlcnM6IG9wdHM/Lmxhc3RFdmVudElkID8geyBcIkxhc3QtRXZlbnQtSURcIjogb3B0cy5sYXN0RXZlbnRJZCB9IDogdm9pZCAwLFxuXHRcdFx0cGFyYW1zOiB7XG5cdFx0XHRcdGNhbmNlbF9vbl9kaXNjb25uZWN0OiBvcHRzPy5jYW5jZWxPbkRpc2Nvbm5lY3QgPyBcIjFcIiA6IFwiMFwiLFxuXHRcdFx0XHRzdHJlYW1fbW9kZTogb3B0cz8uc3RyZWFtTW9kZVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdC8qKlxuXHQqIERlbGV0ZSBhIHJ1bi5cblx0KlxuXHQqIEBwYXJhbSB0aHJlYWRJZCBUaGUgSUQgb2YgdGhlIHRocmVhZC5cblx0KiBAcGFyYW0gcnVuSWQgVGhlIElEIG9mIHRoZSBydW4uXG5cdCogQHJldHVybnNcblx0Ki9cblx0YXN5bmMgZGVsZXRlKHRocmVhZElkLCBydW5JZCwgb3B0aW9ucykge1xuXHRcdHJldHVybiB0aGlzLmZldGNoKGAvdGhyZWFkcy8ke3RocmVhZElkfS9ydW5zLyR7cnVuSWR9YCwge1xuXHRcdFx0bWV0aG9kOiBcIkRFTEVURVwiLFxuXHRcdFx0c2lnbmFsOiBvcHRpb25zPy5zaWduYWxcblx0XHR9KTtcblx0fVxufTtcbnZhciBTdG9yZUNsaWVudCA9IGNsYXNzIGV4dGVuZHMgQmFzZUNsaWVudCB7XG5cdC8qKlxuXHQqIFN0b3JlIG9yIHVwZGF0ZSBhbiBpdGVtLlxuXHQqXG5cdCogQHBhcmFtIG5hbWVzcGFjZSBBIGxpc3Qgb2Ygc3RyaW5ncyByZXByZXNlbnRpbmcgdGhlIG5hbWVzcGFjZSBwYXRoLlxuXHQqIEBwYXJhbSBrZXkgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgaXRlbSB3aXRoaW4gdGhlIG5hbWVzcGFjZS5cblx0KiBAcGFyYW0gdmFsdWUgQSBkaWN0aW9uYXJ5IGNvbnRhaW5pbmcgdGhlIGl0ZW0ncyBkYXRhLlxuXHQqIEBwYXJhbSBvcHRpb25zLmluZGV4IENvbnRyb2xzIHNlYXJjaCBpbmRleGluZyAtIG51bGwgKHVzZSBkZWZhdWx0cyksIGZhbHNlIChkaXNhYmxlKSwgb3IgbGlzdCBvZiBmaWVsZCBwYXRocyB0byBpbmRleC5cblx0KiBAcGFyYW0gb3B0aW9ucy50dGwgT3B0aW9uYWwgdGltZS10by1saXZlIGluIG1pbnV0ZXMgZm9yIHRoZSBpdGVtLCBvciBudWxsIGZvciBubyBleHBpcmF0aW9uLlxuXHQqIEByZXR1cm5zIFByb21pc2U8dm9pZD5cblx0KlxuXHQqIEBleGFtcGxlXG5cdCogYGBgdHlwZXNjcmlwdFxuXHQqIGF3YWl0IGNsaWVudC5zdG9yZS5wdXRJdGVtKFxuXHQqICAgW1wiZG9jdW1lbnRzXCIsIFwidXNlcjEyM1wiXSxcblx0KiAgIFwiaXRlbTQ1NlwiLFxuXHQqICAgeyB0aXRsZTogXCJNeSBEb2N1bWVudFwiLCBjb250ZW50OiBcIkhlbGxvIFdvcmxkXCIgfSxcblx0KiAgIHsgdHRsOiA2MCB9IC8vIGV4cGlyZXMgaW4gNjAgbWludXRlc1xuXHQqICk7XG5cdCogYGBgXG5cdCovXG5cdGFzeW5jIHB1dEl0ZW0obmFtZXNwYWNlLCBrZXksIHZhbHVlLCBvcHRpb25zKSB7XG5cdFx0bmFtZXNwYWNlLmZvckVhY2goKGxhYmVsKSA9PiB7XG5cdFx0XHRpZiAobGFiZWwuaW5jbHVkZXMoXCIuXCIpKSB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgbmFtZXNwYWNlIGxhYmVsICcke2xhYmVsfScuIE5hbWVzcGFjZSBsYWJlbHMgY2Fubm90IGNvbnRhaW4gcGVyaW9kcyAoJy4nKWApO1xuXHRcdH0pO1xuXHRcdGNvbnN0IHBheWxvYWQgPSB7XG5cdFx0XHRuYW1lc3BhY2UsXG5cdFx0XHRrZXksXG5cdFx0XHR2YWx1ZSxcblx0XHRcdGluZGV4OiBvcHRpb25zPy5pbmRleCxcblx0XHRcdHR0bDogb3B0aW9ucz8udHRsXG5cdFx0fTtcblx0XHRyZXR1cm4gdGhpcy5mZXRjaChcIi9zdG9yZS9pdGVtc1wiLCB7XG5cdFx0XHRtZXRob2Q6IFwiUFVUXCIsXG5cdFx0XHRqc29uOiBwYXlsb2FkLFxuXHRcdFx0c2lnbmFsOiBvcHRpb25zPy5zaWduYWxcblx0XHR9KTtcblx0fVxuXHQvKipcblx0KiBSZXRyaWV2ZSBhIHNpbmdsZSBpdGVtLlxuXHQqXG5cdCogQHBhcmFtIG5hbWVzcGFjZSBBIGxpc3Qgb2Ygc3RyaW5ncyByZXByZXNlbnRpbmcgdGhlIG5hbWVzcGFjZSBwYXRoLlxuXHQqIEBwYXJhbSBrZXkgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgaXRlbS5cblx0KiBAcGFyYW0gb3B0aW9ucy5yZWZyZXNoVHRsIFdoZXRoZXIgdG8gcmVmcmVzaCB0aGUgVFRMIG9uIHRoaXMgcmVhZCBvcGVyYXRpb24uIElmIG51bGwsIHVzZXMgdGhlIHN0b3JlJ3MgZGVmYXVsdCBiZWhhdmlvci5cblx0KiBAcmV0dXJucyBQcm9taXNlPEl0ZW0+XG5cdCpcblx0KiBAZXhhbXBsZVxuXHQqIGBgYHR5cGVzY3JpcHRcblx0KiBjb25zdCBpdGVtID0gYXdhaXQgY2xpZW50LnN0b3JlLmdldEl0ZW0oXG5cdCogICBbXCJkb2N1bWVudHNcIiwgXCJ1c2VyMTIzXCJdLFxuXHQqICAgXCJpdGVtNDU2XCIsXG5cdCogICB7IHJlZnJlc2hUdGw6IHRydWUgfVxuXHQqICk7XG5cdCogY29uc29sZS5sb2coaXRlbSk7XG5cdCogLy8ge1xuXHQqIC8vICAgbmFtZXNwYWNlOiBbXCJkb2N1bWVudHNcIiwgXCJ1c2VyMTIzXCJdLFxuXHQqIC8vICAga2V5OiBcIml0ZW00NTZcIixcblx0KiAvLyAgIHZhbHVlOiB7IHRpdGxlOiBcIk15IERvY3VtZW50XCIsIGNvbnRlbnQ6IFwiSGVsbG8gV29ybGRcIiB9LFxuXHQqIC8vICAgY3JlYXRlZEF0OiBcIjIwMjQtMDctMzBUMTI6MDA6MDBaXCIsXG5cdCogLy8gICB1cGRhdGVkQXQ6IFwiMjAyNC0wNy0zMFQxMjowMDowMFpcIlxuXHQqIC8vIH1cblx0KiBgYGBcblx0Ki9cblx0YXN5bmMgZ2V0SXRlbShuYW1lc3BhY2UsIGtleSwgb3B0aW9ucykge1xuXHRcdG5hbWVzcGFjZS5mb3JFYWNoKChsYWJlbCkgPT4ge1xuXHRcdFx0aWYgKGxhYmVsLmluY2x1ZGVzKFwiLlwiKSkgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG5hbWVzcGFjZSBsYWJlbCAnJHtsYWJlbH0nLiBOYW1lc3BhY2UgbGFiZWxzIGNhbm5vdCBjb250YWluIHBlcmlvZHMgKCcuJylgKTtcblx0XHR9KTtcblx0XHRjb25zdCBwYXJhbXMgPSB7XG5cdFx0XHRuYW1lc3BhY2U6IG5hbWVzcGFjZS5qb2luKFwiLlwiKSxcblx0XHRcdGtleVxuXHRcdH07XG5cdFx0aWYgKG9wdGlvbnM/LnJlZnJlc2hUdGwgIT09IHZvaWQgMCkgcGFyYW1zLnJlZnJlc2hfdHRsID0gb3B0aW9ucy5yZWZyZXNoVHRsO1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5mZXRjaChcIi9zdG9yZS9pdGVtc1wiLCB7XG5cdFx0XHRwYXJhbXMsXG5cdFx0XHRzaWduYWw6IG9wdGlvbnM/LnNpZ25hbFxuXHRcdH0pO1xuXHRcdHJldHVybiByZXNwb25zZSA/IHtcblx0XHRcdC4uLnJlc3BvbnNlLFxuXHRcdFx0Y3JlYXRlZEF0OiByZXNwb25zZS5jcmVhdGVkX2F0LFxuXHRcdFx0dXBkYXRlZEF0OiByZXNwb25zZS51cGRhdGVkX2F0XG5cdFx0fSA6IG51bGw7XG5cdH1cblx0LyoqXG5cdCogRGVsZXRlIGFuIGl0ZW0uXG5cdCpcblx0KiBAcGFyYW0gbmFtZXNwYWNlIEEgbGlzdCBvZiBzdHJpbmdzIHJlcHJlc2VudGluZyB0aGUgbmFtZXNwYWNlIHBhdGguXG5cdCogQHBhcmFtIGtleSBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBpdGVtLlxuXHQqIEByZXR1cm5zIFByb21pc2U8dm9pZD5cblx0Ki9cblx0YXN5bmMgZGVsZXRlSXRlbShuYW1lc3BhY2UsIGtleSwgb3B0aW9ucykge1xuXHRcdG5hbWVzcGFjZS5mb3JFYWNoKChsYWJlbCkgPT4ge1xuXHRcdFx0aWYgKGxhYmVsLmluY2x1ZGVzKFwiLlwiKSkgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG5hbWVzcGFjZSBsYWJlbCAnJHtsYWJlbH0nLiBOYW1lc3BhY2UgbGFiZWxzIGNhbm5vdCBjb250YWluIHBlcmlvZHMgKCcuJylgKTtcblx0XHR9KTtcblx0XHRyZXR1cm4gdGhpcy5mZXRjaChcIi9zdG9yZS9pdGVtc1wiLCB7XG5cdFx0XHRtZXRob2Q6IFwiREVMRVRFXCIsXG5cdFx0XHRqc29uOiB7XG5cdFx0XHRcdG5hbWVzcGFjZSxcblx0XHRcdFx0a2V5XG5cdFx0XHR9LFxuXHRcdFx0c2lnbmFsOiBvcHRpb25zPy5zaWduYWxcblx0XHR9KTtcblx0fVxuXHQvKipcblx0KiBTZWFyY2ggZm9yIGl0ZW1zIHdpdGhpbiBhIG5hbWVzcGFjZSBwcmVmaXguXG5cdCpcblx0KiBAcGFyYW0gbmFtZXNwYWNlUHJlZml4IExpc3Qgb2Ygc3RyaW5ncyByZXByZXNlbnRpbmcgdGhlIG5hbWVzcGFjZSBwcmVmaXguXG5cdCogQHBhcmFtIG9wdGlvbnMuZmlsdGVyIE9wdGlvbmFsIGRpY3Rpb25hcnkgb2Yga2V5LXZhbHVlIHBhaXJzIHRvIGZpbHRlciByZXN1bHRzLlxuXHQqIEBwYXJhbSBvcHRpb25zLmxpbWl0IE1heGltdW0gbnVtYmVyIG9mIGl0ZW1zIHRvIHJldHVybiAoZGVmYXVsdCBpcyAxMCkuXG5cdCogQHBhcmFtIG9wdGlvbnMub2Zmc2V0IE51bWJlciBvZiBpdGVtcyB0byBza2lwIGJlZm9yZSByZXR1cm5pbmcgcmVzdWx0cyAoZGVmYXVsdCBpcyAwKS5cblx0KiBAcGFyYW0gb3B0aW9ucy5xdWVyeSBPcHRpb25hbCBzZWFyY2ggcXVlcnkuXG5cdCogQHBhcmFtIG9wdGlvbnMucmVmcmVzaFR0bCBXaGV0aGVyIHRvIHJlZnJlc2ggdGhlIFRUTCBvbiBpdGVtcyByZXR1cm5lZCBieSB0aGlzIHNlYXJjaC4gSWYgbnVsbCwgdXNlcyB0aGUgc3RvcmUncyBkZWZhdWx0IGJlaGF2aW9yLlxuXHQqIEByZXR1cm5zIFByb21pc2U8U2VhcmNoSXRlbXNSZXNwb25zZT5cblx0KlxuXHQqIEBleGFtcGxlXG5cdCogYGBgdHlwZXNjcmlwdFxuXHQqIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBjbGllbnQuc3RvcmUuc2VhcmNoSXRlbXMoXG5cdCogICBbXCJkb2N1bWVudHNcIl0sXG5cdCogICB7XG5cdCogICAgIGZpbHRlcjogeyBhdXRob3I6IFwiSm9obiBEb2VcIiB9LFxuXHQqICAgICBsaW1pdDogNSxcblx0KiAgICAgcmVmcmVzaFR0bDogdHJ1ZVxuXHQqICAgfVxuXHQqICk7XG5cdCogY29uc29sZS5sb2cocmVzdWx0cyk7XG5cdCogLy8ge1xuXHQqIC8vICAgaXRlbXM6IFtcblx0KiAvLyAgICAge1xuXHQqIC8vICAgICAgIG5hbWVzcGFjZTogW1wiZG9jdW1lbnRzXCIsIFwidXNlcjEyM1wiXSxcblx0KiAvLyAgICAgICBrZXk6IFwiaXRlbTc4OVwiLFxuXHQqIC8vICAgICAgIHZhbHVlOiB7IHRpdGxlOiBcIkFub3RoZXIgRG9jdW1lbnRcIiwgYXV0aG9yOiBcIkpvaG4gRG9lXCIgfSxcblx0KiAvLyAgICAgICBjcmVhdGVkQXQ6IFwiMjAyNC0wNy0zMFQxMjowMDowMFpcIixcblx0KiAvLyAgICAgICB1cGRhdGVkQXQ6IFwiMjAyNC0wNy0zMFQxMjowMDowMFpcIlxuXHQqIC8vICAgICB9LFxuXHQqIC8vICAgICAvLyAuLi4gYWRkaXRpb25hbCBpdGVtcyAuLi5cblx0KiAvLyAgIF1cblx0KiAvLyB9XG5cdCogYGBgXG5cdCovXG5cdGFzeW5jIHNlYXJjaEl0ZW1zKG5hbWVzcGFjZVByZWZpeCwgb3B0aW9ucykge1xuXHRcdGNvbnN0IHBheWxvYWQgPSB7XG5cdFx0XHRuYW1lc3BhY2VfcHJlZml4OiBuYW1lc3BhY2VQcmVmaXgsXG5cdFx0XHRmaWx0ZXI6IG9wdGlvbnM/LmZpbHRlcixcblx0XHRcdGxpbWl0OiBvcHRpb25zPy5saW1pdCA/PyAxMCxcblx0XHRcdG9mZnNldDogb3B0aW9ucz8ub2Zmc2V0ID8/IDAsXG5cdFx0XHRxdWVyeTogb3B0aW9ucz8ucXVlcnksXG5cdFx0XHRyZWZyZXNoX3R0bDogb3B0aW9ucz8ucmVmcmVzaFR0bFxuXHRcdH07XG5cdFx0cmV0dXJuIHsgaXRlbXM6IChhd2FpdCB0aGlzLmZldGNoKFwiL3N0b3JlL2l0ZW1zL3NlYXJjaFwiLCB7XG5cdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0anNvbjogcGF5bG9hZCxcblx0XHRcdHNpZ25hbDogb3B0aW9ucz8uc2lnbmFsXG5cdFx0fSkpLml0ZW1zLm1hcCgoaXRlbSkgPT4gKHtcblx0XHRcdC4uLml0ZW0sXG5cdFx0XHRjcmVhdGVkQXQ6IGl0ZW0uY3JlYXRlZF9hdCxcblx0XHRcdHVwZGF0ZWRBdDogaXRlbS51cGRhdGVkX2F0XG5cdFx0fSkpIH07XG5cdH1cblx0LyoqXG5cdCogTGlzdCBuYW1lc3BhY2VzIHdpdGggb3B0aW9uYWwgbWF0Y2ggY29uZGl0aW9ucy5cblx0KlxuXHQqIEBwYXJhbSBvcHRpb25zLnByZWZpeCBPcHRpb25hbCBsaXN0IG9mIHN0cmluZ3MgcmVwcmVzZW50aW5nIHRoZSBwcmVmaXggdG8gZmlsdGVyIG5hbWVzcGFjZXMuXG5cdCogQHBhcmFtIG9wdGlvbnMuc3VmZml4IE9wdGlvbmFsIGxpc3Qgb2Ygc3RyaW5ncyByZXByZXNlbnRpbmcgdGhlIHN1ZmZpeCB0byBmaWx0ZXIgbmFtZXNwYWNlcy5cblx0KiBAcGFyYW0gb3B0aW9ucy5tYXhEZXB0aCBPcHRpb25hbCBpbnRlZ2VyIHNwZWNpZnlpbmcgdGhlIG1heGltdW0gZGVwdGggb2YgbmFtZXNwYWNlcyB0byByZXR1cm4uXG5cdCogQHBhcmFtIG9wdGlvbnMubGltaXQgTWF4aW11bSBudW1iZXIgb2YgbmFtZXNwYWNlcyB0byByZXR1cm4gKGRlZmF1bHQgaXMgMTAwKS5cblx0KiBAcGFyYW0gb3B0aW9ucy5vZmZzZXQgTnVtYmVyIG9mIG5hbWVzcGFjZXMgdG8gc2tpcCBiZWZvcmUgcmV0dXJuaW5nIHJlc3VsdHMgKGRlZmF1bHQgaXMgMCkuXG5cdCogQHJldHVybnMgUHJvbWlzZTxMaXN0TmFtZXNwYWNlUmVzcG9uc2U+XG5cdCovXG5cdGFzeW5jIGxpc3ROYW1lc3BhY2VzKG9wdGlvbnMpIHtcblx0XHRjb25zdCBwYXlsb2FkID0ge1xuXHRcdFx0cHJlZml4OiBvcHRpb25zPy5wcmVmaXgsXG5cdFx0XHRzdWZmaXg6IG9wdGlvbnM/LnN1ZmZpeCxcblx0XHRcdG1heF9kZXB0aDogb3B0aW9ucz8ubWF4RGVwdGgsXG5cdFx0XHRsaW1pdDogb3B0aW9ucz8ubGltaXQgPz8gMTAwLFxuXHRcdFx0b2Zmc2V0OiBvcHRpb25zPy5vZmZzZXQgPz8gMFxuXHRcdH07XG5cdFx0cmV0dXJuIHRoaXMuZmV0Y2goXCIvc3RvcmUvbmFtZXNwYWNlc1wiLCB7XG5cdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0anNvbjogcGF5bG9hZCxcblx0XHRcdHNpZ25hbDogb3B0aW9ucz8uc2lnbmFsXG5cdFx0fSk7XG5cdH1cbn07XG52YXIgVWlDbGllbnQgPSBjbGFzcyBVaUNsaWVudCBleHRlbmRzIEJhc2VDbGllbnQge1xuXHRzdGF0aWMgcHJvbWlzZUNhY2hlID0ge307XG5cdHN0YXRpYyBnZXRPckNhY2hlZChrZXksIGZuKSB7XG5cdFx0aWYgKFVpQ2xpZW50LnByb21pc2VDYWNoZVtrZXldICE9IG51bGwpIHJldHVybiBVaUNsaWVudC5wcm9taXNlQ2FjaGVba2V5XTtcblx0XHRjb25zdCBwcm9taXNlID0gZm4oKTtcblx0XHRVaUNsaWVudC5wcm9taXNlQ2FjaGVba2V5XSA9IHByb21pc2U7XG5cdFx0cmV0dXJuIHByb21pc2U7XG5cdH1cblx0YXN5bmMgZ2V0Q29tcG9uZW50KGFzc2lzdGFudElkLCBhZ2VudE5hbWUpIHtcblx0XHRyZXR1cm4gVWlDbGllbnQuZ2V0T3JDYWNoZWQoYCR7dGhpcy5hcGlVcmx9LSR7YXNzaXN0YW50SWR9LSR7YWdlbnROYW1lfWAsIGFzeW5jICgpID0+IHtcblx0XHRcdGxldCBbdXJsLCBpbml0XSA9IHRoaXMucHJlcGFyZUZldGNoT3B0aW9ucyhgL3VpLyR7YXNzaXN0YW50SWR9YCwge1xuXHRcdFx0XHRoZWFkZXJzOiB7XG5cdFx0XHRcdFx0QWNjZXB0OiBcInRleHQvaHRtbFwiLFxuXHRcdFx0XHRcdFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdGpzb246IHsgbmFtZTogYWdlbnROYW1lIH1cblx0XHRcdH0pO1xuXHRcdFx0aWYgKHRoaXMub25SZXF1ZXN0ICE9IG51bGwpIGluaXQgPSBhd2FpdCB0aGlzLm9uUmVxdWVzdCh1cmwsIGluaXQpO1xuXHRcdFx0cmV0dXJuIChhd2FpdCB0aGlzLmFzeW5jQ2FsbGVyLmZldGNoKHVybCwgaW5pdCkpLnRleHQoKTtcblx0XHR9KTtcblx0fVxufTtcbnZhciBDbGllbnQgPSBjbGFzcyB7XG5cdC8qKlxuXHQqIFRoZSBjbGllbnQgZm9yIGludGVyYWN0aW5nIHdpdGggYXNzaXN0YW50cy5cblx0Ki9cblx0YXNzaXN0YW50cztcblx0LyoqXG5cdCogVGhlIGNsaWVudCBmb3IgaW50ZXJhY3Rpbmcgd2l0aCB0aHJlYWRzLlxuXHQqL1xuXHR0aHJlYWRzO1xuXHQvKipcblx0KiBUaGUgY2xpZW50IGZvciBpbnRlcmFjdGluZyB3aXRoIHJ1bnMuXG5cdCovXG5cdHJ1bnM7XG5cdC8qKlxuXHQqIFRoZSBjbGllbnQgZm9yIGludGVyYWN0aW5nIHdpdGggY3JvbiBydW5zLlxuXHQqL1xuXHRjcm9ucztcblx0LyoqXG5cdCogVGhlIGNsaWVudCBmb3IgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgS1Ygc3RvcmUuXG5cdCovXG5cdHN0b3JlO1xuXHQvKipcblx0KiBUaGUgY2xpZW50IGZvciBpbnRlcmFjdGluZyB3aXRoIHRoZSBVSS5cblx0KiBAaW50ZXJuYWwgVXNlZCBieSBMb2FkRXh0ZXJuYWxDb21wb25lbnQgYW5kIHRoZSBBUEkgbWlnaHQgY2hhbmdlIGluIHRoZSBmdXR1cmUuXG5cdCovXG5cdFwifnVpXCI7XG5cdC8qKlxuXHQqIEBpbnRlcm5hbCBVc2VkIHRvIG9idGFpbiBhIHN0YWJsZSBrZXkgcmVwcmVzZW50aW5nIHRoZSBjbGllbnQuXG5cdCovXG5cdFwifmNvbmZpZ0hhc2hcIjtcblx0Y29uc3RydWN0b3IoY29uZmlnKSB7XG5cdFx0dGhpc1tcIn5jb25maWdIYXNoXCJdID0gSlNPTi5zdHJpbmdpZnkoe1xuXHRcdFx0YXBpVXJsOiBjb25maWc/LmFwaVVybCxcblx0XHRcdGFwaUtleTogY29uZmlnPy5hcGlLZXksXG5cdFx0XHR0aW1lb3V0TXM6IGNvbmZpZz8udGltZW91dE1zLFxuXHRcdFx0ZGVmYXVsdEhlYWRlcnM6IGNvbmZpZz8uZGVmYXVsdEhlYWRlcnMsXG5cdFx0XHRtYXhDb25jdXJyZW5jeTogY29uZmlnPy5jYWxsZXJPcHRpb25zPy5tYXhDb25jdXJyZW5jeSxcblx0XHRcdG1heFJldHJpZXM6IGNvbmZpZz8uY2FsbGVyT3B0aW9ucz8ubWF4UmV0cmllcyxcblx0XHRcdGNhbGxiYWNrczoge1xuXHRcdFx0XHRvbkZhaWxlZFJlc3BvbnNlSG9vazogY29uZmlnPy5jYWxsZXJPcHRpb25zPy5vbkZhaWxlZFJlc3BvbnNlSG9vayAhPSBudWxsLFxuXHRcdFx0XHRvblJlcXVlc3Q6IGNvbmZpZz8ub25SZXF1ZXN0ICE9IG51bGwsXG5cdFx0XHRcdGZldGNoOiBjb25maWc/LmNhbGxlck9wdGlvbnM/LmZldGNoICE9IG51bGxcblx0XHRcdH1cblx0XHR9KTtcblx0XHR0aGlzLmFzc2lzdGFudHMgPSBuZXcgQXNzaXN0YW50c0NsaWVudChjb25maWcpO1xuXHRcdHRoaXMudGhyZWFkcyA9IG5ldyBUaHJlYWRzQ2xpZW50KGNvbmZpZyk7XG5cdFx0dGhpcy5ydW5zID0gbmV3IFJ1bnNDbGllbnQoY29uZmlnKTtcblx0XHR0aGlzLmNyb25zID0gbmV3IENyb25zQ2xpZW50KGNvbmZpZyk7XG5cdFx0dGhpcy5zdG9yZSA9IG5ldyBTdG9yZUNsaWVudChjb25maWcpO1xuXHRcdHRoaXNbXCJ+dWlcIl0gPSBuZXcgVWlDbGllbnQoY29uZmlnKTtcblx0fVxufTtcbi8qKlxuKiBAaW50ZXJuYWwgVXNlZCB0byBvYnRhaW4gYSBzdGFibGUga2V5IHJlcHJlc2VudGluZyB0aGUgY2xpZW50LlxuKi9cbmZ1bmN0aW9uIGdldENsaWVudENvbmZpZ0hhc2goY2xpZW50KSB7XG5cdHJldHVybiBjbGllbnRbXCJ+Y29uZmlnSGFzaFwiXTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBBc3Npc3RhbnRzQ2xpZW50LCBDbGllbnQsIENyb25zQ2xpZW50LCBSdW5zQ2xpZW50LCBTdG9yZUNsaWVudCwgVGhyZWFkc0NsaWVudCwgZ2V0QXBpS2V5LCBnZXRDbGllbnRDb25maWdIYXNoIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnQuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/dist/client.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/dist/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/dist/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Client: () => (/* reexport safe */ _client_js__WEBPACK_IMPORTED_MODULE_1__.Client),\n/* harmony export */   getApiKey: () => (/* reexport safe */ _client_js__WEBPACK_IMPORTED_MODULE_1__.getApiKey),\n/* harmony export */   overrideFetchImplementation: () => (/* reexport safe */ _singletons_fetch_js__WEBPACK_IMPORTED_MODULE_0__.overrideFetchImplementation)\n/* harmony export */ });\n/* harmony import */ var _singletons_fetch_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./singletons/fetch.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/singletons/fetch.js\");\n/* harmony import */ var _client_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./client.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/client.js\");\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBb0U7QUFDcEIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC1zZGsvZGlzdC9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBvdmVycmlkZUZldGNoSW1wbGVtZW50YXRpb24gfSBmcm9tIFwiLi9zaW5nbGV0b25zL2ZldGNoLmpzXCI7XG5pbXBvcnQgeyBDbGllbnQsIGdldEFwaUtleSB9IGZyb20gXCIuL2NsaWVudC5qc1wiO1xuXG5leHBvcnQgeyBDbGllbnQsIGdldEFwaUtleSwgb3ZlcnJpZGVGZXRjaEltcGxlbWVudGF0aW9uIH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/dist/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/dist/react-ui/client.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/dist/react-ui/client.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("var react__WEBPACK_IMPORTED_MODULE_2___namespace_cache;\nvar react_dom__WEBPACK_IMPORTED_MODULE_3___namespace_cache;\nvar react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4___namespace_cache;\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LoadExternalComponent: () => (/* binding */ LoadExternalComponent),\n/* harmony export */   bootstrapUiContext: () => (/* binding */ bootstrapUiContext),\n/* harmony export */   experimental_loadShare: () => (/* binding */ experimental_loadShare),\n/* harmony export */   useStreamContext: () => (/* binding */ useStreamContext)\n/* harmony export */ });\n/* harmony import */ var _react_stream_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../react/stream.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/react/stream.js\");\n/* harmony import */ var _react_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../react/index.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-dom */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-dom.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* __next_internal_client_entry_do_not_use__ LoadExternalComponent,bootstrapUiContext,experimental_loadShare,useStreamContext auto */ \n\n\n\n\n\n//#region src/react-ui/client.tsx\nconst UseStreamContext = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_2__.createContext(null);\nfunction useStreamContext() {\n    const ctx = react__WEBPACK_IMPORTED_MODULE_2__.useContext(UseStreamContext);\n    if (!ctx) throw new Error(\"useStreamContext must be used within a LoadExternalComponent\");\n    return new Proxy(ctx, {\n        get (target, prop) {\n            if (prop === \"meta\") return target.meta;\n            return target.stream[prop];\n        }\n    });\n}\nvar ComponentStore = class {\n    respond(shadowRootId, comp, targetElement) {\n        this.cache[shadowRootId] = {\n            comp,\n            target: targetElement\n        };\n        this.callbacks[shadowRootId]?.forEach((c)=>c(comp, targetElement));\n    }\n    getBoundStore(shadowRootId) {\n        this.boundCache[shadowRootId] ??= {\n            subscribe: (onStoreChange)=>{\n                this.callbacks[shadowRootId] ??= [];\n                this.callbacks[shadowRootId].push(onStoreChange);\n                return ()=>{\n                    this.callbacks[shadowRootId] = this.callbacks[shadowRootId].filter((c)=>c !== onStoreChange);\n                };\n            },\n            getSnapshot: ()=>this.cache[shadowRootId]\n        };\n        return this.boundCache[shadowRootId];\n    }\n    constructor(){\n        this.cache = {};\n        this.boundCache = {};\n        this.callbacks = {};\n    }\n};\nconst COMPONENT_STORE = new ComponentStore();\nconst EXT_STORE_SYMBOL = Symbol.for(\"LGUI_EXT_STORE\");\nconst REQUIRE_SYMBOL = Symbol.for(\"LGUI_REQUIRE\");\nconst REQUIRE_EXTRA_SYMBOL = Symbol.for(\"LGUI_REQUIRE_EXTRA\");\nconst isIterable = (value)=>value != null && typeof value === \"object\" && Symbol.iterator in value;\nconst isPromise = (value)=>value != null && typeof value === \"object\" && \"then\" in value && typeof value.then === \"function\";\nconst isReactNode = (value)=>{\n    if (/*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_2__.isValidElement(value)) return true;\n    if (value == null) return true;\n    if (typeof value === \"string\" || typeof value === \"number\" || typeof value === \"bigint\" || typeof value === \"boolean\") return true;\n    if (isIterable(value)) return true;\n    if (isPromise(value)) return true;\n    return false;\n};\nfunction LoadExternalComponent({ stream, namespace, message, meta, fallback, components, ...props }) {\n    const ref = react__WEBPACK_IMPORTED_MODULE_2__.useRef(null);\n    const shadowRootId = `child-shadow-${react__WEBPACK_IMPORTED_MODULE_2__.useId()}`;\n    const store = react__WEBPACK_IMPORTED_MODULE_2__.useMemo({\n        \"LoadExternalComponent.useMemo[store]\": ()=>COMPONENT_STORE.getBoundStore(shadowRootId)\n    }[\"LoadExternalComponent.useMemo[store]\"], [\n        shadowRootId\n    ]);\n    const state = react__WEBPACK_IMPORTED_MODULE_2__.useSyncExternalStore(store.subscribe, store.getSnapshot);\n    const clientComponent = components?.[message.name];\n    const hasClientComponent = clientComponent != null;\n    let fallbackComponent = null;\n    if (isReactNode(fallback)) fallbackComponent = fallback;\n    else if (typeof fallback === \"object\" && fallback != null) fallbackComponent = fallback?.[message.name];\n    const uiNamespace = namespace ?? stream.assistantId;\n    const uiClient = stream.client[\"~ui\"];\n    react__WEBPACK_IMPORTED_MODULE_2__.useEffect({\n        \"LoadExternalComponent.useEffect\": ()=>{\n            if (hasClientComponent) return;\n            uiClient.getComponent(uiNamespace, message.name).then({\n                \"LoadExternalComponent.useEffect\": (html)=>{\n                    const dom = ref.current;\n                    if (!dom) return;\n                    const root = dom.shadowRoot ?? dom.attachShadow({\n                        mode: \"open\"\n                    });\n                    const fragment = document.createRange().createContextualFragment(html.replace(\"{{shadowRootId}}\", shadowRootId));\n                    root.appendChild(fragment);\n                }\n            }[\"LoadExternalComponent.useEffect\"]);\n        }\n    }[\"LoadExternalComponent.useEffect\"], [\n        uiClient,\n        uiNamespace,\n        message.name,\n        shadowRootId,\n        hasClientComponent\n    ]);\n    if (hasClientComponent) return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(UseStreamContext.Provider, {\n        value: {\n            stream,\n            meta\n        },\n        children: /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_2__.createElement(clientComponent, message.props)\n    });\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.Fragment, {\n        children: [\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n                id: shadowRootId,\n                ref,\n                ...props\n            }),\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(UseStreamContext.Provider, {\n                value: {\n                    stream,\n                    meta\n                },\n                children: state?.target != null ? /*#__PURE__*/ react_dom__WEBPACK_IMPORTED_MODULE_3__.createPortal(/*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_2__.createElement(state.comp, message.props), state.target) : fallbackComponent\n            })\n        ]\n    });\n}\nfunction experimental_loadShare(name, module) {\n    if (true) return;\n    window[REQUIRE_EXTRA_SYMBOL] ??= {};\n    window[REQUIRE_EXTRA_SYMBOL][name] = module;\n}\nfunction bootstrapUiContext() {\n    if (true) return;\n    window[EXT_STORE_SYMBOL] = COMPONENT_STORE;\n    window[REQUIRE_SYMBOL] = (name)=>{\n        if (name === \"react\") return /*#__PURE__*/ (react__WEBPACK_IMPORTED_MODULE_2___namespace_cache || (react__WEBPACK_IMPORTED_MODULE_2___namespace_cache = __webpack_require__.t(react__WEBPACK_IMPORTED_MODULE_2__, 2)));\n        if (name === \"react-dom\") return /*#__PURE__*/ (react_dom__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (react_dom__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(react_dom__WEBPACK_IMPORTED_MODULE_3__, 2)));\n        if (name === \"react/jsx-runtime\") return /*#__PURE__*/ (react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4___namespace_cache || (react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4___namespace_cache = __webpack_require__.t(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__, 2)));\n        if (name === \"@langchain/langgraph-sdk/react\") return {\n            useStream: _react_stream_js__WEBPACK_IMPORTED_MODULE_0__.useStream\n        };\n        if (name === \"@langchain/langgraph-sdk/react-ui\") return {\n            useStreamContext,\n            LoadExternalComponent: ()=>{\n                throw new Error(\"Nesting LoadExternalComponent is not supported\");\n            }\n        };\n        if (window[REQUIRE_EXTRA_SYMBOL] != null && typeof window[REQUIRE_EXTRA_SYMBOL] === \"object\" && name in window[REQUIRE_EXTRA_SYMBOL]) return window[REQUIRE_EXTRA_SYMBOL][name];\n        throw new Error(`Unknown module...: ${name}`);\n    };\n}\n//#endregion\n //# sourceMappingURL=client.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL2Rpc3QvcmVhY3QtdWkvY2xpZW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFVQSxNQUFNLGlDQUFtQixnREFBTSxDQUc1QixLQUFNO0FBYVQsU0FBZ0IsbUJBR3NCO0lBQ3BDLE1BQU0sTUFBTSw2Q0FBTSxDQUFXLGlCQUFpQjtJQUM5QyxJQUFJLENBQUMsSUFDSCxPQUFNLElBQUksTUFDUiwrREFDRDtJQUdILE9BQU8sSUFBSSxNQUFNLEtBQUs7UUFDcEIsS0FBSSxRQUFRLE1BQThDO1lBQ3hELElBQUksU0FBUyxPQUFRLFFBQU8sT0FBTztZQUNuQyxPQUFPLE9BQU8sT0FBTzs7S0FFeEIsQ0FBQzs7QUFRSixJQUFNLGlCQUFOLE1BQXFCO0lBbUJuQixRQUNFLGNBQ0EsTUFDQSxlQUNBO1FBQ0EsS0FBSyxNQUFNLGdCQUFnQjtZQUFFO1lBQU0sUUFBUTtTQUFlO1FBQzFELEtBQUssVUFBVSxlQUFlLFNBQVMsSUFBTSxFQUFFLE1BQU0sY0FBYyxDQUFDOztJQUd0RSxjQUFjLGNBQXNCO1FBQ2xDLEtBQUssV0FBVyxrQkFBa0I7WUFDaEMsWUFBWTtnQkFDVixLQUFLLFVBQVUsa0JBQWtCLEVBQUU7Z0JBQ25DLEtBQUssVUFBVSxjQUFjLEtBQUssY0FBYztnQkFDaEQ7b0JBQ0UsS0FBSyxVQUFVLGdCQUFnQixLQUFLLFVBQVUsY0FBYyxRQUN6RCxJQUFNLE1BQU0sY0FDZDs7O1lBR0wsaUJBQW1CLEtBQUssTUFBTTtTQUMvQjtRQUVELE9BQU8sS0FBSyxXQUFXOzs7YUF6Q2pCLFFBQXlDLEVBQUU7YUFFM0MsYUFNSixFQUFFO2FBRUUsWUFNSixFQUFFOzs7QUE2QlIsTUFBTSxrQkFBa0IsSUFBSSxnQkFBZ0I7QUFDNUMsTUFBTSxtQkFBbUIsT0FBTyxJQUFJLGlCQUFpQjtBQUNyRCxNQUFNLGlCQUFpQixPQUFPLElBQUksZUFBZTtBQUNqRCxNQUFNLHVCQUF1QixPQUFPLElBQUkscUJBQXFCO0FBMEI3RCxNQUFNLGNBQWMsUUFDbEIsU0FBUyxRQUFRLE9BQU8sVUFBVSxZQUFZLE9BQU8sWUFBWTtBQUVuRSxNQUFNLGFBQWEsUUFDakIsU0FBUyxRQUNULE9BQU8sVUFBVSxZQUNqQixVQUFVLFNBQ1YsT0FBTyxNQUFNLFNBQVM7QUFFeEIsTUFBTSxlQUFlO0lBQ25CLGtCQUFJLGlEQUFNLENBQWUsTUFBTSxDQUFFLFFBQU87SUFDeEMsSUFBSSxTQUFTLEtBQU0sUUFBTztJQUMxQixJQUNFLE9BQU8sVUFBVSxZQUNqQixPQUFPLFVBQVUsWUFDakIsT0FBTyxVQUFVLFlBQ2pCLE9BQU8sVUFBVSxVQUVqQixRQUFPO0lBR1QsSUFBSSxXQUFXLE1BQU0sQ0FBRSxRQUFPO0lBQzlCLElBQUksVUFBVSxNQUFNLENBQUUsUUFBTztJQUU3QixPQUFPOztBQUdULFNBQWdCLHNCQUFzQixFQUNwQyxRQUNBLFdBQ0EsU0FDQSxNQUNBLFVBQ0EsWUFDQSxHQUFHLFNBQzBCO0lBQzdCLE1BQU0sTUFBTSx5Q0FBTSxDQUF1QixLQUFLO0lBRTlDLE1BQU0sZUFBZSxnQkFEVix3Q0FBTSxFQUFPO0lBR3hCLE1BQU0sUUFBUSwwQ0FBTTtnREFBQSxJQUNaLGdCQUFnQixjQUFjLGFBQWE7K0NBQ2pEO1FBQUM7S0FBYSxDQUNmO0lBQ0QsTUFBTSxRQUFRLHVEQUFNLENBQXFCLE1BQU0sV0FBVyxNQUFNLFlBQVk7SUFFNUUsTUFBTSxrQkFBa0IsYUFBYSxRQUFRO0lBQzdDLE1BQU0scUJBQXFCLG1CQUFtQjtJQUU5QyxJQUFJLG9CQUFvQjtJQUN4QixJQUFJLFlBQVksU0FBUyxDQUN2QixxQkFBb0I7YUFDWCxPQUFPLGFBQWEsWUFBWSxZQUFZLEtBQ3JELHFCQUFvQixXQUFXLFFBQVE7SUFHekMsTUFBTSxjQUFjLGFBQWEsT0FBTztJQUN4QyxNQUFNLFdBQVcsT0FBTyxPQUFPO0lBQy9CLDRDQUFNOzJDQUFBO1lBQ0osSUFBSSxtQkFBb0I7WUFDbkIsU0FBUyxhQUFhLGFBQWEsUUFBUSxLQUFLLENBQUM7bURBQUEsQ0FBTTtvQkFDMUQsTUFBTSxNQUFNLElBQUk7b0JBQ2hCLElBQUksQ0FBQyxJQUFLO29CQUNWLE1BQU0sT0FBTyxJQUFJLGNBQWMsSUFBSSxhQUFhO3dCQUFFLE1BQU07b0JBQUEsQ0FBUSxDQUFDO29CQUNqRSxNQUFNLFdBQVcsU0FDZCxhQUFhLENBQ2IseUJBQ0MsS0FBSyxRQUFRLG9CQUFvQixhQUFhLENBQy9DO29CQUNILEtBQUssWUFBWSxTQUFTOzs7OzBDQUUzQjtRQUFDO1FBQVU7UUFBYSxRQUFRO1FBQU07UUFBYztLQUFtQixDQUFDO0lBRTNFLElBQUksbUJBQ0YsUUFDRSx1RUFBQyxpQkFBaUI7UUFBUyxPQUFPO1lBQUU7WUFBUTtTQUFNO2dDQUMvQyxnREFBTSxDQUFjLGlCQUFpQixRQUFRLE1BQU07TUFDMUI7SUFJaEMsT0FDRTtRQUFBO1lBQ0UsdUVBQUM7Z0JBQUksSUFBSTtnQkFBbUI7Z0JBQUssR0FBSTtjQUFTO1lBRTlDLHVFQUFDLGlCQUFpQjtnQkFBUyxPQUFPO29CQUFFO29CQUFRO2lCQUFNOzBCQUMvQyxPQUFPLFVBQVUscUJBQ2QsbURBQVMsZUFDUCxnREFBTSxDQUFjLE1BQU0sTUFBTSxRQUFRLE1BQU0sRUFDOUMsTUFBTSxPQUNQLEdBQ0Q7Y0FDc0I7U0FBQTtJQUFBLEVBQzNCOztBQVlQLFNBQWdCLHVCQUF1QixNQUFjLFFBQWlCO0lBQ3BFLElBQUksSUFBNkIsQ0FBRTtJQUVuQyxPQUFPLDBCQUEwQixFQUFFO0lBQ25DLE9BQU8sc0JBQXNCLFFBQVE7O0FBR3ZDLFNBQWdCLHFCQUFxQjtJQUNuQyxJQUFJLElBQTZCLENBQy9CO0lBR0YsT0FBTyxvQkFBb0I7SUFDM0IsT0FBTyxtQkFBbUI7UUFDeEIsSUFBSSxTQUFTLFFBQVMsUUFBTyx5TEFBSztRQUNsQyxJQUFJLFNBQVMsWUFBYSxRQUFPLHFNQUFRO1FBQ3pDLElBQUksU0FBUyxvQkFBcUIsUUFBTyw2TkFBVTtRQUNuRCxJQUFJLFNBQVMsaUNBQWtDLFFBQU87WUFBRSxTQUFTO1FBQVQsQ0FBVztRQUNuRSxJQUFJLFNBQVMsb0NBQ1gsUUFBTztZQUNMO1lBQ0E7Z0JBQ0UsTUFBTSxJQUFJLE1BQU0saURBQWlEOztTQUVwRTtRQUdILElBQ0UsT0FBTyx5QkFBeUIsUUFDaEMsT0FBTyxPQUFPLDBCQUEwQixZQUN4QyxRQUFRLE9BQU8sc0JBRWYsUUFBTyxPQUFPLHNCQUFzQjtRQUd0QyxNQUFNLElBQUksTUFBTSxzQkFBc0IsT0FBTyIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3NyYy9yZWFjdC11aS9jbGllbnQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAqIGFzIFJlYWN0RE9NIGZyb20gXCJyZWFjdC1kb21cIjtcbmltcG9ydCAqIGFzIEpzeFJ1bnRpbWUgZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5pbXBvcnQgdHlwZSB7IFVJTWVzc2FnZSB9IGZyb20gXCIuL3R5cGVzLmpzXCI7XG5pbXBvcnQgeyB1c2VTdHJlYW0gfSBmcm9tIFwiLi4vcmVhY3QvaW5kZXguanNcIjtcbmltcG9ydCB0eXBlIHsgVXNlU3RyZWFtIH0gZnJvbSBcIi4uL3JlYWN0L3R5cGVzLmpzXCI7XG5pbXBvcnQgdHlwZSB7IEJhZ1RlbXBsYXRlIH0gZnJvbSBcIi4uL3R5cGVzLnRlbXBsYXRlLmpzXCI7XG5cbmNvbnN0IFVzZVN0cmVhbUNvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0PHtcbiAgc3RyZWFtOiBSZXR1cm5UeXBlPHR5cGVvZiB1c2VTdHJlYW0+O1xuICBtZXRhOiB1bmtub3duO1xufT4obnVsbCEpO1xuXG50eXBlIEdldE1ldGFUeXBlPEJhZyBleHRlbmRzIEJhZ1RlbXBsYXRlPiA9IEJhZyBleHRlbmRzIHsgTWV0YVR5cGU6IHVua25vd24gfVxuICA/IEJhZ1tcIk1ldGFUeXBlXCJdXG4gIDogdW5rbm93bjtcblxuaW50ZXJmYWNlIFVzZVN0cmVhbUNvbnRleHQ8XG4gIFN0YXRlVHlwZSBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4gIEJhZyBleHRlbmRzIEJhZ1RlbXBsYXRlID0gQmFnVGVtcGxhdGVcbj4gZXh0ZW5kcyBVc2VTdHJlYW08U3RhdGVUeXBlLCBCYWc+IHtcbiAgbWV0YT86IEdldE1ldGFUeXBlPEJhZz47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VTdHJlYW1Db250ZXh0PFxuICBTdGF0ZVR5cGUgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IFJlY29yZDxzdHJpbmcsIHVua25vd24+LFxuICBCYWcgZXh0ZW5kcyBCYWdUZW1wbGF0ZSA9IEJhZ1RlbXBsYXRlXG4+KCk6IFVzZVN0cmVhbUNvbnRleHQ8U3RhdGVUeXBlLCBCYWc+IHtcbiAgY29uc3QgY3R4ID0gUmVhY3QudXNlQ29udGV4dChVc2VTdHJlYW1Db250ZXh0KTtcbiAgaWYgKCFjdHgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcInVzZVN0cmVhbUNvbnRleHQgbXVzdCBiZSB1c2VkIHdpdGhpbiBhIExvYWRFeHRlcm5hbENvbXBvbmVudFwiXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBuZXcgUHJveHkoY3R4LCB7XG4gICAgZ2V0KHRhcmdldCwgcHJvcDoga2V5b2YgVXNlU3RyZWFtQ29udGV4dDxTdGF0ZVR5cGUsIEJhZz4pIHtcbiAgICAgIGlmIChwcm9wID09PSBcIm1ldGFcIikgcmV0dXJuIHRhcmdldC5tZXRhO1xuICAgICAgcmV0dXJuIHRhcmdldC5zdHJlYW1bcHJvcF07XG4gICAgfSxcbiAgfSkgYXMgdW5rbm93biBhcyBVc2VTdHJlYW1Db250ZXh0PFN0YXRlVHlwZSwgQmFnPjtcbn1cblxuaW50ZXJmYWNlIENvbXBvbmVudFRhcmdldCB7XG4gIGNvbXA6IFJlYWN0LkZ1bmN0aW9uQ29tcG9uZW50IHwgUmVhY3QuQ29tcG9uZW50Q2xhc3M7XG4gIHRhcmdldDogSFRNTEVsZW1lbnQ7XG59XG5cbmNsYXNzIENvbXBvbmVudFN0b3JlIHtcbiAgcHJpdmF0ZSBjYWNoZTogUmVjb3JkPHN0cmluZywgQ29tcG9uZW50VGFyZ2V0PiA9IHt9O1xuXG4gIHByaXZhdGUgYm91bmRDYWNoZTogUmVjb3JkPFxuICAgIHN0cmluZyxcbiAgICB7XG4gICAgICBzdWJzY3JpYmU6IChvblN0b3JlQ2hhbmdlOiAoKSA9PiB2b2lkKSA9PiAoKSA9PiB2b2lkO1xuICAgICAgZ2V0U25hcHNob3Q6ICgpID0+IENvbXBvbmVudFRhcmdldCB8IHVuZGVmaW5lZDtcbiAgICB9XG4gID4gPSB7fTtcblxuICBwcml2YXRlIGNhbGxiYWNrczogUmVjb3JkPFxuICAgIHN0cmluZyxcbiAgICAoKFxuICAgICAgY29tcDogUmVhY3QuRnVuY3Rpb25Db21wb25lbnQgfCBSZWFjdC5Db21wb25lbnRDbGFzcyxcbiAgICAgIGVsOiBIVE1MRWxlbWVudFxuICAgICkgPT4gdm9pZClbXVxuICA+ID0ge307XG5cbiAgcmVzcG9uZChcbiAgICBzaGFkb3dSb290SWQ6IHN0cmluZyxcbiAgICBjb21wOiBSZWFjdC5GdW5jdGlvbkNvbXBvbmVudCB8IFJlYWN0LkNvbXBvbmVudENsYXNzLFxuICAgIHRhcmdldEVsZW1lbnQ6IEhUTUxFbGVtZW50XG4gICkge1xuICAgIHRoaXMuY2FjaGVbc2hhZG93Um9vdElkXSA9IHsgY29tcCwgdGFyZ2V0OiB0YXJnZXRFbGVtZW50IH07XG4gICAgdGhpcy5jYWxsYmFja3Nbc2hhZG93Um9vdElkXT8uZm9yRWFjaCgoYykgPT4gYyhjb21wLCB0YXJnZXRFbGVtZW50KSk7XG4gIH1cblxuICBnZXRCb3VuZFN0b3JlKHNoYWRvd1Jvb3RJZDogc3RyaW5nKSB7XG4gICAgdGhpcy5ib3VuZENhY2hlW3NoYWRvd1Jvb3RJZF0gPz89IHtcbiAgICAgIHN1YnNjcmliZTogKG9uU3RvcmVDaGFuZ2U6ICgpID0+IHZvaWQpID0+IHtcbiAgICAgICAgdGhpcy5jYWxsYmFja3Nbc2hhZG93Um9vdElkXSA/Pz0gW107XG4gICAgICAgIHRoaXMuY2FsbGJhY2tzW3NoYWRvd1Jvb3RJZF0ucHVzaChvblN0b3JlQ2hhbmdlKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICB0aGlzLmNhbGxiYWNrc1tzaGFkb3dSb290SWRdID0gdGhpcy5jYWxsYmFja3Nbc2hhZG93Um9vdElkXS5maWx0ZXIoXG4gICAgICAgICAgICAoYykgPT4gYyAhPT0gb25TdG9yZUNoYW5nZVxuICAgICAgICAgICk7XG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgZ2V0U25hcHNob3Q6ICgpID0+IHRoaXMuY2FjaGVbc2hhZG93Um9vdElkXSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIHRoaXMuYm91bmRDYWNoZVtzaGFkb3dSb290SWRdO1xuICB9XG59XG5cbmNvbnN0IENPTVBPTkVOVF9TVE9SRSA9IG5ldyBDb21wb25lbnRTdG9yZSgpO1xuY29uc3QgRVhUX1NUT1JFX1NZTUJPTCA9IFN5bWJvbC5mb3IoXCJMR1VJX0VYVF9TVE9SRVwiKTtcbmNvbnN0IFJFUVVJUkVfU1lNQk9MID0gU3ltYm9sLmZvcihcIkxHVUlfUkVRVUlSRVwiKTtcbmNvbnN0IFJFUVVJUkVfRVhUUkFfU1lNQk9MID0gU3ltYm9sLmZvcihcIkxHVUlfUkVRVUlSRV9FWFRSQVwiKTtcblxuaW50ZXJmYWNlIExvYWRFeHRlcm5hbENvbXBvbmVudFByb3BzXG4gIGV4dGVuZHMgUGljazxSZWFjdC5IVE1MQXR0cmlidXRlczxIVE1MRGl2RWxlbWVudD4sIFwic3R5bGVcIiB8IFwiY2xhc3NOYW1lXCI+IHtcbiAgLyoqIFN0cmVhbSBvZiB0aGUgYXNzaXN0YW50ICovXG4gIHN0cmVhbTogUmV0dXJuVHlwZTx0eXBlb2YgdXNlU3RyZWFtPjtcblxuICAvKiogTmFtZXNwYWNlIG9mIFVJIGNvbXBvbmVudHMuIERlZmF1bHRzIHRvIGFzc2lzdGFudCBJRC4gKi9cbiAgbmFtZXNwYWNlPzogc3RyaW5nO1xuXG4gIC8qKiBVSSBtZXNzYWdlIHRvIGJlIHJlbmRlcmVkICovXG4gIG1lc3NhZ2U6IFVJTWVzc2FnZTtcblxuICAvKiogQWRkaXRpb25hbCBjb250ZXh0IHRvIGJlIHBhc3NlZCB0byB0aGUgY2hpbGQgY29tcG9uZW50ICovXG4gIG1ldGE/OiB1bmtub3duO1xuXG4gIC8qKiBGYWxsYmFjayB0byBiZSByZW5kZXJlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgbG9hZGluZyAqL1xuICBmYWxsYmFjaz86IFJlYWN0LlJlYWN0Tm9kZSB8IFJlY29yZDxzdHJpbmcsIFJlYWN0LlJlYWN0Tm9kZT47XG5cbiAgLyoqXG4gICAqIE1hcCBvZiBjb21wb25lbnRzIHRoYXQgY2FuIGJlIHJlbmRlcmVkIGRpcmVjdGx5IHdpdGhvdXQgZmV0Y2hpbmcgdGhlIFVJIGNvZGVcbiAgICogZnJvbSB0aGUgc2VydmVyLlxuICAgKi9cbiAgY29tcG9uZW50cz86IFJlY29yZDxzdHJpbmcsIFJlYWN0LkZ1bmN0aW9uQ29tcG9uZW50IHwgUmVhY3QuQ29tcG9uZW50Q2xhc3M+O1xufVxuXG5jb25zdCBpc0l0ZXJhYmxlID0gKHZhbHVlOiB1bmtub3duKTogdmFsdWUgaXMgSXRlcmFibGU8dW5rbm93bj4gPT5cbiAgdmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgU3ltYm9sLml0ZXJhdG9yIGluIHZhbHVlO1xuXG5jb25zdCBpc1Byb21pc2UgPSAodmFsdWU6IHVua25vd24pOiB2YWx1ZSBpcyBQcm9taXNlPHVua25vd24+ID0+XG4gIHZhbHVlICE9IG51bGwgJiZcbiAgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmXG4gIFwidGhlblwiIGluIHZhbHVlICYmXG4gIHR5cGVvZiB2YWx1ZS50aGVuID09PSBcImZ1bmN0aW9uXCI7XG5cbmNvbnN0IGlzUmVhY3ROb2RlID0gKHZhbHVlOiB1bmtub3duKTogdmFsdWUgaXMgUmVhY3QuUmVhY3ROb2RlID0+IHtcbiAgaWYgKFJlYWN0LmlzVmFsaWRFbGVtZW50KHZhbHVlKSkgcmV0dXJuIHRydWU7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgaWYgKFxuICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiB8fFxuICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIiB8fFxuICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJiaWdpbnRcIiB8fFxuICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJib29sZWFuXCJcbiAgKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBpZiAoaXNJdGVyYWJsZSh2YWx1ZSkpIHJldHVybiB0cnVlO1xuICBpZiAoaXNQcm9taXNlKHZhbHVlKSkgcmV0dXJuIHRydWU7XG5cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIExvYWRFeHRlcm5hbENvbXBvbmVudCh7XG4gIHN0cmVhbSxcbiAgbmFtZXNwYWNlLFxuICBtZXNzYWdlLFxuICBtZXRhLFxuICBmYWxsYmFjayxcbiAgY29tcG9uZW50cyxcbiAgLi4ucHJvcHNcbn06IExvYWRFeHRlcm5hbENvbXBvbmVudFByb3BzKSB7XG4gIGNvbnN0IHJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7XG4gIGNvbnN0IGlkID0gUmVhY3QudXNlSWQoKTtcbiAgY29uc3Qgc2hhZG93Um9vdElkID0gYGNoaWxkLXNoYWRvdy0ke2lkfWA7XG5cbiAgY29uc3Qgc3RvcmUgPSBSZWFjdC51c2VNZW1vKFxuICAgICgpID0+IENPTVBPTkVOVF9TVE9SRS5nZXRCb3VuZFN0b3JlKHNoYWRvd1Jvb3RJZCksXG4gICAgW3NoYWRvd1Jvb3RJZF1cbiAgKTtcbiAgY29uc3Qgc3RhdGUgPSBSZWFjdC51c2VTeW5jRXh0ZXJuYWxTdG9yZShzdG9yZS5zdWJzY3JpYmUsIHN0b3JlLmdldFNuYXBzaG90KTtcblxuICBjb25zdCBjbGllbnRDb21wb25lbnQgPSBjb21wb25lbnRzPy5bbWVzc2FnZS5uYW1lXTtcbiAgY29uc3QgaGFzQ2xpZW50Q29tcG9uZW50ID0gY2xpZW50Q29tcG9uZW50ICE9IG51bGw7XG5cbiAgbGV0IGZhbGxiYWNrQ29tcG9uZW50ID0gbnVsbDtcbiAgaWYgKGlzUmVhY3ROb2RlKGZhbGxiYWNrKSkge1xuICAgIGZhbGxiYWNrQ29tcG9uZW50ID0gZmFsbGJhY2s7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGZhbGxiYWNrID09PSBcIm9iamVjdFwiICYmIGZhbGxiYWNrICE9IG51bGwpIHtcbiAgICBmYWxsYmFja0NvbXBvbmVudCA9IGZhbGxiYWNrPy5bbWVzc2FnZS5uYW1lXTtcbiAgfVxuXG4gIGNvbnN0IHVpTmFtZXNwYWNlID0gbmFtZXNwYWNlID8/IHN0cmVhbS5hc3Npc3RhbnRJZDtcbiAgY29uc3QgdWlDbGllbnQgPSBzdHJlYW0uY2xpZW50W1wifnVpXCJdO1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChoYXNDbGllbnRDb21wb25lbnQpIHJldHVybjtcbiAgICB2b2lkIHVpQ2xpZW50LmdldENvbXBvbmVudCh1aU5hbWVzcGFjZSwgbWVzc2FnZS5uYW1lKS50aGVuKChodG1sKSA9PiB7XG4gICAgICBjb25zdCBkb20gPSByZWYuY3VycmVudDtcbiAgICAgIGlmICghZG9tKSByZXR1cm47XG4gICAgICBjb25zdCByb290ID0gZG9tLnNoYWRvd1Jvb3QgPz8gZG9tLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pO1xuICAgICAgY29uc3QgZnJhZ21lbnQgPSBkb2N1bWVudFxuICAgICAgICAuY3JlYXRlUmFuZ2UoKVxuICAgICAgICAuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KFxuICAgICAgICAgIGh0bWwucmVwbGFjZShcInt7c2hhZG93Um9vdElkfX1cIiwgc2hhZG93Um9vdElkKVxuICAgICAgICApO1xuICAgICAgcm9vdC5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gICAgfSk7XG4gIH0sIFt1aUNsaWVudCwgdWlOYW1lc3BhY2UsIG1lc3NhZ2UubmFtZSwgc2hhZG93Um9vdElkLCBoYXNDbGllbnRDb21wb25lbnRdKTtcblxuICBpZiAoaGFzQ2xpZW50Q29tcG9uZW50KSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxVc2VTdHJlYW1Db250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7IHN0cmVhbSwgbWV0YSB9fT5cbiAgICAgICAge1JlYWN0LmNyZWF0ZUVsZW1lbnQoY2xpZW50Q29tcG9uZW50LCBtZXNzYWdlLnByb3BzKX1cbiAgICAgIDwvVXNlU3RyZWFtQ29udGV4dC5Qcm92aWRlcj5cbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPGRpdiBpZD17c2hhZG93Um9vdElkfSByZWY9e3JlZn0gey4uLnByb3BzfSAvPlxuXG4gICAgICA8VXNlU3RyZWFtQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17eyBzdHJlYW0sIG1ldGEgfX0+XG4gICAgICAgIHtzdGF0ZT8udGFyZ2V0ICE9IG51bGxcbiAgICAgICAgICA/IFJlYWN0RE9NLmNyZWF0ZVBvcnRhbChcbiAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChzdGF0ZS5jb21wLCBtZXNzYWdlLnByb3BzKSxcbiAgICAgICAgICAgICAgc3RhdGUudGFyZ2V0XG4gICAgICAgICAgICApXG4gICAgICAgICAgOiBmYWxsYmFja0NvbXBvbmVudH1cbiAgICAgIDwvVXNlU3RyZWFtQ29udGV4dC5Qcm92aWRlcj5cbiAgICA8Lz5cbiAgKTtcbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgV2luZG93IHtcbiAgICBbRVhUX1NUT1JFX1NZTUJPTF06IENvbXBvbmVudFN0b3JlO1xuICAgIFtSRVFVSVJFX1NZTUJPTF06IChuYW1lOiBzdHJpbmcpID0+IHVua25vd247XG4gICAgW1JFUVVJUkVfRVhUUkFfU1lNQk9MXTogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4cGVyaW1lbnRhbF9sb2FkU2hhcmUobmFtZTogc3RyaW5nLCBtb2R1bGU6IHVua25vd24pIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybjtcblxuICB3aW5kb3dbUkVRVUlSRV9FWFRSQV9TWU1CT0xdID8/PSB7fTtcbiAgd2luZG93W1JFUVVJUkVfRVhUUkFfU1lNQk9MXVtuYW1lXSA9IG1vZHVsZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJvb3RzdHJhcFVpQ29udGV4dCgpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB3aW5kb3dbRVhUX1NUT1JFX1NZTUJPTF0gPSBDT01QT05FTlRfU1RPUkU7XG4gIHdpbmRvd1tSRVFVSVJFX1NZTUJPTF0gPSAobmFtZTogc3RyaW5nKSA9PiB7XG4gICAgaWYgKG5hbWUgPT09IFwicmVhY3RcIikgcmV0dXJuIFJlYWN0O1xuICAgIGlmIChuYW1lID09PSBcInJlYWN0LWRvbVwiKSByZXR1cm4gUmVhY3RET007XG4gICAgaWYgKG5hbWUgPT09IFwicmVhY3QvanN4LXJ1bnRpbWVcIikgcmV0dXJuIEpzeFJ1bnRpbWU7XG4gICAgaWYgKG5hbWUgPT09IFwiQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL3JlYWN0XCIpIHJldHVybiB7IHVzZVN0cmVhbSB9O1xuICAgIGlmIChuYW1lID09PSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoLXNkay9yZWFjdC11aVwiKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB1c2VTdHJlYW1Db250ZXh0LFxuICAgICAgICBMb2FkRXh0ZXJuYWxDb21wb25lbnQ6ICgpID0+IHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOZXN0aW5nIExvYWRFeHRlcm5hbENvbXBvbmVudCBpcyBub3Qgc3VwcG9ydGVkXCIpO1xuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICB3aW5kb3dbUkVRVUlSRV9FWFRSQV9TWU1CT0xdICE9IG51bGwgJiZcbiAgICAgIHR5cGVvZiB3aW5kb3dbUkVRVUlSRV9FWFRSQV9TWU1CT0xdID09PSBcIm9iamVjdFwiICYmXG4gICAgICBuYW1lIGluIHdpbmRvd1tSRVFVSVJFX0VYVFJBX1NZTUJPTF1cbiAgICApIHtcbiAgICAgIHJldHVybiB3aW5kb3dbUkVRVUlSRV9FWFRSQV9TWU1CT0xdW25hbWVdO1xuICAgIH1cblxuICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBtb2R1bGUuLi46ICR7bmFtZX1gKTtcbiAgfTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/dist/react-ui/client.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/dist/react-ui/index.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/dist/react-ui/index.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LoadExternalComponent: () => (/* reexport safe */ _client_js__WEBPACK_IMPORTED_MODULE_0__.LoadExternalComponent),\n/* harmony export */   experimental_loadShare: () => (/* reexport safe */ _client_js__WEBPACK_IMPORTED_MODULE_0__.experimental_loadShare),\n/* harmony export */   isRemoveUIMessage: () => (/* reexport safe */ _types_js__WEBPACK_IMPORTED_MODULE_1__.isRemoveUIMessage),\n/* harmony export */   isUIMessage: () => (/* reexport safe */ _types_js__WEBPACK_IMPORTED_MODULE_1__.isUIMessage),\n/* harmony export */   uiMessageReducer: () => (/* reexport safe */ _types_js__WEBPACK_IMPORTED_MODULE_1__.uiMessageReducer),\n/* harmony export */   useStreamContext: () => (/* reexport safe */ _client_js__WEBPACK_IMPORTED_MODULE_0__.useStreamContext)\n/* harmony export */ });\n/* harmony import */ var _client_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./client.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/react-ui/client.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./types.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/react-ui/types.js\");\n\n\n\n//#region src/react-ui/index.ts\n(0,_client_js__WEBPACK_IMPORTED_MODULE_0__.bootstrapUiContext)();\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL2Rpc3QvcmVhY3QtdWkvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBa0g7QUFDcEM7O0FBRTlFO0FBQ0EsOERBQWtCOztBQUVsQjtBQUM2SDtBQUM3SCIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoLXNkay9kaXN0L3JlYWN0LXVpL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IExvYWRFeHRlcm5hbENvbXBvbmVudCwgYm9vdHN0cmFwVWlDb250ZXh0LCBleHBlcmltZW50YWxfbG9hZFNoYXJlLCB1c2VTdHJlYW1Db250ZXh0IH0gZnJvbSBcIi4vY2xpZW50LmpzXCI7XG5pbXBvcnQgeyBpc1JlbW92ZVVJTWVzc2FnZSwgaXNVSU1lc3NhZ2UsIHVpTWVzc2FnZVJlZHVjZXIgfSBmcm9tIFwiLi90eXBlcy5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3JlYWN0LXVpL2luZGV4LnRzXG5ib290c3RyYXBVaUNvbnRleHQoKTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBMb2FkRXh0ZXJuYWxDb21wb25lbnQsIGV4cGVyaW1lbnRhbF9sb2FkU2hhcmUsIGlzUmVtb3ZlVUlNZXNzYWdlLCBpc1VJTWVzc2FnZSwgdWlNZXNzYWdlUmVkdWNlciwgdXNlU3RyZWFtQ29udGV4dCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/dist/react-ui/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/dist/react-ui/types.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/dist/react-ui/types.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isRemoveUIMessage: () => (/* binding */ isRemoveUIMessage),\n/* harmony export */   isUIMessage: () => (/* binding */ isUIMessage),\n/* harmony export */   uiMessageReducer: () => (/* binding */ uiMessageReducer)\n/* harmony export */ });\n//#region src/react-ui/types.ts\nfunction isUIMessage(message) {\n\tif (typeof message !== \"object\" || message == null) return false;\n\tif (!(\"type\" in message)) return false;\n\treturn message.type === \"ui\";\n}\nfunction isRemoveUIMessage(message) {\n\tif (typeof message !== \"object\" || message == null) return false;\n\tif (!(\"type\" in message)) return false;\n\treturn message.type === \"remove-ui\";\n}\nfunction uiMessageReducer(state, update) {\n\tconst events = Array.isArray(update) ? update : [update];\n\tlet newState = state.slice();\n\tfor (const event of events) {\n\t\tif (event.type === \"remove-ui\") {\n\t\t\tnewState = newState.filter((ui) => ui.id !== event.id);\n\t\t\tcontinue;\n\t\t}\n\t\tconst index = state.findIndex((ui) => ui.id === event.id);\n\t\tif (index !== -1) newState[index] = typeof event.metadata === \"object\" && event.metadata != null && event.metadata.merge ? {\n\t\t\t...event,\n\t\t\tprops: {\n\t\t\t\t...state[index].props,\n\t\t\t\t...event.props\n\t\t\t}\n\t\t} : event;\n\t\telse newState.push(event);\n\t}\n\treturn newState;\n}\n\n//#endregion\n\n//# sourceMappingURL=types.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL2Rpc3QvcmVhY3QtdWkvdHlwZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUM0RDtBQUM1RCIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoLXNkay9kaXN0L3JlYWN0LXVpL3R5cGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvcmVhY3QtdWkvdHlwZXMudHNcbmZ1bmN0aW9uIGlzVUlNZXNzYWdlKG1lc3NhZ2UpIHtcblx0aWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuXHRpZiAoIShcInR5cGVcIiBpbiBtZXNzYWdlKSkgcmV0dXJuIGZhbHNlO1xuXHRyZXR1cm4gbWVzc2FnZS50eXBlID09PSBcInVpXCI7XG59XG5mdW5jdGlvbiBpc1JlbW92ZVVJTWVzc2FnZShtZXNzYWdlKSB7XG5cdGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09IG51bGwpIHJldHVybiBmYWxzZTtcblx0aWYgKCEoXCJ0eXBlXCIgaW4gbWVzc2FnZSkpIHJldHVybiBmYWxzZTtcblx0cmV0dXJuIG1lc3NhZ2UudHlwZSA9PT0gXCJyZW1vdmUtdWlcIjtcbn1cbmZ1bmN0aW9uIHVpTWVzc2FnZVJlZHVjZXIoc3RhdGUsIHVwZGF0ZSkge1xuXHRjb25zdCBldmVudHMgPSBBcnJheS5pc0FycmF5KHVwZGF0ZSkgPyB1cGRhdGUgOiBbdXBkYXRlXTtcblx0bGV0IG5ld1N0YXRlID0gc3RhdGUuc2xpY2UoKTtcblx0Zm9yIChjb25zdCBldmVudCBvZiBldmVudHMpIHtcblx0XHRpZiAoZXZlbnQudHlwZSA9PT0gXCJyZW1vdmUtdWlcIikge1xuXHRcdFx0bmV3U3RhdGUgPSBuZXdTdGF0ZS5maWx0ZXIoKHVpKSA9PiB1aS5pZCAhPT0gZXZlbnQuaWQpO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHRcdGNvbnN0IGluZGV4ID0gc3RhdGUuZmluZEluZGV4KCh1aSkgPT4gdWkuaWQgPT09IGV2ZW50LmlkKTtcblx0XHRpZiAoaW5kZXggIT09IC0xKSBuZXdTdGF0ZVtpbmRleF0gPSB0eXBlb2YgZXZlbnQubWV0YWRhdGEgPT09IFwib2JqZWN0XCIgJiYgZXZlbnQubWV0YWRhdGEgIT0gbnVsbCAmJiBldmVudC5tZXRhZGF0YS5tZXJnZSA/IHtcblx0XHRcdC4uLmV2ZW50LFxuXHRcdFx0cHJvcHM6IHtcblx0XHRcdFx0Li4uc3RhdGVbaW5kZXhdLnByb3BzLFxuXHRcdFx0XHQuLi5ldmVudC5wcm9wc1xuXHRcdFx0fVxuXHRcdH0gOiBldmVudDtcblx0XHRlbHNlIG5ld1N0YXRlLnB1c2goZXZlbnQpO1xuXHR9XG5cdHJldHVybiBuZXdTdGF0ZTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBpc1JlbW92ZVVJTWVzc2FnZSwgaXNVSU1lc3NhZ2UsIHVpTWVzc2FnZVJlZHVjZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXR5cGVzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/dist/react-ui/types.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/dist/react/index.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/dist/react/index.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FetchStreamTransport: () => (/* reexport safe */ _stream_custom_js__WEBPACK_IMPORTED_MODULE_0__.FetchStreamTransport),\n/* harmony export */   useStream: () => (/* reexport safe */ _stream_js__WEBPACK_IMPORTED_MODULE_1__.useStream)\n/* harmony export */ });\n/* harmony import */ var _stream_custom_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./stream.custom.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/react/stream.custom.js\");\n/* harmony import */ var _stream_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stream.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/react/stream.js\");\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL2Rpc3QvcmVhY3QvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUEwRDtBQUNsQiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoLXNkay9kaXN0L3JlYWN0L2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZldGNoU3RyZWFtVHJhbnNwb3J0IH0gZnJvbSBcIi4vc3RyZWFtLmN1c3RvbS5qc1wiO1xuaW1wb3J0IHsgdXNlU3RyZWFtIH0gZnJvbSBcIi4vc3RyZWFtLmpzXCI7XG5cbmV4cG9ydCB7IEZldGNoU3RyZWFtVHJhbnNwb3J0LCB1c2VTdHJlYW0gfTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/dist/react/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/dist/react/stream.custom.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/dist/react/stream.custom.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FetchStreamTransport: () => (/* binding */ FetchStreamTransport),\n/* harmony export */   useStreamCustom: () => (/* binding */ useStreamCustom)\n/* harmony export */ });\n/* harmony import */ var _utils_sse_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/sse.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/utils/sse.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/stream.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/utils/stream.js\");\n/* harmony import */ var _ui_messages_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../ui/messages.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/ui/messages.js\");\n/* harmony import */ var _ui_manager_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../ui/manager.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/ui/manager.js\");\n/* harmony import */ var _utils_tools_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/tools.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/utils/tools.js\");\n/* harmony import */ var _thread_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./thread.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/react/thread.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* __next_internal_client_entry_do_not_use__ FetchStreamTransport,useStreamCustom auto */ \n\n\n\n\n\n\n//#region src/react/stream.custom.tsx\nvar FetchStreamTransport = class {\n    constructor(options){\n        this.options = options;\n    }\n    async stream(payload) {\n        const { signal, ...body } = payload;\n        let requestInit = {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                ...this.options.defaultHeaders\n            },\n            body: JSON.stringify(body),\n            signal\n        };\n        if (this.options.onRequest) requestInit = await this.options.onRequest(this.options.apiUrl, requestInit);\n        const response = await (this.options.fetch ?? fetch)(this.options.apiUrl, requestInit);\n        if (!response.ok) throw new Error(`Failed to stream: ${response.statusText}`);\n        const stream = (response.body || new ReadableStream({\n            start: (ctrl)=>ctrl.close()\n        })).pipeThrough((0,_utils_sse_js__WEBPACK_IMPORTED_MODULE_0__.BytesLineDecoder)()).pipeThrough((0,_utils_sse_js__WEBPACK_IMPORTED_MODULE_0__.SSEDecoder)());\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_1__.IterableReadableStream.fromReadableStream(stream);\n    }\n};\nfunction useStreamCustom(options) {\n    const [messageManager] = (0,react__WEBPACK_IMPORTED_MODULE_6__.useState)({\n        \"useStreamCustom.useState\": ()=>new _ui_messages_js__WEBPACK_IMPORTED_MODULE_2__.MessageTupleManager()\n    }[\"useStreamCustom.useState\"]);\n    const [stream] = (0,react__WEBPACK_IMPORTED_MODULE_6__.useState)({\n        \"useStreamCustom.useState\": ()=>new _ui_manager_js__WEBPACK_IMPORTED_MODULE_3__.StreamManager(messageManager, {\n                throttle: options.throttle ?? false\n            })\n    }[\"useStreamCustom.useState\"]);\n    (0,react__WEBPACK_IMPORTED_MODULE_6__.useSyncExternalStore)(stream.subscribe, stream.getSnapshot, stream.getSnapshot);\n    const [threadId, onThreadId] = (0,_thread_js__WEBPACK_IMPORTED_MODULE_5__.useControllableThreadId)(options);\n    const threadIdRef = (0,react__WEBPACK_IMPORTED_MODULE_6__.useRef)(threadId);\n    (0,react__WEBPACK_IMPORTED_MODULE_6__.useEffect)({\n        \"useStreamCustom.useEffect\": ()=>{\n            if (threadIdRef.current !== threadId) {\n                threadIdRef.current = threadId;\n                stream.clear();\n            }\n        }\n    }[\"useStreamCustom.useEffect\"], [\n        threadId,\n        stream\n    ]);\n    const getMessages = (value)=>{\n        const messagesKey = options.messagesKey ?? \"messages\";\n        return Array.isArray(value[messagesKey]) ? value[messagesKey] : [];\n    };\n    const setMessages = (current, messages)=>{\n        const messagesKey = options.messagesKey ?? \"messages\";\n        return {\n            ...current,\n            [messagesKey]: messages\n        };\n    };\n    const historyValues = options.initialValues ?? {};\n    const stop = ()=>stream.stop(historyValues, {\n            onStop: options.onStop\n        });\n    const submit = async (values, submitOptions)=>{\n        let callbackMeta;\n        let usableThreadId = threadId;\n        stream.setStreamValues(()=>{\n            if (submitOptions?.optimisticValues != null) return {\n                ...historyValues,\n                ...typeof submitOptions.optimisticValues === \"function\" ? submitOptions.optimisticValues(historyValues) : submitOptions.optimisticValues\n            };\n            return {\n                ...historyValues\n            };\n        });\n        await stream.start(async (signal)=>{\n            if (!usableThreadId) {\n                usableThreadId = crypto.randomUUID();\n                threadIdRef.current = usableThreadId;\n                onThreadId(usableThreadId);\n            }\n            if (!usableThreadId) throw new Error(\"Failed to obtain valid thread ID.\");\n            return options.transport.stream({\n                input: values,\n                context: submitOptions?.context,\n                command: submitOptions?.command,\n                signal,\n                config: {\n                    ...submitOptions?.config,\n                    configurable: {\n                        thread_id: usableThreadId,\n                        ...submitOptions?.config?.configurable\n                    }\n                }\n            });\n        }, {\n            getMessages,\n            setMessages,\n            initialValues: {},\n            callbacks: options,\n            onSuccess: ()=>void 0,\n            onError (error) {\n                options.onError?.(error, callbackMeta);\n            }\n        });\n    };\n    return {\n        get values () {\n            return stream.values ?? {};\n        },\n        error: stream.error,\n        isLoading: stream.isLoading,\n        stop,\n        submit,\n        get interrupt () {\n            if (stream.values != null && \"__interrupt__\" in stream.values && Array.isArray(stream.values.__interrupt__)) {\n                const valueInterrupts = stream.values.__interrupt__;\n                if (valueInterrupts.length === 0) return {\n                    when: \"breakpoint\"\n                };\n                if (valueInterrupts.length === 1) return valueInterrupts[0];\n                return valueInterrupts;\n            }\n        },\n        get messages () {\n            if (!stream.values) return [];\n            return getMessages(stream.values);\n        },\n        get toolCalls () {\n            if (!stream.values) return [];\n            return (0,_utils_tools_js__WEBPACK_IMPORTED_MODULE_4__.getToolCallsWithResults)(getMessages(stream.values));\n        },\n        getToolCalls (message) {\n            if (!stream.values) return [];\n            return (0,_utils_tools_js__WEBPACK_IMPORTED_MODULE_4__.getToolCallsWithResults)(getMessages(stream.values)).filter((tc)=>tc.aiMessage.id === message.id);\n        }\n    };\n}\n//#endregion\n //# sourceMappingURL=stream.custom.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL2Rpc3QvcmVhY3Qvc3RyZWFtLmN1c3RvbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXFEQSxJQUFhLHVCQUFiLE1BSUE7SUFDRSxZQUE2QixRQUFzQztRQUF0Qzs7SUFFN0IsTUFBTSxPQUFPLFNBSzhEO1FBQ3pFLE1BQU0sRUFBRSxRQUFRLEdBQUcsU0FBUztRQUU1QixJQUFJLGNBQTJCO1lBQzdCLFFBQVE7WUFDUixTQUFTO2dCQUNQLGdCQUFnQjtnQkFDaEIsR0FBRyxLQUFLLFFBQVE7YUFDakI7WUFDRCxNQUFNLEtBQUssVUFBVSxLQUFLO1lBQzFCO1NBQ0Q7UUFFRCxJQUFJLEtBQUssUUFBUSxVQUNmLGVBQWMsTUFBTSxLQUFLLFFBQVEsVUFDL0IsS0FBSyxRQUFRLFFBQ2IsWUFDRDtRQUlILE1BQU0sV0FBVyxPQUZELEtBQUssUUFBUSxTQUFTLE9BRVAsS0FBSyxRQUFRLFFBQVEsWUFBWTtRQUNoRSxJQUFJLENBQUMsU0FBUyxHQUNaLE9BQU0sSUFBSSxNQUFNLHFCQUFxQixTQUFTLGFBQWE7UUFHN0QsTUFBTSxVQUNKLFNBQVMsUUFBUSxJQUFJLGVBQWU7WUFBRSxRQUFRLE9BQVMsS0FBSyxPQUFPO1FBQUEsRUFBRSxDQUFDLENBRXJFLFlBQVksK0RBQWdCLEVBQUUsQ0FBQyxDQUMvQixZQUFZLHlEQUFVLEVBQUUsQ0FBQztRQUU1QixPQUFPLG9FQUFzQixDQUFDLG1CQUFtQixPQUFPOzs7QUFJNUQsU0FBZ0IsZ0JBSWQsU0FDaUM7SUFPakMsTUFBTSxDQUFDLGtCQUFrQiwrQ0FBUTtvQ0FBUixJQUFlLElBQUksZ0VBQW1CLEVBQUU7O0lBQ2pFLE1BQU0sQ0FBQyxVQUFVLCtDQUFRO29DQUFSLElBRWIsSUFBSSx5REFBYSxDQUFpQixnQkFBZ0I7Z0JBQ2hELFVBQVUsUUFBUSxZQUFZO1lBQUEsQ0FDL0IsQ0FBQzs7SUFHTiwyREFBb0IsQ0FDbEIsT0FBTyxXQUNQLE9BQU8sYUFDUCxPQUFPLFlBQ1I7SUFFRCxNQUFNLENBQUMsVUFBVSxjQUFjLG1FQUF1QixDQUFDLFFBQVE7SUFDL0QsTUFBTSxjQUFjLDZDQUFNLENBQWdCLFNBQVM7SUFHbkQsZ0RBQVM7cUNBQVQ7WUFDRSxJQUFJLFlBQVksWUFBWSxVQUFVO2dCQUNwQyxZQUFZLFVBQVU7Z0JBQ3RCLE9BQU8sT0FBTzs7O29DQUVmO1FBQUM7UUFBVTtLQUFPLENBQUM7SUFFdEIsTUFBTSxlQUFlO1FBQ25CLE1BQU0sY0FBYyxRQUFRLGVBQWU7UUFDM0MsT0FBTyxNQUFNLFFBQVEsTUFBTSxhQUFhLEdBQ25DLE1BQU0sZUFDUCxFQUFFOztJQUdSLE1BQU0sZUFBZSxTQUFvQjtRQUN2QyxNQUFNLGNBQWMsUUFBUSxlQUFlO1FBQzNDLE9BQU87WUFBRSxHQUFHO2FBQVUsY0FBYztTQUFVOztJQUdoRCxNQUFNLGdCQUFnQixRQUFRLGlCQUFrQixFQUFFO0lBRWxELE1BQU0sV0FBYSxPQUFPLEtBQUssZUFBZTtZQUFFLFFBQVEsUUFBUTtRQUFBLENBQVEsQ0FBQztJQUV6RSxNQUFNLFNBQVMsT0FDYixRQUNBO1FBRUEsSUFBSTtRQUNKLElBQUksaUJBQWlCO1FBRXJCLE9BQU87WUFDTCxJQUFJLGVBQWUsb0JBQW9CLEtBQ3JDLFFBQU87Z0JBQ0wsR0FBRztnQkFDSCxHQUFJLE9BQU8sY0FBYyxxQkFBcUIsYUFDMUMsY0FBYyxpQkFBaUIsY0FBYyxHQUM3QyxjQUFjO2FBQ25CO1lBR0gsT0FBTztnQkFBRSxHQUFHO1lBQUEsQ0FBZTtVQUMzQjtRQUVGLE1BQU0sT0FBTyxNQUNYLE9BQU87WUFDTCxJQUFJLENBQUMsZ0JBQWdCO2dCQUVuQixpQkFBaUIsT0FBTyxZQUFZO2dCQUNwQyxZQUFZLFVBQVU7Z0JBQ3RCLFdBQVcsZUFBZTs7WUFHNUIsSUFBSSxDQUFDLGVBQ0gsT0FBTSxJQUFJLE1BQU0sb0NBQW9DO1lBR3RELE9BQU8sUUFBUSxVQUFVLE9BQU87Z0JBQzlCLE9BQU87Z0JBQ1AsU0FBUyxlQUFlO2dCQUN4QixTQUFTLGVBQWU7Z0JBQ3hCO2dCQUNBLFFBQVE7b0JBQ04sR0FBRyxlQUFlO29CQUNsQixjQUFjO3dCQUNaLFdBQVc7d0JBQ1gsR0FBRyxlQUFlLFFBQVE7cUJBQzNCO2lCQUNGO2FBQ0YsQ0FBQztXQUlKO1lBQ0U7WUFDQTtZQUVBLGVBQWUsRUFBRTtZQUNqQixXQUFXO1lBRVgsZUFBaUI7WUFDakIsU0FBUSxPQUFPO2dCQUNiLFFBQVEsVUFBVSxPQUFPLGFBQWE7O1NBRXpDLENBQ0Y7O0lBR0gsT0FBTztRQUNMLElBQUksVUFBUztZQUNYLE9BQU8sT0FBTyxVQUFXLEVBQUU7O1FBRzdCLE9BQU8sT0FBTztRQUNkLFdBQVcsT0FBTztRQUVsQjtRQUNBO1FBRUEsSUFBSSxhQUFrRDtZQUNwRCxJQUNFLE9BQU8sVUFBVSxRQUNqQixtQkFBbUIsT0FBTyxVQUMxQixNQUFNLFFBQVEsT0FBTyxPQUFPLGNBQWMsRUFDMUM7Z0JBQ0EsTUFBTSxrQkFBa0IsT0FBTyxPQUFPO2dCQUN0QyxJQUFJLGdCQUFnQixXQUFXLEVBQUcsUUFBTztvQkFBRSxNQUFNO2dCQUFBLENBQWM7Z0JBQy9ELElBQUksZ0JBQWdCLFdBQVcsRUFBRyxRQUFPLGdCQUFnQjtnQkFHekQsT0FBTzs7O1FBTVgsSUFBSSxZQUFvQztZQUN0QyxJQUFJLENBQUMsT0FBTyxPQUFRLFFBQU8sRUFBRTtZQUM3QixPQUFPLFlBQVksT0FBTyxPQUFPOztRQUduQyxJQUFJLGFBQVk7WUFDZCxJQUFJLENBQUMsT0FBTyxPQUFRLFFBQU8sRUFBRTtZQUU3QixPQUFPLHdFQUF1QixDQURqQixZQUFZLE9BQU8sT0FBTyxDQUNXOztRQUdwRCxjQUFhLFNBQVM7WUFDcEIsSUFBSSxDQUFDLE9BQU8sT0FBUSxRQUFPLEVBQUU7WUFHN0IsT0FEcUIsd0VBQXVCLENBRC9CLFlBQVksT0FBTyxPQUFPLENBQ3lCLENBQzVDLFFBQVEsS0FBTyxHQUFHLFVBQVUsT0FBTyxRQUFRLEdBQUc7O0tBRXJFIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvc3JjL3JlYWN0L3N0cmVhbS5jdXN0b20udHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIF9fTENfQUxMT1dfRU5UUllQT0lOVF9TSURFX0VGRkVDVFNfXyAqL1xuXG5cInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlLCB1c2VTeW5jRXh0ZXJuYWxTdG9yZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgRXZlbnRTdHJlYW1FdmVudCwgU3RyZWFtTWFuYWdlciB9IGZyb20gXCIuLi91aS9tYW5hZ2VyLmpzXCI7XG5pbXBvcnQgdHlwZSB7XG4gIEdldFVwZGF0ZVR5cGUsXG4gIEdldEN1c3RvbUV2ZW50VHlwZSxcbiAgR2V0SW50ZXJydXB0VHlwZSxcbiAgR2V0VG9vbENhbGxzVHlwZSxcbiAgUnVuQ2FsbGJhY2tNZXRhLFxuICBHZXRDb25maWd1cmFibGVUeXBlLFxuICBVc2VTdHJlYW1UcmFuc3BvcnQsXG4gIFVzZVN0cmVhbUN1c3RvbU9wdGlvbnMsXG4gIEN1c3RvbVN1Ym1pdE9wdGlvbnMsXG59IGZyb20gXCIuLi91aS90eXBlcy5qc1wiO1xuaW1wb3J0IHR5cGUgeyBVc2VTdHJlYW1DdXN0b20gfSBmcm9tIFwiLi90eXBlcy5qc1wiO1xuaW1wb3J0IHsgdHlwZSBNZXNzYWdlIH0gZnJvbSBcIi4uL3R5cGVzLm1lc3NhZ2VzLmpzXCI7XG5pbXBvcnQgeyBnZXRUb29sQ2FsbHNXaXRoUmVzdWx0cyB9IGZyb20gXCIuLi91dGlscy90b29scy5qc1wiO1xuaW1wb3J0IHsgTWVzc2FnZVR1cGxlTWFuYWdlciB9IGZyb20gXCIuLi91aS9tZXNzYWdlcy5qc1wiO1xuaW1wb3J0IHsgSW50ZXJydXB0IH0gZnJvbSBcIi4uL3NjaGVtYS5qc1wiO1xuaW1wb3J0IHsgQnl0ZXNMaW5lRGVjb2RlciwgU1NFRGVjb2RlciB9IGZyb20gXCIuLi91dGlscy9zc2UuanNcIjtcbmltcG9ydCB7IEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0gfSBmcm9tIFwiLi4vdXRpbHMvc3RyZWFtLmpzXCI7XG5pbXBvcnQgeyB1c2VDb250cm9sbGFibGVUaHJlYWRJZCB9IGZyb20gXCIuL3RocmVhZC5qc1wiO1xuaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gXCIuLi90eXBlcy5qc1wiO1xuaW1wb3J0IHR5cGUgeyBCYWdUZW1wbGF0ZSB9IGZyb20gXCIuLi90eXBlcy50ZW1wbGF0ZS5qc1wiO1xuXG5pbnRlcmZhY2UgRmV0Y2hTdHJlYW1UcmFuc3BvcnRPcHRpb25zIHtcbiAgLyoqXG4gICAqIFRoZSBVUkwgb2YgdGhlIEFQSSB0byB1c2UuXG4gICAqL1xuICBhcGlVcmw6IHN0cmluZztcblxuICAvKipcbiAgICogRGVmYXVsdCBoZWFkZXJzIHRvIHNlbmQgd2l0aCByZXF1ZXN0cy5cbiAgICovXG4gIGRlZmF1bHRIZWFkZXJzPzogSGVhZGVyc0luaXQ7XG5cbiAgLyoqXG4gICAqIFNwZWNpZnkgYSBjdXN0b20gZmV0Y2ggaW1wbGVtZW50YXRpb24uXG4gICAqL1xuICBmZXRjaD86IHR5cGVvZiBmZXRjaCB8ICgoLi4uYXJnczogYW55W10pID0+IGFueSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayB0aGF0IGlzIGNhbGxlZCBiZWZvcmUgdGhlIHJlcXVlc3QgaXMgbWFkZS5cbiAgICovXG4gIG9uUmVxdWVzdD86IChcbiAgICB1cmw6IHN0cmluZyxcbiAgICBpbml0OiBSZXF1ZXN0SW5pdFxuICApID0+IFByb21pc2U8UmVxdWVzdEluaXQ+IHwgUmVxdWVzdEluaXQ7XG59XG5cbmV4cG9ydCBjbGFzcyBGZXRjaFN0cmVhbVRyYW5zcG9ydDxcbiAgU3RhdGVUeXBlIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPixcbiAgQmFnIGV4dGVuZHMgQmFnVGVtcGxhdGUgPSBCYWdUZW1wbGF0ZVxuPiBpbXBsZW1lbnRzIFVzZVN0cmVhbVRyYW5zcG9ydDxTdGF0ZVR5cGUsIEJhZz5cbntcbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBvcHRpb25zOiBGZXRjaFN0cmVhbVRyYW5zcG9ydE9wdGlvbnMpIHt9XG5cbiAgYXN5bmMgc3RyZWFtKHBheWxvYWQ6IHtcbiAgICBpbnB1dDogR2V0VXBkYXRlVHlwZTxCYWcsIFN0YXRlVHlwZT4gfCBudWxsIHwgdW5kZWZpbmVkO1xuICAgIGNvbnRleHQ6IEdldENvbmZpZ3VyYWJsZVR5cGU8QmFnPiB8IHVuZGVmaW5lZDtcbiAgICBjb21tYW5kOiBDb21tYW5kIHwgdW5kZWZpbmVkO1xuICAgIHNpZ25hbDogQWJvcnRTaWduYWw7XG4gIH0pOiBQcm9taXNlPEFzeW5jR2VuZXJhdG9yPHsgaWQ/OiBzdHJpbmc7IGV2ZW50OiBzdHJpbmc7IGRhdGE6IHVua25vd24gfT4+IHtcbiAgICBjb25zdCB7IHNpZ25hbCwgLi4uYm9keSB9ID0gcGF5bG9hZDtcblxuICAgIGxldCByZXF1ZXN0SW5pdDogUmVxdWVzdEluaXQgPSB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgLi4udGhpcy5vcHRpb25zLmRlZmF1bHRIZWFkZXJzLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgICAgc2lnbmFsLFxuICAgIH07XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLm9uUmVxdWVzdCkge1xuICAgICAgcmVxdWVzdEluaXQgPSBhd2FpdCB0aGlzLm9wdGlvbnMub25SZXF1ZXN0KFxuICAgICAgICB0aGlzLm9wdGlvbnMuYXBpVXJsLFxuICAgICAgICByZXF1ZXN0SW5pdFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgZmV0Y2hGbiA9IHRoaXMub3B0aW9ucy5mZXRjaCA/PyBmZXRjaDtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hGbih0aGlzLm9wdGlvbnMuYXBpVXJsLCByZXF1ZXN0SW5pdCk7XG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gc3RyZWFtOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RyZWFtID0gKFxuICAgICAgcmVzcG9uc2UuYm9keSB8fCBuZXcgUmVhZGFibGVTdHJlYW0oeyBzdGFydDogKGN0cmwpID0+IGN0cmwuY2xvc2UoKSB9KVxuICAgIClcbiAgICAgIC5waXBlVGhyb3VnaChCeXRlc0xpbmVEZWNvZGVyKCkpXG4gICAgICAucGlwZVRocm91Z2goU1NFRGVjb2RlcigpKTtcblxuICAgIHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21SZWFkYWJsZVN0cmVhbShzdHJlYW0pO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VTdHJlYW1DdXN0b208XG4gIFN0YXRlVHlwZSBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4gIEJhZyBleHRlbmRzIEJhZ1RlbXBsYXRlID0gQmFnVGVtcGxhdGVcbj4oXG4gIG9wdGlvbnM6IFVzZVN0cmVhbUN1c3RvbU9wdGlvbnM8U3RhdGVUeXBlLCBCYWc+XG4pOiBVc2VTdHJlYW1DdXN0b208U3RhdGVUeXBlLCBCYWc+IHtcbiAgdHlwZSBVcGRhdGVUeXBlID0gR2V0VXBkYXRlVHlwZTxCYWcsIFN0YXRlVHlwZT47XG4gIHR5cGUgQ3VzdG9tVHlwZSA9IEdldEN1c3RvbUV2ZW50VHlwZTxCYWc+O1xuICB0eXBlIEludGVycnVwdFR5cGUgPSBHZXRJbnRlcnJ1cHRUeXBlPEJhZz47XG4gIHR5cGUgQ29uZmlndXJhYmxlVHlwZSA9IEdldENvbmZpZ3VyYWJsZVR5cGU8QmFnPjtcbiAgdHlwZSBUb29sQ2FsbFR5cGUgPSBHZXRUb29sQ2FsbHNUeXBlPFN0YXRlVHlwZT47XG5cbiAgY29uc3QgW21lc3NhZ2VNYW5hZ2VyXSA9IHVzZVN0YXRlKCgpID0+IG5ldyBNZXNzYWdlVHVwbGVNYW5hZ2VyKCkpO1xuICBjb25zdCBbc3RyZWFtXSA9IHVzZVN0YXRlKFxuICAgICgpID0+XG4gICAgICBuZXcgU3RyZWFtTWFuYWdlcjxTdGF0ZVR5cGUsIEJhZz4obWVzc2FnZU1hbmFnZXIsIHtcbiAgICAgICAgdGhyb3R0bGU6IG9wdGlvbnMudGhyb3R0bGUgPz8gZmFsc2UsXG4gICAgICB9KVxuICApO1xuXG4gIHVzZVN5bmNFeHRlcm5hbFN0b3JlKFxuICAgIHN0cmVhbS5zdWJzY3JpYmUsXG4gICAgc3RyZWFtLmdldFNuYXBzaG90LFxuICAgIHN0cmVhbS5nZXRTbmFwc2hvdFxuICApO1xuXG4gIGNvbnN0IFt0aHJlYWRJZCwgb25UaHJlYWRJZF0gPSB1c2VDb250cm9sbGFibGVUaHJlYWRJZChvcHRpb25zKTtcbiAgY29uc3QgdGhyZWFkSWRSZWYgPSB1c2VSZWY8c3RyaW5nIHwgbnVsbD4odGhyZWFkSWQpO1xuXG4gIC8vIENhbmNlbCB0aGUgc3RyZWFtIGlmIHRocmVhZCBJRCBoYXMgY2hhbmdlZFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0aHJlYWRJZFJlZi5jdXJyZW50ICE9PSB0aHJlYWRJZCkge1xuICAgICAgdGhyZWFkSWRSZWYuY3VycmVudCA9IHRocmVhZElkO1xuICAgICAgc3RyZWFtLmNsZWFyKCk7XG4gICAgfVxuICB9LCBbdGhyZWFkSWQsIHN0cmVhbV0pO1xuXG4gIGNvbnN0IGdldE1lc3NhZ2VzID0gKHZhbHVlOiBTdGF0ZVR5cGUpOiBNZXNzYWdlW10gPT4ge1xuICAgIGNvbnN0IG1lc3NhZ2VzS2V5ID0gb3B0aW9ucy5tZXNzYWdlc0tleSA/PyBcIm1lc3NhZ2VzXCI7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWVbbWVzc2FnZXNLZXldKVxuICAgICAgPyAodmFsdWVbbWVzc2FnZXNLZXldIGFzIE1lc3NhZ2VbXSlcbiAgICAgIDogW107XG4gIH07XG5cbiAgY29uc3Qgc2V0TWVzc2FnZXMgPSAoY3VycmVudDogU3RhdGVUeXBlLCBtZXNzYWdlczogTWVzc2FnZVtdKTogU3RhdGVUeXBlID0+IHtcbiAgICBjb25zdCBtZXNzYWdlc0tleSA9IG9wdGlvbnMubWVzc2FnZXNLZXkgPz8gXCJtZXNzYWdlc1wiO1xuICAgIHJldHVybiB7IC4uLmN1cnJlbnQsIFttZXNzYWdlc0tleV06IG1lc3NhZ2VzIH07XG4gIH07XG5cbiAgY29uc3QgaGlzdG9yeVZhbHVlcyA9IG9wdGlvbnMuaW5pdGlhbFZhbHVlcyA/PyAoe30gYXMgU3RhdGVUeXBlKTtcblxuICBjb25zdCBzdG9wID0gKCkgPT4gc3RyZWFtLnN0b3AoaGlzdG9yeVZhbHVlcywgeyBvblN0b3A6IG9wdGlvbnMub25TdG9wIH0pO1xuXG4gIGNvbnN0IHN1Ym1pdCA9IGFzeW5jIChcbiAgICB2YWx1ZXM6IFVwZGF0ZVR5cGUgfCBudWxsIHwgdW5kZWZpbmVkLFxuICAgIHN1Ym1pdE9wdGlvbnM/OiBDdXN0b21TdWJtaXRPcHRpb25zPFN0YXRlVHlwZSwgQ29uZmlndXJhYmxlVHlwZT5cbiAgKSA9PiB7XG4gICAgbGV0IGNhbGxiYWNrTWV0YTogUnVuQ2FsbGJhY2tNZXRhIHwgdW5kZWZpbmVkO1xuICAgIGxldCB1c2FibGVUaHJlYWRJZCA9IHRocmVhZElkO1xuXG4gICAgc3RyZWFtLnNldFN0cmVhbVZhbHVlcygoKSA9PiB7XG4gICAgICBpZiAoc3VibWl0T3B0aW9ucz8ub3B0aW1pc3RpY1ZhbHVlcyAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uaGlzdG9yeVZhbHVlcyxcbiAgICAgICAgICAuLi4odHlwZW9mIHN1Ym1pdE9wdGlvbnMub3B0aW1pc3RpY1ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgICA/IHN1Ym1pdE9wdGlvbnMub3B0aW1pc3RpY1ZhbHVlcyhoaXN0b3J5VmFsdWVzKVxuICAgICAgICAgICAgOiBzdWJtaXRPcHRpb25zLm9wdGltaXN0aWNWYWx1ZXMpLFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4geyAuLi5oaXN0b3J5VmFsdWVzIH07XG4gICAgfSk7XG5cbiAgICBhd2FpdCBzdHJlYW0uc3RhcnQoXG4gICAgICBhc3luYyAoc2lnbmFsOiBBYm9ydFNpZ25hbCkgPT4ge1xuICAgICAgICBpZiAoIXVzYWJsZVRocmVhZElkKSB7XG4gICAgICAgICAgLy8gZ2VuZXJhdGUgcmFuZG9tIHRocmVhZCBpZFxuICAgICAgICAgIHVzYWJsZVRocmVhZElkID0gY3J5cHRvLnJhbmRvbVVVSUQoKTtcbiAgICAgICAgICB0aHJlYWRJZFJlZi5jdXJyZW50ID0gdXNhYmxlVGhyZWFkSWQ7XG4gICAgICAgICAgb25UaHJlYWRJZCh1c2FibGVUaHJlYWRJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXVzYWJsZVRocmVhZElkKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIG9idGFpbiB2YWxpZCB0aHJlYWQgSUQuXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG9wdGlvbnMudHJhbnNwb3J0LnN0cmVhbSh7XG4gICAgICAgICAgaW5wdXQ6IHZhbHVlcyxcbiAgICAgICAgICBjb250ZXh0OiBzdWJtaXRPcHRpb25zPy5jb250ZXh0LFxuICAgICAgICAgIGNvbW1hbmQ6IHN1Ym1pdE9wdGlvbnM/LmNvbW1hbmQsXG4gICAgICAgICAgc2lnbmFsLFxuICAgICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgICAgLi4uc3VibWl0T3B0aW9ucz8uY29uZmlnLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB7XG4gICAgICAgICAgICAgIHRocmVhZF9pZDogdXNhYmxlVGhyZWFkSWQsXG4gICAgICAgICAgICAgIC4uLnN1Ym1pdE9wdGlvbnM/LmNvbmZpZz8uY29uZmlndXJhYmxlLFxuICAgICAgICAgICAgfSBhcyB1bmtub3duIGFzIEdldENvbmZpZ3VyYWJsZVR5cGU8QmFnPixcbiAgICAgICAgICB9LFxuICAgICAgICB9KSBhcyBQcm9taXNlPFxuICAgICAgICAgIEFzeW5jR2VuZXJhdG9yPEV2ZW50U3RyZWFtRXZlbnQ8U3RhdGVUeXBlLCBVcGRhdGVUeXBlLCBDdXN0b21UeXBlPj5cbiAgICAgICAgPjtcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGdldE1lc3NhZ2VzLFxuICAgICAgICBzZXRNZXNzYWdlcyxcblxuICAgICAgICBpbml0aWFsVmFsdWVzOiB7fSBhcyBTdGF0ZVR5cGUsXG4gICAgICAgIGNhbGxiYWNrczogb3B0aW9ucyxcblxuICAgICAgICBvblN1Y2Nlc3M6ICgpID0+IHVuZGVmaW5lZCxcbiAgICAgICAgb25FcnJvcihlcnJvcikge1xuICAgICAgICAgIG9wdGlvbnMub25FcnJvcj8uKGVycm9yLCBjYWxsYmFja01ldGEpO1xuICAgICAgICB9LFxuICAgICAgfVxuICAgICk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBnZXQgdmFsdWVzKCkge1xuICAgICAgcmV0dXJuIHN0cmVhbS52YWx1ZXMgPz8gKHt9IGFzIFN0YXRlVHlwZSk7XG4gICAgfSxcblxuICAgIGVycm9yOiBzdHJlYW0uZXJyb3IsXG4gICAgaXNMb2FkaW5nOiBzdHJlYW0uaXNMb2FkaW5nLFxuXG4gICAgc3RvcCxcbiAgICBzdWJtaXQsXG5cbiAgICBnZXQgaW50ZXJydXB0KCk6IEludGVycnVwdDxJbnRlcnJ1cHRUeXBlPiB8IHVuZGVmaW5lZCB7XG4gICAgICBpZiAoXG4gICAgICAgIHN0cmVhbS52YWx1ZXMgIT0gbnVsbCAmJlxuICAgICAgICBcIl9faW50ZXJydXB0X19cIiBpbiBzdHJlYW0udmFsdWVzICYmXG4gICAgICAgIEFycmF5LmlzQXJyYXkoc3RyZWFtLnZhbHVlcy5fX2ludGVycnVwdF9fKVxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlSW50ZXJydXB0cyA9IHN0cmVhbS52YWx1ZXMuX19pbnRlcnJ1cHRfXztcbiAgICAgICAgaWYgKHZhbHVlSW50ZXJydXB0cy5sZW5ndGggPT09IDApIHJldHVybiB7IHdoZW46IFwiYnJlYWtwb2ludFwiIH07XG4gICAgICAgIGlmICh2YWx1ZUludGVycnVwdHMubGVuZ3RoID09PSAxKSByZXR1cm4gdmFsdWVJbnRlcnJ1cHRzWzBdO1xuXG4gICAgICAgIC8vIFRPRE86IGZpeCB0aGUgdHlwaW5nIG9mIGludGVycnVwdHMgaWYgbXVsdGlwbGUgaW50ZXJydXB0cyBhcmUgcmV0dXJuZWRcbiAgICAgICAgcmV0dXJuIHZhbHVlSW50ZXJydXB0cyBhcyBJbnRlcnJ1cHQ8SW50ZXJydXB0VHlwZT47XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSxcblxuICAgIGdldCBtZXNzYWdlcygpOiBNZXNzYWdlPFRvb2xDYWxsVHlwZT5bXSB7XG4gICAgICBpZiAoIXN0cmVhbS52YWx1ZXMpIHJldHVybiBbXTtcbiAgICAgIHJldHVybiBnZXRNZXNzYWdlcyhzdHJlYW0udmFsdWVzKTtcbiAgICB9LFxuXG4gICAgZ2V0IHRvb2xDYWxscygpIHtcbiAgICAgIGlmICghc3RyZWFtLnZhbHVlcykgcmV0dXJuIFtdO1xuICAgICAgY29uc3QgbXNncyA9IGdldE1lc3NhZ2VzKHN0cmVhbS52YWx1ZXMpO1xuICAgICAgcmV0dXJuIGdldFRvb2xDYWxsc1dpdGhSZXN1bHRzPFRvb2xDYWxsVHlwZT4obXNncyk7XG4gICAgfSxcblxuICAgIGdldFRvb2xDYWxscyhtZXNzYWdlKSB7XG4gICAgICBpZiAoIXN0cmVhbS52YWx1ZXMpIHJldHVybiBbXTtcbiAgICAgIGNvbnN0IG1zZ3MgPSBnZXRNZXNzYWdlcyhzdHJlYW0udmFsdWVzKTtcbiAgICAgIGNvbnN0IGFsbFRvb2xDYWxscyA9IGdldFRvb2xDYWxsc1dpdGhSZXN1bHRzPFRvb2xDYWxsVHlwZT4obXNncyk7XG4gICAgICByZXR1cm4gYWxsVG9vbENhbGxzLmZpbHRlcigodGMpID0+IHRjLmFpTWVzc2FnZS5pZCA9PT0gbWVzc2FnZS5pZCk7XG4gICAgfSxcbiAgfTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/dist/react/stream.custom.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/dist/react/stream.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/dist/react/stream.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useStream: () => (/* binding */ useStream)\n/* harmony export */ });\n/* harmony import */ var _stream_lgp_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./stream.lgp.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/react/stream.lgp.js\");\n/* harmony import */ var _stream_custom_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stream.custom.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/react/stream.custom.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n\n\n\n\n//#region src/react/stream.tsx\nfunction isCustomOptions(options) {\n\treturn \"transport\" in options;\n}\nfunction useStream(options) {\n\tconst [isCustom] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(isCustomOptions(options));\n\tif (isCustom) return (0,_stream_custom_js__WEBPACK_IMPORTED_MODULE_1__.useStreamCustom)(options);\n\treturn (0,_stream_lgp_js__WEBPACK_IMPORTED_MODULE_0__.useStreamLGP)(options);\n}\n\n//#endregion\n\n//# sourceMappingURL=stream.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL2Rpc3QvcmVhY3Qvc3RyZWFtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBK0M7QUFDTTtBQUNwQjs7QUFFakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwrQ0FBUTtBQUM1QixzQkFBc0Isa0VBQWU7QUFDckMsUUFBUSw0REFBWTtBQUNwQjs7QUFFQTtBQUNxQjtBQUNyQiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoLXNkay9kaXN0L3JlYWN0L3N0cmVhbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdHJlYW1MR1AgfSBmcm9tIFwiLi9zdHJlYW0ubGdwLmpzXCI7XG5pbXBvcnQgeyB1c2VTdHJlYW1DdXN0b20gfSBmcm9tIFwiLi9zdHJlYW0uY3VzdG9tLmpzXCI7XG5pbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuXG4vLyNyZWdpb24gc3JjL3JlYWN0L3N0cmVhbS50c3hcbmZ1bmN0aW9uIGlzQ3VzdG9tT3B0aW9ucyhvcHRpb25zKSB7XG5cdHJldHVybiBcInRyYW5zcG9ydFwiIGluIG9wdGlvbnM7XG59XG5mdW5jdGlvbiB1c2VTdHJlYW0ob3B0aW9ucykge1xuXHRjb25zdCBbaXNDdXN0b21dID0gdXNlU3RhdGUoaXNDdXN0b21PcHRpb25zKG9wdGlvbnMpKTtcblx0aWYgKGlzQ3VzdG9tKSByZXR1cm4gdXNlU3RyZWFtQ3VzdG9tKG9wdGlvbnMpO1xuXHRyZXR1cm4gdXNlU3RyZWFtTEdQKG9wdGlvbnMpO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHVzZVN0cmVhbSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RyZWFtLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/dist/react/stream.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/dist/react/stream.lgp.js":
/*!************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/dist/react/stream.lgp.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useStreamLGP: () => (/* binding */ useStreamLGP)\n/* harmony export */ });\n/* harmony import */ var _client_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../client.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/client.js\");\n/* harmony import */ var _ui_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ui/utils.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/ui/utils.js\");\n/* harmony import */ var _ui_errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../ui/errors.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/ui/errors.js\");\n/* harmony import */ var _ui_branching_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../ui/branching.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/ui/branching.js\");\n/* harmony import */ var _ui_messages_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ui/messages.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/ui/messages.js\");\n/* harmony import */ var _ui_manager_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../ui/manager.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/ui/manager.js\");\n/* harmony import */ var _utils_tools_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/tools.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/utils/tools.js\");\n/* harmony import */ var _thread_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./thread.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/react/thread.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* __next_internal_client_entry_do_not_use__ useStreamLGP auto */ \n\n\n\n\n\n\n\n\n//#region src/react/stream.lgp.tsx\nfunction getFetchHistoryKey(client, threadId, limit) {\n    return [\n        (0,_client_js__WEBPACK_IMPORTED_MODULE_0__.getClientConfigHash)(client),\n        threadId,\n        limit\n    ].join(\":\");\n}\nfunction fetchHistory(client, threadId, options) {\n    if (options?.limit === false) return client.threads.getState(threadId).then((state)=>{\n        if (state.checkpoint == null) return [];\n        return [\n            state\n        ];\n    });\n    const limit = typeof options?.limit === \"number\" ? options.limit : 10;\n    return client.threads.getHistory(threadId, {\n        limit\n    });\n}\nfunction useThreadHistory(client, threadId, limit, options) {\n    const key = getFetchHistoryKey(client, threadId, limit);\n    const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_8__.useState)({\n        \"useThreadHistory.useState\": ()=>({\n                key: void 0,\n                data: void 0,\n                error: void 0,\n                isLoading: threadId != null\n            })\n    }[\"useThreadHistory.useState\"]);\n    const clientRef = (0,react__WEBPACK_IMPORTED_MODULE_8__.useRef)(client);\n    clientRef.current = client;\n    const onErrorRef = (0,react__WEBPACK_IMPORTED_MODULE_8__.useRef)(options?.onError);\n    onErrorRef.current = options?.onError;\n    const fetcher = (0,react__WEBPACK_IMPORTED_MODULE_8__.useCallback)({\n        \"useThreadHistory.useCallback[fetcher]\": (threadId$1, limit$1)=>{\n            if (options.passthrough) return Promise.resolve([]);\n            const client$1 = clientRef.current;\n            const key$1 = getFetchHistoryKey(client$1, threadId$1, limit$1);\n            if (threadId$1 != null) {\n                setState({\n                    \"useThreadHistory.useCallback[fetcher]\": (state$1)=>{\n                        if (state$1.key === key$1) return {\n                            ...state$1,\n                            isLoading: true\n                        };\n                        return {\n                            key: key$1,\n                            data: void 0,\n                            error: void 0,\n                            isLoading: true\n                        };\n                    }\n                }[\"useThreadHistory.useCallback[fetcher]\"]);\n                return fetchHistory(client$1, threadId$1, {\n                    limit: limit$1\n                }).then({\n                    \"useThreadHistory.useCallback[fetcher]\": (data)=>{\n                        setState({\n                            \"useThreadHistory.useCallback[fetcher]\": (state$1)=>{\n                                if (state$1.key !== key$1) return state$1;\n                                return {\n                                    key: key$1,\n                                    data,\n                                    error: void 0,\n                                    isLoading: false\n                                };\n                            }\n                        }[\"useThreadHistory.useCallback[fetcher]\"]);\n                        return data;\n                    }\n                }[\"useThreadHistory.useCallback[fetcher]\"], {\n                    \"useThreadHistory.useCallback[fetcher]\": (error)=>{\n                        setState({\n                            \"useThreadHistory.useCallback[fetcher]\": (state$1)=>{\n                                if (state$1.key !== key$1) return state$1;\n                                return {\n                                    key: key$1,\n                                    data: state$1.data,\n                                    error,\n                                    isLoading: false\n                                };\n                            }\n                        }[\"useThreadHistory.useCallback[fetcher]\"]);\n                        onErrorRef.current?.(error);\n                        return Promise.reject(error);\n                    }\n                }[\"useThreadHistory.useCallback[fetcher]\"]);\n            }\n            setState({\n                key: key$1,\n                data: void 0,\n                error: void 0,\n                isLoading: false\n            });\n            return Promise.resolve([]);\n        }\n    }[\"useThreadHistory.useCallback[fetcher]\"], [\n        options.passthrough\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_8__.useEffect)({\n        \"useThreadHistory.useEffect\": ()=>{\n            if (options.submittingRef.current != null && options.submittingRef.current === threadId) return;\n            fetcher(threadId, limit);\n        }\n    }[\"useThreadHistory.useEffect\"], [\n        fetcher,\n        key\n    ]);\n    return {\n        data: state.data,\n        error: state.error,\n        isLoading: state.isLoading,\n        mutate: (mutateId)=>fetcher(mutateId ?? threadId, limit)\n    };\n}\nfunction useStreamLGP(options) {\n    const reconnectOnMountRef = (0,react__WEBPACK_IMPORTED_MODULE_8__.useRef)(options.reconnectOnMount);\n    const runMetadataStorage = (0,react__WEBPACK_IMPORTED_MODULE_8__.useMemo)({\n        \"useStreamLGP.useMemo[runMetadataStorage]\": ()=>{\n            if (true) return null;\n            const storage = reconnectOnMountRef.current;\n            if (storage === true) return window.sessionStorage;\n            if (typeof storage === \"function\") return storage();\n            return null;\n        }\n    }[\"useStreamLGP.useMemo[runMetadataStorage]\"], []);\n    const client = (0,react__WEBPACK_IMPORTED_MODULE_8__.useMemo)({\n        \"useStreamLGP.useMemo[client]\": ()=>options.client ?? new _client_js__WEBPACK_IMPORTED_MODULE_0__.Client({\n                apiUrl: options.apiUrl,\n                apiKey: options.apiKey,\n                callerOptions: options.callerOptions,\n                defaultHeaders: options.defaultHeaders\n            })\n    }[\"useStreamLGP.useMemo[client]\"], [\n        options.client,\n        options.apiKey,\n        options.apiUrl,\n        options.callerOptions,\n        options.defaultHeaders\n    ]);\n    const [messageManager] = (0,react__WEBPACK_IMPORTED_MODULE_8__.useState)({\n        \"useStreamLGP.useState\": ()=>new _ui_messages_js__WEBPACK_IMPORTED_MODULE_4__.MessageTupleManager()\n    }[\"useStreamLGP.useState\"]);\n    const [stream] = (0,react__WEBPACK_IMPORTED_MODULE_8__.useState)({\n        \"useStreamLGP.useState\": ()=>new _ui_manager_js__WEBPACK_IMPORTED_MODULE_5__.StreamManager(messageManager, {\n                throttle: options.throttle ?? false\n            })\n    }[\"useStreamLGP.useState\"]);\n    (0,react__WEBPACK_IMPORTED_MODULE_8__.useSyncExternalStore)(stream.subscribe, stream.getSnapshot, stream.getSnapshot);\n    const [threadId, onThreadId] = (0,_thread_js__WEBPACK_IMPORTED_MODULE_7__.useControllableThreadId)(options);\n    const trackStreamModeRef = (0,react__WEBPACK_IMPORTED_MODULE_8__.useRef)([]);\n    const trackStreamMode = (0,react__WEBPACK_IMPORTED_MODULE_8__.useCallback)({\n        \"useStreamLGP.useCallback[trackStreamMode]\": (...mode)=>{\n            const ref = trackStreamModeRef.current;\n            for (const m of mode)if (!ref.includes(m)) ref.push(m);\n        }\n    }[\"useStreamLGP.useCallback[trackStreamMode]\"], []);\n    const hasUpdateListener = options.onUpdateEvent != null;\n    const hasCustomListener = options.onCustomEvent != null;\n    const hasLangChainListener = options.onLangChainEvent != null;\n    const hasDebugListener = options.onDebugEvent != null;\n    const hasCheckpointListener = options.onCheckpointEvent != null;\n    const hasTaskListener = options.onTaskEvent != null;\n    const callbackStreamMode = (0,react__WEBPACK_IMPORTED_MODULE_8__.useMemo)({\n        \"useStreamLGP.useMemo[callbackStreamMode]\": ()=>{\n            const modes = [];\n            if (hasUpdateListener) modes.push(\"updates\");\n            if (hasCustomListener) modes.push(\"custom\");\n            if (hasLangChainListener) modes.push(\"events\");\n            if (hasDebugListener) modes.push(\"debug\");\n            if (hasCheckpointListener) modes.push(\"checkpoints\");\n            if (hasTaskListener) modes.push(\"tasks\");\n            return modes;\n        }\n    }[\"useStreamLGP.useMemo[callbackStreamMode]\"], [\n        hasUpdateListener,\n        hasCustomListener,\n        hasLangChainListener,\n        hasDebugListener,\n        hasCheckpointListener,\n        hasTaskListener\n    ]);\n    const threadIdRef = (0,react__WEBPACK_IMPORTED_MODULE_8__.useRef)(threadId);\n    const threadIdStreamingRef = (0,react__WEBPACK_IMPORTED_MODULE_8__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_8__.useEffect)({\n        \"useStreamLGP.useEffect\": ()=>{\n            if (threadIdRef.current !== threadId) {\n                threadIdRef.current = threadId;\n                stream.clear();\n            }\n        }\n    }[\"useStreamLGP.useEffect\"], [\n        threadId,\n        stream\n    ]);\n    const historyLimit = typeof options.fetchStateHistory === \"object\" && options.fetchStateHistory != null ? options.fetchStateHistory.limit ?? false : options.fetchStateHistory ?? false;\n    const builtInHistory = useThreadHistory(client, threadId, historyLimit, {\n        passthrough: options.thread != null,\n        submittingRef: threadIdStreamingRef,\n        onError: options.onError\n    });\n    const history = options.thread ?? builtInHistory;\n    const getMessages = (value)=>{\n        const messagesKey = options.messagesKey ?? \"messages\";\n        return Array.isArray(value[messagesKey]) ? value[messagesKey] : [];\n    };\n    const setMessages = (current, messages)=>{\n        const messagesKey = options.messagesKey ?? \"messages\";\n        return {\n            ...current,\n            [messagesKey]: messages\n        };\n    };\n    const [branch, setBranch] = (0,react__WEBPACK_IMPORTED_MODULE_8__.useState)(\"\");\n    const branchContext = (0,_ui_branching_js__WEBPACK_IMPORTED_MODULE_3__.getBranchContext)(branch, history.data ?? void 0);\n    const historyValues = branchContext.threadHead?.values ?? options.initialValues ?? {};\n    const historyError = (()=>{\n        const error$1 = branchContext.threadHead?.tasks?.at(-1)?.error;\n        if (error$1 == null) return void 0;\n        try {\n            const parsed = JSON.parse(error$1);\n            if (_ui_errors_js__WEBPACK_IMPORTED_MODULE_2__.StreamError.isStructuredError(parsed)) return new _ui_errors_js__WEBPACK_IMPORTED_MODULE_2__.StreamError(parsed);\n            return parsed;\n        } catch  {}\n        return error$1;\n    })();\n    const messageMetadata = (()=>{\n        const alreadyShown = /* @__PURE__ */ new Set();\n        return getMessages(historyValues).map((message, idx)=>{\n            const messageId = message.id ?? idx;\n            const firstSeenState = (0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.findLast)(history.data ?? [], (state)=>getMessages(state.values).map((m, idx$1)=>m.id ?? idx$1).includes(messageId));\n            const checkpointId = firstSeenState?.checkpoint?.checkpoint_id;\n            let branch$1 = checkpointId != null ? branchContext.branchByCheckpoint[checkpointId] : void 0;\n            if (!branch$1?.branch?.length) branch$1 = void 0;\n            const optionsShown = branch$1?.branchOptions?.flat(2).join(\",\");\n            if (optionsShown) {\n                if (alreadyShown.has(optionsShown)) branch$1 = void 0;\n                alreadyShown.add(optionsShown);\n            }\n            return {\n                messageId: messageId.toString(),\n                firstSeenState,\n                branch: branch$1?.branch,\n                branchOptions: branch$1?.branchOptions\n            };\n        });\n    })();\n    const stop = ()=>stream.stop(historyValues, {\n            onStop: (args)=>{\n                if (runMetadataStorage && threadId) {\n                    const runId = runMetadataStorage.getItem(`lg:stream:${threadId}`);\n                    if (runId) client.runs.cancel(threadId, runId);\n                    runMetadataStorage.removeItem(`lg:stream:${threadId}`);\n                }\n                options.onStop?.(args);\n            }\n        });\n    const submit = async (values$1, submitOptions)=>{\n        const checkpointId = submitOptions?.checkpoint?.checkpoint_id;\n        setBranch(checkpointId != null ? branchContext.branchByCheckpoint[checkpointId]?.branch ?? \"\" : \"\");\n        const includeImplicitBranch = historyLimit === true || typeof historyLimit === \"number\";\n        const shouldRefetch = options.onFinish != null || includeImplicitBranch;\n        let callbackMeta;\n        let rejoinKey;\n        let usableThreadId = threadId;\n        await stream.start(async (signal)=>{\n            stream.setStreamValues((values$2)=>{\n                const prev = {\n                    ...historyValues,\n                    ...values$2 ?? {}\n                };\n                if (submitOptions?.optimisticValues != null) return {\n                    ...prev,\n                    ...typeof submitOptions.optimisticValues === \"function\" ? submitOptions.optimisticValues(prev) : submitOptions.optimisticValues\n                };\n                return {\n                    ...prev\n                };\n            });\n            if (!usableThreadId) {\n                usableThreadId = (await client.threads.create({\n                    threadId: submitOptions?.threadId,\n                    metadata: submitOptions?.metadata,\n                    signal\n                })).thread_id;\n                threadIdRef.current = usableThreadId;\n                threadIdStreamingRef.current = usableThreadId;\n                onThreadId(usableThreadId);\n            }\n            if (!usableThreadId) throw new Error(\"Failed to obtain valid thread ID.\");\n            threadIdStreamingRef.current = usableThreadId;\n            const streamMode = (0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.unique)([\n                ...submitOptions?.streamMode ?? [],\n                ...trackStreamModeRef.current,\n                ...callbackStreamMode\n            ]);\n            let checkpoint = submitOptions?.checkpoint ?? (includeImplicitBranch ? branchContext.threadHead?.checkpoint : void 0) ?? void 0;\n            if (submitOptions?.checkpoint === null) checkpoint = void 0;\n            if (checkpoint != null) delete checkpoint.thread_id;\n            const streamResumable = submitOptions?.streamResumable ?? !!runMetadataStorage;\n            return client.runs.stream(usableThreadId, options.assistantId, {\n                input: values$1,\n                config: submitOptions?.config,\n                context: submitOptions?.context,\n                command: submitOptions?.command,\n                interruptBefore: submitOptions?.interruptBefore,\n                interruptAfter: submitOptions?.interruptAfter,\n                metadata: submitOptions?.metadata,\n                multitaskStrategy: submitOptions?.multitaskStrategy,\n                onCompletion: submitOptions?.onCompletion,\n                onDisconnect: submitOptions?.onDisconnect ?? (streamResumable ? \"continue\" : \"cancel\"),\n                signal,\n                checkpoint,\n                streamMode,\n                streamSubgraphs: submitOptions?.streamSubgraphs,\n                streamResumable,\n                durability: submitOptions?.durability,\n                onRunCreated (params) {\n                    callbackMeta = {\n                        run_id: params.run_id,\n                        thread_id: params.thread_id ?? usableThreadId\n                    };\n                    if (runMetadataStorage) {\n                        rejoinKey = `lg:stream:${usableThreadId}`;\n                        runMetadataStorage.setItem(rejoinKey, callbackMeta.run_id);\n                    }\n                    options.onCreated?.(callbackMeta);\n                }\n            });\n        }, {\n            getMessages,\n            setMessages,\n            initialValues: historyValues,\n            callbacks: options,\n            async onSuccess () {\n                if (rejoinKey) runMetadataStorage?.removeItem(rejoinKey);\n                if (shouldRefetch) {\n                    const lastHead = (await history.mutate(usableThreadId))?.at(0);\n                    if (lastHead) {\n                        options.onFinish?.(lastHead, callbackMeta);\n                        return null;\n                    }\n                }\n            },\n            onError (error$1) {\n                options.onError?.(error$1, callbackMeta);\n            },\n            onFinish () {\n                threadIdStreamingRef.current = null;\n            }\n        });\n    };\n    const joinStream = async (runId, lastEventId, joinOptions)=>{\n        lastEventId ??= \"-1\";\n        if (!threadId) return;\n        const callbackMeta = {\n            thread_id: threadId,\n            run_id: runId\n        };\n        await stream.start(async (signal)=>{\n            threadIdStreamingRef.current = threadId;\n            return client.runs.joinStream(threadId, runId, {\n                signal,\n                lastEventId,\n                streamMode: joinOptions?.streamMode\n            });\n        }, {\n            getMessages,\n            setMessages,\n            initialValues: historyValues,\n            callbacks: options,\n            async onSuccess () {\n                runMetadataStorage?.removeItem(`lg:stream:${threadId}`);\n                const lastHead = (await history.mutate(threadId))?.at(0);\n                if (lastHead) options.onFinish?.(lastHead, callbackMeta);\n            },\n            onError (error$1) {\n                options.onError?.(error$1, callbackMeta);\n            },\n            onFinish () {\n                threadIdStreamingRef.current = null;\n            }\n        });\n    };\n    const reconnectKey = (0,react__WEBPACK_IMPORTED_MODULE_8__.useMemo)({\n        \"useStreamLGP.useMemo[reconnectKey]\": ()=>{\n            if (!runMetadataStorage || stream.isLoading) return void 0;\n            if (true) return void 0;\n            const runId = runMetadataStorage?.getItem(`lg:stream:${threadId}`);\n            if (!runId) return void 0;\n            return {\n                runId,\n                threadId\n            };\n        }\n    }[\"useStreamLGP.useMemo[reconnectKey]\"], [\n        runMetadataStorage,\n        stream.isLoading,\n        threadId\n    ]);\n    const shouldReconnect = !!runMetadataStorage;\n    const reconnectRef = (0,react__WEBPACK_IMPORTED_MODULE_8__.useRef)({\n        threadId,\n        shouldReconnect\n    });\n    const joinStreamRef = (0,react__WEBPACK_IMPORTED_MODULE_8__.useRef)(joinStream);\n    joinStreamRef.current = joinStream;\n    (0,react__WEBPACK_IMPORTED_MODULE_8__.useEffect)({\n        \"useStreamLGP.useEffect\": ()=>{\n            if (reconnectRef.current.threadId !== threadId) reconnectRef.current = {\n                threadId,\n                shouldReconnect\n            };\n        }\n    }[\"useStreamLGP.useEffect\"], [\n        threadId,\n        shouldReconnect\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_8__.useEffect)({\n        \"useStreamLGP.useEffect\": ()=>{\n            if (reconnectKey && reconnectRef.current.shouldReconnect) {\n                reconnectRef.current.shouldReconnect = false;\n                joinStreamRef.current?.(reconnectKey.runId);\n            }\n        }\n    }[\"useStreamLGP.useEffect\"], [\n        reconnectKey\n    ]);\n    const error = stream.error ?? historyError ?? history.error;\n    const values = stream.values ?? historyValues;\n    return {\n        get values () {\n            trackStreamMode(\"values\");\n            return values;\n        },\n        client,\n        assistantId: options.assistantId,\n        error,\n        isLoading: stream.isLoading,\n        stop,\n        submit,\n        joinStream,\n        branch,\n        setBranch,\n        get history () {\n            if (historyLimit === false) throw new Error(\"`fetchStateHistory` must be set to `true` to use `history`\");\n            return branchContext.flatHistory;\n        },\n        isThreadLoading: history.isLoading && history.data == null,\n        get experimental_branchTree () {\n            if (historyLimit === false) throw new Error(\"`fetchStateHistory` must be set to `true` to use `experimental_branchTree`\");\n            return branchContext.branchTree;\n        },\n        get interrupt () {\n            if (values != null && \"__interrupt__\" in values && Array.isArray(values.__interrupt__)) {\n                const valueInterrupts = values.__interrupt__;\n                if (valueInterrupts.length === 0) return {\n                    when: \"breakpoint\"\n                };\n                if (valueInterrupts.length === 1) return valueInterrupts[0];\n                return valueInterrupts;\n            }\n            if (stream.isLoading) return void 0;\n            const interrupts = branchContext.threadHead?.tasks?.at(-1)?.interrupts;\n            if (interrupts == null || interrupts.length === 0) {\n                if (!(branchContext.threadHead?.next ?? []).length || error != null) return void 0;\n                return {\n                    when: \"breakpoint\"\n                };\n            }\n            return interrupts.at(-1);\n        },\n        get messages () {\n            trackStreamMode(\"messages-tuple\", \"values\");\n            return getMessages(values);\n        },\n        get toolCalls () {\n            trackStreamMode(\"messages-tuple\", \"values\");\n            return (0,_utils_tools_js__WEBPACK_IMPORTED_MODULE_6__.getToolCallsWithResults)(getMessages(values));\n        },\n        getToolCalls (message) {\n            trackStreamMode(\"messages-tuple\", \"values\");\n            return (0,_utils_tools_js__WEBPACK_IMPORTED_MODULE_6__.getToolCallsWithResults)(getMessages(values)).filter((tc)=>tc.aiMessage.id === message.id);\n        },\n        getMessagesMetadata (message, index) {\n            trackStreamMode(\"values\");\n            const streamMetadata = messageManager.get(message.id)?.metadata;\n            const historyMetadata = messageMetadata?.find((m)=>m.messageId === (message.id ?? index));\n            if (streamMetadata != null || historyMetadata != null) return {\n                ...historyMetadata,\n                streamMetadata\n            };\n        }\n    };\n}\n//#endregion\n //# sourceMappingURL=stream.lgp.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL2Rpc3QvcmVhY3Qvc3RyZWFtLmxncC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXNDQSxTQUFTLG1CQUNQLFFBQ0EsVUFDQSxPQUNBO0lBQ0EsT0FBTztRQUFDLCtEQUFtQixDQUFDLE9BQU87UUFBRTtRQUFVO0tBQU0sQ0FBQyxLQUFLLElBQUk7O0FBR2pFLFNBQVMsYUFDUCxRQUNBLFVBQ0EsU0FDQTtJQUNBLElBQUksU0FBUyxVQUFVLE1BQ3JCLFFBQU8sT0FBTyxRQUFRLFNBQW9CLFNBQVMsQ0FBQyxNQUFNO1FBQ3hELElBQUksTUFBTSxjQUFjLEtBQU0sUUFBTyxFQUFFO1FBQ3ZDLE9BQU87WUFBQztTQUFNO01BQ2Q7SUFHSixNQUFNLFFBQVEsT0FBTyxTQUFTLFVBQVUsV0FBVyxRQUFRLFFBQVE7SUFDbkUsT0FBTyxPQUFPLFFBQVEsV0FBc0IsVUFBVTtRQUFFO0lBQUEsQ0FBTyxDQUFDOztBQUdsRSxTQUFTLGlCQUNQLFFBQ0EsVUFDQSxPQUNBLFNBSzRCO0lBQzVCLE1BQU0sTUFBTSxtQkFBbUIsUUFBUSxVQUFVLE1BQU07SUFDdkQsTUFBTSxDQUFDLE9BQU8sWUFBWSwrQ0FBUTtxQ0FBUixLQUtoQjtnQkFDUixLQUFLO2dCQUNMLE1BQU07Z0JBQ04sT0FBTztnQkFDUCxXQUFXLFlBQVk7Y0FDeEI7O0lBRUQsTUFBTSxZQUFZLDZDQUFNLENBQUMsT0FBTztJQUNoQyxVQUFVLFVBQVU7SUFFcEIsTUFBTSxhQUFhLDZDQUFNLENBQUMsU0FBUyxRQUFRO0lBQzNDLFdBQVcsVUFBVSxTQUFTO0lBRTlCLE1BQU0sVUFBVSxrREFBVztpREFBWCxDQUVaLFlBQ0E7WUFHQSxJQUFJLFFBQVEsWUFBYSxRQUFPLFFBQVEsUUFBUSxFQUFFLENBQUM7WUFFbkQsTUFBTUEsV0FBUyxVQUFVO1lBQ3pCLE1BQU1DLFFBQU0sbUJBQW1CRCxVQUFRRSxZQUFVQyxRQUFNO1lBRXZELElBQUlELGNBQVksTUFBTTtnQkFDcEI7NkRBQUEsQ0FBVTt3QkFDUixJQUFJRSxRQUFNLFFBQVFILE1BQUssUUFBTzs0QkFBRSxHQUFHRyxPQUFBQTs0QkFBTyxXQUFXO3lCQUFNO3dCQUMzRCxPQUFPOzRCQUFFOzRCQUFLLE1BQU07NEJBQVcsT0FBTzs0QkFBVyxXQUFXO3lCQUFNOzs7Z0JBRXBFLE9BQU8sYUFBd0JKLFVBQVFFLFlBQVU7b0JBQUU7Z0JBQUEsQ0FBTyxDQUFDLENBQUM7NkRBQUEsQ0FDekQ7d0JBQ0M7cUVBQUEsQ0FBVTtnQ0FDUixJQUFJRSxRQUFNLFFBQVFILE1BQUssUUFBT0c7Z0NBQzlCLE9BQU87b0NBQUU7b0NBQUs7b0NBQU0sT0FBTztvQ0FBVyxXQUFXO2lDQUFPOzs7d0JBRTFELE9BQU87Ozs4REFFUjt3QkFDQztxRUFBQSxDQUFVO2dDQUNSLElBQUlBLFFBQU0sUUFBUUgsTUFBSyxRQUFPRztnQ0FDOUIsT0FBTztvQ0FBRTtvQ0FBSyxNQUFNQSxRQUFNO29DQUFNO29DQUFPLFdBQVc7aUNBQU87Ozt3QkFFM0QsV0FBVyxVQUFVLE1BQU07d0JBQzNCLE9BQU8sUUFBUSxPQUFPLE1BQU07Ozs7WUFLbEMsU0FBUztnQkFBRTtnQkFBSyxNQUFNO2dCQUFXLE9BQU87Z0JBQVcsV0FBVzthQUFPLENBQUM7WUFDdEUsT0FBTyxRQUFRLFFBQVEsRUFBRSxDQUFDOztnREFFNUI7UUFBQyxRQUFRO0tBQVksQ0FDdEI7SUFFRCxnREFBUztzQ0FBVDtZQUVFLElBQ0UsUUFBUSxjQUFjLFdBQVcsUUFDakMsUUFBUSxjQUFjLFlBQVksU0FFbEM7WUFHRyxRQUFRLFVBQVUsTUFBTTs7cUNBSTVCO1FBQUM7UUFBUztLQUFJLENBQUM7SUFFbEIsT0FBTztRQUNMLE1BQU0sTUFBTTtRQUNaLE9BQU8sTUFBTTtRQUNiLFdBQVcsTUFBTTtRQUNqQixTQUFTLFdBQXNCLFFBQVEsWUFBWSxVQUFVLE1BQU07S0FDcEU7O0FBR0gsU0FBZ0IsYUFHZCxTQUFzRTtJQU90RSxNQUFNLHNCQUFzQiw2Q0FBTSxDQUFDLFFBQVEsaUJBQWlCO0lBQzVELE1BQU0scUJBQXFCLDhDQUFPO29EQUFQO1lBQ3pCLElBQUksSUFBNkIsQ0FBRSxRQUFPO1lBQzFDLE1BQU0sVUFBVSxvQkFBb0I7WUFDcEMsSUFBSSxZQUFZLEtBQU0sUUFBTyxPQUFPO1lBQ3BDLElBQUksT0FBTyxZQUFZLFdBQVksUUFBTyxTQUFTO1lBQ25ELE9BQU87O21EQUNOLEVBQUUsQ0FBQztJQUVOLE1BQU0sU0FBUyw4Q0FBTzt3Q0FBUCxJQUVYLFFBQVEsVUFDUixJQUFJLDhDQUFNLENBQUM7Z0JBQ1QsUUFBUSxRQUFRO2dCQUNoQixRQUFRLFFBQVE7Z0JBQ2hCLGVBQWUsUUFBUTtnQkFDdkIsZ0JBQWdCLFFBQVE7YUFDekIsQ0FBQzt1Q0FDSjtRQUNFLFFBQVE7UUFDUixRQUFRO1FBQ1IsUUFBUTtRQUNSLFFBQVE7UUFDUixRQUFRO0tBQ1QsQ0FDRjtJQUVELE1BQU0sQ0FBQyxrQkFBa0IsK0NBQVE7aUNBQVIsSUFBZSxJQUFJLGdFQUFtQixFQUFFOztJQUNqRSxNQUFNLENBQUMsVUFBVSwrQ0FBUTtpQ0FBUixJQUViLElBQUkseURBQWEsQ0FBaUIsZ0JBQWdCO2dCQUNoRCxVQUFVLFFBQVEsWUFBWTtZQUFBLENBQy9CLENBQUM7O0lBR04sMkRBQW9CLENBQ2xCLE9BQU8sV0FDUCxPQUFPLGFBQ1AsT0FBTyxZQUNSO0lBRUQsTUFBTSxDQUFDLFVBQVUsY0FBYyxtRUFBdUIsQ0FBQyxRQUFRO0lBQy9ELE1BQU0scUJBQXFCLDZDQUFNLENBQW9DLEVBQUUsQ0FBQztJQUV4RSxNQUFNLGtCQUFrQixrREFBVztxREFBWCxDQUNyQixHQUFHO1lBQ0YsTUFBTSxNQUFNLG1CQUFtQjtZQUMvQixLQUFLLE1BQU0sS0FBSyxLQUNkLElBQUksQ0FBQyxJQUFJLFNBQVMsRUFBRSxDQUFFLEtBQUksS0FBSyxFQUFFOztvREFHckMsRUFBRSxDQUNIO0lBRUQsTUFBTSxvQkFBb0IsUUFBUSxpQkFBaUI7SUFDbkQsTUFBTSxvQkFBb0IsUUFBUSxpQkFBaUI7SUFDbkQsTUFBTSx1QkFBdUIsUUFBUSxvQkFBb0I7SUFDekQsTUFBTSxtQkFBbUIsUUFBUSxnQkFBZ0I7SUFDakQsTUFBTSx3QkFBd0IsUUFBUSxxQkFBcUI7SUFDM0QsTUFBTSxrQkFBa0IsUUFBUSxlQUFlO0lBRS9DLE1BQU0scUJBQXFCLDhDQUFPO29EQUFQO1lBQ3pCLE1BQU0sUUFBMkMsRUFBRTtZQUNuRCxJQUFJLGtCQUFtQixPQUFNLEtBQUssVUFBVTtZQUM1QyxJQUFJLGtCQUFtQixPQUFNLEtBQUssU0FBUztZQUMzQyxJQUFJLHFCQUFzQixPQUFNLEtBQUssU0FBUztZQUM5QyxJQUFJLGlCQUFrQixPQUFNLEtBQUssUUFBUTtZQUN6QyxJQUFJLHNCQUF1QixPQUFNLEtBQUssY0FBYztZQUNwRCxJQUFJLGdCQUFpQixPQUFNLEtBQUssUUFBUTtZQUN4QyxPQUFPOzttREFDTjtRQUNEO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtLQUNELENBQUM7SUFFRixNQUFNLGNBQWMsNkNBQU0sQ0FBZ0IsU0FBUztJQUNuRCxNQUFNLHVCQUF1Qiw2Q0FBTSxDQUFnQixLQUFLO0lBR3hELGdEQUFTO2tDQUFUO1lBQ0UsSUFBSSxZQUFZLFlBQVksVUFBVTtnQkFDcEMsWUFBWSxVQUFVO2dCQUN0QixPQUFPLE9BQU87OztpQ0FFZjtRQUFDO1FBQVU7S0FBTyxDQUFDO0lBRXRCLE1BQU0sZUFDSixPQUFPLFFBQVEsc0JBQXNCLFlBQ3JDLFFBQVEscUJBQXFCLE9BQ3pCLFFBQVEsa0JBQWtCLFNBQVMsUUFDbkMsUUFBUSxxQkFBcUI7SUFFbkMsTUFBTSxpQkFBaUIsaUJBQ3JCLFFBQ0EsVUFDQSxjQUNBO1FBQ0UsYUFBYSxRQUFRLFVBQVU7UUFDL0IsZUFBZTtRQUNmLFNBQVMsUUFBUTtLQUNsQixDQUNGO0lBQ0QsTUFBTSxVQUFVLFFBQVEsVUFBVTtJQUVsQyxNQUFNLGVBQWU7UUFDbkIsTUFBTSxjQUFjLFFBQVEsZUFBZTtRQUMzQyxPQUFPLE1BQU0sUUFBUSxNQUFNLGFBQWEsR0FDbkMsTUFBTSxlQUNQLEVBQUU7O0lBR1IsTUFBTSxlQUFlLFNBQW9CO1FBQ3ZDLE1BQU0sY0FBYyxRQUFRLGVBQWU7UUFDM0MsT0FBTztZQUFFLEdBQUc7YUFBVSxjQUFjO1NBQVU7O0lBR2hELE1BQU0sQ0FBQyxRQUFRLGFBQWEsK0NBQVEsQ0FBUyxHQUFHO0lBQ2hELE1BQU0sZ0JBQWdCLGtFQUFnQixDQUFDLFFBQVEsUUFBUSxRQUFRLE9BQVU7SUFFekUsTUFBTSxnQkFDSixjQUFjLFlBQVksVUFDMUIsUUFBUSxpQkFDUCxFQUFFO0lBRUwsTUFBTTtRQUNKLE1BQU1DLFVBQVEsY0FBYyxZQUFZLE9BQU8sR0FBRyxHQUFHLEVBQUU7UUFDdkQsSUFBSUEsV0FBUyxLQUFNLFFBQU87UUFDMUIsSUFBSTtZQUNGLE1BQU0sU0FBUyxLQUFLLE1BQU1BLFFBQU07WUFDaEMsSUFBSSxzREFBVyxDQUFDLGtCQUFrQixPQUFPLENBQUUsUUFBTyxJQUFJLHNEQUFXLENBQUMsT0FBTztZQUN6RSxPQUFPO2lCQUNEO1FBR1IsT0FBT0E7UUFDTDtJQUVKLE1BQU07UUFDSixNQUFNLCtCQUFlLElBQUksS0FBYTtRQUN0QyxPQUFPLFlBQVksY0FBYyxDQUFDLEtBQy9CLFNBQVM7WUFDUixNQUFNLFlBQVksUUFBUSxNQUFNO1lBR2hDLE1BQU0saUJBQWlCLHNEQUFRLENBQUMsUUFBUSxRQUFRLEVBQUUsR0FBRyxRQUNuRCxZQUFZLE1BQU0sT0FBTyxDQUN0QixLQUFLLEdBQUcsUUFBUSxFQUFFLE1BQU1DLE1BQUksQ0FDNUIsU0FBUyxVQUFVLENBQ3ZCO1lBRUQsTUFBTSxlQUFlLGdCQUFnQixZQUFZO1lBQ2pELElBQUlDLFdBQ0YsZ0JBQWdCLE9BQ1osY0FBYyxtQkFBbUIsZ0JBQ2pDO1lBQ04sSUFBSSxDQUFDQSxVQUFRLFFBQVEsT0FBUSxZQUFTO1lBR3RDLE1BQU0sZUFBZUEsVUFBUSxlQUFlLEtBQUssRUFBRSxDQUFDLEtBQUssSUFBSTtZQUM3RCxJQUFJLGNBQWM7Z0JBQ2hCLElBQUksYUFBYSxJQUFJLGFBQWEsQ0FBRSxZQUFTO2dCQUM3QyxhQUFhLElBQUksYUFBYTs7WUFHaEMsT0FBTztnQkFDTCxXQUFXLFVBQVUsVUFBVTtnQkFDL0I7Z0JBRUEsUUFBUUEsVUFBUTtnQkFDaEIsZUFBZUEsVUFBUTthQUN4QjtVQUVKO1NBQ0M7SUFFSixNQUFNLFdBQ0osT0FBTyxLQUFLLGVBQWU7WUFDekIsU0FBUztnQkFDUCxJQUFJLHNCQUFzQixVQUFVO29CQUNsQyxNQUFNLFFBQVEsbUJBQW1CLFFBQVEsYUFBYSxXQUFXO29CQUNqRSxJQUFJLE1BQU8sQ0FBSyxPQUFPLEtBQUssT0FBTyxVQUFVLE1BQU07b0JBQ25ELG1CQUFtQixXQUFXLGFBQWEsV0FBVzs7Z0JBR3hELFFBQVEsU0FBUyxLQUFLOztTQUV6QixDQUFDO0lBR0osTUFBTSxTQUFTLE9BQ2IsVUFDQTtRQUdBLE1BQU0sZUFBZSxlQUFlLFlBQVk7UUFDaEQsVUFDRSxnQkFBZ0IsT0FDWixjQUFjLG1CQUFtQixlQUFlLFVBQVUsS0FDMUQsR0FDTDtRQUlELE1BQU0sd0JBQ0osaUJBQWlCLFFBQVEsT0FBTyxpQkFBaUI7UUFFbkQsTUFBTSxnQkFFSixRQUFRLFlBQVksUUFHcEI7UUFFRixJQUFJO1FBQ0osSUFBSTtRQUNKLElBQUksaUJBQWlCO1FBRXJCLE1BQU0sT0FBTyxNQUNYLE9BQU87WUFDTCxPQUFPLGlCQUFpQjtnQkFDdEIsTUFBTSxPQUFPO29CQUFFLEdBQUc7b0JBQWUsR0FBSUMsWUFBVSxFQUFFO2lCQUFHO2dCQUNwRCxJQUFJLGVBQWUsb0JBQW9CLEtBQ3JDLFFBQU87b0JBQ0wsR0FBRztvQkFDSCxHQUFJLE9BQU8sY0FBYyxxQkFBcUIsYUFDMUMsY0FBYyxpQkFBaUIsS0FBSyxHQUNwQyxjQUFjO2lCQUNuQjtnQkFHSCxPQUFPO29CQUFFLEdBQUc7Z0JBQUEsQ0FBTTtjQUNsQjtZQUVGLElBQUksQ0FBQyxnQkFBZ0I7Z0JBT25CLHdCQU5xQixPQUFPLFFBQVEsT0FBTztvQkFDekMsVUFBVSxlQUFlO29CQUN6QixVQUFVLGVBQWU7b0JBQ3pCO2tCQUNELENBQUMsQ0FFc0I7Z0JBS3hCLFlBQVksVUFBVTtnQkFDdEIscUJBQXFCLFVBQVU7Z0JBRS9CLFdBQVcsZUFBZTs7WUFHNUIsSUFBSSxDQUFDLGVBQ0gsT0FBTSxJQUFJLE1BQU0sb0NBQW9DO1lBR3RELHFCQUFxQixVQUFVO1lBRS9CLE1BQU0sYUFBYSxvREFBTSxDQUFDO21CQUNwQixlQUFlLGNBQWMsRUFBRTttQkFDaEMsbUJBQW1CO21CQUNuQjthQUNKLENBQUM7WUFFRixJQUFJLGFBQ0YsZUFBZSxlQUNkLHdCQUNHLGNBQWMsWUFBWSxhQUMxQixXQUNKO1lBR0YsSUFBSSxlQUFlLGVBQWUsS0FBTSxjQUFhO1lBSXJELElBQUksY0FBYyxLQUFNLFFBQU8sV0FBVztZQUMxQyxNQUFNLGtCQUNKLGVBQWUsbUJBQW1CLENBQUMsQ0FBQztZQUV0QyxPQUFPLE9BQU8sS0FBSyxPQUFPLGdCQUFnQixRQUFRLGFBQWE7Z0JBQzdELE9BQU9BO2dCQUNQLFFBQVEsZUFBZTtnQkFDdkIsU0FBUyxlQUFlO2dCQUN4QixTQUFTLGVBQWU7Z0JBRXhCLGlCQUFpQixlQUFlO2dCQUNoQyxnQkFBZ0IsZUFBZTtnQkFDL0IsVUFBVSxlQUFlO2dCQUN6QixtQkFBbUIsZUFBZTtnQkFDbEMsY0FBYyxlQUFlO2dCQUM3QixjQUNFLGVBQWUsaUJBQ2Qsa0JBQWtCLGFBQWE7Z0JBRWxDO2dCQUVBO2dCQUNBO2dCQUNBLGlCQUFpQixlQUFlO2dCQUNoQztnQkFDQSxZQUFZLGVBQWU7Z0JBQzNCLGNBQWEsUUFBUTtvQkFDbkIsZUFBZTt3QkFDYixRQUFRLE9BQU87d0JBQ2YsV0FBVyxPQUFPLGFBQWE7cUJBQ2hDO29CQUVELElBQUksb0JBQW9CO3dCQUN0QixZQUFZLGFBQWE7d0JBQ3pCLG1CQUFtQixRQUFRLFdBQVcsYUFBYSxPQUFPOztvQkFHNUQsUUFBUSxZQUFZLGFBQWE7O2FBRXBDLENBQUM7V0FJSjtZQUNFO1lBQ0E7WUFFQSxlQUFlO1lBQ2YsV0FBVztZQUVYLE1BQU0sWUFBWTtnQkFDaEIsSUFBSSxVQUFXLHFCQUFvQixXQUFXLFVBQVU7Z0JBRXhELElBQUksZUFBZTtvQkFFakIsTUFBTSxZQURhLE1BQU0sUUFBUSxPQUFPLGdCQUFnQixFQUMzQixHQUFHLEVBQUU7b0JBQ2xDLElBQUksVUFBVTt3QkFHWixRQUFRLFdBQVcsVUFBVSxhQUFhO3dCQUMxQyxPQUFPOzs7O1lBTWIsU0FBUSxTQUFPO2dCQUNiLFFBQVEsVUFBVUgsU0FBTyxhQUFhOztZQUV4QyxXQUFXO2dCQUNULHFCQUFxQixVQUFVOztTQUVsQyxDQUNGOztJQUdILE1BQU0sYUFBYSxPQUNqQixPQUNBLGFBQ0E7UUFHQSxnQkFBZ0I7UUFDaEIsSUFBSSxDQUFDLFNBQVU7UUFFZixNQUFNLGVBQWdDO1lBQ3BDLFdBQVc7WUFDWCxRQUFRO1NBQ1Q7UUFFRCxNQUFNLE9BQU8sTUFDWCxPQUFPO1lBQ0wscUJBQXFCLFVBQVU7WUFDL0IsT0FBTyxPQUFPLEtBQUssV0FBVyxVQUFVLE9BQU87Z0JBQzdDO2dCQUNBO2dCQUNBLFlBQVksYUFBYTthQUMxQixDQUFDO1dBSUo7WUFDRTtZQUNBO1lBRUEsZUFBZTtZQUNmLFdBQVc7WUFDWCxNQUFNLFlBQVk7Z0JBQ2hCLG9CQUFvQixXQUFXLGFBQWEsV0FBVztnQkFFdkQsTUFBTSxZQURhLE1BQU0sUUFBUSxPQUFPLFVBQVMsRUFDcEIsR0FBRyxFQUFFO2dCQUNsQyxJQUFJLFNBQVUsU0FBUSxXQUFXLFVBQVUsYUFBYTs7WUFFMUQsU0FBUSxTQUFPO2dCQUNiLFFBQVEsVUFBVUEsU0FBTyxhQUFhOztZQUV4QyxXQUFXO2dCQUNULHFCQUFxQixVQUFVOztTQUVsQyxDQUNGOztJQUdILE1BQU0sZUFBZSw4Q0FBTzs4Q0FBUDtZQUNuQixJQUFJLENBQUMsc0JBQXNCLE9BQU8sVUFBVyxRQUFPO1lBQ3BELElBQUksSUFBNkIsQ0FBRSxRQUFPO1lBQzFDLE1BQU0sUUFBUSxvQkFBb0IsUUFBUSxhQUFhLFdBQVc7WUFDbEUsSUFBSSxDQUFDLE1BQU8sUUFBTztZQUNuQixPQUFPO2dCQUFFO2dCQUFPO2FBQVU7OzZDQUN6QjtRQUFDO1FBQW9CLE9BQU87UUFBVztLQUFTLENBQUM7SUFFcEQsTUFBTSxrQkFBa0IsQ0FBQyxDQUFDO0lBQzFCLE1BQU0sZUFBZSw2Q0FBTSxDQUFDO1FBQUU7UUFBVTtLQUFpQixDQUFDO0lBRTFELE1BQU0sZ0JBQWdCLDZDQUFNLENBQW9CLFdBQVc7SUFDM0QsY0FBYyxVQUFVO0lBRXhCLGdEQUFTO2tDQUFUO1lBRUUsSUFBSSxhQUFhLFFBQVEsYUFBYSxTQUNwQyxjQUFhLFVBQVU7Z0JBQUU7Z0JBQVU7YUFBaUI7O2lDQUVyRDtRQUFDO1FBQVU7S0FBZ0IsQ0FBQztJQUUvQixnREFBUztrQ0FBVDtZQUNFLElBQUksZ0JBQWdCLGFBQWEsUUFBUSxpQkFBaUI7Z0JBQ3hELGFBQWEsUUFBUSxrQkFBa0I7Z0JBQ2xDLGNBQWMsVUFBVSxhQUFhLE1BQU07OztpQ0FFakQ7UUFBQztLQUFhLENBQUM7SUFFbEIsTUFBTSxRQUFRLE9BQU8sU0FBUyxnQkFBZ0IsUUFBUTtJQUN0RCxNQUFNLFNBQVMsT0FBTyxVQUFVO0lBRWhDLE9BQU87UUFDTCxJQUFJLFVBQVM7WUFDWCxnQkFBZ0IsU0FBUztZQUN6QixPQUFPOztRQUdUO1FBQ0EsYUFBYSxRQUFRO1FBRXJCO1FBQ0EsV0FBVyxPQUFPO1FBRWxCO1FBQ0E7UUFFQTtRQUVBO1FBQ0E7UUFFQSxJQUFJLFdBQVU7WUFDWixJQUFJLGlCQUFpQixNQUNuQixPQUFNLElBQUksTUFDUiw2REFDRDtZQUdILE9BQU8sY0FBYzs7UUFHdkIsaUJBQWlCLFFBQVEsYUFBYSxRQUFRLFFBQVE7UUFFdEQsSUFBSSwyQkFBMEI7WUFDNUIsSUFBSSxpQkFBaUIsTUFDbkIsT0FBTSxJQUFJLE1BQ1IsNkVBQ0Q7WUFHSCxPQUFPLGNBQWM7O1FBR3ZCLElBQUksYUFBWTtZQUNkLElBQ0UsVUFBVSxRQUNWLG1CQUFtQixVQUNuQixNQUFNLFFBQVEsT0FBTyxjQUFjLEVBQ25DO2dCQUNBLE1BQU0sa0JBQWtCLE9BQU87Z0JBQy9CLElBQUksZ0JBQWdCLFdBQVcsRUFBRyxRQUFPO29CQUFFLE1BQU07Z0JBQUEsQ0FBYztnQkFDL0QsSUFBSSxnQkFBZ0IsV0FBVyxFQUFHLFFBQU8sZ0JBQWdCO2dCQUd6RCxPQUFPOztZQUlULElBQUksT0FBTyxVQUFXLFFBQU87WUFFN0IsTUFBTSxhQUFhLGNBQWMsWUFBWSxPQUFPLEdBQUcsR0FBRyxFQUFFO1lBQzVELElBQUksY0FBYyxRQUFRLFdBQVcsV0FBVyxHQUFHO2dCQUdqRCxJQUFJLEVBRFMsY0FBYyxZQUFZLFFBQVEsSUFDckMsVUFBVSxTQUFTLEtBQU0sUUFBTztnQkFDMUMsT0FBTztvQkFBRSxNQUFNO2dCQUFBLENBQWM7O1lBSS9CLE9BQU8sV0FBVyxHQUFHLEdBQUc7O1FBRzFCLElBQUksWUFBb0M7WUFDdEMsZ0JBQWdCLGtCQUFrQixTQUFTO1lBQzNDLE9BQU8sWUFBWSxPQUFPOztRQUc1QixJQUFJLGFBQVk7WUFDZCxnQkFBZ0Isa0JBQWtCLFNBQVM7WUFFM0MsT0FBTyx3RUFBdUIsQ0FEakIsWUFBWSxPQUFPLENBQ2tCOztRQUdwRCxjQUFhLFNBQVM7WUFDcEIsZ0JBQWdCLGtCQUFrQixTQUFTO1lBRzNDLE9BRHFCLHdFQUF1QixDQUQvQixZQUFZLE9BQU8sQ0FDZ0MsQ0FDNUMsUUFBUSxLQUFPLEdBQUcsVUFBVSxPQUFPLFFBQVEsR0FBRzs7UUFHcEUscUJBQ0UsU0FDQSxPQUN3QztZQUN4QyxnQkFBZ0IsU0FBUztZQUV6QixNQUFNLGlCQUFpQixlQUFlLElBQUksUUFBUSxHQUFHLEVBQUU7WUFDdkQsTUFBTSxrQkFBa0IsaUJBQWlCLE1BQ3RDLElBQU0sRUFBRSxlQUFlLFFBQVEsTUFBTSxRQUN2QztZQUVELElBQUksa0JBQWtCLFFBQVEsbUJBQW1CLEtBQy9DLFFBQU87Z0JBQ0wsR0FBRztnQkFDSDthQUNEOztLQUtOIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvc3JjL3JlYWN0L3N0cmVhbS5sZ3AudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIF9fTENfQUxMT1dfRU5UUllQT0lOVF9TSURFX0VGRkVDVFNfXyAqL1xuXG5cInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IHtcbiAgdHlwZSBSZWZPYmplY3QsXG4gIHVzZUNhbGxiYWNrLFxuICB1c2VFZmZlY3QsXG4gIHVzZU1lbW8sXG4gIHVzZVJlZixcbiAgdXNlU3RhdGUsXG4gIHVzZVN5bmNFeHRlcm5hbFN0b3JlLFxufSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGZpbmRMYXN0LCB1bmlxdWUgfSBmcm9tIFwiLi4vdWkvdXRpbHMuanNcIjtcbmltcG9ydCB7IFN0cmVhbUVycm9yIH0gZnJvbSBcIi4uL3VpL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgZ2V0QnJhbmNoQ29udGV4dCB9IGZyb20gXCIuLi91aS9icmFuY2hpbmcuanNcIjtcbmltcG9ydCB7IEV2ZW50U3RyZWFtRXZlbnQsIFN0cmVhbU1hbmFnZXIgfSBmcm9tIFwiLi4vdWkvbWFuYWdlci5qc1wiO1xuaW1wb3J0IHR5cGUge1xuICBVc2VTdHJlYW1PcHRpb25zLFxuICBHZXRVcGRhdGVUeXBlLFxuICBHZXRDdXN0b21FdmVudFR5cGUsXG4gIEdldEludGVycnVwdFR5cGUsXG4gIEdldENvbmZpZ3VyYWJsZVR5cGUsXG4gIEdldFRvb2xDYWxsc1R5cGUsXG4gIFJ1bkNhbGxiYWNrTWV0YSxcbiAgTWVzc2FnZU1ldGFkYXRhLFxuICBVc2VTdHJlYW1UaHJlYWQsXG59IGZyb20gXCIuLi91aS90eXBlcy5qc1wiO1xuaW1wb3J0IHR5cGUgeyBVc2VTdHJlYW0sIFN1Ym1pdE9wdGlvbnMgfSBmcm9tIFwiLi90eXBlcy5qc1wiO1xuaW1wb3J0IHsgQ2xpZW50LCBnZXRDbGllbnRDb25maWdIYXNoIH0gZnJvbSBcIi4uL2NsaWVudC5qc1wiO1xuaW1wb3J0IHsgdHlwZSBNZXNzYWdlIH0gZnJvbSBcIi4uL3R5cGVzLm1lc3NhZ2VzLmpzXCI7XG5pbXBvcnQgeyBnZXRUb29sQ2FsbHNXaXRoUmVzdWx0cyB9IGZyb20gXCIuLi91dGlscy90b29scy5qc1wiO1xuaW1wb3J0IHR5cGUgeyBJbnRlcnJ1cHQsIFRocmVhZFN0YXRlIH0gZnJvbSBcIi4uL3NjaGVtYS5qc1wiO1xuaW1wb3J0IHR5cGUgeyBTdHJlYW1Nb2RlIH0gZnJvbSBcIi4uL3R5cGVzLnN0cmVhbS5qc1wiO1xuaW1wb3J0IHsgTWVzc2FnZVR1cGxlTWFuYWdlciB9IGZyb20gXCIuLi91aS9tZXNzYWdlcy5qc1wiO1xuaW1wb3J0IHsgdXNlQ29udHJvbGxhYmxlVGhyZWFkSWQgfSBmcm9tIFwiLi90aHJlYWQuanNcIjtcbmltcG9ydCB0eXBlIHsgQmFnVGVtcGxhdGUgfSBmcm9tIFwiLi4vdHlwZXMudGVtcGxhdGUuanNcIjtcblxuZnVuY3Rpb24gZ2V0RmV0Y2hIaXN0b3J5S2V5KFxuICBjbGllbnQ6IENsaWVudCxcbiAgdGhyZWFkSWQ6IHN0cmluZyB8IHVuZGVmaW5lZCB8IG51bGwsXG4gIGxpbWl0OiBib29sZWFuIHwgbnVtYmVyXG4pIHtcbiAgcmV0dXJuIFtnZXRDbGllbnRDb25maWdIYXNoKGNsaWVudCksIHRocmVhZElkLCBsaW1pdF0uam9pbihcIjpcIik7XG59XG5cbmZ1bmN0aW9uIGZldGNoSGlzdG9yeTxTdGF0ZVR5cGUgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4oXG4gIGNsaWVudDogQ2xpZW50LFxuICB0aHJlYWRJZDogc3RyaW5nLFxuICBvcHRpb25zPzogeyBsaW1pdD86IGJvb2xlYW4gfCBudW1iZXIgfVxuKSB7XG4gIGlmIChvcHRpb25zPy5saW1pdCA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gY2xpZW50LnRocmVhZHMuZ2V0U3RhdGU8U3RhdGVUeXBlPih0aHJlYWRJZCkudGhlbigoc3RhdGUpID0+IHtcbiAgICAgIGlmIChzdGF0ZS5jaGVja3BvaW50ID09IG51bGwpIHJldHVybiBbXTtcbiAgICAgIHJldHVybiBbc3RhdGVdO1xuICAgIH0pO1xuICB9XG5cbiAgY29uc3QgbGltaXQgPSB0eXBlb2Ygb3B0aW9ucz8ubGltaXQgPT09IFwibnVtYmVyXCIgPyBvcHRpb25zLmxpbWl0IDogMTA7XG4gIHJldHVybiBjbGllbnQudGhyZWFkcy5nZXRIaXN0b3J5PFN0YXRlVHlwZT4odGhyZWFkSWQsIHsgbGltaXQgfSk7XG59XG5cbmZ1bmN0aW9uIHVzZVRocmVhZEhpc3Rvcnk8U3RhdGVUeXBlIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KFxuICBjbGllbnQ6IENsaWVudCxcbiAgdGhyZWFkSWQ6IHN0cmluZyB8IHVuZGVmaW5lZCB8IG51bGwsXG4gIGxpbWl0OiBib29sZWFuIHwgbnVtYmVyLFxuICBvcHRpb25zOiB7XG4gICAgcGFzc3Rocm91Z2g6IGJvb2xlYW47XG4gICAgc3VibWl0dGluZ1JlZjogUmVmT2JqZWN0PHN0cmluZyB8IG51bGw+O1xuICAgIG9uRXJyb3I/OiAoZXJyb3I6IHVua25vd24sIHJ1bj86IFJ1bkNhbGxiYWNrTWV0YSkgPT4gdm9pZDtcbiAgfVxuKTogVXNlU3RyZWFtVGhyZWFkPFN0YXRlVHlwZT4ge1xuICBjb25zdCBrZXkgPSBnZXRGZXRjaEhpc3RvcnlLZXkoY2xpZW50LCB0aHJlYWRJZCwgbGltaXQpO1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlPHtcbiAgICBrZXk6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBkYXRhOiBUaHJlYWRTdGF0ZTxTdGF0ZVR5cGU+W10gfCB1bmRlZmluZWQ7XG4gICAgZXJyb3I6IHVua25vd24gfCB1bmRlZmluZWQ7XG4gICAgaXNMb2FkaW5nOiBib29sZWFuO1xuICB9PigoKSA9PiAoe1xuICAgIGtleTogdW5kZWZpbmVkLFxuICAgIGRhdGE6IHVuZGVmaW5lZCxcbiAgICBlcnJvcjogdW5kZWZpbmVkLFxuICAgIGlzTG9hZGluZzogdGhyZWFkSWQgIT0gbnVsbCxcbiAgfSkpO1xuXG4gIGNvbnN0IGNsaWVudFJlZiA9IHVzZVJlZihjbGllbnQpO1xuICBjbGllbnRSZWYuY3VycmVudCA9IGNsaWVudDtcblxuICBjb25zdCBvbkVycm9yUmVmID0gdXNlUmVmKG9wdGlvbnM/Lm9uRXJyb3IpO1xuICBvbkVycm9yUmVmLmN1cnJlbnQgPSBvcHRpb25zPy5vbkVycm9yO1xuXG4gIGNvbnN0IGZldGNoZXIgPSB1c2VDYWxsYmFjayhcbiAgICAoXG4gICAgICB0aHJlYWRJZDogc3RyaW5nIHwgdW5kZWZpbmVkIHwgbnVsbCxcbiAgICAgIGxpbWl0OiBib29sZWFuIHwgbnVtYmVyXG4gICAgKTogUHJvbWlzZTxUaHJlYWRTdGF0ZTxTdGF0ZVR5cGU+W10+ID0+IHtcbiAgICAgIC8vIElmIG9ubHkgcGFzc3Rocm91Z2ggaXMgZW5hYmxlZCwgZG9uJ3QgZmV0Y2ggaGlzdG9yeVxuICAgICAgaWYgKG9wdGlvbnMucGFzc3Rocm91Z2gpIHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xuXG4gICAgICBjb25zdCBjbGllbnQgPSBjbGllbnRSZWYuY3VycmVudDtcbiAgICAgIGNvbnN0IGtleSA9IGdldEZldGNoSGlzdG9yeUtleShjbGllbnQsIHRocmVhZElkLCBsaW1pdCk7XG5cbiAgICAgIGlmICh0aHJlYWRJZCAhPSBudWxsKSB7XG4gICAgICAgIHNldFN0YXRlKChzdGF0ZSkgPT4ge1xuICAgICAgICAgIGlmIChzdGF0ZS5rZXkgPT09IGtleSkgcmV0dXJuIHsgLi4uc3RhdGUsIGlzTG9hZGluZzogdHJ1ZSB9O1xuICAgICAgICAgIHJldHVybiB7IGtleSwgZGF0YTogdW5kZWZpbmVkLCBlcnJvcjogdW5kZWZpbmVkLCBpc0xvYWRpbmc6IHRydWUgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmZXRjaEhpc3Rvcnk8U3RhdGVUeXBlPihjbGllbnQsIHRocmVhZElkLCB7IGxpbWl0IH0pLnRoZW4oXG4gICAgICAgICAgKGRhdGEpID0+IHtcbiAgICAgICAgICAgIHNldFN0YXRlKChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICBpZiAoc3RhdGUua2V5ICE9PSBrZXkpIHJldHVybiBzdGF0ZTtcbiAgICAgICAgICAgICAgcmV0dXJuIHsga2V5LCBkYXRhLCBlcnJvcjogdW5kZWZpbmVkLCBpc0xvYWRpbmc6IGZhbHNlIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBzZXRTdGF0ZSgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgaWYgKHN0YXRlLmtleSAhPT0ga2V5KSByZXR1cm4gc3RhdGU7XG4gICAgICAgICAgICAgIHJldHVybiB7IGtleSwgZGF0YTogc3RhdGUuZGF0YSwgZXJyb3IsIGlzTG9hZGluZzogZmFsc2UgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgb25FcnJvclJlZi5jdXJyZW50Py4oZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHNldFN0YXRlKHsga2V5LCBkYXRhOiB1bmRlZmluZWQsIGVycm9yOiB1bmRlZmluZWQsIGlzTG9hZGluZzogZmFsc2UgfSk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcbiAgICB9LFxuICAgIFtvcHRpb25zLnBhc3N0aHJvdWdoXVxuICApO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gU2tpcCBpZiBhIHN0cmVhbSBpcyBhbHJlYWR5IGluIHByb2dyZXNzLCBubyBuZWVkIHRvIGZldGNoIGhpc3RvcnlcbiAgICBpZiAoXG4gICAgICBvcHRpb25zLnN1Ym1pdHRpbmdSZWYuY3VycmVudCAhPSBudWxsICYmXG4gICAgICBvcHRpb25zLnN1Ym1pdHRpbmdSZWYuY3VycmVudCA9PT0gdGhyZWFkSWRcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2b2lkIGZldGNoZXIodGhyZWFkSWQsIGxpbWl0KTtcbiAgICAvLyBUaGUgYHRocmVhZElkYCBhbmQgYGxpbWl0YCBhcmd1bWVudHMgYXJlIGFscmVhZHkgcHJlc2VudCBpbiBga2V5YFxuICAgIC8vIFRodXMgd2UgZG9uJ3QgbmVlZCB0byBpbmNsdWRlIHRoZW0gaW4gdGhlIGRlcGVuZGVuY3kgYXJyYXlcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIH0sIFtmZXRjaGVyLCBrZXldKTtcblxuICByZXR1cm4ge1xuICAgIGRhdGE6IHN0YXRlLmRhdGEsXG4gICAgZXJyb3I6IHN0YXRlLmVycm9yLFxuICAgIGlzTG9hZGluZzogc3RhdGUuaXNMb2FkaW5nLFxuICAgIG11dGF0ZTogKG11dGF0ZUlkPzogc3RyaW5nKSA9PiBmZXRjaGVyKG11dGF0ZUlkID8/IHRocmVhZElkLCBsaW1pdCksXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VTdHJlYW1MR1A8XG4gIFN0YXRlVHlwZSBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4gIEJhZyBleHRlbmRzIEJhZ1RlbXBsYXRlID0gQmFnVGVtcGxhdGVcbj4ob3B0aW9uczogVXNlU3RyZWFtT3B0aW9uczxTdGF0ZVR5cGUsIEJhZz4pOiBVc2VTdHJlYW08U3RhdGVUeXBlLCBCYWc+IHtcbiAgdHlwZSBVcGRhdGVUeXBlID0gR2V0VXBkYXRlVHlwZTxCYWcsIFN0YXRlVHlwZT47XG4gIHR5cGUgQ3VzdG9tVHlwZSA9IEdldEN1c3RvbUV2ZW50VHlwZTxCYWc+O1xuICB0eXBlIEludGVycnVwdFR5cGUgPSBHZXRJbnRlcnJ1cHRUeXBlPEJhZz47XG4gIHR5cGUgQ29uZmlndXJhYmxlVHlwZSA9IEdldENvbmZpZ3VyYWJsZVR5cGU8QmFnPjtcbiAgdHlwZSBUb29sQ2FsbFR5cGUgPSBHZXRUb29sQ2FsbHNUeXBlPFN0YXRlVHlwZT47XG5cbiAgY29uc3QgcmVjb25uZWN0T25Nb3VudFJlZiA9IHVzZVJlZihvcHRpb25zLnJlY29ubmVjdE9uTW91bnQpO1xuICBjb25zdCBydW5NZXRhZGF0YVN0b3JhZ2UgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIG51bGw7XG4gICAgY29uc3Qgc3RvcmFnZSA9IHJlY29ubmVjdE9uTW91bnRSZWYuY3VycmVudDtcbiAgICBpZiAoc3RvcmFnZSA9PT0gdHJ1ZSkgcmV0dXJuIHdpbmRvdy5zZXNzaW9uU3RvcmFnZTtcbiAgICBpZiAodHlwZW9mIHN0b3JhZ2UgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHN0b3JhZ2UoKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGNsaWVudCA9IHVzZU1lbW8oXG4gICAgKCkgPT5cbiAgICAgIG9wdGlvbnMuY2xpZW50ID8/XG4gICAgICBuZXcgQ2xpZW50KHtcbiAgICAgICAgYXBpVXJsOiBvcHRpb25zLmFwaVVybCxcbiAgICAgICAgYXBpS2V5OiBvcHRpb25zLmFwaUtleSxcbiAgICAgICAgY2FsbGVyT3B0aW9uczogb3B0aW9ucy5jYWxsZXJPcHRpb25zLFxuICAgICAgICBkZWZhdWx0SGVhZGVyczogb3B0aW9ucy5kZWZhdWx0SGVhZGVycyxcbiAgICAgIH0pLFxuICAgIFtcbiAgICAgIG9wdGlvbnMuY2xpZW50LFxuICAgICAgb3B0aW9ucy5hcGlLZXksXG4gICAgICBvcHRpb25zLmFwaVVybCxcbiAgICAgIG9wdGlvbnMuY2FsbGVyT3B0aW9ucyxcbiAgICAgIG9wdGlvbnMuZGVmYXVsdEhlYWRlcnMsXG4gICAgXVxuICApO1xuXG4gIGNvbnN0IFttZXNzYWdlTWFuYWdlcl0gPSB1c2VTdGF0ZSgoKSA9PiBuZXcgTWVzc2FnZVR1cGxlTWFuYWdlcigpKTtcbiAgY29uc3QgW3N0cmVhbV0gPSB1c2VTdGF0ZShcbiAgICAoKSA9PlxuICAgICAgbmV3IFN0cmVhbU1hbmFnZXI8U3RhdGVUeXBlLCBCYWc+KG1lc3NhZ2VNYW5hZ2VyLCB7XG4gICAgICAgIHRocm90dGxlOiBvcHRpb25zLnRocm90dGxlID8/IGZhbHNlLFxuICAgICAgfSlcbiAgKTtcblxuICB1c2VTeW5jRXh0ZXJuYWxTdG9yZShcbiAgICBzdHJlYW0uc3Vic2NyaWJlLFxuICAgIHN0cmVhbS5nZXRTbmFwc2hvdCxcbiAgICBzdHJlYW0uZ2V0U25hcHNob3RcbiAgKTtcblxuICBjb25zdCBbdGhyZWFkSWQsIG9uVGhyZWFkSWRdID0gdXNlQ29udHJvbGxhYmxlVGhyZWFkSWQob3B0aW9ucyk7XG4gIGNvbnN0IHRyYWNrU3RyZWFtTW9kZVJlZiA9IHVzZVJlZjxFeGNsdWRlPFN0cmVhbU1vZGUsIFwibWVzc2FnZXNcIj5bXT4oW10pO1xuXG4gIGNvbnN0IHRyYWNrU3RyZWFtTW9kZSA9IHVzZUNhbGxiYWNrKFxuICAgICguLi5tb2RlOiBFeGNsdWRlPFN0cmVhbU1vZGUsIFwibWVzc2FnZXNcIj5bXSkgPT4ge1xuICAgICAgY29uc3QgcmVmID0gdHJhY2tTdHJlYW1Nb2RlUmVmLmN1cnJlbnQ7XG4gICAgICBmb3IgKGNvbnN0IG0gb2YgbW9kZSkge1xuICAgICAgICBpZiAoIXJlZi5pbmNsdWRlcyhtKSkgcmVmLnB1c2gobSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBbXVxuICApO1xuXG4gIGNvbnN0IGhhc1VwZGF0ZUxpc3RlbmVyID0gb3B0aW9ucy5vblVwZGF0ZUV2ZW50ICE9IG51bGw7XG4gIGNvbnN0IGhhc0N1c3RvbUxpc3RlbmVyID0gb3B0aW9ucy5vbkN1c3RvbUV2ZW50ICE9IG51bGw7XG4gIGNvbnN0IGhhc0xhbmdDaGFpbkxpc3RlbmVyID0gb3B0aW9ucy5vbkxhbmdDaGFpbkV2ZW50ICE9IG51bGw7XG4gIGNvbnN0IGhhc0RlYnVnTGlzdGVuZXIgPSBvcHRpb25zLm9uRGVidWdFdmVudCAhPSBudWxsO1xuICBjb25zdCBoYXNDaGVja3BvaW50TGlzdGVuZXIgPSBvcHRpb25zLm9uQ2hlY2twb2ludEV2ZW50ICE9IG51bGw7XG4gIGNvbnN0IGhhc1Rhc2tMaXN0ZW5lciA9IG9wdGlvbnMub25UYXNrRXZlbnQgIT0gbnVsbDtcblxuICBjb25zdCBjYWxsYmFja1N0cmVhbU1vZGUgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBtb2RlczogRXhjbHVkZTxTdHJlYW1Nb2RlLCBcIm1lc3NhZ2VzXCI+W10gPSBbXTtcbiAgICBpZiAoaGFzVXBkYXRlTGlzdGVuZXIpIG1vZGVzLnB1c2goXCJ1cGRhdGVzXCIpO1xuICAgIGlmIChoYXNDdXN0b21MaXN0ZW5lcikgbW9kZXMucHVzaChcImN1c3RvbVwiKTtcbiAgICBpZiAoaGFzTGFuZ0NoYWluTGlzdGVuZXIpIG1vZGVzLnB1c2goXCJldmVudHNcIik7XG4gICAgaWYgKGhhc0RlYnVnTGlzdGVuZXIpIG1vZGVzLnB1c2goXCJkZWJ1Z1wiKTtcbiAgICBpZiAoaGFzQ2hlY2twb2ludExpc3RlbmVyKSBtb2Rlcy5wdXNoKFwiY2hlY2twb2ludHNcIik7XG4gICAgaWYgKGhhc1Rhc2tMaXN0ZW5lcikgbW9kZXMucHVzaChcInRhc2tzXCIpO1xuICAgIHJldHVybiBtb2RlcztcbiAgfSwgW1xuICAgIGhhc1VwZGF0ZUxpc3RlbmVyLFxuICAgIGhhc0N1c3RvbUxpc3RlbmVyLFxuICAgIGhhc0xhbmdDaGFpbkxpc3RlbmVyLFxuICAgIGhhc0RlYnVnTGlzdGVuZXIsXG4gICAgaGFzQ2hlY2twb2ludExpc3RlbmVyLFxuICAgIGhhc1Rhc2tMaXN0ZW5lcixcbiAgXSk7XG5cbiAgY29uc3QgdGhyZWFkSWRSZWYgPSB1c2VSZWY8c3RyaW5nIHwgbnVsbD4odGhyZWFkSWQpO1xuICBjb25zdCB0aHJlYWRJZFN0cmVhbWluZ1JlZiA9IHVzZVJlZjxzdHJpbmcgfCBudWxsPihudWxsKTtcblxuICAvLyBDYW5jZWwgdGhlIHN0cmVhbSBpZiB0aHJlYWQgSUQgaGFzIGNoYW5nZWRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodGhyZWFkSWRSZWYuY3VycmVudCAhPT0gdGhyZWFkSWQpIHtcbiAgICAgIHRocmVhZElkUmVmLmN1cnJlbnQgPSB0aHJlYWRJZDtcbiAgICAgIHN0cmVhbS5jbGVhcigpO1xuICAgIH1cbiAgfSwgW3RocmVhZElkLCBzdHJlYW1dKTtcblxuICBjb25zdCBoaXN0b3J5TGltaXQgPVxuICAgIHR5cGVvZiBvcHRpb25zLmZldGNoU3RhdGVIaXN0b3J5ID09PSBcIm9iamVjdFwiICYmXG4gICAgb3B0aW9ucy5mZXRjaFN0YXRlSGlzdG9yeSAhPSBudWxsXG4gICAgICA/IG9wdGlvbnMuZmV0Y2hTdGF0ZUhpc3RvcnkubGltaXQgPz8gZmFsc2VcbiAgICAgIDogb3B0aW9ucy5mZXRjaFN0YXRlSGlzdG9yeSA/PyBmYWxzZTtcblxuICBjb25zdCBidWlsdEluSGlzdG9yeSA9IHVzZVRocmVhZEhpc3Rvcnk8U3RhdGVUeXBlPihcbiAgICBjbGllbnQsXG4gICAgdGhyZWFkSWQsXG4gICAgaGlzdG9yeUxpbWl0LFxuICAgIHtcbiAgICAgIHBhc3N0aHJvdWdoOiBvcHRpb25zLnRocmVhZCAhPSBudWxsLFxuICAgICAgc3VibWl0dGluZ1JlZjogdGhyZWFkSWRTdHJlYW1pbmdSZWYsXG4gICAgICBvbkVycm9yOiBvcHRpb25zLm9uRXJyb3IsXG4gICAgfVxuICApO1xuICBjb25zdCBoaXN0b3J5ID0gb3B0aW9ucy50aHJlYWQgPz8gYnVpbHRJbkhpc3Rvcnk7XG5cbiAgY29uc3QgZ2V0TWVzc2FnZXMgPSAodmFsdWU6IFN0YXRlVHlwZSk6IE1lc3NhZ2VbXSA9PiB7XG4gICAgY29uc3QgbWVzc2FnZXNLZXkgPSBvcHRpb25zLm1lc3NhZ2VzS2V5ID8/IFwibWVzc2FnZXNcIjtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheSh2YWx1ZVttZXNzYWdlc0tleV0pXG4gICAgICA/ICh2YWx1ZVttZXNzYWdlc0tleV0gYXMgTWVzc2FnZVtdKVxuICAgICAgOiBbXTtcbiAgfTtcblxuICBjb25zdCBzZXRNZXNzYWdlcyA9IChjdXJyZW50OiBTdGF0ZVR5cGUsIG1lc3NhZ2VzOiBNZXNzYWdlW10pOiBTdGF0ZVR5cGUgPT4ge1xuICAgIGNvbnN0IG1lc3NhZ2VzS2V5ID0gb3B0aW9ucy5tZXNzYWdlc0tleSA/PyBcIm1lc3NhZ2VzXCI7XG4gICAgcmV0dXJuIHsgLi4uY3VycmVudCwgW21lc3NhZ2VzS2V5XTogbWVzc2FnZXMgfTtcbiAgfTtcblxuICBjb25zdCBbYnJhbmNoLCBzZXRCcmFuY2hdID0gdXNlU3RhdGU8c3RyaW5nPihcIlwiKTtcbiAgY29uc3QgYnJhbmNoQ29udGV4dCA9IGdldEJyYW5jaENvbnRleHQoYnJhbmNoLCBoaXN0b3J5LmRhdGEgPz8gdW5kZWZpbmVkKTtcblxuICBjb25zdCBoaXN0b3J5VmFsdWVzID1cbiAgICBicmFuY2hDb250ZXh0LnRocmVhZEhlYWQ/LnZhbHVlcyA/P1xuICAgIG9wdGlvbnMuaW5pdGlhbFZhbHVlcyA/P1xuICAgICh7fSBhcyBTdGF0ZVR5cGUpO1xuXG4gIGNvbnN0IGhpc3RvcnlFcnJvciA9ICgoKSA9PiB7XG4gICAgY29uc3QgZXJyb3IgPSBicmFuY2hDb250ZXh0LnRocmVhZEhlYWQ/LnRhc2tzPy5hdCgtMSk/LmVycm9yO1xuICAgIGlmIChlcnJvciA9PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGVycm9yKSBhcyB1bmtub3duO1xuICAgICAgaWYgKFN0cmVhbUVycm9yLmlzU3RydWN0dXJlZEVycm9yKHBhcnNlZCkpIHJldHVybiBuZXcgU3RyZWFtRXJyb3IocGFyc2VkKTtcbiAgICAgIHJldHVybiBwYXJzZWQ7XG4gICAgfSBjYXRjaCB7XG4gICAgICAvLyBkbyBub3RoaW5nXG4gICAgfVxuICAgIHJldHVybiBlcnJvcjtcbiAgfSkoKTtcblxuICBjb25zdCBtZXNzYWdlTWV0YWRhdGEgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGFscmVhZHlTaG93biA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIHJldHVybiBnZXRNZXNzYWdlcyhoaXN0b3J5VmFsdWVzKS5tYXAoXG4gICAgICAobWVzc2FnZSwgaWR4KTogT21pdDxNZXNzYWdlTWV0YWRhdGE8U3RhdGVUeXBlPiwgXCJzdHJlYW1NZXRhZGF0YVwiPiA9PiB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VJZCA9IG1lc3NhZ2UuaWQgPz8gaWR4O1xuXG4gICAgICAgIC8vIEZpbmQgdGhlIGZpcnN0IGNoZWNrcG9pbnQgd2hlcmUgdGhlIG1lc3NhZ2Ugd2FzIHNlZW5cbiAgICAgICAgY29uc3QgZmlyc3RTZWVuU3RhdGUgPSBmaW5kTGFzdChoaXN0b3J5LmRhdGEgPz8gW10sIChzdGF0ZSkgPT5cbiAgICAgICAgICBnZXRNZXNzYWdlcyhzdGF0ZS52YWx1ZXMpXG4gICAgICAgICAgICAubWFwKChtLCBpZHgpID0+IG0uaWQgPz8gaWR4KVxuICAgICAgICAgICAgLmluY2x1ZGVzKG1lc3NhZ2VJZClcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjaGVja3BvaW50SWQgPSBmaXJzdFNlZW5TdGF0ZT8uY2hlY2twb2ludD8uY2hlY2twb2ludF9pZDtcbiAgICAgICAgbGV0IGJyYW5jaCA9XG4gICAgICAgICAgY2hlY2twb2ludElkICE9IG51bGxcbiAgICAgICAgICAgID8gYnJhbmNoQ29udGV4dC5icmFuY2hCeUNoZWNrcG9pbnRbY2hlY2twb2ludElkXVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGlmICghYnJhbmNoPy5icmFuY2g/Lmxlbmd0aCkgYnJhbmNoID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIC8vIHNlcmlhbGl6ZSBicmFuY2hlc1xuICAgICAgICBjb25zdCBvcHRpb25zU2hvd24gPSBicmFuY2g/LmJyYW5jaE9wdGlvbnM/LmZsYXQoMikuam9pbihcIixcIik7XG4gICAgICAgIGlmIChvcHRpb25zU2hvd24pIHtcbiAgICAgICAgICBpZiAoYWxyZWFkeVNob3duLmhhcyhvcHRpb25zU2hvd24pKSBicmFuY2ggPSB1bmRlZmluZWQ7XG4gICAgICAgICAgYWxyZWFkeVNob3duLmFkZChvcHRpb25zU2hvd24pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBtZXNzYWdlSWQ6IG1lc3NhZ2VJZC50b1N0cmluZygpLFxuICAgICAgICAgIGZpcnN0U2VlblN0YXRlLFxuXG4gICAgICAgICAgYnJhbmNoOiBicmFuY2g/LmJyYW5jaCxcbiAgICAgICAgICBicmFuY2hPcHRpb25zOiBicmFuY2g/LmJyYW5jaE9wdGlvbnMsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgKTtcbiAgfSkoKTtcblxuICBjb25zdCBzdG9wID0gKCkgPT5cbiAgICBzdHJlYW0uc3RvcChoaXN0b3J5VmFsdWVzLCB7XG4gICAgICBvblN0b3A6IChhcmdzKSA9PiB7XG4gICAgICAgIGlmIChydW5NZXRhZGF0YVN0b3JhZ2UgJiYgdGhyZWFkSWQpIHtcbiAgICAgICAgICBjb25zdCBydW5JZCA9IHJ1bk1ldGFkYXRhU3RvcmFnZS5nZXRJdGVtKGBsZzpzdHJlYW06JHt0aHJlYWRJZH1gKTtcbiAgICAgICAgICBpZiAocnVuSWQpIHZvaWQgY2xpZW50LnJ1bnMuY2FuY2VsKHRocmVhZElkLCBydW5JZCk7XG4gICAgICAgICAgcnVuTWV0YWRhdGFTdG9yYWdlLnJlbW92ZUl0ZW0oYGxnOnN0cmVhbToke3RocmVhZElkfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgb3B0aW9ucy5vblN0b3A/LihhcmdzKTtcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgLy8gLS0tIFRSQU5TUE9SVCAtLS1cbiAgY29uc3Qgc3VibWl0ID0gYXN5bmMgKFxuICAgIHZhbHVlczogVXBkYXRlVHlwZSB8IG51bGwgfCB1bmRlZmluZWQsXG4gICAgc3VibWl0T3B0aW9ucz86IFN1Ym1pdE9wdGlvbnM8U3RhdGVUeXBlLCBDb25maWd1cmFibGVUeXBlPlxuICApID0+IHtcbiAgICAvLyBVbmJyYW5jaCB0aGluZ3NcbiAgICBjb25zdCBjaGVja3BvaW50SWQgPSBzdWJtaXRPcHRpb25zPy5jaGVja3BvaW50Py5jaGVja3BvaW50X2lkO1xuICAgIHNldEJyYW5jaChcbiAgICAgIGNoZWNrcG9pbnRJZCAhPSBudWxsXG4gICAgICAgID8gYnJhbmNoQ29udGV4dC5icmFuY2hCeUNoZWNrcG9pbnRbY2hlY2twb2ludElkXT8uYnJhbmNoID8/IFwiXCJcbiAgICAgICAgOiBcIlwiXG4gICAgKTtcblxuICAgIC8vIFdoZW4gYGZldGNoU3RhdGVIaXN0b3J5YCBpcyByZXF1ZXN0ZWQsIHRodXMgd2UgYXNzdW1lIHRoYXQgYnJhbmNoaW5nXG4gICAgLy8gaXMgZW5hYmxlZC4gV2UgdGhlbiBuZWVkIHRvIGluY2x1ZGUgdGhlIGltcGxpY2l0IGJyYW5jaC5cbiAgICBjb25zdCBpbmNsdWRlSW1wbGljaXRCcmFuY2ggPVxuICAgICAgaGlzdG9yeUxpbWl0ID09PSB0cnVlIHx8IHR5cGVvZiBoaXN0b3J5TGltaXQgPT09IFwibnVtYmVyXCI7XG5cbiAgICBjb25zdCBzaG91bGRSZWZldGNoID1cbiAgICAgIC8vIFdlJ3JlIGV4cGVjdGluZyB0aGUgd2hvbGUgdGhyZWFkIHN0YXRlIGluIG9uRmluaXNoXG4gICAgICBvcHRpb25zLm9uRmluaXNoICE9IG51bGwgfHxcbiAgICAgIC8vIFdlJ3JlIGZldGNoaW5nIGhpc3RvcnksIHRodXMgd2UgbmVlZCB0aGUgbGF0ZXN0IGNoZWNrcG9pbnRcbiAgICAgIC8vIHRvIGVuc3VyZSB3ZSdyZSBub3QgYWNjaWRlbnRhbGx5IHN1Ym1pdHRpbmcgdG8gYSB3cm9uZyBicmFuY2hcbiAgICAgIGluY2x1ZGVJbXBsaWNpdEJyYW5jaDtcblxuICAgIGxldCBjYWxsYmFja01ldGE6IFJ1bkNhbGxiYWNrTWV0YSB8IHVuZGVmaW5lZDtcbiAgICBsZXQgcmVqb2luS2V5OiBgbGc6c3RyZWFtOiR7c3RyaW5nfWAgfCB1bmRlZmluZWQ7XG4gICAgbGV0IHVzYWJsZVRocmVhZElkID0gdGhyZWFkSWQ7XG5cbiAgICBhd2FpdCBzdHJlYW0uc3RhcnQoXG4gICAgICBhc3luYyAoc2lnbmFsOiBBYm9ydFNpZ25hbCkgPT4ge1xuICAgICAgICBzdHJlYW0uc2V0U3RyZWFtVmFsdWVzKCh2YWx1ZXMpID0+IHtcbiAgICAgICAgICBjb25zdCBwcmV2ID0geyAuLi5oaXN0b3J5VmFsdWVzLCAuLi4odmFsdWVzID8/IHt9KSB9O1xuICAgICAgICAgIGlmIChzdWJtaXRPcHRpb25zPy5vcHRpbWlzdGljVmFsdWVzICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgICAgIC4uLih0eXBlb2Ygc3VibWl0T3B0aW9ucy5vcHRpbWlzdGljVmFsdWVzID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICAgICAgICA/IHN1Ym1pdE9wdGlvbnMub3B0aW1pc3RpY1ZhbHVlcyhwcmV2KVxuICAgICAgICAgICAgICAgIDogc3VibWl0T3B0aW9ucy5vcHRpbWlzdGljVmFsdWVzKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHsgLi4ucHJldiB9O1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIXVzYWJsZVRocmVhZElkKSB7XG4gICAgICAgICAgY29uc3QgdGhyZWFkID0gYXdhaXQgY2xpZW50LnRocmVhZHMuY3JlYXRlKHtcbiAgICAgICAgICAgIHRocmVhZElkOiBzdWJtaXRPcHRpb25zPy50aHJlYWRJZCxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBzdWJtaXRPcHRpb25zPy5tZXRhZGF0YSxcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHVzYWJsZVRocmVhZElkID0gdGhyZWFkLnRocmVhZF9pZDtcblxuICAgICAgICAgIC8vIFByZS1lbXB0aXZlbHkgdXBkYXRlIHRoZSB0aHJlYWQgSUQgYmVmb3JlXG4gICAgICAgICAgLy8gc3RyZWFtIGNhbmNlbGxhdGlvbiBpcyBraWNrZWQgb2ZmIGFuZCB0aHJlYWRcbiAgICAgICAgICAvLyBpcyBiZWluZyByZWZldGNoZWRcbiAgICAgICAgICB0aHJlYWRJZFJlZi5jdXJyZW50ID0gdXNhYmxlVGhyZWFkSWQ7XG4gICAgICAgICAgdGhyZWFkSWRTdHJlYW1pbmdSZWYuY3VycmVudCA9IHVzYWJsZVRocmVhZElkO1xuXG4gICAgICAgICAgb25UaHJlYWRJZCh1c2FibGVUaHJlYWRJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXVzYWJsZVRocmVhZElkKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIG9idGFpbiB2YWxpZCB0aHJlYWQgSUQuXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhyZWFkSWRTdHJlYW1pbmdSZWYuY3VycmVudCA9IHVzYWJsZVRocmVhZElkO1xuXG4gICAgICAgIGNvbnN0IHN0cmVhbU1vZGUgPSB1bmlxdWUoW1xuICAgICAgICAgIC4uLihzdWJtaXRPcHRpb25zPy5zdHJlYW1Nb2RlID8/IFtdKSxcbiAgICAgICAgICAuLi50cmFja1N0cmVhbU1vZGVSZWYuY3VycmVudCxcbiAgICAgICAgICAuLi5jYWxsYmFja1N0cmVhbU1vZGUsXG4gICAgICAgIF0pO1xuXG4gICAgICAgIGxldCBjaGVja3BvaW50ID1cbiAgICAgICAgICBzdWJtaXRPcHRpb25zPy5jaGVja3BvaW50ID8/XG4gICAgICAgICAgKGluY2x1ZGVJbXBsaWNpdEJyYW5jaFxuICAgICAgICAgICAgPyBicmFuY2hDb250ZXh0LnRocmVhZEhlYWQ/LmNoZWNrcG9pbnRcbiAgICAgICAgICAgIDogdW5kZWZpbmVkKSA/P1xuICAgICAgICAgIHVuZGVmaW5lZDtcblxuICAgICAgICAvLyBBdm9pZCBzcGVjaWZ5aW5nIGEgY2hlY2twb2ludCBpZiB1c2VyIGV4cGxpY2l0bHkgc2V0IGl0IHRvIG51bGxcbiAgICAgICAgaWYgKHN1Ym1pdE9wdGlvbnM/LmNoZWNrcG9pbnQgPT09IG51bGwpIGNoZWNrcG9pbnQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudFxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgIGlmIChjaGVja3BvaW50ICE9IG51bGwpIGRlbGV0ZSBjaGVja3BvaW50LnRocmVhZF9pZDtcbiAgICAgICAgY29uc3Qgc3RyZWFtUmVzdW1hYmxlID1cbiAgICAgICAgICBzdWJtaXRPcHRpb25zPy5zdHJlYW1SZXN1bWFibGUgPz8gISFydW5NZXRhZGF0YVN0b3JhZ2U7XG5cbiAgICAgICAgcmV0dXJuIGNsaWVudC5ydW5zLnN0cmVhbSh1c2FibGVUaHJlYWRJZCwgb3B0aW9ucy5hc3Npc3RhbnRJZCwge1xuICAgICAgICAgIGlucHV0OiB2YWx1ZXMgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4gICAgICAgICAgY29uZmlnOiBzdWJtaXRPcHRpb25zPy5jb25maWcsXG4gICAgICAgICAgY29udGV4dDogc3VibWl0T3B0aW9ucz8uY29udGV4dCxcbiAgICAgICAgICBjb21tYW5kOiBzdWJtaXRPcHRpb25zPy5jb21tYW5kLFxuXG4gICAgICAgICAgaW50ZXJydXB0QmVmb3JlOiBzdWJtaXRPcHRpb25zPy5pbnRlcnJ1cHRCZWZvcmUsXG4gICAgICAgICAgaW50ZXJydXB0QWZ0ZXI6IHN1Ym1pdE9wdGlvbnM/LmludGVycnVwdEFmdGVyLFxuICAgICAgICAgIG1ldGFkYXRhOiBzdWJtaXRPcHRpb25zPy5tZXRhZGF0YSxcbiAgICAgICAgICBtdWx0aXRhc2tTdHJhdGVneTogc3VibWl0T3B0aW9ucz8ubXVsdGl0YXNrU3RyYXRlZ3ksXG4gICAgICAgICAgb25Db21wbGV0aW9uOiBzdWJtaXRPcHRpb25zPy5vbkNvbXBsZXRpb24sXG4gICAgICAgICAgb25EaXNjb25uZWN0OlxuICAgICAgICAgICAgc3VibWl0T3B0aW9ucz8ub25EaXNjb25uZWN0ID8/XG4gICAgICAgICAgICAoc3RyZWFtUmVzdW1hYmxlID8gXCJjb250aW51ZVwiIDogXCJjYW5jZWxcIiksXG5cbiAgICAgICAgICBzaWduYWwsXG5cbiAgICAgICAgICBjaGVja3BvaW50LFxuICAgICAgICAgIHN0cmVhbU1vZGUsXG4gICAgICAgICAgc3RyZWFtU3ViZ3JhcGhzOiBzdWJtaXRPcHRpb25zPy5zdHJlYW1TdWJncmFwaHMsXG4gICAgICAgICAgc3RyZWFtUmVzdW1hYmxlLFxuICAgICAgICAgIGR1cmFiaWxpdHk6IHN1Ym1pdE9wdGlvbnM/LmR1cmFiaWxpdHksXG4gICAgICAgICAgb25SdW5DcmVhdGVkKHBhcmFtcykge1xuICAgICAgICAgICAgY2FsbGJhY2tNZXRhID0ge1xuICAgICAgICAgICAgICBydW5faWQ6IHBhcmFtcy5ydW5faWQsXG4gICAgICAgICAgICAgIHRocmVhZF9pZDogcGFyYW1zLnRocmVhZF9pZCA/PyB1c2FibGVUaHJlYWRJZCEsXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpZiAocnVuTWV0YWRhdGFTdG9yYWdlKSB7XG4gICAgICAgICAgICAgIHJlam9pbktleSA9IGBsZzpzdHJlYW06JHt1c2FibGVUaHJlYWRJZH1gO1xuICAgICAgICAgICAgICBydW5NZXRhZGF0YVN0b3JhZ2Uuc2V0SXRlbShyZWpvaW5LZXksIGNhbGxiYWNrTWV0YS5ydW5faWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvcHRpb25zLm9uQ3JlYXRlZD8uKGNhbGxiYWNrTWV0YSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSkgYXMgQXN5bmNHZW5lcmF0b3I8XG4gICAgICAgICAgRXZlbnRTdHJlYW1FdmVudDxTdGF0ZVR5cGUsIFVwZGF0ZVR5cGUsIEN1c3RvbVR5cGU+XG4gICAgICAgID47XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBnZXRNZXNzYWdlcyxcbiAgICAgICAgc2V0TWVzc2FnZXMsXG5cbiAgICAgICAgaW5pdGlhbFZhbHVlczogaGlzdG9yeVZhbHVlcyxcbiAgICAgICAgY2FsbGJhY2tzOiBvcHRpb25zLFxuXG4gICAgICAgIGFzeW5jIG9uU3VjY2VzcygpIHtcbiAgICAgICAgICBpZiAocmVqb2luS2V5KSBydW5NZXRhZGF0YVN0b3JhZ2U/LnJlbW92ZUl0ZW0ocmVqb2luS2V5KTtcblxuICAgICAgICAgIGlmIChzaG91bGRSZWZldGNoKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdIaXN0b3J5ID0gYXdhaXQgaGlzdG9yeS5tdXRhdGUodXNhYmxlVGhyZWFkSWQhKTtcbiAgICAgICAgICAgIGNvbnN0IGxhc3RIZWFkID0gbmV3SGlzdG9yeT8uYXQoMCk7XG4gICAgICAgICAgICBpZiAobGFzdEhlYWQpIHtcbiAgICAgICAgICAgICAgLy8gV2Ugbm93IGhhdmUgdGhlIGxhdGVzdCB1cGRhdGUgZnJvbSAvaGlzdG9yeVxuICAgICAgICAgICAgICAvLyBUaHVzIHdlIGNhbiBjbGVhciB0aGUgbG9jYWwgc3RyZWFtIHN0YXRlXG4gICAgICAgICAgICAgIG9wdGlvbnMub25GaW5pc2g/LihsYXN0SGVhZCwgY2FsbGJhY2tNZXRhKTtcbiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfSxcbiAgICAgICAgb25FcnJvcihlcnJvcikge1xuICAgICAgICAgIG9wdGlvbnMub25FcnJvcj8uKGVycm9yLCBjYWxsYmFja01ldGEpO1xuICAgICAgICB9LFxuICAgICAgICBvbkZpbmlzaCgpIHtcbiAgICAgICAgICB0aHJlYWRJZFN0cmVhbWluZ1JlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgfSxcbiAgICAgIH1cbiAgICApO1xuICB9O1xuXG4gIGNvbnN0IGpvaW5TdHJlYW0gPSBhc3luYyAoXG4gICAgcnVuSWQ6IHN0cmluZyxcbiAgICBsYXN0RXZlbnRJZD86IHN0cmluZyxcbiAgICBqb2luT3B0aW9ucz86IHsgc3RyZWFtTW9kZT86IFN0cmVhbU1vZGUgfCBTdHJlYW1Nb2RlW10gfVxuICApID0+IHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICBsYXN0RXZlbnRJZCA/Pz0gXCItMVwiO1xuICAgIGlmICghdGhyZWFkSWQpIHJldHVybjtcblxuICAgIGNvbnN0IGNhbGxiYWNrTWV0YTogUnVuQ2FsbGJhY2tNZXRhID0ge1xuICAgICAgdGhyZWFkX2lkOiB0aHJlYWRJZCxcbiAgICAgIHJ1bl9pZDogcnVuSWQsXG4gICAgfTtcblxuICAgIGF3YWl0IHN0cmVhbS5zdGFydChcbiAgICAgIGFzeW5jIChzaWduYWw6IEFib3J0U2lnbmFsKSA9PiB7XG4gICAgICAgIHRocmVhZElkU3RyZWFtaW5nUmVmLmN1cnJlbnQgPSB0aHJlYWRJZDtcbiAgICAgICAgcmV0dXJuIGNsaWVudC5ydW5zLmpvaW5TdHJlYW0odGhyZWFkSWQsIHJ1bklkLCB7XG4gICAgICAgICAgc2lnbmFsLFxuICAgICAgICAgIGxhc3RFdmVudElkLFxuICAgICAgICAgIHN0cmVhbU1vZGU6IGpvaW5PcHRpb25zPy5zdHJlYW1Nb2RlLFxuICAgICAgICB9KSBhcyBBc3luY0dlbmVyYXRvcjxcbiAgICAgICAgICBFdmVudFN0cmVhbUV2ZW50PFN0YXRlVHlwZSwgVXBkYXRlVHlwZSwgQ3VzdG9tVHlwZT5cbiAgICAgICAgPjtcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGdldE1lc3NhZ2VzLFxuICAgICAgICBzZXRNZXNzYWdlcyxcblxuICAgICAgICBpbml0aWFsVmFsdWVzOiBoaXN0b3J5VmFsdWVzLFxuICAgICAgICBjYWxsYmFja3M6IG9wdGlvbnMsXG4gICAgICAgIGFzeW5jIG9uU3VjY2VzcygpIHtcbiAgICAgICAgICBydW5NZXRhZGF0YVN0b3JhZ2U/LnJlbW92ZUl0ZW0oYGxnOnN0cmVhbToke3RocmVhZElkfWApO1xuICAgICAgICAgIGNvbnN0IG5ld0hpc3RvcnkgPSBhd2FpdCBoaXN0b3J5Lm11dGF0ZSh0aHJlYWRJZCk7XG4gICAgICAgICAgY29uc3QgbGFzdEhlYWQgPSBuZXdIaXN0b3J5Py5hdCgwKTtcbiAgICAgICAgICBpZiAobGFzdEhlYWQpIG9wdGlvbnMub25GaW5pc2g/LihsYXN0SGVhZCwgY2FsbGJhY2tNZXRhKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25FcnJvcihlcnJvcikge1xuICAgICAgICAgIG9wdGlvbnMub25FcnJvcj8uKGVycm9yLCBjYWxsYmFja01ldGEpO1xuICAgICAgICB9LFxuICAgICAgICBvbkZpbmlzaCgpIHtcbiAgICAgICAgICB0aHJlYWRJZFN0cmVhbWluZ1JlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgfSxcbiAgICAgIH1cbiAgICApO1xuICB9O1xuXG4gIGNvbnN0IHJlY29ubmVjdEtleSA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICghcnVuTWV0YWRhdGFTdG9yYWdlIHx8IHN0cmVhbS5pc0xvYWRpbmcpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgY29uc3QgcnVuSWQgPSBydW5NZXRhZGF0YVN0b3JhZ2U/LmdldEl0ZW0oYGxnOnN0cmVhbToke3RocmVhZElkfWApO1xuICAgIGlmICghcnVuSWQpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHsgcnVuSWQsIHRocmVhZElkIH07XG4gIH0sIFtydW5NZXRhZGF0YVN0b3JhZ2UsIHN0cmVhbS5pc0xvYWRpbmcsIHRocmVhZElkXSk7XG5cbiAgY29uc3Qgc2hvdWxkUmVjb25uZWN0ID0gISFydW5NZXRhZGF0YVN0b3JhZ2U7XG4gIGNvbnN0IHJlY29ubmVjdFJlZiA9IHVzZVJlZih7IHRocmVhZElkLCBzaG91bGRSZWNvbm5lY3QgfSk7XG5cbiAgY29uc3Qgam9pblN0cmVhbVJlZiA9IHVzZVJlZjx0eXBlb2Ygam9pblN0cmVhbT4oam9pblN0cmVhbSk7XG4gIGpvaW5TdHJlYW1SZWYuY3VycmVudCA9IGpvaW5TdHJlYW07XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyByZXNldCBzaG91bGRSZWNvbm5lY3Qgd2hlbiBzd2l0Y2hpbmcgdGhyZWFkc1xuICAgIGlmIChyZWNvbm5lY3RSZWYuY3VycmVudC50aHJlYWRJZCAhPT0gdGhyZWFkSWQpIHtcbiAgICAgIHJlY29ubmVjdFJlZi5jdXJyZW50ID0geyB0aHJlYWRJZCwgc2hvdWxkUmVjb25uZWN0IH07XG4gICAgfVxuICB9LCBbdGhyZWFkSWQsIHNob3VsZFJlY29ubmVjdF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHJlY29ubmVjdEtleSAmJiByZWNvbm5lY3RSZWYuY3VycmVudC5zaG91bGRSZWNvbm5lY3QpIHtcbiAgICAgIHJlY29ubmVjdFJlZi5jdXJyZW50LnNob3VsZFJlY29ubmVjdCA9IGZhbHNlO1xuICAgICAgdm9pZCBqb2luU3RyZWFtUmVmLmN1cnJlbnQ/LihyZWNvbm5lY3RLZXkucnVuSWQpO1xuICAgIH1cbiAgfSwgW3JlY29ubmVjdEtleV0pO1xuXG4gIGNvbnN0IGVycm9yID0gc3RyZWFtLmVycm9yID8/IGhpc3RvcnlFcnJvciA/PyBoaXN0b3J5LmVycm9yO1xuICBjb25zdCB2YWx1ZXMgPSBzdHJlYW0udmFsdWVzID8/IGhpc3RvcnlWYWx1ZXM7XG5cbiAgcmV0dXJuIHtcbiAgICBnZXQgdmFsdWVzKCkge1xuICAgICAgdHJhY2tTdHJlYW1Nb2RlKFwidmFsdWVzXCIpO1xuICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICB9LFxuXG4gICAgY2xpZW50LFxuICAgIGFzc2lzdGFudElkOiBvcHRpb25zLmFzc2lzdGFudElkLFxuXG4gICAgZXJyb3IsXG4gICAgaXNMb2FkaW5nOiBzdHJlYW0uaXNMb2FkaW5nLFxuXG4gICAgc3RvcCxcbiAgICBzdWJtaXQsXG5cbiAgICBqb2luU3RyZWFtLFxuXG4gICAgYnJhbmNoLFxuICAgIHNldEJyYW5jaCxcblxuICAgIGdldCBoaXN0b3J5KCkge1xuICAgICAgaWYgKGhpc3RvcnlMaW1pdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIFwiYGZldGNoU3RhdGVIaXN0b3J5YCBtdXN0IGJlIHNldCB0byBgdHJ1ZWAgdG8gdXNlIGBoaXN0b3J5YFwiXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicmFuY2hDb250ZXh0LmZsYXRIaXN0b3J5O1xuICAgIH0sXG5cbiAgICBpc1RocmVhZExvYWRpbmc6IGhpc3RvcnkuaXNMb2FkaW5nICYmIGhpc3RvcnkuZGF0YSA9PSBudWxsLFxuXG4gICAgZ2V0IGV4cGVyaW1lbnRhbF9icmFuY2hUcmVlKCkge1xuICAgICAgaWYgKGhpc3RvcnlMaW1pdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIFwiYGZldGNoU3RhdGVIaXN0b3J5YCBtdXN0IGJlIHNldCB0byBgdHJ1ZWAgdG8gdXNlIGBleHBlcmltZW50YWxfYnJhbmNoVHJlZWBcIlxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnJhbmNoQ29udGV4dC5icmFuY2hUcmVlO1xuICAgIH0sXG5cbiAgICBnZXQgaW50ZXJydXB0KCkge1xuICAgICAgaWYgKFxuICAgICAgICB2YWx1ZXMgIT0gbnVsbCAmJlxuICAgICAgICBcIl9faW50ZXJydXB0X19cIiBpbiB2YWx1ZXMgJiZcbiAgICAgICAgQXJyYXkuaXNBcnJheSh2YWx1ZXMuX19pbnRlcnJ1cHRfXylcbiAgICAgICkge1xuICAgICAgICBjb25zdCB2YWx1ZUludGVycnVwdHMgPSB2YWx1ZXMuX19pbnRlcnJ1cHRfXztcbiAgICAgICAgaWYgKHZhbHVlSW50ZXJydXB0cy5sZW5ndGggPT09IDApIHJldHVybiB7IHdoZW46IFwiYnJlYWtwb2ludFwiIH07XG4gICAgICAgIGlmICh2YWx1ZUludGVycnVwdHMubGVuZ3RoID09PSAxKSByZXR1cm4gdmFsdWVJbnRlcnJ1cHRzWzBdO1xuXG4gICAgICAgIC8vIFRPRE86IGZpeCB0aGUgdHlwaW5nIG9mIGludGVycnVwdHMgaWYgbXVsdGlwbGUgaW50ZXJydXB0cyBhcmUgcmV0dXJuZWRcbiAgICAgICAgcmV0dXJuIHZhbHVlSW50ZXJydXB0cztcbiAgICAgIH1cblxuICAgICAgLy8gSWYgd2UncmUgZGVmZXJyaW5nIHRvIG9sZCBpbnRlcnJ1cHQgZGV0ZWN0aW9uIGxvZ2ljLCBkb24ndCBzaG93IHRoZSBpbnRlcnJ1cHQgaWYgdGhlIHN0cmVhbSBpcyBsb2FkaW5nXG4gICAgICBpZiAoc3RyZWFtLmlzTG9hZGluZykgcmV0dXJuIHVuZGVmaW5lZDtcblxuICAgICAgY29uc3QgaW50ZXJydXB0cyA9IGJyYW5jaENvbnRleHQudGhyZWFkSGVhZD8udGFza3M/LmF0KC0xKT8uaW50ZXJydXB0cztcbiAgICAgIGlmIChpbnRlcnJ1cHRzID09IG51bGwgfHwgaW50ZXJydXB0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhlcmUncyBhIG5leHQgdGFzayBwcmVzZW50XG4gICAgICAgIGNvbnN0IG5leHQgPSBicmFuY2hDb250ZXh0LnRocmVhZEhlYWQ/Lm5leHQgPz8gW107XG4gICAgICAgIGlmICghbmV4dC5sZW5ndGggfHwgZXJyb3IgIT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIHsgd2hlbjogXCJicmVha3BvaW50XCIgfTtcbiAgICAgIH1cblxuICAgICAgLy8gUmV0dXJuIG9ubHkgdGhlIGN1cnJlbnQgaW50ZXJydXB0XG4gICAgICByZXR1cm4gaW50ZXJydXB0cy5hdCgtMSkgYXMgSW50ZXJydXB0PEludGVycnVwdFR5cGU+IHwgdW5kZWZpbmVkO1xuICAgIH0sXG5cbiAgICBnZXQgbWVzc2FnZXMoKTogTWVzc2FnZTxUb29sQ2FsbFR5cGU+W10ge1xuICAgICAgdHJhY2tTdHJlYW1Nb2RlKFwibWVzc2FnZXMtdHVwbGVcIiwgXCJ2YWx1ZXNcIik7XG4gICAgICByZXR1cm4gZ2V0TWVzc2FnZXModmFsdWVzKTtcbiAgICB9LFxuXG4gICAgZ2V0IHRvb2xDYWxscygpIHtcbiAgICAgIHRyYWNrU3RyZWFtTW9kZShcIm1lc3NhZ2VzLXR1cGxlXCIsIFwidmFsdWVzXCIpO1xuICAgICAgY29uc3QgbXNncyA9IGdldE1lc3NhZ2VzKHZhbHVlcykgYXMgTWVzc2FnZTxUb29sQ2FsbFR5cGU+W107XG4gICAgICByZXR1cm4gZ2V0VG9vbENhbGxzV2l0aFJlc3VsdHM8VG9vbENhbGxUeXBlPihtc2dzKTtcbiAgICB9LFxuXG4gICAgZ2V0VG9vbENhbGxzKG1lc3NhZ2UpIHtcbiAgICAgIHRyYWNrU3RyZWFtTW9kZShcIm1lc3NhZ2VzLXR1cGxlXCIsIFwidmFsdWVzXCIpO1xuICAgICAgY29uc3QgbXNncyA9IGdldE1lc3NhZ2VzKHZhbHVlcykgYXMgTWVzc2FnZTxUb29sQ2FsbFR5cGU+W107XG4gICAgICBjb25zdCBhbGxUb29sQ2FsbHMgPSBnZXRUb29sQ2FsbHNXaXRoUmVzdWx0czxUb29sQ2FsbFR5cGU+KG1zZ3MpO1xuICAgICAgcmV0dXJuIGFsbFRvb2xDYWxscy5maWx0ZXIoKHRjKSA9PiB0Yy5haU1lc3NhZ2UuaWQgPT09IG1lc3NhZ2UuaWQpO1xuICAgIH0sXG5cbiAgICBnZXRNZXNzYWdlc01ldGFkYXRhKFxuICAgICAgbWVzc2FnZTogTWVzc2FnZTxUb29sQ2FsbFR5cGU+LFxuICAgICAgaW5kZXg/OiBudW1iZXJcbiAgICApOiBNZXNzYWdlTWV0YWRhdGE8U3RhdGVUeXBlPiB8IHVuZGVmaW5lZCB7XG4gICAgICB0cmFja1N0cmVhbU1vZGUoXCJ2YWx1ZXNcIik7XG5cbiAgICAgIGNvbnN0IHN0cmVhbU1ldGFkYXRhID0gbWVzc2FnZU1hbmFnZXIuZ2V0KG1lc3NhZ2UuaWQpPy5tZXRhZGF0YTtcbiAgICAgIGNvbnN0IGhpc3RvcnlNZXRhZGF0YSA9IG1lc3NhZ2VNZXRhZGF0YT8uZmluZChcbiAgICAgICAgKG0pID0+IG0ubWVzc2FnZUlkID09PSAobWVzc2FnZS5pZCA/PyBpbmRleClcbiAgICAgICk7XG5cbiAgICAgIGlmIChzdHJlYW1NZXRhZGF0YSAhPSBudWxsIHx8IGhpc3RvcnlNZXRhZGF0YSAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uaGlzdG9yeU1ldGFkYXRhLFxuICAgICAgICAgIHN0cmVhbU1ldGFkYXRhLFxuICAgICAgICB9IGFzIE1lc3NhZ2VNZXRhZGF0YTxTdGF0ZVR5cGU+O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0sXG4gIH07XG59XG4iXSwibmFtZXMiOlsiY2xpZW50Iiwia2V5IiwidGhyZWFkSWQiLCJsaW1pdCIsInN0YXRlIiwiZXJyb3IiLCJpZHgiLCJicmFuY2giLCJ2YWx1ZXMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/dist/react/stream.lgp.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/dist/react/thread.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/dist/react/thread.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useControllableThreadId: () => (/* binding */ useControllableThreadId)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* __next_internal_client_entry_do_not_use__ useControllableThreadId auto */ \n//#region src/react/thread.tsx\nconst useControllableThreadId = (options)=>{\n    const [localThreadId, _setLocalThreadId] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(options?.threadId ?? null);\n    const onThreadIdRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(options?.onThreadId);\n    onThreadIdRef.current = options?.onThreadId;\n    const setThreadId = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useControllableThreadId.useCallback[setThreadId]\": (threadId)=>{\n            _setLocalThreadId(threadId);\n            onThreadIdRef.current?.(threadId);\n        }\n    }[\"useControllableThreadId.useCallback[setThreadId]\"], []);\n    if (!options || !(\"threadId\" in options)) return [\n        localThreadId,\n        setThreadId\n    ];\n    return [\n        options.threadId ?? null,\n        setThreadId\n    ];\n};\n//#endregion\n //# sourceMappingURL=thread.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL2Rpc3QvcmVhY3QvdGhyZWFkLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFJQSxNQUFhLDJCQUEyQjtJQUl0QyxNQUFNLENBQUMsZUFBZSxxQkFBcUIsK0NBQVEsQ0FDakQsU0FBUyxZQUFZLEtBQ3RCO0lBRUQsTUFBTSxnQkFBZ0IsNkNBQU0sQ0FBQyxTQUFTLFdBQVc7SUFDakQsY0FBYyxVQUFVLFNBQVM7SUFFakMsTUFBTSxjQUFjLGtEQUFXOzREQUFYLENBQWE7WUFDL0Isa0JBQWtCLFNBQVM7WUFDM0IsY0FBYyxVQUFVLFNBQVM7OzJEQUNoQyxFQUFFLENBQUM7SUFFTixJQUFJLENBQUMsV0FBVyxFQUFFLGNBQWMsVUFDOUIsT0FBTztRQUFDO1FBQWU7S0FBWTtJQUdyQyxPQUFPO1FBQUMsUUFBUSxZQUFZO1FBQU07S0FBWSIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3NyYy9yZWFjdC90aHJlYWQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VDYWxsYmFjayB9IGZyb20gXCJyZWFjdFwiO1xuXG5leHBvcnQgY29uc3QgdXNlQ29udHJvbGxhYmxlVGhyZWFkSWQgPSAob3B0aW9ucz86IHtcbiAgdGhyZWFkSWQ/OiBzdHJpbmcgfCBudWxsO1xuICBvblRocmVhZElkPzogKHRocmVhZElkOiBzdHJpbmcpID0+IHZvaWQ7XG59KTogW3N0cmluZyB8IG51bGwsICh0aHJlYWRJZDogc3RyaW5nKSA9PiB2b2lkXSA9PiB7XG4gIGNvbnN0IFtsb2NhbFRocmVhZElkLCBfc2V0TG9jYWxUaHJlYWRJZF0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihcbiAgICBvcHRpb25zPy50aHJlYWRJZCA/PyBudWxsXG4gICk7XG5cbiAgY29uc3Qgb25UaHJlYWRJZFJlZiA9IHVzZVJlZihvcHRpb25zPy5vblRocmVhZElkKTtcbiAgb25UaHJlYWRJZFJlZi5jdXJyZW50ID0gb3B0aW9ucz8ub25UaHJlYWRJZDtcblxuICBjb25zdCBzZXRUaHJlYWRJZCA9IHVzZUNhbGxiYWNrKCh0aHJlYWRJZDogc3RyaW5nKSA9PiB7XG4gICAgX3NldExvY2FsVGhyZWFkSWQodGhyZWFkSWQpO1xuICAgIG9uVGhyZWFkSWRSZWYuY3VycmVudD8uKHRocmVhZElkKTtcbiAgfSwgW10pO1xuXG4gIGlmICghb3B0aW9ucyB8fCAhKFwidGhyZWFkSWRcIiBpbiBvcHRpb25zKSkge1xuICAgIHJldHVybiBbbG9jYWxUaHJlYWRJZCwgc2V0VGhyZWFkSWRdO1xuICB9XG5cbiAgcmV0dXJuIFtvcHRpb25zLnRocmVhZElkID8/IG51bGwsIHNldFRocmVhZElkXTtcbn07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/dist/react/thread.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/dist/singletons/fetch.js":
/*!************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/dist/singletons/fetch.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _getFetchImplementation: () => (/* binding */ _getFetchImplementation),\n/* harmony export */   overrideFetchImplementation: () => (/* binding */ overrideFetchImplementation)\n/* harmony export */ });\n//#region src/singletons/fetch.ts\nconst DEFAULT_FETCH_IMPLEMENTATION = (...args) => fetch(...args);\nconst LANGSMITH_FETCH_IMPLEMENTATION_KEY = Symbol.for(\"lg:fetch_implementation\");\n/**\n* Overrides the fetch implementation used for LangSmith calls.\n* You should use this if you need to use an implementation of fetch\n* other than the default global (e.g. for dealing with proxies).\n* @param fetch The new fetch function to use.\n*/\nconst overrideFetchImplementation = (fetch$1) => {\n\tglobalThis[LANGSMITH_FETCH_IMPLEMENTATION_KEY] = fetch$1;\n};\n/**\n* @internal\n*/\nconst _getFetchImplementation = () => {\n\treturn globalThis[LANGSMITH_FETCH_IMPLEMENTATION_KEY] ?? DEFAULT_FETCH_IMPLEMENTATION;\n};\n\n//#endregion\n\n//# sourceMappingURL=fetch.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL2Rpc3Qvc2luZ2xldG9ucy9mZXRjaC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNnRTtBQUNoRSIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoLXNkay9kaXN0L3NpbmdsZXRvbnMvZmV0Y2guanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9zaW5nbGV0b25zL2ZldGNoLnRzXG5jb25zdCBERUZBVUxUX0ZFVENIX0lNUExFTUVOVEFUSU9OID0gKC4uLmFyZ3MpID0+IGZldGNoKC4uLmFyZ3MpO1xuY29uc3QgTEFOR1NNSVRIX0ZFVENIX0lNUExFTUVOVEFUSU9OX0tFWSA9IFN5bWJvbC5mb3IoXCJsZzpmZXRjaF9pbXBsZW1lbnRhdGlvblwiKTtcbi8qKlxuKiBPdmVycmlkZXMgdGhlIGZldGNoIGltcGxlbWVudGF0aW9uIHVzZWQgZm9yIExhbmdTbWl0aCBjYWxscy5cbiogWW91IHNob3VsZCB1c2UgdGhpcyBpZiB5b3UgbmVlZCB0byB1c2UgYW4gaW1wbGVtZW50YXRpb24gb2YgZmV0Y2hcbiogb3RoZXIgdGhhbiB0aGUgZGVmYXVsdCBnbG9iYWwgKGUuZy4gZm9yIGRlYWxpbmcgd2l0aCBwcm94aWVzKS5cbiogQHBhcmFtIGZldGNoIFRoZSBuZXcgZmV0Y2ggZnVuY3Rpb24gdG8gdXNlLlxuKi9cbmNvbnN0IG92ZXJyaWRlRmV0Y2hJbXBsZW1lbnRhdGlvbiA9IChmZXRjaCQxKSA9PiB7XG5cdGdsb2JhbFRoaXNbTEFOR1NNSVRIX0ZFVENIX0lNUExFTUVOVEFUSU9OX0tFWV0gPSBmZXRjaCQxO1xufTtcbi8qKlxuKiBAaW50ZXJuYWxcbiovXG5jb25zdCBfZ2V0RmV0Y2hJbXBsZW1lbnRhdGlvbiA9ICgpID0+IHtcblx0cmV0dXJuIGdsb2JhbFRoaXNbTEFOR1NNSVRIX0ZFVENIX0lNUExFTUVOVEFUSU9OX0tFWV0gPz8gREVGQVVMVF9GRVRDSF9JTVBMRU1FTlRBVElPTjtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgX2dldEZldGNoSW1wbGVtZW50YXRpb24sIG92ZXJyaWRlRmV0Y2hJbXBsZW1lbnRhdGlvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmV0Y2guanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/dist/singletons/fetch.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/dist/ui/branching.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/dist/ui/branching.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getBranchContext: () => (/* binding */ getBranchContext)\n/* harmony export */ });\n//#region src/ui/branching.ts\nfunction getBranchSequence(history) {\n\tconst nodeIds = /* @__PURE__ */ new Set();\n\tconst childrenMap = {};\n\tif (history.length <= 1) return {\n\t\trootSequence: {\n\t\t\ttype: \"sequence\",\n\t\t\titems: history.map((value) => ({\n\t\t\t\ttype: \"node\",\n\t\t\t\tvalue,\n\t\t\t\tpath: []\n\t\t\t}))\n\t\t},\n\t\tpaths: []\n\t};\n\thistory.forEach((state) => {\n\t\tconst checkpointId = state.parent_checkpoint?.checkpoint_id ?? \"$\";\n\t\tchildrenMap[checkpointId] ??= [];\n\t\tchildrenMap[checkpointId].push(state);\n\t\tif (state.checkpoint?.checkpoint_id != null) nodeIds.add(state.checkpoint.checkpoint_id);\n\t});\n\tconst maxId = (...ids) => ids.filter((i) => i != null).sort((a, b) => a.localeCompare(b)).at(-1);\n\tconst lastOrphanedNode = childrenMap.$ == null ? Object.keys(childrenMap).filter((parentId) => !nodeIds.has(parentId)).map((parentId) => {\n\t\tconst queue$1 = [parentId];\n\t\tconst seen = /* @__PURE__ */ new Set();\n\t\tlet lastId = parentId;\n\t\twhile (queue$1.length > 0) {\n\t\t\tconst current = queue$1.shift();\n\t\t\tif (seen.has(current)) continue;\n\t\t\tseen.add(current);\n\t\t\tconst children = (childrenMap[current] ?? []).flatMap((i) => i.checkpoint?.checkpoint_id ?? []);\n\t\t\tlastId = maxId(lastId, ...children);\n\t\t\tqueue$1.push(...children);\n\t\t}\n\t\treturn {\n\t\t\tparentId,\n\t\t\tlastId\n\t\t};\n\t}).sort((a, b) => a.lastId.localeCompare(b.lastId)).at(-1)?.parentId : void 0;\n\tif (lastOrphanedNode != null) childrenMap.$ = childrenMap[lastOrphanedNode];\n\tconst rootSequence = {\n\t\ttype: \"sequence\",\n\t\titems: []\n\t};\n\tconst queue = [{\n\t\tid: \"$\",\n\t\tsequence: rootSequence,\n\t\tpath: []\n\t}];\n\tconst paths = [];\n\tconst visited = /* @__PURE__ */ new Set();\n\twhile (queue.length > 0) {\n\t\tconst task = queue.shift();\n\t\tif (visited.has(task.id)) continue;\n\t\tvisited.add(task.id);\n\t\tconst children = childrenMap[task.id];\n\t\tif (children == null || children.length === 0) continue;\n\t\tlet fork;\n\t\tif (children.length > 1) {\n\t\t\tfork = {\n\t\t\t\ttype: \"fork\",\n\t\t\t\titems: []\n\t\t\t};\n\t\t\ttask.sequence.items.push(fork);\n\t\t}\n\t\tfor (const value of children) {\n\t\t\tconst id = value.checkpoint?.checkpoint_id;\n\t\t\tif (id == null) continue;\n\t\t\tlet { sequence } = task;\n\t\t\tlet { path } = task;\n\t\t\tif (fork != null) {\n\t\t\t\tsequence = {\n\t\t\t\t\ttype: \"sequence\",\n\t\t\t\t\titems: []\n\t\t\t\t};\n\t\t\t\tfork.items.unshift(sequence);\n\t\t\t\tpath = path.slice();\n\t\t\t\tpath.push(id);\n\t\t\t\tpaths.push(path);\n\t\t\t}\n\t\t\tsequence.items.push({\n\t\t\t\ttype: \"node\",\n\t\t\t\tvalue,\n\t\t\t\tpath\n\t\t\t});\n\t\t\tqueue.push({\n\t\t\t\tid,\n\t\t\t\tsequence,\n\t\t\t\tpath\n\t\t\t});\n\t\t}\n\t}\n\treturn {\n\t\trootSequence,\n\t\tpaths\n\t};\n}\nconst PATH_SEP = \">\";\nconst ROOT_ID = \"$\";\nfunction getBranchView(sequence, paths, branch) {\n\tconst path = branch.split(PATH_SEP);\n\tconst pathMap = {};\n\tfor (const path$1 of paths) {\n\t\tconst parent = path$1.at(-2) ?? ROOT_ID;\n\t\tpathMap[parent] ??= [];\n\t\tpathMap[parent].unshift(path$1);\n\t}\n\tconst history = [];\n\tconst branchByCheckpoint = {};\n\tconst forkStack = path.slice();\n\tconst queue = [...sequence.items];\n\twhile (queue.length > 0) {\n\t\tconst item = queue.shift();\n\t\tif (item.type === \"node\") {\n\t\t\thistory.push(item.value);\n\t\t\tconst checkpointId = item.value.checkpoint?.checkpoint_id;\n\t\t\tif (checkpointId == null) continue;\n\t\t\tbranchByCheckpoint[checkpointId] = {\n\t\t\t\tbranch: item.path.join(PATH_SEP),\n\t\t\t\tbranchOptions: (item.path.length > 0 ? pathMap[item.path.at(-2) ?? ROOT_ID] ?? [] : []).map((p) => p.join(PATH_SEP))\n\t\t\t};\n\t\t}\n\t\tif (item.type === \"fork\") {\n\t\t\tconst forkId = forkStack.shift();\n\t\t\tconst index = forkId != null ? item.items.findIndex((value) => {\n\t\t\t\tconst firstItem = value.items.at(0);\n\t\t\t\tif (!firstItem || firstItem.type !== \"node\") return false;\n\t\t\t\treturn firstItem.value.checkpoint?.checkpoint_id === forkId;\n\t\t\t}) : -1;\n\t\t\tconst nextItems = item.items.at(index)?.items ?? [];\n\t\t\tqueue.push(...nextItems);\n\t\t}\n\t}\n\treturn {\n\t\thistory,\n\t\tbranchByCheckpoint\n\t};\n}\nfunction getBranchContext(branch, history) {\n\tconst { rootSequence: branchTree, paths } = getBranchSequence(history ?? []);\n\tconst { history: flatHistory, branchByCheckpoint } = getBranchView(branchTree, paths, branch);\n\treturn {\n\t\tbranchTree,\n\t\tflatHistory,\n\t\tbranchByCheckpoint,\n\t\tthreadHead: flatHistory.at(-1)\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=branching.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL2Rpc3QvdWkvYnJhbmNoaW5nLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsV0FBVztBQUNwQixTQUFTLE9BQU87QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxrQ0FBa0M7QUFDM0MsU0FBUywyQ0FBMkM7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDNEI7QUFDNUIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC1zZGsvZGlzdC91aS9icmFuY2hpbmcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91aS9icmFuY2hpbmcudHNcbmZ1bmN0aW9uIGdldEJyYW5jaFNlcXVlbmNlKGhpc3RvcnkpIHtcblx0Y29uc3Qgbm9kZUlkcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG5cdGNvbnN0IGNoaWxkcmVuTWFwID0ge307XG5cdGlmIChoaXN0b3J5Lmxlbmd0aCA8PSAxKSByZXR1cm4ge1xuXHRcdHJvb3RTZXF1ZW5jZToge1xuXHRcdFx0dHlwZTogXCJzZXF1ZW5jZVwiLFxuXHRcdFx0aXRlbXM6IGhpc3RvcnkubWFwKCh2YWx1ZSkgPT4gKHtcblx0XHRcdFx0dHlwZTogXCJub2RlXCIsXG5cdFx0XHRcdHZhbHVlLFxuXHRcdFx0XHRwYXRoOiBbXVxuXHRcdFx0fSkpXG5cdFx0fSxcblx0XHRwYXRoczogW11cblx0fTtcblx0aGlzdG9yeS5mb3JFYWNoKChzdGF0ZSkgPT4ge1xuXHRcdGNvbnN0IGNoZWNrcG9pbnRJZCA9IHN0YXRlLnBhcmVudF9jaGVja3BvaW50Py5jaGVja3BvaW50X2lkID8/IFwiJFwiO1xuXHRcdGNoaWxkcmVuTWFwW2NoZWNrcG9pbnRJZF0gPz89IFtdO1xuXHRcdGNoaWxkcmVuTWFwW2NoZWNrcG9pbnRJZF0ucHVzaChzdGF0ZSk7XG5cdFx0aWYgKHN0YXRlLmNoZWNrcG9pbnQ/LmNoZWNrcG9pbnRfaWQgIT0gbnVsbCkgbm9kZUlkcy5hZGQoc3RhdGUuY2hlY2twb2ludC5jaGVja3BvaW50X2lkKTtcblx0fSk7XG5cdGNvbnN0IG1heElkID0gKC4uLmlkcykgPT4gaWRzLmZpbHRlcigoaSkgPT4gaSAhPSBudWxsKS5zb3J0KChhLCBiKSA9PiBhLmxvY2FsZUNvbXBhcmUoYikpLmF0KC0xKTtcblx0Y29uc3QgbGFzdE9ycGhhbmVkTm9kZSA9IGNoaWxkcmVuTWFwLiQgPT0gbnVsbCA/IE9iamVjdC5rZXlzKGNoaWxkcmVuTWFwKS5maWx0ZXIoKHBhcmVudElkKSA9PiAhbm9kZUlkcy5oYXMocGFyZW50SWQpKS5tYXAoKHBhcmVudElkKSA9PiB7XG5cdFx0Y29uc3QgcXVldWUkMSA9IFtwYXJlbnRJZF07XG5cdFx0Y29uc3Qgc2VlbiA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG5cdFx0bGV0IGxhc3RJZCA9IHBhcmVudElkO1xuXHRcdHdoaWxlIChxdWV1ZSQxLmxlbmd0aCA+IDApIHtcblx0XHRcdGNvbnN0IGN1cnJlbnQgPSBxdWV1ZSQxLnNoaWZ0KCk7XG5cdFx0XHRpZiAoc2Vlbi5oYXMoY3VycmVudCkpIGNvbnRpbnVlO1xuXHRcdFx0c2Vlbi5hZGQoY3VycmVudCk7XG5cdFx0XHRjb25zdCBjaGlsZHJlbiA9IChjaGlsZHJlbk1hcFtjdXJyZW50XSA/PyBbXSkuZmxhdE1hcCgoaSkgPT4gaS5jaGVja3BvaW50Py5jaGVja3BvaW50X2lkID8/IFtdKTtcblx0XHRcdGxhc3RJZCA9IG1heElkKGxhc3RJZCwgLi4uY2hpbGRyZW4pO1xuXHRcdFx0cXVldWUkMS5wdXNoKC4uLmNoaWxkcmVuKTtcblx0XHR9XG5cdFx0cmV0dXJuIHtcblx0XHRcdHBhcmVudElkLFxuXHRcdFx0bGFzdElkXG5cdFx0fTtcblx0fSkuc29ydCgoYSwgYikgPT4gYS5sYXN0SWQubG9jYWxlQ29tcGFyZShiLmxhc3RJZCkpLmF0KC0xKT8ucGFyZW50SWQgOiB2b2lkIDA7XG5cdGlmIChsYXN0T3JwaGFuZWROb2RlICE9IG51bGwpIGNoaWxkcmVuTWFwLiQgPSBjaGlsZHJlbk1hcFtsYXN0T3JwaGFuZWROb2RlXTtcblx0Y29uc3Qgcm9vdFNlcXVlbmNlID0ge1xuXHRcdHR5cGU6IFwic2VxdWVuY2VcIixcblx0XHRpdGVtczogW11cblx0fTtcblx0Y29uc3QgcXVldWUgPSBbe1xuXHRcdGlkOiBcIiRcIixcblx0XHRzZXF1ZW5jZTogcm9vdFNlcXVlbmNlLFxuXHRcdHBhdGg6IFtdXG5cdH1dO1xuXHRjb25zdCBwYXRocyA9IFtdO1xuXHRjb25zdCB2aXNpdGVkID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcblx0d2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcblx0XHRjb25zdCB0YXNrID0gcXVldWUuc2hpZnQoKTtcblx0XHRpZiAodmlzaXRlZC5oYXModGFzay5pZCkpIGNvbnRpbnVlO1xuXHRcdHZpc2l0ZWQuYWRkKHRhc2suaWQpO1xuXHRcdGNvbnN0IGNoaWxkcmVuID0gY2hpbGRyZW5NYXBbdGFzay5pZF07XG5cdFx0aWYgKGNoaWxkcmVuID09IG51bGwgfHwgY2hpbGRyZW4ubGVuZ3RoID09PSAwKSBjb250aW51ZTtcblx0XHRsZXQgZm9yaztcblx0XHRpZiAoY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuXHRcdFx0Zm9yayA9IHtcblx0XHRcdFx0dHlwZTogXCJmb3JrXCIsXG5cdFx0XHRcdGl0ZW1zOiBbXVxuXHRcdFx0fTtcblx0XHRcdHRhc2suc2VxdWVuY2UuaXRlbXMucHVzaChmb3JrKTtcblx0XHR9XG5cdFx0Zm9yIChjb25zdCB2YWx1ZSBvZiBjaGlsZHJlbikge1xuXHRcdFx0Y29uc3QgaWQgPSB2YWx1ZS5jaGVja3BvaW50Py5jaGVja3BvaW50X2lkO1xuXHRcdFx0aWYgKGlkID09IG51bGwpIGNvbnRpbnVlO1xuXHRcdFx0bGV0IHsgc2VxdWVuY2UgfSA9IHRhc2s7XG5cdFx0XHRsZXQgeyBwYXRoIH0gPSB0YXNrO1xuXHRcdFx0aWYgKGZvcmsgIT0gbnVsbCkge1xuXHRcdFx0XHRzZXF1ZW5jZSA9IHtcblx0XHRcdFx0XHR0eXBlOiBcInNlcXVlbmNlXCIsXG5cdFx0XHRcdFx0aXRlbXM6IFtdXG5cdFx0XHRcdH07XG5cdFx0XHRcdGZvcmsuaXRlbXMudW5zaGlmdChzZXF1ZW5jZSk7XG5cdFx0XHRcdHBhdGggPSBwYXRoLnNsaWNlKCk7XG5cdFx0XHRcdHBhdGgucHVzaChpZCk7XG5cdFx0XHRcdHBhdGhzLnB1c2gocGF0aCk7XG5cdFx0XHR9XG5cdFx0XHRzZXF1ZW5jZS5pdGVtcy5wdXNoKHtcblx0XHRcdFx0dHlwZTogXCJub2RlXCIsXG5cdFx0XHRcdHZhbHVlLFxuXHRcdFx0XHRwYXRoXG5cdFx0XHR9KTtcblx0XHRcdHF1ZXVlLnB1c2goe1xuXHRcdFx0XHRpZCxcblx0XHRcdFx0c2VxdWVuY2UsXG5cdFx0XHRcdHBhdGhcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4ge1xuXHRcdHJvb3RTZXF1ZW5jZSxcblx0XHRwYXRoc1xuXHR9O1xufVxuY29uc3QgUEFUSF9TRVAgPSBcIj5cIjtcbmNvbnN0IFJPT1RfSUQgPSBcIiRcIjtcbmZ1bmN0aW9uIGdldEJyYW5jaFZpZXcoc2VxdWVuY2UsIHBhdGhzLCBicmFuY2gpIHtcblx0Y29uc3QgcGF0aCA9IGJyYW5jaC5zcGxpdChQQVRIX1NFUCk7XG5cdGNvbnN0IHBhdGhNYXAgPSB7fTtcblx0Zm9yIChjb25zdCBwYXRoJDEgb2YgcGF0aHMpIHtcblx0XHRjb25zdCBwYXJlbnQgPSBwYXRoJDEuYXQoLTIpID8/IFJPT1RfSUQ7XG5cdFx0cGF0aE1hcFtwYXJlbnRdID8/PSBbXTtcblx0XHRwYXRoTWFwW3BhcmVudF0udW5zaGlmdChwYXRoJDEpO1xuXHR9XG5cdGNvbnN0IGhpc3RvcnkgPSBbXTtcblx0Y29uc3QgYnJhbmNoQnlDaGVja3BvaW50ID0ge307XG5cdGNvbnN0IGZvcmtTdGFjayA9IHBhdGguc2xpY2UoKTtcblx0Y29uc3QgcXVldWUgPSBbLi4uc2VxdWVuY2UuaXRlbXNdO1xuXHR3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xuXHRcdGNvbnN0IGl0ZW0gPSBxdWV1ZS5zaGlmdCgpO1xuXHRcdGlmIChpdGVtLnR5cGUgPT09IFwibm9kZVwiKSB7XG5cdFx0XHRoaXN0b3J5LnB1c2goaXRlbS52YWx1ZSk7XG5cdFx0XHRjb25zdCBjaGVja3BvaW50SWQgPSBpdGVtLnZhbHVlLmNoZWNrcG9pbnQ/LmNoZWNrcG9pbnRfaWQ7XG5cdFx0XHRpZiAoY2hlY2twb2ludElkID09IG51bGwpIGNvbnRpbnVlO1xuXHRcdFx0YnJhbmNoQnlDaGVja3BvaW50W2NoZWNrcG9pbnRJZF0gPSB7XG5cdFx0XHRcdGJyYW5jaDogaXRlbS5wYXRoLmpvaW4oUEFUSF9TRVApLFxuXHRcdFx0XHRicmFuY2hPcHRpb25zOiAoaXRlbS5wYXRoLmxlbmd0aCA+IDAgPyBwYXRoTWFwW2l0ZW0ucGF0aC5hdCgtMikgPz8gUk9PVF9JRF0gPz8gW10gOiBbXSkubWFwKChwKSA9PiBwLmpvaW4oUEFUSF9TRVApKVxuXHRcdFx0fTtcblx0XHR9XG5cdFx0aWYgKGl0ZW0udHlwZSA9PT0gXCJmb3JrXCIpIHtcblx0XHRcdGNvbnN0IGZvcmtJZCA9IGZvcmtTdGFjay5zaGlmdCgpO1xuXHRcdFx0Y29uc3QgaW5kZXggPSBmb3JrSWQgIT0gbnVsbCA/IGl0ZW0uaXRlbXMuZmluZEluZGV4KCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRjb25zdCBmaXJzdEl0ZW0gPSB2YWx1ZS5pdGVtcy5hdCgwKTtcblx0XHRcdFx0aWYgKCFmaXJzdEl0ZW0gfHwgZmlyc3RJdGVtLnR5cGUgIT09IFwibm9kZVwiKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdHJldHVybiBmaXJzdEl0ZW0udmFsdWUuY2hlY2twb2ludD8uY2hlY2twb2ludF9pZCA9PT0gZm9ya0lkO1xuXHRcdFx0fSkgOiAtMTtcblx0XHRcdGNvbnN0IG5leHRJdGVtcyA9IGl0ZW0uaXRlbXMuYXQoaW5kZXgpPy5pdGVtcyA/PyBbXTtcblx0XHRcdHF1ZXVlLnB1c2goLi4ubmV4dEl0ZW1zKTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHtcblx0XHRoaXN0b3J5LFxuXHRcdGJyYW5jaEJ5Q2hlY2twb2ludFxuXHR9O1xufVxuZnVuY3Rpb24gZ2V0QnJhbmNoQ29udGV4dChicmFuY2gsIGhpc3RvcnkpIHtcblx0Y29uc3QgeyByb290U2VxdWVuY2U6IGJyYW5jaFRyZWUsIHBhdGhzIH0gPSBnZXRCcmFuY2hTZXF1ZW5jZShoaXN0b3J5ID8/IFtdKTtcblx0Y29uc3QgeyBoaXN0b3J5OiBmbGF0SGlzdG9yeSwgYnJhbmNoQnlDaGVja3BvaW50IH0gPSBnZXRCcmFuY2hWaWV3KGJyYW5jaFRyZWUsIHBhdGhzLCBicmFuY2gpO1xuXHRyZXR1cm4ge1xuXHRcdGJyYW5jaFRyZWUsXG5cdFx0ZmxhdEhpc3RvcnksXG5cdFx0YnJhbmNoQnlDaGVja3BvaW50LFxuXHRcdHRocmVhZEhlYWQ6IGZsYXRIaXN0b3J5LmF0KC0xKVxuXHR9O1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldEJyYW5jaENvbnRleHQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJyYW5jaGluZy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/dist/ui/branching.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/dist/ui/errors.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/dist/ui/errors.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StreamError: () => (/* binding */ StreamError)\n/* harmony export */ });\n//#region src/ui/errors.ts\nvar StreamError = class extends Error {\n\tconstructor(data) {\n\t\tsuper(data.message);\n\t\tthis.name = data.name ?? data.error ?? \"StreamError\";\n\t}\n\tstatic isStructuredError(error) {\n\t\treturn typeof error === \"object\" && error != null && \"message\" in error;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=errors.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL2Rpc3QvdWkvZXJyb3JzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUN1QjtBQUN2QiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoLXNkay9kaXN0L3VpL2Vycm9ycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3VpL2Vycm9ycy50c1xudmFyIFN0cmVhbUVycm9yID0gY2xhc3MgZXh0ZW5kcyBFcnJvciB7XG5cdGNvbnN0cnVjdG9yKGRhdGEpIHtcblx0XHRzdXBlcihkYXRhLm1lc3NhZ2UpO1xuXHRcdHRoaXMubmFtZSA9IGRhdGEubmFtZSA/PyBkYXRhLmVycm9yID8/IFwiU3RyZWFtRXJyb3JcIjtcblx0fVxuXHRzdGF0aWMgaXNTdHJ1Y3R1cmVkRXJyb3IoZXJyb3IpIHtcblx0XHRyZXR1cm4gdHlwZW9mIGVycm9yID09PSBcIm9iamVjdFwiICYmIGVycm9yICE9IG51bGwgJiYgXCJtZXNzYWdlXCIgaW4gZXJyb3I7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgU3RyZWFtRXJyb3IgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVycm9ycy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/dist/ui/errors.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/dist/ui/manager.js":
/*!******************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/dist/ui/manager.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StreamManager: () => (/* binding */ StreamManager)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/ui/errors.js\");\n/* harmony import */ var _messages_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./messages.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/ui/messages.js\");\n\n\n\n//#region src/ui/manager.ts\n/**\n* Special ID used by LangGraph's messagesStateReducer to signal\n* that all messages should be removed from the state.\n*/\nconst REMOVE_ALL_MESSAGES = \"__remove_all__\";\nvar StreamManager = class {\n\tabortRef = new AbortController();\n\tmessages;\n\tlisteners = /* @__PURE__ */ new Set();\n\tthrottle;\n\tqueue = Promise.resolve();\n\tqueueSize = 0;\n\tstate;\n\tconstructor(messages, options) {\n\t\tthis.messages = messages;\n\t\tthis.state = {\n\t\t\tisLoading: false,\n\t\t\tvalues: null,\n\t\t\terror: void 0\n\t\t};\n\t\tthis.throttle = options.throttle;\n\t}\n\tsetState = (newState) => {\n\t\tthis.state = {\n\t\t\t...this.state,\n\t\t\t...newState\n\t\t};\n\t\tthis.notifyListeners();\n\t};\n\tnotifyListeners = () => {\n\t\tthis.listeners.forEach((listener) => listener());\n\t};\n\tsubscribe = (listener) => {\n\t\tif (this.throttle === false) {\n\t\t\tthis.listeners.add(listener);\n\t\t\treturn () => this.listeners.delete(listener);\n\t\t}\n\t\tconst timeoutMs = this.throttle === true ? 0 : this.throttle;\n\t\tlet timeoutId;\n\t\tconst throttledListener = () => {\n\t\t\tclearTimeout(timeoutId);\n\t\t\ttimeoutId = setTimeout(() => {\n\t\t\t\tclearTimeout(timeoutId);\n\t\t\t\tlistener();\n\t\t\t}, timeoutMs);\n\t\t};\n\t\tthis.listeners.add(throttledListener);\n\t\treturn () => {\n\t\t\tclearTimeout(timeoutId);\n\t\t\tthis.listeners.delete(throttledListener);\n\t\t};\n\t};\n\tgetSnapshot = () => this.state;\n\tget isLoading() {\n\t\treturn this.state.isLoading;\n\t}\n\tget values() {\n\t\treturn this.state.values?.[0] ?? null;\n\t}\n\tget error() {\n\t\treturn this.state.error;\n\t}\n\tsetStreamValues = (values, kind = \"stream\") => {\n\t\tif (typeof values === \"function\") {\n\t\t\tconst [prevValues, prevKind] = this.state.values ?? [null, \"stream\"];\n\t\t\tconst nextValues = values(prevValues, prevKind);\n\t\t\tthis.setState({ values: nextValues != null ? [nextValues, kind] : null });\n\t\t} else {\n\t\t\tconst nextValues = values != null ? [values, kind] : null;\n\t\t\tthis.setState({ values: nextValues });\n\t\t}\n\t};\n\tgetMutateFn = (kind, historyValues) => {\n\t\treturn (update) => {\n\t\t\tconst prev = {\n\t\t\t\t...historyValues,\n\t\t\t\t...(this.state.values ?? [null, \"stream\"])[0]\n\t\t\t};\n\t\t\tconst next = typeof update === \"function\" ? update(prev) : update;\n\t\t\tthis.setStreamValues({\n\t\t\t\t...prev,\n\t\t\t\t...next\n\t\t\t}, kind);\n\t\t};\n\t};\n\tmatchEventType = (expected, actual, _data) => {\n\t\treturn expected === actual || actual.startsWith(`${expected}|`);\n\t};\n\tenqueue = async (action, options) => {\n\t\ttry {\n\t\t\tthis.queueSize = Math.max(0, this.queueSize - 1);\n\t\t\tthis.setState({\n\t\t\t\tisLoading: true,\n\t\t\t\terror: void 0\n\t\t\t});\n\t\t\tthis.abortRef = new AbortController();\n\t\t\tconst run = await action(this.abortRef.signal);\n\t\t\tlet streamError;\n\t\t\tfor await (const { event, data } of run) {\n\t\t\t\tif (event === \"error\") {\n\t\t\t\t\tstreamError = new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StreamError(data);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tconst namespace = event.includes(\"|\") ? event.split(\"|\").slice(1) : void 0;\n\t\t\t\tconst mutate = this.getMutateFn(\"stream\", options.initialValues);\n\t\t\t\tif (event === \"metadata\") options.callbacks.onMetadataEvent?.(data);\n\t\t\t\tif (event === \"events\") options.callbacks.onLangChainEvent?.(data);\n\t\t\t\tif (this.matchEventType(\"updates\", event, data)) options.callbacks.onUpdateEvent?.(data, {\n\t\t\t\t\tnamespace,\n\t\t\t\t\tmutate\n\t\t\t\t});\n\t\t\t\tif (this.matchEventType(\"custom\", event, data)) options.callbacks.onCustomEvent?.(data, {\n\t\t\t\t\tnamespace,\n\t\t\t\t\tmutate\n\t\t\t\t});\n\t\t\t\tif (this.matchEventType(\"checkpoints\", event, data)) options.callbacks.onCheckpointEvent?.(data, { namespace });\n\t\t\t\tif (this.matchEventType(\"tasks\", event, data)) options.callbacks.onTaskEvent?.(data, { namespace });\n\t\t\t\tif (this.matchEventType(\"debug\", event, data)) options.callbacks.onDebugEvent?.(data, { namespace });\n\t\t\t\tif (event === \"values\") if (\"__interrupt__\" in data) this.setStreamValues((prev) => ({\n\t\t\t\t\t...prev,\n\t\t\t\t\t...data\n\t\t\t\t}));\n\t\t\t\telse this.setStreamValues(data);\n\t\t\t\tif (this.matchEventType(\"messages\", event, data)) {\n\t\t\t\t\tconst [serialized, metadata] = data;\n\t\t\t\t\tconst messageId = this.messages.add(serialized, metadata);\n\t\t\t\t\tif (!messageId) {\n\t\t\t\t\t\tconsole.warn(\"Failed to add message to manager, no message ID found\");\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tthis.setStreamValues((streamValues) => {\n\t\t\t\t\t\tconst values$1 = {\n\t\t\t\t\t\t\t...options.initialValues,\n\t\t\t\t\t\t\t...streamValues\n\t\t\t\t\t\t};\n\t\t\t\t\t\tlet messages = options.getMessages(values$1).slice();\n\t\t\t\t\t\tconst { chunk, index } = this.messages.get(messageId, messages.length) ?? {};\n\t\t\t\t\t\tif (!chunk || index == null) return values$1;\n\t\t\t\t\t\tif (chunk.getType() === \"remove\") if (chunk.id === REMOVE_ALL_MESSAGES) messages = [];\n\t\t\t\t\t\telse messages.splice(index, 1);\n\t\t\t\t\t\telse messages[index] = (0,_messages_js__WEBPACK_IMPORTED_MODULE_1__.toMessageDict)(chunk);\n\t\t\t\t\t\treturn options.setMessages(values$1, messages);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (streamError != null) throw streamError;\n\t\t\tconst values = await options.onSuccess?.();\n\t\t\tif (typeof values !== \"undefined\" && this.queueSize === 0) this.setStreamValues(values);\n\t\t} catch (error) {\n\t\t\tif (!(error instanceof Error && (error.name === \"AbortError\" || error.name === \"TimeoutError\"))) {\n\t\t\t\tconsole.error(error);\n\t\t\t\tthis.setState({ error });\n\t\t\t\tawait options.onError?.(error);\n\t\t\t}\n\t\t} finally {\n\t\t\tthis.setState({ isLoading: false });\n\t\t\tthis.abortRef = new AbortController();\n\t\t\toptions.onFinish?.();\n\t\t}\n\t};\n\tstart = async (action, options) => {\n\t\tthis.queueSize += 1;\n\t\tthis.queue = this.queue.then(() => this.enqueue(action, options));\n\t};\n\tstop = async (historyValues, options) => {\n\t\tthis.abortRef.abort();\n\t\tthis.abortRef = new AbortController();\n\t\toptions.onStop?.({ mutate: this.getMutateFn(\"stop\", historyValues) });\n\t};\n\tclear = () => {\n\t\tthis.abortRef.abort();\n\t\tthis.abortRef = new AbortController();\n\t\tthis.setState({\n\t\t\terror: void 0,\n\t\t\tvalues: null,\n\t\t\tisLoading: false\n\t\t});\n\t\tthis.messages.clear();\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=manager.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL2Rpc3QvdWkvbWFuYWdlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMEM7QUFDSTs7QUFFOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix3REFBd0Q7QUFDM0UsSUFBSTtBQUNKO0FBQ0EsbUJBQW1CLG9CQUFvQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EscURBQXFELFNBQVM7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGNBQWM7QUFDcEM7QUFDQSx1QkFBdUIsbURBQVc7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCx1R0FBdUcsV0FBVztBQUNsSCwyRkFBMkYsV0FBVztBQUN0Ryw0RkFBNEYsV0FBVztBQUN2RztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsZUFBZTtBQUM3QjtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsMkRBQWE7QUFDMUM7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0Esb0JBQW9CLE9BQU87QUFDM0I7QUFDQTtBQUNBLElBQUk7QUFDSixtQkFBbUIsa0JBQWtCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsaURBQWlEO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ3lCO0FBQ3pCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL2Rpc3QvdWkvbWFuYWdlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdHJlYW1FcnJvciB9IGZyb20gXCIuL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgdG9NZXNzYWdlRGljdCB9IGZyb20gXCIuL21lc3NhZ2VzLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdWkvbWFuYWdlci50c1xuLyoqXG4qIFNwZWNpYWwgSUQgdXNlZCBieSBMYW5nR3JhcGgncyBtZXNzYWdlc1N0YXRlUmVkdWNlciB0byBzaWduYWxcbiogdGhhdCBhbGwgbWVzc2FnZXMgc2hvdWxkIGJlIHJlbW92ZWQgZnJvbSB0aGUgc3RhdGUuXG4qL1xuY29uc3QgUkVNT1ZFX0FMTF9NRVNTQUdFUyA9IFwiX19yZW1vdmVfYWxsX19cIjtcbnZhciBTdHJlYW1NYW5hZ2VyID0gY2xhc3Mge1xuXHRhYm9ydFJlZiA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcblx0bWVzc2FnZXM7XG5cdGxpc3RlbmVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG5cdHRocm90dGxlO1xuXHRxdWV1ZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuXHRxdWV1ZVNpemUgPSAwO1xuXHRzdGF0ZTtcblx0Y29uc3RydWN0b3IobWVzc2FnZXMsIG9wdGlvbnMpIHtcblx0XHR0aGlzLm1lc3NhZ2VzID0gbWVzc2FnZXM7XG5cdFx0dGhpcy5zdGF0ZSA9IHtcblx0XHRcdGlzTG9hZGluZzogZmFsc2UsXG5cdFx0XHR2YWx1ZXM6IG51bGwsXG5cdFx0XHRlcnJvcjogdm9pZCAwXG5cdFx0fTtcblx0XHR0aGlzLnRocm90dGxlID0gb3B0aW9ucy50aHJvdHRsZTtcblx0fVxuXHRzZXRTdGF0ZSA9IChuZXdTdGF0ZSkgPT4ge1xuXHRcdHRoaXMuc3RhdGUgPSB7XG5cdFx0XHQuLi50aGlzLnN0YXRlLFxuXHRcdFx0Li4ubmV3U3RhdGVcblx0XHR9O1xuXHRcdHRoaXMubm90aWZ5TGlzdGVuZXJzKCk7XG5cdH07XG5cdG5vdGlmeUxpc3RlbmVycyA9ICgpID0+IHtcblx0XHR0aGlzLmxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIoKSk7XG5cdH07XG5cdHN1YnNjcmliZSA9IChsaXN0ZW5lcikgPT4ge1xuXHRcdGlmICh0aGlzLnRocm90dGxlID09PSBmYWxzZSkge1xuXHRcdFx0dGhpcy5saXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTtcblx0XHRcdHJldHVybiAoKSA9PiB0aGlzLmxpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xuXHRcdH1cblx0XHRjb25zdCB0aW1lb3V0TXMgPSB0aGlzLnRocm90dGxlID09PSB0cnVlID8gMCA6IHRoaXMudGhyb3R0bGU7XG5cdFx0bGV0IHRpbWVvdXRJZDtcblx0XHRjb25zdCB0aHJvdHRsZWRMaXN0ZW5lciA9ICgpID0+IHtcblx0XHRcdGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuXHRcdFx0dGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuXHRcdFx0XHRsaXN0ZW5lcigpO1xuXHRcdFx0fSwgdGltZW91dE1zKTtcblx0XHR9O1xuXHRcdHRoaXMubGlzdGVuZXJzLmFkZCh0aHJvdHRsZWRMaXN0ZW5lcik7XG5cdFx0cmV0dXJuICgpID0+IHtcblx0XHRcdGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuXHRcdFx0dGhpcy5saXN0ZW5lcnMuZGVsZXRlKHRocm90dGxlZExpc3RlbmVyKTtcblx0XHR9O1xuXHR9O1xuXHRnZXRTbmFwc2hvdCA9ICgpID0+IHRoaXMuc3RhdGU7XG5cdGdldCBpc0xvYWRpbmcoKSB7XG5cdFx0cmV0dXJuIHRoaXMuc3RhdGUuaXNMb2FkaW5nO1xuXHR9XG5cdGdldCB2YWx1ZXMoKSB7XG5cdFx0cmV0dXJuIHRoaXMuc3RhdGUudmFsdWVzPy5bMF0gPz8gbnVsbDtcblx0fVxuXHRnZXQgZXJyb3IoKSB7XG5cdFx0cmV0dXJuIHRoaXMuc3RhdGUuZXJyb3I7XG5cdH1cblx0c2V0U3RyZWFtVmFsdWVzID0gKHZhbHVlcywga2luZCA9IFwic3RyZWFtXCIpID0+IHtcblx0XHRpZiAodHlwZW9mIHZhbHVlcyA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRjb25zdCBbcHJldlZhbHVlcywgcHJldktpbmRdID0gdGhpcy5zdGF0ZS52YWx1ZXMgPz8gW251bGwsIFwic3RyZWFtXCJdO1xuXHRcdFx0Y29uc3QgbmV4dFZhbHVlcyA9IHZhbHVlcyhwcmV2VmFsdWVzLCBwcmV2S2luZCk7XG5cdFx0XHR0aGlzLnNldFN0YXRlKHsgdmFsdWVzOiBuZXh0VmFsdWVzICE9IG51bGwgPyBbbmV4dFZhbHVlcywga2luZF0gOiBudWxsIH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCBuZXh0VmFsdWVzID0gdmFsdWVzICE9IG51bGwgPyBbdmFsdWVzLCBraW5kXSA6IG51bGw7XG5cdFx0XHR0aGlzLnNldFN0YXRlKHsgdmFsdWVzOiBuZXh0VmFsdWVzIH0pO1xuXHRcdH1cblx0fTtcblx0Z2V0TXV0YXRlRm4gPSAoa2luZCwgaGlzdG9yeVZhbHVlcykgPT4ge1xuXHRcdHJldHVybiAodXBkYXRlKSA9PiB7XG5cdFx0XHRjb25zdCBwcmV2ID0ge1xuXHRcdFx0XHQuLi5oaXN0b3J5VmFsdWVzLFxuXHRcdFx0XHQuLi4odGhpcy5zdGF0ZS52YWx1ZXMgPz8gW251bGwsIFwic3RyZWFtXCJdKVswXVxuXHRcdFx0fTtcblx0XHRcdGNvbnN0IG5leHQgPSB0eXBlb2YgdXBkYXRlID09PSBcImZ1bmN0aW9uXCIgPyB1cGRhdGUocHJldikgOiB1cGRhdGU7XG5cdFx0XHR0aGlzLnNldFN0cmVhbVZhbHVlcyh7XG5cdFx0XHRcdC4uLnByZXYsXG5cdFx0XHRcdC4uLm5leHRcblx0XHRcdH0sIGtpbmQpO1xuXHRcdH07XG5cdH07XG5cdG1hdGNoRXZlbnRUeXBlID0gKGV4cGVjdGVkLCBhY3R1YWwsIF9kYXRhKSA9PiB7XG5cdFx0cmV0dXJuIGV4cGVjdGVkID09PSBhY3R1YWwgfHwgYWN0dWFsLnN0YXJ0c1dpdGgoYCR7ZXhwZWN0ZWR9fGApO1xuXHR9O1xuXHRlbnF1ZXVlID0gYXN5bmMgKGFjdGlvbiwgb3B0aW9ucykgPT4ge1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLnF1ZXVlU2l6ZSA9IE1hdGgubWF4KDAsIHRoaXMucXVldWVTaXplIC0gMSk7XG5cdFx0XHR0aGlzLnNldFN0YXRlKHtcblx0XHRcdFx0aXNMb2FkaW5nOiB0cnVlLFxuXHRcdFx0XHRlcnJvcjogdm9pZCAwXG5cdFx0XHR9KTtcblx0XHRcdHRoaXMuYWJvcnRSZWYgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cdFx0XHRjb25zdCBydW4gPSBhd2FpdCBhY3Rpb24odGhpcy5hYm9ydFJlZi5zaWduYWwpO1xuXHRcdFx0bGV0IHN0cmVhbUVycm9yO1xuXHRcdFx0Zm9yIGF3YWl0IChjb25zdCB7IGV2ZW50LCBkYXRhIH0gb2YgcnVuKSB7XG5cdFx0XHRcdGlmIChldmVudCA9PT0gXCJlcnJvclwiKSB7XG5cdFx0XHRcdFx0c3RyZWFtRXJyb3IgPSBuZXcgU3RyZWFtRXJyb3IoZGF0YSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgbmFtZXNwYWNlID0gZXZlbnQuaW5jbHVkZXMoXCJ8XCIpID8gZXZlbnQuc3BsaXQoXCJ8XCIpLnNsaWNlKDEpIDogdm9pZCAwO1xuXHRcdFx0XHRjb25zdCBtdXRhdGUgPSB0aGlzLmdldE11dGF0ZUZuKFwic3RyZWFtXCIsIG9wdGlvbnMuaW5pdGlhbFZhbHVlcyk7XG5cdFx0XHRcdGlmIChldmVudCA9PT0gXCJtZXRhZGF0YVwiKSBvcHRpb25zLmNhbGxiYWNrcy5vbk1ldGFkYXRhRXZlbnQ/LihkYXRhKTtcblx0XHRcdFx0aWYgKGV2ZW50ID09PSBcImV2ZW50c1wiKSBvcHRpb25zLmNhbGxiYWNrcy5vbkxhbmdDaGFpbkV2ZW50Py4oZGF0YSk7XG5cdFx0XHRcdGlmICh0aGlzLm1hdGNoRXZlbnRUeXBlKFwidXBkYXRlc1wiLCBldmVudCwgZGF0YSkpIG9wdGlvbnMuY2FsbGJhY2tzLm9uVXBkYXRlRXZlbnQ/LihkYXRhLCB7XG5cdFx0XHRcdFx0bmFtZXNwYWNlLFxuXHRcdFx0XHRcdG11dGF0ZVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKHRoaXMubWF0Y2hFdmVudFR5cGUoXCJjdXN0b21cIiwgZXZlbnQsIGRhdGEpKSBvcHRpb25zLmNhbGxiYWNrcy5vbkN1c3RvbUV2ZW50Py4oZGF0YSwge1xuXHRcdFx0XHRcdG5hbWVzcGFjZSxcblx0XHRcdFx0XHRtdXRhdGVcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmICh0aGlzLm1hdGNoRXZlbnRUeXBlKFwiY2hlY2twb2ludHNcIiwgZXZlbnQsIGRhdGEpKSBvcHRpb25zLmNhbGxiYWNrcy5vbkNoZWNrcG9pbnRFdmVudD8uKGRhdGEsIHsgbmFtZXNwYWNlIH0pO1xuXHRcdFx0XHRpZiAodGhpcy5tYXRjaEV2ZW50VHlwZShcInRhc2tzXCIsIGV2ZW50LCBkYXRhKSkgb3B0aW9ucy5jYWxsYmFja3Mub25UYXNrRXZlbnQ/LihkYXRhLCB7IG5hbWVzcGFjZSB9KTtcblx0XHRcdFx0aWYgKHRoaXMubWF0Y2hFdmVudFR5cGUoXCJkZWJ1Z1wiLCBldmVudCwgZGF0YSkpIG9wdGlvbnMuY2FsbGJhY2tzLm9uRGVidWdFdmVudD8uKGRhdGEsIHsgbmFtZXNwYWNlIH0pO1xuXHRcdFx0XHRpZiAoZXZlbnQgPT09IFwidmFsdWVzXCIpIGlmIChcIl9faW50ZXJydXB0X19cIiBpbiBkYXRhKSB0aGlzLnNldFN0cmVhbVZhbHVlcygocHJldikgPT4gKHtcblx0XHRcdFx0XHQuLi5wcmV2LFxuXHRcdFx0XHRcdC4uLmRhdGFcblx0XHRcdFx0fSkpO1xuXHRcdFx0XHRlbHNlIHRoaXMuc2V0U3RyZWFtVmFsdWVzKGRhdGEpO1xuXHRcdFx0XHRpZiAodGhpcy5tYXRjaEV2ZW50VHlwZShcIm1lc3NhZ2VzXCIsIGV2ZW50LCBkYXRhKSkge1xuXHRcdFx0XHRcdGNvbnN0IFtzZXJpYWxpemVkLCBtZXRhZGF0YV0gPSBkYXRhO1xuXHRcdFx0XHRcdGNvbnN0IG1lc3NhZ2VJZCA9IHRoaXMubWVzc2FnZXMuYWRkKHNlcmlhbGl6ZWQsIG1ldGFkYXRhKTtcblx0XHRcdFx0XHRpZiAoIW1lc3NhZ2VJZCkge1xuXHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGFkZCBtZXNzYWdlIHRvIG1hbmFnZXIsIG5vIG1lc3NhZ2UgSUQgZm91bmRcIik7XG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGhpcy5zZXRTdHJlYW1WYWx1ZXMoKHN0cmVhbVZhbHVlcykgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgdmFsdWVzJDEgPSB7XG5cdFx0XHRcdFx0XHRcdC4uLm9wdGlvbnMuaW5pdGlhbFZhbHVlcyxcblx0XHRcdFx0XHRcdFx0Li4uc3RyZWFtVmFsdWVzXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0bGV0IG1lc3NhZ2VzID0gb3B0aW9ucy5nZXRNZXNzYWdlcyh2YWx1ZXMkMSkuc2xpY2UoKTtcblx0XHRcdFx0XHRcdGNvbnN0IHsgY2h1bmssIGluZGV4IH0gPSB0aGlzLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQsIG1lc3NhZ2VzLmxlbmd0aCkgPz8ge307XG5cdFx0XHRcdFx0XHRpZiAoIWNodW5rIHx8IGluZGV4ID09IG51bGwpIHJldHVybiB2YWx1ZXMkMTtcblx0XHRcdFx0XHRcdGlmIChjaHVuay5nZXRUeXBlKCkgPT09IFwicmVtb3ZlXCIpIGlmIChjaHVuay5pZCA9PT0gUkVNT1ZFX0FMTF9NRVNTQUdFUykgbWVzc2FnZXMgPSBbXTtcblx0XHRcdFx0XHRcdGVsc2UgbWVzc2FnZXMuc3BsaWNlKGluZGV4LCAxKTtcblx0XHRcdFx0XHRcdGVsc2UgbWVzc2FnZXNbaW5kZXhdID0gdG9NZXNzYWdlRGljdChjaHVuayk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gb3B0aW9ucy5zZXRNZXNzYWdlcyh2YWx1ZXMkMSwgbWVzc2FnZXMpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAoc3RyZWFtRXJyb3IgIT0gbnVsbCkgdGhyb3cgc3RyZWFtRXJyb3I7XG5cdFx0XHRjb25zdCB2YWx1ZXMgPSBhd2FpdCBvcHRpb25zLm9uU3VjY2Vzcz8uKCk7XG5cdFx0XHRpZiAodHlwZW9mIHZhbHVlcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0aGlzLnF1ZXVlU2l6ZSA9PT0gMCkgdGhpcy5zZXRTdHJlYW1WYWx1ZXModmFsdWVzKTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0aWYgKCEoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiAoZXJyb3IubmFtZSA9PT0gXCJBYm9ydEVycm9yXCIgfHwgZXJyb3IubmFtZSA9PT0gXCJUaW1lb3V0RXJyb3JcIikpKSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXHRcdFx0XHR0aGlzLnNldFN0YXRlKHsgZXJyb3IgfSk7XG5cdFx0XHRcdGF3YWl0IG9wdGlvbnMub25FcnJvcj8uKGVycm9yKTtcblx0XHRcdH1cblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0dGhpcy5zZXRTdGF0ZSh7IGlzTG9hZGluZzogZmFsc2UgfSk7XG5cdFx0XHR0aGlzLmFib3J0UmVmID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuXHRcdFx0b3B0aW9ucy5vbkZpbmlzaD8uKCk7XG5cdFx0fVxuXHR9O1xuXHRzdGFydCA9IGFzeW5jIChhY3Rpb24sIG9wdGlvbnMpID0+IHtcblx0XHR0aGlzLnF1ZXVlU2l6ZSArPSAxO1xuXHRcdHRoaXMucXVldWUgPSB0aGlzLnF1ZXVlLnRoZW4oKCkgPT4gdGhpcy5lbnF1ZXVlKGFjdGlvbiwgb3B0aW9ucykpO1xuXHR9O1xuXHRzdG9wID0gYXN5bmMgKGhpc3RvcnlWYWx1ZXMsIG9wdGlvbnMpID0+IHtcblx0XHR0aGlzLmFib3J0UmVmLmFib3J0KCk7XG5cdFx0dGhpcy5hYm9ydFJlZiA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcblx0XHRvcHRpb25zLm9uU3RvcD8uKHsgbXV0YXRlOiB0aGlzLmdldE11dGF0ZUZuKFwic3RvcFwiLCBoaXN0b3J5VmFsdWVzKSB9KTtcblx0fTtcblx0Y2xlYXIgPSAoKSA9PiB7XG5cdFx0dGhpcy5hYm9ydFJlZi5hYm9ydCgpO1xuXHRcdHRoaXMuYWJvcnRSZWYgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cdFx0dGhpcy5zZXRTdGF0ZSh7XG5cdFx0XHRlcnJvcjogdm9pZCAwLFxuXHRcdFx0dmFsdWVzOiBudWxsLFxuXHRcdFx0aXNMb2FkaW5nOiBmYWxzZVxuXHRcdH0pO1xuXHRcdHRoaXMubWVzc2FnZXMuY2xlYXIoKTtcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgU3RyZWFtTWFuYWdlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFuYWdlci5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/dist/ui/manager.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/dist/ui/messages.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/dist/ui/messages.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MessageTupleManager: () => (/* binding */ MessageTupleManager),\n/* harmony export */   toMessageDict: () => (/* binding */ toMessageDict)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/messages */ \"(ssr)/./node_modules/@langchain/core/dist/messages/index.js\");\n\n\n//#region src/ui/messages.ts\nfunction tryConvertToChunk(message) {\n\ttry {\n\t\tif ((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.isBaseMessageChunk)(message)) return message;\n\t\treturn (0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.convertToChunk)(message);\n\t} catch {\n\t\treturn null;\n\t}\n}\nfunction tryCoerceMessageLikeToMessage(message) {\n\tif (message.type === \"human\" || message.type === \"user\") return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.HumanMessageChunk(message);\n\tif (message.type === \"ai\" || message.type === \"assistant\") return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk(message);\n\tif (message.type === \"system\") return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.SystemMessageChunk(message);\n\tif (message.type === \"tool\" && \"tool_call_id\" in message) return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.ToolMessageChunk({\n\t\t...message,\n\t\ttool_call_id: message.tool_call_id\n\t});\n\tif (message.type === \"remove\" && message.id != null) return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.RemoveMessage({\n\t\t...message,\n\t\tid: message.id\n\t});\n\treturn (0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage)(message);\n}\nvar MessageTupleManager = class {\n\tchunks = {};\n\tconstructor() {\n\t\tthis.chunks = {};\n\t}\n\tadd(serialized, metadata) {\n\t\tif (serialized.type.endsWith(\"MessageChunk\")) serialized.type = serialized.type.slice(0, -12).toLowerCase();\n\t\tconst message = tryCoerceMessageLikeToMessage(serialized);\n\t\tconst chunk = tryConvertToChunk(message);\n\t\tconst { id } = chunk ?? message;\n\t\tif (!id) {\n\t\t\tconsole.warn(\"No message ID found for chunk, ignoring in state\", serialized);\n\t\t\treturn null;\n\t\t}\n\t\tthis.chunks[id] ??= {};\n\t\tthis.chunks[id].metadata = metadata ?? this.chunks[id].metadata;\n\t\tif (chunk) {\n\t\t\tconst prev = this.chunks[id].chunk;\n\t\t\tthis.chunks[id].chunk = ((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.isBaseMessageChunk)(prev) ? prev : null)?.concat(chunk) ?? chunk;\n\t\t} else this.chunks[id].chunk = message;\n\t\treturn id;\n\t}\n\tclear() {\n\t\tthis.chunks = {};\n\t}\n\tget(id, defaultIndex) {\n\t\tif (id == null) return null;\n\t\tif (this.chunks[id] == null) return null;\n\t\tif (defaultIndex != null) this.chunks[id].index ??= defaultIndex;\n\t\treturn this.chunks[id];\n\t}\n};\nconst toMessageDict = (chunk) => {\n\tconst { type, data } = chunk.toDict();\n\treturn {\n\t\t...data,\n\t\ttype\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=messages.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL2Rpc3QvdWkvbWVzc2FnZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWtNOztBQUVsTTtBQUNBO0FBQ0E7QUFDQSxNQUFNLDRFQUFrQjtBQUN4QixTQUFTLHdFQUFjO0FBQ3ZCLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSx1RUFBaUI7QUFDdEYsdUVBQXVFLG9FQUFjO0FBQ3JGLDJDQUEyQyx3RUFBa0I7QUFDN0Qsc0VBQXNFLHNFQUFnQjtBQUN0RjtBQUNBO0FBQ0EsRUFBRTtBQUNGLGlFQUFpRSxtRUFBYTtBQUM5RTtBQUNBO0FBQ0EsRUFBRTtBQUNGLFFBQVEsb0ZBQTBCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxLQUFLO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qiw0RUFBa0I7QUFDOUMsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxhQUFhO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDOEM7QUFDOUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC1zZGsvZGlzdC91aS9tZXNzYWdlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBSU1lc3NhZ2VDaHVuaywgSHVtYW5NZXNzYWdlQ2h1bmssIFJlbW92ZU1lc3NhZ2UsIFN5c3RlbU1lc3NhZ2VDaHVuaywgVG9vbE1lc3NhZ2VDaHVuaywgY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UsIGNvbnZlcnRUb0NodW5rLCBpc0Jhc2VNZXNzYWdlQ2h1bmsgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL21lc3NhZ2VzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdWkvbWVzc2FnZXMudHNcbmZ1bmN0aW9uIHRyeUNvbnZlcnRUb0NodW5rKG1lc3NhZ2UpIHtcblx0dHJ5IHtcblx0XHRpZiAoaXNCYXNlTWVzc2FnZUNodW5rKG1lc3NhZ2UpKSByZXR1cm4gbWVzc2FnZTtcblx0XHRyZXR1cm4gY29udmVydFRvQ2h1bmsobWVzc2FnZSk7XG5cdH0gY2F0Y2gge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG59XG5mdW5jdGlvbiB0cnlDb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZShtZXNzYWdlKSB7XG5cdGlmIChtZXNzYWdlLnR5cGUgPT09IFwiaHVtYW5cIiB8fCBtZXNzYWdlLnR5cGUgPT09IFwidXNlclwiKSByZXR1cm4gbmV3IEh1bWFuTWVzc2FnZUNodW5rKG1lc3NhZ2UpO1xuXHRpZiAobWVzc2FnZS50eXBlID09PSBcImFpXCIgfHwgbWVzc2FnZS50eXBlID09PSBcImFzc2lzdGFudFwiKSByZXR1cm4gbmV3IEFJTWVzc2FnZUNodW5rKG1lc3NhZ2UpO1xuXHRpZiAobWVzc2FnZS50eXBlID09PSBcInN5c3RlbVwiKSByZXR1cm4gbmV3IFN5c3RlbU1lc3NhZ2VDaHVuayhtZXNzYWdlKTtcblx0aWYgKG1lc3NhZ2UudHlwZSA9PT0gXCJ0b29sXCIgJiYgXCJ0b29sX2NhbGxfaWRcIiBpbiBtZXNzYWdlKSByZXR1cm4gbmV3IFRvb2xNZXNzYWdlQ2h1bmsoe1xuXHRcdC4uLm1lc3NhZ2UsXG5cdFx0dG9vbF9jYWxsX2lkOiBtZXNzYWdlLnRvb2xfY2FsbF9pZFxuXHR9KTtcblx0aWYgKG1lc3NhZ2UudHlwZSA9PT0gXCJyZW1vdmVcIiAmJiBtZXNzYWdlLmlkICE9IG51bGwpIHJldHVybiBuZXcgUmVtb3ZlTWVzc2FnZSh7XG5cdFx0Li4ubWVzc2FnZSxcblx0XHRpZDogbWVzc2FnZS5pZFxuXHR9KTtcblx0cmV0dXJuIGNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlKG1lc3NhZ2UpO1xufVxudmFyIE1lc3NhZ2VUdXBsZU1hbmFnZXIgPSBjbGFzcyB7XG5cdGNodW5rcyA9IHt9O1xuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHR0aGlzLmNodW5rcyA9IHt9O1xuXHR9XG5cdGFkZChzZXJpYWxpemVkLCBtZXRhZGF0YSkge1xuXHRcdGlmIChzZXJpYWxpemVkLnR5cGUuZW5kc1dpdGgoXCJNZXNzYWdlQ2h1bmtcIikpIHNlcmlhbGl6ZWQudHlwZSA9IHNlcmlhbGl6ZWQudHlwZS5zbGljZSgwLCAtMTIpLnRvTG93ZXJDYXNlKCk7XG5cdFx0Y29uc3QgbWVzc2FnZSA9IHRyeUNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlKHNlcmlhbGl6ZWQpO1xuXHRcdGNvbnN0IGNodW5rID0gdHJ5Q29udmVydFRvQ2h1bmsobWVzc2FnZSk7XG5cdFx0Y29uc3QgeyBpZCB9ID0gY2h1bmsgPz8gbWVzc2FnZTtcblx0XHRpZiAoIWlkKSB7XG5cdFx0XHRjb25zb2xlLndhcm4oXCJObyBtZXNzYWdlIElEIGZvdW5kIGZvciBjaHVuaywgaWdub3JpbmcgaW4gc3RhdGVcIiwgc2VyaWFsaXplZCk7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdFx0dGhpcy5jaHVua3NbaWRdID8/PSB7fTtcblx0XHR0aGlzLmNodW5rc1tpZF0ubWV0YWRhdGEgPSBtZXRhZGF0YSA/PyB0aGlzLmNodW5rc1tpZF0ubWV0YWRhdGE7XG5cdFx0aWYgKGNodW5rKSB7XG5cdFx0XHRjb25zdCBwcmV2ID0gdGhpcy5jaHVua3NbaWRdLmNodW5rO1xuXHRcdFx0dGhpcy5jaHVua3NbaWRdLmNodW5rID0gKGlzQmFzZU1lc3NhZ2VDaHVuayhwcmV2KSA/IHByZXYgOiBudWxsKT8uY29uY2F0KGNodW5rKSA/PyBjaHVuaztcblx0XHR9IGVsc2UgdGhpcy5jaHVua3NbaWRdLmNodW5rID0gbWVzc2FnZTtcblx0XHRyZXR1cm4gaWQ7XG5cdH1cblx0Y2xlYXIoKSB7XG5cdFx0dGhpcy5jaHVua3MgPSB7fTtcblx0fVxuXHRnZXQoaWQsIGRlZmF1bHRJbmRleCkge1xuXHRcdGlmIChpZCA9PSBudWxsKSByZXR1cm4gbnVsbDtcblx0XHRpZiAodGhpcy5jaHVua3NbaWRdID09IG51bGwpIHJldHVybiBudWxsO1xuXHRcdGlmIChkZWZhdWx0SW5kZXggIT0gbnVsbCkgdGhpcy5jaHVua3NbaWRdLmluZGV4ID8/PSBkZWZhdWx0SW5kZXg7XG5cdFx0cmV0dXJuIHRoaXMuY2h1bmtzW2lkXTtcblx0fVxufTtcbmNvbnN0IHRvTWVzc2FnZURpY3QgPSAoY2h1bmspID0+IHtcblx0Y29uc3QgeyB0eXBlLCBkYXRhIH0gPSBjaHVuay50b0RpY3QoKTtcblx0cmV0dXJuIHtcblx0XHQuLi5kYXRhLFxuXHRcdHR5cGVcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgTWVzc2FnZVR1cGxlTWFuYWdlciwgdG9NZXNzYWdlRGljdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVzc2FnZXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/dist/ui/messages.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/dist/ui/utils.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/dist/ui/utils.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   findLast: () => (/* binding */ findLast),\n/* harmony export */   unique: () => (/* binding */ unique)\n/* harmony export */ });\n//#region src/ui/utils.ts\nfunction unique(array) {\n\treturn [...new Set(array)];\n}\nfunction findLast(array, predicate) {\n\tfor (let i = array.length - 1; i >= 0; i -= 1) if (predicate(array[i])) return array[i];\n}\n\n//#endregion\n\n//# sourceMappingURL=utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL2Rpc3QvdWkvdXRpbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLFFBQVE7QUFDeEM7O0FBRUE7QUFDNEI7QUFDNUIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC1zZGsvZGlzdC91aS91dGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3VpL3V0aWxzLnRzXG5mdW5jdGlvbiB1bmlxdWUoYXJyYXkpIHtcblx0cmV0dXJuIFsuLi5uZXcgU2V0KGFycmF5KV07XG59XG5mdW5jdGlvbiBmaW5kTGFzdChhcnJheSwgcHJlZGljYXRlKSB7XG5cdGZvciAobGV0IGkgPSBhcnJheS5sZW5ndGggLSAxOyBpID49IDA7IGkgLT0gMSkgaWYgKHByZWRpY2F0ZShhcnJheVtpXSkpIHJldHVybiBhcnJheVtpXTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBmaW5kTGFzdCwgdW5pcXVlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/dist/ui/utils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/dist/utils/async_caller.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/dist/utils/async_caller.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncCaller: () => (/* binding */ AsyncCaller)\n/* harmony export */ });\n/* harmony import */ var _singletons_fetch_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../singletons/fetch.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/singletons/fetch.js\");\n/* harmony import */ var p_retry__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! p-retry */ \"(ssr)/./node_modules/p-retry/index.js\");\n/* harmony import */ var p_queue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! p-queue */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/node_modules/p-queue/dist/index.js\");\n\n\n\n\n//#region src/utils/async_caller.ts\nconst STATUS_NO_RETRY = [\n\t400,\n\t401,\n\t402,\n\t403,\n\t404,\n\t405,\n\t406,\n\t407,\n\t408,\n\t409,\n\t422\n];\n/**\n* Do not rely on globalThis.Response, rather just\n* do duck typing\n*/\nfunction isResponse(x) {\n\tif (x == null || typeof x !== \"object\") return false;\n\treturn \"status\" in x && \"statusText\" in x && \"text\" in x;\n}\n/**\n* Utility error to properly handle failed requests\n*/\nvar HTTPError = class HTTPError extends Error {\n\tstatus;\n\ttext;\n\tresponse;\n\tconstructor(status, message, response) {\n\t\tsuper(`HTTP ${status}: ${message}`);\n\t\tthis.status = status;\n\t\tthis.text = message;\n\t\tthis.response = response;\n\t}\n\tstatic async fromResponse(response, options) {\n\t\ttry {\n\t\t\treturn new HTTPError(response.status, await response.text(), options?.includeResponse ? response : void 0);\n\t\t} catch {\n\t\t\treturn new HTTPError(response.status, response.statusText, options?.includeResponse ? response : void 0);\n\t\t}\n\t}\n};\n/**\n* A class that can be used to make async calls with concurrency and retry logic.\n*\n* This is useful for making calls to any kind of \"expensive\" external resource,\n* be it because it's rate-limited, subject to network issues, etc.\n*\n* Concurrent calls are limited by the `maxConcurrency` parameter, which defaults\n* to `Infinity`. This means that by default, all calls will be made in parallel.\n*\n* Retries are limited by the `maxRetries` parameter, which defaults to 5. This\n* means that by default, each call will be retried up to 5 times, with an\n* exponential backoff between each attempt.\n*/\nvar AsyncCaller = class {\n\tmaxConcurrency;\n\tmaxRetries;\n\tqueue;\n\tonFailedResponseHook;\n\tcustomFetch;\n\tconstructor(params) {\n\t\tthis.maxConcurrency = params.maxConcurrency ?? Infinity;\n\t\tthis.maxRetries = params.maxRetries ?? 4;\n\t\tif (\"default\" in p_queue__WEBPACK_IMPORTED_MODULE_1__[\"default\"]) this.queue = new p_queue__WEBPACK_IMPORTED_MODULE_1__[\"default\"][\"default\"]({ concurrency: this.maxConcurrency });\n\t\telse this.queue = new p_queue__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({ concurrency: this.maxConcurrency });\n\t\tthis.onFailedResponseHook = params?.onFailedResponseHook;\n\t\tthis.customFetch = params.fetch;\n\t}\n\tcall(callable, ...args) {\n\t\tconst { onFailedResponseHook } = this;\n\t\treturn this.queue.add(() => (0,p_retry__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(() => callable(...args).catch(async (error) => {\n\t\t\tif (error instanceof Error) throw error;\n\t\t\telse if (isResponse(error)) throw await HTTPError.fromResponse(error, { includeResponse: !!onFailedResponseHook });\n\t\t\telse throw new Error(error);\n\t\t}), {\n\t\t\tasync onFailedAttempt({ error }) {\n\t\t\t\tconst errorMessage = error.message ?? \"\";\n\t\t\t\tif (errorMessage.startsWith(\"Cancel\") || errorMessage.startsWith(\"TimeoutError\") || errorMessage.startsWith(\"AbortError\")) throw error;\n\t\t\t\tif (error?.code === \"ECONNABORTED\") throw error;\n\t\t\t\tif (errorMessage.includes(\"ECONNREFUSED\") || errorMessage.includes(\"fetch failed\") || errorMessage.includes(\"Failed to fetch\") || errorMessage.includes(\"NetworkError\")) {\n\t\t\t\t\tconst connectionError = /* @__PURE__ */ new Error(`Unable to connect to LangGraph server. Please ensure the server is running and accessible. Original error: ${errorMessage}`);\n\t\t\t\t\tconnectionError.name = \"ConnectionError\";\n\t\t\t\t\tthrow connectionError;\n\t\t\t\t}\n\t\t\t\tif (error instanceof HTTPError) {\n\t\t\t\t\tif (STATUS_NO_RETRY.includes(error.status)) throw error;\n\t\t\t\t\tif (onFailedResponseHook && error.response) await onFailedResponseHook(error.response);\n\t\t\t\t}\n\t\t\t},\n\t\t\tretries: this.maxRetries,\n\t\t\trandomize: true\n\t\t}), { throwOnTimeout: true });\n\t}\n\tcallWithOptions(options, callable, ...args) {\n\t\tif (options.signal) return Promise.race([this.call(callable, ...args), new Promise((_, reject) => {\n\t\t\toptions.signal?.addEventListener(\"abort\", () => {\n\t\t\t\treject(/* @__PURE__ */ new Error(\"AbortError\"));\n\t\t\t});\n\t\t})]);\n\t\treturn this.call(callable, ...args);\n\t}\n\tfetch(...args) {\n\t\tconst fetchFn = this.customFetch ?? (0,_singletons_fetch_js__WEBPACK_IMPORTED_MODULE_0__._getFetchImplementation)();\n\t\treturn this.call(() => fetchFn(...args).then((res) => res.ok ? res : Promise.reject(res)));\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=async_caller.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL2Rpc3QvdXRpbHMvYXN5bmNfY2FsbGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBaUU7QUFDcEM7QUFDRzs7QUFFaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLE9BQU8sSUFBSSxRQUFRO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLDREQUFzQixtQkFBbUIsMERBQWlCLEdBQUcsa0NBQWtDO0FBQ3JHLHdCQUF3QiwrQ0FBUyxHQUFHLGtDQUFrQztBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsdUJBQXVCO0FBQ2pDLDhCQUE4QixtREFBTTtBQUNwQztBQUNBLDJFQUEyRSx5Q0FBeUM7QUFDcEg7QUFDQSxHQUFHO0FBQ0gsMkJBQTJCLE9BQU87QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxS0FBcUssYUFBYTtBQUNsTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRyxLQUFLLHNCQUFzQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsNkVBQXVCO0FBQzdEO0FBQ0E7QUFDQTs7QUFFQTtBQUN1QjtBQUN2QiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoLXNkay9kaXN0L3V0aWxzL2FzeW5jX2NhbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfZ2V0RmV0Y2hJbXBsZW1lbnRhdGlvbiB9IGZyb20gXCIuLi9zaW5nbGV0b25zL2ZldGNoLmpzXCI7XG5pbXBvcnQgcFJldHJ5IGZyb20gXCJwLXJldHJ5XCI7XG5pbXBvcnQgUFF1ZXVlTW9kIGZyb20gXCJwLXF1ZXVlXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvYXN5bmNfY2FsbGVyLnRzXG5jb25zdCBTVEFUVVNfTk9fUkVUUlkgPSBbXG5cdDQwMCxcblx0NDAxLFxuXHQ0MDIsXG5cdDQwMyxcblx0NDA0LFxuXHQ0MDUsXG5cdDQwNixcblx0NDA3LFxuXHQ0MDgsXG5cdDQwOSxcblx0NDIyXG5dO1xuLyoqXG4qIERvIG5vdCByZWx5IG9uIGdsb2JhbFRoaXMuUmVzcG9uc2UsIHJhdGhlciBqdXN0XG4qIGRvIGR1Y2sgdHlwaW5nXG4qL1xuZnVuY3Rpb24gaXNSZXNwb25zZSh4KSB7XG5cdGlmICh4ID09IG51bGwgfHwgdHlwZW9mIHggIT09IFwib2JqZWN0XCIpIHJldHVybiBmYWxzZTtcblx0cmV0dXJuIFwic3RhdHVzXCIgaW4geCAmJiBcInN0YXR1c1RleHRcIiBpbiB4ICYmIFwidGV4dFwiIGluIHg7XG59XG4vKipcbiogVXRpbGl0eSBlcnJvciB0byBwcm9wZXJseSBoYW5kbGUgZmFpbGVkIHJlcXVlc3RzXG4qL1xudmFyIEhUVFBFcnJvciA9IGNsYXNzIEhUVFBFcnJvciBleHRlbmRzIEVycm9yIHtcblx0c3RhdHVzO1xuXHR0ZXh0O1xuXHRyZXNwb25zZTtcblx0Y29uc3RydWN0b3Ioc3RhdHVzLCBtZXNzYWdlLCByZXNwb25zZSkge1xuXHRcdHN1cGVyKGBIVFRQICR7c3RhdHVzfTogJHttZXNzYWdlfWApO1xuXHRcdHRoaXMuc3RhdHVzID0gc3RhdHVzO1xuXHRcdHRoaXMudGV4dCA9IG1lc3NhZ2U7XG5cdFx0dGhpcy5yZXNwb25zZSA9IHJlc3BvbnNlO1xuXHR9XG5cdHN0YXRpYyBhc3luYyBmcm9tUmVzcG9uc2UocmVzcG9uc2UsIG9wdGlvbnMpIHtcblx0XHR0cnkge1xuXHRcdFx0cmV0dXJuIG5ldyBIVFRQRXJyb3IocmVzcG9uc2Uuc3RhdHVzLCBhd2FpdCByZXNwb25zZS50ZXh0KCksIG9wdGlvbnM/LmluY2x1ZGVSZXNwb25zZSA/IHJlc3BvbnNlIDogdm9pZCAwKTtcblx0XHR9IGNhdGNoIHtcblx0XHRcdHJldHVybiBuZXcgSFRUUEVycm9yKHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2Uuc3RhdHVzVGV4dCwgb3B0aW9ucz8uaW5jbHVkZVJlc3BvbnNlID8gcmVzcG9uc2UgOiB2b2lkIDApO1xuXHRcdH1cblx0fVxufTtcbi8qKlxuKiBBIGNsYXNzIHRoYXQgY2FuIGJlIHVzZWQgdG8gbWFrZSBhc3luYyBjYWxscyB3aXRoIGNvbmN1cnJlbmN5IGFuZCByZXRyeSBsb2dpYy5cbipcbiogVGhpcyBpcyB1c2VmdWwgZm9yIG1ha2luZyBjYWxscyB0byBhbnkga2luZCBvZiBcImV4cGVuc2l2ZVwiIGV4dGVybmFsIHJlc291cmNlLFxuKiBiZSBpdCBiZWNhdXNlIGl0J3MgcmF0ZS1saW1pdGVkLCBzdWJqZWN0IHRvIG5ldHdvcmsgaXNzdWVzLCBldGMuXG4qXG4qIENvbmN1cnJlbnQgY2FsbHMgYXJlIGxpbWl0ZWQgYnkgdGhlIGBtYXhDb25jdXJyZW5jeWAgcGFyYW1ldGVyLCB3aGljaCBkZWZhdWx0c1xuKiB0byBgSW5maW5pdHlgLiBUaGlzIG1lYW5zIHRoYXQgYnkgZGVmYXVsdCwgYWxsIGNhbGxzIHdpbGwgYmUgbWFkZSBpbiBwYXJhbGxlbC5cbipcbiogUmV0cmllcyBhcmUgbGltaXRlZCBieSB0aGUgYG1heFJldHJpZXNgIHBhcmFtZXRlciwgd2hpY2ggZGVmYXVsdHMgdG8gNS4gVGhpc1xuKiBtZWFucyB0aGF0IGJ5IGRlZmF1bHQsIGVhY2ggY2FsbCB3aWxsIGJlIHJldHJpZWQgdXAgdG8gNSB0aW1lcywgd2l0aCBhblxuKiBleHBvbmVudGlhbCBiYWNrb2ZmIGJldHdlZW4gZWFjaCBhdHRlbXB0LlxuKi9cbnZhciBBc3luY0NhbGxlciA9IGNsYXNzIHtcblx0bWF4Q29uY3VycmVuY3k7XG5cdG1heFJldHJpZXM7XG5cdHF1ZXVlO1xuXHRvbkZhaWxlZFJlc3BvbnNlSG9vaztcblx0Y3VzdG9tRmV0Y2g7XG5cdGNvbnN0cnVjdG9yKHBhcmFtcykge1xuXHRcdHRoaXMubWF4Q29uY3VycmVuY3kgPSBwYXJhbXMubWF4Q29uY3VycmVuY3kgPz8gSW5maW5pdHk7XG5cdFx0dGhpcy5tYXhSZXRyaWVzID0gcGFyYW1zLm1heFJldHJpZXMgPz8gNDtcblx0XHRpZiAoXCJkZWZhdWx0XCIgaW4gUFF1ZXVlTW9kKSB0aGlzLnF1ZXVlID0gbmV3IFBRdWV1ZU1vZC5kZWZhdWx0KHsgY29uY3VycmVuY3k6IHRoaXMubWF4Q29uY3VycmVuY3kgfSk7XG5cdFx0ZWxzZSB0aGlzLnF1ZXVlID0gbmV3IFBRdWV1ZU1vZCh7IGNvbmN1cnJlbmN5OiB0aGlzLm1heENvbmN1cnJlbmN5IH0pO1xuXHRcdHRoaXMub25GYWlsZWRSZXNwb25zZUhvb2sgPSBwYXJhbXM/Lm9uRmFpbGVkUmVzcG9uc2VIb29rO1xuXHRcdHRoaXMuY3VzdG9tRmV0Y2ggPSBwYXJhbXMuZmV0Y2g7XG5cdH1cblx0Y2FsbChjYWxsYWJsZSwgLi4uYXJncykge1xuXHRcdGNvbnN0IHsgb25GYWlsZWRSZXNwb25zZUhvb2sgfSA9IHRoaXM7XG5cdFx0cmV0dXJuIHRoaXMucXVldWUuYWRkKCgpID0+IHBSZXRyeSgoKSA9PiBjYWxsYWJsZSguLi5hcmdzKS5jYXRjaChhc3luYyAoZXJyb3IpID0+IHtcblx0XHRcdGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB0aHJvdyBlcnJvcjtcblx0XHRcdGVsc2UgaWYgKGlzUmVzcG9uc2UoZXJyb3IpKSB0aHJvdyBhd2FpdCBIVFRQRXJyb3IuZnJvbVJlc3BvbnNlKGVycm9yLCB7IGluY2x1ZGVSZXNwb25zZTogISFvbkZhaWxlZFJlc3BvbnNlSG9vayB9KTtcblx0XHRcdGVsc2UgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcblx0XHR9KSwge1xuXHRcdFx0YXN5bmMgb25GYWlsZWRBdHRlbXB0KHsgZXJyb3IgfSkge1xuXHRcdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlID8/IFwiXCI7XG5cdFx0XHRcdGlmIChlcnJvck1lc3NhZ2Uuc3RhcnRzV2l0aChcIkNhbmNlbFwiKSB8fCBlcnJvck1lc3NhZ2Uuc3RhcnRzV2l0aChcIlRpbWVvdXRFcnJvclwiKSB8fCBlcnJvck1lc3NhZ2Uuc3RhcnRzV2l0aChcIkFib3J0RXJyb3JcIikpIHRocm93IGVycm9yO1xuXHRcdFx0XHRpZiAoZXJyb3I/LmNvZGUgPT09IFwiRUNPTk5BQk9SVEVEXCIpIHRocm93IGVycm9yO1xuXHRcdFx0XHRpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKFwiRUNPTk5SRUZVU0VEXCIpIHx8IGVycm9yTWVzc2FnZS5pbmNsdWRlcyhcImZldGNoIGZhaWxlZFwiKSB8fCBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoXCJGYWlsZWQgdG8gZmV0Y2hcIikgfHwgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKFwiTmV0d29ya0Vycm9yXCIpKSB7XG5cdFx0XHRcdFx0Y29uc3QgY29ubmVjdGlvbkVycm9yID0gLyogQF9fUFVSRV9fICovIG5ldyBFcnJvcihgVW5hYmxlIHRvIGNvbm5lY3QgdG8gTGFuZ0dyYXBoIHNlcnZlci4gUGxlYXNlIGVuc3VyZSB0aGUgc2VydmVyIGlzIHJ1bm5pbmcgYW5kIGFjY2Vzc2libGUuIE9yaWdpbmFsIGVycm9yOiAke2Vycm9yTWVzc2FnZX1gKTtcblx0XHRcdFx0XHRjb25uZWN0aW9uRXJyb3IubmFtZSA9IFwiQ29ubmVjdGlvbkVycm9yXCI7XG5cdFx0XHRcdFx0dGhyb3cgY29ubmVjdGlvbkVycm9yO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChlcnJvciBpbnN0YW5jZW9mIEhUVFBFcnJvcikge1xuXHRcdFx0XHRcdGlmIChTVEFUVVNfTk9fUkVUUlkuaW5jbHVkZXMoZXJyb3Iuc3RhdHVzKSkgdGhyb3cgZXJyb3I7XG5cdFx0XHRcdFx0aWYgKG9uRmFpbGVkUmVzcG9uc2VIb29rICYmIGVycm9yLnJlc3BvbnNlKSBhd2FpdCBvbkZhaWxlZFJlc3BvbnNlSG9vayhlcnJvci5yZXNwb25zZSk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRyZXRyaWVzOiB0aGlzLm1heFJldHJpZXMsXG5cdFx0XHRyYW5kb21pemU6IHRydWVcblx0XHR9KSwgeyB0aHJvd09uVGltZW91dDogdHJ1ZSB9KTtcblx0fVxuXHRjYWxsV2l0aE9wdGlvbnMob3B0aW9ucywgY2FsbGFibGUsIC4uLmFyZ3MpIHtcblx0XHRpZiAob3B0aW9ucy5zaWduYWwpIHJldHVybiBQcm9taXNlLnJhY2UoW3RoaXMuY2FsbChjYWxsYWJsZSwgLi4uYXJncyksIG5ldyBQcm9taXNlKChfLCByZWplY3QpID0+IHtcblx0XHRcdG9wdGlvbnMuc2lnbmFsPy5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgKCkgPT4ge1xuXHRcdFx0XHRyZWplY3QoLyogQF9fUFVSRV9fICovIG5ldyBFcnJvcihcIkFib3J0RXJyb3JcIikpO1xuXHRcdFx0fSk7XG5cdFx0fSldKTtcblx0XHRyZXR1cm4gdGhpcy5jYWxsKGNhbGxhYmxlLCAuLi5hcmdzKTtcblx0fVxuXHRmZXRjaCguLi5hcmdzKSB7XG5cdFx0Y29uc3QgZmV0Y2hGbiA9IHRoaXMuY3VzdG9tRmV0Y2ggPz8gX2dldEZldGNoSW1wbGVtZW50YXRpb24oKTtcblx0XHRyZXR1cm4gdGhpcy5jYWxsKCgpID0+IGZldGNoRm4oLi4uYXJncykudGhlbigocmVzKSA9PiByZXMub2sgPyByZXMgOiBQcm9taXNlLnJlamVjdChyZXMpKSk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQXN5bmNDYWxsZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFzeW5jX2NhbGxlci5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/dist/utils/async_caller.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/dist/utils/env.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/dist/utils/env.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnvironmentVariable: () => (/* binding */ getEnvironmentVariable)\n/* harmony export */ });\n//#region src/utils/env.ts\nfunction getEnvironmentVariable(name) {\n\ttry {\n\t\treturn typeof process !== \"undefined\" ? process.env?.[name] : void 0;\n\t} catch (e) {\n\t\treturn;\n\t}\n}\n\n//#endregion\n\n//# sourceMappingURL=env.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL2Rpc3QvdXRpbHMvZW52LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDa0M7QUFDbEMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC1zZGsvZGlzdC91dGlscy9lbnYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy9lbnYudHNcbmZ1bmN0aW9uIGdldEVudmlyb25tZW50VmFyaWFibGUobmFtZSkge1xuXHR0cnkge1xuXHRcdHJldHVybiB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiA/IHByb2Nlc3MuZW52Py5bbmFtZV0gOiB2b2lkIDA7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRyZXR1cm47XG5cdH1cbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbnYuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/dist/utils/env.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/dist/utils/error.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/dist/utils/error.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isNetworkError: () => (/* binding */ isNetworkError)\n/* harmony export */ });\n//#region src/utils/error.ts\nconst isError = (error) => {\n\tif (\"isError\" in Error && typeof Error.isError === \"function\") return Error.isError(error);\n\tconst stringTag = Object.prototype.toString.call(error);\n\treturn stringTag === \"[object Error]\" || stringTag === \"[object DOMException]\" || stringTag === \"[object DOMError]\" || stringTag === \"[object Exception]\";\n};\nconst isNetworkError = (error) => {\n\tif (!isError(error)) return false;\n\tif (error.name !== \"TypeError\" || typeof error.message !== \"string\") return false;\n\tconst msg = error.message.toLowerCase();\n\treturn msg.includes(\"fetch\") || msg.includes(\"network\") || msg.includes(\"connection\") || msg.includes(\"error sending request\") || msg.includes(\"load failed\");\n};\n\n//#endregion\n\n//# sourceMappingURL=error.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL2Rpc3QvdXRpbHMvZXJyb3IuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUMwQjtBQUMxQiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoLXNkay9kaXN0L3V0aWxzL2Vycm9yLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvdXRpbHMvZXJyb3IudHNcbmNvbnN0IGlzRXJyb3IgPSAoZXJyb3IpID0+IHtcblx0aWYgKFwiaXNFcnJvclwiIGluIEVycm9yICYmIHR5cGVvZiBFcnJvci5pc0Vycm9yID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBFcnJvci5pc0Vycm9yKGVycm9yKTtcblx0Y29uc3Qgc3RyaW5nVGFnID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGVycm9yKTtcblx0cmV0dXJuIHN0cmluZ1RhZyA9PT0gXCJbb2JqZWN0IEVycm9yXVwiIHx8IHN0cmluZ1RhZyA9PT0gXCJbb2JqZWN0IERPTUV4Y2VwdGlvbl1cIiB8fCBzdHJpbmdUYWcgPT09IFwiW29iamVjdCBET01FcnJvcl1cIiB8fCBzdHJpbmdUYWcgPT09IFwiW29iamVjdCBFeGNlcHRpb25dXCI7XG59O1xuY29uc3QgaXNOZXR3b3JrRXJyb3IgPSAoZXJyb3IpID0+IHtcblx0aWYgKCFpc0Vycm9yKGVycm9yKSkgcmV0dXJuIGZhbHNlO1xuXHRpZiAoZXJyb3IubmFtZSAhPT0gXCJUeXBlRXJyb3JcIiB8fCB0eXBlb2YgZXJyb3IubWVzc2FnZSAhPT0gXCJzdHJpbmdcIikgcmV0dXJuIGZhbHNlO1xuXHRjb25zdCBtc2cgPSBlcnJvci5tZXNzYWdlLnRvTG93ZXJDYXNlKCk7XG5cdHJldHVybiBtc2cuaW5jbHVkZXMoXCJmZXRjaFwiKSB8fCBtc2cuaW5jbHVkZXMoXCJuZXR3b3JrXCIpIHx8IG1zZy5pbmNsdWRlcyhcImNvbm5lY3Rpb25cIikgfHwgbXNnLmluY2x1ZGVzKFwiZXJyb3Igc2VuZGluZyByZXF1ZXN0XCIpIHx8IG1zZy5pbmNsdWRlcyhcImxvYWQgZmFpbGVkXCIpO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBpc05ldHdvcmtFcnJvciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3IuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/dist/utils/error.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/dist/utils/signals.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/dist/utils/signals.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mergeSignals: () => (/* binding */ mergeSignals)\n/* harmony export */ });\n//#region src/utils/signals.ts\nfunction mergeSignals(...signals) {\n\tconst nonZeroSignals = signals.filter((signal) => signal != null);\n\tif (nonZeroSignals.length === 0) return void 0;\n\tif (nonZeroSignals.length === 1) return nonZeroSignals[0];\n\tconst controller = new AbortController();\n\tfor (const signal of signals) {\n\t\tif (signal?.aborted) {\n\t\t\tcontroller.abort(signal.reason);\n\t\t\treturn controller.signal;\n\t\t}\n\t\tsignal?.addEventListener(\"abort\", () => controller.abort(signal.reason), { once: true });\n\t}\n\treturn controller.signal;\n}\n\n//#endregion\n\n//# sourceMappingURL=signals.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL2Rpc3QvdXRpbHMvc2lnbmFscy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZFQUE2RSxZQUFZO0FBQ3pGO0FBQ0E7QUFDQTs7QUFFQTtBQUN3QjtBQUN4QiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoLXNkay9kaXN0L3V0aWxzL3NpZ25hbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy9zaWduYWxzLnRzXG5mdW5jdGlvbiBtZXJnZVNpZ25hbHMoLi4uc2lnbmFscykge1xuXHRjb25zdCBub25aZXJvU2lnbmFscyA9IHNpZ25hbHMuZmlsdGVyKChzaWduYWwpID0+IHNpZ25hbCAhPSBudWxsKTtcblx0aWYgKG5vblplcm9TaWduYWxzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHZvaWQgMDtcblx0aWYgKG5vblplcm9TaWduYWxzLmxlbmd0aCA9PT0gMSkgcmV0dXJuIG5vblplcm9TaWduYWxzWzBdO1xuXHRjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuXHRmb3IgKGNvbnN0IHNpZ25hbCBvZiBzaWduYWxzKSB7XG5cdFx0aWYgKHNpZ25hbD8uYWJvcnRlZCkge1xuXHRcdFx0Y29udHJvbGxlci5hYm9ydChzaWduYWwucmVhc29uKTtcblx0XHRcdHJldHVybiBjb250cm9sbGVyLnNpZ25hbDtcblx0XHR9XG5cdFx0c2lnbmFsPy5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgKCkgPT4gY29udHJvbGxlci5hYm9ydChzaWduYWwucmVhc29uKSwgeyBvbmNlOiB0cnVlIH0pO1xuXHR9XG5cdHJldHVybiBjb250cm9sbGVyLnNpZ25hbDtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBtZXJnZVNpZ25hbHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNpZ25hbHMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/dist/utils/signals.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/dist/utils/sse.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/dist/utils/sse.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BytesLineDecoder: () => (/* binding */ BytesLineDecoder),\n/* harmony export */   SSEDecoder: () => (/* binding */ SSEDecoder)\n/* harmony export */ });\n//#region src/utils/sse.ts\nconst CR = \"\\r\".charCodeAt(0);\nconst LF = \"\\n\".charCodeAt(0);\nconst NULL = \"\\0\".charCodeAt(0);\nconst COLON = \":\".charCodeAt(0);\nconst SPACE = \" \".charCodeAt(0);\nconst TRAILING_NEWLINE = [CR, LF];\nfunction BytesLineDecoder() {\n\tlet buffer = [];\n\tlet trailingCr = false;\n\treturn new TransformStream({\n\t\tstart() {\n\t\t\tbuffer = [];\n\t\t\ttrailingCr = false;\n\t\t},\n\t\ttransform(chunk, controller) {\n\t\t\tlet text = chunk;\n\t\t\tif (trailingCr) {\n\t\t\t\ttext = joinArrays([[CR], text]);\n\t\t\t\ttrailingCr = false;\n\t\t\t}\n\t\t\tif (text.length > 0 && text.at(-1) === CR) {\n\t\t\t\ttrailingCr = true;\n\t\t\t\ttext = text.subarray(0, -1);\n\t\t\t}\n\t\t\tif (!text.length) return;\n\t\t\tconst trailingNewline = TRAILING_NEWLINE.includes(text.at(-1));\n\t\t\tconst lastIdx = text.length - 1;\n\t\t\tconst { lines } = text.reduce((acc, cur, idx) => {\n\t\t\t\tif (acc.from > idx) return acc;\n\t\t\t\tif (cur === CR || cur === LF) {\n\t\t\t\t\tacc.lines.push(text.subarray(acc.from, idx));\n\t\t\t\t\tif (cur === CR && text[idx + 1] === LF) acc.from = idx + 2;\n\t\t\t\t\telse acc.from = idx + 1;\n\t\t\t\t}\n\t\t\t\tif (idx === lastIdx && acc.from <= lastIdx) acc.lines.push(text.subarray(acc.from));\n\t\t\t\treturn acc;\n\t\t\t}, {\n\t\t\t\tlines: [],\n\t\t\t\tfrom: 0\n\t\t\t});\n\t\t\tif (lines.length === 1 && !trailingNewline) {\n\t\t\t\tbuffer.push(lines[0]);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (buffer.length) {\n\t\t\t\tbuffer.push(lines[0]);\n\t\t\t\tlines[0] = joinArrays(buffer);\n\t\t\t\tbuffer = [];\n\t\t\t}\n\t\t\tif (!trailingNewline) {\n\t\t\t\tif (lines.length) buffer = [lines.pop()];\n\t\t\t}\n\t\t\tfor (const line of lines) controller.enqueue(line);\n\t\t},\n\t\tflush(controller) {\n\t\t\tif (buffer.length) controller.enqueue(joinArrays(buffer));\n\t\t}\n\t});\n}\nfunction SSEDecoder() {\n\tlet event = \"\";\n\tlet data = [];\n\tlet lastEventId = \"\";\n\tlet retry = null;\n\tconst decoder = new TextDecoder();\n\treturn new TransformStream({\n\t\ttransform(chunk, controller) {\n\t\t\tif (!chunk.length) {\n\t\t\t\tif (!event && !data.length && !lastEventId && retry == null) return;\n\t\t\t\tconst sse = {\n\t\t\t\t\tid: lastEventId || void 0,\n\t\t\t\t\tevent,\n\t\t\t\t\tdata: data.length ? decodeArraysToJson(decoder, data) : null\n\t\t\t\t};\n\t\t\t\tevent = \"\";\n\t\t\t\tdata = [];\n\t\t\t\tretry = null;\n\t\t\t\tcontroller.enqueue(sse);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (chunk[0] === COLON) return;\n\t\t\tconst sepIdx = chunk.indexOf(COLON);\n\t\t\tif (sepIdx === -1) return;\n\t\t\tconst fieldName = decoder.decode(chunk.subarray(0, sepIdx));\n\t\t\tlet value = chunk.subarray(sepIdx + 1);\n\t\t\tif (value[0] === SPACE) value = value.subarray(1);\n\t\t\tif (fieldName === \"event\") event = decoder.decode(value);\n\t\t\telse if (fieldName === \"data\") data.push(value);\n\t\t\telse if (fieldName === \"id\") {\n\t\t\t\tif (value.indexOf(NULL) === -1) lastEventId = decoder.decode(value);\n\t\t\t} else if (fieldName === \"retry\") {\n\t\t\t\tconst retryNum = Number.parseInt(decoder.decode(value), 10);\n\t\t\t\tif (!Number.isNaN(retryNum)) retry = retryNum;\n\t\t\t}\n\t\t},\n\t\tflush(controller) {\n\t\t\tif (event) controller.enqueue({\n\t\t\t\tid: lastEventId || void 0,\n\t\t\t\tevent,\n\t\t\t\tdata: data.length ? decodeArraysToJson(decoder, data) : null\n\t\t\t});\n\t\t}\n\t});\n}\nfunction joinArrays(data) {\n\tconst totalLength = data.reduce((acc, curr) => acc + curr.length, 0);\n\tconst merged = new Uint8Array(totalLength);\n\tlet offset = 0;\n\tfor (const c of data) {\n\t\tmerged.set(c, offset);\n\t\toffset += c.length;\n\t}\n\treturn merged;\n}\nfunction decodeArraysToJson(decoder, data) {\n\treturn JSON.parse(decoder.decode(joinArrays(data)));\n}\n\n//#endregion\n\n//# sourceMappingURL=sse.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL2Rpc3QvdXRpbHMvc3NlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUN3QztBQUN4QyIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoLXNkay9kaXN0L3V0aWxzL3NzZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3V0aWxzL3NzZS50c1xuY29uc3QgQ1IgPSBcIlxcclwiLmNoYXJDb2RlQXQoMCk7XG5jb25zdCBMRiA9IFwiXFxuXCIuY2hhckNvZGVBdCgwKTtcbmNvbnN0IE5VTEwgPSBcIlxcMFwiLmNoYXJDb2RlQXQoMCk7XG5jb25zdCBDT0xPTiA9IFwiOlwiLmNoYXJDb2RlQXQoMCk7XG5jb25zdCBTUEFDRSA9IFwiIFwiLmNoYXJDb2RlQXQoMCk7XG5jb25zdCBUUkFJTElOR19ORVdMSU5FID0gW0NSLCBMRl07XG5mdW5jdGlvbiBCeXRlc0xpbmVEZWNvZGVyKCkge1xuXHRsZXQgYnVmZmVyID0gW107XG5cdGxldCB0cmFpbGluZ0NyID0gZmFsc2U7XG5cdHJldHVybiBuZXcgVHJhbnNmb3JtU3RyZWFtKHtcblx0XHRzdGFydCgpIHtcblx0XHRcdGJ1ZmZlciA9IFtdO1xuXHRcdFx0dHJhaWxpbmdDciA9IGZhbHNlO1xuXHRcdH0sXG5cdFx0dHJhbnNmb3JtKGNodW5rLCBjb250cm9sbGVyKSB7XG5cdFx0XHRsZXQgdGV4dCA9IGNodW5rO1xuXHRcdFx0aWYgKHRyYWlsaW5nQ3IpIHtcblx0XHRcdFx0dGV4dCA9IGpvaW5BcnJheXMoW1tDUl0sIHRleHRdKTtcblx0XHRcdFx0dHJhaWxpbmdDciA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRleHQubGVuZ3RoID4gMCAmJiB0ZXh0LmF0KC0xKSA9PT0gQ1IpIHtcblx0XHRcdFx0dHJhaWxpbmdDciA9IHRydWU7XG5cdFx0XHRcdHRleHQgPSB0ZXh0LnN1YmFycmF5KDAsIC0xKTtcblx0XHRcdH1cblx0XHRcdGlmICghdGV4dC5sZW5ndGgpIHJldHVybjtcblx0XHRcdGNvbnN0IHRyYWlsaW5nTmV3bGluZSA9IFRSQUlMSU5HX05FV0xJTkUuaW5jbHVkZXModGV4dC5hdCgtMSkpO1xuXHRcdFx0Y29uc3QgbGFzdElkeCA9IHRleHQubGVuZ3RoIC0gMTtcblx0XHRcdGNvbnN0IHsgbGluZXMgfSA9IHRleHQucmVkdWNlKChhY2MsIGN1ciwgaWR4KSA9PiB7XG5cdFx0XHRcdGlmIChhY2MuZnJvbSA+IGlkeCkgcmV0dXJuIGFjYztcblx0XHRcdFx0aWYgKGN1ciA9PT0gQ1IgfHwgY3VyID09PSBMRikge1xuXHRcdFx0XHRcdGFjYy5saW5lcy5wdXNoKHRleHQuc3ViYXJyYXkoYWNjLmZyb20sIGlkeCkpO1xuXHRcdFx0XHRcdGlmIChjdXIgPT09IENSICYmIHRleHRbaWR4ICsgMV0gPT09IExGKSBhY2MuZnJvbSA9IGlkeCArIDI7XG5cdFx0XHRcdFx0ZWxzZSBhY2MuZnJvbSA9IGlkeCArIDE7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGlkeCA9PT0gbGFzdElkeCAmJiBhY2MuZnJvbSA8PSBsYXN0SWR4KSBhY2MubGluZXMucHVzaCh0ZXh0LnN1YmFycmF5KGFjYy5mcm9tKSk7XG5cdFx0XHRcdHJldHVybiBhY2M7XG5cdFx0XHR9LCB7XG5cdFx0XHRcdGxpbmVzOiBbXSxcblx0XHRcdFx0ZnJvbTogMFxuXHRcdFx0fSk7XG5cdFx0XHRpZiAobGluZXMubGVuZ3RoID09PSAxICYmICF0cmFpbGluZ05ld2xpbmUpIHtcblx0XHRcdFx0YnVmZmVyLnB1c2gobGluZXNbMF0pO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRpZiAoYnVmZmVyLmxlbmd0aCkge1xuXHRcdFx0XHRidWZmZXIucHVzaChsaW5lc1swXSk7XG5cdFx0XHRcdGxpbmVzWzBdID0gam9pbkFycmF5cyhidWZmZXIpO1xuXHRcdFx0XHRidWZmZXIgPSBbXTtcblx0XHRcdH1cblx0XHRcdGlmICghdHJhaWxpbmdOZXdsaW5lKSB7XG5cdFx0XHRcdGlmIChsaW5lcy5sZW5ndGgpIGJ1ZmZlciA9IFtsaW5lcy5wb3AoKV07XG5cdFx0XHR9XG5cdFx0XHRmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIGNvbnRyb2xsZXIuZW5xdWV1ZShsaW5lKTtcblx0XHR9LFxuXHRcdGZsdXNoKGNvbnRyb2xsZXIpIHtcblx0XHRcdGlmIChidWZmZXIubGVuZ3RoKSBjb250cm9sbGVyLmVucXVldWUoam9pbkFycmF5cyhidWZmZXIpKTtcblx0XHR9XG5cdH0pO1xufVxuZnVuY3Rpb24gU1NFRGVjb2RlcigpIHtcblx0bGV0IGV2ZW50ID0gXCJcIjtcblx0bGV0IGRhdGEgPSBbXTtcblx0bGV0IGxhc3RFdmVudElkID0gXCJcIjtcblx0bGV0IHJldHJ5ID0gbnVsbDtcblx0Y29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xuXHRyZXR1cm4gbmV3IFRyYW5zZm9ybVN0cmVhbSh7XG5cdFx0dHJhbnNmb3JtKGNodW5rLCBjb250cm9sbGVyKSB7XG5cdFx0XHRpZiAoIWNodW5rLmxlbmd0aCkge1xuXHRcdFx0XHRpZiAoIWV2ZW50ICYmICFkYXRhLmxlbmd0aCAmJiAhbGFzdEV2ZW50SWQgJiYgcmV0cnkgPT0gbnVsbCkgcmV0dXJuO1xuXHRcdFx0XHRjb25zdCBzc2UgPSB7XG5cdFx0XHRcdFx0aWQ6IGxhc3RFdmVudElkIHx8IHZvaWQgMCxcblx0XHRcdFx0XHRldmVudCxcblx0XHRcdFx0XHRkYXRhOiBkYXRhLmxlbmd0aCA/IGRlY29kZUFycmF5c1RvSnNvbihkZWNvZGVyLCBkYXRhKSA6IG51bGxcblx0XHRcdFx0fTtcblx0XHRcdFx0ZXZlbnQgPSBcIlwiO1xuXHRcdFx0XHRkYXRhID0gW107XG5cdFx0XHRcdHJldHJ5ID0gbnVsbDtcblx0XHRcdFx0Y29udHJvbGxlci5lbnF1ZXVlKHNzZSk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGlmIChjaHVua1swXSA9PT0gQ09MT04pIHJldHVybjtcblx0XHRcdGNvbnN0IHNlcElkeCA9IGNodW5rLmluZGV4T2YoQ09MT04pO1xuXHRcdFx0aWYgKHNlcElkeCA9PT0gLTEpIHJldHVybjtcblx0XHRcdGNvbnN0IGZpZWxkTmFtZSA9IGRlY29kZXIuZGVjb2RlKGNodW5rLnN1YmFycmF5KDAsIHNlcElkeCkpO1xuXHRcdFx0bGV0IHZhbHVlID0gY2h1bmsuc3ViYXJyYXkoc2VwSWR4ICsgMSk7XG5cdFx0XHRpZiAodmFsdWVbMF0gPT09IFNQQUNFKSB2YWx1ZSA9IHZhbHVlLnN1YmFycmF5KDEpO1xuXHRcdFx0aWYgKGZpZWxkTmFtZSA9PT0gXCJldmVudFwiKSBldmVudCA9IGRlY29kZXIuZGVjb2RlKHZhbHVlKTtcblx0XHRcdGVsc2UgaWYgKGZpZWxkTmFtZSA9PT0gXCJkYXRhXCIpIGRhdGEucHVzaCh2YWx1ZSk7XG5cdFx0XHRlbHNlIGlmIChmaWVsZE5hbWUgPT09IFwiaWRcIikge1xuXHRcdFx0XHRpZiAodmFsdWUuaW5kZXhPZihOVUxMKSA9PT0gLTEpIGxhc3RFdmVudElkID0gZGVjb2Rlci5kZWNvZGUodmFsdWUpO1xuXHRcdFx0fSBlbHNlIGlmIChmaWVsZE5hbWUgPT09IFwicmV0cnlcIikge1xuXHRcdFx0XHRjb25zdCByZXRyeU51bSA9IE51bWJlci5wYXJzZUludChkZWNvZGVyLmRlY29kZSh2YWx1ZSksIDEwKTtcblx0XHRcdFx0aWYgKCFOdW1iZXIuaXNOYU4ocmV0cnlOdW0pKSByZXRyeSA9IHJldHJ5TnVtO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0Zmx1c2goY29udHJvbGxlcikge1xuXHRcdFx0aWYgKGV2ZW50KSBjb250cm9sbGVyLmVucXVldWUoe1xuXHRcdFx0XHRpZDogbGFzdEV2ZW50SWQgfHwgdm9pZCAwLFxuXHRcdFx0XHRldmVudCxcblx0XHRcdFx0ZGF0YTogZGF0YS5sZW5ndGggPyBkZWNvZGVBcnJheXNUb0pzb24oZGVjb2RlciwgZGF0YSkgOiBudWxsXG5cdFx0XHR9KTtcblx0XHR9XG5cdH0pO1xufVxuZnVuY3Rpb24gam9pbkFycmF5cyhkYXRhKSB7XG5cdGNvbnN0IHRvdGFsTGVuZ3RoID0gZGF0YS5yZWR1Y2UoKGFjYywgY3VycikgPT4gYWNjICsgY3Vyci5sZW5ndGgsIDApO1xuXHRjb25zdCBtZXJnZWQgPSBuZXcgVWludDhBcnJheSh0b3RhbExlbmd0aCk7XG5cdGxldCBvZmZzZXQgPSAwO1xuXHRmb3IgKGNvbnN0IGMgb2YgZGF0YSkge1xuXHRcdG1lcmdlZC5zZXQoYywgb2Zmc2V0KTtcblx0XHRvZmZzZXQgKz0gYy5sZW5ndGg7XG5cdH1cblx0cmV0dXJuIG1lcmdlZDtcbn1cbmZ1bmN0aW9uIGRlY29kZUFycmF5c1RvSnNvbihkZWNvZGVyLCBkYXRhKSB7XG5cdHJldHVybiBKU09OLnBhcnNlKGRlY29kZXIuZGVjb2RlKGpvaW5BcnJheXMoZGF0YSkpKTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBCeXRlc0xpbmVEZWNvZGVyLCBTU0VEZWNvZGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zc2UuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/dist/utils/sse.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/dist/utils/stream.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/dist/utils/stream.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IterableReadableStream: () => (/* binding */ IterableReadableStream),\n/* harmony export */   streamWithRetry: () => (/* binding */ streamWithRetry)\n/* harmony export */ });\n/* harmony import */ var _error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./error.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/dist/utils/error.js\");\n\n\n//#region src/utils/stream.ts\n/**\n* Error thrown when maximum reconnection attempts are exceeded.\n*/\nvar MaxReconnectAttemptsError = class extends Error {\n\tconstructor(maxAttempts, cause) {\n\t\tsuper(`Exceeded maximum SSE reconnection attempts (${maxAttempts})`);\n\t\tthis.name = \"MaxReconnectAttemptsError\";\n\t\tthis.cause = cause;\n\t}\n};\n/**\n* Stream with automatic retry logic for SSE connections.\n* Implements reconnection behavior similar to the Python SDK.\n*\n* @param makeRequest Function to make requests. When `params` is undefined/empty, it's the initial request.\n*                    When `params.lastEventId` is provided, it's a reconnection request.\n* @param options Configuration options\n* @returns AsyncGenerator yielding stream events\n*/\nasync function* streamWithRetry(makeRequest, options = {}) {\n\tconst maxRetries = options.maxRetries ?? 5;\n\tlet attempt = 0;\n\tlet lastEventId;\n\tlet reconnectPath;\n\twhile (true) {\n\t\tlet shouldRetry = false;\n\t\tlet lastError;\n\t\tlet reader;\n\t\ttry {\n\t\t\tif (options.signal?.aborted) return;\n\t\t\tconst { response, stream } = await makeRequest(lastEventId ? {\n\t\t\t\tlastEventId,\n\t\t\t\treconnectPath\n\t\t\t} : void 0);\n\t\t\tconst locationHeader = response.headers.get(\"location\");\n\t\t\tif (locationHeader) reconnectPath = locationHeader;\n\t\t\tconst contentType = response.headers.get(\"content-type\")?.split(\";\")[0];\n\t\t\tif (contentType && !contentType.includes(\"text/event-stream\")) throw new Error(`Expected response header Content-Type to contain 'text/event-stream', got '${contentType}'`);\n\t\t\treader = stream.getReader();\n\t\t\ttry {\n\t\t\t\twhile (true) {\n\t\t\t\t\tif (options.signal?.aborted) {\n\t\t\t\t\t\tawait reader.cancel();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst { done, value } = await reader.read();\n\t\t\t\t\tif (done) break;\n\t\t\t\t\tif (value.id) lastEventId = value.id;\n\t\t\t\t\tyield value;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t} catch (error) {\n\t\t\t\tif (lastEventId && reconnectPath && !options.signal?.aborted) shouldRetry = true;\n\t\t\t\telse throw error;\n\t\t\t} finally {\n\t\t\t\tif (reader) try {\n\t\t\t\t\treader.releaseLock();\n\t\t\t\t} catch {}\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tlastError = error;\n\t\t\tif ((0,_error_js__WEBPACK_IMPORTED_MODULE_0__.isNetworkError)(error) && lastEventId && reconnectPath && !options.signal?.aborted) shouldRetry = true;\n\t\t\telse throw error;\n\t\t}\n\t\tif (shouldRetry) {\n\t\t\tattempt += 1;\n\t\t\tif (attempt > maxRetries) throw new MaxReconnectAttemptsError(maxRetries, lastError);\n\t\t\toptions.onReconnect?.({\n\t\t\t\tattempt,\n\t\t\t\tlastEventId,\n\t\t\t\tcause: lastError\n\t\t\t});\n\t\t\tconst delay = Math.min(1e3 * 2 ** (attempt - 1), 5e3) + Math.random() * 1e3;\n\t\t\tawait new Promise((resolve) => {\n\t\t\t\tsetTimeout(resolve, delay);\n\t\t\t});\n\t\t\tcontinue;\n\t\t}\n\t\tbreak;\n\t}\n}\nvar IterableReadableStream = class IterableReadableStream extends ReadableStream {\n\treader;\n\tensureReader() {\n\t\tif (!this.reader) this.reader = this.getReader();\n\t}\n\tasync next() {\n\t\tthis.ensureReader();\n\t\ttry {\n\t\t\tconst result = await this.reader.read();\n\t\t\tif (result.done) {\n\t\t\t\tthis.reader.releaseLock();\n\t\t\t\treturn {\n\t\t\t\t\tdone: true,\n\t\t\t\t\tvalue: void 0\n\t\t\t\t};\n\t\t\t} else return {\n\t\t\t\tdone: false,\n\t\t\t\tvalue: result.value\n\t\t\t};\n\t\t} catch (e) {\n\t\t\tthis.reader.releaseLock();\n\t\t\tthrow e;\n\t\t}\n\t}\n\tasync return() {\n\t\tthis.ensureReader();\n\t\tif (this.locked) {\n\t\t\tconst cancelPromise = this.reader.cancel();\n\t\t\tthis.reader.releaseLock();\n\t\t\tawait cancelPromise;\n\t\t}\n\t\treturn {\n\t\t\tdone: true,\n\t\t\tvalue: void 0\n\t\t};\n\t}\n\tasync throw(e) {\n\t\tthis.ensureReader();\n\t\tif (this.locked) {\n\t\t\tconst cancelPromise = this.reader.cancel();\n\t\t\tthis.reader.releaseLock();\n\t\t\tawait cancelPromise;\n\t\t}\n\t\tthrow e;\n\t}\n\tasync [Symbol.asyncDispose]() {\n\t\tawait this.return();\n\t}\n\t[Symbol.asyncIterator]() {\n\t\treturn this;\n\t}\n\tstatic fromReadableStream(stream) {\n\t\tconst reader = stream.getReader();\n\t\treturn new IterableReadableStream({\n\t\t\tstart(controller) {\n\t\t\t\treturn pump();\n\t\t\t\tfunction pump() {\n\t\t\t\t\treturn reader.read().then(({ done, value }) => {\n\t\t\t\t\t\tif (done) {\n\t\t\t\t\t\t\tcontroller.close();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontroller.enqueue(value);\n\t\t\t\t\t\treturn pump();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tcancel() {\n\t\t\t\treader.releaseLock();\n\t\t\t}\n\t\t});\n\t}\n\tstatic fromAsyncGenerator(generator) {\n\t\treturn new IterableReadableStream({\n\t\t\tasync pull(controller) {\n\t\t\t\tconst { value, done } = await generator.next();\n\t\t\t\tif (done) controller.close();\n\t\t\t\tcontroller.enqueue(value);\n\t\t\t},\n\t\t\tasync cancel(reason) {\n\t\t\t\tawait generator.return(reason);\n\t\t\t}\n\t\t});\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=stream.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL2Rpc3QvdXRpbHMvc3RyZWFtLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE0Qzs7QUFFNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVELFlBQVk7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQ7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLG1CQUFtQjtBQUM5QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxxRUFBcUU7QUFDckUsZ0tBQWdLLFlBQVk7QUFDNUs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGNBQWM7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxJQUFJO0FBQ0o7QUFDQSxPQUFPLHlEQUFjO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsYUFBYTtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxjQUFjO0FBQzFCO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDbUQ7QUFDbkQiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC1zZGsvZGlzdC91dGlscy9zdHJlYW0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNOZXR3b3JrRXJyb3IgfSBmcm9tIFwiLi9lcnJvci5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL3N0cmVhbS50c1xuLyoqXG4qIEVycm9yIHRocm93biB3aGVuIG1heGltdW0gcmVjb25uZWN0aW9uIGF0dGVtcHRzIGFyZSBleGNlZWRlZC5cbiovXG52YXIgTWF4UmVjb25uZWN0QXR0ZW1wdHNFcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuXHRjb25zdHJ1Y3RvcihtYXhBdHRlbXB0cywgY2F1c2UpIHtcblx0XHRzdXBlcihgRXhjZWVkZWQgbWF4aW11bSBTU0UgcmVjb25uZWN0aW9uIGF0dGVtcHRzICgke21heEF0dGVtcHRzfSlgKTtcblx0XHR0aGlzLm5hbWUgPSBcIk1heFJlY29ubmVjdEF0dGVtcHRzRXJyb3JcIjtcblx0XHR0aGlzLmNhdXNlID0gY2F1c2U7XG5cdH1cbn07XG4vKipcbiogU3RyZWFtIHdpdGggYXV0b21hdGljIHJldHJ5IGxvZ2ljIGZvciBTU0UgY29ubmVjdGlvbnMuXG4qIEltcGxlbWVudHMgcmVjb25uZWN0aW9uIGJlaGF2aW9yIHNpbWlsYXIgdG8gdGhlIFB5dGhvbiBTREsuXG4qXG4qIEBwYXJhbSBtYWtlUmVxdWVzdCBGdW5jdGlvbiB0byBtYWtlIHJlcXVlc3RzLiBXaGVuIGBwYXJhbXNgIGlzIHVuZGVmaW5lZC9lbXB0eSwgaXQncyB0aGUgaW5pdGlhbCByZXF1ZXN0LlxuKiAgICAgICAgICAgICAgICAgICAgV2hlbiBgcGFyYW1zLmxhc3RFdmVudElkYCBpcyBwcm92aWRlZCwgaXQncyBhIHJlY29ubmVjdGlvbiByZXF1ZXN0LlxuKiBAcGFyYW0gb3B0aW9ucyBDb25maWd1cmF0aW9uIG9wdGlvbnNcbiogQHJldHVybnMgQXN5bmNHZW5lcmF0b3IgeWllbGRpbmcgc3RyZWFtIGV2ZW50c1xuKi9cbmFzeW5jIGZ1bmN0aW9uKiBzdHJlYW1XaXRoUmV0cnkobWFrZVJlcXVlc3QsIG9wdGlvbnMgPSB7fSkge1xuXHRjb25zdCBtYXhSZXRyaWVzID0gb3B0aW9ucy5tYXhSZXRyaWVzID8/IDU7XG5cdGxldCBhdHRlbXB0ID0gMDtcblx0bGV0IGxhc3RFdmVudElkO1xuXHRsZXQgcmVjb25uZWN0UGF0aDtcblx0d2hpbGUgKHRydWUpIHtcblx0XHRsZXQgc2hvdWxkUmV0cnkgPSBmYWxzZTtcblx0XHRsZXQgbGFzdEVycm9yO1xuXHRcdGxldCByZWFkZXI7XG5cdFx0dHJ5IHtcblx0XHRcdGlmIChvcHRpb25zLnNpZ25hbD8uYWJvcnRlZCkgcmV0dXJuO1xuXHRcdFx0Y29uc3QgeyByZXNwb25zZSwgc3RyZWFtIH0gPSBhd2FpdCBtYWtlUmVxdWVzdChsYXN0RXZlbnRJZCA/IHtcblx0XHRcdFx0bGFzdEV2ZW50SWQsXG5cdFx0XHRcdHJlY29ubmVjdFBhdGhcblx0XHRcdH0gOiB2b2lkIDApO1xuXHRcdFx0Y29uc3QgbG9jYXRpb25IZWFkZXIgPSByZXNwb25zZS5oZWFkZXJzLmdldChcImxvY2F0aW9uXCIpO1xuXHRcdFx0aWYgKGxvY2F0aW9uSGVhZGVyKSByZWNvbm5lY3RQYXRoID0gbG9jYXRpb25IZWFkZXI7XG5cdFx0XHRjb25zdCBjb250ZW50VHlwZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KFwiY29udGVudC10eXBlXCIpPy5zcGxpdChcIjtcIilbMF07XG5cdFx0XHRpZiAoY29udGVudFR5cGUgJiYgIWNvbnRlbnRUeXBlLmluY2x1ZGVzKFwidGV4dC9ldmVudC1zdHJlYW1cIikpIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgcmVzcG9uc2UgaGVhZGVyIENvbnRlbnQtVHlwZSB0byBjb250YWluICd0ZXh0L2V2ZW50LXN0cmVhbScsIGdvdCAnJHtjb250ZW50VHlwZX0nYCk7XG5cdFx0XHRyZWFkZXIgPSBzdHJlYW0uZ2V0UmVhZGVyKCk7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHR3aGlsZSAodHJ1ZSkge1xuXHRcdFx0XHRcdGlmIChvcHRpb25zLnNpZ25hbD8uYWJvcnRlZCkge1xuXHRcdFx0XHRcdFx0YXdhaXQgcmVhZGVyLmNhbmNlbCgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zdCB7IGRvbmUsIHZhbHVlIH0gPSBhd2FpdCByZWFkZXIucmVhZCgpO1xuXHRcdFx0XHRcdGlmIChkb25lKSBicmVhaztcblx0XHRcdFx0XHRpZiAodmFsdWUuaWQpIGxhc3RFdmVudElkID0gdmFsdWUuaWQ7XG5cdFx0XHRcdFx0eWllbGQgdmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRpZiAobGFzdEV2ZW50SWQgJiYgcmVjb25uZWN0UGF0aCAmJiAhb3B0aW9ucy5zaWduYWw/LmFib3J0ZWQpIHNob3VsZFJldHJ5ID0gdHJ1ZTtcblx0XHRcdFx0ZWxzZSB0aHJvdyBlcnJvcjtcblx0XHRcdH0gZmluYWxseSB7XG5cdFx0XHRcdGlmIChyZWFkZXIpIHRyeSB7XG5cdFx0XHRcdFx0cmVhZGVyLnJlbGVhc2VMb2NrKCk7XG5cdFx0XHRcdH0gY2F0Y2gge31cblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0bGFzdEVycm9yID0gZXJyb3I7XG5cdFx0XHRpZiAoaXNOZXR3b3JrRXJyb3IoZXJyb3IpICYmIGxhc3RFdmVudElkICYmIHJlY29ubmVjdFBhdGggJiYgIW9wdGlvbnMuc2lnbmFsPy5hYm9ydGVkKSBzaG91bGRSZXRyeSA9IHRydWU7XG5cdFx0XHRlbHNlIHRocm93IGVycm9yO1xuXHRcdH1cblx0XHRpZiAoc2hvdWxkUmV0cnkpIHtcblx0XHRcdGF0dGVtcHQgKz0gMTtcblx0XHRcdGlmIChhdHRlbXB0ID4gbWF4UmV0cmllcykgdGhyb3cgbmV3IE1heFJlY29ubmVjdEF0dGVtcHRzRXJyb3IobWF4UmV0cmllcywgbGFzdEVycm9yKTtcblx0XHRcdG9wdGlvbnMub25SZWNvbm5lY3Q/Lih7XG5cdFx0XHRcdGF0dGVtcHQsXG5cdFx0XHRcdGxhc3RFdmVudElkLFxuXHRcdFx0XHRjYXVzZTogbGFzdEVycm9yXG5cdFx0XHR9KTtcblx0XHRcdGNvbnN0IGRlbGF5ID0gTWF0aC5taW4oMWUzICogMiAqKiAoYXR0ZW1wdCAtIDEpLCA1ZTMpICsgTWF0aC5yYW5kb20oKSAqIDFlMztcblx0XHRcdGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG5cdFx0XHRcdHNldFRpbWVvdXQocmVzb2x2ZSwgZGVsYXkpO1xuXHRcdFx0fSk7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0YnJlYWs7XG5cdH1cbn1cbnZhciBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtID0gY2xhc3MgSXRlcmFibGVSZWFkYWJsZVN0cmVhbSBleHRlbmRzIFJlYWRhYmxlU3RyZWFtIHtcblx0cmVhZGVyO1xuXHRlbnN1cmVSZWFkZXIoKSB7XG5cdFx0aWYgKCF0aGlzLnJlYWRlcikgdGhpcy5yZWFkZXIgPSB0aGlzLmdldFJlYWRlcigpO1xuXHR9XG5cdGFzeW5jIG5leHQoKSB7XG5cdFx0dGhpcy5lbnN1cmVSZWFkZXIoKTtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5yZWFkZXIucmVhZCgpO1xuXHRcdFx0aWYgKHJlc3VsdC5kb25lKSB7XG5cdFx0XHRcdHRoaXMucmVhZGVyLnJlbGVhc2VMb2NrKCk7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0ZG9uZTogdHJ1ZSxcblx0XHRcdFx0XHR2YWx1ZTogdm9pZCAwXG5cdFx0XHRcdH07XG5cdFx0XHR9IGVsc2UgcmV0dXJuIHtcblx0XHRcdFx0ZG9uZTogZmFsc2UsXG5cdFx0XHRcdHZhbHVlOiByZXN1bHQudmFsdWVcblx0XHRcdH07XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0dGhpcy5yZWFkZXIucmVsZWFzZUxvY2soKTtcblx0XHRcdHRocm93IGU7XG5cdFx0fVxuXHR9XG5cdGFzeW5jIHJldHVybigpIHtcblx0XHR0aGlzLmVuc3VyZVJlYWRlcigpO1xuXHRcdGlmICh0aGlzLmxvY2tlZCkge1xuXHRcdFx0Y29uc3QgY2FuY2VsUHJvbWlzZSA9IHRoaXMucmVhZGVyLmNhbmNlbCgpO1xuXHRcdFx0dGhpcy5yZWFkZXIucmVsZWFzZUxvY2soKTtcblx0XHRcdGF3YWl0IGNhbmNlbFByb21pc2U7XG5cdFx0fVxuXHRcdHJldHVybiB7XG5cdFx0XHRkb25lOiB0cnVlLFxuXHRcdFx0dmFsdWU6IHZvaWQgMFxuXHRcdH07XG5cdH1cblx0YXN5bmMgdGhyb3coZSkge1xuXHRcdHRoaXMuZW5zdXJlUmVhZGVyKCk7XG5cdFx0aWYgKHRoaXMubG9ja2VkKSB7XG5cdFx0XHRjb25zdCBjYW5jZWxQcm9taXNlID0gdGhpcy5yZWFkZXIuY2FuY2VsKCk7XG5cdFx0XHR0aGlzLnJlYWRlci5yZWxlYXNlTG9jaygpO1xuXHRcdFx0YXdhaXQgY2FuY2VsUHJvbWlzZTtcblx0XHR9XG5cdFx0dGhyb3cgZTtcblx0fVxuXHRhc3luYyBbU3ltYm9sLmFzeW5jRGlzcG9zZV0oKSB7XG5cdFx0YXdhaXQgdGhpcy5yZXR1cm4oKTtcblx0fVxuXHRbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cdHN0YXRpYyBmcm9tUmVhZGFibGVTdHJlYW0oc3RyZWFtKSB7XG5cdFx0Y29uc3QgcmVhZGVyID0gc3RyZWFtLmdldFJlYWRlcigpO1xuXHRcdHJldHVybiBuZXcgSXRlcmFibGVSZWFkYWJsZVN0cmVhbSh7XG5cdFx0XHRzdGFydChjb250cm9sbGVyKSB7XG5cdFx0XHRcdHJldHVybiBwdW1wKCk7XG5cdFx0XHRcdGZ1bmN0aW9uIHB1bXAoKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHJlYWRlci5yZWFkKCkudGhlbigoeyBkb25lLCB2YWx1ZSB9KSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoZG9uZSkge1xuXHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLmNsb3NlKCk7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuZW5xdWV1ZSh2YWx1ZSk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcHVtcCgpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0Y2FuY2VsKCkge1xuXHRcdFx0XHRyZWFkZXIucmVsZWFzZUxvY2soKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXHRzdGF0aWMgZnJvbUFzeW5jR2VuZXJhdG9yKGdlbmVyYXRvcikge1xuXHRcdHJldHVybiBuZXcgSXRlcmFibGVSZWFkYWJsZVN0cmVhbSh7XG5cdFx0XHRhc3luYyBwdWxsKGNvbnRyb2xsZXIpIHtcblx0XHRcdFx0Y29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgZ2VuZXJhdG9yLm5leHQoKTtcblx0XHRcdFx0aWYgKGRvbmUpIGNvbnRyb2xsZXIuY2xvc2UoKTtcblx0XHRcdFx0Y29udHJvbGxlci5lbnF1ZXVlKHZhbHVlKTtcblx0XHRcdH0sXG5cdFx0XHRhc3luYyBjYW5jZWwocmVhc29uKSB7XG5cdFx0XHRcdGF3YWl0IGdlbmVyYXRvci5yZXR1cm4ocmVhc29uKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLCBzdHJlYW1XaXRoUmV0cnkgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0cmVhbS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/dist/utils/stream.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/dist/utils/tools.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/dist/utils/tools.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getToolCallsWithResults: () => (/* binding */ getToolCallsWithResults)\n/* harmony export */ });\n//#region src/utils/tools.ts\n/**\n* Extracts tool calls with their results from a list of messages.\n*\n* @template ToolCall The type of tool calls.\n* @param messages The list of messages to extract tool calls from.\n* @returns An array of ToolCallWithResult objects.\n*\n* @example\n* ```ts\n* const toolCalls = getToolCallsWithResults(messages);\n* for (const { call, result } of toolCalls) {\n*   if (call.name === \"get_weather\") {\n*     console.log(`Weather for ${call.args.location}:`, result?.content);\n*   }\n* }\n* ```\n*/\n/**\n* Computes the lifecycle state of a tool call based on its result.\n*/\nfunction computeToolCallState(result) {\n\tif (!result) return \"pending\";\n\treturn result.status === \"error\" ? \"error\" : \"completed\";\n}\nfunction getToolCallsWithResults(messages) {\n\tconst results = [];\n\tconst toolResultsById = /* @__PURE__ */ new Map();\n\tfor (const msg of messages) if (msg.type === \"tool\") toolResultsById.set(msg.tool_call_id, msg);\n\tfor (const msg of messages) if (msg.type === \"ai\" && msg.tool_calls && msg.tool_calls.length > 0) {\n\t\tconst aiMessage = msg;\n\t\tfor (let i = 0; i < aiMessage.tool_calls.length; i += 1) {\n\t\t\tconst call = aiMessage.tool_calls[i];\n\t\t\tconst callId = call.id;\n\t\t\tconst result = callId ? toolResultsById.get(callId) : void 0;\n\t\t\tresults.push({\n\t\t\t\tid: callId ?? `${aiMessage.id ?? \"unknown\"}-${i}`,\n\t\t\t\tcall,\n\t\t\t\tresult,\n\t\t\t\taiMessage,\n\t\t\t\tindex: i,\n\t\t\t\tstate: computeToolCallState(result)\n\t\t\t});\n\t\t}\n\t}\n\treturn results;\n}\n\n//#endregion\n\n//# sourceMappingURL=tools.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL2Rpc3QvdXRpbHMvdG9vbHMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGVBQWU7QUFDOUI7QUFDQSxpQ0FBaUMsbUJBQW1CO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsaUNBQWlDO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDBCQUEwQixHQUFHLEVBQUU7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNtQztBQUNuQyIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoLXNkay9kaXN0L3V0aWxzL3Rvb2xzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvdXRpbHMvdG9vbHMudHNcbi8qKlxuKiBFeHRyYWN0cyB0b29sIGNhbGxzIHdpdGggdGhlaXIgcmVzdWx0cyBmcm9tIGEgbGlzdCBvZiBtZXNzYWdlcy5cbipcbiogQHRlbXBsYXRlIFRvb2xDYWxsIFRoZSB0eXBlIG9mIHRvb2wgY2FsbHMuXG4qIEBwYXJhbSBtZXNzYWdlcyBUaGUgbGlzdCBvZiBtZXNzYWdlcyB0byBleHRyYWN0IHRvb2wgY2FsbHMgZnJvbS5cbiogQHJldHVybnMgQW4gYXJyYXkgb2YgVG9vbENhbGxXaXRoUmVzdWx0IG9iamVjdHMuXG4qXG4qIEBleGFtcGxlXG4qIGBgYHRzXG4qIGNvbnN0IHRvb2xDYWxscyA9IGdldFRvb2xDYWxsc1dpdGhSZXN1bHRzKG1lc3NhZ2VzKTtcbiogZm9yIChjb25zdCB7IGNhbGwsIHJlc3VsdCB9IG9mIHRvb2xDYWxscykge1xuKiAgIGlmIChjYWxsLm5hbWUgPT09IFwiZ2V0X3dlYXRoZXJcIikge1xuKiAgICAgY29uc29sZS5sb2coYFdlYXRoZXIgZm9yICR7Y2FsbC5hcmdzLmxvY2F0aW9ufTpgLCByZXN1bHQ/LmNvbnRlbnQpO1xuKiAgIH1cbiogfVxuKiBgYGBcbiovXG4vKipcbiogQ29tcHV0ZXMgdGhlIGxpZmVjeWNsZSBzdGF0ZSBvZiBhIHRvb2wgY2FsbCBiYXNlZCBvbiBpdHMgcmVzdWx0LlxuKi9cbmZ1bmN0aW9uIGNvbXB1dGVUb29sQ2FsbFN0YXRlKHJlc3VsdCkge1xuXHRpZiAoIXJlc3VsdCkgcmV0dXJuIFwicGVuZGluZ1wiO1xuXHRyZXR1cm4gcmVzdWx0LnN0YXR1cyA9PT0gXCJlcnJvclwiID8gXCJlcnJvclwiIDogXCJjb21wbGV0ZWRcIjtcbn1cbmZ1bmN0aW9uIGdldFRvb2xDYWxsc1dpdGhSZXN1bHRzKG1lc3NhZ2VzKSB7XG5cdGNvbnN0IHJlc3VsdHMgPSBbXTtcblx0Y29uc3QgdG9vbFJlc3VsdHNCeUlkID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcblx0Zm9yIChjb25zdCBtc2cgb2YgbWVzc2FnZXMpIGlmIChtc2cudHlwZSA9PT0gXCJ0b29sXCIpIHRvb2xSZXN1bHRzQnlJZC5zZXQobXNnLnRvb2xfY2FsbF9pZCwgbXNnKTtcblx0Zm9yIChjb25zdCBtc2cgb2YgbWVzc2FnZXMpIGlmIChtc2cudHlwZSA9PT0gXCJhaVwiICYmIG1zZy50b29sX2NhbGxzICYmIG1zZy50b29sX2NhbGxzLmxlbmd0aCA+IDApIHtcblx0XHRjb25zdCBhaU1lc3NhZ2UgPSBtc2c7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBhaU1lc3NhZ2UudG9vbF9jYWxscy5sZW5ndGg7IGkgKz0gMSkge1xuXHRcdFx0Y29uc3QgY2FsbCA9IGFpTWVzc2FnZS50b29sX2NhbGxzW2ldO1xuXHRcdFx0Y29uc3QgY2FsbElkID0gY2FsbC5pZDtcblx0XHRcdGNvbnN0IHJlc3VsdCA9IGNhbGxJZCA/IHRvb2xSZXN1bHRzQnlJZC5nZXQoY2FsbElkKSA6IHZvaWQgMDtcblx0XHRcdHJlc3VsdHMucHVzaCh7XG5cdFx0XHRcdGlkOiBjYWxsSWQgPz8gYCR7YWlNZXNzYWdlLmlkID8/IFwidW5rbm93blwifS0ke2l9YCxcblx0XHRcdFx0Y2FsbCxcblx0XHRcdFx0cmVzdWx0LFxuXHRcdFx0XHRhaU1lc3NhZ2UsXG5cdFx0XHRcdGluZGV4OiBpLFxuXHRcdFx0XHRzdGF0ZTogY29tcHV0ZVRvb2xDYWxsU3RhdGUocmVzdWx0KVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiByZXN1bHRzO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldFRvb2xDYWxsc1dpdGhSZXN1bHRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b29scy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/dist/utils/tools.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/node_modules/eventemitter3/index.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/node_modules/eventemitter3/index.js ***!
  \***********************************************************************************/
/***/ ((module) => {

eval("\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif (true) {\n  module.exports = EventEmitter;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL25vZGVfbW9kdWxlcy9ldmVudGVtaXR0ZXIzL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsVUFBVTtBQUNyQixXQUFXLEdBQUc7QUFDZCxXQUFXLFNBQVM7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGNBQWM7QUFDekIsV0FBVyxpQkFBaUI7QUFDNUIsV0FBVyxVQUFVO0FBQ3JCLFdBQVcsR0FBRztBQUNkLFdBQVcsU0FBUztBQUNwQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxjQUFjO0FBQ3pCLFdBQVcsaUJBQWlCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxpQkFBaUI7QUFDNUIsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSwwREFBMEQsT0FBTztBQUNqRTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxpQkFBaUI7QUFDNUIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxpQkFBaUI7QUFDNUIsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSwwQ0FBMEMsU0FBUztBQUNuRDtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUEsZ0JBQWdCLFlBQVk7QUFDNUI7O0FBRUE7QUFDQSw0REFBNEQ7QUFDNUQsZ0VBQWdFO0FBQ2hFLG9FQUFvRTtBQUNwRSx3RUFBd0U7QUFDeEU7QUFDQSwyREFBMkQsU0FBUztBQUNwRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxpQkFBaUI7QUFDNUIsV0FBVyxVQUFVO0FBQ3JCLFdBQVcsR0FBRztBQUNkLGFBQWEsY0FBYztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsaUJBQWlCO0FBQzVCLFdBQVcsVUFBVTtBQUNyQixXQUFXLEdBQUc7QUFDZCxhQUFhLGNBQWM7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGlCQUFpQjtBQUM1QixXQUFXLFVBQVU7QUFDckIsV0FBVyxHQUFHO0FBQ2QsV0FBVyxTQUFTO0FBQ3BCLGFBQWEsY0FBYztBQUMzQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osNERBQTRELFlBQVk7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGlCQUFpQjtBQUM1QixhQUFhLGNBQWM7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSSxJQUE2QjtBQUNqQztBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL25vZGVfbW9kdWxlcy9ldmVudGVtaXR0ZXIzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIGhhcyA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHlcbiAgLCBwcmVmaXggPSAnfic7XG5cbi8qKlxuICogQ29uc3RydWN0b3IgdG8gY3JlYXRlIGEgc3RvcmFnZSBmb3Igb3VyIGBFRWAgb2JqZWN0cy5cbiAqIEFuIGBFdmVudHNgIGluc3RhbmNlIGlzIGEgcGxhaW4gb2JqZWN0IHdob3NlIHByb3BlcnRpZXMgYXJlIGV2ZW50IG5hbWVzLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gRXZlbnRzKCkge31cblxuLy9cbi8vIFdlIHRyeSB0byBub3QgaW5oZXJpdCBmcm9tIGBPYmplY3QucHJvdG90eXBlYC4gSW4gc29tZSBlbmdpbmVzIGNyZWF0aW5nIGFuXG4vLyBpbnN0YW5jZSBpbiB0aGlzIHdheSBpcyBmYXN0ZXIgdGhhbiBjYWxsaW5nIGBPYmplY3QuY3JlYXRlKG51bGwpYCBkaXJlY3RseS5cbi8vIElmIGBPYmplY3QuY3JlYXRlKG51bGwpYCBpcyBub3Qgc3VwcG9ydGVkIHdlIHByZWZpeCB0aGUgZXZlbnQgbmFtZXMgd2l0aCBhXG4vLyBjaGFyYWN0ZXIgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIGJ1aWx0LWluIG9iamVjdCBwcm9wZXJ0aWVzIGFyZSBub3Rcbi8vIG92ZXJyaWRkZW4gb3IgdXNlZCBhcyBhbiBhdHRhY2sgdmVjdG9yLlxuLy9cbmlmIChPYmplY3QuY3JlYXRlKSB7XG4gIEV2ZW50cy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gIC8vXG4gIC8vIFRoaXMgaGFjayBpcyBuZWVkZWQgYmVjYXVzZSB0aGUgYF9fcHJvdG9fX2AgcHJvcGVydHkgaXMgc3RpbGwgaW5oZXJpdGVkIGluXG4gIC8vIHNvbWUgb2xkIGJyb3dzZXJzIGxpa2UgQW5kcm9pZCA0LCBpUGhvbmUgNS4xLCBPcGVyYSAxMSBhbmQgU2FmYXJpIDUuXG4gIC8vXG4gIGlmICghbmV3IEV2ZW50cygpLl9fcHJvdG9fXykgcHJlZml4ID0gZmFsc2U7XG59XG5cbi8qKlxuICogUmVwcmVzZW50YXRpb24gb2YgYSBzaW5nbGUgZXZlbnQgbGlzdGVuZXIuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBjb250ZXh0IFRoZSBjb250ZXh0IHRvIGludm9rZSB0aGUgbGlzdGVuZXIgd2l0aC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29uY2U9ZmFsc2VdIFNwZWNpZnkgaWYgdGhlIGxpc3RlbmVyIGlzIGEgb25lLXRpbWUgbGlzdGVuZXIuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIEVFKGZuLCBjb250ZXh0LCBvbmNlKSB7XG4gIHRoaXMuZm4gPSBmbjtcbiAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgdGhpcy5vbmNlID0gb25jZSB8fCBmYWxzZTtcbn1cblxuLyoqXG4gKiBBZGQgYSBsaXN0ZW5lciBmb3IgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0ge0V2ZW50RW1pdHRlcn0gZW1pdHRlciBSZWZlcmVuY2UgdG8gdGhlIGBFdmVudEVtaXR0ZXJgIGluc3RhbmNlLlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBjb250ZXh0IFRoZSBjb250ZXh0IHRvIGludm9rZSB0aGUgbGlzdGVuZXIgd2l0aC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gb25jZSBTcGVjaWZ5IGlmIHRoZSBsaXN0ZW5lciBpcyBhIG9uZS10aW1lIGxpc3RlbmVyLlxuICogQHJldHVybnMge0V2ZW50RW1pdHRlcn1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGFkZExpc3RlbmVyKGVtaXR0ZXIsIGV2ZW50LCBmbiwgY29udGV4dCwgb25jZSkge1xuICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIGxpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICB9XG5cbiAgdmFyIGxpc3RlbmVyID0gbmV3IEVFKGZuLCBjb250ZXh0IHx8IGVtaXR0ZXIsIG9uY2UpXG4gICAgLCBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50O1xuXG4gIGlmICghZW1pdHRlci5fZXZlbnRzW2V2dF0pIGVtaXR0ZXIuX2V2ZW50c1tldnRdID0gbGlzdGVuZXIsIGVtaXR0ZXIuX2V2ZW50c0NvdW50Kys7XG4gIGVsc2UgaWYgKCFlbWl0dGVyLl9ldmVudHNbZXZ0XS5mbikgZW1pdHRlci5fZXZlbnRzW2V2dF0ucHVzaChsaXN0ZW5lcik7XG4gIGVsc2UgZW1pdHRlci5fZXZlbnRzW2V2dF0gPSBbZW1pdHRlci5fZXZlbnRzW2V2dF0sIGxpc3RlbmVyXTtcblxuICByZXR1cm4gZW1pdHRlcjtcbn1cblxuLyoqXG4gKiBDbGVhciBldmVudCBieSBuYW1lLlxuICpcbiAqIEBwYXJhbSB7RXZlbnRFbWl0dGVyfSBlbWl0dGVyIFJlZmVyZW5jZSB0byB0aGUgYEV2ZW50RW1pdHRlcmAgaW5zdGFuY2UuXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZ0IFRoZSBFdmVudCBuYW1lLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY2xlYXJFdmVudChlbWl0dGVyLCBldnQpIHtcbiAgaWYgKC0tZW1pdHRlci5fZXZlbnRzQ291bnQgPT09IDApIGVtaXR0ZXIuX2V2ZW50cyA9IG5ldyBFdmVudHMoKTtcbiAgZWxzZSBkZWxldGUgZW1pdHRlci5fZXZlbnRzW2V2dF07XG59XG5cbi8qKlxuICogTWluaW1hbCBgRXZlbnRFbWl0dGVyYCBpbnRlcmZhY2UgdGhhdCBpcyBtb2xkZWQgYWdhaW5zdCB0aGUgTm9kZS5qc1xuICogYEV2ZW50RW1pdHRlcmAgaW50ZXJmYWNlLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gIHRoaXMuX2V2ZW50cyA9IG5ldyBFdmVudHMoKTtcbiAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xufVxuXG4vKipcbiAqIFJldHVybiBhbiBhcnJheSBsaXN0aW5nIHRoZSBldmVudHMgZm9yIHdoaWNoIHRoZSBlbWl0dGVyIGhhcyByZWdpc3RlcmVkXG4gKiBsaXN0ZW5lcnMuXG4gKlxuICogQHJldHVybnMge0FycmF5fVxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmV2ZW50TmFtZXMgPSBmdW5jdGlvbiBldmVudE5hbWVzKCkge1xuICB2YXIgbmFtZXMgPSBbXVxuICAgICwgZXZlbnRzXG4gICAgLCBuYW1lO1xuXG4gIGlmICh0aGlzLl9ldmVudHNDb3VudCA9PT0gMCkgcmV0dXJuIG5hbWVzO1xuXG4gIGZvciAobmFtZSBpbiAoZXZlbnRzID0gdGhpcy5fZXZlbnRzKSkge1xuICAgIGlmIChoYXMuY2FsbChldmVudHMsIG5hbWUpKSBuYW1lcy5wdXNoKHByZWZpeCA/IG5hbWUuc2xpY2UoMSkgOiBuYW1lKTtcbiAgfVxuXG4gIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG4gICAgcmV0dXJuIG5hbWVzLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGV2ZW50cykpO1xuICB9XG5cbiAgcmV0dXJuIG5hbWVzO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gdGhlIGxpc3RlbmVycyByZWdpc3RlcmVkIGZvciBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEByZXR1cm5zIHtBcnJheX0gVGhlIHJlZ2lzdGVyZWQgbGlzdGVuZXJzLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uIGxpc3RlbmVycyhldmVudCkge1xuICB2YXIgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudFxuICAgICwgaGFuZGxlcnMgPSB0aGlzLl9ldmVudHNbZXZ0XTtcblxuICBpZiAoIWhhbmRsZXJzKSByZXR1cm4gW107XG4gIGlmIChoYW5kbGVycy5mbikgcmV0dXJuIFtoYW5kbGVycy5mbl07XG5cbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBoYW5kbGVycy5sZW5ndGgsIGVlID0gbmV3IEFycmF5KGwpOyBpIDwgbDsgaSsrKSB7XG4gICAgZWVbaV0gPSBoYW5kbGVyc1tpXS5mbjtcbiAgfVxuXG4gIHJldHVybiBlZTtcbn07XG5cbi8qKlxuICogUmV0dXJuIHRoZSBudW1iZXIgb2YgbGlzdGVuZXJzIGxpc3RlbmluZyB0byBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBudW1iZXIgb2YgbGlzdGVuZXJzLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbiBsaXN0ZW5lckNvdW50KGV2ZW50KSB7XG4gIHZhciBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50XG4gICAgLCBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbZXZ0XTtcblxuICBpZiAoIWxpc3RlbmVycykgcmV0dXJuIDA7XG4gIGlmIChsaXN0ZW5lcnMuZm4pIHJldHVybiAxO1xuICByZXR1cm4gbGlzdGVuZXJzLmxlbmd0aDtcbn07XG5cbi8qKlxuICogQ2FsbHMgZWFjaCBvZiB0aGUgbGlzdGVuZXJzIHJlZ2lzdGVyZWQgZm9yIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHJldHVybnMge0Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgZXZlbnQgaGFkIGxpc3RlbmVycywgZWxzZSBgZmFsc2VgLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiBlbWl0KGV2ZW50LCBhMSwgYTIsIGEzLCBhNCwgYTUpIHtcbiAgdmFyIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnQ7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHNbZXZ0XSkgcmV0dXJuIGZhbHNlO1xuXG4gIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbZXZ0XVxuICAgICwgbGVuID0gYXJndW1lbnRzLmxlbmd0aFxuICAgICwgYXJnc1xuICAgICwgaTtcblxuICBpZiAobGlzdGVuZXJzLmZuKSB7XG4gICAgaWYgKGxpc3RlbmVycy5vbmNlKSB0aGlzLnJlbW92ZUxpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcnMuZm4sIHVuZGVmaW5lZCwgdHJ1ZSk7XG5cbiAgICBzd2l0Y2ggKGxlbikge1xuICAgICAgY2FzZSAxOiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQpLCB0cnVlO1xuICAgICAgY2FzZSAyOiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExKSwgdHJ1ZTtcbiAgICAgIGNhc2UgMzogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIpLCB0cnVlO1xuICAgICAgY2FzZSA0OiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExLCBhMiwgYTMpLCB0cnVlO1xuICAgICAgY2FzZSA1OiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExLCBhMiwgYTMsIGE0KSwgdHJ1ZTtcbiAgICAgIGNhc2UgNjogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIsIGEzLCBhNCwgYTUpLCB0cnVlO1xuICAgIH1cblxuICAgIGZvciAoaSA9IDEsIGFyZ3MgPSBuZXcgQXJyYXkobGVuIC0xKTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICB9XG5cbiAgICBsaXN0ZW5lcnMuZm4uYXBwbHkobGlzdGVuZXJzLmNvbnRleHQsIGFyZ3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBsZW5ndGggPSBsaXN0ZW5lcnMubGVuZ3RoXG4gICAgICAsIGo7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChsaXN0ZW5lcnNbaV0ub25jZSkgdGhpcy5yZW1vdmVMaXN0ZW5lcihldmVudCwgbGlzdGVuZXJzW2ldLmZuLCB1bmRlZmluZWQsIHRydWUpO1xuXG4gICAgICBzd2l0Y2ggKGxlbikge1xuICAgICAgICBjYXNlIDE6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0KTsgYnJlYWs7XG4gICAgICAgIGNhc2UgMjogbGlzdGVuZXJzW2ldLmZuLmNhbGwobGlzdGVuZXJzW2ldLmNvbnRleHQsIGExKTsgYnJlYWs7XG4gICAgICAgIGNhc2UgMzogbGlzdGVuZXJzW2ldLmZuLmNhbGwobGlzdGVuZXJzW2ldLmNvbnRleHQsIGExLCBhMik7IGJyZWFrO1xuICAgICAgICBjYXNlIDQ6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0LCBhMSwgYTIsIGEzKTsgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgaWYgKCFhcmdzKSBmb3IgKGogPSAxLCBhcmdzID0gbmV3IEFycmF5KGxlbiAtMSk7IGogPCBsZW47IGorKykge1xuICAgICAgICAgICAgYXJnc1tqIC0gMV0gPSBhcmd1bWVudHNbal07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGlzdGVuZXJzW2ldLmZuLmFwcGx5KGxpc3RlbmVyc1tpXS5jb250ZXh0LCBhcmdzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbi8qKlxuICogQWRkIGEgbGlzdGVuZXIgZm9yIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBbY29udGV4dD10aGlzXSBUaGUgY29udGV4dCB0byBpbnZva2UgdGhlIGxpc3RlbmVyIHdpdGguXG4gKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSBgdGhpc2AuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiBvbihldmVudCwgZm4sIGNvbnRleHQpIHtcbiAgcmV0dXJuIGFkZExpc3RlbmVyKHRoaXMsIGV2ZW50LCBmbiwgY29udGV4dCwgZmFsc2UpO1xufTtcblxuLyoqXG4gKiBBZGQgYSBvbmUtdGltZSBsaXN0ZW5lciBmb3IgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyp9IFtjb250ZXh0PXRoaXNdIFRoZSBjb250ZXh0IHRvIGludm9rZSB0aGUgbGlzdGVuZXIgd2l0aC5cbiAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IGB0aGlzYC5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gb25jZShldmVudCwgZm4sIGNvbnRleHQpIHtcbiAgcmV0dXJuIGFkZExpc3RlbmVyKHRoaXMsIGV2ZW50LCBmbiwgY29udGV4dCwgdHJ1ZSk7XG59O1xuXG4vKipcbiAqIFJlbW92ZSB0aGUgbGlzdGVuZXJzIG9mIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gT25seSByZW1vdmUgdGhlIGxpc3RlbmVycyB0aGF0IG1hdGNoIHRoaXMgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyp9IGNvbnRleHQgT25seSByZW1vdmUgdGhlIGxpc3RlbmVycyB0aGF0IGhhdmUgdGhpcyBjb250ZXh0LlxuICogQHBhcmFtIHtCb29sZWFufSBvbmNlIE9ubHkgcmVtb3ZlIG9uZS10aW1lIGxpc3RlbmVycy5cbiAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IGB0aGlzYC5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKGV2ZW50LCBmbiwgY29udGV4dCwgb25jZSkge1xuICB2YXIgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudDtcblxuICBpZiAoIXRoaXMuX2V2ZW50c1tldnRdKSByZXR1cm4gdGhpcztcbiAgaWYgKCFmbikge1xuICAgIGNsZWFyRXZlbnQodGhpcywgZXZ0KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbZXZ0XTtcblxuICBpZiAobGlzdGVuZXJzLmZuKSB7XG4gICAgaWYgKFxuICAgICAgbGlzdGVuZXJzLmZuID09PSBmbiAmJlxuICAgICAgKCFvbmNlIHx8IGxpc3RlbmVycy5vbmNlKSAmJlxuICAgICAgKCFjb250ZXh0IHx8IGxpc3RlbmVycy5jb250ZXh0ID09PSBjb250ZXh0KVxuICAgICkge1xuICAgICAgY2xlYXJFdmVudCh0aGlzLCBldnQpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBmb3IgKHZhciBpID0gMCwgZXZlbnRzID0gW10sIGxlbmd0aCA9IGxpc3RlbmVycy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaWYgKFxuICAgICAgICBsaXN0ZW5lcnNbaV0uZm4gIT09IGZuIHx8XG4gICAgICAgIChvbmNlICYmICFsaXN0ZW5lcnNbaV0ub25jZSkgfHxcbiAgICAgICAgKGNvbnRleHQgJiYgbGlzdGVuZXJzW2ldLmNvbnRleHQgIT09IGNvbnRleHQpXG4gICAgICApIHtcbiAgICAgICAgZXZlbnRzLnB1c2gobGlzdGVuZXJzW2ldKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvL1xuICAgIC8vIFJlc2V0IHRoZSBhcnJheSwgb3IgcmVtb3ZlIGl0IGNvbXBsZXRlbHkgaWYgd2UgaGF2ZSBubyBtb3JlIGxpc3RlbmVycy5cbiAgICAvL1xuICAgIGlmIChldmVudHMubGVuZ3RoKSB0aGlzLl9ldmVudHNbZXZ0XSA9IGV2ZW50cy5sZW5ndGggPT09IDEgPyBldmVudHNbMF0gOiBldmVudHM7XG4gICAgZWxzZSBjbGVhckV2ZW50KHRoaXMsIGV2dCk7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmVtb3ZlIGFsbCBsaXN0ZW5lcnMsIG9yIHRob3NlIG9mIHRoZSBzcGVjaWZpZWQgZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IFtldmVudF0gVGhlIGV2ZW50IG5hbWUuXG4gKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSBgdGhpc2AuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID0gZnVuY3Rpb24gcmVtb3ZlQWxsTGlzdGVuZXJzKGV2ZW50KSB7XG4gIHZhciBldnQ7XG5cbiAgaWYgKGV2ZW50KSB7XG4gICAgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudDtcbiAgICBpZiAodGhpcy5fZXZlbnRzW2V2dF0pIGNsZWFyRXZlbnQodGhpcywgZXZ0KTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLl9ldmVudHMgPSBuZXcgRXZlbnRzKCk7XG4gICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vL1xuLy8gQWxpYXMgbWV0aG9kcyBuYW1lcyBiZWNhdXNlIHBlb3BsZSByb2xsIGxpa2UgdGhhdC5cbi8vXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI7XG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbjtcblxuLy9cbi8vIEV4cG9zZSB0aGUgcHJlZml4LlxuLy9cbkV2ZW50RW1pdHRlci5wcmVmaXhlZCA9IHByZWZpeDtcblxuLy9cbi8vIEFsbG93IGBFdmVudEVtaXR0ZXJgIHRvIGJlIGltcG9ydGVkIGFzIG1vZHVsZSBuYW1lc3BhY2UuXG4vL1xuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuLy9cbi8vIEV4cG9zZSB0aGUgbW9kdWxlLlxuLy9cbmlmICgndW5kZWZpbmVkJyAhPT0gdHlwZW9mIG1vZHVsZSkge1xuICBtb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/node_modules/eventemitter3/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/node_modules/eventemitter3/index.mjs":
/*!************************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/node_modules/eventemitter3/index.mjs ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EventEmitter: () => (/* reexport default export from named module */ _index_js__WEBPACK_IMPORTED_MODULE_0__),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/node_modules/eventemitter3/index.js\");\n\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_index_js__WEBPACK_IMPORTED_MODULE_0__);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL25vZGVfbW9kdWxlcy9ldmVudGVtaXR0ZXIzL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUM7O0FBRWQ7QUFDdkIsaUVBQWUsc0NBQVkiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC1zZGsvbm9kZV9tb2R1bGVzL2V2ZW50ZW1pdHRlcjMvaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBFdmVudEVtaXR0ZXIgZnJvbSAnLi9pbmRleC5qcydcblxuZXhwb3J0IHsgRXZlbnRFbWl0dGVyIH1cbmV4cG9ydCBkZWZhdWx0IEV2ZW50RW1pdHRlclxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/node_modules/eventemitter3/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/node_modules/p-queue/dist/index.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/node_modules/p-queue/dist/index.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TimeoutError: () => (/* reexport safe */ p_timeout__WEBPACK_IMPORTED_MODULE_2__.TimeoutError),\n/* harmony export */   \"default\": () => (/* binding */ PQueue)\n/* harmony export */ });\n/* harmony import */ var eventemitter3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! eventemitter3 */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/node_modules/eventemitter3/index.mjs\");\n/* harmony import */ var p_timeout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! p-timeout */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/node_modules/p-timeout/index.js\");\n/* harmony import */ var _priority_queue_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./priority-queue.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/node_modules/p-queue/dist/priority-queue.js\");\n\n\n\n/**\nPromise queue with concurrency control.\n*/\nclass PQueue extends eventemitter3__WEBPACK_IMPORTED_MODULE_0__.EventEmitter {\n    #carryoverIntervalCount;\n    #isIntervalIgnored;\n    #intervalCount = 0;\n    #intervalCap;\n    #rateLimitedInInterval = false;\n    #rateLimitFlushScheduled = false;\n    #interval;\n    #intervalEnd = 0;\n    #lastExecutionTime = 0;\n    #intervalId;\n    #timeoutId;\n    #strict;\n    // Circular buffer implementation for better performance\n    #strictTicks = [];\n    #strictTicksStartIndex = 0;\n    #queue;\n    #queueClass;\n    #pending = 0;\n    // The `!` is needed because of https://github.com/microsoft/TypeScript/issues/32194\n    #concurrency;\n    #isPaused;\n    // Use to assign a unique identifier to a promise function, if not explicitly specified\n    #idAssigner = 1n;\n    // Track currently running tasks for debugging\n    #runningTasks = new Map();\n    /**\n    Get or set the default timeout for all tasks. Can be changed at runtime.\n\n    Operations will throw a `TimeoutError` if they don't complete within the specified time.\n\n    The timeout begins when the operation is dequeued and starts execution, not while it's waiting in the queue.\n\n    @example\n    ```\n    const queue = new PQueue({timeout: 5000});\n\n    // Change timeout for all future tasks\n    queue.timeout = 10000;\n    ```\n    */\n    timeout;\n    constructor(options) {\n        super();\n        // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n        options = {\n            carryoverIntervalCount: false,\n            intervalCap: Number.POSITIVE_INFINITY,\n            interval: 0,\n            concurrency: Number.POSITIVE_INFINITY,\n            autoStart: true,\n            queueClass: _priority_queue_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n            strict: false,\n            ...options,\n        };\n        if (!(typeof options.intervalCap === 'number' && options.intervalCap >= 1)) {\n            throw new TypeError(`Expected \\`intervalCap\\` to be a number from 1 and up, got \\`${options.intervalCap?.toString() ?? ''}\\` (${typeof options.intervalCap})`);\n        }\n        if (options.interval === undefined || !(Number.isFinite(options.interval) && options.interval >= 0)) {\n            throw new TypeError(`Expected \\`interval\\` to be a finite number >= 0, got \\`${options.interval?.toString() ?? ''}\\` (${typeof options.interval})`);\n        }\n        if (options.strict && options.interval === 0) {\n            throw new TypeError('The `strict` option requires a non-zero `interval`');\n        }\n        if (options.strict && options.intervalCap === Number.POSITIVE_INFINITY) {\n            throw new TypeError('The `strict` option requires a finite `intervalCap`');\n        }\n        // TODO: Remove this fallback in the next major version\n        // eslint-disable-next-line @typescript-eslint/no-deprecated\n        this.#carryoverIntervalCount = options.carryoverIntervalCount ?? options.carryoverConcurrencyCount ?? false;\n        this.#isIntervalIgnored = options.intervalCap === Number.POSITIVE_INFINITY || options.interval === 0;\n        this.#intervalCap = options.intervalCap;\n        this.#interval = options.interval;\n        this.#strict = options.strict;\n        this.#queue = new options.queueClass();\n        this.#queueClass = options.queueClass;\n        this.concurrency = options.concurrency;\n        if (options.timeout !== undefined && !(Number.isFinite(options.timeout) && options.timeout > 0)) {\n            throw new TypeError(`Expected \\`timeout\\` to be a positive finite number, got \\`${options.timeout}\\` (${typeof options.timeout})`);\n        }\n        this.timeout = options.timeout;\n        this.#isPaused = options.autoStart === false;\n        this.#setupRateLimitTracking();\n    }\n    #cleanupStrictTicks(now) {\n        // Remove ticks outside the current interval window using circular buffer approach\n        while (this.#strictTicksStartIndex < this.#strictTicks.length) {\n            const oldestTick = this.#strictTicks[this.#strictTicksStartIndex];\n            if (oldestTick !== undefined && now - oldestTick >= this.#interval) {\n                this.#strictTicksStartIndex++;\n            }\n            else {\n                break;\n            }\n        }\n        // Compact the array when it becomes inefficient or fully consumed\n        // Compact when: (start index is large AND more than half wasted) OR all ticks expired\n        const shouldCompact = (this.#strictTicksStartIndex > 100 && this.#strictTicksStartIndex > this.#strictTicks.length / 2)\n            || this.#strictTicksStartIndex === this.#strictTicks.length;\n        if (shouldCompact) {\n            this.#strictTicks = this.#strictTicks.slice(this.#strictTicksStartIndex);\n            this.#strictTicksStartIndex = 0;\n        }\n    }\n    // Helper methods for interval consumption\n    #consumeIntervalSlot(now) {\n        if (this.#strict) {\n            this.#strictTicks.push(now);\n        }\n        else {\n            this.#intervalCount++;\n        }\n    }\n    #rollbackIntervalSlot() {\n        if (this.#strict) {\n            // Pop from the end of the actual data (not from start index)\n            if (this.#strictTicks.length > this.#strictTicksStartIndex) {\n                this.#strictTicks.pop();\n            }\n        }\n        else if (this.#intervalCount > 0) {\n            this.#intervalCount--;\n        }\n    }\n    #getActiveTicksCount() {\n        return this.#strictTicks.length - this.#strictTicksStartIndex;\n    }\n    get #doesIntervalAllowAnother() {\n        if (this.#isIntervalIgnored) {\n            return true;\n        }\n        if (this.#strict) {\n            // Cleanup already done by #isIntervalPausedAt before this is called\n            return this.#getActiveTicksCount() < this.#intervalCap;\n        }\n        return this.#intervalCount < this.#intervalCap;\n    }\n    get #doesConcurrentAllowAnother() {\n        return this.#pending < this.#concurrency;\n    }\n    #next() {\n        this.#pending--;\n        if (this.#pending === 0) {\n            this.emit('pendingZero');\n        }\n        this.#tryToStartAnother();\n        this.emit('next');\n    }\n    #onResumeInterval() {\n        // Clear timeout ID before processing to prevent race condition\n        // Must clear before #onInterval to allow new timeouts to be scheduled\n        this.#timeoutId = undefined;\n        this.#onInterval();\n        this.#initializeIntervalIfNeeded();\n    }\n    #isIntervalPausedAt(now) {\n        // Strict mode: check if we need to wait for oldest tick to age out\n        if (this.#strict) {\n            this.#cleanupStrictTicks(now);\n            // If at capacity, need to wait for oldest tick to age out\n            const activeTicksCount = this.#getActiveTicksCount();\n            if (activeTicksCount >= this.#intervalCap) {\n                const oldestTick = this.#strictTicks[this.#strictTicksStartIndex];\n                // After cleanup, remaining ticks are within interval, so delay is always > 0\n                const delay = this.#interval - (now - oldestTick);\n                this.#createIntervalTimeout(delay);\n                return true;\n            }\n            return false;\n        }\n        // Fixed window mode (original logic)\n        if (this.#intervalId === undefined) {\n            const delay = this.#intervalEnd - now;\n            if (delay < 0) {\n                // If the interval has expired while idle, check if we should enforce the interval\n                // from the last task execution. This ensures proper spacing between tasks even\n                // when the queue becomes empty and then new tasks are added.\n                if (this.#lastExecutionTime > 0) {\n                    const timeSinceLastExecution = now - this.#lastExecutionTime;\n                    if (timeSinceLastExecution < this.#interval) {\n                        // Not enough time has passed since the last task execution\n                        this.#createIntervalTimeout(this.#interval - timeSinceLastExecution);\n                        return true;\n                    }\n                }\n                // Enough time has passed or no previous execution, allow execution\n                this.#intervalCount = (this.#carryoverIntervalCount) ? this.#pending : 0;\n            }\n            else {\n                // Act as the interval is pending\n                this.#createIntervalTimeout(delay);\n                return true;\n            }\n        }\n        return false;\n    }\n    #createIntervalTimeout(delay) {\n        if (this.#timeoutId !== undefined) {\n            return;\n        }\n        this.#timeoutId = setTimeout(() => {\n            this.#onResumeInterval();\n        }, delay);\n    }\n    #clearIntervalTimer() {\n        if (this.#intervalId) {\n            clearInterval(this.#intervalId);\n            this.#intervalId = undefined;\n        }\n    }\n    #clearTimeoutTimer() {\n        if (this.#timeoutId) {\n            clearTimeout(this.#timeoutId);\n            this.#timeoutId = undefined;\n        }\n    }\n    #tryToStartAnother() {\n        if (this.#queue.size === 0) {\n            // We can clear the interval (\"pause\")\n            // Because we can redo it later (\"resume\")\n            this.#clearIntervalTimer();\n            this.emit('empty');\n            if (this.#pending === 0) {\n                // Clear timeout as well when completely idle\n                this.#clearTimeoutTimer();\n                // Compact strict ticks when idle to free memory\n                if (this.#strict && this.#strictTicksStartIndex > 0) {\n                    const now = Date.now();\n                    this.#cleanupStrictTicks(now);\n                }\n                this.emit('idle');\n            }\n            return false;\n        }\n        let taskStarted = false;\n        if (!this.#isPaused) {\n            const now = Date.now();\n            const canInitializeInterval = !this.#isIntervalPausedAt(now);\n            if (this.#doesIntervalAllowAnother && this.#doesConcurrentAllowAnother) {\n                const job = this.#queue.dequeue();\n                if (!this.#isIntervalIgnored) {\n                    this.#consumeIntervalSlot(now);\n                    this.#scheduleRateLimitUpdate();\n                }\n                this.emit('active');\n                job();\n                if (canInitializeInterval) {\n                    this.#initializeIntervalIfNeeded();\n                }\n                taskStarted = true;\n            }\n        }\n        return taskStarted;\n    }\n    #initializeIntervalIfNeeded() {\n        if (this.#isIntervalIgnored || this.#intervalId !== undefined) {\n            return;\n        }\n        // Strict mode uses timeouts instead of interval timers\n        if (this.#strict) {\n            return;\n        }\n        this.#intervalId = setInterval(() => {\n            this.#onInterval();\n        }, this.#interval);\n        this.#intervalEnd = Date.now() + this.#interval;\n    }\n    #onInterval() {\n        // Non-strict mode uses interval timers and intervalCount\n        if (!this.#strict) {\n            if (this.#intervalCount === 0 && this.#pending === 0 && this.#intervalId) {\n                this.#clearIntervalTimer();\n            }\n            this.#intervalCount = this.#carryoverIntervalCount ? this.#pending : 0;\n        }\n        this.#processQueue();\n        this.#scheduleRateLimitUpdate();\n    }\n    /**\n    Executes all queued functions until it reaches the limit.\n    */\n    #processQueue() {\n        // eslint-disable-next-line no-empty\n        while (this.#tryToStartAnother()) { }\n    }\n    get concurrency() {\n        return this.#concurrency;\n    }\n    set concurrency(newConcurrency) {\n        if (!(typeof newConcurrency === 'number' && newConcurrency >= 1)) {\n            throw new TypeError(`Expected \\`concurrency\\` to be a number from 1 and up, got \\`${newConcurrency}\\` (${typeof newConcurrency})`);\n        }\n        this.#concurrency = newConcurrency;\n        this.#processQueue();\n    }\n    /**\n    Updates the priority of a promise function by its id, affecting its execution order. Requires a defined concurrency limit to take effect.\n\n    For example, this can be used to prioritize a promise function to run earlier.\n\n    ```js\n    import PQueue from 'p-queue';\n\n    const queue = new PQueue({concurrency: 1});\n\n    queue.add(async () => '', {priority: 1});\n    queue.add(async () => '', {priority: 0, id: ''});\n    queue.add(async () => '', {priority: 1});\n    queue.add(async () => '', {priority: 1});\n\n    queue.setPriority('', 2);\n    ```\n\n    In this case, the promise function with `id: ''` runs second.\n\n    You can also deprioritize a promise function to delay its execution:\n\n    ```js\n    import PQueue from 'p-queue';\n\n    const queue = new PQueue({concurrency: 1});\n\n    queue.add(async () => '', {priority: 1});\n    queue.add(async () => '', {priority: 1, id: ''});\n    queue.add(async () => '');\n    queue.add(async () => '', {priority: 0});\n\n    queue.setPriority('', -1);\n    ```\n    Here, the promise function with `id: ''` executes last.\n    */\n    setPriority(id, priority) {\n        if (typeof priority !== 'number' || !Number.isFinite(priority)) {\n            throw new TypeError(`Expected \\`priority\\` to be a finite number, got \\`${priority}\\` (${typeof priority})`);\n        }\n        this.#queue.setPriority(id, priority);\n    }\n    async add(function_, options = {}) {\n        // Create a copy to avoid mutating the original options object\n        options = {\n            timeout: this.timeout,\n            ...options,\n            // Assign unique ID if not provided\n            id: options.id ?? (this.#idAssigner++).toString(),\n        };\n        return new Promise((resolve, reject) => {\n            // Create a unique symbol for tracking this task\n            const taskSymbol = Symbol(`task-${options.id}`);\n            this.#queue.enqueue(async () => {\n                this.#pending++;\n                // Track this running task\n                this.#runningTasks.set(taskSymbol, {\n                    id: options.id,\n                    priority: options.priority ?? 0, // Match priority-queue default\n                    startTime: Date.now(),\n                    timeout: options.timeout,\n                });\n                let eventListener;\n                try {\n                    // Check abort signal - if aborted, need to decrement the counter\n                    // that was incremented in tryToStartAnother\n                    try {\n                        options.signal?.throwIfAborted();\n                    }\n                    catch (error) {\n                        this.#rollbackIntervalConsumption();\n                        // Clean up tracking before throwing\n                        this.#runningTasks.delete(taskSymbol);\n                        throw error;\n                    }\n                    this.#lastExecutionTime = Date.now();\n                    let operation = function_({ signal: options.signal });\n                    if (options.timeout) {\n                        operation = (0,p_timeout__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(Promise.resolve(operation), {\n                            milliseconds: options.timeout,\n                            message: `Task timed out after ${options.timeout}ms (queue has ${this.#pending} running, ${this.#queue.size} waiting)`,\n                        });\n                    }\n                    if (options.signal) {\n                        const { signal } = options;\n                        operation = Promise.race([operation, new Promise((_resolve, reject) => {\n                                eventListener = () => {\n                                    reject(signal.reason);\n                                };\n                                signal.addEventListener('abort', eventListener, { once: true });\n                            })]);\n                    }\n                    const result = await operation;\n                    resolve(result);\n                    this.emit('completed', result);\n                }\n                catch (error) {\n                    reject(error);\n                    this.emit('error', error);\n                }\n                finally {\n                    // Clean up abort event listener\n                    if (eventListener) {\n                        options.signal?.removeEventListener('abort', eventListener);\n                    }\n                    // Remove from running tasks\n                    this.#runningTasks.delete(taskSymbol);\n                    // Use queueMicrotask to prevent deep recursion while maintaining timing\n                    queueMicrotask(() => {\n                        this.#next();\n                    });\n                }\n            }, options);\n            this.emit('add');\n            this.#tryToStartAnother();\n        });\n    }\n    async addAll(functions, options) {\n        return Promise.all(functions.map(async (function_) => this.add(function_, options)));\n    }\n    /**\n    Start (or resume) executing enqueued tasks within concurrency limit. No need to call this if queue is not paused (via `options.autoStart = false` or by `.pause()` method.)\n    */\n    start() {\n        if (!this.#isPaused) {\n            return this;\n        }\n        this.#isPaused = false;\n        this.#processQueue();\n        return this;\n    }\n    /**\n    Put queue execution on hold.\n    */\n    pause() {\n        this.#isPaused = true;\n    }\n    /**\n    Clear the queue.\n    */\n    clear() {\n        this.#queue = new this.#queueClass();\n        // Clear interval timer since queue is now empty (consistent with #tryToStartAnother)\n        this.#clearIntervalTimer();\n        // Note: We preserve strict mode rate-limiting state (ticks and timeout)\n        // because clear() only clears queued tasks, not rate limit history.\n        // This ensures that rate limits are still enforced after clearing the queue.\n        // Note: We don't clear #runningTasks as those tasks are still running\n        // They will be removed when they complete in the finally block\n        // Force synchronous update since clear() should have immediate effect\n        this.#updateRateLimitState();\n        // Emit events so waiters (onEmpty, onIdle, onSizeLessThan) can resolve\n        this.emit('empty');\n        if (this.#pending === 0) {\n            this.#clearTimeoutTimer();\n            this.emit('idle');\n        }\n        this.emit('next');\n    }\n    /**\n    Can be called multiple times. Useful if you for example add additional items at a later time.\n\n    @returns A promise that settles when the queue becomes empty.\n    */\n    async onEmpty() {\n        // Instantly resolve if the queue is empty\n        if (this.#queue.size === 0) {\n            return;\n        }\n        await this.#onEvent('empty');\n    }\n    /**\n    @returns A promise that settles when the queue size is less than the given limit: `queue.size < limit`.\n\n    If you want to avoid having the queue grow beyond a certain size you can `await queue.onSizeLessThan()` before adding a new item.\n\n    Note that this only limits the number of items waiting to start. There could still be up to `concurrency` jobs already running that this call does not include in its calculation.\n    */\n    async onSizeLessThan(limit) {\n        // Instantly resolve if the queue is empty.\n        if (this.#queue.size < limit) {\n            return;\n        }\n        await this.#onEvent('next', () => this.#queue.size < limit);\n    }\n    /**\n    The difference with `.onEmpty` is that `.onIdle` guarantees that all work from the queue has finished. `.onEmpty` merely signals that the queue is empty, but it could mean that some promises haven't completed yet.\n\n    @returns A promise that settles when the queue becomes empty, and all promises have completed; `queue.size === 0 && queue.pending === 0`.\n    */\n    async onIdle() {\n        // Instantly resolve if none pending and if nothing else is queued\n        if (this.#pending === 0 && this.#queue.size === 0) {\n            return;\n        }\n        await this.#onEvent('idle');\n    }\n    /**\n    The difference with `.onIdle` is that `.onPendingZero` only waits for currently running tasks to finish, ignoring queued tasks.\n\n    @returns A promise that settles when all currently running tasks have completed; `queue.pending === 0`.\n    */\n    async onPendingZero() {\n        if (this.#pending === 0) {\n            return;\n        }\n        await this.#onEvent('pendingZero');\n    }\n    /**\n    @returns A promise that settles when the queue becomes rate-limited due to intervalCap.\n    */\n    async onRateLimit() {\n        if (this.isRateLimited) {\n            return;\n        }\n        await this.#onEvent('rateLimit');\n    }\n    /**\n    @returns A promise that settles when the queue is no longer rate-limited.\n    */\n    async onRateLimitCleared() {\n        if (!this.isRateLimited) {\n            return;\n        }\n        await this.#onEvent('rateLimitCleared');\n    }\n    /**\n    @returns A promise that rejects when any task in the queue errors.\n\n    Use with `Promise.race([queue.onError(), queue.onIdle()])` to fail fast on the first error while still resolving normally when the queue goes idle.\n\n    Important: The promise returned by `add()` still rejects. You must handle each `add()` promise (for example, `.catch(() => {})`) to avoid unhandled rejections.\n\n    @example\n    ```\n    import PQueue from 'p-queue';\n\n    const queue = new PQueue({concurrency: 2});\n\n    queue.add(() => fetchData(1)).catch(() => {});\n    queue.add(() => fetchData(2)).catch(() => {});\n    queue.add(() => fetchData(3)).catch(() => {});\n\n    // Stop processing on first error\n    try {\n        await Promise.race([\n            queue.onError(),\n            queue.onIdle()\n        ]);\n    } catch (error) {\n        queue.pause(); // Stop processing remaining tasks\n        console.error('Queue failed:', error);\n    }\n    ```\n    */\n    // eslint-disable-next-line @typescript-eslint/promise-function-async\n    onError() {\n        return new Promise((_resolve, reject) => {\n            const handleError = (error) => {\n                this.off('error', handleError);\n                reject(error);\n            };\n            this.on('error', handleError);\n        });\n    }\n    async #onEvent(event, filter) {\n        return new Promise(resolve => {\n            const listener = () => {\n                if (filter && !filter()) {\n                    return;\n                }\n                this.off(event, listener);\n                resolve();\n            };\n            this.on(event, listener);\n        });\n    }\n    /**\n    Size of the queue, the number of queued items waiting to run.\n    */\n    get size() {\n        return this.#queue.size;\n    }\n    /**\n    Size of the queue, filtered by the given options.\n\n    For example, this can be used to find the number of items remaining in the queue with a specific priority level.\n    */\n    sizeBy(options) {\n        // eslint-disable-next-line unicorn/no-array-callback-reference\n        return this.#queue.filter(options).length;\n    }\n    /**\n    Number of running items (no longer in the queue).\n    */\n    get pending() {\n        return this.#pending;\n    }\n    /**\n    Whether the queue is currently paused.\n    */\n    get isPaused() {\n        return this.#isPaused;\n    }\n    #setupRateLimitTracking() {\n        // Only schedule updates when rate limiting is enabled\n        if (this.#isIntervalIgnored) {\n            return;\n        }\n        // Wire up to lifecycle events that affect rate limit state\n        // Only 'add' and 'next' can actually change rate limit state\n        this.on('add', () => {\n            if (this.#queue.size > 0) {\n                this.#scheduleRateLimitUpdate();\n            }\n        });\n        this.on('next', () => {\n            this.#scheduleRateLimitUpdate();\n        });\n    }\n    #scheduleRateLimitUpdate() {\n        // Skip if rate limiting is not enabled or already scheduled\n        if (this.#isIntervalIgnored || this.#rateLimitFlushScheduled) {\n            return;\n        }\n        this.#rateLimitFlushScheduled = true;\n        queueMicrotask(() => {\n            this.#rateLimitFlushScheduled = false;\n            this.#updateRateLimitState();\n        });\n    }\n    #rollbackIntervalConsumption() {\n        if (this.#isIntervalIgnored) {\n            return;\n        }\n        this.#rollbackIntervalSlot();\n        this.#scheduleRateLimitUpdate();\n    }\n    #updateRateLimitState() {\n        const previous = this.#rateLimitedInInterval;\n        // Early exit if rate limiting is disabled or queue is empty\n        if (this.#isIntervalIgnored || this.#queue.size === 0) {\n            if (previous) {\n                this.#rateLimitedInInterval = false;\n                this.emit('rateLimitCleared');\n            }\n            return;\n        }\n        // Get the current count based on mode\n        let count;\n        if (this.#strict) {\n            const now = Date.now();\n            this.#cleanupStrictTicks(now);\n            count = this.#getActiveTicksCount();\n        }\n        else {\n            count = this.#intervalCount;\n        }\n        const shouldBeRateLimited = count >= this.#intervalCap;\n        if (shouldBeRateLimited !== previous) {\n            this.#rateLimitedInInterval = shouldBeRateLimited;\n            this.emit(shouldBeRateLimited ? 'rateLimit' : 'rateLimitCleared');\n        }\n    }\n    /**\n    Whether the queue is currently rate-limited due to intervalCap.\n    */\n    get isRateLimited() {\n        return this.#rateLimitedInInterval;\n    }\n    /**\n    Whether the queue is saturated. Returns `true` when:\n    - All concurrency slots are occupied and tasks are waiting, OR\n    - The queue is rate-limited and tasks are waiting\n\n    Useful for detecting backpressure and potential hanging tasks.\n\n    ```js\n    import PQueue from 'p-queue';\n\n    const queue = new PQueue({concurrency: 2});\n\n    // Backpressure handling\n    if (queue.isSaturated) {\n        console.log('Queue is saturated, waiting for capacity...');\n        await queue.onSizeLessThan(queue.concurrency);\n    }\n\n    // Monitoring for stuck tasks\n    setInterval(() => {\n        if (queue.isSaturated) {\n            console.warn(`Queue saturated: ${queue.pending} running, ${queue.size} waiting`);\n        }\n    }, 60000);\n    ```\n    */\n    get isSaturated() {\n        return (this.#pending === this.#concurrency && this.#queue.size > 0)\n            || (this.isRateLimited && this.#queue.size > 0);\n    }\n    /**\n    The tasks currently being executed. Each task includes its `id`, `priority`, `startTime`, and `timeout` (if set).\n\n    Returns an array of task info objects.\n\n    ```js\n    import PQueue from 'p-queue';\n\n    const queue = new PQueue({concurrency: 2});\n\n    // Add tasks with IDs for better debugging\n    queue.add(() => fetchUser(123), {id: 'user-123'});\n    queue.add(() => fetchPosts(456), {id: 'posts-456', priority: 1});\n\n    // Check what's running\n    console.log(queue.runningTasks);\n    // => [{\n    //   id: 'user-123',\n    //   priority: 0,\n    //   startTime: 1759253001716,\n    //   timeout: undefined\n    // }, {\n    //   id: 'posts-456',\n    //   priority: 1,\n    //   startTime: 1759253001916,\n    //   timeout: undefined\n    // }]\n    ```\n    */\n    get runningTasks() {\n        // Return fresh array with fresh objects to prevent mutations\n        return [...this.#runningTasks.values()].map(task => ({ ...task }));\n    }\n}\n/**\nError thrown when a task times out.\n\n@example\n```\nimport PQueue, {TimeoutError} from 'p-queue';\n\nconst queue = new PQueue({timeout: 1000});\n\ntry {\n    await queue.add(() => someTask());\n} catch (error) {\n    if (error instanceof TimeoutError) {\n        console.log('Task timed out');\n    }\n}\n```\n*/\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL25vZGVfbW9kdWxlcy9wLXF1ZXVlL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBNkM7QUFDWjtBQUNlO0FBQ2hEO0FBQ0E7QUFDQTtBQUNlLHFCQUFxQix1REFBWTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLDhCQUE4QixjQUFjOztBQUU1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDBEQUFhO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0dBQWdHLHNDQUFzQyxNQUFNLDJCQUEyQjtBQUN2SztBQUNBO0FBQ0EsMkZBQTJGLG1DQUFtQyxNQUFNLHdCQUF3QjtBQUM1SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RkFBOEYsZ0JBQWdCLE1BQU0sdUJBQXVCO0FBQzNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdHQUFnRyxlQUFlLE1BQU0sc0JBQXNCO0FBQzNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLDhCQUE4QixlQUFlOztBQUU3QyxpQ0FBaUMsWUFBWTtBQUM3QyxpQ0FBaUMsc0JBQXNCO0FBQ3ZELGlDQUFpQyxZQUFZO0FBQzdDLGlDQUFpQyxZQUFZOztBQUU3QztBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEsOEJBQThCLGVBQWU7O0FBRTdDLGlDQUFpQyxZQUFZO0FBQzdDLGlDQUFpQyxzQkFBc0I7QUFDdkQ7QUFDQSxpQ0FBaUMsWUFBWTs7QUFFN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0ZBQXNGLFNBQVMsTUFBTSxnQkFBZ0I7QUFDckg7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxXQUFXO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCx3QkFBd0I7QUFDeEU7QUFDQSxvQ0FBb0MscURBQVE7QUFDNUM7QUFDQSw2REFBNkQsZ0JBQWdCLGdCQUFnQixlQUFlLFdBQVcsa0JBQWtCO0FBQ3pJLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EsZ0NBQWdDLFNBQVM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRkFBa0YsWUFBWTtBQUM5Riw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG1HQUFtRztBQUNuRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxxRkFBcUY7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLGlJQUFpSTs7QUFFakk7QUFDQTtBQUNBOztBQUVBLDhCQUE4QixlQUFlOztBQUU3QyxnREFBZ0Q7QUFDaEQsZ0RBQWdEO0FBQ2hELGdEQUFnRDs7QUFFaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSw4QkFBOEIsZUFBZTs7QUFFN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsZUFBZSxXQUFXLFlBQVk7QUFDbkY7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLDhCQUE4QixlQUFlOztBQUU3QztBQUNBLHFDQUFxQyxlQUFlO0FBQ3BELHNDQUFzQyw2QkFBNkI7O0FBRW5FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELFNBQVM7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixjQUFjOztBQUU5QiwwQkFBMEIsY0FBYzs7QUFFeEM7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDeUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC1zZGsvbm9kZV9tb2R1bGVzL3AtcXVldWUvZGlzdC9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdldmVudGVtaXR0ZXIzJztcbmltcG9ydCBwVGltZW91dCBmcm9tICdwLXRpbWVvdXQnO1xuaW1wb3J0IFByaW9yaXR5UXVldWUgZnJvbSAnLi9wcmlvcml0eS1xdWV1ZS5qcyc7XG4vKipcblByb21pc2UgcXVldWUgd2l0aCBjb25jdXJyZW5jeSBjb250cm9sLlxuKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBRdWV1ZSBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gICAgI2NhcnJ5b3ZlckludGVydmFsQ291bnQ7XG4gICAgI2lzSW50ZXJ2YWxJZ25vcmVkO1xuICAgICNpbnRlcnZhbENvdW50ID0gMDtcbiAgICAjaW50ZXJ2YWxDYXA7XG4gICAgI3JhdGVMaW1pdGVkSW5JbnRlcnZhbCA9IGZhbHNlO1xuICAgICNyYXRlTGltaXRGbHVzaFNjaGVkdWxlZCA9IGZhbHNlO1xuICAgICNpbnRlcnZhbDtcbiAgICAjaW50ZXJ2YWxFbmQgPSAwO1xuICAgICNsYXN0RXhlY3V0aW9uVGltZSA9IDA7XG4gICAgI2ludGVydmFsSWQ7XG4gICAgI3RpbWVvdXRJZDtcbiAgICAjc3RyaWN0O1xuICAgIC8vIENpcmN1bGFyIGJ1ZmZlciBpbXBsZW1lbnRhdGlvbiBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXG4gICAgI3N0cmljdFRpY2tzID0gW107XG4gICAgI3N0cmljdFRpY2tzU3RhcnRJbmRleCA9IDA7XG4gICAgI3F1ZXVlO1xuICAgICNxdWV1ZUNsYXNzO1xuICAgICNwZW5kaW5nID0gMDtcbiAgICAvLyBUaGUgYCFgIGlzIG5lZWRlZCBiZWNhdXNlIG9mIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvMzIxOTRcbiAgICAjY29uY3VycmVuY3k7XG4gICAgI2lzUGF1c2VkO1xuICAgIC8vIFVzZSB0byBhc3NpZ24gYSB1bmlxdWUgaWRlbnRpZmllciB0byBhIHByb21pc2UgZnVuY3Rpb24sIGlmIG5vdCBleHBsaWNpdGx5IHNwZWNpZmllZFxuICAgICNpZEFzc2lnbmVyID0gMW47XG4gICAgLy8gVHJhY2sgY3VycmVudGx5IHJ1bm5pbmcgdGFza3MgZm9yIGRlYnVnZ2luZ1xuICAgICNydW5uaW5nVGFza3MgPSBuZXcgTWFwKCk7XG4gICAgLyoqXG4gICAgR2V0IG9yIHNldCB0aGUgZGVmYXVsdCB0aW1lb3V0IGZvciBhbGwgdGFza3MuIENhbiBiZSBjaGFuZ2VkIGF0IHJ1bnRpbWUuXG5cbiAgICBPcGVyYXRpb25zIHdpbGwgdGhyb3cgYSBgVGltZW91dEVycm9yYCBpZiB0aGV5IGRvbid0IGNvbXBsZXRlIHdpdGhpbiB0aGUgc3BlY2lmaWVkIHRpbWUuXG5cbiAgICBUaGUgdGltZW91dCBiZWdpbnMgd2hlbiB0aGUgb3BlcmF0aW9uIGlzIGRlcXVldWVkIGFuZCBzdGFydHMgZXhlY3V0aW9uLCBub3Qgd2hpbGUgaXQncyB3YWl0aW5nIGluIHRoZSBxdWV1ZS5cblxuICAgIEBleGFtcGxlXG4gICAgYGBgXG4gICAgY29uc3QgcXVldWUgPSBuZXcgUFF1ZXVlKHt0aW1lb3V0OiA1MDAwfSk7XG5cbiAgICAvLyBDaGFuZ2UgdGltZW91dCBmb3IgYWxsIGZ1dHVyZSB0YXNrc1xuICAgIHF1ZXVlLnRpbWVvdXQgPSAxMDAwMDtcbiAgICBgYGBcbiAgICAqL1xuICAgIHRpbWVvdXQ7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2NvbnNpc3RlbnQtdHlwZS1hc3NlcnRpb25zXG4gICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICBjYXJyeW92ZXJJbnRlcnZhbENvdW50OiBmYWxzZSxcbiAgICAgICAgICAgIGludGVydmFsQ2FwOiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksXG4gICAgICAgICAgICBpbnRlcnZhbDogMCxcbiAgICAgICAgICAgIGNvbmN1cnJlbmN5OiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksXG4gICAgICAgICAgICBhdXRvU3RhcnQ6IHRydWUsXG4gICAgICAgICAgICBxdWV1ZUNsYXNzOiBQcmlvcml0eVF1ZXVlLFxuICAgICAgICAgICAgc3RyaWN0OiBmYWxzZSxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIH07XG4gICAgICAgIGlmICghKHR5cGVvZiBvcHRpb25zLmludGVydmFsQ2FwID09PSAnbnVtYmVyJyAmJiBvcHRpb25zLmludGVydmFsQ2FwID49IDEpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBFeHBlY3RlZCBcXGBpbnRlcnZhbENhcFxcYCB0byBiZSBhIG51bWJlciBmcm9tIDEgYW5kIHVwLCBnb3QgXFxgJHtvcHRpb25zLmludGVydmFsQ2FwPy50b1N0cmluZygpID8/ICcnfVxcYCAoJHt0eXBlb2Ygb3B0aW9ucy5pbnRlcnZhbENhcH0pYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuaW50ZXJ2YWwgPT09IHVuZGVmaW5lZCB8fCAhKE51bWJlci5pc0Zpbml0ZShvcHRpb25zLmludGVydmFsKSAmJiBvcHRpb25zLmludGVydmFsID49IDApKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBFeHBlY3RlZCBcXGBpbnRlcnZhbFxcYCB0byBiZSBhIGZpbml0ZSBudW1iZXIgPj0gMCwgZ290IFxcYCR7b3B0aW9ucy5pbnRlcnZhbD8udG9TdHJpbmcoKSA/PyAnJ31cXGAgKCR7dHlwZW9mIG9wdGlvbnMuaW50ZXJ2YWx9KWApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnN0cmljdCAmJiBvcHRpb25zLmludGVydmFsID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgYHN0cmljdGAgb3B0aW9uIHJlcXVpcmVzIGEgbm9uLXplcm8gYGludGVydmFsYCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnN0cmljdCAmJiBvcHRpb25zLmludGVydmFsQ2FwID09PSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBgc3RyaWN0YCBvcHRpb24gcmVxdWlyZXMgYSBmaW5pdGUgYGludGVydmFsQ2FwYCcpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE86IFJlbW92ZSB0aGlzIGZhbGxiYWNrIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb25cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1kZXByZWNhdGVkXG4gICAgICAgIHRoaXMuI2NhcnJ5b3ZlckludGVydmFsQ291bnQgPSBvcHRpb25zLmNhcnJ5b3ZlckludGVydmFsQ291bnQgPz8gb3B0aW9ucy5jYXJyeW92ZXJDb25jdXJyZW5jeUNvdW50ID8/IGZhbHNlO1xuICAgICAgICB0aGlzLiNpc0ludGVydmFsSWdub3JlZCA9IG9wdGlvbnMuaW50ZXJ2YWxDYXAgPT09IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSB8fCBvcHRpb25zLmludGVydmFsID09PSAwO1xuICAgICAgICB0aGlzLiNpbnRlcnZhbENhcCA9IG9wdGlvbnMuaW50ZXJ2YWxDYXA7XG4gICAgICAgIHRoaXMuI2ludGVydmFsID0gb3B0aW9ucy5pbnRlcnZhbDtcbiAgICAgICAgdGhpcy4jc3RyaWN0ID0gb3B0aW9ucy5zdHJpY3Q7XG4gICAgICAgIHRoaXMuI3F1ZXVlID0gbmV3IG9wdGlvbnMucXVldWVDbGFzcygpO1xuICAgICAgICB0aGlzLiNxdWV1ZUNsYXNzID0gb3B0aW9ucy5xdWV1ZUNsYXNzO1xuICAgICAgICB0aGlzLmNvbmN1cnJlbmN5ID0gb3B0aW9ucy5jb25jdXJyZW5jeTtcbiAgICAgICAgaWYgKG9wdGlvbnMudGltZW91dCAhPT0gdW5kZWZpbmVkICYmICEoTnVtYmVyLmlzRmluaXRlKG9wdGlvbnMudGltZW91dCkgJiYgb3B0aW9ucy50aW1lb3V0ID4gMCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEV4cGVjdGVkIFxcYHRpbWVvdXRcXGAgdG8gYmUgYSBwb3NpdGl2ZSBmaW5pdGUgbnVtYmVyLCBnb3QgXFxgJHtvcHRpb25zLnRpbWVvdXR9XFxgICgke3R5cGVvZiBvcHRpb25zLnRpbWVvdXR9KWApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGltZW91dCA9IG9wdGlvbnMudGltZW91dDtcbiAgICAgICAgdGhpcy4jaXNQYXVzZWQgPSBvcHRpb25zLmF1dG9TdGFydCA9PT0gZmFsc2U7XG4gICAgICAgIHRoaXMuI3NldHVwUmF0ZUxpbWl0VHJhY2tpbmcoKTtcbiAgICB9XG4gICAgI2NsZWFudXBTdHJpY3RUaWNrcyhub3cpIHtcbiAgICAgICAgLy8gUmVtb3ZlIHRpY2tzIG91dHNpZGUgdGhlIGN1cnJlbnQgaW50ZXJ2YWwgd2luZG93IHVzaW5nIGNpcmN1bGFyIGJ1ZmZlciBhcHByb2FjaFxuICAgICAgICB3aGlsZSAodGhpcy4jc3RyaWN0VGlja3NTdGFydEluZGV4IDwgdGhpcy4jc3RyaWN0VGlja3MubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBvbGRlc3RUaWNrID0gdGhpcy4jc3RyaWN0VGlja3NbdGhpcy4jc3RyaWN0VGlja3NTdGFydEluZGV4XTtcbiAgICAgICAgICAgIGlmIChvbGRlc3RUaWNrICE9PSB1bmRlZmluZWQgJiYgbm93IC0gb2xkZXN0VGljayA+PSB0aGlzLiNpbnRlcnZhbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuI3N0cmljdFRpY2tzU3RhcnRJbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ29tcGFjdCB0aGUgYXJyYXkgd2hlbiBpdCBiZWNvbWVzIGluZWZmaWNpZW50IG9yIGZ1bGx5IGNvbnN1bWVkXG4gICAgICAgIC8vIENvbXBhY3Qgd2hlbjogKHN0YXJ0IGluZGV4IGlzIGxhcmdlIEFORCBtb3JlIHRoYW4gaGFsZiB3YXN0ZWQpIE9SIGFsbCB0aWNrcyBleHBpcmVkXG4gICAgICAgIGNvbnN0IHNob3VsZENvbXBhY3QgPSAodGhpcy4jc3RyaWN0VGlja3NTdGFydEluZGV4ID4gMTAwICYmIHRoaXMuI3N0cmljdFRpY2tzU3RhcnRJbmRleCA+IHRoaXMuI3N0cmljdFRpY2tzLmxlbmd0aCAvIDIpXG4gICAgICAgICAgICB8fCB0aGlzLiNzdHJpY3RUaWNrc1N0YXJ0SW5kZXggPT09IHRoaXMuI3N0cmljdFRpY2tzLmxlbmd0aDtcbiAgICAgICAgaWYgKHNob3VsZENvbXBhY3QpIHtcbiAgICAgICAgICAgIHRoaXMuI3N0cmljdFRpY2tzID0gdGhpcy4jc3RyaWN0VGlja3Muc2xpY2UodGhpcy4jc3RyaWN0VGlja3NTdGFydEluZGV4KTtcbiAgICAgICAgICAgIHRoaXMuI3N0cmljdFRpY2tzU3RhcnRJbmRleCA9IDA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gSGVscGVyIG1ldGhvZHMgZm9yIGludGVydmFsIGNvbnN1bXB0aW9uXG4gICAgI2NvbnN1bWVJbnRlcnZhbFNsb3Qobm93KSB7XG4gICAgICAgIGlmICh0aGlzLiNzdHJpY3QpIHtcbiAgICAgICAgICAgIHRoaXMuI3N0cmljdFRpY2tzLnB1c2gobm93KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuI2ludGVydmFsQ291bnQrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICAjcm9sbGJhY2tJbnRlcnZhbFNsb3QoKSB7XG4gICAgICAgIGlmICh0aGlzLiNzdHJpY3QpIHtcbiAgICAgICAgICAgIC8vIFBvcCBmcm9tIHRoZSBlbmQgb2YgdGhlIGFjdHVhbCBkYXRhIChub3QgZnJvbSBzdGFydCBpbmRleClcbiAgICAgICAgICAgIGlmICh0aGlzLiNzdHJpY3RUaWNrcy5sZW5ndGggPiB0aGlzLiNzdHJpY3RUaWNrc1N0YXJ0SW5kZXgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNzdHJpY3RUaWNrcy5wb3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLiNpbnRlcnZhbENvdW50ID4gMCkge1xuICAgICAgICAgICAgdGhpcy4jaW50ZXJ2YWxDb3VudC0tO1xuICAgICAgICB9XG4gICAgfVxuICAgICNnZXRBY3RpdmVUaWNrc0NvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RyaWN0VGlja3MubGVuZ3RoIC0gdGhpcy4jc3RyaWN0VGlja3NTdGFydEluZGV4O1xuICAgIH1cbiAgICBnZXQgI2RvZXNJbnRlcnZhbEFsbG93QW5vdGhlcigpIHtcbiAgICAgICAgaWYgKHRoaXMuI2lzSW50ZXJ2YWxJZ25vcmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jc3RyaWN0KSB7XG4gICAgICAgICAgICAvLyBDbGVhbnVwIGFscmVhZHkgZG9uZSBieSAjaXNJbnRlcnZhbFBhdXNlZEF0IGJlZm9yZSB0aGlzIGlzIGNhbGxlZFxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuI2dldEFjdGl2ZVRpY2tzQ291bnQoKSA8IHRoaXMuI2ludGVydmFsQ2FwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLiNpbnRlcnZhbENvdW50IDwgdGhpcy4jaW50ZXJ2YWxDYXA7XG4gICAgfVxuICAgIGdldCAjZG9lc0NvbmN1cnJlbnRBbGxvd0Fub3RoZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNwZW5kaW5nIDwgdGhpcy4jY29uY3VycmVuY3k7XG4gICAgfVxuICAgICNuZXh0KCkge1xuICAgICAgICB0aGlzLiNwZW5kaW5nLS07XG4gICAgICAgIGlmICh0aGlzLiNwZW5kaW5nID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3BlbmRpbmdaZXJvJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jdHJ5VG9TdGFydEFub3RoZXIoKTtcbiAgICAgICAgdGhpcy5lbWl0KCduZXh0Jyk7XG4gICAgfVxuICAgICNvblJlc3VtZUludGVydmFsKCkge1xuICAgICAgICAvLyBDbGVhciB0aW1lb3V0IElEIGJlZm9yZSBwcm9jZXNzaW5nIHRvIHByZXZlbnQgcmFjZSBjb25kaXRpb25cbiAgICAgICAgLy8gTXVzdCBjbGVhciBiZWZvcmUgI29uSW50ZXJ2YWwgdG8gYWxsb3cgbmV3IHRpbWVvdXRzIHRvIGJlIHNjaGVkdWxlZFxuICAgICAgICB0aGlzLiN0aW1lb3V0SWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuI29uSW50ZXJ2YWwoKTtcbiAgICAgICAgdGhpcy4jaW5pdGlhbGl6ZUludGVydmFsSWZOZWVkZWQoKTtcbiAgICB9XG4gICAgI2lzSW50ZXJ2YWxQYXVzZWRBdChub3cpIHtcbiAgICAgICAgLy8gU3RyaWN0IG1vZGU6IGNoZWNrIGlmIHdlIG5lZWQgdG8gd2FpdCBmb3Igb2xkZXN0IHRpY2sgdG8gYWdlIG91dFxuICAgICAgICBpZiAodGhpcy4jc3RyaWN0KSB7XG4gICAgICAgICAgICB0aGlzLiNjbGVhbnVwU3RyaWN0VGlja3Mobm93KTtcbiAgICAgICAgICAgIC8vIElmIGF0IGNhcGFjaXR5LCBuZWVkIHRvIHdhaXQgZm9yIG9sZGVzdCB0aWNrIHRvIGFnZSBvdXRcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVRpY2tzQ291bnQgPSB0aGlzLiNnZXRBY3RpdmVUaWNrc0NvdW50KCk7XG4gICAgICAgICAgICBpZiAoYWN0aXZlVGlja3NDb3VudCA+PSB0aGlzLiNpbnRlcnZhbENhcCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9sZGVzdFRpY2sgPSB0aGlzLiNzdHJpY3RUaWNrc1t0aGlzLiNzdHJpY3RUaWNrc1N0YXJ0SW5kZXhdO1xuICAgICAgICAgICAgICAgIC8vIEFmdGVyIGNsZWFudXAsIHJlbWFpbmluZyB0aWNrcyBhcmUgd2l0aGluIGludGVydmFsLCBzbyBkZWxheSBpcyBhbHdheXMgPiAwXG4gICAgICAgICAgICAgICAgY29uc3QgZGVsYXkgPSB0aGlzLiNpbnRlcnZhbCAtIChub3cgLSBvbGRlc3RUaWNrKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjcmVhdGVJbnRlcnZhbFRpbWVvdXQoZGVsYXkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIEZpeGVkIHdpbmRvdyBtb2RlIChvcmlnaW5hbCBsb2dpYylcbiAgICAgICAgaWYgKHRoaXMuI2ludGVydmFsSWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgZGVsYXkgPSB0aGlzLiNpbnRlcnZhbEVuZCAtIG5vdztcbiAgICAgICAgICAgIGlmIChkZWxheSA8IDApIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgaW50ZXJ2YWwgaGFzIGV4cGlyZWQgd2hpbGUgaWRsZSwgY2hlY2sgaWYgd2Ugc2hvdWxkIGVuZm9yY2UgdGhlIGludGVydmFsXG4gICAgICAgICAgICAgICAgLy8gZnJvbSB0aGUgbGFzdCB0YXNrIGV4ZWN1dGlvbi4gVGhpcyBlbnN1cmVzIHByb3BlciBzcGFjaW5nIGJldHdlZW4gdGFza3MgZXZlblxuICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIHF1ZXVlIGJlY29tZXMgZW1wdHkgYW5kIHRoZW4gbmV3IHRhc2tzIGFyZSBhZGRlZC5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy4jbGFzdEV4ZWN1dGlvblRpbWUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVTaW5jZUxhc3RFeGVjdXRpb24gPSBub3cgLSB0aGlzLiNsYXN0RXhlY3V0aW9uVGltZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWVTaW5jZUxhc3RFeGVjdXRpb24gPCB0aGlzLiNpbnRlcnZhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGVub3VnaCB0aW1lIGhhcyBwYXNzZWQgc2luY2UgdGhlIGxhc3QgdGFzayBleGVjdXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI2NyZWF0ZUludGVydmFsVGltZW91dCh0aGlzLiNpbnRlcnZhbCAtIHRpbWVTaW5jZUxhc3RFeGVjdXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gRW5vdWdoIHRpbWUgaGFzIHBhc3NlZCBvciBubyBwcmV2aW91cyBleGVjdXRpb24sIGFsbG93IGV4ZWN1dGlvblxuICAgICAgICAgICAgICAgIHRoaXMuI2ludGVydmFsQ291bnQgPSAodGhpcy4jY2FycnlvdmVySW50ZXJ2YWxDb3VudCkgPyB0aGlzLiNwZW5kaW5nIDogMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEFjdCBhcyB0aGUgaW50ZXJ2YWwgaXMgcGVuZGluZ1xuICAgICAgICAgICAgICAgIHRoaXMuI2NyZWF0ZUludGVydmFsVGltZW91dChkZWxheSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAjY3JlYXRlSW50ZXJ2YWxUaW1lb3V0KGRlbGF5KSB7XG4gICAgICAgIGlmICh0aGlzLiN0aW1lb3V0SWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3RpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jb25SZXN1bWVJbnRlcnZhbCgpO1xuICAgICAgICB9LCBkZWxheSk7XG4gICAgfVxuICAgICNjbGVhckludGVydmFsVGltZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLiNpbnRlcnZhbElkKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuI2ludGVydmFsSWQpO1xuICAgICAgICAgICAgdGhpcy4jaW50ZXJ2YWxJZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAjY2xlYXJUaW1lb3V0VGltZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLiN0aW1lb3V0SWQpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLiN0aW1lb3V0SWQpO1xuICAgICAgICAgICAgdGhpcy4jdGltZW91dElkID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgICN0cnlUb1N0YXJ0QW5vdGhlcigpIHtcbiAgICAgICAgaWYgKHRoaXMuI3F1ZXVlLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgIC8vIFdlIGNhbiBjbGVhciB0aGUgaW50ZXJ2YWwgKFwicGF1c2VcIilcbiAgICAgICAgICAgIC8vIEJlY2F1c2Ugd2UgY2FuIHJlZG8gaXQgbGF0ZXIgKFwicmVzdW1lXCIpXG4gICAgICAgICAgICB0aGlzLiNjbGVhckludGVydmFsVGltZXIoKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnZW1wdHknKTtcbiAgICAgICAgICAgIGlmICh0aGlzLiNwZW5kaW5nID09PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgdGltZW91dCBhcyB3ZWxsIHdoZW4gY29tcGxldGVseSBpZGxlXG4gICAgICAgICAgICAgICAgdGhpcy4jY2xlYXJUaW1lb3V0VGltZXIoKTtcbiAgICAgICAgICAgICAgICAvLyBDb21wYWN0IHN0cmljdCB0aWNrcyB3aGVuIGlkbGUgdG8gZnJlZSBtZW1vcnlcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4jc3RyaWN0ICYmIHRoaXMuI3N0cmljdFRpY2tzU3RhcnRJbmRleCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jY2xlYW51cFN0cmljdFRpY2tzKG5vdyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaWRsZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGxldCB0YXNrU3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICBpZiAoIXRoaXMuI2lzUGF1c2VkKSB7XG4gICAgICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgY29uc3QgY2FuSW5pdGlhbGl6ZUludGVydmFsID0gIXRoaXMuI2lzSW50ZXJ2YWxQYXVzZWRBdChub3cpO1xuICAgICAgICAgICAgaWYgKHRoaXMuI2RvZXNJbnRlcnZhbEFsbG93QW5vdGhlciAmJiB0aGlzLiNkb2VzQ29uY3VycmVudEFsbG93QW5vdGhlcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGpvYiA9IHRoaXMuI3F1ZXVlLmRlcXVldWUoKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuI2lzSW50ZXJ2YWxJZ25vcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI2NvbnN1bWVJbnRlcnZhbFNsb3Qobm93KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jc2NoZWR1bGVSYXRlTGltaXRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICBqb2IoKTtcbiAgICAgICAgICAgICAgICBpZiAoY2FuSW5pdGlhbGl6ZUludGVydmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI2luaXRpYWxpemVJbnRlcnZhbElmTmVlZGVkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRhc2tTdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGFza1N0YXJ0ZWQ7XG4gICAgfVxuICAgICNpbml0aWFsaXplSW50ZXJ2YWxJZk5lZWRlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuI2lzSW50ZXJ2YWxJZ25vcmVkIHx8IHRoaXMuI2ludGVydmFsSWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFN0cmljdCBtb2RlIHVzZXMgdGltZW91dHMgaW5zdGVhZCBvZiBpbnRlcnZhbCB0aW1lcnNcbiAgICAgICAgaWYgKHRoaXMuI3N0cmljdCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2ludGVydmFsSWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiNvbkludGVydmFsKCk7XG4gICAgICAgIH0sIHRoaXMuI2ludGVydmFsKTtcbiAgICAgICAgdGhpcy4jaW50ZXJ2YWxFbmQgPSBEYXRlLm5vdygpICsgdGhpcy4jaW50ZXJ2YWw7XG4gICAgfVxuICAgICNvbkludGVydmFsKCkge1xuICAgICAgICAvLyBOb24tc3RyaWN0IG1vZGUgdXNlcyBpbnRlcnZhbCB0aW1lcnMgYW5kIGludGVydmFsQ291bnRcbiAgICAgICAgaWYgKCF0aGlzLiNzdHJpY3QpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiNpbnRlcnZhbENvdW50ID09PSAwICYmIHRoaXMuI3BlbmRpbmcgPT09IDAgJiYgdGhpcy4jaW50ZXJ2YWxJZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuI2NsZWFySW50ZXJ2YWxUaW1lcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4jaW50ZXJ2YWxDb3VudCA9IHRoaXMuI2NhcnJ5b3ZlckludGVydmFsQ291bnQgPyB0aGlzLiNwZW5kaW5nIDogMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNwcm9jZXNzUXVldWUoKTtcbiAgICAgICAgdGhpcy4jc2NoZWR1bGVSYXRlTGltaXRVcGRhdGUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRXhlY3V0ZXMgYWxsIHF1ZXVlZCBmdW5jdGlvbnMgdW50aWwgaXQgcmVhY2hlcyB0aGUgbGltaXQuXG4gICAgKi9cbiAgICAjcHJvY2Vzc1F1ZXVlKCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZW1wdHlcbiAgICAgICAgd2hpbGUgKHRoaXMuI3RyeVRvU3RhcnRBbm90aGVyKCkpIHsgfVxuICAgIH1cbiAgICBnZXQgY29uY3VycmVuY3koKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjb25jdXJyZW5jeTtcbiAgICB9XG4gICAgc2V0IGNvbmN1cnJlbmN5KG5ld0NvbmN1cnJlbmN5KSB7XG4gICAgICAgIGlmICghKHR5cGVvZiBuZXdDb25jdXJyZW5jeSA9PT0gJ251bWJlcicgJiYgbmV3Q29uY3VycmVuY3kgPj0gMSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEV4cGVjdGVkIFxcYGNvbmN1cnJlbmN5XFxgIHRvIGJlIGEgbnVtYmVyIGZyb20gMSBhbmQgdXAsIGdvdCBcXGAke25ld0NvbmN1cnJlbmN5fVxcYCAoJHt0eXBlb2YgbmV3Q29uY3VycmVuY3l9KWApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2NvbmN1cnJlbmN5ID0gbmV3Q29uY3VycmVuY3k7XG4gICAgICAgIHRoaXMuI3Byb2Nlc3NRdWV1ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICBVcGRhdGVzIHRoZSBwcmlvcml0eSBvZiBhIHByb21pc2UgZnVuY3Rpb24gYnkgaXRzIGlkLCBhZmZlY3RpbmcgaXRzIGV4ZWN1dGlvbiBvcmRlci4gUmVxdWlyZXMgYSBkZWZpbmVkIGNvbmN1cnJlbmN5IGxpbWl0IHRvIHRha2UgZWZmZWN0LlxuXG4gICAgRm9yIGV4YW1wbGUsIHRoaXMgY2FuIGJlIHVzZWQgdG8gcHJpb3JpdGl6ZSBhIHByb21pc2UgZnVuY3Rpb24gdG8gcnVuIGVhcmxpZXIuXG5cbiAgICBgYGBqc1xuICAgIGltcG9ydCBQUXVldWUgZnJvbSAncC1xdWV1ZSc7XG5cbiAgICBjb25zdCBxdWV1ZSA9IG5ldyBQUXVldWUoe2NvbmN1cnJlbmN5OiAxfSk7XG5cbiAgICBxdWV1ZS5hZGQoYXN5bmMgKCkgPT4gJ/CfpoQnLCB7cHJpb3JpdHk6IDF9KTtcbiAgICBxdWV1ZS5hZGQoYXN5bmMgKCkgPT4gJ/CfpoAnLCB7cHJpb3JpdHk6IDAsIGlkOiAn8J+mgCd9KTtcbiAgICBxdWV1ZS5hZGQoYXN5bmMgKCkgPT4gJ/CfpoQnLCB7cHJpb3JpdHk6IDF9KTtcbiAgICBxdWV1ZS5hZGQoYXN5bmMgKCkgPT4gJ/CfpoQnLCB7cHJpb3JpdHk6IDF9KTtcblxuICAgIHF1ZXVlLnNldFByaW9yaXR5KCfwn6aAJywgMik7XG4gICAgYGBgXG5cbiAgICBJbiB0aGlzIGNhc2UsIHRoZSBwcm9taXNlIGZ1bmN0aW9uIHdpdGggYGlkOiAn8J+mgCdgIHJ1bnMgc2Vjb25kLlxuXG4gICAgWW91IGNhbiBhbHNvIGRlcHJpb3JpdGl6ZSBhIHByb21pc2UgZnVuY3Rpb24gdG8gZGVsYXkgaXRzIGV4ZWN1dGlvbjpcblxuICAgIGBgYGpzXG4gICAgaW1wb3J0IFBRdWV1ZSBmcm9tICdwLXF1ZXVlJztcblxuICAgIGNvbnN0IHF1ZXVlID0gbmV3IFBRdWV1ZSh7Y29uY3VycmVuY3k6IDF9KTtcblxuICAgIHF1ZXVlLmFkZChhc3luYyAoKSA9PiAn8J+mhCcsIHtwcmlvcml0eTogMX0pO1xuICAgIHF1ZXVlLmFkZChhc3luYyAoKSA9PiAn8J+mgCcsIHtwcmlvcml0eTogMSwgaWQ6ICfwn6aAJ30pO1xuICAgIHF1ZXVlLmFkZChhc3luYyAoKSA9PiAn8J+mhCcpO1xuICAgIHF1ZXVlLmFkZChhc3luYyAoKSA9PiAn8J+mhCcsIHtwcmlvcml0eTogMH0pO1xuXG4gICAgcXVldWUuc2V0UHJpb3JpdHkoJ/CfpoAnLCAtMSk7XG4gICAgYGBgXG4gICAgSGVyZSwgdGhlIHByb21pc2UgZnVuY3Rpb24gd2l0aCBgaWQ6ICfwn6aAJ2AgZXhlY3V0ZXMgbGFzdC5cbiAgICAqL1xuICAgIHNldFByaW9yaXR5KGlkLCBwcmlvcml0eSkge1xuICAgICAgICBpZiAodHlwZW9mIHByaW9yaXR5ICE9PSAnbnVtYmVyJyB8fCAhTnVtYmVyLmlzRmluaXRlKHByaW9yaXR5KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgRXhwZWN0ZWQgXFxgcHJpb3JpdHlcXGAgdG8gYmUgYSBmaW5pdGUgbnVtYmVyLCBnb3QgXFxgJHtwcmlvcml0eX1cXGAgKCR7dHlwZW9mIHByaW9yaXR5fSlgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNxdWV1ZS5zZXRQcmlvcml0eShpZCwgcHJpb3JpdHkpO1xuICAgIH1cbiAgICBhc3luYyBhZGQoZnVuY3Rpb25fLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgLy8gQ3JlYXRlIGEgY29weSB0byBhdm9pZCBtdXRhdGluZyB0aGUgb3JpZ2luYWwgb3B0aW9ucyBvYmplY3RcbiAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHRpbWVvdXQ6IHRoaXMudGltZW91dCxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAvLyBBc3NpZ24gdW5pcXVlIElEIGlmIG5vdCBwcm92aWRlZFxuICAgICAgICAgICAgaWQ6IG9wdGlvbnMuaWQgPz8gKHRoaXMuI2lkQXNzaWduZXIrKykudG9TdHJpbmcoKSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIHVuaXF1ZSBzeW1ib2wgZm9yIHRyYWNraW5nIHRoaXMgdGFza1xuICAgICAgICAgICAgY29uc3QgdGFza1N5bWJvbCA9IFN5bWJvbChgdGFzay0ke29wdGlvbnMuaWR9YCk7XG4gICAgICAgICAgICB0aGlzLiNxdWV1ZS5lbnF1ZXVlKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLiNwZW5kaW5nKys7XG4gICAgICAgICAgICAgICAgLy8gVHJhY2sgdGhpcyBydW5uaW5nIHRhc2tcbiAgICAgICAgICAgICAgICB0aGlzLiNydW5uaW5nVGFza3Muc2V0KHRhc2tTeW1ib2wsIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IG9wdGlvbnMuaWQsXG4gICAgICAgICAgICAgICAgICAgIHByaW9yaXR5OiBvcHRpb25zLnByaW9yaXR5ID8/IDAsIC8vIE1hdGNoIHByaW9yaXR5LXF1ZXVlIGRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiBvcHRpb25zLnRpbWVvdXQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgbGV0IGV2ZW50TGlzdGVuZXI7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgYWJvcnQgc2lnbmFsIC0gaWYgYWJvcnRlZCwgbmVlZCB0byBkZWNyZW1lbnQgdGhlIGNvdW50ZXJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhhdCB3YXMgaW5jcmVtZW50ZWQgaW4gdHJ5VG9TdGFydEFub3RoZXJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc2lnbmFsPy50aHJvd0lmQWJvcnRlZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jcm9sbGJhY2tJbnRlcnZhbENvbnN1bXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDbGVhbiB1cCB0cmFja2luZyBiZWZvcmUgdGhyb3dpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI3J1bm5pbmdUYXNrcy5kZWxldGUodGFza1N5bWJvbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLiNsYXN0RXhlY3V0aW9uVGltZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBvcGVyYXRpb24gPSBmdW5jdGlvbl8oeyBzaWduYWw6IG9wdGlvbnMuc2lnbmFsIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy50aW1lb3V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb24gPSBwVGltZW91dChQcm9taXNlLnJlc29sdmUob3BlcmF0aW9uKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbGxpc2Vjb25kczogb3B0aW9ucy50aW1lb3V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBUYXNrIHRpbWVkIG91dCBhZnRlciAke29wdGlvbnMudGltZW91dH1tcyAocXVldWUgaGFzICR7dGhpcy4jcGVuZGluZ30gcnVubmluZywgJHt0aGlzLiNxdWV1ZS5zaXplfSB3YWl0aW5nKWAsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zaWduYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgc2lnbmFsIH0gPSBvcHRpb25zO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uID0gUHJvbWlzZS5yYWNlKFtvcGVyYXRpb24sIG5ldyBQcm9taXNlKChfcmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50TGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3Qoc2lnbmFsLnJlYXNvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIGV2ZW50TGlzdGVuZXIsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9wZXJhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2NvbXBsZXRlZCcsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAgYWJvcnQgZXZlbnQgbGlzdGVuZXJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc2lnbmFsPy5yZW1vdmVFdmVudExpc3RlbmVyKCdhYm9ydCcsIGV2ZW50TGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBmcm9tIHJ1bm5pbmcgdGFza3NcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jcnVubmluZ1Rhc2tzLmRlbGV0ZSh0YXNrU3ltYm9sKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNlIHF1ZXVlTWljcm90YXNrIHRvIHByZXZlbnQgZGVlcCByZWN1cnNpb24gd2hpbGUgbWFpbnRhaW5pbmcgdGltaW5nXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlTWljcm90YXNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI25leHQoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgb3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2FkZCcpO1xuICAgICAgICAgICAgdGhpcy4jdHJ5VG9TdGFydEFub3RoZXIoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGFkZEFsbChmdW5jdGlvbnMsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGZ1bmN0aW9ucy5tYXAoYXN5bmMgKGZ1bmN0aW9uXykgPT4gdGhpcy5hZGQoZnVuY3Rpb25fLCBvcHRpb25zKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICBTdGFydCAob3IgcmVzdW1lKSBleGVjdXRpbmcgZW5xdWV1ZWQgdGFza3Mgd2l0aGluIGNvbmN1cnJlbmN5IGxpbWl0LiBObyBuZWVkIHRvIGNhbGwgdGhpcyBpZiBxdWV1ZSBpcyBub3QgcGF1c2VkICh2aWEgYG9wdGlvbnMuYXV0b1N0YXJ0ID0gZmFsc2VgIG9yIGJ5IGAucGF1c2UoKWAgbWV0aG9kLilcbiAgICAqL1xuICAgIHN0YXJ0KCkge1xuICAgICAgICBpZiAoIXRoaXMuI2lzUGF1c2VkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNpc1BhdXNlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLiNwcm9jZXNzUXVldWUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgIFB1dCBxdWV1ZSBleGVjdXRpb24gb24gaG9sZC5cbiAgICAqL1xuICAgIHBhdXNlKCkge1xuICAgICAgICB0aGlzLiNpc1BhdXNlZCA9IHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgIENsZWFyIHRoZSBxdWV1ZS5cbiAgICAqL1xuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLiNxdWV1ZSA9IG5ldyB0aGlzLiNxdWV1ZUNsYXNzKCk7XG4gICAgICAgIC8vIENsZWFyIGludGVydmFsIHRpbWVyIHNpbmNlIHF1ZXVlIGlzIG5vdyBlbXB0eSAoY29uc2lzdGVudCB3aXRoICN0cnlUb1N0YXJ0QW5vdGhlcilcbiAgICAgICAgdGhpcy4jY2xlYXJJbnRlcnZhbFRpbWVyKCk7XG4gICAgICAgIC8vIE5vdGU6IFdlIHByZXNlcnZlIHN0cmljdCBtb2RlIHJhdGUtbGltaXRpbmcgc3RhdGUgKHRpY2tzIGFuZCB0aW1lb3V0KVxuICAgICAgICAvLyBiZWNhdXNlIGNsZWFyKCkgb25seSBjbGVhcnMgcXVldWVkIHRhc2tzLCBub3QgcmF0ZSBsaW1pdCBoaXN0b3J5LlxuICAgICAgICAvLyBUaGlzIGVuc3VyZXMgdGhhdCByYXRlIGxpbWl0cyBhcmUgc3RpbGwgZW5mb3JjZWQgYWZ0ZXIgY2xlYXJpbmcgdGhlIHF1ZXVlLlxuICAgICAgICAvLyBOb3RlOiBXZSBkb24ndCBjbGVhciAjcnVubmluZ1Rhc2tzIGFzIHRob3NlIHRhc2tzIGFyZSBzdGlsbCBydW5uaW5nXG4gICAgICAgIC8vIFRoZXkgd2lsbCBiZSByZW1vdmVkIHdoZW4gdGhleSBjb21wbGV0ZSBpbiB0aGUgZmluYWxseSBibG9ja1xuICAgICAgICAvLyBGb3JjZSBzeW5jaHJvbm91cyB1cGRhdGUgc2luY2UgY2xlYXIoKSBzaG91bGQgaGF2ZSBpbW1lZGlhdGUgZWZmZWN0XG4gICAgICAgIHRoaXMuI3VwZGF0ZVJhdGVMaW1pdFN0YXRlKCk7XG4gICAgICAgIC8vIEVtaXQgZXZlbnRzIHNvIHdhaXRlcnMgKG9uRW1wdHksIG9uSWRsZSwgb25TaXplTGVzc1RoYW4pIGNhbiByZXNvbHZlXG4gICAgICAgIHRoaXMuZW1pdCgnZW1wdHknKTtcbiAgICAgICAgaWYgKHRoaXMuI3BlbmRpbmcgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuI2NsZWFyVGltZW91dFRpbWVyKCk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2lkbGUnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVtaXQoJ25leHQnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ2FuIGJlIGNhbGxlZCBtdWx0aXBsZSB0aW1lcy4gVXNlZnVsIGlmIHlvdSBmb3IgZXhhbXBsZSBhZGQgYWRkaXRpb25hbCBpdGVtcyBhdCBhIGxhdGVyIHRpbWUuXG5cbiAgICBAcmV0dXJucyBBIHByb21pc2UgdGhhdCBzZXR0bGVzIHdoZW4gdGhlIHF1ZXVlIGJlY29tZXMgZW1wdHkuXG4gICAgKi9cbiAgICBhc3luYyBvbkVtcHR5KCkge1xuICAgICAgICAvLyBJbnN0YW50bHkgcmVzb2x2ZSBpZiB0aGUgcXVldWUgaXMgZW1wdHlcbiAgICAgICAgaWYgKHRoaXMuI3F1ZXVlLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLiNvbkV2ZW50KCdlbXB0eScpO1xuICAgIH1cbiAgICAvKipcbiAgICBAcmV0dXJucyBBIHByb21pc2UgdGhhdCBzZXR0bGVzIHdoZW4gdGhlIHF1ZXVlIHNpemUgaXMgbGVzcyB0aGFuIHRoZSBnaXZlbiBsaW1pdDogYHF1ZXVlLnNpemUgPCBsaW1pdGAuXG5cbiAgICBJZiB5b3Ugd2FudCB0byBhdm9pZCBoYXZpbmcgdGhlIHF1ZXVlIGdyb3cgYmV5b25kIGEgY2VydGFpbiBzaXplIHlvdSBjYW4gYGF3YWl0IHF1ZXVlLm9uU2l6ZUxlc3NUaGFuKClgIGJlZm9yZSBhZGRpbmcgYSBuZXcgaXRlbS5cblxuICAgIE5vdGUgdGhhdCB0aGlzIG9ubHkgbGltaXRzIHRoZSBudW1iZXIgb2YgaXRlbXMgd2FpdGluZyB0byBzdGFydC4gVGhlcmUgY291bGQgc3RpbGwgYmUgdXAgdG8gYGNvbmN1cnJlbmN5YCBqb2JzIGFscmVhZHkgcnVubmluZyB0aGF0IHRoaXMgY2FsbCBkb2VzIG5vdCBpbmNsdWRlIGluIGl0cyBjYWxjdWxhdGlvbi5cbiAgICAqL1xuICAgIGFzeW5jIG9uU2l6ZUxlc3NUaGFuKGxpbWl0KSB7XG4gICAgICAgIC8vIEluc3RhbnRseSByZXNvbHZlIGlmIHRoZSBxdWV1ZSBpcyBlbXB0eS5cbiAgICAgICAgaWYgKHRoaXMuI3F1ZXVlLnNpemUgPCBsaW1pdCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuI29uRXZlbnQoJ25leHQnLCAoKSA9PiB0aGlzLiNxdWV1ZS5zaXplIDwgbGltaXQpO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgZGlmZmVyZW5jZSB3aXRoIGAub25FbXB0eWAgaXMgdGhhdCBgLm9uSWRsZWAgZ3VhcmFudGVlcyB0aGF0IGFsbCB3b3JrIGZyb20gdGhlIHF1ZXVlIGhhcyBmaW5pc2hlZC4gYC5vbkVtcHR5YCBtZXJlbHkgc2lnbmFscyB0aGF0IHRoZSBxdWV1ZSBpcyBlbXB0eSwgYnV0IGl0IGNvdWxkIG1lYW4gdGhhdCBzb21lIHByb21pc2VzIGhhdmVuJ3QgY29tcGxldGVkIHlldC5cblxuICAgIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHNldHRsZXMgd2hlbiB0aGUgcXVldWUgYmVjb21lcyBlbXB0eSwgYW5kIGFsbCBwcm9taXNlcyBoYXZlIGNvbXBsZXRlZDsgYHF1ZXVlLnNpemUgPT09IDAgJiYgcXVldWUucGVuZGluZyA9PT0gMGAuXG4gICAgKi9cbiAgICBhc3luYyBvbklkbGUoKSB7XG4gICAgICAgIC8vIEluc3RhbnRseSByZXNvbHZlIGlmIG5vbmUgcGVuZGluZyBhbmQgaWYgbm90aGluZyBlbHNlIGlzIHF1ZXVlZFxuICAgICAgICBpZiAodGhpcy4jcGVuZGluZyA9PT0gMCAmJiB0aGlzLiNxdWV1ZS5zaXplID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy4jb25FdmVudCgnaWRsZScpO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgZGlmZmVyZW5jZSB3aXRoIGAub25JZGxlYCBpcyB0aGF0IGAub25QZW5kaW5nWmVyb2Agb25seSB3YWl0cyBmb3IgY3VycmVudGx5IHJ1bm5pbmcgdGFza3MgdG8gZmluaXNoLCBpZ25vcmluZyBxdWV1ZWQgdGFza3MuXG5cbiAgICBAcmV0dXJucyBBIHByb21pc2UgdGhhdCBzZXR0bGVzIHdoZW4gYWxsIGN1cnJlbnRseSBydW5uaW5nIHRhc2tzIGhhdmUgY29tcGxldGVkOyBgcXVldWUucGVuZGluZyA9PT0gMGAuXG4gICAgKi9cbiAgICBhc3luYyBvblBlbmRpbmdaZXJvKCkge1xuICAgICAgICBpZiAodGhpcy4jcGVuZGluZyA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuI29uRXZlbnQoJ3BlbmRpbmdaZXJvJyk7XG4gICAgfVxuICAgIC8qKlxuICAgIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHNldHRsZXMgd2hlbiB0aGUgcXVldWUgYmVjb21lcyByYXRlLWxpbWl0ZWQgZHVlIHRvIGludGVydmFsQ2FwLlxuICAgICovXG4gICAgYXN5bmMgb25SYXRlTGltaXQoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzUmF0ZUxpbWl0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLiNvbkV2ZW50KCdyYXRlTGltaXQnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQHJldHVybnMgQSBwcm9taXNlIHRoYXQgc2V0dGxlcyB3aGVuIHRoZSBxdWV1ZSBpcyBubyBsb25nZXIgcmF0ZS1saW1pdGVkLlxuICAgICovXG4gICAgYXN5bmMgb25SYXRlTGltaXRDbGVhcmVkKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNSYXRlTGltaXRlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuI29uRXZlbnQoJ3JhdGVMaW1pdENsZWFyZWQnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVqZWN0cyB3aGVuIGFueSB0YXNrIGluIHRoZSBxdWV1ZSBlcnJvcnMuXG5cbiAgICBVc2Ugd2l0aCBgUHJvbWlzZS5yYWNlKFtxdWV1ZS5vbkVycm9yKCksIHF1ZXVlLm9uSWRsZSgpXSlgIHRvIGZhaWwgZmFzdCBvbiB0aGUgZmlyc3QgZXJyb3Igd2hpbGUgc3RpbGwgcmVzb2x2aW5nIG5vcm1hbGx5IHdoZW4gdGhlIHF1ZXVlIGdvZXMgaWRsZS5cblxuICAgIEltcG9ydGFudDogVGhlIHByb21pc2UgcmV0dXJuZWQgYnkgYGFkZCgpYCBzdGlsbCByZWplY3RzLiBZb3UgbXVzdCBoYW5kbGUgZWFjaCBgYWRkKClgIHByb21pc2UgKGZvciBleGFtcGxlLCBgLmNhdGNoKCgpID0+IHt9KWApIHRvIGF2b2lkIHVuaGFuZGxlZCByZWplY3Rpb25zLlxuXG4gICAgQGV4YW1wbGVcbiAgICBgYGBcbiAgICBpbXBvcnQgUFF1ZXVlIGZyb20gJ3AtcXVldWUnO1xuXG4gICAgY29uc3QgcXVldWUgPSBuZXcgUFF1ZXVlKHtjb25jdXJyZW5jeTogMn0pO1xuXG4gICAgcXVldWUuYWRkKCgpID0+IGZldGNoRGF0YSgxKSkuY2F0Y2goKCkgPT4ge30pO1xuICAgIHF1ZXVlLmFkZCgoKSA9PiBmZXRjaERhdGEoMikpLmNhdGNoKCgpID0+IHt9KTtcbiAgICBxdWV1ZS5hZGQoKCkgPT4gZmV0Y2hEYXRhKDMpKS5jYXRjaCgoKSA9PiB7fSk7XG5cbiAgICAvLyBTdG9wIHByb2Nlc3Npbmcgb24gZmlyc3QgZXJyb3JcbiAgICB0cnkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLnJhY2UoW1xuICAgICAgICAgICAgcXVldWUub25FcnJvcigpLFxuICAgICAgICAgICAgcXVldWUub25JZGxlKClcbiAgICAgICAgXSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcXVldWUucGF1c2UoKTsgLy8gU3RvcCBwcm9jZXNzaW5nIHJlbWFpbmluZyB0YXNrc1xuICAgICAgICBjb25zb2xlLmVycm9yKCdRdWV1ZSBmYWlsZWQ6JywgZXJyb3IpO1xuICAgIH1cbiAgICBgYGBcbiAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvcHJvbWlzZS1mdW5jdGlvbi1hc3luY1xuICAgIG9uRXJyb3IoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoX3Jlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlRXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9mZignZXJyb3InLCBoYW5kbGVFcnJvcik7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLm9uKCdlcnJvcicsIGhhbmRsZUVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jICNvbkV2ZW50KGV2ZW50LCBmaWx0ZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbHRlciAmJiAhZmlsdGVyKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLm9mZihldmVudCwgbGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLm9uKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICBTaXplIG9mIHRoZSBxdWV1ZSwgdGhlIG51bWJlciBvZiBxdWV1ZWQgaXRlbXMgd2FpdGluZyB0byBydW4uXG4gICAgKi9cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3F1ZXVlLnNpemU7XG4gICAgfVxuICAgIC8qKlxuICAgIFNpemUgb2YgdGhlIHF1ZXVlLCBmaWx0ZXJlZCBieSB0aGUgZ2l2ZW4gb3B0aW9ucy5cblxuICAgIEZvciBleGFtcGxlLCB0aGlzIGNhbiBiZSB1c2VkIHRvIGZpbmQgdGhlIG51bWJlciBvZiBpdGVtcyByZW1haW5pbmcgaW4gdGhlIHF1ZXVlIHdpdGggYSBzcGVjaWZpYyBwcmlvcml0eSBsZXZlbC5cbiAgICAqL1xuICAgIHNpemVCeShvcHRpb25zKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSB1bmljb3JuL25vLWFycmF5LWNhbGxiYWNrLXJlZmVyZW5jZVxuICAgICAgICByZXR1cm4gdGhpcy4jcXVldWUuZmlsdGVyKG9wdGlvbnMpLmxlbmd0aDtcbiAgICB9XG4gICAgLyoqXG4gICAgTnVtYmVyIG9mIHJ1bm5pbmcgaXRlbXMgKG5vIGxvbmdlciBpbiB0aGUgcXVldWUpLlxuICAgICovXG4gICAgZ2V0IHBlbmRpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNwZW5kaW5nO1xuICAgIH1cbiAgICAvKipcbiAgICBXaGV0aGVyIHRoZSBxdWV1ZSBpcyBjdXJyZW50bHkgcGF1c2VkLlxuICAgICovXG4gICAgZ2V0IGlzUGF1c2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jaXNQYXVzZWQ7XG4gICAgfVxuICAgICNzZXR1cFJhdGVMaW1pdFRyYWNraW5nKCkge1xuICAgICAgICAvLyBPbmx5IHNjaGVkdWxlIHVwZGF0ZXMgd2hlbiByYXRlIGxpbWl0aW5nIGlzIGVuYWJsZWRcbiAgICAgICAgaWYgKHRoaXMuI2lzSW50ZXJ2YWxJZ25vcmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2lyZSB1cCB0byBsaWZlY3ljbGUgZXZlbnRzIHRoYXQgYWZmZWN0IHJhdGUgbGltaXQgc3RhdGVcbiAgICAgICAgLy8gT25seSAnYWRkJyBhbmQgJ25leHQnIGNhbiBhY3R1YWxseSBjaGFuZ2UgcmF0ZSBsaW1pdCBzdGF0ZVxuICAgICAgICB0aGlzLm9uKCdhZGQnLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy4jcXVldWUuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNzY2hlZHVsZVJhdGVMaW1pdFVwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vbignbmV4dCcsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI3NjaGVkdWxlUmF0ZUxpbWl0VXBkYXRlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAjc2NoZWR1bGVSYXRlTGltaXRVcGRhdGUoKSB7XG4gICAgICAgIC8vIFNraXAgaWYgcmF0ZSBsaW1pdGluZyBpcyBub3QgZW5hYmxlZCBvciBhbHJlYWR5IHNjaGVkdWxlZFxuICAgICAgICBpZiAodGhpcy4jaXNJbnRlcnZhbElnbm9yZWQgfHwgdGhpcy4jcmF0ZUxpbWl0Rmx1c2hTY2hlZHVsZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNyYXRlTGltaXRGbHVzaFNjaGVkdWxlZCA9IHRydWU7XG4gICAgICAgIHF1ZXVlTWljcm90YXNrKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI3JhdGVMaW1pdEZsdXNoU2NoZWR1bGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLiN1cGRhdGVSYXRlTGltaXRTdGF0ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgI3JvbGxiYWNrSW50ZXJ2YWxDb25zdW1wdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuI2lzSW50ZXJ2YWxJZ25vcmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jcm9sbGJhY2tJbnRlcnZhbFNsb3QoKTtcbiAgICAgICAgdGhpcy4jc2NoZWR1bGVSYXRlTGltaXRVcGRhdGUoKTtcbiAgICB9XG4gICAgI3VwZGF0ZVJhdGVMaW1pdFN0YXRlKCkge1xuICAgICAgICBjb25zdCBwcmV2aW91cyA9IHRoaXMuI3JhdGVMaW1pdGVkSW5JbnRlcnZhbDtcbiAgICAgICAgLy8gRWFybHkgZXhpdCBpZiByYXRlIGxpbWl0aW5nIGlzIGRpc2FibGVkIG9yIHF1ZXVlIGlzIGVtcHR5XG4gICAgICAgIGlmICh0aGlzLiNpc0ludGVydmFsSWdub3JlZCB8fCB0aGlzLiNxdWV1ZS5zaXplID09PSAwKSB7XG4gICAgICAgICAgICBpZiAocHJldmlvdXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNyYXRlTGltaXRlZEluSW50ZXJ2YWwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3JhdGVMaW1pdENsZWFyZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBHZXQgdGhlIGN1cnJlbnQgY291bnQgYmFzZWQgb24gbW9kZVxuICAgICAgICBsZXQgY291bnQ7XG4gICAgICAgIGlmICh0aGlzLiNzdHJpY3QpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgICAgICB0aGlzLiNjbGVhbnVwU3RyaWN0VGlja3Mobm93KTtcbiAgICAgICAgICAgIGNvdW50ID0gdGhpcy4jZ2V0QWN0aXZlVGlja3NDb3VudCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY291bnQgPSB0aGlzLiNpbnRlcnZhbENvdW50O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNob3VsZEJlUmF0ZUxpbWl0ZWQgPSBjb3VudCA+PSB0aGlzLiNpbnRlcnZhbENhcDtcbiAgICAgICAgaWYgKHNob3VsZEJlUmF0ZUxpbWl0ZWQgIT09IHByZXZpb3VzKSB7XG4gICAgICAgICAgICB0aGlzLiNyYXRlTGltaXRlZEluSW50ZXJ2YWwgPSBzaG91bGRCZVJhdGVMaW1pdGVkO1xuICAgICAgICAgICAgdGhpcy5lbWl0KHNob3VsZEJlUmF0ZUxpbWl0ZWQgPyAncmF0ZUxpbWl0JyA6ICdyYXRlTGltaXRDbGVhcmVkJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgV2hldGhlciB0aGUgcXVldWUgaXMgY3VycmVudGx5IHJhdGUtbGltaXRlZCBkdWUgdG8gaW50ZXJ2YWxDYXAuXG4gICAgKi9cbiAgICBnZXQgaXNSYXRlTGltaXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3JhdGVMaW1pdGVkSW5JbnRlcnZhbDtcbiAgICB9XG4gICAgLyoqXG4gICAgV2hldGhlciB0aGUgcXVldWUgaXMgc2F0dXJhdGVkLiBSZXR1cm5zIGB0cnVlYCB3aGVuOlxuICAgIC0gQWxsIGNvbmN1cnJlbmN5IHNsb3RzIGFyZSBvY2N1cGllZCBhbmQgdGFza3MgYXJlIHdhaXRpbmcsIE9SXG4gICAgLSBUaGUgcXVldWUgaXMgcmF0ZS1saW1pdGVkIGFuZCB0YXNrcyBhcmUgd2FpdGluZ1xuXG4gICAgVXNlZnVsIGZvciBkZXRlY3RpbmcgYmFja3ByZXNzdXJlIGFuZCBwb3RlbnRpYWwgaGFuZ2luZyB0YXNrcy5cblxuICAgIGBgYGpzXG4gICAgaW1wb3J0IFBRdWV1ZSBmcm9tICdwLXF1ZXVlJztcblxuICAgIGNvbnN0IHF1ZXVlID0gbmV3IFBRdWV1ZSh7Y29uY3VycmVuY3k6IDJ9KTtcblxuICAgIC8vIEJhY2twcmVzc3VyZSBoYW5kbGluZ1xuICAgIGlmIChxdWV1ZS5pc1NhdHVyYXRlZCkge1xuICAgICAgICBjb25zb2xlLmxvZygnUXVldWUgaXMgc2F0dXJhdGVkLCB3YWl0aW5nIGZvciBjYXBhY2l0eS4uLicpO1xuICAgICAgICBhd2FpdCBxdWV1ZS5vblNpemVMZXNzVGhhbihxdWV1ZS5jb25jdXJyZW5jeSk7XG4gICAgfVxuXG4gICAgLy8gTW9uaXRvcmluZyBmb3Igc3R1Y2sgdGFza3NcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIGlmIChxdWV1ZS5pc1NhdHVyYXRlZCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBRdWV1ZSBzYXR1cmF0ZWQ6ICR7cXVldWUucGVuZGluZ30gcnVubmluZywgJHtxdWV1ZS5zaXplfSB3YWl0aW5nYCk7XG4gICAgICAgIH1cbiAgICB9LCA2MDAwMCk7XG4gICAgYGBgXG4gICAgKi9cbiAgICBnZXQgaXNTYXR1cmF0ZWQoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy4jcGVuZGluZyA9PT0gdGhpcy4jY29uY3VycmVuY3kgJiYgdGhpcy4jcXVldWUuc2l6ZSA+IDApXG4gICAgICAgICAgICB8fCAodGhpcy5pc1JhdGVMaW1pdGVkICYmIHRoaXMuI3F1ZXVlLnNpemUgPiAwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIHRhc2tzIGN1cnJlbnRseSBiZWluZyBleGVjdXRlZC4gRWFjaCB0YXNrIGluY2x1ZGVzIGl0cyBgaWRgLCBgcHJpb3JpdHlgLCBgc3RhcnRUaW1lYCwgYW5kIGB0aW1lb3V0YCAoaWYgc2V0KS5cblxuICAgIFJldHVybnMgYW4gYXJyYXkgb2YgdGFzayBpbmZvIG9iamVjdHMuXG5cbiAgICBgYGBqc1xuICAgIGltcG9ydCBQUXVldWUgZnJvbSAncC1xdWV1ZSc7XG5cbiAgICBjb25zdCBxdWV1ZSA9IG5ldyBQUXVldWUoe2NvbmN1cnJlbmN5OiAyfSk7XG5cbiAgICAvLyBBZGQgdGFza3Mgd2l0aCBJRHMgZm9yIGJldHRlciBkZWJ1Z2dpbmdcbiAgICBxdWV1ZS5hZGQoKCkgPT4gZmV0Y2hVc2VyKDEyMyksIHtpZDogJ3VzZXItMTIzJ30pO1xuICAgIHF1ZXVlLmFkZCgoKSA9PiBmZXRjaFBvc3RzKDQ1NiksIHtpZDogJ3Bvc3RzLTQ1NicsIHByaW9yaXR5OiAxfSk7XG5cbiAgICAvLyBDaGVjayB3aGF0J3MgcnVubmluZ1xuICAgIGNvbnNvbGUubG9nKHF1ZXVlLnJ1bm5pbmdUYXNrcyk7XG4gICAgLy8gPT4gW3tcbiAgICAvLyAgIGlkOiAndXNlci0xMjMnLFxuICAgIC8vICAgcHJpb3JpdHk6IDAsXG4gICAgLy8gICBzdGFydFRpbWU6IDE3NTkyNTMwMDE3MTYsXG4gICAgLy8gICB0aW1lb3V0OiB1bmRlZmluZWRcbiAgICAvLyB9LCB7XG4gICAgLy8gICBpZDogJ3Bvc3RzLTQ1NicsXG4gICAgLy8gICBwcmlvcml0eTogMSxcbiAgICAvLyAgIHN0YXJ0VGltZTogMTc1OTI1MzAwMTkxNixcbiAgICAvLyAgIHRpbWVvdXQ6IHVuZGVmaW5lZFxuICAgIC8vIH1dXG4gICAgYGBgXG4gICAgKi9cbiAgICBnZXQgcnVubmluZ1Rhc2tzKCkge1xuICAgICAgICAvLyBSZXR1cm4gZnJlc2ggYXJyYXkgd2l0aCBmcmVzaCBvYmplY3RzIHRvIHByZXZlbnQgbXV0YXRpb25zXG4gICAgICAgIHJldHVybiBbLi4udGhpcy4jcnVubmluZ1Rhc2tzLnZhbHVlcygpXS5tYXAodGFzayA9PiAoeyAuLi50YXNrIH0pKTtcbiAgICB9XG59XG4vKipcbkVycm9yIHRocm93biB3aGVuIGEgdGFzayB0aW1lcyBvdXQuXG5cbkBleGFtcGxlXG5gYGBcbmltcG9ydCBQUXVldWUsIHtUaW1lb3V0RXJyb3J9IGZyb20gJ3AtcXVldWUnO1xuXG5jb25zdCBxdWV1ZSA9IG5ldyBQUXVldWUoe3RpbWVvdXQ6IDEwMDB9KTtcblxudHJ5IHtcbiAgICBhd2FpdCBxdWV1ZS5hZGQoKCkgPT4gc29tZVRhc2soKSk7XG59IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFRpbWVvdXRFcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZygnVGFzayB0aW1lZCBvdXQnKTtcbiAgICB9XG59XG5gYGBcbiovXG5leHBvcnQgeyBUaW1lb3V0RXJyb3IgfSBmcm9tICdwLXRpbWVvdXQnO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/node_modules/p-queue/dist/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/node_modules/p-queue/dist/lower-bound.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/node_modules/p-queue/dist/lower-bound.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ lowerBound)\n/* harmony export */ });\n// Port of lower_bound from https://en.cppreference.com/w/cpp/algorithm/lower_bound\n// Used to compute insertion index to keep queue sorted after insertion\nfunction lowerBound(array, value, comparator) {\n    let first = 0;\n    let count = array.length;\n    while (count > 0) {\n        const step = Math.trunc(count / 2);\n        let it = first + step;\n        if (comparator(array[it], value) <= 0) {\n            first = ++it;\n            count -= step + 1;\n        }\n        else {\n            count = step;\n        }\n    }\n    return first;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL25vZGVfbW9kdWxlcy9wLXF1ZXVlL2Rpc3QvbG93ZXItYm91bmQuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoLXNkay9ub2RlX21vZHVsZXMvcC1xdWV1ZS9kaXN0L2xvd2VyLWJvdW5kLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFBvcnQgb2YgbG93ZXJfYm91bmQgZnJvbSBodHRwczovL2VuLmNwcHJlZmVyZW5jZS5jb20vdy9jcHAvYWxnb3JpdGhtL2xvd2VyX2JvdW5kXG4vLyBVc2VkIHRvIGNvbXB1dGUgaW5zZXJ0aW9uIGluZGV4IHRvIGtlZXAgcXVldWUgc29ydGVkIGFmdGVyIGluc2VydGlvblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbG93ZXJCb3VuZChhcnJheSwgdmFsdWUsIGNvbXBhcmF0b3IpIHtcbiAgICBsZXQgZmlyc3QgPSAwO1xuICAgIGxldCBjb3VudCA9IGFycmF5Lmxlbmd0aDtcbiAgICB3aGlsZSAoY291bnQgPiAwKSB7XG4gICAgICAgIGNvbnN0IHN0ZXAgPSBNYXRoLnRydW5jKGNvdW50IC8gMik7XG4gICAgICAgIGxldCBpdCA9IGZpcnN0ICsgc3RlcDtcbiAgICAgICAgaWYgKGNvbXBhcmF0b3IoYXJyYXlbaXRdLCB2YWx1ZSkgPD0gMCkge1xuICAgICAgICAgICAgZmlyc3QgPSArK2l0O1xuICAgICAgICAgICAgY291bnQgLT0gc3RlcCArIDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb3VudCA9IHN0ZXA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZpcnN0O1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/node_modules/p-queue/dist/lower-bound.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/node_modules/p-queue/dist/priority-queue.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/node_modules/p-queue/dist/priority-queue.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ PriorityQueue)\n/* harmony export */ });\n/* harmony import */ var _lower_bound_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lower-bound.js */ \"(ssr)/./node_modules/@langchain/langgraph-sdk/node_modules/p-queue/dist/lower-bound.js\");\n\nclass PriorityQueue {\n    #queue = [];\n    enqueue(run, options) {\n        const { priority = 0, id, } = options ?? {};\n        const element = {\n            priority,\n            id,\n            run,\n        };\n        if (this.size === 0 || this.#queue[this.size - 1].priority >= priority) {\n            this.#queue.push(element);\n            return;\n        }\n        const index = (0,_lower_bound_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this.#queue, element, (a, b) => b.priority - a.priority);\n        this.#queue.splice(index, 0, element);\n    }\n    setPriority(id, priority) {\n        const index = this.#queue.findIndex((element) => element.id === id);\n        if (index === -1) {\n            throw new ReferenceError(`No promise function with the id \"${id}\" exists in the queue.`);\n        }\n        const [item] = this.#queue.splice(index, 1);\n        this.enqueue(item.run, { priority, id });\n    }\n    dequeue() {\n        const item = this.#queue.shift();\n        return item?.run;\n    }\n    filter(options) {\n        return this.#queue.filter((element) => element.priority === options.priority).map((element) => element.run);\n    }\n    get size() {\n        return this.#queue.length;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL25vZGVfbW9kdWxlcy9wLXF1ZXVlL2Rpc3QvcHJpb3JpdHktcXVldWUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMEM7QUFDM0I7QUFDZjtBQUNBO0FBQ0EsZ0JBQWdCLG9CQUFvQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsMkRBQVU7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RSxHQUFHO0FBQzVFO0FBQ0E7QUFDQSxpQ0FBaUMsY0FBYztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC1zZGsvbm9kZV9tb2R1bGVzL3AtcXVldWUvZGlzdC9wcmlvcml0eS1xdWV1ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbG93ZXJCb3VuZCBmcm9tICcuL2xvd2VyLWJvdW5kLmpzJztcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByaW9yaXR5UXVldWUge1xuICAgICNxdWV1ZSA9IFtdO1xuICAgIGVucXVldWUocnVuLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHsgcHJpb3JpdHkgPSAwLCBpZCwgfSA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB7XG4gICAgICAgICAgICBwcmlvcml0eSxcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgcnVuLFxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5zaXplID09PSAwIHx8IHRoaXMuI3F1ZXVlW3RoaXMuc2l6ZSAtIDFdLnByaW9yaXR5ID49IHByaW9yaXR5KSB7XG4gICAgICAgICAgICB0aGlzLiNxdWV1ZS5wdXNoKGVsZW1lbnQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGV4ID0gbG93ZXJCb3VuZCh0aGlzLiNxdWV1ZSwgZWxlbWVudCwgKGEsIGIpID0+IGIucHJpb3JpdHkgLSBhLnByaW9yaXR5KTtcbiAgICAgICAgdGhpcy4jcXVldWUuc3BsaWNlKGluZGV4LCAwLCBlbGVtZW50KTtcbiAgICB9XG4gICAgc2V0UHJpb3JpdHkoaWQsIHByaW9yaXR5KSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy4jcXVldWUuZmluZEluZGV4KChlbGVtZW50KSA9PiBlbGVtZW50LmlkID09PSBpZCk7XG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihgTm8gcHJvbWlzZSBmdW5jdGlvbiB3aXRoIHRoZSBpZCBcIiR7aWR9XCIgZXhpc3RzIGluIHRoZSBxdWV1ZS5gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBbaXRlbV0gPSB0aGlzLiNxdWV1ZS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB0aGlzLmVucXVldWUoaXRlbS5ydW4sIHsgcHJpb3JpdHksIGlkIH0pO1xuICAgIH1cbiAgICBkZXF1ZXVlKCkge1xuICAgICAgICBjb25zdCBpdGVtID0gdGhpcy4jcXVldWUuc2hpZnQoKTtcbiAgICAgICAgcmV0dXJuIGl0ZW0/LnJ1bjtcbiAgICB9XG4gICAgZmlsdGVyKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3F1ZXVlLmZpbHRlcigoZWxlbWVudCkgPT4gZWxlbWVudC5wcmlvcml0eSA9PT0gb3B0aW9ucy5wcmlvcml0eSkubWFwKChlbGVtZW50KSA9PiBlbGVtZW50LnJ1bik7XG4gICAgfVxuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jcXVldWUubGVuZ3RoO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/node_modules/p-queue/dist/priority-queue.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph-sdk/node_modules/p-timeout/index.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph-sdk/node_modules/p-timeout/index.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TimeoutError: () => (/* binding */ TimeoutError),\n/* harmony export */   \"default\": () => (/* binding */ pTimeout)\n/* harmony export */ });\nclass TimeoutError extends Error {\n\tname = 'TimeoutError';\n\n\tconstructor(message, options) {\n\t\tsuper(message, options);\n\t\tError.captureStackTrace?.(this, TimeoutError);\n\t}\n}\n\nconst getAbortedReason = signal => signal.reason ?? new DOMException('This operation was aborted.', 'AbortError');\n\nfunction pTimeout(promise, options) {\n\tconst {\n\t\tmilliseconds,\n\t\tfallback,\n\t\tmessage,\n\t\tcustomTimers = {setTimeout, clearTimeout},\n\t\tsignal,\n\t} = options;\n\n\tlet timer;\n\tlet abortHandler;\n\n\tconst wrappedPromise = new Promise((resolve, reject) => {\n\t\tif (typeof milliseconds !== 'number' || Math.sign(milliseconds) !== 1) {\n\t\t\tthrow new TypeError(`Expected \\`milliseconds\\` to be a positive number, got \\`${milliseconds}\\``);\n\t\t}\n\n\t\tif (signal?.aborted) {\n\t\t\treject(getAbortedReason(signal));\n\t\t\treturn;\n\t\t}\n\n\t\tif (signal) {\n\t\t\tabortHandler = () => {\n\t\t\t\treject(getAbortedReason(signal));\n\t\t\t};\n\n\t\t\tsignal.addEventListener('abort', abortHandler, {once: true});\n\t\t}\n\n\t\t// Use .then() instead of async IIFE to preserve stack traces\n\t\t// eslint-disable-next-line promise/prefer-await-to-then, promise/prefer-catch\n\t\tpromise.then(resolve, reject);\n\n\t\tif (milliseconds === Number.POSITIVE_INFINITY) {\n\t\t\treturn;\n\t\t}\n\n\t\t// We create the error outside of `setTimeout` to preserve the stack trace.\n\t\tconst timeoutError = new TimeoutError();\n\n\t\t// `.call(undefined, ...)` is needed for custom timers to avoid context issues\n\t\ttimer = customTimers.setTimeout.call(undefined, () => {\n\t\t\tif (fallback) {\n\t\t\t\ttry {\n\t\t\t\t\tresolve(fallback());\n\t\t\t\t} catch (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (typeof promise.cancel === 'function') {\n\t\t\t\tpromise.cancel();\n\t\t\t}\n\n\t\t\tif (message === false) {\n\t\t\t\tresolve();\n\t\t\t} else if (message instanceof Error) {\n\t\t\t\treject(message);\n\t\t\t} else {\n\t\t\t\ttimeoutError.message = message ?? `Promise timed out after ${milliseconds} milliseconds`;\n\t\t\t\treject(timeoutError);\n\t\t\t}\n\t\t}, milliseconds);\n\t});\n\n\t// eslint-disable-next-line promise/prefer-await-to-then\n\tconst cancelablePromise = wrappedPromise.finally(() => {\n\t\tcancelablePromise.clear();\n\t\tif (abortHandler && signal) {\n\t\t\tsignal.removeEventListener('abort', abortHandler);\n\t\t}\n\t});\n\n\tcancelablePromise.clear = () => {\n\t\t// `.call(undefined, ...)` is needed for custom timers to avoid context issues\n\t\tcustomTimers.clearTimeout.call(undefined, timer);\n\t\ttimer = undefined;\n\t};\n\n\treturn cancelablePromise;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgtc2RrL25vZGVfbW9kdWxlcy9wLXRpbWVvdXQvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix5QkFBeUI7QUFDM0M7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG1GQUFtRixhQUFhO0FBQ2hHOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG1EQUFtRCxXQUFXO0FBQzlEOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTCxpRUFBaUUsY0FBYztBQUMvRTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC1zZGsvbm9kZV9tb2R1bGVzL3AtdGltZW91dC9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgVGltZW91dEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuXHRuYW1lID0gJ1RpbWVvdXRFcnJvcic7XG5cblx0Y29uc3RydWN0b3IobWVzc2FnZSwgb3B0aW9ucykge1xuXHRcdHN1cGVyKG1lc3NhZ2UsIG9wdGlvbnMpO1xuXHRcdEVycm9yLmNhcHR1cmVTdGFja1RyYWNlPy4odGhpcywgVGltZW91dEVycm9yKTtcblx0fVxufVxuXG5jb25zdCBnZXRBYm9ydGVkUmVhc29uID0gc2lnbmFsID0+IHNpZ25hbC5yZWFzb24gPz8gbmV3IERPTUV4Y2VwdGlvbignVGhpcyBvcGVyYXRpb24gd2FzIGFib3J0ZWQuJywgJ0Fib3J0RXJyb3InKTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcFRpbWVvdXQocHJvbWlzZSwgb3B0aW9ucykge1xuXHRjb25zdCB7XG5cdFx0bWlsbGlzZWNvbmRzLFxuXHRcdGZhbGxiYWNrLFxuXHRcdG1lc3NhZ2UsXG5cdFx0Y3VzdG9tVGltZXJzID0ge3NldFRpbWVvdXQsIGNsZWFyVGltZW91dH0sXG5cdFx0c2lnbmFsLFxuXHR9ID0gb3B0aW9ucztcblxuXHRsZXQgdGltZXI7XG5cdGxldCBhYm9ydEhhbmRsZXI7XG5cblx0Y29uc3Qgd3JhcHBlZFByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0aWYgKHR5cGVvZiBtaWxsaXNlY29uZHMgIT09ICdudW1iZXInIHx8IE1hdGguc2lnbihtaWxsaXNlY29uZHMpICE9PSAxKSB7XG5cdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKGBFeHBlY3RlZCBcXGBtaWxsaXNlY29uZHNcXGAgdG8gYmUgYSBwb3NpdGl2ZSBudW1iZXIsIGdvdCBcXGAke21pbGxpc2Vjb25kc31cXGBgKTtcblx0XHR9XG5cblx0XHRpZiAoc2lnbmFsPy5hYm9ydGVkKSB7XG5cdFx0XHRyZWplY3QoZ2V0QWJvcnRlZFJlYXNvbihzaWduYWwpKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoc2lnbmFsKSB7XG5cdFx0XHRhYm9ydEhhbmRsZXIgPSAoKSA9PiB7XG5cdFx0XHRcdHJlamVjdChnZXRBYm9ydGVkUmVhc29uKHNpZ25hbCkpO1xuXHRcdFx0fTtcblxuXHRcdFx0c2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgYWJvcnRIYW5kbGVyLCB7b25jZTogdHJ1ZX0pO1xuXHRcdH1cblxuXHRcdC8vIFVzZSAudGhlbigpIGluc3RlYWQgb2YgYXN5bmMgSUlGRSB0byBwcmVzZXJ2ZSBzdGFjayB0cmFjZXNcblx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJvbWlzZS9wcmVmZXItYXdhaXQtdG8tdGhlbiwgcHJvbWlzZS9wcmVmZXItY2F0Y2hcblx0XHRwcm9taXNlLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcblxuXHRcdGlmIChtaWxsaXNlY29uZHMgPT09IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIFdlIGNyZWF0ZSB0aGUgZXJyb3Igb3V0c2lkZSBvZiBgc2V0VGltZW91dGAgdG8gcHJlc2VydmUgdGhlIHN0YWNrIHRyYWNlLlxuXHRcdGNvbnN0IHRpbWVvdXRFcnJvciA9IG5ldyBUaW1lb3V0RXJyb3IoKTtcblxuXHRcdC8vIGAuY2FsbCh1bmRlZmluZWQsIC4uLilgIGlzIG5lZWRlZCBmb3IgY3VzdG9tIHRpbWVycyB0byBhdm9pZCBjb250ZXh0IGlzc3Vlc1xuXHRcdHRpbWVyID0gY3VzdG9tVGltZXJzLnNldFRpbWVvdXQuY2FsbCh1bmRlZmluZWQsICgpID0+IHtcblx0XHRcdGlmIChmYWxsYmFjaykge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHJlc29sdmUoZmFsbGJhY2soKSk7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHR5cGVvZiBwcm9taXNlLmNhbmNlbCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRwcm9taXNlLmNhbmNlbCgpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAobWVzc2FnZSA9PT0gZmFsc2UpIHtcblx0XHRcdFx0cmVzb2x2ZSgpO1xuXHRcdFx0fSBlbHNlIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgRXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KG1lc3NhZ2UpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGltZW91dEVycm9yLm1lc3NhZ2UgPSBtZXNzYWdlID8/IGBQcm9taXNlIHRpbWVkIG91dCBhZnRlciAke21pbGxpc2Vjb25kc30gbWlsbGlzZWNvbmRzYDtcblx0XHRcdFx0cmVqZWN0KHRpbWVvdXRFcnJvcik7XG5cdFx0XHR9XG5cdFx0fSwgbWlsbGlzZWNvbmRzKTtcblx0fSk7XG5cblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByb21pc2UvcHJlZmVyLWF3YWl0LXRvLXRoZW5cblx0Y29uc3QgY2FuY2VsYWJsZVByb21pc2UgPSB3cmFwcGVkUHJvbWlzZS5maW5hbGx5KCgpID0+IHtcblx0XHRjYW5jZWxhYmxlUHJvbWlzZS5jbGVhcigpO1xuXHRcdGlmIChhYm9ydEhhbmRsZXIgJiYgc2lnbmFsKSB7XG5cdFx0XHRzaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBhYm9ydEhhbmRsZXIpO1xuXHRcdH1cblx0fSk7XG5cblx0Y2FuY2VsYWJsZVByb21pc2UuY2xlYXIgPSAoKSA9PiB7XG5cdFx0Ly8gYC5jYWxsKHVuZGVmaW5lZCwgLi4uKWAgaXMgbmVlZGVkIGZvciBjdXN0b20gdGltZXJzIHRvIGF2b2lkIGNvbnRleHQgaXNzdWVzXG5cdFx0Y3VzdG9tVGltZXJzLmNsZWFyVGltZW91dC5jYWxsKHVuZGVmaW5lZCwgdGltZXIpO1xuXHRcdHRpbWVyID0gdW5kZWZpbmVkO1xuXHR9O1xuXG5cdHJldHVybiBjYW5jZWxhYmxlUHJvbWlzZTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph-sdk/node_modules/p-timeout/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/channels/any_value.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/channels/any_value.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AnyValue: () => (/* binding */ AnyValue)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/base.js\");\n\n\n\n//#region src/channels/any_value.ts\n/**\n* Stores the last value received, assumes that if multiple values are received, they are all equal.\n*\n* Note: Unlike 'LastValue' if multiple nodes write to this channel in a single step, the values\n* will be continuously overwritten.\n*/\nvar AnyValue = class AnyValue extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseChannel {\n\tlc_graph_name = \"AnyValue\";\n\tvalue = [];\n\tconstructor() {\n\t\tsuper();\n\t}\n\tfromCheckpoint(checkpoint) {\n\t\tconst empty = new AnyValue();\n\t\tif (typeof checkpoint !== \"undefined\") empty.value = [checkpoint];\n\t\treturn empty;\n\t}\n\tupdate(values) {\n\t\tif (values.length === 0) {\n\t\t\tconst updated = this.value.length > 0;\n\t\t\tthis.value = [];\n\t\t\treturn updated;\n\t\t}\n\t\tthis.value = [values[values.length - 1]];\n\t\treturn false;\n\t}\n\tget() {\n\t\tif (this.value.length === 0) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError();\n\t\treturn this.value[0];\n\t}\n\tcheckpoint() {\n\t\tif (this.value.length === 0) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError();\n\t\treturn this.value[0];\n\t}\n\tisAvailable() {\n\t\treturn this.value.length !== 0;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=any_value.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9jaGFubmVscy9hbnlfdmFsdWUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWlEO0FBQ1Q7O0FBRXhDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLGlEQUFXO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMseURBQWlCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyx5REFBaUI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ29CO0FBQ3BCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9jaGFubmVscy9hbnlfdmFsdWUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRW1wdHlDaGFubmVsRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBCYXNlQ2hhbm5lbCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9jaGFubmVscy9hbnlfdmFsdWUudHNcbi8qKlxuKiBTdG9yZXMgdGhlIGxhc3QgdmFsdWUgcmVjZWl2ZWQsIGFzc3VtZXMgdGhhdCBpZiBtdWx0aXBsZSB2YWx1ZXMgYXJlIHJlY2VpdmVkLCB0aGV5IGFyZSBhbGwgZXF1YWwuXG4qXG4qIE5vdGU6IFVubGlrZSAnTGFzdFZhbHVlJyBpZiBtdWx0aXBsZSBub2RlcyB3cml0ZSB0byB0aGlzIGNoYW5uZWwgaW4gYSBzaW5nbGUgc3RlcCwgdGhlIHZhbHVlc1xuKiB3aWxsIGJlIGNvbnRpbnVvdXNseSBvdmVyd3JpdHRlbi5cbiovXG52YXIgQW55VmFsdWUgPSBjbGFzcyBBbnlWYWx1ZSBleHRlbmRzIEJhc2VDaGFubmVsIHtcblx0bGNfZ3JhcGhfbmFtZSA9IFwiQW55VmFsdWVcIjtcblx0dmFsdWUgPSBbXTtcblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0c3VwZXIoKTtcblx0fVxuXHRmcm9tQ2hlY2twb2ludChjaGVja3BvaW50KSB7XG5cdFx0Y29uc3QgZW1wdHkgPSBuZXcgQW55VmFsdWUoKTtcblx0XHRpZiAodHlwZW9mIGNoZWNrcG9pbnQgIT09IFwidW5kZWZpbmVkXCIpIGVtcHR5LnZhbHVlID0gW2NoZWNrcG9pbnRdO1xuXHRcdHJldHVybiBlbXB0eTtcblx0fVxuXHR1cGRhdGUodmFsdWVzKSB7XG5cdFx0aWYgKHZhbHVlcy5sZW5ndGggPT09IDApIHtcblx0XHRcdGNvbnN0IHVwZGF0ZWQgPSB0aGlzLnZhbHVlLmxlbmd0aCA+IDA7XG5cdFx0XHR0aGlzLnZhbHVlID0gW107XG5cdFx0XHRyZXR1cm4gdXBkYXRlZDtcblx0XHR9XG5cdFx0dGhpcy52YWx1ZSA9IFt2YWx1ZXNbdmFsdWVzLmxlbmd0aCAtIDFdXTtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0Z2V0KCkge1xuXHRcdGlmICh0aGlzLnZhbHVlLmxlbmd0aCA9PT0gMCkgdGhyb3cgbmV3IEVtcHR5Q2hhbm5lbEVycm9yKCk7XG5cdFx0cmV0dXJuIHRoaXMudmFsdWVbMF07XG5cdH1cblx0Y2hlY2twb2ludCgpIHtcblx0XHRpZiAodGhpcy52YWx1ZS5sZW5ndGggPT09IDApIHRocm93IG5ldyBFbXB0eUNoYW5uZWxFcnJvcigpO1xuXHRcdHJldHVybiB0aGlzLnZhbHVlWzBdO1xuXHR9XG5cdGlzQXZhaWxhYmxlKCkge1xuXHRcdHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aCAhPT0gMDtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBBbnlWYWx1ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW55X3ZhbHVlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/channels/any_value.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/channels/base.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/channels/base.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseChannel: () => (/* binding */ BaseChannel),\n/* harmony export */   createCheckpoint: () => (/* binding */ createCheckpoint),\n/* harmony export */   emptyChannels: () => (/* binding */ emptyChannels),\n/* harmony export */   getOnlyChannels: () => (/* binding */ getOnlyChannels),\n/* harmony export */   isBaseChannel: () => (/* binding */ isBaseChannel)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/langgraph-checkpoint */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/index.js\");\n\n\n\n//#region src/channels/base.ts\nfunction isBaseChannel(obj) {\n\treturn obj != null && obj.lg_is_channel === true;\n}\n/** @internal */\nvar BaseChannel = class {\n\tValueType;\n\tUpdateType;\n\t/** @ignore */\n\tlg_is_channel = true;\n\t/**\n\t* Mark the current value of the channel as consumed. By default, no-op.\n\t* A channel can use this method to modify its state, preventing the value\n\t* from being consumed again.\n\t*\n\t* Returns True if the channel was updated, False otherwise.\n\t*/\n\tconsume() {\n\t\treturn false;\n\t}\n\t/**\n\t* Notify the channel that the Pregel run is finishing. By default, no-op.\n\t* A channel can use this method to modify its state, preventing finish.\n\t*\n\t* Returns True if the channel was updated, False otherwise.\n\t*/\n\tfinish() {\n\t\treturn false;\n\t}\n\t/**\n\t* Return True if the channel is available (not empty), False otherwise.\n\t* Subclasses should override this method to provide a more efficient\n\t* implementation than calling get() and catching EmptyChannelError.\n\t*/\n\tisAvailable() {\n\t\ttry {\n\t\t\tthis.get();\n\t\t\treturn true;\n\t\t} catch (error) {\n\t\t\tif (error.name === _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError.unminifiable_name) return false;\n\t\t\tthrow error;\n\t\t}\n\t}\n};\nconst IS_ONLY_BASE_CHANNEL = Symbol.for(\"LG_IS_ONLY_BASE_CHANNEL\");\nfunction getOnlyChannels(channels) {\n\tif (channels[IS_ONLY_BASE_CHANNEL] === true) return channels;\n\tconst newChannels = {};\n\tfor (const k in channels) {\n\t\tif (!Object.prototype.hasOwnProperty.call(channels, k)) continue;\n\t\tconst value = channels[k];\n\t\tif (isBaseChannel(value)) newChannels[k] = value;\n\t}\n\tObject.assign(newChannels, { [IS_ONLY_BASE_CHANNEL]: true });\n\treturn newChannels;\n}\nfunction emptyChannels(channels, checkpoint) {\n\tconst filteredChannels = getOnlyChannels(channels);\n\tconst newChannels = {};\n\tfor (const k in filteredChannels) {\n\t\tif (!Object.prototype.hasOwnProperty.call(filteredChannels, k)) continue;\n\t\tconst channelValue = checkpoint.channel_values[k];\n\t\tnewChannels[k] = filteredChannels[k].fromCheckpoint(channelValue);\n\t}\n\tObject.assign(newChannels, { [IS_ONLY_BASE_CHANNEL]: true });\n\treturn newChannels;\n}\nfunction createCheckpoint(checkpoint, channels, step, options) {\n\tlet values;\n\tif (channels === void 0) values = checkpoint.channel_values;\n\telse {\n\t\tvalues = {};\n\t\tfor (const k in channels) {\n\t\t\tif (!Object.prototype.hasOwnProperty.call(channels, k)) continue;\n\t\t\ttry {\n\t\t\t\tvalues[k] = channels[k].checkpoint();\n\t\t\t} catch (error) {\n\t\t\t\tif (error.name === _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError.unminifiable_name) {} else throw error;\n\t\t\t}\n\t\t}\n\t}\n\treturn {\n\t\tv: 4,\n\t\tid: options?.id ?? (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_1__.uuid6)(step),\n\t\tts: (/* @__PURE__ */ new Date()).toISOString(),\n\t\tchannel_values: values,\n\t\tchannel_versions: checkpoint.channel_versions,\n\t\tversions_seen: checkpoint.versions_seen\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=base.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9jaGFubmVscy9iYXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBaUQ7QUFDTzs7QUFFeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixzQkFBc0IseURBQWlCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDhCQUE4QjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qiw4QkFBOEI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCx1QkFBdUIseURBQWlCLHVCQUF1QjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHNFQUFLO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUN3RjtBQUN4RiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvY2hhbm5lbHMvYmFzZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFbXB0eUNoYW5uZWxFcnJvciB9IGZyb20gXCIuLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IHV1aWQ2IH0gZnJvbSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoLWNoZWNrcG9pbnRcIjtcblxuLy8jcmVnaW9uIHNyYy9jaGFubmVscy9iYXNlLnRzXG5mdW5jdGlvbiBpc0Jhc2VDaGFubmVsKG9iaikge1xuXHRyZXR1cm4gb2JqICE9IG51bGwgJiYgb2JqLmxnX2lzX2NoYW5uZWwgPT09IHRydWU7XG59XG4vKiogQGludGVybmFsICovXG52YXIgQmFzZUNoYW5uZWwgPSBjbGFzcyB7XG5cdFZhbHVlVHlwZTtcblx0VXBkYXRlVHlwZTtcblx0LyoqIEBpZ25vcmUgKi9cblx0bGdfaXNfY2hhbm5lbCA9IHRydWU7XG5cdC8qKlxuXHQqIE1hcmsgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIGNoYW5uZWwgYXMgY29uc3VtZWQuIEJ5IGRlZmF1bHQsIG5vLW9wLlxuXHQqIEEgY2hhbm5lbCBjYW4gdXNlIHRoaXMgbWV0aG9kIHRvIG1vZGlmeSBpdHMgc3RhdGUsIHByZXZlbnRpbmcgdGhlIHZhbHVlXG5cdCogZnJvbSBiZWluZyBjb25zdW1lZCBhZ2Fpbi5cblx0KlxuXHQqIFJldHVybnMgVHJ1ZSBpZiB0aGUgY2hhbm5lbCB3YXMgdXBkYXRlZCwgRmFsc2Ugb3RoZXJ3aXNlLlxuXHQqL1xuXHRjb25zdW1lKCkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHQvKipcblx0KiBOb3RpZnkgdGhlIGNoYW5uZWwgdGhhdCB0aGUgUHJlZ2VsIHJ1biBpcyBmaW5pc2hpbmcuIEJ5IGRlZmF1bHQsIG5vLW9wLlxuXHQqIEEgY2hhbm5lbCBjYW4gdXNlIHRoaXMgbWV0aG9kIHRvIG1vZGlmeSBpdHMgc3RhdGUsIHByZXZlbnRpbmcgZmluaXNoLlxuXHQqXG5cdCogUmV0dXJucyBUcnVlIGlmIHRoZSBjaGFubmVsIHdhcyB1cGRhdGVkLCBGYWxzZSBvdGhlcndpc2UuXG5cdCovXG5cdGZpbmlzaCgpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0LyoqXG5cdCogUmV0dXJuIFRydWUgaWYgdGhlIGNoYW5uZWwgaXMgYXZhaWxhYmxlIChub3QgZW1wdHkpLCBGYWxzZSBvdGhlcndpc2UuXG5cdCogU3ViY2xhc3NlcyBzaG91bGQgb3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gcHJvdmlkZSBhIG1vcmUgZWZmaWNpZW50XG5cdCogaW1wbGVtZW50YXRpb24gdGhhbiBjYWxsaW5nIGdldCgpIGFuZCBjYXRjaGluZyBFbXB0eUNoYW5uZWxFcnJvci5cblx0Ki9cblx0aXNBdmFpbGFibGUoKSB7XG5cdFx0dHJ5IHtcblx0XHRcdHRoaXMuZ2V0KCk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0aWYgKGVycm9yLm5hbWUgPT09IEVtcHR5Q2hhbm5lbEVycm9yLnVubWluaWZpYWJsZV9uYW1lKSByZXR1cm4gZmFsc2U7XG5cdFx0XHR0aHJvdyBlcnJvcjtcblx0XHR9XG5cdH1cbn07XG5jb25zdCBJU19PTkxZX0JBU0VfQ0hBTk5FTCA9IFN5bWJvbC5mb3IoXCJMR19JU19PTkxZX0JBU0VfQ0hBTk5FTFwiKTtcbmZ1bmN0aW9uIGdldE9ubHlDaGFubmVscyhjaGFubmVscykge1xuXHRpZiAoY2hhbm5lbHNbSVNfT05MWV9CQVNFX0NIQU5ORUxdID09PSB0cnVlKSByZXR1cm4gY2hhbm5lbHM7XG5cdGNvbnN0IG5ld0NoYW5uZWxzID0ge307XG5cdGZvciAoY29uc3QgayBpbiBjaGFubmVscykge1xuXHRcdGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGNoYW5uZWxzLCBrKSkgY29udGludWU7XG5cdFx0Y29uc3QgdmFsdWUgPSBjaGFubmVsc1trXTtcblx0XHRpZiAoaXNCYXNlQ2hhbm5lbCh2YWx1ZSkpIG5ld0NoYW5uZWxzW2tdID0gdmFsdWU7XG5cdH1cblx0T2JqZWN0LmFzc2lnbihuZXdDaGFubmVscywgeyBbSVNfT05MWV9CQVNFX0NIQU5ORUxdOiB0cnVlIH0pO1xuXHRyZXR1cm4gbmV3Q2hhbm5lbHM7XG59XG5mdW5jdGlvbiBlbXB0eUNoYW5uZWxzKGNoYW5uZWxzLCBjaGVja3BvaW50KSB7XG5cdGNvbnN0IGZpbHRlcmVkQ2hhbm5lbHMgPSBnZXRPbmx5Q2hhbm5lbHMoY2hhbm5lbHMpO1xuXHRjb25zdCBuZXdDaGFubmVscyA9IHt9O1xuXHRmb3IgKGNvbnN0IGsgaW4gZmlsdGVyZWRDaGFubmVscykge1xuXHRcdGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGZpbHRlcmVkQ2hhbm5lbHMsIGspKSBjb250aW51ZTtcblx0XHRjb25zdCBjaGFubmVsVmFsdWUgPSBjaGVja3BvaW50LmNoYW5uZWxfdmFsdWVzW2tdO1xuXHRcdG5ld0NoYW5uZWxzW2tdID0gZmlsdGVyZWRDaGFubmVsc1trXS5mcm9tQ2hlY2twb2ludChjaGFubmVsVmFsdWUpO1xuXHR9XG5cdE9iamVjdC5hc3NpZ24obmV3Q2hhbm5lbHMsIHsgW0lTX09OTFlfQkFTRV9DSEFOTkVMXTogdHJ1ZSB9KTtcblx0cmV0dXJuIG5ld0NoYW5uZWxzO1xufVxuZnVuY3Rpb24gY3JlYXRlQ2hlY2twb2ludChjaGVja3BvaW50LCBjaGFubmVscywgc3RlcCwgb3B0aW9ucykge1xuXHRsZXQgdmFsdWVzO1xuXHRpZiAoY2hhbm5lbHMgPT09IHZvaWQgMCkgdmFsdWVzID0gY2hlY2twb2ludC5jaGFubmVsX3ZhbHVlcztcblx0ZWxzZSB7XG5cdFx0dmFsdWVzID0ge307XG5cdFx0Zm9yIChjb25zdCBrIGluIGNoYW5uZWxzKSB7XG5cdFx0XHRpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChjaGFubmVscywgaykpIGNvbnRpbnVlO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0dmFsdWVzW2tdID0gY2hhbm5lbHNba10uY2hlY2twb2ludCgpO1xuXHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0aWYgKGVycm9yLm5hbWUgPT09IEVtcHR5Q2hhbm5lbEVycm9yLnVubWluaWZpYWJsZV9uYW1lKSB7fSBlbHNlIHRocm93IGVycm9yO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRyZXR1cm4ge1xuXHRcdHY6IDQsXG5cdFx0aWQ6IG9wdGlvbnM/LmlkID8/IHV1aWQ2KHN0ZXApLFxuXHRcdHRzOiAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKCksXG5cdFx0Y2hhbm5lbF92YWx1ZXM6IHZhbHVlcyxcblx0XHRjaGFubmVsX3ZlcnNpb25zOiBjaGVja3BvaW50LmNoYW5uZWxfdmVyc2lvbnMsXG5cdFx0dmVyc2lvbnNfc2VlbjogY2hlY2twb2ludC52ZXJzaW9uc19zZWVuXG5cdH07XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQmFzZUNoYW5uZWwsIGNyZWF0ZUNoZWNrcG9pbnQsIGVtcHR5Q2hhbm5lbHMsIGdldE9ubHlDaGFubmVscywgaXNCYXNlQ2hhbm5lbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmFzZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/channels/base.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/channels/binop.js":
/*!******************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/channels/binop.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BinaryOperatorAggregate: () => (/* binding */ BinaryOperatorAggregate)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/base.js\");\n\n\n\n//#region src/channels/binop.ts\n/**\n* Stores the result of applying a binary operator to the current value and each new value.\n*/\nvar BinaryOperatorAggregate = class BinaryOperatorAggregate extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseChannel {\n\tlc_graph_name = \"BinaryOperatorAggregate\";\n\tvalue;\n\toperator;\n\tinitialValueFactory;\n\tconstructor(operator, initialValueFactory) {\n\t\tsuper();\n\t\tthis.operator = operator;\n\t\tthis.initialValueFactory = initialValueFactory;\n\t\tthis.value = initialValueFactory?.();\n\t}\n\tfromCheckpoint(checkpoint) {\n\t\tconst empty = new BinaryOperatorAggregate(this.operator, this.initialValueFactory);\n\t\tif (typeof checkpoint !== \"undefined\") empty.value = checkpoint;\n\t\treturn empty;\n\t}\n\tupdate(values) {\n\t\tlet newValues = values;\n\t\tif (!newValues.length) return false;\n\t\tif (this.value === void 0) {\n\t\t\t[this.value] = newValues;\n\t\t\tnewValues = newValues.slice(1);\n\t\t}\n\t\tfor (const value of newValues) if (this.value !== void 0) this.value = this.operator(this.value, value);\n\t\treturn true;\n\t}\n\tget() {\n\t\tif (this.value === void 0) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError();\n\t\treturn this.value;\n\t}\n\tcheckpoint() {\n\t\tif (this.value === void 0) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError();\n\t\treturn this.value;\n\t}\n\tisAvailable() {\n\t\treturn this.value !== void 0;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=binop.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9jaGFubmVscy9iaW5vcC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBaUQ7QUFDVDs7QUFFeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRUFBb0UsaURBQVc7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1Qyx5REFBaUI7QUFDeEQ7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLHlEQUFpQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDbUM7QUFDbkMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2NoYW5uZWxzL2Jpbm9wLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVtcHR5Q2hhbm5lbEVycm9yIH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgQmFzZUNoYW5uZWwgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY2hhbm5lbHMvYmlub3AudHNcbi8qKlxuKiBTdG9yZXMgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIGJpbmFyeSBvcGVyYXRvciB0byB0aGUgY3VycmVudCB2YWx1ZSBhbmQgZWFjaCBuZXcgdmFsdWUuXG4qL1xudmFyIEJpbmFyeU9wZXJhdG9yQWdncmVnYXRlID0gY2xhc3MgQmluYXJ5T3BlcmF0b3JBZ2dyZWdhdGUgZXh0ZW5kcyBCYXNlQ2hhbm5lbCB7XG5cdGxjX2dyYXBoX25hbWUgPSBcIkJpbmFyeU9wZXJhdG9yQWdncmVnYXRlXCI7XG5cdHZhbHVlO1xuXHRvcGVyYXRvcjtcblx0aW5pdGlhbFZhbHVlRmFjdG9yeTtcblx0Y29uc3RydWN0b3Iob3BlcmF0b3IsIGluaXRpYWxWYWx1ZUZhY3RvcnkpIHtcblx0XHRzdXBlcigpO1xuXHRcdHRoaXMub3BlcmF0b3IgPSBvcGVyYXRvcjtcblx0XHR0aGlzLmluaXRpYWxWYWx1ZUZhY3RvcnkgPSBpbml0aWFsVmFsdWVGYWN0b3J5O1xuXHRcdHRoaXMudmFsdWUgPSBpbml0aWFsVmFsdWVGYWN0b3J5Py4oKTtcblx0fVxuXHRmcm9tQ2hlY2twb2ludChjaGVja3BvaW50KSB7XG5cdFx0Y29uc3QgZW1wdHkgPSBuZXcgQmluYXJ5T3BlcmF0b3JBZ2dyZWdhdGUodGhpcy5vcGVyYXRvciwgdGhpcy5pbml0aWFsVmFsdWVGYWN0b3J5KTtcblx0XHRpZiAodHlwZW9mIGNoZWNrcG9pbnQgIT09IFwidW5kZWZpbmVkXCIpIGVtcHR5LnZhbHVlID0gY2hlY2twb2ludDtcblx0XHRyZXR1cm4gZW1wdHk7XG5cdH1cblx0dXBkYXRlKHZhbHVlcykge1xuXHRcdGxldCBuZXdWYWx1ZXMgPSB2YWx1ZXM7XG5cdFx0aWYgKCFuZXdWYWx1ZXMubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG5cdFx0aWYgKHRoaXMudmFsdWUgPT09IHZvaWQgMCkge1xuXHRcdFx0W3RoaXMudmFsdWVdID0gbmV3VmFsdWVzO1xuXHRcdFx0bmV3VmFsdWVzID0gbmV3VmFsdWVzLnNsaWNlKDEpO1xuXHRcdH1cblx0XHRmb3IgKGNvbnN0IHZhbHVlIG9mIG5ld1ZhbHVlcykgaWYgKHRoaXMudmFsdWUgIT09IHZvaWQgMCkgdGhpcy52YWx1ZSA9IHRoaXMub3BlcmF0b3IodGhpcy52YWx1ZSwgdmFsdWUpO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdGdldCgpIHtcblx0XHRpZiAodGhpcy52YWx1ZSA9PT0gdm9pZCAwKSB0aHJvdyBuZXcgRW1wdHlDaGFubmVsRXJyb3IoKTtcblx0XHRyZXR1cm4gdGhpcy52YWx1ZTtcblx0fVxuXHRjaGVja3BvaW50KCkge1xuXHRcdGlmICh0aGlzLnZhbHVlID09PSB2b2lkIDApIHRocm93IG5ldyBFbXB0eUNoYW5uZWxFcnJvcigpO1xuXHRcdHJldHVybiB0aGlzLnZhbHVlO1xuXHR9XG5cdGlzQXZhaWxhYmxlKCkge1xuXHRcdHJldHVybiB0aGlzLnZhbHVlICE9PSB2b2lkIDA7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQmluYXJ5T3BlcmF0b3JBZ2dyZWdhdGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJpbm9wLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/channels/binop.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/channels/dynamic_barrier_value.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/channels/dynamic_barrier_value.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DynamicBarrierValue: () => (/* binding */ DynamicBarrierValue)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/base.js\");\n/* harmony import */ var _named_barrier_value_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./named_barrier_value.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/named_barrier_value.js\");\n\n\n\n\n//#region src/channels/dynamic_barrier_value.ts\nfunction isWaitForNames(v) {\n\treturn v.__names !== void 0;\n}\n/**\n* A channel that switches between two states\n*\n* - in the \"priming\" state it can't be read from.\n*     - if it receives a WaitForNames update, it switches to the \"waiting\" state.\n* - in the \"waiting\" state it collects named values until all are received.\n*     - once all named values are received, it can be read once, and it switches\n*       back to the \"priming\" state.\n*/\nvar DynamicBarrierValue = class DynamicBarrierValue extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseChannel {\n\tlc_graph_name = \"DynamicBarrierValue\";\n\tnames;\n\tseen;\n\tconstructor() {\n\t\tsuper();\n\t\tthis.names = void 0;\n\t\tthis.seen = /* @__PURE__ */ new Set();\n\t}\n\tfromCheckpoint(checkpoint) {\n\t\tconst empty = new DynamicBarrierValue();\n\t\tif (typeof checkpoint !== \"undefined\") {\n\t\t\tempty.names = new Set(checkpoint[0]);\n\t\t\tempty.seen = new Set(checkpoint[1]);\n\t\t}\n\t\treturn empty;\n\t}\n\tupdate(values) {\n\t\tconst waitForNames = values.filter(isWaitForNames);\n\t\tif (waitForNames.length > 0) {\n\t\t\tif (waitForNames.length > 1) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(\"Received multiple WaitForNames updates in the same step.\");\n\t\t\tthis.names = new Set(waitForNames[0].__names);\n\t\t\treturn true;\n\t\t} else if (this.names !== void 0) {\n\t\t\tlet updated = false;\n\t\t\tfor (const value of values) {\n\t\t\t\tif (isWaitForNames(value)) throw new Error(\"Assertion Error: Received unexpected WaitForNames instance.\");\n\t\t\t\tif (this.names.has(value) && !this.seen.has(value)) {\n\t\t\t\t\tthis.seen.add(value);\n\t\t\t\t\tupdated = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn updated;\n\t\t}\n\t\treturn false;\n\t}\n\tconsume() {\n\t\tif (this.seen && this.names && (0,_named_barrier_value_js__WEBPACK_IMPORTED_MODULE_2__.areSetsEqual)(this.seen, this.names)) {\n\t\t\tthis.seen = /* @__PURE__ */ new Set();\n\t\t\tthis.names = void 0;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\tget() {\n\t\tif (!this.names || !(0,_named_barrier_value_js__WEBPACK_IMPORTED_MODULE_2__.areSetsEqual)(this.names, this.seen)) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError();\n\t}\n\tcheckpoint() {\n\t\treturn [this.names ? [...this.names] : void 0, [...this.seen]];\n\t}\n\tisAvailable() {\n\t\treturn !!this.names && (0,_named_barrier_value_js__WEBPACK_IMPORTED_MODULE_2__.areSetsEqual)(this.names, this.seen);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=dynamic_barrier_value.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9jaGFubmVscy9keW5hbWljX2JhcnJpZXJfdmFsdWUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFxRTtBQUM3QjtBQUNnQjs7QUFFeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsaURBQVc7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsMERBQWtCO0FBQzVEO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMscUVBQVk7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IscUVBQVksbUNBQW1DLHlEQUFpQjtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHFFQUFZO0FBQ3JDO0FBQ0E7O0FBRUE7QUFDK0I7QUFDL0IiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2NoYW5uZWxzL2R5bmFtaWNfYmFycmllcl92YWx1ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFbXB0eUNoYW5uZWxFcnJvciwgSW52YWxpZFVwZGF0ZUVycm9yIH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgQmFzZUNoYW5uZWwgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBhcmVTZXRzRXF1YWwgfSBmcm9tIFwiLi9uYW1lZF9iYXJyaWVyX3ZhbHVlLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY2hhbm5lbHMvZHluYW1pY19iYXJyaWVyX3ZhbHVlLnRzXG5mdW5jdGlvbiBpc1dhaXRGb3JOYW1lcyh2KSB7XG5cdHJldHVybiB2Ll9fbmFtZXMgIT09IHZvaWQgMDtcbn1cbi8qKlxuKiBBIGNoYW5uZWwgdGhhdCBzd2l0Y2hlcyBiZXR3ZWVuIHR3byBzdGF0ZXNcbipcbiogLSBpbiB0aGUgXCJwcmltaW5nXCIgc3RhdGUgaXQgY2FuJ3QgYmUgcmVhZCBmcm9tLlxuKiAgICAgLSBpZiBpdCByZWNlaXZlcyBhIFdhaXRGb3JOYW1lcyB1cGRhdGUsIGl0IHN3aXRjaGVzIHRvIHRoZSBcIndhaXRpbmdcIiBzdGF0ZS5cbiogLSBpbiB0aGUgXCJ3YWl0aW5nXCIgc3RhdGUgaXQgY29sbGVjdHMgbmFtZWQgdmFsdWVzIHVudGlsIGFsbCBhcmUgcmVjZWl2ZWQuXG4qICAgICAtIG9uY2UgYWxsIG5hbWVkIHZhbHVlcyBhcmUgcmVjZWl2ZWQsIGl0IGNhbiBiZSByZWFkIG9uY2UsIGFuZCBpdCBzd2l0Y2hlc1xuKiAgICAgICBiYWNrIHRvIHRoZSBcInByaW1pbmdcIiBzdGF0ZS5cbiovXG52YXIgRHluYW1pY0JhcnJpZXJWYWx1ZSA9IGNsYXNzIER5bmFtaWNCYXJyaWVyVmFsdWUgZXh0ZW5kcyBCYXNlQ2hhbm5lbCB7XG5cdGxjX2dyYXBoX25hbWUgPSBcIkR5bmFtaWNCYXJyaWVyVmFsdWVcIjtcblx0bmFtZXM7XG5cdHNlZW47XG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdHN1cGVyKCk7XG5cdFx0dGhpcy5uYW1lcyA9IHZvaWQgMDtcblx0XHR0aGlzLnNlZW4gPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuXHR9XG5cdGZyb21DaGVja3BvaW50KGNoZWNrcG9pbnQpIHtcblx0XHRjb25zdCBlbXB0eSA9IG5ldyBEeW5hbWljQmFycmllclZhbHVlKCk7XG5cdFx0aWYgKHR5cGVvZiBjaGVja3BvaW50ICE9PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHRlbXB0eS5uYW1lcyA9IG5ldyBTZXQoY2hlY2twb2ludFswXSk7XG5cdFx0XHRlbXB0eS5zZWVuID0gbmV3IFNldChjaGVja3BvaW50WzFdKTtcblx0XHR9XG5cdFx0cmV0dXJuIGVtcHR5O1xuXHR9XG5cdHVwZGF0ZSh2YWx1ZXMpIHtcblx0XHRjb25zdCB3YWl0Rm9yTmFtZXMgPSB2YWx1ZXMuZmlsdGVyKGlzV2FpdEZvck5hbWVzKTtcblx0XHRpZiAod2FpdEZvck5hbWVzLmxlbmd0aCA+IDApIHtcblx0XHRcdGlmICh3YWl0Rm9yTmFtZXMubGVuZ3RoID4gMSkgdGhyb3cgbmV3IEludmFsaWRVcGRhdGVFcnJvcihcIlJlY2VpdmVkIG11bHRpcGxlIFdhaXRGb3JOYW1lcyB1cGRhdGVzIGluIHRoZSBzYW1lIHN0ZXAuXCIpO1xuXHRcdFx0dGhpcy5uYW1lcyA9IG5ldyBTZXQod2FpdEZvck5hbWVzWzBdLl9fbmFtZXMpO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSBlbHNlIGlmICh0aGlzLm5hbWVzICE9PSB2b2lkIDApIHtcblx0XHRcdGxldCB1cGRhdGVkID0gZmFsc2U7XG5cdFx0XHRmb3IgKGNvbnN0IHZhbHVlIG9mIHZhbHVlcykge1xuXHRcdFx0XHRpZiAoaXNXYWl0Rm9yTmFtZXModmFsdWUpKSB0aHJvdyBuZXcgRXJyb3IoXCJBc3NlcnRpb24gRXJyb3I6IFJlY2VpdmVkIHVuZXhwZWN0ZWQgV2FpdEZvck5hbWVzIGluc3RhbmNlLlwiKTtcblx0XHRcdFx0aWYgKHRoaXMubmFtZXMuaGFzKHZhbHVlKSAmJiAhdGhpcy5zZWVuLmhhcyh2YWx1ZSkpIHtcblx0XHRcdFx0XHR0aGlzLnNlZW4uYWRkKHZhbHVlKTtcblx0XHRcdFx0XHR1cGRhdGVkID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHVwZGF0ZWQ7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRjb25zdW1lKCkge1xuXHRcdGlmICh0aGlzLnNlZW4gJiYgdGhpcy5uYW1lcyAmJiBhcmVTZXRzRXF1YWwodGhpcy5zZWVuLCB0aGlzLm5hbWVzKSkge1xuXHRcdFx0dGhpcy5zZWVuID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcblx0XHRcdHRoaXMubmFtZXMgPSB2b2lkIDA7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdGdldCgpIHtcblx0XHRpZiAoIXRoaXMubmFtZXMgfHwgIWFyZVNldHNFcXVhbCh0aGlzLm5hbWVzLCB0aGlzLnNlZW4pKSB0aHJvdyBuZXcgRW1wdHlDaGFubmVsRXJyb3IoKTtcblx0fVxuXHRjaGVja3BvaW50KCkge1xuXHRcdHJldHVybiBbdGhpcy5uYW1lcyA/IFsuLi50aGlzLm5hbWVzXSA6IHZvaWQgMCwgWy4uLnRoaXMuc2Vlbl1dO1xuXHR9XG5cdGlzQXZhaWxhYmxlKCkge1xuXHRcdHJldHVybiAhIXRoaXMubmFtZXMgJiYgYXJlU2V0c0VxdWFsKHRoaXMubmFtZXMsIHRoaXMuc2Vlbik7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgRHluYW1pY0JhcnJpZXJWYWx1ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZHluYW1pY19iYXJyaWVyX3ZhbHVlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/channels/dynamic_barrier_value.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/channels/ephemeral_value.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/channels/ephemeral_value.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EphemeralValue: () => (/* binding */ EphemeralValue)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/base.js\");\n\n\n\n//#region src/channels/ephemeral_value.ts\n/**\n* Stores the value received in the step immediately preceding, clears after.\n*/\nvar EphemeralValue = class EphemeralValue extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseChannel {\n\tlc_graph_name = \"EphemeralValue\";\n\tguard;\n\tvalue = [];\n\tconstructor(guard = true) {\n\t\tsuper();\n\t\tthis.guard = guard;\n\t}\n\tfromCheckpoint(checkpoint) {\n\t\tconst empty = new EphemeralValue(this.guard);\n\t\tif (typeof checkpoint !== \"undefined\") empty.value = [checkpoint];\n\t\treturn empty;\n\t}\n\tupdate(values) {\n\t\tif (values.length === 0) {\n\t\t\tconst updated = this.value.length > 0;\n\t\t\tthis.value = [];\n\t\t\treturn updated;\n\t\t}\n\t\tif (values.length !== 1 && this.guard) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(\"EphemeralValue can only receive one value per step.\");\n\t\tthis.value = [values[values.length - 1]];\n\t\treturn true;\n\t}\n\tget() {\n\t\tif (this.value.length === 0) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError();\n\t\treturn this.value[0];\n\t}\n\tcheckpoint() {\n\t\tif (this.value.length === 0) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError();\n\t\treturn this.value[0];\n\t}\n\tisAvailable() {\n\t\treturn this.value.length !== 0;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=ephemeral_value.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9jaGFubmVscy9lcGhlbWVyYWxfdmFsdWUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXFFO0FBQzdCOztBQUV4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxpREFBVztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsMERBQWtCO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLHlEQUFpQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMseURBQWlCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUMwQjtBQUMxQiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvY2hhbm5lbHMvZXBoZW1lcmFsX3ZhbHVlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVtcHR5Q2hhbm5lbEVycm9yLCBJbnZhbGlkVXBkYXRlRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBCYXNlQ2hhbm5lbCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9jaGFubmVscy9lcGhlbWVyYWxfdmFsdWUudHNcbi8qKlxuKiBTdG9yZXMgdGhlIHZhbHVlIHJlY2VpdmVkIGluIHRoZSBzdGVwIGltbWVkaWF0ZWx5IHByZWNlZGluZywgY2xlYXJzIGFmdGVyLlxuKi9cbnZhciBFcGhlbWVyYWxWYWx1ZSA9IGNsYXNzIEVwaGVtZXJhbFZhbHVlIGV4dGVuZHMgQmFzZUNoYW5uZWwge1xuXHRsY19ncmFwaF9uYW1lID0gXCJFcGhlbWVyYWxWYWx1ZVwiO1xuXHRndWFyZDtcblx0dmFsdWUgPSBbXTtcblx0Y29uc3RydWN0b3IoZ3VhcmQgPSB0cnVlKSB7XG5cdFx0c3VwZXIoKTtcblx0XHR0aGlzLmd1YXJkID0gZ3VhcmQ7XG5cdH1cblx0ZnJvbUNoZWNrcG9pbnQoY2hlY2twb2ludCkge1xuXHRcdGNvbnN0IGVtcHR5ID0gbmV3IEVwaGVtZXJhbFZhbHVlKHRoaXMuZ3VhcmQpO1xuXHRcdGlmICh0eXBlb2YgY2hlY2twb2ludCAhPT0gXCJ1bmRlZmluZWRcIikgZW1wdHkudmFsdWUgPSBbY2hlY2twb2ludF07XG5cdFx0cmV0dXJuIGVtcHR5O1xuXHR9XG5cdHVwZGF0ZSh2YWx1ZXMpIHtcblx0XHRpZiAodmFsdWVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0Y29uc3QgdXBkYXRlZCA9IHRoaXMudmFsdWUubGVuZ3RoID4gMDtcblx0XHRcdHRoaXMudmFsdWUgPSBbXTtcblx0XHRcdHJldHVybiB1cGRhdGVkO1xuXHRcdH1cblx0XHRpZiAodmFsdWVzLmxlbmd0aCAhPT0gMSAmJiB0aGlzLmd1YXJkKSB0aHJvdyBuZXcgSW52YWxpZFVwZGF0ZUVycm9yKFwiRXBoZW1lcmFsVmFsdWUgY2FuIG9ubHkgcmVjZWl2ZSBvbmUgdmFsdWUgcGVyIHN0ZXAuXCIpO1xuXHRcdHRoaXMudmFsdWUgPSBbdmFsdWVzW3ZhbHVlcy5sZW5ndGggLSAxXV07XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblx0Z2V0KCkge1xuXHRcdGlmICh0aGlzLnZhbHVlLmxlbmd0aCA9PT0gMCkgdGhyb3cgbmV3IEVtcHR5Q2hhbm5lbEVycm9yKCk7XG5cdFx0cmV0dXJuIHRoaXMudmFsdWVbMF07XG5cdH1cblx0Y2hlY2twb2ludCgpIHtcblx0XHRpZiAodGhpcy52YWx1ZS5sZW5ndGggPT09IDApIHRocm93IG5ldyBFbXB0eUNoYW5uZWxFcnJvcigpO1xuXHRcdHJldHVybiB0aGlzLnZhbHVlWzBdO1xuXHR9XG5cdGlzQXZhaWxhYmxlKCkge1xuXHRcdHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aCAhPT0gMDtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBFcGhlbWVyYWxWYWx1ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXBoZW1lcmFsX3ZhbHVlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/channels/ephemeral_value.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/channels/index.js":
/*!******************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/channels/index.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AnyValue: () => (/* reexport safe */ _any_value_js__WEBPACK_IMPORTED_MODULE_6__.AnyValue),\n/* harmony export */   BaseChannel: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseChannel),\n/* harmony export */   BinaryOperatorAggregate: () => (/* reexport safe */ _binop_js__WEBPACK_IMPORTED_MODULE_1__.BinaryOperatorAggregate),\n/* harmony export */   DynamicBarrierValue: () => (/* reexport safe */ _dynamic_barrier_value_js__WEBPACK_IMPORTED_MODULE_7__.DynamicBarrierValue),\n/* harmony export */   EphemeralValue: () => (/* reexport safe */ _ephemeral_value_js__WEBPACK_IMPORTED_MODULE_4__.EphemeralValue),\n/* harmony export */   LastValue: () => (/* reexport safe */ _last_value_js__WEBPACK_IMPORTED_MODULE_2__.LastValue),\n/* harmony export */   LastValueAfterFinish: () => (/* reexport safe */ _last_value_js__WEBPACK_IMPORTED_MODULE_2__.LastValueAfterFinish),\n/* harmony export */   NamedBarrierValue: () => (/* reexport safe */ _named_barrier_value_js__WEBPACK_IMPORTED_MODULE_5__.NamedBarrierValue),\n/* harmony export */   NamedBarrierValueAfterFinish: () => (/* reexport safe */ _named_barrier_value_js__WEBPACK_IMPORTED_MODULE_5__.NamedBarrierValueAfterFinish),\n/* harmony export */   Topic: () => (/* reexport safe */ _topic_js__WEBPACK_IMPORTED_MODULE_3__.Topic),\n/* harmony export */   createCheckpoint: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.createCheckpoint),\n/* harmony export */   empty: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.emptyChannels)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/base.js\");\n/* harmony import */ var _binop_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./binop.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/binop.js\");\n/* harmony import */ var _last_value_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./last_value.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/last_value.js\");\n/* harmony import */ var _topic_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./topic.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/topic.js\");\n/* harmony import */ var _ephemeral_value_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ephemeral_value.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/ephemeral_value.js\");\n/* harmony import */ var _named_barrier_value_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./named_barrier_value.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/named_barrier_value.js\");\n/* harmony import */ var _any_value_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./any_value.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/any_value.js\");\n/* harmony import */ var _dynamic_barrier_value_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./dynamic_barrier_value.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/dynamic_barrier_value.js\");\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9jaGFubmVscy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF5RTtBQUNwQjtBQUNhO0FBQy9CO0FBQ21CO0FBQ3FDO0FBQ2pEO0FBQ3VCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9jaGFubmVscy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlQ2hhbm5lbCwgY3JlYXRlQ2hlY2twb2ludCwgZW1wdHlDaGFubmVscyB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IEJpbmFyeU9wZXJhdG9yQWdncmVnYXRlIH0gZnJvbSBcIi4vYmlub3AuanNcIjtcbmltcG9ydCB7IExhc3RWYWx1ZSwgTGFzdFZhbHVlQWZ0ZXJGaW5pc2ggfSBmcm9tIFwiLi9sYXN0X3ZhbHVlLmpzXCI7XG5pbXBvcnQgeyBUb3BpYyB9IGZyb20gXCIuL3RvcGljLmpzXCI7XG5pbXBvcnQgeyBFcGhlbWVyYWxWYWx1ZSB9IGZyb20gXCIuL2VwaGVtZXJhbF92YWx1ZS5qc1wiO1xuaW1wb3J0IHsgTmFtZWRCYXJyaWVyVmFsdWUsIE5hbWVkQmFycmllclZhbHVlQWZ0ZXJGaW5pc2ggfSBmcm9tIFwiLi9uYW1lZF9iYXJyaWVyX3ZhbHVlLmpzXCI7XG5pbXBvcnQgeyBBbnlWYWx1ZSB9IGZyb20gXCIuL2FueV92YWx1ZS5qc1wiO1xuaW1wb3J0IHsgRHluYW1pY0JhcnJpZXJWYWx1ZSB9IGZyb20gXCIuL2R5bmFtaWNfYmFycmllcl92YWx1ZS5qc1wiO1xuXG5leHBvcnQgeyBBbnlWYWx1ZSwgQmFzZUNoYW5uZWwsIEJpbmFyeU9wZXJhdG9yQWdncmVnYXRlLCBEeW5hbWljQmFycmllclZhbHVlLCBFcGhlbWVyYWxWYWx1ZSwgTGFzdFZhbHVlLCBMYXN0VmFsdWVBZnRlckZpbmlzaCwgTmFtZWRCYXJyaWVyVmFsdWUsIE5hbWVkQmFycmllclZhbHVlQWZ0ZXJGaW5pc2gsIFRvcGljLCBjcmVhdGVDaGVja3BvaW50LCBlbXB0eUNoYW5uZWxzIGFzIGVtcHR5IH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/channels/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/channels/last_value.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/channels/last_value.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LastValue: () => (/* binding */ LastValue),\n/* harmony export */   LastValueAfterFinish: () => (/* binding */ LastValueAfterFinish)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/base.js\");\n\n\n\n//#region src/channels/last_value.ts\n/**\n* Stores the last value received, can receive at most one value per step.\n*\n* Since `update` is only called once per step and value can only be of length 1,\n* LastValue always stores the last value of a single node. If multiple nodes attempt to\n* write to this channel in a single step, an error will be thrown.\n* @internal\n*/\nvar LastValue = class LastValue extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseChannel {\n\tlc_graph_name = \"LastValue\";\n\tvalue = [];\n\tconstructor(initialValueFactory) {\n\t\tsuper();\n\t\tthis.initialValueFactory = initialValueFactory;\n\t\tif (initialValueFactory) this.value = [initialValueFactory()];\n\t}\n\tfromCheckpoint(checkpoint) {\n\t\tconst empty = new LastValue(this.initialValueFactory);\n\t\tif (typeof checkpoint !== \"undefined\") empty.value = [checkpoint];\n\t\treturn empty;\n\t}\n\tupdate(values) {\n\t\tif (values.length === 0) return false;\n\t\tif (values.length !== 1) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(\"LastValue can only receive one value per step.\", { lc_error_code: \"INVALID_CONCURRENT_GRAPH_UPDATE\" });\n\t\tthis.value = [values[values.length - 1]];\n\t\treturn true;\n\t}\n\tget() {\n\t\tif (this.value.length === 0) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError();\n\t\treturn this.value[0];\n\t}\n\tcheckpoint() {\n\t\tif (this.value.length === 0) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError();\n\t\treturn this.value[0];\n\t}\n\tisAvailable() {\n\t\treturn this.value.length !== 0;\n\t}\n};\n/**\n* Stores the last value received, but only made available after finish().\n* Once made available, clears the value.\n*/\nvar LastValueAfterFinish = class LastValueAfterFinish extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseChannel {\n\tlc_graph_name = \"LastValueAfterFinish\";\n\tvalue = [];\n\tfinished = false;\n\tfromCheckpoint(checkpoint) {\n\t\tconst empty = new LastValueAfterFinish();\n\t\tif (typeof checkpoint !== \"undefined\") {\n\t\t\tconst [value, finished] = checkpoint;\n\t\t\tempty.value = [value];\n\t\t\tempty.finished = finished;\n\t\t}\n\t\treturn empty;\n\t}\n\tupdate(values) {\n\t\tif (values.length === 0) return false;\n\t\tthis.finished = false;\n\t\tthis.value = [values[values.length - 1]];\n\t\treturn true;\n\t}\n\tget() {\n\t\tif (this.value.length === 0 || !this.finished) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError();\n\t\treturn this.value[0];\n\t}\n\tcheckpoint() {\n\t\tif (this.value.length === 0) return void 0;\n\t\treturn [this.value[0], this.finished];\n\t}\n\tconsume() {\n\t\tif (this.finished) {\n\t\t\tthis.finished = false;\n\t\t\tthis.value = [];\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\tfinish() {\n\t\tif (!this.finished && this.value.length > 0) {\n\t\t\tthis.finished = true;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\tisAvailable() {\n\t\treturn this.value.length !== 0 && this.finished;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=last_value.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9jaGFubmVscy9sYXN0X3ZhbHVlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBcUU7QUFDN0I7O0FBRXhDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxpREFBVztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLDBEQUFrQixxREFBcUQsa0RBQWtEO0FBQzlKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLHlEQUFpQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMseURBQWlCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBQThELGlEQUFXO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELHlEQUFpQjtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUMyQztBQUMzQyIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvY2hhbm5lbHMvbGFzdF92YWx1ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFbXB0eUNoYW5uZWxFcnJvciwgSW52YWxpZFVwZGF0ZUVycm9yIH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgQmFzZUNoYW5uZWwgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY2hhbm5lbHMvbGFzdF92YWx1ZS50c1xuLyoqXG4qIFN0b3JlcyB0aGUgbGFzdCB2YWx1ZSByZWNlaXZlZCwgY2FuIHJlY2VpdmUgYXQgbW9zdCBvbmUgdmFsdWUgcGVyIHN0ZXAuXG4qXG4qIFNpbmNlIGB1cGRhdGVgIGlzIG9ubHkgY2FsbGVkIG9uY2UgcGVyIHN0ZXAgYW5kIHZhbHVlIGNhbiBvbmx5IGJlIG9mIGxlbmd0aCAxLFxuKiBMYXN0VmFsdWUgYWx3YXlzIHN0b3JlcyB0aGUgbGFzdCB2YWx1ZSBvZiBhIHNpbmdsZSBub2RlLiBJZiBtdWx0aXBsZSBub2RlcyBhdHRlbXB0IHRvXG4qIHdyaXRlIHRvIHRoaXMgY2hhbm5lbCBpbiBhIHNpbmdsZSBzdGVwLCBhbiBlcnJvciB3aWxsIGJlIHRocm93bi5cbiogQGludGVybmFsXG4qL1xudmFyIExhc3RWYWx1ZSA9IGNsYXNzIExhc3RWYWx1ZSBleHRlbmRzIEJhc2VDaGFubmVsIHtcblx0bGNfZ3JhcGhfbmFtZSA9IFwiTGFzdFZhbHVlXCI7XG5cdHZhbHVlID0gW107XG5cdGNvbnN0cnVjdG9yKGluaXRpYWxWYWx1ZUZhY3RvcnkpIHtcblx0XHRzdXBlcigpO1xuXHRcdHRoaXMuaW5pdGlhbFZhbHVlRmFjdG9yeSA9IGluaXRpYWxWYWx1ZUZhY3Rvcnk7XG5cdFx0aWYgKGluaXRpYWxWYWx1ZUZhY3RvcnkpIHRoaXMudmFsdWUgPSBbaW5pdGlhbFZhbHVlRmFjdG9yeSgpXTtcblx0fVxuXHRmcm9tQ2hlY2twb2ludChjaGVja3BvaW50KSB7XG5cdFx0Y29uc3QgZW1wdHkgPSBuZXcgTGFzdFZhbHVlKHRoaXMuaW5pdGlhbFZhbHVlRmFjdG9yeSk7XG5cdFx0aWYgKHR5cGVvZiBjaGVja3BvaW50ICE9PSBcInVuZGVmaW5lZFwiKSBlbXB0eS52YWx1ZSA9IFtjaGVja3BvaW50XTtcblx0XHRyZXR1cm4gZW1wdHk7XG5cdH1cblx0dXBkYXRlKHZhbHVlcykge1xuXHRcdGlmICh2YWx1ZXMubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2U7XG5cdFx0aWYgKHZhbHVlcy5sZW5ndGggIT09IDEpIHRocm93IG5ldyBJbnZhbGlkVXBkYXRlRXJyb3IoXCJMYXN0VmFsdWUgY2FuIG9ubHkgcmVjZWl2ZSBvbmUgdmFsdWUgcGVyIHN0ZXAuXCIsIHsgbGNfZXJyb3JfY29kZTogXCJJTlZBTElEX0NPTkNVUlJFTlRfR1JBUEhfVVBEQVRFXCIgfSk7XG5cdFx0dGhpcy52YWx1ZSA9IFt2YWx1ZXNbdmFsdWVzLmxlbmd0aCAtIDFdXTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXHRnZXQoKSB7XG5cdFx0aWYgKHRoaXMudmFsdWUubGVuZ3RoID09PSAwKSB0aHJvdyBuZXcgRW1wdHlDaGFubmVsRXJyb3IoKTtcblx0XHRyZXR1cm4gdGhpcy52YWx1ZVswXTtcblx0fVxuXHRjaGVja3BvaW50KCkge1xuXHRcdGlmICh0aGlzLnZhbHVlLmxlbmd0aCA9PT0gMCkgdGhyb3cgbmV3IEVtcHR5Q2hhbm5lbEVycm9yKCk7XG5cdFx0cmV0dXJuIHRoaXMudmFsdWVbMF07XG5cdH1cblx0aXNBdmFpbGFibGUoKSB7XG5cdFx0cmV0dXJuIHRoaXMudmFsdWUubGVuZ3RoICE9PSAwO1xuXHR9XG59O1xuLyoqXG4qIFN0b3JlcyB0aGUgbGFzdCB2YWx1ZSByZWNlaXZlZCwgYnV0IG9ubHkgbWFkZSBhdmFpbGFibGUgYWZ0ZXIgZmluaXNoKCkuXG4qIE9uY2UgbWFkZSBhdmFpbGFibGUsIGNsZWFycyB0aGUgdmFsdWUuXG4qL1xudmFyIExhc3RWYWx1ZUFmdGVyRmluaXNoID0gY2xhc3MgTGFzdFZhbHVlQWZ0ZXJGaW5pc2ggZXh0ZW5kcyBCYXNlQ2hhbm5lbCB7XG5cdGxjX2dyYXBoX25hbWUgPSBcIkxhc3RWYWx1ZUFmdGVyRmluaXNoXCI7XG5cdHZhbHVlID0gW107XG5cdGZpbmlzaGVkID0gZmFsc2U7XG5cdGZyb21DaGVja3BvaW50KGNoZWNrcG9pbnQpIHtcblx0XHRjb25zdCBlbXB0eSA9IG5ldyBMYXN0VmFsdWVBZnRlckZpbmlzaCgpO1xuXHRcdGlmICh0eXBlb2YgY2hlY2twb2ludCAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0Y29uc3QgW3ZhbHVlLCBmaW5pc2hlZF0gPSBjaGVja3BvaW50O1xuXHRcdFx0ZW1wdHkudmFsdWUgPSBbdmFsdWVdO1xuXHRcdFx0ZW1wdHkuZmluaXNoZWQgPSBmaW5pc2hlZDtcblx0XHR9XG5cdFx0cmV0dXJuIGVtcHR5O1xuXHR9XG5cdHVwZGF0ZSh2YWx1ZXMpIHtcblx0XHRpZiAodmFsdWVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGZhbHNlO1xuXHRcdHRoaXMuZmluaXNoZWQgPSBmYWxzZTtcblx0XHR0aGlzLnZhbHVlID0gW3ZhbHVlc1t2YWx1ZXMubGVuZ3RoIC0gMV1dO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdGdldCgpIHtcblx0XHRpZiAodGhpcy52YWx1ZS5sZW5ndGggPT09IDAgfHwgIXRoaXMuZmluaXNoZWQpIHRocm93IG5ldyBFbXB0eUNoYW5uZWxFcnJvcigpO1xuXHRcdHJldHVybiB0aGlzLnZhbHVlWzBdO1xuXHR9XG5cdGNoZWNrcG9pbnQoKSB7XG5cdFx0aWYgKHRoaXMudmFsdWUubGVuZ3RoID09PSAwKSByZXR1cm4gdm9pZCAwO1xuXHRcdHJldHVybiBbdGhpcy52YWx1ZVswXSwgdGhpcy5maW5pc2hlZF07XG5cdH1cblx0Y29uc3VtZSgpIHtcblx0XHRpZiAodGhpcy5maW5pc2hlZCkge1xuXHRcdFx0dGhpcy5maW5pc2hlZCA9IGZhbHNlO1xuXHRcdFx0dGhpcy52YWx1ZSA9IFtdO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRmaW5pc2goKSB7XG5cdFx0aWYgKCF0aGlzLmZpbmlzaGVkICYmIHRoaXMudmFsdWUubGVuZ3RoID4gMCkge1xuXHRcdFx0dGhpcy5maW5pc2hlZCA9IHRydWU7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdGlzQXZhaWxhYmxlKCkge1xuXHRcdHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aCAhPT0gMCAmJiB0aGlzLmZpbmlzaGVkO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IExhc3RWYWx1ZSwgTGFzdFZhbHVlQWZ0ZXJGaW5pc2ggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxhc3RfdmFsdWUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/channels/last_value.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/channels/named_barrier_value.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/channels/named_barrier_value.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NamedBarrierValue: () => (/* binding */ NamedBarrierValue),\n/* harmony export */   NamedBarrierValueAfterFinish: () => (/* binding */ NamedBarrierValueAfterFinish),\n/* harmony export */   areSetsEqual: () => (/* binding */ areSetsEqual)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/base.js\");\n\n\n\n//#region src/channels/named_barrier_value.ts\nconst areSetsEqual = (a, b) => a.size === b.size && [...a].every((value) => b.has(value));\n/**\n* A channel that waits until all named values are received before making the value available.\n*\n* This ensures that if node N and node M both write to channel C, the value of C will not be updated\n* until N and M have completed updating.\n*/\nvar NamedBarrierValue = class NamedBarrierValue extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseChannel {\n\tlc_graph_name = \"NamedBarrierValue\";\n\tnames;\n\tseen;\n\tconstructor(names) {\n\t\tsuper();\n\t\tthis.names = names;\n\t\tthis.seen = /* @__PURE__ */ new Set();\n\t}\n\tfromCheckpoint(checkpoint) {\n\t\tconst empty = new NamedBarrierValue(this.names);\n\t\tif (typeof checkpoint !== \"undefined\") empty.seen = new Set(checkpoint);\n\t\treturn empty;\n\t}\n\tupdate(values) {\n\t\tlet updated = false;\n\t\tfor (const nodeName of values) if (this.names.has(nodeName)) {\n\t\t\tif (!this.seen.has(nodeName)) {\n\t\t\t\tthis.seen.add(nodeName);\n\t\t\t\tupdated = true;\n\t\t\t}\n\t\t} else throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(`Value ${JSON.stringify(nodeName)} not in names ${JSON.stringify(this.names)}`);\n\t\treturn updated;\n\t}\n\tget() {\n\t\tif (!areSetsEqual(this.names, this.seen)) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError();\n\t}\n\tcheckpoint() {\n\t\treturn [...this.seen];\n\t}\n\tconsume() {\n\t\tif (this.seen && this.names && areSetsEqual(this.seen, this.names)) {\n\t\t\tthis.seen = /* @__PURE__ */ new Set();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\tisAvailable() {\n\t\treturn !!this.names && areSetsEqual(this.names, this.seen);\n\t}\n};\n/**\n* A channel that waits until all named values are received before making the value ready to be made available.\n* It is only made available after finish() is called.\n* @internal\n*/\nvar NamedBarrierValueAfterFinish = class NamedBarrierValueAfterFinish extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseChannel {\n\tlc_graph_name = \"NamedBarrierValueAfterFinish\";\n\tnames;\n\tseen;\n\tfinished;\n\tconstructor(names) {\n\t\tsuper();\n\t\tthis.names = names;\n\t\tthis.seen = /* @__PURE__ */ new Set();\n\t\tthis.finished = false;\n\t}\n\tfromCheckpoint(checkpoint) {\n\t\tconst empty = new NamedBarrierValueAfterFinish(this.names);\n\t\tif (typeof checkpoint !== \"undefined\") {\n\t\t\tconst [seen, finished] = checkpoint;\n\t\t\tempty.seen = new Set(seen);\n\t\t\tempty.finished = finished;\n\t\t}\n\t\treturn empty;\n\t}\n\tupdate(values) {\n\t\tlet updated = false;\n\t\tfor (const nodeName of values) if (this.names.has(nodeName) && !this.seen.has(nodeName)) {\n\t\t\tthis.seen.add(nodeName);\n\t\t\tupdated = true;\n\t\t} else if (!this.names.has(nodeName)) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(`Value ${JSON.stringify(nodeName)} not in names ${JSON.stringify(this.names)}`);\n\t\treturn updated;\n\t}\n\tget() {\n\t\tif (!this.finished || !areSetsEqual(this.names, this.seen)) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError();\n\t}\n\tcheckpoint() {\n\t\treturn [[...this.seen], this.finished];\n\t}\n\tconsume() {\n\t\tif (this.finished && this.seen && this.names && areSetsEqual(this.seen, this.names)) {\n\t\t\tthis.seen = /* @__PURE__ */ new Set();\n\t\t\tthis.finished = false;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\tfinish() {\n\t\tif (!this.finished && !!this.names && areSetsEqual(this.names, this.seen)) {\n\t\t\tthis.finished = true;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\tisAvailable() {\n\t\treturn this.finished && !!this.names && areSetsEqual(this.names, this.seen);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=named_barrier_value.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9jaGFubmVscy9uYW1lZF9iYXJyaWVyX3ZhbHVlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXFFO0FBQzdCOztBQUV4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELGlEQUFXO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGVBQWUsMERBQWtCLFVBQVUsMEJBQTBCLGVBQWUsMkJBQTJCO0FBQ25IO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCx5REFBaUI7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RSxpREFBVztBQUN6RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDhDQUE4QywwREFBa0IsVUFBVSwwQkFBMEIsZUFBZSwyQkFBMkI7QUFDbEo7QUFDQTtBQUNBO0FBQ0Esd0VBQXdFLHlEQUFpQjtBQUN6RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3lFO0FBQ3pFIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9jaGFubmVscy9uYW1lZF9iYXJyaWVyX3ZhbHVlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVtcHR5Q2hhbm5lbEVycm9yLCBJbnZhbGlkVXBkYXRlRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBCYXNlQ2hhbm5lbCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9jaGFubmVscy9uYW1lZF9iYXJyaWVyX3ZhbHVlLnRzXG5jb25zdCBhcmVTZXRzRXF1YWwgPSAoYSwgYikgPT4gYS5zaXplID09PSBiLnNpemUgJiYgWy4uLmFdLmV2ZXJ5KCh2YWx1ZSkgPT4gYi5oYXModmFsdWUpKTtcbi8qKlxuKiBBIGNoYW5uZWwgdGhhdCB3YWl0cyB1bnRpbCBhbGwgbmFtZWQgdmFsdWVzIGFyZSByZWNlaXZlZCBiZWZvcmUgbWFraW5nIHRoZSB2YWx1ZSBhdmFpbGFibGUuXG4qXG4qIFRoaXMgZW5zdXJlcyB0aGF0IGlmIG5vZGUgTiBhbmQgbm9kZSBNIGJvdGggd3JpdGUgdG8gY2hhbm5lbCBDLCB0aGUgdmFsdWUgb2YgQyB3aWxsIG5vdCBiZSB1cGRhdGVkXG4qIHVudGlsIE4gYW5kIE0gaGF2ZSBjb21wbGV0ZWQgdXBkYXRpbmcuXG4qL1xudmFyIE5hbWVkQmFycmllclZhbHVlID0gY2xhc3MgTmFtZWRCYXJyaWVyVmFsdWUgZXh0ZW5kcyBCYXNlQ2hhbm5lbCB7XG5cdGxjX2dyYXBoX25hbWUgPSBcIk5hbWVkQmFycmllclZhbHVlXCI7XG5cdG5hbWVzO1xuXHRzZWVuO1xuXHRjb25zdHJ1Y3RvcihuYW1lcykge1xuXHRcdHN1cGVyKCk7XG5cdFx0dGhpcy5uYW1lcyA9IG5hbWVzO1xuXHRcdHRoaXMuc2VlbiA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG5cdH1cblx0ZnJvbUNoZWNrcG9pbnQoY2hlY2twb2ludCkge1xuXHRcdGNvbnN0IGVtcHR5ID0gbmV3IE5hbWVkQmFycmllclZhbHVlKHRoaXMubmFtZXMpO1xuXHRcdGlmICh0eXBlb2YgY2hlY2twb2ludCAhPT0gXCJ1bmRlZmluZWRcIikgZW1wdHkuc2VlbiA9IG5ldyBTZXQoY2hlY2twb2ludCk7XG5cdFx0cmV0dXJuIGVtcHR5O1xuXHR9XG5cdHVwZGF0ZSh2YWx1ZXMpIHtcblx0XHRsZXQgdXBkYXRlZCA9IGZhbHNlO1xuXHRcdGZvciAoY29uc3Qgbm9kZU5hbWUgb2YgdmFsdWVzKSBpZiAodGhpcy5uYW1lcy5oYXMobm9kZU5hbWUpKSB7XG5cdFx0XHRpZiAoIXRoaXMuc2Vlbi5oYXMobm9kZU5hbWUpKSB7XG5cdFx0XHRcdHRoaXMuc2Vlbi5hZGQobm9kZU5hbWUpO1xuXHRcdFx0XHR1cGRhdGVkID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9IGVsc2UgdGhyb3cgbmV3IEludmFsaWRVcGRhdGVFcnJvcihgVmFsdWUgJHtKU09OLnN0cmluZ2lmeShub2RlTmFtZSl9IG5vdCBpbiBuYW1lcyAke0pTT04uc3RyaW5naWZ5KHRoaXMubmFtZXMpfWApO1xuXHRcdHJldHVybiB1cGRhdGVkO1xuXHR9XG5cdGdldCgpIHtcblx0XHRpZiAoIWFyZVNldHNFcXVhbCh0aGlzLm5hbWVzLCB0aGlzLnNlZW4pKSB0aHJvdyBuZXcgRW1wdHlDaGFubmVsRXJyb3IoKTtcblx0fVxuXHRjaGVja3BvaW50KCkge1xuXHRcdHJldHVybiBbLi4udGhpcy5zZWVuXTtcblx0fVxuXHRjb25zdW1lKCkge1xuXHRcdGlmICh0aGlzLnNlZW4gJiYgdGhpcy5uYW1lcyAmJiBhcmVTZXRzRXF1YWwodGhpcy5zZWVuLCB0aGlzLm5hbWVzKSkge1xuXHRcdFx0dGhpcy5zZWVuID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0aXNBdmFpbGFibGUoKSB7XG5cdFx0cmV0dXJuICEhdGhpcy5uYW1lcyAmJiBhcmVTZXRzRXF1YWwodGhpcy5uYW1lcywgdGhpcy5zZWVuKTtcblx0fVxufTtcbi8qKlxuKiBBIGNoYW5uZWwgdGhhdCB3YWl0cyB1bnRpbCBhbGwgbmFtZWQgdmFsdWVzIGFyZSByZWNlaXZlZCBiZWZvcmUgbWFraW5nIHRoZSB2YWx1ZSByZWFkeSB0byBiZSBtYWRlIGF2YWlsYWJsZS5cbiogSXQgaXMgb25seSBtYWRlIGF2YWlsYWJsZSBhZnRlciBmaW5pc2goKSBpcyBjYWxsZWQuXG4qIEBpbnRlcm5hbFxuKi9cbnZhciBOYW1lZEJhcnJpZXJWYWx1ZUFmdGVyRmluaXNoID0gY2xhc3MgTmFtZWRCYXJyaWVyVmFsdWVBZnRlckZpbmlzaCBleHRlbmRzIEJhc2VDaGFubmVsIHtcblx0bGNfZ3JhcGhfbmFtZSA9IFwiTmFtZWRCYXJyaWVyVmFsdWVBZnRlckZpbmlzaFwiO1xuXHRuYW1lcztcblx0c2Vlbjtcblx0ZmluaXNoZWQ7XG5cdGNvbnN0cnVjdG9yKG5hbWVzKSB7XG5cdFx0c3VwZXIoKTtcblx0XHR0aGlzLm5hbWVzID0gbmFtZXM7XG5cdFx0dGhpcy5zZWVuID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcblx0XHR0aGlzLmZpbmlzaGVkID0gZmFsc2U7XG5cdH1cblx0ZnJvbUNoZWNrcG9pbnQoY2hlY2twb2ludCkge1xuXHRcdGNvbnN0IGVtcHR5ID0gbmV3IE5hbWVkQmFycmllclZhbHVlQWZ0ZXJGaW5pc2godGhpcy5uYW1lcyk7XG5cdFx0aWYgKHR5cGVvZiBjaGVja3BvaW50ICE9PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHRjb25zdCBbc2VlbiwgZmluaXNoZWRdID0gY2hlY2twb2ludDtcblx0XHRcdGVtcHR5LnNlZW4gPSBuZXcgU2V0KHNlZW4pO1xuXHRcdFx0ZW1wdHkuZmluaXNoZWQgPSBmaW5pc2hlZDtcblx0XHR9XG5cdFx0cmV0dXJuIGVtcHR5O1xuXHR9XG5cdHVwZGF0ZSh2YWx1ZXMpIHtcblx0XHRsZXQgdXBkYXRlZCA9IGZhbHNlO1xuXHRcdGZvciAoY29uc3Qgbm9kZU5hbWUgb2YgdmFsdWVzKSBpZiAodGhpcy5uYW1lcy5oYXMobm9kZU5hbWUpICYmICF0aGlzLnNlZW4uaGFzKG5vZGVOYW1lKSkge1xuXHRcdFx0dGhpcy5zZWVuLmFkZChub2RlTmFtZSk7XG5cdFx0XHR1cGRhdGVkID0gdHJ1ZTtcblx0XHR9IGVsc2UgaWYgKCF0aGlzLm5hbWVzLmhhcyhub2RlTmFtZSkpIHRocm93IG5ldyBJbnZhbGlkVXBkYXRlRXJyb3IoYFZhbHVlICR7SlNPTi5zdHJpbmdpZnkobm9kZU5hbWUpfSBub3QgaW4gbmFtZXMgJHtKU09OLnN0cmluZ2lmeSh0aGlzLm5hbWVzKX1gKTtcblx0XHRyZXR1cm4gdXBkYXRlZDtcblx0fVxuXHRnZXQoKSB7XG5cdFx0aWYgKCF0aGlzLmZpbmlzaGVkIHx8ICFhcmVTZXRzRXF1YWwodGhpcy5uYW1lcywgdGhpcy5zZWVuKSkgdGhyb3cgbmV3IEVtcHR5Q2hhbm5lbEVycm9yKCk7XG5cdH1cblx0Y2hlY2twb2ludCgpIHtcblx0XHRyZXR1cm4gW1suLi50aGlzLnNlZW5dLCB0aGlzLmZpbmlzaGVkXTtcblx0fVxuXHRjb25zdW1lKCkge1xuXHRcdGlmICh0aGlzLmZpbmlzaGVkICYmIHRoaXMuc2VlbiAmJiB0aGlzLm5hbWVzICYmIGFyZVNldHNFcXVhbCh0aGlzLnNlZW4sIHRoaXMubmFtZXMpKSB7XG5cdFx0XHR0aGlzLnNlZW4gPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuXHRcdFx0dGhpcy5maW5pc2hlZCA9IGZhbHNlO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRmaW5pc2goKSB7XG5cdFx0aWYgKCF0aGlzLmZpbmlzaGVkICYmICEhdGhpcy5uYW1lcyAmJiBhcmVTZXRzRXF1YWwodGhpcy5uYW1lcywgdGhpcy5zZWVuKSkge1xuXHRcdFx0dGhpcy5maW5pc2hlZCA9IHRydWU7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdGlzQXZhaWxhYmxlKCkge1xuXHRcdHJldHVybiB0aGlzLmZpbmlzaGVkICYmICEhdGhpcy5uYW1lcyAmJiBhcmVTZXRzRXF1YWwodGhpcy5uYW1lcywgdGhpcy5zZWVuKTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBOYW1lZEJhcnJpZXJWYWx1ZSwgTmFtZWRCYXJyaWVyVmFsdWVBZnRlckZpbmlzaCwgYXJlU2V0c0VxdWFsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1uYW1lZF9iYXJyaWVyX3ZhbHVlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/channels/named_barrier_value.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/channels/topic.js":
/*!******************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/channels/topic.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Topic: () => (/* binding */ Topic)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/base.js\");\n\n\n\n//#region src/channels/topic.ts\n/**\n* A configurable PubSub Topic.\n*/\nvar Topic = class Topic extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseChannel {\n\tlc_graph_name = \"Topic\";\n\tunique = false;\n\taccumulate = false;\n\tseen;\n\tvalues;\n\tconstructor(fields) {\n\t\tsuper();\n\t\tthis.unique = fields?.unique ?? this.unique;\n\t\tthis.accumulate = fields?.accumulate ?? this.accumulate;\n\t\tthis.seen = /* @__PURE__ */ new Set();\n\t\tthis.values = [];\n\t}\n\tfromCheckpoint(checkpoint) {\n\t\tconst empty = new Topic({\n\t\t\tunique: this.unique,\n\t\t\taccumulate: this.accumulate\n\t\t});\n\t\tif (typeof checkpoint !== \"undefined\") {\n\t\t\tempty.seen = new Set(checkpoint[0]);\n\t\t\tempty.values = checkpoint[1];\n\t\t}\n\t\treturn empty;\n\t}\n\tupdate(values) {\n\t\tlet updated = false;\n\t\tif (!this.accumulate) {\n\t\t\tupdated = this.values.length > 0;\n\t\t\tthis.values = [];\n\t\t}\n\t\tconst flatValues = values.flat();\n\t\tif (flatValues.length > 0) if (this.unique) {\n\t\t\tfor (const value of flatValues) if (!this.seen.has(value)) {\n\t\t\t\tupdated = true;\n\t\t\t\tthis.seen.add(value);\n\t\t\t\tthis.values.push(value);\n\t\t\t}\n\t\t} else {\n\t\t\tupdated = true;\n\t\t\tthis.values.push(...flatValues);\n\t\t}\n\t\treturn updated;\n\t}\n\tget() {\n\t\tif (this.values.length === 0) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError();\n\t\treturn this.values;\n\t}\n\tcheckpoint() {\n\t\treturn [[...this.seen], this.values];\n\t}\n\tisAvailable() {\n\t\treturn this.values.length !== 0;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=topic.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9jaGFubmVscy90b3BpYy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBaUQ7QUFDVDs7QUFFeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsaURBQVc7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLHlEQUFpQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDaUI7QUFDakIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2NoYW5uZWxzL3RvcGljLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVtcHR5Q2hhbm5lbEVycm9yIH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgQmFzZUNoYW5uZWwgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY2hhbm5lbHMvdG9waWMudHNcbi8qKlxuKiBBIGNvbmZpZ3VyYWJsZSBQdWJTdWIgVG9waWMuXG4qL1xudmFyIFRvcGljID0gY2xhc3MgVG9waWMgZXh0ZW5kcyBCYXNlQ2hhbm5lbCB7XG5cdGxjX2dyYXBoX25hbWUgPSBcIlRvcGljXCI7XG5cdHVuaXF1ZSA9IGZhbHNlO1xuXHRhY2N1bXVsYXRlID0gZmFsc2U7XG5cdHNlZW47XG5cdHZhbHVlcztcblx0Y29uc3RydWN0b3IoZmllbGRzKSB7XG5cdFx0c3VwZXIoKTtcblx0XHR0aGlzLnVuaXF1ZSA9IGZpZWxkcz8udW5pcXVlID8/IHRoaXMudW5pcXVlO1xuXHRcdHRoaXMuYWNjdW11bGF0ZSA9IGZpZWxkcz8uYWNjdW11bGF0ZSA/PyB0aGlzLmFjY3VtdWxhdGU7XG5cdFx0dGhpcy5zZWVuID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcblx0XHR0aGlzLnZhbHVlcyA9IFtdO1xuXHR9XG5cdGZyb21DaGVja3BvaW50KGNoZWNrcG9pbnQpIHtcblx0XHRjb25zdCBlbXB0eSA9IG5ldyBUb3BpYyh7XG5cdFx0XHR1bmlxdWU6IHRoaXMudW5pcXVlLFxuXHRcdFx0YWNjdW11bGF0ZTogdGhpcy5hY2N1bXVsYXRlXG5cdFx0fSk7XG5cdFx0aWYgKHR5cGVvZiBjaGVja3BvaW50ICE9PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHRlbXB0eS5zZWVuID0gbmV3IFNldChjaGVja3BvaW50WzBdKTtcblx0XHRcdGVtcHR5LnZhbHVlcyA9IGNoZWNrcG9pbnRbMV07XG5cdFx0fVxuXHRcdHJldHVybiBlbXB0eTtcblx0fVxuXHR1cGRhdGUodmFsdWVzKSB7XG5cdFx0bGV0IHVwZGF0ZWQgPSBmYWxzZTtcblx0XHRpZiAoIXRoaXMuYWNjdW11bGF0ZSkge1xuXHRcdFx0dXBkYXRlZCA9IHRoaXMudmFsdWVzLmxlbmd0aCA+IDA7XG5cdFx0XHR0aGlzLnZhbHVlcyA9IFtdO1xuXHRcdH1cblx0XHRjb25zdCBmbGF0VmFsdWVzID0gdmFsdWVzLmZsYXQoKTtcblx0XHRpZiAoZmxhdFZhbHVlcy5sZW5ndGggPiAwKSBpZiAodGhpcy51bmlxdWUpIHtcblx0XHRcdGZvciAoY29uc3QgdmFsdWUgb2YgZmxhdFZhbHVlcykgaWYgKCF0aGlzLnNlZW4uaGFzKHZhbHVlKSkge1xuXHRcdFx0XHR1cGRhdGVkID0gdHJ1ZTtcblx0XHRcdFx0dGhpcy5zZWVuLmFkZCh2YWx1ZSk7XG5cdFx0XHRcdHRoaXMudmFsdWVzLnB1c2godmFsdWUpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR1cGRhdGVkID0gdHJ1ZTtcblx0XHRcdHRoaXMudmFsdWVzLnB1c2goLi4uZmxhdFZhbHVlcyk7XG5cdFx0fVxuXHRcdHJldHVybiB1cGRhdGVkO1xuXHR9XG5cdGdldCgpIHtcblx0XHRpZiAodGhpcy52YWx1ZXMubGVuZ3RoID09PSAwKSB0aHJvdyBuZXcgRW1wdHlDaGFubmVsRXJyb3IoKTtcblx0XHRyZXR1cm4gdGhpcy52YWx1ZXM7XG5cdH1cblx0Y2hlY2twb2ludCgpIHtcblx0XHRyZXR1cm4gW1suLi50aGlzLnNlZW5dLCB0aGlzLnZhbHVlc107XG5cdH1cblx0aXNBdmFpbGFibGUoKSB7XG5cdFx0cmV0dXJuIHRoaXMudmFsdWVzLmxlbmd0aCAhPT0gMDtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBUb3BpYyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9waWMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/channels/topic.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/constants.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/constants.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CACHE_NS_WRITES: () => (/* binding */ CACHE_NS_WRITES),\n/* harmony export */   CHECKPOINT_NAMESPACE_END: () => (/* binding */ CHECKPOINT_NAMESPACE_END),\n/* harmony export */   CHECKPOINT_NAMESPACE_SEPARATOR: () => (/* binding */ CHECKPOINT_NAMESPACE_SEPARATOR),\n/* harmony export */   CONFIG_KEY_ABORT_SIGNALS: () => (/* binding */ CONFIG_KEY_ABORT_SIGNALS),\n/* harmony export */   CONFIG_KEY_CALL: () => (/* binding */ CONFIG_KEY_CALL),\n/* harmony export */   CONFIG_KEY_CHECKPOINTER: () => (/* binding */ CONFIG_KEY_CHECKPOINTER),\n/* harmony export */   CONFIG_KEY_CHECKPOINT_ID: () => (/* binding */ CONFIG_KEY_CHECKPOINT_ID),\n/* harmony export */   CONFIG_KEY_CHECKPOINT_MAP: () => (/* binding */ CONFIG_KEY_CHECKPOINT_MAP),\n/* harmony export */   CONFIG_KEY_CHECKPOINT_NS: () => (/* binding */ CONFIG_KEY_CHECKPOINT_NS),\n/* harmony export */   CONFIG_KEY_DURABILITY: () => (/* binding */ CONFIG_KEY_DURABILITY),\n/* harmony export */   CONFIG_KEY_NODE_FINISHED: () => (/* binding */ CONFIG_KEY_NODE_FINISHED),\n/* harmony export */   CONFIG_KEY_PREVIOUS_STATE: () => (/* binding */ CONFIG_KEY_PREVIOUS_STATE),\n/* harmony export */   CONFIG_KEY_READ: () => (/* binding */ CONFIG_KEY_READ),\n/* harmony export */   CONFIG_KEY_RESUME_MAP: () => (/* binding */ CONFIG_KEY_RESUME_MAP),\n/* harmony export */   CONFIG_KEY_RESUMING: () => (/* binding */ CONFIG_KEY_RESUMING),\n/* harmony export */   CONFIG_KEY_SCRATCHPAD: () => (/* binding */ CONFIG_KEY_SCRATCHPAD),\n/* harmony export */   CONFIG_KEY_SEND: () => (/* binding */ CONFIG_KEY_SEND),\n/* harmony export */   CONFIG_KEY_STREAM: () => (/* binding */ CONFIG_KEY_STREAM),\n/* harmony export */   CONFIG_KEY_TASK_ID: () => (/* binding */ CONFIG_KEY_TASK_ID),\n/* harmony export */   COPY: () => (/* binding */ COPY),\n/* harmony export */   Command: () => (/* binding */ Command),\n/* harmony export */   CommandInstance: () => (/* binding */ CommandInstance),\n/* harmony export */   END: () => (/* binding */ END),\n/* harmony export */   ERROR: () => (/* binding */ ERROR),\n/* harmony export */   INPUT: () => (/* binding */ INPUT),\n/* harmony export */   INTERRUPT: () => (/* binding */ INTERRUPT),\n/* harmony export */   NO_WRITES: () => (/* binding */ NO_WRITES),\n/* harmony export */   NULL_TASK_ID: () => (/* binding */ NULL_TASK_ID),\n/* harmony export */   PREVIOUS: () => (/* binding */ PREVIOUS),\n/* harmony export */   PULL: () => (/* binding */ PULL),\n/* harmony export */   PUSH: () => (/* binding */ PUSH),\n/* harmony export */   RESERVED: () => (/* binding */ RESERVED),\n/* harmony export */   RESUME: () => (/* binding */ RESUME),\n/* harmony export */   RETURN: () => (/* binding */ RETURN),\n/* harmony export */   SELF: () => (/* binding */ SELF),\n/* harmony export */   START: () => (/* binding */ START),\n/* harmony export */   Send: () => (/* binding */ Send),\n/* harmony export */   TAG_HIDDEN: () => (/* binding */ TAG_HIDDEN),\n/* harmony export */   TAG_NOSTREAM: () => (/* binding */ TAG_NOSTREAM),\n/* harmony export */   TASKS: () => (/* binding */ TASKS),\n/* harmony export */   _isSend: () => (/* binding */ _isSend),\n/* harmony export */   _isSendInterface: () => (/* binding */ _isSendInterface),\n/* harmony export */   isCommand: () => (/* binding */ isCommand),\n/* harmony export */   isInterrupted: () => (/* binding */ isInterrupted)\n/* harmony export */ });\n//#region src/constants.ts\n/** Special reserved node name denoting the start of a graph. */\nconst START = \"__start__\";\n/** Special reserved node name denoting the end of a graph. */\nconst END = \"__end__\";\nconst INPUT = \"__input__\";\nconst COPY = \"__copy__\";\nconst ERROR = \"__error__\";\n/** Special reserved cache namespaces */\nconst CACHE_NS_WRITES = \"__pregel_ns_writes\";\nconst CONFIG_KEY_SEND = \"__pregel_send\";\n/** config key containing function used to call a node (push task) */\nconst CONFIG_KEY_CALL = \"__pregel_call\";\nconst CONFIG_KEY_READ = \"__pregel_read\";\nconst CONFIG_KEY_CHECKPOINTER = \"__pregel_checkpointer\";\nconst CONFIG_KEY_RESUMING = \"__pregel_resuming\";\nconst CONFIG_KEY_TASK_ID = \"__pregel_task_id\";\nconst CONFIG_KEY_STREAM = \"__pregel_stream\";\nconst CONFIG_KEY_RESUME_VALUE = \"__pregel_resume_value\";\nconst CONFIG_KEY_RESUME_MAP = \"__pregel_resume_map\";\nconst CONFIG_KEY_SCRATCHPAD = \"__pregel_scratchpad\";\n/** config key containing state from previous invocation of graph for the given thread */\nconst CONFIG_KEY_PREVIOUS_STATE = \"__pregel_previous\";\nconst CONFIG_KEY_DURABILITY = \"__pregel_durability\";\nconst CONFIG_KEY_CHECKPOINT_ID = \"checkpoint_id\";\nconst CONFIG_KEY_CHECKPOINT_NS = \"checkpoint_ns\";\nconst CONFIG_KEY_NODE_FINISHED = \"__pregel_node_finished\";\nconst CONFIG_KEY_CHECKPOINT_MAP = \"checkpoint_map\";\nconst CONFIG_KEY_ABORT_SIGNALS = \"__pregel_abort_signals\";\n/** Special channel reserved for graph interrupts */\nconst INTERRUPT = \"__interrupt__\";\n/** Special channel reserved for graph resume */\nconst RESUME = \"__resume__\";\n/** Special channel reserved for cases when a task exits without any writes */\nconst NO_WRITES = \"__no_writes__\";\n/** Special channel reserved for graph return */\nconst RETURN = \"__return__\";\n/** Special channel reserved for graph previous state */\nconst PREVIOUS = \"__previous__\";\nconst TAG_HIDDEN = \"langsmith:hidden\";\nconst TAG_NOSTREAM = \"langsmith:nostream\";\nconst SELF = \"__self__\";\nconst TASKS = \"__pregel_tasks\";\nconst PUSH = \"__pregel_push\";\nconst PULL = \"__pregel_pull\";\nconst NULL_TASK_ID = \"00000000-0000-0000-0000-000000000000\";\nconst RESERVED = [\n\tTAG_HIDDEN,\n\tINPUT,\n\tINTERRUPT,\n\tRESUME,\n\tERROR,\n\tNO_WRITES,\n\tCONFIG_KEY_SEND,\n\tCONFIG_KEY_READ,\n\tCONFIG_KEY_CHECKPOINTER,\n\tCONFIG_KEY_DURABILITY,\n\tCONFIG_KEY_STREAM,\n\tCONFIG_KEY_RESUMING,\n\tCONFIG_KEY_TASK_ID,\n\tCONFIG_KEY_CALL,\n\tCONFIG_KEY_RESUME_VALUE,\n\tCONFIG_KEY_SCRATCHPAD,\n\tCONFIG_KEY_PREVIOUS_STATE,\n\tCONFIG_KEY_CHECKPOINT_MAP,\n\tCONFIG_KEY_CHECKPOINT_NS,\n\tCONFIG_KEY_CHECKPOINT_ID\n];\nconst CHECKPOINT_NAMESPACE_SEPARATOR = \"|\";\nconst CHECKPOINT_NAMESPACE_END = \":\";\n/** @internal */\nconst COMMAND_SYMBOL = Symbol.for(\"langgraph.command\");\n/**\n* Instance of a {@link Command} class.\n*\n* This is used to avoid IntelliSense suggesting public fields\n* of {@link Command} class when a plain object is expected.\n*\n* @see {@link Command}\n* @internal\n*/\nvar CommandInstance = class {\n\t[COMMAND_SYMBOL];\n\tconstructor(args) {\n\t\tthis[COMMAND_SYMBOL] = args;\n\t}\n};\nfunction _isSendInterface(x) {\n\tconst operation = x;\n\treturn operation !== null && operation !== void 0 && typeof operation.node === \"string\" && operation.args !== void 0;\n}\n/**\n*\n* A message or packet to send to a specific node in the graph.\n*\n* The `Send` class is used within a `StateGraph`'s conditional edges to\n* dynamically invoke a node with a custom state at the next step.\n*\n* Importantly, the sent state can differ from the core graph's state,\n* allowing for flexible and dynamic workflow management.\n*\n* One such example is a \"map-reduce\" workflow where your graph invokes\n* the same node multiple times in parallel with different states,\n* before aggregating the results back into the main graph's state.\n*\n* @example\n* ```typescript\n* import { Annotation, Send, StateGraph } from \"@langchain/langgraph\";\n*\n* const ChainState = Annotation.Root({\n*   subjects: Annotation<string[]>,\n*   jokes: Annotation<string[]>({\n*     reducer: (a, b) => a.concat(b),\n*   }),\n* });\n*\n* const continueToJokes = async (state: typeof ChainState.State) => {\n*   return state.subjects.map((subject) => {\n*     return new Send(\"generate_joke\", { subjects: [subject] });\n*   });\n* };\n*\n* const graph = new StateGraph(ChainState)\n*   .addNode(\"generate_joke\", (state) => ({\n*     jokes: [`Joke about ${state.subjects}`],\n*   }))\n*   .addConditionalEdges(\"__start__\", continueToJokes)\n*   .addEdge(\"generate_joke\", \"__end__\")\n*   .compile();\n*\n* const res = await graph.invoke({ subjects: [\"cats\", \"dogs\"] });\n* console.log(res);\n*\n* // Invoking with two subjects results in a generated joke for each\n* // { subjects: [\"cats\", \"dogs\"], jokes: [`Joke about cats`, `Joke about dogs`] }\n* ```\n*/\nvar Send = class {\n\tlg_name = \"Send\";\n\tnode;\n\targs;\n\tconstructor(node, args) {\n\t\tthis.node = node;\n\t\tthis.args = _deserializeCommandSendObjectGraph(args);\n\t}\n\ttoJSON() {\n\t\treturn {\n\t\t\tlg_name: this.lg_name,\n\t\t\tnode: this.node,\n\t\t\targs: this.args\n\t\t};\n\t}\n};\nfunction _isSend(x) {\n\treturn x instanceof Send;\n}\n/**\n* Checks if the given graph invoke / stream chunk contains interrupt.\n*\n* @example\n* ```ts\n* import { INTERRUPT, isInterrupted } from \"@langchain/langgraph\";\n*\n* const values = await graph.invoke({ foo: \"bar\" });\n* if (isInterrupted<string>(values)) {\n*   const interrupt = values[INTERRUPT][0].value;\n* }\n* ```\n*\n* @param values - The values to check.\n* @returns `true` if the values contain an interrupt, `false` otherwise.\n*/\nfunction isInterrupted(values) {\n\tif (!values || typeof values !== \"object\") return false;\n\tif (!(INTERRUPT in values)) return false;\n\treturn Array.isArray(values[INTERRUPT]);\n}\n/**\n* One or more commands to update the graph's state and send messages to nodes.\n* Can be used to combine routing logic with state updates in lieu of conditional edges\n*\n* @example\n* ```ts\n* import { Annotation, Command } from \"@langchain/langgraph\";\n*\n* // Define graph state\n* const StateAnnotation = Annotation.Root({\n*   foo: Annotation<string>,\n* });\n*\n* // Define the nodes\n* const nodeA = async (_state: typeof StateAnnotation.State) => {\n*   console.log(\"Called A\");\n*   // this is a replacement for a real conditional edge function\n*   const goto = Math.random() > .5 ? \"nodeB\" : \"nodeC\";\n*   // note how Command allows you to BOTH update the graph state AND route to the next node\n*   return new Command({\n*     // this is the state update\n*     update: {\n*       foo: \"a\",\n*     },\n*     // this is a replacement for an edge\n*     goto,\n*   });\n* };\n*\n* // Nodes B and C are unchanged\n* const nodeB = async (state: typeof StateAnnotation.State) => {\n*   console.log(\"Called B\");\n*   return {\n*     foo: state.foo + \"|b\",\n*   };\n* }\n*\n* const nodeC = async (state: typeof StateAnnotation.State) => {\n*   console.log(\"Called C\");\n*   return {\n*     foo: state.foo + \"|c\",\n*   };\n* }\n* \n* import { StateGraph } from \"@langchain/langgraph\";\n\n* // NOTE: there are no edges between nodes A, B and C!\n* const graph = new StateGraph(StateAnnotation)\n*   .addNode(\"nodeA\", nodeA, {\n*     ends: [\"nodeB\", \"nodeC\"],\n*   })\n*   .addNode(\"nodeB\", nodeB)\n*   .addNode(\"nodeC\", nodeC)\n*   .addEdge(\"__start__\", \"nodeA\")\n*   .compile();\n* \n* await graph.invoke({ foo: \"\" });\n*\n* // Randomly oscillates between\n* // { foo: 'a|c' } and { foo: 'a|b' }\n* ```\n*/\nvar Command = class extends CommandInstance {\n\tlg_name = \"Command\";\n\tlc_direct_tool_output = true;\n\t/**\n\t* Graph to send the command to. Supported values are:\n\t*   - None: the current graph (default)\n\t*   - The specific name of the graph to send the command to\n\t*   - {@link Command.PARENT}: closest parent graph (only supported when returned from a node in a subgraph)\n\t*/\n\tgraph;\n\t/**\n\t* Update to apply to the graph's state as a result of executing the node that is returning the command.\n\t* Written to the state as if the node had simply returned this value instead of the Command object.\n\t*/\n\tupdate;\n\t/**\n\t* Value to resume execution with. To be used together with {@link interrupt}.\n\t*/\n\tresume;\n\t/**\n\t* Can be one of the following:\n\t*   - name of the node to navigate to next (any node that belongs to the specified `graph`)\n\t*   - sequence of node names to navigate to next\n\t*   - {@link Send} object (to execute a node with the exact input provided in the {@link Send} object)\n\t*   - sequence of {@link Send} objects\n\t*/\n\tgoto = [];\n\tstatic PARENT = \"__parent__\";\n\tconstructor(args) {\n\t\tsuper(args);\n\t\tthis.resume = args.resume;\n\t\tthis.graph = args.graph;\n\t\tthis.update = args.update;\n\t\tif (args.goto) this.goto = Array.isArray(args.goto) ? _deserializeCommandSendObjectGraph(args.goto) : [_deserializeCommandSendObjectGraph(args.goto)];\n\t}\n\t/**\n\t* Convert the update field to a list of {@link PendingWrite} tuples\n\t* @returns List of {@link PendingWrite} tuples of the form `[channelKey, value]`.\n\t* @internal\n\t*/\n\t_updateAsTuples() {\n\t\tif (this.update && typeof this.update === \"object\" && !Array.isArray(this.update)) return Object.entries(this.update);\n\t\telse if (Array.isArray(this.update) && this.update.every((t) => Array.isArray(t) && t.length === 2 && typeof t[0] === \"string\")) return this.update;\n\t\telse return [[\"__root__\", this.update]];\n\t}\n\ttoJSON() {\n\t\tlet serializedGoto;\n\t\tif (typeof this.goto === \"string\") serializedGoto = this.goto;\n\t\telse if (_isSend(this.goto)) serializedGoto = this.goto.toJSON();\n\t\telse serializedGoto = this.goto?.map((innerGoto) => {\n\t\t\tif (typeof innerGoto === \"string\") return innerGoto;\n\t\t\telse return innerGoto.toJSON();\n\t\t});\n\t\treturn {\n\t\t\tlg_name: this.lg_name,\n\t\t\tupdate: this.update,\n\t\t\tresume: this.resume,\n\t\t\tgoto: serializedGoto\n\t\t};\n\t}\n};\n/**\n* A type guard to check if the given value is a {@link Command}.\n*\n* Useful for type narrowing when working with the {@link Command} object.\n*\n* @param x - The value to check.\n* @returns `true` if the value is a {@link Command}, `false` otherwise.\n*/\nfunction isCommand(x) {\n\tif (typeof x !== \"object\") return false;\n\tif (x === null || x === void 0) return false;\n\tif (\"lg_name\" in x && x.lg_name === \"Command\") return true;\n\treturn false;\n}\n/**\n* Reconstructs Command and Send objects from a deeply nested tree of anonymous objects\n* matching their interfaces.\n*\n* This is only exported for testing purposes. It is NOT intended to be used outside of\n* the Command and Send classes.\n*\n* @internal\n*\n* @param x - The command send tree to convert.\n* @param seen - A map of seen objects to avoid infinite loops.\n* @returns The converted command send tree.\n*/\nfunction _deserializeCommandSendObjectGraph(x, seen = /* @__PURE__ */ new Map()) {\n\tif (x !== void 0 && x !== null && typeof x === \"object\") {\n\t\tif (seen.has(x)) return seen.get(x);\n\t\tlet result;\n\t\tif (Array.isArray(x)) {\n\t\t\tresult = [];\n\t\t\tseen.set(x, result);\n\t\t\tx.forEach((item, index) => {\n\t\t\t\tresult[index] = _deserializeCommandSendObjectGraph(item, seen);\n\t\t\t});\n\t\t} else if (isCommand(x) && !(x instanceof Command)) {\n\t\t\tresult = new Command(x);\n\t\t\tseen.set(x, result);\n\t\t} else if (_isSendInterface(x) && !(x instanceof Send)) {\n\t\t\tresult = new Send(x.node, x.args);\n\t\t\tseen.set(x, result);\n\t\t} else if (isCommand(x) || _isSend(x)) {\n\t\t\tresult = x;\n\t\t\tseen.set(x, result);\n\t\t} else if (\"lc_serializable\" in x && x.lc_serializable) {\n\t\t\tresult = x;\n\t\t\tseen.set(x, result);\n\t\t} else {\n\t\t\tresult = {};\n\t\t\tseen.set(x, result);\n\t\t\tfor (const [key, value] of Object.entries(x)) result[key] = _deserializeCommandSendObjectGraph(value, seen);\n\t\t}\n\t\treturn result;\n\t}\n\treturn x;\n}\n\n//#endregion\n\n//# sourceMappingURL=constants.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9jb25zdGFudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixlQUFlO0FBQ2hDO0FBQ0E7QUFDQSxNQUFNLGVBQWU7QUFDckI7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLCtCQUErQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMscUJBQXFCO0FBQzlELEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixlQUFlO0FBQzNDLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyw0QkFBNEI7QUFDL0Q7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLDJCQUEyQjtBQUN0QztBQUNBLHNDQUFzQyxZQUFZO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxzQkFBc0I7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGFBQWE7O0FBRXhCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsU0FBUztBQUNoQztBQUNBO0FBQ0EsT0FBTyxhQUFhLE1BQU07QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxxQkFBcUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxnQkFBZ0I7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxZQUFZLGdFQUFnRSxZQUFZO0FBQ2hHLG9CQUFvQixZQUFZO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsb0JBQW9CO0FBQzlELHFCQUFxQixvQkFBb0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsY0FBYztBQUMvRDtBQUNBLG1EQUFtRCxlQUFlO0FBQ2xFO0FBQ0E7QUFDQSxxQ0FBcUMsY0FBYztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDZ3JCO0FBQ2hyQiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvY29uc3RhbnRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvY29uc3RhbnRzLnRzXG4vKiogU3BlY2lhbCByZXNlcnZlZCBub2RlIG5hbWUgZGVub3RpbmcgdGhlIHN0YXJ0IG9mIGEgZ3JhcGguICovXG5jb25zdCBTVEFSVCA9IFwiX19zdGFydF9fXCI7XG4vKiogU3BlY2lhbCByZXNlcnZlZCBub2RlIG5hbWUgZGVub3RpbmcgdGhlIGVuZCBvZiBhIGdyYXBoLiAqL1xuY29uc3QgRU5EID0gXCJfX2VuZF9fXCI7XG5jb25zdCBJTlBVVCA9IFwiX19pbnB1dF9fXCI7XG5jb25zdCBDT1BZID0gXCJfX2NvcHlfX1wiO1xuY29uc3QgRVJST1IgPSBcIl9fZXJyb3JfX1wiO1xuLyoqIFNwZWNpYWwgcmVzZXJ2ZWQgY2FjaGUgbmFtZXNwYWNlcyAqL1xuY29uc3QgQ0FDSEVfTlNfV1JJVEVTID0gXCJfX3ByZWdlbF9uc193cml0ZXNcIjtcbmNvbnN0IENPTkZJR19LRVlfU0VORCA9IFwiX19wcmVnZWxfc2VuZFwiO1xuLyoqIGNvbmZpZyBrZXkgY29udGFpbmluZyBmdW5jdGlvbiB1c2VkIHRvIGNhbGwgYSBub2RlIChwdXNoIHRhc2spICovXG5jb25zdCBDT05GSUdfS0VZX0NBTEwgPSBcIl9fcHJlZ2VsX2NhbGxcIjtcbmNvbnN0IENPTkZJR19LRVlfUkVBRCA9IFwiX19wcmVnZWxfcmVhZFwiO1xuY29uc3QgQ09ORklHX0tFWV9DSEVDS1BPSU5URVIgPSBcIl9fcHJlZ2VsX2NoZWNrcG9pbnRlclwiO1xuY29uc3QgQ09ORklHX0tFWV9SRVNVTUlORyA9IFwiX19wcmVnZWxfcmVzdW1pbmdcIjtcbmNvbnN0IENPTkZJR19LRVlfVEFTS19JRCA9IFwiX19wcmVnZWxfdGFza19pZFwiO1xuY29uc3QgQ09ORklHX0tFWV9TVFJFQU0gPSBcIl9fcHJlZ2VsX3N0cmVhbVwiO1xuY29uc3QgQ09ORklHX0tFWV9SRVNVTUVfVkFMVUUgPSBcIl9fcHJlZ2VsX3Jlc3VtZV92YWx1ZVwiO1xuY29uc3QgQ09ORklHX0tFWV9SRVNVTUVfTUFQID0gXCJfX3ByZWdlbF9yZXN1bWVfbWFwXCI7XG5jb25zdCBDT05GSUdfS0VZX1NDUkFUQ0hQQUQgPSBcIl9fcHJlZ2VsX3NjcmF0Y2hwYWRcIjtcbi8qKiBjb25maWcga2V5IGNvbnRhaW5pbmcgc3RhdGUgZnJvbSBwcmV2aW91cyBpbnZvY2F0aW9uIG9mIGdyYXBoIGZvciB0aGUgZ2l2ZW4gdGhyZWFkICovXG5jb25zdCBDT05GSUdfS0VZX1BSRVZJT1VTX1NUQVRFID0gXCJfX3ByZWdlbF9wcmV2aW91c1wiO1xuY29uc3QgQ09ORklHX0tFWV9EVVJBQklMSVRZID0gXCJfX3ByZWdlbF9kdXJhYmlsaXR5XCI7XG5jb25zdCBDT05GSUdfS0VZX0NIRUNLUE9JTlRfSUQgPSBcImNoZWNrcG9pbnRfaWRcIjtcbmNvbnN0IENPTkZJR19LRVlfQ0hFQ0tQT0lOVF9OUyA9IFwiY2hlY2twb2ludF9uc1wiO1xuY29uc3QgQ09ORklHX0tFWV9OT0RFX0ZJTklTSEVEID0gXCJfX3ByZWdlbF9ub2RlX2ZpbmlzaGVkXCI7XG5jb25zdCBDT05GSUdfS0VZX0NIRUNLUE9JTlRfTUFQID0gXCJjaGVja3BvaW50X21hcFwiO1xuY29uc3QgQ09ORklHX0tFWV9BQk9SVF9TSUdOQUxTID0gXCJfX3ByZWdlbF9hYm9ydF9zaWduYWxzXCI7XG4vKiogU3BlY2lhbCBjaGFubmVsIHJlc2VydmVkIGZvciBncmFwaCBpbnRlcnJ1cHRzICovXG5jb25zdCBJTlRFUlJVUFQgPSBcIl9faW50ZXJydXB0X19cIjtcbi8qKiBTcGVjaWFsIGNoYW5uZWwgcmVzZXJ2ZWQgZm9yIGdyYXBoIHJlc3VtZSAqL1xuY29uc3QgUkVTVU1FID0gXCJfX3Jlc3VtZV9fXCI7XG4vKiogU3BlY2lhbCBjaGFubmVsIHJlc2VydmVkIGZvciBjYXNlcyB3aGVuIGEgdGFzayBleGl0cyB3aXRob3V0IGFueSB3cml0ZXMgKi9cbmNvbnN0IE5PX1dSSVRFUyA9IFwiX19ub193cml0ZXNfX1wiO1xuLyoqIFNwZWNpYWwgY2hhbm5lbCByZXNlcnZlZCBmb3IgZ3JhcGggcmV0dXJuICovXG5jb25zdCBSRVRVUk4gPSBcIl9fcmV0dXJuX19cIjtcbi8qKiBTcGVjaWFsIGNoYW5uZWwgcmVzZXJ2ZWQgZm9yIGdyYXBoIHByZXZpb3VzIHN0YXRlICovXG5jb25zdCBQUkVWSU9VUyA9IFwiX19wcmV2aW91c19fXCI7XG5jb25zdCBUQUdfSElEREVOID0gXCJsYW5nc21pdGg6aGlkZGVuXCI7XG5jb25zdCBUQUdfTk9TVFJFQU0gPSBcImxhbmdzbWl0aDpub3N0cmVhbVwiO1xuY29uc3QgU0VMRiA9IFwiX19zZWxmX19cIjtcbmNvbnN0IFRBU0tTID0gXCJfX3ByZWdlbF90YXNrc1wiO1xuY29uc3QgUFVTSCA9IFwiX19wcmVnZWxfcHVzaFwiO1xuY29uc3QgUFVMTCA9IFwiX19wcmVnZWxfcHVsbFwiO1xuY29uc3QgTlVMTF9UQVNLX0lEID0gXCIwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDBcIjtcbmNvbnN0IFJFU0VSVkVEID0gW1xuXHRUQUdfSElEREVOLFxuXHRJTlBVVCxcblx0SU5URVJSVVBULFxuXHRSRVNVTUUsXG5cdEVSUk9SLFxuXHROT19XUklURVMsXG5cdENPTkZJR19LRVlfU0VORCxcblx0Q09ORklHX0tFWV9SRUFELFxuXHRDT05GSUdfS0VZX0NIRUNLUE9JTlRFUixcblx0Q09ORklHX0tFWV9EVVJBQklMSVRZLFxuXHRDT05GSUdfS0VZX1NUUkVBTSxcblx0Q09ORklHX0tFWV9SRVNVTUlORyxcblx0Q09ORklHX0tFWV9UQVNLX0lELFxuXHRDT05GSUdfS0VZX0NBTEwsXG5cdENPTkZJR19LRVlfUkVTVU1FX1ZBTFVFLFxuXHRDT05GSUdfS0VZX1NDUkFUQ0hQQUQsXG5cdENPTkZJR19LRVlfUFJFVklPVVNfU1RBVEUsXG5cdENPTkZJR19LRVlfQ0hFQ0tQT0lOVF9NQVAsXG5cdENPTkZJR19LRVlfQ0hFQ0tQT0lOVF9OUyxcblx0Q09ORklHX0tFWV9DSEVDS1BPSU5UX0lEXG5dO1xuY29uc3QgQ0hFQ0tQT0lOVF9OQU1FU1BBQ0VfU0VQQVJBVE9SID0gXCJ8XCI7XG5jb25zdCBDSEVDS1BPSU5UX05BTUVTUEFDRV9FTkQgPSBcIjpcIjtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IENPTU1BTkRfU1lNQk9MID0gU3ltYm9sLmZvcihcImxhbmdncmFwaC5jb21tYW5kXCIpO1xuLyoqXG4qIEluc3RhbmNlIG9mIGEge0BsaW5rIENvbW1hbmR9IGNsYXNzLlxuKlxuKiBUaGlzIGlzIHVzZWQgdG8gYXZvaWQgSW50ZWxsaVNlbnNlIHN1Z2dlc3RpbmcgcHVibGljIGZpZWxkc1xuKiBvZiB7QGxpbmsgQ29tbWFuZH0gY2xhc3Mgd2hlbiBhIHBsYWluIG9iamVjdCBpcyBleHBlY3RlZC5cbipcbiogQHNlZSB7QGxpbmsgQ29tbWFuZH1cbiogQGludGVybmFsXG4qL1xudmFyIENvbW1hbmRJbnN0YW5jZSA9IGNsYXNzIHtcblx0W0NPTU1BTkRfU1lNQk9MXTtcblx0Y29uc3RydWN0b3IoYXJncykge1xuXHRcdHRoaXNbQ09NTUFORF9TWU1CT0xdID0gYXJncztcblx0fVxufTtcbmZ1bmN0aW9uIF9pc1NlbmRJbnRlcmZhY2UoeCkge1xuXHRjb25zdCBvcGVyYXRpb24gPSB4O1xuXHRyZXR1cm4gb3BlcmF0aW9uICE9PSBudWxsICYmIG9wZXJhdGlvbiAhPT0gdm9pZCAwICYmIHR5cGVvZiBvcGVyYXRpb24ubm9kZSA9PT0gXCJzdHJpbmdcIiAmJiBvcGVyYXRpb24uYXJncyAhPT0gdm9pZCAwO1xufVxuLyoqXG4qXG4qIEEgbWVzc2FnZSBvciBwYWNrZXQgdG8gc2VuZCB0byBhIHNwZWNpZmljIG5vZGUgaW4gdGhlIGdyYXBoLlxuKlxuKiBUaGUgYFNlbmRgIGNsYXNzIGlzIHVzZWQgd2l0aGluIGEgYFN0YXRlR3JhcGhgJ3MgY29uZGl0aW9uYWwgZWRnZXMgdG9cbiogZHluYW1pY2FsbHkgaW52b2tlIGEgbm9kZSB3aXRoIGEgY3VzdG9tIHN0YXRlIGF0IHRoZSBuZXh0IHN0ZXAuXG4qXG4qIEltcG9ydGFudGx5LCB0aGUgc2VudCBzdGF0ZSBjYW4gZGlmZmVyIGZyb20gdGhlIGNvcmUgZ3JhcGgncyBzdGF0ZSxcbiogYWxsb3dpbmcgZm9yIGZsZXhpYmxlIGFuZCBkeW5hbWljIHdvcmtmbG93IG1hbmFnZW1lbnQuXG4qXG4qIE9uZSBzdWNoIGV4YW1wbGUgaXMgYSBcIm1hcC1yZWR1Y2VcIiB3b3JrZmxvdyB3aGVyZSB5b3VyIGdyYXBoIGludm9rZXNcbiogdGhlIHNhbWUgbm9kZSBtdWx0aXBsZSB0aW1lcyBpbiBwYXJhbGxlbCB3aXRoIGRpZmZlcmVudCBzdGF0ZXMsXG4qIGJlZm9yZSBhZ2dyZWdhdGluZyB0aGUgcmVzdWx0cyBiYWNrIGludG8gdGhlIG1haW4gZ3JhcGgncyBzdGF0ZS5cbipcbiogQGV4YW1wbGVcbiogYGBgdHlwZXNjcmlwdFxuKiBpbXBvcnQgeyBBbm5vdGF0aW9uLCBTZW5kLCBTdGF0ZUdyYXBoIH0gZnJvbSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoXCI7XG4qXG4qIGNvbnN0IENoYWluU3RhdGUgPSBBbm5vdGF0aW9uLlJvb3Qoe1xuKiAgIHN1YmplY3RzOiBBbm5vdGF0aW9uPHN0cmluZ1tdPixcbiogICBqb2tlczogQW5ub3RhdGlvbjxzdHJpbmdbXT4oe1xuKiAgICAgcmVkdWNlcjogKGEsIGIpID0+IGEuY29uY2F0KGIpLFxuKiAgIH0pLFxuKiB9KTtcbipcbiogY29uc3QgY29udGludWVUb0pva2VzID0gYXN5bmMgKHN0YXRlOiB0eXBlb2YgQ2hhaW5TdGF0ZS5TdGF0ZSkgPT4ge1xuKiAgIHJldHVybiBzdGF0ZS5zdWJqZWN0cy5tYXAoKHN1YmplY3QpID0+IHtcbiogICAgIHJldHVybiBuZXcgU2VuZChcImdlbmVyYXRlX2pva2VcIiwgeyBzdWJqZWN0czogW3N1YmplY3RdIH0pO1xuKiAgIH0pO1xuKiB9O1xuKlxuKiBjb25zdCBncmFwaCA9IG5ldyBTdGF0ZUdyYXBoKENoYWluU3RhdGUpXG4qICAgLmFkZE5vZGUoXCJnZW5lcmF0ZV9qb2tlXCIsIChzdGF0ZSkgPT4gKHtcbiogICAgIGpva2VzOiBbYEpva2UgYWJvdXQgJHtzdGF0ZS5zdWJqZWN0c31gXSxcbiogICB9KSlcbiogICAuYWRkQ29uZGl0aW9uYWxFZGdlcyhcIl9fc3RhcnRfX1wiLCBjb250aW51ZVRvSm9rZXMpXG4qICAgLmFkZEVkZ2UoXCJnZW5lcmF0ZV9qb2tlXCIsIFwiX19lbmRfX1wiKVxuKiAgIC5jb21waWxlKCk7XG4qXG4qIGNvbnN0IHJlcyA9IGF3YWl0IGdyYXBoLmludm9rZSh7IHN1YmplY3RzOiBbXCJjYXRzXCIsIFwiZG9nc1wiXSB9KTtcbiogY29uc29sZS5sb2cocmVzKTtcbipcbiogLy8gSW52b2tpbmcgd2l0aCB0d28gc3ViamVjdHMgcmVzdWx0cyBpbiBhIGdlbmVyYXRlZCBqb2tlIGZvciBlYWNoXG4qIC8vIHsgc3ViamVjdHM6IFtcImNhdHNcIiwgXCJkb2dzXCJdLCBqb2tlczogW2BKb2tlIGFib3V0IGNhdHNgLCBgSm9rZSBhYm91dCBkb2dzYF0gfVxuKiBgYGBcbiovXG52YXIgU2VuZCA9IGNsYXNzIHtcblx0bGdfbmFtZSA9IFwiU2VuZFwiO1xuXHRub2RlO1xuXHRhcmdzO1xuXHRjb25zdHJ1Y3Rvcihub2RlLCBhcmdzKSB7XG5cdFx0dGhpcy5ub2RlID0gbm9kZTtcblx0XHR0aGlzLmFyZ3MgPSBfZGVzZXJpYWxpemVDb21tYW5kU2VuZE9iamVjdEdyYXBoKGFyZ3MpO1xuXHR9XG5cdHRvSlNPTigpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0bGdfbmFtZTogdGhpcy5sZ19uYW1lLFxuXHRcdFx0bm9kZTogdGhpcy5ub2RlLFxuXHRcdFx0YXJnczogdGhpcy5hcmdzXG5cdFx0fTtcblx0fVxufTtcbmZ1bmN0aW9uIF9pc1NlbmQoeCkge1xuXHRyZXR1cm4geCBpbnN0YW5jZW9mIFNlbmQ7XG59XG4vKipcbiogQ2hlY2tzIGlmIHRoZSBnaXZlbiBncmFwaCBpbnZva2UgLyBzdHJlYW0gY2h1bmsgY29udGFpbnMgaW50ZXJydXB0LlxuKlxuKiBAZXhhbXBsZVxuKiBgYGB0c1xuKiBpbXBvcnQgeyBJTlRFUlJVUFQsIGlzSW50ZXJydXB0ZWQgfSBmcm9tIFwiQGxhbmdjaGFpbi9sYW5nZ3JhcGhcIjtcbipcbiogY29uc3QgdmFsdWVzID0gYXdhaXQgZ3JhcGguaW52b2tlKHsgZm9vOiBcImJhclwiIH0pO1xuKiBpZiAoaXNJbnRlcnJ1cHRlZDxzdHJpbmc+KHZhbHVlcykpIHtcbiogICBjb25zdCBpbnRlcnJ1cHQgPSB2YWx1ZXNbSU5URVJSVVBUXVswXS52YWx1ZTtcbiogfVxuKiBgYGBcbipcbiogQHBhcmFtIHZhbHVlcyAtIFRoZSB2YWx1ZXMgdG8gY2hlY2suXG4qIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGNvbnRhaW4gYW4gaW50ZXJydXB0LCBgZmFsc2VgIG90aGVyd2lzZS5cbiovXG5mdW5jdGlvbiBpc0ludGVycnVwdGVkKHZhbHVlcykge1xuXHRpZiAoIXZhbHVlcyB8fCB0eXBlb2YgdmFsdWVzICE9PSBcIm9iamVjdFwiKSByZXR1cm4gZmFsc2U7XG5cdGlmICghKElOVEVSUlVQVCBpbiB2YWx1ZXMpKSByZXR1cm4gZmFsc2U7XG5cdHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlc1tJTlRFUlJVUFRdKTtcbn1cbi8qKlxuKiBPbmUgb3IgbW9yZSBjb21tYW5kcyB0byB1cGRhdGUgdGhlIGdyYXBoJ3Mgc3RhdGUgYW5kIHNlbmQgbWVzc2FnZXMgdG8gbm9kZXMuXG4qIENhbiBiZSB1c2VkIHRvIGNvbWJpbmUgcm91dGluZyBsb2dpYyB3aXRoIHN0YXRlIHVwZGF0ZXMgaW4gbGlldSBvZiBjb25kaXRpb25hbCBlZGdlc1xuKlxuKiBAZXhhbXBsZVxuKiBgYGB0c1xuKiBpbXBvcnQgeyBBbm5vdGF0aW9uLCBDb21tYW5kIH0gZnJvbSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoXCI7XG4qXG4qIC8vIERlZmluZSBncmFwaCBzdGF0ZVxuKiBjb25zdCBTdGF0ZUFubm90YXRpb24gPSBBbm5vdGF0aW9uLlJvb3Qoe1xuKiAgIGZvbzogQW5ub3RhdGlvbjxzdHJpbmc+LFxuKiB9KTtcbipcbiogLy8gRGVmaW5lIHRoZSBub2Rlc1xuKiBjb25zdCBub2RlQSA9IGFzeW5jIChfc3RhdGU6IHR5cGVvZiBTdGF0ZUFubm90YXRpb24uU3RhdGUpID0+IHtcbiogICBjb25zb2xlLmxvZyhcIkNhbGxlZCBBXCIpO1xuKiAgIC8vIHRoaXMgaXMgYSByZXBsYWNlbWVudCBmb3IgYSByZWFsIGNvbmRpdGlvbmFsIGVkZ2UgZnVuY3Rpb25cbiogICBjb25zdCBnb3RvID0gTWF0aC5yYW5kb20oKSA+IC41ID8gXCJub2RlQlwiIDogXCJub2RlQ1wiO1xuKiAgIC8vIG5vdGUgaG93IENvbW1hbmQgYWxsb3dzIHlvdSB0byBCT1RIIHVwZGF0ZSB0aGUgZ3JhcGggc3RhdGUgQU5EIHJvdXRlIHRvIHRoZSBuZXh0IG5vZGVcbiogICByZXR1cm4gbmV3IENvbW1hbmQoe1xuKiAgICAgLy8gdGhpcyBpcyB0aGUgc3RhdGUgdXBkYXRlXG4qICAgICB1cGRhdGU6IHtcbiogICAgICAgZm9vOiBcImFcIixcbiogICAgIH0sXG4qICAgICAvLyB0aGlzIGlzIGEgcmVwbGFjZW1lbnQgZm9yIGFuIGVkZ2VcbiogICAgIGdvdG8sXG4qICAgfSk7XG4qIH07XG4qXG4qIC8vIE5vZGVzIEIgYW5kIEMgYXJlIHVuY2hhbmdlZFxuKiBjb25zdCBub2RlQiA9IGFzeW5jIChzdGF0ZTogdHlwZW9mIFN0YXRlQW5ub3RhdGlvbi5TdGF0ZSkgPT4ge1xuKiAgIGNvbnNvbGUubG9nKFwiQ2FsbGVkIEJcIik7XG4qICAgcmV0dXJuIHtcbiogICAgIGZvbzogc3RhdGUuZm9vICsgXCJ8YlwiLFxuKiAgIH07XG4qIH1cbipcbiogY29uc3Qgbm9kZUMgPSBhc3luYyAoc3RhdGU6IHR5cGVvZiBTdGF0ZUFubm90YXRpb24uU3RhdGUpID0+IHtcbiogICBjb25zb2xlLmxvZyhcIkNhbGxlZCBDXCIpO1xuKiAgIHJldHVybiB7XG4qICAgICBmb286IHN0YXRlLmZvbyArIFwifGNcIixcbiogICB9O1xuKiB9XG4qIFxuKiBpbXBvcnQgeyBTdGF0ZUdyYXBoIH0gZnJvbSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoXCI7XG5cbiogLy8gTk9URTogdGhlcmUgYXJlIG5vIGVkZ2VzIGJldHdlZW4gbm9kZXMgQSwgQiBhbmQgQyFcbiogY29uc3QgZ3JhcGggPSBuZXcgU3RhdGVHcmFwaChTdGF0ZUFubm90YXRpb24pXG4qICAgLmFkZE5vZGUoXCJub2RlQVwiLCBub2RlQSwge1xuKiAgICAgZW5kczogW1wibm9kZUJcIiwgXCJub2RlQ1wiXSxcbiogICB9KVxuKiAgIC5hZGROb2RlKFwibm9kZUJcIiwgbm9kZUIpXG4qICAgLmFkZE5vZGUoXCJub2RlQ1wiLCBub2RlQylcbiogICAuYWRkRWRnZShcIl9fc3RhcnRfX1wiLCBcIm5vZGVBXCIpXG4qICAgLmNvbXBpbGUoKTtcbiogXG4qIGF3YWl0IGdyYXBoLmludm9rZSh7IGZvbzogXCJcIiB9KTtcbipcbiogLy8gUmFuZG9tbHkgb3NjaWxsYXRlcyBiZXR3ZWVuXG4qIC8vIHsgZm9vOiAnYXxjJyB9IGFuZCB7IGZvbzogJ2F8YicgfVxuKiBgYGBcbiovXG52YXIgQ29tbWFuZCA9IGNsYXNzIGV4dGVuZHMgQ29tbWFuZEluc3RhbmNlIHtcblx0bGdfbmFtZSA9IFwiQ29tbWFuZFwiO1xuXHRsY19kaXJlY3RfdG9vbF9vdXRwdXQgPSB0cnVlO1xuXHQvKipcblx0KiBHcmFwaCB0byBzZW5kIHRoZSBjb21tYW5kIHRvLiBTdXBwb3J0ZWQgdmFsdWVzIGFyZTpcblx0KiAgIC0gTm9uZTogdGhlIGN1cnJlbnQgZ3JhcGggKGRlZmF1bHQpXG5cdCogICAtIFRoZSBzcGVjaWZpYyBuYW1lIG9mIHRoZSBncmFwaCB0byBzZW5kIHRoZSBjb21tYW5kIHRvXG5cdCogICAtIHtAbGluayBDb21tYW5kLlBBUkVOVH06IGNsb3Nlc3QgcGFyZW50IGdyYXBoIChvbmx5IHN1cHBvcnRlZCB3aGVuIHJldHVybmVkIGZyb20gYSBub2RlIGluIGEgc3ViZ3JhcGgpXG5cdCovXG5cdGdyYXBoO1xuXHQvKipcblx0KiBVcGRhdGUgdG8gYXBwbHkgdG8gdGhlIGdyYXBoJ3Mgc3RhdGUgYXMgYSByZXN1bHQgb2YgZXhlY3V0aW5nIHRoZSBub2RlIHRoYXQgaXMgcmV0dXJuaW5nIHRoZSBjb21tYW5kLlxuXHQqIFdyaXR0ZW4gdG8gdGhlIHN0YXRlIGFzIGlmIHRoZSBub2RlIGhhZCBzaW1wbHkgcmV0dXJuZWQgdGhpcyB2YWx1ZSBpbnN0ZWFkIG9mIHRoZSBDb21tYW5kIG9iamVjdC5cblx0Ki9cblx0dXBkYXRlO1xuXHQvKipcblx0KiBWYWx1ZSB0byByZXN1bWUgZXhlY3V0aW9uIHdpdGguIFRvIGJlIHVzZWQgdG9nZXRoZXIgd2l0aCB7QGxpbmsgaW50ZXJydXB0fS5cblx0Ki9cblx0cmVzdW1lO1xuXHQvKipcblx0KiBDYW4gYmUgb25lIG9mIHRoZSBmb2xsb3dpbmc6XG5cdCogICAtIG5hbWUgb2YgdGhlIG5vZGUgdG8gbmF2aWdhdGUgdG8gbmV4dCAoYW55IG5vZGUgdGhhdCBiZWxvbmdzIHRvIHRoZSBzcGVjaWZpZWQgYGdyYXBoYClcblx0KiAgIC0gc2VxdWVuY2Ugb2Ygbm9kZSBuYW1lcyB0byBuYXZpZ2F0ZSB0byBuZXh0XG5cdCogICAtIHtAbGluayBTZW5kfSBvYmplY3QgKHRvIGV4ZWN1dGUgYSBub2RlIHdpdGggdGhlIGV4YWN0IGlucHV0IHByb3ZpZGVkIGluIHRoZSB7QGxpbmsgU2VuZH0gb2JqZWN0KVxuXHQqICAgLSBzZXF1ZW5jZSBvZiB7QGxpbmsgU2VuZH0gb2JqZWN0c1xuXHQqL1xuXHRnb3RvID0gW107XG5cdHN0YXRpYyBQQVJFTlQgPSBcIl9fcGFyZW50X19cIjtcblx0Y29uc3RydWN0b3IoYXJncykge1xuXHRcdHN1cGVyKGFyZ3MpO1xuXHRcdHRoaXMucmVzdW1lID0gYXJncy5yZXN1bWU7XG5cdFx0dGhpcy5ncmFwaCA9IGFyZ3MuZ3JhcGg7XG5cdFx0dGhpcy51cGRhdGUgPSBhcmdzLnVwZGF0ZTtcblx0XHRpZiAoYXJncy5nb3RvKSB0aGlzLmdvdG8gPSBBcnJheS5pc0FycmF5KGFyZ3MuZ290bykgPyBfZGVzZXJpYWxpemVDb21tYW5kU2VuZE9iamVjdEdyYXBoKGFyZ3MuZ290bykgOiBbX2Rlc2VyaWFsaXplQ29tbWFuZFNlbmRPYmplY3RHcmFwaChhcmdzLmdvdG8pXTtcblx0fVxuXHQvKipcblx0KiBDb252ZXJ0IHRoZSB1cGRhdGUgZmllbGQgdG8gYSBsaXN0IG9mIHtAbGluayBQZW5kaW5nV3JpdGV9IHR1cGxlc1xuXHQqIEByZXR1cm5zIExpc3Qgb2Yge0BsaW5rIFBlbmRpbmdXcml0ZX0gdHVwbGVzIG9mIHRoZSBmb3JtIGBbY2hhbm5lbEtleSwgdmFsdWVdYC5cblx0KiBAaW50ZXJuYWxcblx0Ki9cblx0X3VwZGF0ZUFzVHVwbGVzKCkge1xuXHRcdGlmICh0aGlzLnVwZGF0ZSAmJiB0eXBlb2YgdGhpcy51cGRhdGUgPT09IFwib2JqZWN0XCIgJiYgIUFycmF5LmlzQXJyYXkodGhpcy51cGRhdGUpKSByZXR1cm4gT2JqZWN0LmVudHJpZXModGhpcy51cGRhdGUpO1xuXHRcdGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodGhpcy51cGRhdGUpICYmIHRoaXMudXBkYXRlLmV2ZXJ5KCh0KSA9PiBBcnJheS5pc0FycmF5KHQpICYmIHQubGVuZ3RoID09PSAyICYmIHR5cGVvZiB0WzBdID09PSBcInN0cmluZ1wiKSkgcmV0dXJuIHRoaXMudXBkYXRlO1xuXHRcdGVsc2UgcmV0dXJuIFtbXCJfX3Jvb3RfX1wiLCB0aGlzLnVwZGF0ZV1dO1xuXHR9XG5cdHRvSlNPTigpIHtcblx0XHRsZXQgc2VyaWFsaXplZEdvdG87XG5cdFx0aWYgKHR5cGVvZiB0aGlzLmdvdG8gPT09IFwic3RyaW5nXCIpIHNlcmlhbGl6ZWRHb3RvID0gdGhpcy5nb3RvO1xuXHRcdGVsc2UgaWYgKF9pc1NlbmQodGhpcy5nb3RvKSkgc2VyaWFsaXplZEdvdG8gPSB0aGlzLmdvdG8udG9KU09OKCk7XG5cdFx0ZWxzZSBzZXJpYWxpemVkR290byA9IHRoaXMuZ290bz8ubWFwKChpbm5lckdvdG8pID0+IHtcblx0XHRcdGlmICh0eXBlb2YgaW5uZXJHb3RvID09PSBcInN0cmluZ1wiKSByZXR1cm4gaW5uZXJHb3RvO1xuXHRcdFx0ZWxzZSByZXR1cm4gaW5uZXJHb3RvLnRvSlNPTigpO1xuXHRcdH0pO1xuXHRcdHJldHVybiB7XG5cdFx0XHRsZ19uYW1lOiB0aGlzLmxnX25hbWUsXG5cdFx0XHR1cGRhdGU6IHRoaXMudXBkYXRlLFxuXHRcdFx0cmVzdW1lOiB0aGlzLnJlc3VtZSxcblx0XHRcdGdvdG86IHNlcmlhbGl6ZWRHb3RvXG5cdFx0fTtcblx0fVxufTtcbi8qKlxuKiBBIHR5cGUgZ3VhcmQgdG8gY2hlY2sgaWYgdGhlIGdpdmVuIHZhbHVlIGlzIGEge0BsaW5rIENvbW1hbmR9LlxuKlxuKiBVc2VmdWwgZm9yIHR5cGUgbmFycm93aW5nIHdoZW4gd29ya2luZyB3aXRoIHRoZSB7QGxpbmsgQ29tbWFuZH0gb2JqZWN0LlxuKlxuKiBAcGFyYW0geCAtIFRoZSB2YWx1ZSB0byBjaGVjay5cbiogQHJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZSBpcyBhIHtAbGluayBDb21tYW5kfSwgYGZhbHNlYCBvdGhlcndpc2UuXG4qL1xuZnVuY3Rpb24gaXNDb21tYW5kKHgpIHtcblx0aWYgKHR5cGVvZiB4ICE9PSBcIm9iamVjdFwiKSByZXR1cm4gZmFsc2U7XG5cdGlmICh4ID09PSBudWxsIHx8IHggPT09IHZvaWQgMCkgcmV0dXJuIGZhbHNlO1xuXHRpZiAoXCJsZ19uYW1lXCIgaW4geCAmJiB4LmxnX25hbWUgPT09IFwiQ29tbWFuZFwiKSByZXR1cm4gdHJ1ZTtcblx0cmV0dXJuIGZhbHNlO1xufVxuLyoqXG4qIFJlY29uc3RydWN0cyBDb21tYW5kIGFuZCBTZW5kIG9iamVjdHMgZnJvbSBhIGRlZXBseSBuZXN0ZWQgdHJlZSBvZiBhbm9ueW1vdXMgb2JqZWN0c1xuKiBtYXRjaGluZyB0aGVpciBpbnRlcmZhY2VzLlxuKlxuKiBUaGlzIGlzIG9ubHkgZXhwb3J0ZWQgZm9yIHRlc3RpbmcgcHVycG9zZXMuIEl0IGlzIE5PVCBpbnRlbmRlZCB0byBiZSB1c2VkIG91dHNpZGUgb2ZcbiogdGhlIENvbW1hbmQgYW5kIFNlbmQgY2xhc3Nlcy5cbipcbiogQGludGVybmFsXG4qXG4qIEBwYXJhbSB4IC0gVGhlIGNvbW1hbmQgc2VuZCB0cmVlIHRvIGNvbnZlcnQuXG4qIEBwYXJhbSBzZWVuIC0gQSBtYXAgb2Ygc2VlbiBvYmplY3RzIHRvIGF2b2lkIGluZmluaXRlIGxvb3BzLlxuKiBAcmV0dXJucyBUaGUgY29udmVydGVkIGNvbW1hbmQgc2VuZCB0cmVlLlxuKi9cbmZ1bmN0aW9uIF9kZXNlcmlhbGl6ZUNvbW1hbmRTZW5kT2JqZWN0R3JhcGgoeCwgc2VlbiA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCkpIHtcblx0aWYgKHggIT09IHZvaWQgMCAmJiB4ICE9PSBudWxsICYmIHR5cGVvZiB4ID09PSBcIm9iamVjdFwiKSB7XG5cdFx0aWYgKHNlZW4uaGFzKHgpKSByZXR1cm4gc2Vlbi5nZXQoeCk7XG5cdFx0bGV0IHJlc3VsdDtcblx0XHRpZiAoQXJyYXkuaXNBcnJheSh4KSkge1xuXHRcdFx0cmVzdWx0ID0gW107XG5cdFx0XHRzZWVuLnNldCh4LCByZXN1bHQpO1xuXHRcdFx0eC5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuXHRcdFx0XHRyZXN1bHRbaW5kZXhdID0gX2Rlc2VyaWFsaXplQ29tbWFuZFNlbmRPYmplY3RHcmFwaChpdGVtLCBzZWVuKTtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSBpZiAoaXNDb21tYW5kKHgpICYmICEoeCBpbnN0YW5jZW9mIENvbW1hbmQpKSB7XG5cdFx0XHRyZXN1bHQgPSBuZXcgQ29tbWFuZCh4KTtcblx0XHRcdHNlZW4uc2V0KHgsIHJlc3VsdCk7XG5cdFx0fSBlbHNlIGlmIChfaXNTZW5kSW50ZXJmYWNlKHgpICYmICEoeCBpbnN0YW5jZW9mIFNlbmQpKSB7XG5cdFx0XHRyZXN1bHQgPSBuZXcgU2VuZCh4Lm5vZGUsIHguYXJncyk7XG5cdFx0XHRzZWVuLnNldCh4LCByZXN1bHQpO1xuXHRcdH0gZWxzZSBpZiAoaXNDb21tYW5kKHgpIHx8IF9pc1NlbmQoeCkpIHtcblx0XHRcdHJlc3VsdCA9IHg7XG5cdFx0XHRzZWVuLnNldCh4LCByZXN1bHQpO1xuXHRcdH0gZWxzZSBpZiAoXCJsY19zZXJpYWxpemFibGVcIiBpbiB4ICYmIHgubGNfc2VyaWFsaXphYmxlKSB7XG5cdFx0XHRyZXN1bHQgPSB4O1xuXHRcdFx0c2Vlbi5zZXQoeCwgcmVzdWx0KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVzdWx0ID0ge307XG5cdFx0XHRzZWVuLnNldCh4LCByZXN1bHQpO1xuXHRcdFx0Zm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoeCkpIHJlc3VsdFtrZXldID0gX2Rlc2VyaWFsaXplQ29tbWFuZFNlbmRPYmplY3RHcmFwaCh2YWx1ZSwgc2Vlbik7XG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblx0cmV0dXJuIHg7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQ0FDSEVfTlNfV1JJVEVTLCBDSEVDS1BPSU5UX05BTUVTUEFDRV9FTkQsIENIRUNLUE9JTlRfTkFNRVNQQUNFX1NFUEFSQVRPUiwgQ09ORklHX0tFWV9BQk9SVF9TSUdOQUxTLCBDT05GSUdfS0VZX0NBTEwsIENPTkZJR19LRVlfQ0hFQ0tQT0lOVEVSLCBDT05GSUdfS0VZX0NIRUNLUE9JTlRfSUQsIENPTkZJR19LRVlfQ0hFQ0tQT0lOVF9NQVAsIENPTkZJR19LRVlfQ0hFQ0tQT0lOVF9OUywgQ09ORklHX0tFWV9EVVJBQklMSVRZLCBDT05GSUdfS0VZX05PREVfRklOSVNIRUQsIENPTkZJR19LRVlfUFJFVklPVVNfU1RBVEUsIENPTkZJR19LRVlfUkVBRCwgQ09ORklHX0tFWV9SRVNVTUVfTUFQLCBDT05GSUdfS0VZX1JFU1VNSU5HLCBDT05GSUdfS0VZX1NDUkFUQ0hQQUQsIENPTkZJR19LRVlfU0VORCwgQ09ORklHX0tFWV9TVFJFQU0sIENPTkZJR19LRVlfVEFTS19JRCwgQ09QWSwgQ29tbWFuZCwgQ29tbWFuZEluc3RhbmNlLCBFTkQsIEVSUk9SLCBJTlBVVCwgSU5URVJSVVBULCBOT19XUklURVMsIE5VTExfVEFTS19JRCwgUFJFVklPVVMsIFBVTEwsIFBVU0gsIFJFU0VSVkVELCBSRVNVTUUsIFJFVFVSTiwgU0VMRiwgU1RBUlQsIFNlbmQsIFRBR19ISURERU4sIFRBR19OT1NUUkVBTSwgVEFTS1MsIF9pc1NlbmQsIF9pc1NlbmRJbnRlcmZhY2UsIGlzQ29tbWFuZCwgaXNJbnRlcnJ1cHRlZCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uc3RhbnRzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/constants.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/errors.js":
/*!**********************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/errors.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseLangGraphError: () => (/* binding */ BaseLangGraphError),\n/* harmony export */   EmptyChannelError: () => (/* binding */ EmptyChannelError),\n/* harmony export */   EmptyInputError: () => (/* binding */ EmptyInputError),\n/* harmony export */   GraphBubbleUp: () => (/* binding */ GraphBubbleUp),\n/* harmony export */   GraphInterrupt: () => (/* binding */ GraphInterrupt),\n/* harmony export */   GraphRecursionError: () => (/* binding */ GraphRecursionError),\n/* harmony export */   GraphValueError: () => (/* binding */ GraphValueError),\n/* harmony export */   InvalidUpdateError: () => (/* binding */ InvalidUpdateError),\n/* harmony export */   MultipleSubgraphsError: () => (/* binding */ MultipleSubgraphsError),\n/* harmony export */   NodeInterrupt: () => (/* binding */ NodeInterrupt),\n/* harmony export */   ParentCommand: () => (/* binding */ ParentCommand),\n/* harmony export */   RemoteException: () => (/* binding */ RemoteException),\n/* harmony export */   UnreachableNodeError: () => (/* binding */ UnreachableNodeError),\n/* harmony export */   getSubgraphsSeenSet: () => (/* binding */ getSubgraphsSeenSet),\n/* harmony export */   isGraphBubbleUp: () => (/* binding */ isGraphBubbleUp),\n/* harmony export */   isGraphInterrupt: () => (/* binding */ isGraphInterrupt),\n/* harmony export */   isParentCommand: () => (/* binding */ isParentCommand)\n/* harmony export */ });\n//#region src/errors.ts\n/** @category Errors */\nvar BaseLangGraphError = class extends Error {\n\tlc_error_code;\n\tconstructor(message, fields) {\n\t\tlet finalMessage = message ?? \"\";\n\t\tif (fields?.lc_error_code) finalMessage = `${finalMessage}\\n\\nTroubleshooting URL: https://docs.langchain.com/oss/javascript/langgraph/${fields.lc_error_code}/\\n`;\n\t\tsuper(finalMessage);\n\t\tthis.lc_error_code = fields?.lc_error_code;\n\t}\n};\nvar GraphBubbleUp = class extends BaseLangGraphError {\n\tget is_bubble_up() {\n\t\treturn true;\n\t}\n};\nvar GraphRecursionError = class extends BaseLangGraphError {\n\tconstructor(message, fields) {\n\t\tsuper(message, fields);\n\t\tthis.name = \"GraphRecursionError\";\n\t}\n\tstatic get unminifiable_name() {\n\t\treturn \"GraphRecursionError\";\n\t}\n};\nvar GraphValueError = class extends BaseLangGraphError {\n\tconstructor(message, fields) {\n\t\tsuper(message, fields);\n\t\tthis.name = \"GraphValueError\";\n\t}\n\tstatic get unminifiable_name() {\n\t\treturn \"GraphValueError\";\n\t}\n};\nvar GraphInterrupt = class extends GraphBubbleUp {\n\tinterrupts;\n\tconstructor(interrupts, fields) {\n\t\tsuper(JSON.stringify(interrupts, null, 2), fields);\n\t\tthis.name = \"GraphInterrupt\";\n\t\tthis.interrupts = interrupts ?? [];\n\t}\n\tstatic get unminifiable_name() {\n\t\treturn \"GraphInterrupt\";\n\t}\n};\n/** Raised by a node to interrupt execution. */\nvar NodeInterrupt = class extends GraphInterrupt {\n\tconstructor(message, fields) {\n\t\tsuper([{ value: message }], fields);\n\t\tthis.name = \"NodeInterrupt\";\n\t}\n\tstatic get unminifiable_name() {\n\t\treturn \"NodeInterrupt\";\n\t}\n};\nvar ParentCommand = class extends GraphBubbleUp {\n\tcommand;\n\tconstructor(command) {\n\t\tsuper();\n\t\tthis.name = \"ParentCommand\";\n\t\tthis.command = command;\n\t}\n\tstatic get unminifiable_name() {\n\t\treturn \"ParentCommand\";\n\t}\n};\nfunction isParentCommand(e) {\n\treturn e !== void 0 && e.name === ParentCommand.unminifiable_name;\n}\nfunction isGraphBubbleUp(e) {\n\treturn e !== void 0 && e.is_bubble_up === true;\n}\nfunction isGraphInterrupt(e) {\n\treturn e !== void 0 && [GraphInterrupt.unminifiable_name, NodeInterrupt.unminifiable_name].includes(e.name);\n}\nvar EmptyInputError = class extends BaseLangGraphError {\n\tconstructor(message, fields) {\n\t\tsuper(message, fields);\n\t\tthis.name = \"EmptyInputError\";\n\t}\n\tstatic get unminifiable_name() {\n\t\treturn \"EmptyInputError\";\n\t}\n};\nvar EmptyChannelError = class extends BaseLangGraphError {\n\tconstructor(message, fields) {\n\t\tsuper(message, fields);\n\t\tthis.name = \"EmptyChannelError\";\n\t}\n\tstatic get unminifiable_name() {\n\t\treturn \"EmptyChannelError\";\n\t}\n};\nvar InvalidUpdateError = class extends BaseLangGraphError {\n\tconstructor(message, fields) {\n\t\tsuper(message, fields);\n\t\tthis.name = \"InvalidUpdateError\";\n\t}\n\tstatic get unminifiable_name() {\n\t\treturn \"InvalidUpdateError\";\n\t}\n};\n/**\n* @deprecated This exception type is no longer thrown.\n*/\nvar MultipleSubgraphsError = class extends BaseLangGraphError {\n\tconstructor(message, fields) {\n\t\tsuper(message, fields);\n\t\tthis.name = \"MultipleSubgraphError\";\n\t}\n\tstatic get unminifiable_name() {\n\t\treturn \"MultipleSubgraphError\";\n\t}\n};\nvar UnreachableNodeError = class extends BaseLangGraphError {\n\tconstructor(message, fields) {\n\t\tsuper(message, fields);\n\t\tthis.name = \"UnreachableNodeError\";\n\t}\n\tstatic get unminifiable_name() {\n\t\treturn \"UnreachableNodeError\";\n\t}\n};\n/**\n* Exception raised when an error occurs in the remote graph.\n*/\nvar RemoteException = class extends BaseLangGraphError {\n\tconstructor(message, fields) {\n\t\tsuper(message, fields);\n\t\tthis.name = \"RemoteException\";\n\t}\n\tstatic get unminifiable_name() {\n\t\treturn \"RemoteException\";\n\t}\n};\n/**\n* Used for subgraph detection.\n*/\nconst getSubgraphsSeenSet = () => {\n\tif (globalThis[Symbol.for(\"LG_CHECKPOINT_SEEN_NS_SET\")] === void 0) globalThis[Symbol.for(\"LG_CHECKPOINT_SEEN_NS_SET\")] = /* @__PURE__ */ new Set();\n\treturn globalThis[Symbol.for(\"LG_CHECKPOINT_SEEN_NS_SET\")];\n};\n\n//#endregion\n\n//# sourceMappingURL=errors.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9lcnJvcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsYUFBYSwrRUFBK0UscUJBQXFCO0FBQ2hLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGdCQUFnQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDaVU7QUFDalUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2Vycm9ycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2Vycm9ycy50c1xuLyoqIEBjYXRlZ29yeSBFcnJvcnMgKi9cbnZhciBCYXNlTGFuZ0dyYXBoRXJyb3IgPSBjbGFzcyBleHRlbmRzIEVycm9yIHtcblx0bGNfZXJyb3JfY29kZTtcblx0Y29uc3RydWN0b3IobWVzc2FnZSwgZmllbGRzKSB7XG5cdFx0bGV0IGZpbmFsTWVzc2FnZSA9IG1lc3NhZ2UgPz8gXCJcIjtcblx0XHRpZiAoZmllbGRzPy5sY19lcnJvcl9jb2RlKSBmaW5hbE1lc3NhZ2UgPSBgJHtmaW5hbE1lc3NhZ2V9XFxuXFxuVHJvdWJsZXNob290aW5nIFVSTDogaHR0cHM6Ly9kb2NzLmxhbmdjaGFpbi5jb20vb3NzL2phdmFzY3JpcHQvbGFuZ2dyYXBoLyR7ZmllbGRzLmxjX2Vycm9yX2NvZGV9L1xcbmA7XG5cdFx0c3VwZXIoZmluYWxNZXNzYWdlKTtcblx0XHR0aGlzLmxjX2Vycm9yX2NvZGUgPSBmaWVsZHM/LmxjX2Vycm9yX2NvZGU7XG5cdH1cbn07XG52YXIgR3JhcGhCdWJibGVVcCA9IGNsYXNzIGV4dGVuZHMgQmFzZUxhbmdHcmFwaEVycm9yIHtcblx0Z2V0IGlzX2J1YmJsZV91cCgpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxufTtcbnZhciBHcmFwaFJlY3Vyc2lvbkVycm9yID0gY2xhc3MgZXh0ZW5kcyBCYXNlTGFuZ0dyYXBoRXJyb3Ige1xuXHRjb25zdHJ1Y3RvcihtZXNzYWdlLCBmaWVsZHMpIHtcblx0XHRzdXBlcihtZXNzYWdlLCBmaWVsZHMpO1xuXHRcdHRoaXMubmFtZSA9IFwiR3JhcGhSZWN1cnNpb25FcnJvclwiO1xuXHR9XG5cdHN0YXRpYyBnZXQgdW5taW5pZmlhYmxlX25hbWUoKSB7XG5cdFx0cmV0dXJuIFwiR3JhcGhSZWN1cnNpb25FcnJvclwiO1xuXHR9XG59O1xudmFyIEdyYXBoVmFsdWVFcnJvciA9IGNsYXNzIGV4dGVuZHMgQmFzZUxhbmdHcmFwaEVycm9yIHtcblx0Y29uc3RydWN0b3IobWVzc2FnZSwgZmllbGRzKSB7XG5cdFx0c3VwZXIobWVzc2FnZSwgZmllbGRzKTtcblx0XHR0aGlzLm5hbWUgPSBcIkdyYXBoVmFsdWVFcnJvclwiO1xuXHR9XG5cdHN0YXRpYyBnZXQgdW5taW5pZmlhYmxlX25hbWUoKSB7XG5cdFx0cmV0dXJuIFwiR3JhcGhWYWx1ZUVycm9yXCI7XG5cdH1cbn07XG52YXIgR3JhcGhJbnRlcnJ1cHQgPSBjbGFzcyBleHRlbmRzIEdyYXBoQnViYmxlVXAge1xuXHRpbnRlcnJ1cHRzO1xuXHRjb25zdHJ1Y3RvcihpbnRlcnJ1cHRzLCBmaWVsZHMpIHtcblx0XHRzdXBlcihKU09OLnN0cmluZ2lmeShpbnRlcnJ1cHRzLCBudWxsLCAyKSwgZmllbGRzKTtcblx0XHR0aGlzLm5hbWUgPSBcIkdyYXBoSW50ZXJydXB0XCI7XG5cdFx0dGhpcy5pbnRlcnJ1cHRzID0gaW50ZXJydXB0cyA/PyBbXTtcblx0fVxuXHRzdGF0aWMgZ2V0IHVubWluaWZpYWJsZV9uYW1lKCkge1xuXHRcdHJldHVybiBcIkdyYXBoSW50ZXJydXB0XCI7XG5cdH1cbn07XG4vKiogUmFpc2VkIGJ5IGEgbm9kZSB0byBpbnRlcnJ1cHQgZXhlY3V0aW9uLiAqL1xudmFyIE5vZGVJbnRlcnJ1cHQgPSBjbGFzcyBleHRlbmRzIEdyYXBoSW50ZXJydXB0IHtcblx0Y29uc3RydWN0b3IobWVzc2FnZSwgZmllbGRzKSB7XG5cdFx0c3VwZXIoW3sgdmFsdWU6IG1lc3NhZ2UgfV0sIGZpZWxkcyk7XG5cdFx0dGhpcy5uYW1lID0gXCJOb2RlSW50ZXJydXB0XCI7XG5cdH1cblx0c3RhdGljIGdldCB1bm1pbmlmaWFibGVfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJOb2RlSW50ZXJydXB0XCI7XG5cdH1cbn07XG52YXIgUGFyZW50Q29tbWFuZCA9IGNsYXNzIGV4dGVuZHMgR3JhcGhCdWJibGVVcCB7XG5cdGNvbW1hbmQ7XG5cdGNvbnN0cnVjdG9yKGNvbW1hbmQpIHtcblx0XHRzdXBlcigpO1xuXHRcdHRoaXMubmFtZSA9IFwiUGFyZW50Q29tbWFuZFwiO1xuXHRcdHRoaXMuY29tbWFuZCA9IGNvbW1hbmQ7XG5cdH1cblx0c3RhdGljIGdldCB1bm1pbmlmaWFibGVfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJQYXJlbnRDb21tYW5kXCI7XG5cdH1cbn07XG5mdW5jdGlvbiBpc1BhcmVudENvbW1hbmQoZSkge1xuXHRyZXR1cm4gZSAhPT0gdm9pZCAwICYmIGUubmFtZSA9PT0gUGFyZW50Q29tbWFuZC51bm1pbmlmaWFibGVfbmFtZTtcbn1cbmZ1bmN0aW9uIGlzR3JhcGhCdWJibGVVcChlKSB7XG5cdHJldHVybiBlICE9PSB2b2lkIDAgJiYgZS5pc19idWJibGVfdXAgPT09IHRydWU7XG59XG5mdW5jdGlvbiBpc0dyYXBoSW50ZXJydXB0KGUpIHtcblx0cmV0dXJuIGUgIT09IHZvaWQgMCAmJiBbR3JhcGhJbnRlcnJ1cHQudW5taW5pZmlhYmxlX25hbWUsIE5vZGVJbnRlcnJ1cHQudW5taW5pZmlhYmxlX25hbWVdLmluY2x1ZGVzKGUubmFtZSk7XG59XG52YXIgRW1wdHlJbnB1dEVycm9yID0gY2xhc3MgZXh0ZW5kcyBCYXNlTGFuZ0dyYXBoRXJyb3Ige1xuXHRjb25zdHJ1Y3RvcihtZXNzYWdlLCBmaWVsZHMpIHtcblx0XHRzdXBlcihtZXNzYWdlLCBmaWVsZHMpO1xuXHRcdHRoaXMubmFtZSA9IFwiRW1wdHlJbnB1dEVycm9yXCI7XG5cdH1cblx0c3RhdGljIGdldCB1bm1pbmlmaWFibGVfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJFbXB0eUlucHV0RXJyb3JcIjtcblx0fVxufTtcbnZhciBFbXB0eUNoYW5uZWxFcnJvciA9IGNsYXNzIGV4dGVuZHMgQmFzZUxhbmdHcmFwaEVycm9yIHtcblx0Y29uc3RydWN0b3IobWVzc2FnZSwgZmllbGRzKSB7XG5cdFx0c3VwZXIobWVzc2FnZSwgZmllbGRzKTtcblx0XHR0aGlzLm5hbWUgPSBcIkVtcHR5Q2hhbm5lbEVycm9yXCI7XG5cdH1cblx0c3RhdGljIGdldCB1bm1pbmlmaWFibGVfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJFbXB0eUNoYW5uZWxFcnJvclwiO1xuXHR9XG59O1xudmFyIEludmFsaWRVcGRhdGVFcnJvciA9IGNsYXNzIGV4dGVuZHMgQmFzZUxhbmdHcmFwaEVycm9yIHtcblx0Y29uc3RydWN0b3IobWVzc2FnZSwgZmllbGRzKSB7XG5cdFx0c3VwZXIobWVzc2FnZSwgZmllbGRzKTtcblx0XHR0aGlzLm5hbWUgPSBcIkludmFsaWRVcGRhdGVFcnJvclwiO1xuXHR9XG5cdHN0YXRpYyBnZXQgdW5taW5pZmlhYmxlX25hbWUoKSB7XG5cdFx0cmV0dXJuIFwiSW52YWxpZFVwZGF0ZUVycm9yXCI7XG5cdH1cbn07XG4vKipcbiogQGRlcHJlY2F0ZWQgVGhpcyBleGNlcHRpb24gdHlwZSBpcyBubyBsb25nZXIgdGhyb3duLlxuKi9cbnZhciBNdWx0aXBsZVN1YmdyYXBoc0Vycm9yID0gY2xhc3MgZXh0ZW5kcyBCYXNlTGFuZ0dyYXBoRXJyb3Ige1xuXHRjb25zdHJ1Y3RvcihtZXNzYWdlLCBmaWVsZHMpIHtcblx0XHRzdXBlcihtZXNzYWdlLCBmaWVsZHMpO1xuXHRcdHRoaXMubmFtZSA9IFwiTXVsdGlwbGVTdWJncmFwaEVycm9yXCI7XG5cdH1cblx0c3RhdGljIGdldCB1bm1pbmlmaWFibGVfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJNdWx0aXBsZVN1YmdyYXBoRXJyb3JcIjtcblx0fVxufTtcbnZhciBVbnJlYWNoYWJsZU5vZGVFcnJvciA9IGNsYXNzIGV4dGVuZHMgQmFzZUxhbmdHcmFwaEVycm9yIHtcblx0Y29uc3RydWN0b3IobWVzc2FnZSwgZmllbGRzKSB7XG5cdFx0c3VwZXIobWVzc2FnZSwgZmllbGRzKTtcblx0XHR0aGlzLm5hbWUgPSBcIlVucmVhY2hhYmxlTm9kZUVycm9yXCI7XG5cdH1cblx0c3RhdGljIGdldCB1bm1pbmlmaWFibGVfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJVbnJlYWNoYWJsZU5vZGVFcnJvclwiO1xuXHR9XG59O1xuLyoqXG4qIEV4Y2VwdGlvbiByYWlzZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgaW4gdGhlIHJlbW90ZSBncmFwaC5cbiovXG52YXIgUmVtb3RlRXhjZXB0aW9uID0gY2xhc3MgZXh0ZW5kcyBCYXNlTGFuZ0dyYXBoRXJyb3Ige1xuXHRjb25zdHJ1Y3RvcihtZXNzYWdlLCBmaWVsZHMpIHtcblx0XHRzdXBlcihtZXNzYWdlLCBmaWVsZHMpO1xuXHRcdHRoaXMubmFtZSA9IFwiUmVtb3RlRXhjZXB0aW9uXCI7XG5cdH1cblx0c3RhdGljIGdldCB1bm1pbmlmaWFibGVfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJSZW1vdGVFeGNlcHRpb25cIjtcblx0fVxufTtcbi8qKlxuKiBVc2VkIGZvciBzdWJncmFwaCBkZXRlY3Rpb24uXG4qL1xuY29uc3QgZ2V0U3ViZ3JhcGhzU2VlblNldCA9ICgpID0+IHtcblx0aWYgKGdsb2JhbFRoaXNbU3ltYm9sLmZvcihcIkxHX0NIRUNLUE9JTlRfU0VFTl9OU19TRVRcIildID09PSB2b2lkIDApIGdsb2JhbFRoaXNbU3ltYm9sLmZvcihcIkxHX0NIRUNLUE9JTlRfU0VFTl9OU19TRVRcIildID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcblx0cmV0dXJuIGdsb2JhbFRoaXNbU3ltYm9sLmZvcihcIkxHX0NIRUNLUE9JTlRfU0VFTl9OU19TRVRcIildO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBCYXNlTGFuZ0dyYXBoRXJyb3IsIEVtcHR5Q2hhbm5lbEVycm9yLCBFbXB0eUlucHV0RXJyb3IsIEdyYXBoQnViYmxlVXAsIEdyYXBoSW50ZXJydXB0LCBHcmFwaFJlY3Vyc2lvbkVycm9yLCBHcmFwaFZhbHVlRXJyb3IsIEludmFsaWRVcGRhdGVFcnJvciwgTXVsdGlwbGVTdWJncmFwaHNFcnJvciwgTm9kZUludGVycnVwdCwgUGFyZW50Q29tbWFuZCwgUmVtb3RlRXhjZXB0aW9uLCBVbnJlYWNoYWJsZU5vZGVFcnJvciwgZ2V0U3ViZ3JhcGhzU2VlblNldCwgaXNHcmFwaEJ1YmJsZVVwLCBpc0dyYXBoSW50ZXJydXB0LCBpc1BhcmVudENvbW1hbmQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVycm9ycy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/errors.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/func/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/func/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   entrypoint: () => (/* binding */ entrypoint),\n/* harmony export */   getPreviousState: () => (/* binding */ getPreviousState),\n/* harmony export */   task: () => (/* binding */ task)\n/* harmony export */ });\n/* harmony import */ var _channels_last_value_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../channels/last_value.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/last_value.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/utils.js\");\n/* harmony import */ var _pregel_write_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../pregel/write.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/write.js\");\n/* harmony import */ var _pregel_read_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../pregel/read.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/read.js\");\n/* harmony import */ var _pregel_call_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../pregel/call.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/call.js\");\n/* harmony import */ var _pregel_index_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../pregel/index.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/index.js\");\n/* harmony import */ var _channels_ephemeral_value_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../channels/ephemeral_value.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/ephemeral_value.js\");\n/* harmony import */ var _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @langchain/core/singletons */ \"(ssr)/./node_modules/@langchain/core/dist/singletons/index.js\");\n\n\n\n\n\n\n\n\n\n\n//#region src/func/index.ts\n/**\n* Define a LangGraph task using the `task` function.\n*\n* Tasks can only be called from within an {@link entrypoint} or from within a StateGraph.\n* A task can be called like a regular function with the following differences:\n*\n* - When a checkpointer is enabled, the function inputs and outputs must be serializable.\n* - The wrapped function can only be called from within an entrypoint or StateGraph.\n* - Calling the function produces a promise. This makes it easy to parallelize tasks.\n*\n* @typeParam ArgsT - The type of arguments the task function accepts\n* @typeParam OutputT - The type of value the task function returns\n* @param optionsOrName - Either an {@link TaskOptions} object, or a string for the name of the task\n* @param func - The function that executes this task\n* @returns A proxy function that accepts the same arguments as the original and always returns the result as a Promise\n*\n* @example basic example\n* ```typescript\n* const addOne = task(\"add\", async (a: number) => a + 1);\n*\n* const workflow = entrypoint(\"example\", async (numbers: number[]) => {\n*   const promises = numbers.map(n => addOne(n));\n*   const results = await Promise.all(promises);\n*   return results;\n* });\n*\n* // Call the entrypoint\n* await workflow.invoke([1, 2, 3]); // Returns [2, 3, 4]\n* ```\n*\n* @example using a retry policy\n* ```typescript\n* const addOne = task({\n*     name: \"add\",\n*     retry: { maxAttempts: 3 }\n*   },\n*   async (a: number) => a + 1\n* );\n*\n* const workflow = entrypoint(\"example\", async (numbers: number[]) => {\n*   const promises = numbers.map(n => addOne(n));\n*   const results = await Promise.all(promises);\n*   return results;\n* });\n* ```\n* @category Functional API\n*/\nfunction task(optionsOrName, func) {\n\tconst options = typeof optionsOrName === \"string\" ? {\n\t\tname: optionsOrName,\n\t\tretry: void 0,\n\t\tcachePolicy: void 0\n\t} : optionsOrName;\n\tconst { name, retry } = options;\n\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isAsyncGeneratorFunction)(func) || (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isGeneratorFunction)(func)) throw new Error(\"Generators are disallowed as tasks. For streaming responses, use config.write.\");\n\tconst cachePolicy = options.cachePolicy ?? (\"cache\" in options ? options.cache : void 0);\n\tlet cache;\n\tif (typeof cachePolicy === \"boolean\") cache = cachePolicy ? {} : void 0;\n\telse cache = cachePolicy;\n\treturn (...args) => {\n\t\treturn (0,_pregel_call_js__WEBPACK_IMPORTED_MODULE_5__.call)({\n\t\t\tfunc,\n\t\t\tname,\n\t\t\tretry,\n\t\t\tcache\n\t\t}, ...args);\n\t};\n}\n/**\n* Define a LangGraph workflow using the `entrypoint` function.\n*\n* ### Function signature\n*\n* The wrapped function must accept at most **two parameters**. The first parameter\n* is the input to the function. The second (optional) parameter is a\n* {@link LangGraphRunnableConfig} object. If you wish to pass multiple parameters to\n* the function, you can pass them as an object.\n*\n* ### Helper functions\n*\n* #### Streaming\n* To write data to the \"custom\" stream, use the {@link getWriter} function, or the\n* {@link LangGraphRunnableConfig.writer} property.\n*\n* #### State management\n* The {@link getPreviousState} function can be used to access the previous state\n* that was returned from the last invocation of the entrypoint on the same thread id.\n*\n* If you wish to save state other than the return value, you can use the\n* {@link entrypoint.final} function.\n*\n* @typeParam InputT - The type of input the entrypoint accepts\n* @typeParam OutputT - The type of output the entrypoint produces\n* @param optionsOrName - Either an {@link EntrypointOptions} object, or a string for the name of the entrypoint\n* @param func - The function that executes this entrypoint\n* @returns A {@link Pregel} instance that can be run to execute the workflow\n*\n* @example Using entrypoint and tasks\n* ```typescript\n* import { task, entrypoint } from \"@langchain/langgraph\";\n* import { MemorySaver } from \"@langchain/langgraph-checkpoint\";\n* import { interrupt, Command } from \"@langchain/langgraph\";\n*\n* const composeEssay = task(\"compose\", async (topic: string) => {\n*   await new Promise(r => setTimeout(r, 1000)); // Simulate slow operation\n*   return `An essay about ${topic}`;\n* });\n*\n* const reviewWorkflow = entrypoint({\n*   name: \"review\",\n*   checkpointer: new MemorySaver()\n* }, async (topic: string) => {\n*   const essay = await composeEssay(topic);\n*   const humanReview = await interrupt({\n*     question: \"Please provide a review\",\n*     essay\n*   });\n*   return {\n*     essay,\n*     review: humanReview\n*   };\n* });\n*\n* // Example configuration for the workflow\n* const config = {\n*   configurable: {\n*     thread_id: \"some_thread\"\n*   }\n* };\n*\n* // Topic for the essay\n* const topic = \"cats\";\n*\n* // Stream the workflow to generate the essay and await human review\n* for await (const result of reviewWorkflow.stream(topic, config)) {\n*   console.log(result);\n* }\n*\n* // Example human review provided after the interrupt\n* const humanReview = \"This essay is great.\";\n*\n* // Resume the workflow with the provided human review\n* for await (const result of reviewWorkflow.stream(new Command({ resume: humanReview }), config)) {\n*   console.log(result);\n* }\n* ```\n*\n* @example Accessing the previous return value\n* ```typescript\n* import { entrypoint, getPreviousState } from \"@langchain/langgraph\";\n* import { MemorySaver } from \"@langchain/langgraph-checkpoint\";\n*\n* const accumulator = entrypoint({\n*   name: \"accumulator\",\n*   checkpointer: new MemorySaver()\n* }, async (input: string) => {\n*   const previous = getPreviousState<number>();\n*   return previous !== undefined ? `${previous } ${input}` : input;\n* });\n*\n* const config = {\n*   configurable: {\n*     thread_id: \"some_thread\"\n*   }\n* };\n* await accumulator.invoke(\"hello\", config); // returns \"hello\"\n* await accumulator.invoke(\"world\", config); // returns \"hello world\"\n* ```\n*\n* @example Using entrypoint.final to save a value\n* ```typescript\n* import { entrypoint, getPreviousState } from \"@langchain/langgraph\";\n* import { MemorySaver } from \"@langchain/langgraph-checkpoint\";\n*\n* const myWorkflow = entrypoint({\n*   name: \"accumulator\",\n*   checkpointer: new MemorySaver()\n* }, async (num: number) => {\n*   const previous = getPreviousState<number>();\n*\n*   // This will return the previous value to the caller, saving\n*   // 2 * num to the checkpoint, which will be used in the next invocation\n*   // for the `previous` parameter.\n*   return entrypoint.final({\n*     value: previous ?? 0,\n*     save: 2 * num\n*   });\n* });\n*\n* const config = {\n*   configurable: {\n*     thread_id: \"some_thread\"\n*   }\n* };\n*\n* await myWorkflow.invoke(3, config); // 0 (previous was undefined)\n* await myWorkflow.invoke(1, config); // 6 (previous was 3 * 2 from the previous invocation)\n* ```\n* @category Functional API\n*/\nconst entrypoint = function entrypoint$1(optionsOrName, func) {\n\tconst { name, checkpointer, store, cache } = typeof optionsOrName === \"string\" ? {\n\t\tname: optionsOrName,\n\t\tcheckpointer: void 0,\n\t\tstore: void 0\n\t} : optionsOrName;\n\tif ((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isAsyncGeneratorFunction)(func) || (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isGeneratorFunction)(func)) throw new Error(\"Generators are disallowed as entrypoints. For streaming responses, use config.write.\");\n\tconst streamMode = \"updates\";\n\tconst bound = (0,_pregel_call_js__WEBPACK_IMPORTED_MODULE_5__.getRunnableForEntrypoint)(name, func);\n\tfunction isEntrypointFinal(value) {\n\t\treturn typeof value === \"object\" && value !== null && \"__lg_type\" in value && value.__lg_type === \"__pregel_final\";\n\t}\n\tconst pluckReturnValue = new _utils_js__WEBPACK_IMPORTED_MODULE_2__.RunnableCallable({\n\t\tname: \"pluckReturnValue\",\n\t\tfunc: (value) => {\n\t\t\treturn isEntrypointFinal(value) ? value.value : value;\n\t\t}\n\t});\n\tconst pluckSaveValue = new _utils_js__WEBPACK_IMPORTED_MODULE_2__.RunnableCallable({\n\t\tname: \"pluckSaveValue\",\n\t\tfunc: (value) => {\n\t\t\treturn isEntrypointFinal(value) ? value.save : value;\n\t\t}\n\t});\n\tconst entrypointNode = new _pregel_read_js__WEBPACK_IMPORTED_MODULE_4__.PregelNode({\n\t\tbound,\n\t\ttriggers: [_constants_js__WEBPACK_IMPORTED_MODULE_1__.START],\n\t\tchannels: [_constants_js__WEBPACK_IMPORTED_MODULE_1__.START],\n\t\twriters: [new _pregel_write_js__WEBPACK_IMPORTED_MODULE_3__.ChannelWrite([{\n\t\t\tchannel: _constants_js__WEBPACK_IMPORTED_MODULE_1__.END,\n\t\t\tvalue: _pregel_write_js__WEBPACK_IMPORTED_MODULE_3__.PASSTHROUGH,\n\t\t\tmapper: pluckReturnValue\n\t\t}, {\n\t\t\tchannel: _constants_js__WEBPACK_IMPORTED_MODULE_1__.PREVIOUS,\n\t\t\tvalue: _pregel_write_js__WEBPACK_IMPORTED_MODULE_3__.PASSTHROUGH,\n\t\t\tmapper: pluckSaveValue\n\t\t}], [_constants_js__WEBPACK_IMPORTED_MODULE_1__.TAG_HIDDEN])]\n\t});\n\treturn new _pregel_index_js__WEBPACK_IMPORTED_MODULE_6__.Pregel({\n\t\tname,\n\t\tcheckpointer,\n\t\tnodes: { [name]: entrypointNode },\n\t\tchannels: {\n\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_1__.START]: new _channels_ephemeral_value_js__WEBPACK_IMPORTED_MODULE_7__.EphemeralValue(),\n\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_1__.END]: new _channels_last_value_js__WEBPACK_IMPORTED_MODULE_0__.LastValue(),\n\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_1__.PREVIOUS]: new _channels_last_value_js__WEBPACK_IMPORTED_MODULE_0__.LastValue()\n\t\t},\n\t\tinputChannels: _constants_js__WEBPACK_IMPORTED_MODULE_1__.START,\n\t\toutputChannels: _constants_js__WEBPACK_IMPORTED_MODULE_1__.END,\n\t\tstreamChannels: _constants_js__WEBPACK_IMPORTED_MODULE_1__.END,\n\t\tstreamMode,\n\t\tstore,\n\t\tcache\n\t});\n};\nentrypoint.final = function final({ value, save }) {\n\treturn {\n\t\tvalue,\n\t\tsave,\n\t\t__lg_type: \"__pregel_final\"\n\t};\n};\n/**\n* A helper utility function for use with the functional API that returns the previous\n* state from the checkpoint from the last invocation of the current thread.\n*\n* This function allows workflows to access state that was saved in previous runs\n* using {@link entrypoint.final}.\n*\n* @typeParam StateT - The type of the state that was previously saved\n* @returns The previous saved state from the last invocation of the current thread\n*\n* @example\n* ```typescript\n* const previousState = getPreviousState<{ counter: number }>();\n* const newCount = (previousState?.counter ?? 0) + 1;\n* ```\n* @category Functional API\n*/\nfunction getPreviousState() {\n\treturn _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_8__.AsyncLocalStorageProviderSingleton.getRunnableConfig().configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_1__.CONFIG_KEY_PREVIOUS_STATE];\n}\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9mdW5jL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRDtBQUN3QztBQUNBO0FBQy9CO0FBQ2hCO0FBQ29CO0FBQ3ZCO0FBQ29CO0FBQ2dCOztBQUVoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxrQkFBa0I7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxtQkFBbUI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxTQUFTLGNBQWM7QUFDdkIsS0FBSyxtRUFBd0IsVUFBVSw4REFBbUI7QUFDMUQ7QUFDQTtBQUNBLGdFQUFnRTtBQUNoRTtBQUNBO0FBQ0EsU0FBUyxxREFBSTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsK0JBQStCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsaUJBQWlCO0FBQ2xFLEdBQUcsc0NBQXNDO0FBQ3pDO0FBQ0E7QUFDQSxPQUFPLHdCQUF3QjtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxHQUFHLHdCQUF3QjtBQUMzQjtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MseUJBQXlCO0FBQzdEO0FBQ0EsY0FBYyxjQUFjO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLFdBQVcsbUJBQW1CO0FBQzlCLFdBQVcsY0FBYztBQUN6QixXQUFXLHFCQUFxQjtBQUNoQztBQUNBO0FBQ0EsaURBQWlEO0FBQ2pELDZCQUE2QixNQUFNO0FBQ25DLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLHFCQUFxQjtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLCtCQUErQjtBQUMxQyxXQUFXLGNBQWM7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSx1Q0FBdUMsV0FBVyxFQUFFLE1BQU07QUFDMUQsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3Qyw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLCtCQUErQjtBQUMxQyxXQUFXLGNBQWM7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEMsc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxtQ0FBbUM7QUFDNUM7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEtBQUssbUVBQXdCLFVBQVUsOERBQW1CO0FBQzFEO0FBQ0EsZUFBZSx5RUFBd0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHVEQUFnQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRiw0QkFBNEIsdURBQWdCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLDRCQUE0Qix1REFBVTtBQUN0QztBQUNBLGFBQWEsZ0RBQUs7QUFDbEIsYUFBYSxnREFBSztBQUNsQixnQkFBZ0IsMERBQVk7QUFDNUIsWUFBWSw4Q0FBRztBQUNmLFVBQVUseURBQVc7QUFDckI7QUFDQSxHQUFHO0FBQ0gsWUFBWSxtREFBUTtBQUNwQixVQUFVLHlEQUFXO0FBQ3JCO0FBQ0EsR0FBRyxJQUFJLHFEQUFVO0FBQ2pCLEVBQUU7QUFDRixZQUFZLG9EQUFNO0FBQ2xCO0FBQ0E7QUFDQSxXQUFXLHdCQUF3QjtBQUNuQztBQUNBLElBQUksZ0RBQUssT0FBTyx3RUFBYztBQUM5QixJQUFJLDhDQUFHLE9BQU8sOERBQVM7QUFDdkIsSUFBSSxtREFBUSxPQUFPLDhEQUFTO0FBQzVCLEdBQUc7QUFDSCxpQkFBaUIsZ0RBQUs7QUFDdEIsa0JBQWtCLDhDQUFHO0FBQ3JCLGtCQUFrQiw4Q0FBRztBQUNyQjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxvQ0FBb0MsYUFBYTtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyx1QkFBdUI7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLGlCQUFpQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwwRkFBa0Msb0NBQW9DLG9FQUF5QjtBQUN2Rzs7QUFFQTtBQUM4QztBQUM5QyIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvZnVuYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBMYXN0VmFsdWUgfSBmcm9tIFwiLi4vY2hhbm5lbHMvbGFzdF92YWx1ZS5qc1wiO1xuaW1wb3J0IHsgQ09ORklHX0tFWV9QUkVWSU9VU19TVEFURSwgRU5ELCBQUkVWSU9VUywgU1RBUlQsIFRBR19ISURERU4gfSBmcm9tIFwiLi4vY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBSdW5uYWJsZUNhbGxhYmxlLCBpc0FzeW5jR2VuZXJhdG9yRnVuY3Rpb24sIGlzR2VuZXJhdG9yRnVuY3Rpb24gfSBmcm9tIFwiLi4vdXRpbHMuanNcIjtcbmltcG9ydCB7IENoYW5uZWxXcml0ZSwgUEFTU1RIUk9VR0ggfSBmcm9tIFwiLi4vcHJlZ2VsL3dyaXRlLmpzXCI7XG5pbXBvcnQgeyBQcmVnZWxOb2RlIH0gZnJvbSBcIi4uL3ByZWdlbC9yZWFkLmpzXCI7XG5pbXBvcnQgeyBjYWxsLCBnZXRSdW5uYWJsZUZvckVudHJ5cG9pbnQgfSBmcm9tIFwiLi4vcHJlZ2VsL2NhbGwuanNcIjtcbmltcG9ydCB7IFByZWdlbCB9IGZyb20gXCIuLi9wcmVnZWwvaW5kZXguanNcIjtcbmltcG9ydCB7IEVwaGVtZXJhbFZhbHVlIH0gZnJvbSBcIi4uL2NoYW5uZWxzL2VwaGVtZXJhbF92YWx1ZS5qc1wiO1xuaW1wb3J0IHsgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvc2luZ2xldG9uc1wiO1xuXG4vLyNyZWdpb24gc3JjL2Z1bmMvaW5kZXgudHNcbi8qKlxuKiBEZWZpbmUgYSBMYW5nR3JhcGggdGFzayB1c2luZyB0aGUgYHRhc2tgIGZ1bmN0aW9uLlxuKlxuKiBUYXNrcyBjYW4gb25seSBiZSBjYWxsZWQgZnJvbSB3aXRoaW4gYW4ge0BsaW5rIGVudHJ5cG9pbnR9IG9yIGZyb20gd2l0aGluIGEgU3RhdGVHcmFwaC5cbiogQSB0YXNrIGNhbiBiZSBjYWxsZWQgbGlrZSBhIHJlZ3VsYXIgZnVuY3Rpb24gd2l0aCB0aGUgZm9sbG93aW5nIGRpZmZlcmVuY2VzOlxuKlxuKiAtIFdoZW4gYSBjaGVja3BvaW50ZXIgaXMgZW5hYmxlZCwgdGhlIGZ1bmN0aW9uIGlucHV0cyBhbmQgb3V0cHV0cyBtdXN0IGJlIHNlcmlhbGl6YWJsZS5cbiogLSBUaGUgd3JhcHBlZCBmdW5jdGlvbiBjYW4gb25seSBiZSBjYWxsZWQgZnJvbSB3aXRoaW4gYW4gZW50cnlwb2ludCBvciBTdGF0ZUdyYXBoLlxuKiAtIENhbGxpbmcgdGhlIGZ1bmN0aW9uIHByb2R1Y2VzIGEgcHJvbWlzZS4gVGhpcyBtYWtlcyBpdCBlYXN5IHRvIHBhcmFsbGVsaXplIHRhc2tzLlxuKlxuKiBAdHlwZVBhcmFtIEFyZ3NUIC0gVGhlIHR5cGUgb2YgYXJndW1lbnRzIHRoZSB0YXNrIGZ1bmN0aW9uIGFjY2VwdHNcbiogQHR5cGVQYXJhbSBPdXRwdXRUIC0gVGhlIHR5cGUgb2YgdmFsdWUgdGhlIHRhc2sgZnVuY3Rpb24gcmV0dXJuc1xuKiBAcGFyYW0gb3B0aW9uc09yTmFtZSAtIEVpdGhlciBhbiB7QGxpbmsgVGFza09wdGlvbnN9IG9iamVjdCwgb3IgYSBzdHJpbmcgZm9yIHRoZSBuYW1lIG9mIHRoZSB0YXNrXG4qIEBwYXJhbSBmdW5jIC0gVGhlIGZ1bmN0aW9uIHRoYXQgZXhlY3V0ZXMgdGhpcyB0YXNrXG4qIEByZXR1cm5zIEEgcHJveHkgZnVuY3Rpb24gdGhhdCBhY2NlcHRzIHRoZSBzYW1lIGFyZ3VtZW50cyBhcyB0aGUgb3JpZ2luYWwgYW5kIGFsd2F5cyByZXR1cm5zIHRoZSByZXN1bHQgYXMgYSBQcm9taXNlXG4qXG4qIEBleGFtcGxlIGJhc2ljIGV4YW1wbGVcbiogYGBgdHlwZXNjcmlwdFxuKiBjb25zdCBhZGRPbmUgPSB0YXNrKFwiYWRkXCIsIGFzeW5jIChhOiBudW1iZXIpID0+IGEgKyAxKTtcbipcbiogY29uc3Qgd29ya2Zsb3cgPSBlbnRyeXBvaW50KFwiZXhhbXBsZVwiLCBhc3luYyAobnVtYmVyczogbnVtYmVyW10pID0+IHtcbiogICBjb25zdCBwcm9taXNlcyA9IG51bWJlcnMubWFwKG4gPT4gYWRkT25lKG4pKTtcbiogICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuKiAgIHJldHVybiByZXN1bHRzO1xuKiB9KTtcbipcbiogLy8gQ2FsbCB0aGUgZW50cnlwb2ludFxuKiBhd2FpdCB3b3JrZmxvdy5pbnZva2UoWzEsIDIsIDNdKTsgLy8gUmV0dXJucyBbMiwgMywgNF1cbiogYGBgXG4qXG4qIEBleGFtcGxlIHVzaW5nIGEgcmV0cnkgcG9saWN5XG4qIGBgYHR5cGVzY3JpcHRcbiogY29uc3QgYWRkT25lID0gdGFzayh7XG4qICAgICBuYW1lOiBcImFkZFwiLFxuKiAgICAgcmV0cnk6IHsgbWF4QXR0ZW1wdHM6IDMgfVxuKiAgIH0sXG4qICAgYXN5bmMgKGE6IG51bWJlcikgPT4gYSArIDFcbiogKTtcbipcbiogY29uc3Qgd29ya2Zsb3cgPSBlbnRyeXBvaW50KFwiZXhhbXBsZVwiLCBhc3luYyAobnVtYmVyczogbnVtYmVyW10pID0+IHtcbiogICBjb25zdCBwcm9taXNlcyA9IG51bWJlcnMubWFwKG4gPT4gYWRkT25lKG4pKTtcbiogICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuKiAgIHJldHVybiByZXN1bHRzO1xuKiB9KTtcbiogYGBgXG4qIEBjYXRlZ29yeSBGdW5jdGlvbmFsIEFQSVxuKi9cbmZ1bmN0aW9uIHRhc2sob3B0aW9uc09yTmFtZSwgZnVuYykge1xuXHRjb25zdCBvcHRpb25zID0gdHlwZW9mIG9wdGlvbnNPck5hbWUgPT09IFwic3RyaW5nXCIgPyB7XG5cdFx0bmFtZTogb3B0aW9uc09yTmFtZSxcblx0XHRyZXRyeTogdm9pZCAwLFxuXHRcdGNhY2hlUG9saWN5OiB2b2lkIDBcblx0fSA6IG9wdGlvbnNPck5hbWU7XG5cdGNvbnN0IHsgbmFtZSwgcmV0cnkgfSA9IG9wdGlvbnM7XG5cdGlmIChpc0FzeW5jR2VuZXJhdG9yRnVuY3Rpb24oZnVuYykgfHwgaXNHZW5lcmF0b3JGdW5jdGlvbihmdW5jKSkgdGhyb3cgbmV3IEVycm9yKFwiR2VuZXJhdG9ycyBhcmUgZGlzYWxsb3dlZCBhcyB0YXNrcy4gRm9yIHN0cmVhbWluZyByZXNwb25zZXMsIHVzZSBjb25maWcud3JpdGUuXCIpO1xuXHRjb25zdCBjYWNoZVBvbGljeSA9IG9wdGlvbnMuY2FjaGVQb2xpY3kgPz8gKFwiY2FjaGVcIiBpbiBvcHRpb25zID8gb3B0aW9ucy5jYWNoZSA6IHZvaWQgMCk7XG5cdGxldCBjYWNoZTtcblx0aWYgKHR5cGVvZiBjYWNoZVBvbGljeSA9PT0gXCJib29sZWFuXCIpIGNhY2hlID0gY2FjaGVQb2xpY3kgPyB7fSA6IHZvaWQgMDtcblx0ZWxzZSBjYWNoZSA9IGNhY2hlUG9saWN5O1xuXHRyZXR1cm4gKC4uLmFyZ3MpID0+IHtcblx0XHRyZXR1cm4gY2FsbCh7XG5cdFx0XHRmdW5jLFxuXHRcdFx0bmFtZSxcblx0XHRcdHJldHJ5LFxuXHRcdFx0Y2FjaGVcblx0XHR9LCAuLi5hcmdzKTtcblx0fTtcbn1cbi8qKlxuKiBEZWZpbmUgYSBMYW5nR3JhcGggd29ya2Zsb3cgdXNpbmcgdGhlIGBlbnRyeXBvaW50YCBmdW5jdGlvbi5cbipcbiogIyMjIEZ1bmN0aW9uIHNpZ25hdHVyZVxuKlxuKiBUaGUgd3JhcHBlZCBmdW5jdGlvbiBtdXN0IGFjY2VwdCBhdCBtb3N0ICoqdHdvIHBhcmFtZXRlcnMqKi4gVGhlIGZpcnN0IHBhcmFtZXRlclxuKiBpcyB0aGUgaW5wdXQgdG8gdGhlIGZ1bmN0aW9uLiBUaGUgc2Vjb25kIChvcHRpb25hbCkgcGFyYW1ldGVyIGlzIGFcbioge0BsaW5rIExhbmdHcmFwaFJ1bm5hYmxlQ29uZmlnfSBvYmplY3QuIElmIHlvdSB3aXNoIHRvIHBhc3MgbXVsdGlwbGUgcGFyYW1ldGVycyB0b1xuKiB0aGUgZnVuY3Rpb24sIHlvdSBjYW4gcGFzcyB0aGVtIGFzIGFuIG9iamVjdC5cbipcbiogIyMjIEhlbHBlciBmdW5jdGlvbnNcbipcbiogIyMjIyBTdHJlYW1pbmdcbiogVG8gd3JpdGUgZGF0YSB0byB0aGUgXCJjdXN0b21cIiBzdHJlYW0sIHVzZSB0aGUge0BsaW5rIGdldFdyaXRlcn0gZnVuY3Rpb24sIG9yIHRoZVxuKiB7QGxpbmsgTGFuZ0dyYXBoUnVubmFibGVDb25maWcud3JpdGVyfSBwcm9wZXJ0eS5cbipcbiogIyMjIyBTdGF0ZSBtYW5hZ2VtZW50XG4qIFRoZSB7QGxpbmsgZ2V0UHJldmlvdXNTdGF0ZX0gZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gYWNjZXNzIHRoZSBwcmV2aW91cyBzdGF0ZVxuKiB0aGF0IHdhcyByZXR1cm5lZCBmcm9tIHRoZSBsYXN0IGludm9jYXRpb24gb2YgdGhlIGVudHJ5cG9pbnQgb24gdGhlIHNhbWUgdGhyZWFkIGlkLlxuKlxuKiBJZiB5b3Ugd2lzaCB0byBzYXZlIHN0YXRlIG90aGVyIHRoYW4gdGhlIHJldHVybiB2YWx1ZSwgeW91IGNhbiB1c2UgdGhlXG4qIHtAbGluayBlbnRyeXBvaW50LmZpbmFsfSBmdW5jdGlvbi5cbipcbiogQHR5cGVQYXJhbSBJbnB1dFQgLSBUaGUgdHlwZSBvZiBpbnB1dCB0aGUgZW50cnlwb2ludCBhY2NlcHRzXG4qIEB0eXBlUGFyYW0gT3V0cHV0VCAtIFRoZSB0eXBlIG9mIG91dHB1dCB0aGUgZW50cnlwb2ludCBwcm9kdWNlc1xuKiBAcGFyYW0gb3B0aW9uc09yTmFtZSAtIEVpdGhlciBhbiB7QGxpbmsgRW50cnlwb2ludE9wdGlvbnN9IG9iamVjdCwgb3IgYSBzdHJpbmcgZm9yIHRoZSBuYW1lIG9mIHRoZSBlbnRyeXBvaW50XG4qIEBwYXJhbSBmdW5jIC0gVGhlIGZ1bmN0aW9uIHRoYXQgZXhlY3V0ZXMgdGhpcyBlbnRyeXBvaW50XG4qIEByZXR1cm5zIEEge0BsaW5rIFByZWdlbH0gaW5zdGFuY2UgdGhhdCBjYW4gYmUgcnVuIHRvIGV4ZWN1dGUgdGhlIHdvcmtmbG93XG4qXG4qIEBleGFtcGxlIFVzaW5nIGVudHJ5cG9pbnQgYW5kIHRhc2tzXG4qIGBgYHR5cGVzY3JpcHRcbiogaW1wb3J0IHsgdGFzaywgZW50cnlwb2ludCB9IGZyb20gXCJAbGFuZ2NoYWluL2xhbmdncmFwaFwiO1xuKiBpbXBvcnQgeyBNZW1vcnlTYXZlciB9IGZyb20gXCJAbGFuZ2NoYWluL2xhbmdncmFwaC1jaGVja3BvaW50XCI7XG4qIGltcG9ydCB7IGludGVycnVwdCwgQ29tbWFuZCB9IGZyb20gXCJAbGFuZ2NoYWluL2xhbmdncmFwaFwiO1xuKlxuKiBjb25zdCBjb21wb3NlRXNzYXkgPSB0YXNrKFwiY29tcG9zZVwiLCBhc3luYyAodG9waWM6IHN0cmluZykgPT4ge1xuKiAgIGF3YWl0IG5ldyBQcm9taXNlKHIgPT4gc2V0VGltZW91dChyLCAxMDAwKSk7IC8vIFNpbXVsYXRlIHNsb3cgb3BlcmF0aW9uXG4qICAgcmV0dXJuIGBBbiBlc3NheSBhYm91dCAke3RvcGljfWA7XG4qIH0pO1xuKlxuKiBjb25zdCByZXZpZXdXb3JrZmxvdyA9IGVudHJ5cG9pbnQoe1xuKiAgIG5hbWU6IFwicmV2aWV3XCIsXG4qICAgY2hlY2twb2ludGVyOiBuZXcgTWVtb3J5U2F2ZXIoKVxuKiB9LCBhc3luYyAodG9waWM6IHN0cmluZykgPT4ge1xuKiAgIGNvbnN0IGVzc2F5ID0gYXdhaXQgY29tcG9zZUVzc2F5KHRvcGljKTtcbiogICBjb25zdCBodW1hblJldmlldyA9IGF3YWl0IGludGVycnVwdCh7XG4qICAgICBxdWVzdGlvbjogXCJQbGVhc2UgcHJvdmlkZSBhIHJldmlld1wiLFxuKiAgICAgZXNzYXlcbiogICB9KTtcbiogICByZXR1cm4ge1xuKiAgICAgZXNzYXksXG4qICAgICByZXZpZXc6IGh1bWFuUmV2aWV3XG4qICAgfTtcbiogfSk7XG4qXG4qIC8vIEV4YW1wbGUgY29uZmlndXJhdGlvbiBmb3IgdGhlIHdvcmtmbG93XG4qIGNvbnN0IGNvbmZpZyA9IHtcbiogICBjb25maWd1cmFibGU6IHtcbiogICAgIHRocmVhZF9pZDogXCJzb21lX3RocmVhZFwiXG4qICAgfVxuKiB9O1xuKlxuKiAvLyBUb3BpYyBmb3IgdGhlIGVzc2F5XG4qIGNvbnN0IHRvcGljID0gXCJjYXRzXCI7XG4qXG4qIC8vIFN0cmVhbSB0aGUgd29ya2Zsb3cgdG8gZ2VuZXJhdGUgdGhlIGVzc2F5IGFuZCBhd2FpdCBodW1hbiByZXZpZXdcbiogZm9yIGF3YWl0IChjb25zdCByZXN1bHQgb2YgcmV2aWV3V29ya2Zsb3cuc3RyZWFtKHRvcGljLCBjb25maWcpKSB7XG4qICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiogfVxuKlxuKiAvLyBFeGFtcGxlIGh1bWFuIHJldmlldyBwcm92aWRlZCBhZnRlciB0aGUgaW50ZXJydXB0XG4qIGNvbnN0IGh1bWFuUmV2aWV3ID0gXCJUaGlzIGVzc2F5IGlzIGdyZWF0LlwiO1xuKlxuKiAvLyBSZXN1bWUgdGhlIHdvcmtmbG93IHdpdGggdGhlIHByb3ZpZGVkIGh1bWFuIHJldmlld1xuKiBmb3IgYXdhaXQgKGNvbnN0IHJlc3VsdCBvZiByZXZpZXdXb3JrZmxvdy5zdHJlYW0obmV3IENvbW1hbmQoeyByZXN1bWU6IGh1bWFuUmV2aWV3IH0pLCBjb25maWcpKSB7XG4qICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiogfVxuKiBgYGBcbipcbiogQGV4YW1wbGUgQWNjZXNzaW5nIHRoZSBwcmV2aW91cyByZXR1cm4gdmFsdWVcbiogYGBgdHlwZXNjcmlwdFxuKiBpbXBvcnQgeyBlbnRyeXBvaW50LCBnZXRQcmV2aW91c1N0YXRlIH0gZnJvbSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoXCI7XG4qIGltcG9ydCB7IE1lbW9yeVNhdmVyIH0gZnJvbSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoLWNoZWNrcG9pbnRcIjtcbipcbiogY29uc3QgYWNjdW11bGF0b3IgPSBlbnRyeXBvaW50KHtcbiogICBuYW1lOiBcImFjY3VtdWxhdG9yXCIsXG4qICAgY2hlY2twb2ludGVyOiBuZXcgTWVtb3J5U2F2ZXIoKVxuKiB9LCBhc3luYyAoaW5wdXQ6IHN0cmluZykgPT4ge1xuKiAgIGNvbnN0IHByZXZpb3VzID0gZ2V0UHJldmlvdXNTdGF0ZTxudW1iZXI+KCk7XG4qICAgcmV0dXJuIHByZXZpb3VzICE9PSB1bmRlZmluZWQgPyBgJHtwcmV2aW91cyB9ICR7aW5wdXR9YCA6IGlucHV0O1xuKiB9KTtcbipcbiogY29uc3QgY29uZmlnID0ge1xuKiAgIGNvbmZpZ3VyYWJsZToge1xuKiAgICAgdGhyZWFkX2lkOiBcInNvbWVfdGhyZWFkXCJcbiogICB9XG4qIH07XG4qIGF3YWl0IGFjY3VtdWxhdG9yLmludm9rZShcImhlbGxvXCIsIGNvbmZpZyk7IC8vIHJldHVybnMgXCJoZWxsb1wiXG4qIGF3YWl0IGFjY3VtdWxhdG9yLmludm9rZShcIndvcmxkXCIsIGNvbmZpZyk7IC8vIHJldHVybnMgXCJoZWxsbyB3b3JsZFwiXG4qIGBgYFxuKlxuKiBAZXhhbXBsZSBVc2luZyBlbnRyeXBvaW50LmZpbmFsIHRvIHNhdmUgYSB2YWx1ZVxuKiBgYGB0eXBlc2NyaXB0XG4qIGltcG9ydCB7IGVudHJ5cG9pbnQsIGdldFByZXZpb3VzU3RhdGUgfSBmcm9tIFwiQGxhbmdjaGFpbi9sYW5nZ3JhcGhcIjtcbiogaW1wb3J0IHsgTWVtb3J5U2F2ZXIgfSBmcm9tIFwiQGxhbmdjaGFpbi9sYW5nZ3JhcGgtY2hlY2twb2ludFwiO1xuKlxuKiBjb25zdCBteVdvcmtmbG93ID0gZW50cnlwb2ludCh7XG4qICAgbmFtZTogXCJhY2N1bXVsYXRvclwiLFxuKiAgIGNoZWNrcG9pbnRlcjogbmV3IE1lbW9yeVNhdmVyKClcbiogfSwgYXN5bmMgKG51bTogbnVtYmVyKSA9PiB7XG4qICAgY29uc3QgcHJldmlvdXMgPSBnZXRQcmV2aW91c1N0YXRlPG51bWJlcj4oKTtcbipcbiogICAvLyBUaGlzIHdpbGwgcmV0dXJuIHRoZSBwcmV2aW91cyB2YWx1ZSB0byB0aGUgY2FsbGVyLCBzYXZpbmdcbiogICAvLyAyICogbnVtIHRvIHRoZSBjaGVja3BvaW50LCB3aGljaCB3aWxsIGJlIHVzZWQgaW4gdGhlIG5leHQgaW52b2NhdGlvblxuKiAgIC8vIGZvciB0aGUgYHByZXZpb3VzYCBwYXJhbWV0ZXIuXG4qICAgcmV0dXJuIGVudHJ5cG9pbnQuZmluYWwoe1xuKiAgICAgdmFsdWU6IHByZXZpb3VzID8/IDAsXG4qICAgICBzYXZlOiAyICogbnVtXG4qICAgfSk7XG4qIH0pO1xuKlxuKiBjb25zdCBjb25maWcgPSB7XG4qICAgY29uZmlndXJhYmxlOiB7XG4qICAgICB0aHJlYWRfaWQ6IFwic29tZV90aHJlYWRcIlxuKiAgIH1cbiogfTtcbipcbiogYXdhaXQgbXlXb3JrZmxvdy5pbnZva2UoMywgY29uZmlnKTsgLy8gMCAocHJldmlvdXMgd2FzIHVuZGVmaW5lZClcbiogYXdhaXQgbXlXb3JrZmxvdy5pbnZva2UoMSwgY29uZmlnKTsgLy8gNiAocHJldmlvdXMgd2FzIDMgKiAyIGZyb20gdGhlIHByZXZpb3VzIGludm9jYXRpb24pXG4qIGBgYFxuKiBAY2F0ZWdvcnkgRnVuY3Rpb25hbCBBUElcbiovXG5jb25zdCBlbnRyeXBvaW50ID0gZnVuY3Rpb24gZW50cnlwb2ludCQxKG9wdGlvbnNPck5hbWUsIGZ1bmMpIHtcblx0Y29uc3QgeyBuYW1lLCBjaGVja3BvaW50ZXIsIHN0b3JlLCBjYWNoZSB9ID0gdHlwZW9mIG9wdGlvbnNPck5hbWUgPT09IFwic3RyaW5nXCIgPyB7XG5cdFx0bmFtZTogb3B0aW9uc09yTmFtZSxcblx0XHRjaGVja3BvaW50ZXI6IHZvaWQgMCxcblx0XHRzdG9yZTogdm9pZCAwXG5cdH0gOiBvcHRpb25zT3JOYW1lO1xuXHRpZiAoaXNBc3luY0dlbmVyYXRvckZ1bmN0aW9uKGZ1bmMpIHx8IGlzR2VuZXJhdG9yRnVuY3Rpb24oZnVuYykpIHRocm93IG5ldyBFcnJvcihcIkdlbmVyYXRvcnMgYXJlIGRpc2FsbG93ZWQgYXMgZW50cnlwb2ludHMuIEZvciBzdHJlYW1pbmcgcmVzcG9uc2VzLCB1c2UgY29uZmlnLndyaXRlLlwiKTtcblx0Y29uc3Qgc3RyZWFtTW9kZSA9IFwidXBkYXRlc1wiO1xuXHRjb25zdCBib3VuZCA9IGdldFJ1bm5hYmxlRm9yRW50cnlwb2ludChuYW1lLCBmdW5jKTtcblx0ZnVuY3Rpb24gaXNFbnRyeXBvaW50RmluYWwodmFsdWUpIHtcblx0XHRyZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9PSBudWxsICYmIFwiX19sZ190eXBlXCIgaW4gdmFsdWUgJiYgdmFsdWUuX19sZ190eXBlID09PSBcIl9fcHJlZ2VsX2ZpbmFsXCI7XG5cdH1cblx0Y29uc3QgcGx1Y2tSZXR1cm5WYWx1ZSA9IG5ldyBSdW5uYWJsZUNhbGxhYmxlKHtcblx0XHRuYW1lOiBcInBsdWNrUmV0dXJuVmFsdWVcIixcblx0XHRmdW5jOiAodmFsdWUpID0+IHtcblx0XHRcdHJldHVybiBpc0VudHJ5cG9pbnRGaW5hbCh2YWx1ZSkgPyB2YWx1ZS52YWx1ZSA6IHZhbHVlO1xuXHRcdH1cblx0fSk7XG5cdGNvbnN0IHBsdWNrU2F2ZVZhbHVlID0gbmV3IFJ1bm5hYmxlQ2FsbGFibGUoe1xuXHRcdG5hbWU6IFwicGx1Y2tTYXZlVmFsdWVcIixcblx0XHRmdW5jOiAodmFsdWUpID0+IHtcblx0XHRcdHJldHVybiBpc0VudHJ5cG9pbnRGaW5hbCh2YWx1ZSkgPyB2YWx1ZS5zYXZlIDogdmFsdWU7XG5cdFx0fVxuXHR9KTtcblx0Y29uc3QgZW50cnlwb2ludE5vZGUgPSBuZXcgUHJlZ2VsTm9kZSh7XG5cdFx0Ym91bmQsXG5cdFx0dHJpZ2dlcnM6IFtTVEFSVF0sXG5cdFx0Y2hhbm5lbHM6IFtTVEFSVF0sXG5cdFx0d3JpdGVyczogW25ldyBDaGFubmVsV3JpdGUoW3tcblx0XHRcdGNoYW5uZWw6IEVORCxcblx0XHRcdHZhbHVlOiBQQVNTVEhST1VHSCxcblx0XHRcdG1hcHBlcjogcGx1Y2tSZXR1cm5WYWx1ZVxuXHRcdH0sIHtcblx0XHRcdGNoYW5uZWw6IFBSRVZJT1VTLFxuXHRcdFx0dmFsdWU6IFBBU1NUSFJPVUdILFxuXHRcdFx0bWFwcGVyOiBwbHVja1NhdmVWYWx1ZVxuXHRcdH1dLCBbVEFHX0hJRERFTl0pXVxuXHR9KTtcblx0cmV0dXJuIG5ldyBQcmVnZWwoe1xuXHRcdG5hbWUsXG5cdFx0Y2hlY2twb2ludGVyLFxuXHRcdG5vZGVzOiB7IFtuYW1lXTogZW50cnlwb2ludE5vZGUgfSxcblx0XHRjaGFubmVsczoge1xuXHRcdFx0W1NUQVJUXTogbmV3IEVwaGVtZXJhbFZhbHVlKCksXG5cdFx0XHRbRU5EXTogbmV3IExhc3RWYWx1ZSgpLFxuXHRcdFx0W1BSRVZJT1VTXTogbmV3IExhc3RWYWx1ZSgpXG5cdFx0fSxcblx0XHRpbnB1dENoYW5uZWxzOiBTVEFSVCxcblx0XHRvdXRwdXRDaGFubmVsczogRU5ELFxuXHRcdHN0cmVhbUNoYW5uZWxzOiBFTkQsXG5cdFx0c3RyZWFtTW9kZSxcblx0XHRzdG9yZSxcblx0XHRjYWNoZVxuXHR9KTtcbn07XG5lbnRyeXBvaW50LmZpbmFsID0gZnVuY3Rpb24gZmluYWwoeyB2YWx1ZSwgc2F2ZSB9KSB7XG5cdHJldHVybiB7XG5cdFx0dmFsdWUsXG5cdFx0c2F2ZSxcblx0XHRfX2xnX3R5cGU6IFwiX19wcmVnZWxfZmluYWxcIlxuXHR9O1xufTtcbi8qKlxuKiBBIGhlbHBlciB1dGlsaXR5IGZ1bmN0aW9uIGZvciB1c2Ugd2l0aCB0aGUgZnVuY3Rpb25hbCBBUEkgdGhhdCByZXR1cm5zIHRoZSBwcmV2aW91c1xuKiBzdGF0ZSBmcm9tIHRoZSBjaGVja3BvaW50IGZyb20gdGhlIGxhc3QgaW52b2NhdGlvbiBvZiB0aGUgY3VycmVudCB0aHJlYWQuXG4qXG4qIFRoaXMgZnVuY3Rpb24gYWxsb3dzIHdvcmtmbG93cyB0byBhY2Nlc3Mgc3RhdGUgdGhhdCB3YXMgc2F2ZWQgaW4gcHJldmlvdXMgcnVuc1xuKiB1c2luZyB7QGxpbmsgZW50cnlwb2ludC5maW5hbH0uXG4qXG4qIEB0eXBlUGFyYW0gU3RhdGVUIC0gVGhlIHR5cGUgb2YgdGhlIHN0YXRlIHRoYXQgd2FzIHByZXZpb3VzbHkgc2F2ZWRcbiogQHJldHVybnMgVGhlIHByZXZpb3VzIHNhdmVkIHN0YXRlIGZyb20gdGhlIGxhc3QgaW52b2NhdGlvbiBvZiB0aGUgY3VycmVudCB0aHJlYWRcbipcbiogQGV4YW1wbGVcbiogYGBgdHlwZXNjcmlwdFxuKiBjb25zdCBwcmV2aW91c1N0YXRlID0gZ2V0UHJldmlvdXNTdGF0ZTx7IGNvdW50ZXI6IG51bWJlciB9PigpO1xuKiBjb25zdCBuZXdDb3VudCA9IChwcmV2aW91c1N0YXRlPy5jb3VudGVyID8/IDApICsgMTtcbiogYGBgXG4qIEBjYXRlZ29yeSBGdW5jdGlvbmFsIEFQSVxuKi9cbmZ1bmN0aW9uIGdldFByZXZpb3VzU3RhdGUoKSB7XG5cdHJldHVybiBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLmdldFJ1bm5hYmxlQ29uZmlnKCkuY29uZmlndXJhYmxlPy5bQ09ORklHX0tFWV9QUkVWSU9VU19TVEFURV07XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZW50cnlwb2ludCwgZ2V0UHJldmlvdXNTdGF0ZSwgdGFzayB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/func/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/graph/annotation.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/graph/annotation.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Annotation: () => (/* binding */ Annotation),\n/* harmony export */   AnnotationRoot: () => (/* binding */ AnnotationRoot),\n/* harmony export */   getChannel: () => (/* binding */ getChannel)\n/* harmony export */ });\n/* harmony import */ var _channels_binop_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../channels/binop.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/binop.js\");\n/* harmony import */ var _channels_last_value_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../channels/last_value.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/last_value.js\");\n\n\n\n//#region src/graph/annotation.ts\n/**\n* Should not be instantiated directly. See {@link Annotation}.\n*/\nvar AnnotationRoot = class {\n\tlc_graph_name = \"AnnotationRoot\";\n\tspec;\n\tconstructor(s) {\n\t\tthis.spec = s;\n\t}\n};\n/**\n* Helper that instantiates channels within a StateGraph state.\n*\n* Can be used as a field in an {@link Annotation.Root} wrapper in one of two ways:\n* 1. **Directly**: Creates a channel that stores the most recent value returned from a node.\n* 2. **With a reducer**: Creates a channel that applies the reducer on a node's return value.\n*\n* @example\n* ```ts\n* import { StateGraph, Annotation } from \"@langchain/langgraph\";\n*\n* // Define a state with a single string key named \"currentOutput\"\n* const SimpleAnnotation = Annotation.Root({\n*   currentOutput: Annotation<string>,\n* });\n*\n* const graphBuilder = new StateGraph(SimpleAnnotation);\n*\n* // A node in the graph that returns an object with a \"currentOutput\" key\n* // replaces the value in the state. You can get the state type as shown below:\n* const myNode = (state: typeof SimpleAnnotation.State) => {\n*   return {\n*     currentOutput: \"some_new_value\",\n*   };\n* }\n*\n* const graph = graphBuilder\n*   .addNode(\"myNode\", myNode)\n*   ...\n*   .compile();\n* ```\n*\n* @example\n* ```ts\n* import { type BaseMessage, AIMessage } from \"@langchain/core/messages\";\n* import { StateGraph, Annotation } from \"@langchain/langgraph\";\n*\n* // Define a state with a single key named \"messages\" that will\n* // combine a returned BaseMessage or arrays of BaseMessages\n* const AnnotationWithReducer = Annotation.Root({\n*   messages: Annotation<BaseMessage[]>({\n*     // Different types are allowed for updates\n*     reducer: (left: BaseMessage[], right: BaseMessage | BaseMessage[]) => {\n*       if (Array.isArray(right)) {\n*         return left.concat(right);\n*       }\n*       return left.concat([right]);\n*     },\n*     default: () => [],\n*   }),\n* });\n*\n* const graphBuilder = new StateGraph(AnnotationWithReducer);\n*\n* // A node in the graph that returns an object with a \"messages\" key\n* // will update the state by combining the existing value with the returned one.\n* const myNode = (state: typeof AnnotationWithReducer.State) => {\n*   return {\n*     messages: [new AIMessage(\"Some new response\")],\n*   };\n* };\n*\n* const graph = graphBuilder\n*   .addNode(\"myNode\", myNode)\n*   ...\n*   .compile();\n* ```\n* @namespace\n* @property Root\n* Helper function that instantiates a StateGraph state. See {@link Annotation} for usage.\n*/\nconst Annotation = function(annotation) {\n\tif (annotation) return getChannel(annotation);\n\telse return new _channels_last_value_js__WEBPACK_IMPORTED_MODULE_1__.LastValue();\n};\nAnnotation.Root = (sd) => new AnnotationRoot(sd);\nfunction getChannel(reducer) {\n\tif (typeof reducer === \"object\" && reducer && \"reducer\" in reducer && reducer.reducer) return new _channels_binop_js__WEBPACK_IMPORTED_MODULE_0__.BinaryOperatorAggregate(reducer.reducer, reducer.default);\n\tif (typeof reducer === \"object\" && reducer && \"value\" in reducer && reducer.value) return new _channels_binop_js__WEBPACK_IMPORTED_MODULE_0__.BinaryOperatorAggregate(reducer.value, reducer.default);\n\treturn new _channels_last_value_js__WEBPACK_IMPORTED_MODULE_1__.LastValue();\n}\n\n//#endregion\n\n//# sourceMappingURL=annotation.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9ncmFwaC9hbm5vdGF0aW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQStEO0FBQ1Q7O0FBRXREO0FBQ0E7QUFDQSw0Q0FBNEMsaUJBQWlCO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsdUJBQXVCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHlCQUF5QjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsOEJBQThCO0FBQ3pDLFdBQVcseUJBQXlCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxrQkFBa0I7QUFDL0U7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDhEQUFTO0FBQzFCO0FBQ0E7QUFDQTtBQUNBLG1HQUFtRyx1RUFBdUI7QUFDMUgsK0ZBQStGLHVFQUF1QjtBQUN0SCxZQUFZLDhEQUFTO0FBQ3JCOztBQUVBO0FBQ2tEO0FBQ2xEIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9ncmFwaC9hbm5vdGF0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJpbmFyeU9wZXJhdG9yQWdncmVnYXRlIH0gZnJvbSBcIi4uL2NoYW5uZWxzL2Jpbm9wLmpzXCI7XG5pbXBvcnQgeyBMYXN0VmFsdWUgfSBmcm9tIFwiLi4vY2hhbm5lbHMvbGFzdF92YWx1ZS5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL2dyYXBoL2Fubm90YXRpb24udHNcbi8qKlxuKiBTaG91bGQgbm90IGJlIGluc3RhbnRpYXRlZCBkaXJlY3RseS4gU2VlIHtAbGluayBBbm5vdGF0aW9ufS5cbiovXG52YXIgQW5ub3RhdGlvblJvb3QgPSBjbGFzcyB7XG5cdGxjX2dyYXBoX25hbWUgPSBcIkFubm90YXRpb25Sb290XCI7XG5cdHNwZWM7XG5cdGNvbnN0cnVjdG9yKHMpIHtcblx0XHR0aGlzLnNwZWMgPSBzO1xuXHR9XG59O1xuLyoqXG4qIEhlbHBlciB0aGF0IGluc3RhbnRpYXRlcyBjaGFubmVscyB3aXRoaW4gYSBTdGF0ZUdyYXBoIHN0YXRlLlxuKlxuKiBDYW4gYmUgdXNlZCBhcyBhIGZpZWxkIGluIGFuIHtAbGluayBBbm5vdGF0aW9uLlJvb3R9IHdyYXBwZXIgaW4gb25lIG9mIHR3byB3YXlzOlxuKiAxLiAqKkRpcmVjdGx5Kio6IENyZWF0ZXMgYSBjaGFubmVsIHRoYXQgc3RvcmVzIHRoZSBtb3N0IHJlY2VudCB2YWx1ZSByZXR1cm5lZCBmcm9tIGEgbm9kZS5cbiogMi4gKipXaXRoIGEgcmVkdWNlcioqOiBDcmVhdGVzIGEgY2hhbm5lbCB0aGF0IGFwcGxpZXMgdGhlIHJlZHVjZXIgb24gYSBub2RlJ3MgcmV0dXJuIHZhbHVlLlxuKlxuKiBAZXhhbXBsZVxuKiBgYGB0c1xuKiBpbXBvcnQgeyBTdGF0ZUdyYXBoLCBBbm5vdGF0aW9uIH0gZnJvbSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoXCI7XG4qXG4qIC8vIERlZmluZSBhIHN0YXRlIHdpdGggYSBzaW5nbGUgc3RyaW5nIGtleSBuYW1lZCBcImN1cnJlbnRPdXRwdXRcIlxuKiBjb25zdCBTaW1wbGVBbm5vdGF0aW9uID0gQW5ub3RhdGlvbi5Sb290KHtcbiogICBjdXJyZW50T3V0cHV0OiBBbm5vdGF0aW9uPHN0cmluZz4sXG4qIH0pO1xuKlxuKiBjb25zdCBncmFwaEJ1aWxkZXIgPSBuZXcgU3RhdGVHcmFwaChTaW1wbGVBbm5vdGF0aW9uKTtcbipcbiogLy8gQSBub2RlIGluIHRoZSBncmFwaCB0aGF0IHJldHVybnMgYW4gb2JqZWN0IHdpdGggYSBcImN1cnJlbnRPdXRwdXRcIiBrZXlcbiogLy8gcmVwbGFjZXMgdGhlIHZhbHVlIGluIHRoZSBzdGF0ZS4gWW91IGNhbiBnZXQgdGhlIHN0YXRlIHR5cGUgYXMgc2hvd24gYmVsb3c6XG4qIGNvbnN0IG15Tm9kZSA9IChzdGF0ZTogdHlwZW9mIFNpbXBsZUFubm90YXRpb24uU3RhdGUpID0+IHtcbiogICByZXR1cm4ge1xuKiAgICAgY3VycmVudE91dHB1dDogXCJzb21lX25ld192YWx1ZVwiLFxuKiAgIH07XG4qIH1cbipcbiogY29uc3QgZ3JhcGggPSBncmFwaEJ1aWxkZXJcbiogICAuYWRkTm9kZShcIm15Tm9kZVwiLCBteU5vZGUpXG4qICAgLi4uXG4qICAgLmNvbXBpbGUoKTtcbiogYGBgXG4qXG4qIEBleGFtcGxlXG4qIGBgYHRzXG4qIGltcG9ydCB7IHR5cGUgQmFzZU1lc3NhZ2UsIEFJTWVzc2FnZSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvbWVzc2FnZXNcIjtcbiogaW1wb3J0IHsgU3RhdGVHcmFwaCwgQW5ub3RhdGlvbiB9IGZyb20gXCJAbGFuZ2NoYWluL2xhbmdncmFwaFwiO1xuKlxuKiAvLyBEZWZpbmUgYSBzdGF0ZSB3aXRoIGEgc2luZ2xlIGtleSBuYW1lZCBcIm1lc3NhZ2VzXCIgdGhhdCB3aWxsXG4qIC8vIGNvbWJpbmUgYSByZXR1cm5lZCBCYXNlTWVzc2FnZSBvciBhcnJheXMgb2YgQmFzZU1lc3NhZ2VzXG4qIGNvbnN0IEFubm90YXRpb25XaXRoUmVkdWNlciA9IEFubm90YXRpb24uUm9vdCh7XG4qICAgbWVzc2FnZXM6IEFubm90YXRpb248QmFzZU1lc3NhZ2VbXT4oe1xuKiAgICAgLy8gRGlmZmVyZW50IHR5cGVzIGFyZSBhbGxvd2VkIGZvciB1cGRhdGVzXG4qICAgICByZWR1Y2VyOiAobGVmdDogQmFzZU1lc3NhZ2VbXSwgcmlnaHQ6IEJhc2VNZXNzYWdlIHwgQmFzZU1lc3NhZ2VbXSkgPT4ge1xuKiAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyaWdodCkpIHtcbiogICAgICAgICByZXR1cm4gbGVmdC5jb25jYXQocmlnaHQpO1xuKiAgICAgICB9XG4qICAgICAgIHJldHVybiBsZWZ0LmNvbmNhdChbcmlnaHRdKTtcbiogICAgIH0sXG4qICAgICBkZWZhdWx0OiAoKSA9PiBbXSxcbiogICB9KSxcbiogfSk7XG4qXG4qIGNvbnN0IGdyYXBoQnVpbGRlciA9IG5ldyBTdGF0ZUdyYXBoKEFubm90YXRpb25XaXRoUmVkdWNlcik7XG4qXG4qIC8vIEEgbm9kZSBpbiB0aGUgZ3JhcGggdGhhdCByZXR1cm5zIGFuIG9iamVjdCB3aXRoIGEgXCJtZXNzYWdlc1wiIGtleVxuKiAvLyB3aWxsIHVwZGF0ZSB0aGUgc3RhdGUgYnkgY29tYmluaW5nIHRoZSBleGlzdGluZyB2YWx1ZSB3aXRoIHRoZSByZXR1cm5lZCBvbmUuXG4qIGNvbnN0IG15Tm9kZSA9IChzdGF0ZTogdHlwZW9mIEFubm90YXRpb25XaXRoUmVkdWNlci5TdGF0ZSkgPT4ge1xuKiAgIHJldHVybiB7XG4qICAgICBtZXNzYWdlczogW25ldyBBSU1lc3NhZ2UoXCJTb21lIG5ldyByZXNwb25zZVwiKV0sXG4qICAgfTtcbiogfTtcbipcbiogY29uc3QgZ3JhcGggPSBncmFwaEJ1aWxkZXJcbiogICAuYWRkTm9kZShcIm15Tm9kZVwiLCBteU5vZGUpXG4qICAgLi4uXG4qICAgLmNvbXBpbGUoKTtcbiogYGBgXG4qIEBuYW1lc3BhY2VcbiogQHByb3BlcnR5IFJvb3RcbiogSGVscGVyIGZ1bmN0aW9uIHRoYXQgaW5zdGFudGlhdGVzIGEgU3RhdGVHcmFwaCBzdGF0ZS4gU2VlIHtAbGluayBBbm5vdGF0aW9ufSBmb3IgdXNhZ2UuXG4qL1xuY29uc3QgQW5ub3RhdGlvbiA9IGZ1bmN0aW9uKGFubm90YXRpb24pIHtcblx0aWYgKGFubm90YXRpb24pIHJldHVybiBnZXRDaGFubmVsKGFubm90YXRpb24pO1xuXHRlbHNlIHJldHVybiBuZXcgTGFzdFZhbHVlKCk7XG59O1xuQW5ub3RhdGlvbi5Sb290ID0gKHNkKSA9PiBuZXcgQW5ub3RhdGlvblJvb3Qoc2QpO1xuZnVuY3Rpb24gZ2V0Q2hhbm5lbChyZWR1Y2VyKSB7XG5cdGlmICh0eXBlb2YgcmVkdWNlciA9PT0gXCJvYmplY3RcIiAmJiByZWR1Y2VyICYmIFwicmVkdWNlclwiIGluIHJlZHVjZXIgJiYgcmVkdWNlci5yZWR1Y2VyKSByZXR1cm4gbmV3IEJpbmFyeU9wZXJhdG9yQWdncmVnYXRlKHJlZHVjZXIucmVkdWNlciwgcmVkdWNlci5kZWZhdWx0KTtcblx0aWYgKHR5cGVvZiByZWR1Y2VyID09PSBcIm9iamVjdFwiICYmIHJlZHVjZXIgJiYgXCJ2YWx1ZVwiIGluIHJlZHVjZXIgJiYgcmVkdWNlci52YWx1ZSkgcmV0dXJuIG5ldyBCaW5hcnlPcGVyYXRvckFnZ3JlZ2F0ZShyZWR1Y2VyLnZhbHVlLCByZWR1Y2VyLmRlZmF1bHQpO1xuXHRyZXR1cm4gbmV3IExhc3RWYWx1ZSgpO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEFubm90YXRpb24sIEFubm90YXRpb25Sb290LCBnZXRDaGFubmVsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hbm5vdGF0aW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/graph/annotation.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/graph/graph.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/graph/graph.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Branch: () => (/* binding */ Branch),\n/* harmony export */   CompiledGraph: () => (/* binding */ CompiledGraph),\n/* harmony export */   Graph: () => (/* binding */ Graph$1)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/utils.js\");\n/* harmony import */ var _pregel_write_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../pregel/write.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/write.js\");\n/* harmony import */ var _pregel_read_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../pregel/read.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/read.js\");\n/* harmony import */ var _pregel_utils_subgraph_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../pregel/utils/subgraph.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/utils/subgraph.js\");\n/* harmony import */ var _pregel_index_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../pregel/index.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/index.js\");\n/* harmony import */ var _channels_ephemeral_value_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../channels/ephemeral_value.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/ephemeral_value.js\");\n/* harmony import */ var _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @langchain/core/runnables */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/index.js\");\n/* harmony import */ var _langchain_core_runnables_graph__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @langchain/core/runnables/graph */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/graph.js\");\n/* harmony import */ var zod_v4__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! zod/v4 */ \"(ssr)/./node_modules/zod/v4/index.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! uuid */ \"(ssr)/./node_modules/@langchain/langgraph/node_modules/uuid/dist/esm-node/validate.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/graph/graph.ts\nvar Branch = class {\n\tpath;\n\tends;\n\tconstructor(options) {\n\t\tif (_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_8__.Runnable.isRunnable(options.path)) this.path = options.path;\n\t\telse this.path = (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_8__._coerceToRunnable)(options.path).withConfig({ runName: `Branch` });\n\t\tthis.ends = Array.isArray(options.pathMap) ? options.pathMap.reduce((acc, n) => {\n\t\t\tacc[n] = n;\n\t\t\treturn acc;\n\t\t}, {}) : options.pathMap;\n\t}\n\trun(writer, reader) {\n\t\treturn _pregel_write_js__WEBPACK_IMPORTED_MODULE_3__.ChannelWrite.registerWriter(new _utils_js__WEBPACK_IMPORTED_MODULE_2__.RunnableCallable({\n\t\t\tname: \"<branch_run>\",\n\t\t\ttrace: false,\n\t\t\tfunc: async (input, config) => {\n\t\t\t\ttry {\n\t\t\t\t\treturn await this._route(input, config, writer, reader);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tif (e.name === _errors_js__WEBPACK_IMPORTED_MODULE_0__.NodeInterrupt.unminifiable_name) console.warn(\"[WARN]: 'NodeInterrupt' thrown in conditional edge. This is likely a bug in your graph implementation.\\nNodeInterrupt should only be thrown inside a node, not in edge conditions.\");\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\tasync _route(input, config, writer, reader) {\n\t\tlet result = await this.path.invoke(reader ? reader(config) : input, config);\n\t\tif (!Array.isArray(result)) result = [result];\n\t\tlet destinations;\n\t\tif (this.ends) destinations = result.map((r) => (0,_constants_js__WEBPACK_IMPORTED_MODULE_1__._isSend)(r) ? r : this.ends[r]);\n\t\telse destinations = result;\n\t\tif (destinations.some((dest) => !dest)) throw new Error(\"Branch condition returned unknown or null destination\");\n\t\tif (destinations.filter(_constants_js__WEBPACK_IMPORTED_MODULE_1__._isSend).some((packet) => packet.node === _constants_js__WEBPACK_IMPORTED_MODULE_1__.END)) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(\"Cannot send a packet to the END node\");\n\t\treturn await writer(destinations, config) ?? input;\n\t}\n};\nvar Graph$1 = class {\n\tnodes;\n\tedges;\n\tbranches;\n\tentryPoint;\n\tcompiled = false;\n\tconstructor() {\n\t\tthis.nodes = {};\n\t\tthis.edges = /* @__PURE__ */ new Set();\n\t\tthis.branches = {};\n\t}\n\twarnIfCompiled(message) {\n\t\tif (this.compiled) console.warn(message);\n\t}\n\tget allEdges() {\n\t\treturn this.edges;\n\t}\n\taddNode(...args) {\n\t\tfunction isMutlipleNodes(args$1) {\n\t\t\treturn args$1.length >= 1 && typeof args$1[0] !== \"string\";\n\t\t}\n\t\tconst nodes = isMutlipleNodes(args) ? Array.isArray(args[0]) ? args[0] : Object.entries(args[0]) : [[\n\t\t\targs[0],\n\t\t\targs[1],\n\t\t\targs[2]\n\t\t]];\n\t\tif (nodes.length === 0) throw new Error(\"No nodes provided in `addNode`\");\n\t\tfor (const [key, action, options] of nodes) {\n\t\t\tfor (const reservedChar of [_constants_js__WEBPACK_IMPORTED_MODULE_1__.CHECKPOINT_NAMESPACE_SEPARATOR, _constants_js__WEBPACK_IMPORTED_MODULE_1__.CHECKPOINT_NAMESPACE_END]) if (key.includes(reservedChar)) throw new Error(`\"${reservedChar}\" is a reserved character and is not allowed in node names.`);\n\t\t\tthis.warnIfCompiled(`Adding a node to a graph that has already been compiled. This will not be reflected in the compiled graph.`);\n\t\t\tif (key in this.nodes) throw new Error(`Node \\`${key}\\` already present.`);\n\t\t\tif (key === _constants_js__WEBPACK_IMPORTED_MODULE_1__.END) throw new Error(`Node \\`${key}\\` is reserved.`);\n\t\t\tconst runnable = (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_8__._coerceToRunnable)(action);\n\t\t\tthis.nodes[key] = {\n\t\t\t\trunnable,\n\t\t\t\tmetadata: options?.metadata,\n\t\t\t\tsubgraphs: (0,_pregel_utils_subgraph_js__WEBPACK_IMPORTED_MODULE_5__.isPregelLike)(runnable) ? [runnable] : options?.subgraphs,\n\t\t\t\tends: options?.ends\n\t\t\t};\n\t\t}\n\t\treturn this;\n\t}\n\taddEdge(startKey, endKey) {\n\t\tthis.warnIfCompiled(`Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph.`);\n\t\tif (startKey === _constants_js__WEBPACK_IMPORTED_MODULE_1__.END) throw new Error(\"END cannot be a start node\");\n\t\tif (endKey === _constants_js__WEBPACK_IMPORTED_MODULE_1__.START) throw new Error(\"START cannot be an end node\");\n\t\tif (Array.from(this.edges).some(([start]) => start === startKey) && !(\"channels\" in this)) throw new Error(`Already found path for ${startKey}. For multiple edges, use StateGraph.`);\n\t\tthis.edges.add([startKey, endKey]);\n\t\treturn this;\n\t}\n\taddConditionalEdges(source, path, pathMap) {\n\t\tconst options = typeof source === \"object\" ? source : {\n\t\t\tsource,\n\t\t\tpath,\n\t\t\tpathMap\n\t\t};\n\t\tthis.warnIfCompiled(\"Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph.\");\n\t\tif (!_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_8__.Runnable.isRunnable(options.path)) {\n\t\t\tconst pathDisplayValues = Array.isArray(options.pathMap) ? options.pathMap.join(\",\") : Object.keys(options.pathMap ?? {}).join(\",\");\n\t\t\toptions.path = (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_8__._coerceToRunnable)(options.path).withConfig({ runName: `Branch<${options.source}${pathDisplayValues !== \"\" ? `,${pathDisplayValues}` : \"\"}>`.slice(0, 63) });\n\t\t}\n\t\tconst name = options.path.getName() === \"RunnableLambda\" ? \"condition\" : options.path.getName();\n\t\tif (this.branches[options.source] && this.branches[options.source][name]) throw new Error(`Condition \\`${name}\\` already present for node \\`${source}\\``);\n\t\tthis.branches[options.source] ??= {};\n\t\tthis.branches[options.source][name] = new Branch(options);\n\t\treturn this;\n\t}\n\t/**\n\t* @deprecated use `addEdge(START, key)` instead\n\t*/\n\tsetEntryPoint(key) {\n\t\tthis.warnIfCompiled(\"Setting the entry point of a graph that has already been compiled. This will not be reflected in the compiled graph.\");\n\t\treturn this.addEdge(_constants_js__WEBPACK_IMPORTED_MODULE_1__.START, key);\n\t}\n\t/**\n\t* @deprecated use `addEdge(key, END)` instead\n\t*/\n\tsetFinishPoint(key) {\n\t\tthis.warnIfCompiled(\"Setting a finish point of a graph that has already been compiled. This will not be reflected in the compiled graph.\");\n\t\treturn this.addEdge(key, _constants_js__WEBPACK_IMPORTED_MODULE_1__.END);\n\t}\n\tcompile({ checkpointer, interruptBefore, interruptAfter, name } = {}) {\n\t\tthis.validate([...Array.isArray(interruptBefore) ? interruptBefore : [], ...Array.isArray(interruptAfter) ? interruptAfter : []]);\n\t\tconst compiled = new CompiledGraph({\n\t\t\tbuilder: this,\n\t\t\tcheckpointer,\n\t\t\tinterruptAfter,\n\t\t\tinterruptBefore,\n\t\t\tautoValidate: false,\n\t\t\tnodes: {},\n\t\t\tchannels: {\n\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_1__.START]: new _channels_ephemeral_value_js__WEBPACK_IMPORTED_MODULE_7__.EphemeralValue(),\n\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_1__.END]: new _channels_ephemeral_value_js__WEBPACK_IMPORTED_MODULE_7__.EphemeralValue()\n\t\t\t},\n\t\t\tinputChannels: _constants_js__WEBPACK_IMPORTED_MODULE_1__.START,\n\t\t\toutputChannels: _constants_js__WEBPACK_IMPORTED_MODULE_1__.END,\n\t\t\tstreamChannels: [],\n\t\t\tstreamMode: \"values\",\n\t\t\tname\n\t\t});\n\t\tfor (const [key, node] of Object.entries(this.nodes)) compiled.attachNode(key, node);\n\t\tfor (const [start, end] of this.edges) compiled.attachEdge(start, end);\n\t\tfor (const [start, branches] of Object.entries(this.branches)) for (const [name$1, branch] of Object.entries(branches)) compiled.attachBranch(start, name$1, branch);\n\t\treturn compiled.validate();\n\t}\n\tvalidate(interrupt) {\n\t\tconst allSources = new Set([...this.allEdges].map(([src, _]) => src));\n\t\tfor (const [start] of Object.entries(this.branches)) allSources.add(start);\n\t\tfor (const source of allSources) if (source !== _constants_js__WEBPACK_IMPORTED_MODULE_1__.START && !(source in this.nodes)) throw new Error(`Found edge starting at unknown node \\`${source}\\``);\n\t\tconst allTargets = new Set([...this.allEdges].map(([_, target]) => target));\n\t\tfor (const [start, branches] of Object.entries(this.branches)) for (const branch of Object.values(branches)) if (branch.ends != null) for (const end of Object.values(branch.ends)) allTargets.add(end);\n\t\telse {\n\t\t\tallTargets.add(_constants_js__WEBPACK_IMPORTED_MODULE_1__.END);\n\t\t\tfor (const node of Object.keys(this.nodes)) if (node !== start) allTargets.add(node);\n\t\t}\n\t\tfor (const node of Object.values(this.nodes)) for (const target of node.ends ?? []) allTargets.add(target);\n\t\tfor (const node of Object.keys(this.nodes)) if (!allTargets.has(node)) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.UnreachableNodeError([\n\t\t\t`Node \\`${node}\\` is not reachable.`,\n\t\t\t\"\",\n\t\t\t\"If you are returning Command objects from your node,\",\n\t\t\t\"make sure you are passing names of potential destination nodes as an \\\"ends\\\" array\",\n\t\t\t\"into \\\".addNode(..., { ends: [\\\"node1\\\", \\\"node2\\\"] })\\\".\"\n\t\t].join(\"\\n\"), { lc_error_code: \"UNREACHABLE_NODE\" });\n\t\tfor (const target of allTargets) if (target !== _constants_js__WEBPACK_IMPORTED_MODULE_1__.END && !(target in this.nodes)) throw new Error(`Found edge ending at unknown node \\`${target}\\``);\n\t\tif (interrupt) {\n\t\t\tfor (const node of interrupt) if (!(node in this.nodes)) throw new Error(`Interrupt node \\`${node}\\` is not present`);\n\t\t}\n\t\tthis.compiled = true;\n\t}\n};\nvar CompiledGraph = class extends _pregel_index_js__WEBPACK_IMPORTED_MODULE_6__.Pregel {\n\tbuilder;\n\tconstructor({ builder, ...rest }) {\n\t\tsuper(rest);\n\t\tthis.builder = builder;\n\t}\n\tattachNode(key, node) {\n\t\tthis.channels[key] = new _channels_ephemeral_value_js__WEBPACK_IMPORTED_MODULE_7__.EphemeralValue();\n\t\tthis.nodes[key] = new _pregel_read_js__WEBPACK_IMPORTED_MODULE_4__.PregelNode({\n\t\t\tchannels: [],\n\t\t\ttriggers: [],\n\t\t\tmetadata: node.metadata,\n\t\t\tsubgraphs: node.subgraphs,\n\t\t\tends: node.ends\n\t\t}).pipe(node.runnable).pipe(new _pregel_write_js__WEBPACK_IMPORTED_MODULE_3__.ChannelWrite([{\n\t\t\tchannel: key,\n\t\t\tvalue: _pregel_write_js__WEBPACK_IMPORTED_MODULE_3__.PASSTHROUGH\n\t\t}], [_constants_js__WEBPACK_IMPORTED_MODULE_1__.TAG_HIDDEN]));\n\t\tthis.streamChannels.push(key);\n\t}\n\tattachEdge(start, end) {\n\t\tif (end === _constants_js__WEBPACK_IMPORTED_MODULE_1__.END) {\n\t\t\tif (start === _constants_js__WEBPACK_IMPORTED_MODULE_1__.START) throw new Error(\"Cannot have an edge from START to END\");\n\t\t\tthis.nodes[start].writers.push(new _pregel_write_js__WEBPACK_IMPORTED_MODULE_3__.ChannelWrite([{\n\t\t\t\tchannel: _constants_js__WEBPACK_IMPORTED_MODULE_1__.END,\n\t\t\t\tvalue: _pregel_write_js__WEBPACK_IMPORTED_MODULE_3__.PASSTHROUGH\n\t\t\t}], [_constants_js__WEBPACK_IMPORTED_MODULE_1__.TAG_HIDDEN]));\n\t\t} else {\n\t\t\tthis.nodes[end].triggers.push(start);\n\t\t\tthis.nodes[end].channels.push(start);\n\t\t}\n\t}\n\tattachBranch(start, name, branch) {\n\t\tif (start === _constants_js__WEBPACK_IMPORTED_MODULE_1__.START && !this.nodes[_constants_js__WEBPACK_IMPORTED_MODULE_1__.START]) this.nodes[_constants_js__WEBPACK_IMPORTED_MODULE_1__.START] = _pregel_index_js__WEBPACK_IMPORTED_MODULE_6__.Channel.subscribeTo(_constants_js__WEBPACK_IMPORTED_MODULE_1__.START, { tags: [_constants_js__WEBPACK_IMPORTED_MODULE_1__.TAG_HIDDEN] });\n\t\tthis.nodes[start].pipe(branch.run((dests) => {\n\t\t\treturn new _pregel_write_js__WEBPACK_IMPORTED_MODULE_3__.ChannelWrite(dests.map((dest) => {\n\t\t\t\tif ((0,_constants_js__WEBPACK_IMPORTED_MODULE_1__._isSend)(dest)) return dest;\n\t\t\t\treturn {\n\t\t\t\t\tchannel: dest === _constants_js__WEBPACK_IMPORTED_MODULE_1__.END ? _constants_js__WEBPACK_IMPORTED_MODULE_1__.END : `branch:${start}:${name}:${dest}`,\n\t\t\t\t\tvalue: _pregel_write_js__WEBPACK_IMPORTED_MODULE_3__.PASSTHROUGH\n\t\t\t\t};\n\t\t\t}), [_constants_js__WEBPACK_IMPORTED_MODULE_1__.TAG_HIDDEN]);\n\t\t}));\n\t\tconst ends = branch.ends ? Object.values(branch.ends) : Object.keys(this.nodes);\n\t\tfor (const end of ends) if (end !== _constants_js__WEBPACK_IMPORTED_MODULE_1__.END) {\n\t\t\tconst channelName = `branch:${start}:${name}:${end}`;\n\t\t\tthis.channels[channelName] = new _channels_ephemeral_value_js__WEBPACK_IMPORTED_MODULE_7__.EphemeralValue();\n\t\t\tthis.nodes[end].triggers.push(channelName);\n\t\t\tthis.nodes[end].channels.push(channelName);\n\t\t}\n\t}\n\t/**\n\t* Returns a drawable representation of the computation graph.\n\t*/\n\tasync getGraphAsync(config) {\n\t\tconst xray = config?.xray;\n\t\tconst graph = new _langchain_core_runnables_graph__WEBPACK_IMPORTED_MODULE_9__.Graph();\n\t\tconst startNodes = { [_constants_js__WEBPACK_IMPORTED_MODULE_1__.START]: graph.addNode({ schema: zod_v4__WEBPACK_IMPORTED_MODULE_10__.z.any() }, _constants_js__WEBPACK_IMPORTED_MODULE_1__.START) };\n\t\tconst endNodes = {};\n\t\tlet subgraphs = {};\n\t\tif (xray) subgraphs = Object.fromEntries((await (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.gatherIterator)(this.getSubgraphsAsync())).filter((x) => isCompiledGraph(x[1])));\n\t\tfunction addEdge(start, end, label, conditional = false) {\n\t\t\tif (end === _constants_js__WEBPACK_IMPORTED_MODULE_1__.END && endNodes[_constants_js__WEBPACK_IMPORTED_MODULE_1__.END] === void 0) endNodes[_constants_js__WEBPACK_IMPORTED_MODULE_1__.END] = graph.addNode({ schema: zod_v4__WEBPACK_IMPORTED_MODULE_10__.z.any() }, _constants_js__WEBPACK_IMPORTED_MODULE_1__.END);\n\t\t\tif (startNodes[start] === void 0) return;\n\t\t\tif (endNodes[end] === void 0) throw new Error(`End node ${end} not found!`);\n\t\t\treturn graph.addEdge(startNodes[start], endNodes[end], label !== end ? label : void 0, conditional);\n\t\t}\n\t\tfor (const [key, nodeSpec] of Object.entries(this.builder.nodes)) {\n\t\t\tconst displayKey = _escapeMermaidKeywords(key);\n\t\t\tconst node = nodeSpec.runnable;\n\t\t\tconst metadata = nodeSpec.metadata ?? {};\n\t\t\tif (this.interruptBefore?.includes(key) && this.interruptAfter?.includes(key)) metadata.__interrupt = \"before,after\";\n\t\t\telse if (this.interruptBefore?.includes(key)) metadata.__interrupt = \"before\";\n\t\t\telse if (this.interruptAfter?.includes(key)) metadata.__interrupt = \"after\";\n\t\t\tif (xray) {\n\t\t\t\tconst newXrayValue = typeof xray === \"number\" ? xray - 1 : xray;\n\t\t\t\tconst drawableSubgraph = subgraphs[key] !== void 0 ? await subgraphs[key].getGraphAsync({\n\t\t\t\t\t...config,\n\t\t\t\t\txray: newXrayValue\n\t\t\t\t}) : node.getGraph(config);\n\t\t\t\tdrawableSubgraph.trimFirstNode();\n\t\t\t\tdrawableSubgraph.trimLastNode();\n\t\t\t\tif (Object.keys(drawableSubgraph.nodes).length > 1) {\n\t\t\t\t\tconst [e, s] = graph.extend(drawableSubgraph, displayKey);\n\t\t\t\t\tif (e === void 0) throw new Error(`Could not extend subgraph \"${key}\" due to missing entrypoint.`);\n\t\t\t\t\tfunction _isRunnableInterface(thing) {\n\t\t\t\t\t\treturn thing ? thing.lc_runnable : false;\n\t\t\t\t\t}\n\t\t\t\t\tfunction _nodeDataStr(id, data) {\n\t\t\t\t\t\tif (id !== void 0 && !(0,uuid__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(id)) return id;\n\t\t\t\t\t\telse if (_isRunnableInterface(data)) try {\n\t\t\t\t\t\t\tlet dataStr = data.getName();\n\t\t\t\t\t\t\tdataStr = dataStr.startsWith(\"Runnable\") ? dataStr.slice(8) : dataStr;\n\t\t\t\t\t\t\treturn dataStr;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\treturn data.getName();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse return data.name ?? \"UnknownSchema\";\n\t\t\t\t\t}\n\t\t\t\t\tif (s !== void 0) startNodes[displayKey] = {\n\t\t\t\t\t\tname: _nodeDataStr(s.id, s.data),\n\t\t\t\t\t\t...s\n\t\t\t\t\t};\n\t\t\t\t\tendNodes[displayKey] = {\n\t\t\t\t\t\tname: _nodeDataStr(e.id, e.data),\n\t\t\t\t\t\t...e\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tconst newNode = graph.addNode(node, displayKey, metadata);\n\t\t\t\t\tstartNodes[displayKey] = newNode;\n\t\t\t\t\tendNodes[displayKey] = newNode;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst newNode = graph.addNode(node, displayKey, metadata);\n\t\t\t\tstartNodes[displayKey] = newNode;\n\t\t\t\tendNodes[displayKey] = newNode;\n\t\t\t}\n\t\t}\n\t\tconst sortedEdges = [...this.builder.allEdges].sort(([a], [b]) => {\n\t\t\tif (a < b) return -1;\n\t\t\telse if (b > a) return 1;\n\t\t\telse return 0;\n\t\t});\n\t\tfor (const [start, end] of sortedEdges) addEdge(_escapeMermaidKeywords(start), _escapeMermaidKeywords(end));\n\t\tfor (const [start, branches] of Object.entries(this.builder.branches)) {\n\t\t\tconst defaultEnds = {\n\t\t\t\t...Object.fromEntries(Object.keys(this.builder.nodes).filter((k) => k !== start).map((k) => [_escapeMermaidKeywords(k), _escapeMermaidKeywords(k)])),\n\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_1__.END]: _constants_js__WEBPACK_IMPORTED_MODULE_1__.END\n\t\t\t};\n\t\t\tfor (const branch of Object.values(branches)) {\n\t\t\t\tlet ends;\n\t\t\t\tif (branch.ends !== void 0) ends = branch.ends;\n\t\t\t\telse ends = defaultEnds;\n\t\t\t\tfor (const [label, end] of Object.entries(ends)) addEdge(_escapeMermaidKeywords(start), _escapeMermaidKeywords(end), label, true);\n\t\t\t}\n\t\t}\n\t\tfor (const [key, node] of Object.entries(this.builder.nodes)) if (node.ends !== void 0) for (const end of node.ends) addEdge(_escapeMermaidKeywords(key), _escapeMermaidKeywords(end), void 0, true);\n\t\treturn graph;\n\t}\n\t/**\n\t* Returns a drawable representation of the computation graph.\n\t*\n\t* @deprecated Use getGraphAsync instead. The async method will be the default in the next minor core release.\n\t*/\n\tgetGraph(config) {\n\t\tconst xray = config?.xray;\n\t\tconst graph = new _langchain_core_runnables_graph__WEBPACK_IMPORTED_MODULE_9__.Graph();\n\t\tconst startNodes = { [_constants_js__WEBPACK_IMPORTED_MODULE_1__.START]: graph.addNode({ schema: zod_v4__WEBPACK_IMPORTED_MODULE_10__.z.any() }, _constants_js__WEBPACK_IMPORTED_MODULE_1__.START) };\n\t\tconst endNodes = {};\n\t\tlet subgraphs = {};\n\t\tif (xray) subgraphs = Object.fromEntries((0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.gatherIteratorSync)(this.getSubgraphs()).filter((x) => isCompiledGraph(x[1])));\n\t\tfunction addEdge(start, end, label, conditional = false) {\n\t\t\tif (end === _constants_js__WEBPACK_IMPORTED_MODULE_1__.END && endNodes[_constants_js__WEBPACK_IMPORTED_MODULE_1__.END] === void 0) endNodes[_constants_js__WEBPACK_IMPORTED_MODULE_1__.END] = graph.addNode({ schema: zod_v4__WEBPACK_IMPORTED_MODULE_10__.z.any() }, _constants_js__WEBPACK_IMPORTED_MODULE_1__.END);\n\t\t\treturn graph.addEdge(startNodes[start], endNodes[end], label !== end ? label : void 0, conditional);\n\t\t}\n\t\tfor (const [key, nodeSpec] of Object.entries(this.builder.nodes)) {\n\t\t\tconst displayKey = _escapeMermaidKeywords(key);\n\t\t\tconst node = nodeSpec.runnable;\n\t\t\tconst metadata = nodeSpec.metadata ?? {};\n\t\t\tif (this.interruptBefore?.includes(key) && this.interruptAfter?.includes(key)) metadata.__interrupt = \"before,after\";\n\t\t\telse if (this.interruptBefore?.includes(key)) metadata.__interrupt = \"before\";\n\t\t\telse if (this.interruptAfter?.includes(key)) metadata.__interrupt = \"after\";\n\t\t\tif (xray) {\n\t\t\t\tconst newXrayValue = typeof xray === \"number\" ? xray - 1 : xray;\n\t\t\t\tconst drawableSubgraph = subgraphs[key] !== void 0 ? subgraphs[key].getGraph({\n\t\t\t\t\t...config,\n\t\t\t\t\txray: newXrayValue\n\t\t\t\t}) : node.getGraph(config);\n\t\t\t\tdrawableSubgraph.trimFirstNode();\n\t\t\t\tdrawableSubgraph.trimLastNode();\n\t\t\t\tif (Object.keys(drawableSubgraph.nodes).length > 1) {\n\t\t\t\t\tconst [e, s] = graph.extend(drawableSubgraph, displayKey);\n\t\t\t\t\tif (e === void 0) throw new Error(`Could not extend subgraph \"${key}\" due to missing entrypoint.`);\n\t\t\t\t\tfunction _isRunnableInterface(thing) {\n\t\t\t\t\t\treturn thing ? thing.lc_runnable : false;\n\t\t\t\t\t}\n\t\t\t\t\tfunction _nodeDataStr(id, data) {\n\t\t\t\t\t\tif (id !== void 0 && !(0,uuid__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(id)) return id;\n\t\t\t\t\t\telse if (_isRunnableInterface(data)) try {\n\t\t\t\t\t\t\tlet dataStr = data.getName();\n\t\t\t\t\t\t\tdataStr = dataStr.startsWith(\"Runnable\") ? dataStr.slice(8) : dataStr;\n\t\t\t\t\t\t\treturn dataStr;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\treturn data.getName();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse return data.name ?? \"UnknownSchema\";\n\t\t\t\t\t}\n\t\t\t\t\tif (s !== void 0) startNodes[displayKey] = {\n\t\t\t\t\t\tname: _nodeDataStr(s.id, s.data),\n\t\t\t\t\t\t...s\n\t\t\t\t\t};\n\t\t\t\t\tendNodes[displayKey] = {\n\t\t\t\t\t\tname: _nodeDataStr(e.id, e.data),\n\t\t\t\t\t\t...e\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tconst newNode = graph.addNode(node, displayKey, metadata);\n\t\t\t\t\tstartNodes[displayKey] = newNode;\n\t\t\t\t\tendNodes[displayKey] = newNode;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst newNode = graph.addNode(node, displayKey, metadata);\n\t\t\t\tstartNodes[displayKey] = newNode;\n\t\t\t\tendNodes[displayKey] = newNode;\n\t\t\t}\n\t\t}\n\t\tconst sortedEdges = [...this.builder.allEdges].sort(([a], [b]) => {\n\t\t\tif (a < b) return -1;\n\t\t\telse if (b > a) return 1;\n\t\t\telse return 0;\n\t\t});\n\t\tfor (const [start, end] of sortedEdges) addEdge(_escapeMermaidKeywords(start), _escapeMermaidKeywords(end));\n\t\tfor (const [start, branches] of Object.entries(this.builder.branches)) {\n\t\t\tconst defaultEnds = {\n\t\t\t\t...Object.fromEntries(Object.keys(this.builder.nodes).filter((k) => k !== start).map((k) => [_escapeMermaidKeywords(k), _escapeMermaidKeywords(k)])),\n\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_1__.END]: _constants_js__WEBPACK_IMPORTED_MODULE_1__.END\n\t\t\t};\n\t\t\tfor (const branch of Object.values(branches)) {\n\t\t\t\tlet ends;\n\t\t\t\tif (branch.ends !== void 0) ends = branch.ends;\n\t\t\t\telse ends = defaultEnds;\n\t\t\t\tfor (const [label, end] of Object.entries(ends)) addEdge(_escapeMermaidKeywords(start), _escapeMermaidKeywords(end), label, true);\n\t\t\t}\n\t\t}\n\t\treturn graph;\n\t}\n};\nfunction isCompiledGraph(x) {\n\treturn typeof x.attachNode === \"function\" && typeof x.attachEdge === \"function\";\n}\nfunction _escapeMermaidKeywords(key) {\n\tif (key === \"subgraph\") return `\"${key}\"`;\n\treturn key;\n}\n\n//#endregion\n\n//# sourceMappingURL=graph.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9ncmFwaC9ncmFwaC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBdUY7QUFDcUM7QUFDekM7QUFDcEI7QUFDaEI7QUFDWTtBQUNOO0FBQ1c7QUFDUTtBQUNoQjtBQUM3QjtBQUNLOztBQUVoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSwrREFBUTtBQUNkLG1CQUFtQiw0RUFBaUIsNEJBQTRCLG1CQUFtQjtBQUNuRjtBQUNBO0FBQ0E7QUFDQSxHQUFHLElBQUk7QUFDUDtBQUNBO0FBQ0EsU0FBUywwREFBWSxvQkFBb0IsdURBQWdCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sb0JBQW9CLHFEQUFhO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELHNEQUFPO0FBQ3pEO0FBQ0E7QUFDQSwwQkFBMEIsa0RBQU8sbUNBQW1DLDhDQUFHLGFBQWEsMERBQWtCO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHlFQUE4QixFQUFFLG1FQUF3Qix1REFBdUQsYUFBYTtBQUMzSjtBQUNBLG9EQUFvRCxJQUFJO0FBQ3hELGVBQWUsOENBQUcsNEJBQTRCLElBQUk7QUFDbEQsb0JBQW9CLDRFQUFpQjtBQUNyQztBQUNBO0FBQ0E7QUFDQSxlQUFlLHVFQUFZO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDhDQUFHO0FBQ3RCLGlCQUFpQixnREFBSztBQUN0Qix1SUFBdUksU0FBUztBQUNoSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sK0RBQVE7QUFDZiwySEFBMkg7QUFDM0gsa0JBQWtCLDRFQUFpQiw0QkFBNEIsbUJBQW1CLGVBQWUsRUFBRSwrQkFBK0Isa0JBQWtCLE9BQU8saUJBQWlCO0FBQzVLO0FBQ0E7QUFDQSwyR0FBMkcsS0FBSyxnQ0FBZ0MsT0FBTztBQUN2SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsZ0RBQUs7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDhDQUFHO0FBQzlCO0FBQ0EsV0FBVyxzREFBc0QsSUFBSTtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBLEtBQUssZ0RBQUssT0FBTyx3RUFBYztBQUMvQixLQUFLLDhDQUFHLE9BQU8sd0VBQWM7QUFDN0IsSUFBSTtBQUNKLGtCQUFrQixnREFBSztBQUN2QixtQkFBbUIsOENBQUc7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsZ0RBQUssc0ZBQXNGLE9BQU87QUFDcEo7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDhDQUFHO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLG1GQUFtRiw0REFBb0I7QUFDdkcsYUFBYSxLQUFLO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiw4QkFBOEI7QUFDekQsa0JBQWtCLG1DQUFtQztBQUNyRCxrREFBa0QsOENBQUcsb0ZBQW9GLE9BQU87QUFDaEo7QUFDQSxnR0FBZ0csS0FBSztBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxvREFBTTtBQUN4QztBQUNBLGVBQWUsa0JBQWtCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHdFQUFjO0FBQ3pDLHdCQUF3Qix1REFBVTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRywrQkFBK0IsMERBQVk7QUFDOUM7QUFDQSxVQUFVLHlEQUFXO0FBQ3JCLEdBQUcsSUFBSSxxREFBVTtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxjQUFjLDhDQUFHO0FBQ2pCLGlCQUFpQixnREFBSztBQUN0QixzQ0FBc0MsMERBQVk7QUFDbEQsYUFBYSw4Q0FBRztBQUNoQixXQUFXLHlEQUFXO0FBQ3RCLElBQUksSUFBSSxxREFBVTtBQUNsQixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixnREFBSyxnQkFBZ0IsZ0RBQUssY0FBYyxnREFBSyxJQUFJLHFEQUFPLGFBQWEsZ0RBQUssSUFBSSxPQUFPLHFEQUFVLEdBQUc7QUFDbEg7QUFDQSxjQUFjLDBEQUFZO0FBQzFCLFFBQVEsc0RBQU87QUFDZjtBQUNBLHVCQUF1Qiw4Q0FBRyxHQUFHLDhDQUFHLGFBQWEsTUFBTSxHQUFHLEtBQUssR0FBRyxLQUFLO0FBQ25FLFlBQVkseURBQVc7QUFDdkI7QUFDQSxJQUFJLElBQUkscURBQVU7QUFDbEIsR0FBRztBQUNIO0FBQ0Esc0NBQXNDLDhDQUFHO0FBQ3pDLGlDQUFpQyxNQUFNLEdBQUcsS0FBSyxHQUFHLElBQUk7QUFDdEQsb0NBQW9DLHdFQUFjO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrRUFBSztBQUN6Qix1QkFBdUIsQ0FBQyxnREFBSyxtQkFBbUIsUUFBUSwwQ0FBSyxJQUFJLEVBQUUsZ0RBQUs7QUFDeEU7QUFDQTtBQUNBLGtEQUFrRCx5REFBYztBQUNoRTtBQUNBLGVBQWUsOENBQUcsYUFBYSw4Q0FBRyx1QkFBdUIsOENBQUcsb0JBQW9CLFFBQVEsMENBQUssSUFBSSxFQUFFLDhDQUFHO0FBQ3RHO0FBQ0EsNkRBQTZELEtBQUs7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSxJQUFJO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGlEQUFRO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLDhDQUFHLEdBQUcsOENBQUc7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isa0VBQUs7QUFDekIsdUJBQXVCLENBQUMsZ0RBQUssbUJBQW1CLFFBQVEsMENBQUssSUFBSSxFQUFFLGdEQUFLO0FBQ3hFO0FBQ0E7QUFDQSwyQ0FBMkMsNkRBQWtCO0FBQzdEO0FBQ0EsZUFBZSw4Q0FBRyxhQUFhLDhDQUFHLHVCQUF1Qiw4Q0FBRyxvQkFBb0IsUUFBUSwwQ0FBSyxJQUFJLEVBQUUsOENBQUc7QUFDdEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSxJQUFJO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGlEQUFRO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLDhDQUFHLEdBQUcsOENBQUc7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsSUFBSTtBQUN4QztBQUNBOztBQUVBO0FBQ21EO0FBQ25EIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9ncmFwaC9ncmFwaC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbnZhbGlkVXBkYXRlRXJyb3IsIE5vZGVJbnRlcnJ1cHQsIFVucmVhY2hhYmxlTm9kZUVycm9yIH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgQ0hFQ0tQT0lOVF9OQU1FU1BBQ0VfRU5ELCBDSEVDS1BPSU5UX05BTUVTUEFDRV9TRVBBUkFUT1IsIEVORCwgU1RBUlQsIFRBR19ISURERU4sIF9pc1NlbmQgfSBmcm9tIFwiLi4vY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBSdW5uYWJsZUNhbGxhYmxlLCBnYXRoZXJJdGVyYXRvciwgZ2F0aGVySXRlcmF0b3JTeW5jIH0gZnJvbSBcIi4uL3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBDaGFubmVsV3JpdGUsIFBBU1NUSFJPVUdIIH0gZnJvbSBcIi4uL3ByZWdlbC93cml0ZS5qc1wiO1xuaW1wb3J0IHsgUHJlZ2VsTm9kZSB9IGZyb20gXCIuLi9wcmVnZWwvcmVhZC5qc1wiO1xuaW1wb3J0IHsgaXNQcmVnZWxMaWtlIH0gZnJvbSBcIi4uL3ByZWdlbC91dGlscy9zdWJncmFwaC5qc1wiO1xuaW1wb3J0IHsgQ2hhbm5lbCwgUHJlZ2VsIH0gZnJvbSBcIi4uL3ByZWdlbC9pbmRleC5qc1wiO1xuaW1wb3J0IHsgRXBoZW1lcmFsVmFsdWUgfSBmcm9tIFwiLi4vY2hhbm5lbHMvZXBoZW1lcmFsX3ZhbHVlLmpzXCI7XG5pbXBvcnQgeyBSdW5uYWJsZSwgX2NvZXJjZVRvUnVubmFibGUgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3J1bm5hYmxlc1wiO1xuaW1wb3J0IHsgR3JhcGggfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3J1bm5hYmxlcy9ncmFwaFwiO1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2QvdjRcIjtcbmltcG9ydCB7IHZhbGlkYXRlIH0gZnJvbSBcInV1aWRcIjtcblxuLy8jcmVnaW9uIHNyYy9ncmFwaC9ncmFwaC50c1xudmFyIEJyYW5jaCA9IGNsYXNzIHtcblx0cGF0aDtcblx0ZW5kcztcblx0Y29uc3RydWN0b3Iob3B0aW9ucykge1xuXHRcdGlmIChSdW5uYWJsZS5pc1J1bm5hYmxlKG9wdGlvbnMucGF0aCkpIHRoaXMucGF0aCA9IG9wdGlvbnMucGF0aDtcblx0XHRlbHNlIHRoaXMucGF0aCA9IF9jb2VyY2VUb1J1bm5hYmxlKG9wdGlvbnMucGF0aCkud2l0aENvbmZpZyh7IHJ1bk5hbWU6IGBCcmFuY2hgIH0pO1xuXHRcdHRoaXMuZW5kcyA9IEFycmF5LmlzQXJyYXkob3B0aW9ucy5wYXRoTWFwKSA/IG9wdGlvbnMucGF0aE1hcC5yZWR1Y2UoKGFjYywgbikgPT4ge1xuXHRcdFx0YWNjW25dID0gbjtcblx0XHRcdHJldHVybiBhY2M7XG5cdFx0fSwge30pIDogb3B0aW9ucy5wYXRoTWFwO1xuXHR9XG5cdHJ1bih3cml0ZXIsIHJlYWRlcikge1xuXHRcdHJldHVybiBDaGFubmVsV3JpdGUucmVnaXN0ZXJXcml0ZXIobmV3IFJ1bm5hYmxlQ2FsbGFibGUoe1xuXHRcdFx0bmFtZTogXCI8YnJhbmNoX3J1bj5cIixcblx0XHRcdHRyYWNlOiBmYWxzZSxcblx0XHRcdGZ1bmM6IGFzeW5jIChpbnB1dCwgY29uZmlnKSA9PiB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0cmV0dXJuIGF3YWl0IHRoaXMuX3JvdXRlKGlucHV0LCBjb25maWcsIHdyaXRlciwgcmVhZGVyKTtcblx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdGlmIChlLm5hbWUgPT09IE5vZGVJbnRlcnJ1cHQudW5taW5pZmlhYmxlX25hbWUpIGNvbnNvbGUud2FybihcIltXQVJOXTogJ05vZGVJbnRlcnJ1cHQnIHRocm93biBpbiBjb25kaXRpb25hbCBlZGdlLiBUaGlzIGlzIGxpa2VseSBhIGJ1ZyBpbiB5b3VyIGdyYXBoIGltcGxlbWVudGF0aW9uLlxcbk5vZGVJbnRlcnJ1cHQgc2hvdWxkIG9ubHkgYmUgdGhyb3duIGluc2lkZSBhIG5vZGUsIG5vdCBpbiBlZGdlIGNvbmRpdGlvbnMuXCIpO1xuXHRcdFx0XHRcdHRocm93IGU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KSk7XG5cdH1cblx0YXN5bmMgX3JvdXRlKGlucHV0LCBjb25maWcsIHdyaXRlciwgcmVhZGVyKSB7XG5cdFx0bGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMucGF0aC5pbnZva2UocmVhZGVyID8gcmVhZGVyKGNvbmZpZykgOiBpbnB1dCwgY29uZmlnKTtcblx0XHRpZiAoIUFycmF5LmlzQXJyYXkocmVzdWx0KSkgcmVzdWx0ID0gW3Jlc3VsdF07XG5cdFx0bGV0IGRlc3RpbmF0aW9ucztcblx0XHRpZiAodGhpcy5lbmRzKSBkZXN0aW5hdGlvbnMgPSByZXN1bHQubWFwKChyKSA9PiBfaXNTZW5kKHIpID8gciA6IHRoaXMuZW5kc1tyXSk7XG5cdFx0ZWxzZSBkZXN0aW5hdGlvbnMgPSByZXN1bHQ7XG5cdFx0aWYgKGRlc3RpbmF0aW9ucy5zb21lKChkZXN0KSA9PiAhZGVzdCkpIHRocm93IG5ldyBFcnJvcihcIkJyYW5jaCBjb25kaXRpb24gcmV0dXJuZWQgdW5rbm93biBvciBudWxsIGRlc3RpbmF0aW9uXCIpO1xuXHRcdGlmIChkZXN0aW5hdGlvbnMuZmlsdGVyKF9pc1NlbmQpLnNvbWUoKHBhY2tldCkgPT4gcGFja2V0Lm5vZGUgPT09IEVORCkpIHRocm93IG5ldyBJbnZhbGlkVXBkYXRlRXJyb3IoXCJDYW5ub3Qgc2VuZCBhIHBhY2tldCB0byB0aGUgRU5EIG5vZGVcIik7XG5cdFx0cmV0dXJuIGF3YWl0IHdyaXRlcihkZXN0aW5hdGlvbnMsIGNvbmZpZykgPz8gaW5wdXQ7XG5cdH1cbn07XG52YXIgR3JhcGgkMSA9IGNsYXNzIHtcblx0bm9kZXM7XG5cdGVkZ2VzO1xuXHRicmFuY2hlcztcblx0ZW50cnlQb2ludDtcblx0Y29tcGlsZWQgPSBmYWxzZTtcblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dGhpcy5ub2RlcyA9IHt9O1xuXHRcdHRoaXMuZWRnZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuXHRcdHRoaXMuYnJhbmNoZXMgPSB7fTtcblx0fVxuXHR3YXJuSWZDb21waWxlZChtZXNzYWdlKSB7XG5cdFx0aWYgKHRoaXMuY29tcGlsZWQpIGNvbnNvbGUud2FybihtZXNzYWdlKTtcblx0fVxuXHRnZXQgYWxsRWRnZXMoKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWRnZXM7XG5cdH1cblx0YWRkTm9kZSguLi5hcmdzKSB7XG5cdFx0ZnVuY3Rpb24gaXNNdXRsaXBsZU5vZGVzKGFyZ3MkMSkge1xuXHRcdFx0cmV0dXJuIGFyZ3MkMS5sZW5ndGggPj0gMSAmJiB0eXBlb2YgYXJncyQxWzBdICE9PSBcInN0cmluZ1wiO1xuXHRcdH1cblx0XHRjb25zdCBub2RlcyA9IGlzTXV0bGlwbGVOb2RlcyhhcmdzKSA/IEFycmF5LmlzQXJyYXkoYXJnc1swXSkgPyBhcmdzWzBdIDogT2JqZWN0LmVudHJpZXMoYXJnc1swXSkgOiBbW1xuXHRcdFx0YXJnc1swXSxcblx0XHRcdGFyZ3NbMV0sXG5cdFx0XHRhcmdzWzJdXG5cdFx0XV07XG5cdFx0aWYgKG5vZGVzLmxlbmd0aCA9PT0gMCkgdGhyb3cgbmV3IEVycm9yKFwiTm8gbm9kZXMgcHJvdmlkZWQgaW4gYGFkZE5vZGVgXCIpO1xuXHRcdGZvciAoY29uc3QgW2tleSwgYWN0aW9uLCBvcHRpb25zXSBvZiBub2Rlcykge1xuXHRcdFx0Zm9yIChjb25zdCByZXNlcnZlZENoYXIgb2YgW0NIRUNLUE9JTlRfTkFNRVNQQUNFX1NFUEFSQVRPUiwgQ0hFQ0tQT0lOVF9OQU1FU1BBQ0VfRU5EXSkgaWYgKGtleS5pbmNsdWRlcyhyZXNlcnZlZENoYXIpKSB0aHJvdyBuZXcgRXJyb3IoYFwiJHtyZXNlcnZlZENoYXJ9XCIgaXMgYSByZXNlcnZlZCBjaGFyYWN0ZXIgYW5kIGlzIG5vdCBhbGxvd2VkIGluIG5vZGUgbmFtZXMuYCk7XG5cdFx0XHR0aGlzLndhcm5JZkNvbXBpbGVkKGBBZGRpbmcgYSBub2RlIHRvIGEgZ3JhcGggdGhhdCBoYXMgYWxyZWFkeSBiZWVuIGNvbXBpbGVkLiBUaGlzIHdpbGwgbm90IGJlIHJlZmxlY3RlZCBpbiB0aGUgY29tcGlsZWQgZ3JhcGguYCk7XG5cdFx0XHRpZiAoa2V5IGluIHRoaXMubm9kZXMpIHRocm93IG5ldyBFcnJvcihgTm9kZSBcXGAke2tleX1cXGAgYWxyZWFkeSBwcmVzZW50LmApO1xuXHRcdFx0aWYgKGtleSA9PT0gRU5EKSB0aHJvdyBuZXcgRXJyb3IoYE5vZGUgXFxgJHtrZXl9XFxgIGlzIHJlc2VydmVkLmApO1xuXHRcdFx0Y29uc3QgcnVubmFibGUgPSBfY29lcmNlVG9SdW5uYWJsZShhY3Rpb24pO1xuXHRcdFx0dGhpcy5ub2Rlc1trZXldID0ge1xuXHRcdFx0XHRydW5uYWJsZSxcblx0XHRcdFx0bWV0YWRhdGE6IG9wdGlvbnM/Lm1ldGFkYXRhLFxuXHRcdFx0XHRzdWJncmFwaHM6IGlzUHJlZ2VsTGlrZShydW5uYWJsZSkgPyBbcnVubmFibGVdIDogb3B0aW9ucz8uc3ViZ3JhcGhzLFxuXHRcdFx0XHRlbmRzOiBvcHRpb25zPy5lbmRzXG5cdFx0XHR9O1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXHRhZGRFZGdlKHN0YXJ0S2V5LCBlbmRLZXkpIHtcblx0XHR0aGlzLndhcm5JZkNvbXBpbGVkKGBBZGRpbmcgYW4gZWRnZSB0byBhIGdyYXBoIHRoYXQgaGFzIGFscmVhZHkgYmVlbiBjb21waWxlZC4gVGhpcyB3aWxsIG5vdCBiZSByZWZsZWN0ZWQgaW4gdGhlIGNvbXBpbGVkIGdyYXBoLmApO1xuXHRcdGlmIChzdGFydEtleSA9PT0gRU5EKSB0aHJvdyBuZXcgRXJyb3IoXCJFTkQgY2Fubm90IGJlIGEgc3RhcnQgbm9kZVwiKTtcblx0XHRpZiAoZW5kS2V5ID09PSBTVEFSVCkgdGhyb3cgbmV3IEVycm9yKFwiU1RBUlQgY2Fubm90IGJlIGFuIGVuZCBub2RlXCIpO1xuXHRcdGlmIChBcnJheS5mcm9tKHRoaXMuZWRnZXMpLnNvbWUoKFtzdGFydF0pID0+IHN0YXJ0ID09PSBzdGFydEtleSkgJiYgIShcImNoYW5uZWxzXCIgaW4gdGhpcykpIHRocm93IG5ldyBFcnJvcihgQWxyZWFkeSBmb3VuZCBwYXRoIGZvciAke3N0YXJ0S2V5fS4gRm9yIG11bHRpcGxlIGVkZ2VzLCB1c2UgU3RhdGVHcmFwaC5gKTtcblx0XHR0aGlzLmVkZ2VzLmFkZChbc3RhcnRLZXksIGVuZEtleV0pO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cdGFkZENvbmRpdGlvbmFsRWRnZXMoc291cmNlLCBwYXRoLCBwYXRoTWFwKSB7XG5cdFx0Y29uc3Qgb3B0aW9ucyA9IHR5cGVvZiBzb3VyY2UgPT09IFwib2JqZWN0XCIgPyBzb3VyY2UgOiB7XG5cdFx0XHRzb3VyY2UsXG5cdFx0XHRwYXRoLFxuXHRcdFx0cGF0aE1hcFxuXHRcdH07XG5cdFx0dGhpcy53YXJuSWZDb21waWxlZChcIkFkZGluZyBhbiBlZGdlIHRvIGEgZ3JhcGggdGhhdCBoYXMgYWxyZWFkeSBiZWVuIGNvbXBpbGVkLiBUaGlzIHdpbGwgbm90IGJlIHJlZmxlY3RlZCBpbiB0aGUgY29tcGlsZWQgZ3JhcGguXCIpO1xuXHRcdGlmICghUnVubmFibGUuaXNSdW5uYWJsZShvcHRpb25zLnBhdGgpKSB7XG5cdFx0XHRjb25zdCBwYXRoRGlzcGxheVZhbHVlcyA9IEFycmF5LmlzQXJyYXkob3B0aW9ucy5wYXRoTWFwKSA/IG9wdGlvbnMucGF0aE1hcC5qb2luKFwiLFwiKSA6IE9iamVjdC5rZXlzKG9wdGlvbnMucGF0aE1hcCA/PyB7fSkuam9pbihcIixcIik7XG5cdFx0XHRvcHRpb25zLnBhdGggPSBfY29lcmNlVG9SdW5uYWJsZShvcHRpb25zLnBhdGgpLndpdGhDb25maWcoeyBydW5OYW1lOiBgQnJhbmNoPCR7b3B0aW9ucy5zb3VyY2V9JHtwYXRoRGlzcGxheVZhbHVlcyAhPT0gXCJcIiA/IGAsJHtwYXRoRGlzcGxheVZhbHVlc31gIDogXCJcIn0+YC5zbGljZSgwLCA2MykgfSk7XG5cdFx0fVxuXHRcdGNvbnN0IG5hbWUgPSBvcHRpb25zLnBhdGguZ2V0TmFtZSgpID09PSBcIlJ1bm5hYmxlTGFtYmRhXCIgPyBcImNvbmRpdGlvblwiIDogb3B0aW9ucy5wYXRoLmdldE5hbWUoKTtcblx0XHRpZiAodGhpcy5icmFuY2hlc1tvcHRpb25zLnNvdXJjZV0gJiYgdGhpcy5icmFuY2hlc1tvcHRpb25zLnNvdXJjZV1bbmFtZV0pIHRocm93IG5ldyBFcnJvcihgQ29uZGl0aW9uIFxcYCR7bmFtZX1cXGAgYWxyZWFkeSBwcmVzZW50IGZvciBub2RlIFxcYCR7c291cmNlfVxcYGApO1xuXHRcdHRoaXMuYnJhbmNoZXNbb3B0aW9ucy5zb3VyY2VdID8/PSB7fTtcblx0XHR0aGlzLmJyYW5jaGVzW29wdGlvbnMuc291cmNlXVtuYW1lXSA9IG5ldyBCcmFuY2gob3B0aW9ucyk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblx0LyoqXG5cdCogQGRlcHJlY2F0ZWQgdXNlIGBhZGRFZGdlKFNUQVJULCBrZXkpYCBpbnN0ZWFkXG5cdCovXG5cdHNldEVudHJ5UG9pbnQoa2V5KSB7XG5cdFx0dGhpcy53YXJuSWZDb21waWxlZChcIlNldHRpbmcgdGhlIGVudHJ5IHBvaW50IG9mIGEgZ3JhcGggdGhhdCBoYXMgYWxyZWFkeSBiZWVuIGNvbXBpbGVkLiBUaGlzIHdpbGwgbm90IGJlIHJlZmxlY3RlZCBpbiB0aGUgY29tcGlsZWQgZ3JhcGguXCIpO1xuXHRcdHJldHVybiB0aGlzLmFkZEVkZ2UoU1RBUlQsIGtleSk7XG5cdH1cblx0LyoqXG5cdCogQGRlcHJlY2F0ZWQgdXNlIGBhZGRFZGdlKGtleSwgRU5EKWAgaW5zdGVhZFxuXHQqL1xuXHRzZXRGaW5pc2hQb2ludChrZXkpIHtcblx0XHR0aGlzLndhcm5JZkNvbXBpbGVkKFwiU2V0dGluZyBhIGZpbmlzaCBwb2ludCBvZiBhIGdyYXBoIHRoYXQgaGFzIGFscmVhZHkgYmVlbiBjb21waWxlZC4gVGhpcyB3aWxsIG5vdCBiZSByZWZsZWN0ZWQgaW4gdGhlIGNvbXBpbGVkIGdyYXBoLlwiKTtcblx0XHRyZXR1cm4gdGhpcy5hZGRFZGdlKGtleSwgRU5EKTtcblx0fVxuXHRjb21waWxlKHsgY2hlY2twb2ludGVyLCBpbnRlcnJ1cHRCZWZvcmUsIGludGVycnVwdEFmdGVyLCBuYW1lIH0gPSB7fSkge1xuXHRcdHRoaXMudmFsaWRhdGUoWy4uLkFycmF5LmlzQXJyYXkoaW50ZXJydXB0QmVmb3JlKSA/IGludGVycnVwdEJlZm9yZSA6IFtdLCAuLi5BcnJheS5pc0FycmF5KGludGVycnVwdEFmdGVyKSA/IGludGVycnVwdEFmdGVyIDogW11dKTtcblx0XHRjb25zdCBjb21waWxlZCA9IG5ldyBDb21waWxlZEdyYXBoKHtcblx0XHRcdGJ1aWxkZXI6IHRoaXMsXG5cdFx0XHRjaGVja3BvaW50ZXIsXG5cdFx0XHRpbnRlcnJ1cHRBZnRlcixcblx0XHRcdGludGVycnVwdEJlZm9yZSxcblx0XHRcdGF1dG9WYWxpZGF0ZTogZmFsc2UsXG5cdFx0XHRub2Rlczoge30sXG5cdFx0XHRjaGFubmVsczoge1xuXHRcdFx0XHRbU1RBUlRdOiBuZXcgRXBoZW1lcmFsVmFsdWUoKSxcblx0XHRcdFx0W0VORF06IG5ldyBFcGhlbWVyYWxWYWx1ZSgpXG5cdFx0XHR9LFxuXHRcdFx0aW5wdXRDaGFubmVsczogU1RBUlQsXG5cdFx0XHRvdXRwdXRDaGFubmVsczogRU5ELFxuXHRcdFx0c3RyZWFtQ2hhbm5lbHM6IFtdLFxuXHRcdFx0c3RyZWFtTW9kZTogXCJ2YWx1ZXNcIixcblx0XHRcdG5hbWVcblx0XHR9KTtcblx0XHRmb3IgKGNvbnN0IFtrZXksIG5vZGVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMubm9kZXMpKSBjb21waWxlZC5hdHRhY2hOb2RlKGtleSwgbm9kZSk7XG5cdFx0Zm9yIChjb25zdCBbc3RhcnQsIGVuZF0gb2YgdGhpcy5lZGdlcykgY29tcGlsZWQuYXR0YWNoRWRnZShzdGFydCwgZW5kKTtcblx0XHRmb3IgKGNvbnN0IFtzdGFydCwgYnJhbmNoZXNdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuYnJhbmNoZXMpKSBmb3IgKGNvbnN0IFtuYW1lJDEsIGJyYW5jaF0gb2YgT2JqZWN0LmVudHJpZXMoYnJhbmNoZXMpKSBjb21waWxlZC5hdHRhY2hCcmFuY2goc3RhcnQsIG5hbWUkMSwgYnJhbmNoKTtcblx0XHRyZXR1cm4gY29tcGlsZWQudmFsaWRhdGUoKTtcblx0fVxuXHR2YWxpZGF0ZShpbnRlcnJ1cHQpIHtcblx0XHRjb25zdCBhbGxTb3VyY2VzID0gbmV3IFNldChbLi4udGhpcy5hbGxFZGdlc10ubWFwKChbc3JjLCBfXSkgPT4gc3JjKSk7XG5cdFx0Zm9yIChjb25zdCBbc3RhcnRdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuYnJhbmNoZXMpKSBhbGxTb3VyY2VzLmFkZChzdGFydCk7XG5cdFx0Zm9yIChjb25zdCBzb3VyY2Ugb2YgYWxsU291cmNlcykgaWYgKHNvdXJjZSAhPT0gU1RBUlQgJiYgIShzb3VyY2UgaW4gdGhpcy5ub2RlcykpIHRocm93IG5ldyBFcnJvcihgRm91bmQgZWRnZSBzdGFydGluZyBhdCB1bmtub3duIG5vZGUgXFxgJHtzb3VyY2V9XFxgYCk7XG5cdFx0Y29uc3QgYWxsVGFyZ2V0cyA9IG5ldyBTZXQoWy4uLnRoaXMuYWxsRWRnZXNdLm1hcCgoW18sIHRhcmdldF0pID0+IHRhcmdldCkpO1xuXHRcdGZvciAoY29uc3QgW3N0YXJ0LCBicmFuY2hlc10gb2YgT2JqZWN0LmVudHJpZXModGhpcy5icmFuY2hlcykpIGZvciAoY29uc3QgYnJhbmNoIG9mIE9iamVjdC52YWx1ZXMoYnJhbmNoZXMpKSBpZiAoYnJhbmNoLmVuZHMgIT0gbnVsbCkgZm9yIChjb25zdCBlbmQgb2YgT2JqZWN0LnZhbHVlcyhicmFuY2guZW5kcykpIGFsbFRhcmdldHMuYWRkKGVuZCk7XG5cdFx0ZWxzZSB7XG5cdFx0XHRhbGxUYXJnZXRzLmFkZChFTkQpO1xuXHRcdFx0Zm9yIChjb25zdCBub2RlIG9mIE9iamVjdC5rZXlzKHRoaXMubm9kZXMpKSBpZiAobm9kZSAhPT0gc3RhcnQpIGFsbFRhcmdldHMuYWRkKG5vZGUpO1xuXHRcdH1cblx0XHRmb3IgKGNvbnN0IG5vZGUgb2YgT2JqZWN0LnZhbHVlcyh0aGlzLm5vZGVzKSkgZm9yIChjb25zdCB0YXJnZXQgb2Ygbm9kZS5lbmRzID8/IFtdKSBhbGxUYXJnZXRzLmFkZCh0YXJnZXQpO1xuXHRcdGZvciAoY29uc3Qgbm9kZSBvZiBPYmplY3Qua2V5cyh0aGlzLm5vZGVzKSkgaWYgKCFhbGxUYXJnZXRzLmhhcyhub2RlKSkgdGhyb3cgbmV3IFVucmVhY2hhYmxlTm9kZUVycm9yKFtcblx0XHRcdGBOb2RlIFxcYCR7bm9kZX1cXGAgaXMgbm90IHJlYWNoYWJsZS5gLFxuXHRcdFx0XCJcIixcblx0XHRcdFwiSWYgeW91IGFyZSByZXR1cm5pbmcgQ29tbWFuZCBvYmplY3RzIGZyb20geW91ciBub2RlLFwiLFxuXHRcdFx0XCJtYWtlIHN1cmUgeW91IGFyZSBwYXNzaW5nIG5hbWVzIG9mIHBvdGVudGlhbCBkZXN0aW5hdGlvbiBub2RlcyBhcyBhbiBcXFwiZW5kc1xcXCIgYXJyYXlcIixcblx0XHRcdFwiaW50byBcXFwiLmFkZE5vZGUoLi4uLCB7IGVuZHM6IFtcXFwibm9kZTFcXFwiLCBcXFwibm9kZTJcXFwiXSB9KVxcXCIuXCJcblx0XHRdLmpvaW4oXCJcXG5cIiksIHsgbGNfZXJyb3JfY29kZTogXCJVTlJFQUNIQUJMRV9OT0RFXCIgfSk7XG5cdFx0Zm9yIChjb25zdCB0YXJnZXQgb2YgYWxsVGFyZ2V0cykgaWYgKHRhcmdldCAhPT0gRU5EICYmICEodGFyZ2V0IGluIHRoaXMubm9kZXMpKSB0aHJvdyBuZXcgRXJyb3IoYEZvdW5kIGVkZ2UgZW5kaW5nIGF0IHVua25vd24gbm9kZSBcXGAke3RhcmdldH1cXGBgKTtcblx0XHRpZiAoaW50ZXJydXB0KSB7XG5cdFx0XHRmb3IgKGNvbnN0IG5vZGUgb2YgaW50ZXJydXB0KSBpZiAoIShub2RlIGluIHRoaXMubm9kZXMpKSB0aHJvdyBuZXcgRXJyb3IoYEludGVycnVwdCBub2RlIFxcYCR7bm9kZX1cXGAgaXMgbm90IHByZXNlbnRgKTtcblx0XHR9XG5cdFx0dGhpcy5jb21waWxlZCA9IHRydWU7XG5cdH1cbn07XG52YXIgQ29tcGlsZWRHcmFwaCA9IGNsYXNzIGV4dGVuZHMgUHJlZ2VsIHtcblx0YnVpbGRlcjtcblx0Y29uc3RydWN0b3IoeyBidWlsZGVyLCAuLi5yZXN0IH0pIHtcblx0XHRzdXBlcihyZXN0KTtcblx0XHR0aGlzLmJ1aWxkZXIgPSBidWlsZGVyO1xuXHR9XG5cdGF0dGFjaE5vZGUoa2V5LCBub2RlKSB7XG5cdFx0dGhpcy5jaGFubmVsc1trZXldID0gbmV3IEVwaGVtZXJhbFZhbHVlKCk7XG5cdFx0dGhpcy5ub2Rlc1trZXldID0gbmV3IFByZWdlbE5vZGUoe1xuXHRcdFx0Y2hhbm5lbHM6IFtdLFxuXHRcdFx0dHJpZ2dlcnM6IFtdLFxuXHRcdFx0bWV0YWRhdGE6IG5vZGUubWV0YWRhdGEsXG5cdFx0XHRzdWJncmFwaHM6IG5vZGUuc3ViZ3JhcGhzLFxuXHRcdFx0ZW5kczogbm9kZS5lbmRzXG5cdFx0fSkucGlwZShub2RlLnJ1bm5hYmxlKS5waXBlKG5ldyBDaGFubmVsV3JpdGUoW3tcblx0XHRcdGNoYW5uZWw6IGtleSxcblx0XHRcdHZhbHVlOiBQQVNTVEhST1VHSFxuXHRcdH1dLCBbVEFHX0hJRERFTl0pKTtcblx0XHR0aGlzLnN0cmVhbUNoYW5uZWxzLnB1c2goa2V5KTtcblx0fVxuXHRhdHRhY2hFZGdlKHN0YXJ0LCBlbmQpIHtcblx0XHRpZiAoZW5kID09PSBFTkQpIHtcblx0XHRcdGlmIChzdGFydCA9PT0gU1RBUlQpIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBoYXZlIGFuIGVkZ2UgZnJvbSBTVEFSVCB0byBFTkRcIik7XG5cdFx0XHR0aGlzLm5vZGVzW3N0YXJ0XS53cml0ZXJzLnB1c2gobmV3IENoYW5uZWxXcml0ZShbe1xuXHRcdFx0XHRjaGFubmVsOiBFTkQsXG5cdFx0XHRcdHZhbHVlOiBQQVNTVEhST1VHSFxuXHRcdFx0fV0sIFtUQUdfSElEREVOXSkpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLm5vZGVzW2VuZF0udHJpZ2dlcnMucHVzaChzdGFydCk7XG5cdFx0XHR0aGlzLm5vZGVzW2VuZF0uY2hhbm5lbHMucHVzaChzdGFydCk7XG5cdFx0fVxuXHR9XG5cdGF0dGFjaEJyYW5jaChzdGFydCwgbmFtZSwgYnJhbmNoKSB7XG5cdFx0aWYgKHN0YXJ0ID09PSBTVEFSVCAmJiAhdGhpcy5ub2Rlc1tTVEFSVF0pIHRoaXMubm9kZXNbU1RBUlRdID0gQ2hhbm5lbC5zdWJzY3JpYmVUbyhTVEFSVCwgeyB0YWdzOiBbVEFHX0hJRERFTl0gfSk7XG5cdFx0dGhpcy5ub2Rlc1tzdGFydF0ucGlwZShicmFuY2gucnVuKChkZXN0cykgPT4ge1xuXHRcdFx0cmV0dXJuIG5ldyBDaGFubmVsV3JpdGUoZGVzdHMubWFwKChkZXN0KSA9PiB7XG5cdFx0XHRcdGlmIChfaXNTZW5kKGRlc3QpKSByZXR1cm4gZGVzdDtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRjaGFubmVsOiBkZXN0ID09PSBFTkQgPyBFTkQgOiBgYnJhbmNoOiR7c3RhcnR9OiR7bmFtZX06JHtkZXN0fWAsXG5cdFx0XHRcdFx0dmFsdWU6IFBBU1NUSFJPVUdIXG5cdFx0XHRcdH07XG5cdFx0XHR9KSwgW1RBR19ISURERU5dKTtcblx0XHR9KSk7XG5cdFx0Y29uc3QgZW5kcyA9IGJyYW5jaC5lbmRzID8gT2JqZWN0LnZhbHVlcyhicmFuY2guZW5kcykgOiBPYmplY3Qua2V5cyh0aGlzLm5vZGVzKTtcblx0XHRmb3IgKGNvbnN0IGVuZCBvZiBlbmRzKSBpZiAoZW5kICE9PSBFTkQpIHtcblx0XHRcdGNvbnN0IGNoYW5uZWxOYW1lID0gYGJyYW5jaDoke3N0YXJ0fToke25hbWV9OiR7ZW5kfWA7XG5cdFx0XHR0aGlzLmNoYW5uZWxzW2NoYW5uZWxOYW1lXSA9IG5ldyBFcGhlbWVyYWxWYWx1ZSgpO1xuXHRcdFx0dGhpcy5ub2Rlc1tlbmRdLnRyaWdnZXJzLnB1c2goY2hhbm5lbE5hbWUpO1xuXHRcdFx0dGhpcy5ub2Rlc1tlbmRdLmNoYW5uZWxzLnB1c2goY2hhbm5lbE5hbWUpO1xuXHRcdH1cblx0fVxuXHQvKipcblx0KiBSZXR1cm5zIGEgZHJhd2FibGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIGNvbXB1dGF0aW9uIGdyYXBoLlxuXHQqL1xuXHRhc3luYyBnZXRHcmFwaEFzeW5jKGNvbmZpZykge1xuXHRcdGNvbnN0IHhyYXkgPSBjb25maWc/LnhyYXk7XG5cdFx0Y29uc3QgZ3JhcGggPSBuZXcgR3JhcGgoKTtcblx0XHRjb25zdCBzdGFydE5vZGVzID0geyBbU1RBUlRdOiBncmFwaC5hZGROb2RlKHsgc2NoZW1hOiB6LmFueSgpIH0sIFNUQVJUKSB9O1xuXHRcdGNvbnN0IGVuZE5vZGVzID0ge307XG5cdFx0bGV0IHN1YmdyYXBocyA9IHt9O1xuXHRcdGlmICh4cmF5KSBzdWJncmFwaHMgPSBPYmplY3QuZnJvbUVudHJpZXMoKGF3YWl0IGdhdGhlckl0ZXJhdG9yKHRoaXMuZ2V0U3ViZ3JhcGhzQXN5bmMoKSkpLmZpbHRlcigoeCkgPT4gaXNDb21waWxlZEdyYXBoKHhbMV0pKSk7XG5cdFx0ZnVuY3Rpb24gYWRkRWRnZShzdGFydCwgZW5kLCBsYWJlbCwgY29uZGl0aW9uYWwgPSBmYWxzZSkge1xuXHRcdFx0aWYgKGVuZCA9PT0gRU5EICYmIGVuZE5vZGVzW0VORF0gPT09IHZvaWQgMCkgZW5kTm9kZXNbRU5EXSA9IGdyYXBoLmFkZE5vZGUoeyBzY2hlbWE6IHouYW55KCkgfSwgRU5EKTtcblx0XHRcdGlmIChzdGFydE5vZGVzW3N0YXJ0XSA9PT0gdm9pZCAwKSByZXR1cm47XG5cdFx0XHRpZiAoZW5kTm9kZXNbZW5kXSA9PT0gdm9pZCAwKSB0aHJvdyBuZXcgRXJyb3IoYEVuZCBub2RlICR7ZW5kfSBub3QgZm91bmQhYCk7XG5cdFx0XHRyZXR1cm4gZ3JhcGguYWRkRWRnZShzdGFydE5vZGVzW3N0YXJ0XSwgZW5kTm9kZXNbZW5kXSwgbGFiZWwgIT09IGVuZCA/IGxhYmVsIDogdm9pZCAwLCBjb25kaXRpb25hbCk7XG5cdFx0fVxuXHRcdGZvciAoY29uc3QgW2tleSwgbm9kZVNwZWNdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuYnVpbGRlci5ub2RlcykpIHtcblx0XHRcdGNvbnN0IGRpc3BsYXlLZXkgPSBfZXNjYXBlTWVybWFpZEtleXdvcmRzKGtleSk7XG5cdFx0XHRjb25zdCBub2RlID0gbm9kZVNwZWMucnVubmFibGU7XG5cdFx0XHRjb25zdCBtZXRhZGF0YSA9IG5vZGVTcGVjLm1ldGFkYXRhID8/IHt9O1xuXHRcdFx0aWYgKHRoaXMuaW50ZXJydXB0QmVmb3JlPy5pbmNsdWRlcyhrZXkpICYmIHRoaXMuaW50ZXJydXB0QWZ0ZXI/LmluY2x1ZGVzKGtleSkpIG1ldGFkYXRhLl9faW50ZXJydXB0ID0gXCJiZWZvcmUsYWZ0ZXJcIjtcblx0XHRcdGVsc2UgaWYgKHRoaXMuaW50ZXJydXB0QmVmb3JlPy5pbmNsdWRlcyhrZXkpKSBtZXRhZGF0YS5fX2ludGVycnVwdCA9IFwiYmVmb3JlXCI7XG5cdFx0XHRlbHNlIGlmICh0aGlzLmludGVycnVwdEFmdGVyPy5pbmNsdWRlcyhrZXkpKSBtZXRhZGF0YS5fX2ludGVycnVwdCA9IFwiYWZ0ZXJcIjtcblx0XHRcdGlmICh4cmF5KSB7XG5cdFx0XHRcdGNvbnN0IG5ld1hyYXlWYWx1ZSA9IHR5cGVvZiB4cmF5ID09PSBcIm51bWJlclwiID8geHJheSAtIDEgOiB4cmF5O1xuXHRcdFx0XHRjb25zdCBkcmF3YWJsZVN1YmdyYXBoID0gc3ViZ3JhcGhzW2tleV0gIT09IHZvaWQgMCA/IGF3YWl0IHN1YmdyYXBoc1trZXldLmdldEdyYXBoQXN5bmMoe1xuXHRcdFx0XHRcdC4uLmNvbmZpZyxcblx0XHRcdFx0XHR4cmF5OiBuZXdYcmF5VmFsdWVcblx0XHRcdFx0fSkgOiBub2RlLmdldEdyYXBoKGNvbmZpZyk7XG5cdFx0XHRcdGRyYXdhYmxlU3ViZ3JhcGgudHJpbUZpcnN0Tm9kZSgpO1xuXHRcdFx0XHRkcmF3YWJsZVN1YmdyYXBoLnRyaW1MYXN0Tm9kZSgpO1xuXHRcdFx0XHRpZiAoT2JqZWN0LmtleXMoZHJhd2FibGVTdWJncmFwaC5ub2RlcykubGVuZ3RoID4gMSkge1xuXHRcdFx0XHRcdGNvbnN0IFtlLCBzXSA9IGdyYXBoLmV4dGVuZChkcmF3YWJsZVN1YmdyYXBoLCBkaXNwbGF5S2V5KTtcblx0XHRcdFx0XHRpZiAoZSA9PT0gdm9pZCAwKSB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBleHRlbmQgc3ViZ3JhcGggXCIke2tleX1cIiBkdWUgdG8gbWlzc2luZyBlbnRyeXBvaW50LmApO1xuXHRcdFx0XHRcdGZ1bmN0aW9uIF9pc1J1bm5hYmxlSW50ZXJmYWNlKHRoaW5nKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdGhpbmcgPyB0aGluZy5sY19ydW5uYWJsZSA6IGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRmdW5jdGlvbiBfbm9kZURhdGFTdHIoaWQsIGRhdGEpIHtcblx0XHRcdFx0XHRcdGlmIChpZCAhPT0gdm9pZCAwICYmICF2YWxpZGF0ZShpZCkpIHJldHVybiBpZDtcblx0XHRcdFx0XHRcdGVsc2UgaWYgKF9pc1J1bm5hYmxlSW50ZXJmYWNlKGRhdGEpKSB0cnkge1xuXHRcdFx0XHRcdFx0XHRsZXQgZGF0YVN0ciA9IGRhdGEuZ2V0TmFtZSgpO1xuXHRcdFx0XHRcdFx0XHRkYXRhU3RyID0gZGF0YVN0ci5zdGFydHNXaXRoKFwiUnVubmFibGVcIikgPyBkYXRhU3RyLnNsaWNlKDgpIDogZGF0YVN0cjtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGRhdGFTdHI7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZGF0YS5nZXROYW1lKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNlIHJldHVybiBkYXRhLm5hbWUgPz8gXCJVbmtub3duU2NoZW1hXCI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChzICE9PSB2b2lkIDApIHN0YXJ0Tm9kZXNbZGlzcGxheUtleV0gPSB7XG5cdFx0XHRcdFx0XHRuYW1lOiBfbm9kZURhdGFTdHIocy5pZCwgcy5kYXRhKSxcblx0XHRcdFx0XHRcdC4uLnNcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdGVuZE5vZGVzW2Rpc3BsYXlLZXldID0ge1xuXHRcdFx0XHRcdFx0bmFtZTogX25vZGVEYXRhU3RyKGUuaWQsIGUuZGF0YSksXG5cdFx0XHRcdFx0XHQuLi5lXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb25zdCBuZXdOb2RlID0gZ3JhcGguYWRkTm9kZShub2RlLCBkaXNwbGF5S2V5LCBtZXRhZGF0YSk7XG5cdFx0XHRcdFx0c3RhcnROb2Rlc1tkaXNwbGF5S2V5XSA9IG5ld05vZGU7XG5cdFx0XHRcdFx0ZW5kTm9kZXNbZGlzcGxheUtleV0gPSBuZXdOb2RlO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zdCBuZXdOb2RlID0gZ3JhcGguYWRkTm9kZShub2RlLCBkaXNwbGF5S2V5LCBtZXRhZGF0YSk7XG5cdFx0XHRcdHN0YXJ0Tm9kZXNbZGlzcGxheUtleV0gPSBuZXdOb2RlO1xuXHRcdFx0XHRlbmROb2Rlc1tkaXNwbGF5S2V5XSA9IG5ld05vZGU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IHNvcnRlZEVkZ2VzID0gWy4uLnRoaXMuYnVpbGRlci5hbGxFZGdlc10uc29ydCgoW2FdLCBbYl0pID0+IHtcblx0XHRcdGlmIChhIDwgYikgcmV0dXJuIC0xO1xuXHRcdFx0ZWxzZSBpZiAoYiA+IGEpIHJldHVybiAxO1xuXHRcdFx0ZWxzZSByZXR1cm4gMDtcblx0XHR9KTtcblx0XHRmb3IgKGNvbnN0IFtzdGFydCwgZW5kXSBvZiBzb3J0ZWRFZGdlcykgYWRkRWRnZShfZXNjYXBlTWVybWFpZEtleXdvcmRzKHN0YXJ0KSwgX2VzY2FwZU1lcm1haWRLZXl3b3JkcyhlbmQpKTtcblx0XHRmb3IgKGNvbnN0IFtzdGFydCwgYnJhbmNoZXNdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuYnVpbGRlci5icmFuY2hlcykpIHtcblx0XHRcdGNvbnN0IGRlZmF1bHRFbmRzID0ge1xuXHRcdFx0XHQuLi5PYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmtleXModGhpcy5idWlsZGVyLm5vZGVzKS5maWx0ZXIoKGspID0+IGsgIT09IHN0YXJ0KS5tYXAoKGspID0+IFtfZXNjYXBlTWVybWFpZEtleXdvcmRzKGspLCBfZXNjYXBlTWVybWFpZEtleXdvcmRzKGspXSkpLFxuXHRcdFx0XHRbRU5EXTogRU5EXG5cdFx0XHR9O1xuXHRcdFx0Zm9yIChjb25zdCBicmFuY2ggb2YgT2JqZWN0LnZhbHVlcyhicmFuY2hlcykpIHtcblx0XHRcdFx0bGV0IGVuZHM7XG5cdFx0XHRcdGlmIChicmFuY2guZW5kcyAhPT0gdm9pZCAwKSBlbmRzID0gYnJhbmNoLmVuZHM7XG5cdFx0XHRcdGVsc2UgZW5kcyA9IGRlZmF1bHRFbmRzO1xuXHRcdFx0XHRmb3IgKGNvbnN0IFtsYWJlbCwgZW5kXSBvZiBPYmplY3QuZW50cmllcyhlbmRzKSkgYWRkRWRnZShfZXNjYXBlTWVybWFpZEtleXdvcmRzKHN0YXJ0KSwgX2VzY2FwZU1lcm1haWRLZXl3b3JkcyhlbmQpLCBsYWJlbCwgdHJ1ZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGZvciAoY29uc3QgW2tleSwgbm9kZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5idWlsZGVyLm5vZGVzKSkgaWYgKG5vZGUuZW5kcyAhPT0gdm9pZCAwKSBmb3IgKGNvbnN0IGVuZCBvZiBub2RlLmVuZHMpIGFkZEVkZ2UoX2VzY2FwZU1lcm1haWRLZXl3b3JkcyhrZXkpLCBfZXNjYXBlTWVybWFpZEtleXdvcmRzKGVuZCksIHZvaWQgMCwgdHJ1ZSk7XG5cdFx0cmV0dXJuIGdyYXBoO1xuXHR9XG5cdC8qKlxuXHQqIFJldHVybnMgYSBkcmF3YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgY29tcHV0YXRpb24gZ3JhcGguXG5cdCpcblx0KiBAZGVwcmVjYXRlZCBVc2UgZ2V0R3JhcGhBc3luYyBpbnN0ZWFkLiBUaGUgYXN5bmMgbWV0aG9kIHdpbGwgYmUgdGhlIGRlZmF1bHQgaW4gdGhlIG5leHQgbWlub3IgY29yZSByZWxlYXNlLlxuXHQqL1xuXHRnZXRHcmFwaChjb25maWcpIHtcblx0XHRjb25zdCB4cmF5ID0gY29uZmlnPy54cmF5O1xuXHRcdGNvbnN0IGdyYXBoID0gbmV3IEdyYXBoKCk7XG5cdFx0Y29uc3Qgc3RhcnROb2RlcyA9IHsgW1NUQVJUXTogZ3JhcGguYWRkTm9kZSh7IHNjaGVtYTogei5hbnkoKSB9LCBTVEFSVCkgfTtcblx0XHRjb25zdCBlbmROb2RlcyA9IHt9O1xuXHRcdGxldCBzdWJncmFwaHMgPSB7fTtcblx0XHRpZiAoeHJheSkgc3ViZ3JhcGhzID0gT2JqZWN0LmZyb21FbnRyaWVzKGdhdGhlckl0ZXJhdG9yU3luYyh0aGlzLmdldFN1YmdyYXBocygpKS5maWx0ZXIoKHgpID0+IGlzQ29tcGlsZWRHcmFwaCh4WzFdKSkpO1xuXHRcdGZ1bmN0aW9uIGFkZEVkZ2Uoc3RhcnQsIGVuZCwgbGFiZWwsIGNvbmRpdGlvbmFsID0gZmFsc2UpIHtcblx0XHRcdGlmIChlbmQgPT09IEVORCAmJiBlbmROb2Rlc1tFTkRdID09PSB2b2lkIDApIGVuZE5vZGVzW0VORF0gPSBncmFwaC5hZGROb2RlKHsgc2NoZW1hOiB6LmFueSgpIH0sIEVORCk7XG5cdFx0XHRyZXR1cm4gZ3JhcGguYWRkRWRnZShzdGFydE5vZGVzW3N0YXJ0XSwgZW5kTm9kZXNbZW5kXSwgbGFiZWwgIT09IGVuZCA/IGxhYmVsIDogdm9pZCAwLCBjb25kaXRpb25hbCk7XG5cdFx0fVxuXHRcdGZvciAoY29uc3QgW2tleSwgbm9kZVNwZWNdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuYnVpbGRlci5ub2RlcykpIHtcblx0XHRcdGNvbnN0IGRpc3BsYXlLZXkgPSBfZXNjYXBlTWVybWFpZEtleXdvcmRzKGtleSk7XG5cdFx0XHRjb25zdCBub2RlID0gbm9kZVNwZWMucnVubmFibGU7XG5cdFx0XHRjb25zdCBtZXRhZGF0YSA9IG5vZGVTcGVjLm1ldGFkYXRhID8/IHt9O1xuXHRcdFx0aWYgKHRoaXMuaW50ZXJydXB0QmVmb3JlPy5pbmNsdWRlcyhrZXkpICYmIHRoaXMuaW50ZXJydXB0QWZ0ZXI/LmluY2x1ZGVzKGtleSkpIG1ldGFkYXRhLl9faW50ZXJydXB0ID0gXCJiZWZvcmUsYWZ0ZXJcIjtcblx0XHRcdGVsc2UgaWYgKHRoaXMuaW50ZXJydXB0QmVmb3JlPy5pbmNsdWRlcyhrZXkpKSBtZXRhZGF0YS5fX2ludGVycnVwdCA9IFwiYmVmb3JlXCI7XG5cdFx0XHRlbHNlIGlmICh0aGlzLmludGVycnVwdEFmdGVyPy5pbmNsdWRlcyhrZXkpKSBtZXRhZGF0YS5fX2ludGVycnVwdCA9IFwiYWZ0ZXJcIjtcblx0XHRcdGlmICh4cmF5KSB7XG5cdFx0XHRcdGNvbnN0IG5ld1hyYXlWYWx1ZSA9IHR5cGVvZiB4cmF5ID09PSBcIm51bWJlclwiID8geHJheSAtIDEgOiB4cmF5O1xuXHRcdFx0XHRjb25zdCBkcmF3YWJsZVN1YmdyYXBoID0gc3ViZ3JhcGhzW2tleV0gIT09IHZvaWQgMCA/IHN1YmdyYXBoc1trZXldLmdldEdyYXBoKHtcblx0XHRcdFx0XHQuLi5jb25maWcsXG5cdFx0XHRcdFx0eHJheTogbmV3WHJheVZhbHVlXG5cdFx0XHRcdH0pIDogbm9kZS5nZXRHcmFwaChjb25maWcpO1xuXHRcdFx0XHRkcmF3YWJsZVN1YmdyYXBoLnRyaW1GaXJzdE5vZGUoKTtcblx0XHRcdFx0ZHJhd2FibGVTdWJncmFwaC50cmltTGFzdE5vZGUoKTtcblx0XHRcdFx0aWYgKE9iamVjdC5rZXlzKGRyYXdhYmxlU3ViZ3JhcGgubm9kZXMpLmxlbmd0aCA+IDEpIHtcblx0XHRcdFx0XHRjb25zdCBbZSwgc10gPSBncmFwaC5leHRlbmQoZHJhd2FibGVTdWJncmFwaCwgZGlzcGxheUtleSk7XG5cdFx0XHRcdFx0aWYgKGUgPT09IHZvaWQgMCkgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZXh0ZW5kIHN1YmdyYXBoIFwiJHtrZXl9XCIgZHVlIHRvIG1pc3NpbmcgZW50cnlwb2ludC5gKTtcblx0XHRcdFx0XHRmdW5jdGlvbiBfaXNSdW5uYWJsZUludGVyZmFjZSh0aGluZykge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRoaW5nID8gdGhpbmcubGNfcnVubmFibGUgOiBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZnVuY3Rpb24gX25vZGVEYXRhU3RyKGlkLCBkYXRhKSB7XG5cdFx0XHRcdFx0XHRpZiAoaWQgIT09IHZvaWQgMCAmJiAhdmFsaWRhdGUoaWQpKSByZXR1cm4gaWQ7XG5cdFx0XHRcdFx0XHRlbHNlIGlmIChfaXNSdW5uYWJsZUludGVyZmFjZShkYXRhKSkgdHJ5IHtcblx0XHRcdFx0XHRcdFx0bGV0IGRhdGFTdHIgPSBkYXRhLmdldE5hbWUoKTtcblx0XHRcdFx0XHRcdFx0ZGF0YVN0ciA9IGRhdGFTdHIuc3RhcnRzV2l0aChcIlJ1bm5hYmxlXCIpID8gZGF0YVN0ci5zbGljZSg4KSA6IGRhdGFTdHI7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBkYXRhU3RyO1xuXHRcdFx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGRhdGEuZ2V0TmFtZSgpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZSByZXR1cm4gZGF0YS5uYW1lID8/IFwiVW5rbm93blNjaGVtYVwiO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAocyAhPT0gdm9pZCAwKSBzdGFydE5vZGVzW2Rpc3BsYXlLZXldID0ge1xuXHRcdFx0XHRcdFx0bmFtZTogX25vZGVEYXRhU3RyKHMuaWQsIHMuZGF0YSksXG5cdFx0XHRcdFx0XHQuLi5zXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRlbmROb2Rlc1tkaXNwbGF5S2V5XSA9IHtcblx0XHRcdFx0XHRcdG5hbWU6IF9ub2RlRGF0YVN0cihlLmlkLCBlLmRhdGEpLFxuXHRcdFx0XHRcdFx0Li4uZVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29uc3QgbmV3Tm9kZSA9IGdyYXBoLmFkZE5vZGUobm9kZSwgZGlzcGxheUtleSwgbWV0YWRhdGEpO1xuXHRcdFx0XHRcdHN0YXJ0Tm9kZXNbZGlzcGxheUtleV0gPSBuZXdOb2RlO1xuXHRcdFx0XHRcdGVuZE5vZGVzW2Rpc3BsYXlLZXldID0gbmV3Tm9kZTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc3QgbmV3Tm9kZSA9IGdyYXBoLmFkZE5vZGUobm9kZSwgZGlzcGxheUtleSwgbWV0YWRhdGEpO1xuXHRcdFx0XHRzdGFydE5vZGVzW2Rpc3BsYXlLZXldID0gbmV3Tm9kZTtcblx0XHRcdFx0ZW5kTm9kZXNbZGlzcGxheUtleV0gPSBuZXdOb2RlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRjb25zdCBzb3J0ZWRFZGdlcyA9IFsuLi50aGlzLmJ1aWxkZXIuYWxsRWRnZXNdLnNvcnQoKFthXSwgW2JdKSA9PiB7XG5cdFx0XHRpZiAoYSA8IGIpIHJldHVybiAtMTtcblx0XHRcdGVsc2UgaWYgKGIgPiBhKSByZXR1cm4gMTtcblx0XHRcdGVsc2UgcmV0dXJuIDA7XG5cdFx0fSk7XG5cdFx0Zm9yIChjb25zdCBbc3RhcnQsIGVuZF0gb2Ygc29ydGVkRWRnZXMpIGFkZEVkZ2UoX2VzY2FwZU1lcm1haWRLZXl3b3JkcyhzdGFydCksIF9lc2NhcGVNZXJtYWlkS2V5d29yZHMoZW5kKSk7XG5cdFx0Zm9yIChjb25zdCBbc3RhcnQsIGJyYW5jaGVzXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLmJ1aWxkZXIuYnJhbmNoZXMpKSB7XG5cdFx0XHRjb25zdCBkZWZhdWx0RW5kcyA9IHtcblx0XHRcdFx0Li4uT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5rZXlzKHRoaXMuYnVpbGRlci5ub2RlcykuZmlsdGVyKChrKSA9PiBrICE9PSBzdGFydCkubWFwKChrKSA9PiBbX2VzY2FwZU1lcm1haWRLZXl3b3JkcyhrKSwgX2VzY2FwZU1lcm1haWRLZXl3b3JkcyhrKV0pKSxcblx0XHRcdFx0W0VORF06IEVORFxuXHRcdFx0fTtcblx0XHRcdGZvciAoY29uc3QgYnJhbmNoIG9mIE9iamVjdC52YWx1ZXMoYnJhbmNoZXMpKSB7XG5cdFx0XHRcdGxldCBlbmRzO1xuXHRcdFx0XHRpZiAoYnJhbmNoLmVuZHMgIT09IHZvaWQgMCkgZW5kcyA9IGJyYW5jaC5lbmRzO1xuXHRcdFx0XHRlbHNlIGVuZHMgPSBkZWZhdWx0RW5kcztcblx0XHRcdFx0Zm9yIChjb25zdCBbbGFiZWwsIGVuZF0gb2YgT2JqZWN0LmVudHJpZXMoZW5kcykpIGFkZEVkZ2UoX2VzY2FwZU1lcm1haWRLZXl3b3JkcyhzdGFydCksIF9lc2NhcGVNZXJtYWlkS2V5d29yZHMoZW5kKSwgbGFiZWwsIHRydWUpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gZ3JhcGg7XG5cdH1cbn07XG5mdW5jdGlvbiBpc0NvbXBpbGVkR3JhcGgoeCkge1xuXHRyZXR1cm4gdHlwZW9mIHguYXR0YWNoTm9kZSA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiB4LmF0dGFjaEVkZ2UgPT09IFwiZnVuY3Rpb25cIjtcbn1cbmZ1bmN0aW9uIF9lc2NhcGVNZXJtYWlkS2V5d29yZHMoa2V5KSB7XG5cdGlmIChrZXkgPT09IFwic3ViZ3JhcGhcIikgcmV0dXJuIGBcIiR7a2V5fVwiYDtcblx0cmV0dXJuIGtleTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBCcmFuY2gsIENvbXBpbGVkR3JhcGgsIEdyYXBoJDEgYXMgR3JhcGggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdyYXBoLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/graph/graph.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/graph/index.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/graph/index.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _annotation_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./annotation.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/graph/annotation.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _graph_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./graph.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/graph/graph.js\");\n/* harmony import */ var _state_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./state.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/graph/state.js\");\n/* harmony import */ var _message_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./message.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/graph/message.js\");\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9ncmFwaC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkQ7QUFDWDtBQUNmO0FBQ3lCO0FBQ3dDIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9ncmFwaC9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBbm5vdGF0aW9uLCBBbm5vdGF0aW9uUm9vdCB9IGZyb20gXCIuL2Fubm90YXRpb24uanNcIjtcbmltcG9ydCB7IENvbW1hbmRJbnN0YW5jZSB9IGZyb20gXCIuLi9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7IEdyYXBoIH0gZnJvbSBcIi4vZ3JhcGguanNcIjtcbmltcG9ydCB7IENvbXBpbGVkU3RhdGVHcmFwaCwgU3RhdGVHcmFwaCB9IGZyb20gXCIuL3N0YXRlLmpzXCI7XG5pbXBvcnQgeyBNZXNzYWdlR3JhcGgsIFJFTU9WRV9BTExfTUVTU0FHRVMsIG1lc3NhZ2VzU3RhdGVSZWR1Y2VyLCBwdXNoTWVzc2FnZSB9IGZyb20gXCIuL21lc3NhZ2UuanNcIjtcblxuZXhwb3J0IHsgIH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/graph/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/graph/message.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/graph/message.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MessageGraph: () => (/* binding */ MessageGraph),\n/* harmony export */   REMOVE_ALL_MESSAGES: () => (/* binding */ REMOVE_ALL_MESSAGES),\n/* harmony export */   messagesStateReducer: () => (/* binding */ messagesStateReducer),\n/* harmony export */   pushMessage: () => (/* binding */ pushMessage)\n/* harmony export */ });\n/* harmony import */ var _pregel_utils_config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../pregel/utils/config.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/utils/config.js\");\n/* harmony import */ var _state_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./state.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/graph/state.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! uuid */ \"(ssr)/./node_modules/@langchain/langgraph/node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _langchain_core_messages__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @langchain/core/messages */ \"(ssr)/./node_modules/@langchain/core/dist/messages/index.js\");\n\n\n\n\n\n//#region src/graph/message.ts\nconst REMOVE_ALL_MESSAGES = \"__remove_all__\";\n/**\n* Prebuilt reducer that combines returned messages.\n* Can handle standard messages and special modifiers like {@link RemoveMessage}\n* instances.\n*/\nfunction messagesStateReducer(left, right) {\n\tconst leftArray = Array.isArray(left) ? left : [left];\n\tconst rightArray = Array.isArray(right) ? right : [right];\n\tconst leftMessages = leftArray.map(_langchain_core_messages__WEBPACK_IMPORTED_MODULE_2__.coerceMessageLikeToMessage);\n\tconst rightMessages = rightArray.map(_langchain_core_messages__WEBPACK_IMPORTED_MODULE_2__.coerceMessageLikeToMessage);\n\tfor (const m of leftMessages) if (m.id === null || m.id === void 0) {\n\t\tm.id = (0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\n\t\tm.lc_kwargs.id = m.id;\n\t}\n\tlet removeAllIdx;\n\tfor (let i = 0; i < rightMessages.length; i += 1) {\n\t\tconst m = rightMessages[i];\n\t\tif (m.id === null || m.id === void 0) {\n\t\t\tm.id = (0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\n\t\t\tm.lc_kwargs.id = m.id;\n\t\t}\n\t\tif (m.getType() === \"remove\" && m.id === REMOVE_ALL_MESSAGES) removeAllIdx = i;\n\t}\n\tif (removeAllIdx != null) return rightMessages.slice(removeAllIdx + 1);\n\tconst merged = [...leftMessages];\n\tconst mergedById = new Map(merged.map((m, i) => [m.id, i]));\n\tconst idsToRemove = /* @__PURE__ */ new Set();\n\tfor (const m of rightMessages) {\n\t\tconst existingIdx = mergedById.get(m.id);\n\t\tif (existingIdx !== void 0) if (m.getType() === \"remove\") idsToRemove.add(m.id);\n\t\telse {\n\t\t\tidsToRemove.delete(m.id);\n\t\t\tmerged[existingIdx] = m;\n\t\t}\n\t\telse {\n\t\t\tif (m.getType() === \"remove\") throw new Error(`Attempting to delete a message with an ID that doesn't exist ('${m.id}')`);\n\t\t\tmergedById.set(m.id, merged.length);\n\t\t\tmerged.push(m);\n\t\t}\n\t}\n\treturn merged.filter((m) => !idsToRemove.has(m.id));\n}\n/** @ignore */\nvar MessageGraph = class extends _state_js__WEBPACK_IMPORTED_MODULE_1__.StateGraph {\n\tconstructor() {\n\t\tsuper({ channels: { __root__: {\n\t\t\treducer: messagesStateReducer,\n\t\t\tdefault: () => []\n\t\t} } });\n\t}\n};\n/**\n* Manually push a message to a message stream.\n*\n* This is useful when you need to push a manually created message before the node\n* has finished executing.\n*\n* When a message is pushed, it will be automatically persisted to the state after the node has finished executing.\n* To disable persisting, set `options.stateKey` to `null`.\n*\n* @param message The message to push. The message must have an ID set, otherwise an error will be thrown.\n* @param options RunnableConfig / Runtime coming from node context.\n*/\nfunction pushMessage(message, options) {\n\tconst { stateKey: userStateKey, ...userConfig } = options ?? {};\n\tconst config = (0,_pregel_utils_config_js__WEBPACK_IMPORTED_MODULE_0__.ensureLangGraphConfig)(userConfig);\n\tlet stateKey = userStateKey ?? \"messages\";\n\tif (userStateKey === null) stateKey = void 0;\n\tconst validMessage = (0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_2__.coerceMessageLikeToMessage)(message);\n\tif (!validMessage.id) throw new Error(\"Message ID is required.\");\n\tconst messagesHandler = (() => {\n\t\tif (Array.isArray(config.callbacks)) return config.callbacks;\n\t\tif (typeof config.callbacks !== \"undefined\") return config.callbacks.handlers;\n\t\treturn [];\n\t})().find((cb) => \"name\" in cb && cb.name === \"StreamMessagesHandler\");\n\tif (messagesHandler) {\n\t\tconst metadata = config.metadata ?? {};\n\t\tconst namespace = (metadata.langgraph_checkpoint_ns ?? \"\").split(\"|\");\n\t\tmessagesHandler._emit([namespace, metadata], validMessage, void 0, false);\n\t}\n\tif (stateKey) config.configurable?.__pregel_send?.([[stateKey, validMessage]]);\n\treturn validMessage;\n}\n\n//#endregion\n\n//# sourceMappingURL=message.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9ncmFwaC9tZXNzYWdlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQWtFO0FBQzFCO0FBQ2Q7QUFDNEM7O0FBRXRFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJEO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsZ0ZBQTBCO0FBQzlELHNDQUFzQyxnRkFBMEI7QUFDaEU7QUFDQSxTQUFTLGdEQUFFO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDBCQUEwQjtBQUMzQztBQUNBO0FBQ0EsVUFBVSxnREFBRTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUhBQW1ILEtBQUs7QUFDeEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsaURBQVU7QUFDM0M7QUFDQSxVQUFVLFlBQVk7QUFDdEI7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHdDQUF3QztBQUNqRCxnQkFBZ0IsOEVBQXFCO0FBQ3JDO0FBQ0E7QUFDQSxzQkFBc0Isb0ZBQTBCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNnRjtBQUNoRiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvZ3JhcGgvbWVzc2FnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBlbnN1cmVMYW5nR3JhcGhDb25maWcgfSBmcm9tIFwiLi4vcHJlZ2VsL3V0aWxzL2NvbmZpZy5qc1wiO1xuaW1wb3J0IHsgU3RhdGVHcmFwaCB9IGZyb20gXCIuL3N0YXRlLmpzXCI7XG5pbXBvcnQgeyB2NCB9IGZyb20gXCJ1dWlkXCI7XG5pbXBvcnQgeyBjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvbWVzc2FnZXNcIjtcblxuLy8jcmVnaW9uIHNyYy9ncmFwaC9tZXNzYWdlLnRzXG5jb25zdCBSRU1PVkVfQUxMX01FU1NBR0VTID0gXCJfX3JlbW92ZV9hbGxfX1wiO1xuLyoqXG4qIFByZWJ1aWx0IHJlZHVjZXIgdGhhdCBjb21iaW5lcyByZXR1cm5lZCBtZXNzYWdlcy5cbiogQ2FuIGhhbmRsZSBzdGFuZGFyZCBtZXNzYWdlcyBhbmQgc3BlY2lhbCBtb2RpZmllcnMgbGlrZSB7QGxpbmsgUmVtb3ZlTWVzc2FnZX1cbiogaW5zdGFuY2VzLlxuKi9cbmZ1bmN0aW9uIG1lc3NhZ2VzU3RhdGVSZWR1Y2VyKGxlZnQsIHJpZ2h0KSB7XG5cdGNvbnN0IGxlZnRBcnJheSA9IEFycmF5LmlzQXJyYXkobGVmdCkgPyBsZWZ0IDogW2xlZnRdO1xuXHRjb25zdCByaWdodEFycmF5ID0gQXJyYXkuaXNBcnJheShyaWdodCkgPyByaWdodCA6IFtyaWdodF07XG5cdGNvbnN0IGxlZnRNZXNzYWdlcyA9IGxlZnRBcnJheS5tYXAoY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UpO1xuXHRjb25zdCByaWdodE1lc3NhZ2VzID0gcmlnaHRBcnJheS5tYXAoY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UpO1xuXHRmb3IgKGNvbnN0IG0gb2YgbGVmdE1lc3NhZ2VzKSBpZiAobS5pZCA9PT0gbnVsbCB8fCBtLmlkID09PSB2b2lkIDApIHtcblx0XHRtLmlkID0gdjQoKTtcblx0XHRtLmxjX2t3YXJncy5pZCA9IG0uaWQ7XG5cdH1cblx0bGV0IHJlbW92ZUFsbElkeDtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCByaWdodE1lc3NhZ2VzLmxlbmd0aDsgaSArPSAxKSB7XG5cdFx0Y29uc3QgbSA9IHJpZ2h0TWVzc2FnZXNbaV07XG5cdFx0aWYgKG0uaWQgPT09IG51bGwgfHwgbS5pZCA9PT0gdm9pZCAwKSB7XG5cdFx0XHRtLmlkID0gdjQoKTtcblx0XHRcdG0ubGNfa3dhcmdzLmlkID0gbS5pZDtcblx0XHR9XG5cdFx0aWYgKG0uZ2V0VHlwZSgpID09PSBcInJlbW92ZVwiICYmIG0uaWQgPT09IFJFTU9WRV9BTExfTUVTU0FHRVMpIHJlbW92ZUFsbElkeCA9IGk7XG5cdH1cblx0aWYgKHJlbW92ZUFsbElkeCAhPSBudWxsKSByZXR1cm4gcmlnaHRNZXNzYWdlcy5zbGljZShyZW1vdmVBbGxJZHggKyAxKTtcblx0Y29uc3QgbWVyZ2VkID0gWy4uLmxlZnRNZXNzYWdlc107XG5cdGNvbnN0IG1lcmdlZEJ5SWQgPSBuZXcgTWFwKG1lcmdlZC5tYXAoKG0sIGkpID0+IFttLmlkLCBpXSkpO1xuXHRjb25zdCBpZHNUb1JlbW92ZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG5cdGZvciAoY29uc3QgbSBvZiByaWdodE1lc3NhZ2VzKSB7XG5cdFx0Y29uc3QgZXhpc3RpbmdJZHggPSBtZXJnZWRCeUlkLmdldChtLmlkKTtcblx0XHRpZiAoZXhpc3RpbmdJZHggIT09IHZvaWQgMCkgaWYgKG0uZ2V0VHlwZSgpID09PSBcInJlbW92ZVwiKSBpZHNUb1JlbW92ZS5hZGQobS5pZCk7XG5cdFx0ZWxzZSB7XG5cdFx0XHRpZHNUb1JlbW92ZS5kZWxldGUobS5pZCk7XG5cdFx0XHRtZXJnZWRbZXhpc3RpbmdJZHhdID0gbTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRpZiAobS5nZXRUeXBlKCkgPT09IFwicmVtb3ZlXCIpIHRocm93IG5ldyBFcnJvcihgQXR0ZW1wdGluZyB0byBkZWxldGUgYSBtZXNzYWdlIHdpdGggYW4gSUQgdGhhdCBkb2Vzbid0IGV4aXN0ICgnJHttLmlkfScpYCk7XG5cdFx0XHRtZXJnZWRCeUlkLnNldChtLmlkLCBtZXJnZWQubGVuZ3RoKTtcblx0XHRcdG1lcmdlZC5wdXNoKG0pO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gbWVyZ2VkLmZpbHRlcigobSkgPT4gIWlkc1RvUmVtb3ZlLmhhcyhtLmlkKSk7XG59XG4vKiogQGlnbm9yZSAqL1xudmFyIE1lc3NhZ2VHcmFwaCA9IGNsYXNzIGV4dGVuZHMgU3RhdGVHcmFwaCB7XG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdHN1cGVyKHsgY2hhbm5lbHM6IHsgX19yb290X186IHtcblx0XHRcdHJlZHVjZXI6IG1lc3NhZ2VzU3RhdGVSZWR1Y2VyLFxuXHRcdFx0ZGVmYXVsdDogKCkgPT4gW11cblx0XHR9IH0gfSk7XG5cdH1cbn07XG4vKipcbiogTWFudWFsbHkgcHVzaCBhIG1lc3NhZ2UgdG8gYSBtZXNzYWdlIHN0cmVhbS5cbipcbiogVGhpcyBpcyB1c2VmdWwgd2hlbiB5b3UgbmVlZCB0byBwdXNoIGEgbWFudWFsbHkgY3JlYXRlZCBtZXNzYWdlIGJlZm9yZSB0aGUgbm9kZVxuKiBoYXMgZmluaXNoZWQgZXhlY3V0aW5nLlxuKlxuKiBXaGVuIGEgbWVzc2FnZSBpcyBwdXNoZWQsIGl0IHdpbGwgYmUgYXV0b21hdGljYWxseSBwZXJzaXN0ZWQgdG8gdGhlIHN0YXRlIGFmdGVyIHRoZSBub2RlIGhhcyBmaW5pc2hlZCBleGVjdXRpbmcuXG4qIFRvIGRpc2FibGUgcGVyc2lzdGluZywgc2V0IGBvcHRpb25zLnN0YXRlS2V5YCB0byBgbnVsbGAuXG4qXG4qIEBwYXJhbSBtZXNzYWdlIFRoZSBtZXNzYWdlIHRvIHB1c2guIFRoZSBtZXNzYWdlIG11c3QgaGF2ZSBhbiBJRCBzZXQsIG90aGVyd2lzZSBhbiBlcnJvciB3aWxsIGJlIHRocm93bi5cbiogQHBhcmFtIG9wdGlvbnMgUnVubmFibGVDb25maWcgLyBSdW50aW1lIGNvbWluZyBmcm9tIG5vZGUgY29udGV4dC5cbiovXG5mdW5jdGlvbiBwdXNoTWVzc2FnZShtZXNzYWdlLCBvcHRpb25zKSB7XG5cdGNvbnN0IHsgc3RhdGVLZXk6IHVzZXJTdGF0ZUtleSwgLi4udXNlckNvbmZpZyB9ID0gb3B0aW9ucyA/PyB7fTtcblx0Y29uc3QgY29uZmlnID0gZW5zdXJlTGFuZ0dyYXBoQ29uZmlnKHVzZXJDb25maWcpO1xuXHRsZXQgc3RhdGVLZXkgPSB1c2VyU3RhdGVLZXkgPz8gXCJtZXNzYWdlc1wiO1xuXHRpZiAodXNlclN0YXRlS2V5ID09PSBudWxsKSBzdGF0ZUtleSA9IHZvaWQgMDtcblx0Y29uc3QgdmFsaWRNZXNzYWdlID0gY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UobWVzc2FnZSk7XG5cdGlmICghdmFsaWRNZXNzYWdlLmlkKSB0aHJvdyBuZXcgRXJyb3IoXCJNZXNzYWdlIElEIGlzIHJlcXVpcmVkLlwiKTtcblx0Y29uc3QgbWVzc2FnZXNIYW5kbGVyID0gKCgpID0+IHtcblx0XHRpZiAoQXJyYXkuaXNBcnJheShjb25maWcuY2FsbGJhY2tzKSkgcmV0dXJuIGNvbmZpZy5jYWxsYmFja3M7XG5cdFx0aWYgKHR5cGVvZiBjb25maWcuY2FsbGJhY2tzICE9PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gY29uZmlnLmNhbGxiYWNrcy5oYW5kbGVycztcblx0XHRyZXR1cm4gW107XG5cdH0pKCkuZmluZCgoY2IpID0+IFwibmFtZVwiIGluIGNiICYmIGNiLm5hbWUgPT09IFwiU3RyZWFtTWVzc2FnZXNIYW5kbGVyXCIpO1xuXHRpZiAobWVzc2FnZXNIYW5kbGVyKSB7XG5cdFx0Y29uc3QgbWV0YWRhdGEgPSBjb25maWcubWV0YWRhdGEgPz8ge307XG5cdFx0Y29uc3QgbmFtZXNwYWNlID0gKG1ldGFkYXRhLmxhbmdncmFwaF9jaGVja3BvaW50X25zID8/IFwiXCIpLnNwbGl0KFwifFwiKTtcblx0XHRtZXNzYWdlc0hhbmRsZXIuX2VtaXQoW25hbWVzcGFjZSwgbWV0YWRhdGFdLCB2YWxpZE1lc3NhZ2UsIHZvaWQgMCwgZmFsc2UpO1xuXHR9XG5cdGlmIChzdGF0ZUtleSkgY29uZmlnLmNvbmZpZ3VyYWJsZT8uX19wcmVnZWxfc2VuZD8uKFtbc3RhdGVLZXksIHZhbGlkTWVzc2FnZV1dKTtcblx0cmV0dXJuIHZhbGlkTWVzc2FnZTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBNZXNzYWdlR3JhcGgsIFJFTU9WRV9BTExfTUVTU0FHRVMsIG1lc3NhZ2VzU3RhdGVSZWR1Y2VyLCBwdXNoTWVzc2FnZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVzc2FnZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/graph/message.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/graph/messages_annotation.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/graph/messages_annotation.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MessagesAnnotation: () => (/* binding */ MessagesAnnotation),\n/* harmony export */   MessagesZodMeta: () => (/* binding */ MessagesZodMeta),\n/* harmony export */   MessagesZodState: () => (/* binding */ MessagesZodState)\n/* harmony export */ });\n/* harmony import */ var _annotation_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./annotation.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/graph/annotation.js\");\n/* harmony import */ var _zod_meta_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./zod/meta.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/graph/zod/meta.js\");\n/* harmony import */ var _message_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./message.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/graph/message.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod/v3 */ \"(ssr)/./node_modules/zod/v3/index.js\");\n\n\n\n\n\n//#region src/graph/messages_annotation.ts\n/**\n* Prebuilt state annotation that combines returned messages.\n* Can handle standard messages and special modifiers like {@link RemoveMessage}\n* instances.\n*\n* Specifically, importing and using the prebuilt MessagesAnnotation like this:\n*\n* @example\n* ```ts\n* import { MessagesAnnotation, StateGraph } from \"@langchain/langgraph\";\n*\n* const graph = new StateGraph(MessagesAnnotation)\n*   .addNode(...)\n*   ...\n* ```\n*\n* Is equivalent to initializing your state manually like this:\n*\n* @example\n* ```ts\n* import { BaseMessage } from \"@langchain/core/messages\";\n* import { Annotation, StateGraph, messagesStateReducer } from \"@langchain/langgraph\";\n*\n* export const StateAnnotation = Annotation.Root({\n*   messages: Annotation<BaseMessage[]>({\n*     reducer: messagesStateReducer,\n*     default: () => [],\n*   }),\n* });\n*\n* const graph = new StateGraph(StateAnnotation)\n*   .addNode(...)\n*   ...\n* ```\n*/\nconst MessagesAnnotation = _annotation_js__WEBPACK_IMPORTED_MODULE_0__.Annotation.Root({ messages: (0,_annotation_js__WEBPACK_IMPORTED_MODULE_0__.Annotation)({\n\treducer: _message_js__WEBPACK_IMPORTED_MODULE_2__.messagesStateReducer,\n\tdefault: () => []\n}) });\n/**\n* Prebuilt schema meta for Zod state definition.\n*\n* @example\n* ```ts\n* import { z } from \"zod/v4-mini\";\n* import { MessagesZodState, StateGraph } from \"@langchain/langgraph\";\n*\n* const AgentState = z.object({\n*   messages: z.custom<BaseMessage[]>().register(registry, MessagesZodMeta),\n* });\n* ```\n*/\nconst MessagesZodMeta = {\n\treducer: { fn: _message_js__WEBPACK_IMPORTED_MODULE_2__.messagesStateReducer },\n\tjsonSchemaExtra: { langgraph_type: \"messages\" },\n\tdefault: () => []\n};\n/**\n* Prebuilt state object that uses Zod to combine returned messages.\n* This utility is synonymous with the `MessagesAnnotation` annotation,\n* but uses Zod as the way to express messages state.\n*\n* You can use import and use this prebuilt schema like this:\n*\n* @example\n* ```ts\n* import { MessagesZodState, StateGraph } from \"@langchain/langgraph\";\n*\n* const graph = new StateGraph(MessagesZodState)\n*   .addNode(...)\n*   ...\n* ```\n*\n* Which is equivalent to initializing the schema object manually like this:\n*\n* @example\n* ```ts\n* import { z } from \"zod\";\n* import type { BaseMessage, BaseMessageLike } from \"@langchain/core/messages\";\n* import { StateGraph, messagesStateReducer } from \"@langchain/langgraph\";\n* import \"@langchain/langgraph/zod\";\n*\n* const AgentState = z.object({\n*   messages: z\n*     .custom<BaseMessage[]>()\n*     .default(() => [])\n*     .langgraph.reducer(\n*        messagesStateReducer,\n*        z.custom<BaseMessageLike | BaseMessageLike[]>()\n*     ),\n* });\n* const graph = new StateGraph(AgentState)\n*   .addNode(...)\n*   ...\n* ```\n*/\nconst MessagesZodState = zod_v3__WEBPACK_IMPORTED_MODULE_3__.z.object({ messages: (0,_zod_meta_js__WEBPACK_IMPORTED_MODULE_1__.withLangGraph)(zod_v3__WEBPACK_IMPORTED_MODULE_3__.z.custom(), MessagesZodMeta) });\n\n//#endregion\n\n//# sourceMappingURL=messages_annotation.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9ncmFwaC9tZXNzYWdlc19hbm5vdGF0aW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBNkM7QUFDQztBQUNNO0FBQ3pCOztBQUUzQjtBQUNBO0FBQ0E7QUFDQSwyREFBMkQ7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxpQ0FBaUM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGNBQWM7QUFDekIsV0FBVywrQ0FBK0M7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHNEQUFVLFFBQVEsVUFBVSwwREFBVTtBQUNqRSxVQUFVLDZEQUFvQjtBQUM5QjtBQUNBLENBQUMsR0FBRztBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLElBQUk7QUFDZixXQUFXLCtCQUErQjtBQUMxQztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsWUFBWSxJQUFJLDZEQUFvQixFQUFFO0FBQ3RDLG9CQUFvQiw0QkFBNEI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsK0JBQStCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxJQUFJO0FBQ2YsZ0JBQWdCLCtCQUErQjtBQUMvQyxXQUFXLG1DQUFtQztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDRDQUFRLEdBQUcsVUFBVSwyREFBYSxDQUFDLDRDQUFRLHNCQUFzQjs7QUFFMUY7QUFDaUU7QUFDakUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L2dyYXBoL21lc3NhZ2VzX2Fubm90YXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQW5ub3RhdGlvbiB9IGZyb20gXCIuL2Fubm90YXRpb24uanNcIjtcbmltcG9ydCB7IHdpdGhMYW5nR3JhcGggfSBmcm9tIFwiLi96b2QvbWV0YS5qc1wiO1xuaW1wb3J0IHsgbWVzc2FnZXNTdGF0ZVJlZHVjZXIgfSBmcm9tIFwiLi9tZXNzYWdlLmpzXCI7XG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZC92M1wiO1xuXG4vLyNyZWdpb24gc3JjL2dyYXBoL21lc3NhZ2VzX2Fubm90YXRpb24udHNcbi8qKlxuKiBQcmVidWlsdCBzdGF0ZSBhbm5vdGF0aW9uIHRoYXQgY29tYmluZXMgcmV0dXJuZWQgbWVzc2FnZXMuXG4qIENhbiBoYW5kbGUgc3RhbmRhcmQgbWVzc2FnZXMgYW5kIHNwZWNpYWwgbW9kaWZpZXJzIGxpa2Uge0BsaW5rIFJlbW92ZU1lc3NhZ2V9XG4qIGluc3RhbmNlcy5cbipcbiogU3BlY2lmaWNhbGx5LCBpbXBvcnRpbmcgYW5kIHVzaW5nIHRoZSBwcmVidWlsdCBNZXNzYWdlc0Fubm90YXRpb24gbGlrZSB0aGlzOlxuKlxuKiBAZXhhbXBsZVxuKiBgYGB0c1xuKiBpbXBvcnQgeyBNZXNzYWdlc0Fubm90YXRpb24sIFN0YXRlR3JhcGggfSBmcm9tIFwiQGxhbmdjaGFpbi9sYW5nZ3JhcGhcIjtcbipcbiogY29uc3QgZ3JhcGggPSBuZXcgU3RhdGVHcmFwaChNZXNzYWdlc0Fubm90YXRpb24pXG4qICAgLmFkZE5vZGUoLi4uKVxuKiAgIC4uLlxuKiBgYGBcbipcbiogSXMgZXF1aXZhbGVudCB0byBpbml0aWFsaXppbmcgeW91ciBzdGF0ZSBtYW51YWxseSBsaWtlIHRoaXM6XG4qXG4qIEBleGFtcGxlXG4qIGBgYHRzXG4qIGltcG9ydCB7IEJhc2VNZXNzYWdlIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9tZXNzYWdlc1wiO1xuKiBpbXBvcnQgeyBBbm5vdGF0aW9uLCBTdGF0ZUdyYXBoLCBtZXNzYWdlc1N0YXRlUmVkdWNlciB9IGZyb20gXCJAbGFuZ2NoYWluL2xhbmdncmFwaFwiO1xuKlxuKiBleHBvcnQgY29uc3QgU3RhdGVBbm5vdGF0aW9uID0gQW5ub3RhdGlvbi5Sb290KHtcbiogICBtZXNzYWdlczogQW5ub3RhdGlvbjxCYXNlTWVzc2FnZVtdPih7XG4qICAgICByZWR1Y2VyOiBtZXNzYWdlc1N0YXRlUmVkdWNlcixcbiogICAgIGRlZmF1bHQ6ICgpID0+IFtdLFxuKiAgIH0pLFxuKiB9KTtcbipcbiogY29uc3QgZ3JhcGggPSBuZXcgU3RhdGVHcmFwaChTdGF0ZUFubm90YXRpb24pXG4qICAgLmFkZE5vZGUoLi4uKVxuKiAgIC4uLlxuKiBgYGBcbiovXG5jb25zdCBNZXNzYWdlc0Fubm90YXRpb24gPSBBbm5vdGF0aW9uLlJvb3QoeyBtZXNzYWdlczogQW5ub3RhdGlvbih7XG5cdHJlZHVjZXI6IG1lc3NhZ2VzU3RhdGVSZWR1Y2VyLFxuXHRkZWZhdWx0OiAoKSA9PiBbXVxufSkgfSk7XG4vKipcbiogUHJlYnVpbHQgc2NoZW1hIG1ldGEgZm9yIFpvZCBzdGF0ZSBkZWZpbml0aW9uLlxuKlxuKiBAZXhhbXBsZVxuKiBgYGB0c1xuKiBpbXBvcnQgeyB6IH0gZnJvbSBcInpvZC92NC1taW5pXCI7XG4qIGltcG9ydCB7IE1lc3NhZ2VzWm9kU3RhdGUsIFN0YXRlR3JhcGggfSBmcm9tIFwiQGxhbmdjaGFpbi9sYW5nZ3JhcGhcIjtcbipcbiogY29uc3QgQWdlbnRTdGF0ZSA9IHoub2JqZWN0KHtcbiogICBtZXNzYWdlczogei5jdXN0b208QmFzZU1lc3NhZ2VbXT4oKS5yZWdpc3RlcihyZWdpc3RyeSwgTWVzc2FnZXNab2RNZXRhKSxcbiogfSk7XG4qIGBgYFxuKi9cbmNvbnN0IE1lc3NhZ2VzWm9kTWV0YSA9IHtcblx0cmVkdWNlcjogeyBmbjogbWVzc2FnZXNTdGF0ZVJlZHVjZXIgfSxcblx0anNvblNjaGVtYUV4dHJhOiB7IGxhbmdncmFwaF90eXBlOiBcIm1lc3NhZ2VzXCIgfSxcblx0ZGVmYXVsdDogKCkgPT4gW11cbn07XG4vKipcbiogUHJlYnVpbHQgc3RhdGUgb2JqZWN0IHRoYXQgdXNlcyBab2QgdG8gY29tYmluZSByZXR1cm5lZCBtZXNzYWdlcy5cbiogVGhpcyB1dGlsaXR5IGlzIHN5bm9ueW1vdXMgd2l0aCB0aGUgYE1lc3NhZ2VzQW5ub3RhdGlvbmAgYW5ub3RhdGlvbixcbiogYnV0IHVzZXMgWm9kIGFzIHRoZSB3YXkgdG8gZXhwcmVzcyBtZXNzYWdlcyBzdGF0ZS5cbipcbiogWW91IGNhbiB1c2UgaW1wb3J0IGFuZCB1c2UgdGhpcyBwcmVidWlsdCBzY2hlbWEgbGlrZSB0aGlzOlxuKlxuKiBAZXhhbXBsZVxuKiBgYGB0c1xuKiBpbXBvcnQgeyBNZXNzYWdlc1pvZFN0YXRlLCBTdGF0ZUdyYXBoIH0gZnJvbSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoXCI7XG4qXG4qIGNvbnN0IGdyYXBoID0gbmV3IFN0YXRlR3JhcGgoTWVzc2FnZXNab2RTdGF0ZSlcbiogICAuYWRkTm9kZSguLi4pXG4qICAgLi4uXG4qIGBgYFxuKlxuKiBXaGljaCBpcyBlcXVpdmFsZW50IHRvIGluaXRpYWxpemluZyB0aGUgc2NoZW1hIG9iamVjdCBtYW51YWxseSBsaWtlIHRoaXM6XG4qXG4qIEBleGFtcGxlXG4qIGBgYHRzXG4qIGltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG4qIGltcG9ydCB0eXBlIHsgQmFzZU1lc3NhZ2UsIEJhc2VNZXNzYWdlTGlrZSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvbWVzc2FnZXNcIjtcbiogaW1wb3J0IHsgU3RhdGVHcmFwaCwgbWVzc2FnZXNTdGF0ZVJlZHVjZXIgfSBmcm9tIFwiQGxhbmdjaGFpbi9sYW5nZ3JhcGhcIjtcbiogaW1wb3J0IFwiQGxhbmdjaGFpbi9sYW5nZ3JhcGgvem9kXCI7XG4qXG4qIGNvbnN0IEFnZW50U3RhdGUgPSB6Lm9iamVjdCh7XG4qICAgbWVzc2FnZXM6IHpcbiogICAgIC5jdXN0b208QmFzZU1lc3NhZ2VbXT4oKVxuKiAgICAgLmRlZmF1bHQoKCkgPT4gW10pXG4qICAgICAubGFuZ2dyYXBoLnJlZHVjZXIoXG4qICAgICAgICBtZXNzYWdlc1N0YXRlUmVkdWNlcixcbiogICAgICAgIHouY3VzdG9tPEJhc2VNZXNzYWdlTGlrZSB8IEJhc2VNZXNzYWdlTGlrZVtdPigpXG4qICAgICApLFxuKiB9KTtcbiogY29uc3QgZ3JhcGggPSBuZXcgU3RhdGVHcmFwaChBZ2VudFN0YXRlKVxuKiAgIC5hZGROb2RlKC4uLilcbiogICAuLi5cbiogYGBgXG4qL1xuY29uc3QgTWVzc2FnZXNab2RTdGF0ZSA9IHoub2JqZWN0KHsgbWVzc2FnZXM6IHdpdGhMYW5nR3JhcGgoei5jdXN0b20oKSwgTWVzc2FnZXNab2RNZXRhKSB9KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBNZXNzYWdlc0Fubm90YXRpb24sIE1lc3NhZ2VzWm9kTWV0YSwgTWVzc2FnZXNab2RTdGF0ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVzc2FnZXNfYW5ub3RhdGlvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/graph/messages_annotation.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/graph/state.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/graph/state.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CompiledStateGraph: () => (/* binding */ CompiledStateGraph),\n/* harmony export */   StateGraph: () => (/* binding */ StateGraph)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _channels_base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../channels/base.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/base.js\");\n/* harmony import */ var _channels_last_value_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../channels/last_value.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/last_value.js\");\n/* harmony import */ var _annotation_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./annotation.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/graph/annotation.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../constants.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/utils.js\");\n/* harmony import */ var _pregel_write_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../pregel/write.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/write.js\");\n/* harmony import */ var _pregel_read_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../pregel/read.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/read.js\");\n/* harmony import */ var _pregel_utils_subgraph_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../pregel/utils/subgraph.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/utils/subgraph.js\");\n/* harmony import */ var _channels_ephemeral_value_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../channels/ephemeral_value.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/ephemeral_value.js\");\n/* harmony import */ var _graph_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./graph.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/graph/graph.js\");\n/* harmony import */ var _channels_named_barrier_value_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../channels/named_barrier_value.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/named_barrier_value.js\");\n/* harmony import */ var _zod_meta_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./zod/meta.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/graph/zod/meta.js\");\n/* harmony import */ var _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @langchain/core/runnables */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/index.js\");\n/* harmony import */ var _langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @langchain/core/utils/types */ \"(ssr)/./node_modules/@langchain/core/dist/utils/types/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/graph/state.ts\nconst ROOT = \"__root__\";\nconst PartialStateSchema = Symbol.for(\"langgraph.state.partial\");\n/**\n* A graph whose nodes communicate by reading and writing to a shared state.\n* Each node takes a defined `State` as input and returns a `Partial<State>`.\n*\n* Each state key can optionally be annotated with a reducer function that\n* will be used to aggregate the values of that key received from multiple nodes.\n* The signature of a reducer function is (left: Value, right: UpdateValue) => Value.\n*\n* See {@link Annotation} for more on defining state.\n*\n* After adding nodes and edges to your graph, you must call `.compile()` on it before\n* you can use it.\n*\n* @example\n* ```ts\n* import {\n*   type BaseMessage,\n*   AIMessage,\n*   HumanMessage,\n* } from \"@langchain/core/messages\";\n* import { StateGraph, Annotation } from \"@langchain/langgraph\";\n*\n* // Define a state with a single key named \"messages\" that will\n* // combine a returned BaseMessage or arrays of BaseMessages\n* const StateAnnotation = Annotation.Root({\n*   sentiment: Annotation<string>,\n*   messages: Annotation<BaseMessage[]>({\n*     reducer: (left: BaseMessage[], right: BaseMessage | BaseMessage[]) => {\n*       if (Array.isArray(right)) {\n*         return left.concat(right);\n*       }\n*       return left.concat([right]);\n*     },\n*     default: () => [],\n*   }),\n* });\n*\n* const graphBuilder = new StateGraph(StateAnnotation);\n*\n* // A node in the graph that returns an object with a \"messages\" key\n* // will update the state by combining the existing value with the returned one.\n* const myNode = (state: typeof StateAnnotation.State) => {\n*   return {\n*     messages: [new AIMessage(\"Some new response\")],\n*     sentiment: \"positive\",\n*   };\n* };\n*\n* const graph = graphBuilder\n*   .addNode(\"myNode\", myNode)\n*   .addEdge(\"__start__\", \"myNode\")\n*   .addEdge(\"myNode\", \"__end__\")\n*   .compile();\n*\n* await graph.invoke({ messages: [new HumanMessage(\"how are you?\")] });\n*\n* // {\n* //   messages: [HumanMessage(\"how are you?\"), AIMessage(\"Some new response\")],\n* //   sentiment: \"positive\",\n* // }\n* ```\n*/\nvar StateGraph = class extends _graph_js__WEBPACK_IMPORTED_MODULE_10__.Graph {\n\tchannels = {};\n\twaitingEdges = /* @__PURE__ */ new Set();\n\t/** @internal */\n\t_schemaDefinition;\n\t/** @internal */\n\t_schemaRuntimeDefinition;\n\t/** @internal */\n\t_inputDefinition;\n\t/** @internal */\n\t_inputRuntimeDefinition;\n\t/** @internal */\n\t_outputDefinition;\n\t/** @internal */\n\t_outputRuntimeDefinition;\n\t/**\n\t* Map schemas to managed values\n\t* @internal\n\t*/\n\t_schemaDefinitions = /* @__PURE__ */ new Map();\n\t/** @internal */\n\t_metaRegistry = _zod_meta_js__WEBPACK_IMPORTED_MODULE_12__.schemaMetaRegistry;\n\t/** @internal Used only for typing. */\n\t_configSchema;\n\t/** @internal */\n\t_configRuntimeSchema;\n\t/** @internal */\n\t_interrupt;\n\t/** @internal */\n\t_writer;\n\tconstructor(fields, contextSchema) {\n\t\tsuper();\n\t\tif (isZodStateGraphArgsWithStateSchema(fields)) {\n\t\t\tconst stateDef = this._metaRegistry.getChannelsForSchema(fields.state);\n\t\t\tconst inputDef = fields.input != null ? this._metaRegistry.getChannelsForSchema(fields.input) : stateDef;\n\t\t\tconst outputDef = fields.output != null ? this._metaRegistry.getChannelsForSchema(fields.output) : stateDef;\n\t\t\tthis._schemaDefinition = stateDef;\n\t\t\tthis._schemaRuntimeDefinition = fields.state;\n\t\t\tthis._inputDefinition = inputDef;\n\t\t\tthis._inputRuntimeDefinition = fields.input ?? PartialStateSchema;\n\t\t\tthis._outputDefinition = outputDef;\n\t\t\tthis._outputRuntimeDefinition = fields.output ?? fields.state;\n\t\t} else if ((0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_14__.isInteropZodObject)(fields)) {\n\t\t\tconst stateDef = this._metaRegistry.getChannelsForSchema(fields);\n\t\t\tthis._schemaDefinition = stateDef;\n\t\t\tthis._schemaRuntimeDefinition = fields;\n\t\t\tthis._inputDefinition = stateDef;\n\t\t\tthis._inputRuntimeDefinition = PartialStateSchema;\n\t\t\tthis._outputDefinition = stateDef;\n\t\t\tthis._outputRuntimeDefinition = fields;\n\t\t} else if (isStateGraphArgsWithInputOutputSchemas(fields)) {\n\t\t\tthis._schemaDefinition = fields.input.spec;\n\t\t\tthis._inputDefinition = fields.input.spec;\n\t\t\tthis._outputDefinition = fields.output.spec;\n\t\t} else if (isStateGraphArgsWithStateSchema(fields)) {\n\t\t\tthis._schemaDefinition = fields.stateSchema.spec;\n\t\t\tthis._inputDefinition = fields.input?.spec ?? this._schemaDefinition;\n\t\t\tthis._outputDefinition = fields.output?.spec ?? this._schemaDefinition;\n\t\t} else if (isStateDefinition(fields) || isAnnotationRoot(fields)) this._schemaDefinition = isAnnotationRoot(fields) ? fields.spec : fields;\n\t\telse if (isStateGraphArgs(fields)) this._schemaDefinition = _getChannels(fields.channels);\n\t\telse throw new Error(\"Invalid StateGraph input. Make sure to pass a valid Annotation.Root or Zod schema.\");\n\t\tthis._inputDefinition ??= this._schemaDefinition;\n\t\tthis._outputDefinition ??= this._schemaDefinition;\n\t\tthis._addSchema(this._schemaDefinition);\n\t\tthis._addSchema(this._inputDefinition);\n\t\tthis._addSchema(this._outputDefinition);\n\t\tfunction isOptions(options) {\n\t\t\treturn typeof options === \"object\" && options != null && !(\"spec\" in options) && !(0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_14__.isInteropZodObject)(options);\n\t\t}\n\t\tif (isOptions(contextSchema)) {\n\t\t\tif ((0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_14__.isInteropZodObject)(contextSchema.context)) this._configRuntimeSchema = contextSchema.context;\n\t\t\tthis._interrupt = contextSchema.interrupt;\n\t\t\tthis._writer = contextSchema.writer;\n\t\t} else if ((0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_14__.isInteropZodObject)(contextSchema)) this._configRuntimeSchema = contextSchema;\n\t}\n\tget allEdges() {\n\t\treturn new Set([...this.edges, ...Array.from(this.waitingEdges).flatMap(([starts, end]) => starts.map((start) => [start, end]))]);\n\t}\n\t_addSchema(stateDefinition) {\n\t\tif (this._schemaDefinitions.has(stateDefinition)) return;\n\t\tthis._schemaDefinitions.set(stateDefinition, stateDefinition);\n\t\tfor (const [key, val] of Object.entries(stateDefinition)) {\n\t\t\tlet channel;\n\t\t\tif (typeof val === \"function\") channel = val();\n\t\t\telse channel = val;\n\t\t\tif (this.channels[key] !== void 0) {\n\t\t\t\tif (this.channels[key] !== channel) {\n\t\t\t\t\tif (channel.lc_graph_name !== \"LastValue\") throw new Error(`Channel \"${key}\" already exists with a different type.`);\n\t\t\t\t}\n\t\t\t} else this.channels[key] = channel;\n\t\t}\n\t}\n\taddNode(...args) {\n\t\tfunction isMultipleNodes(args$1) {\n\t\t\treturn args$1.length >= 1 && typeof args$1[0] !== \"string\";\n\t\t}\n\t\tconst nodes = isMultipleNodes(args) ? Array.isArray(args[0]) ? args[0] : Object.entries(args[0]).map(([key, action]) => [key, action]) : [[\n\t\t\targs[0],\n\t\t\targs[1],\n\t\t\targs[2]\n\t\t]];\n\t\tif (nodes.length === 0) throw new Error(\"No nodes provided in `addNode`\");\n\t\tfor (const [key, action, options] of nodes) {\n\t\t\tif (key in this.channels) throw new Error(`${key} is already being used as a state attribute (a.k.a. a channel), cannot also be used as a node name.`);\n\t\t\tfor (const reservedChar of [_constants_js__WEBPACK_IMPORTED_MODULE_4__.CHECKPOINT_NAMESPACE_SEPARATOR, _constants_js__WEBPACK_IMPORTED_MODULE_4__.CHECKPOINT_NAMESPACE_END]) if (key.includes(reservedChar)) throw new Error(`\"${reservedChar}\" is a reserved character and is not allowed in node names.`);\n\t\t\tthis.warnIfCompiled(`Adding a node to a graph that has already been compiled. This will not be reflected in the compiled graph.`);\n\t\t\tif (key in this.nodes) throw new Error(`Node \\`${key}\\` already present.`);\n\t\t\tif (key === _constants_js__WEBPACK_IMPORTED_MODULE_4__.END || key === _constants_js__WEBPACK_IMPORTED_MODULE_4__.START) throw new Error(`Node \\`${key}\\` is reserved.`);\n\t\t\tlet inputSpec = this._schemaDefinition;\n\t\t\tif (options?.input !== void 0) {\n\t\t\t\tif ((0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_14__.isInteropZodObject)(options.input)) inputSpec = this._metaRegistry.getChannelsForSchema(options.input);\n\t\t\t\telse if (options.input.spec !== void 0) inputSpec = options.input.spec;\n\t\t\t}\n\t\t\tif (inputSpec !== void 0) this._addSchema(inputSpec);\n\t\t\tlet runnable;\n\t\t\tif (_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_13__.Runnable.isRunnable(action)) runnable = action;\n\t\t\telse if (typeof action === \"function\") runnable = new _utils_js__WEBPACK_IMPORTED_MODULE_5__.RunnableCallable({\n\t\t\t\tfunc: action,\n\t\t\t\tname: key,\n\t\t\t\ttrace: false\n\t\t\t});\n\t\t\telse runnable = (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_13__._coerceToRunnable)(action);\n\t\t\tlet cachePolicy = options?.cachePolicy;\n\t\t\tif (typeof cachePolicy === \"boolean\") cachePolicy = cachePolicy ? {} : void 0;\n\t\t\tconst nodeSpec = {\n\t\t\t\trunnable,\n\t\t\t\tretryPolicy: options?.retryPolicy,\n\t\t\t\tcachePolicy,\n\t\t\t\tmetadata: options?.metadata,\n\t\t\t\tinput: inputSpec ?? this._schemaDefinition,\n\t\t\t\tsubgraphs: (0,_pregel_utils_subgraph_js__WEBPACK_IMPORTED_MODULE_8__.isPregelLike)(runnable) ? [runnable] : options?.subgraphs,\n\t\t\t\tends: options?.ends,\n\t\t\t\tdefer: options?.defer\n\t\t\t};\n\t\t\tthis.nodes[key] = nodeSpec;\n\t\t}\n\t\treturn this;\n\t}\n\taddEdge(startKey, endKey) {\n\t\tif (typeof startKey === \"string\") return super.addEdge(startKey, endKey);\n\t\tif (this.compiled) console.warn(\"Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph.\");\n\t\tfor (const start of startKey) {\n\t\t\tif (start === _constants_js__WEBPACK_IMPORTED_MODULE_4__.END) throw new Error(\"END cannot be a start node\");\n\t\t\tif (!Object.keys(this.nodes).some((node) => node === start)) throw new Error(`Need to add a node named \"${start}\" first`);\n\t\t}\n\t\tif (endKey === _constants_js__WEBPACK_IMPORTED_MODULE_4__.END) throw new Error(\"END cannot be an end node\");\n\t\tif (!Object.keys(this.nodes).some((node) => node === endKey)) throw new Error(`Need to add a node named \"${endKey}\" first`);\n\t\tthis.waitingEdges.add([startKey, endKey]);\n\t\treturn this;\n\t}\n\taddSequence(nodes) {\n\t\tconst parsedNodes = Array.isArray(nodes) ? nodes : Object.entries(nodes);\n\t\tif (parsedNodes.length === 0) throw new Error(\"Sequence requires at least one node.\");\n\t\tlet previousNode;\n\t\tfor (const [key, action, options] of parsedNodes) {\n\t\t\tif (key in this.nodes) throw new Error(`Node names must be unique: node with the name \"${key}\" already exists.`);\n\t\t\tconst validKey = key;\n\t\t\tthis.addNode(validKey, action, options);\n\t\t\tif (previousNode != null) this.addEdge(previousNode, validKey);\n\t\t\tpreviousNode = validKey;\n\t\t}\n\t\treturn this;\n\t}\n\tcompile({ checkpointer, store, cache, interruptBefore, interruptAfter, name, description } = {}) {\n\t\tthis.validate([...Array.isArray(interruptBefore) ? interruptBefore : [], ...Array.isArray(interruptAfter) ? interruptAfter : []]);\n\t\tconst outputKeys = Object.keys(this._schemaDefinitions.get(this._outputDefinition));\n\t\tconst outputChannels = outputKeys.length === 1 && outputKeys[0] === ROOT ? ROOT : outputKeys;\n\t\tconst streamKeys = Object.keys(this.channels);\n\t\tconst streamChannels = streamKeys.length === 1 && streamKeys[0] === ROOT ? ROOT : streamKeys;\n\t\tconst userInterrupt = this._interrupt;\n\t\tconst compiled = new CompiledStateGraph({\n\t\t\tbuilder: this,\n\t\t\tcheckpointer,\n\t\t\tinterruptAfter,\n\t\t\tinterruptBefore,\n\t\t\tautoValidate: false,\n\t\t\tnodes: {},\n\t\t\tchannels: {\n\t\t\t\t...this.channels,\n\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_4__.START]: new _channels_ephemeral_value_js__WEBPACK_IMPORTED_MODULE_9__.EphemeralValue()\n\t\t\t},\n\t\t\tinputChannels: _constants_js__WEBPACK_IMPORTED_MODULE_4__.START,\n\t\t\toutputChannels,\n\t\t\tstreamChannels,\n\t\t\tstreamMode: \"updates\",\n\t\t\tstore,\n\t\t\tcache,\n\t\t\tname,\n\t\t\tdescription,\n\t\t\tuserInterrupt\n\t\t});\n\t\tcompiled.attachNode(_constants_js__WEBPACK_IMPORTED_MODULE_4__.START);\n\t\tfor (const [key, node] of Object.entries(this.nodes)) compiled.attachNode(key, node);\n\t\tcompiled.attachBranch(_constants_js__WEBPACK_IMPORTED_MODULE_4__.START, _constants_js__WEBPACK_IMPORTED_MODULE_4__.SELF, _getControlBranch(), { withReader: false });\n\t\tfor (const [key] of Object.entries(this.nodes)) compiled.attachBranch(key, _constants_js__WEBPACK_IMPORTED_MODULE_4__.SELF, _getControlBranch(), { withReader: false });\n\t\tfor (const [start, end] of this.edges) compiled.attachEdge(start, end);\n\t\tfor (const [starts, end] of this.waitingEdges) compiled.attachEdge(starts, end);\n\t\tfor (const [start, branches] of Object.entries(this.branches)) for (const [name$1, branch] of Object.entries(branches)) compiled.attachBranch(start, name$1, branch);\n\t\treturn compiled.validate();\n\t}\n};\nfunction _getChannels(schema) {\n\tconst channels = {};\n\tfor (const [name, val] of Object.entries(schema)) if (name === ROOT) channels[name] = (0,_annotation_js__WEBPACK_IMPORTED_MODULE_3__.getChannel)(val);\n\telse channels[name] = (0,_annotation_js__WEBPACK_IMPORTED_MODULE_3__.getChannel)(val);\n\treturn channels;\n}\n/**\n* Final result from building and compiling a {@link StateGraph}.\n* Should not be instantiated directly, only using the StateGraph `.compile()`\n* instance method.\n*/\nvar CompiledStateGraph = class extends _graph_js__WEBPACK_IMPORTED_MODULE_10__.CompiledGraph {\n\t/**\n\t* The description of the compiled graph.\n\t* This is used by the supervisor agent to describe the handoff to the agent.\n\t*/\n\tdescription;\n\t/** @internal */\n\t_metaRegistry = _zod_meta_js__WEBPACK_IMPORTED_MODULE_12__.schemaMetaRegistry;\n\tconstructor({ description, ...rest }) {\n\t\tsuper(rest);\n\t\tthis.description = description;\n\t}\n\tattachNode(key, node) {\n\t\tlet outputKeys;\n\t\tif (key === _constants_js__WEBPACK_IMPORTED_MODULE_4__.START) outputKeys = Object.entries(this.builder._schemaDefinitions.get(this.builder._inputDefinition)).map(([k]) => k);\n\t\telse outputKeys = Object.keys(this.builder.channels);\n\t\tfunction _getRoot(input) {\n\t\t\tif ((0,_constants_js__WEBPACK_IMPORTED_MODULE_4__.isCommand)(input)) {\n\t\t\t\tif (input.graph === _constants_js__WEBPACK_IMPORTED_MODULE_4__.Command.PARENT) return null;\n\t\t\t\treturn input._updateAsTuples();\n\t\t\t} else if (Array.isArray(input) && input.length > 0 && input.some((i) => (0,_constants_js__WEBPACK_IMPORTED_MODULE_4__.isCommand)(i))) {\n\t\t\t\tconst updates = [];\n\t\t\t\tfor (const i of input) if ((0,_constants_js__WEBPACK_IMPORTED_MODULE_4__.isCommand)(i)) {\n\t\t\t\t\tif (i.graph === _constants_js__WEBPACK_IMPORTED_MODULE_4__.Command.PARENT) continue;\n\t\t\t\t\tupdates.push(...i._updateAsTuples());\n\t\t\t\t} else updates.push([ROOT, i]);\n\t\t\t\treturn updates;\n\t\t\t} else if (input != null) return [[ROOT, input]];\n\t\t\treturn null;\n\t\t}\n\t\tconst nodeKey = key;\n\t\tfunction _getUpdates(input) {\n\t\t\tif (!input) return null;\n\t\t\telse if ((0,_constants_js__WEBPACK_IMPORTED_MODULE_4__.isCommand)(input)) {\n\t\t\t\tif (input.graph === _constants_js__WEBPACK_IMPORTED_MODULE_4__.Command.PARENT) return null;\n\t\t\t\treturn input._updateAsTuples().filter(([k]) => outputKeys.includes(k));\n\t\t\t} else if (Array.isArray(input) && input.length > 0 && input.some(_constants_js__WEBPACK_IMPORTED_MODULE_4__.isCommand)) {\n\t\t\t\tconst updates = [];\n\t\t\t\tfor (const item of input) if ((0,_constants_js__WEBPACK_IMPORTED_MODULE_4__.isCommand)(item)) {\n\t\t\t\t\tif (item.graph === _constants_js__WEBPACK_IMPORTED_MODULE_4__.Command.PARENT) continue;\n\t\t\t\t\tupdates.push(...item._updateAsTuples().filter(([k]) => outputKeys.includes(k)));\n\t\t\t\t} else {\n\t\t\t\t\tconst itemUpdates = _getUpdates(item);\n\t\t\t\t\tif (itemUpdates) updates.push(...itemUpdates ?? []);\n\t\t\t\t}\n\t\t\t\treturn updates;\n\t\t\t} else if (typeof input === \"object\" && !Array.isArray(input)) return Object.entries(input).filter(([k]) => outputKeys.includes(k));\n\t\t\telse {\n\t\t\t\tconst typeofInput = Array.isArray(input) ? \"array\" : typeof input;\n\t\t\t\tthrow new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(`Expected node \"${nodeKey.toString()}\" to return an object or an array containing at least one Command object, received ${typeofInput}`, { lc_error_code: \"INVALID_GRAPH_NODE_RETURN_VALUE\" });\n\t\t\t}\n\t\t}\n\t\tconst stateWriteEntries = [{\n\t\t\tvalue: _pregel_write_js__WEBPACK_IMPORTED_MODULE_6__.PASSTHROUGH,\n\t\t\tmapper: new _utils_js__WEBPACK_IMPORTED_MODULE_5__.RunnableCallable({\n\t\t\t\tfunc: outputKeys.length && outputKeys[0] === ROOT ? _getRoot : _getUpdates,\n\t\t\t\ttrace: false,\n\t\t\t\trecurse: false\n\t\t\t})\n\t\t}];\n\t\tif (key === _constants_js__WEBPACK_IMPORTED_MODULE_4__.START) this.nodes[key] = new _pregel_read_js__WEBPACK_IMPORTED_MODULE_7__.PregelNode({\n\t\t\ttags: [_constants_js__WEBPACK_IMPORTED_MODULE_4__.TAG_HIDDEN],\n\t\t\ttriggers: [_constants_js__WEBPACK_IMPORTED_MODULE_4__.START],\n\t\t\tchannels: [_constants_js__WEBPACK_IMPORTED_MODULE_4__.START],\n\t\t\twriters: [new _pregel_write_js__WEBPACK_IMPORTED_MODULE_6__.ChannelWrite(stateWriteEntries, [_constants_js__WEBPACK_IMPORTED_MODULE_4__.TAG_HIDDEN])]\n\t\t});\n\t\telse {\n\t\t\tconst inputDefinition = node?.input ?? this.builder._schemaDefinition;\n\t\t\tconst inputValues = Object.fromEntries(Object.keys(this.builder._schemaDefinitions.get(inputDefinition)).map((k) => [k, k]));\n\t\t\tconst isSingleInput = Object.keys(inputValues).length === 1 && ROOT in inputValues;\n\t\t\tconst branchChannel = `branch:to:${key}`;\n\t\t\tthis.channels[branchChannel] = node?.defer ? new _channels_last_value_js__WEBPACK_IMPORTED_MODULE_2__.LastValueAfterFinish() : new _channels_ephemeral_value_js__WEBPACK_IMPORTED_MODULE_9__.EphemeralValue(false);\n\t\t\tthis.nodes[key] = new _pregel_read_js__WEBPACK_IMPORTED_MODULE_7__.PregelNode({\n\t\t\t\ttriggers: [branchChannel],\n\t\t\t\tchannels: isSingleInput ? Object.keys(inputValues) : inputValues,\n\t\t\t\twriters: [new _pregel_write_js__WEBPACK_IMPORTED_MODULE_6__.ChannelWrite(stateWriteEntries, [_constants_js__WEBPACK_IMPORTED_MODULE_4__.TAG_HIDDEN])],\n\t\t\t\tmapper: isSingleInput ? void 0 : (input) => {\n\t\t\t\t\treturn Object.fromEntries(Object.entries(input).filter(([k]) => k in inputValues));\n\t\t\t\t},\n\t\t\t\tbound: node?.runnable,\n\t\t\t\tmetadata: node?.metadata,\n\t\t\t\tretryPolicy: node?.retryPolicy,\n\t\t\t\tcachePolicy: node?.cachePolicy,\n\t\t\t\tsubgraphs: node?.subgraphs,\n\t\t\t\tends: node?.ends\n\t\t\t});\n\t\t}\n\t}\n\tattachEdge(starts, end) {\n\t\tif (end === _constants_js__WEBPACK_IMPORTED_MODULE_4__.END) return;\n\t\tif (typeof starts === \"string\") this.nodes[starts].writers.push(new _pregel_write_js__WEBPACK_IMPORTED_MODULE_6__.ChannelWrite([{\n\t\t\tchannel: `branch:to:${end}`,\n\t\t\tvalue: null\n\t\t}], [_constants_js__WEBPACK_IMPORTED_MODULE_4__.TAG_HIDDEN]));\n\t\telse if (Array.isArray(starts)) {\n\t\t\tconst channelName = `join:${starts.join(\"+\")}:${end}`;\n\t\t\tthis.channels[channelName] = this.builder.nodes[end].defer ? new _channels_named_barrier_value_js__WEBPACK_IMPORTED_MODULE_11__.NamedBarrierValueAfterFinish(new Set(starts)) : new _channels_named_barrier_value_js__WEBPACK_IMPORTED_MODULE_11__.NamedBarrierValue(new Set(starts));\n\t\t\tthis.nodes[end].triggers.push(channelName);\n\t\t\tfor (const start of starts) this.nodes[start].writers.push(new _pregel_write_js__WEBPACK_IMPORTED_MODULE_6__.ChannelWrite([{\n\t\t\t\tchannel: channelName,\n\t\t\t\tvalue: start\n\t\t\t}], [_constants_js__WEBPACK_IMPORTED_MODULE_4__.TAG_HIDDEN]));\n\t\t}\n\t}\n\tattachBranch(start, _, branch, options = { withReader: true }) {\n\t\tconst branchWriter = async (packets, config) => {\n\t\t\tconst filteredPackets = packets.filter((p) => p !== _constants_js__WEBPACK_IMPORTED_MODULE_4__.END);\n\t\t\tif (!filteredPackets.length) return;\n\t\t\tconst writes = filteredPackets.map((p) => {\n\t\t\t\tif ((0,_constants_js__WEBPACK_IMPORTED_MODULE_4__._isSend)(p)) return p;\n\t\t\t\treturn {\n\t\t\t\t\tchannel: p === _constants_js__WEBPACK_IMPORTED_MODULE_4__.END ? p : `branch:to:${p}`,\n\t\t\t\t\tvalue: start\n\t\t\t\t};\n\t\t\t});\n\t\t\tawait _pregel_write_js__WEBPACK_IMPORTED_MODULE_6__.ChannelWrite.doWrite({\n\t\t\t\t...config,\n\t\t\t\ttags: (config.tags ?? []).concat([_constants_js__WEBPACK_IMPORTED_MODULE_4__.TAG_HIDDEN])\n\t\t\t}, writes);\n\t\t};\n\t\tthis.nodes[start].writers.push(branch.run(branchWriter, options.withReader ? (config) => _pregel_read_js__WEBPACK_IMPORTED_MODULE_7__.ChannelRead.doRead(config, this.streamChannels ?? this.outputChannels, true) : void 0));\n\t}\n\tasync _validateInput(input) {\n\t\tif (input == null) return input;\n\t\tconst schema = (() => {\n\t\t\tconst input$1 = this.builder._inputRuntimeDefinition;\n\t\t\tconst schema$1 = this.builder._schemaRuntimeDefinition;\n\t\t\tconst apply = (schema$2) => {\n\t\t\t\tif (schema$2 == null) return void 0;\n\t\t\t\treturn this._metaRegistry.getExtendedChannelSchemas(schema$2, { withReducerSchema: true });\n\t\t\t};\n\t\t\tif ((0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_14__.isInteropZodObject)(input$1)) return apply(input$1);\n\t\t\tif (input$1 === PartialStateSchema) return (0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_14__.interopZodObjectPartial)(apply(schema$1));\n\t\t})();\n\t\tif ((0,_constants_js__WEBPACK_IMPORTED_MODULE_4__.isCommand)(input)) {\n\t\t\tconst parsedInput = input;\n\t\t\tif (input.update && schema != null) parsedInput.update = (0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_14__.interopParse)(schema, input.update);\n\t\t\treturn parsedInput;\n\t\t}\n\t\tif (schema != null) return (0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_14__.interopParse)(schema, input);\n\t\treturn input;\n\t}\n\tisInterrupted(input) {\n\t\treturn (0,_constants_js__WEBPACK_IMPORTED_MODULE_4__.isInterrupted)(input);\n\t}\n\tasync _validateContext(config) {\n\t\tconst configSchema = this.builder._configRuntimeSchema;\n\t\tif ((0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_14__.isInteropZodObject)(configSchema)) (0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_14__.interopParse)(configSchema, config);\n\t\treturn config;\n\t}\n};\nfunction isStateDefinition(obj) {\n\treturn typeof obj === \"object\" && obj !== null && !Array.isArray(obj) && Object.keys(obj).length > 0 && Object.values(obj).every((v) => typeof v === \"function\" || (0,_channels_base_js__WEBPACK_IMPORTED_MODULE_1__.isBaseChannel)(v));\n}\nfunction isAnnotationRoot(obj) {\n\treturn typeof obj === \"object\" && obj !== null && \"lc_graph_name\" in obj && obj.lc_graph_name === \"AnnotationRoot\";\n}\nfunction isStateGraphArgs(obj) {\n\treturn typeof obj === \"object\" && obj !== null && obj.channels !== void 0;\n}\nfunction isStateGraphArgsWithStateSchema(obj) {\n\treturn typeof obj === \"object\" && obj !== null && obj.stateSchema !== void 0;\n}\nfunction isStateGraphArgsWithInputOutputSchemas(obj) {\n\treturn typeof obj === \"object\" && obj !== null && obj.stateSchema === void 0 && obj.input !== void 0 && obj.output !== void 0;\n}\nfunction isZodStateGraphArgsWithStateSchema(value) {\n\tif (typeof value !== \"object\" || value == null) return false;\n\tif (!(\"state\" in value) || !(0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_14__.isInteropZodObject)(value.state)) return false;\n\tif (\"input\" in value && !(0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_14__.isInteropZodObject)(value.input)) return false;\n\tif (\"output\" in value && !(0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_14__.isInteropZodObject)(value.output)) return false;\n\treturn true;\n}\nfunction _controlBranch(value) {\n\tif ((0,_constants_js__WEBPACK_IMPORTED_MODULE_4__._isSend)(value)) return [value];\n\tconst commands = [];\n\tif ((0,_constants_js__WEBPACK_IMPORTED_MODULE_4__.isCommand)(value)) commands.push(value);\n\telse if (Array.isArray(value)) commands.push(...value.filter(_constants_js__WEBPACK_IMPORTED_MODULE_4__.isCommand));\n\tconst destinations = [];\n\tfor (const command of commands) {\n\t\tif (command.graph === _constants_js__WEBPACK_IMPORTED_MODULE_4__.Command.PARENT) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.ParentCommand(command);\n\t\tif ((0,_constants_js__WEBPACK_IMPORTED_MODULE_4__._isSend)(command.goto)) destinations.push(command.goto);\n\t\telse if (typeof command.goto === \"string\") destinations.push(command.goto);\n\t\telse if (Array.isArray(command.goto)) destinations.push(...command.goto);\n\t}\n\treturn destinations;\n}\nfunction _getControlBranch() {\n\treturn new _graph_js__WEBPACK_IMPORTED_MODULE_10__.Branch({ path: new _utils_js__WEBPACK_IMPORTED_MODULE_5__.RunnableCallable({\n\t\tfunc: _controlBranch,\n\t\ttags: [_constants_js__WEBPACK_IMPORTED_MODULE_4__.TAG_HIDDEN],\n\t\ttrace: false,\n\t\trecurse: false,\n\t\tname: \"<control_branch>\"\n\t}) });\n}\n\n//#endregion\n\n//# sourceMappingURL=state.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9ncmFwaC9zdGF0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFpRTtBQUNiO0FBQ2E7QUFDcEI7QUFDd0g7QUFDdEg7QUFDZ0I7QUFDSDtBQUNEO0FBQ0s7QUFDTjtBQUMyQztBQUNsRDtBQUNxQjtBQUNnQzs7QUFFeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sa0JBQWtCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLFdBQVcseUJBQXlCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw4Q0FBOEM7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsNkNBQUs7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw2REFBa0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksU0FBUyxnRkFBa0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUZBQXFGLGdGQUFrQjtBQUN2RztBQUNBO0FBQ0EsT0FBTyxnRkFBa0I7QUFDekI7QUFDQTtBQUNBLElBQUksU0FBUyxnRkFBa0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0RUFBNEUsSUFBSTtBQUNoRjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxLQUFLO0FBQ3JELCtCQUErQix5RUFBOEIsRUFBRSxtRUFBd0IsdURBQXVELGFBQWE7QUFDM0o7QUFDQSxvREFBb0QsSUFBSTtBQUN4RCxlQUFlLDhDQUFHLFlBQVksZ0RBQUssNEJBQTRCLElBQUk7QUFDbkU7QUFDQTtBQUNBLFFBQVEsZ0ZBQWtCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxnRUFBUTtBQUNmLHlEQUF5RCx1REFBZ0I7QUFDekU7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLG1CQUFtQiw2RUFBaUI7QUFDcEM7QUFDQSx3RUFBd0U7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx1RUFBWTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDhDQUFHO0FBQ3BCLDZHQUE2RyxNQUFNO0FBQ25IO0FBQ0EsaUJBQWlCLDhDQUFHO0FBQ3BCLDZHQUE2RyxPQUFPO0FBQ3BIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0RkFBNEYsSUFBSTtBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsaUZBQWlGLElBQUk7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSxLQUFLLGdEQUFLLE9BQU8sd0VBQWM7QUFDL0IsSUFBSTtBQUNKLGtCQUFrQixnREFBSztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILHNCQUFzQixnREFBSztBQUMzQjtBQUNBLHdCQUF3QixnREFBSyxFQUFFLCtDQUFJLHlCQUF5QixtQkFBbUI7QUFDL0UsNkVBQTZFLCtDQUFJLHlCQUF5QixtQkFBbUI7QUFDN0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVGQUF1RiwwREFBVTtBQUNqRyx1QkFBdUIsMERBQVU7QUFDakM7QUFDQTtBQUNBO0FBQ0EsOENBQThDLGlCQUFpQjtBQUMvRDtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMscURBQWE7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDZEQUFrQjtBQUNuQyxlQUFlLHNCQUFzQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxnREFBSztBQUNuQjtBQUNBO0FBQ0EsT0FBTyx3REFBUztBQUNoQix3QkFBd0Isa0RBQU87QUFDL0I7QUFDQSxLQUFLLHVFQUF1RSx3REFBUztBQUNyRjtBQUNBLCtCQUErQix3REFBUztBQUN4QyxxQkFBcUIsa0RBQU87QUFDNUI7QUFDQSxNQUFNO0FBQ047QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksd0RBQVM7QUFDckIsd0JBQXdCLGtEQUFPO0FBQy9CO0FBQ0EsS0FBSyxnRUFBZ0Usb0RBQVM7QUFDOUU7QUFDQSxrQ0FBa0Msd0RBQVM7QUFDM0Msd0JBQXdCLGtEQUFPO0FBQy9CO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxjQUFjLDBEQUFrQixtQkFBbUIsbUJBQW1CLHFGQUFxRixZQUFZLEtBQUssa0RBQWtEO0FBQzlOO0FBQ0E7QUFDQTtBQUNBLFVBQVUseURBQVc7QUFDckIsZUFBZSx1REFBZ0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSCxjQUFjLGdEQUFLLHdCQUF3Qix1REFBVTtBQUNyRCxVQUFVLHFEQUFVO0FBQ3BCLGNBQWMsZ0RBQUs7QUFDbkIsY0FBYyxnREFBSztBQUNuQixpQkFBaUIsMERBQVkscUJBQXFCLHFEQUFVO0FBQzVELEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxJQUFJO0FBQzFDLG9EQUFvRCx5RUFBb0IsU0FBUyx3RUFBYztBQUMvRix5QkFBeUIsdURBQVU7QUFDbkM7QUFDQTtBQUNBLGtCQUFrQiwwREFBWSxxQkFBcUIscURBQVU7QUFDN0Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsY0FBYyw4Q0FBRztBQUNqQixzRUFBc0UsMERBQVk7QUFDbEYseUJBQXlCLElBQUk7QUFDN0I7QUFDQSxHQUFHLElBQUkscURBQVU7QUFDakI7QUFDQSwrQkFBK0IsaUJBQWlCLEdBQUcsSUFBSTtBQUN2RCxvRUFBb0UsMkZBQTRCLHdCQUF3QixnRkFBaUI7QUFDekk7QUFDQSxrRUFBa0UsMERBQVk7QUFDOUU7QUFDQTtBQUNBLElBQUksSUFBSSxxREFBVTtBQUNsQjtBQUNBO0FBQ0EsNENBQTRDLGtCQUFrQjtBQUM5RDtBQUNBLHVEQUF1RCw4Q0FBRztBQUMxRDtBQUNBO0FBQ0EsUUFBUSxzREFBTztBQUNmO0FBQ0Esb0JBQW9CLDhDQUFHLG9CQUFvQixFQUFFO0FBQzdDO0FBQ0E7QUFDQSxJQUFJO0FBQ0osU0FBUywwREFBWTtBQUNyQjtBQUNBLHNDQUFzQyxxREFBVTtBQUNoRCxJQUFJO0FBQ0o7QUFDQSwyRkFBMkYsd0RBQVc7QUFDdEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSx5QkFBeUI7QUFDN0Y7QUFDQSxPQUFPLGdGQUFrQjtBQUN6Qiw4Q0FBOEMscUZBQXVCO0FBQ3JFLEdBQUc7QUFDSCxNQUFNLHdEQUFTO0FBQ2Y7QUFDQSw0REFBNEQsMEVBQVk7QUFDeEU7QUFDQTtBQUNBLDZCQUE2QiwwRUFBWTtBQUN6QztBQUNBO0FBQ0E7QUFDQSxTQUFTLDREQUFhO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLE1BQU0sZ0ZBQWtCLGdCQUFnQiwwRUFBWTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9LQUFvSyxnRUFBYTtBQUNqTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsZ0ZBQWtCO0FBQy9DLDBCQUEwQixnRkFBa0I7QUFDNUMsMkJBQTJCLGdGQUFrQjtBQUM3QztBQUNBO0FBQ0E7QUFDQSxLQUFLLHNEQUFPO0FBQ1o7QUFDQSxLQUFLLHdEQUFTO0FBQ2QsOERBQThELG9EQUFTO0FBQ3ZFO0FBQ0E7QUFDQSx3QkFBd0Isa0RBQU8sbUJBQW1CLHFEQUFhO0FBQy9ELE1BQU0sc0RBQU87QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDhDQUFNLEdBQUcsVUFBVSx1REFBZ0I7QUFDL0M7QUFDQSxTQUFTLHFEQUFVO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLEVBQUUsR0FBRztBQUNMOztBQUVBO0FBQzBDO0FBQzFDIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9ncmFwaC9zdGF0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbnZhbGlkVXBkYXRlRXJyb3IsIFBhcmVudENvbW1hbmQgfSBmcm9tIFwiLi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBpc0Jhc2VDaGFubmVsIH0gZnJvbSBcIi4uL2NoYW5uZWxzL2Jhc2UuanNcIjtcbmltcG9ydCB7IExhc3RWYWx1ZUFmdGVyRmluaXNoIH0gZnJvbSBcIi4uL2NoYW5uZWxzL2xhc3RfdmFsdWUuanNcIjtcbmltcG9ydCB7IGdldENoYW5uZWwgfSBmcm9tIFwiLi9hbm5vdGF0aW9uLmpzXCI7XG5pbXBvcnQgeyBDSEVDS1BPSU5UX05BTUVTUEFDRV9FTkQsIENIRUNLUE9JTlRfTkFNRVNQQUNFX1NFUEFSQVRPUiwgQ29tbWFuZCwgRU5ELCBTRUxGLCBTVEFSVCwgVEFHX0hJRERFTiwgX2lzU2VuZCwgaXNDb21tYW5kLCBpc0ludGVycnVwdGVkIH0gZnJvbSBcIi4uL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgUnVubmFibGVDYWxsYWJsZSB9IGZyb20gXCIuLi91dGlscy5qc1wiO1xuaW1wb3J0IHsgQ2hhbm5lbFdyaXRlLCBQQVNTVEhST1VHSCB9IGZyb20gXCIuLi9wcmVnZWwvd3JpdGUuanNcIjtcbmltcG9ydCB7IENoYW5uZWxSZWFkLCBQcmVnZWxOb2RlIH0gZnJvbSBcIi4uL3ByZWdlbC9yZWFkLmpzXCI7XG5pbXBvcnQgeyBpc1ByZWdlbExpa2UgfSBmcm9tIFwiLi4vcHJlZ2VsL3V0aWxzL3N1YmdyYXBoLmpzXCI7XG5pbXBvcnQgeyBFcGhlbWVyYWxWYWx1ZSB9IGZyb20gXCIuLi9jaGFubmVscy9lcGhlbWVyYWxfdmFsdWUuanNcIjtcbmltcG9ydCB7IEJyYW5jaCwgQ29tcGlsZWRHcmFwaCwgR3JhcGggfSBmcm9tIFwiLi9ncmFwaC5qc1wiO1xuaW1wb3J0IHsgTmFtZWRCYXJyaWVyVmFsdWUsIE5hbWVkQmFycmllclZhbHVlQWZ0ZXJGaW5pc2ggfSBmcm9tIFwiLi4vY2hhbm5lbHMvbmFtZWRfYmFycmllcl92YWx1ZS5qc1wiO1xuaW1wb3J0IHsgc2NoZW1hTWV0YVJlZ2lzdHJ5IH0gZnJvbSBcIi4vem9kL21ldGEuanNcIjtcbmltcG9ydCB7IFJ1bm5hYmxlLCBfY29lcmNlVG9SdW5uYWJsZSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvcnVubmFibGVzXCI7XG5pbXBvcnQgeyBpbnRlcm9wUGFyc2UsIGludGVyb3Bab2RPYmplY3RQYXJ0aWFsLCBpc0ludGVyb3Bab2RPYmplY3QgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3V0aWxzL3R5cGVzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvZ3JhcGgvc3RhdGUudHNcbmNvbnN0IFJPT1QgPSBcIl9fcm9vdF9fXCI7XG5jb25zdCBQYXJ0aWFsU3RhdGVTY2hlbWEgPSBTeW1ib2wuZm9yKFwibGFuZ2dyYXBoLnN0YXRlLnBhcnRpYWxcIik7XG4vKipcbiogQSBncmFwaCB3aG9zZSBub2RlcyBjb21tdW5pY2F0ZSBieSByZWFkaW5nIGFuZCB3cml0aW5nIHRvIGEgc2hhcmVkIHN0YXRlLlxuKiBFYWNoIG5vZGUgdGFrZXMgYSBkZWZpbmVkIGBTdGF0ZWAgYXMgaW5wdXQgYW5kIHJldHVybnMgYSBgUGFydGlhbDxTdGF0ZT5gLlxuKlxuKiBFYWNoIHN0YXRlIGtleSBjYW4gb3B0aW9uYWxseSBiZSBhbm5vdGF0ZWQgd2l0aCBhIHJlZHVjZXIgZnVuY3Rpb24gdGhhdFxuKiB3aWxsIGJlIHVzZWQgdG8gYWdncmVnYXRlIHRoZSB2YWx1ZXMgb2YgdGhhdCBrZXkgcmVjZWl2ZWQgZnJvbSBtdWx0aXBsZSBub2Rlcy5cbiogVGhlIHNpZ25hdHVyZSBvZiBhIHJlZHVjZXIgZnVuY3Rpb24gaXMgKGxlZnQ6IFZhbHVlLCByaWdodDogVXBkYXRlVmFsdWUpID0+IFZhbHVlLlxuKlxuKiBTZWUge0BsaW5rIEFubm90YXRpb259IGZvciBtb3JlIG9uIGRlZmluaW5nIHN0YXRlLlxuKlxuKiBBZnRlciBhZGRpbmcgbm9kZXMgYW5kIGVkZ2VzIHRvIHlvdXIgZ3JhcGgsIHlvdSBtdXN0IGNhbGwgYC5jb21waWxlKClgIG9uIGl0IGJlZm9yZVxuKiB5b3UgY2FuIHVzZSBpdC5cbipcbiogQGV4YW1wbGVcbiogYGBgdHNcbiogaW1wb3J0IHtcbiogICB0eXBlIEJhc2VNZXNzYWdlLFxuKiAgIEFJTWVzc2FnZSxcbiogICBIdW1hbk1lc3NhZ2UsXG4qIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9tZXNzYWdlc1wiO1xuKiBpbXBvcnQgeyBTdGF0ZUdyYXBoLCBBbm5vdGF0aW9uIH0gZnJvbSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoXCI7XG4qXG4qIC8vIERlZmluZSBhIHN0YXRlIHdpdGggYSBzaW5nbGUga2V5IG5hbWVkIFwibWVzc2FnZXNcIiB0aGF0IHdpbGxcbiogLy8gY29tYmluZSBhIHJldHVybmVkIEJhc2VNZXNzYWdlIG9yIGFycmF5cyBvZiBCYXNlTWVzc2FnZXNcbiogY29uc3QgU3RhdGVBbm5vdGF0aW9uID0gQW5ub3RhdGlvbi5Sb290KHtcbiogICBzZW50aW1lbnQ6IEFubm90YXRpb248c3RyaW5nPixcbiogICBtZXNzYWdlczogQW5ub3RhdGlvbjxCYXNlTWVzc2FnZVtdPih7XG4qICAgICByZWR1Y2VyOiAobGVmdDogQmFzZU1lc3NhZ2VbXSwgcmlnaHQ6IEJhc2VNZXNzYWdlIHwgQmFzZU1lc3NhZ2VbXSkgPT4ge1xuKiAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyaWdodCkpIHtcbiogICAgICAgICByZXR1cm4gbGVmdC5jb25jYXQocmlnaHQpO1xuKiAgICAgICB9XG4qICAgICAgIHJldHVybiBsZWZ0LmNvbmNhdChbcmlnaHRdKTtcbiogICAgIH0sXG4qICAgICBkZWZhdWx0OiAoKSA9PiBbXSxcbiogICB9KSxcbiogfSk7XG4qXG4qIGNvbnN0IGdyYXBoQnVpbGRlciA9IG5ldyBTdGF0ZUdyYXBoKFN0YXRlQW5ub3RhdGlvbik7XG4qXG4qIC8vIEEgbm9kZSBpbiB0aGUgZ3JhcGggdGhhdCByZXR1cm5zIGFuIG9iamVjdCB3aXRoIGEgXCJtZXNzYWdlc1wiIGtleVxuKiAvLyB3aWxsIHVwZGF0ZSB0aGUgc3RhdGUgYnkgY29tYmluaW5nIHRoZSBleGlzdGluZyB2YWx1ZSB3aXRoIHRoZSByZXR1cm5lZCBvbmUuXG4qIGNvbnN0IG15Tm9kZSA9IChzdGF0ZTogdHlwZW9mIFN0YXRlQW5ub3RhdGlvbi5TdGF0ZSkgPT4ge1xuKiAgIHJldHVybiB7XG4qICAgICBtZXNzYWdlczogW25ldyBBSU1lc3NhZ2UoXCJTb21lIG5ldyByZXNwb25zZVwiKV0sXG4qICAgICBzZW50aW1lbnQ6IFwicG9zaXRpdmVcIixcbiogICB9O1xuKiB9O1xuKlxuKiBjb25zdCBncmFwaCA9IGdyYXBoQnVpbGRlclxuKiAgIC5hZGROb2RlKFwibXlOb2RlXCIsIG15Tm9kZSlcbiogICAuYWRkRWRnZShcIl9fc3RhcnRfX1wiLCBcIm15Tm9kZVwiKVxuKiAgIC5hZGRFZGdlKFwibXlOb2RlXCIsIFwiX19lbmRfX1wiKVxuKiAgIC5jb21waWxlKCk7XG4qXG4qIGF3YWl0IGdyYXBoLmludm9rZSh7IG1lc3NhZ2VzOiBbbmV3IEh1bWFuTWVzc2FnZShcImhvdyBhcmUgeW91P1wiKV0gfSk7XG4qXG4qIC8vIHtcbiogLy8gICBtZXNzYWdlczogW0h1bWFuTWVzc2FnZShcImhvdyBhcmUgeW91P1wiKSwgQUlNZXNzYWdlKFwiU29tZSBuZXcgcmVzcG9uc2VcIildLFxuKiAvLyAgIHNlbnRpbWVudDogXCJwb3NpdGl2ZVwiLFxuKiAvLyB9XG4qIGBgYFxuKi9cbnZhciBTdGF0ZUdyYXBoID0gY2xhc3MgZXh0ZW5kcyBHcmFwaCB7XG5cdGNoYW5uZWxzID0ge307XG5cdHdhaXRpbmdFZGdlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG5cdC8qKiBAaW50ZXJuYWwgKi9cblx0X3NjaGVtYURlZmluaXRpb247XG5cdC8qKiBAaW50ZXJuYWwgKi9cblx0X3NjaGVtYVJ1bnRpbWVEZWZpbml0aW9uO1xuXHQvKiogQGludGVybmFsICovXG5cdF9pbnB1dERlZmluaXRpb247XG5cdC8qKiBAaW50ZXJuYWwgKi9cblx0X2lucHV0UnVudGltZURlZmluaXRpb247XG5cdC8qKiBAaW50ZXJuYWwgKi9cblx0X291dHB1dERlZmluaXRpb247XG5cdC8qKiBAaW50ZXJuYWwgKi9cblx0X291dHB1dFJ1bnRpbWVEZWZpbml0aW9uO1xuXHQvKipcblx0KiBNYXAgc2NoZW1hcyB0byBtYW5hZ2VkIHZhbHVlc1xuXHQqIEBpbnRlcm5hbFxuXHQqL1xuXHRfc2NoZW1hRGVmaW5pdGlvbnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuXHQvKiogQGludGVybmFsICovXG5cdF9tZXRhUmVnaXN0cnkgPSBzY2hlbWFNZXRhUmVnaXN0cnk7XG5cdC8qKiBAaW50ZXJuYWwgVXNlZCBvbmx5IGZvciB0eXBpbmcuICovXG5cdF9jb25maWdTY2hlbWE7XG5cdC8qKiBAaW50ZXJuYWwgKi9cblx0X2NvbmZpZ1J1bnRpbWVTY2hlbWE7XG5cdC8qKiBAaW50ZXJuYWwgKi9cblx0X2ludGVycnVwdDtcblx0LyoqIEBpbnRlcm5hbCAqL1xuXHRfd3JpdGVyO1xuXHRjb25zdHJ1Y3RvcihmaWVsZHMsIGNvbnRleHRTY2hlbWEpIHtcblx0XHRzdXBlcigpO1xuXHRcdGlmIChpc1pvZFN0YXRlR3JhcGhBcmdzV2l0aFN0YXRlU2NoZW1hKGZpZWxkcykpIHtcblx0XHRcdGNvbnN0IHN0YXRlRGVmID0gdGhpcy5fbWV0YVJlZ2lzdHJ5LmdldENoYW5uZWxzRm9yU2NoZW1hKGZpZWxkcy5zdGF0ZSk7XG5cdFx0XHRjb25zdCBpbnB1dERlZiA9IGZpZWxkcy5pbnB1dCAhPSBudWxsID8gdGhpcy5fbWV0YVJlZ2lzdHJ5LmdldENoYW5uZWxzRm9yU2NoZW1hKGZpZWxkcy5pbnB1dCkgOiBzdGF0ZURlZjtcblx0XHRcdGNvbnN0IG91dHB1dERlZiA9IGZpZWxkcy5vdXRwdXQgIT0gbnVsbCA/IHRoaXMuX21ldGFSZWdpc3RyeS5nZXRDaGFubmVsc0ZvclNjaGVtYShmaWVsZHMub3V0cHV0KSA6IHN0YXRlRGVmO1xuXHRcdFx0dGhpcy5fc2NoZW1hRGVmaW5pdGlvbiA9IHN0YXRlRGVmO1xuXHRcdFx0dGhpcy5fc2NoZW1hUnVudGltZURlZmluaXRpb24gPSBmaWVsZHMuc3RhdGU7XG5cdFx0XHR0aGlzLl9pbnB1dERlZmluaXRpb24gPSBpbnB1dERlZjtcblx0XHRcdHRoaXMuX2lucHV0UnVudGltZURlZmluaXRpb24gPSBmaWVsZHMuaW5wdXQgPz8gUGFydGlhbFN0YXRlU2NoZW1hO1xuXHRcdFx0dGhpcy5fb3V0cHV0RGVmaW5pdGlvbiA9IG91dHB1dERlZjtcblx0XHRcdHRoaXMuX291dHB1dFJ1bnRpbWVEZWZpbml0aW9uID0gZmllbGRzLm91dHB1dCA/PyBmaWVsZHMuc3RhdGU7XG5cdFx0fSBlbHNlIGlmIChpc0ludGVyb3Bab2RPYmplY3QoZmllbGRzKSkge1xuXHRcdFx0Y29uc3Qgc3RhdGVEZWYgPSB0aGlzLl9tZXRhUmVnaXN0cnkuZ2V0Q2hhbm5lbHNGb3JTY2hlbWEoZmllbGRzKTtcblx0XHRcdHRoaXMuX3NjaGVtYURlZmluaXRpb24gPSBzdGF0ZURlZjtcblx0XHRcdHRoaXMuX3NjaGVtYVJ1bnRpbWVEZWZpbml0aW9uID0gZmllbGRzO1xuXHRcdFx0dGhpcy5faW5wdXREZWZpbml0aW9uID0gc3RhdGVEZWY7XG5cdFx0XHR0aGlzLl9pbnB1dFJ1bnRpbWVEZWZpbml0aW9uID0gUGFydGlhbFN0YXRlU2NoZW1hO1xuXHRcdFx0dGhpcy5fb3V0cHV0RGVmaW5pdGlvbiA9IHN0YXRlRGVmO1xuXHRcdFx0dGhpcy5fb3V0cHV0UnVudGltZURlZmluaXRpb24gPSBmaWVsZHM7XG5cdFx0fSBlbHNlIGlmIChpc1N0YXRlR3JhcGhBcmdzV2l0aElucHV0T3V0cHV0U2NoZW1hcyhmaWVsZHMpKSB7XG5cdFx0XHR0aGlzLl9zY2hlbWFEZWZpbml0aW9uID0gZmllbGRzLmlucHV0LnNwZWM7XG5cdFx0XHR0aGlzLl9pbnB1dERlZmluaXRpb24gPSBmaWVsZHMuaW5wdXQuc3BlYztcblx0XHRcdHRoaXMuX291dHB1dERlZmluaXRpb24gPSBmaWVsZHMub3V0cHV0LnNwZWM7XG5cdFx0fSBlbHNlIGlmIChpc1N0YXRlR3JhcGhBcmdzV2l0aFN0YXRlU2NoZW1hKGZpZWxkcykpIHtcblx0XHRcdHRoaXMuX3NjaGVtYURlZmluaXRpb24gPSBmaWVsZHMuc3RhdGVTY2hlbWEuc3BlYztcblx0XHRcdHRoaXMuX2lucHV0RGVmaW5pdGlvbiA9IGZpZWxkcy5pbnB1dD8uc3BlYyA/PyB0aGlzLl9zY2hlbWFEZWZpbml0aW9uO1xuXHRcdFx0dGhpcy5fb3V0cHV0RGVmaW5pdGlvbiA9IGZpZWxkcy5vdXRwdXQ/LnNwZWMgPz8gdGhpcy5fc2NoZW1hRGVmaW5pdGlvbjtcblx0XHR9IGVsc2UgaWYgKGlzU3RhdGVEZWZpbml0aW9uKGZpZWxkcykgfHwgaXNBbm5vdGF0aW9uUm9vdChmaWVsZHMpKSB0aGlzLl9zY2hlbWFEZWZpbml0aW9uID0gaXNBbm5vdGF0aW9uUm9vdChmaWVsZHMpID8gZmllbGRzLnNwZWMgOiBmaWVsZHM7XG5cdFx0ZWxzZSBpZiAoaXNTdGF0ZUdyYXBoQXJncyhmaWVsZHMpKSB0aGlzLl9zY2hlbWFEZWZpbml0aW9uID0gX2dldENoYW5uZWxzKGZpZWxkcy5jaGFubmVscyk7XG5cdFx0ZWxzZSB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIFN0YXRlR3JhcGggaW5wdXQuIE1ha2Ugc3VyZSB0byBwYXNzIGEgdmFsaWQgQW5ub3RhdGlvbi5Sb290IG9yIFpvZCBzY2hlbWEuXCIpO1xuXHRcdHRoaXMuX2lucHV0RGVmaW5pdGlvbiA/Pz0gdGhpcy5fc2NoZW1hRGVmaW5pdGlvbjtcblx0XHR0aGlzLl9vdXRwdXREZWZpbml0aW9uID8/PSB0aGlzLl9zY2hlbWFEZWZpbml0aW9uO1xuXHRcdHRoaXMuX2FkZFNjaGVtYSh0aGlzLl9zY2hlbWFEZWZpbml0aW9uKTtcblx0XHR0aGlzLl9hZGRTY2hlbWEodGhpcy5faW5wdXREZWZpbml0aW9uKTtcblx0XHR0aGlzLl9hZGRTY2hlbWEodGhpcy5fb3V0cHV0RGVmaW5pdGlvbik7XG5cdFx0ZnVuY3Rpb24gaXNPcHRpb25zKG9wdGlvbnMpIHtcblx0XHRcdHJldHVybiB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJvYmplY3RcIiAmJiBvcHRpb25zICE9IG51bGwgJiYgIShcInNwZWNcIiBpbiBvcHRpb25zKSAmJiAhaXNJbnRlcm9wWm9kT2JqZWN0KG9wdGlvbnMpO1xuXHRcdH1cblx0XHRpZiAoaXNPcHRpb25zKGNvbnRleHRTY2hlbWEpKSB7XG5cdFx0XHRpZiAoaXNJbnRlcm9wWm9kT2JqZWN0KGNvbnRleHRTY2hlbWEuY29udGV4dCkpIHRoaXMuX2NvbmZpZ1J1bnRpbWVTY2hlbWEgPSBjb250ZXh0U2NoZW1hLmNvbnRleHQ7XG5cdFx0XHR0aGlzLl9pbnRlcnJ1cHQgPSBjb250ZXh0U2NoZW1hLmludGVycnVwdDtcblx0XHRcdHRoaXMuX3dyaXRlciA9IGNvbnRleHRTY2hlbWEud3JpdGVyO1xuXHRcdH0gZWxzZSBpZiAoaXNJbnRlcm9wWm9kT2JqZWN0KGNvbnRleHRTY2hlbWEpKSB0aGlzLl9jb25maWdSdW50aW1lU2NoZW1hID0gY29udGV4dFNjaGVtYTtcblx0fVxuXHRnZXQgYWxsRWRnZXMoKSB7XG5cdFx0cmV0dXJuIG5ldyBTZXQoWy4uLnRoaXMuZWRnZXMsIC4uLkFycmF5LmZyb20odGhpcy53YWl0aW5nRWRnZXMpLmZsYXRNYXAoKFtzdGFydHMsIGVuZF0pID0+IHN0YXJ0cy5tYXAoKHN0YXJ0KSA9PiBbc3RhcnQsIGVuZF0pKV0pO1xuXHR9XG5cdF9hZGRTY2hlbWEoc3RhdGVEZWZpbml0aW9uKSB7XG5cdFx0aWYgKHRoaXMuX3NjaGVtYURlZmluaXRpb25zLmhhcyhzdGF0ZURlZmluaXRpb24pKSByZXR1cm47XG5cdFx0dGhpcy5fc2NoZW1hRGVmaW5pdGlvbnMuc2V0KHN0YXRlRGVmaW5pdGlvbiwgc3RhdGVEZWZpbml0aW9uKTtcblx0XHRmb3IgKGNvbnN0IFtrZXksIHZhbF0gb2YgT2JqZWN0LmVudHJpZXMoc3RhdGVEZWZpbml0aW9uKSkge1xuXHRcdFx0bGV0IGNoYW5uZWw7XG5cdFx0XHRpZiAodHlwZW9mIHZhbCA9PT0gXCJmdW5jdGlvblwiKSBjaGFubmVsID0gdmFsKCk7XG5cdFx0XHRlbHNlIGNoYW5uZWwgPSB2YWw7XG5cdFx0XHRpZiAodGhpcy5jaGFubmVsc1trZXldICE9PSB2b2lkIDApIHtcblx0XHRcdFx0aWYgKHRoaXMuY2hhbm5lbHNba2V5XSAhPT0gY2hhbm5lbCkge1xuXHRcdFx0XHRcdGlmIChjaGFubmVsLmxjX2dyYXBoX25hbWUgIT09IFwiTGFzdFZhbHVlXCIpIHRocm93IG5ldyBFcnJvcihgQ2hhbm5lbCBcIiR7a2V5fVwiIGFscmVhZHkgZXhpc3RzIHdpdGggYSBkaWZmZXJlbnQgdHlwZS5gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHRoaXMuY2hhbm5lbHNba2V5XSA9IGNoYW5uZWw7XG5cdFx0fVxuXHR9XG5cdGFkZE5vZGUoLi4uYXJncykge1xuXHRcdGZ1bmN0aW9uIGlzTXVsdGlwbGVOb2RlcyhhcmdzJDEpIHtcblx0XHRcdHJldHVybiBhcmdzJDEubGVuZ3RoID49IDEgJiYgdHlwZW9mIGFyZ3MkMVswXSAhPT0gXCJzdHJpbmdcIjtcblx0XHR9XG5cdFx0Y29uc3Qgbm9kZXMgPSBpc011bHRpcGxlTm9kZXMoYXJncykgPyBBcnJheS5pc0FycmF5KGFyZ3NbMF0pID8gYXJnc1swXSA6IE9iamVjdC5lbnRyaWVzKGFyZ3NbMF0pLm1hcCgoW2tleSwgYWN0aW9uXSkgPT4gW2tleSwgYWN0aW9uXSkgOiBbW1xuXHRcdFx0YXJnc1swXSxcblx0XHRcdGFyZ3NbMV0sXG5cdFx0XHRhcmdzWzJdXG5cdFx0XV07XG5cdFx0aWYgKG5vZGVzLmxlbmd0aCA9PT0gMCkgdGhyb3cgbmV3IEVycm9yKFwiTm8gbm9kZXMgcHJvdmlkZWQgaW4gYGFkZE5vZGVgXCIpO1xuXHRcdGZvciAoY29uc3QgW2tleSwgYWN0aW9uLCBvcHRpb25zXSBvZiBub2Rlcykge1xuXHRcdFx0aWYgKGtleSBpbiB0aGlzLmNoYW5uZWxzKSB0aHJvdyBuZXcgRXJyb3IoYCR7a2V5fSBpcyBhbHJlYWR5IGJlaW5nIHVzZWQgYXMgYSBzdGF0ZSBhdHRyaWJ1dGUgKGEuay5hLiBhIGNoYW5uZWwpLCBjYW5ub3QgYWxzbyBiZSB1c2VkIGFzIGEgbm9kZSBuYW1lLmApO1xuXHRcdFx0Zm9yIChjb25zdCByZXNlcnZlZENoYXIgb2YgW0NIRUNLUE9JTlRfTkFNRVNQQUNFX1NFUEFSQVRPUiwgQ0hFQ0tQT0lOVF9OQU1FU1BBQ0VfRU5EXSkgaWYgKGtleS5pbmNsdWRlcyhyZXNlcnZlZENoYXIpKSB0aHJvdyBuZXcgRXJyb3IoYFwiJHtyZXNlcnZlZENoYXJ9XCIgaXMgYSByZXNlcnZlZCBjaGFyYWN0ZXIgYW5kIGlzIG5vdCBhbGxvd2VkIGluIG5vZGUgbmFtZXMuYCk7XG5cdFx0XHR0aGlzLndhcm5JZkNvbXBpbGVkKGBBZGRpbmcgYSBub2RlIHRvIGEgZ3JhcGggdGhhdCBoYXMgYWxyZWFkeSBiZWVuIGNvbXBpbGVkLiBUaGlzIHdpbGwgbm90IGJlIHJlZmxlY3RlZCBpbiB0aGUgY29tcGlsZWQgZ3JhcGguYCk7XG5cdFx0XHRpZiAoa2V5IGluIHRoaXMubm9kZXMpIHRocm93IG5ldyBFcnJvcihgTm9kZSBcXGAke2tleX1cXGAgYWxyZWFkeSBwcmVzZW50LmApO1xuXHRcdFx0aWYgKGtleSA9PT0gRU5EIHx8IGtleSA9PT0gU1RBUlQpIHRocm93IG5ldyBFcnJvcihgTm9kZSBcXGAke2tleX1cXGAgaXMgcmVzZXJ2ZWQuYCk7XG5cdFx0XHRsZXQgaW5wdXRTcGVjID0gdGhpcy5fc2NoZW1hRGVmaW5pdGlvbjtcblx0XHRcdGlmIChvcHRpb25zPy5pbnB1dCAhPT0gdm9pZCAwKSB7XG5cdFx0XHRcdGlmIChpc0ludGVyb3Bab2RPYmplY3Qob3B0aW9ucy5pbnB1dCkpIGlucHV0U3BlYyA9IHRoaXMuX21ldGFSZWdpc3RyeS5nZXRDaGFubmVsc0ZvclNjaGVtYShvcHRpb25zLmlucHV0KTtcblx0XHRcdFx0ZWxzZSBpZiAob3B0aW9ucy5pbnB1dC5zcGVjICE9PSB2b2lkIDApIGlucHV0U3BlYyA9IG9wdGlvbnMuaW5wdXQuc3BlYztcblx0XHRcdH1cblx0XHRcdGlmIChpbnB1dFNwZWMgIT09IHZvaWQgMCkgdGhpcy5fYWRkU2NoZW1hKGlucHV0U3BlYyk7XG5cdFx0XHRsZXQgcnVubmFibGU7XG5cdFx0XHRpZiAoUnVubmFibGUuaXNSdW5uYWJsZShhY3Rpb24pKSBydW5uYWJsZSA9IGFjdGlvbjtcblx0XHRcdGVsc2UgaWYgKHR5cGVvZiBhY3Rpb24gPT09IFwiZnVuY3Rpb25cIikgcnVubmFibGUgPSBuZXcgUnVubmFibGVDYWxsYWJsZSh7XG5cdFx0XHRcdGZ1bmM6IGFjdGlvbixcblx0XHRcdFx0bmFtZToga2V5LFxuXHRcdFx0XHR0cmFjZTogZmFsc2Vcblx0XHRcdH0pO1xuXHRcdFx0ZWxzZSBydW5uYWJsZSA9IF9jb2VyY2VUb1J1bm5hYmxlKGFjdGlvbik7XG5cdFx0XHRsZXQgY2FjaGVQb2xpY3kgPSBvcHRpb25zPy5jYWNoZVBvbGljeTtcblx0XHRcdGlmICh0eXBlb2YgY2FjaGVQb2xpY3kgPT09IFwiYm9vbGVhblwiKSBjYWNoZVBvbGljeSA9IGNhY2hlUG9saWN5ID8ge30gOiB2b2lkIDA7XG5cdFx0XHRjb25zdCBub2RlU3BlYyA9IHtcblx0XHRcdFx0cnVubmFibGUsXG5cdFx0XHRcdHJldHJ5UG9saWN5OiBvcHRpb25zPy5yZXRyeVBvbGljeSxcblx0XHRcdFx0Y2FjaGVQb2xpY3ksXG5cdFx0XHRcdG1ldGFkYXRhOiBvcHRpb25zPy5tZXRhZGF0YSxcblx0XHRcdFx0aW5wdXQ6IGlucHV0U3BlYyA/PyB0aGlzLl9zY2hlbWFEZWZpbml0aW9uLFxuXHRcdFx0XHRzdWJncmFwaHM6IGlzUHJlZ2VsTGlrZShydW5uYWJsZSkgPyBbcnVubmFibGVdIDogb3B0aW9ucz8uc3ViZ3JhcGhzLFxuXHRcdFx0XHRlbmRzOiBvcHRpb25zPy5lbmRzLFxuXHRcdFx0XHRkZWZlcjogb3B0aW9ucz8uZGVmZXJcblx0XHRcdH07XG5cdFx0XHR0aGlzLm5vZGVzW2tleV0gPSBub2RlU3BlYztcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblx0YWRkRWRnZShzdGFydEtleSwgZW5kS2V5KSB7XG5cdFx0aWYgKHR5cGVvZiBzdGFydEtleSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHN1cGVyLmFkZEVkZ2Uoc3RhcnRLZXksIGVuZEtleSk7XG5cdFx0aWYgKHRoaXMuY29tcGlsZWQpIGNvbnNvbGUud2FybihcIkFkZGluZyBhbiBlZGdlIHRvIGEgZ3JhcGggdGhhdCBoYXMgYWxyZWFkeSBiZWVuIGNvbXBpbGVkLiBUaGlzIHdpbGwgbm90IGJlIHJlZmxlY3RlZCBpbiB0aGUgY29tcGlsZWQgZ3JhcGguXCIpO1xuXHRcdGZvciAoY29uc3Qgc3RhcnQgb2Ygc3RhcnRLZXkpIHtcblx0XHRcdGlmIChzdGFydCA9PT0gRU5EKSB0aHJvdyBuZXcgRXJyb3IoXCJFTkQgY2Fubm90IGJlIGEgc3RhcnQgbm9kZVwiKTtcblx0XHRcdGlmICghT2JqZWN0LmtleXModGhpcy5ub2Rlcykuc29tZSgobm9kZSkgPT4gbm9kZSA9PT0gc3RhcnQpKSB0aHJvdyBuZXcgRXJyb3IoYE5lZWQgdG8gYWRkIGEgbm9kZSBuYW1lZCBcIiR7c3RhcnR9XCIgZmlyc3RgKTtcblx0XHR9XG5cdFx0aWYgKGVuZEtleSA9PT0gRU5EKSB0aHJvdyBuZXcgRXJyb3IoXCJFTkQgY2Fubm90IGJlIGFuIGVuZCBub2RlXCIpO1xuXHRcdGlmICghT2JqZWN0LmtleXModGhpcy5ub2Rlcykuc29tZSgobm9kZSkgPT4gbm9kZSA9PT0gZW5kS2V5KSkgdGhyb3cgbmV3IEVycm9yKGBOZWVkIHRvIGFkZCBhIG5vZGUgbmFtZWQgXCIke2VuZEtleX1cIiBmaXJzdGApO1xuXHRcdHRoaXMud2FpdGluZ0VkZ2VzLmFkZChbc3RhcnRLZXksIGVuZEtleV0pO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cdGFkZFNlcXVlbmNlKG5vZGVzKSB7XG5cdFx0Y29uc3QgcGFyc2VkTm9kZXMgPSBBcnJheS5pc0FycmF5KG5vZGVzKSA/IG5vZGVzIDogT2JqZWN0LmVudHJpZXMobm9kZXMpO1xuXHRcdGlmIChwYXJzZWROb2Rlcy5sZW5ndGggPT09IDApIHRocm93IG5ldyBFcnJvcihcIlNlcXVlbmNlIHJlcXVpcmVzIGF0IGxlYXN0IG9uZSBub2RlLlwiKTtcblx0XHRsZXQgcHJldmlvdXNOb2RlO1xuXHRcdGZvciAoY29uc3QgW2tleSwgYWN0aW9uLCBvcHRpb25zXSBvZiBwYXJzZWROb2Rlcykge1xuXHRcdFx0aWYgKGtleSBpbiB0aGlzLm5vZGVzKSB0aHJvdyBuZXcgRXJyb3IoYE5vZGUgbmFtZXMgbXVzdCBiZSB1bmlxdWU6IG5vZGUgd2l0aCB0aGUgbmFtZSBcIiR7a2V5fVwiIGFscmVhZHkgZXhpc3RzLmApO1xuXHRcdFx0Y29uc3QgdmFsaWRLZXkgPSBrZXk7XG5cdFx0XHR0aGlzLmFkZE5vZGUodmFsaWRLZXksIGFjdGlvbiwgb3B0aW9ucyk7XG5cdFx0XHRpZiAocHJldmlvdXNOb2RlICE9IG51bGwpIHRoaXMuYWRkRWRnZShwcmV2aW91c05vZGUsIHZhbGlkS2V5KTtcblx0XHRcdHByZXZpb3VzTm9kZSA9IHZhbGlkS2V5O1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXHRjb21waWxlKHsgY2hlY2twb2ludGVyLCBzdG9yZSwgY2FjaGUsIGludGVycnVwdEJlZm9yZSwgaW50ZXJydXB0QWZ0ZXIsIG5hbWUsIGRlc2NyaXB0aW9uIH0gPSB7fSkge1xuXHRcdHRoaXMudmFsaWRhdGUoWy4uLkFycmF5LmlzQXJyYXkoaW50ZXJydXB0QmVmb3JlKSA/IGludGVycnVwdEJlZm9yZSA6IFtdLCAuLi5BcnJheS5pc0FycmF5KGludGVycnVwdEFmdGVyKSA/IGludGVycnVwdEFmdGVyIDogW11dKTtcblx0XHRjb25zdCBvdXRwdXRLZXlzID0gT2JqZWN0LmtleXModGhpcy5fc2NoZW1hRGVmaW5pdGlvbnMuZ2V0KHRoaXMuX291dHB1dERlZmluaXRpb24pKTtcblx0XHRjb25zdCBvdXRwdXRDaGFubmVscyA9IG91dHB1dEtleXMubGVuZ3RoID09PSAxICYmIG91dHB1dEtleXNbMF0gPT09IFJPT1QgPyBST09UIDogb3V0cHV0S2V5cztcblx0XHRjb25zdCBzdHJlYW1LZXlzID0gT2JqZWN0LmtleXModGhpcy5jaGFubmVscyk7XG5cdFx0Y29uc3Qgc3RyZWFtQ2hhbm5lbHMgPSBzdHJlYW1LZXlzLmxlbmd0aCA9PT0gMSAmJiBzdHJlYW1LZXlzWzBdID09PSBST09UID8gUk9PVCA6IHN0cmVhbUtleXM7XG5cdFx0Y29uc3QgdXNlckludGVycnVwdCA9IHRoaXMuX2ludGVycnVwdDtcblx0XHRjb25zdCBjb21waWxlZCA9IG5ldyBDb21waWxlZFN0YXRlR3JhcGgoe1xuXHRcdFx0YnVpbGRlcjogdGhpcyxcblx0XHRcdGNoZWNrcG9pbnRlcixcblx0XHRcdGludGVycnVwdEFmdGVyLFxuXHRcdFx0aW50ZXJydXB0QmVmb3JlLFxuXHRcdFx0YXV0b1ZhbGlkYXRlOiBmYWxzZSxcblx0XHRcdG5vZGVzOiB7fSxcblx0XHRcdGNoYW5uZWxzOiB7XG5cdFx0XHRcdC4uLnRoaXMuY2hhbm5lbHMsXG5cdFx0XHRcdFtTVEFSVF06IG5ldyBFcGhlbWVyYWxWYWx1ZSgpXG5cdFx0XHR9LFxuXHRcdFx0aW5wdXRDaGFubmVsczogU1RBUlQsXG5cdFx0XHRvdXRwdXRDaGFubmVscyxcblx0XHRcdHN0cmVhbUNoYW5uZWxzLFxuXHRcdFx0c3RyZWFtTW9kZTogXCJ1cGRhdGVzXCIsXG5cdFx0XHRzdG9yZSxcblx0XHRcdGNhY2hlLFxuXHRcdFx0bmFtZSxcblx0XHRcdGRlc2NyaXB0aW9uLFxuXHRcdFx0dXNlckludGVycnVwdFxuXHRcdH0pO1xuXHRcdGNvbXBpbGVkLmF0dGFjaE5vZGUoU1RBUlQpO1xuXHRcdGZvciAoY29uc3QgW2tleSwgbm9kZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5ub2RlcykpIGNvbXBpbGVkLmF0dGFjaE5vZGUoa2V5LCBub2RlKTtcblx0XHRjb21waWxlZC5hdHRhY2hCcmFuY2goU1RBUlQsIFNFTEYsIF9nZXRDb250cm9sQnJhbmNoKCksIHsgd2l0aFJlYWRlcjogZmFsc2UgfSk7XG5cdFx0Zm9yIChjb25zdCBba2V5XSBvZiBPYmplY3QuZW50cmllcyh0aGlzLm5vZGVzKSkgY29tcGlsZWQuYXR0YWNoQnJhbmNoKGtleSwgU0VMRiwgX2dldENvbnRyb2xCcmFuY2goKSwgeyB3aXRoUmVhZGVyOiBmYWxzZSB9KTtcblx0XHRmb3IgKGNvbnN0IFtzdGFydCwgZW5kXSBvZiB0aGlzLmVkZ2VzKSBjb21waWxlZC5hdHRhY2hFZGdlKHN0YXJ0LCBlbmQpO1xuXHRcdGZvciAoY29uc3QgW3N0YXJ0cywgZW5kXSBvZiB0aGlzLndhaXRpbmdFZGdlcykgY29tcGlsZWQuYXR0YWNoRWRnZShzdGFydHMsIGVuZCk7XG5cdFx0Zm9yIChjb25zdCBbc3RhcnQsIGJyYW5jaGVzXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLmJyYW5jaGVzKSkgZm9yIChjb25zdCBbbmFtZSQxLCBicmFuY2hdIG9mIE9iamVjdC5lbnRyaWVzKGJyYW5jaGVzKSkgY29tcGlsZWQuYXR0YWNoQnJhbmNoKHN0YXJ0LCBuYW1lJDEsIGJyYW5jaCk7XG5cdFx0cmV0dXJuIGNvbXBpbGVkLnZhbGlkYXRlKCk7XG5cdH1cbn07XG5mdW5jdGlvbiBfZ2V0Q2hhbm5lbHMoc2NoZW1hKSB7XG5cdGNvbnN0IGNoYW5uZWxzID0ge307XG5cdGZvciAoY29uc3QgW25hbWUsIHZhbF0gb2YgT2JqZWN0LmVudHJpZXMoc2NoZW1hKSkgaWYgKG5hbWUgPT09IFJPT1QpIGNoYW5uZWxzW25hbWVdID0gZ2V0Q2hhbm5lbCh2YWwpO1xuXHRlbHNlIGNoYW5uZWxzW25hbWVdID0gZ2V0Q2hhbm5lbCh2YWwpO1xuXHRyZXR1cm4gY2hhbm5lbHM7XG59XG4vKipcbiogRmluYWwgcmVzdWx0IGZyb20gYnVpbGRpbmcgYW5kIGNvbXBpbGluZyBhIHtAbGluayBTdGF0ZUdyYXBofS5cbiogU2hvdWxkIG5vdCBiZSBpbnN0YW50aWF0ZWQgZGlyZWN0bHksIG9ubHkgdXNpbmcgdGhlIFN0YXRlR3JhcGggYC5jb21waWxlKClgXG4qIGluc3RhbmNlIG1ldGhvZC5cbiovXG52YXIgQ29tcGlsZWRTdGF0ZUdyYXBoID0gY2xhc3MgZXh0ZW5kcyBDb21waWxlZEdyYXBoIHtcblx0LyoqXG5cdCogVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSBjb21waWxlZCBncmFwaC5cblx0KiBUaGlzIGlzIHVzZWQgYnkgdGhlIHN1cGVydmlzb3IgYWdlbnQgdG8gZGVzY3JpYmUgdGhlIGhhbmRvZmYgdG8gdGhlIGFnZW50LlxuXHQqL1xuXHRkZXNjcmlwdGlvbjtcblx0LyoqIEBpbnRlcm5hbCAqL1xuXHRfbWV0YVJlZ2lzdHJ5ID0gc2NoZW1hTWV0YVJlZ2lzdHJ5O1xuXHRjb25zdHJ1Y3Rvcih7IGRlc2NyaXB0aW9uLCAuLi5yZXN0IH0pIHtcblx0XHRzdXBlcihyZXN0KTtcblx0XHR0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG5cdH1cblx0YXR0YWNoTm9kZShrZXksIG5vZGUpIHtcblx0XHRsZXQgb3V0cHV0S2V5cztcblx0XHRpZiAoa2V5ID09PSBTVEFSVCkgb3V0cHV0S2V5cyA9IE9iamVjdC5lbnRyaWVzKHRoaXMuYnVpbGRlci5fc2NoZW1hRGVmaW5pdGlvbnMuZ2V0KHRoaXMuYnVpbGRlci5faW5wdXREZWZpbml0aW9uKSkubWFwKChba10pID0+IGspO1xuXHRcdGVsc2Ugb3V0cHV0S2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuYnVpbGRlci5jaGFubmVscyk7XG5cdFx0ZnVuY3Rpb24gX2dldFJvb3QoaW5wdXQpIHtcblx0XHRcdGlmIChpc0NvbW1hbmQoaW5wdXQpKSB7XG5cdFx0XHRcdGlmIChpbnB1dC5ncmFwaCA9PT0gQ29tbWFuZC5QQVJFTlQpIHJldHVybiBudWxsO1xuXHRcdFx0XHRyZXR1cm4gaW5wdXQuX3VwZGF0ZUFzVHVwbGVzKCk7XG5cdFx0XHR9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpICYmIGlucHV0Lmxlbmd0aCA+IDAgJiYgaW5wdXQuc29tZSgoaSkgPT4gaXNDb21tYW5kKGkpKSkge1xuXHRcdFx0XHRjb25zdCB1cGRhdGVzID0gW107XG5cdFx0XHRcdGZvciAoY29uc3QgaSBvZiBpbnB1dCkgaWYgKGlzQ29tbWFuZChpKSkge1xuXHRcdFx0XHRcdGlmIChpLmdyYXBoID09PSBDb21tYW5kLlBBUkVOVCkgY29udGludWU7XG5cdFx0XHRcdFx0dXBkYXRlcy5wdXNoKC4uLmkuX3VwZGF0ZUFzVHVwbGVzKCkpO1xuXHRcdFx0XHR9IGVsc2UgdXBkYXRlcy5wdXNoKFtST09ULCBpXSk7XG5cdFx0XHRcdHJldHVybiB1cGRhdGVzO1xuXHRcdFx0fSBlbHNlIGlmIChpbnB1dCAhPSBudWxsKSByZXR1cm4gW1tST09ULCBpbnB1dF1dO1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHRcdGNvbnN0IG5vZGVLZXkgPSBrZXk7XG5cdFx0ZnVuY3Rpb24gX2dldFVwZGF0ZXMoaW5wdXQpIHtcblx0XHRcdGlmICghaW5wdXQpIHJldHVybiBudWxsO1xuXHRcdFx0ZWxzZSBpZiAoaXNDb21tYW5kKGlucHV0KSkge1xuXHRcdFx0XHRpZiAoaW5wdXQuZ3JhcGggPT09IENvbW1hbmQuUEFSRU5UKSByZXR1cm4gbnVsbDtcblx0XHRcdFx0cmV0dXJuIGlucHV0Ll91cGRhdGVBc1R1cGxlcygpLmZpbHRlcigoW2tdKSA9PiBvdXRwdXRLZXlzLmluY2x1ZGVzKGspKTtcblx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkgJiYgaW5wdXQubGVuZ3RoID4gMCAmJiBpbnB1dC5zb21lKGlzQ29tbWFuZCkpIHtcblx0XHRcdFx0Y29uc3QgdXBkYXRlcyA9IFtdO1xuXHRcdFx0XHRmb3IgKGNvbnN0IGl0ZW0gb2YgaW5wdXQpIGlmIChpc0NvbW1hbmQoaXRlbSkpIHtcblx0XHRcdFx0XHRpZiAoaXRlbS5ncmFwaCA9PT0gQ29tbWFuZC5QQVJFTlQpIGNvbnRpbnVlO1xuXHRcdFx0XHRcdHVwZGF0ZXMucHVzaCguLi5pdGVtLl91cGRhdGVBc1R1cGxlcygpLmZpbHRlcigoW2tdKSA9PiBvdXRwdXRLZXlzLmluY2x1ZGVzKGspKSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29uc3QgaXRlbVVwZGF0ZXMgPSBfZ2V0VXBkYXRlcyhpdGVtKTtcblx0XHRcdFx0XHRpZiAoaXRlbVVwZGF0ZXMpIHVwZGF0ZXMucHVzaCguLi5pdGVtVXBkYXRlcyA/PyBbXSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHVwZGF0ZXM7XG5cdFx0XHR9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gXCJvYmplY3RcIiAmJiAhQXJyYXkuaXNBcnJheShpbnB1dCkpIHJldHVybiBPYmplY3QuZW50cmllcyhpbnB1dCkuZmlsdGVyKChba10pID0+IG91dHB1dEtleXMuaW5jbHVkZXMoaykpO1xuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGNvbnN0IHR5cGVvZklucHV0ID0gQXJyYXkuaXNBcnJheShpbnB1dCkgPyBcImFycmF5XCIgOiB0eXBlb2YgaW5wdXQ7XG5cdFx0XHRcdHRocm93IG5ldyBJbnZhbGlkVXBkYXRlRXJyb3IoYEV4cGVjdGVkIG5vZGUgXCIke25vZGVLZXkudG9TdHJpbmcoKX1cIiB0byByZXR1cm4gYW4gb2JqZWN0IG9yIGFuIGFycmF5IGNvbnRhaW5pbmcgYXQgbGVhc3Qgb25lIENvbW1hbmQgb2JqZWN0LCByZWNlaXZlZCAke3R5cGVvZklucHV0fWAsIHsgbGNfZXJyb3JfY29kZTogXCJJTlZBTElEX0dSQVBIX05PREVfUkVUVVJOX1ZBTFVFXCIgfSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IHN0YXRlV3JpdGVFbnRyaWVzID0gW3tcblx0XHRcdHZhbHVlOiBQQVNTVEhST1VHSCxcblx0XHRcdG1hcHBlcjogbmV3IFJ1bm5hYmxlQ2FsbGFibGUoe1xuXHRcdFx0XHRmdW5jOiBvdXRwdXRLZXlzLmxlbmd0aCAmJiBvdXRwdXRLZXlzWzBdID09PSBST09UID8gX2dldFJvb3QgOiBfZ2V0VXBkYXRlcyxcblx0XHRcdFx0dHJhY2U6IGZhbHNlLFxuXHRcdFx0XHRyZWN1cnNlOiBmYWxzZVxuXHRcdFx0fSlcblx0XHR9XTtcblx0XHRpZiAoa2V5ID09PSBTVEFSVCkgdGhpcy5ub2Rlc1trZXldID0gbmV3IFByZWdlbE5vZGUoe1xuXHRcdFx0dGFnczogW1RBR19ISURERU5dLFxuXHRcdFx0dHJpZ2dlcnM6IFtTVEFSVF0sXG5cdFx0XHRjaGFubmVsczogW1NUQVJUXSxcblx0XHRcdHdyaXRlcnM6IFtuZXcgQ2hhbm5lbFdyaXRlKHN0YXRlV3JpdGVFbnRyaWVzLCBbVEFHX0hJRERFTl0pXVxuXHRcdH0pO1xuXHRcdGVsc2Uge1xuXHRcdFx0Y29uc3QgaW5wdXREZWZpbml0aW9uID0gbm9kZT8uaW5wdXQgPz8gdGhpcy5idWlsZGVyLl9zY2hlbWFEZWZpbml0aW9uO1xuXHRcdFx0Y29uc3QgaW5wdXRWYWx1ZXMgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmtleXModGhpcy5idWlsZGVyLl9zY2hlbWFEZWZpbml0aW9ucy5nZXQoaW5wdXREZWZpbml0aW9uKSkubWFwKChrKSA9PiBbaywga10pKTtcblx0XHRcdGNvbnN0IGlzU2luZ2xlSW5wdXQgPSBPYmplY3Qua2V5cyhpbnB1dFZhbHVlcykubGVuZ3RoID09PSAxICYmIFJPT1QgaW4gaW5wdXRWYWx1ZXM7XG5cdFx0XHRjb25zdCBicmFuY2hDaGFubmVsID0gYGJyYW5jaDp0bzoke2tleX1gO1xuXHRcdFx0dGhpcy5jaGFubmVsc1ticmFuY2hDaGFubmVsXSA9IG5vZGU/LmRlZmVyID8gbmV3IExhc3RWYWx1ZUFmdGVyRmluaXNoKCkgOiBuZXcgRXBoZW1lcmFsVmFsdWUoZmFsc2UpO1xuXHRcdFx0dGhpcy5ub2Rlc1trZXldID0gbmV3IFByZWdlbE5vZGUoe1xuXHRcdFx0XHR0cmlnZ2VyczogW2JyYW5jaENoYW5uZWxdLFxuXHRcdFx0XHRjaGFubmVsczogaXNTaW5nbGVJbnB1dCA/IE9iamVjdC5rZXlzKGlucHV0VmFsdWVzKSA6IGlucHV0VmFsdWVzLFxuXHRcdFx0XHR3cml0ZXJzOiBbbmV3IENoYW5uZWxXcml0ZShzdGF0ZVdyaXRlRW50cmllcywgW1RBR19ISURERU5dKV0sXG5cdFx0XHRcdG1hcHBlcjogaXNTaW5nbGVJbnB1dCA/IHZvaWQgMCA6IChpbnB1dCkgPT4ge1xuXHRcdFx0XHRcdHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoaW5wdXQpLmZpbHRlcigoW2tdKSA9PiBrIGluIGlucHV0VmFsdWVzKSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGJvdW5kOiBub2RlPy5ydW5uYWJsZSxcblx0XHRcdFx0bWV0YWRhdGE6IG5vZGU/Lm1ldGFkYXRhLFxuXHRcdFx0XHRyZXRyeVBvbGljeTogbm9kZT8ucmV0cnlQb2xpY3ksXG5cdFx0XHRcdGNhY2hlUG9saWN5OiBub2RlPy5jYWNoZVBvbGljeSxcblx0XHRcdFx0c3ViZ3JhcGhzOiBub2RlPy5zdWJncmFwaHMsXG5cdFx0XHRcdGVuZHM6IG5vZGU/LmVuZHNcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXHRhdHRhY2hFZGdlKHN0YXJ0cywgZW5kKSB7XG5cdFx0aWYgKGVuZCA9PT0gRU5EKSByZXR1cm47XG5cdFx0aWYgKHR5cGVvZiBzdGFydHMgPT09IFwic3RyaW5nXCIpIHRoaXMubm9kZXNbc3RhcnRzXS53cml0ZXJzLnB1c2gobmV3IENoYW5uZWxXcml0ZShbe1xuXHRcdFx0Y2hhbm5lbDogYGJyYW5jaDp0bzoke2VuZH1gLFxuXHRcdFx0dmFsdWU6IG51bGxcblx0XHR9XSwgW1RBR19ISURERU5dKSk7XG5cdFx0ZWxzZSBpZiAoQXJyYXkuaXNBcnJheShzdGFydHMpKSB7XG5cdFx0XHRjb25zdCBjaGFubmVsTmFtZSA9IGBqb2luOiR7c3RhcnRzLmpvaW4oXCIrXCIpfToke2VuZH1gO1xuXHRcdFx0dGhpcy5jaGFubmVsc1tjaGFubmVsTmFtZV0gPSB0aGlzLmJ1aWxkZXIubm9kZXNbZW5kXS5kZWZlciA/IG5ldyBOYW1lZEJhcnJpZXJWYWx1ZUFmdGVyRmluaXNoKG5ldyBTZXQoc3RhcnRzKSkgOiBuZXcgTmFtZWRCYXJyaWVyVmFsdWUobmV3IFNldChzdGFydHMpKTtcblx0XHRcdHRoaXMubm9kZXNbZW5kXS50cmlnZ2Vycy5wdXNoKGNoYW5uZWxOYW1lKTtcblx0XHRcdGZvciAoY29uc3Qgc3RhcnQgb2Ygc3RhcnRzKSB0aGlzLm5vZGVzW3N0YXJ0XS53cml0ZXJzLnB1c2gobmV3IENoYW5uZWxXcml0ZShbe1xuXHRcdFx0XHRjaGFubmVsOiBjaGFubmVsTmFtZSxcblx0XHRcdFx0dmFsdWU6IHN0YXJ0XG5cdFx0XHR9XSwgW1RBR19ISURERU5dKSk7XG5cdFx0fVxuXHR9XG5cdGF0dGFjaEJyYW5jaChzdGFydCwgXywgYnJhbmNoLCBvcHRpb25zID0geyB3aXRoUmVhZGVyOiB0cnVlIH0pIHtcblx0XHRjb25zdCBicmFuY2hXcml0ZXIgPSBhc3luYyAocGFja2V0cywgY29uZmlnKSA9PiB7XG5cdFx0XHRjb25zdCBmaWx0ZXJlZFBhY2tldHMgPSBwYWNrZXRzLmZpbHRlcigocCkgPT4gcCAhPT0gRU5EKTtcblx0XHRcdGlmICghZmlsdGVyZWRQYWNrZXRzLmxlbmd0aCkgcmV0dXJuO1xuXHRcdFx0Y29uc3Qgd3JpdGVzID0gZmlsdGVyZWRQYWNrZXRzLm1hcCgocCkgPT4ge1xuXHRcdFx0XHRpZiAoX2lzU2VuZChwKSkgcmV0dXJuIHA7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0Y2hhbm5lbDogcCA9PT0gRU5EID8gcCA6IGBicmFuY2g6dG86JHtwfWAsXG5cdFx0XHRcdFx0dmFsdWU6IHN0YXJ0XG5cdFx0XHRcdH07XG5cdFx0XHR9KTtcblx0XHRcdGF3YWl0IENoYW5uZWxXcml0ZS5kb1dyaXRlKHtcblx0XHRcdFx0Li4uY29uZmlnLFxuXHRcdFx0XHR0YWdzOiAoY29uZmlnLnRhZ3MgPz8gW10pLmNvbmNhdChbVEFHX0hJRERFTl0pXG5cdFx0XHR9LCB3cml0ZXMpO1xuXHRcdH07XG5cdFx0dGhpcy5ub2Rlc1tzdGFydF0ud3JpdGVycy5wdXNoKGJyYW5jaC5ydW4oYnJhbmNoV3JpdGVyLCBvcHRpb25zLndpdGhSZWFkZXIgPyAoY29uZmlnKSA9PiBDaGFubmVsUmVhZC5kb1JlYWQoY29uZmlnLCB0aGlzLnN0cmVhbUNoYW5uZWxzID8/IHRoaXMub3V0cHV0Q2hhbm5lbHMsIHRydWUpIDogdm9pZCAwKSk7XG5cdH1cblx0YXN5bmMgX3ZhbGlkYXRlSW5wdXQoaW5wdXQpIHtcblx0XHRpZiAoaW5wdXQgPT0gbnVsbCkgcmV0dXJuIGlucHV0O1xuXHRcdGNvbnN0IHNjaGVtYSA9ICgoKSA9PiB7XG5cdFx0XHRjb25zdCBpbnB1dCQxID0gdGhpcy5idWlsZGVyLl9pbnB1dFJ1bnRpbWVEZWZpbml0aW9uO1xuXHRcdFx0Y29uc3Qgc2NoZW1hJDEgPSB0aGlzLmJ1aWxkZXIuX3NjaGVtYVJ1bnRpbWVEZWZpbml0aW9uO1xuXHRcdFx0Y29uc3QgYXBwbHkgPSAoc2NoZW1hJDIpID0+IHtcblx0XHRcdFx0aWYgKHNjaGVtYSQyID09IG51bGwpIHJldHVybiB2b2lkIDA7XG5cdFx0XHRcdHJldHVybiB0aGlzLl9tZXRhUmVnaXN0cnkuZ2V0RXh0ZW5kZWRDaGFubmVsU2NoZW1hcyhzY2hlbWEkMiwgeyB3aXRoUmVkdWNlclNjaGVtYTogdHJ1ZSB9KTtcblx0XHRcdH07XG5cdFx0XHRpZiAoaXNJbnRlcm9wWm9kT2JqZWN0KGlucHV0JDEpKSByZXR1cm4gYXBwbHkoaW5wdXQkMSk7XG5cdFx0XHRpZiAoaW5wdXQkMSA9PT0gUGFydGlhbFN0YXRlU2NoZW1hKSByZXR1cm4gaW50ZXJvcFpvZE9iamVjdFBhcnRpYWwoYXBwbHkoc2NoZW1hJDEpKTtcblx0XHR9KSgpO1xuXHRcdGlmIChpc0NvbW1hbmQoaW5wdXQpKSB7XG5cdFx0XHRjb25zdCBwYXJzZWRJbnB1dCA9IGlucHV0O1xuXHRcdFx0aWYgKGlucHV0LnVwZGF0ZSAmJiBzY2hlbWEgIT0gbnVsbCkgcGFyc2VkSW5wdXQudXBkYXRlID0gaW50ZXJvcFBhcnNlKHNjaGVtYSwgaW5wdXQudXBkYXRlKTtcblx0XHRcdHJldHVybiBwYXJzZWRJbnB1dDtcblx0XHR9XG5cdFx0aWYgKHNjaGVtYSAhPSBudWxsKSByZXR1cm4gaW50ZXJvcFBhcnNlKHNjaGVtYSwgaW5wdXQpO1xuXHRcdHJldHVybiBpbnB1dDtcblx0fVxuXHRpc0ludGVycnVwdGVkKGlucHV0KSB7XG5cdFx0cmV0dXJuIGlzSW50ZXJydXB0ZWQoaW5wdXQpO1xuXHR9XG5cdGFzeW5jIF92YWxpZGF0ZUNvbnRleHQoY29uZmlnKSB7XG5cdFx0Y29uc3QgY29uZmlnU2NoZW1hID0gdGhpcy5idWlsZGVyLl9jb25maWdSdW50aW1lU2NoZW1hO1xuXHRcdGlmIChpc0ludGVyb3Bab2RPYmplY3QoY29uZmlnU2NoZW1hKSkgaW50ZXJvcFBhcnNlKGNvbmZpZ1NjaGVtYSwgY29uZmlnKTtcblx0XHRyZXR1cm4gY29uZmlnO1xuXHR9XG59O1xuZnVuY3Rpb24gaXNTdGF0ZURlZmluaXRpb24ob2JqKSB7XG5cdHJldHVybiB0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiICYmIG9iaiAhPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheShvYmopICYmIE9iamVjdC5rZXlzKG9iaikubGVuZ3RoID4gMCAmJiBPYmplY3QudmFsdWVzKG9iaikuZXZlcnkoKHYpID0+IHR5cGVvZiB2ID09PSBcImZ1bmN0aW9uXCIgfHwgaXNCYXNlQ2hhbm5lbCh2KSk7XG59XG5mdW5jdGlvbiBpc0Fubm90YXRpb25Sb290KG9iaikge1xuXHRyZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJiBvYmogIT09IG51bGwgJiYgXCJsY19ncmFwaF9uYW1lXCIgaW4gb2JqICYmIG9iai5sY19ncmFwaF9uYW1lID09PSBcIkFubm90YXRpb25Sb290XCI7XG59XG5mdW5jdGlvbiBpc1N0YXRlR3JhcGhBcmdzKG9iaikge1xuXHRyZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJiBvYmogIT09IG51bGwgJiYgb2JqLmNoYW5uZWxzICE9PSB2b2lkIDA7XG59XG5mdW5jdGlvbiBpc1N0YXRlR3JhcGhBcmdzV2l0aFN0YXRlU2NoZW1hKG9iaikge1xuXHRyZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJiBvYmogIT09IG51bGwgJiYgb2JqLnN0YXRlU2NoZW1hICE9PSB2b2lkIDA7XG59XG5mdW5jdGlvbiBpc1N0YXRlR3JhcGhBcmdzV2l0aElucHV0T3V0cHV0U2NoZW1hcyhvYmopIHtcblx0cmV0dXJuIHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgJiYgb2JqICE9PSBudWxsICYmIG9iai5zdGF0ZVNjaGVtYSA9PT0gdm9pZCAwICYmIG9iai5pbnB1dCAhPT0gdm9pZCAwICYmIG9iai5vdXRwdXQgIT09IHZvaWQgMDtcbn1cbmZ1bmN0aW9uIGlzWm9kU3RhdGVHcmFwaEFyZ3NXaXRoU3RhdGVTY2hlbWEodmFsdWUpIHtcblx0aWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJvYmplY3RcIiB8fCB2YWx1ZSA9PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cdGlmICghKFwic3RhdGVcIiBpbiB2YWx1ZSkgfHwgIWlzSW50ZXJvcFpvZE9iamVjdCh2YWx1ZS5zdGF0ZSkpIHJldHVybiBmYWxzZTtcblx0aWYgKFwiaW5wdXRcIiBpbiB2YWx1ZSAmJiAhaXNJbnRlcm9wWm9kT2JqZWN0KHZhbHVlLmlucHV0KSkgcmV0dXJuIGZhbHNlO1xuXHRpZiAoXCJvdXRwdXRcIiBpbiB2YWx1ZSAmJiAhaXNJbnRlcm9wWm9kT2JqZWN0KHZhbHVlLm91dHB1dCkpIHJldHVybiBmYWxzZTtcblx0cmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBfY29udHJvbEJyYW5jaCh2YWx1ZSkge1xuXHRpZiAoX2lzU2VuZCh2YWx1ZSkpIHJldHVybiBbdmFsdWVdO1xuXHRjb25zdCBjb21tYW5kcyA9IFtdO1xuXHRpZiAoaXNDb21tYW5kKHZhbHVlKSkgY29tbWFuZHMucHVzaCh2YWx1ZSk7XG5cdGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSBjb21tYW5kcy5wdXNoKC4uLnZhbHVlLmZpbHRlcihpc0NvbW1hbmQpKTtcblx0Y29uc3QgZGVzdGluYXRpb25zID0gW107XG5cdGZvciAoY29uc3QgY29tbWFuZCBvZiBjb21tYW5kcykge1xuXHRcdGlmIChjb21tYW5kLmdyYXBoID09PSBDb21tYW5kLlBBUkVOVCkgdGhyb3cgbmV3IFBhcmVudENvbW1hbmQoY29tbWFuZCk7XG5cdFx0aWYgKF9pc1NlbmQoY29tbWFuZC5nb3RvKSkgZGVzdGluYXRpb25zLnB1c2goY29tbWFuZC5nb3RvKTtcblx0XHRlbHNlIGlmICh0eXBlb2YgY29tbWFuZC5nb3RvID09PSBcInN0cmluZ1wiKSBkZXN0aW5hdGlvbnMucHVzaChjb21tYW5kLmdvdG8pO1xuXHRcdGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoY29tbWFuZC5nb3RvKSkgZGVzdGluYXRpb25zLnB1c2goLi4uY29tbWFuZC5nb3RvKTtcblx0fVxuXHRyZXR1cm4gZGVzdGluYXRpb25zO1xufVxuZnVuY3Rpb24gX2dldENvbnRyb2xCcmFuY2goKSB7XG5cdHJldHVybiBuZXcgQnJhbmNoKHsgcGF0aDogbmV3IFJ1bm5hYmxlQ2FsbGFibGUoe1xuXHRcdGZ1bmM6IF9jb250cm9sQnJhbmNoLFxuXHRcdHRhZ3M6IFtUQUdfSElEREVOXSxcblx0XHR0cmFjZTogZmFsc2UsXG5cdFx0cmVjdXJzZTogZmFsc2UsXG5cdFx0bmFtZTogXCI8Y29udHJvbF9icmFuY2g+XCJcblx0fSkgfSk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQ29tcGlsZWRTdGF0ZUdyYXBoLCBTdGF0ZUdyYXBoIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdGF0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/graph/state.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/graph/zod/meta.js":
/*!******************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/graph/zod/meta.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   META_EXTRAS_DESCRIPTION_PREFIX: () => (/* binding */ META_EXTRAS_DESCRIPTION_PREFIX),\n/* harmony export */   SchemaMetaRegistry: () => (/* binding */ SchemaMetaRegistry),\n/* harmony export */   schemaMetaRegistry: () => (/* binding */ schemaMetaRegistry),\n/* harmony export */   withLangGraph: () => (/* binding */ withLangGraph)\n/* harmony export */ });\n/* harmony import */ var _channels_binop_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../channels/binop.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/binop.js\");\n/* harmony import */ var _channels_last_value_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../channels/last_value.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/last_value.js\");\n/* harmony import */ var _langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @langchain/core/utils/types */ \"(ssr)/./node_modules/@langchain/core/dist/utils/types/index.js\");\n\n\n\n\n//#region src/graph/zod/meta.ts\nconst META_EXTRAS_DESCRIPTION_PREFIX = \"lg:\";\n/**\n* A registry for storing and managing metadata associated with schemas.\n* This class provides methods to get, extend, remove, and check metadata for a given schema.\n*/\nvar SchemaMetaRegistry = class {\n\t/**\n\t* Internal map storing schema metadata.\n\t* @internal\n\t*/\n\t_map = /* @__PURE__ */ new WeakMap();\n\t/**\n\t* Cache for extended schfemas.\n\t* @internal\n\t*/\n\t_extensionCache = /* @__PURE__ */ new Map();\n\t/**\n\t* Retrieves the metadata associated with a given schema.\n\t* @template TValue The value type of the schema.\n\t* @template TUpdate The update type of the schema (defaults to TValue).\n\t* @param schema The schema to retrieve metadata for.\n\t* @returns The associated SchemaMeta, or undefined if not present.\n\t*/\n\tget(schema) {\n\t\treturn this._map.get(schema);\n\t}\n\t/**\n\t* Extends or sets the metadata for a given schema.\n\t* @template TValue The value type of the schema.\n\t* @template TUpdate The update type of the schema (defaults to TValue).\n\t* @param schema The schema to extend metadata for.\n\t* @param predicate A function that receives the existing metadata (or undefined) and returns the new metadata.\n\t*/\n\textend(schema, predicate) {\n\t\tconst existingMeta = this.get(schema);\n\t\tthis._map.set(schema, predicate(existingMeta));\n\t}\n\t/**\n\t* Removes the metadata associated with a given schema.\n\t* @param schema The schema to remove metadata for.\n\t* @returns The SchemaMetaRegistry instance (for chaining).\n\t*/\n\tremove(schema) {\n\t\tthis._map.delete(schema);\n\t\treturn this;\n\t}\n\t/**\n\t* Checks if metadata exists for a given schema.\n\t* @param schema The schema to check.\n\t* @returns True if metadata exists, false otherwise.\n\t*/\n\thas(schema) {\n\t\treturn this._map.has(schema);\n\t}\n\t/**\n\t* Returns a mapping of channel instances for each property in the schema\n\t* using the associated metadata in the registry.\n\t*\n\t* This is used to create the `channels` object that's passed to the `Graph` constructor.\n\t*\n\t* @template T The shape of the schema.\n\t* @param schema The schema to extract channels from.\n\t* @returns A mapping from property names to channel instances.\n\t*/\n\tgetChannelsForSchema(schema) {\n\t\tconst channels = {};\n\t\tconst shape = (0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_2__.getInteropZodObjectShape)(schema);\n\t\tfor (const [key, channelSchema] of Object.entries(shape)) {\n\t\t\tconst meta = this.get(channelSchema);\n\t\t\tif (meta?.reducer) channels[key] = new _channels_binop_js__WEBPACK_IMPORTED_MODULE_0__.BinaryOperatorAggregate(meta.reducer.fn, meta.default);\n\t\t\telse channels[key] = new _channels_last_value_js__WEBPACK_IMPORTED_MODULE_1__.LastValue(meta?.default);\n\t\t}\n\t\treturn channels;\n\t}\n\t/**\n\t* Returns a modified schema that introspectively looks at all keys of the provided\n\t* object schema, and applies the augmentations based on meta provided with those keys\n\t* in the registry and the selectors provided in the `effects` parameter.\n\t*\n\t* This assumes that the passed in schema is the \"root\" schema object for a graph where\n\t* the keys of the schema are the channels of the graph. Because we need to represent\n\t* the input of a graph in a couple of different ways, the `effects` parameter allows\n\t* us to apply those augmentations based on pre determined conditions.\n\t*\n\t* @param schema The root schema object to extend.\n\t* @param effects The effects that are being applied.\n\t* @returns The extended schema.\n\t*/\n\tgetExtendedChannelSchemas(schema, effects) {\n\t\tif (Object.keys(effects).length === 0) return schema;\n\t\tconst cacheKey = Object.entries(effects).filter(([, v]) => v === true).sort(([a], [b]) => a.localeCompare(b)).map(([k, v]) => `${k}:${v}`).join(\"|\");\n\t\tconst cache = this._extensionCache.get(cacheKey) ?? /* @__PURE__ */ new WeakMap();\n\t\tif (cache.has(schema)) return cache.get(schema);\n\t\tlet modifiedSchema = schema;\n\t\tif (effects.withReducerSchema || effects.withJsonSchemaExtrasAsDescription) {\n\t\t\tconst newShapeEntries = Object.entries((0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_2__.getInteropZodObjectShape)(schema)).map(([key, schema$1]) => {\n\t\t\t\tconst meta = this.get(schema$1);\n\t\t\t\tlet outputSchema = effects.withReducerSchema ? meta?.reducer?.schema ?? schema$1 : schema$1;\n\t\t\t\tif (effects.withJsonSchemaExtrasAsDescription && meta?.jsonSchemaExtra) {\n\t\t\t\t\tconst description = (0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_2__.getSchemaDescription)(outputSchema) ?? (0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_2__.getSchemaDescription)(schema$1);\n\t\t\t\t\tconst strExtras = JSON.stringify({\n\t\t\t\t\t\t...meta.jsonSchemaExtra,\n\t\t\t\t\t\tdescription\n\t\t\t\t\t});\n\t\t\t\t\toutputSchema = outputSchema.describe(`${META_EXTRAS_DESCRIPTION_PREFIX}${strExtras}`);\n\t\t\t\t}\n\t\t\t\treturn [key, outputSchema];\n\t\t\t});\n\t\t\tmodifiedSchema = (0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_2__.extendInteropZodObject)(schema, Object.fromEntries(newShapeEntries));\n\t\t\tif ((0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_2__.isZodSchemaV3)(modifiedSchema)) modifiedSchema._def.unknownKeys = \"strip\";\n\t\t}\n\t\tif (effects.asPartial) modifiedSchema = (0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_2__.interopZodObjectPartial)(modifiedSchema);\n\t\tcache.set(schema, modifiedSchema);\n\t\tthis._extensionCache.set(cacheKey, cache);\n\t\treturn modifiedSchema;\n\t}\n};\nconst schemaMetaRegistry = new SchemaMetaRegistry();\nfunction withLangGraph(schema, meta) {\n\tif (meta.reducer && !meta.default) {\n\t\tconst defaultValueGetter = (0,_langchain_core_utils_types__WEBPACK_IMPORTED_MODULE_2__.getInteropZodDefaultGetter)(schema);\n\t\tif (defaultValueGetter != null) meta.default = defaultValueGetter;\n\t}\n\tif (meta.reducer) {\n\t\tconst schemaWithReducer = Object.assign(schema, { lg_reducer_schema: meta.reducer?.schema ?? schema });\n\t\tschemaMetaRegistry.extend(schemaWithReducer, () => meta);\n\t\treturn schemaWithReducer;\n\t} else {\n\t\tschemaMetaRegistry.extend(schema, () => meta);\n\t\treturn schema;\n\t}\n}\n\n//#endregion\n\n//# sourceMappingURL=meta.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9ncmFwaC96b2QvbWV0YS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWtFO0FBQ1Q7QUFDZ0k7O0FBRXpMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHFGQUF3QjtBQUN4QztBQUNBO0FBQ0EsMENBQTBDLHVFQUF1QjtBQUNqRSw0QkFBNEIsOERBQVM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtSUFBbUksRUFBRSxHQUFHLEVBQUU7QUFDMUk7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMscUZBQXdCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixpRkFBb0Isa0JBQWtCLGlGQUFvQjtBQUNuRjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sNkNBQTZDLCtCQUErQixFQUFFLFVBQVU7QUFDeEY7QUFDQTtBQUNBLElBQUk7QUFDSixvQkFBb0IsbUZBQXNCO0FBQzFDLE9BQU8sMEVBQWE7QUFDcEI7QUFDQSwwQ0FBMEMsb0ZBQXVCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsdUZBQTBCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxtREFBbUQ7QUFDdkc7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNpRztBQUNqRyIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvZ3JhcGgvem9kL21ldGEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmluYXJ5T3BlcmF0b3JBZ2dyZWdhdGUgfSBmcm9tIFwiLi4vLi4vY2hhbm5lbHMvYmlub3AuanNcIjtcbmltcG9ydCB7IExhc3RWYWx1ZSB9IGZyb20gXCIuLi8uLi9jaGFubmVscy9sYXN0X3ZhbHVlLmpzXCI7XG5pbXBvcnQgeyBleHRlbmRJbnRlcm9wWm9kT2JqZWN0LCBnZXRJbnRlcm9wWm9kRGVmYXVsdEdldHRlciwgZ2V0SW50ZXJvcFpvZE9iamVjdFNoYXBlLCBnZXRTY2hlbWFEZXNjcmlwdGlvbiwgaW50ZXJvcFpvZE9iamVjdFBhcnRpYWwsIGlzWm9kU2NoZW1hVjMgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3V0aWxzL3R5cGVzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvZ3JhcGgvem9kL21ldGEudHNcbmNvbnN0IE1FVEFfRVhUUkFTX0RFU0NSSVBUSU9OX1BSRUZJWCA9IFwibGc6XCI7XG4vKipcbiogQSByZWdpc3RyeSBmb3Igc3RvcmluZyBhbmQgbWFuYWdpbmcgbWV0YWRhdGEgYXNzb2NpYXRlZCB3aXRoIHNjaGVtYXMuXG4qIFRoaXMgY2xhc3MgcHJvdmlkZXMgbWV0aG9kcyB0byBnZXQsIGV4dGVuZCwgcmVtb3ZlLCBhbmQgY2hlY2sgbWV0YWRhdGEgZm9yIGEgZ2l2ZW4gc2NoZW1hLlxuKi9cbnZhciBTY2hlbWFNZXRhUmVnaXN0cnkgPSBjbGFzcyB7XG5cdC8qKlxuXHQqIEludGVybmFsIG1hcCBzdG9yaW5nIHNjaGVtYSBtZXRhZGF0YS5cblx0KiBAaW50ZXJuYWxcblx0Ki9cblx0X21hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuXHQvKipcblx0KiBDYWNoZSBmb3IgZXh0ZW5kZWQgc2NoZmVtYXMuXG5cdCogQGludGVybmFsXG5cdCovXG5cdF9leHRlbnNpb25DYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5cdC8qKlxuXHQqIFJldHJpZXZlcyB0aGUgbWV0YWRhdGEgYXNzb2NpYXRlZCB3aXRoIGEgZ2l2ZW4gc2NoZW1hLlxuXHQqIEB0ZW1wbGF0ZSBUVmFsdWUgVGhlIHZhbHVlIHR5cGUgb2YgdGhlIHNjaGVtYS5cblx0KiBAdGVtcGxhdGUgVFVwZGF0ZSBUaGUgdXBkYXRlIHR5cGUgb2YgdGhlIHNjaGVtYSAoZGVmYXVsdHMgdG8gVFZhbHVlKS5cblx0KiBAcGFyYW0gc2NoZW1hIFRoZSBzY2hlbWEgdG8gcmV0cmlldmUgbWV0YWRhdGEgZm9yLlxuXHQqIEByZXR1cm5zIFRoZSBhc3NvY2lhdGVkIFNjaGVtYU1ldGEsIG9yIHVuZGVmaW5lZCBpZiBub3QgcHJlc2VudC5cblx0Ki9cblx0Z2V0KHNjaGVtYSkge1xuXHRcdHJldHVybiB0aGlzLl9tYXAuZ2V0KHNjaGVtYSk7XG5cdH1cblx0LyoqXG5cdCogRXh0ZW5kcyBvciBzZXRzIHRoZSBtZXRhZGF0YSBmb3IgYSBnaXZlbiBzY2hlbWEuXG5cdCogQHRlbXBsYXRlIFRWYWx1ZSBUaGUgdmFsdWUgdHlwZSBvZiB0aGUgc2NoZW1hLlxuXHQqIEB0ZW1wbGF0ZSBUVXBkYXRlIFRoZSB1cGRhdGUgdHlwZSBvZiB0aGUgc2NoZW1hIChkZWZhdWx0cyB0byBUVmFsdWUpLlxuXHQqIEBwYXJhbSBzY2hlbWEgVGhlIHNjaGVtYSB0byBleHRlbmQgbWV0YWRhdGEgZm9yLlxuXHQqIEBwYXJhbSBwcmVkaWNhdGUgQSBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIHRoZSBleGlzdGluZyBtZXRhZGF0YSAob3IgdW5kZWZpbmVkKSBhbmQgcmV0dXJucyB0aGUgbmV3IG1ldGFkYXRhLlxuXHQqL1xuXHRleHRlbmQoc2NoZW1hLCBwcmVkaWNhdGUpIHtcblx0XHRjb25zdCBleGlzdGluZ01ldGEgPSB0aGlzLmdldChzY2hlbWEpO1xuXHRcdHRoaXMuX21hcC5zZXQoc2NoZW1hLCBwcmVkaWNhdGUoZXhpc3RpbmdNZXRhKSk7XG5cdH1cblx0LyoqXG5cdCogUmVtb3ZlcyB0aGUgbWV0YWRhdGEgYXNzb2NpYXRlZCB3aXRoIGEgZ2l2ZW4gc2NoZW1hLlxuXHQqIEBwYXJhbSBzY2hlbWEgVGhlIHNjaGVtYSB0byByZW1vdmUgbWV0YWRhdGEgZm9yLlxuXHQqIEByZXR1cm5zIFRoZSBTY2hlbWFNZXRhUmVnaXN0cnkgaW5zdGFuY2UgKGZvciBjaGFpbmluZykuXG5cdCovXG5cdHJlbW92ZShzY2hlbWEpIHtcblx0XHR0aGlzLl9tYXAuZGVsZXRlKHNjaGVtYSk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblx0LyoqXG5cdCogQ2hlY2tzIGlmIG1ldGFkYXRhIGV4aXN0cyBmb3IgYSBnaXZlbiBzY2hlbWEuXG5cdCogQHBhcmFtIHNjaGVtYSBUaGUgc2NoZW1hIHRvIGNoZWNrLlxuXHQqIEByZXR1cm5zIFRydWUgaWYgbWV0YWRhdGEgZXhpc3RzLCBmYWxzZSBvdGhlcndpc2UuXG5cdCovXG5cdGhhcyhzY2hlbWEpIHtcblx0XHRyZXR1cm4gdGhpcy5fbWFwLmhhcyhzY2hlbWEpO1xuXHR9XG5cdC8qKlxuXHQqIFJldHVybnMgYSBtYXBwaW5nIG9mIGNoYW5uZWwgaW5zdGFuY2VzIGZvciBlYWNoIHByb3BlcnR5IGluIHRoZSBzY2hlbWFcblx0KiB1c2luZyB0aGUgYXNzb2NpYXRlZCBtZXRhZGF0YSBpbiB0aGUgcmVnaXN0cnkuXG5cdCpcblx0KiBUaGlzIGlzIHVzZWQgdG8gY3JlYXRlIHRoZSBgY2hhbm5lbHNgIG9iamVjdCB0aGF0J3MgcGFzc2VkIHRvIHRoZSBgR3JhcGhgIGNvbnN0cnVjdG9yLlxuXHQqXG5cdCogQHRlbXBsYXRlIFQgVGhlIHNoYXBlIG9mIHRoZSBzY2hlbWEuXG5cdCogQHBhcmFtIHNjaGVtYSBUaGUgc2NoZW1hIHRvIGV4dHJhY3QgY2hhbm5lbHMgZnJvbS5cblx0KiBAcmV0dXJucyBBIG1hcHBpbmcgZnJvbSBwcm9wZXJ0eSBuYW1lcyB0byBjaGFubmVsIGluc3RhbmNlcy5cblx0Ki9cblx0Z2V0Q2hhbm5lbHNGb3JTY2hlbWEoc2NoZW1hKSB7XG5cdFx0Y29uc3QgY2hhbm5lbHMgPSB7fTtcblx0XHRjb25zdCBzaGFwZSA9IGdldEludGVyb3Bab2RPYmplY3RTaGFwZShzY2hlbWEpO1xuXHRcdGZvciAoY29uc3QgW2tleSwgY2hhbm5lbFNjaGVtYV0gb2YgT2JqZWN0LmVudHJpZXMoc2hhcGUpKSB7XG5cdFx0XHRjb25zdCBtZXRhID0gdGhpcy5nZXQoY2hhbm5lbFNjaGVtYSk7XG5cdFx0XHRpZiAobWV0YT8ucmVkdWNlcikgY2hhbm5lbHNba2V5XSA9IG5ldyBCaW5hcnlPcGVyYXRvckFnZ3JlZ2F0ZShtZXRhLnJlZHVjZXIuZm4sIG1ldGEuZGVmYXVsdCk7XG5cdFx0XHRlbHNlIGNoYW5uZWxzW2tleV0gPSBuZXcgTGFzdFZhbHVlKG1ldGE/LmRlZmF1bHQpO1xuXHRcdH1cblx0XHRyZXR1cm4gY2hhbm5lbHM7XG5cdH1cblx0LyoqXG5cdCogUmV0dXJucyBhIG1vZGlmaWVkIHNjaGVtYSB0aGF0IGludHJvc3BlY3RpdmVseSBsb29rcyBhdCBhbGwga2V5cyBvZiB0aGUgcHJvdmlkZWRcblx0KiBvYmplY3Qgc2NoZW1hLCBhbmQgYXBwbGllcyB0aGUgYXVnbWVudGF0aW9ucyBiYXNlZCBvbiBtZXRhIHByb3ZpZGVkIHdpdGggdGhvc2Uga2V5c1xuXHQqIGluIHRoZSByZWdpc3RyeSBhbmQgdGhlIHNlbGVjdG9ycyBwcm92aWRlZCBpbiB0aGUgYGVmZmVjdHNgIHBhcmFtZXRlci5cblx0KlxuXHQqIFRoaXMgYXNzdW1lcyB0aGF0IHRoZSBwYXNzZWQgaW4gc2NoZW1hIGlzIHRoZSBcInJvb3RcIiBzY2hlbWEgb2JqZWN0IGZvciBhIGdyYXBoIHdoZXJlXG5cdCogdGhlIGtleXMgb2YgdGhlIHNjaGVtYSBhcmUgdGhlIGNoYW5uZWxzIG9mIHRoZSBncmFwaC4gQmVjYXVzZSB3ZSBuZWVkIHRvIHJlcHJlc2VudFxuXHQqIHRoZSBpbnB1dCBvZiBhIGdyYXBoIGluIGEgY291cGxlIG9mIGRpZmZlcmVudCB3YXlzLCB0aGUgYGVmZmVjdHNgIHBhcmFtZXRlciBhbGxvd3Ncblx0KiB1cyB0byBhcHBseSB0aG9zZSBhdWdtZW50YXRpb25zIGJhc2VkIG9uIHByZSBkZXRlcm1pbmVkIGNvbmRpdGlvbnMuXG5cdCpcblx0KiBAcGFyYW0gc2NoZW1hIFRoZSByb290IHNjaGVtYSBvYmplY3QgdG8gZXh0ZW5kLlxuXHQqIEBwYXJhbSBlZmZlY3RzIFRoZSBlZmZlY3RzIHRoYXQgYXJlIGJlaW5nIGFwcGxpZWQuXG5cdCogQHJldHVybnMgVGhlIGV4dGVuZGVkIHNjaGVtYS5cblx0Ki9cblx0Z2V0RXh0ZW5kZWRDaGFubmVsU2NoZW1hcyhzY2hlbWEsIGVmZmVjdHMpIHtcblx0XHRpZiAoT2JqZWN0LmtleXMoZWZmZWN0cykubGVuZ3RoID09PSAwKSByZXR1cm4gc2NoZW1hO1xuXHRcdGNvbnN0IGNhY2hlS2V5ID0gT2JqZWN0LmVudHJpZXMoZWZmZWN0cykuZmlsdGVyKChbLCB2XSkgPT4gdiA9PT0gdHJ1ZSkuc29ydCgoW2FdLCBbYl0pID0+IGEubG9jYWxlQ29tcGFyZShiKSkubWFwKChbaywgdl0pID0+IGAke2t9OiR7dn1gKS5qb2luKFwifFwiKTtcblx0XHRjb25zdCBjYWNoZSA9IHRoaXMuX2V4dGVuc2lvbkNhY2hlLmdldChjYWNoZUtleSkgPz8gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5cdFx0aWYgKGNhY2hlLmhhcyhzY2hlbWEpKSByZXR1cm4gY2FjaGUuZ2V0KHNjaGVtYSk7XG5cdFx0bGV0IG1vZGlmaWVkU2NoZW1hID0gc2NoZW1hO1xuXHRcdGlmIChlZmZlY3RzLndpdGhSZWR1Y2VyU2NoZW1hIHx8IGVmZmVjdHMud2l0aEpzb25TY2hlbWFFeHRyYXNBc0Rlc2NyaXB0aW9uKSB7XG5cdFx0XHRjb25zdCBuZXdTaGFwZUVudHJpZXMgPSBPYmplY3QuZW50cmllcyhnZXRJbnRlcm9wWm9kT2JqZWN0U2hhcGUoc2NoZW1hKSkubWFwKChba2V5LCBzY2hlbWEkMV0pID0+IHtcblx0XHRcdFx0Y29uc3QgbWV0YSA9IHRoaXMuZ2V0KHNjaGVtYSQxKTtcblx0XHRcdFx0bGV0IG91dHB1dFNjaGVtYSA9IGVmZmVjdHMud2l0aFJlZHVjZXJTY2hlbWEgPyBtZXRhPy5yZWR1Y2VyPy5zY2hlbWEgPz8gc2NoZW1hJDEgOiBzY2hlbWEkMTtcblx0XHRcdFx0aWYgKGVmZmVjdHMud2l0aEpzb25TY2hlbWFFeHRyYXNBc0Rlc2NyaXB0aW9uICYmIG1ldGE/Lmpzb25TY2hlbWFFeHRyYSkge1xuXHRcdFx0XHRcdGNvbnN0IGRlc2NyaXB0aW9uID0gZ2V0U2NoZW1hRGVzY3JpcHRpb24ob3V0cHV0U2NoZW1hKSA/PyBnZXRTY2hlbWFEZXNjcmlwdGlvbihzY2hlbWEkMSk7XG5cdFx0XHRcdFx0Y29uc3Qgc3RyRXh0cmFzID0gSlNPTi5zdHJpbmdpZnkoe1xuXHRcdFx0XHRcdFx0Li4ubWV0YS5qc29uU2NoZW1hRXh0cmEsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvblxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdG91dHB1dFNjaGVtYSA9IG91dHB1dFNjaGVtYS5kZXNjcmliZShgJHtNRVRBX0VYVFJBU19ERVNDUklQVElPTl9QUkVGSVh9JHtzdHJFeHRyYXN9YCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIFtrZXksIG91dHB1dFNjaGVtYV07XG5cdFx0XHR9KTtcblx0XHRcdG1vZGlmaWVkU2NoZW1hID0gZXh0ZW5kSW50ZXJvcFpvZE9iamVjdChzY2hlbWEsIE9iamVjdC5mcm9tRW50cmllcyhuZXdTaGFwZUVudHJpZXMpKTtcblx0XHRcdGlmIChpc1pvZFNjaGVtYVYzKG1vZGlmaWVkU2NoZW1hKSkgbW9kaWZpZWRTY2hlbWEuX2RlZi51bmtub3duS2V5cyA9IFwic3RyaXBcIjtcblx0XHR9XG5cdFx0aWYgKGVmZmVjdHMuYXNQYXJ0aWFsKSBtb2RpZmllZFNjaGVtYSA9IGludGVyb3Bab2RPYmplY3RQYXJ0aWFsKG1vZGlmaWVkU2NoZW1hKTtcblx0XHRjYWNoZS5zZXQoc2NoZW1hLCBtb2RpZmllZFNjaGVtYSk7XG5cdFx0dGhpcy5fZXh0ZW5zaW9uQ2FjaGUuc2V0KGNhY2hlS2V5LCBjYWNoZSk7XG5cdFx0cmV0dXJuIG1vZGlmaWVkU2NoZW1hO1xuXHR9XG59O1xuY29uc3Qgc2NoZW1hTWV0YVJlZ2lzdHJ5ID0gbmV3IFNjaGVtYU1ldGFSZWdpc3RyeSgpO1xuZnVuY3Rpb24gd2l0aExhbmdHcmFwaChzY2hlbWEsIG1ldGEpIHtcblx0aWYgKG1ldGEucmVkdWNlciAmJiAhbWV0YS5kZWZhdWx0KSB7XG5cdFx0Y29uc3QgZGVmYXVsdFZhbHVlR2V0dGVyID0gZ2V0SW50ZXJvcFpvZERlZmF1bHRHZXR0ZXIoc2NoZW1hKTtcblx0XHRpZiAoZGVmYXVsdFZhbHVlR2V0dGVyICE9IG51bGwpIG1ldGEuZGVmYXVsdCA9IGRlZmF1bHRWYWx1ZUdldHRlcjtcblx0fVxuXHRpZiAobWV0YS5yZWR1Y2VyKSB7XG5cdFx0Y29uc3Qgc2NoZW1hV2l0aFJlZHVjZXIgPSBPYmplY3QuYXNzaWduKHNjaGVtYSwgeyBsZ19yZWR1Y2VyX3NjaGVtYTogbWV0YS5yZWR1Y2VyPy5zY2hlbWEgPz8gc2NoZW1hIH0pO1xuXHRcdHNjaGVtYU1ldGFSZWdpc3RyeS5leHRlbmQoc2NoZW1hV2l0aFJlZHVjZXIsICgpID0+IG1ldGEpO1xuXHRcdHJldHVybiBzY2hlbWFXaXRoUmVkdWNlcjtcblx0fSBlbHNlIHtcblx0XHRzY2hlbWFNZXRhUmVnaXN0cnkuZXh0ZW5kKHNjaGVtYSwgKCkgPT4gbWV0YSk7XG5cdFx0cmV0dXJuIHNjaGVtYTtcblx0fVxufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IE1FVEFfRVhUUkFTX0RFU0NSSVBUSU9OX1BSRUZJWCwgU2NoZW1hTWV0YVJlZ2lzdHJ5LCBzY2hlbWFNZXRhUmVnaXN0cnksIHdpdGhMYW5nR3JhcGggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1ldGEuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/graph/zod/meta.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/hash.js":
/*!********************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/hash.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   XXH3: () => (/* binding */ XXH3),\n/* harmony export */   isXXH3: () => (/* binding */ isXXH3)\n/* harmony export */ });\n//#region src/hash.ts\nconst n = (n$1) => BigInt(n$1);\nconst view = (data, offset = 0) => new DataView(data.buffer, data.byteOffset + offset, data.byteLength - offset);\nconst PRIME32_1 = n(\"0x9E3779B1\");\nconst PRIME32_2 = n(\"0x85EBCA77\");\nconst PRIME32_3 = n(\"0xC2B2AE3D\");\nconst PRIME64_1 = n(\"0x9E3779B185EBCA87\");\nconst PRIME64_2 = n(\"0xC2B2AE3D27D4EB4F\");\nconst PRIME64_3 = n(\"0x165667B19E3779F9\");\nconst PRIME64_4 = n(\"0x85EBCA77C2B2AE63\");\nconst PRIME64_5 = n(\"0x27D4EB2F165667C5\");\nconst PRIME_MX1 = n(\"0x165667919E3779F9\");\nconst PRIME_MX2 = n(\"0x9FB21C651E98DF25\");\nconst hexToUint8Array = (hex) => {\n\tconst strLen = hex.length;\n\tif (strLen % 2 !== 0) throw new Error(\"String should have an even number of characters\");\n\tconst maxLength = strLen / 2;\n\tconst bytes = new Uint8Array(maxLength);\n\tlet read = 0;\n\tlet write = 0;\n\twhile (write < maxLength) {\n\t\tconst slice = hex.slice(read, read += 2);\n\t\tbytes[write] = Number.parseInt(slice, 16);\n\t\twrite += 1;\n\t}\n\treturn view(bytes);\n};\nconst kkey = hexToUint8Array(\"b8fe6c3923a44bbe7c01812cf721ad1cded46de9839097db7240a4a4b7b3671fcb79e64eccc0e578825ad07dccff7221b8084674f743248ee03590e6813a264c3c2852bb91c300cb88d0658b1b532ea371644897a20df94e3819ef46a9deacd8a8fa763fe39c343ff9dcbbc7c70b4f1d8a51e04bcdb45931c89f7ec9d9787364eac5ac8334d3ebc3c581a0fffa1363eb170ddd51b7f0da49d316552629d4689e2b16be587d47a1fc8ff8b8d17ad031ce45cb3a8f95160428afd7fbcabb4b407e\");\nconst mask128 = (n(1) << n(128)) - n(1);\nconst mask64 = (n(1) << n(64)) - n(1);\nconst mask32 = (n(1) << n(32)) - n(1);\nconst STRIPE_LEN = 64;\nconst ACC_NB = STRIPE_LEN / 8;\nconst _U64 = 8;\nconst _U32 = 4;\nfunction assert(a) {\n\tif (!a) throw new Error(\"Assert failed\");\n}\nfunction bswap64(a) {\n\tconst scratchbuf = /* @__PURE__ */ new DataView(/* @__PURE__ */ new ArrayBuffer(8));\n\tscratchbuf.setBigUint64(0, a, true);\n\treturn scratchbuf.getBigUint64(0, false);\n}\nfunction bswap32(input) {\n\tlet a = input;\n\ta = (a & n(65535)) << n(16) | (a & n(4294901760)) >> n(16);\n\ta = (a & n(16711935)) << n(8) | (a & n(4278255360)) >> n(8);\n\treturn a;\n}\nfunction XXH_mult32to64(a, b) {\n\treturn (a & mask32) * (b & mask32) & mask64;\n}\nfunction rotl32(a, b) {\n\treturn (a << b | a >> n(32) - b) & mask32;\n}\nfunction XXH3_accumulate_512(acc, dataView, keyView) {\n\tfor (let i = 0; i < ACC_NB; i += 1) {\n\t\tconst data_val = dataView.getBigUint64(i * 8, true);\n\t\tconst data_key = data_val ^ keyView.getBigUint64(i * 8, true);\n\t\tacc[i ^ 1] += data_val;\n\t\tacc[i] += XXH_mult32to64(data_key, data_key >> n(32));\n\t}\n\treturn acc;\n}\nfunction XXH3_accumulate(acc, dataView, keyView, nbStripes) {\n\tfor (let n$1 = 0; n$1 < nbStripes; n$1 += 1) XXH3_accumulate_512(acc, view(dataView, n$1 * STRIPE_LEN), view(keyView, n$1 * 8));\n\treturn acc;\n}\nfunction XXH3_scrambleAcc(acc, key) {\n\tfor (let i = 0; i < ACC_NB; i += 1) {\n\t\tconst key64 = key.getBigUint64(i * 8, true);\n\t\tlet acc64 = acc[i];\n\t\tacc64 = xorshift64(acc64, n(47));\n\t\tacc64 ^= key64;\n\t\tacc64 *= PRIME32_1;\n\t\tacc[i] = acc64 & mask64;\n\t}\n\treturn acc;\n}\nfunction XXH3_mix2Accs(acc, key) {\n\treturn XXH3_mul128_fold64(acc[0] ^ key.getBigUint64(0, true), acc[1] ^ key.getBigUint64(_U64, true));\n}\nfunction XXH3_mergeAccs(acc, key, start) {\n\tlet result64 = start;\n\tresult64 += XXH3_mix2Accs(acc.slice(0), view(key, 0 * _U32));\n\tresult64 += XXH3_mix2Accs(acc.slice(2), view(key, 4 * _U32));\n\tresult64 += XXH3_mix2Accs(acc.slice(4), view(key, 8 * _U32));\n\tresult64 += XXH3_mix2Accs(acc.slice(6), view(key, 12 * _U32));\n\treturn XXH3_avalanche(result64 & mask64);\n}\nfunction XXH3_hashLong(input, data, secret, f_acc, f_scramble) {\n\tlet acc = input;\n\tconst nbStripesPerBlock = Math.floor((secret.byteLength - STRIPE_LEN) / 8);\n\tconst block_len = STRIPE_LEN * nbStripesPerBlock;\n\tconst nb_blocks = Math.floor((data.byteLength - 1) / block_len);\n\tfor (let n$1 = 0; n$1 < nb_blocks; n$1 += 1) {\n\t\tacc = XXH3_accumulate(acc, view(data, n$1 * block_len), secret, nbStripesPerBlock);\n\t\tacc = f_scramble(acc, view(secret, secret.byteLength - STRIPE_LEN));\n\t}\n\t{\n\t\tconst nbStripes = Math.floor((data.byteLength - 1 - block_len * nb_blocks) / STRIPE_LEN);\n\t\tacc = XXH3_accumulate(acc, view(data, nb_blocks * block_len), secret, nbStripes);\n\t\tacc = f_acc(acc, view(data, data.byteLength - STRIPE_LEN), view(secret, secret.byteLength - STRIPE_LEN - 7));\n\t}\n\treturn acc;\n}\nfunction XXH3_hashLong_128b(data, secret) {\n\tlet acc = new BigUint64Array([\n\t\tPRIME32_3,\n\t\tPRIME64_1,\n\t\tPRIME64_2,\n\t\tPRIME64_3,\n\t\tPRIME64_4,\n\t\tPRIME32_2,\n\t\tPRIME64_5,\n\t\tPRIME32_1\n\t]);\n\tassert(data.byteLength > 128);\n\tacc = XXH3_hashLong(acc, data, secret, XXH3_accumulate_512, XXH3_scrambleAcc);\n\tassert(acc.length * 8 === 64);\n\t{\n\t\tconst low64 = XXH3_mergeAccs(acc, view(secret, 11), n(data.byteLength) * PRIME64_1 & mask64);\n\t\treturn XXH3_mergeAccs(acc, view(secret, secret.byteLength - STRIPE_LEN - 11), ~(n(data.byteLength) * PRIME64_2) & mask64) << n(64) | low64;\n\t}\n}\nfunction XXH3_mul128_fold64(a, b) {\n\tconst lll = a * b & mask128;\n\treturn lll & mask64 ^ lll >> n(64);\n}\nfunction XXH3_mix16B(dataView, keyView, seed) {\n\treturn XXH3_mul128_fold64((dataView.getBigUint64(0, true) ^ keyView.getBigUint64(0, true) + seed) & mask64, (dataView.getBigUint64(8, true) ^ keyView.getBigUint64(8, true) - seed) & mask64);\n}\nfunction XXH3_mix32B(acc, data1, data2, key, seed) {\n\tlet accl = acc & mask64;\n\tlet acch = acc >> n(64) & mask64;\n\taccl += XXH3_mix16B(data1, key, seed);\n\taccl ^= data2.getBigUint64(0, true) + data2.getBigUint64(8, true);\n\taccl &= mask64;\n\tacch += XXH3_mix16B(data2, view(key, 16), seed);\n\tacch ^= data1.getBigUint64(0, true) + data1.getBigUint64(8, true);\n\tacch &= mask64;\n\treturn acch << n(64) | accl;\n}\nfunction XXH3_avalanche(input) {\n\tlet h64 = input;\n\th64 ^= h64 >> n(37);\n\th64 *= PRIME_MX1;\n\th64 &= mask64;\n\th64 ^= h64 >> n(32);\n\treturn h64;\n}\nfunction XXH3_avalanche64(input) {\n\tlet h64 = input;\n\th64 ^= h64 >> n(33);\n\th64 *= PRIME64_2;\n\th64 &= mask64;\n\th64 ^= h64 >> n(29);\n\th64 *= PRIME64_3;\n\th64 &= mask64;\n\th64 ^= h64 >> n(32);\n\treturn h64;\n}\nfunction XXH3_len_1to3_128b(data, key32, seed) {\n\tconst len = data.byteLength;\n\tassert(len > 0 && len <= 3);\n\tconst combined = n(data.getUint8(len - 1)) | n(len << 8) | n(data.getUint8(0) << 16) | n(data.getUint8(len >> 1) << 24);\n\tconst low = (combined ^ (n(key32.getUint32(0, true)) ^ n(key32.getUint32(4, true))) + seed) & mask64;\n\tconst bhigh = (n(key32.getUint32(8, true)) ^ n(key32.getUint32(12, true))) - seed;\n\treturn (XXH3_avalanche64((rotl32(bswap32(combined), n(13)) ^ bhigh) & mask64) & mask64) << n(64) | XXH3_avalanche64(low);\n}\nfunction xorshift64(b, shift) {\n\treturn b ^ b >> shift;\n}\nfunction XXH3_len_4to8_128b(data, key32, seed) {\n\tconst len = data.byteLength;\n\tassert(len >= 4 && len <= 8);\n\t{\n\t\tconst l1 = data.getUint32(0, true);\n\t\tconst l2 = data.getUint32(len - 4, true);\n\t\tlet m128 = ((n(l1) | n(l2) << n(32)) ^ (key32.getBigUint64(16, true) ^ key32.getBigUint64(24, true)) + seed & mask64) * (PRIME64_1 + (n(len) << n(2))) & mask128;\n\t\tm128 += (m128 & mask64) << n(65);\n\t\tm128 &= mask128;\n\t\tm128 ^= m128 >> n(67);\n\t\treturn xorshift64(xorshift64(m128 & mask64, n(35)) * PRIME_MX2 & mask64, n(28)) | XXH3_avalanche(m128 >> n(64)) << n(64);\n\t}\n}\nfunction XXH3_len_9to16_128b(data, key64, seed) {\n\tconst len = data.byteLength;\n\tassert(len >= 9 && len <= 16);\n\t{\n\t\tconst bitflipl = (key64.getBigUint64(32, true) ^ key64.getBigUint64(40, true)) + seed & mask64;\n\t\tconst bitfliph = (key64.getBigUint64(48, true) ^ key64.getBigUint64(56, true)) - seed & mask64;\n\t\tconst ll1 = data.getBigUint64(0, true);\n\t\tlet ll2 = data.getBigUint64(len - 8, true);\n\t\tlet m128 = (ll1 ^ ll2 ^ bitflipl) * PRIME64_1;\n\t\tconst m128_l = (m128 & mask64) + (n(len - 1) << n(54));\n\t\tm128 = m128 & (mask128 ^ mask64) | m128_l;\n\t\tll2 ^= bitfliph;\n\t\tm128 += ll2 + (ll2 & mask32) * (PRIME32_2 - n(1)) << n(64);\n\t\tm128 &= mask128;\n\t\tm128 ^= bswap64(m128 >> n(64));\n\t\tlet h128 = (m128 & mask64) * PRIME64_2;\n\t\th128 += (m128 >> n(64)) * PRIME64_2 << n(64);\n\t\th128 &= mask128;\n\t\treturn XXH3_avalanche(h128 & mask64) | XXH3_avalanche(h128 >> n(64)) << n(64);\n\t}\n}\nfunction XXH3_len_0to16_128b(data, seed) {\n\tconst len = data.byteLength;\n\tassert(len <= 16);\n\tif (len > 8) return XXH3_len_9to16_128b(data, kkey, seed);\n\tif (len >= 4) return XXH3_len_4to8_128b(data, kkey, seed);\n\tif (len > 0) return XXH3_len_1to3_128b(data, kkey, seed);\n\treturn XXH3_avalanche64(seed ^ kkey.getBigUint64(64, true) ^ kkey.getBigUint64(72, true)) | XXH3_avalanche64(seed ^ kkey.getBigUint64(80, true) ^ kkey.getBigUint64(88, true)) << n(64);\n}\nfunction inv64(x) {\n\treturn ~x + n(1) & mask64;\n}\nfunction XXH3_len_17to128_128b(data, secret, seed) {\n\tlet acc = n(data.byteLength) * PRIME64_1 & mask64;\n\tlet i = n(data.byteLength - 1) / n(32);\n\twhile (i >= 0) {\n\t\tconst ni = Number(i);\n\t\tacc = XXH3_mix32B(acc, view(data, 16 * ni), view(data, data.byteLength - 16 * (ni + 1)), view(secret, 32 * ni), seed);\n\t\ti -= n(1);\n\t}\n\tlet h128l = acc + (acc >> n(64)) & mask64;\n\th128l = XXH3_avalanche(h128l);\n\tlet h128h = (acc & mask64) * PRIME64_1 + (acc >> n(64)) * PRIME64_4 + (n(data.byteLength) - seed & mask64) * PRIME64_2;\n\th128h &= mask64;\n\th128h = inv64(XXH3_avalanche(h128h));\n\treturn h128l | h128h << n(64);\n}\nfunction XXH3_len_129to240_128b(data, secret, seed) {\n\tlet acc = n(data.byteLength) * PRIME64_1 & mask64;\n\tfor (let i = 32; i < 160; i += 32) acc = XXH3_mix32B(acc, view(data, i - 32), view(data, i - 16), view(secret, i - 32), seed);\n\tacc = XXH3_avalanche(acc & mask64) | XXH3_avalanche(acc >> n(64)) << n(64);\n\tfor (let i = 160; i <= data.byteLength; i += 32) acc = XXH3_mix32B(acc, view(data, i - 32), view(data, i - 16), view(secret, 3 + i - 160), seed);\n\tacc = XXH3_mix32B(acc, view(data, data.byteLength - 16), view(data, data.byteLength - 32), view(secret, 103), inv64(seed));\n\tlet h128l = acc + (acc >> n(64)) & mask64;\n\th128l = XXH3_avalanche(h128l);\n\tlet h128h = (acc & mask64) * PRIME64_1 + (acc >> n(64)) * PRIME64_4 + (n(data.byteLength) - seed & mask64) * PRIME64_2;\n\th128h &= mask64;\n\th128h = inv64(XXH3_avalanche(h128h));\n\treturn h128l | h128h << n(64);\n}\nfunction XXH3(input, seed = n(0)) {\n\tconst encoder = new TextEncoder();\n\tconst data = view(typeof input === \"string\" ? encoder.encode(input) : input);\n\tconst len = data.byteLength;\n\tconst hexDigest = (data$1) => data$1.toString(16).padStart(32, \"0\");\n\tif (len <= 16) return hexDigest(XXH3_len_0to16_128b(data, seed));\n\tif (len <= 128) return hexDigest(XXH3_len_17to128_128b(data, kkey, seed));\n\tif (len <= 240) return hexDigest(XXH3_len_129to240_128b(data, kkey, seed));\n\treturn hexDigest(XXH3_hashLong_128b(data, kkey));\n}\nfunction isXXH3(value) {\n\treturn /^[0-9a-f]{32}$/.test(value);\n}\n\n//#endregion\n\n//# sourceMappingURL=hash.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9oYXNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixZQUFZO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsaUJBQWlCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixZQUFZO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGlCQUFpQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixTQUFTO0FBQzNCO0FBQ0EsbUJBQW1CLHNCQUFzQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixHQUFHO0FBQ3RCOztBQUVBO0FBQ3dCO0FBQ3hCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9oYXNoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvaGFzaC50c1xuY29uc3QgbiA9IChuJDEpID0+IEJpZ0ludChuJDEpO1xuY29uc3QgdmlldyA9IChkYXRhLCBvZmZzZXQgPSAwKSA9PiBuZXcgRGF0YVZpZXcoZGF0YS5idWZmZXIsIGRhdGEuYnl0ZU9mZnNldCArIG9mZnNldCwgZGF0YS5ieXRlTGVuZ3RoIC0gb2Zmc2V0KTtcbmNvbnN0IFBSSU1FMzJfMSA9IG4oXCIweDlFMzc3OUIxXCIpO1xuY29uc3QgUFJJTUUzMl8yID0gbihcIjB4ODVFQkNBNzdcIik7XG5jb25zdCBQUklNRTMyXzMgPSBuKFwiMHhDMkIyQUUzRFwiKTtcbmNvbnN0IFBSSU1FNjRfMSA9IG4oXCIweDlFMzc3OUIxODVFQkNBODdcIik7XG5jb25zdCBQUklNRTY0XzIgPSBuKFwiMHhDMkIyQUUzRDI3RDRFQjRGXCIpO1xuY29uc3QgUFJJTUU2NF8zID0gbihcIjB4MTY1NjY3QjE5RTM3NzlGOVwiKTtcbmNvbnN0IFBSSU1FNjRfNCA9IG4oXCIweDg1RUJDQTc3QzJCMkFFNjNcIik7XG5jb25zdCBQUklNRTY0XzUgPSBuKFwiMHgyN0Q0RUIyRjE2NTY2N0M1XCIpO1xuY29uc3QgUFJJTUVfTVgxID0gbihcIjB4MTY1NjY3OTE5RTM3NzlGOVwiKTtcbmNvbnN0IFBSSU1FX01YMiA9IG4oXCIweDlGQjIxQzY1MUU5OERGMjVcIik7XG5jb25zdCBoZXhUb1VpbnQ4QXJyYXkgPSAoaGV4KSA9PiB7XG5cdGNvbnN0IHN0ckxlbiA9IGhleC5sZW5ndGg7XG5cdGlmIChzdHJMZW4gJSAyICE9PSAwKSB0aHJvdyBuZXcgRXJyb3IoXCJTdHJpbmcgc2hvdWxkIGhhdmUgYW4gZXZlbiBudW1iZXIgb2YgY2hhcmFjdGVyc1wiKTtcblx0Y29uc3QgbWF4TGVuZ3RoID0gc3RyTGVuIC8gMjtcblx0Y29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShtYXhMZW5ndGgpO1xuXHRsZXQgcmVhZCA9IDA7XG5cdGxldCB3cml0ZSA9IDA7XG5cdHdoaWxlICh3cml0ZSA8IG1heExlbmd0aCkge1xuXHRcdGNvbnN0IHNsaWNlID0gaGV4LnNsaWNlKHJlYWQsIHJlYWQgKz0gMik7XG5cdFx0Ynl0ZXNbd3JpdGVdID0gTnVtYmVyLnBhcnNlSW50KHNsaWNlLCAxNik7XG5cdFx0d3JpdGUgKz0gMTtcblx0fVxuXHRyZXR1cm4gdmlldyhieXRlcyk7XG59O1xuY29uc3Qga2tleSA9IGhleFRvVWludDhBcnJheShcImI4ZmU2YzM5MjNhNDRiYmU3YzAxODEyY2Y3MjFhZDFjZGVkNDZkZTk4MzkwOTdkYjcyNDBhNGE0YjdiMzY3MWZjYjc5ZTY0ZWNjYzBlNTc4ODI1YWQwN2RjY2ZmNzIyMWI4MDg0Njc0Zjc0MzI0OGVlMDM1OTBlNjgxM2EyNjRjM2MyODUyYmI5MWMzMDBjYjg4ZDA2NThiMWI1MzJlYTM3MTY0NDg5N2EyMGRmOTRlMzgxOWVmNDZhOWRlYWNkOGE4ZmE3NjNmZTM5YzM0M2ZmOWRjYmJjN2M3MGI0ZjFkOGE1MWUwNGJjZGI0NTkzMWM4OWY3ZWM5ZDk3ODczNjRlYWM1YWM4MzM0ZDNlYmMzYzU4MWEwZmZmYTEzNjNlYjE3MGRkZDUxYjdmMGRhNDlkMzE2NTUyNjI5ZDQ2ODllMmIxNmJlNTg3ZDQ3YTFmYzhmZjhiOGQxN2FkMDMxY2U0NWNiM2E4Zjk1MTYwNDI4YWZkN2ZiY2FiYjRiNDA3ZVwiKTtcbmNvbnN0IG1hc2sxMjggPSAobigxKSA8PCBuKDEyOCkpIC0gbigxKTtcbmNvbnN0IG1hc2s2NCA9IChuKDEpIDw8IG4oNjQpKSAtIG4oMSk7XG5jb25zdCBtYXNrMzIgPSAobigxKSA8PCBuKDMyKSkgLSBuKDEpO1xuY29uc3QgU1RSSVBFX0xFTiA9IDY0O1xuY29uc3QgQUNDX05CID0gU1RSSVBFX0xFTiAvIDg7XG5jb25zdCBfVTY0ID0gODtcbmNvbnN0IF9VMzIgPSA0O1xuZnVuY3Rpb24gYXNzZXJ0KGEpIHtcblx0aWYgKCFhKSB0aHJvdyBuZXcgRXJyb3IoXCJBc3NlcnQgZmFpbGVkXCIpO1xufVxuZnVuY3Rpb24gYnN3YXA2NChhKSB7XG5cdGNvbnN0IHNjcmF0Y2hidWYgPSAvKiBAX19QVVJFX18gKi8gbmV3IERhdGFWaWV3KC8qIEBfX1BVUkVfXyAqLyBuZXcgQXJyYXlCdWZmZXIoOCkpO1xuXHRzY3JhdGNoYnVmLnNldEJpZ1VpbnQ2NCgwLCBhLCB0cnVlKTtcblx0cmV0dXJuIHNjcmF0Y2hidWYuZ2V0QmlnVWludDY0KDAsIGZhbHNlKTtcbn1cbmZ1bmN0aW9uIGJzd2FwMzIoaW5wdXQpIHtcblx0bGV0IGEgPSBpbnB1dDtcblx0YSA9IChhICYgbig2NTUzNSkpIDw8IG4oMTYpIHwgKGEgJiBuKDQyOTQ5MDE3NjApKSA+PiBuKDE2KTtcblx0YSA9IChhICYgbigxNjcxMTkzNSkpIDw8IG4oOCkgfCAoYSAmIG4oNDI3ODI1NTM2MCkpID4+IG4oOCk7XG5cdHJldHVybiBhO1xufVxuZnVuY3Rpb24gWFhIX211bHQzMnRvNjQoYSwgYikge1xuXHRyZXR1cm4gKGEgJiBtYXNrMzIpICogKGIgJiBtYXNrMzIpICYgbWFzazY0O1xufVxuZnVuY3Rpb24gcm90bDMyKGEsIGIpIHtcblx0cmV0dXJuIChhIDw8IGIgfCBhID4+IG4oMzIpIC0gYikgJiBtYXNrMzI7XG59XG5mdW5jdGlvbiBYWEgzX2FjY3VtdWxhdGVfNTEyKGFjYywgZGF0YVZpZXcsIGtleVZpZXcpIHtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBBQ0NfTkI7IGkgKz0gMSkge1xuXHRcdGNvbnN0IGRhdGFfdmFsID0gZGF0YVZpZXcuZ2V0QmlnVWludDY0KGkgKiA4LCB0cnVlKTtcblx0XHRjb25zdCBkYXRhX2tleSA9IGRhdGFfdmFsIF4ga2V5Vmlldy5nZXRCaWdVaW50NjQoaSAqIDgsIHRydWUpO1xuXHRcdGFjY1tpIF4gMV0gKz0gZGF0YV92YWw7XG5cdFx0YWNjW2ldICs9IFhYSF9tdWx0MzJ0bzY0KGRhdGFfa2V5LCBkYXRhX2tleSA+PiBuKDMyKSk7XG5cdH1cblx0cmV0dXJuIGFjYztcbn1cbmZ1bmN0aW9uIFhYSDNfYWNjdW11bGF0ZShhY2MsIGRhdGFWaWV3LCBrZXlWaWV3LCBuYlN0cmlwZXMpIHtcblx0Zm9yIChsZXQgbiQxID0gMDsgbiQxIDwgbmJTdHJpcGVzOyBuJDEgKz0gMSkgWFhIM19hY2N1bXVsYXRlXzUxMihhY2MsIHZpZXcoZGF0YVZpZXcsIG4kMSAqIFNUUklQRV9MRU4pLCB2aWV3KGtleVZpZXcsIG4kMSAqIDgpKTtcblx0cmV0dXJuIGFjYztcbn1cbmZ1bmN0aW9uIFhYSDNfc2NyYW1ibGVBY2MoYWNjLCBrZXkpIHtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBBQ0NfTkI7IGkgKz0gMSkge1xuXHRcdGNvbnN0IGtleTY0ID0ga2V5LmdldEJpZ1VpbnQ2NChpICogOCwgdHJ1ZSk7XG5cdFx0bGV0IGFjYzY0ID0gYWNjW2ldO1xuXHRcdGFjYzY0ID0geG9yc2hpZnQ2NChhY2M2NCwgbig0NykpO1xuXHRcdGFjYzY0IF49IGtleTY0O1xuXHRcdGFjYzY0ICo9IFBSSU1FMzJfMTtcblx0XHRhY2NbaV0gPSBhY2M2NCAmIG1hc2s2NDtcblx0fVxuXHRyZXR1cm4gYWNjO1xufVxuZnVuY3Rpb24gWFhIM19taXgyQWNjcyhhY2MsIGtleSkge1xuXHRyZXR1cm4gWFhIM19tdWwxMjhfZm9sZDY0KGFjY1swXSBeIGtleS5nZXRCaWdVaW50NjQoMCwgdHJ1ZSksIGFjY1sxXSBeIGtleS5nZXRCaWdVaW50NjQoX1U2NCwgdHJ1ZSkpO1xufVxuZnVuY3Rpb24gWFhIM19tZXJnZUFjY3MoYWNjLCBrZXksIHN0YXJ0KSB7XG5cdGxldCByZXN1bHQ2NCA9IHN0YXJ0O1xuXHRyZXN1bHQ2NCArPSBYWEgzX21peDJBY2NzKGFjYy5zbGljZSgwKSwgdmlldyhrZXksIDAgKiBfVTMyKSk7XG5cdHJlc3VsdDY0ICs9IFhYSDNfbWl4MkFjY3MoYWNjLnNsaWNlKDIpLCB2aWV3KGtleSwgNCAqIF9VMzIpKTtcblx0cmVzdWx0NjQgKz0gWFhIM19taXgyQWNjcyhhY2Muc2xpY2UoNCksIHZpZXcoa2V5LCA4ICogX1UzMikpO1xuXHRyZXN1bHQ2NCArPSBYWEgzX21peDJBY2NzKGFjYy5zbGljZSg2KSwgdmlldyhrZXksIDEyICogX1UzMikpO1xuXHRyZXR1cm4gWFhIM19hdmFsYW5jaGUocmVzdWx0NjQgJiBtYXNrNjQpO1xufVxuZnVuY3Rpb24gWFhIM19oYXNoTG9uZyhpbnB1dCwgZGF0YSwgc2VjcmV0LCBmX2FjYywgZl9zY3JhbWJsZSkge1xuXHRsZXQgYWNjID0gaW5wdXQ7XG5cdGNvbnN0IG5iU3RyaXBlc1BlckJsb2NrID0gTWF0aC5mbG9vcigoc2VjcmV0LmJ5dGVMZW5ndGggLSBTVFJJUEVfTEVOKSAvIDgpO1xuXHRjb25zdCBibG9ja19sZW4gPSBTVFJJUEVfTEVOICogbmJTdHJpcGVzUGVyQmxvY2s7XG5cdGNvbnN0IG5iX2Jsb2NrcyA9IE1hdGguZmxvb3IoKGRhdGEuYnl0ZUxlbmd0aCAtIDEpIC8gYmxvY2tfbGVuKTtcblx0Zm9yIChsZXQgbiQxID0gMDsgbiQxIDwgbmJfYmxvY2tzOyBuJDEgKz0gMSkge1xuXHRcdGFjYyA9IFhYSDNfYWNjdW11bGF0ZShhY2MsIHZpZXcoZGF0YSwgbiQxICogYmxvY2tfbGVuKSwgc2VjcmV0LCBuYlN0cmlwZXNQZXJCbG9jayk7XG5cdFx0YWNjID0gZl9zY3JhbWJsZShhY2MsIHZpZXcoc2VjcmV0LCBzZWNyZXQuYnl0ZUxlbmd0aCAtIFNUUklQRV9MRU4pKTtcblx0fVxuXHR7XG5cdFx0Y29uc3QgbmJTdHJpcGVzID0gTWF0aC5mbG9vcigoZGF0YS5ieXRlTGVuZ3RoIC0gMSAtIGJsb2NrX2xlbiAqIG5iX2Jsb2NrcykgLyBTVFJJUEVfTEVOKTtcblx0XHRhY2MgPSBYWEgzX2FjY3VtdWxhdGUoYWNjLCB2aWV3KGRhdGEsIG5iX2Jsb2NrcyAqIGJsb2NrX2xlbiksIHNlY3JldCwgbmJTdHJpcGVzKTtcblx0XHRhY2MgPSBmX2FjYyhhY2MsIHZpZXcoZGF0YSwgZGF0YS5ieXRlTGVuZ3RoIC0gU1RSSVBFX0xFTiksIHZpZXcoc2VjcmV0LCBzZWNyZXQuYnl0ZUxlbmd0aCAtIFNUUklQRV9MRU4gLSA3KSk7XG5cdH1cblx0cmV0dXJuIGFjYztcbn1cbmZ1bmN0aW9uIFhYSDNfaGFzaExvbmdfMTI4YihkYXRhLCBzZWNyZXQpIHtcblx0bGV0IGFjYyA9IG5ldyBCaWdVaW50NjRBcnJheShbXG5cdFx0UFJJTUUzMl8zLFxuXHRcdFBSSU1FNjRfMSxcblx0XHRQUklNRTY0XzIsXG5cdFx0UFJJTUU2NF8zLFxuXHRcdFBSSU1FNjRfNCxcblx0XHRQUklNRTMyXzIsXG5cdFx0UFJJTUU2NF81LFxuXHRcdFBSSU1FMzJfMVxuXHRdKTtcblx0YXNzZXJ0KGRhdGEuYnl0ZUxlbmd0aCA+IDEyOCk7XG5cdGFjYyA9IFhYSDNfaGFzaExvbmcoYWNjLCBkYXRhLCBzZWNyZXQsIFhYSDNfYWNjdW11bGF0ZV81MTIsIFhYSDNfc2NyYW1ibGVBY2MpO1xuXHRhc3NlcnQoYWNjLmxlbmd0aCAqIDggPT09IDY0KTtcblx0e1xuXHRcdGNvbnN0IGxvdzY0ID0gWFhIM19tZXJnZUFjY3MoYWNjLCB2aWV3KHNlY3JldCwgMTEpLCBuKGRhdGEuYnl0ZUxlbmd0aCkgKiBQUklNRTY0XzEgJiBtYXNrNjQpO1xuXHRcdHJldHVybiBYWEgzX21lcmdlQWNjcyhhY2MsIHZpZXcoc2VjcmV0LCBzZWNyZXQuYnl0ZUxlbmd0aCAtIFNUUklQRV9MRU4gLSAxMSksIH4obihkYXRhLmJ5dGVMZW5ndGgpICogUFJJTUU2NF8yKSAmIG1hc2s2NCkgPDwgbig2NCkgfCBsb3c2NDtcblx0fVxufVxuZnVuY3Rpb24gWFhIM19tdWwxMjhfZm9sZDY0KGEsIGIpIHtcblx0Y29uc3QgbGxsID0gYSAqIGIgJiBtYXNrMTI4O1xuXHRyZXR1cm4gbGxsICYgbWFzazY0IF4gbGxsID4+IG4oNjQpO1xufVxuZnVuY3Rpb24gWFhIM19taXgxNkIoZGF0YVZpZXcsIGtleVZpZXcsIHNlZWQpIHtcblx0cmV0dXJuIFhYSDNfbXVsMTI4X2ZvbGQ2NCgoZGF0YVZpZXcuZ2V0QmlnVWludDY0KDAsIHRydWUpIF4ga2V5Vmlldy5nZXRCaWdVaW50NjQoMCwgdHJ1ZSkgKyBzZWVkKSAmIG1hc2s2NCwgKGRhdGFWaWV3LmdldEJpZ1VpbnQ2NCg4LCB0cnVlKSBeIGtleVZpZXcuZ2V0QmlnVWludDY0KDgsIHRydWUpIC0gc2VlZCkgJiBtYXNrNjQpO1xufVxuZnVuY3Rpb24gWFhIM19taXgzMkIoYWNjLCBkYXRhMSwgZGF0YTIsIGtleSwgc2VlZCkge1xuXHRsZXQgYWNjbCA9IGFjYyAmIG1hc2s2NDtcblx0bGV0IGFjY2ggPSBhY2MgPj4gbig2NCkgJiBtYXNrNjQ7XG5cdGFjY2wgKz0gWFhIM19taXgxNkIoZGF0YTEsIGtleSwgc2VlZCk7XG5cdGFjY2wgXj0gZGF0YTIuZ2V0QmlnVWludDY0KDAsIHRydWUpICsgZGF0YTIuZ2V0QmlnVWludDY0KDgsIHRydWUpO1xuXHRhY2NsICY9IG1hc2s2NDtcblx0YWNjaCArPSBYWEgzX21peDE2QihkYXRhMiwgdmlldyhrZXksIDE2KSwgc2VlZCk7XG5cdGFjY2ggXj0gZGF0YTEuZ2V0QmlnVWludDY0KDAsIHRydWUpICsgZGF0YTEuZ2V0QmlnVWludDY0KDgsIHRydWUpO1xuXHRhY2NoICY9IG1hc2s2NDtcblx0cmV0dXJuIGFjY2ggPDwgbig2NCkgfCBhY2NsO1xufVxuZnVuY3Rpb24gWFhIM19hdmFsYW5jaGUoaW5wdXQpIHtcblx0bGV0IGg2NCA9IGlucHV0O1xuXHRoNjQgXj0gaDY0ID4+IG4oMzcpO1xuXHRoNjQgKj0gUFJJTUVfTVgxO1xuXHRoNjQgJj0gbWFzazY0O1xuXHRoNjQgXj0gaDY0ID4+IG4oMzIpO1xuXHRyZXR1cm4gaDY0O1xufVxuZnVuY3Rpb24gWFhIM19hdmFsYW5jaGU2NChpbnB1dCkge1xuXHRsZXQgaDY0ID0gaW5wdXQ7XG5cdGg2NCBePSBoNjQgPj4gbigzMyk7XG5cdGg2NCAqPSBQUklNRTY0XzI7XG5cdGg2NCAmPSBtYXNrNjQ7XG5cdGg2NCBePSBoNjQgPj4gbigyOSk7XG5cdGg2NCAqPSBQUklNRTY0XzM7XG5cdGg2NCAmPSBtYXNrNjQ7XG5cdGg2NCBePSBoNjQgPj4gbigzMik7XG5cdHJldHVybiBoNjQ7XG59XG5mdW5jdGlvbiBYWEgzX2xlbl8xdG8zXzEyOGIoZGF0YSwga2V5MzIsIHNlZWQpIHtcblx0Y29uc3QgbGVuID0gZGF0YS5ieXRlTGVuZ3RoO1xuXHRhc3NlcnQobGVuID4gMCAmJiBsZW4gPD0gMyk7XG5cdGNvbnN0IGNvbWJpbmVkID0gbihkYXRhLmdldFVpbnQ4KGxlbiAtIDEpKSB8IG4obGVuIDw8IDgpIHwgbihkYXRhLmdldFVpbnQ4KDApIDw8IDE2KSB8IG4oZGF0YS5nZXRVaW50OChsZW4gPj4gMSkgPDwgMjQpO1xuXHRjb25zdCBsb3cgPSAoY29tYmluZWQgXiAobihrZXkzMi5nZXRVaW50MzIoMCwgdHJ1ZSkpIF4gbihrZXkzMi5nZXRVaW50MzIoNCwgdHJ1ZSkpKSArIHNlZWQpICYgbWFzazY0O1xuXHRjb25zdCBiaGlnaCA9IChuKGtleTMyLmdldFVpbnQzMig4LCB0cnVlKSkgXiBuKGtleTMyLmdldFVpbnQzMigxMiwgdHJ1ZSkpKSAtIHNlZWQ7XG5cdHJldHVybiAoWFhIM19hdmFsYW5jaGU2NCgocm90bDMyKGJzd2FwMzIoY29tYmluZWQpLCBuKDEzKSkgXiBiaGlnaCkgJiBtYXNrNjQpICYgbWFzazY0KSA8PCBuKDY0KSB8IFhYSDNfYXZhbGFuY2hlNjQobG93KTtcbn1cbmZ1bmN0aW9uIHhvcnNoaWZ0NjQoYiwgc2hpZnQpIHtcblx0cmV0dXJuIGIgXiBiID4+IHNoaWZ0O1xufVxuZnVuY3Rpb24gWFhIM19sZW5fNHRvOF8xMjhiKGRhdGEsIGtleTMyLCBzZWVkKSB7XG5cdGNvbnN0IGxlbiA9IGRhdGEuYnl0ZUxlbmd0aDtcblx0YXNzZXJ0KGxlbiA+PSA0ICYmIGxlbiA8PSA4KTtcblx0e1xuXHRcdGNvbnN0IGwxID0gZGF0YS5nZXRVaW50MzIoMCwgdHJ1ZSk7XG5cdFx0Y29uc3QgbDIgPSBkYXRhLmdldFVpbnQzMihsZW4gLSA0LCB0cnVlKTtcblx0XHRsZXQgbTEyOCA9ICgobihsMSkgfCBuKGwyKSA8PCBuKDMyKSkgXiAoa2V5MzIuZ2V0QmlnVWludDY0KDE2LCB0cnVlKSBeIGtleTMyLmdldEJpZ1VpbnQ2NCgyNCwgdHJ1ZSkpICsgc2VlZCAmIG1hc2s2NCkgKiAoUFJJTUU2NF8xICsgKG4obGVuKSA8PCBuKDIpKSkgJiBtYXNrMTI4O1xuXHRcdG0xMjggKz0gKG0xMjggJiBtYXNrNjQpIDw8IG4oNjUpO1xuXHRcdG0xMjggJj0gbWFzazEyODtcblx0XHRtMTI4IF49IG0xMjggPj4gbig2Nyk7XG5cdFx0cmV0dXJuIHhvcnNoaWZ0NjQoeG9yc2hpZnQ2NChtMTI4ICYgbWFzazY0LCBuKDM1KSkgKiBQUklNRV9NWDIgJiBtYXNrNjQsIG4oMjgpKSB8IFhYSDNfYXZhbGFuY2hlKG0xMjggPj4gbig2NCkpIDw8IG4oNjQpO1xuXHR9XG59XG5mdW5jdGlvbiBYWEgzX2xlbl85dG8xNl8xMjhiKGRhdGEsIGtleTY0LCBzZWVkKSB7XG5cdGNvbnN0IGxlbiA9IGRhdGEuYnl0ZUxlbmd0aDtcblx0YXNzZXJ0KGxlbiA+PSA5ICYmIGxlbiA8PSAxNik7XG5cdHtcblx0XHRjb25zdCBiaXRmbGlwbCA9IChrZXk2NC5nZXRCaWdVaW50NjQoMzIsIHRydWUpIF4ga2V5NjQuZ2V0QmlnVWludDY0KDQwLCB0cnVlKSkgKyBzZWVkICYgbWFzazY0O1xuXHRcdGNvbnN0IGJpdGZsaXBoID0gKGtleTY0LmdldEJpZ1VpbnQ2NCg0OCwgdHJ1ZSkgXiBrZXk2NC5nZXRCaWdVaW50NjQoNTYsIHRydWUpKSAtIHNlZWQgJiBtYXNrNjQ7XG5cdFx0Y29uc3QgbGwxID0gZGF0YS5nZXRCaWdVaW50NjQoMCwgdHJ1ZSk7XG5cdFx0bGV0IGxsMiA9IGRhdGEuZ2V0QmlnVWludDY0KGxlbiAtIDgsIHRydWUpO1xuXHRcdGxldCBtMTI4ID0gKGxsMSBeIGxsMiBeIGJpdGZsaXBsKSAqIFBSSU1FNjRfMTtcblx0XHRjb25zdCBtMTI4X2wgPSAobTEyOCAmIG1hc2s2NCkgKyAobihsZW4gLSAxKSA8PCBuKDU0KSk7XG5cdFx0bTEyOCA9IG0xMjggJiAobWFzazEyOCBeIG1hc2s2NCkgfCBtMTI4X2w7XG5cdFx0bGwyIF49IGJpdGZsaXBoO1xuXHRcdG0xMjggKz0gbGwyICsgKGxsMiAmIG1hc2szMikgKiAoUFJJTUUzMl8yIC0gbigxKSkgPDwgbig2NCk7XG5cdFx0bTEyOCAmPSBtYXNrMTI4O1xuXHRcdG0xMjggXj0gYnN3YXA2NChtMTI4ID4+IG4oNjQpKTtcblx0XHRsZXQgaDEyOCA9IChtMTI4ICYgbWFzazY0KSAqIFBSSU1FNjRfMjtcblx0XHRoMTI4ICs9IChtMTI4ID4+IG4oNjQpKSAqIFBSSU1FNjRfMiA8PCBuKDY0KTtcblx0XHRoMTI4ICY9IG1hc2sxMjg7XG5cdFx0cmV0dXJuIFhYSDNfYXZhbGFuY2hlKGgxMjggJiBtYXNrNjQpIHwgWFhIM19hdmFsYW5jaGUoaDEyOCA+PiBuKDY0KSkgPDwgbig2NCk7XG5cdH1cbn1cbmZ1bmN0aW9uIFhYSDNfbGVuXzB0bzE2XzEyOGIoZGF0YSwgc2VlZCkge1xuXHRjb25zdCBsZW4gPSBkYXRhLmJ5dGVMZW5ndGg7XG5cdGFzc2VydChsZW4gPD0gMTYpO1xuXHRpZiAobGVuID4gOCkgcmV0dXJuIFhYSDNfbGVuXzl0bzE2XzEyOGIoZGF0YSwga2tleSwgc2VlZCk7XG5cdGlmIChsZW4gPj0gNCkgcmV0dXJuIFhYSDNfbGVuXzR0bzhfMTI4YihkYXRhLCBra2V5LCBzZWVkKTtcblx0aWYgKGxlbiA+IDApIHJldHVybiBYWEgzX2xlbl8xdG8zXzEyOGIoZGF0YSwga2tleSwgc2VlZCk7XG5cdHJldHVybiBYWEgzX2F2YWxhbmNoZTY0KHNlZWQgXiBra2V5LmdldEJpZ1VpbnQ2NCg2NCwgdHJ1ZSkgXiBra2V5LmdldEJpZ1VpbnQ2NCg3MiwgdHJ1ZSkpIHwgWFhIM19hdmFsYW5jaGU2NChzZWVkIF4ga2tleS5nZXRCaWdVaW50NjQoODAsIHRydWUpIF4ga2tleS5nZXRCaWdVaW50NjQoODgsIHRydWUpKSA8PCBuKDY0KTtcbn1cbmZ1bmN0aW9uIGludjY0KHgpIHtcblx0cmV0dXJuIH54ICsgbigxKSAmIG1hc2s2NDtcbn1cbmZ1bmN0aW9uIFhYSDNfbGVuXzE3dG8xMjhfMTI4YihkYXRhLCBzZWNyZXQsIHNlZWQpIHtcblx0bGV0IGFjYyA9IG4oZGF0YS5ieXRlTGVuZ3RoKSAqIFBSSU1FNjRfMSAmIG1hc2s2NDtcblx0bGV0IGkgPSBuKGRhdGEuYnl0ZUxlbmd0aCAtIDEpIC8gbigzMik7XG5cdHdoaWxlIChpID49IDApIHtcblx0XHRjb25zdCBuaSA9IE51bWJlcihpKTtcblx0XHRhY2MgPSBYWEgzX21peDMyQihhY2MsIHZpZXcoZGF0YSwgMTYgKiBuaSksIHZpZXcoZGF0YSwgZGF0YS5ieXRlTGVuZ3RoIC0gMTYgKiAobmkgKyAxKSksIHZpZXcoc2VjcmV0LCAzMiAqIG5pKSwgc2VlZCk7XG5cdFx0aSAtPSBuKDEpO1xuXHR9XG5cdGxldCBoMTI4bCA9IGFjYyArIChhY2MgPj4gbig2NCkpICYgbWFzazY0O1xuXHRoMTI4bCA9IFhYSDNfYXZhbGFuY2hlKGgxMjhsKTtcblx0bGV0IGgxMjhoID0gKGFjYyAmIG1hc2s2NCkgKiBQUklNRTY0XzEgKyAoYWNjID4+IG4oNjQpKSAqIFBSSU1FNjRfNCArIChuKGRhdGEuYnl0ZUxlbmd0aCkgLSBzZWVkICYgbWFzazY0KSAqIFBSSU1FNjRfMjtcblx0aDEyOGggJj0gbWFzazY0O1xuXHRoMTI4aCA9IGludjY0KFhYSDNfYXZhbGFuY2hlKGgxMjhoKSk7XG5cdHJldHVybiBoMTI4bCB8IGgxMjhoIDw8IG4oNjQpO1xufVxuZnVuY3Rpb24gWFhIM19sZW5fMTI5dG8yNDBfMTI4YihkYXRhLCBzZWNyZXQsIHNlZWQpIHtcblx0bGV0IGFjYyA9IG4oZGF0YS5ieXRlTGVuZ3RoKSAqIFBSSU1FNjRfMSAmIG1hc2s2NDtcblx0Zm9yIChsZXQgaSA9IDMyOyBpIDwgMTYwOyBpICs9IDMyKSBhY2MgPSBYWEgzX21peDMyQihhY2MsIHZpZXcoZGF0YSwgaSAtIDMyKSwgdmlldyhkYXRhLCBpIC0gMTYpLCB2aWV3KHNlY3JldCwgaSAtIDMyKSwgc2VlZCk7XG5cdGFjYyA9IFhYSDNfYXZhbGFuY2hlKGFjYyAmIG1hc2s2NCkgfCBYWEgzX2F2YWxhbmNoZShhY2MgPj4gbig2NCkpIDw8IG4oNjQpO1xuXHRmb3IgKGxldCBpID0gMTYwOyBpIDw9IGRhdGEuYnl0ZUxlbmd0aDsgaSArPSAzMikgYWNjID0gWFhIM19taXgzMkIoYWNjLCB2aWV3KGRhdGEsIGkgLSAzMiksIHZpZXcoZGF0YSwgaSAtIDE2KSwgdmlldyhzZWNyZXQsIDMgKyBpIC0gMTYwKSwgc2VlZCk7XG5cdGFjYyA9IFhYSDNfbWl4MzJCKGFjYywgdmlldyhkYXRhLCBkYXRhLmJ5dGVMZW5ndGggLSAxNiksIHZpZXcoZGF0YSwgZGF0YS5ieXRlTGVuZ3RoIC0gMzIpLCB2aWV3KHNlY3JldCwgMTAzKSwgaW52NjQoc2VlZCkpO1xuXHRsZXQgaDEyOGwgPSBhY2MgKyAoYWNjID4+IG4oNjQpKSAmIG1hc2s2NDtcblx0aDEyOGwgPSBYWEgzX2F2YWxhbmNoZShoMTI4bCk7XG5cdGxldCBoMTI4aCA9IChhY2MgJiBtYXNrNjQpICogUFJJTUU2NF8xICsgKGFjYyA+PiBuKDY0KSkgKiBQUklNRTY0XzQgKyAobihkYXRhLmJ5dGVMZW5ndGgpIC0gc2VlZCAmIG1hc2s2NCkgKiBQUklNRTY0XzI7XG5cdGgxMjhoICY9IG1hc2s2NDtcblx0aDEyOGggPSBpbnY2NChYWEgzX2F2YWxhbmNoZShoMTI4aCkpO1xuXHRyZXR1cm4gaDEyOGwgfCBoMTI4aCA8PCBuKDY0KTtcbn1cbmZ1bmN0aW9uIFhYSDMoaW5wdXQsIHNlZWQgPSBuKDApKSB7XG5cdGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcblx0Y29uc3QgZGF0YSA9IHZpZXcodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiID8gZW5jb2Rlci5lbmNvZGUoaW5wdXQpIDogaW5wdXQpO1xuXHRjb25zdCBsZW4gPSBkYXRhLmJ5dGVMZW5ndGg7XG5cdGNvbnN0IGhleERpZ2VzdCA9IChkYXRhJDEpID0+IGRhdGEkMS50b1N0cmluZygxNikucGFkU3RhcnQoMzIsIFwiMFwiKTtcblx0aWYgKGxlbiA8PSAxNikgcmV0dXJuIGhleERpZ2VzdChYWEgzX2xlbl8wdG8xNl8xMjhiKGRhdGEsIHNlZWQpKTtcblx0aWYgKGxlbiA8PSAxMjgpIHJldHVybiBoZXhEaWdlc3QoWFhIM19sZW5fMTd0bzEyOF8xMjhiKGRhdGEsIGtrZXksIHNlZWQpKTtcblx0aWYgKGxlbiA8PSAyNDApIHJldHVybiBoZXhEaWdlc3QoWFhIM19sZW5fMTI5dG8yNDBfMTI4YihkYXRhLCBra2V5LCBzZWVkKSk7XG5cdHJldHVybiBoZXhEaWdlc3QoWFhIM19oYXNoTG9uZ18xMjhiKGRhdGEsIGtrZXkpKTtcbn1cbmZ1bmN0aW9uIGlzWFhIMyh2YWx1ZSkge1xuXHRyZXR1cm4gL15bMC05YS1mXXszMn0kLy50ZXN0KHZhbHVlKTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBYWEgzLCBpc1hYSDMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhhc2guanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/hash.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/interrupt.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/interrupt.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   interrupt: () => (/* binding */ interrupt)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _hash_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./hash.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/hash.js\");\n/* harmony import */ var _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @langchain/core/singletons */ \"(ssr)/./node_modules/@langchain/core/dist/singletons/index.js\");\n\n\n\n\n\n//#region src/interrupt.ts\n/**\n* Interrupts the execution of a graph node.\n* This function can be used to pause execution of a node, and return the value of the `resume`\n* input when the graph is re-invoked using `Command`.\n* Multiple interrupts can be called within a single node, and each will be handled sequentially.\n*\n* When an interrupt is called:\n* 1. If there's a `resume` value available (from a previous `Command`), it returns that value.\n* 2. Otherwise, it throws a `GraphInterrupt` with the provided value\n* 3. The graph can be resumed by passing a `Command` with a `resume` value\n*\n* Because the `interrupt` function propagates by throwing a special `GraphInterrupt` error,\n* you should avoid using `try/catch` blocks around the `interrupt` function,\n* or if you do, ensure that the `GraphInterrupt` error is thrown again within your `catch` block.\n*\n* @param value - The value to include in the interrupt. This will be available in task.interrupts[].value\n* @returns The `resume` value provided when the graph is re-invoked with a Command\n*\n* @example\n* ```typescript\n* // Define a node that uses multiple interrupts\n* const nodeWithInterrupts = () => {\n*   // First interrupt - will pause execution and include {value: 1} in task values\n*   const answer1 = interrupt({ value: 1 });\n*\n*   // Second interrupt - only called after first interrupt is resumed\n*   const answer2 = interrupt({ value: 2 });\n*\n*   // Use the resume values\n*   return { myKey: answer1 + \" \" + answer2 };\n* };\n*\n* // Resume the graph after first interrupt\n* await graph.stream(new Command({ resume: \"answer 1\" }));\n*\n* // Resume the graph after second interrupt\n* await graph.stream(new Command({ resume: \"answer 2\" }));\n* // Final result: { myKey: \"answer 1 answer 2\" }\n* ```\n*\n* @throws {Error} If called outside the context of a graph\n* @throws {GraphInterrupt} When no resume value is available\n*/\nfunction interrupt(value) {\n\tconst config = _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_3__.AsyncLocalStorageProviderSingleton.getRunnableConfig();\n\tif (!config) throw new Error(\"Called interrupt() outside the context of a graph.\");\n\tconst conf = config.configurable;\n\tif (!conf) throw new Error(\"No configurable found in config\");\n\tif (!conf[_constants_js__WEBPACK_IMPORTED_MODULE_1__.CONFIG_KEY_CHECKPOINTER]) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.GraphValueError(\"No checkpointer set\", { lc_error_code: \"MISSING_CHECKPOINTER\" });\n\tconst scratchpad = conf[_constants_js__WEBPACK_IMPORTED_MODULE_1__.CONFIG_KEY_SCRATCHPAD];\n\tscratchpad.interruptCounter += 1;\n\tconst idx = scratchpad.interruptCounter;\n\tif (scratchpad.resume.length > 0 && idx < scratchpad.resume.length) {\n\t\tconf[_constants_js__WEBPACK_IMPORTED_MODULE_1__.CONFIG_KEY_SEND]?.([[_constants_js__WEBPACK_IMPORTED_MODULE_1__.RESUME, scratchpad.resume]]);\n\t\treturn scratchpad.resume[idx];\n\t}\n\tif (scratchpad.nullResume !== void 0) {\n\t\tif (scratchpad.resume.length !== idx) throw new Error(`Resume length mismatch: ${scratchpad.resume.length} !== ${idx}`);\n\t\tconst v = scratchpad.consumeNullResume();\n\t\tscratchpad.resume.push(v);\n\t\tconf[_constants_js__WEBPACK_IMPORTED_MODULE_1__.CONFIG_KEY_SEND]?.([[_constants_js__WEBPACK_IMPORTED_MODULE_1__.RESUME, scratchpad.resume]]);\n\t\treturn v;\n\t}\n\tconst ns = conf[_constants_js__WEBPACK_IMPORTED_MODULE_1__.CONFIG_KEY_CHECKPOINT_NS]?.split(_constants_js__WEBPACK_IMPORTED_MODULE_1__.CHECKPOINT_NAMESPACE_SEPARATOR);\n\tthrow new _errors_js__WEBPACK_IMPORTED_MODULE_0__.GraphInterrupt([{\n\t\tid: ns ? (0,_hash_js__WEBPACK_IMPORTED_MODULE_2__.XXH3)(ns.join(_constants_js__WEBPACK_IMPORTED_MODULE_1__.CHECKPOINT_NAMESPACE_SEPARATOR)) : void 0,\n\t\tvalue\n\t}]);\n}\n\n//#endregion\n\n//# sourceMappingURL=interrupt.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9pbnRlcnJ1cHQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBOEQ7QUFDcUc7QUFDbEk7QUFDK0M7O0FBRWhGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsVUFBVTtBQUNyRSxnQ0FBZ0MsVUFBVTtBQUMxQztBQUNBO0FBQ0EsZ0NBQWdDLFVBQVU7QUFDMUM7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsb0JBQW9CO0FBQ3ZEO0FBQ0E7QUFDQSxtQ0FBbUMsb0JBQW9CO0FBQ3ZELHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsZ0JBQWdCO0FBQzNCO0FBQ0E7QUFDQSxnQkFBZ0IsMEZBQWtDO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBLFdBQVcsa0VBQXVCLGFBQWEsdURBQWUsMEJBQTBCLHVDQUF1QztBQUMvSCx5QkFBeUIsZ0VBQXFCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLE9BQU8sMERBQWUsTUFBTSxpREFBTTtBQUNsQztBQUNBO0FBQ0E7QUFDQSxtRkFBbUYsMEJBQTBCLE1BQU0sSUFBSTtBQUN2SDtBQUNBO0FBQ0EsT0FBTywwREFBZSxNQUFNLGlEQUFNO0FBQ2xDO0FBQ0E7QUFDQSxpQkFBaUIsbUVBQXdCLFNBQVMseUVBQThCO0FBQ2hGLFdBQVcsc0RBQWM7QUFDekIsV0FBVyw4Q0FBSSxTQUFTLHlFQUE4QjtBQUN0RDtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNxQjtBQUNyQiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvaW50ZXJydXB0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdyYXBoSW50ZXJydXB0LCBHcmFwaFZhbHVlRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IENIRUNLUE9JTlRfTkFNRVNQQUNFX1NFUEFSQVRPUiwgQ09ORklHX0tFWV9DSEVDS1BPSU5URVIsIENPTkZJR19LRVlfQ0hFQ0tQT0lOVF9OUywgQ09ORklHX0tFWV9TQ1JBVENIUEFELCBDT05GSUdfS0VZX1NFTkQsIFJFU1VNRSB9IGZyb20gXCIuL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgWFhIMyB9IGZyb20gXCIuL2hhc2guanNcIjtcbmltcG9ydCB7IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24gfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3NpbmdsZXRvbnNcIjtcblxuLy8jcmVnaW9uIHNyYy9pbnRlcnJ1cHQudHNcbi8qKlxuKiBJbnRlcnJ1cHRzIHRoZSBleGVjdXRpb24gb2YgYSBncmFwaCBub2RlLlxuKiBUaGlzIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIHBhdXNlIGV4ZWN1dGlvbiBvZiBhIG5vZGUsIGFuZCByZXR1cm4gdGhlIHZhbHVlIG9mIHRoZSBgcmVzdW1lYFxuKiBpbnB1dCB3aGVuIHRoZSBncmFwaCBpcyByZS1pbnZva2VkIHVzaW5nIGBDb21tYW5kYC5cbiogTXVsdGlwbGUgaW50ZXJydXB0cyBjYW4gYmUgY2FsbGVkIHdpdGhpbiBhIHNpbmdsZSBub2RlLCBhbmQgZWFjaCB3aWxsIGJlIGhhbmRsZWQgc2VxdWVudGlhbGx5LlxuKlxuKiBXaGVuIGFuIGludGVycnVwdCBpcyBjYWxsZWQ6XG4qIDEuIElmIHRoZXJlJ3MgYSBgcmVzdW1lYCB2YWx1ZSBhdmFpbGFibGUgKGZyb20gYSBwcmV2aW91cyBgQ29tbWFuZGApLCBpdCByZXR1cm5zIHRoYXQgdmFsdWUuXG4qIDIuIE90aGVyd2lzZSwgaXQgdGhyb3dzIGEgYEdyYXBoSW50ZXJydXB0YCB3aXRoIHRoZSBwcm92aWRlZCB2YWx1ZVxuKiAzLiBUaGUgZ3JhcGggY2FuIGJlIHJlc3VtZWQgYnkgcGFzc2luZyBhIGBDb21tYW5kYCB3aXRoIGEgYHJlc3VtZWAgdmFsdWVcbipcbiogQmVjYXVzZSB0aGUgYGludGVycnVwdGAgZnVuY3Rpb24gcHJvcGFnYXRlcyBieSB0aHJvd2luZyBhIHNwZWNpYWwgYEdyYXBoSW50ZXJydXB0YCBlcnJvcixcbiogeW91IHNob3VsZCBhdm9pZCB1c2luZyBgdHJ5L2NhdGNoYCBibG9ja3MgYXJvdW5kIHRoZSBgaW50ZXJydXB0YCBmdW5jdGlvbixcbiogb3IgaWYgeW91IGRvLCBlbnN1cmUgdGhhdCB0aGUgYEdyYXBoSW50ZXJydXB0YCBlcnJvciBpcyB0aHJvd24gYWdhaW4gd2l0aGluIHlvdXIgYGNhdGNoYCBibG9jay5cbipcbiogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIGluY2x1ZGUgaW4gdGhlIGludGVycnVwdC4gVGhpcyB3aWxsIGJlIGF2YWlsYWJsZSBpbiB0YXNrLmludGVycnVwdHNbXS52YWx1ZVxuKiBAcmV0dXJucyBUaGUgYHJlc3VtZWAgdmFsdWUgcHJvdmlkZWQgd2hlbiB0aGUgZ3JhcGggaXMgcmUtaW52b2tlZCB3aXRoIGEgQ29tbWFuZFxuKlxuKiBAZXhhbXBsZVxuKiBgYGB0eXBlc2NyaXB0XG4qIC8vIERlZmluZSBhIG5vZGUgdGhhdCB1c2VzIG11bHRpcGxlIGludGVycnVwdHNcbiogY29uc3Qgbm9kZVdpdGhJbnRlcnJ1cHRzID0gKCkgPT4ge1xuKiAgIC8vIEZpcnN0IGludGVycnVwdCAtIHdpbGwgcGF1c2UgZXhlY3V0aW9uIGFuZCBpbmNsdWRlIHt2YWx1ZTogMX0gaW4gdGFzayB2YWx1ZXNcbiogICBjb25zdCBhbnN3ZXIxID0gaW50ZXJydXB0KHsgdmFsdWU6IDEgfSk7XG4qXG4qICAgLy8gU2Vjb25kIGludGVycnVwdCAtIG9ubHkgY2FsbGVkIGFmdGVyIGZpcnN0IGludGVycnVwdCBpcyByZXN1bWVkXG4qICAgY29uc3QgYW5zd2VyMiA9IGludGVycnVwdCh7IHZhbHVlOiAyIH0pO1xuKlxuKiAgIC8vIFVzZSB0aGUgcmVzdW1lIHZhbHVlc1xuKiAgIHJldHVybiB7IG15S2V5OiBhbnN3ZXIxICsgXCIgXCIgKyBhbnN3ZXIyIH07XG4qIH07XG4qXG4qIC8vIFJlc3VtZSB0aGUgZ3JhcGggYWZ0ZXIgZmlyc3QgaW50ZXJydXB0XG4qIGF3YWl0IGdyYXBoLnN0cmVhbShuZXcgQ29tbWFuZCh7IHJlc3VtZTogXCJhbnN3ZXIgMVwiIH0pKTtcbipcbiogLy8gUmVzdW1lIHRoZSBncmFwaCBhZnRlciBzZWNvbmQgaW50ZXJydXB0XG4qIGF3YWl0IGdyYXBoLnN0cmVhbShuZXcgQ29tbWFuZCh7IHJlc3VtZTogXCJhbnN3ZXIgMlwiIH0pKTtcbiogLy8gRmluYWwgcmVzdWx0OiB7IG15S2V5OiBcImFuc3dlciAxIGFuc3dlciAyXCIgfVxuKiBgYGBcbipcbiogQHRocm93cyB7RXJyb3J9IElmIGNhbGxlZCBvdXRzaWRlIHRoZSBjb250ZXh0IG9mIGEgZ3JhcGhcbiogQHRocm93cyB7R3JhcGhJbnRlcnJ1cHR9IFdoZW4gbm8gcmVzdW1lIHZhbHVlIGlzIGF2YWlsYWJsZVxuKi9cbmZ1bmN0aW9uIGludGVycnVwdCh2YWx1ZSkge1xuXHRjb25zdCBjb25maWcgPSBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLmdldFJ1bm5hYmxlQ29uZmlnKCk7XG5cdGlmICghY29uZmlnKSB0aHJvdyBuZXcgRXJyb3IoXCJDYWxsZWQgaW50ZXJydXB0KCkgb3V0c2lkZSB0aGUgY29udGV4dCBvZiBhIGdyYXBoLlwiKTtcblx0Y29uc3QgY29uZiA9IGNvbmZpZy5jb25maWd1cmFibGU7XG5cdGlmICghY29uZikgdGhyb3cgbmV3IEVycm9yKFwiTm8gY29uZmlndXJhYmxlIGZvdW5kIGluIGNvbmZpZ1wiKTtcblx0aWYgKCFjb25mW0NPTkZJR19LRVlfQ0hFQ0tQT0lOVEVSXSkgdGhyb3cgbmV3IEdyYXBoVmFsdWVFcnJvcihcIk5vIGNoZWNrcG9pbnRlciBzZXRcIiwgeyBsY19lcnJvcl9jb2RlOiBcIk1JU1NJTkdfQ0hFQ0tQT0lOVEVSXCIgfSk7XG5cdGNvbnN0IHNjcmF0Y2hwYWQgPSBjb25mW0NPTkZJR19LRVlfU0NSQVRDSFBBRF07XG5cdHNjcmF0Y2hwYWQuaW50ZXJydXB0Q291bnRlciArPSAxO1xuXHRjb25zdCBpZHggPSBzY3JhdGNocGFkLmludGVycnVwdENvdW50ZXI7XG5cdGlmIChzY3JhdGNocGFkLnJlc3VtZS5sZW5ndGggPiAwICYmIGlkeCA8IHNjcmF0Y2hwYWQucmVzdW1lLmxlbmd0aCkge1xuXHRcdGNvbmZbQ09ORklHX0tFWV9TRU5EXT8uKFtbUkVTVU1FLCBzY3JhdGNocGFkLnJlc3VtZV1dKTtcblx0XHRyZXR1cm4gc2NyYXRjaHBhZC5yZXN1bWVbaWR4XTtcblx0fVxuXHRpZiAoc2NyYXRjaHBhZC5udWxsUmVzdW1lICE9PSB2b2lkIDApIHtcblx0XHRpZiAoc2NyYXRjaHBhZC5yZXN1bWUubGVuZ3RoICE9PSBpZHgpIHRocm93IG5ldyBFcnJvcihgUmVzdW1lIGxlbmd0aCBtaXNtYXRjaDogJHtzY3JhdGNocGFkLnJlc3VtZS5sZW5ndGh9ICE9PSAke2lkeH1gKTtcblx0XHRjb25zdCB2ID0gc2NyYXRjaHBhZC5jb25zdW1lTnVsbFJlc3VtZSgpO1xuXHRcdHNjcmF0Y2hwYWQucmVzdW1lLnB1c2godik7XG5cdFx0Y29uZltDT05GSUdfS0VZX1NFTkRdPy4oW1tSRVNVTUUsIHNjcmF0Y2hwYWQucmVzdW1lXV0pO1xuXHRcdHJldHVybiB2O1xuXHR9XG5cdGNvbnN0IG5zID0gY29uZltDT05GSUdfS0VZX0NIRUNLUE9JTlRfTlNdPy5zcGxpdChDSEVDS1BPSU5UX05BTUVTUEFDRV9TRVBBUkFUT1IpO1xuXHR0aHJvdyBuZXcgR3JhcGhJbnRlcnJ1cHQoW3tcblx0XHRpZDogbnMgPyBYWEgzKG5zLmpvaW4oQ0hFQ0tQT0lOVF9OQU1FU1BBQ0VfU0VQQVJBVE9SKSkgOiB2b2lkIDAsXG5cdFx0dmFsdWVcblx0fV0pO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGludGVycnVwdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJydXB0LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/interrupt.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/pregel/algo.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/pregel/algo.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _applyWrites: () => (/* binding */ _applyWrites),\n/* harmony export */   _localRead: () => (/* binding */ _localRead),\n/* harmony export */   _prepareNextTasks: () => (/* binding */ _prepareNextTasks),\n/* harmony export */   _prepareSingleTask: () => (/* binding */ _prepareSingleTask),\n/* harmony export */   increment: () => (/* binding */ increment),\n/* harmony export */   shouldInterrupt: () => (/* binding */ shouldInterrupt)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _channels_base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../channels/base.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/base.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../constants.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _hash_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../hash.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/hash.js\");\n/* harmony import */ var _io_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./io.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/io.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./types.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/types.js\");\n/* harmony import */ var _utils_index_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils/index.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/utils/index.js\");\n/* harmony import */ var _call_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./call.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/call.js\");\n/* harmony import */ var _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @langchain/langgraph-checkpoint */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/index.js\");\n/* harmony import */ var _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @langchain/core/runnables */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n//#region src/pregel/algo.ts\nconst increment = (current) => {\n\treturn current !== void 0 ? current + 1 : 1;\n};\nfunction triggersNextStep(updatedChannels, triggerToNodes) {\n\tif (triggerToNodes == null) return false;\n\tfor (const chan of updatedChannels) if (triggerToNodes[chan]) return true;\n\treturn false;\n}\nfunction maxChannelMapVersion(channelVersions) {\n\tlet maxVersion;\n\tfor (const chan in channelVersions) {\n\t\tif (!Object.prototype.hasOwnProperty.call(channelVersions, chan)) continue;\n\t\tif (maxVersion == null) maxVersion = channelVersions[chan];\n\t\telse maxVersion = (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_8__.maxChannelVersion)(maxVersion, channelVersions[chan]);\n\t}\n\treturn maxVersion;\n}\nfunction shouldInterrupt(checkpoint, interruptNodes, tasks) {\n\tconst nullVersion = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_6__.getNullChannelVersion)(checkpoint.channel_versions);\n\tconst seen = checkpoint.versions_seen[_constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT] ?? {};\n\tlet anyChannelUpdated = false;\n\tif ((checkpoint.channel_versions[_constants_js__WEBPACK_IMPORTED_MODULE_2__.START] ?? nullVersion) > (seen[_constants_js__WEBPACK_IMPORTED_MODULE_2__.START] ?? nullVersion)) anyChannelUpdated = true;\n\telse for (const chan in checkpoint.channel_versions) {\n\t\tif (!Object.prototype.hasOwnProperty.call(checkpoint.channel_versions, chan)) continue;\n\t\tif (checkpoint.channel_versions[chan] > (seen[chan] ?? nullVersion)) {\n\t\t\tanyChannelUpdated = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\tconst anyTriggeredNodeInInterruptNodes = tasks.some((task) => interruptNodes === \"*\" ? !task.config?.tags?.includes(_constants_js__WEBPACK_IMPORTED_MODULE_2__.TAG_HIDDEN) : interruptNodes.includes(task.name));\n\treturn anyChannelUpdated && anyTriggeredNodeInInterruptNodes;\n}\nfunction _localRead(checkpoint, channels, task, select, fresh = false) {\n\tlet updated = /* @__PURE__ */ new Set();\n\tif (!Array.isArray(select)) {\n\t\tfor (const [c] of task.writes) if (c === select) {\n\t\t\tupdated = new Set([c]);\n\t\t\tbreak;\n\t\t}\n\t\tupdated = updated || /* @__PURE__ */ new Set();\n\t} else updated = new Set(select.filter((c) => task.writes.some(([key, _]) => key === c)));\n\tlet values;\n\tif (fresh && updated.size > 0) {\n\t\tconst localChannels = Object.fromEntries(Object.entries(channels).filter(([k, _]) => updated.has(k)));\n\t\tconst newCheckpoint = (0,_channels_base_js__WEBPACK_IMPORTED_MODULE_1__.createCheckpoint)(checkpoint, localChannels, -1);\n\t\tconst newChannels = (0,_channels_base_js__WEBPACK_IMPORTED_MODULE_1__.emptyChannels)(localChannels, newCheckpoint);\n\t\t_applyWrites((0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_8__.copyCheckpoint)(newCheckpoint), newChannels, [task], void 0, void 0);\n\t\tvalues = (0,_io_js__WEBPACK_IMPORTED_MODULE_4__.readChannels)({\n\t\t\t...channels,\n\t\t\t...newChannels\n\t\t}, select);\n\t} else values = (0,_io_js__WEBPACK_IMPORTED_MODULE_4__.readChannels)(channels, select);\n\treturn values;\n}\nfunction _localWrite(commit, processes, writes) {\n\tfor (const [chan, value] of writes) if ([_constants_js__WEBPACK_IMPORTED_MODULE_2__.PUSH, _constants_js__WEBPACK_IMPORTED_MODULE_2__.TASKS].includes(chan) && value != null) {\n\t\tif (!(0,_constants_js__WEBPACK_IMPORTED_MODULE_2__._isSend)(value)) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(`Invalid packet type, expected SendProtocol, got ${JSON.stringify(value)}`);\n\t\tif (!(value.node in processes)) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(`Invalid node name \"${value.node}\" in Send packet`);\n\t}\n\tcommit(writes);\n}\nconst IGNORE = new Set([\n\t_constants_js__WEBPACK_IMPORTED_MODULE_2__.NO_WRITES,\n\t_constants_js__WEBPACK_IMPORTED_MODULE_2__.PUSH,\n\t_constants_js__WEBPACK_IMPORTED_MODULE_2__.RESUME,\n\t_constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT,\n\t_constants_js__WEBPACK_IMPORTED_MODULE_2__.RETURN,\n\t_constants_js__WEBPACK_IMPORTED_MODULE_2__.ERROR\n]);\nfunction _applyWrites(checkpoint, channels, tasks, getNextVersion, triggerToNodes) {\n\ttasks.sort((a, b) => {\n\t\tconst aPath = a.path?.slice(0, 3) || [];\n\t\tconst bPath = b.path?.slice(0, 3) || [];\n\t\tfor (let i = 0; i < Math.min(aPath.length, bPath.length); i += 1) {\n\t\t\tif (aPath[i] < bPath[i]) return -1;\n\t\t\tif (aPath[i] > bPath[i]) return 1;\n\t\t}\n\t\treturn aPath.length - bPath.length;\n\t});\n\tconst bumpStep = tasks.some((task) => task.triggers.length > 0);\n\tconst onlyChannels = (0,_channels_base_js__WEBPACK_IMPORTED_MODULE_1__.getOnlyChannels)(channels);\n\tfor (const task of tasks) {\n\t\tcheckpoint.versions_seen[task.name] ??= {};\n\t\tfor (const chan of task.triggers) if (chan in checkpoint.channel_versions) checkpoint.versions_seen[task.name][chan] = checkpoint.channel_versions[chan];\n\t}\n\tlet maxVersion = maxChannelMapVersion(checkpoint.channel_versions);\n\tconst channelsToConsume = new Set(tasks.flatMap((task) => task.triggers).filter((chan) => !_constants_js__WEBPACK_IMPORTED_MODULE_2__.RESERVED.includes(chan)));\n\tlet usedNewVersion = false;\n\tfor (const chan of channelsToConsume) if (chan in onlyChannels && onlyChannels[chan].consume()) {\n\t\tif (getNextVersion !== void 0) {\n\t\t\tcheckpoint.channel_versions[chan] = getNextVersion(maxVersion);\n\t\t\tusedNewVersion = true;\n\t\t}\n\t}\n\tconst pendingWritesByChannel = {};\n\tfor (const task of tasks) for (const [chan, val] of task.writes) if (IGNORE.has(chan)) {} else if (chan in onlyChannels) {\n\t\tpendingWritesByChannel[chan] ??= [];\n\t\tpendingWritesByChannel[chan].push(val);\n\t}\n\tif (maxVersion != null && getNextVersion != null) maxVersion = usedNewVersion ? getNextVersion(maxVersion) : maxVersion;\n\tconst updatedChannels = /* @__PURE__ */ new Set();\n\tfor (const [chan, vals] of Object.entries(pendingWritesByChannel)) if (chan in onlyChannels) {\n\t\tconst channel = onlyChannels[chan];\n\t\tlet updated;\n\t\ttry {\n\t\t\tupdated = channel.update(vals);\n\t\t} catch (e) {\n\t\t\tif (e.name === _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError.unminifiable_name) {\n\t\t\t\tconst wrappedError = new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(`Invalid update for channel \"${chan}\" with values ${JSON.stringify(vals)}: ${e.message}`);\n\t\t\t\twrappedError.lc_error_code = e.lc_error_code;\n\t\t\t\tthrow wrappedError;\n\t\t\t} else throw e;\n\t\t}\n\t\tif (updated && getNextVersion !== void 0) {\n\t\t\tcheckpoint.channel_versions[chan] = getNextVersion(maxVersion);\n\t\t\tif (channel.isAvailable()) updatedChannels.add(chan);\n\t\t}\n\t}\n\tif (bumpStep) for (const chan in onlyChannels) {\n\t\tif (!Object.prototype.hasOwnProperty.call(onlyChannels, chan)) continue;\n\t\tconst channel = onlyChannels[chan];\n\t\tif (channel.isAvailable() && !updatedChannels.has(chan)) {\n\t\t\tif (channel.update([]) && getNextVersion !== void 0) {\n\t\t\t\tcheckpoint.channel_versions[chan] = getNextVersion(maxVersion);\n\t\t\t\tif (channel.isAvailable()) updatedChannels.add(chan);\n\t\t\t}\n\t\t}\n\t}\n\tif (bumpStep && !triggersNextStep(updatedChannels, triggerToNodes)) for (const chan in onlyChannels) {\n\t\tif (!Object.prototype.hasOwnProperty.call(onlyChannels, chan)) continue;\n\t\tconst channel = onlyChannels[chan];\n\t\tif (channel.finish() && getNextVersion !== void 0) {\n\t\t\tcheckpoint.channel_versions[chan] = getNextVersion(maxVersion);\n\t\t\tif (channel.isAvailable()) updatedChannels.add(chan);\n\t\t}\n\t}\n\treturn updatedChannels;\n}\nfunction* candidateNodes(checkpoint, processes, extra) {\n\tif (extra.updatedChannels != null && extra.triggerToNodes != null) {\n\t\tconst triggeredNodes = /* @__PURE__ */ new Set();\n\t\tfor (const channel of extra.updatedChannels) {\n\t\t\tconst nodeIds = extra.triggerToNodes[channel];\n\t\t\tfor (const id of nodeIds ?? []) triggeredNodes.add(id);\n\t\t}\n\t\tyield* [...triggeredNodes].sort();\n\t\treturn;\n\t}\n\tif ((() => {\n\t\tfor (const chan in checkpoint.channel_versions) if (checkpoint.channel_versions[chan] !== null) return false;\n\t\treturn true;\n\t})()) return;\n\tfor (const name in processes) {\n\t\tif (!Object.prototype.hasOwnProperty.call(processes, name)) continue;\n\t\tyield name;\n\t}\n}\n/**\n* Prepare the set of tasks that will make up the next Pregel step.\n* This is the union of all PUSH tasks (Sends) and PULL tasks (nodes triggered\n* by edges).\n*/\nfunction _prepareNextTasks(checkpoint, pendingWrites, processes, channels, config, forExecution, extra) {\n\tconst tasks = {};\n\tconst tasksChannel = channels[_constants_js__WEBPACK_IMPORTED_MODULE_2__.TASKS];\n\tif (tasksChannel?.isAvailable()) {\n\t\tconst len = tasksChannel.get().length;\n\t\tfor (let i = 0; i < len; i += 1) {\n\t\t\tconst task = _prepareSingleTask([_constants_js__WEBPACK_IMPORTED_MODULE_2__.PUSH, i], checkpoint, pendingWrites, processes, channels, config, forExecution, extra);\n\t\t\tif (task !== void 0) tasks[task.id] = task;\n\t\t}\n\t}\n\tfor (const name of candidateNodes(checkpoint, processes, extra)) {\n\t\tconst task = _prepareSingleTask([_constants_js__WEBPACK_IMPORTED_MODULE_2__.PULL, name], checkpoint, pendingWrites, processes, channels, config, forExecution, extra);\n\t\tif (task !== void 0) tasks[task.id] = task;\n\t}\n\treturn tasks;\n}\n/**\n* Prepares a single task for the next Pregel step, given a task path, which\n* uniquely identifies a PUSH or PULL task within the graph.\n*/\nfunction _prepareSingleTask(taskPath, checkpoint, pendingWrites, processes, channels, config, forExecution, extra) {\n\tconst { step, checkpointer, manager } = extra;\n\tconst configurable = config.configurable ?? {};\n\tconst parentNamespace = configurable.checkpoint_ns ?? \"\";\n\tif (taskPath[0] === _constants_js__WEBPACK_IMPORTED_MODULE_2__.PUSH && (0,_types_js__WEBPACK_IMPORTED_MODULE_5__.isCall)(taskPath[taskPath.length - 1])) {\n\t\tconst call = taskPath[taskPath.length - 1];\n\t\tconst proc = (0,_call_js__WEBPACK_IMPORTED_MODULE_7__.getRunnableForFunc)(call.name, call.func);\n\t\tconst triggers = [_constants_js__WEBPACK_IMPORTED_MODULE_2__.PUSH];\n\t\tconst checkpointNamespace = parentNamespace === \"\" ? call.name : `${parentNamespace}${_constants_js__WEBPACK_IMPORTED_MODULE_2__.CHECKPOINT_NAMESPACE_SEPARATOR}${call.name}`;\n\t\tconst id = (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_8__.uuid5)(JSON.stringify([\n\t\t\tcheckpointNamespace,\n\t\t\tstep.toString(),\n\t\t\tcall.name,\n\t\t\t_constants_js__WEBPACK_IMPORTED_MODULE_2__.PUSH,\n\t\t\ttaskPath[1],\n\t\t\ttaskPath[2]\n\t\t]), checkpoint.id);\n\t\tconst taskCheckpointNamespace = `${checkpointNamespace}${_constants_js__WEBPACK_IMPORTED_MODULE_2__.CHECKPOINT_NAMESPACE_END}${id}`;\n\t\tconst outputTaskPath = [...taskPath.slice(0, 3), true];\n\t\tconst metadata = {\n\t\t\tlanggraph_step: step,\n\t\t\tlanggraph_node: call.name,\n\t\t\tlanggraph_triggers: triggers,\n\t\t\tlanggraph_path: outputTaskPath,\n\t\t\tlanggraph_checkpoint_ns: taskCheckpointNamespace\n\t\t};\n\t\tif (forExecution) {\n\t\t\tconst writes = [];\n\t\t\treturn {\n\t\t\t\tname: call.name,\n\t\t\t\tinput: call.input,\n\t\t\t\tproc,\n\t\t\t\twrites,\n\t\t\t\tconfig: (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_9__.patchConfig)((0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_9__.mergeConfigs)(config, {\n\t\t\t\t\tmetadata,\n\t\t\t\t\tstore: extra.store ?? config.store\n\t\t\t\t}), {\n\t\t\t\t\trunName: call.name,\n\t\t\t\t\tcallbacks: manager?.getChild(`graph:step:${step}`),\n\t\t\t\t\tconfigurable: {\n\t\t\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_TASK_ID]: id,\n\t\t\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_SEND]: (writes_) => _localWrite((items) => writes.push(...items), processes, writes_),\n\t\t\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_READ]: (select_, fresh_ = false) => _localRead(checkpoint, channels, {\n\t\t\t\t\t\t\tname: call.name,\n\t\t\t\t\t\t\twrites,\n\t\t\t\t\t\t\ttriggers,\n\t\t\t\t\t\t\tpath: outputTaskPath\n\t\t\t\t\t\t}, select_, fresh_),\n\t\t\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINTER]: checkpointer ?? configurable[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINTER],\n\t\t\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINT_MAP]: {\n\t\t\t\t\t\t\t...configurable[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINT_MAP],\n\t\t\t\t\t\t\t[parentNamespace]: checkpoint.id\n\t\t\t\t\t\t},\n\t\t\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_SCRATCHPAD]: _scratchpad({\n\t\t\t\t\t\t\tpendingWrites: pendingWrites ?? [],\n\t\t\t\t\t\t\ttaskId: id,\n\t\t\t\t\t\t\tcurrentTaskInput: call.input,\n\t\t\t\t\t\t\tresumeMap: config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_RESUME_MAP],\n\t\t\t\t\t\t\tnamespaceHash: (0,_hash_js__WEBPACK_IMPORTED_MODULE_3__.XXH3)(taskCheckpointNamespace)\n\t\t\t\t\t\t}),\n\t\t\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_PREVIOUS_STATE]: checkpoint.channel_values[_constants_js__WEBPACK_IMPORTED_MODULE_2__.PREVIOUS],\n\t\t\t\t\t\tcheckpoint_id: void 0,\n\t\t\t\t\t\tcheckpoint_ns: taskCheckpointNamespace\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\ttriggers,\n\t\t\t\tretry_policy: call.retry,\n\t\t\t\tcache_key: call.cache ? {\n\t\t\t\t\tkey: (0,_hash_js__WEBPACK_IMPORTED_MODULE_3__.XXH3)((call.cache.keyFunc ?? JSON.stringify)([call.input])),\n\t\t\t\t\tns: [_constants_js__WEBPACK_IMPORTED_MODULE_2__.CACHE_NS_WRITES, call.name ?? \"__dynamic__\"],\n\t\t\t\t\tttl: call.cache.ttl\n\t\t\t\t} : void 0,\n\t\t\t\tid,\n\t\t\t\tpath: outputTaskPath,\n\t\t\t\twriters: []\n\t\t\t};\n\t\t} else return {\n\t\t\tid,\n\t\t\tname: call.name,\n\t\t\tinterrupts: [],\n\t\t\tpath: outputTaskPath\n\t\t};\n\t} else if (taskPath[0] === _constants_js__WEBPACK_IMPORTED_MODULE_2__.PUSH) {\n\t\tconst index = typeof taskPath[1] === \"number\" ? taskPath[1] : parseInt(taskPath[1], 10);\n\t\tif (!channels[_constants_js__WEBPACK_IMPORTED_MODULE_2__.TASKS]?.isAvailable()) return;\n\t\tconst sends = channels[_constants_js__WEBPACK_IMPORTED_MODULE_2__.TASKS].get();\n\t\tif (index < 0 || index >= sends.length) return;\n\t\tconst packet = (0,_constants_js__WEBPACK_IMPORTED_MODULE_2__._isSendInterface)(sends[index]) && !(0,_constants_js__WEBPACK_IMPORTED_MODULE_2__._isSend)(sends[index]) ? new _constants_js__WEBPACK_IMPORTED_MODULE_2__.Send(sends[index].node, sends[index].args) : sends[index];\n\t\tif (!(0,_constants_js__WEBPACK_IMPORTED_MODULE_2__._isSendInterface)(packet)) {\n\t\t\tconsole.warn(`Ignoring invalid packet ${JSON.stringify(packet)} in pending sends.`);\n\t\t\treturn;\n\t\t}\n\t\tif (!(packet.node in processes)) {\n\t\t\tconsole.warn(`Ignoring unknown node name ${packet.node} in pending sends.`);\n\t\t\treturn;\n\t\t}\n\t\tconst triggers = [_constants_js__WEBPACK_IMPORTED_MODULE_2__.PUSH];\n\t\tconst checkpointNamespace = parentNamespace === \"\" ? packet.node : `${parentNamespace}${_constants_js__WEBPACK_IMPORTED_MODULE_2__.CHECKPOINT_NAMESPACE_SEPARATOR}${packet.node}`;\n\t\tconst taskId = (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_8__.uuid5)(JSON.stringify([\n\t\t\tcheckpointNamespace,\n\t\t\tstep.toString(),\n\t\t\tpacket.node,\n\t\t\t_constants_js__WEBPACK_IMPORTED_MODULE_2__.PUSH,\n\t\t\tindex.toString()\n\t\t]), checkpoint.id);\n\t\tconst taskCheckpointNamespace = `${checkpointNamespace}${_constants_js__WEBPACK_IMPORTED_MODULE_2__.CHECKPOINT_NAMESPACE_END}${taskId}`;\n\t\tlet metadata = {\n\t\t\tlanggraph_step: step,\n\t\t\tlanggraph_node: packet.node,\n\t\t\tlanggraph_triggers: triggers,\n\t\t\tlanggraph_path: taskPath.slice(0, 3),\n\t\t\tlanggraph_checkpoint_ns: taskCheckpointNamespace\n\t\t};\n\t\tif (forExecution) {\n\t\t\tconst proc = processes[packet.node];\n\t\t\tconst node = proc.getNode();\n\t\t\tif (node !== void 0) {\n\t\t\t\tif (proc.metadata !== void 0) metadata = {\n\t\t\t\t\t...metadata,\n\t\t\t\t\t...proc.metadata\n\t\t\t\t};\n\t\t\t\tconst writes = [];\n\t\t\t\treturn {\n\t\t\t\t\tname: packet.node,\n\t\t\t\t\tinput: packet.args,\n\t\t\t\t\tproc: node,\n\t\t\t\t\tsubgraphs: proc.subgraphs,\n\t\t\t\t\twrites,\n\t\t\t\t\tconfig: (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_9__.patchConfig)((0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_9__.mergeConfigs)(config, {\n\t\t\t\t\t\tmetadata,\n\t\t\t\t\t\ttags: proc.tags,\n\t\t\t\t\t\tstore: extra.store ?? config.store\n\t\t\t\t\t}), {\n\t\t\t\t\t\trunName: packet.node,\n\t\t\t\t\t\tcallbacks: manager?.getChild(`graph:step:${step}`),\n\t\t\t\t\t\tconfigurable: {\n\t\t\t\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_TASK_ID]: taskId,\n\t\t\t\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_SEND]: (writes_) => _localWrite((items) => writes.push(...items), processes, writes_),\n\t\t\t\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_READ]: (select_, fresh_ = false) => _localRead(checkpoint, channels, {\n\t\t\t\t\t\t\t\tname: packet.node,\n\t\t\t\t\t\t\t\twrites,\n\t\t\t\t\t\t\t\ttriggers,\n\t\t\t\t\t\t\t\tpath: taskPath\n\t\t\t\t\t\t\t}, select_, fresh_),\n\t\t\t\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINTER]: checkpointer ?? configurable[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINTER],\n\t\t\t\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINT_MAP]: {\n\t\t\t\t\t\t\t\t...configurable[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINT_MAP],\n\t\t\t\t\t\t\t\t[parentNamespace]: checkpoint.id\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_SCRATCHPAD]: _scratchpad({\n\t\t\t\t\t\t\t\tpendingWrites: pendingWrites ?? [],\n\t\t\t\t\t\t\t\ttaskId,\n\t\t\t\t\t\t\t\tcurrentTaskInput: packet.args,\n\t\t\t\t\t\t\t\tresumeMap: config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_RESUME_MAP],\n\t\t\t\t\t\t\t\tnamespaceHash: (0,_hash_js__WEBPACK_IMPORTED_MODULE_3__.XXH3)(taskCheckpointNamespace)\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_PREVIOUS_STATE]: checkpoint.channel_values[_constants_js__WEBPACK_IMPORTED_MODULE_2__.PREVIOUS],\n\t\t\t\t\t\t\tcheckpoint_id: void 0,\n\t\t\t\t\t\t\tcheckpoint_ns: taskCheckpointNamespace\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\ttriggers,\n\t\t\t\t\tretry_policy: proc.retryPolicy,\n\t\t\t\t\tcache_key: proc.cachePolicy ? {\n\t\t\t\t\t\tkey: (0,_hash_js__WEBPACK_IMPORTED_MODULE_3__.XXH3)((proc.cachePolicy.keyFunc ?? JSON.stringify)([packet.args])),\n\t\t\t\t\t\tns: [\n\t\t\t\t\t\t\t_constants_js__WEBPACK_IMPORTED_MODULE_2__.CACHE_NS_WRITES,\n\t\t\t\t\t\t\tproc.name ?? \"__dynamic__\",\n\t\t\t\t\t\t\tpacket.node\n\t\t\t\t\t\t],\n\t\t\t\t\t\tttl: proc.cachePolicy.ttl\n\t\t\t\t\t} : void 0,\n\t\t\t\t\tid: taskId,\n\t\t\t\t\tpath: taskPath,\n\t\t\t\t\twriters: proc.getWriters()\n\t\t\t\t};\n\t\t\t}\n\t\t} else return {\n\t\t\tid: taskId,\n\t\t\tname: packet.node,\n\t\t\tinterrupts: [],\n\t\t\tpath: taskPath\n\t\t};\n\t} else if (taskPath[0] === _constants_js__WEBPACK_IMPORTED_MODULE_2__.PULL) {\n\t\tconst name = taskPath[1].toString();\n\t\tconst proc = processes[name];\n\t\tif (proc === void 0) return;\n\t\tif (pendingWrites?.length) {\n\t\t\tconst checkpointNamespace = parentNamespace === \"\" ? name : `${parentNamespace}${_constants_js__WEBPACK_IMPORTED_MODULE_2__.CHECKPOINT_NAMESPACE_SEPARATOR}${name}`;\n\t\t\tconst taskId = (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_8__.uuid5)(JSON.stringify([\n\t\t\t\tcheckpointNamespace,\n\t\t\t\tstep.toString(),\n\t\t\t\tname,\n\t\t\t\t_constants_js__WEBPACK_IMPORTED_MODULE_2__.PULL,\n\t\t\t\tname\n\t\t\t]), checkpoint.id);\n\t\t\tif (pendingWrites.some((w) => w[0] === taskId && w[1] !== _constants_js__WEBPACK_IMPORTED_MODULE_2__.ERROR)) return;\n\t\t}\n\t\tconst nullVersion = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_6__.getNullChannelVersion)(checkpoint.channel_versions);\n\t\tif (nullVersion === void 0) return;\n\t\tconst seen = checkpoint.versions_seen[name] ?? {};\n\t\tconst trigger = proc.triggers.find((chan) => {\n\t\t\tif (!channels[chan].isAvailable()) return false;\n\t\t\treturn (checkpoint.channel_versions[chan] ?? nullVersion) > (seen[chan] ?? nullVersion);\n\t\t});\n\t\tif (trigger !== void 0) {\n\t\t\tconst val = _procInput(proc, channels, forExecution);\n\t\t\tif (val === void 0) return;\n\t\t\tconst checkpointNamespace = parentNamespace === \"\" ? name : `${parentNamespace}${_constants_js__WEBPACK_IMPORTED_MODULE_2__.CHECKPOINT_NAMESPACE_SEPARATOR}${name}`;\n\t\t\tconst taskId = (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_8__.uuid5)(JSON.stringify([\n\t\t\t\tcheckpointNamespace,\n\t\t\t\tstep.toString(),\n\t\t\t\tname,\n\t\t\t\t_constants_js__WEBPACK_IMPORTED_MODULE_2__.PULL,\n\t\t\t\t[trigger]\n\t\t\t]), checkpoint.id);\n\t\t\tconst taskCheckpointNamespace = `${checkpointNamespace}${_constants_js__WEBPACK_IMPORTED_MODULE_2__.CHECKPOINT_NAMESPACE_END}${taskId}`;\n\t\t\tlet metadata = {\n\t\t\t\tlanggraph_step: step,\n\t\t\t\tlanggraph_node: name,\n\t\t\t\tlanggraph_triggers: [trigger],\n\t\t\t\tlanggraph_path: taskPath,\n\t\t\t\tlanggraph_checkpoint_ns: taskCheckpointNamespace\n\t\t\t};\n\t\t\tif (forExecution) {\n\t\t\t\tconst node = proc.getNode();\n\t\t\t\tif (node !== void 0) {\n\t\t\t\t\tif (proc.metadata !== void 0) metadata = {\n\t\t\t\t\t\t...metadata,\n\t\t\t\t\t\t...proc.metadata\n\t\t\t\t\t};\n\t\t\t\t\tconst writes = [];\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tinput: val,\n\t\t\t\t\t\tproc: node,\n\t\t\t\t\t\tsubgraphs: proc.subgraphs,\n\t\t\t\t\t\twrites,\n\t\t\t\t\t\tconfig: (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_9__.patchConfig)((0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_9__.mergeConfigs)(config, {\n\t\t\t\t\t\t\tmetadata,\n\t\t\t\t\t\t\ttags: proc.tags,\n\t\t\t\t\t\t\tstore: extra.store ?? config.store\n\t\t\t\t\t\t}), {\n\t\t\t\t\t\t\trunName: name,\n\t\t\t\t\t\t\tcallbacks: manager?.getChild(`graph:step:${step}`),\n\t\t\t\t\t\t\tconfigurable: {\n\t\t\t\t\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_TASK_ID]: taskId,\n\t\t\t\t\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_SEND]: (writes_) => _localWrite((items) => {\n\t\t\t\t\t\t\t\t\twrites.push(...items);\n\t\t\t\t\t\t\t\t}, processes, writes_),\n\t\t\t\t\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_READ]: (select_, fresh_ = false) => _localRead(checkpoint, channels, {\n\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\twrites,\n\t\t\t\t\t\t\t\t\ttriggers: [trigger],\n\t\t\t\t\t\t\t\t\tpath: taskPath\n\t\t\t\t\t\t\t\t}, select_, fresh_),\n\t\t\t\t\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINTER]: checkpointer ?? configurable[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINTER],\n\t\t\t\t\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINT_MAP]: {\n\t\t\t\t\t\t\t\t\t...configurable[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINT_MAP],\n\t\t\t\t\t\t\t\t\t[parentNamespace]: checkpoint.id\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_SCRATCHPAD]: _scratchpad({\n\t\t\t\t\t\t\t\t\tpendingWrites: pendingWrites ?? [],\n\t\t\t\t\t\t\t\t\ttaskId,\n\t\t\t\t\t\t\t\t\tcurrentTaskInput: val,\n\t\t\t\t\t\t\t\t\tresumeMap: config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_RESUME_MAP],\n\t\t\t\t\t\t\t\t\tnamespaceHash: (0,_hash_js__WEBPACK_IMPORTED_MODULE_3__.XXH3)(taskCheckpointNamespace)\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_PREVIOUS_STATE]: checkpoint.channel_values[_constants_js__WEBPACK_IMPORTED_MODULE_2__.PREVIOUS],\n\t\t\t\t\t\t\t\tcheckpoint_id: void 0,\n\t\t\t\t\t\t\t\tcheckpoint_ns: taskCheckpointNamespace\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}),\n\t\t\t\t\t\ttriggers: [trigger],\n\t\t\t\t\t\tretry_policy: proc.retryPolicy,\n\t\t\t\t\t\tcache_key: proc.cachePolicy ? {\n\t\t\t\t\t\t\tkey: (0,_hash_js__WEBPACK_IMPORTED_MODULE_3__.XXH3)((proc.cachePolicy.keyFunc ?? JSON.stringify)([val])),\n\t\t\t\t\t\t\tns: [\n\t\t\t\t\t\t\t\t_constants_js__WEBPACK_IMPORTED_MODULE_2__.CACHE_NS_WRITES,\n\t\t\t\t\t\t\t\tproc.name ?? \"__dynamic__\",\n\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tttl: proc.cachePolicy.ttl\n\t\t\t\t\t\t} : void 0,\n\t\t\t\t\t\tid: taskId,\n\t\t\t\t\t\tpath: taskPath,\n\t\t\t\t\t\twriters: proc.getWriters()\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} else return {\n\t\t\t\tid: taskId,\n\t\t\t\tname,\n\t\t\t\tinterrupts: [],\n\t\t\t\tpath: taskPath\n\t\t\t};\n\t\t}\n\t}\n}\n/**\n*  Function injected under CONFIG_KEY_READ in task config, to read current state.\n*  Used by conditional edges to read a copy of the state with reflecting the writes\n*  from that node only.\n*\n* @internal\n*/\nfunction _procInput(proc, channels, forExecution) {\n\tlet val;\n\tif (typeof proc.channels === \"object\" && !Array.isArray(proc.channels)) {\n\t\tval = {};\n\t\tfor (const [k, chan] of Object.entries(proc.channels)) if (proc.triggers.includes(chan)) try {\n\t\t\tval[k] = (0,_io_js__WEBPACK_IMPORTED_MODULE_4__.readChannel)(channels, chan, false);\n\t\t} catch (e) {\n\t\t\tif (e.name === _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError.unminifiable_name) return;\n\t\t\telse throw e;\n\t\t}\n\t\telse if (chan in channels) try {\n\t\t\tval[k] = (0,_io_js__WEBPACK_IMPORTED_MODULE_4__.readChannel)(channels, chan, false);\n\t\t} catch (e) {\n\t\t\tif (e.name === _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError.unminifiable_name) continue;\n\t\t\telse throw e;\n\t\t}\n\t} else if (Array.isArray(proc.channels)) {\n\t\tlet successfulRead = false;\n\t\tfor (const chan of proc.channels) try {\n\t\t\tval = (0,_io_js__WEBPACK_IMPORTED_MODULE_4__.readChannel)(channels, chan, false);\n\t\t\tsuccessfulRead = true;\n\t\t\tbreak;\n\t\t} catch (e) {\n\t\t\tif (e.name === _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError.unminifiable_name) continue;\n\t\t\telse throw e;\n\t\t}\n\t\tif (!successfulRead) return;\n\t} else throw new Error(`Invalid channels type, expected list or dict, got ${proc.channels}`);\n\tif (forExecution && proc.mapper !== void 0) val = proc.mapper(val);\n\treturn val;\n}\nfunction _scratchpad({ pendingWrites, taskId, currentTaskInput, resumeMap, namespaceHash }) {\n\tconst nullResume = pendingWrites.find(([writeTaskId, chan]) => writeTaskId === _constants_js__WEBPACK_IMPORTED_MODULE_2__.NULL_TASK_ID && chan === _constants_js__WEBPACK_IMPORTED_MODULE_2__.RESUME)?.[2];\n\tconst scratchpad = {\n\t\tcallCounter: 0,\n\t\tinterruptCounter: -1,\n\t\tresume: (() => {\n\t\t\tconst result = pendingWrites.filter(([writeTaskId, chan]) => writeTaskId === taskId && chan === _constants_js__WEBPACK_IMPORTED_MODULE_2__.RESUME).flatMap(([_writeTaskId, _chan, resume]) => resume);\n\t\t\tif (resumeMap != null && namespaceHash in resumeMap) {\n\t\t\t\tconst mappedResume = resumeMap[namespaceHash];\n\t\t\t\tresult.push(mappedResume);\n\t\t\t}\n\t\t\treturn result;\n\t\t})(),\n\t\tnullResume,\n\t\tsubgraphCounter: 0,\n\t\tcurrentTaskInput,\n\t\tconsumeNullResume: () => {\n\t\t\tif (scratchpad.nullResume) {\n\t\t\t\tdelete scratchpad.nullResume;\n\t\t\t\tpendingWrites.splice(pendingWrites.findIndex(([writeTaskId, chan]) => writeTaskId === _constants_js__WEBPACK_IMPORTED_MODULE_2__.NULL_TASK_ID && chan === _constants_js__WEBPACK_IMPORTED_MODULE_2__.RESUME), 1);\n\t\t\t\treturn nullResume;\n\t\t\t}\n\t\t}\n\t};\n\treturn scratchpad;\n}\n\n//#endregion\n\n//# sourceMappingURL=algo.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvYWxnby5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXFFO0FBQ2tCO0FBQzhWO0FBQ25aO0FBQ2tCO0FBQ2hCO0FBQ3FCO0FBQ1Y7QUFDNEM7QUFDckI7O0FBRXRFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isa0ZBQWlCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHNFQUFxQjtBQUMxQyx1Q0FBdUMsb0RBQVM7QUFDaEQ7QUFDQSxrQ0FBa0MsZ0RBQUssMEJBQTBCLGdEQUFLO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUhBQXFILHFEQUFVO0FBQy9IO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixtRUFBZ0I7QUFDeEMsc0JBQXNCLGdFQUFhO0FBQ25DLGVBQWUsK0VBQWM7QUFDN0IsV0FBVyxvREFBWTtBQUN2QjtBQUNBO0FBQ0EsR0FBRztBQUNILEdBQUcsY0FBYyxvREFBWTtBQUM3QjtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsK0NBQUksRUFBRSxnREFBSztBQUNyRCxPQUFPLHNEQUFPLG1CQUFtQiwwREFBa0Isb0RBQW9ELHNCQUFzQjtBQUM3SCw0Q0FBNEMsMERBQWtCLHVCQUF1QixXQUFXO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxvREFBUztBQUNWLENBQUMsK0NBQUk7QUFDTCxDQUFDLGlEQUFNO0FBQ1AsQ0FBQyxvREFBUztBQUNWLENBQUMsaURBQU07QUFDUCxDQUFDLGdEQUFLO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwwQ0FBMEM7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxzQkFBc0Isa0VBQWU7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRGQUE0RixtREFBUTtBQUNwRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkZBQTJGO0FBQzNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLGtCQUFrQiwwREFBa0I7QUFDcEMsNkJBQTZCLDBEQUFrQixnQ0FBZ0MsS0FBSyxnQkFBZ0IscUJBQXFCLElBQUksVUFBVTtBQUN2STtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsZ0RBQUs7QUFDcEM7QUFDQTtBQUNBLGtCQUFrQixTQUFTO0FBQzNCLG9DQUFvQywrQ0FBSTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQywrQ0FBSTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDhCQUE4QjtBQUN2QztBQUNBO0FBQ0EscUJBQXFCLCtDQUFJLElBQUksaURBQU07QUFDbkM7QUFDQSxlQUFlLDREQUFrQjtBQUNqQyxvQkFBb0IsK0NBQUk7QUFDeEIsc0VBQXNFLGdCQUFnQixFQUFFLHlFQUE4QixDQUFDLEVBQUUsVUFBVTtBQUNuSSxhQUFhLHNFQUFLO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLEdBQUcsK0NBQUk7QUFDUDtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsb0JBQW9CLEVBQUUsbUVBQXdCLENBQUMsRUFBRSxHQUFHO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksc0VBQVcsQ0FBQyx1RUFBWTtBQUNwQztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsZ0RBQWdELEtBQUs7QUFDckQ7QUFDQSxPQUFPLDZEQUFrQjtBQUN6QixPQUFPLDBEQUFlO0FBQ3RCLE9BQU8sMERBQWU7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsT0FBTyxrRUFBdUIsZ0NBQWdDLGtFQUF1QjtBQUNyRixPQUFPLG9FQUF5QjtBQUNoQyx1QkFBdUIsb0VBQXlCO0FBQ2hEO0FBQ0EsT0FBTztBQUNQLE9BQU8sZ0VBQXFCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxnRUFBcUI7QUFDN0Qsc0JBQXNCLDhDQUFJO0FBQzFCLE9BQU87QUFDUCxPQUFPLG9FQUF5Qiw2QkFBNkIsbURBQVE7QUFDckU7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFVBQVUsOENBQUk7QUFDZCxVQUFVLDBEQUFlO0FBQ3pCO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLHlCQUF5QiwrQ0FBSTtBQUNoQztBQUNBLGdCQUFnQixnREFBSztBQUNyQix5QkFBeUIsZ0RBQUs7QUFDOUI7QUFDQSxpQkFBaUIsK0RBQWdCLG1CQUFtQixzREFBTyxxQkFBcUIsK0NBQUk7QUFDcEYsT0FBTywrREFBZ0I7QUFDdkIsMkNBQTJDLHdCQUF3QjtBQUNuRTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsYUFBYTtBQUMzRDtBQUNBO0FBQ0Esb0JBQW9CLCtDQUFJO0FBQ3hCLHdFQUF3RSxnQkFBZ0IsRUFBRSx5RUFBOEIsQ0FBQyxFQUFFLFlBQVk7QUFDdkksaUJBQWlCLHNFQUFLO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLEdBQUcsK0NBQUk7QUFDUDtBQUNBO0FBQ0EscUNBQXFDLG9CQUFvQixFQUFFLG1FQUF3QixDQUFDLEVBQUUsT0FBTztBQUM3RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsc0VBQVcsQ0FBQyx1RUFBWTtBQUNyQztBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxpREFBaUQsS0FBSztBQUN0RDtBQUNBLFFBQVEsNkRBQWtCO0FBQzFCLFFBQVEsMERBQWU7QUFDdkIsUUFBUSwwREFBZTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUixRQUFRLGtFQUF1QixnQ0FBZ0Msa0VBQXVCO0FBQ3RGLFFBQVEsb0VBQXlCO0FBQ2pDLHdCQUF3QixvRUFBeUI7QUFDakQ7QUFDQSxRQUFRO0FBQ1IsUUFBUSxnRUFBcUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLGdFQUFxQjtBQUM5RCx1QkFBdUIsOENBQUk7QUFDM0IsUUFBUTtBQUNSLFFBQVEsb0VBQXlCLDZCQUE2QixtREFBUTtBQUN0RTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsV0FBVyw4Q0FBSTtBQUNmO0FBQ0EsT0FBTywwREFBZTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLHlCQUF5QiwrQ0FBSTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSxnQkFBZ0IsRUFBRSx5RUFBOEIsQ0FBQyxFQUFFLEtBQUs7QUFDMUgsa0JBQWtCLHNFQUFLO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLElBQUksK0NBQUk7QUFDUjtBQUNBO0FBQ0EsNkRBQTZELGdEQUFLO0FBQ2xFO0FBQ0Esc0JBQXNCLHNFQUFxQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSxnQkFBZ0IsRUFBRSx5RUFBOEIsQ0FBQyxFQUFFLEtBQUs7QUFDMUgsa0JBQWtCLHNFQUFLO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLElBQUksK0NBQUk7QUFDUjtBQUNBO0FBQ0Esc0NBQXNDLG9CQUFvQixFQUFFLG1FQUF3QixDQUFDLEVBQUUsT0FBTztBQUM5RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHNFQUFXLENBQUMsdUVBQVk7QUFDdEM7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0Esa0RBQWtELEtBQUs7QUFDdkQ7QUFDQSxTQUFTLDZEQUFrQjtBQUMzQixTQUFTLDBEQUFlO0FBQ3hCO0FBQ0EsU0FBUztBQUNULFNBQVMsMERBQWU7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsU0FBUyxrRUFBdUIsZ0NBQWdDLGtFQUF1QjtBQUN2RixTQUFTLG9FQUF5QjtBQUNsQyx5QkFBeUIsb0VBQXlCO0FBQ2xEO0FBQ0EsU0FBUztBQUNULFNBQVMsZ0VBQXFCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxnRUFBcUI7QUFDL0Qsd0JBQXdCLDhDQUFJO0FBQzVCLFNBQVM7QUFDVCxTQUFTLG9FQUF5Qiw2QkFBNkIsbURBQVE7QUFDdkU7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFlBQVksOENBQUk7QUFDaEI7QUFDQSxRQUFRLDBEQUFlO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksbURBQVc7QUFDdkIsSUFBSTtBQUNKLGtCQUFrQix5REFBaUI7QUFDbkM7QUFDQTtBQUNBO0FBQ0EsWUFBWSxtREFBVztBQUN2QixJQUFJO0FBQ0osa0JBQWtCLHlEQUFpQjtBQUNuQztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxTQUFTLG1EQUFXO0FBQ3BCO0FBQ0E7QUFDQSxJQUFJO0FBQ0osa0JBQWtCLHlEQUFpQjtBQUNuQztBQUNBO0FBQ0E7QUFDQSxHQUFHLDBFQUEwRSxjQUFjO0FBQzNGO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixtRUFBbUU7QUFDMUYsZ0ZBQWdGLHVEQUFZLGFBQWEsaURBQU07QUFDL0c7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtR0FBbUcsaURBQU07QUFDekc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwRkFBMEYsdURBQVksYUFBYSxpREFBTTtBQUN6SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDdUc7QUFDdkciLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC9hbGdvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVtcHR5Q2hhbm5lbEVycm9yLCBJbnZhbGlkVXBkYXRlRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVDaGVja3BvaW50LCBlbXB0eUNoYW5uZWxzLCBnZXRPbmx5Q2hhbm5lbHMgfSBmcm9tIFwiLi4vY2hhbm5lbHMvYmFzZS5qc1wiO1xuaW1wb3J0IHsgQ0FDSEVfTlNfV1JJVEVTLCBDSEVDS1BPSU5UX05BTUVTUEFDRV9FTkQsIENIRUNLUE9JTlRfTkFNRVNQQUNFX1NFUEFSQVRPUiwgQ09ORklHX0tFWV9DSEVDS1BPSU5URVIsIENPTkZJR19LRVlfQ0hFQ0tQT0lOVF9NQVAsIENPTkZJR19LRVlfUFJFVklPVVNfU1RBVEUsIENPTkZJR19LRVlfUkVBRCwgQ09ORklHX0tFWV9SRVNVTUVfTUFQLCBDT05GSUdfS0VZX1NDUkFUQ0hQQUQsIENPTkZJR19LRVlfU0VORCwgQ09ORklHX0tFWV9UQVNLX0lELCBFUlJPUiwgSU5URVJSVVBULCBOT19XUklURVMsIE5VTExfVEFTS19JRCwgUFJFVklPVVMsIFBVTEwsIFBVU0gsIFJFU0VSVkVELCBSRVNVTUUsIFJFVFVSTiwgU1RBUlQsIFNlbmQsIFRBR19ISURERU4sIFRBU0tTLCBfaXNTZW5kLCBfaXNTZW5kSW50ZXJmYWNlIH0gZnJvbSBcIi4uL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgWFhIMyB9IGZyb20gXCIuLi9oYXNoLmpzXCI7XG5pbXBvcnQgeyByZWFkQ2hhbm5lbCwgcmVhZENoYW5uZWxzIH0gZnJvbSBcIi4vaW8uanNcIjtcbmltcG9ydCB7IGlzQ2FsbCB9IGZyb20gXCIuL3R5cGVzLmpzXCI7XG5pbXBvcnQgeyBnZXROdWxsQ2hhbm5lbFZlcnNpb24gfSBmcm9tIFwiLi91dGlscy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgZ2V0UnVubmFibGVGb3JGdW5jIH0gZnJvbSBcIi4vY2FsbC5qc1wiO1xuaW1wb3J0IHsgY29weUNoZWNrcG9pbnQsIG1heENoYW5uZWxWZXJzaW9uLCB1dWlkNSB9IGZyb20gXCJAbGFuZ2NoYWluL2xhbmdncmFwaC1jaGVja3BvaW50XCI7XG5pbXBvcnQgeyBtZXJnZUNvbmZpZ3MsIHBhdGNoQ29uZmlnIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9ydW5uYWJsZXNcIjtcblxuLy8jcmVnaW9uIHNyYy9wcmVnZWwvYWxnby50c1xuY29uc3QgaW5jcmVtZW50ID0gKGN1cnJlbnQpID0+IHtcblx0cmV0dXJuIGN1cnJlbnQgIT09IHZvaWQgMCA/IGN1cnJlbnQgKyAxIDogMTtcbn07XG5mdW5jdGlvbiB0cmlnZ2Vyc05leHRTdGVwKHVwZGF0ZWRDaGFubmVscywgdHJpZ2dlclRvTm9kZXMpIHtcblx0aWYgKHRyaWdnZXJUb05vZGVzID09IG51bGwpIHJldHVybiBmYWxzZTtcblx0Zm9yIChjb25zdCBjaGFuIG9mIHVwZGF0ZWRDaGFubmVscykgaWYgKHRyaWdnZXJUb05vZGVzW2NoYW5dKSByZXR1cm4gdHJ1ZTtcblx0cmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gbWF4Q2hhbm5lbE1hcFZlcnNpb24oY2hhbm5lbFZlcnNpb25zKSB7XG5cdGxldCBtYXhWZXJzaW9uO1xuXHRmb3IgKGNvbnN0IGNoYW4gaW4gY2hhbm5lbFZlcnNpb25zKSB7XG5cdFx0aWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoY2hhbm5lbFZlcnNpb25zLCBjaGFuKSkgY29udGludWU7XG5cdFx0aWYgKG1heFZlcnNpb24gPT0gbnVsbCkgbWF4VmVyc2lvbiA9IGNoYW5uZWxWZXJzaW9uc1tjaGFuXTtcblx0XHRlbHNlIG1heFZlcnNpb24gPSBtYXhDaGFubmVsVmVyc2lvbihtYXhWZXJzaW9uLCBjaGFubmVsVmVyc2lvbnNbY2hhbl0pO1xuXHR9XG5cdHJldHVybiBtYXhWZXJzaW9uO1xufVxuZnVuY3Rpb24gc2hvdWxkSW50ZXJydXB0KGNoZWNrcG9pbnQsIGludGVycnVwdE5vZGVzLCB0YXNrcykge1xuXHRjb25zdCBudWxsVmVyc2lvbiA9IGdldE51bGxDaGFubmVsVmVyc2lvbihjaGVja3BvaW50LmNoYW5uZWxfdmVyc2lvbnMpO1xuXHRjb25zdCBzZWVuID0gY2hlY2twb2ludC52ZXJzaW9uc19zZWVuW0lOVEVSUlVQVF0gPz8ge307XG5cdGxldCBhbnlDaGFubmVsVXBkYXRlZCA9IGZhbHNlO1xuXHRpZiAoKGNoZWNrcG9pbnQuY2hhbm5lbF92ZXJzaW9uc1tTVEFSVF0gPz8gbnVsbFZlcnNpb24pID4gKHNlZW5bU1RBUlRdID8/IG51bGxWZXJzaW9uKSkgYW55Q2hhbm5lbFVwZGF0ZWQgPSB0cnVlO1xuXHRlbHNlIGZvciAoY29uc3QgY2hhbiBpbiBjaGVja3BvaW50LmNoYW5uZWxfdmVyc2lvbnMpIHtcblx0XHRpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChjaGVja3BvaW50LmNoYW5uZWxfdmVyc2lvbnMsIGNoYW4pKSBjb250aW51ZTtcblx0XHRpZiAoY2hlY2twb2ludC5jaGFubmVsX3ZlcnNpb25zW2NoYW5dID4gKHNlZW5bY2hhbl0gPz8gbnVsbFZlcnNpb24pKSB7XG5cdFx0XHRhbnlDaGFubmVsVXBkYXRlZCA9IHRydWU7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdH1cblx0Y29uc3QgYW55VHJpZ2dlcmVkTm9kZUluSW50ZXJydXB0Tm9kZXMgPSB0YXNrcy5zb21lKCh0YXNrKSA9PiBpbnRlcnJ1cHROb2RlcyA9PT0gXCIqXCIgPyAhdGFzay5jb25maWc/LnRhZ3M/LmluY2x1ZGVzKFRBR19ISURERU4pIDogaW50ZXJydXB0Tm9kZXMuaW5jbHVkZXModGFzay5uYW1lKSk7XG5cdHJldHVybiBhbnlDaGFubmVsVXBkYXRlZCAmJiBhbnlUcmlnZ2VyZWROb2RlSW5JbnRlcnJ1cHROb2Rlcztcbn1cbmZ1bmN0aW9uIF9sb2NhbFJlYWQoY2hlY2twb2ludCwgY2hhbm5lbHMsIHRhc2ssIHNlbGVjdCwgZnJlc2ggPSBmYWxzZSkge1xuXHRsZXQgdXBkYXRlZCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG5cdGlmICghQXJyYXkuaXNBcnJheShzZWxlY3QpKSB7XG5cdFx0Zm9yIChjb25zdCBbY10gb2YgdGFzay53cml0ZXMpIGlmIChjID09PSBzZWxlY3QpIHtcblx0XHRcdHVwZGF0ZWQgPSBuZXcgU2V0KFtjXSk7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdFx0dXBkYXRlZCA9IHVwZGF0ZWQgfHwgLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcblx0fSBlbHNlIHVwZGF0ZWQgPSBuZXcgU2V0KHNlbGVjdC5maWx0ZXIoKGMpID0+IHRhc2sud3JpdGVzLnNvbWUoKFtrZXksIF9dKSA9PiBrZXkgPT09IGMpKSk7XG5cdGxldCB2YWx1ZXM7XG5cdGlmIChmcmVzaCAmJiB1cGRhdGVkLnNpemUgPiAwKSB7XG5cdFx0Y29uc3QgbG9jYWxDaGFubmVscyA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhjaGFubmVscykuZmlsdGVyKChbaywgX10pID0+IHVwZGF0ZWQuaGFzKGspKSk7XG5cdFx0Y29uc3QgbmV3Q2hlY2twb2ludCA9IGNyZWF0ZUNoZWNrcG9pbnQoY2hlY2twb2ludCwgbG9jYWxDaGFubmVscywgLTEpO1xuXHRcdGNvbnN0IG5ld0NoYW5uZWxzID0gZW1wdHlDaGFubmVscyhsb2NhbENoYW5uZWxzLCBuZXdDaGVja3BvaW50KTtcblx0XHRfYXBwbHlXcml0ZXMoY29weUNoZWNrcG9pbnQobmV3Q2hlY2twb2ludCksIG5ld0NoYW5uZWxzLCBbdGFza10sIHZvaWQgMCwgdm9pZCAwKTtcblx0XHR2YWx1ZXMgPSByZWFkQ2hhbm5lbHMoe1xuXHRcdFx0Li4uY2hhbm5lbHMsXG5cdFx0XHQuLi5uZXdDaGFubmVsc1xuXHRcdH0sIHNlbGVjdCk7XG5cdH0gZWxzZSB2YWx1ZXMgPSByZWFkQ2hhbm5lbHMoY2hhbm5lbHMsIHNlbGVjdCk7XG5cdHJldHVybiB2YWx1ZXM7XG59XG5mdW5jdGlvbiBfbG9jYWxXcml0ZShjb21taXQsIHByb2Nlc3Nlcywgd3JpdGVzKSB7XG5cdGZvciAoY29uc3QgW2NoYW4sIHZhbHVlXSBvZiB3cml0ZXMpIGlmIChbUFVTSCwgVEFTS1NdLmluY2x1ZGVzKGNoYW4pICYmIHZhbHVlICE9IG51bGwpIHtcblx0XHRpZiAoIV9pc1NlbmQodmFsdWUpKSB0aHJvdyBuZXcgSW52YWxpZFVwZGF0ZUVycm9yKGBJbnZhbGlkIHBhY2tldCB0eXBlLCBleHBlY3RlZCBTZW5kUHJvdG9jb2wsIGdvdCAke0pTT04uc3RyaW5naWZ5KHZhbHVlKX1gKTtcblx0XHRpZiAoISh2YWx1ZS5ub2RlIGluIHByb2Nlc3NlcykpIHRocm93IG5ldyBJbnZhbGlkVXBkYXRlRXJyb3IoYEludmFsaWQgbm9kZSBuYW1lIFwiJHt2YWx1ZS5ub2RlfVwiIGluIFNlbmQgcGFja2V0YCk7XG5cdH1cblx0Y29tbWl0KHdyaXRlcyk7XG59XG5jb25zdCBJR05PUkUgPSBuZXcgU2V0KFtcblx0Tk9fV1JJVEVTLFxuXHRQVVNILFxuXHRSRVNVTUUsXG5cdElOVEVSUlVQVCxcblx0UkVUVVJOLFxuXHRFUlJPUlxuXSk7XG5mdW5jdGlvbiBfYXBwbHlXcml0ZXMoY2hlY2twb2ludCwgY2hhbm5lbHMsIHRhc2tzLCBnZXROZXh0VmVyc2lvbiwgdHJpZ2dlclRvTm9kZXMpIHtcblx0dGFza3Muc29ydCgoYSwgYikgPT4ge1xuXHRcdGNvbnN0IGFQYXRoID0gYS5wYXRoPy5zbGljZSgwLCAzKSB8fCBbXTtcblx0XHRjb25zdCBiUGF0aCA9IGIucGF0aD8uc2xpY2UoMCwgMykgfHwgW107XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBNYXRoLm1pbihhUGF0aC5sZW5ndGgsIGJQYXRoLmxlbmd0aCk7IGkgKz0gMSkge1xuXHRcdFx0aWYgKGFQYXRoW2ldIDwgYlBhdGhbaV0pIHJldHVybiAtMTtcblx0XHRcdGlmIChhUGF0aFtpXSA+IGJQYXRoW2ldKSByZXR1cm4gMTtcblx0XHR9XG5cdFx0cmV0dXJuIGFQYXRoLmxlbmd0aCAtIGJQYXRoLmxlbmd0aDtcblx0fSk7XG5cdGNvbnN0IGJ1bXBTdGVwID0gdGFza3Muc29tZSgodGFzaykgPT4gdGFzay50cmlnZ2Vycy5sZW5ndGggPiAwKTtcblx0Y29uc3Qgb25seUNoYW5uZWxzID0gZ2V0T25seUNoYW5uZWxzKGNoYW5uZWxzKTtcblx0Zm9yIChjb25zdCB0YXNrIG9mIHRhc2tzKSB7XG5cdFx0Y2hlY2twb2ludC52ZXJzaW9uc19zZWVuW3Rhc2submFtZV0gPz89IHt9O1xuXHRcdGZvciAoY29uc3QgY2hhbiBvZiB0YXNrLnRyaWdnZXJzKSBpZiAoY2hhbiBpbiBjaGVja3BvaW50LmNoYW5uZWxfdmVyc2lvbnMpIGNoZWNrcG9pbnQudmVyc2lvbnNfc2Vlblt0YXNrLm5hbWVdW2NoYW5dID0gY2hlY2twb2ludC5jaGFubmVsX3ZlcnNpb25zW2NoYW5dO1xuXHR9XG5cdGxldCBtYXhWZXJzaW9uID0gbWF4Q2hhbm5lbE1hcFZlcnNpb24oY2hlY2twb2ludC5jaGFubmVsX3ZlcnNpb25zKTtcblx0Y29uc3QgY2hhbm5lbHNUb0NvbnN1bWUgPSBuZXcgU2V0KHRhc2tzLmZsYXRNYXAoKHRhc2spID0+IHRhc2sudHJpZ2dlcnMpLmZpbHRlcigoY2hhbikgPT4gIVJFU0VSVkVELmluY2x1ZGVzKGNoYW4pKSk7XG5cdGxldCB1c2VkTmV3VmVyc2lvbiA9IGZhbHNlO1xuXHRmb3IgKGNvbnN0IGNoYW4gb2YgY2hhbm5lbHNUb0NvbnN1bWUpIGlmIChjaGFuIGluIG9ubHlDaGFubmVscyAmJiBvbmx5Q2hhbm5lbHNbY2hhbl0uY29uc3VtZSgpKSB7XG5cdFx0aWYgKGdldE5leHRWZXJzaW9uICE9PSB2b2lkIDApIHtcblx0XHRcdGNoZWNrcG9pbnQuY2hhbm5lbF92ZXJzaW9uc1tjaGFuXSA9IGdldE5leHRWZXJzaW9uKG1heFZlcnNpb24pO1xuXHRcdFx0dXNlZE5ld1ZlcnNpb24gPSB0cnVlO1xuXHRcdH1cblx0fVxuXHRjb25zdCBwZW5kaW5nV3JpdGVzQnlDaGFubmVsID0ge307XG5cdGZvciAoY29uc3QgdGFzayBvZiB0YXNrcykgZm9yIChjb25zdCBbY2hhbiwgdmFsXSBvZiB0YXNrLndyaXRlcykgaWYgKElHTk9SRS5oYXMoY2hhbikpIHt9IGVsc2UgaWYgKGNoYW4gaW4gb25seUNoYW5uZWxzKSB7XG5cdFx0cGVuZGluZ1dyaXRlc0J5Q2hhbm5lbFtjaGFuXSA/Pz0gW107XG5cdFx0cGVuZGluZ1dyaXRlc0J5Q2hhbm5lbFtjaGFuXS5wdXNoKHZhbCk7XG5cdH1cblx0aWYgKG1heFZlcnNpb24gIT0gbnVsbCAmJiBnZXROZXh0VmVyc2lvbiAhPSBudWxsKSBtYXhWZXJzaW9uID0gdXNlZE5ld1ZlcnNpb24gPyBnZXROZXh0VmVyc2lvbihtYXhWZXJzaW9uKSA6IG1heFZlcnNpb247XG5cdGNvbnN0IHVwZGF0ZWRDaGFubmVscyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG5cdGZvciAoY29uc3QgW2NoYW4sIHZhbHNdIG9mIE9iamVjdC5lbnRyaWVzKHBlbmRpbmdXcml0ZXNCeUNoYW5uZWwpKSBpZiAoY2hhbiBpbiBvbmx5Q2hhbm5lbHMpIHtcblx0XHRjb25zdCBjaGFubmVsID0gb25seUNoYW5uZWxzW2NoYW5dO1xuXHRcdGxldCB1cGRhdGVkO1xuXHRcdHRyeSB7XG5cdFx0XHR1cGRhdGVkID0gY2hhbm5lbC51cGRhdGUodmFscyk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0aWYgKGUubmFtZSA9PT0gSW52YWxpZFVwZGF0ZUVycm9yLnVubWluaWZpYWJsZV9uYW1lKSB7XG5cdFx0XHRcdGNvbnN0IHdyYXBwZWRFcnJvciA9IG5ldyBJbnZhbGlkVXBkYXRlRXJyb3IoYEludmFsaWQgdXBkYXRlIGZvciBjaGFubmVsIFwiJHtjaGFufVwiIHdpdGggdmFsdWVzICR7SlNPTi5zdHJpbmdpZnkodmFscyl9OiAke2UubWVzc2FnZX1gKTtcblx0XHRcdFx0d3JhcHBlZEVycm9yLmxjX2Vycm9yX2NvZGUgPSBlLmxjX2Vycm9yX2NvZGU7XG5cdFx0XHRcdHRocm93IHdyYXBwZWRFcnJvcjtcblx0XHRcdH0gZWxzZSB0aHJvdyBlO1xuXHRcdH1cblx0XHRpZiAodXBkYXRlZCAmJiBnZXROZXh0VmVyc2lvbiAhPT0gdm9pZCAwKSB7XG5cdFx0XHRjaGVja3BvaW50LmNoYW5uZWxfdmVyc2lvbnNbY2hhbl0gPSBnZXROZXh0VmVyc2lvbihtYXhWZXJzaW9uKTtcblx0XHRcdGlmIChjaGFubmVsLmlzQXZhaWxhYmxlKCkpIHVwZGF0ZWRDaGFubmVscy5hZGQoY2hhbik7XG5cdFx0fVxuXHR9XG5cdGlmIChidW1wU3RlcCkgZm9yIChjb25zdCBjaGFuIGluIG9ubHlDaGFubmVscykge1xuXHRcdGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9ubHlDaGFubmVscywgY2hhbikpIGNvbnRpbnVlO1xuXHRcdGNvbnN0IGNoYW5uZWwgPSBvbmx5Q2hhbm5lbHNbY2hhbl07XG5cdFx0aWYgKGNoYW5uZWwuaXNBdmFpbGFibGUoKSAmJiAhdXBkYXRlZENoYW5uZWxzLmhhcyhjaGFuKSkge1xuXHRcdFx0aWYgKGNoYW5uZWwudXBkYXRlKFtdKSAmJiBnZXROZXh0VmVyc2lvbiAhPT0gdm9pZCAwKSB7XG5cdFx0XHRcdGNoZWNrcG9pbnQuY2hhbm5lbF92ZXJzaW9uc1tjaGFuXSA9IGdldE5leHRWZXJzaW9uKG1heFZlcnNpb24pO1xuXHRcdFx0XHRpZiAoY2hhbm5lbC5pc0F2YWlsYWJsZSgpKSB1cGRhdGVkQ2hhbm5lbHMuYWRkKGNoYW4pO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRpZiAoYnVtcFN0ZXAgJiYgIXRyaWdnZXJzTmV4dFN0ZXAodXBkYXRlZENoYW5uZWxzLCB0cmlnZ2VyVG9Ob2RlcykpIGZvciAoY29uc3QgY2hhbiBpbiBvbmx5Q2hhbm5lbHMpIHtcblx0XHRpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvbmx5Q2hhbm5lbHMsIGNoYW4pKSBjb250aW51ZTtcblx0XHRjb25zdCBjaGFubmVsID0gb25seUNoYW5uZWxzW2NoYW5dO1xuXHRcdGlmIChjaGFubmVsLmZpbmlzaCgpICYmIGdldE5leHRWZXJzaW9uICE9PSB2b2lkIDApIHtcblx0XHRcdGNoZWNrcG9pbnQuY2hhbm5lbF92ZXJzaW9uc1tjaGFuXSA9IGdldE5leHRWZXJzaW9uKG1heFZlcnNpb24pO1xuXHRcdFx0aWYgKGNoYW5uZWwuaXNBdmFpbGFibGUoKSkgdXBkYXRlZENoYW5uZWxzLmFkZChjaGFuKTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHVwZGF0ZWRDaGFubmVscztcbn1cbmZ1bmN0aW9uKiBjYW5kaWRhdGVOb2RlcyhjaGVja3BvaW50LCBwcm9jZXNzZXMsIGV4dHJhKSB7XG5cdGlmIChleHRyYS51cGRhdGVkQ2hhbm5lbHMgIT0gbnVsbCAmJiBleHRyYS50cmlnZ2VyVG9Ob2RlcyAhPSBudWxsKSB7XG5cdFx0Y29uc3QgdHJpZ2dlcmVkTm9kZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuXHRcdGZvciAoY29uc3QgY2hhbm5lbCBvZiBleHRyYS51cGRhdGVkQ2hhbm5lbHMpIHtcblx0XHRcdGNvbnN0IG5vZGVJZHMgPSBleHRyYS50cmlnZ2VyVG9Ob2Rlc1tjaGFubmVsXTtcblx0XHRcdGZvciAoY29uc3QgaWQgb2Ygbm9kZUlkcyA/PyBbXSkgdHJpZ2dlcmVkTm9kZXMuYWRkKGlkKTtcblx0XHR9XG5cdFx0eWllbGQqIFsuLi50cmlnZ2VyZWROb2Rlc10uc29ydCgpO1xuXHRcdHJldHVybjtcblx0fVxuXHRpZiAoKCgpID0+IHtcblx0XHRmb3IgKGNvbnN0IGNoYW4gaW4gY2hlY2twb2ludC5jaGFubmVsX3ZlcnNpb25zKSBpZiAoY2hlY2twb2ludC5jaGFubmVsX3ZlcnNpb25zW2NoYW5dICE9PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH0pKCkpIHJldHVybjtcblx0Zm9yIChjb25zdCBuYW1lIGluIHByb2Nlc3Nlcykge1xuXHRcdGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHByb2Nlc3NlcywgbmFtZSkpIGNvbnRpbnVlO1xuXHRcdHlpZWxkIG5hbWU7XG5cdH1cbn1cbi8qKlxuKiBQcmVwYXJlIHRoZSBzZXQgb2YgdGFza3MgdGhhdCB3aWxsIG1ha2UgdXAgdGhlIG5leHQgUHJlZ2VsIHN0ZXAuXG4qIFRoaXMgaXMgdGhlIHVuaW9uIG9mIGFsbCBQVVNIIHRhc2tzIChTZW5kcykgYW5kIFBVTEwgdGFza3MgKG5vZGVzIHRyaWdnZXJlZFxuKiBieSBlZGdlcykuXG4qL1xuZnVuY3Rpb24gX3ByZXBhcmVOZXh0VGFza3MoY2hlY2twb2ludCwgcGVuZGluZ1dyaXRlcywgcHJvY2Vzc2VzLCBjaGFubmVscywgY29uZmlnLCBmb3JFeGVjdXRpb24sIGV4dHJhKSB7XG5cdGNvbnN0IHRhc2tzID0ge307XG5cdGNvbnN0IHRhc2tzQ2hhbm5lbCA9IGNoYW5uZWxzW1RBU0tTXTtcblx0aWYgKHRhc2tzQ2hhbm5lbD8uaXNBdmFpbGFibGUoKSkge1xuXHRcdGNvbnN0IGxlbiA9IHRhc2tzQ2hhbm5lbC5nZXQoKS5sZW5ndGg7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkgKz0gMSkge1xuXHRcdFx0Y29uc3QgdGFzayA9IF9wcmVwYXJlU2luZ2xlVGFzayhbUFVTSCwgaV0sIGNoZWNrcG9pbnQsIHBlbmRpbmdXcml0ZXMsIHByb2Nlc3NlcywgY2hhbm5lbHMsIGNvbmZpZywgZm9yRXhlY3V0aW9uLCBleHRyYSk7XG5cdFx0XHRpZiAodGFzayAhPT0gdm9pZCAwKSB0YXNrc1t0YXNrLmlkXSA9IHRhc2s7XG5cdFx0fVxuXHR9XG5cdGZvciAoY29uc3QgbmFtZSBvZiBjYW5kaWRhdGVOb2RlcyhjaGVja3BvaW50LCBwcm9jZXNzZXMsIGV4dHJhKSkge1xuXHRcdGNvbnN0IHRhc2sgPSBfcHJlcGFyZVNpbmdsZVRhc2soW1BVTEwsIG5hbWVdLCBjaGVja3BvaW50LCBwZW5kaW5nV3JpdGVzLCBwcm9jZXNzZXMsIGNoYW5uZWxzLCBjb25maWcsIGZvckV4ZWN1dGlvbiwgZXh0cmEpO1xuXHRcdGlmICh0YXNrICE9PSB2b2lkIDApIHRhc2tzW3Rhc2suaWRdID0gdGFzaztcblx0fVxuXHRyZXR1cm4gdGFza3M7XG59XG4vKipcbiogUHJlcGFyZXMgYSBzaW5nbGUgdGFzayBmb3IgdGhlIG5leHQgUHJlZ2VsIHN0ZXAsIGdpdmVuIGEgdGFzayBwYXRoLCB3aGljaFxuKiB1bmlxdWVseSBpZGVudGlmaWVzIGEgUFVTSCBvciBQVUxMIHRhc2sgd2l0aGluIHRoZSBncmFwaC5cbiovXG5mdW5jdGlvbiBfcHJlcGFyZVNpbmdsZVRhc2sodGFza1BhdGgsIGNoZWNrcG9pbnQsIHBlbmRpbmdXcml0ZXMsIHByb2Nlc3NlcywgY2hhbm5lbHMsIGNvbmZpZywgZm9yRXhlY3V0aW9uLCBleHRyYSkge1xuXHRjb25zdCB7IHN0ZXAsIGNoZWNrcG9pbnRlciwgbWFuYWdlciB9ID0gZXh0cmE7XG5cdGNvbnN0IGNvbmZpZ3VyYWJsZSA9IGNvbmZpZy5jb25maWd1cmFibGUgPz8ge307XG5cdGNvbnN0IHBhcmVudE5hbWVzcGFjZSA9IGNvbmZpZ3VyYWJsZS5jaGVja3BvaW50X25zID8/IFwiXCI7XG5cdGlmICh0YXNrUGF0aFswXSA9PT0gUFVTSCAmJiBpc0NhbGwodGFza1BhdGhbdGFza1BhdGgubGVuZ3RoIC0gMV0pKSB7XG5cdFx0Y29uc3QgY2FsbCA9IHRhc2tQYXRoW3Rhc2tQYXRoLmxlbmd0aCAtIDFdO1xuXHRcdGNvbnN0IHByb2MgPSBnZXRSdW5uYWJsZUZvckZ1bmMoY2FsbC5uYW1lLCBjYWxsLmZ1bmMpO1xuXHRcdGNvbnN0IHRyaWdnZXJzID0gW1BVU0hdO1xuXHRcdGNvbnN0IGNoZWNrcG9pbnROYW1lc3BhY2UgPSBwYXJlbnROYW1lc3BhY2UgPT09IFwiXCIgPyBjYWxsLm5hbWUgOiBgJHtwYXJlbnROYW1lc3BhY2V9JHtDSEVDS1BPSU5UX05BTUVTUEFDRV9TRVBBUkFUT1J9JHtjYWxsLm5hbWV9YDtcblx0XHRjb25zdCBpZCA9IHV1aWQ1KEpTT04uc3RyaW5naWZ5KFtcblx0XHRcdGNoZWNrcG9pbnROYW1lc3BhY2UsXG5cdFx0XHRzdGVwLnRvU3RyaW5nKCksXG5cdFx0XHRjYWxsLm5hbWUsXG5cdFx0XHRQVVNILFxuXHRcdFx0dGFza1BhdGhbMV0sXG5cdFx0XHR0YXNrUGF0aFsyXVxuXHRcdF0pLCBjaGVja3BvaW50LmlkKTtcblx0XHRjb25zdCB0YXNrQ2hlY2twb2ludE5hbWVzcGFjZSA9IGAke2NoZWNrcG9pbnROYW1lc3BhY2V9JHtDSEVDS1BPSU5UX05BTUVTUEFDRV9FTkR9JHtpZH1gO1xuXHRcdGNvbnN0IG91dHB1dFRhc2tQYXRoID0gWy4uLnRhc2tQYXRoLnNsaWNlKDAsIDMpLCB0cnVlXTtcblx0XHRjb25zdCBtZXRhZGF0YSA9IHtcblx0XHRcdGxhbmdncmFwaF9zdGVwOiBzdGVwLFxuXHRcdFx0bGFuZ2dyYXBoX25vZGU6IGNhbGwubmFtZSxcblx0XHRcdGxhbmdncmFwaF90cmlnZ2VyczogdHJpZ2dlcnMsXG5cdFx0XHRsYW5nZ3JhcGhfcGF0aDogb3V0cHV0VGFza1BhdGgsXG5cdFx0XHRsYW5nZ3JhcGhfY2hlY2twb2ludF9uczogdGFza0NoZWNrcG9pbnROYW1lc3BhY2Vcblx0XHR9O1xuXHRcdGlmIChmb3JFeGVjdXRpb24pIHtcblx0XHRcdGNvbnN0IHdyaXRlcyA9IFtdO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0bmFtZTogY2FsbC5uYW1lLFxuXHRcdFx0XHRpbnB1dDogY2FsbC5pbnB1dCxcblx0XHRcdFx0cHJvYyxcblx0XHRcdFx0d3JpdGVzLFxuXHRcdFx0XHRjb25maWc6IHBhdGNoQ29uZmlnKG1lcmdlQ29uZmlncyhjb25maWcsIHtcblx0XHRcdFx0XHRtZXRhZGF0YSxcblx0XHRcdFx0XHRzdG9yZTogZXh0cmEuc3RvcmUgPz8gY29uZmlnLnN0b3JlXG5cdFx0XHRcdH0pLCB7XG5cdFx0XHRcdFx0cnVuTmFtZTogY2FsbC5uYW1lLFxuXHRcdFx0XHRcdGNhbGxiYWNrczogbWFuYWdlcj8uZ2V0Q2hpbGQoYGdyYXBoOnN0ZXA6JHtzdGVwfWApLFxuXHRcdFx0XHRcdGNvbmZpZ3VyYWJsZToge1xuXHRcdFx0XHRcdFx0W0NPTkZJR19LRVlfVEFTS19JRF06IGlkLFxuXHRcdFx0XHRcdFx0W0NPTkZJR19LRVlfU0VORF06ICh3cml0ZXNfKSA9PiBfbG9jYWxXcml0ZSgoaXRlbXMpID0+IHdyaXRlcy5wdXNoKC4uLml0ZW1zKSwgcHJvY2Vzc2VzLCB3cml0ZXNfKSxcblx0XHRcdFx0XHRcdFtDT05GSUdfS0VZX1JFQURdOiAoc2VsZWN0XywgZnJlc2hfID0gZmFsc2UpID0+IF9sb2NhbFJlYWQoY2hlY2twb2ludCwgY2hhbm5lbHMsIHtcblx0XHRcdFx0XHRcdFx0bmFtZTogY2FsbC5uYW1lLFxuXHRcdFx0XHRcdFx0XHR3cml0ZXMsXG5cdFx0XHRcdFx0XHRcdHRyaWdnZXJzLFxuXHRcdFx0XHRcdFx0XHRwYXRoOiBvdXRwdXRUYXNrUGF0aFxuXHRcdFx0XHRcdFx0fSwgc2VsZWN0XywgZnJlc2hfKSxcblx0XHRcdFx0XHRcdFtDT05GSUdfS0VZX0NIRUNLUE9JTlRFUl06IGNoZWNrcG9pbnRlciA/PyBjb25maWd1cmFibGVbQ09ORklHX0tFWV9DSEVDS1BPSU5URVJdLFxuXHRcdFx0XHRcdFx0W0NPTkZJR19LRVlfQ0hFQ0tQT0lOVF9NQVBdOiB7XG5cdFx0XHRcdFx0XHRcdC4uLmNvbmZpZ3VyYWJsZVtDT05GSUdfS0VZX0NIRUNLUE9JTlRfTUFQXSxcblx0XHRcdFx0XHRcdFx0W3BhcmVudE5hbWVzcGFjZV06IGNoZWNrcG9pbnQuaWRcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRbQ09ORklHX0tFWV9TQ1JBVENIUEFEXTogX3NjcmF0Y2hwYWQoe1xuXHRcdFx0XHRcdFx0XHRwZW5kaW5nV3JpdGVzOiBwZW5kaW5nV3JpdGVzID8/IFtdLFxuXHRcdFx0XHRcdFx0XHR0YXNrSWQ6IGlkLFxuXHRcdFx0XHRcdFx0XHRjdXJyZW50VGFza0lucHV0OiBjYWxsLmlucHV0LFxuXHRcdFx0XHRcdFx0XHRyZXN1bWVNYXA6IGNvbmZpZy5jb25maWd1cmFibGU/LltDT05GSUdfS0VZX1JFU1VNRV9NQVBdLFxuXHRcdFx0XHRcdFx0XHRuYW1lc3BhY2VIYXNoOiBYWEgzKHRhc2tDaGVja3BvaW50TmFtZXNwYWNlKVxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRbQ09ORklHX0tFWV9QUkVWSU9VU19TVEFURV06IGNoZWNrcG9pbnQuY2hhbm5lbF92YWx1ZXNbUFJFVklPVVNdLFxuXHRcdFx0XHRcdFx0Y2hlY2twb2ludF9pZDogdm9pZCAwLFxuXHRcdFx0XHRcdFx0Y2hlY2twb2ludF9uczogdGFza0NoZWNrcG9pbnROYW1lc3BhY2Vcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pLFxuXHRcdFx0XHR0cmlnZ2Vycyxcblx0XHRcdFx0cmV0cnlfcG9saWN5OiBjYWxsLnJldHJ5LFxuXHRcdFx0XHRjYWNoZV9rZXk6IGNhbGwuY2FjaGUgPyB7XG5cdFx0XHRcdFx0a2V5OiBYWEgzKChjYWxsLmNhY2hlLmtleUZ1bmMgPz8gSlNPTi5zdHJpbmdpZnkpKFtjYWxsLmlucHV0XSkpLFxuXHRcdFx0XHRcdG5zOiBbQ0FDSEVfTlNfV1JJVEVTLCBjYWxsLm5hbWUgPz8gXCJfX2R5bmFtaWNfX1wiXSxcblx0XHRcdFx0XHR0dGw6IGNhbGwuY2FjaGUudHRsXG5cdFx0XHRcdH0gOiB2b2lkIDAsXG5cdFx0XHRcdGlkLFxuXHRcdFx0XHRwYXRoOiBvdXRwdXRUYXNrUGF0aCxcblx0XHRcdFx0d3JpdGVyczogW11cblx0XHRcdH07XG5cdFx0fSBlbHNlIHJldHVybiB7XG5cdFx0XHRpZCxcblx0XHRcdG5hbWU6IGNhbGwubmFtZSxcblx0XHRcdGludGVycnVwdHM6IFtdLFxuXHRcdFx0cGF0aDogb3V0cHV0VGFza1BhdGhcblx0XHR9O1xuXHR9IGVsc2UgaWYgKHRhc2tQYXRoWzBdID09PSBQVVNIKSB7XG5cdFx0Y29uc3QgaW5kZXggPSB0eXBlb2YgdGFza1BhdGhbMV0gPT09IFwibnVtYmVyXCIgPyB0YXNrUGF0aFsxXSA6IHBhcnNlSW50KHRhc2tQYXRoWzFdLCAxMCk7XG5cdFx0aWYgKCFjaGFubmVsc1tUQVNLU10/LmlzQXZhaWxhYmxlKCkpIHJldHVybjtcblx0XHRjb25zdCBzZW5kcyA9IGNoYW5uZWxzW1RBU0tTXS5nZXQoKTtcblx0XHRpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHNlbmRzLmxlbmd0aCkgcmV0dXJuO1xuXHRcdGNvbnN0IHBhY2tldCA9IF9pc1NlbmRJbnRlcmZhY2Uoc2VuZHNbaW5kZXhdKSAmJiAhX2lzU2VuZChzZW5kc1tpbmRleF0pID8gbmV3IFNlbmQoc2VuZHNbaW5kZXhdLm5vZGUsIHNlbmRzW2luZGV4XS5hcmdzKSA6IHNlbmRzW2luZGV4XTtcblx0XHRpZiAoIV9pc1NlbmRJbnRlcmZhY2UocGFja2V0KSkge1xuXHRcdFx0Y29uc29sZS53YXJuKGBJZ25vcmluZyBpbnZhbGlkIHBhY2tldCAke0pTT04uc3RyaW5naWZ5KHBhY2tldCl9IGluIHBlbmRpbmcgc2VuZHMuYCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmICghKHBhY2tldC5ub2RlIGluIHByb2Nlc3NlcykpIHtcblx0XHRcdGNvbnNvbGUud2FybihgSWdub3JpbmcgdW5rbm93biBub2RlIG5hbWUgJHtwYWNrZXQubm9kZX0gaW4gcGVuZGluZyBzZW5kcy5gKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Y29uc3QgdHJpZ2dlcnMgPSBbUFVTSF07XG5cdFx0Y29uc3QgY2hlY2twb2ludE5hbWVzcGFjZSA9IHBhcmVudE5hbWVzcGFjZSA9PT0gXCJcIiA/IHBhY2tldC5ub2RlIDogYCR7cGFyZW50TmFtZXNwYWNlfSR7Q0hFQ0tQT0lOVF9OQU1FU1BBQ0VfU0VQQVJBVE9SfSR7cGFja2V0Lm5vZGV9YDtcblx0XHRjb25zdCB0YXNrSWQgPSB1dWlkNShKU09OLnN0cmluZ2lmeShbXG5cdFx0XHRjaGVja3BvaW50TmFtZXNwYWNlLFxuXHRcdFx0c3RlcC50b1N0cmluZygpLFxuXHRcdFx0cGFja2V0Lm5vZGUsXG5cdFx0XHRQVVNILFxuXHRcdFx0aW5kZXgudG9TdHJpbmcoKVxuXHRcdF0pLCBjaGVja3BvaW50LmlkKTtcblx0XHRjb25zdCB0YXNrQ2hlY2twb2ludE5hbWVzcGFjZSA9IGAke2NoZWNrcG9pbnROYW1lc3BhY2V9JHtDSEVDS1BPSU5UX05BTUVTUEFDRV9FTkR9JHt0YXNrSWR9YDtcblx0XHRsZXQgbWV0YWRhdGEgPSB7XG5cdFx0XHRsYW5nZ3JhcGhfc3RlcDogc3RlcCxcblx0XHRcdGxhbmdncmFwaF9ub2RlOiBwYWNrZXQubm9kZSxcblx0XHRcdGxhbmdncmFwaF90cmlnZ2VyczogdHJpZ2dlcnMsXG5cdFx0XHRsYW5nZ3JhcGhfcGF0aDogdGFza1BhdGguc2xpY2UoMCwgMyksXG5cdFx0XHRsYW5nZ3JhcGhfY2hlY2twb2ludF9uczogdGFza0NoZWNrcG9pbnROYW1lc3BhY2Vcblx0XHR9O1xuXHRcdGlmIChmb3JFeGVjdXRpb24pIHtcblx0XHRcdGNvbnN0IHByb2MgPSBwcm9jZXNzZXNbcGFja2V0Lm5vZGVdO1xuXHRcdFx0Y29uc3Qgbm9kZSA9IHByb2MuZ2V0Tm9kZSgpO1xuXHRcdFx0aWYgKG5vZGUgIT09IHZvaWQgMCkge1xuXHRcdFx0XHRpZiAocHJvYy5tZXRhZGF0YSAhPT0gdm9pZCAwKSBtZXRhZGF0YSA9IHtcblx0XHRcdFx0XHQuLi5tZXRhZGF0YSxcblx0XHRcdFx0XHQuLi5wcm9jLm1ldGFkYXRhXG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnN0IHdyaXRlcyA9IFtdO1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdG5hbWU6IHBhY2tldC5ub2RlLFxuXHRcdFx0XHRcdGlucHV0OiBwYWNrZXQuYXJncyxcblx0XHRcdFx0XHRwcm9jOiBub2RlLFxuXHRcdFx0XHRcdHN1YmdyYXBoczogcHJvYy5zdWJncmFwaHMsXG5cdFx0XHRcdFx0d3JpdGVzLFxuXHRcdFx0XHRcdGNvbmZpZzogcGF0Y2hDb25maWcobWVyZ2VDb25maWdzKGNvbmZpZywge1xuXHRcdFx0XHRcdFx0bWV0YWRhdGEsXG5cdFx0XHRcdFx0XHR0YWdzOiBwcm9jLnRhZ3MsXG5cdFx0XHRcdFx0XHRzdG9yZTogZXh0cmEuc3RvcmUgPz8gY29uZmlnLnN0b3JlXG5cdFx0XHRcdFx0fSksIHtcblx0XHRcdFx0XHRcdHJ1bk5hbWU6IHBhY2tldC5ub2RlLFxuXHRcdFx0XHRcdFx0Y2FsbGJhY2tzOiBtYW5hZ2VyPy5nZXRDaGlsZChgZ3JhcGg6c3RlcDoke3N0ZXB9YCksXG5cdFx0XHRcdFx0XHRjb25maWd1cmFibGU6IHtcblx0XHRcdFx0XHRcdFx0W0NPTkZJR19LRVlfVEFTS19JRF06IHRhc2tJZCxcblx0XHRcdFx0XHRcdFx0W0NPTkZJR19LRVlfU0VORF06ICh3cml0ZXNfKSA9PiBfbG9jYWxXcml0ZSgoaXRlbXMpID0+IHdyaXRlcy5wdXNoKC4uLml0ZW1zKSwgcHJvY2Vzc2VzLCB3cml0ZXNfKSxcblx0XHRcdFx0XHRcdFx0W0NPTkZJR19LRVlfUkVBRF06IChzZWxlY3RfLCBmcmVzaF8gPSBmYWxzZSkgPT4gX2xvY2FsUmVhZChjaGVja3BvaW50LCBjaGFubmVscywge1xuXHRcdFx0XHRcdFx0XHRcdG5hbWU6IHBhY2tldC5ub2RlLFxuXHRcdFx0XHRcdFx0XHRcdHdyaXRlcyxcblx0XHRcdFx0XHRcdFx0XHR0cmlnZ2Vycyxcblx0XHRcdFx0XHRcdFx0XHRwYXRoOiB0YXNrUGF0aFxuXHRcdFx0XHRcdFx0XHR9LCBzZWxlY3RfLCBmcmVzaF8pLFxuXHRcdFx0XHRcdFx0XHRbQ09ORklHX0tFWV9DSEVDS1BPSU5URVJdOiBjaGVja3BvaW50ZXIgPz8gY29uZmlndXJhYmxlW0NPTkZJR19LRVlfQ0hFQ0tQT0lOVEVSXSxcblx0XHRcdFx0XHRcdFx0W0NPTkZJR19LRVlfQ0hFQ0tQT0lOVF9NQVBdOiB7XG5cdFx0XHRcdFx0XHRcdFx0Li4uY29uZmlndXJhYmxlW0NPTkZJR19LRVlfQ0hFQ0tQT0lOVF9NQVBdLFxuXHRcdFx0XHRcdFx0XHRcdFtwYXJlbnROYW1lc3BhY2VdOiBjaGVja3BvaW50LmlkXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFtDT05GSUdfS0VZX1NDUkFUQ0hQQURdOiBfc2NyYXRjaHBhZCh7XG5cdFx0XHRcdFx0XHRcdFx0cGVuZGluZ1dyaXRlczogcGVuZGluZ1dyaXRlcyA/PyBbXSxcblx0XHRcdFx0XHRcdFx0XHR0YXNrSWQsXG5cdFx0XHRcdFx0XHRcdFx0Y3VycmVudFRhc2tJbnB1dDogcGFja2V0LmFyZ3MsXG5cdFx0XHRcdFx0XHRcdFx0cmVzdW1lTWFwOiBjb25maWcuY29uZmlndXJhYmxlPy5bQ09ORklHX0tFWV9SRVNVTUVfTUFQXSxcblx0XHRcdFx0XHRcdFx0XHRuYW1lc3BhY2VIYXNoOiBYWEgzKHRhc2tDaGVja3BvaW50TmFtZXNwYWNlKVxuXHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdFx0W0NPTkZJR19LRVlfUFJFVklPVVNfU1RBVEVdOiBjaGVja3BvaW50LmNoYW5uZWxfdmFsdWVzW1BSRVZJT1VTXSxcblx0XHRcdFx0XHRcdFx0Y2hlY2twb2ludF9pZDogdm9pZCAwLFxuXHRcdFx0XHRcdFx0XHRjaGVja3BvaW50X25zOiB0YXNrQ2hlY2twb2ludE5hbWVzcGFjZVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdHRyaWdnZXJzLFxuXHRcdFx0XHRcdHJldHJ5X3BvbGljeTogcHJvYy5yZXRyeVBvbGljeSxcblx0XHRcdFx0XHRjYWNoZV9rZXk6IHByb2MuY2FjaGVQb2xpY3kgPyB7XG5cdFx0XHRcdFx0XHRrZXk6IFhYSDMoKHByb2MuY2FjaGVQb2xpY3kua2V5RnVuYyA/PyBKU09OLnN0cmluZ2lmeSkoW3BhY2tldC5hcmdzXSkpLFxuXHRcdFx0XHRcdFx0bnM6IFtcblx0XHRcdFx0XHRcdFx0Q0FDSEVfTlNfV1JJVEVTLFxuXHRcdFx0XHRcdFx0XHRwcm9jLm5hbWUgPz8gXCJfX2R5bmFtaWNfX1wiLFxuXHRcdFx0XHRcdFx0XHRwYWNrZXQubm9kZVxuXHRcdFx0XHRcdFx0XSxcblx0XHRcdFx0XHRcdHR0bDogcHJvYy5jYWNoZVBvbGljeS50dGxcblx0XHRcdFx0XHR9IDogdm9pZCAwLFxuXHRcdFx0XHRcdGlkOiB0YXNrSWQsXG5cdFx0XHRcdFx0cGF0aDogdGFza1BhdGgsXG5cdFx0XHRcdFx0d3JpdGVyczogcHJvYy5nZXRXcml0ZXJzKClcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9IGVsc2UgcmV0dXJuIHtcblx0XHRcdGlkOiB0YXNrSWQsXG5cdFx0XHRuYW1lOiBwYWNrZXQubm9kZSxcblx0XHRcdGludGVycnVwdHM6IFtdLFxuXHRcdFx0cGF0aDogdGFza1BhdGhcblx0XHR9O1xuXHR9IGVsc2UgaWYgKHRhc2tQYXRoWzBdID09PSBQVUxMKSB7XG5cdFx0Y29uc3QgbmFtZSA9IHRhc2tQYXRoWzFdLnRvU3RyaW5nKCk7XG5cdFx0Y29uc3QgcHJvYyA9IHByb2Nlc3Nlc1tuYW1lXTtcblx0XHRpZiAocHJvYyA9PT0gdm9pZCAwKSByZXR1cm47XG5cdFx0aWYgKHBlbmRpbmdXcml0ZXM/Lmxlbmd0aCkge1xuXHRcdFx0Y29uc3QgY2hlY2twb2ludE5hbWVzcGFjZSA9IHBhcmVudE5hbWVzcGFjZSA9PT0gXCJcIiA/IG5hbWUgOiBgJHtwYXJlbnROYW1lc3BhY2V9JHtDSEVDS1BPSU5UX05BTUVTUEFDRV9TRVBBUkFUT1J9JHtuYW1lfWA7XG5cdFx0XHRjb25zdCB0YXNrSWQgPSB1dWlkNShKU09OLnN0cmluZ2lmeShbXG5cdFx0XHRcdGNoZWNrcG9pbnROYW1lc3BhY2UsXG5cdFx0XHRcdHN0ZXAudG9TdHJpbmcoKSxcblx0XHRcdFx0bmFtZSxcblx0XHRcdFx0UFVMTCxcblx0XHRcdFx0bmFtZVxuXHRcdFx0XSksIGNoZWNrcG9pbnQuaWQpO1xuXHRcdFx0aWYgKHBlbmRpbmdXcml0ZXMuc29tZSgodykgPT4gd1swXSA9PT0gdGFza0lkICYmIHdbMV0gIT09IEVSUk9SKSkgcmV0dXJuO1xuXHRcdH1cblx0XHRjb25zdCBudWxsVmVyc2lvbiA9IGdldE51bGxDaGFubmVsVmVyc2lvbihjaGVja3BvaW50LmNoYW5uZWxfdmVyc2lvbnMpO1xuXHRcdGlmIChudWxsVmVyc2lvbiA9PT0gdm9pZCAwKSByZXR1cm47XG5cdFx0Y29uc3Qgc2VlbiA9IGNoZWNrcG9pbnQudmVyc2lvbnNfc2VlbltuYW1lXSA/PyB7fTtcblx0XHRjb25zdCB0cmlnZ2VyID0gcHJvYy50cmlnZ2Vycy5maW5kKChjaGFuKSA9PiB7XG5cdFx0XHRpZiAoIWNoYW5uZWxzW2NoYW5dLmlzQXZhaWxhYmxlKCkpIHJldHVybiBmYWxzZTtcblx0XHRcdHJldHVybiAoY2hlY2twb2ludC5jaGFubmVsX3ZlcnNpb25zW2NoYW5dID8/IG51bGxWZXJzaW9uKSA+IChzZWVuW2NoYW5dID8/IG51bGxWZXJzaW9uKTtcblx0XHR9KTtcblx0XHRpZiAodHJpZ2dlciAhPT0gdm9pZCAwKSB7XG5cdFx0XHRjb25zdCB2YWwgPSBfcHJvY0lucHV0KHByb2MsIGNoYW5uZWxzLCBmb3JFeGVjdXRpb24pO1xuXHRcdFx0aWYgKHZhbCA9PT0gdm9pZCAwKSByZXR1cm47XG5cdFx0XHRjb25zdCBjaGVja3BvaW50TmFtZXNwYWNlID0gcGFyZW50TmFtZXNwYWNlID09PSBcIlwiID8gbmFtZSA6IGAke3BhcmVudE5hbWVzcGFjZX0ke0NIRUNLUE9JTlRfTkFNRVNQQUNFX1NFUEFSQVRPUn0ke25hbWV9YDtcblx0XHRcdGNvbnN0IHRhc2tJZCA9IHV1aWQ1KEpTT04uc3RyaW5naWZ5KFtcblx0XHRcdFx0Y2hlY2twb2ludE5hbWVzcGFjZSxcblx0XHRcdFx0c3RlcC50b1N0cmluZygpLFxuXHRcdFx0XHRuYW1lLFxuXHRcdFx0XHRQVUxMLFxuXHRcdFx0XHRbdHJpZ2dlcl1cblx0XHRcdF0pLCBjaGVja3BvaW50LmlkKTtcblx0XHRcdGNvbnN0IHRhc2tDaGVja3BvaW50TmFtZXNwYWNlID0gYCR7Y2hlY2twb2ludE5hbWVzcGFjZX0ke0NIRUNLUE9JTlRfTkFNRVNQQUNFX0VORH0ke3Rhc2tJZH1gO1xuXHRcdFx0bGV0IG1ldGFkYXRhID0ge1xuXHRcdFx0XHRsYW5nZ3JhcGhfc3RlcDogc3RlcCxcblx0XHRcdFx0bGFuZ2dyYXBoX25vZGU6IG5hbWUsXG5cdFx0XHRcdGxhbmdncmFwaF90cmlnZ2VyczogW3RyaWdnZXJdLFxuXHRcdFx0XHRsYW5nZ3JhcGhfcGF0aDogdGFza1BhdGgsXG5cdFx0XHRcdGxhbmdncmFwaF9jaGVja3BvaW50X25zOiB0YXNrQ2hlY2twb2ludE5hbWVzcGFjZVxuXHRcdFx0fTtcblx0XHRcdGlmIChmb3JFeGVjdXRpb24pIHtcblx0XHRcdFx0Y29uc3Qgbm9kZSA9IHByb2MuZ2V0Tm9kZSgpO1xuXHRcdFx0XHRpZiAobm9kZSAhPT0gdm9pZCAwKSB7XG5cdFx0XHRcdFx0aWYgKHByb2MubWV0YWRhdGEgIT09IHZvaWQgMCkgbWV0YWRhdGEgPSB7XG5cdFx0XHRcdFx0XHQuLi5tZXRhZGF0YSxcblx0XHRcdFx0XHRcdC4uLnByb2MubWV0YWRhdGFcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdGNvbnN0IHdyaXRlcyA9IFtdO1xuXHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRuYW1lLFxuXHRcdFx0XHRcdFx0aW5wdXQ6IHZhbCxcblx0XHRcdFx0XHRcdHByb2M6IG5vZGUsXG5cdFx0XHRcdFx0XHRzdWJncmFwaHM6IHByb2Muc3ViZ3JhcGhzLFxuXHRcdFx0XHRcdFx0d3JpdGVzLFxuXHRcdFx0XHRcdFx0Y29uZmlnOiBwYXRjaENvbmZpZyhtZXJnZUNvbmZpZ3MoY29uZmlnLCB7XG5cdFx0XHRcdFx0XHRcdG1ldGFkYXRhLFxuXHRcdFx0XHRcdFx0XHR0YWdzOiBwcm9jLnRhZ3MsXG5cdFx0XHRcdFx0XHRcdHN0b3JlOiBleHRyYS5zdG9yZSA/PyBjb25maWcuc3RvcmVcblx0XHRcdFx0XHRcdH0pLCB7XG5cdFx0XHRcdFx0XHRcdHJ1bk5hbWU6IG5hbWUsXG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrczogbWFuYWdlcj8uZ2V0Q2hpbGQoYGdyYXBoOnN0ZXA6JHtzdGVwfWApLFxuXHRcdFx0XHRcdFx0XHRjb25maWd1cmFibGU6IHtcblx0XHRcdFx0XHRcdFx0XHRbQ09ORklHX0tFWV9UQVNLX0lEXTogdGFza0lkLFxuXHRcdFx0XHRcdFx0XHRcdFtDT05GSUdfS0VZX1NFTkRdOiAod3JpdGVzXykgPT4gX2xvY2FsV3JpdGUoKGl0ZW1zKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR3cml0ZXMucHVzaCguLi5pdGVtcyk7XG5cdFx0XHRcdFx0XHRcdFx0fSwgcHJvY2Vzc2VzLCB3cml0ZXNfKSxcblx0XHRcdFx0XHRcdFx0XHRbQ09ORklHX0tFWV9SRUFEXTogKHNlbGVjdF8sIGZyZXNoXyA9IGZhbHNlKSA9PiBfbG9jYWxSZWFkKGNoZWNrcG9pbnQsIGNoYW5uZWxzLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRuYW1lLFxuXHRcdFx0XHRcdFx0XHRcdFx0d3JpdGVzLFxuXHRcdFx0XHRcdFx0XHRcdFx0dHJpZ2dlcnM6IFt0cmlnZ2VyXSxcblx0XHRcdFx0XHRcdFx0XHRcdHBhdGg6IHRhc2tQYXRoXG5cdFx0XHRcdFx0XHRcdFx0fSwgc2VsZWN0XywgZnJlc2hfKSxcblx0XHRcdFx0XHRcdFx0XHRbQ09ORklHX0tFWV9DSEVDS1BPSU5URVJdOiBjaGVja3BvaW50ZXIgPz8gY29uZmlndXJhYmxlW0NPTkZJR19LRVlfQ0hFQ0tQT0lOVEVSXSxcblx0XHRcdFx0XHRcdFx0XHRbQ09ORklHX0tFWV9DSEVDS1BPSU5UX01BUF06IHtcblx0XHRcdFx0XHRcdFx0XHRcdC4uLmNvbmZpZ3VyYWJsZVtDT05GSUdfS0VZX0NIRUNLUE9JTlRfTUFQXSxcblx0XHRcdFx0XHRcdFx0XHRcdFtwYXJlbnROYW1lc3BhY2VdOiBjaGVja3BvaW50LmlkXG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRbQ09ORklHX0tFWV9TQ1JBVENIUEFEXTogX3NjcmF0Y2hwYWQoe1xuXHRcdFx0XHRcdFx0XHRcdFx0cGVuZGluZ1dyaXRlczogcGVuZGluZ1dyaXRlcyA/PyBbXSxcblx0XHRcdFx0XHRcdFx0XHRcdHRhc2tJZCxcblx0XHRcdFx0XHRcdFx0XHRcdGN1cnJlbnRUYXNrSW5wdXQ6IHZhbCxcblx0XHRcdFx0XHRcdFx0XHRcdHJlc3VtZU1hcDogY29uZmlnLmNvbmZpZ3VyYWJsZT8uW0NPTkZJR19LRVlfUkVTVU1FX01BUF0sXG5cdFx0XHRcdFx0XHRcdFx0XHRuYW1lc3BhY2VIYXNoOiBYWEgzKHRhc2tDaGVja3BvaW50TmFtZXNwYWNlKVxuXHRcdFx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0XHRcdFtDT05GSUdfS0VZX1BSRVZJT1VTX1NUQVRFXTogY2hlY2twb2ludC5jaGFubmVsX3ZhbHVlc1tQUkVWSU9VU10sXG5cdFx0XHRcdFx0XHRcdFx0Y2hlY2twb2ludF9pZDogdm9pZCAwLFxuXHRcdFx0XHRcdFx0XHRcdGNoZWNrcG9pbnRfbnM6IHRhc2tDaGVja3BvaW50TmFtZXNwYWNlXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0dHJpZ2dlcnM6IFt0cmlnZ2VyXSxcblx0XHRcdFx0XHRcdHJldHJ5X3BvbGljeTogcHJvYy5yZXRyeVBvbGljeSxcblx0XHRcdFx0XHRcdGNhY2hlX2tleTogcHJvYy5jYWNoZVBvbGljeSA/IHtcblx0XHRcdFx0XHRcdFx0a2V5OiBYWEgzKChwcm9jLmNhY2hlUG9saWN5LmtleUZ1bmMgPz8gSlNPTi5zdHJpbmdpZnkpKFt2YWxdKSksXG5cdFx0XHRcdFx0XHRcdG5zOiBbXG5cdFx0XHRcdFx0XHRcdFx0Q0FDSEVfTlNfV1JJVEVTLFxuXHRcdFx0XHRcdFx0XHRcdHByb2MubmFtZSA/PyBcIl9fZHluYW1pY19fXCIsXG5cdFx0XHRcdFx0XHRcdFx0bmFtZVxuXHRcdFx0XHRcdFx0XHRdLFxuXHRcdFx0XHRcdFx0XHR0dGw6IHByb2MuY2FjaGVQb2xpY3kudHRsXG5cdFx0XHRcdFx0XHR9IDogdm9pZCAwLFxuXHRcdFx0XHRcdFx0aWQ6IHRhc2tJZCxcblx0XHRcdFx0XHRcdHBhdGg6IHRhc2tQYXRoLFxuXHRcdFx0XHRcdFx0d3JpdGVyczogcHJvYy5nZXRXcml0ZXJzKClcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgcmV0dXJuIHtcblx0XHRcdFx0aWQ6IHRhc2tJZCxcblx0XHRcdFx0bmFtZSxcblx0XHRcdFx0aW50ZXJydXB0czogW10sXG5cdFx0XHRcdHBhdGg6IHRhc2tQYXRoXG5cdFx0XHR9O1xuXHRcdH1cblx0fVxufVxuLyoqXG4qICBGdW5jdGlvbiBpbmplY3RlZCB1bmRlciBDT05GSUdfS0VZX1JFQUQgaW4gdGFzayBjb25maWcsIHRvIHJlYWQgY3VycmVudCBzdGF0ZS5cbiogIFVzZWQgYnkgY29uZGl0aW9uYWwgZWRnZXMgdG8gcmVhZCBhIGNvcHkgb2YgdGhlIHN0YXRlIHdpdGggcmVmbGVjdGluZyB0aGUgd3JpdGVzXG4qICBmcm9tIHRoYXQgbm9kZSBvbmx5LlxuKlxuKiBAaW50ZXJuYWxcbiovXG5mdW5jdGlvbiBfcHJvY0lucHV0KHByb2MsIGNoYW5uZWxzLCBmb3JFeGVjdXRpb24pIHtcblx0bGV0IHZhbDtcblx0aWYgKHR5cGVvZiBwcm9jLmNoYW5uZWxzID09PSBcIm9iamVjdFwiICYmICFBcnJheS5pc0FycmF5KHByb2MuY2hhbm5lbHMpKSB7XG5cdFx0dmFsID0ge307XG5cdFx0Zm9yIChjb25zdCBbaywgY2hhbl0gb2YgT2JqZWN0LmVudHJpZXMocHJvYy5jaGFubmVscykpIGlmIChwcm9jLnRyaWdnZXJzLmluY2x1ZGVzKGNoYW4pKSB0cnkge1xuXHRcdFx0dmFsW2tdID0gcmVhZENoYW5uZWwoY2hhbm5lbHMsIGNoYW4sIGZhbHNlKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRpZiAoZS5uYW1lID09PSBFbXB0eUNoYW5uZWxFcnJvci51bm1pbmlmaWFibGVfbmFtZSkgcmV0dXJuO1xuXHRcdFx0ZWxzZSB0aHJvdyBlO1xuXHRcdH1cblx0XHRlbHNlIGlmIChjaGFuIGluIGNoYW5uZWxzKSB0cnkge1xuXHRcdFx0dmFsW2tdID0gcmVhZENoYW5uZWwoY2hhbm5lbHMsIGNoYW4sIGZhbHNlKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRpZiAoZS5uYW1lID09PSBFbXB0eUNoYW5uZWxFcnJvci51bm1pbmlmaWFibGVfbmFtZSkgY29udGludWU7XG5cdFx0XHRlbHNlIHRocm93IGU7XG5cdFx0fVxuXHR9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkocHJvYy5jaGFubmVscykpIHtcblx0XHRsZXQgc3VjY2Vzc2Z1bFJlYWQgPSBmYWxzZTtcblx0XHRmb3IgKGNvbnN0IGNoYW4gb2YgcHJvYy5jaGFubmVscykgdHJ5IHtcblx0XHRcdHZhbCA9IHJlYWRDaGFubmVsKGNoYW5uZWxzLCBjaGFuLCBmYWxzZSk7XG5cdFx0XHRzdWNjZXNzZnVsUmVhZCA9IHRydWU7XG5cdFx0XHRicmVhaztcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRpZiAoZS5uYW1lID09PSBFbXB0eUNoYW5uZWxFcnJvci51bm1pbmlmaWFibGVfbmFtZSkgY29udGludWU7XG5cdFx0XHRlbHNlIHRocm93IGU7XG5cdFx0fVxuXHRcdGlmICghc3VjY2Vzc2Z1bFJlYWQpIHJldHVybjtcblx0fSBlbHNlIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBjaGFubmVscyB0eXBlLCBleHBlY3RlZCBsaXN0IG9yIGRpY3QsIGdvdCAke3Byb2MuY2hhbm5lbHN9YCk7XG5cdGlmIChmb3JFeGVjdXRpb24gJiYgcHJvYy5tYXBwZXIgIT09IHZvaWQgMCkgdmFsID0gcHJvYy5tYXBwZXIodmFsKTtcblx0cmV0dXJuIHZhbDtcbn1cbmZ1bmN0aW9uIF9zY3JhdGNocGFkKHsgcGVuZGluZ1dyaXRlcywgdGFza0lkLCBjdXJyZW50VGFza0lucHV0LCByZXN1bWVNYXAsIG5hbWVzcGFjZUhhc2ggfSkge1xuXHRjb25zdCBudWxsUmVzdW1lID0gcGVuZGluZ1dyaXRlcy5maW5kKChbd3JpdGVUYXNrSWQsIGNoYW5dKSA9PiB3cml0ZVRhc2tJZCA9PT0gTlVMTF9UQVNLX0lEICYmIGNoYW4gPT09IFJFU1VNRSk/LlsyXTtcblx0Y29uc3Qgc2NyYXRjaHBhZCA9IHtcblx0XHRjYWxsQ291bnRlcjogMCxcblx0XHRpbnRlcnJ1cHRDb3VudGVyOiAtMSxcblx0XHRyZXN1bWU6ICgoKSA9PiB7XG5cdFx0XHRjb25zdCByZXN1bHQgPSBwZW5kaW5nV3JpdGVzLmZpbHRlcigoW3dyaXRlVGFza0lkLCBjaGFuXSkgPT4gd3JpdGVUYXNrSWQgPT09IHRhc2tJZCAmJiBjaGFuID09PSBSRVNVTUUpLmZsYXRNYXAoKFtfd3JpdGVUYXNrSWQsIF9jaGFuLCByZXN1bWVdKSA9PiByZXN1bWUpO1xuXHRcdFx0aWYgKHJlc3VtZU1hcCAhPSBudWxsICYmIG5hbWVzcGFjZUhhc2ggaW4gcmVzdW1lTWFwKSB7XG5cdFx0XHRcdGNvbnN0IG1hcHBlZFJlc3VtZSA9IHJlc3VtZU1hcFtuYW1lc3BhY2VIYXNoXTtcblx0XHRcdFx0cmVzdWx0LnB1c2gobWFwcGVkUmVzdW1lKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fSkoKSxcblx0XHRudWxsUmVzdW1lLFxuXHRcdHN1YmdyYXBoQ291bnRlcjogMCxcblx0XHRjdXJyZW50VGFza0lucHV0LFxuXHRcdGNvbnN1bWVOdWxsUmVzdW1lOiAoKSA9PiB7XG5cdFx0XHRpZiAoc2NyYXRjaHBhZC5udWxsUmVzdW1lKSB7XG5cdFx0XHRcdGRlbGV0ZSBzY3JhdGNocGFkLm51bGxSZXN1bWU7XG5cdFx0XHRcdHBlbmRpbmdXcml0ZXMuc3BsaWNlKHBlbmRpbmdXcml0ZXMuZmluZEluZGV4KChbd3JpdGVUYXNrSWQsIGNoYW5dKSA9PiB3cml0ZVRhc2tJZCA9PT0gTlVMTF9UQVNLX0lEICYmIGNoYW4gPT09IFJFU1VNRSksIDEpO1xuXHRcdFx0XHRyZXR1cm4gbnVsbFJlc3VtZTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cdHJldHVybiBzY3JhdGNocGFkO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IF9hcHBseVdyaXRlcywgX2xvY2FsUmVhZCwgX3ByZXBhcmVOZXh0VGFza3MsIF9wcmVwYXJlU2luZ2xlVGFzaywgaW5jcmVtZW50LCBzaG91bGRJbnRlcnJ1cHQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFsZ28uanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/pregel/algo.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/pregel/call.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/pregel/call.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   call: () => (/* binding */ call),\n/* harmony export */   getRunnableForEntrypoint: () => (/* binding */ getRunnableForEntrypoint),\n/* harmony export */   getRunnableForFunc: () => (/* binding */ getRunnableForFunc)\n/* harmony export */ });\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/utils.js\");\n/* harmony import */ var _write_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./write.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/write.js\");\n/* harmony import */ var _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @langchain/core/singletons */ \"(ssr)/./node_modules/@langchain/core/dist/singletons/index.js\");\n/* harmony import */ var _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @langchain/core/runnables */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/index.js\");\n\n\n\n\n\n\n//#region src/pregel/call.ts\n/**\n* Wraps a user function in a Runnable that writes the returned value to the RETURN channel.\n*/\nfunction getRunnableForFunc(name, func) {\n\treturn new _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_4__.RunnableSequence({\n\t\tname,\n\t\tfirst: new _utils_js__WEBPACK_IMPORTED_MODULE_1__.RunnableCallable({\n\t\t\tfunc: (input) => func(...input),\n\t\t\tname,\n\t\t\ttrace: false,\n\t\t\trecurse: false\n\t\t}),\n\t\tlast: new _write_js__WEBPACK_IMPORTED_MODULE_2__.ChannelWrite([{\n\t\t\tchannel: _constants_js__WEBPACK_IMPORTED_MODULE_0__.RETURN,\n\t\t\tvalue: _write_js__WEBPACK_IMPORTED_MODULE_2__.PASSTHROUGH\n\t\t}], [_constants_js__WEBPACK_IMPORTED_MODULE_0__.TAG_HIDDEN])\n\t});\n}\nfunction getRunnableForEntrypoint(name, func) {\n\treturn new _utils_js__WEBPACK_IMPORTED_MODULE_1__.RunnableCallable({\n\t\tfunc: (input, config) => {\n\t\t\treturn func(input, config);\n\t\t},\n\t\tname,\n\t\ttrace: false,\n\t\trecurse: false\n\t});\n}\nfunction call({ func, name, cache, retry }, ...args) {\n\tconst config = _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_3__.AsyncLocalStorageProviderSingleton.getRunnableConfig();\n\tif (typeof config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_0__.CONFIG_KEY_CALL] === \"function\") return config.configurable[_constants_js__WEBPACK_IMPORTED_MODULE_0__.CONFIG_KEY_CALL](func, name, args, {\n\t\tretry,\n\t\tcache,\n\t\tcallbacks: config.callbacks\n\t});\n\tthrow new Error(\"Async local storage not initialized. Please call initializeAsyncLocalStorageSingleton() before using this function.\");\n}\n\n//#endregion\n\n//# sourceMappingURL=call.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvY2FsbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRTtBQUN2QjtBQUNRO0FBQ3lCO0FBQ25COztBQUU3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx1RUFBZ0I7QUFDNUI7QUFDQSxhQUFhLHVEQUFnQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxZQUFZLG1EQUFZO0FBQ3hCLFlBQVksaURBQU07QUFDbEIsVUFBVSxrREFBVztBQUNyQixHQUFHLElBQUkscURBQVU7QUFDakIsRUFBRTtBQUNGO0FBQ0E7QUFDQSxZQUFZLHVEQUFnQjtBQUM1QjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLGdCQUFnQiwwQkFBMEI7QUFDMUMsZ0JBQWdCLDBGQUFrQztBQUNsRCxrQ0FBa0MsMERBQWUsNkNBQTZDLDBEQUFlO0FBQzdHO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBOztBQUVBO0FBQzhEO0FBQzlEIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvY2FsbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDT05GSUdfS0VZX0NBTEwsIFJFVFVSTiwgVEFHX0hJRERFTiB9IGZyb20gXCIuLi9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7IFJ1bm5hYmxlQ2FsbGFibGUgfSBmcm9tIFwiLi4vdXRpbHMuanNcIjtcbmltcG9ydCB7IENoYW5uZWxXcml0ZSwgUEFTU1RIUk9VR0ggfSBmcm9tIFwiLi93cml0ZS5qc1wiO1xuaW1wb3J0IHsgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvc2luZ2xldG9uc1wiO1xuaW1wb3J0IHsgUnVubmFibGVTZXF1ZW5jZSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvcnVubmFibGVzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcHJlZ2VsL2NhbGwudHNcbi8qKlxuKiBXcmFwcyBhIHVzZXIgZnVuY3Rpb24gaW4gYSBSdW5uYWJsZSB0aGF0IHdyaXRlcyB0aGUgcmV0dXJuZWQgdmFsdWUgdG8gdGhlIFJFVFVSTiBjaGFubmVsLlxuKi9cbmZ1bmN0aW9uIGdldFJ1bm5hYmxlRm9yRnVuYyhuYW1lLCBmdW5jKSB7XG5cdHJldHVybiBuZXcgUnVubmFibGVTZXF1ZW5jZSh7XG5cdFx0bmFtZSxcblx0XHRmaXJzdDogbmV3IFJ1bm5hYmxlQ2FsbGFibGUoe1xuXHRcdFx0ZnVuYzogKGlucHV0KSA9PiBmdW5jKC4uLmlucHV0KSxcblx0XHRcdG5hbWUsXG5cdFx0XHR0cmFjZTogZmFsc2UsXG5cdFx0XHRyZWN1cnNlOiBmYWxzZVxuXHRcdH0pLFxuXHRcdGxhc3Q6IG5ldyBDaGFubmVsV3JpdGUoW3tcblx0XHRcdGNoYW5uZWw6IFJFVFVSTixcblx0XHRcdHZhbHVlOiBQQVNTVEhST1VHSFxuXHRcdH1dLCBbVEFHX0hJRERFTl0pXG5cdH0pO1xufVxuZnVuY3Rpb24gZ2V0UnVubmFibGVGb3JFbnRyeXBvaW50KG5hbWUsIGZ1bmMpIHtcblx0cmV0dXJuIG5ldyBSdW5uYWJsZUNhbGxhYmxlKHtcblx0XHRmdW5jOiAoaW5wdXQsIGNvbmZpZykgPT4ge1xuXHRcdFx0cmV0dXJuIGZ1bmMoaW5wdXQsIGNvbmZpZyk7XG5cdFx0fSxcblx0XHRuYW1lLFxuXHRcdHRyYWNlOiBmYWxzZSxcblx0XHRyZWN1cnNlOiBmYWxzZVxuXHR9KTtcbn1cbmZ1bmN0aW9uIGNhbGwoeyBmdW5jLCBuYW1lLCBjYWNoZSwgcmV0cnkgfSwgLi4uYXJncykge1xuXHRjb25zdCBjb25maWcgPSBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLmdldFJ1bm5hYmxlQ29uZmlnKCk7XG5cdGlmICh0eXBlb2YgY29uZmlnLmNvbmZpZ3VyYWJsZT8uW0NPTkZJR19LRVlfQ0FMTF0gPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIGNvbmZpZy5jb25maWd1cmFibGVbQ09ORklHX0tFWV9DQUxMXShmdW5jLCBuYW1lLCBhcmdzLCB7XG5cdFx0cmV0cnksXG5cdFx0Y2FjaGUsXG5cdFx0Y2FsbGJhY2tzOiBjb25maWcuY2FsbGJhY2tzXG5cdH0pO1xuXHR0aHJvdyBuZXcgRXJyb3IoXCJBc3luYyBsb2NhbCBzdG9yYWdlIG5vdCBpbml0aWFsaXplZC4gUGxlYXNlIGNhbGwgaW5pdGlhbGl6ZUFzeW5jTG9jYWxTdG9yYWdlU2luZ2xldG9uKCkgYmVmb3JlIHVzaW5nIHRoaXMgZnVuY3Rpb24uXCIpO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNhbGwsIGdldFJ1bm5hYmxlRm9yRW50cnlwb2ludCwgZ2V0UnVubmFibGVGb3JGdW5jIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYWxsLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/pregel/call.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/pregel/debug.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/pregel/debug.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mapDebugCheckpoint: () => (/* binding */ mapDebugCheckpoint),\n/* harmony export */   mapDebugTaskResults: () => (/* binding */ mapDebugTaskResults),\n/* harmony export */   mapDebugTasks: () => (/* binding */ mapDebugTasks),\n/* harmony export */   printStepCheckpoint: () => (/* binding */ printStepCheckpoint),\n/* harmony export */   printStepTasks: () => (/* binding */ printStepTasks),\n/* harmony export */   printStepWrites: () => (/* binding */ printStepWrites),\n/* harmony export */   tasksWithWrites: () => (/* binding */ tasksWithWrites)\n/* harmony export */ });\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _io_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./io.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/io.js\");\n/* harmony import */ var _utils_subgraph_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/subgraph.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/utils/subgraph.js\");\n\n\n\n\n//#region src/pregel/debug.ts\nconst COLORS_MAP = {\n\tblue: {\n\t\tstart: \"\\x1B[34m\",\n\t\tend: \"\\x1B[0m\"\n\t},\n\tgreen: {\n\t\tstart: \"\\x1B[32m\",\n\t\tend: \"\\x1B[0m\"\n\t},\n\tyellow: {\n\t\tstart: \"\\x1B[33;1m\",\n\t\tend: \"\\x1B[0m\"\n\t}\n};\n/**\n* Wrap some text in a color for printing to the console.\n*/\nconst wrap = (color, text) => `${color.start}${text}${color.end}`;\nfunction* mapDebugTasks(tasks) {\n\tfor (const { id, name, input, config, triggers, writes } of tasks) {\n\t\tif (config?.tags?.includes(_constants_js__WEBPACK_IMPORTED_MODULE_0__.TAG_HIDDEN)) continue;\n\t\tyield {\n\t\t\tid,\n\t\t\tname,\n\t\t\tinput,\n\t\t\ttriggers,\n\t\t\tinterrupts: writes.filter(([writeId, n]) => {\n\t\t\t\treturn writeId === id && n === _constants_js__WEBPACK_IMPORTED_MODULE_0__.INTERRUPT;\n\t\t\t}).map(([, v]) => {\n\t\t\t\treturn v;\n\t\t\t})\n\t\t};\n\t}\n}\nfunction isMultipleChannelWrite(value) {\n\tif (typeof value !== \"object\" || value === null) return false;\n\treturn \"$writes\" in value && Array.isArray(value.$writes);\n}\nfunction mapTaskResultWrites(writes) {\n\tconst result = {};\n\tfor (const [channel, value] of writes) {\n\t\tconst strChannel = String(channel);\n\t\tif (strChannel in result) {\n\t\t\tconst channelWrites = isMultipleChannelWrite(result[strChannel]) ? result[strChannel].$writes : [result[strChannel]];\n\t\t\tchannelWrites.push(value);\n\t\t\tresult[strChannel] = { $writes: channelWrites };\n\t\t} else result[strChannel] = value;\n\t}\n\treturn result;\n}\nfunction* mapDebugTaskResults(tasks, streamChannels) {\n\tfor (const [{ id, name, config }, writes] of tasks) {\n\t\tif (config?.tags?.includes(_constants_js__WEBPACK_IMPORTED_MODULE_0__.TAG_HIDDEN)) continue;\n\t\tyield {\n\t\t\tid,\n\t\t\tname,\n\t\t\tresult: mapTaskResultWrites(writes.filter(([channel]) => {\n\t\t\t\treturn Array.isArray(streamChannels) ? streamChannels.includes(channel) : channel === streamChannels;\n\t\t\t})),\n\t\t\tinterrupts: writes.filter((w) => w[0] === _constants_js__WEBPACK_IMPORTED_MODULE_0__.INTERRUPT).map((w) => w[1])\n\t\t};\n\t}\n}\nfunction* mapDebugCheckpoint(config, channels, streamChannels, metadata, tasks, pendingWrites, parentConfig, outputKeys) {\n\tfunction formatConfig(config$1) {\n\t\tconst pyConfig = {};\n\t\tif (config$1.callbacks != null) pyConfig.callbacks = config$1.callbacks;\n\t\tif (config$1.configurable != null) pyConfig.configurable = config$1.configurable;\n\t\tif (config$1.maxConcurrency != null) pyConfig.max_concurrency = config$1.maxConcurrency;\n\t\tif (config$1.metadata != null) pyConfig.metadata = config$1.metadata;\n\t\tif (config$1.recursionLimit != null) pyConfig.recursion_limit = config$1.recursionLimit;\n\t\tif (config$1.runId != null) pyConfig.run_id = config$1.runId;\n\t\tif (config$1.runName != null) pyConfig.run_name = config$1.runName;\n\t\tif (config$1.tags != null) pyConfig.tags = config$1.tags;\n\t\treturn pyConfig;\n\t}\n\tconst parentNs = config.configurable?.checkpoint_ns;\n\tconst taskStates = {};\n\tfor (const task of tasks) {\n\t\tif (!(task.subgraphs?.length ? task.subgraphs : [task.proc]).find(_utils_subgraph_js__WEBPACK_IMPORTED_MODULE_2__.findSubgraphPregel)) continue;\n\t\tlet taskNs = `${task.name}:${task.id}`;\n\t\tif (parentNs) taskNs = `${parentNs}|${taskNs}`;\n\t\ttaskStates[task.id] = { configurable: {\n\t\t\tthread_id: config.configurable?.thread_id,\n\t\t\tcheckpoint_ns: taskNs\n\t\t} };\n\t}\n\tyield {\n\t\tconfig: formatConfig(config),\n\t\tvalues: (0,_io_js__WEBPACK_IMPORTED_MODULE_1__.readChannels)(channels, streamChannels),\n\t\tmetadata,\n\t\tnext: tasks.map((task) => task.name),\n\t\ttasks: tasksWithWrites(tasks, pendingWrites, taskStates, outputKeys),\n\t\tparentConfig: parentConfig ? formatConfig(parentConfig) : void 0\n\t};\n}\nfunction tasksWithWrites(tasks, pendingWrites, states, outputKeys) {\n\treturn tasks.map((task) => {\n\t\tconst error = pendingWrites.find(([id, n]) => id === task.id && n === _constants_js__WEBPACK_IMPORTED_MODULE_0__.ERROR)?.[2];\n\t\tconst interrupts = pendingWrites.filter(([id, n]) => id === task.id && n === _constants_js__WEBPACK_IMPORTED_MODULE_0__.INTERRUPT).map(([, , v]) => v);\n\t\tconst result = (() => {\n\t\t\tif (error || interrupts.length || !pendingWrites.length) return void 0;\n\t\t\tconst idx = pendingWrites.findIndex(([tid, n]) => tid === task.id && n === _constants_js__WEBPACK_IMPORTED_MODULE_0__.RETURN);\n\t\t\tif (idx >= 0) return pendingWrites[idx][2];\n\t\t\tif (typeof outputKeys === \"string\") return pendingWrites.find(([tid, n]) => tid === task.id && n === outputKeys)?.[2];\n\t\t\tif (Array.isArray(outputKeys)) {\n\t\t\t\tconst results = pendingWrites.filter(([tid, n]) => tid === task.id && outputKeys.includes(n)).map(([, n, v]) => [n, v]);\n\t\t\t\tif (!results.length) return void 0;\n\t\t\t\treturn mapTaskResultWrites(results);\n\t\t\t}\n\t\t})();\n\t\tif (error) return {\n\t\t\tid: task.id,\n\t\t\tname: task.name,\n\t\t\tpath: task.path,\n\t\t\terror,\n\t\t\tinterrupts,\n\t\t\tresult\n\t\t};\n\t\tconst taskState = states?.[task.id];\n\t\treturn {\n\t\t\tid: task.id,\n\t\t\tname: task.name,\n\t\t\tpath: task.path,\n\t\t\tinterrupts,\n\t\t\t...taskState !== void 0 ? { state: taskState } : {},\n\t\t\tresult\n\t\t};\n\t});\n}\nfunction printStepCheckpoint(step, channels, whitelist) {\n\tconsole.log([\n\t\t`${wrap(COLORS_MAP.blue, `[${step}:checkpoint]`)}`,\n\t\t`\\x1b[1m State at the end of step ${step}:\\x1b[0m\\n`,\n\t\tJSON.stringify((0,_io_js__WEBPACK_IMPORTED_MODULE_1__.readChannels)(channels, whitelist), null, 2)\n\t].join(\"\"));\n}\nfunction printStepTasks(step, nextTasks) {\n\tconst nTasks = nextTasks.length;\n\tconsole.log([\n\t\t`${wrap(COLORS_MAP.blue, `[${step}:tasks]`)}`,\n\t\t`\\x1b[1m Starting step ${step} with ${nTasks} task${nTasks === 1 ? \"\" : \"s\"}:\\x1b[0m\\n`,\n\t\tnextTasks.map((task) => `- ${wrap(COLORS_MAP.green, String(task.name))} -> ${JSON.stringify(task.input, null, 2)}`).join(\"\\n\")\n\t].join(\"\"));\n}\nfunction printStepWrites(step, writes, whitelist) {\n\tconst byChannel = {};\n\tfor (const [channel, value] of writes) if (whitelist.includes(channel)) {\n\t\tif (!byChannel[channel]) byChannel[channel] = [];\n\t\tbyChannel[channel].push(value);\n\t}\n\tconsole.log([\n\t\t`${wrap(COLORS_MAP.blue, `[${step}:writes]`)}`,\n\t\t`\\x1b[1m Finished step ${step} with writes to ${Object.keys(byChannel).length} channel${Object.keys(byChannel).length !== 1 ? \"s\" : \"\"}:\\x1b[0m\\n`,\n\t\tObject.entries(byChannel).map(([name, vals]) => `- ${wrap(COLORS_MAP.yellow, name)} -> ${vals.map((v) => JSON.stringify(v)).join(\", \")}`).join(\"\\n\")\n\t].join(\"\"));\n}\n\n//#endregion\n\n//# sourceMappingURL=debug.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvZGVidWcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUF1RTtBQUNoQztBQUNrQjs7QUFFekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLFlBQVksRUFBRSxLQUFLLEVBQUUsVUFBVTtBQUNoRTtBQUNBLGNBQWMsNENBQTRDO0FBQzFELDZCQUE2QixxREFBVTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsb0RBQVM7QUFDNUMsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUIsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxrQkFBa0I7QUFDakMsNkJBQTZCLHFEQUFVO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osNkNBQTZDLG9EQUFTO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FLGtFQUFrQjtBQUN0RixrQkFBa0IsVUFBVSxHQUFHLFFBQVE7QUFDdkMsNEJBQTRCLFNBQVMsR0FBRyxPQUFPO0FBQy9DLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLG9EQUFZO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3RUFBd0UsZ0RBQUs7QUFDN0UsK0VBQStFLG9EQUFTO0FBQ3hGO0FBQ0E7QUFDQSw4RUFBOEUsaURBQU07QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixtQkFBbUIsSUFBSTtBQUN0RDtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLEtBQUssMEJBQTBCLEtBQUssZUFBZTtBQUNuRCxzQ0FBc0MsS0FBSztBQUMzQyxpQkFBaUIsb0RBQVk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssMEJBQTBCLEtBQUssVUFBVTtBQUM5QywyQkFBMkIsTUFBTSxPQUFPLFFBQVEsTUFBTSx3QkFBd0I7QUFDOUUsK0JBQStCLDJDQUEyQyxLQUFLLG9DQUFvQztBQUNuSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLDBCQUEwQixLQUFLLFdBQVc7QUFDL0MsMkJBQTJCLE1BQU0saUJBQWlCLCtCQUErQixTQUFTLCtDQUErQztBQUN6SSx1REFBdUQsK0JBQStCLEtBQUssOENBQThDO0FBQ3pJO0FBQ0E7O0FBRUE7QUFDeUk7QUFDekkiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC9kZWJ1Zy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFUlJPUiwgSU5URVJSVVBULCBSRVRVUk4sIFRBR19ISURERU4gfSBmcm9tIFwiLi4vY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyByZWFkQ2hhbm5lbHMgfSBmcm9tIFwiLi9pby5qc1wiO1xuaW1wb3J0IHsgZmluZFN1YmdyYXBoUHJlZ2VsIH0gZnJvbSBcIi4vdXRpbHMvc3ViZ3JhcGguanNcIjtcblxuLy8jcmVnaW9uIHNyYy9wcmVnZWwvZGVidWcudHNcbmNvbnN0IENPTE9SU19NQVAgPSB7XG5cdGJsdWU6IHtcblx0XHRzdGFydDogXCJcXHgxQlszNG1cIixcblx0XHRlbmQ6IFwiXFx4MUJbMG1cIlxuXHR9LFxuXHRncmVlbjoge1xuXHRcdHN0YXJ0OiBcIlxceDFCWzMybVwiLFxuXHRcdGVuZDogXCJcXHgxQlswbVwiXG5cdH0sXG5cdHllbGxvdzoge1xuXHRcdHN0YXJ0OiBcIlxceDFCWzMzOzFtXCIsXG5cdFx0ZW5kOiBcIlxceDFCWzBtXCJcblx0fVxufTtcbi8qKlxuKiBXcmFwIHNvbWUgdGV4dCBpbiBhIGNvbG9yIGZvciBwcmludGluZyB0byB0aGUgY29uc29sZS5cbiovXG5jb25zdCB3cmFwID0gKGNvbG9yLCB0ZXh0KSA9PiBgJHtjb2xvci5zdGFydH0ke3RleHR9JHtjb2xvci5lbmR9YDtcbmZ1bmN0aW9uKiBtYXBEZWJ1Z1Rhc2tzKHRhc2tzKSB7XG5cdGZvciAoY29uc3QgeyBpZCwgbmFtZSwgaW5wdXQsIGNvbmZpZywgdHJpZ2dlcnMsIHdyaXRlcyB9IG9mIHRhc2tzKSB7XG5cdFx0aWYgKGNvbmZpZz8udGFncz8uaW5jbHVkZXMoVEFHX0hJRERFTikpIGNvbnRpbnVlO1xuXHRcdHlpZWxkIHtcblx0XHRcdGlkLFxuXHRcdFx0bmFtZSxcblx0XHRcdGlucHV0LFxuXHRcdFx0dHJpZ2dlcnMsXG5cdFx0XHRpbnRlcnJ1cHRzOiB3cml0ZXMuZmlsdGVyKChbd3JpdGVJZCwgbl0pID0+IHtcblx0XHRcdFx0cmV0dXJuIHdyaXRlSWQgPT09IGlkICYmIG4gPT09IElOVEVSUlVQVDtcblx0XHRcdH0pLm1hcCgoWywgdl0pID0+IHtcblx0XHRcdFx0cmV0dXJuIHY7XG5cdFx0XHR9KVxuXHRcdH07XG5cdH1cbn1cbmZ1bmN0aW9uIGlzTXVsdGlwbGVDaGFubmVsV3JpdGUodmFsdWUpIHtcblx0aWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJvYmplY3RcIiB8fCB2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuXHRyZXR1cm4gXCIkd3JpdGVzXCIgaW4gdmFsdWUgJiYgQXJyYXkuaXNBcnJheSh2YWx1ZS4kd3JpdGVzKTtcbn1cbmZ1bmN0aW9uIG1hcFRhc2tSZXN1bHRXcml0ZXMod3JpdGVzKSB7XG5cdGNvbnN0IHJlc3VsdCA9IHt9O1xuXHRmb3IgKGNvbnN0IFtjaGFubmVsLCB2YWx1ZV0gb2Ygd3JpdGVzKSB7XG5cdFx0Y29uc3Qgc3RyQ2hhbm5lbCA9IFN0cmluZyhjaGFubmVsKTtcblx0XHRpZiAoc3RyQ2hhbm5lbCBpbiByZXN1bHQpIHtcblx0XHRcdGNvbnN0IGNoYW5uZWxXcml0ZXMgPSBpc011bHRpcGxlQ2hhbm5lbFdyaXRlKHJlc3VsdFtzdHJDaGFubmVsXSkgPyByZXN1bHRbc3RyQ2hhbm5lbF0uJHdyaXRlcyA6IFtyZXN1bHRbc3RyQ2hhbm5lbF1dO1xuXHRcdFx0Y2hhbm5lbFdyaXRlcy5wdXNoKHZhbHVlKTtcblx0XHRcdHJlc3VsdFtzdHJDaGFubmVsXSA9IHsgJHdyaXRlczogY2hhbm5lbFdyaXRlcyB9O1xuXHRcdH0gZWxzZSByZXN1bHRbc3RyQ2hhbm5lbF0gPSB2YWx1ZTtcblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24qIG1hcERlYnVnVGFza1Jlc3VsdHModGFza3MsIHN0cmVhbUNoYW5uZWxzKSB7XG5cdGZvciAoY29uc3QgW3sgaWQsIG5hbWUsIGNvbmZpZyB9LCB3cml0ZXNdIG9mIHRhc2tzKSB7XG5cdFx0aWYgKGNvbmZpZz8udGFncz8uaW5jbHVkZXMoVEFHX0hJRERFTikpIGNvbnRpbnVlO1xuXHRcdHlpZWxkIHtcblx0XHRcdGlkLFxuXHRcdFx0bmFtZSxcblx0XHRcdHJlc3VsdDogbWFwVGFza1Jlc3VsdFdyaXRlcyh3cml0ZXMuZmlsdGVyKChbY2hhbm5lbF0pID0+IHtcblx0XHRcdFx0cmV0dXJuIEFycmF5LmlzQXJyYXkoc3RyZWFtQ2hhbm5lbHMpID8gc3RyZWFtQ2hhbm5lbHMuaW5jbHVkZXMoY2hhbm5lbCkgOiBjaGFubmVsID09PSBzdHJlYW1DaGFubmVscztcblx0XHRcdH0pKSxcblx0XHRcdGludGVycnVwdHM6IHdyaXRlcy5maWx0ZXIoKHcpID0+IHdbMF0gPT09IElOVEVSUlVQVCkubWFwKCh3KSA9PiB3WzFdKVxuXHRcdH07XG5cdH1cbn1cbmZ1bmN0aW9uKiBtYXBEZWJ1Z0NoZWNrcG9pbnQoY29uZmlnLCBjaGFubmVscywgc3RyZWFtQ2hhbm5lbHMsIG1ldGFkYXRhLCB0YXNrcywgcGVuZGluZ1dyaXRlcywgcGFyZW50Q29uZmlnLCBvdXRwdXRLZXlzKSB7XG5cdGZ1bmN0aW9uIGZvcm1hdENvbmZpZyhjb25maWckMSkge1xuXHRcdGNvbnN0IHB5Q29uZmlnID0ge307XG5cdFx0aWYgKGNvbmZpZyQxLmNhbGxiYWNrcyAhPSBudWxsKSBweUNvbmZpZy5jYWxsYmFja3MgPSBjb25maWckMS5jYWxsYmFja3M7XG5cdFx0aWYgKGNvbmZpZyQxLmNvbmZpZ3VyYWJsZSAhPSBudWxsKSBweUNvbmZpZy5jb25maWd1cmFibGUgPSBjb25maWckMS5jb25maWd1cmFibGU7XG5cdFx0aWYgKGNvbmZpZyQxLm1heENvbmN1cnJlbmN5ICE9IG51bGwpIHB5Q29uZmlnLm1heF9jb25jdXJyZW5jeSA9IGNvbmZpZyQxLm1heENvbmN1cnJlbmN5O1xuXHRcdGlmIChjb25maWckMS5tZXRhZGF0YSAhPSBudWxsKSBweUNvbmZpZy5tZXRhZGF0YSA9IGNvbmZpZyQxLm1ldGFkYXRhO1xuXHRcdGlmIChjb25maWckMS5yZWN1cnNpb25MaW1pdCAhPSBudWxsKSBweUNvbmZpZy5yZWN1cnNpb25fbGltaXQgPSBjb25maWckMS5yZWN1cnNpb25MaW1pdDtcblx0XHRpZiAoY29uZmlnJDEucnVuSWQgIT0gbnVsbCkgcHlDb25maWcucnVuX2lkID0gY29uZmlnJDEucnVuSWQ7XG5cdFx0aWYgKGNvbmZpZyQxLnJ1bk5hbWUgIT0gbnVsbCkgcHlDb25maWcucnVuX25hbWUgPSBjb25maWckMS5ydW5OYW1lO1xuXHRcdGlmIChjb25maWckMS50YWdzICE9IG51bGwpIHB5Q29uZmlnLnRhZ3MgPSBjb25maWckMS50YWdzO1xuXHRcdHJldHVybiBweUNvbmZpZztcblx0fVxuXHRjb25zdCBwYXJlbnROcyA9IGNvbmZpZy5jb25maWd1cmFibGU/LmNoZWNrcG9pbnRfbnM7XG5cdGNvbnN0IHRhc2tTdGF0ZXMgPSB7fTtcblx0Zm9yIChjb25zdCB0YXNrIG9mIHRhc2tzKSB7XG5cdFx0aWYgKCEodGFzay5zdWJncmFwaHM/Lmxlbmd0aCA/IHRhc2suc3ViZ3JhcGhzIDogW3Rhc2sucHJvY10pLmZpbmQoZmluZFN1YmdyYXBoUHJlZ2VsKSkgY29udGludWU7XG5cdFx0bGV0IHRhc2tOcyA9IGAke3Rhc2submFtZX06JHt0YXNrLmlkfWA7XG5cdFx0aWYgKHBhcmVudE5zKSB0YXNrTnMgPSBgJHtwYXJlbnROc318JHt0YXNrTnN9YDtcblx0XHR0YXNrU3RhdGVzW3Rhc2suaWRdID0geyBjb25maWd1cmFibGU6IHtcblx0XHRcdHRocmVhZF9pZDogY29uZmlnLmNvbmZpZ3VyYWJsZT8udGhyZWFkX2lkLFxuXHRcdFx0Y2hlY2twb2ludF9uczogdGFza05zXG5cdFx0fSB9O1xuXHR9XG5cdHlpZWxkIHtcblx0XHRjb25maWc6IGZvcm1hdENvbmZpZyhjb25maWcpLFxuXHRcdHZhbHVlczogcmVhZENoYW5uZWxzKGNoYW5uZWxzLCBzdHJlYW1DaGFubmVscyksXG5cdFx0bWV0YWRhdGEsXG5cdFx0bmV4dDogdGFza3MubWFwKCh0YXNrKSA9PiB0YXNrLm5hbWUpLFxuXHRcdHRhc2tzOiB0YXNrc1dpdGhXcml0ZXModGFza3MsIHBlbmRpbmdXcml0ZXMsIHRhc2tTdGF0ZXMsIG91dHB1dEtleXMpLFxuXHRcdHBhcmVudENvbmZpZzogcGFyZW50Q29uZmlnID8gZm9ybWF0Q29uZmlnKHBhcmVudENvbmZpZykgOiB2b2lkIDBcblx0fTtcbn1cbmZ1bmN0aW9uIHRhc2tzV2l0aFdyaXRlcyh0YXNrcywgcGVuZGluZ1dyaXRlcywgc3RhdGVzLCBvdXRwdXRLZXlzKSB7XG5cdHJldHVybiB0YXNrcy5tYXAoKHRhc2spID0+IHtcblx0XHRjb25zdCBlcnJvciA9IHBlbmRpbmdXcml0ZXMuZmluZCgoW2lkLCBuXSkgPT4gaWQgPT09IHRhc2suaWQgJiYgbiA9PT0gRVJST1IpPy5bMl07XG5cdFx0Y29uc3QgaW50ZXJydXB0cyA9IHBlbmRpbmdXcml0ZXMuZmlsdGVyKChbaWQsIG5dKSA9PiBpZCA9PT0gdGFzay5pZCAmJiBuID09PSBJTlRFUlJVUFQpLm1hcCgoWywgLCB2XSkgPT4gdik7XG5cdFx0Y29uc3QgcmVzdWx0ID0gKCgpID0+IHtcblx0XHRcdGlmIChlcnJvciB8fCBpbnRlcnJ1cHRzLmxlbmd0aCB8fCAhcGVuZGluZ1dyaXRlcy5sZW5ndGgpIHJldHVybiB2b2lkIDA7XG5cdFx0XHRjb25zdCBpZHggPSBwZW5kaW5nV3JpdGVzLmZpbmRJbmRleCgoW3RpZCwgbl0pID0+IHRpZCA9PT0gdGFzay5pZCAmJiBuID09PSBSRVRVUk4pO1xuXHRcdFx0aWYgKGlkeCA+PSAwKSByZXR1cm4gcGVuZGluZ1dyaXRlc1tpZHhdWzJdO1xuXHRcdFx0aWYgKHR5cGVvZiBvdXRwdXRLZXlzID09PSBcInN0cmluZ1wiKSByZXR1cm4gcGVuZGluZ1dyaXRlcy5maW5kKChbdGlkLCBuXSkgPT4gdGlkID09PSB0YXNrLmlkICYmIG4gPT09IG91dHB1dEtleXMpPy5bMl07XG5cdFx0XHRpZiAoQXJyYXkuaXNBcnJheShvdXRwdXRLZXlzKSkge1xuXHRcdFx0XHRjb25zdCByZXN1bHRzID0gcGVuZGluZ1dyaXRlcy5maWx0ZXIoKFt0aWQsIG5dKSA9PiB0aWQgPT09IHRhc2suaWQgJiYgb3V0cHV0S2V5cy5pbmNsdWRlcyhuKSkubWFwKChbLCBuLCB2XSkgPT4gW24sIHZdKTtcblx0XHRcdFx0aWYgKCFyZXN1bHRzLmxlbmd0aCkgcmV0dXJuIHZvaWQgMDtcblx0XHRcdFx0cmV0dXJuIG1hcFRhc2tSZXN1bHRXcml0ZXMocmVzdWx0cyk7XG5cdFx0XHR9XG5cdFx0fSkoKTtcblx0XHRpZiAoZXJyb3IpIHJldHVybiB7XG5cdFx0XHRpZDogdGFzay5pZCxcblx0XHRcdG5hbWU6IHRhc2submFtZSxcblx0XHRcdHBhdGg6IHRhc2sucGF0aCxcblx0XHRcdGVycm9yLFxuXHRcdFx0aW50ZXJydXB0cyxcblx0XHRcdHJlc3VsdFxuXHRcdH07XG5cdFx0Y29uc3QgdGFza1N0YXRlID0gc3RhdGVzPy5bdGFzay5pZF07XG5cdFx0cmV0dXJuIHtcblx0XHRcdGlkOiB0YXNrLmlkLFxuXHRcdFx0bmFtZTogdGFzay5uYW1lLFxuXHRcdFx0cGF0aDogdGFzay5wYXRoLFxuXHRcdFx0aW50ZXJydXB0cyxcblx0XHRcdC4uLnRhc2tTdGF0ZSAhPT0gdm9pZCAwID8geyBzdGF0ZTogdGFza1N0YXRlIH0gOiB7fSxcblx0XHRcdHJlc3VsdFxuXHRcdH07XG5cdH0pO1xufVxuZnVuY3Rpb24gcHJpbnRTdGVwQ2hlY2twb2ludChzdGVwLCBjaGFubmVscywgd2hpdGVsaXN0KSB7XG5cdGNvbnNvbGUubG9nKFtcblx0XHRgJHt3cmFwKENPTE9SU19NQVAuYmx1ZSwgYFske3N0ZXB9OmNoZWNrcG9pbnRdYCl9YCxcblx0XHRgXFx4MWJbMW0gU3RhdGUgYXQgdGhlIGVuZCBvZiBzdGVwICR7c3RlcH06XFx4MWJbMG1cXG5gLFxuXHRcdEpTT04uc3RyaW5naWZ5KHJlYWRDaGFubmVscyhjaGFubmVscywgd2hpdGVsaXN0KSwgbnVsbCwgMilcblx0XS5qb2luKFwiXCIpKTtcbn1cbmZ1bmN0aW9uIHByaW50U3RlcFRhc2tzKHN0ZXAsIG5leHRUYXNrcykge1xuXHRjb25zdCBuVGFza3MgPSBuZXh0VGFza3MubGVuZ3RoO1xuXHRjb25zb2xlLmxvZyhbXG5cdFx0YCR7d3JhcChDT0xPUlNfTUFQLmJsdWUsIGBbJHtzdGVwfTp0YXNrc11gKX1gLFxuXHRcdGBcXHgxYlsxbSBTdGFydGluZyBzdGVwICR7c3RlcH0gd2l0aCAke25UYXNrc30gdGFzayR7blRhc2tzID09PSAxID8gXCJcIiA6IFwic1wifTpcXHgxYlswbVxcbmAsXG5cdFx0bmV4dFRhc2tzLm1hcCgodGFzaykgPT4gYC0gJHt3cmFwKENPTE9SU19NQVAuZ3JlZW4sIFN0cmluZyh0YXNrLm5hbWUpKX0gLT4gJHtKU09OLnN0cmluZ2lmeSh0YXNrLmlucHV0LCBudWxsLCAyKX1gKS5qb2luKFwiXFxuXCIpXG5cdF0uam9pbihcIlwiKSk7XG59XG5mdW5jdGlvbiBwcmludFN0ZXBXcml0ZXMoc3RlcCwgd3JpdGVzLCB3aGl0ZWxpc3QpIHtcblx0Y29uc3QgYnlDaGFubmVsID0ge307XG5cdGZvciAoY29uc3QgW2NoYW5uZWwsIHZhbHVlXSBvZiB3cml0ZXMpIGlmICh3aGl0ZWxpc3QuaW5jbHVkZXMoY2hhbm5lbCkpIHtcblx0XHRpZiAoIWJ5Q2hhbm5lbFtjaGFubmVsXSkgYnlDaGFubmVsW2NoYW5uZWxdID0gW107XG5cdFx0YnlDaGFubmVsW2NoYW5uZWxdLnB1c2godmFsdWUpO1xuXHR9XG5cdGNvbnNvbGUubG9nKFtcblx0XHRgJHt3cmFwKENPTE9SU19NQVAuYmx1ZSwgYFske3N0ZXB9OndyaXRlc11gKX1gLFxuXHRcdGBcXHgxYlsxbSBGaW5pc2hlZCBzdGVwICR7c3RlcH0gd2l0aCB3cml0ZXMgdG8gJHtPYmplY3Qua2V5cyhieUNoYW5uZWwpLmxlbmd0aH0gY2hhbm5lbCR7T2JqZWN0LmtleXMoYnlDaGFubmVsKS5sZW5ndGggIT09IDEgPyBcInNcIiA6IFwiXCJ9OlxceDFiWzBtXFxuYCxcblx0XHRPYmplY3QuZW50cmllcyhieUNoYW5uZWwpLm1hcCgoW25hbWUsIHZhbHNdKSA9PiBgLSAke3dyYXAoQ09MT1JTX01BUC55ZWxsb3csIG5hbWUpfSAtPiAke3ZhbHMubWFwKCh2KSA9PiBKU09OLnN0cmluZ2lmeSh2KSkuam9pbihcIiwgXCIpfWApLmpvaW4oXCJcXG5cIilcblx0XS5qb2luKFwiXCIpKTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBtYXBEZWJ1Z0NoZWNrcG9pbnQsIG1hcERlYnVnVGFza1Jlc3VsdHMsIG1hcERlYnVnVGFza3MsIHByaW50U3RlcENoZWNrcG9pbnQsIHByaW50U3RlcFRhc2tzLCBwcmludFN0ZXBXcml0ZXMsIHRhc2tzV2l0aFdyaXRlcyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVidWcuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/pregel/debug.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/pregel/index.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/pregel/index.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Channel: () => (/* binding */ Channel),\n/* harmony export */   Pregel: () => (/* binding */ Pregel)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _channels_base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../channels/base.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/base.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../constants.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _utils_config_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/config.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/utils/config.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/utils.js\");\n/* harmony import */ var _write_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./write.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/write.js\");\n/* harmony import */ var _read_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./read.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/read.js\");\n/* harmony import */ var _io_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./io.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/io.js\");\n/* harmony import */ var _utils_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utils/index.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/utils/index.js\");\n/* harmony import */ var _algo_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./algo.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/algo.js\");\n/* harmony import */ var _utils_subgraph_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./utils/subgraph.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/utils/subgraph.js\");\n/* harmony import */ var _debug_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./debug.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/debug.js\");\n/* harmony import */ var _stream_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./stream.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/stream.js\");\n/* harmony import */ var _loop_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./loop.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/loop.js\");\n/* harmony import */ var _messages_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./messages.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/messages.js\");\n/* harmony import */ var _runner_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./runner.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/runner.js\");\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./validate.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/validate.js\");\n/* harmony import */ var _channels_topic_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../channels/topic.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/topic.js\");\n/* harmony import */ var _interrupt_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../interrupt.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/interrupt.js\");\n/* harmony import */ var _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @langchain/langgraph-checkpoint */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/index.js\");\n/* harmony import */ var _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @langchain/core/runnables */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/pregel/index.ts\n/**\n* Utility class for working with channels in the Pregel system.\n* Provides static methods for subscribing to channels and writing to them.\n*\n* Channels are the communication pathways between nodes in a Pregel graph.\n* They enable message passing and state updates between different parts of the graph.\n*/\nvar Channel = class {\n\tstatic subscribeTo(channels, options) {\n\t\tconst { key, tags } = {\n\t\t\tkey: void 0,\n\t\t\ttags: void 0,\n\t\t\t...options ?? {}\n\t\t};\n\t\tif (Array.isArray(channels) && key !== void 0) throw new Error(\"Can't specify a key when subscribing to multiple channels\");\n\t\tlet channelMappingOrArray;\n\t\tif (typeof channels === \"string\") if (key) channelMappingOrArray = { [key]: channels };\n\t\telse channelMappingOrArray = [channels];\n\t\telse channelMappingOrArray = Object.fromEntries(channels.map((chan) => [chan, chan]));\n\t\treturn new _read_js__WEBPACK_IMPORTED_MODULE_6__.PregelNode({\n\t\t\tchannels: channelMappingOrArray,\n\t\t\ttriggers: Array.isArray(channels) ? channels : [channels],\n\t\t\ttags\n\t\t});\n\t}\n\t/**\n\t* Creates a ChannelWrite that specifies how to write values to channels.\n\t* This is used to define how nodes send output to channels.\n\t*\n\t* @example\n\t* ```typescript\n\t* // Write to multiple channels\n\t* const write = Channel.writeTo([\"output\", \"state\"]);\n\t*\n\t* // Write with specific values\n\t* const write = Channel.writeTo([\"output\"], {\n\t*   state: \"completed\",\n\t*   result: calculateResult()\n\t* });\n\t*\n\t* // Write with a transformation function\n\t* const write = Channel.writeTo([\"output\"], {\n\t*   result: (x) => processResult(x)\n\t* });\n\t* ```\n\t*\n\t* @param channels - Array of channel names to write to\n\t* @param writes - Optional map of channel names to values or transformations\n\t* @returns A ChannelWrite object that can be used to write to the specified channels\n\t*/\n\tstatic writeTo(channels, writes) {\n\t\tconst channelWriteEntries = [];\n\t\tfor (const channel of channels) channelWriteEntries.push({\n\t\t\tchannel,\n\t\t\tvalue: _write_js__WEBPACK_IMPORTED_MODULE_5__.PASSTHROUGH,\n\t\t\tskipNone: false\n\t\t});\n\t\tfor (const [key, value] of Object.entries(writes ?? {})) if (_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_20__.Runnable.isRunnable(value) || typeof value === \"function\") channelWriteEntries.push({\n\t\t\tchannel: key,\n\t\t\tvalue: _write_js__WEBPACK_IMPORTED_MODULE_5__.PASSTHROUGH,\n\t\t\tskipNone: true,\n\t\t\tmapper: (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_20__._coerceToRunnable)(value)\n\t\t});\n\t\telse channelWriteEntries.push({\n\t\t\tchannel: key,\n\t\t\tvalue,\n\t\t\tskipNone: false\n\t\t});\n\t\treturn new _write_js__WEBPACK_IMPORTED_MODULE_5__.ChannelWrite(channelWriteEntries);\n\t}\n};\nvar PartialRunnable = class extends _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_20__.Runnable {\n\tlc_namespace = [\"langgraph\", \"pregel\"];\n\tinvoke(_input, _options) {\n\t\tthrow new Error(\"Not implemented\");\n\t}\n\twithConfig(_config) {\n\t\treturn super.withConfig(_config);\n\t}\n\tstream(input, options) {\n\t\treturn super.stream(input, options);\n\t}\n};\n/**\n* The Pregel class is the core runtime engine of LangGraph, implementing a message-passing graph computation model\n* inspired by [Google's Pregel system](https://research.google/pubs/pregel-a-system-for-large-scale-graph-processing/).\n* It provides the foundation for building reliable, controllable agent workflows that can evolve state over time.\n*\n* Key features:\n* - Message passing between nodes in discrete \"supersteps\"\n* - Built-in persistence layer through checkpointers\n* - First-class streaming support for values, updates, and events\n* - Human-in-the-loop capabilities via interrupts\n* - Support for parallel node execution within supersteps\n*\n* The Pregel class is not intended to be instantiated directly by consumers. Instead, use the following higher-level APIs:\n* - {@link StateGraph}: The main graph class for building agent workflows\n*   - Compiling a {@link StateGraph} will return a {@link CompiledGraph} instance, which extends `Pregel`\n* - Functional API: A declarative approach using tasks and entrypoints\n*   - A `Pregel` instance is returned by the {@link entrypoint} function\n*\n* @example\n* ```typescript\n* // Using StateGraph API\n* const graph = new StateGraph(annotation)\n*   .addNode(\"nodeA\", myNodeFunction)\n*   .addEdge(\"nodeA\", \"nodeB\")\n*   .compile();\n*\n* // The compiled graph is a Pregel instance\n* const result = await graph.invoke(input);\n* ```\n*\n* @example\n* ```typescript\n* // Using Functional API\n* import { task, entrypoint } from \"@langchain/langgraph\";\n* import { MemorySaver } from \"@langchain/langgraph-checkpoint\";\n*\n* // Define tasks that can be composed\n* const addOne = task(\"add\", async (x: number) => x + 1);\n*\n* // Create a workflow using the entrypoint function\n* const workflow = entrypoint({\n*   name: \"workflow\",\n*   checkpointer: new MemorySaver()\n* }, async (numbers: number[]) => {\n*   // Tasks can be run in parallel\n*   const results = await Promise.all(numbers.map(n => addOne(n)));\n*   return results;\n* });\n*\n* // The workflow is a Pregel instance\n* const result = await workflow.invoke([1, 2, 3]); // Returns [2, 3, 4]\n* ```\n*\n* @typeParam Nodes - Mapping of node names to their {@link PregelNode} implementations\n* @typeParam Channels - Mapping of channel names to their {@link BaseChannel} or {@link ManagedValueSpec} implementations\n* @typeParam ContextType - Type of context that can be passed to the graph\n* @typeParam InputType - Type of input values accepted by the graph\n* @typeParam OutputType - Type of output values produced by the graph\n*/\nvar Pregel = class extends PartialRunnable {\n\t/**\n\t* Name of the class when serialized\n\t* @internal\n\t*/\n\tstatic lc_name() {\n\t\treturn \"LangGraph\";\n\t}\n\t/** @internal LangChain namespace for serialization necessary because Pregel extends Runnable */\n\tlc_namespace = [\"langgraph\", \"pregel\"];\n\t/** @internal Flag indicating this is a Pregel instance - necessary for serialization */\n\tlg_is_pregel = true;\n\t/** The nodes in the graph, mapping node names to their PregelNode instances */\n\tnodes;\n\t/** The channels in the graph, mapping channel names to their BaseChannel or ManagedValueSpec instances */\n\tchannels;\n\t/**\n\t* The input channels for the graph. These channels receive the initial input when the graph is invoked.\n\t* Can be a single channel key or an array of channel keys.\n\t*/\n\tinputChannels;\n\t/**\n\t* The output channels for the graph. These channels contain the final output when the graph completes.\n\t* Can be a single channel key or an array of channel keys.\n\t*/\n\toutputChannels;\n\t/** Whether to automatically validate the graph structure when it is compiled. Defaults to true. */\n\tautoValidate = true;\n\t/**\n\t* The streaming modes enabled for this graph. Defaults to [\"values\"].\n\t* Supported modes:\n\t* - \"values\": Streams the full state after each step\n\t* - \"updates\": Streams state updates after each step\n\t* - \"messages\": Streams messages from within nodes\n\t* - \"custom\": Streams custom events from within nodes\n\t* - \"debug\": Streams events related to the execution of the graph - useful for tracing & debugging graph execution\n\t*/\n\tstreamMode = [\"values\"];\n\t/**\n\t* Optional channels to stream. If not specified, all channels will be streamed.\n\t* Can be a single channel key or an array of channel keys.\n\t*/\n\tstreamChannels;\n\t/**\n\t* Optional array of node names or \"all\" to interrupt after executing these nodes.\n\t* Used for implementing human-in-the-loop workflows.\n\t*/\n\tinterruptAfter;\n\t/**\n\t* Optional array of node names or \"all\" to interrupt before executing these nodes.\n\t* Used for implementing human-in-the-loop workflows.\n\t*/\n\tinterruptBefore;\n\t/** Optional timeout in milliseconds for the execution of each superstep */\n\tstepTimeout;\n\t/** Whether to enable debug logging. Defaults to false. */\n\tdebug = false;\n\t/**\n\t* Optional checkpointer for persisting graph state.\n\t* When provided, saves a checkpoint of the graph state at every superstep.\n\t* When false or undefined, checkpointing is disabled, and the graph will not be able to save or restore state.\n\t*/\n\tcheckpointer;\n\t/** Optional retry policy for handling failures in node execution */\n\tretryPolicy;\n\t/** The default configuration for graph execution, can be overridden on a per-invocation basis */\n\tconfig;\n\t/**\n\t* Optional long-term memory store for the graph, allows for persistence & retrieval of data across threads\n\t*/\n\tstore;\n\t/**\n\t* Optional cache for the graph, useful for caching tasks.\n\t*/\n\tcache;\n\t/**\n\t* Optional interrupt helper function.\n\t* @internal\n\t*/\n\tuserInterrupt;\n\t/**\n\t* The trigger to node mapping for the graph run.\n\t* @internal\n\t*/\n\ttriggerToNodes = {};\n\t/**\n\t* Constructor for Pregel - meant for internal use only.\n\t*\n\t* @internal\n\t*/\n\tconstructor(fields) {\n\t\tsuper(fields);\n\t\tlet { streamMode } = fields;\n\t\tif (streamMode != null && !Array.isArray(streamMode)) streamMode = [streamMode];\n\t\tthis.nodes = fields.nodes;\n\t\tthis.channels = fields.channels;\n\t\tif (_constants_js__WEBPACK_IMPORTED_MODULE_2__.TASKS in this.channels && \"lc_graph_name\" in this.channels[_constants_js__WEBPACK_IMPORTED_MODULE_2__.TASKS] && this.channels[_constants_js__WEBPACK_IMPORTED_MODULE_2__.TASKS].lc_graph_name !== \"Topic\") throw new Error(`Channel '${_constants_js__WEBPACK_IMPORTED_MODULE_2__.TASKS}' is reserved and cannot be used in the graph.`);\n\t\telse this.channels[_constants_js__WEBPACK_IMPORTED_MODULE_2__.TASKS] = new _channels_topic_js__WEBPACK_IMPORTED_MODULE_17__.Topic({ accumulate: false });\n\t\tthis.autoValidate = fields.autoValidate ?? this.autoValidate;\n\t\tthis.streamMode = streamMode ?? this.streamMode;\n\t\tthis.inputChannels = fields.inputChannels;\n\t\tthis.outputChannels = fields.outputChannels;\n\t\tthis.streamChannels = fields.streamChannels ?? this.streamChannels;\n\t\tthis.interruptAfter = fields.interruptAfter;\n\t\tthis.interruptBefore = fields.interruptBefore;\n\t\tthis.stepTimeout = fields.stepTimeout ?? this.stepTimeout;\n\t\tthis.debug = fields.debug ?? this.debug;\n\t\tthis.checkpointer = fields.checkpointer;\n\t\tthis.retryPolicy = fields.retryPolicy;\n\t\tthis.config = fields.config;\n\t\tthis.store = fields.store;\n\t\tthis.cache = fields.cache;\n\t\tthis.name = fields.name;\n\t\tthis.triggerToNodes = fields.triggerToNodes ?? this.triggerToNodes;\n\t\tthis.userInterrupt = fields.userInterrupt;\n\t\tif (this.autoValidate) this.validate();\n\t}\n\t/**\n\t* Creates a new instance of the Pregel graph with updated configuration.\n\t* This method follows the immutable pattern - instead of modifying the current instance,\n\t* it returns a new instance with the merged configuration.\n\t*\n\t* @example\n\t* ```typescript\n\t* // Create a new instance with debug enabled\n\t* const debugGraph = graph.withConfig({ debug: true });\n\t*\n\t* // Create a new instance with a specific thread ID\n\t* const threadGraph = graph.withConfig({\n\t*   configurable: { thread_id: \"123\" }\n\t* });\n\t* ```\n\t*\n\t* @param config - The configuration to merge with the current configuration\n\t* @returns A new Pregel instance with the merged configuration\n\t*/\n\twithConfig(config) {\n\t\tconst mergedConfig = (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_20__.mergeConfigs)(this.config, config);\n\t\treturn new this.constructor({\n\t\t\t...this,\n\t\t\tconfig: mergedConfig\n\t\t});\n\t}\n\t/**\n\t* Validates the graph structure to ensure it is well-formed.\n\t* Checks for:\n\t* - No orphaned nodes\n\t* - Valid input/output channel configurations\n\t* - Valid interrupt configurations\n\t*\n\t* @returns this - The Pregel instance for method chaining\n\t* @throws {GraphValidationError} If the graph structure is invalid\n\t*/\n\tvalidate() {\n\t\t(0,_validate_js__WEBPACK_IMPORTED_MODULE_16__.validateGraph)({\n\t\t\tnodes: this.nodes,\n\t\t\tchannels: this.channels,\n\t\t\toutputChannels: this.outputChannels,\n\t\t\tinputChannels: this.inputChannels,\n\t\t\tstreamChannels: this.streamChannels,\n\t\t\tinterruptAfterNodes: this.interruptAfter,\n\t\t\tinterruptBeforeNodes: this.interruptBefore\n\t\t});\n\t\tfor (const [name, node] of Object.entries(this.nodes)) for (const trigger of node.triggers) {\n\t\t\tthis.triggerToNodes[trigger] ??= [];\n\t\t\tthis.triggerToNodes[trigger].push(name);\n\t\t}\n\t\treturn this;\n\t}\n\t/**\n\t* Gets a list of all channels that should be streamed.\n\t* If streamChannels is specified, returns those channels.\n\t* Otherwise, returns all channels in the graph.\n\t*\n\t* @returns Array of channel keys to stream\n\t*/\n\tget streamChannelsList() {\n\t\tif (Array.isArray(this.streamChannels)) return this.streamChannels;\n\t\telse if (this.streamChannels) return [this.streamChannels];\n\t\telse return Object.keys(this.channels);\n\t}\n\t/**\n\t* Gets the channels to stream in their original format.\n\t* If streamChannels is specified, returns it as-is (either single key or array).\n\t* Otherwise, returns all channels in the graph as an array.\n\t*\n\t* @returns Channel keys to stream, either as a single key or array\n\t*/\n\tget streamChannelsAsIs() {\n\t\tif (this.streamChannels) return this.streamChannels;\n\t\telse return Object.keys(this.channels);\n\t}\n\t/**\n\t* Gets a drawable representation of the graph structure.\n\t* This is an async version of getGraph() and is the preferred method to use.\n\t*\n\t* @param config - Configuration for generating the graph visualization\n\t* @returns A representation of the graph that can be visualized\n\t*/\n\tasync getGraphAsync(config) {\n\t\treturn this.getGraph(config);\n\t}\n\t/**\n\t* Gets all subgraphs within this graph.\n\t* A subgraph is a Pregel instance that is nested within a node of this graph.\n\t*\n\t* @deprecated Use getSubgraphsAsync instead. The async method will become the default in the next minor release.\n\t* @param namespace - Optional namespace to filter subgraphs\n\t* @param recurse - Whether to recursively get subgraphs of subgraphs\n\t* @returns Generator yielding tuples of [name, subgraph]\n\t*/\n\t*getSubgraphs(namespace, recurse) {\n\t\tfor (const [name, node] of Object.entries(this.nodes)) {\n\t\t\tif (namespace !== void 0) {\n\t\t\t\tif (!namespace.startsWith(name)) continue;\n\t\t\t}\n\t\t\tconst candidates = node.subgraphs?.length ? node.subgraphs : [node.bound];\n\t\t\tfor (const candidate of candidates) {\n\t\t\t\tconst graph = (0,_utils_subgraph_js__WEBPACK_IMPORTED_MODULE_10__.findSubgraphPregel)(candidate);\n\t\t\t\tif (graph !== void 0) {\n\t\t\t\t\tif (name === namespace) {\n\t\t\t\t\t\tyield [name, graph];\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (namespace === void 0) yield [name, graph];\n\t\t\t\t\tif (recurse) {\n\t\t\t\t\t\tlet newNamespace = namespace;\n\t\t\t\t\t\tif (namespace !== void 0) newNamespace = namespace.slice(name.length + 1);\n\t\t\t\t\t\tfor (const [subgraphName, subgraph] of graph.getSubgraphs(newNamespace, recurse)) yield [`${name}${_constants_js__WEBPACK_IMPORTED_MODULE_2__.CHECKPOINT_NAMESPACE_SEPARATOR}${subgraphName}`, subgraph];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t/**\n\t* Gets all subgraphs within this graph asynchronously.\n\t* A subgraph is a Pregel instance that is nested within a node of this graph.\n\t*\n\t* @param namespace - Optional namespace to filter subgraphs\n\t* @param recurse - Whether to recursively get subgraphs of subgraphs\n\t* @returns AsyncGenerator yielding tuples of [name, subgraph]\n\t*/\n\tasync *getSubgraphsAsync(namespace, recurse) {\n\t\tyield* this.getSubgraphs(namespace, recurse);\n\t}\n\t/**\n\t* Prepares a state snapshot from saved checkpoint data.\n\t* This is an internal method used by getState and getStateHistory.\n\t*\n\t* @param config - Configuration for preparing the snapshot\n\t* @param saved - Optional saved checkpoint data\n\t* @param subgraphCheckpointer - Optional checkpointer for subgraphs\n\t* @param applyPendingWrites - Whether to apply pending writes to tasks and then to channels\n\t* @returns A snapshot of the graph state\n\t* @internal\n\t*/\n\tasync _prepareStateSnapshot({ config, saved, subgraphCheckpointer, applyPendingWrites = false }) {\n\t\tif (saved === void 0) return {\n\t\t\tvalues: {},\n\t\t\tnext: [],\n\t\t\tconfig,\n\t\t\ttasks: []\n\t\t};\n\t\tconst channels = (0,_channels_base_js__WEBPACK_IMPORTED_MODULE_1__.emptyChannels)(this.channels, saved.checkpoint);\n\t\tif (saved.pendingWrites?.length) {\n\t\t\tconst nullWrites = saved.pendingWrites.filter(([taskId, _]) => taskId === _constants_js__WEBPACK_IMPORTED_MODULE_2__.NULL_TASK_ID).map(([_, channel, value]) => [String(channel), value]);\n\t\t\tif (nullWrites.length > 0) (0,_algo_js__WEBPACK_IMPORTED_MODULE_9__._applyWrites)(saved.checkpoint, channels, [{\n\t\t\t\tname: _constants_js__WEBPACK_IMPORTED_MODULE_2__.INPUT,\n\t\t\t\twrites: nullWrites,\n\t\t\t\ttriggers: []\n\t\t\t}], void 0, this.triggerToNodes);\n\t\t}\n\t\tconst nextTasks = Object.values((0,_algo_js__WEBPACK_IMPORTED_MODULE_9__._prepareNextTasks)(saved.checkpoint, saved.pendingWrites, this.nodes, channels, saved.config, true, {\n\t\t\tstep: (saved.metadata?.step ?? -1) + 1,\n\t\t\tstore: this.store\n\t\t}));\n\t\tconst subgraphs = await (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.gatherIterator)(this.getSubgraphsAsync());\n\t\tconst parentNamespace = saved.config.configurable?.checkpoint_ns ?? \"\";\n\t\tconst taskStates = {};\n\t\tfor (const task of nextTasks) {\n\t\t\tconst matchingSubgraph = subgraphs.find(([name]) => name === task.name);\n\t\t\tif (!matchingSubgraph) continue;\n\t\t\tlet taskNs = `${String(task.name)}${_constants_js__WEBPACK_IMPORTED_MODULE_2__.CHECKPOINT_NAMESPACE_END}${task.id}`;\n\t\t\tif (parentNamespace) taskNs = `${parentNamespace}${_constants_js__WEBPACK_IMPORTED_MODULE_2__.CHECKPOINT_NAMESPACE_SEPARATOR}${taskNs}`;\n\t\t\tif (subgraphCheckpointer === void 0) {\n\t\t\t\tconst config$1 = { configurable: {\n\t\t\t\t\tthread_id: saved.config.configurable?.thread_id,\n\t\t\t\t\tcheckpoint_ns: taskNs\n\t\t\t\t} };\n\t\t\t\ttaskStates[task.id] = config$1;\n\t\t\t} else {\n\t\t\t\tconst subgraphConfig = { configurable: {\n\t\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINTER]: subgraphCheckpointer,\n\t\t\t\t\tthread_id: saved.config.configurable?.thread_id,\n\t\t\t\t\tcheckpoint_ns: taskNs\n\t\t\t\t} };\n\t\t\t\tconst pregel = matchingSubgraph[1];\n\t\t\t\ttaskStates[task.id] = await pregel.getState(subgraphConfig, { subgraphs: true });\n\t\t\t}\n\t\t}\n\t\tif (applyPendingWrites && saved.pendingWrites?.length) {\n\t\t\tconst nextTaskById = Object.fromEntries(nextTasks.map((task) => [task.id, task]));\n\t\t\tfor (const [taskId, channel, value] of saved.pendingWrites) {\n\t\t\t\tif ([\n\t\t\t\t\t_constants_js__WEBPACK_IMPORTED_MODULE_2__.ERROR,\n\t\t\t\t\t_constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT,\n\t\t\t\t\t_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_19__.SCHEDULED\n\t\t\t\t].includes(channel)) continue;\n\t\t\t\tif (!(taskId in nextTaskById)) continue;\n\t\t\t\tnextTaskById[taskId].writes.push([String(channel), value]);\n\t\t\t}\n\t\t\tconst tasksWithWrites$1 = nextTasks.filter((task) => task.writes.length > 0);\n\t\t\tif (tasksWithWrites$1.length > 0) (0,_algo_js__WEBPACK_IMPORTED_MODULE_9__._applyWrites)(saved.checkpoint, channels, tasksWithWrites$1, void 0, this.triggerToNodes);\n\t\t}\n\t\tlet metadata = saved?.metadata;\n\t\tif (metadata && saved?.config?.configurable?.thread_id) metadata = {\n\t\t\t...metadata,\n\t\t\tthread_id: saved.config.configurable.thread_id\n\t\t};\n\t\tconst nextList = nextTasks.filter((task) => task.writes.length === 0).map((task) => task.name);\n\t\treturn {\n\t\t\tvalues: (0,_io_js__WEBPACK_IMPORTED_MODULE_7__.readChannels)(channels, this.streamChannelsAsIs),\n\t\t\tnext: nextList,\n\t\t\ttasks: (0,_debug_js__WEBPACK_IMPORTED_MODULE_11__.tasksWithWrites)(nextTasks, saved?.pendingWrites ?? [], taskStates, this.streamChannelsAsIs),\n\t\t\tmetadata,\n\t\t\tconfig: (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_8__.patchCheckpointMap)(saved.config, saved.metadata),\n\t\t\tcreatedAt: saved.checkpoint.ts,\n\t\t\tparentConfig: saved.parentConfig\n\t\t};\n\t}\n\t/**\n\t* Gets the current state of the graph.\n\t* Requires a checkpointer to be configured.\n\t*\n\t* @param config - Configuration for retrieving the state\n\t* @param options - Additional options\n\t* @returns A snapshot of the current graph state\n\t* @throws {GraphValueError} If no checkpointer is configured\n\t*/\n\tasync getState(config, options) {\n\t\tconst checkpointer = config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINTER] ?? this.checkpointer;\n\t\tif (!checkpointer) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.GraphValueError(\"No checkpointer set\", { lc_error_code: \"MISSING_CHECKPOINTER\" });\n\t\tconst checkpointNamespace = config.configurable?.checkpoint_ns ?? \"\";\n\t\tif (checkpointNamespace !== \"\" && config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINTER] === void 0) {\n\t\t\tconst recastNamespace = (0,_utils_config_js__WEBPACK_IMPORTED_MODULE_3__.recastCheckpointNamespace)(checkpointNamespace);\n\t\t\tfor await (const [name, subgraph] of this.getSubgraphsAsync(recastNamespace, true)) if (name === recastNamespace) return await subgraph.getState((0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.patchConfigurable)(config, { [_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINTER]: checkpointer }), { subgraphs: options?.subgraphs });\n\t\t\tthrow new Error(`Subgraph with namespace \"${recastNamespace}\" not found.`);\n\t\t}\n\t\tconst mergedConfig = (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_20__.mergeConfigs)(this.config, config);\n\t\tconst saved = await checkpointer.getTuple(config);\n\t\treturn await this._prepareStateSnapshot({\n\t\t\tconfig: mergedConfig,\n\t\t\tsaved,\n\t\t\tsubgraphCheckpointer: options?.subgraphs ? checkpointer : void 0,\n\t\t\tapplyPendingWrites: !config.configurable?.checkpoint_id\n\t\t});\n\t}\n\t/**\n\t* Gets the history of graph states.\n\t* Requires a checkpointer to be configured.\n\t* Useful for:\n\t* - Debugging execution history\n\t* - Implementing time travel\n\t* - Analyzing graph behavior\n\t*\n\t* @param config - Configuration for retrieving the history\n\t* @param options - Options for filtering the history\n\t* @returns An async iterator of state snapshots\n\t* @throws {Error} If no checkpointer is configured\n\t*/\n\tasync *getStateHistory(config, options) {\n\t\tconst checkpointer = config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINTER] ?? this.checkpointer;\n\t\tif (!checkpointer) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.GraphValueError(\"No checkpointer set\", { lc_error_code: \"MISSING_CHECKPOINTER\" });\n\t\tconst checkpointNamespace = config.configurable?.checkpoint_ns ?? \"\";\n\t\tif (checkpointNamespace !== \"\" && config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINTER] === void 0) {\n\t\t\tconst recastNamespace = (0,_utils_config_js__WEBPACK_IMPORTED_MODULE_3__.recastCheckpointNamespace)(checkpointNamespace);\n\t\t\tfor await (const [name, pregel] of this.getSubgraphsAsync(recastNamespace, true)) if (name === recastNamespace) {\n\t\t\t\tyield* pregel.getStateHistory((0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.patchConfigurable)(config, { [_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINTER]: checkpointer }), options);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthrow new Error(`Subgraph with namespace \"${recastNamespace}\" not found.`);\n\t\t}\n\t\tconst mergedConfig = (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_20__.mergeConfigs)(this.config, config, { configurable: { checkpoint_ns: checkpointNamespace } });\n\t\tfor await (const checkpointTuple of checkpointer.list(mergedConfig, options)) yield this._prepareStateSnapshot({\n\t\t\tconfig: checkpointTuple.config,\n\t\t\tsaved: checkpointTuple\n\t\t});\n\t}\n\t/**\n\t* Apply updates to the graph state in bulk.\n\t* Requires a checkpointer to be configured.\n\t*\n\t* This method is useful for recreating a thread\n\t* from a list of updates, especially if a checkpoint\n\t* is created as a result of multiple tasks.\n\t*\n\t* @internal The API might change in the future.\n\t*\n\t* @param startConfig - Configuration for the update\n\t* @param updates - The list of updates to apply to graph state\n\t* @returns Updated configuration\n\t* @throws {GraphValueError} If no checkpointer is configured\n\t* @throws {InvalidUpdateError} If the update cannot be attributed to a node or an update can be only applied in sequence.\n\t*/\n\tasync bulkUpdateState(startConfig, supersteps) {\n\t\tconst checkpointer = startConfig.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINTER] ?? this.checkpointer;\n\t\tif (!checkpointer) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.GraphValueError(\"No checkpointer set\", { lc_error_code: \"MISSING_CHECKPOINTER\" });\n\t\tif (supersteps.length === 0) throw new Error(\"No supersteps provided\");\n\t\tif (supersteps.some((s) => s.updates.length === 0)) throw new Error(\"No updates provided\");\n\t\tconst checkpointNamespace = startConfig.configurable?.checkpoint_ns ?? \"\";\n\t\tif (checkpointNamespace !== \"\" && startConfig.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINTER] === void 0) {\n\t\t\tconst recastNamespace = (0,_utils_config_js__WEBPACK_IMPORTED_MODULE_3__.recastCheckpointNamespace)(checkpointNamespace);\n\t\t\tfor await (const [, pregel] of this.getSubgraphsAsync(recastNamespace, true)) return await pregel.bulkUpdateState((0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.patchConfigurable)(startConfig, { [_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINTER]: checkpointer }), supersteps);\n\t\t\tthrow new Error(`Subgraph \"${recastNamespace}\" not found`);\n\t\t}\n\t\tconst updateSuperStep = async (inputConfig, updates) => {\n\t\t\tconst config = this.config ? (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_20__.mergeConfigs)(this.config, inputConfig) : inputConfig;\n\t\t\tconst saved = await checkpointer.getTuple(config);\n\t\t\tconst checkpoint = saved !== void 0 ? (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_19__.copyCheckpoint)(saved.checkpoint) : (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_19__.emptyCheckpoint)();\n\t\t\tconst checkpointPreviousVersions = { ...saved?.checkpoint.channel_versions };\n\t\t\tconst step = saved?.metadata?.step ?? -1;\n\t\t\tlet checkpointConfig = (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.patchConfigurable)(config, { checkpoint_ns: config.configurable?.checkpoint_ns ?? \"\" });\n\t\t\tlet checkpointMetadata = config.metadata ?? {};\n\t\t\tif (saved?.config.configurable) {\n\t\t\t\tcheckpointConfig = (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.patchConfigurable)(config, saved.config.configurable);\n\t\t\t\tcheckpointMetadata = {\n\t\t\t\t\t...saved.metadata,\n\t\t\t\t\t...checkpointMetadata\n\t\t\t\t};\n\t\t\t}\n\t\t\tconst { values, asNode } = updates[0];\n\t\t\tif (values == null && asNode === void 0) {\n\t\t\t\tif (updates.length > 1) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(`Cannot create empty checkpoint with multiple updates`);\n\t\t\t\treturn (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_8__.patchCheckpointMap)(await checkpointer.put(checkpointConfig, (0,_channels_base_js__WEBPACK_IMPORTED_MODULE_1__.createCheckpoint)(checkpoint, void 0, step), {\n\t\t\t\t\tsource: \"update\",\n\t\t\t\t\tstep: step + 1,\n\t\t\t\t\tparents: saved?.metadata?.parents ?? {}\n\t\t\t\t}, {}), saved ? saved.metadata : void 0);\n\t\t\t}\n\t\t\tconst channels = (0,_channels_base_js__WEBPACK_IMPORTED_MODULE_1__.emptyChannels)(this.channels, checkpoint);\n\t\t\tif (values === null && asNode === _constants_js__WEBPACK_IMPORTED_MODULE_2__.END) {\n\t\t\t\tif (updates.length > 1) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(`Cannot apply multiple updates when clearing state`);\n\t\t\t\tif (saved) {\n\t\t\t\t\tconst nextTasks = (0,_algo_js__WEBPACK_IMPORTED_MODULE_9__._prepareNextTasks)(checkpoint, saved.pendingWrites || [], this.nodes, channels, saved.config, true, {\n\t\t\t\t\t\tstep: (saved.metadata?.step ?? -1) + 1,\n\t\t\t\t\t\tcheckpointer,\n\t\t\t\t\t\tstore: this.store\n\t\t\t\t\t});\n\t\t\t\t\tconst nullWrites = (saved.pendingWrites || []).filter((w) => w[0] === _constants_js__WEBPACK_IMPORTED_MODULE_2__.NULL_TASK_ID).map((w) => w.slice(1));\n\t\t\t\t\tif (nullWrites.length > 0) (0,_algo_js__WEBPACK_IMPORTED_MODULE_9__._applyWrites)(checkpoint, channels, [{\n\t\t\t\t\t\tname: _constants_js__WEBPACK_IMPORTED_MODULE_2__.INPUT,\n\t\t\t\t\t\twrites: nullWrites,\n\t\t\t\t\t\ttriggers: []\n\t\t\t\t\t}], checkpointer.getNextVersion.bind(checkpointer), this.triggerToNodes);\n\t\t\t\t\tfor (const [taskId, k, v] of saved.pendingWrites || []) {\n\t\t\t\t\t\tif ([\n\t\t\t\t\t\t\t_constants_js__WEBPACK_IMPORTED_MODULE_2__.ERROR,\n\t\t\t\t\t\t\t_constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT,\n\t\t\t\t\t\t\t_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_19__.SCHEDULED\n\t\t\t\t\t\t].includes(k)) continue;\n\t\t\t\t\t\tif (!(taskId in nextTasks)) continue;\n\t\t\t\t\t\tnextTasks[taskId].writes.push([k, v]);\n\t\t\t\t\t}\n\t\t\t\t\t(0,_algo_js__WEBPACK_IMPORTED_MODULE_9__._applyWrites)(checkpoint, channels, Object.values(nextTasks), checkpointer.getNextVersion.bind(checkpointer), this.triggerToNodes);\n\t\t\t\t}\n\t\t\t\treturn (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_8__.patchCheckpointMap)(await checkpointer.put(checkpointConfig, (0,_channels_base_js__WEBPACK_IMPORTED_MODULE_1__.createCheckpoint)(checkpoint, channels, step), {\n\t\t\t\t\t...checkpointMetadata,\n\t\t\t\t\tsource: \"update\",\n\t\t\t\t\tstep: step + 1,\n\t\t\t\t\tparents: saved?.metadata?.parents ?? {}\n\t\t\t\t}, (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_8__.getNewChannelVersions)(checkpointPreviousVersions, checkpoint.channel_versions)), saved ? saved.metadata : void 0);\n\t\t\t}\n\t\t\tif (asNode === _constants_js__WEBPACK_IMPORTED_MODULE_2__.COPY) {\n\t\t\t\tif (updates.length > 1) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(`Cannot copy checkpoint with multiple updates`);\n\t\t\t\tif (saved == null) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(`Cannot copy a non-existent checkpoint`);\n\t\t\t\tconst isCopyWithUpdates = (values$1) => {\n\t\t\t\t\tif (!Array.isArray(values$1)) return false;\n\t\t\t\t\tif (values$1.length === 0) return false;\n\t\t\t\t\treturn values$1.every((v) => Array.isArray(v) && v.length === 2);\n\t\t\t\t};\n\t\t\t\tconst nextCheckpoint = (0,_channels_base_js__WEBPACK_IMPORTED_MODULE_1__.createCheckpoint)(checkpoint, void 0, step);\n\t\t\t\tconst nextConfig$1 = await checkpointer.put(saved.parentConfig ?? (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.patchConfigurable)(saved.config, { checkpoint_id: void 0 }), nextCheckpoint, {\n\t\t\t\t\tsource: \"fork\",\n\t\t\t\t\tstep: step + 1,\n\t\t\t\t\tparents: saved.metadata?.parents ?? {}\n\t\t\t\t}, {});\n\t\t\t\tif (isCopyWithUpdates(values)) {\n\t\t\t\t\tconst nextTasks = (0,_algo_js__WEBPACK_IMPORTED_MODULE_9__._prepareNextTasks)(nextCheckpoint, saved.pendingWrites, this.nodes, channels, nextConfig$1, false, { step: step + 2 });\n\t\t\t\t\tconst tasksGroupBy = Object.values(nextTasks).reduce((acc, { name, id }) => {\n\t\t\t\t\t\tacc[name] ??= [];\n\t\t\t\t\t\tacc[name].push({ id });\n\t\t\t\t\t\treturn acc;\n\t\t\t\t\t}, {});\n\t\t\t\t\tconst userGroupBy = values.reduce((acc, item) => {\n\t\t\t\t\t\tconst [values$1, asNode$1] = item;\n\t\t\t\t\t\tacc[asNode$1] ??= [];\n\t\t\t\t\t\tconst targetIdx = acc[asNode$1].length;\n\t\t\t\t\t\tconst taskId = tasksGroupBy[asNode$1]?.[targetIdx]?.id;\n\t\t\t\t\t\tacc[asNode$1].push({\n\t\t\t\t\t\t\tvalues: values$1,\n\t\t\t\t\t\t\tasNode: asNode$1,\n\t\t\t\t\t\t\ttaskId\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn acc;\n\t\t\t\t\t}, {});\n\t\t\t\t\treturn updateSuperStep((0,_utils_index_js__WEBPACK_IMPORTED_MODULE_8__.patchCheckpointMap)(nextConfig$1, saved.metadata), Object.values(userGroupBy).flat());\n\t\t\t\t}\n\t\t\t\treturn (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_8__.patchCheckpointMap)(nextConfig$1, saved.metadata);\n\t\t\t}\n\t\t\tif (asNode === _constants_js__WEBPACK_IMPORTED_MODULE_2__.INPUT) {\n\t\t\t\tif (updates.length > 1) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(`Cannot apply multiple updates when updating as input`);\n\t\t\t\tconst inputWrites = await (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.gatherIterator)((0,_io_js__WEBPACK_IMPORTED_MODULE_7__.mapInput)(this.inputChannels, values));\n\t\t\t\tif (inputWrites.length === 0) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(`Received no input writes for ${JSON.stringify(this.inputChannels, null, 2)}`);\n\t\t\t\t(0,_algo_js__WEBPACK_IMPORTED_MODULE_9__._applyWrites)(checkpoint, channels, [{\n\t\t\t\t\tname: _constants_js__WEBPACK_IMPORTED_MODULE_2__.INPUT,\n\t\t\t\t\twrites: inputWrites,\n\t\t\t\t\ttriggers: []\n\t\t\t\t}], checkpointer.getNextVersion.bind(this.checkpointer), this.triggerToNodes);\n\t\t\t\tconst nextStep = saved?.metadata?.step != null ? saved.metadata.step + 1 : -1;\n\t\t\t\tconst nextConfig$1 = await checkpointer.put(checkpointConfig, (0,_channels_base_js__WEBPACK_IMPORTED_MODULE_1__.createCheckpoint)(checkpoint, channels, nextStep), {\n\t\t\t\t\tsource: \"input\",\n\t\t\t\t\tstep: nextStep,\n\t\t\t\t\tparents: saved?.metadata?.parents ?? {}\n\t\t\t\t}, (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_8__.getNewChannelVersions)(checkpointPreviousVersions, checkpoint.channel_versions));\n\t\t\t\tawait checkpointer.putWrites(nextConfig$1, inputWrites, (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_19__.uuid5)(_constants_js__WEBPACK_IMPORTED_MODULE_2__.INPUT, checkpoint.id));\n\t\t\t\treturn (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_8__.patchCheckpointMap)(nextConfig$1, saved ? saved.metadata : void 0);\n\t\t\t}\n\t\t\tif (config.configurable?.checkpoint_id === void 0 && saved?.pendingWrites !== void 0 && saved.pendingWrites.length > 0) {\n\t\t\t\tconst nextTasks = (0,_algo_js__WEBPACK_IMPORTED_MODULE_9__._prepareNextTasks)(checkpoint, saved.pendingWrites, this.nodes, channels, saved.config, true, {\n\t\t\t\t\tstore: this.store,\n\t\t\t\t\tcheckpointer: this.checkpointer,\n\t\t\t\t\tstep: (saved.metadata?.step ?? -1) + 1\n\t\t\t\t});\n\t\t\t\tconst nullWrites = (saved.pendingWrites ?? []).filter((w) => w[0] === _constants_js__WEBPACK_IMPORTED_MODULE_2__.NULL_TASK_ID).map((w) => w.slice(1));\n\t\t\t\tif (nullWrites.length > 0) (0,_algo_js__WEBPACK_IMPORTED_MODULE_9__._applyWrites)(saved.checkpoint, channels, [{\n\t\t\t\t\tname: _constants_js__WEBPACK_IMPORTED_MODULE_2__.INPUT,\n\t\t\t\t\twrites: nullWrites,\n\t\t\t\t\ttriggers: []\n\t\t\t\t}], void 0, this.triggerToNodes);\n\t\t\t\tfor (const [tid, k, v] of saved.pendingWrites) {\n\t\t\t\t\tif ([\n\t\t\t\t\t\t_constants_js__WEBPACK_IMPORTED_MODULE_2__.ERROR,\n\t\t\t\t\t\t_constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT,\n\t\t\t\t\t\t_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_19__.SCHEDULED\n\t\t\t\t\t].includes(k) || nextTasks[tid] === void 0) continue;\n\t\t\t\t\tnextTasks[tid].writes.push([k, v]);\n\t\t\t\t}\n\t\t\t\tconst tasks$1 = Object.values(nextTasks).filter((task) => {\n\t\t\t\t\treturn task.writes.length > 0;\n\t\t\t\t});\n\t\t\t\tif (tasks$1.length > 0) (0,_algo_js__WEBPACK_IMPORTED_MODULE_9__._applyWrites)(checkpoint, channels, tasks$1, void 0, this.triggerToNodes);\n\t\t\t}\n\t\t\tconst nonNullVersion = Object.values(checkpoint.versions_seen).map((seenVersions) => {\n\t\t\t\treturn Object.values(seenVersions);\n\t\t\t}).flat().find((v) => !!v);\n\t\t\tconst validUpdates = [];\n\t\t\tif (updates.length === 1) {\n\t\t\t\tlet { values: values$1, asNode: asNode$1, taskId } = updates[0];\n\t\t\t\tif (asNode$1 === void 0 && Object.keys(this.nodes).length === 1) [asNode$1] = Object.keys(this.nodes);\n\t\t\t\telse if (asNode$1 === void 0 && nonNullVersion === void 0) {\n\t\t\t\t\tif (typeof this.inputChannels === \"string\" && this.nodes[this.inputChannels] !== void 0) asNode$1 = this.inputChannels;\n\t\t\t\t} else if (asNode$1 === void 0) {\n\t\t\t\t\tconst lastSeenByNode = Object.entries(checkpoint.versions_seen).map(([n, seen]) => {\n\t\t\t\t\t\treturn Object.values(seen).map((v) => {\n\t\t\t\t\t\t\treturn [v, n];\n\t\t\t\t\t\t});\n\t\t\t\t\t}).flat().filter(([_, v]) => v !== _constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT).sort(([aNumber], [bNumber]) => (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_19__.compareChannelVersions)(aNumber, bNumber));\n\t\t\t\t\tif (lastSeenByNode) {\n\t\t\t\t\t\tif (lastSeenByNode.length === 1) asNode$1 = lastSeenByNode[0][1];\n\t\t\t\t\t\telse if (lastSeenByNode[lastSeenByNode.length - 1][0] !== lastSeenByNode[lastSeenByNode.length - 2][0]) asNode$1 = lastSeenByNode[lastSeenByNode.length - 1][1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (asNode$1 === void 0) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(`Ambiguous update, specify \"asNode\"`);\n\t\t\t\tvalidUpdates.push({\n\t\t\t\t\tvalues: values$1,\n\t\t\t\t\tasNode: asNode$1,\n\t\t\t\t\ttaskId\n\t\t\t\t});\n\t\t\t} else for (const { asNode: asNode$1, values: values$1, taskId } of updates) {\n\t\t\t\tif (asNode$1 == null) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(`\"asNode\" is required when applying multiple updates`);\n\t\t\t\tvalidUpdates.push({\n\t\t\t\t\tvalues: values$1,\n\t\t\t\t\tasNode: asNode$1,\n\t\t\t\t\ttaskId\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst tasks = [];\n\t\t\tfor (const { asNode: asNode$1, values: values$1, taskId } of validUpdates) {\n\t\t\t\tif (this.nodes[asNode$1] === void 0) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(`Node \"${asNode$1.toString()}\" does not exist`);\n\t\t\t\tconst writers = this.nodes[asNode$1].getWriters();\n\t\t\t\tif (!writers.length) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(`No writers found for node \"${asNode$1.toString()}\"`);\n\t\t\t\ttasks.push({\n\t\t\t\t\tname: asNode$1,\n\t\t\t\t\tinput: values$1,\n\t\t\t\t\tproc: writers.length > 1 ? _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_20__.RunnableSequence.from(writers, { omitSequenceTags: true }) : writers[0],\n\t\t\t\t\twrites: [],\n\t\t\t\t\ttriggers: [_constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT],\n\t\t\t\t\tid: taskId ?? (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_19__.uuid5)(_constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT, checkpoint.id),\n\t\t\t\t\twriters: []\n\t\t\t\t});\n\t\t\t}\n\t\t\tfor (const task of tasks) await task.proc.invoke(task.input, (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_20__.patchConfig)({\n\t\t\t\t...config,\n\t\t\t\tstore: config?.store ?? this.store\n\t\t\t}, {\n\t\t\t\trunName: config.runName ?? `${this.getName()}UpdateState`,\n\t\t\t\tconfigurable: {\n\t\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_SEND]: (items) => task.writes.push(...items),\n\t\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_READ]: (select_, fresh_ = false) => (0,_algo_js__WEBPACK_IMPORTED_MODULE_9__._localRead)(checkpoint, channels, task, select_, fresh_)\n\t\t\t\t}\n\t\t\t}));\n\t\t\tfor (const task of tasks) {\n\t\t\t\tconst channelWrites = task.writes.filter((w) => w[0] !== _constants_js__WEBPACK_IMPORTED_MODULE_2__.PUSH);\n\t\t\t\tif (saved !== void 0 && channelWrites.length > 0) await checkpointer.putWrites(checkpointConfig, channelWrites, task.id);\n\t\t\t}\n\t\t\t(0,_algo_js__WEBPACK_IMPORTED_MODULE_9__._applyWrites)(checkpoint, channels, tasks, checkpointer.getNextVersion.bind(this.checkpointer), this.triggerToNodes);\n\t\t\tconst newVersions = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_8__.getNewChannelVersions)(checkpointPreviousVersions, checkpoint.channel_versions);\n\t\t\tconst nextConfig = await checkpointer.put(checkpointConfig, (0,_channels_base_js__WEBPACK_IMPORTED_MODULE_1__.createCheckpoint)(checkpoint, channels, step + 1), {\n\t\t\t\tsource: \"update\",\n\t\t\t\tstep: step + 1,\n\t\t\t\tparents: saved?.metadata?.parents ?? {}\n\t\t\t}, newVersions);\n\t\t\tfor (const task of tasks) {\n\t\t\t\tconst pushWrites = task.writes.filter((w) => w[0] === _constants_js__WEBPACK_IMPORTED_MODULE_2__.PUSH);\n\t\t\t\tif (pushWrites.length > 0) await checkpointer.putWrites(nextConfig, pushWrites, task.id);\n\t\t\t}\n\t\t\treturn (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_8__.patchCheckpointMap)(nextConfig, saved ? saved.metadata : void 0);\n\t\t};\n\t\tlet currentConfig = startConfig;\n\t\tfor (const { updates } of supersteps) currentConfig = await updateSuperStep(currentConfig, updates);\n\t\treturn currentConfig;\n\t}\n\t/**\n\t* Updates the state of the graph with new values.\n\t* Requires a checkpointer to be configured.\n\t*\n\t* This method can be used for:\n\t* - Implementing human-in-the-loop workflows\n\t* - Modifying graph state during breakpoints\n\t* - Integrating external inputs into the graph\n\t*\n\t* @param inputConfig - Configuration for the update\n\t* @param values - The values to update the state with\n\t* @param asNode - Optional node name to attribute the update to\n\t* @returns Updated configuration\n\t* @throws {GraphValueError} If no checkpointer is configured\n\t* @throws {InvalidUpdateError} If the update cannot be attributed to a node\n\t*/\n\tasync updateState(inputConfig, values, asNode) {\n\t\treturn this.bulkUpdateState(inputConfig, [{ updates: [{\n\t\t\tvalues,\n\t\t\tasNode\n\t\t}] }]);\n\t}\n\t/**\n\t* Gets the default values for various graph configuration options.\n\t* This is an internal method used to process and normalize configuration options.\n\t*\n\t* @param config - The input configuration options\n\t* @returns A tuple containing normalized values for:\n\t* - debug mode\n\t* - stream modes\n\t* - input keys\n\t* - output keys\n\t* - remaining config\n\t* - interrupt before nodes\n\t* - interrupt after nodes\n\t* - checkpointer\n\t* - store\n\t* - whether stream mode is single\n\t* - node cache\n\t* - whether checkpoint during is enabled\n\t* @internal\n\t*/\n\t_defaults(config) {\n\t\tconst { debug, streamMode, inputKeys, outputKeys, interruptAfter, interruptBefore, ...rest } = config;\n\t\tlet streamModeSingle = true;\n\t\tconst defaultDebug = debug !== void 0 ? debug : this.debug;\n\t\tlet defaultOutputKeys = outputKeys;\n\t\tif (defaultOutputKeys === void 0) defaultOutputKeys = this.streamChannelsAsIs;\n\t\telse (0,_validate_js__WEBPACK_IMPORTED_MODULE_16__.validateKeys)(defaultOutputKeys, this.channels);\n\t\tlet defaultInputKeys = inputKeys;\n\t\tif (defaultInputKeys === void 0) defaultInputKeys = this.inputChannels;\n\t\telse (0,_validate_js__WEBPACK_IMPORTED_MODULE_16__.validateKeys)(defaultInputKeys, this.channels);\n\t\tconst defaultInterruptBefore = interruptBefore ?? this.interruptBefore ?? [];\n\t\tconst defaultInterruptAfter = interruptAfter ?? this.interruptAfter ?? [];\n\t\tlet defaultStreamMode;\n\t\tif (streamMode !== void 0) {\n\t\t\tdefaultStreamMode = Array.isArray(streamMode) ? streamMode : [streamMode];\n\t\t\tstreamModeSingle = typeof streamMode === \"string\";\n\t\t} else {\n\t\t\tif (config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_TASK_ID] !== void 0) defaultStreamMode = [\"values\"];\n\t\t\telse defaultStreamMode = this.streamMode;\n\t\t\tstreamModeSingle = true;\n\t\t}\n\t\tlet defaultCheckpointer;\n\t\tif (this.checkpointer === false) defaultCheckpointer = void 0;\n\t\telse if (config !== void 0 && config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINTER] !== void 0) defaultCheckpointer = config.configurable[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINTER];\n\t\telse if (this.checkpointer === true) throw new Error(\"checkpointer: true cannot be used for root graphs.\");\n\t\telse defaultCheckpointer = this.checkpointer;\n\t\tconst defaultStore = config.store ?? this.store;\n\t\tconst defaultCache = config.cache ?? this.cache;\n\t\tif (config.durability != null && config.checkpointDuring != null) throw new Error(\"Cannot use both `durability` and `checkpointDuring` at the same time.\");\n\t\tconst checkpointDuringDurability = (() => {\n\t\t\tif (config.checkpointDuring == null) return void 0;\n\t\t\tif (config.checkpointDuring === false) return \"exit\";\n\t\t\treturn \"async\";\n\t\t})();\n\t\tconst defaultDurability = config.durability ?? checkpointDuringDurability ?? config?.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_DURABILITY] ?? \"async\";\n\t\treturn [\n\t\t\tdefaultDebug,\n\t\t\tdefaultStreamMode,\n\t\t\tdefaultInputKeys,\n\t\t\tdefaultOutputKeys,\n\t\t\trest,\n\t\t\tdefaultInterruptBefore,\n\t\t\tdefaultInterruptAfter,\n\t\t\tdefaultCheckpointer,\n\t\t\tdefaultStore,\n\t\t\tstreamModeSingle,\n\t\t\tdefaultCache,\n\t\t\tdefaultDurability\n\t\t];\n\t}\n\t/**\n\t* Streams the execution of the graph, emitting state updates as they occur.\n\t* This is the primary method for observing graph execution in real-time.\n\t*\n\t* Stream modes:\n\t* - \"values\": Emits complete state after each step\n\t* - \"updates\": Emits only state changes after each step\n\t* - \"debug\": Emits detailed debug information\n\t* - \"messages\": Emits messages from within nodes\n\t* - \"custom\": Emits custom events from within nodes\n\t* - \"checkpoints\": Emits checkpoints from within nodes\n\t* - \"tasks\": Emits tasks from within nodes\n\t*\n\t* @param input - The input to start graph execution with\n\t* @param options - Configuration options for streaming\n\t* @returns An async iterable stream of graph state updates\n\t*/\n\tasync stream(input, options) {\n\t\tconst abortController = new AbortController();\n\t\tconst config = {\n\t\t\trecursionLimit: this.config?.recursionLimit,\n\t\t\t...options,\n\t\t\tsignal: (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_8__.combineAbortSignals)(options?.signal, abortController.signal).signal\n\t\t};\n\t\tconst stream = await super.stream(input, config);\n\t\treturn new _stream_js__WEBPACK_IMPORTED_MODULE_12__.IterableReadableStreamWithAbortSignal(options?.encoding === \"text/event-stream\" ? (0,_stream_js__WEBPACK_IMPORTED_MODULE_12__.toEventStream)(stream) : stream, abortController);\n\t}\n\tstreamEvents(input, options, streamOptions) {\n\t\tconst abortController = new AbortController();\n\t\tconst config = {\n\t\t\trecursionLimit: this.config?.recursionLimit,\n\t\t\t...options,\n\t\t\tcallbacks: (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_8__.combineCallbacks)(this.config?.callbacks, options?.callbacks),\n\t\t\tsignal: (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_8__.combineAbortSignals)(options?.signal, abortController.signal).signal\n\t\t};\n\t\treturn new _stream_js__WEBPACK_IMPORTED_MODULE_12__.IterableReadableStreamWithAbortSignal(super.streamEvents(input, config, streamOptions), abortController);\n\t}\n\t/**\n\t* Validates the input for the graph.\n\t* @param input - The input to validate\n\t* @returns The validated input\n\t* @internal\n\t*/\n\tasync _validateInput(input) {\n\t\treturn input;\n\t}\n\t/**\n\t* Validates the context options for the graph.\n\t* @param context - The context options to validate\n\t* @returns The validated context options\n\t* @internal\n\t*/\n\tasync _validateContext(context) {\n\t\treturn context;\n\t}\n\t/**\n\t* Internal iterator used by stream() to generate state updates.\n\t* This method handles the core logic of graph execution and streaming.\n\t*\n\t* @param input - The input to start graph execution with\n\t* @param options - Configuration options for streaming\n\t* @returns AsyncGenerator yielding state updates\n\t* @internal\n\t*/\n\tasync *_streamIterator(input, options) {\n\t\tconst streamEncoding = \"version\" in (options ?? {}) ? void 0 : options?.encoding ?? void 0;\n\t\tconst streamSubgraphs = options?.subgraphs;\n\t\tconst inputConfig = (0,_utils_config_js__WEBPACK_IMPORTED_MODULE_3__.ensureLangGraphConfig)(this.config, options);\n\t\tif (inputConfig.recursionLimit === void 0 || inputConfig.recursionLimit < 1) throw new Error(`Passed \"recursionLimit\" must be at least 1.`);\n\t\tif (this.checkpointer !== void 0 && this.checkpointer !== false && inputConfig.configurable === void 0) throw new Error(`Checkpointer requires one or more of the following \"configurable\" keys: \"thread_id\", \"checkpoint_ns\", \"checkpoint_id\"`);\n\t\tconst validInput = await this._validateInput(input);\n\t\tconst { runId, ...restConfig } = inputConfig;\n\t\tconst [debug, streamMode, , outputKeys, config, interruptBefore, interruptAfter, checkpointer, store, streamModeSingle, cache, durability] = this._defaults(restConfig);\n\t\tif (typeof config.context !== \"undefined\") config.context = await this._validateContext(config.context);\n\t\telse config.configurable = await this._validateContext(config.configurable);\n\t\tconst stream = new _stream_js__WEBPACK_IMPORTED_MODULE_12__.IterableReadableWritableStream({ modes: new Set(streamMode) });\n\t\tif (this.checkpointer === true) {\n\t\t\tconfig.configurable ??= {};\n\t\t\tconst ns = config.configurable[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINT_NS] ?? \"\";\n\t\t\tconfig.configurable[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINT_NS] = ns.split(_constants_js__WEBPACK_IMPORTED_MODULE_2__.CHECKPOINT_NAMESPACE_SEPARATOR).map((part) => part.split(_constants_js__WEBPACK_IMPORTED_MODULE_2__.CHECKPOINT_NAMESPACE_END)[0]).join(_constants_js__WEBPACK_IMPORTED_MODULE_2__.CHECKPOINT_NAMESPACE_SEPARATOR);\n\t\t}\n\t\tif (streamMode.includes(\"messages\")) {\n\t\t\tconst messageStreamer = new _messages_js__WEBPACK_IMPORTED_MODULE_14__.StreamMessagesHandler((chunk) => stream.push(chunk));\n\t\t\tconst { callbacks } = config;\n\t\t\tif (callbacks === void 0) config.callbacks = [messageStreamer];\n\t\t\telse if (Array.isArray(callbacks)) config.callbacks = callbacks.concat(messageStreamer);\n\t\t\telse {\n\t\t\t\tconst copiedCallbacks = callbacks.copy();\n\t\t\t\tcopiedCallbacks.addHandler(messageStreamer, true);\n\t\t\t\tconfig.callbacks = copiedCallbacks;\n\t\t\t}\n\t\t}\n\t\tconfig.writer ??= (chunk) => {\n\t\t\tif (!streamMode.includes(\"custom\")) return;\n\t\t\tconst ns = ((0,_utils_config_js__WEBPACK_IMPORTED_MODULE_3__.getConfig)()?.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINT_NS])?.split(_constants_js__WEBPACK_IMPORTED_MODULE_2__.CHECKPOINT_NAMESPACE_SEPARATOR).slice(0, -1);\n\t\t\tstream.push([\n\t\t\t\tns ?? [],\n\t\t\t\t\"custom\",\n\t\t\t\tchunk\n\t\t\t]);\n\t\t};\n\t\tconfig.interrupt ??= this.userInterrupt ?? _interrupt_js__WEBPACK_IMPORTED_MODULE_18__.interrupt;\n\t\tconst runManager = await (await (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_20__.getCallbackManagerForConfig)(config))?.handleChainStart(this.toJSON(), (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_8__._coerceToDict)(input, \"input\"), runId, void 0, void 0, void 0, config?.runName ?? this.getName());\n\t\tconst channelSpecs = (0,_channels_base_js__WEBPACK_IMPORTED_MODULE_1__.getOnlyChannels)(this.channels);\n\t\tlet loop;\n\t\tlet loopError;\n\t\t/**\n\t\t* The PregelLoop will yield events from concurrent tasks as soon as they are\n\t\t* generated. Each task can push multiple events onto the stream in any order.\n\t\t*\n\t\t* We use a separate background method and stream here in order to yield events\n\t\t* from the loop to the main stream and therefore back to the user as soon as\n\t\t* they are available.\n\t\t*/\n\t\tconst createAndRunLoop = async () => {\n\t\t\ttry {\n\t\t\t\tloop = await _loop_js__WEBPACK_IMPORTED_MODULE_13__.PregelLoop.initialize({\n\t\t\t\t\tinput: validInput,\n\t\t\t\t\tconfig,\n\t\t\t\t\tcheckpointer,\n\t\t\t\t\tnodes: this.nodes,\n\t\t\t\t\tchannelSpecs,\n\t\t\t\t\toutputKeys,\n\t\t\t\t\tstreamKeys: this.streamChannelsAsIs,\n\t\t\t\t\tstore,\n\t\t\t\t\tcache,\n\t\t\t\t\tstream,\n\t\t\t\t\tinterruptAfter,\n\t\t\t\t\tinterruptBefore,\n\t\t\t\t\tmanager: runManager,\n\t\t\t\t\tdebug: this.debug,\n\t\t\t\t\ttriggerToNodes: this.triggerToNodes,\n\t\t\t\t\tdurability\n\t\t\t\t});\n\t\t\t\tconst runner = new _runner_js__WEBPACK_IMPORTED_MODULE_15__.PregelRunner({\n\t\t\t\t\tloop,\n\t\t\t\t\tnodeFinished: config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_NODE_FINISHED]\n\t\t\t\t});\n\t\t\t\tif (options?.subgraphs) loop.config.configurable = {\n\t\t\t\t\t...loop.config.configurable,\n\t\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_STREAM]: loop.stream\n\t\t\t\t};\n\t\t\t\tawait this._runLoop({\n\t\t\t\t\tloop,\n\t\t\t\t\trunner,\n\t\t\t\t\tdebug,\n\t\t\t\t\tconfig\n\t\t\t\t});\n\t\t\t\tif (durability === \"sync\") await Promise.all(loop?.checkpointerPromises ?? []);\n\t\t\t} catch (e) {\n\t\t\t\tloopError = e;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (loop) {\n\t\t\t\t\t\tawait loop.store?.stop();\n\t\t\t\t\t\tawait loop.cache?.stop();\n\t\t\t\t\t}\n\t\t\t\t\tawait Promise.all(loop?.checkpointerPromises ?? []);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tloopError = loopError ?? e;\n\t\t\t\t}\n\t\t\t\tif (loopError) stream.error(loopError);\n\t\t\t\telse stream.close();\n\t\t\t}\n\t\t};\n\t\tconst runLoopPromise = createAndRunLoop();\n\t\ttry {\n\t\t\tfor await (const chunk of stream) {\n\t\t\t\tif (chunk === void 0) throw new Error(\"Data structure error.\");\n\t\t\t\tconst [namespace, mode, payload] = chunk;\n\t\t\t\tif (streamMode.includes(mode)) {\n\t\t\t\t\tif (streamEncoding === \"text/event-stream\") {\n\t\t\t\t\t\tif (streamSubgraphs) yield [\n\t\t\t\t\t\t\tnamespace,\n\t\t\t\t\t\t\tmode,\n\t\t\t\t\t\t\tpayload\n\t\t\t\t\t\t];\n\t\t\t\t\t\telse yield [\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tmode,\n\t\t\t\t\t\t\tpayload\n\t\t\t\t\t\t];\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (streamSubgraphs && !streamModeSingle) yield [\n\t\t\t\t\t\tnamespace,\n\t\t\t\t\t\tmode,\n\t\t\t\t\t\tpayload\n\t\t\t\t\t];\n\t\t\t\t\telse if (!streamModeSingle) yield [mode, payload];\n\t\t\t\t\telse if (streamSubgraphs) yield [namespace, payload];\n\t\t\t\t\telse yield payload;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tawait runManager?.handleChainError(loopError);\n\t\t\tthrow e;\n\t\t} finally {\n\t\t\tawait runLoopPromise;\n\t\t}\n\t\tawait runManager?.handleChainEnd(loop?.output ?? {}, runId, void 0, void 0, void 0);\n\t}\n\t/**\n\t* Run the graph with a single input and config.\n\t* @param input The input to the graph.\n\t* @param options The configuration to use for the run.\n\t*/\n\tasync invoke(input, options) {\n\t\tconst streamMode = options?.streamMode ?? \"values\";\n\t\tconst config = {\n\t\t\t...options,\n\t\t\toutputKeys: options?.outputKeys ?? this.outputChannels,\n\t\t\tstreamMode,\n\t\t\tencoding: void 0\n\t\t};\n\t\tconst chunks = [];\n\t\tconst stream = await this.stream(input, config);\n\t\tconst interruptChunks = [];\n\t\tlet latest;\n\t\tfor await (const chunk of stream) if (streamMode === \"values\") if ((0,_constants_js__WEBPACK_IMPORTED_MODULE_2__.isInterrupted)(chunk)) interruptChunks.push(chunk[_constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT]);\n\t\telse latest = chunk;\n\t\telse chunks.push(chunk);\n\t\tif (streamMode === \"values\") {\n\t\t\tif (interruptChunks.length > 0) {\n\t\t\t\tconst interrupts = interruptChunks.flat(1);\n\t\t\t\tif (latest == null) return { [_constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT]: interrupts };\n\t\t\t\tif (typeof latest === \"object\") return {\n\t\t\t\t\t...latest,\n\t\t\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT]: interrupts\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn latest;\n\t\t}\n\t\treturn chunks;\n\t}\n\tasync _runLoop(params) {\n\t\tconst { loop, runner, debug, config } = params;\n\t\tlet tickError;\n\t\ttry {\n\t\t\twhile (await loop.tick({ inputKeys: this.inputChannels })) {\n\t\t\t\tfor (const { task } of await loop._matchCachedWrites()) loop._outputWrites(task.id, task.writes, true);\n\t\t\t\tif (debug) (0,_debug_js__WEBPACK_IMPORTED_MODULE_11__.printStepCheckpoint)(loop.checkpointMetadata.step, loop.channels, this.streamChannelsList);\n\t\t\t\tif (debug) (0,_debug_js__WEBPACK_IMPORTED_MODULE_11__.printStepTasks)(loop.step, Object.values(loop.tasks));\n\t\t\t\tawait runner.tick({\n\t\t\t\t\ttimeout: this.stepTimeout,\n\t\t\t\t\tretryPolicy: this.retryPolicy,\n\t\t\t\t\tonStepWrite: (step, writes) => {\n\t\t\t\t\t\tif (debug) (0,_debug_js__WEBPACK_IMPORTED_MODULE_11__.printStepWrites)(step, writes, this.streamChannelsList);\n\t\t\t\t\t},\n\t\t\t\t\tmaxConcurrency: config.maxConcurrency,\n\t\t\t\t\tsignal: config.signal\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (loop.status === \"out_of_steps\") throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.GraphRecursionError([\n\t\t\t\t`Recursion limit of ${config.recursionLimit} reached`,\n\t\t\t\t\"without hitting a stop condition. You can increase the\",\n\t\t\t\t`limit by setting the \"recursionLimit\" config key.`\n\t\t\t].join(\" \"), { lc_error_code: \"GRAPH_RECURSION_LIMIT\" });\n\t\t} catch (e) {\n\t\t\ttickError = e;\n\t\t\tif (!await loop.finishAndHandleError(tickError)) throw e;\n\t\t} finally {\n\t\t\tif (tickError === void 0) await loop.finishAndHandleError();\n\t\t}\n\t}\n\tasync clearCache() {\n\t\tawait this.cache?.clear([]);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0Y7QUFDRDtBQUMrUDtBQUN0UDtBQUNoQztBQUNUO0FBQ2hCO0FBQ1U7QUFDa0Y7QUFDM0Q7QUFDZjtBQUMwQztBQUNnQjtBQUM1RTtBQUNlO0FBQ1g7QUFDaUI7QUFDZjtBQUNEO0FBQ2dGO0FBQ3NCOztBQUVsSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsWUFBWTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RUFBdUU7QUFDdkU7QUFDQTtBQUNBLGFBQWEsZ0RBQVU7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLGtEQUFXO0FBQ3JCO0FBQ0EsR0FBRztBQUNILHdEQUF3RCxPQUFPLGdFQUFRO0FBQ3ZFO0FBQ0EsVUFBVSxrREFBVztBQUNyQjtBQUNBLFdBQVcsNkVBQWlCO0FBQzVCLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxhQUFhLG1EQUFZO0FBQ3pCO0FBQ0E7QUFDQSxvQ0FBb0MsZ0VBQVE7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxpQkFBaUI7QUFDdEIsbUJBQW1CLGtCQUFrQixlQUFlLHFCQUFxQjtBQUN6RTtBQUNBLDhDQUE4QyxrQkFBa0I7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLG1CQUFtQjtBQUM5QixXQUFXLGNBQWM7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLG1EQUFtRDtBQUNuRDtBQUNBO0FBQ0EscURBQXFELGtCQUFrQjtBQUN2RSwyREFBMkQsbUJBQW1CLElBQUksd0JBQXdCO0FBQzFHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsYUFBYTtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxNQUFNLGdEQUFLLHNEQUFzRCxnREFBSyxtQkFBbUIsZ0RBQUsseURBQXlELGdEQUFLLENBQUM7QUFDN0oscUJBQXFCLGdEQUFLLFFBQVEsc0RBQUssR0FBRyxtQkFBbUI7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLGFBQWE7QUFDdEQ7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsd0VBQVk7QUFDbkM7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksc0JBQXNCO0FBQ2xDO0FBQ0E7QUFDQSxFQUFFLDREQUFhO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsdUVBQWtCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtHQUFrRyxLQUFLLEVBQUUseUVBQThCLENBQUMsRUFBRSxhQUFhO0FBQ3ZKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixpRUFBaUU7QUFDaEc7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsZ0VBQWE7QUFDaEM7QUFDQSw2RUFBNkUsdURBQVk7QUFDekYsOEJBQThCLHNEQUFZO0FBQzFDLFVBQVUsZ0RBQUs7QUFDZjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0Esa0NBQWtDLDJEQUFpQjtBQUNuRDtBQUNBO0FBQ0EsR0FBRztBQUNILDBCQUEwQix5REFBYztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGtCQUFrQixFQUFFLG1FQUF3QixDQUFDLEVBQUUsUUFBUTtBQUMxRSxvQ0FBb0MsZ0JBQWdCLEVBQUUseUVBQThCLENBQUMsRUFBRSxPQUFPO0FBQzlGO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLDZCQUE2QjtBQUM3QixNQUFNLGtFQUF1QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSxpQkFBaUI7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxnREFBSztBQUNWLEtBQUssb0RBQVM7QUFDZCxLQUFLLHVFQUFTO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxzREFBWTtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxvREFBWTtBQUN2QjtBQUNBLFVBQVUsMkRBQWU7QUFDekI7QUFDQSxXQUFXLG1FQUFrQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpQkFBaUI7QUFDN0I7QUFDQTtBQUNBLDZDQUE2QyxrRUFBdUI7QUFDcEUsK0JBQStCLHVEQUFlLDBCQUEwQix1Q0FBdUM7QUFDL0c7QUFDQSwwREFBMEQsa0VBQXVCO0FBQ2pGLDJCQUEyQiwyRUFBeUI7QUFDcEQsb0pBQW9KLDREQUFpQixXQUFXLENBQUMsa0VBQXVCLGlCQUFpQixLQUFLLCtCQUErQjtBQUM3UCwrQ0FBK0MsZ0JBQWdCO0FBQy9EO0FBQ0EsdUJBQXVCLHdFQUFZO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkI7QUFDQTtBQUNBLDZDQUE2QyxrRUFBdUI7QUFDcEUsK0JBQStCLHVEQUFlLDBCQUEwQix1Q0FBdUM7QUFDL0c7QUFDQSwwREFBMEQsa0VBQXVCO0FBQ2pGLDJCQUEyQiwyRUFBeUI7QUFDcEQ7QUFDQSxrQ0FBa0MsNERBQWlCLFdBQVcsQ0FBQyxrRUFBdUIsaUJBQWlCO0FBQ3ZHO0FBQ0E7QUFDQSwrQ0FBK0MsZ0JBQWdCO0FBQy9EO0FBQ0EsdUJBQXVCLHdFQUFZLHdCQUF3QixnQkFBZ0Isc0NBQXNDO0FBQ2pIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpQkFBaUI7QUFDN0IsWUFBWSxvQkFBb0I7QUFDaEM7QUFDQTtBQUNBLGtEQUFrRCxrRUFBdUI7QUFDekUsK0JBQStCLHVEQUFlLDBCQUEwQix1Q0FBdUM7QUFDL0c7QUFDQTtBQUNBO0FBQ0EsK0RBQStELGtFQUF1QjtBQUN0RiwyQkFBMkIsMkVBQXlCO0FBQ3BELHFIQUFxSCw0REFBaUIsZ0JBQWdCLENBQUMsa0VBQXVCLGlCQUFpQjtBQUMvTCxnQ0FBZ0MsZ0JBQWdCO0FBQ2hEO0FBQ0E7QUFDQSxnQ0FBZ0Msd0VBQVk7QUFDNUM7QUFDQSx5Q0FBeUMsZ0ZBQWMscUJBQXFCLGlGQUFlO0FBQzNGLHdDQUF3QztBQUN4QztBQUNBLDBCQUEwQiw0REFBaUIsV0FBVyx5REFBeUQ7QUFDL0c7QUFDQTtBQUNBLHVCQUF1Qiw0REFBaUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsaUJBQWlCO0FBQzVCO0FBQ0Esc0NBQXNDLDBEQUFrQjtBQUN4RCxXQUFXLG1FQUFrQiwwQ0FBMEMsbUVBQWdCO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBLEtBQUssSUFBSTtBQUNUO0FBQ0Esb0JBQW9CLGdFQUFhO0FBQ2pDLHFDQUFxQyw4Q0FBRztBQUN4QyxzQ0FBc0MsMERBQWtCO0FBQ3hEO0FBQ0EsdUJBQXVCLDJEQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sMkVBQTJFLHVEQUFZO0FBQ3ZGLGdDQUFnQyxzREFBWTtBQUM1QyxZQUFZLGdEQUFLO0FBQ2pCO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE9BQU8sZ0RBQUs7QUFDWixPQUFPLG9EQUFTO0FBQ2hCLE9BQU8sdUVBQVM7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLHNEQUFZO0FBQ2pCO0FBQ0EsV0FBVyxtRUFBa0IsMENBQTBDLG1FQUFnQjtBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssRUFBRSxzRUFBcUI7QUFDNUI7QUFDQSxrQkFBa0IsK0NBQUk7QUFDdEIsc0NBQXNDLDBEQUFrQjtBQUN4RCxpQ0FBaUMsMERBQWtCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsbUVBQWdCO0FBQzNDLHNFQUFzRSw0REFBaUIsaUJBQWlCLHVCQUF1QjtBQUMvSDtBQUNBO0FBQ0E7QUFDQSxLQUFLLElBQUk7QUFDVDtBQUNBLHVCQUF1QiwyREFBaUIsbUZBQW1GLGdCQUFnQjtBQUMzSSxrRUFBa0UsVUFBVTtBQUM1RTtBQUNBLHVCQUF1QixJQUFJO0FBQzNCO0FBQ0EsTUFBTSxJQUFJO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsTUFBTSxJQUFJO0FBQ1YsNEJBQTRCLG1FQUFrQjtBQUM5QztBQUNBLFdBQVcsbUVBQWtCO0FBQzdCO0FBQ0Esa0JBQWtCLGdEQUFLO0FBQ3ZCLHNDQUFzQywwREFBa0I7QUFDeEQsOEJBQThCLHlEQUFjLENBQUMsZ0RBQVE7QUFDckQsNENBQTRDLDBEQUFrQixpQ0FBaUMsNENBQTRDO0FBQzNJLElBQUksc0RBQVk7QUFDaEIsV0FBVyxnREFBSztBQUNoQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0Esa0VBQWtFLG1FQUFnQjtBQUNsRjtBQUNBO0FBQ0E7QUFDQSxLQUFLLEVBQUUsc0VBQXFCO0FBQzVCLDREQUE0RCx1RUFBSyxDQUFDLGdEQUFLO0FBQ3ZFLFdBQVcsbUVBQWtCO0FBQzdCO0FBQ0E7QUFDQSxzQkFBc0IsMkRBQWlCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCwwRUFBMEUsdURBQVk7QUFDdEYsK0JBQStCLHNEQUFZO0FBQzNDLFdBQVcsZ0RBQUs7QUFDaEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsTUFBTSxnREFBSztBQUNYLE1BQU0sb0RBQVM7QUFDZixNQUFNLHVFQUFTO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCw0QkFBNEIsc0RBQVk7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxVQUFVLDZDQUE2QztBQUN2RDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU0sa0NBQWtDLG9EQUFTLGlDQUFpQyx3RkFBc0I7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QywwREFBa0I7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsS0FBSyxrQkFBa0IsNkNBQTZDO0FBQ3BFLG9DQUFvQywwREFBa0I7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGdCQUFnQiw2Q0FBNkM7QUFDN0QsbURBQW1ELDBEQUFrQixVQUFVLG9CQUFvQjtBQUNuRztBQUNBLG1DQUFtQywwREFBa0IsK0JBQStCLG9CQUFvQjtBQUN4RztBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msd0VBQWdCLGlCQUFpQix3QkFBd0I7QUFDekY7QUFDQSxnQkFBZ0Isb0RBQVM7QUFDekIsbUJBQW1CLHVFQUFLLENBQUMsb0RBQVM7QUFDbEM7QUFDQSxLQUFLO0FBQ0w7QUFDQSxnRUFBZ0UsdUVBQVc7QUFDM0U7QUFDQTtBQUNBLElBQUk7QUFDSixrQ0FBa0MsZUFBZTtBQUNqRDtBQUNBLE1BQU0sMERBQWU7QUFDckIsTUFBTSwwREFBZSxnQ0FBZ0Msb0RBQVU7QUFDL0Q7QUFDQSxJQUFJO0FBQ0o7QUFDQSw2REFBNkQsK0NBQUk7QUFDakU7QUFDQTtBQUNBLEdBQUcsc0RBQVk7QUFDZix1QkFBdUIsc0VBQXFCO0FBQzVDLCtEQUErRCxtRUFBZ0I7QUFDL0U7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsMERBQTBELCtDQUFJO0FBQzlEO0FBQ0E7QUFDQSxVQUFVLG1FQUFrQjtBQUM1QjtBQUNBO0FBQ0EsZUFBZSxVQUFVO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaUJBQWlCO0FBQzdCLFlBQVksb0JBQW9CO0FBQ2hDO0FBQ0E7QUFDQSw4Q0FBOEM7QUFDOUM7QUFDQTtBQUNBLEdBQUcsR0FBRztBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxxRkFBcUY7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLDJEQUFZO0FBQ25CO0FBQ0E7QUFDQSxPQUFPLDJEQUFZO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSiw2QkFBNkIsNkRBQWtCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Qsa0VBQXVCLHdEQUF3RCxrRUFBdUI7QUFDNUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILHNHQUFzRyxnRUFBcUI7QUFDM0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLG9FQUFtQjtBQUM5QjtBQUNBO0FBQ0EsYUFBYSw4RUFBcUMsNkNBQTZDLDBEQUFhO0FBQzVHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsaUVBQWdCO0FBQzlCLFdBQVcsb0VBQW1CO0FBQzlCO0FBQ0EsYUFBYSw4RUFBcUM7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRDtBQUNwRDtBQUNBLHNCQUFzQix1RUFBcUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsVUFBVSx1QkFBdUI7QUFDakM7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHVFQUE4QixHQUFHLDRCQUE0QjtBQUNsRjtBQUNBO0FBQ0Esa0NBQWtDLG1FQUF3QjtBQUMxRCx1QkFBdUIsbUVBQXdCLGFBQWEseUVBQThCLDJCQUEyQixtRUFBd0IsV0FBVyx5RUFBOEI7QUFDdEw7QUFDQTtBQUNBLCtCQUErQixnRUFBcUI7QUFDcEQsV0FBVyxZQUFZO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSwyREFBUyxtQkFBbUIsbUVBQXdCLFVBQVUseUVBQThCO0FBQzNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxxREFBUztBQUN0RCxrQ0FBa0MsdUZBQTJCLDJDQUEyQyw4REFBYTtBQUNySCx1QkFBdUIsa0VBQWU7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGlEQUFVO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHVCQUF1QixxREFBWTtBQUNuQztBQUNBLHlDQUF5QyxtRUFBd0I7QUFDakUsS0FBSztBQUNMO0FBQ0E7QUFDQSxNQUFNLDREQUFpQjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EscURBQXFEO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSw0REFBYSxvQ0FBb0Msb0RBQVM7QUFDL0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxDQUFDLG9EQUFTO0FBQzNDO0FBQ0E7QUFDQSxNQUFNLG9EQUFTO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLDhCQUE4QjtBQUN4QztBQUNBO0FBQ0EsNEJBQTRCLCtCQUErQjtBQUMzRCxpQkFBaUIsT0FBTztBQUN4QixlQUFlLCtEQUFtQjtBQUNsQyxlQUFlLDBEQUFjO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDJEQUFlO0FBQ2hDLE1BQU07QUFDTjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsaURBQWlELDJEQUFtQjtBQUNwRSwwQkFBMEIsdUJBQXVCO0FBQ2pEO0FBQ0E7QUFDQSxrQkFBa0Isd0NBQXdDO0FBQzFELElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzJCO0FBQzNCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR3JhcGhSZWN1cnNpb25FcnJvciwgR3JhcGhWYWx1ZUVycm9yLCBJbnZhbGlkVXBkYXRlRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVDaGVja3BvaW50LCBlbXB0eUNoYW5uZWxzLCBnZXRPbmx5Q2hhbm5lbHMgfSBmcm9tIFwiLi4vY2hhbm5lbHMvYmFzZS5qc1wiO1xuaW1wb3J0IHsgQ0hFQ0tQT0lOVF9OQU1FU1BBQ0VfRU5ELCBDSEVDS1BPSU5UX05BTUVTUEFDRV9TRVBBUkFUT1IsIENPTkZJR19LRVlfQ0hFQ0tQT0lOVEVSLCBDT05GSUdfS0VZX0NIRUNLUE9JTlRfTlMsIENPTkZJR19LRVlfRFVSQUJJTElUWSwgQ09ORklHX0tFWV9OT0RFX0ZJTklTSEVELCBDT05GSUdfS0VZX1JFQUQsIENPTkZJR19LRVlfU0VORCwgQ09ORklHX0tFWV9TVFJFQU0sIENPTkZJR19LRVlfVEFTS19JRCwgQ09QWSwgRU5ELCBFUlJPUiwgSU5QVVQsIElOVEVSUlVQVCwgTlVMTF9UQVNLX0lELCBQVVNILCBUQVNLUywgaXNJbnRlcnJ1cHRlZCB9IGZyb20gXCIuLi9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7IGVuc3VyZUxhbmdHcmFwaENvbmZpZywgZ2V0Q29uZmlnLCByZWNhc3RDaGVja3BvaW50TmFtZXNwYWNlIH0gZnJvbSBcIi4vdXRpbHMvY29uZmlnLmpzXCI7XG5pbXBvcnQgeyBnYXRoZXJJdGVyYXRvciwgcGF0Y2hDb25maWd1cmFibGUgfSBmcm9tIFwiLi4vdXRpbHMuanNcIjtcbmltcG9ydCB7IENoYW5uZWxXcml0ZSwgUEFTU1RIUk9VR0ggfSBmcm9tIFwiLi93cml0ZS5qc1wiO1xuaW1wb3J0IHsgUHJlZ2VsTm9kZSB9IGZyb20gXCIuL3JlYWQuanNcIjtcbmltcG9ydCB7IG1hcElucHV0LCByZWFkQ2hhbm5lbHMgfSBmcm9tIFwiLi9pby5qc1wiO1xuaW1wb3J0IHsgX2NvZXJjZVRvRGljdCwgY29tYmluZUFib3J0U2lnbmFscywgY29tYmluZUNhbGxiYWNrcywgZ2V0TmV3Q2hhbm5lbFZlcnNpb25zLCBwYXRjaENoZWNrcG9pbnRNYXAgfSBmcm9tIFwiLi91dGlscy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgX2FwcGx5V3JpdGVzLCBfbG9jYWxSZWFkLCBfcHJlcGFyZU5leHRUYXNrcyB9IGZyb20gXCIuL2FsZ28uanNcIjtcbmltcG9ydCB7IGZpbmRTdWJncmFwaFByZWdlbCB9IGZyb20gXCIuL3V0aWxzL3N1YmdyYXBoLmpzXCI7XG5pbXBvcnQgeyBwcmludFN0ZXBDaGVja3BvaW50LCBwcmludFN0ZXBUYXNrcywgcHJpbnRTdGVwV3JpdGVzLCB0YXNrc1dpdGhXcml0ZXMgfSBmcm9tIFwiLi9kZWJ1Zy5qc1wiO1xuaW1wb3J0IHsgSXRlcmFibGVSZWFkYWJsZVN0cmVhbVdpdGhBYm9ydFNpZ25hbCwgSXRlcmFibGVSZWFkYWJsZVdyaXRhYmxlU3RyZWFtLCB0b0V2ZW50U3RyZWFtIH0gZnJvbSBcIi4vc3RyZWFtLmpzXCI7XG5pbXBvcnQgeyBQcmVnZWxMb29wIH0gZnJvbSBcIi4vbG9vcC5qc1wiO1xuaW1wb3J0IHsgU3RyZWFtTWVzc2FnZXNIYW5kbGVyIH0gZnJvbSBcIi4vbWVzc2FnZXMuanNcIjtcbmltcG9ydCB7IFByZWdlbFJ1bm5lciB9IGZyb20gXCIuL3J1bm5lci5qc1wiO1xuaW1wb3J0IHsgdmFsaWRhdGVHcmFwaCwgdmFsaWRhdGVLZXlzIH0gZnJvbSBcIi4vdmFsaWRhdGUuanNcIjtcbmltcG9ydCB7IFRvcGljIH0gZnJvbSBcIi4uL2NoYW5uZWxzL3RvcGljLmpzXCI7XG5pbXBvcnQgeyBpbnRlcnJ1cHQgfSBmcm9tIFwiLi4vaW50ZXJydXB0LmpzXCI7XG5pbXBvcnQgeyBTQ0hFRFVMRUQsIGNvbXBhcmVDaGFubmVsVmVyc2lvbnMsIGNvcHlDaGVja3BvaW50LCBlbXB0eUNoZWNrcG9pbnQsIHV1aWQ1IH0gZnJvbSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoLWNoZWNrcG9pbnRcIjtcbmltcG9ydCB7IFJ1bm5hYmxlLCBSdW5uYWJsZVNlcXVlbmNlLCBfY29lcmNlVG9SdW5uYWJsZSwgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnLCBtZXJnZUNvbmZpZ3MsIHBhdGNoQ29uZmlnIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9ydW5uYWJsZXNcIjtcblxuLy8jcmVnaW9uIHNyYy9wcmVnZWwvaW5kZXgudHNcbi8qKlxuKiBVdGlsaXR5IGNsYXNzIGZvciB3b3JraW5nIHdpdGggY2hhbm5lbHMgaW4gdGhlIFByZWdlbCBzeXN0ZW0uXG4qIFByb3ZpZGVzIHN0YXRpYyBtZXRob2RzIGZvciBzdWJzY3JpYmluZyB0byBjaGFubmVscyBhbmQgd3JpdGluZyB0byB0aGVtLlxuKlxuKiBDaGFubmVscyBhcmUgdGhlIGNvbW11bmljYXRpb24gcGF0aHdheXMgYmV0d2VlbiBub2RlcyBpbiBhIFByZWdlbCBncmFwaC5cbiogVGhleSBlbmFibGUgbWVzc2FnZSBwYXNzaW5nIGFuZCBzdGF0ZSB1cGRhdGVzIGJldHdlZW4gZGlmZmVyZW50IHBhcnRzIG9mIHRoZSBncmFwaC5cbiovXG52YXIgQ2hhbm5lbCA9IGNsYXNzIHtcblx0c3RhdGljIHN1YnNjcmliZVRvKGNoYW5uZWxzLCBvcHRpb25zKSB7XG5cdFx0Y29uc3QgeyBrZXksIHRhZ3MgfSA9IHtcblx0XHRcdGtleTogdm9pZCAwLFxuXHRcdFx0dGFnczogdm9pZCAwLFxuXHRcdFx0Li4ub3B0aW9ucyA/PyB7fVxuXHRcdH07XG5cdFx0aWYgKEFycmF5LmlzQXJyYXkoY2hhbm5lbHMpICYmIGtleSAhPT0gdm9pZCAwKSB0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBzcGVjaWZ5IGEga2V5IHdoZW4gc3Vic2NyaWJpbmcgdG8gbXVsdGlwbGUgY2hhbm5lbHNcIik7XG5cdFx0bGV0IGNoYW5uZWxNYXBwaW5nT3JBcnJheTtcblx0XHRpZiAodHlwZW9mIGNoYW5uZWxzID09PSBcInN0cmluZ1wiKSBpZiAoa2V5KSBjaGFubmVsTWFwcGluZ09yQXJyYXkgPSB7IFtrZXldOiBjaGFubmVscyB9O1xuXHRcdGVsc2UgY2hhbm5lbE1hcHBpbmdPckFycmF5ID0gW2NoYW5uZWxzXTtcblx0XHRlbHNlIGNoYW5uZWxNYXBwaW5nT3JBcnJheSA9IE9iamVjdC5mcm9tRW50cmllcyhjaGFubmVscy5tYXAoKGNoYW4pID0+IFtjaGFuLCBjaGFuXSkpO1xuXHRcdHJldHVybiBuZXcgUHJlZ2VsTm9kZSh7XG5cdFx0XHRjaGFubmVsczogY2hhbm5lbE1hcHBpbmdPckFycmF5LFxuXHRcdFx0dHJpZ2dlcnM6IEFycmF5LmlzQXJyYXkoY2hhbm5lbHMpID8gY2hhbm5lbHMgOiBbY2hhbm5lbHNdLFxuXHRcdFx0dGFnc1xuXHRcdH0pO1xuXHR9XG5cdC8qKlxuXHQqIENyZWF0ZXMgYSBDaGFubmVsV3JpdGUgdGhhdCBzcGVjaWZpZXMgaG93IHRvIHdyaXRlIHZhbHVlcyB0byBjaGFubmVscy5cblx0KiBUaGlzIGlzIHVzZWQgdG8gZGVmaW5lIGhvdyBub2RlcyBzZW5kIG91dHB1dCB0byBjaGFubmVscy5cblx0KlxuXHQqIEBleGFtcGxlXG5cdCogYGBgdHlwZXNjcmlwdFxuXHQqIC8vIFdyaXRlIHRvIG11bHRpcGxlIGNoYW5uZWxzXG5cdCogY29uc3Qgd3JpdGUgPSBDaGFubmVsLndyaXRlVG8oW1wib3V0cHV0XCIsIFwic3RhdGVcIl0pO1xuXHQqXG5cdCogLy8gV3JpdGUgd2l0aCBzcGVjaWZpYyB2YWx1ZXNcblx0KiBjb25zdCB3cml0ZSA9IENoYW5uZWwud3JpdGVUbyhbXCJvdXRwdXRcIl0sIHtcblx0KiAgIHN0YXRlOiBcImNvbXBsZXRlZFwiLFxuXHQqICAgcmVzdWx0OiBjYWxjdWxhdGVSZXN1bHQoKVxuXHQqIH0pO1xuXHQqXG5cdCogLy8gV3JpdGUgd2l0aCBhIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9uXG5cdCogY29uc3Qgd3JpdGUgPSBDaGFubmVsLndyaXRlVG8oW1wib3V0cHV0XCJdLCB7XG5cdCogICByZXN1bHQ6ICh4KSA9PiBwcm9jZXNzUmVzdWx0KHgpXG5cdCogfSk7XG5cdCogYGBgXG5cdCpcblx0KiBAcGFyYW0gY2hhbm5lbHMgLSBBcnJheSBvZiBjaGFubmVsIG5hbWVzIHRvIHdyaXRlIHRvXG5cdCogQHBhcmFtIHdyaXRlcyAtIE9wdGlvbmFsIG1hcCBvZiBjaGFubmVsIG5hbWVzIHRvIHZhbHVlcyBvciB0cmFuc2Zvcm1hdGlvbnNcblx0KiBAcmV0dXJucyBBIENoYW5uZWxXcml0ZSBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byB3cml0ZSB0byB0aGUgc3BlY2lmaWVkIGNoYW5uZWxzXG5cdCovXG5cdHN0YXRpYyB3cml0ZVRvKGNoYW5uZWxzLCB3cml0ZXMpIHtcblx0XHRjb25zdCBjaGFubmVsV3JpdGVFbnRyaWVzID0gW107XG5cdFx0Zm9yIChjb25zdCBjaGFubmVsIG9mIGNoYW5uZWxzKSBjaGFubmVsV3JpdGVFbnRyaWVzLnB1c2goe1xuXHRcdFx0Y2hhbm5lbCxcblx0XHRcdHZhbHVlOiBQQVNTVEhST1VHSCxcblx0XHRcdHNraXBOb25lOiBmYWxzZVxuXHRcdH0pO1xuXHRcdGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHdyaXRlcyA/PyB7fSkpIGlmIChSdW5uYWJsZS5pc1J1bm5hYmxlKHZhbHVlKSB8fCB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIikgY2hhbm5lbFdyaXRlRW50cmllcy5wdXNoKHtcblx0XHRcdGNoYW5uZWw6IGtleSxcblx0XHRcdHZhbHVlOiBQQVNTVEhST1VHSCxcblx0XHRcdHNraXBOb25lOiB0cnVlLFxuXHRcdFx0bWFwcGVyOiBfY29lcmNlVG9SdW5uYWJsZSh2YWx1ZSlcblx0XHR9KTtcblx0XHRlbHNlIGNoYW5uZWxXcml0ZUVudHJpZXMucHVzaCh7XG5cdFx0XHRjaGFubmVsOiBrZXksXG5cdFx0XHR2YWx1ZSxcblx0XHRcdHNraXBOb25lOiBmYWxzZVxuXHRcdH0pO1xuXHRcdHJldHVybiBuZXcgQ2hhbm5lbFdyaXRlKGNoYW5uZWxXcml0ZUVudHJpZXMpO1xuXHR9XG59O1xudmFyIFBhcnRpYWxSdW5uYWJsZSA9IGNsYXNzIGV4dGVuZHMgUnVubmFibGUge1xuXHRsY19uYW1lc3BhY2UgPSBbXCJsYW5nZ3JhcGhcIiwgXCJwcmVnZWxcIl07XG5cdGludm9rZShfaW5wdXQsIF9vcHRpb25zKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkXCIpO1xuXHR9XG5cdHdpdGhDb25maWcoX2NvbmZpZykge1xuXHRcdHJldHVybiBzdXBlci53aXRoQ29uZmlnKF9jb25maWcpO1xuXHR9XG5cdHN0cmVhbShpbnB1dCwgb3B0aW9ucykge1xuXHRcdHJldHVybiBzdXBlci5zdHJlYW0oaW5wdXQsIG9wdGlvbnMpO1xuXHR9XG59O1xuLyoqXG4qIFRoZSBQcmVnZWwgY2xhc3MgaXMgdGhlIGNvcmUgcnVudGltZSBlbmdpbmUgb2YgTGFuZ0dyYXBoLCBpbXBsZW1lbnRpbmcgYSBtZXNzYWdlLXBhc3NpbmcgZ3JhcGggY29tcHV0YXRpb24gbW9kZWxcbiogaW5zcGlyZWQgYnkgW0dvb2dsZSdzIFByZWdlbCBzeXN0ZW1dKGh0dHBzOi8vcmVzZWFyY2guZ29vZ2xlL3B1YnMvcHJlZ2VsLWEtc3lzdGVtLWZvci1sYXJnZS1zY2FsZS1ncmFwaC1wcm9jZXNzaW5nLykuXG4qIEl0IHByb3ZpZGVzIHRoZSBmb3VuZGF0aW9uIGZvciBidWlsZGluZyByZWxpYWJsZSwgY29udHJvbGxhYmxlIGFnZW50IHdvcmtmbG93cyB0aGF0IGNhbiBldm9sdmUgc3RhdGUgb3ZlciB0aW1lLlxuKlxuKiBLZXkgZmVhdHVyZXM6XG4qIC0gTWVzc2FnZSBwYXNzaW5nIGJldHdlZW4gbm9kZXMgaW4gZGlzY3JldGUgXCJzdXBlcnN0ZXBzXCJcbiogLSBCdWlsdC1pbiBwZXJzaXN0ZW5jZSBsYXllciB0aHJvdWdoIGNoZWNrcG9pbnRlcnNcbiogLSBGaXJzdC1jbGFzcyBzdHJlYW1pbmcgc3VwcG9ydCBmb3IgdmFsdWVzLCB1cGRhdGVzLCBhbmQgZXZlbnRzXG4qIC0gSHVtYW4taW4tdGhlLWxvb3AgY2FwYWJpbGl0aWVzIHZpYSBpbnRlcnJ1cHRzXG4qIC0gU3VwcG9ydCBmb3IgcGFyYWxsZWwgbm9kZSBleGVjdXRpb24gd2l0aGluIHN1cGVyc3RlcHNcbipcbiogVGhlIFByZWdlbCBjbGFzcyBpcyBub3QgaW50ZW5kZWQgdG8gYmUgaW5zdGFudGlhdGVkIGRpcmVjdGx5IGJ5IGNvbnN1bWVycy4gSW5zdGVhZCwgdXNlIHRoZSBmb2xsb3dpbmcgaGlnaGVyLWxldmVsIEFQSXM6XG4qIC0ge0BsaW5rIFN0YXRlR3JhcGh9OiBUaGUgbWFpbiBncmFwaCBjbGFzcyBmb3IgYnVpbGRpbmcgYWdlbnQgd29ya2Zsb3dzXG4qICAgLSBDb21waWxpbmcgYSB7QGxpbmsgU3RhdGVHcmFwaH0gd2lsbCByZXR1cm4gYSB7QGxpbmsgQ29tcGlsZWRHcmFwaH0gaW5zdGFuY2UsIHdoaWNoIGV4dGVuZHMgYFByZWdlbGBcbiogLSBGdW5jdGlvbmFsIEFQSTogQSBkZWNsYXJhdGl2ZSBhcHByb2FjaCB1c2luZyB0YXNrcyBhbmQgZW50cnlwb2ludHNcbiogICAtIEEgYFByZWdlbGAgaW5zdGFuY2UgaXMgcmV0dXJuZWQgYnkgdGhlIHtAbGluayBlbnRyeXBvaW50fSBmdW5jdGlvblxuKlxuKiBAZXhhbXBsZVxuKiBgYGB0eXBlc2NyaXB0XG4qIC8vIFVzaW5nIFN0YXRlR3JhcGggQVBJXG4qIGNvbnN0IGdyYXBoID0gbmV3IFN0YXRlR3JhcGgoYW5ub3RhdGlvbilcbiogICAuYWRkTm9kZShcIm5vZGVBXCIsIG15Tm9kZUZ1bmN0aW9uKVxuKiAgIC5hZGRFZGdlKFwibm9kZUFcIiwgXCJub2RlQlwiKVxuKiAgIC5jb21waWxlKCk7XG4qXG4qIC8vIFRoZSBjb21waWxlZCBncmFwaCBpcyBhIFByZWdlbCBpbnN0YW5jZVxuKiBjb25zdCByZXN1bHQgPSBhd2FpdCBncmFwaC5pbnZva2UoaW5wdXQpO1xuKiBgYGBcbipcbiogQGV4YW1wbGVcbiogYGBgdHlwZXNjcmlwdFxuKiAvLyBVc2luZyBGdW5jdGlvbmFsIEFQSVxuKiBpbXBvcnQgeyB0YXNrLCBlbnRyeXBvaW50IH0gZnJvbSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoXCI7XG4qIGltcG9ydCB7IE1lbW9yeVNhdmVyIH0gZnJvbSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoLWNoZWNrcG9pbnRcIjtcbipcbiogLy8gRGVmaW5lIHRhc2tzIHRoYXQgY2FuIGJlIGNvbXBvc2VkXG4qIGNvbnN0IGFkZE9uZSA9IHRhc2soXCJhZGRcIiwgYXN5bmMgKHg6IG51bWJlcikgPT4geCArIDEpO1xuKlxuKiAvLyBDcmVhdGUgYSB3b3JrZmxvdyB1c2luZyB0aGUgZW50cnlwb2ludCBmdW5jdGlvblxuKiBjb25zdCB3b3JrZmxvdyA9IGVudHJ5cG9pbnQoe1xuKiAgIG5hbWU6IFwid29ya2Zsb3dcIixcbiogICBjaGVja3BvaW50ZXI6IG5ldyBNZW1vcnlTYXZlcigpXG4qIH0sIGFzeW5jIChudW1iZXJzOiBudW1iZXJbXSkgPT4ge1xuKiAgIC8vIFRhc2tzIGNhbiBiZSBydW4gaW4gcGFyYWxsZWxcbiogICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwobnVtYmVycy5tYXAobiA9PiBhZGRPbmUobikpKTtcbiogICByZXR1cm4gcmVzdWx0cztcbiogfSk7XG4qXG4qIC8vIFRoZSB3b3JrZmxvdyBpcyBhIFByZWdlbCBpbnN0YW5jZVxuKiBjb25zdCByZXN1bHQgPSBhd2FpdCB3b3JrZmxvdy5pbnZva2UoWzEsIDIsIDNdKTsgLy8gUmV0dXJucyBbMiwgMywgNF1cbiogYGBgXG4qXG4qIEB0eXBlUGFyYW0gTm9kZXMgLSBNYXBwaW5nIG9mIG5vZGUgbmFtZXMgdG8gdGhlaXIge0BsaW5rIFByZWdlbE5vZGV9IGltcGxlbWVudGF0aW9uc1xuKiBAdHlwZVBhcmFtIENoYW5uZWxzIC0gTWFwcGluZyBvZiBjaGFubmVsIG5hbWVzIHRvIHRoZWlyIHtAbGluayBCYXNlQ2hhbm5lbH0gb3Ige0BsaW5rIE1hbmFnZWRWYWx1ZVNwZWN9IGltcGxlbWVudGF0aW9uc1xuKiBAdHlwZVBhcmFtIENvbnRleHRUeXBlIC0gVHlwZSBvZiBjb250ZXh0IHRoYXQgY2FuIGJlIHBhc3NlZCB0byB0aGUgZ3JhcGhcbiogQHR5cGVQYXJhbSBJbnB1dFR5cGUgLSBUeXBlIG9mIGlucHV0IHZhbHVlcyBhY2NlcHRlZCBieSB0aGUgZ3JhcGhcbiogQHR5cGVQYXJhbSBPdXRwdXRUeXBlIC0gVHlwZSBvZiBvdXRwdXQgdmFsdWVzIHByb2R1Y2VkIGJ5IHRoZSBncmFwaFxuKi9cbnZhciBQcmVnZWwgPSBjbGFzcyBleHRlbmRzIFBhcnRpYWxSdW5uYWJsZSB7XG5cdC8qKlxuXHQqIE5hbWUgb2YgdGhlIGNsYXNzIHdoZW4gc2VyaWFsaXplZFxuXHQqIEBpbnRlcm5hbFxuXHQqL1xuXHRzdGF0aWMgbGNfbmFtZSgpIHtcblx0XHRyZXR1cm4gXCJMYW5nR3JhcGhcIjtcblx0fVxuXHQvKiogQGludGVybmFsIExhbmdDaGFpbiBuYW1lc3BhY2UgZm9yIHNlcmlhbGl6YXRpb24gbmVjZXNzYXJ5IGJlY2F1c2UgUHJlZ2VsIGV4dGVuZHMgUnVubmFibGUgKi9cblx0bGNfbmFtZXNwYWNlID0gW1wibGFuZ2dyYXBoXCIsIFwicHJlZ2VsXCJdO1xuXHQvKiogQGludGVybmFsIEZsYWcgaW5kaWNhdGluZyB0aGlzIGlzIGEgUHJlZ2VsIGluc3RhbmNlIC0gbmVjZXNzYXJ5IGZvciBzZXJpYWxpemF0aW9uICovXG5cdGxnX2lzX3ByZWdlbCA9IHRydWU7XG5cdC8qKiBUaGUgbm9kZXMgaW4gdGhlIGdyYXBoLCBtYXBwaW5nIG5vZGUgbmFtZXMgdG8gdGhlaXIgUHJlZ2VsTm9kZSBpbnN0YW5jZXMgKi9cblx0bm9kZXM7XG5cdC8qKiBUaGUgY2hhbm5lbHMgaW4gdGhlIGdyYXBoLCBtYXBwaW5nIGNoYW5uZWwgbmFtZXMgdG8gdGhlaXIgQmFzZUNoYW5uZWwgb3IgTWFuYWdlZFZhbHVlU3BlYyBpbnN0YW5jZXMgKi9cblx0Y2hhbm5lbHM7XG5cdC8qKlxuXHQqIFRoZSBpbnB1dCBjaGFubmVscyBmb3IgdGhlIGdyYXBoLiBUaGVzZSBjaGFubmVscyByZWNlaXZlIHRoZSBpbml0aWFsIGlucHV0IHdoZW4gdGhlIGdyYXBoIGlzIGludm9rZWQuXG5cdCogQ2FuIGJlIGEgc2luZ2xlIGNoYW5uZWwga2V5IG9yIGFuIGFycmF5IG9mIGNoYW5uZWwga2V5cy5cblx0Ki9cblx0aW5wdXRDaGFubmVscztcblx0LyoqXG5cdCogVGhlIG91dHB1dCBjaGFubmVscyBmb3IgdGhlIGdyYXBoLiBUaGVzZSBjaGFubmVscyBjb250YWluIHRoZSBmaW5hbCBvdXRwdXQgd2hlbiB0aGUgZ3JhcGggY29tcGxldGVzLlxuXHQqIENhbiBiZSBhIHNpbmdsZSBjaGFubmVsIGtleSBvciBhbiBhcnJheSBvZiBjaGFubmVsIGtleXMuXG5cdCovXG5cdG91dHB1dENoYW5uZWxzO1xuXHQvKiogV2hldGhlciB0byBhdXRvbWF0aWNhbGx5IHZhbGlkYXRlIHRoZSBncmFwaCBzdHJ1Y3R1cmUgd2hlbiBpdCBpcyBjb21waWxlZC4gRGVmYXVsdHMgdG8gdHJ1ZS4gKi9cblx0YXV0b1ZhbGlkYXRlID0gdHJ1ZTtcblx0LyoqXG5cdCogVGhlIHN0cmVhbWluZyBtb2RlcyBlbmFibGVkIGZvciB0aGlzIGdyYXBoLiBEZWZhdWx0cyB0byBbXCJ2YWx1ZXNcIl0uXG5cdCogU3VwcG9ydGVkIG1vZGVzOlxuXHQqIC0gXCJ2YWx1ZXNcIjogU3RyZWFtcyB0aGUgZnVsbCBzdGF0ZSBhZnRlciBlYWNoIHN0ZXBcblx0KiAtIFwidXBkYXRlc1wiOiBTdHJlYW1zIHN0YXRlIHVwZGF0ZXMgYWZ0ZXIgZWFjaCBzdGVwXG5cdCogLSBcIm1lc3NhZ2VzXCI6IFN0cmVhbXMgbWVzc2FnZXMgZnJvbSB3aXRoaW4gbm9kZXNcblx0KiAtIFwiY3VzdG9tXCI6IFN0cmVhbXMgY3VzdG9tIGV2ZW50cyBmcm9tIHdpdGhpbiBub2Rlc1xuXHQqIC0gXCJkZWJ1Z1wiOiBTdHJlYW1zIGV2ZW50cyByZWxhdGVkIHRvIHRoZSBleGVjdXRpb24gb2YgdGhlIGdyYXBoIC0gdXNlZnVsIGZvciB0cmFjaW5nICYgZGVidWdnaW5nIGdyYXBoIGV4ZWN1dGlvblxuXHQqL1xuXHRzdHJlYW1Nb2RlID0gW1widmFsdWVzXCJdO1xuXHQvKipcblx0KiBPcHRpb25hbCBjaGFubmVscyB0byBzdHJlYW0uIElmIG5vdCBzcGVjaWZpZWQsIGFsbCBjaGFubmVscyB3aWxsIGJlIHN0cmVhbWVkLlxuXHQqIENhbiBiZSBhIHNpbmdsZSBjaGFubmVsIGtleSBvciBhbiBhcnJheSBvZiBjaGFubmVsIGtleXMuXG5cdCovXG5cdHN0cmVhbUNoYW5uZWxzO1xuXHQvKipcblx0KiBPcHRpb25hbCBhcnJheSBvZiBub2RlIG5hbWVzIG9yIFwiYWxsXCIgdG8gaW50ZXJydXB0IGFmdGVyIGV4ZWN1dGluZyB0aGVzZSBub2Rlcy5cblx0KiBVc2VkIGZvciBpbXBsZW1lbnRpbmcgaHVtYW4taW4tdGhlLWxvb3Agd29ya2Zsb3dzLlxuXHQqL1xuXHRpbnRlcnJ1cHRBZnRlcjtcblx0LyoqXG5cdCogT3B0aW9uYWwgYXJyYXkgb2Ygbm9kZSBuYW1lcyBvciBcImFsbFwiIHRvIGludGVycnVwdCBiZWZvcmUgZXhlY3V0aW5nIHRoZXNlIG5vZGVzLlxuXHQqIFVzZWQgZm9yIGltcGxlbWVudGluZyBodW1hbi1pbi10aGUtbG9vcCB3b3JrZmxvd3MuXG5cdCovXG5cdGludGVycnVwdEJlZm9yZTtcblx0LyoqIE9wdGlvbmFsIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzIGZvciB0aGUgZXhlY3V0aW9uIG9mIGVhY2ggc3VwZXJzdGVwICovXG5cdHN0ZXBUaW1lb3V0O1xuXHQvKiogV2hldGhlciB0byBlbmFibGUgZGVidWcgbG9nZ2luZy4gRGVmYXVsdHMgdG8gZmFsc2UuICovXG5cdGRlYnVnID0gZmFsc2U7XG5cdC8qKlxuXHQqIE9wdGlvbmFsIGNoZWNrcG9pbnRlciBmb3IgcGVyc2lzdGluZyBncmFwaCBzdGF0ZS5cblx0KiBXaGVuIHByb3ZpZGVkLCBzYXZlcyBhIGNoZWNrcG9pbnQgb2YgdGhlIGdyYXBoIHN0YXRlIGF0IGV2ZXJ5IHN1cGVyc3RlcC5cblx0KiBXaGVuIGZhbHNlIG9yIHVuZGVmaW5lZCwgY2hlY2twb2ludGluZyBpcyBkaXNhYmxlZCwgYW5kIHRoZSBncmFwaCB3aWxsIG5vdCBiZSBhYmxlIHRvIHNhdmUgb3IgcmVzdG9yZSBzdGF0ZS5cblx0Ki9cblx0Y2hlY2twb2ludGVyO1xuXHQvKiogT3B0aW9uYWwgcmV0cnkgcG9saWN5IGZvciBoYW5kbGluZyBmYWlsdXJlcyBpbiBub2RlIGV4ZWN1dGlvbiAqL1xuXHRyZXRyeVBvbGljeTtcblx0LyoqIFRoZSBkZWZhdWx0IGNvbmZpZ3VyYXRpb24gZm9yIGdyYXBoIGV4ZWN1dGlvbiwgY2FuIGJlIG92ZXJyaWRkZW4gb24gYSBwZXItaW52b2NhdGlvbiBiYXNpcyAqL1xuXHRjb25maWc7XG5cdC8qKlxuXHQqIE9wdGlvbmFsIGxvbmctdGVybSBtZW1vcnkgc3RvcmUgZm9yIHRoZSBncmFwaCwgYWxsb3dzIGZvciBwZXJzaXN0ZW5jZSAmIHJldHJpZXZhbCBvZiBkYXRhIGFjcm9zcyB0aHJlYWRzXG5cdCovXG5cdHN0b3JlO1xuXHQvKipcblx0KiBPcHRpb25hbCBjYWNoZSBmb3IgdGhlIGdyYXBoLCB1c2VmdWwgZm9yIGNhY2hpbmcgdGFza3MuXG5cdCovXG5cdGNhY2hlO1xuXHQvKipcblx0KiBPcHRpb25hbCBpbnRlcnJ1cHQgaGVscGVyIGZ1bmN0aW9uLlxuXHQqIEBpbnRlcm5hbFxuXHQqL1xuXHR1c2VySW50ZXJydXB0O1xuXHQvKipcblx0KiBUaGUgdHJpZ2dlciB0byBub2RlIG1hcHBpbmcgZm9yIHRoZSBncmFwaCBydW4uXG5cdCogQGludGVybmFsXG5cdCovXG5cdHRyaWdnZXJUb05vZGVzID0ge307XG5cdC8qKlxuXHQqIENvbnN0cnVjdG9yIGZvciBQcmVnZWwgLSBtZWFudCBmb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG5cdCpcblx0KiBAaW50ZXJuYWxcblx0Ki9cblx0Y29uc3RydWN0b3IoZmllbGRzKSB7XG5cdFx0c3VwZXIoZmllbGRzKTtcblx0XHRsZXQgeyBzdHJlYW1Nb2RlIH0gPSBmaWVsZHM7XG5cdFx0aWYgKHN0cmVhbU1vZGUgIT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheShzdHJlYW1Nb2RlKSkgc3RyZWFtTW9kZSA9IFtzdHJlYW1Nb2RlXTtcblx0XHR0aGlzLm5vZGVzID0gZmllbGRzLm5vZGVzO1xuXHRcdHRoaXMuY2hhbm5lbHMgPSBmaWVsZHMuY2hhbm5lbHM7XG5cdFx0aWYgKFRBU0tTIGluIHRoaXMuY2hhbm5lbHMgJiYgXCJsY19ncmFwaF9uYW1lXCIgaW4gdGhpcy5jaGFubmVsc1tUQVNLU10gJiYgdGhpcy5jaGFubmVsc1tUQVNLU10ubGNfZ3JhcGhfbmFtZSAhPT0gXCJUb3BpY1wiKSB0aHJvdyBuZXcgRXJyb3IoYENoYW5uZWwgJyR7VEFTS1N9JyBpcyByZXNlcnZlZCBhbmQgY2Fubm90IGJlIHVzZWQgaW4gdGhlIGdyYXBoLmApO1xuXHRcdGVsc2UgdGhpcy5jaGFubmVsc1tUQVNLU10gPSBuZXcgVG9waWMoeyBhY2N1bXVsYXRlOiBmYWxzZSB9KTtcblx0XHR0aGlzLmF1dG9WYWxpZGF0ZSA9IGZpZWxkcy5hdXRvVmFsaWRhdGUgPz8gdGhpcy5hdXRvVmFsaWRhdGU7XG5cdFx0dGhpcy5zdHJlYW1Nb2RlID0gc3RyZWFtTW9kZSA/PyB0aGlzLnN0cmVhbU1vZGU7XG5cdFx0dGhpcy5pbnB1dENoYW5uZWxzID0gZmllbGRzLmlucHV0Q2hhbm5lbHM7XG5cdFx0dGhpcy5vdXRwdXRDaGFubmVscyA9IGZpZWxkcy5vdXRwdXRDaGFubmVscztcblx0XHR0aGlzLnN0cmVhbUNoYW5uZWxzID0gZmllbGRzLnN0cmVhbUNoYW5uZWxzID8/IHRoaXMuc3RyZWFtQ2hhbm5lbHM7XG5cdFx0dGhpcy5pbnRlcnJ1cHRBZnRlciA9IGZpZWxkcy5pbnRlcnJ1cHRBZnRlcjtcblx0XHR0aGlzLmludGVycnVwdEJlZm9yZSA9IGZpZWxkcy5pbnRlcnJ1cHRCZWZvcmU7XG5cdFx0dGhpcy5zdGVwVGltZW91dCA9IGZpZWxkcy5zdGVwVGltZW91dCA/PyB0aGlzLnN0ZXBUaW1lb3V0O1xuXHRcdHRoaXMuZGVidWcgPSBmaWVsZHMuZGVidWcgPz8gdGhpcy5kZWJ1Zztcblx0XHR0aGlzLmNoZWNrcG9pbnRlciA9IGZpZWxkcy5jaGVja3BvaW50ZXI7XG5cdFx0dGhpcy5yZXRyeVBvbGljeSA9IGZpZWxkcy5yZXRyeVBvbGljeTtcblx0XHR0aGlzLmNvbmZpZyA9IGZpZWxkcy5jb25maWc7XG5cdFx0dGhpcy5zdG9yZSA9IGZpZWxkcy5zdG9yZTtcblx0XHR0aGlzLmNhY2hlID0gZmllbGRzLmNhY2hlO1xuXHRcdHRoaXMubmFtZSA9IGZpZWxkcy5uYW1lO1xuXHRcdHRoaXMudHJpZ2dlclRvTm9kZXMgPSBmaWVsZHMudHJpZ2dlclRvTm9kZXMgPz8gdGhpcy50cmlnZ2VyVG9Ob2Rlcztcblx0XHR0aGlzLnVzZXJJbnRlcnJ1cHQgPSBmaWVsZHMudXNlckludGVycnVwdDtcblx0XHRpZiAodGhpcy5hdXRvVmFsaWRhdGUpIHRoaXMudmFsaWRhdGUoKTtcblx0fVxuXHQvKipcblx0KiBDcmVhdGVzIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBQcmVnZWwgZ3JhcGggd2l0aCB1cGRhdGVkIGNvbmZpZ3VyYXRpb24uXG5cdCogVGhpcyBtZXRob2QgZm9sbG93cyB0aGUgaW1tdXRhYmxlIHBhdHRlcm4gLSBpbnN0ZWFkIG9mIG1vZGlmeWluZyB0aGUgY3VycmVudCBpbnN0YW5jZSxcblx0KiBpdCByZXR1cm5zIGEgbmV3IGluc3RhbmNlIHdpdGggdGhlIG1lcmdlZCBjb25maWd1cmF0aW9uLlxuXHQqXG5cdCogQGV4YW1wbGVcblx0KiBgYGB0eXBlc2NyaXB0XG5cdCogLy8gQ3JlYXRlIGEgbmV3IGluc3RhbmNlIHdpdGggZGVidWcgZW5hYmxlZFxuXHQqIGNvbnN0IGRlYnVnR3JhcGggPSBncmFwaC53aXRoQ29uZmlnKHsgZGVidWc6IHRydWUgfSk7XG5cdCpcblx0KiAvLyBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugd2l0aCBhIHNwZWNpZmljIHRocmVhZCBJRFxuXHQqIGNvbnN0IHRocmVhZEdyYXBoID0gZ3JhcGgud2l0aENvbmZpZyh7XG5cdCogICBjb25maWd1cmFibGU6IHsgdGhyZWFkX2lkOiBcIjEyM1wiIH1cblx0KiB9KTtcblx0KiBgYGBcblx0KlxuXHQqIEBwYXJhbSBjb25maWcgLSBUaGUgY29uZmlndXJhdGlvbiB0byBtZXJnZSB3aXRoIHRoZSBjdXJyZW50IGNvbmZpZ3VyYXRpb25cblx0KiBAcmV0dXJucyBBIG5ldyBQcmVnZWwgaW5zdGFuY2Ugd2l0aCB0aGUgbWVyZ2VkIGNvbmZpZ3VyYXRpb25cblx0Ki9cblx0d2l0aENvbmZpZyhjb25maWcpIHtcblx0XHRjb25zdCBtZXJnZWRDb25maWcgPSBtZXJnZUNvbmZpZ3ModGhpcy5jb25maWcsIGNvbmZpZyk7XG5cdFx0cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHtcblx0XHRcdC4uLnRoaXMsXG5cdFx0XHRjb25maWc6IG1lcmdlZENvbmZpZ1xuXHRcdH0pO1xuXHR9XG5cdC8qKlxuXHQqIFZhbGlkYXRlcyB0aGUgZ3JhcGggc3RydWN0dXJlIHRvIGVuc3VyZSBpdCBpcyB3ZWxsLWZvcm1lZC5cblx0KiBDaGVja3MgZm9yOlxuXHQqIC0gTm8gb3JwaGFuZWQgbm9kZXNcblx0KiAtIFZhbGlkIGlucHV0L291dHB1dCBjaGFubmVsIGNvbmZpZ3VyYXRpb25zXG5cdCogLSBWYWxpZCBpbnRlcnJ1cHQgY29uZmlndXJhdGlvbnNcblx0KlxuXHQqIEByZXR1cm5zIHRoaXMgLSBUaGUgUHJlZ2VsIGluc3RhbmNlIGZvciBtZXRob2QgY2hhaW5pbmdcblx0KiBAdGhyb3dzIHtHcmFwaFZhbGlkYXRpb25FcnJvcn0gSWYgdGhlIGdyYXBoIHN0cnVjdHVyZSBpcyBpbnZhbGlkXG5cdCovXG5cdHZhbGlkYXRlKCkge1xuXHRcdHZhbGlkYXRlR3JhcGgoe1xuXHRcdFx0bm9kZXM6IHRoaXMubm9kZXMsXG5cdFx0XHRjaGFubmVsczogdGhpcy5jaGFubmVscyxcblx0XHRcdG91dHB1dENoYW5uZWxzOiB0aGlzLm91dHB1dENoYW5uZWxzLFxuXHRcdFx0aW5wdXRDaGFubmVsczogdGhpcy5pbnB1dENoYW5uZWxzLFxuXHRcdFx0c3RyZWFtQ2hhbm5lbHM6IHRoaXMuc3RyZWFtQ2hhbm5lbHMsXG5cdFx0XHRpbnRlcnJ1cHRBZnRlck5vZGVzOiB0aGlzLmludGVycnVwdEFmdGVyLFxuXHRcdFx0aW50ZXJydXB0QmVmb3JlTm9kZXM6IHRoaXMuaW50ZXJydXB0QmVmb3JlXG5cdFx0fSk7XG5cdFx0Zm9yIChjb25zdCBbbmFtZSwgbm9kZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5ub2RlcykpIGZvciAoY29uc3QgdHJpZ2dlciBvZiBub2RlLnRyaWdnZXJzKSB7XG5cdFx0XHR0aGlzLnRyaWdnZXJUb05vZGVzW3RyaWdnZXJdID8/PSBbXTtcblx0XHRcdHRoaXMudHJpZ2dlclRvTm9kZXNbdHJpZ2dlcl0ucHVzaChuYW1lKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblx0LyoqXG5cdCogR2V0cyBhIGxpc3Qgb2YgYWxsIGNoYW5uZWxzIHRoYXQgc2hvdWxkIGJlIHN0cmVhbWVkLlxuXHQqIElmIHN0cmVhbUNoYW5uZWxzIGlzIHNwZWNpZmllZCwgcmV0dXJucyB0aG9zZSBjaGFubmVscy5cblx0KiBPdGhlcndpc2UsIHJldHVybnMgYWxsIGNoYW5uZWxzIGluIHRoZSBncmFwaC5cblx0KlxuXHQqIEByZXR1cm5zIEFycmF5IG9mIGNoYW5uZWwga2V5cyB0byBzdHJlYW1cblx0Ki9cblx0Z2V0IHN0cmVhbUNoYW5uZWxzTGlzdCgpIHtcblx0XHRpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnN0cmVhbUNoYW5uZWxzKSkgcmV0dXJuIHRoaXMuc3RyZWFtQ2hhbm5lbHM7XG5cdFx0ZWxzZSBpZiAodGhpcy5zdHJlYW1DaGFubmVscykgcmV0dXJuIFt0aGlzLnN0cmVhbUNoYW5uZWxzXTtcblx0XHRlbHNlIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmNoYW5uZWxzKTtcblx0fVxuXHQvKipcblx0KiBHZXRzIHRoZSBjaGFubmVscyB0byBzdHJlYW0gaW4gdGhlaXIgb3JpZ2luYWwgZm9ybWF0LlxuXHQqIElmIHN0cmVhbUNoYW5uZWxzIGlzIHNwZWNpZmllZCwgcmV0dXJucyBpdCBhcy1pcyAoZWl0aGVyIHNpbmdsZSBrZXkgb3IgYXJyYXkpLlxuXHQqIE90aGVyd2lzZSwgcmV0dXJucyBhbGwgY2hhbm5lbHMgaW4gdGhlIGdyYXBoIGFzIGFuIGFycmF5LlxuXHQqXG5cdCogQHJldHVybnMgQ2hhbm5lbCBrZXlzIHRvIHN0cmVhbSwgZWl0aGVyIGFzIGEgc2luZ2xlIGtleSBvciBhcnJheVxuXHQqL1xuXHRnZXQgc3RyZWFtQ2hhbm5lbHNBc0lzKCkge1xuXHRcdGlmICh0aGlzLnN0cmVhbUNoYW5uZWxzKSByZXR1cm4gdGhpcy5zdHJlYW1DaGFubmVscztcblx0XHRlbHNlIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmNoYW5uZWxzKTtcblx0fVxuXHQvKipcblx0KiBHZXRzIGEgZHJhd2FibGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdyYXBoIHN0cnVjdHVyZS5cblx0KiBUaGlzIGlzIGFuIGFzeW5jIHZlcnNpb24gb2YgZ2V0R3JhcGgoKSBhbmQgaXMgdGhlIHByZWZlcnJlZCBtZXRob2QgdG8gdXNlLlxuXHQqXG5cdCogQHBhcmFtIGNvbmZpZyAtIENvbmZpZ3VyYXRpb24gZm9yIGdlbmVyYXRpbmcgdGhlIGdyYXBoIHZpc3VhbGl6YXRpb25cblx0KiBAcmV0dXJucyBBIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBncmFwaCB0aGF0IGNhbiBiZSB2aXN1YWxpemVkXG5cdCovXG5cdGFzeW5jIGdldEdyYXBoQXN5bmMoY29uZmlnKSB7XG5cdFx0cmV0dXJuIHRoaXMuZ2V0R3JhcGgoY29uZmlnKTtcblx0fVxuXHQvKipcblx0KiBHZXRzIGFsbCBzdWJncmFwaHMgd2l0aGluIHRoaXMgZ3JhcGguXG5cdCogQSBzdWJncmFwaCBpcyBhIFByZWdlbCBpbnN0YW5jZSB0aGF0IGlzIG5lc3RlZCB3aXRoaW4gYSBub2RlIG9mIHRoaXMgZ3JhcGguXG5cdCpcblx0KiBAZGVwcmVjYXRlZCBVc2UgZ2V0U3ViZ3JhcGhzQXN5bmMgaW5zdGVhZC4gVGhlIGFzeW5jIG1ldGhvZCB3aWxsIGJlY29tZSB0aGUgZGVmYXVsdCBpbiB0aGUgbmV4dCBtaW5vciByZWxlYXNlLlxuXHQqIEBwYXJhbSBuYW1lc3BhY2UgLSBPcHRpb25hbCBuYW1lc3BhY2UgdG8gZmlsdGVyIHN1YmdyYXBoc1xuXHQqIEBwYXJhbSByZWN1cnNlIC0gV2hldGhlciB0byByZWN1cnNpdmVseSBnZXQgc3ViZ3JhcGhzIG9mIHN1YmdyYXBoc1xuXHQqIEByZXR1cm5zIEdlbmVyYXRvciB5aWVsZGluZyB0dXBsZXMgb2YgW25hbWUsIHN1YmdyYXBoXVxuXHQqL1xuXHQqZ2V0U3ViZ3JhcGhzKG5hbWVzcGFjZSwgcmVjdXJzZSkge1xuXHRcdGZvciAoY29uc3QgW25hbWUsIG5vZGVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMubm9kZXMpKSB7XG5cdFx0XHRpZiAobmFtZXNwYWNlICE9PSB2b2lkIDApIHtcblx0XHRcdFx0aWYgKCFuYW1lc3BhY2Uuc3RhcnRzV2l0aChuYW1lKSkgY29udGludWU7XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBjYW5kaWRhdGVzID0gbm9kZS5zdWJncmFwaHM/Lmxlbmd0aCA/IG5vZGUuc3ViZ3JhcGhzIDogW25vZGUuYm91bmRdO1xuXHRcdFx0Zm9yIChjb25zdCBjYW5kaWRhdGUgb2YgY2FuZGlkYXRlcykge1xuXHRcdFx0XHRjb25zdCBncmFwaCA9IGZpbmRTdWJncmFwaFByZWdlbChjYW5kaWRhdGUpO1xuXHRcdFx0XHRpZiAoZ3JhcGggIT09IHZvaWQgMCkge1xuXHRcdFx0XHRcdGlmIChuYW1lID09PSBuYW1lc3BhY2UpIHtcblx0XHRcdFx0XHRcdHlpZWxkIFtuYW1lLCBncmFwaF07XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChuYW1lc3BhY2UgPT09IHZvaWQgMCkgeWllbGQgW25hbWUsIGdyYXBoXTtcblx0XHRcdFx0XHRpZiAocmVjdXJzZSkge1xuXHRcdFx0XHRcdFx0bGV0IG5ld05hbWVzcGFjZSA9IG5hbWVzcGFjZTtcblx0XHRcdFx0XHRcdGlmIChuYW1lc3BhY2UgIT09IHZvaWQgMCkgbmV3TmFtZXNwYWNlID0gbmFtZXNwYWNlLnNsaWNlKG5hbWUubGVuZ3RoICsgMSk7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IFtzdWJncmFwaE5hbWUsIHN1YmdyYXBoXSBvZiBncmFwaC5nZXRTdWJncmFwaHMobmV3TmFtZXNwYWNlLCByZWN1cnNlKSkgeWllbGQgW2Ake25hbWV9JHtDSEVDS1BPSU5UX05BTUVTUEFDRV9TRVBBUkFUT1J9JHtzdWJncmFwaE5hbWV9YCwgc3ViZ3JhcGhdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHQvKipcblx0KiBHZXRzIGFsbCBzdWJncmFwaHMgd2l0aGluIHRoaXMgZ3JhcGggYXN5bmNocm9ub3VzbHkuXG5cdCogQSBzdWJncmFwaCBpcyBhIFByZWdlbCBpbnN0YW5jZSB0aGF0IGlzIG5lc3RlZCB3aXRoaW4gYSBub2RlIG9mIHRoaXMgZ3JhcGguXG5cdCpcblx0KiBAcGFyYW0gbmFtZXNwYWNlIC0gT3B0aW9uYWwgbmFtZXNwYWNlIHRvIGZpbHRlciBzdWJncmFwaHNcblx0KiBAcGFyYW0gcmVjdXJzZSAtIFdoZXRoZXIgdG8gcmVjdXJzaXZlbHkgZ2V0IHN1YmdyYXBocyBvZiBzdWJncmFwaHNcblx0KiBAcmV0dXJucyBBc3luY0dlbmVyYXRvciB5aWVsZGluZyB0dXBsZXMgb2YgW25hbWUsIHN1YmdyYXBoXVxuXHQqL1xuXHRhc3luYyAqZ2V0U3ViZ3JhcGhzQXN5bmMobmFtZXNwYWNlLCByZWN1cnNlKSB7XG5cdFx0eWllbGQqIHRoaXMuZ2V0U3ViZ3JhcGhzKG5hbWVzcGFjZSwgcmVjdXJzZSk7XG5cdH1cblx0LyoqXG5cdCogUHJlcGFyZXMgYSBzdGF0ZSBzbmFwc2hvdCBmcm9tIHNhdmVkIGNoZWNrcG9pbnQgZGF0YS5cblx0KiBUaGlzIGlzIGFuIGludGVybmFsIG1ldGhvZCB1c2VkIGJ5IGdldFN0YXRlIGFuZCBnZXRTdGF0ZUhpc3RvcnkuXG5cdCpcblx0KiBAcGFyYW0gY29uZmlnIC0gQ29uZmlndXJhdGlvbiBmb3IgcHJlcGFyaW5nIHRoZSBzbmFwc2hvdFxuXHQqIEBwYXJhbSBzYXZlZCAtIE9wdGlvbmFsIHNhdmVkIGNoZWNrcG9pbnQgZGF0YVxuXHQqIEBwYXJhbSBzdWJncmFwaENoZWNrcG9pbnRlciAtIE9wdGlvbmFsIGNoZWNrcG9pbnRlciBmb3Igc3ViZ3JhcGhzXG5cdCogQHBhcmFtIGFwcGx5UGVuZGluZ1dyaXRlcyAtIFdoZXRoZXIgdG8gYXBwbHkgcGVuZGluZyB3cml0ZXMgdG8gdGFza3MgYW5kIHRoZW4gdG8gY2hhbm5lbHNcblx0KiBAcmV0dXJucyBBIHNuYXBzaG90IG9mIHRoZSBncmFwaCBzdGF0ZVxuXHQqIEBpbnRlcm5hbFxuXHQqL1xuXHRhc3luYyBfcHJlcGFyZVN0YXRlU25hcHNob3QoeyBjb25maWcsIHNhdmVkLCBzdWJncmFwaENoZWNrcG9pbnRlciwgYXBwbHlQZW5kaW5nV3JpdGVzID0gZmFsc2UgfSkge1xuXHRcdGlmIChzYXZlZCA9PT0gdm9pZCAwKSByZXR1cm4ge1xuXHRcdFx0dmFsdWVzOiB7fSxcblx0XHRcdG5leHQ6IFtdLFxuXHRcdFx0Y29uZmlnLFxuXHRcdFx0dGFza3M6IFtdXG5cdFx0fTtcblx0XHRjb25zdCBjaGFubmVscyA9IGVtcHR5Q2hhbm5lbHModGhpcy5jaGFubmVscywgc2F2ZWQuY2hlY2twb2ludCk7XG5cdFx0aWYgKHNhdmVkLnBlbmRpbmdXcml0ZXM/Lmxlbmd0aCkge1xuXHRcdFx0Y29uc3QgbnVsbFdyaXRlcyA9IHNhdmVkLnBlbmRpbmdXcml0ZXMuZmlsdGVyKChbdGFza0lkLCBfXSkgPT4gdGFza0lkID09PSBOVUxMX1RBU0tfSUQpLm1hcCgoW18sIGNoYW5uZWwsIHZhbHVlXSkgPT4gW1N0cmluZyhjaGFubmVsKSwgdmFsdWVdKTtcblx0XHRcdGlmIChudWxsV3JpdGVzLmxlbmd0aCA+IDApIF9hcHBseVdyaXRlcyhzYXZlZC5jaGVja3BvaW50LCBjaGFubmVscywgW3tcblx0XHRcdFx0bmFtZTogSU5QVVQsXG5cdFx0XHRcdHdyaXRlczogbnVsbFdyaXRlcyxcblx0XHRcdFx0dHJpZ2dlcnM6IFtdXG5cdFx0XHR9XSwgdm9pZCAwLCB0aGlzLnRyaWdnZXJUb05vZGVzKTtcblx0XHR9XG5cdFx0Y29uc3QgbmV4dFRhc2tzID0gT2JqZWN0LnZhbHVlcyhfcHJlcGFyZU5leHRUYXNrcyhzYXZlZC5jaGVja3BvaW50LCBzYXZlZC5wZW5kaW5nV3JpdGVzLCB0aGlzLm5vZGVzLCBjaGFubmVscywgc2F2ZWQuY29uZmlnLCB0cnVlLCB7XG5cdFx0XHRzdGVwOiAoc2F2ZWQubWV0YWRhdGE/LnN0ZXAgPz8gLTEpICsgMSxcblx0XHRcdHN0b3JlOiB0aGlzLnN0b3JlXG5cdFx0fSkpO1xuXHRcdGNvbnN0IHN1YmdyYXBocyA9IGF3YWl0IGdhdGhlckl0ZXJhdG9yKHRoaXMuZ2V0U3ViZ3JhcGhzQXN5bmMoKSk7XG5cdFx0Y29uc3QgcGFyZW50TmFtZXNwYWNlID0gc2F2ZWQuY29uZmlnLmNvbmZpZ3VyYWJsZT8uY2hlY2twb2ludF9ucyA/PyBcIlwiO1xuXHRcdGNvbnN0IHRhc2tTdGF0ZXMgPSB7fTtcblx0XHRmb3IgKGNvbnN0IHRhc2sgb2YgbmV4dFRhc2tzKSB7XG5cdFx0XHRjb25zdCBtYXRjaGluZ1N1YmdyYXBoID0gc3ViZ3JhcGhzLmZpbmQoKFtuYW1lXSkgPT4gbmFtZSA9PT0gdGFzay5uYW1lKTtcblx0XHRcdGlmICghbWF0Y2hpbmdTdWJncmFwaCkgY29udGludWU7XG5cdFx0XHRsZXQgdGFza05zID0gYCR7U3RyaW5nKHRhc2submFtZSl9JHtDSEVDS1BPSU5UX05BTUVTUEFDRV9FTkR9JHt0YXNrLmlkfWA7XG5cdFx0XHRpZiAocGFyZW50TmFtZXNwYWNlKSB0YXNrTnMgPSBgJHtwYXJlbnROYW1lc3BhY2V9JHtDSEVDS1BPSU5UX05BTUVTUEFDRV9TRVBBUkFUT1J9JHt0YXNrTnN9YDtcblx0XHRcdGlmIChzdWJncmFwaENoZWNrcG9pbnRlciA9PT0gdm9pZCAwKSB7XG5cdFx0XHRcdGNvbnN0IGNvbmZpZyQxID0geyBjb25maWd1cmFibGU6IHtcblx0XHRcdFx0XHR0aHJlYWRfaWQ6IHNhdmVkLmNvbmZpZy5jb25maWd1cmFibGU/LnRocmVhZF9pZCxcblx0XHRcdFx0XHRjaGVja3BvaW50X25zOiB0YXNrTnNcblx0XHRcdFx0fSB9O1xuXHRcdFx0XHR0YXNrU3RhdGVzW3Rhc2suaWRdID0gY29uZmlnJDE7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zdCBzdWJncmFwaENvbmZpZyA9IHsgY29uZmlndXJhYmxlOiB7XG5cdFx0XHRcdFx0W0NPTkZJR19LRVlfQ0hFQ0tQT0lOVEVSXTogc3ViZ3JhcGhDaGVja3BvaW50ZXIsXG5cdFx0XHRcdFx0dGhyZWFkX2lkOiBzYXZlZC5jb25maWcuY29uZmlndXJhYmxlPy50aHJlYWRfaWQsXG5cdFx0XHRcdFx0Y2hlY2twb2ludF9uczogdGFza05zXG5cdFx0XHRcdH0gfTtcblx0XHRcdFx0Y29uc3QgcHJlZ2VsID0gbWF0Y2hpbmdTdWJncmFwaFsxXTtcblx0XHRcdFx0dGFza1N0YXRlc1t0YXNrLmlkXSA9IGF3YWl0IHByZWdlbC5nZXRTdGF0ZShzdWJncmFwaENvbmZpZywgeyBzdWJncmFwaHM6IHRydWUgfSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmIChhcHBseVBlbmRpbmdXcml0ZXMgJiYgc2F2ZWQucGVuZGluZ1dyaXRlcz8ubGVuZ3RoKSB7XG5cdFx0XHRjb25zdCBuZXh0VGFza0J5SWQgPSBPYmplY3QuZnJvbUVudHJpZXMobmV4dFRhc2tzLm1hcCgodGFzaykgPT4gW3Rhc2suaWQsIHRhc2tdKSk7XG5cdFx0XHRmb3IgKGNvbnN0IFt0YXNrSWQsIGNoYW5uZWwsIHZhbHVlXSBvZiBzYXZlZC5wZW5kaW5nV3JpdGVzKSB7XG5cdFx0XHRcdGlmIChbXG5cdFx0XHRcdFx0RVJST1IsXG5cdFx0XHRcdFx0SU5URVJSVVBULFxuXHRcdFx0XHRcdFNDSEVEVUxFRFxuXHRcdFx0XHRdLmluY2x1ZGVzKGNoYW5uZWwpKSBjb250aW51ZTtcblx0XHRcdFx0aWYgKCEodGFza0lkIGluIG5leHRUYXNrQnlJZCkpIGNvbnRpbnVlO1xuXHRcdFx0XHRuZXh0VGFza0J5SWRbdGFza0lkXS53cml0ZXMucHVzaChbU3RyaW5nKGNoYW5uZWwpLCB2YWx1ZV0pO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgdGFza3NXaXRoV3JpdGVzJDEgPSBuZXh0VGFza3MuZmlsdGVyKCh0YXNrKSA9PiB0YXNrLndyaXRlcy5sZW5ndGggPiAwKTtcblx0XHRcdGlmICh0YXNrc1dpdGhXcml0ZXMkMS5sZW5ndGggPiAwKSBfYXBwbHlXcml0ZXMoc2F2ZWQuY2hlY2twb2ludCwgY2hhbm5lbHMsIHRhc2tzV2l0aFdyaXRlcyQxLCB2b2lkIDAsIHRoaXMudHJpZ2dlclRvTm9kZXMpO1xuXHRcdH1cblx0XHRsZXQgbWV0YWRhdGEgPSBzYXZlZD8ubWV0YWRhdGE7XG5cdFx0aWYgKG1ldGFkYXRhICYmIHNhdmVkPy5jb25maWc/LmNvbmZpZ3VyYWJsZT8udGhyZWFkX2lkKSBtZXRhZGF0YSA9IHtcblx0XHRcdC4uLm1ldGFkYXRhLFxuXHRcdFx0dGhyZWFkX2lkOiBzYXZlZC5jb25maWcuY29uZmlndXJhYmxlLnRocmVhZF9pZFxuXHRcdH07XG5cdFx0Y29uc3QgbmV4dExpc3QgPSBuZXh0VGFza3MuZmlsdGVyKCh0YXNrKSA9PiB0YXNrLndyaXRlcy5sZW5ndGggPT09IDApLm1hcCgodGFzaykgPT4gdGFzay5uYW1lKTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0dmFsdWVzOiByZWFkQ2hhbm5lbHMoY2hhbm5lbHMsIHRoaXMuc3RyZWFtQ2hhbm5lbHNBc0lzKSxcblx0XHRcdG5leHQ6IG5leHRMaXN0LFxuXHRcdFx0dGFza3M6IHRhc2tzV2l0aFdyaXRlcyhuZXh0VGFza3MsIHNhdmVkPy5wZW5kaW5nV3JpdGVzID8/IFtdLCB0YXNrU3RhdGVzLCB0aGlzLnN0cmVhbUNoYW5uZWxzQXNJcyksXG5cdFx0XHRtZXRhZGF0YSxcblx0XHRcdGNvbmZpZzogcGF0Y2hDaGVja3BvaW50TWFwKHNhdmVkLmNvbmZpZywgc2F2ZWQubWV0YWRhdGEpLFxuXHRcdFx0Y3JlYXRlZEF0OiBzYXZlZC5jaGVja3BvaW50LnRzLFxuXHRcdFx0cGFyZW50Q29uZmlnOiBzYXZlZC5wYXJlbnRDb25maWdcblx0XHR9O1xuXHR9XG5cdC8qKlxuXHQqIEdldHMgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGdyYXBoLlxuXHQqIFJlcXVpcmVzIGEgY2hlY2twb2ludGVyIHRvIGJlIGNvbmZpZ3VyZWQuXG5cdCpcblx0KiBAcGFyYW0gY29uZmlnIC0gQ29uZmlndXJhdGlvbiBmb3IgcmV0cmlldmluZyB0aGUgc3RhdGVcblx0KiBAcGFyYW0gb3B0aW9ucyAtIEFkZGl0aW9uYWwgb3B0aW9uc1xuXHQqIEByZXR1cm5zIEEgc25hcHNob3Qgb2YgdGhlIGN1cnJlbnQgZ3JhcGggc3RhdGVcblx0KiBAdGhyb3dzIHtHcmFwaFZhbHVlRXJyb3J9IElmIG5vIGNoZWNrcG9pbnRlciBpcyBjb25maWd1cmVkXG5cdCovXG5cdGFzeW5jIGdldFN0YXRlKGNvbmZpZywgb3B0aW9ucykge1xuXHRcdGNvbnN0IGNoZWNrcG9pbnRlciA9IGNvbmZpZy5jb25maWd1cmFibGU/LltDT05GSUdfS0VZX0NIRUNLUE9JTlRFUl0gPz8gdGhpcy5jaGVja3BvaW50ZXI7XG5cdFx0aWYgKCFjaGVja3BvaW50ZXIpIHRocm93IG5ldyBHcmFwaFZhbHVlRXJyb3IoXCJObyBjaGVja3BvaW50ZXIgc2V0XCIsIHsgbGNfZXJyb3JfY29kZTogXCJNSVNTSU5HX0NIRUNLUE9JTlRFUlwiIH0pO1xuXHRcdGNvbnN0IGNoZWNrcG9pbnROYW1lc3BhY2UgPSBjb25maWcuY29uZmlndXJhYmxlPy5jaGVja3BvaW50X25zID8/IFwiXCI7XG5cdFx0aWYgKGNoZWNrcG9pbnROYW1lc3BhY2UgIT09IFwiXCIgJiYgY29uZmlnLmNvbmZpZ3VyYWJsZT8uW0NPTkZJR19LRVlfQ0hFQ0tQT0lOVEVSXSA9PT0gdm9pZCAwKSB7XG5cdFx0XHRjb25zdCByZWNhc3ROYW1lc3BhY2UgPSByZWNhc3RDaGVja3BvaW50TmFtZXNwYWNlKGNoZWNrcG9pbnROYW1lc3BhY2UpO1xuXHRcdFx0Zm9yIGF3YWl0IChjb25zdCBbbmFtZSwgc3ViZ3JhcGhdIG9mIHRoaXMuZ2V0U3ViZ3JhcGhzQXN5bmMocmVjYXN0TmFtZXNwYWNlLCB0cnVlKSkgaWYgKG5hbWUgPT09IHJlY2FzdE5hbWVzcGFjZSkgcmV0dXJuIGF3YWl0IHN1YmdyYXBoLmdldFN0YXRlKHBhdGNoQ29uZmlndXJhYmxlKGNvbmZpZywgeyBbQ09ORklHX0tFWV9DSEVDS1BPSU5URVJdOiBjaGVja3BvaW50ZXIgfSksIHsgc3ViZ3JhcGhzOiBvcHRpb25zPy5zdWJncmFwaHMgfSk7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYFN1YmdyYXBoIHdpdGggbmFtZXNwYWNlIFwiJHtyZWNhc3ROYW1lc3BhY2V9XCIgbm90IGZvdW5kLmApO1xuXHRcdH1cblx0XHRjb25zdCBtZXJnZWRDb25maWcgPSBtZXJnZUNvbmZpZ3ModGhpcy5jb25maWcsIGNvbmZpZyk7XG5cdFx0Y29uc3Qgc2F2ZWQgPSBhd2FpdCBjaGVja3BvaW50ZXIuZ2V0VHVwbGUoY29uZmlnKTtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5fcHJlcGFyZVN0YXRlU25hcHNob3Qoe1xuXHRcdFx0Y29uZmlnOiBtZXJnZWRDb25maWcsXG5cdFx0XHRzYXZlZCxcblx0XHRcdHN1YmdyYXBoQ2hlY2twb2ludGVyOiBvcHRpb25zPy5zdWJncmFwaHMgPyBjaGVja3BvaW50ZXIgOiB2b2lkIDAsXG5cdFx0XHRhcHBseVBlbmRpbmdXcml0ZXM6ICFjb25maWcuY29uZmlndXJhYmxlPy5jaGVja3BvaW50X2lkXG5cdFx0fSk7XG5cdH1cblx0LyoqXG5cdCogR2V0cyB0aGUgaGlzdG9yeSBvZiBncmFwaCBzdGF0ZXMuXG5cdCogUmVxdWlyZXMgYSBjaGVja3BvaW50ZXIgdG8gYmUgY29uZmlndXJlZC5cblx0KiBVc2VmdWwgZm9yOlxuXHQqIC0gRGVidWdnaW5nIGV4ZWN1dGlvbiBoaXN0b3J5XG5cdCogLSBJbXBsZW1lbnRpbmcgdGltZSB0cmF2ZWxcblx0KiAtIEFuYWx5emluZyBncmFwaCBiZWhhdmlvclxuXHQqXG5cdCogQHBhcmFtIGNvbmZpZyAtIENvbmZpZ3VyYXRpb24gZm9yIHJldHJpZXZpbmcgdGhlIGhpc3Rvcnlcblx0KiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIGZpbHRlcmluZyB0aGUgaGlzdG9yeVxuXHQqIEByZXR1cm5zIEFuIGFzeW5jIGl0ZXJhdG9yIG9mIHN0YXRlIHNuYXBzaG90c1xuXHQqIEB0aHJvd3Mge0Vycm9yfSBJZiBubyBjaGVja3BvaW50ZXIgaXMgY29uZmlndXJlZFxuXHQqL1xuXHRhc3luYyAqZ2V0U3RhdGVIaXN0b3J5KGNvbmZpZywgb3B0aW9ucykge1xuXHRcdGNvbnN0IGNoZWNrcG9pbnRlciA9IGNvbmZpZy5jb25maWd1cmFibGU/LltDT05GSUdfS0VZX0NIRUNLUE9JTlRFUl0gPz8gdGhpcy5jaGVja3BvaW50ZXI7XG5cdFx0aWYgKCFjaGVja3BvaW50ZXIpIHRocm93IG5ldyBHcmFwaFZhbHVlRXJyb3IoXCJObyBjaGVja3BvaW50ZXIgc2V0XCIsIHsgbGNfZXJyb3JfY29kZTogXCJNSVNTSU5HX0NIRUNLUE9JTlRFUlwiIH0pO1xuXHRcdGNvbnN0IGNoZWNrcG9pbnROYW1lc3BhY2UgPSBjb25maWcuY29uZmlndXJhYmxlPy5jaGVja3BvaW50X25zID8/IFwiXCI7XG5cdFx0aWYgKGNoZWNrcG9pbnROYW1lc3BhY2UgIT09IFwiXCIgJiYgY29uZmlnLmNvbmZpZ3VyYWJsZT8uW0NPTkZJR19LRVlfQ0hFQ0tQT0lOVEVSXSA9PT0gdm9pZCAwKSB7XG5cdFx0XHRjb25zdCByZWNhc3ROYW1lc3BhY2UgPSByZWNhc3RDaGVja3BvaW50TmFtZXNwYWNlKGNoZWNrcG9pbnROYW1lc3BhY2UpO1xuXHRcdFx0Zm9yIGF3YWl0IChjb25zdCBbbmFtZSwgcHJlZ2VsXSBvZiB0aGlzLmdldFN1YmdyYXBoc0FzeW5jKHJlY2FzdE5hbWVzcGFjZSwgdHJ1ZSkpIGlmIChuYW1lID09PSByZWNhc3ROYW1lc3BhY2UpIHtcblx0XHRcdFx0eWllbGQqIHByZWdlbC5nZXRTdGF0ZUhpc3RvcnkocGF0Y2hDb25maWd1cmFibGUoY29uZmlnLCB7IFtDT05GSUdfS0VZX0NIRUNLUE9JTlRFUl06IGNoZWNrcG9pbnRlciB9KSwgb3B0aW9ucyk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRocm93IG5ldyBFcnJvcihgU3ViZ3JhcGggd2l0aCBuYW1lc3BhY2UgXCIke3JlY2FzdE5hbWVzcGFjZX1cIiBub3QgZm91bmQuYCk7XG5cdFx0fVxuXHRcdGNvbnN0IG1lcmdlZENvbmZpZyA9IG1lcmdlQ29uZmlncyh0aGlzLmNvbmZpZywgY29uZmlnLCB7IGNvbmZpZ3VyYWJsZTogeyBjaGVja3BvaW50X25zOiBjaGVja3BvaW50TmFtZXNwYWNlIH0gfSk7XG5cdFx0Zm9yIGF3YWl0IChjb25zdCBjaGVja3BvaW50VHVwbGUgb2YgY2hlY2twb2ludGVyLmxpc3QobWVyZ2VkQ29uZmlnLCBvcHRpb25zKSkgeWllbGQgdGhpcy5fcHJlcGFyZVN0YXRlU25hcHNob3Qoe1xuXHRcdFx0Y29uZmlnOiBjaGVja3BvaW50VHVwbGUuY29uZmlnLFxuXHRcdFx0c2F2ZWQ6IGNoZWNrcG9pbnRUdXBsZVxuXHRcdH0pO1xuXHR9XG5cdC8qKlxuXHQqIEFwcGx5IHVwZGF0ZXMgdG8gdGhlIGdyYXBoIHN0YXRlIGluIGJ1bGsuXG5cdCogUmVxdWlyZXMgYSBjaGVja3BvaW50ZXIgdG8gYmUgY29uZmlndXJlZC5cblx0KlxuXHQqIFRoaXMgbWV0aG9kIGlzIHVzZWZ1bCBmb3IgcmVjcmVhdGluZyBhIHRocmVhZFxuXHQqIGZyb20gYSBsaXN0IG9mIHVwZGF0ZXMsIGVzcGVjaWFsbHkgaWYgYSBjaGVja3BvaW50XG5cdCogaXMgY3JlYXRlZCBhcyBhIHJlc3VsdCBvZiBtdWx0aXBsZSB0YXNrcy5cblx0KlxuXHQqIEBpbnRlcm5hbCBUaGUgQVBJIG1pZ2h0IGNoYW5nZSBpbiB0aGUgZnV0dXJlLlxuXHQqXG5cdCogQHBhcmFtIHN0YXJ0Q29uZmlnIC0gQ29uZmlndXJhdGlvbiBmb3IgdGhlIHVwZGF0ZVxuXHQqIEBwYXJhbSB1cGRhdGVzIC0gVGhlIGxpc3Qgb2YgdXBkYXRlcyB0byBhcHBseSB0byBncmFwaCBzdGF0ZVxuXHQqIEByZXR1cm5zIFVwZGF0ZWQgY29uZmlndXJhdGlvblxuXHQqIEB0aHJvd3Mge0dyYXBoVmFsdWVFcnJvcn0gSWYgbm8gY2hlY2twb2ludGVyIGlzIGNvbmZpZ3VyZWRcblx0KiBAdGhyb3dzIHtJbnZhbGlkVXBkYXRlRXJyb3J9IElmIHRoZSB1cGRhdGUgY2Fubm90IGJlIGF0dHJpYnV0ZWQgdG8gYSBub2RlIG9yIGFuIHVwZGF0ZSBjYW4gYmUgb25seSBhcHBsaWVkIGluIHNlcXVlbmNlLlxuXHQqL1xuXHRhc3luYyBidWxrVXBkYXRlU3RhdGUoc3RhcnRDb25maWcsIHN1cGVyc3RlcHMpIHtcblx0XHRjb25zdCBjaGVja3BvaW50ZXIgPSBzdGFydENvbmZpZy5jb25maWd1cmFibGU/LltDT05GSUdfS0VZX0NIRUNLUE9JTlRFUl0gPz8gdGhpcy5jaGVja3BvaW50ZXI7XG5cdFx0aWYgKCFjaGVja3BvaW50ZXIpIHRocm93IG5ldyBHcmFwaFZhbHVlRXJyb3IoXCJObyBjaGVja3BvaW50ZXIgc2V0XCIsIHsgbGNfZXJyb3JfY29kZTogXCJNSVNTSU5HX0NIRUNLUE9JTlRFUlwiIH0pO1xuXHRcdGlmIChzdXBlcnN0ZXBzLmxlbmd0aCA9PT0gMCkgdGhyb3cgbmV3IEVycm9yKFwiTm8gc3VwZXJzdGVwcyBwcm92aWRlZFwiKTtcblx0XHRpZiAoc3VwZXJzdGVwcy5zb21lKChzKSA9PiBzLnVwZGF0ZXMubGVuZ3RoID09PSAwKSkgdGhyb3cgbmV3IEVycm9yKFwiTm8gdXBkYXRlcyBwcm92aWRlZFwiKTtcblx0XHRjb25zdCBjaGVja3BvaW50TmFtZXNwYWNlID0gc3RhcnRDb25maWcuY29uZmlndXJhYmxlPy5jaGVja3BvaW50X25zID8/IFwiXCI7XG5cdFx0aWYgKGNoZWNrcG9pbnROYW1lc3BhY2UgIT09IFwiXCIgJiYgc3RhcnRDb25maWcuY29uZmlndXJhYmxlPy5bQ09ORklHX0tFWV9DSEVDS1BPSU5URVJdID09PSB2b2lkIDApIHtcblx0XHRcdGNvbnN0IHJlY2FzdE5hbWVzcGFjZSA9IHJlY2FzdENoZWNrcG9pbnROYW1lc3BhY2UoY2hlY2twb2ludE5hbWVzcGFjZSk7XG5cdFx0XHRmb3IgYXdhaXQgKGNvbnN0IFssIHByZWdlbF0gb2YgdGhpcy5nZXRTdWJncmFwaHNBc3luYyhyZWNhc3ROYW1lc3BhY2UsIHRydWUpKSByZXR1cm4gYXdhaXQgcHJlZ2VsLmJ1bGtVcGRhdGVTdGF0ZShwYXRjaENvbmZpZ3VyYWJsZShzdGFydENvbmZpZywgeyBbQ09ORklHX0tFWV9DSEVDS1BPSU5URVJdOiBjaGVja3BvaW50ZXIgfSksIHN1cGVyc3RlcHMpO1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBTdWJncmFwaCBcIiR7cmVjYXN0TmFtZXNwYWNlfVwiIG5vdCBmb3VuZGApO1xuXHRcdH1cblx0XHRjb25zdCB1cGRhdGVTdXBlclN0ZXAgPSBhc3luYyAoaW5wdXRDb25maWcsIHVwZGF0ZXMpID0+IHtcblx0XHRcdGNvbnN0IGNvbmZpZyA9IHRoaXMuY29uZmlnID8gbWVyZ2VDb25maWdzKHRoaXMuY29uZmlnLCBpbnB1dENvbmZpZykgOiBpbnB1dENvbmZpZztcblx0XHRcdGNvbnN0IHNhdmVkID0gYXdhaXQgY2hlY2twb2ludGVyLmdldFR1cGxlKGNvbmZpZyk7XG5cdFx0XHRjb25zdCBjaGVja3BvaW50ID0gc2F2ZWQgIT09IHZvaWQgMCA/IGNvcHlDaGVja3BvaW50KHNhdmVkLmNoZWNrcG9pbnQpIDogZW1wdHlDaGVja3BvaW50KCk7XG5cdFx0XHRjb25zdCBjaGVja3BvaW50UHJldmlvdXNWZXJzaW9ucyA9IHsgLi4uc2F2ZWQ/LmNoZWNrcG9pbnQuY2hhbm5lbF92ZXJzaW9ucyB9O1xuXHRcdFx0Y29uc3Qgc3RlcCA9IHNhdmVkPy5tZXRhZGF0YT8uc3RlcCA/PyAtMTtcblx0XHRcdGxldCBjaGVja3BvaW50Q29uZmlnID0gcGF0Y2hDb25maWd1cmFibGUoY29uZmlnLCB7IGNoZWNrcG9pbnRfbnM6IGNvbmZpZy5jb25maWd1cmFibGU/LmNoZWNrcG9pbnRfbnMgPz8gXCJcIiB9KTtcblx0XHRcdGxldCBjaGVja3BvaW50TWV0YWRhdGEgPSBjb25maWcubWV0YWRhdGEgPz8ge307XG5cdFx0XHRpZiAoc2F2ZWQ/LmNvbmZpZy5jb25maWd1cmFibGUpIHtcblx0XHRcdFx0Y2hlY2twb2ludENvbmZpZyA9IHBhdGNoQ29uZmlndXJhYmxlKGNvbmZpZywgc2F2ZWQuY29uZmlnLmNvbmZpZ3VyYWJsZSk7XG5cdFx0XHRcdGNoZWNrcG9pbnRNZXRhZGF0YSA9IHtcblx0XHRcdFx0XHQuLi5zYXZlZC5tZXRhZGF0YSxcblx0XHRcdFx0XHQuLi5jaGVja3BvaW50TWV0YWRhdGFcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IHsgdmFsdWVzLCBhc05vZGUgfSA9IHVwZGF0ZXNbMF07XG5cdFx0XHRpZiAodmFsdWVzID09IG51bGwgJiYgYXNOb2RlID09PSB2b2lkIDApIHtcblx0XHRcdFx0aWYgKHVwZGF0ZXMubGVuZ3RoID4gMSkgdGhyb3cgbmV3IEludmFsaWRVcGRhdGVFcnJvcihgQ2Fubm90IGNyZWF0ZSBlbXB0eSBjaGVja3BvaW50IHdpdGggbXVsdGlwbGUgdXBkYXRlc2ApO1xuXHRcdFx0XHRyZXR1cm4gcGF0Y2hDaGVja3BvaW50TWFwKGF3YWl0IGNoZWNrcG9pbnRlci5wdXQoY2hlY2twb2ludENvbmZpZywgY3JlYXRlQ2hlY2twb2ludChjaGVja3BvaW50LCB2b2lkIDAsIHN0ZXApLCB7XG5cdFx0XHRcdFx0c291cmNlOiBcInVwZGF0ZVwiLFxuXHRcdFx0XHRcdHN0ZXA6IHN0ZXAgKyAxLFxuXHRcdFx0XHRcdHBhcmVudHM6IHNhdmVkPy5tZXRhZGF0YT8ucGFyZW50cyA/PyB7fVxuXHRcdFx0XHR9LCB7fSksIHNhdmVkID8gc2F2ZWQubWV0YWRhdGEgOiB2b2lkIDApO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgY2hhbm5lbHMgPSBlbXB0eUNoYW5uZWxzKHRoaXMuY2hhbm5lbHMsIGNoZWNrcG9pbnQpO1xuXHRcdFx0aWYgKHZhbHVlcyA9PT0gbnVsbCAmJiBhc05vZGUgPT09IEVORCkge1xuXHRcdFx0XHRpZiAodXBkYXRlcy5sZW5ndGggPiAxKSB0aHJvdyBuZXcgSW52YWxpZFVwZGF0ZUVycm9yKGBDYW5ub3QgYXBwbHkgbXVsdGlwbGUgdXBkYXRlcyB3aGVuIGNsZWFyaW5nIHN0YXRlYCk7XG5cdFx0XHRcdGlmIChzYXZlZCkge1xuXHRcdFx0XHRcdGNvbnN0IG5leHRUYXNrcyA9IF9wcmVwYXJlTmV4dFRhc2tzKGNoZWNrcG9pbnQsIHNhdmVkLnBlbmRpbmdXcml0ZXMgfHwgW10sIHRoaXMubm9kZXMsIGNoYW5uZWxzLCBzYXZlZC5jb25maWcsIHRydWUsIHtcblx0XHRcdFx0XHRcdHN0ZXA6IChzYXZlZC5tZXRhZGF0YT8uc3RlcCA/PyAtMSkgKyAxLFxuXHRcdFx0XHRcdFx0Y2hlY2twb2ludGVyLFxuXHRcdFx0XHRcdFx0c3RvcmU6IHRoaXMuc3RvcmVcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRjb25zdCBudWxsV3JpdGVzID0gKHNhdmVkLnBlbmRpbmdXcml0ZXMgfHwgW10pLmZpbHRlcigodykgPT4gd1swXSA9PT0gTlVMTF9UQVNLX0lEKS5tYXAoKHcpID0+IHcuc2xpY2UoMSkpO1xuXHRcdFx0XHRcdGlmIChudWxsV3JpdGVzLmxlbmd0aCA+IDApIF9hcHBseVdyaXRlcyhjaGVja3BvaW50LCBjaGFubmVscywgW3tcblx0XHRcdFx0XHRcdG5hbWU6IElOUFVULFxuXHRcdFx0XHRcdFx0d3JpdGVzOiBudWxsV3JpdGVzLFxuXHRcdFx0XHRcdFx0dHJpZ2dlcnM6IFtdXG5cdFx0XHRcdFx0fV0sIGNoZWNrcG9pbnRlci5nZXROZXh0VmVyc2lvbi5iaW5kKGNoZWNrcG9pbnRlciksIHRoaXMudHJpZ2dlclRvTm9kZXMpO1xuXHRcdFx0XHRcdGZvciAoY29uc3QgW3Rhc2tJZCwgaywgdl0gb2Ygc2F2ZWQucGVuZGluZ1dyaXRlcyB8fCBbXSkge1xuXHRcdFx0XHRcdFx0aWYgKFtcblx0XHRcdFx0XHRcdFx0RVJST1IsXG5cdFx0XHRcdFx0XHRcdElOVEVSUlVQVCxcblx0XHRcdFx0XHRcdFx0U0NIRURVTEVEXG5cdFx0XHRcdFx0XHRdLmluY2x1ZGVzKGspKSBjb250aW51ZTtcblx0XHRcdFx0XHRcdGlmICghKHRhc2tJZCBpbiBuZXh0VGFza3MpKSBjb250aW51ZTtcblx0XHRcdFx0XHRcdG5leHRUYXNrc1t0YXNrSWRdLndyaXRlcy5wdXNoKFtrLCB2XSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdF9hcHBseVdyaXRlcyhjaGVja3BvaW50LCBjaGFubmVscywgT2JqZWN0LnZhbHVlcyhuZXh0VGFza3MpLCBjaGVja3BvaW50ZXIuZ2V0TmV4dFZlcnNpb24uYmluZChjaGVja3BvaW50ZXIpLCB0aGlzLnRyaWdnZXJUb05vZGVzKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gcGF0Y2hDaGVja3BvaW50TWFwKGF3YWl0IGNoZWNrcG9pbnRlci5wdXQoY2hlY2twb2ludENvbmZpZywgY3JlYXRlQ2hlY2twb2ludChjaGVja3BvaW50LCBjaGFubmVscywgc3RlcCksIHtcblx0XHRcdFx0XHQuLi5jaGVja3BvaW50TWV0YWRhdGEsXG5cdFx0XHRcdFx0c291cmNlOiBcInVwZGF0ZVwiLFxuXHRcdFx0XHRcdHN0ZXA6IHN0ZXAgKyAxLFxuXHRcdFx0XHRcdHBhcmVudHM6IHNhdmVkPy5tZXRhZGF0YT8ucGFyZW50cyA/PyB7fVxuXHRcdFx0XHR9LCBnZXROZXdDaGFubmVsVmVyc2lvbnMoY2hlY2twb2ludFByZXZpb3VzVmVyc2lvbnMsIGNoZWNrcG9pbnQuY2hhbm5lbF92ZXJzaW9ucykpLCBzYXZlZCA/IHNhdmVkLm1ldGFkYXRhIDogdm9pZCAwKTtcblx0XHRcdH1cblx0XHRcdGlmIChhc05vZGUgPT09IENPUFkpIHtcblx0XHRcdFx0aWYgKHVwZGF0ZXMubGVuZ3RoID4gMSkgdGhyb3cgbmV3IEludmFsaWRVcGRhdGVFcnJvcihgQ2Fubm90IGNvcHkgY2hlY2twb2ludCB3aXRoIG11bHRpcGxlIHVwZGF0ZXNgKTtcblx0XHRcdFx0aWYgKHNhdmVkID09IG51bGwpIHRocm93IG5ldyBJbnZhbGlkVXBkYXRlRXJyb3IoYENhbm5vdCBjb3B5IGEgbm9uLWV4aXN0ZW50IGNoZWNrcG9pbnRgKTtcblx0XHRcdFx0Y29uc3QgaXNDb3B5V2l0aFVwZGF0ZXMgPSAodmFsdWVzJDEpID0+IHtcblx0XHRcdFx0XHRpZiAoIUFycmF5LmlzQXJyYXkodmFsdWVzJDEpKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0aWYgKHZhbHVlcyQxLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdHJldHVybiB2YWx1ZXMkMS5ldmVyeSgodikgPT4gQXJyYXkuaXNBcnJheSh2KSAmJiB2Lmxlbmd0aCA9PT0gMik7XG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnN0IG5leHRDaGVja3BvaW50ID0gY3JlYXRlQ2hlY2twb2ludChjaGVja3BvaW50LCB2b2lkIDAsIHN0ZXApO1xuXHRcdFx0XHRjb25zdCBuZXh0Q29uZmlnJDEgPSBhd2FpdCBjaGVja3BvaW50ZXIucHV0KHNhdmVkLnBhcmVudENvbmZpZyA/PyBwYXRjaENvbmZpZ3VyYWJsZShzYXZlZC5jb25maWcsIHsgY2hlY2twb2ludF9pZDogdm9pZCAwIH0pLCBuZXh0Q2hlY2twb2ludCwge1xuXHRcdFx0XHRcdHNvdXJjZTogXCJmb3JrXCIsXG5cdFx0XHRcdFx0c3RlcDogc3RlcCArIDEsXG5cdFx0XHRcdFx0cGFyZW50czogc2F2ZWQubWV0YWRhdGE/LnBhcmVudHMgPz8ge31cblx0XHRcdFx0fSwge30pO1xuXHRcdFx0XHRpZiAoaXNDb3B5V2l0aFVwZGF0ZXModmFsdWVzKSkge1xuXHRcdFx0XHRcdGNvbnN0IG5leHRUYXNrcyA9IF9wcmVwYXJlTmV4dFRhc2tzKG5leHRDaGVja3BvaW50LCBzYXZlZC5wZW5kaW5nV3JpdGVzLCB0aGlzLm5vZGVzLCBjaGFubmVscywgbmV4dENvbmZpZyQxLCBmYWxzZSwgeyBzdGVwOiBzdGVwICsgMiB9KTtcblx0XHRcdFx0XHRjb25zdCB0YXNrc0dyb3VwQnkgPSBPYmplY3QudmFsdWVzKG5leHRUYXNrcykucmVkdWNlKChhY2MsIHsgbmFtZSwgaWQgfSkgPT4ge1xuXHRcdFx0XHRcdFx0YWNjW25hbWVdID8/PSBbXTtcblx0XHRcdFx0XHRcdGFjY1tuYW1lXS5wdXNoKHsgaWQgfSk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gYWNjO1xuXHRcdFx0XHRcdH0sIHt9KTtcblx0XHRcdFx0XHRjb25zdCB1c2VyR3JvdXBCeSA9IHZhbHVlcy5yZWR1Y2UoKGFjYywgaXRlbSkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgW3ZhbHVlcyQxLCBhc05vZGUkMV0gPSBpdGVtO1xuXHRcdFx0XHRcdFx0YWNjW2FzTm9kZSQxXSA/Pz0gW107XG5cdFx0XHRcdFx0XHRjb25zdCB0YXJnZXRJZHggPSBhY2NbYXNOb2RlJDFdLmxlbmd0aDtcblx0XHRcdFx0XHRcdGNvbnN0IHRhc2tJZCA9IHRhc2tzR3JvdXBCeVthc05vZGUkMV0/Llt0YXJnZXRJZHhdPy5pZDtcblx0XHRcdFx0XHRcdGFjY1thc05vZGUkMV0ucHVzaCh7XG5cdFx0XHRcdFx0XHRcdHZhbHVlczogdmFsdWVzJDEsXG5cdFx0XHRcdFx0XHRcdGFzTm9kZTogYXNOb2RlJDEsXG5cdFx0XHRcdFx0XHRcdHRhc2tJZFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gYWNjO1xuXHRcdFx0XHRcdH0sIHt9KTtcblx0XHRcdFx0XHRyZXR1cm4gdXBkYXRlU3VwZXJTdGVwKHBhdGNoQ2hlY2twb2ludE1hcChuZXh0Q29uZmlnJDEsIHNhdmVkLm1ldGFkYXRhKSwgT2JqZWN0LnZhbHVlcyh1c2VyR3JvdXBCeSkuZmxhdCgpKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gcGF0Y2hDaGVja3BvaW50TWFwKG5leHRDb25maWckMSwgc2F2ZWQubWV0YWRhdGEpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGFzTm9kZSA9PT0gSU5QVVQpIHtcblx0XHRcdFx0aWYgKHVwZGF0ZXMubGVuZ3RoID4gMSkgdGhyb3cgbmV3IEludmFsaWRVcGRhdGVFcnJvcihgQ2Fubm90IGFwcGx5IG11bHRpcGxlIHVwZGF0ZXMgd2hlbiB1cGRhdGluZyBhcyBpbnB1dGApO1xuXHRcdFx0XHRjb25zdCBpbnB1dFdyaXRlcyA9IGF3YWl0IGdhdGhlckl0ZXJhdG9yKG1hcElucHV0KHRoaXMuaW5wdXRDaGFubmVscywgdmFsdWVzKSk7XG5cdFx0XHRcdGlmIChpbnB1dFdyaXRlcy5sZW5ndGggPT09IDApIHRocm93IG5ldyBJbnZhbGlkVXBkYXRlRXJyb3IoYFJlY2VpdmVkIG5vIGlucHV0IHdyaXRlcyBmb3IgJHtKU09OLnN0cmluZ2lmeSh0aGlzLmlucHV0Q2hhbm5lbHMsIG51bGwsIDIpfWApO1xuXHRcdFx0XHRfYXBwbHlXcml0ZXMoY2hlY2twb2ludCwgY2hhbm5lbHMsIFt7XG5cdFx0XHRcdFx0bmFtZTogSU5QVVQsXG5cdFx0XHRcdFx0d3JpdGVzOiBpbnB1dFdyaXRlcyxcblx0XHRcdFx0XHR0cmlnZ2VyczogW11cblx0XHRcdFx0fV0sIGNoZWNrcG9pbnRlci5nZXROZXh0VmVyc2lvbi5iaW5kKHRoaXMuY2hlY2twb2ludGVyKSwgdGhpcy50cmlnZ2VyVG9Ob2Rlcyk7XG5cdFx0XHRcdGNvbnN0IG5leHRTdGVwID0gc2F2ZWQ/Lm1ldGFkYXRhPy5zdGVwICE9IG51bGwgPyBzYXZlZC5tZXRhZGF0YS5zdGVwICsgMSA6IC0xO1xuXHRcdFx0XHRjb25zdCBuZXh0Q29uZmlnJDEgPSBhd2FpdCBjaGVja3BvaW50ZXIucHV0KGNoZWNrcG9pbnRDb25maWcsIGNyZWF0ZUNoZWNrcG9pbnQoY2hlY2twb2ludCwgY2hhbm5lbHMsIG5leHRTdGVwKSwge1xuXHRcdFx0XHRcdHNvdXJjZTogXCJpbnB1dFwiLFxuXHRcdFx0XHRcdHN0ZXA6IG5leHRTdGVwLFxuXHRcdFx0XHRcdHBhcmVudHM6IHNhdmVkPy5tZXRhZGF0YT8ucGFyZW50cyA/PyB7fVxuXHRcdFx0XHR9LCBnZXROZXdDaGFubmVsVmVyc2lvbnMoY2hlY2twb2ludFByZXZpb3VzVmVyc2lvbnMsIGNoZWNrcG9pbnQuY2hhbm5lbF92ZXJzaW9ucykpO1xuXHRcdFx0XHRhd2FpdCBjaGVja3BvaW50ZXIucHV0V3JpdGVzKG5leHRDb25maWckMSwgaW5wdXRXcml0ZXMsIHV1aWQ1KElOUFVULCBjaGVja3BvaW50LmlkKSk7XG5cdFx0XHRcdHJldHVybiBwYXRjaENoZWNrcG9pbnRNYXAobmV4dENvbmZpZyQxLCBzYXZlZCA/IHNhdmVkLm1ldGFkYXRhIDogdm9pZCAwKTtcblx0XHRcdH1cblx0XHRcdGlmIChjb25maWcuY29uZmlndXJhYmxlPy5jaGVja3BvaW50X2lkID09PSB2b2lkIDAgJiYgc2F2ZWQ/LnBlbmRpbmdXcml0ZXMgIT09IHZvaWQgMCAmJiBzYXZlZC5wZW5kaW5nV3JpdGVzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0Y29uc3QgbmV4dFRhc2tzID0gX3ByZXBhcmVOZXh0VGFza3MoY2hlY2twb2ludCwgc2F2ZWQucGVuZGluZ1dyaXRlcywgdGhpcy5ub2RlcywgY2hhbm5lbHMsIHNhdmVkLmNvbmZpZywgdHJ1ZSwge1xuXHRcdFx0XHRcdHN0b3JlOiB0aGlzLnN0b3JlLFxuXHRcdFx0XHRcdGNoZWNrcG9pbnRlcjogdGhpcy5jaGVja3BvaW50ZXIsXG5cdFx0XHRcdFx0c3RlcDogKHNhdmVkLm1ldGFkYXRhPy5zdGVwID8/IC0xKSArIDFcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGNvbnN0IG51bGxXcml0ZXMgPSAoc2F2ZWQucGVuZGluZ1dyaXRlcyA/PyBbXSkuZmlsdGVyKCh3KSA9PiB3WzBdID09PSBOVUxMX1RBU0tfSUQpLm1hcCgodykgPT4gdy5zbGljZSgxKSk7XG5cdFx0XHRcdGlmIChudWxsV3JpdGVzLmxlbmd0aCA+IDApIF9hcHBseVdyaXRlcyhzYXZlZC5jaGVja3BvaW50LCBjaGFubmVscywgW3tcblx0XHRcdFx0XHRuYW1lOiBJTlBVVCxcblx0XHRcdFx0XHR3cml0ZXM6IG51bGxXcml0ZXMsXG5cdFx0XHRcdFx0dHJpZ2dlcnM6IFtdXG5cdFx0XHRcdH1dLCB2b2lkIDAsIHRoaXMudHJpZ2dlclRvTm9kZXMpO1xuXHRcdFx0XHRmb3IgKGNvbnN0IFt0aWQsIGssIHZdIG9mIHNhdmVkLnBlbmRpbmdXcml0ZXMpIHtcblx0XHRcdFx0XHRpZiAoW1xuXHRcdFx0XHRcdFx0RVJST1IsXG5cdFx0XHRcdFx0XHRJTlRFUlJVUFQsXG5cdFx0XHRcdFx0XHRTQ0hFRFVMRURcblx0XHRcdFx0XHRdLmluY2x1ZGVzKGspIHx8IG5leHRUYXNrc1t0aWRdID09PSB2b2lkIDApIGNvbnRpbnVlO1xuXHRcdFx0XHRcdG5leHRUYXNrc1t0aWRdLndyaXRlcy5wdXNoKFtrLCB2XSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgdGFza3MkMSA9IE9iamVjdC52YWx1ZXMobmV4dFRhc2tzKS5maWx0ZXIoKHRhc2spID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gdGFzay53cml0ZXMubGVuZ3RoID4gMDtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmICh0YXNrcyQxLmxlbmd0aCA+IDApIF9hcHBseVdyaXRlcyhjaGVja3BvaW50LCBjaGFubmVscywgdGFza3MkMSwgdm9pZCAwLCB0aGlzLnRyaWdnZXJUb05vZGVzKTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IG5vbk51bGxWZXJzaW9uID0gT2JqZWN0LnZhbHVlcyhjaGVja3BvaW50LnZlcnNpb25zX3NlZW4pLm1hcCgoc2VlblZlcnNpb25zKSA9PiB7XG5cdFx0XHRcdHJldHVybiBPYmplY3QudmFsdWVzKHNlZW5WZXJzaW9ucyk7XG5cdFx0XHR9KS5mbGF0KCkuZmluZCgodikgPT4gISF2KTtcblx0XHRcdGNvbnN0IHZhbGlkVXBkYXRlcyA9IFtdO1xuXHRcdFx0aWYgKHVwZGF0ZXMubGVuZ3RoID09PSAxKSB7XG5cdFx0XHRcdGxldCB7IHZhbHVlczogdmFsdWVzJDEsIGFzTm9kZTogYXNOb2RlJDEsIHRhc2tJZCB9ID0gdXBkYXRlc1swXTtcblx0XHRcdFx0aWYgKGFzTm9kZSQxID09PSB2b2lkIDAgJiYgT2JqZWN0LmtleXModGhpcy5ub2RlcykubGVuZ3RoID09PSAxKSBbYXNOb2RlJDFdID0gT2JqZWN0LmtleXModGhpcy5ub2Rlcyk7XG5cdFx0XHRcdGVsc2UgaWYgKGFzTm9kZSQxID09PSB2b2lkIDAgJiYgbm9uTnVsbFZlcnNpb24gPT09IHZvaWQgMCkge1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgdGhpcy5pbnB1dENoYW5uZWxzID09PSBcInN0cmluZ1wiICYmIHRoaXMubm9kZXNbdGhpcy5pbnB1dENoYW5uZWxzXSAhPT0gdm9pZCAwKSBhc05vZGUkMSA9IHRoaXMuaW5wdXRDaGFubmVscztcblx0XHRcdFx0fSBlbHNlIGlmIChhc05vZGUkMSA9PT0gdm9pZCAwKSB7XG5cdFx0XHRcdFx0Y29uc3QgbGFzdFNlZW5CeU5vZGUgPSBPYmplY3QuZW50cmllcyhjaGVja3BvaW50LnZlcnNpb25zX3NlZW4pLm1hcCgoW24sIHNlZW5dKSA9PiB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gT2JqZWN0LnZhbHVlcyhzZWVuKS5tYXAoKHYpID0+IHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIFt2LCBuXTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pLmZsYXQoKS5maWx0ZXIoKFtfLCB2XSkgPT4gdiAhPT0gSU5URVJSVVBUKS5zb3J0KChbYU51bWJlcl0sIFtiTnVtYmVyXSkgPT4gY29tcGFyZUNoYW5uZWxWZXJzaW9ucyhhTnVtYmVyLCBiTnVtYmVyKSk7XG5cdFx0XHRcdFx0aWYgKGxhc3RTZWVuQnlOb2RlKSB7XG5cdFx0XHRcdFx0XHRpZiAobGFzdFNlZW5CeU5vZGUubGVuZ3RoID09PSAxKSBhc05vZGUkMSA9IGxhc3RTZWVuQnlOb2RlWzBdWzFdO1xuXHRcdFx0XHRcdFx0ZWxzZSBpZiAobGFzdFNlZW5CeU5vZGVbbGFzdFNlZW5CeU5vZGUubGVuZ3RoIC0gMV1bMF0gIT09IGxhc3RTZWVuQnlOb2RlW2xhc3RTZWVuQnlOb2RlLmxlbmd0aCAtIDJdWzBdKSBhc05vZGUkMSA9IGxhc3RTZWVuQnlOb2RlW2xhc3RTZWVuQnlOb2RlLmxlbmd0aCAtIDFdWzFdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoYXNOb2RlJDEgPT09IHZvaWQgMCkgdGhyb3cgbmV3IEludmFsaWRVcGRhdGVFcnJvcihgQW1iaWd1b3VzIHVwZGF0ZSwgc3BlY2lmeSBcImFzTm9kZVwiYCk7XG5cdFx0XHRcdHZhbGlkVXBkYXRlcy5wdXNoKHtcblx0XHRcdFx0XHR2YWx1ZXM6IHZhbHVlcyQxLFxuXHRcdFx0XHRcdGFzTm9kZTogYXNOb2RlJDEsXG5cdFx0XHRcdFx0dGFza0lkXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIGZvciAoY29uc3QgeyBhc05vZGU6IGFzTm9kZSQxLCB2YWx1ZXM6IHZhbHVlcyQxLCB0YXNrSWQgfSBvZiB1cGRhdGVzKSB7XG5cdFx0XHRcdGlmIChhc05vZGUkMSA9PSBudWxsKSB0aHJvdyBuZXcgSW52YWxpZFVwZGF0ZUVycm9yKGBcImFzTm9kZVwiIGlzIHJlcXVpcmVkIHdoZW4gYXBwbHlpbmcgbXVsdGlwbGUgdXBkYXRlc2ApO1xuXHRcdFx0XHR2YWxpZFVwZGF0ZXMucHVzaCh7XG5cdFx0XHRcdFx0dmFsdWVzOiB2YWx1ZXMkMSxcblx0XHRcdFx0XHRhc05vZGU6IGFzTm9kZSQxLFxuXHRcdFx0XHRcdHRhc2tJZFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IHRhc2tzID0gW107XG5cdFx0XHRmb3IgKGNvbnN0IHsgYXNOb2RlOiBhc05vZGUkMSwgdmFsdWVzOiB2YWx1ZXMkMSwgdGFza0lkIH0gb2YgdmFsaWRVcGRhdGVzKSB7XG5cdFx0XHRcdGlmICh0aGlzLm5vZGVzW2FzTm9kZSQxXSA9PT0gdm9pZCAwKSB0aHJvdyBuZXcgSW52YWxpZFVwZGF0ZUVycm9yKGBOb2RlIFwiJHthc05vZGUkMS50b1N0cmluZygpfVwiIGRvZXMgbm90IGV4aXN0YCk7XG5cdFx0XHRcdGNvbnN0IHdyaXRlcnMgPSB0aGlzLm5vZGVzW2FzTm9kZSQxXS5nZXRXcml0ZXJzKCk7XG5cdFx0XHRcdGlmICghd3JpdGVycy5sZW5ndGgpIHRocm93IG5ldyBJbnZhbGlkVXBkYXRlRXJyb3IoYE5vIHdyaXRlcnMgZm91bmQgZm9yIG5vZGUgXCIke2FzTm9kZSQxLnRvU3RyaW5nKCl9XCJgKTtcblx0XHRcdFx0dGFza3MucHVzaCh7XG5cdFx0XHRcdFx0bmFtZTogYXNOb2RlJDEsXG5cdFx0XHRcdFx0aW5wdXQ6IHZhbHVlcyQxLFxuXHRcdFx0XHRcdHByb2M6IHdyaXRlcnMubGVuZ3RoID4gMSA/IFJ1bm5hYmxlU2VxdWVuY2UuZnJvbSh3cml0ZXJzLCB7IG9taXRTZXF1ZW5jZVRhZ3M6IHRydWUgfSkgOiB3cml0ZXJzWzBdLFxuXHRcdFx0XHRcdHdyaXRlczogW10sXG5cdFx0XHRcdFx0dHJpZ2dlcnM6IFtJTlRFUlJVUFRdLFxuXHRcdFx0XHRcdGlkOiB0YXNrSWQgPz8gdXVpZDUoSU5URVJSVVBULCBjaGVja3BvaW50LmlkKSxcblx0XHRcdFx0XHR3cml0ZXJzOiBbXVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdGZvciAoY29uc3QgdGFzayBvZiB0YXNrcykgYXdhaXQgdGFzay5wcm9jLmludm9rZSh0YXNrLmlucHV0LCBwYXRjaENvbmZpZyh7XG5cdFx0XHRcdC4uLmNvbmZpZyxcblx0XHRcdFx0c3RvcmU6IGNvbmZpZz8uc3RvcmUgPz8gdGhpcy5zdG9yZVxuXHRcdFx0fSwge1xuXHRcdFx0XHRydW5OYW1lOiBjb25maWcucnVuTmFtZSA/PyBgJHt0aGlzLmdldE5hbWUoKX1VcGRhdGVTdGF0ZWAsXG5cdFx0XHRcdGNvbmZpZ3VyYWJsZToge1xuXHRcdFx0XHRcdFtDT05GSUdfS0VZX1NFTkRdOiAoaXRlbXMpID0+IHRhc2sud3JpdGVzLnB1c2goLi4uaXRlbXMpLFxuXHRcdFx0XHRcdFtDT05GSUdfS0VZX1JFQURdOiAoc2VsZWN0XywgZnJlc2hfID0gZmFsc2UpID0+IF9sb2NhbFJlYWQoY2hlY2twb2ludCwgY2hhbm5lbHMsIHRhc2ssIHNlbGVjdF8sIGZyZXNoXylcblx0XHRcdFx0fVxuXHRcdFx0fSkpO1xuXHRcdFx0Zm9yIChjb25zdCB0YXNrIG9mIHRhc2tzKSB7XG5cdFx0XHRcdGNvbnN0IGNoYW5uZWxXcml0ZXMgPSB0YXNrLndyaXRlcy5maWx0ZXIoKHcpID0+IHdbMF0gIT09IFBVU0gpO1xuXHRcdFx0XHRpZiAoc2F2ZWQgIT09IHZvaWQgMCAmJiBjaGFubmVsV3JpdGVzLmxlbmd0aCA+IDApIGF3YWl0IGNoZWNrcG9pbnRlci5wdXRXcml0ZXMoY2hlY2twb2ludENvbmZpZywgY2hhbm5lbFdyaXRlcywgdGFzay5pZCk7XG5cdFx0XHR9XG5cdFx0XHRfYXBwbHlXcml0ZXMoY2hlY2twb2ludCwgY2hhbm5lbHMsIHRhc2tzLCBjaGVja3BvaW50ZXIuZ2V0TmV4dFZlcnNpb24uYmluZCh0aGlzLmNoZWNrcG9pbnRlciksIHRoaXMudHJpZ2dlclRvTm9kZXMpO1xuXHRcdFx0Y29uc3QgbmV3VmVyc2lvbnMgPSBnZXROZXdDaGFubmVsVmVyc2lvbnMoY2hlY2twb2ludFByZXZpb3VzVmVyc2lvbnMsIGNoZWNrcG9pbnQuY2hhbm5lbF92ZXJzaW9ucyk7XG5cdFx0XHRjb25zdCBuZXh0Q29uZmlnID0gYXdhaXQgY2hlY2twb2ludGVyLnB1dChjaGVja3BvaW50Q29uZmlnLCBjcmVhdGVDaGVja3BvaW50KGNoZWNrcG9pbnQsIGNoYW5uZWxzLCBzdGVwICsgMSksIHtcblx0XHRcdFx0c291cmNlOiBcInVwZGF0ZVwiLFxuXHRcdFx0XHRzdGVwOiBzdGVwICsgMSxcblx0XHRcdFx0cGFyZW50czogc2F2ZWQ/Lm1ldGFkYXRhPy5wYXJlbnRzID8/IHt9XG5cdFx0XHR9LCBuZXdWZXJzaW9ucyk7XG5cdFx0XHRmb3IgKGNvbnN0IHRhc2sgb2YgdGFza3MpIHtcblx0XHRcdFx0Y29uc3QgcHVzaFdyaXRlcyA9IHRhc2sud3JpdGVzLmZpbHRlcigodykgPT4gd1swXSA9PT0gUFVTSCk7XG5cdFx0XHRcdGlmIChwdXNoV3JpdGVzLmxlbmd0aCA+IDApIGF3YWl0IGNoZWNrcG9pbnRlci5wdXRXcml0ZXMobmV4dENvbmZpZywgcHVzaFdyaXRlcywgdGFzay5pZCk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcGF0Y2hDaGVja3BvaW50TWFwKG5leHRDb25maWcsIHNhdmVkID8gc2F2ZWQubWV0YWRhdGEgOiB2b2lkIDApO1xuXHRcdH07XG5cdFx0bGV0IGN1cnJlbnRDb25maWcgPSBzdGFydENvbmZpZztcblx0XHRmb3IgKGNvbnN0IHsgdXBkYXRlcyB9IG9mIHN1cGVyc3RlcHMpIGN1cnJlbnRDb25maWcgPSBhd2FpdCB1cGRhdGVTdXBlclN0ZXAoY3VycmVudENvbmZpZywgdXBkYXRlcyk7XG5cdFx0cmV0dXJuIGN1cnJlbnRDb25maWc7XG5cdH1cblx0LyoqXG5cdCogVXBkYXRlcyB0aGUgc3RhdGUgb2YgdGhlIGdyYXBoIHdpdGggbmV3IHZhbHVlcy5cblx0KiBSZXF1aXJlcyBhIGNoZWNrcG9pbnRlciB0byBiZSBjb25maWd1cmVkLlxuXHQqXG5cdCogVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgZm9yOlxuXHQqIC0gSW1wbGVtZW50aW5nIGh1bWFuLWluLXRoZS1sb29wIHdvcmtmbG93c1xuXHQqIC0gTW9kaWZ5aW5nIGdyYXBoIHN0YXRlIGR1cmluZyBicmVha3BvaW50c1xuXHQqIC0gSW50ZWdyYXRpbmcgZXh0ZXJuYWwgaW5wdXRzIGludG8gdGhlIGdyYXBoXG5cdCpcblx0KiBAcGFyYW0gaW5wdXRDb25maWcgLSBDb25maWd1cmF0aW9uIGZvciB0aGUgdXBkYXRlXG5cdCogQHBhcmFtIHZhbHVlcyAtIFRoZSB2YWx1ZXMgdG8gdXBkYXRlIHRoZSBzdGF0ZSB3aXRoXG5cdCogQHBhcmFtIGFzTm9kZSAtIE9wdGlvbmFsIG5vZGUgbmFtZSB0byBhdHRyaWJ1dGUgdGhlIHVwZGF0ZSB0b1xuXHQqIEByZXR1cm5zIFVwZGF0ZWQgY29uZmlndXJhdGlvblxuXHQqIEB0aHJvd3Mge0dyYXBoVmFsdWVFcnJvcn0gSWYgbm8gY2hlY2twb2ludGVyIGlzIGNvbmZpZ3VyZWRcblx0KiBAdGhyb3dzIHtJbnZhbGlkVXBkYXRlRXJyb3J9IElmIHRoZSB1cGRhdGUgY2Fubm90IGJlIGF0dHJpYnV0ZWQgdG8gYSBub2RlXG5cdCovXG5cdGFzeW5jIHVwZGF0ZVN0YXRlKGlucHV0Q29uZmlnLCB2YWx1ZXMsIGFzTm9kZSkge1xuXHRcdHJldHVybiB0aGlzLmJ1bGtVcGRhdGVTdGF0ZShpbnB1dENvbmZpZywgW3sgdXBkYXRlczogW3tcblx0XHRcdHZhbHVlcyxcblx0XHRcdGFzTm9kZVxuXHRcdH1dIH1dKTtcblx0fVxuXHQvKipcblx0KiBHZXRzIHRoZSBkZWZhdWx0IHZhbHVlcyBmb3IgdmFyaW91cyBncmFwaCBjb25maWd1cmF0aW9uIG9wdGlvbnMuXG5cdCogVGhpcyBpcyBhbiBpbnRlcm5hbCBtZXRob2QgdXNlZCB0byBwcm9jZXNzIGFuZCBub3JtYWxpemUgY29uZmlndXJhdGlvbiBvcHRpb25zLlxuXHQqXG5cdCogQHBhcmFtIGNvbmZpZyAtIFRoZSBpbnB1dCBjb25maWd1cmF0aW9uIG9wdGlvbnNcblx0KiBAcmV0dXJucyBBIHR1cGxlIGNvbnRhaW5pbmcgbm9ybWFsaXplZCB2YWx1ZXMgZm9yOlxuXHQqIC0gZGVidWcgbW9kZVxuXHQqIC0gc3RyZWFtIG1vZGVzXG5cdCogLSBpbnB1dCBrZXlzXG5cdCogLSBvdXRwdXQga2V5c1xuXHQqIC0gcmVtYWluaW5nIGNvbmZpZ1xuXHQqIC0gaW50ZXJydXB0IGJlZm9yZSBub2Rlc1xuXHQqIC0gaW50ZXJydXB0IGFmdGVyIG5vZGVzXG5cdCogLSBjaGVja3BvaW50ZXJcblx0KiAtIHN0b3JlXG5cdCogLSB3aGV0aGVyIHN0cmVhbSBtb2RlIGlzIHNpbmdsZVxuXHQqIC0gbm9kZSBjYWNoZVxuXHQqIC0gd2hldGhlciBjaGVja3BvaW50IGR1cmluZyBpcyBlbmFibGVkXG5cdCogQGludGVybmFsXG5cdCovXG5cdF9kZWZhdWx0cyhjb25maWcpIHtcblx0XHRjb25zdCB7IGRlYnVnLCBzdHJlYW1Nb2RlLCBpbnB1dEtleXMsIG91dHB1dEtleXMsIGludGVycnVwdEFmdGVyLCBpbnRlcnJ1cHRCZWZvcmUsIC4uLnJlc3QgfSA9IGNvbmZpZztcblx0XHRsZXQgc3RyZWFtTW9kZVNpbmdsZSA9IHRydWU7XG5cdFx0Y29uc3QgZGVmYXVsdERlYnVnID0gZGVidWcgIT09IHZvaWQgMCA/IGRlYnVnIDogdGhpcy5kZWJ1Zztcblx0XHRsZXQgZGVmYXVsdE91dHB1dEtleXMgPSBvdXRwdXRLZXlzO1xuXHRcdGlmIChkZWZhdWx0T3V0cHV0S2V5cyA9PT0gdm9pZCAwKSBkZWZhdWx0T3V0cHV0S2V5cyA9IHRoaXMuc3RyZWFtQ2hhbm5lbHNBc0lzO1xuXHRcdGVsc2UgdmFsaWRhdGVLZXlzKGRlZmF1bHRPdXRwdXRLZXlzLCB0aGlzLmNoYW5uZWxzKTtcblx0XHRsZXQgZGVmYXVsdElucHV0S2V5cyA9IGlucHV0S2V5cztcblx0XHRpZiAoZGVmYXVsdElucHV0S2V5cyA9PT0gdm9pZCAwKSBkZWZhdWx0SW5wdXRLZXlzID0gdGhpcy5pbnB1dENoYW5uZWxzO1xuXHRcdGVsc2UgdmFsaWRhdGVLZXlzKGRlZmF1bHRJbnB1dEtleXMsIHRoaXMuY2hhbm5lbHMpO1xuXHRcdGNvbnN0IGRlZmF1bHRJbnRlcnJ1cHRCZWZvcmUgPSBpbnRlcnJ1cHRCZWZvcmUgPz8gdGhpcy5pbnRlcnJ1cHRCZWZvcmUgPz8gW107XG5cdFx0Y29uc3QgZGVmYXVsdEludGVycnVwdEFmdGVyID0gaW50ZXJydXB0QWZ0ZXIgPz8gdGhpcy5pbnRlcnJ1cHRBZnRlciA/PyBbXTtcblx0XHRsZXQgZGVmYXVsdFN0cmVhbU1vZGU7XG5cdFx0aWYgKHN0cmVhbU1vZGUgIT09IHZvaWQgMCkge1xuXHRcdFx0ZGVmYXVsdFN0cmVhbU1vZGUgPSBBcnJheS5pc0FycmF5KHN0cmVhbU1vZGUpID8gc3RyZWFtTW9kZSA6IFtzdHJlYW1Nb2RlXTtcblx0XHRcdHN0cmVhbU1vZGVTaW5nbGUgPSB0eXBlb2Ygc3RyZWFtTW9kZSA9PT0gXCJzdHJpbmdcIjtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKGNvbmZpZy5jb25maWd1cmFibGU/LltDT05GSUdfS0VZX1RBU0tfSURdICE9PSB2b2lkIDApIGRlZmF1bHRTdHJlYW1Nb2RlID0gW1widmFsdWVzXCJdO1xuXHRcdFx0ZWxzZSBkZWZhdWx0U3RyZWFtTW9kZSA9IHRoaXMuc3RyZWFtTW9kZTtcblx0XHRcdHN0cmVhbU1vZGVTaW5nbGUgPSB0cnVlO1xuXHRcdH1cblx0XHRsZXQgZGVmYXVsdENoZWNrcG9pbnRlcjtcblx0XHRpZiAodGhpcy5jaGVja3BvaW50ZXIgPT09IGZhbHNlKSBkZWZhdWx0Q2hlY2twb2ludGVyID0gdm9pZCAwO1xuXHRcdGVsc2UgaWYgKGNvbmZpZyAhPT0gdm9pZCAwICYmIGNvbmZpZy5jb25maWd1cmFibGU/LltDT05GSUdfS0VZX0NIRUNLUE9JTlRFUl0gIT09IHZvaWQgMCkgZGVmYXVsdENoZWNrcG9pbnRlciA9IGNvbmZpZy5jb25maWd1cmFibGVbQ09ORklHX0tFWV9DSEVDS1BPSU5URVJdO1xuXHRcdGVsc2UgaWYgKHRoaXMuY2hlY2twb2ludGVyID09PSB0cnVlKSB0aHJvdyBuZXcgRXJyb3IoXCJjaGVja3BvaW50ZXI6IHRydWUgY2Fubm90IGJlIHVzZWQgZm9yIHJvb3QgZ3JhcGhzLlwiKTtcblx0XHRlbHNlIGRlZmF1bHRDaGVja3BvaW50ZXIgPSB0aGlzLmNoZWNrcG9pbnRlcjtcblx0XHRjb25zdCBkZWZhdWx0U3RvcmUgPSBjb25maWcuc3RvcmUgPz8gdGhpcy5zdG9yZTtcblx0XHRjb25zdCBkZWZhdWx0Q2FjaGUgPSBjb25maWcuY2FjaGUgPz8gdGhpcy5jYWNoZTtcblx0XHRpZiAoY29uZmlnLmR1cmFiaWxpdHkgIT0gbnVsbCAmJiBjb25maWcuY2hlY2twb2ludER1cmluZyAhPSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgdXNlIGJvdGggYGR1cmFiaWxpdHlgIGFuZCBgY2hlY2twb2ludER1cmluZ2AgYXQgdGhlIHNhbWUgdGltZS5cIik7XG5cdFx0Y29uc3QgY2hlY2twb2ludER1cmluZ0R1cmFiaWxpdHkgPSAoKCkgPT4ge1xuXHRcdFx0aWYgKGNvbmZpZy5jaGVja3BvaW50RHVyaW5nID09IG51bGwpIHJldHVybiB2b2lkIDA7XG5cdFx0XHRpZiAoY29uZmlnLmNoZWNrcG9pbnREdXJpbmcgPT09IGZhbHNlKSByZXR1cm4gXCJleGl0XCI7XG5cdFx0XHRyZXR1cm4gXCJhc3luY1wiO1xuXHRcdH0pKCk7XG5cdFx0Y29uc3QgZGVmYXVsdER1cmFiaWxpdHkgPSBjb25maWcuZHVyYWJpbGl0eSA/PyBjaGVja3BvaW50RHVyaW5nRHVyYWJpbGl0eSA/PyBjb25maWc/LmNvbmZpZ3VyYWJsZT8uW0NPTkZJR19LRVlfRFVSQUJJTElUWV0gPz8gXCJhc3luY1wiO1xuXHRcdHJldHVybiBbXG5cdFx0XHRkZWZhdWx0RGVidWcsXG5cdFx0XHRkZWZhdWx0U3RyZWFtTW9kZSxcblx0XHRcdGRlZmF1bHRJbnB1dEtleXMsXG5cdFx0XHRkZWZhdWx0T3V0cHV0S2V5cyxcblx0XHRcdHJlc3QsXG5cdFx0XHRkZWZhdWx0SW50ZXJydXB0QmVmb3JlLFxuXHRcdFx0ZGVmYXVsdEludGVycnVwdEFmdGVyLFxuXHRcdFx0ZGVmYXVsdENoZWNrcG9pbnRlcixcblx0XHRcdGRlZmF1bHRTdG9yZSxcblx0XHRcdHN0cmVhbU1vZGVTaW5nbGUsXG5cdFx0XHRkZWZhdWx0Q2FjaGUsXG5cdFx0XHRkZWZhdWx0RHVyYWJpbGl0eVxuXHRcdF07XG5cdH1cblx0LyoqXG5cdCogU3RyZWFtcyB0aGUgZXhlY3V0aW9uIG9mIHRoZSBncmFwaCwgZW1pdHRpbmcgc3RhdGUgdXBkYXRlcyBhcyB0aGV5IG9jY3VyLlxuXHQqIFRoaXMgaXMgdGhlIHByaW1hcnkgbWV0aG9kIGZvciBvYnNlcnZpbmcgZ3JhcGggZXhlY3V0aW9uIGluIHJlYWwtdGltZS5cblx0KlxuXHQqIFN0cmVhbSBtb2Rlczpcblx0KiAtIFwidmFsdWVzXCI6IEVtaXRzIGNvbXBsZXRlIHN0YXRlIGFmdGVyIGVhY2ggc3RlcFxuXHQqIC0gXCJ1cGRhdGVzXCI6IEVtaXRzIG9ubHkgc3RhdGUgY2hhbmdlcyBhZnRlciBlYWNoIHN0ZXBcblx0KiAtIFwiZGVidWdcIjogRW1pdHMgZGV0YWlsZWQgZGVidWcgaW5mb3JtYXRpb25cblx0KiAtIFwibWVzc2FnZXNcIjogRW1pdHMgbWVzc2FnZXMgZnJvbSB3aXRoaW4gbm9kZXNcblx0KiAtIFwiY3VzdG9tXCI6IEVtaXRzIGN1c3RvbSBldmVudHMgZnJvbSB3aXRoaW4gbm9kZXNcblx0KiAtIFwiY2hlY2twb2ludHNcIjogRW1pdHMgY2hlY2twb2ludHMgZnJvbSB3aXRoaW4gbm9kZXNcblx0KiAtIFwidGFza3NcIjogRW1pdHMgdGFza3MgZnJvbSB3aXRoaW4gbm9kZXNcblx0KlxuXHQqIEBwYXJhbSBpbnB1dCAtIFRoZSBpbnB1dCB0byBzdGFydCBncmFwaCBleGVjdXRpb24gd2l0aFxuXHQqIEBwYXJhbSBvcHRpb25zIC0gQ29uZmlndXJhdGlvbiBvcHRpb25zIGZvciBzdHJlYW1pbmdcblx0KiBAcmV0dXJucyBBbiBhc3luYyBpdGVyYWJsZSBzdHJlYW0gb2YgZ3JhcGggc3RhdGUgdXBkYXRlc1xuXHQqL1xuXHRhc3luYyBzdHJlYW0oaW5wdXQsIG9wdGlvbnMpIHtcblx0XHRjb25zdCBhYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cdFx0Y29uc3QgY29uZmlnID0ge1xuXHRcdFx0cmVjdXJzaW9uTGltaXQ6IHRoaXMuY29uZmlnPy5yZWN1cnNpb25MaW1pdCxcblx0XHRcdC4uLm9wdGlvbnMsXG5cdFx0XHRzaWduYWw6IGNvbWJpbmVBYm9ydFNpZ25hbHMob3B0aW9ucz8uc2lnbmFsLCBhYm9ydENvbnRyb2xsZXIuc2lnbmFsKS5zaWduYWxcblx0XHR9O1xuXHRcdGNvbnN0IHN0cmVhbSA9IGF3YWl0IHN1cGVyLnN0cmVhbShpbnB1dCwgY29uZmlnKTtcblx0XHRyZXR1cm4gbmV3IEl0ZXJhYmxlUmVhZGFibGVTdHJlYW1XaXRoQWJvcnRTaWduYWwob3B0aW9ucz8uZW5jb2RpbmcgPT09IFwidGV4dC9ldmVudC1zdHJlYW1cIiA/IHRvRXZlbnRTdHJlYW0oc3RyZWFtKSA6IHN0cmVhbSwgYWJvcnRDb250cm9sbGVyKTtcblx0fVxuXHRzdHJlYW1FdmVudHMoaW5wdXQsIG9wdGlvbnMsIHN0cmVhbU9wdGlvbnMpIHtcblx0XHRjb25zdCBhYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cdFx0Y29uc3QgY29uZmlnID0ge1xuXHRcdFx0cmVjdXJzaW9uTGltaXQ6IHRoaXMuY29uZmlnPy5yZWN1cnNpb25MaW1pdCxcblx0XHRcdC4uLm9wdGlvbnMsXG5cdFx0XHRjYWxsYmFja3M6IGNvbWJpbmVDYWxsYmFja3ModGhpcy5jb25maWc/LmNhbGxiYWNrcywgb3B0aW9ucz8uY2FsbGJhY2tzKSxcblx0XHRcdHNpZ25hbDogY29tYmluZUFib3J0U2lnbmFscyhvcHRpb25zPy5zaWduYWwsIGFib3J0Q29udHJvbGxlci5zaWduYWwpLnNpZ25hbFxuXHRcdH07XG5cdFx0cmV0dXJuIG5ldyBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtV2l0aEFib3J0U2lnbmFsKHN1cGVyLnN0cmVhbUV2ZW50cyhpbnB1dCwgY29uZmlnLCBzdHJlYW1PcHRpb25zKSwgYWJvcnRDb250cm9sbGVyKTtcblx0fVxuXHQvKipcblx0KiBWYWxpZGF0ZXMgdGhlIGlucHV0IGZvciB0aGUgZ3JhcGguXG5cdCogQHBhcmFtIGlucHV0IC0gVGhlIGlucHV0IHRvIHZhbGlkYXRlXG5cdCogQHJldHVybnMgVGhlIHZhbGlkYXRlZCBpbnB1dFxuXHQqIEBpbnRlcm5hbFxuXHQqL1xuXHRhc3luYyBfdmFsaWRhdGVJbnB1dChpbnB1dCkge1xuXHRcdHJldHVybiBpbnB1dDtcblx0fVxuXHQvKipcblx0KiBWYWxpZGF0ZXMgdGhlIGNvbnRleHQgb3B0aW9ucyBmb3IgdGhlIGdyYXBoLlxuXHQqIEBwYXJhbSBjb250ZXh0IC0gVGhlIGNvbnRleHQgb3B0aW9ucyB0byB2YWxpZGF0ZVxuXHQqIEByZXR1cm5zIFRoZSB2YWxpZGF0ZWQgY29udGV4dCBvcHRpb25zXG5cdCogQGludGVybmFsXG5cdCovXG5cdGFzeW5jIF92YWxpZGF0ZUNvbnRleHQoY29udGV4dCkge1xuXHRcdHJldHVybiBjb250ZXh0O1xuXHR9XG5cdC8qKlxuXHQqIEludGVybmFsIGl0ZXJhdG9yIHVzZWQgYnkgc3RyZWFtKCkgdG8gZ2VuZXJhdGUgc3RhdGUgdXBkYXRlcy5cblx0KiBUaGlzIG1ldGhvZCBoYW5kbGVzIHRoZSBjb3JlIGxvZ2ljIG9mIGdyYXBoIGV4ZWN1dGlvbiBhbmQgc3RyZWFtaW5nLlxuXHQqXG5cdCogQHBhcmFtIGlucHV0IC0gVGhlIGlucHV0IHRvIHN0YXJ0IGdyYXBoIGV4ZWN1dGlvbiB3aXRoXG5cdCogQHBhcmFtIG9wdGlvbnMgLSBDb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHN0cmVhbWluZ1xuXHQqIEByZXR1cm5zIEFzeW5jR2VuZXJhdG9yIHlpZWxkaW5nIHN0YXRlIHVwZGF0ZXNcblx0KiBAaW50ZXJuYWxcblx0Ki9cblx0YXN5bmMgKl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgb3B0aW9ucykge1xuXHRcdGNvbnN0IHN0cmVhbUVuY29kaW5nID0gXCJ2ZXJzaW9uXCIgaW4gKG9wdGlvbnMgPz8ge30pID8gdm9pZCAwIDogb3B0aW9ucz8uZW5jb2RpbmcgPz8gdm9pZCAwO1xuXHRcdGNvbnN0IHN0cmVhbVN1YmdyYXBocyA9IG9wdGlvbnM/LnN1YmdyYXBocztcblx0XHRjb25zdCBpbnB1dENvbmZpZyA9IGVuc3VyZUxhbmdHcmFwaENvbmZpZyh0aGlzLmNvbmZpZywgb3B0aW9ucyk7XG5cdFx0aWYgKGlucHV0Q29uZmlnLnJlY3Vyc2lvbkxpbWl0ID09PSB2b2lkIDAgfHwgaW5wdXRDb25maWcucmVjdXJzaW9uTGltaXQgPCAxKSB0aHJvdyBuZXcgRXJyb3IoYFBhc3NlZCBcInJlY3Vyc2lvbkxpbWl0XCIgbXVzdCBiZSBhdCBsZWFzdCAxLmApO1xuXHRcdGlmICh0aGlzLmNoZWNrcG9pbnRlciAhPT0gdm9pZCAwICYmIHRoaXMuY2hlY2twb2ludGVyICE9PSBmYWxzZSAmJiBpbnB1dENvbmZpZy5jb25maWd1cmFibGUgPT09IHZvaWQgMCkgdGhyb3cgbmV3IEVycm9yKGBDaGVja3BvaW50ZXIgcmVxdWlyZXMgb25lIG9yIG1vcmUgb2YgdGhlIGZvbGxvd2luZyBcImNvbmZpZ3VyYWJsZVwiIGtleXM6IFwidGhyZWFkX2lkXCIsIFwiY2hlY2twb2ludF9uc1wiLCBcImNoZWNrcG9pbnRfaWRcImApO1xuXHRcdGNvbnN0IHZhbGlkSW5wdXQgPSBhd2FpdCB0aGlzLl92YWxpZGF0ZUlucHV0KGlucHV0KTtcblx0XHRjb25zdCB7IHJ1bklkLCAuLi5yZXN0Q29uZmlnIH0gPSBpbnB1dENvbmZpZztcblx0XHRjb25zdCBbZGVidWcsIHN0cmVhbU1vZGUsICwgb3V0cHV0S2V5cywgY29uZmlnLCBpbnRlcnJ1cHRCZWZvcmUsIGludGVycnVwdEFmdGVyLCBjaGVja3BvaW50ZXIsIHN0b3JlLCBzdHJlYW1Nb2RlU2luZ2xlLCBjYWNoZSwgZHVyYWJpbGl0eV0gPSB0aGlzLl9kZWZhdWx0cyhyZXN0Q29uZmlnKTtcblx0XHRpZiAodHlwZW9mIGNvbmZpZy5jb250ZXh0ICE9PSBcInVuZGVmaW5lZFwiKSBjb25maWcuY29udGV4dCA9IGF3YWl0IHRoaXMuX3ZhbGlkYXRlQ29udGV4dChjb25maWcuY29udGV4dCk7XG5cdFx0ZWxzZSBjb25maWcuY29uZmlndXJhYmxlID0gYXdhaXQgdGhpcy5fdmFsaWRhdGVDb250ZXh0KGNvbmZpZy5jb25maWd1cmFibGUpO1xuXHRcdGNvbnN0IHN0cmVhbSA9IG5ldyBJdGVyYWJsZVJlYWRhYmxlV3JpdGFibGVTdHJlYW0oeyBtb2RlczogbmV3IFNldChzdHJlYW1Nb2RlKSB9KTtcblx0XHRpZiAodGhpcy5jaGVja3BvaW50ZXIgPT09IHRydWUpIHtcblx0XHRcdGNvbmZpZy5jb25maWd1cmFibGUgPz89IHt9O1xuXHRcdFx0Y29uc3QgbnMgPSBjb25maWcuY29uZmlndXJhYmxlW0NPTkZJR19LRVlfQ0hFQ0tQT0lOVF9OU10gPz8gXCJcIjtcblx0XHRcdGNvbmZpZy5jb25maWd1cmFibGVbQ09ORklHX0tFWV9DSEVDS1BPSU5UX05TXSA9IG5zLnNwbGl0KENIRUNLUE9JTlRfTkFNRVNQQUNFX1NFUEFSQVRPUikubWFwKChwYXJ0KSA9PiBwYXJ0LnNwbGl0KENIRUNLUE9JTlRfTkFNRVNQQUNFX0VORClbMF0pLmpvaW4oQ0hFQ0tQT0lOVF9OQU1FU1BBQ0VfU0VQQVJBVE9SKTtcblx0XHR9XG5cdFx0aWYgKHN0cmVhbU1vZGUuaW5jbHVkZXMoXCJtZXNzYWdlc1wiKSkge1xuXHRcdFx0Y29uc3QgbWVzc2FnZVN0cmVhbWVyID0gbmV3IFN0cmVhbU1lc3NhZ2VzSGFuZGxlcigoY2h1bmspID0+IHN0cmVhbS5wdXNoKGNodW5rKSk7XG5cdFx0XHRjb25zdCB7IGNhbGxiYWNrcyB9ID0gY29uZmlnO1xuXHRcdFx0aWYgKGNhbGxiYWNrcyA9PT0gdm9pZCAwKSBjb25maWcuY2FsbGJhY2tzID0gW21lc3NhZ2VTdHJlYW1lcl07XG5cdFx0XHRlbHNlIGlmIChBcnJheS5pc0FycmF5KGNhbGxiYWNrcykpIGNvbmZpZy5jYWxsYmFja3MgPSBjYWxsYmFja3MuY29uY2F0KG1lc3NhZ2VTdHJlYW1lcik7XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0Y29uc3QgY29waWVkQ2FsbGJhY2tzID0gY2FsbGJhY2tzLmNvcHkoKTtcblx0XHRcdFx0Y29waWVkQ2FsbGJhY2tzLmFkZEhhbmRsZXIobWVzc2FnZVN0cmVhbWVyLCB0cnVlKTtcblx0XHRcdFx0Y29uZmlnLmNhbGxiYWNrcyA9IGNvcGllZENhbGxiYWNrcztcblx0XHRcdH1cblx0XHR9XG5cdFx0Y29uZmlnLndyaXRlciA/Pz0gKGNodW5rKSA9PiB7XG5cdFx0XHRpZiAoIXN0cmVhbU1vZGUuaW5jbHVkZXMoXCJjdXN0b21cIikpIHJldHVybjtcblx0XHRcdGNvbnN0IG5zID0gKGdldENvbmZpZygpPy5jb25maWd1cmFibGU/LltDT05GSUdfS0VZX0NIRUNLUE9JTlRfTlNdKT8uc3BsaXQoQ0hFQ0tQT0lOVF9OQU1FU1BBQ0VfU0VQQVJBVE9SKS5zbGljZSgwLCAtMSk7XG5cdFx0XHRzdHJlYW0ucHVzaChbXG5cdFx0XHRcdG5zID8/IFtdLFxuXHRcdFx0XHRcImN1c3RvbVwiLFxuXHRcdFx0XHRjaHVua1xuXHRcdFx0XSk7XG5cdFx0fTtcblx0XHRjb25maWcuaW50ZXJydXB0ID8/PSB0aGlzLnVzZXJJbnRlcnJ1cHQgPz8gaW50ZXJydXB0O1xuXHRcdGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCAoYXdhaXQgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKGNvbmZpZykpPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXQsIFwiaW5wdXRcIiksIHJ1bklkLCB2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBjb25maWc/LnJ1bk5hbWUgPz8gdGhpcy5nZXROYW1lKCkpO1xuXHRcdGNvbnN0IGNoYW5uZWxTcGVjcyA9IGdldE9ubHlDaGFubmVscyh0aGlzLmNoYW5uZWxzKTtcblx0XHRsZXQgbG9vcDtcblx0XHRsZXQgbG9vcEVycm9yO1xuXHRcdC8qKlxuXHRcdCogVGhlIFByZWdlbExvb3Agd2lsbCB5aWVsZCBldmVudHMgZnJvbSBjb25jdXJyZW50IHRhc2tzIGFzIHNvb24gYXMgdGhleSBhcmVcblx0XHQqIGdlbmVyYXRlZC4gRWFjaCB0YXNrIGNhbiBwdXNoIG11bHRpcGxlIGV2ZW50cyBvbnRvIHRoZSBzdHJlYW0gaW4gYW55IG9yZGVyLlxuXHRcdCpcblx0XHQqIFdlIHVzZSBhIHNlcGFyYXRlIGJhY2tncm91bmQgbWV0aG9kIGFuZCBzdHJlYW0gaGVyZSBpbiBvcmRlciB0byB5aWVsZCBldmVudHNcblx0XHQqIGZyb20gdGhlIGxvb3AgdG8gdGhlIG1haW4gc3RyZWFtIGFuZCB0aGVyZWZvcmUgYmFjayB0byB0aGUgdXNlciBhcyBzb29uIGFzXG5cdFx0KiB0aGV5IGFyZSBhdmFpbGFibGUuXG5cdFx0Ki9cblx0XHRjb25zdCBjcmVhdGVBbmRSdW5Mb29wID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0bG9vcCA9IGF3YWl0IFByZWdlbExvb3AuaW5pdGlhbGl6ZSh7XG5cdFx0XHRcdFx0aW5wdXQ6IHZhbGlkSW5wdXQsXG5cdFx0XHRcdFx0Y29uZmlnLFxuXHRcdFx0XHRcdGNoZWNrcG9pbnRlcixcblx0XHRcdFx0XHRub2RlczogdGhpcy5ub2Rlcyxcblx0XHRcdFx0XHRjaGFubmVsU3BlY3MsXG5cdFx0XHRcdFx0b3V0cHV0S2V5cyxcblx0XHRcdFx0XHRzdHJlYW1LZXlzOiB0aGlzLnN0cmVhbUNoYW5uZWxzQXNJcyxcblx0XHRcdFx0XHRzdG9yZSxcblx0XHRcdFx0XHRjYWNoZSxcblx0XHRcdFx0XHRzdHJlYW0sXG5cdFx0XHRcdFx0aW50ZXJydXB0QWZ0ZXIsXG5cdFx0XHRcdFx0aW50ZXJydXB0QmVmb3JlLFxuXHRcdFx0XHRcdG1hbmFnZXI6IHJ1bk1hbmFnZXIsXG5cdFx0XHRcdFx0ZGVidWc6IHRoaXMuZGVidWcsXG5cdFx0XHRcdFx0dHJpZ2dlclRvTm9kZXM6IHRoaXMudHJpZ2dlclRvTm9kZXMsXG5cdFx0XHRcdFx0ZHVyYWJpbGl0eVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0Y29uc3QgcnVubmVyID0gbmV3IFByZWdlbFJ1bm5lcih7XG5cdFx0XHRcdFx0bG9vcCxcblx0XHRcdFx0XHRub2RlRmluaXNoZWQ6IGNvbmZpZy5jb25maWd1cmFibGU/LltDT05GSUdfS0VZX05PREVfRklOSVNIRURdXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAob3B0aW9ucz8uc3ViZ3JhcGhzKSBsb29wLmNvbmZpZy5jb25maWd1cmFibGUgPSB7XG5cdFx0XHRcdFx0Li4ubG9vcC5jb25maWcuY29uZmlndXJhYmxlLFxuXHRcdFx0XHRcdFtDT05GSUdfS0VZX1NUUkVBTV06IGxvb3Auc3RyZWFtXG5cdFx0XHRcdH07XG5cdFx0XHRcdGF3YWl0IHRoaXMuX3J1bkxvb3Aoe1xuXHRcdFx0XHRcdGxvb3AsXG5cdFx0XHRcdFx0cnVubmVyLFxuXHRcdFx0XHRcdGRlYnVnLFxuXHRcdFx0XHRcdGNvbmZpZ1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKGR1cmFiaWxpdHkgPT09IFwic3luY1wiKSBhd2FpdCBQcm9taXNlLmFsbChsb29wPy5jaGVja3BvaW50ZXJQcm9taXNlcyA/PyBbXSk7XG5cdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdGxvb3BFcnJvciA9IGU7XG5cdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGlmIChsb29wKSB7XG5cdFx0XHRcdFx0XHRhd2FpdCBsb29wLnN0b3JlPy5zdG9wKCk7XG5cdFx0XHRcdFx0XHRhd2FpdCBsb29wLmNhY2hlPy5zdG9wKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGF3YWl0IFByb21pc2UuYWxsKGxvb3A/LmNoZWNrcG9pbnRlclByb21pc2VzID8/IFtdKTtcblx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdGxvb3BFcnJvciA9IGxvb3BFcnJvciA/PyBlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChsb29wRXJyb3IpIHN0cmVhbS5lcnJvcihsb29wRXJyb3IpO1xuXHRcdFx0XHRlbHNlIHN0cmVhbS5jbG9zZSgpO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0Y29uc3QgcnVuTG9vcFByb21pc2UgPSBjcmVhdGVBbmRSdW5Mb29wKCk7XG5cdFx0dHJ5IHtcblx0XHRcdGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygc3RyZWFtKSB7XG5cdFx0XHRcdGlmIChjaHVuayA9PT0gdm9pZCAwKSB0aHJvdyBuZXcgRXJyb3IoXCJEYXRhIHN0cnVjdHVyZSBlcnJvci5cIik7XG5cdFx0XHRcdGNvbnN0IFtuYW1lc3BhY2UsIG1vZGUsIHBheWxvYWRdID0gY2h1bms7XG5cdFx0XHRcdGlmIChzdHJlYW1Nb2RlLmluY2x1ZGVzKG1vZGUpKSB7XG5cdFx0XHRcdFx0aWYgKHN0cmVhbUVuY29kaW5nID09PSBcInRleHQvZXZlbnQtc3RyZWFtXCIpIHtcblx0XHRcdFx0XHRcdGlmIChzdHJlYW1TdWJncmFwaHMpIHlpZWxkIFtcblx0XHRcdFx0XHRcdFx0bmFtZXNwYWNlLFxuXHRcdFx0XHRcdFx0XHRtb2RlLFxuXHRcdFx0XHRcdFx0XHRwYXlsb2FkXG5cdFx0XHRcdFx0XHRdO1xuXHRcdFx0XHRcdFx0ZWxzZSB5aWVsZCBbXG5cdFx0XHRcdFx0XHRcdG51bGwsXG5cdFx0XHRcdFx0XHRcdG1vZGUsXG5cdFx0XHRcdFx0XHRcdHBheWxvYWRcblx0XHRcdFx0XHRcdF07XG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKHN0cmVhbVN1YmdyYXBocyAmJiAhc3RyZWFtTW9kZVNpbmdsZSkgeWllbGQgW1xuXHRcdFx0XHRcdFx0bmFtZXNwYWNlLFxuXHRcdFx0XHRcdFx0bW9kZSxcblx0XHRcdFx0XHRcdHBheWxvYWRcblx0XHRcdFx0XHRdO1xuXHRcdFx0XHRcdGVsc2UgaWYgKCFzdHJlYW1Nb2RlU2luZ2xlKSB5aWVsZCBbbW9kZSwgcGF5bG9hZF07XG5cdFx0XHRcdFx0ZWxzZSBpZiAoc3RyZWFtU3ViZ3JhcGhzKSB5aWVsZCBbbmFtZXNwYWNlLCBwYXlsb2FkXTtcblx0XHRcdFx0XHRlbHNlIHlpZWxkIHBheWxvYWQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGxvb3BFcnJvcik7XG5cdFx0XHR0aHJvdyBlO1xuXHRcdH0gZmluYWxseSB7XG5cdFx0XHRhd2FpdCBydW5Mb29wUHJvbWlzZTtcblx0XHR9XG5cdFx0YXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQobG9vcD8ub3V0cHV0ID8/IHt9LCBydW5JZCwgdm9pZCAwLCB2b2lkIDAsIHZvaWQgMCk7XG5cdH1cblx0LyoqXG5cdCogUnVuIHRoZSBncmFwaCB3aXRoIGEgc2luZ2xlIGlucHV0IGFuZCBjb25maWcuXG5cdCogQHBhcmFtIGlucHV0IFRoZSBpbnB1dCB0byB0aGUgZ3JhcGguXG5cdCogQHBhcmFtIG9wdGlvbnMgVGhlIGNvbmZpZ3VyYXRpb24gdG8gdXNlIGZvciB0aGUgcnVuLlxuXHQqL1xuXHRhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcblx0XHRjb25zdCBzdHJlYW1Nb2RlID0gb3B0aW9ucz8uc3RyZWFtTW9kZSA/PyBcInZhbHVlc1wiO1xuXHRcdGNvbnN0IGNvbmZpZyA9IHtcblx0XHRcdC4uLm9wdGlvbnMsXG5cdFx0XHRvdXRwdXRLZXlzOiBvcHRpb25zPy5vdXRwdXRLZXlzID8/IHRoaXMub3V0cHV0Q2hhbm5lbHMsXG5cdFx0XHRzdHJlYW1Nb2RlLFxuXHRcdFx0ZW5jb2Rpbmc6IHZvaWQgMFxuXHRcdH07XG5cdFx0Y29uc3QgY2h1bmtzID0gW107XG5cdFx0Y29uc3Qgc3RyZWFtID0gYXdhaXQgdGhpcy5zdHJlYW0oaW5wdXQsIGNvbmZpZyk7XG5cdFx0Y29uc3QgaW50ZXJydXB0Q2h1bmtzID0gW107XG5cdFx0bGV0IGxhdGVzdDtcblx0XHRmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHN0cmVhbSkgaWYgKHN0cmVhbU1vZGUgPT09IFwidmFsdWVzXCIpIGlmIChpc0ludGVycnVwdGVkKGNodW5rKSkgaW50ZXJydXB0Q2h1bmtzLnB1c2goY2h1bmtbSU5URVJSVVBUXSk7XG5cdFx0ZWxzZSBsYXRlc3QgPSBjaHVuaztcblx0XHRlbHNlIGNodW5rcy5wdXNoKGNodW5rKTtcblx0XHRpZiAoc3RyZWFtTW9kZSA9PT0gXCJ2YWx1ZXNcIikge1xuXHRcdFx0aWYgKGludGVycnVwdENodW5rcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGNvbnN0IGludGVycnVwdHMgPSBpbnRlcnJ1cHRDaHVua3MuZmxhdCgxKTtcblx0XHRcdFx0aWYgKGxhdGVzdCA9PSBudWxsKSByZXR1cm4geyBbSU5URVJSVVBUXTogaW50ZXJydXB0cyB9O1xuXHRcdFx0XHRpZiAodHlwZW9mIGxhdGVzdCA9PT0gXCJvYmplY3RcIikgcmV0dXJuIHtcblx0XHRcdFx0XHQuLi5sYXRlc3QsXG5cdFx0XHRcdFx0W0lOVEVSUlVQVF06IGludGVycnVwdHNcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBsYXRlc3Q7XG5cdFx0fVxuXHRcdHJldHVybiBjaHVua3M7XG5cdH1cblx0YXN5bmMgX3J1bkxvb3AocGFyYW1zKSB7XG5cdFx0Y29uc3QgeyBsb29wLCBydW5uZXIsIGRlYnVnLCBjb25maWcgfSA9IHBhcmFtcztcblx0XHRsZXQgdGlja0Vycm9yO1xuXHRcdHRyeSB7XG5cdFx0XHR3aGlsZSAoYXdhaXQgbG9vcC50aWNrKHsgaW5wdXRLZXlzOiB0aGlzLmlucHV0Q2hhbm5lbHMgfSkpIHtcblx0XHRcdFx0Zm9yIChjb25zdCB7IHRhc2sgfSBvZiBhd2FpdCBsb29wLl9tYXRjaENhY2hlZFdyaXRlcygpKSBsb29wLl9vdXRwdXRXcml0ZXModGFzay5pZCwgdGFzay53cml0ZXMsIHRydWUpO1xuXHRcdFx0XHRpZiAoZGVidWcpIHByaW50U3RlcENoZWNrcG9pbnQobG9vcC5jaGVja3BvaW50TWV0YWRhdGEuc3RlcCwgbG9vcC5jaGFubmVscywgdGhpcy5zdHJlYW1DaGFubmVsc0xpc3QpO1xuXHRcdFx0XHRpZiAoZGVidWcpIHByaW50U3RlcFRhc2tzKGxvb3Auc3RlcCwgT2JqZWN0LnZhbHVlcyhsb29wLnRhc2tzKSk7XG5cdFx0XHRcdGF3YWl0IHJ1bm5lci50aWNrKHtcblx0XHRcdFx0XHR0aW1lb3V0OiB0aGlzLnN0ZXBUaW1lb3V0LFxuXHRcdFx0XHRcdHJldHJ5UG9saWN5OiB0aGlzLnJldHJ5UG9saWN5LFxuXHRcdFx0XHRcdG9uU3RlcFdyaXRlOiAoc3RlcCwgd3JpdGVzKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoZGVidWcpIHByaW50U3RlcFdyaXRlcyhzdGVwLCB3cml0ZXMsIHRoaXMuc3RyZWFtQ2hhbm5lbHNMaXN0KTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdG1heENvbmN1cnJlbmN5OiBjb25maWcubWF4Q29uY3VycmVuY3ksXG5cdFx0XHRcdFx0c2lnbmFsOiBjb25maWcuc2lnbmFsXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGxvb3Auc3RhdHVzID09PSBcIm91dF9vZl9zdGVwc1wiKSB0aHJvdyBuZXcgR3JhcGhSZWN1cnNpb25FcnJvcihbXG5cdFx0XHRcdGBSZWN1cnNpb24gbGltaXQgb2YgJHtjb25maWcucmVjdXJzaW9uTGltaXR9IHJlYWNoZWRgLFxuXHRcdFx0XHRcIndpdGhvdXQgaGl0dGluZyBhIHN0b3AgY29uZGl0aW9uLiBZb3UgY2FuIGluY3JlYXNlIHRoZVwiLFxuXHRcdFx0XHRgbGltaXQgYnkgc2V0dGluZyB0aGUgXCJyZWN1cnNpb25MaW1pdFwiIGNvbmZpZyBrZXkuYFxuXHRcdFx0XS5qb2luKFwiIFwiKSwgeyBsY19lcnJvcl9jb2RlOiBcIkdSQVBIX1JFQ1VSU0lPTl9MSU1JVFwiIH0pO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdHRpY2tFcnJvciA9IGU7XG5cdFx0XHRpZiAoIWF3YWl0IGxvb3AuZmluaXNoQW5kSGFuZGxlRXJyb3IodGlja0Vycm9yKSkgdGhyb3cgZTtcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0aWYgKHRpY2tFcnJvciA9PT0gdm9pZCAwKSBhd2FpdCBsb29wLmZpbmlzaEFuZEhhbmRsZUVycm9yKCk7XG5cdFx0fVxuXHR9XG5cdGFzeW5jIGNsZWFyQ2FjaGUoKSB7XG5cdFx0YXdhaXQgdGhpcy5jYWNoZT8uY2xlYXIoW10pO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IENoYW5uZWwsIFByZWdlbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/pregel/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/pregel/io.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/pregel/io.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mapCommand: () => (/* binding */ mapCommand),\n/* harmony export */   mapInput: () => (/* binding */ mapInput),\n/* harmony export */   mapOutputUpdates: () => (/* binding */ mapOutputUpdates),\n/* harmony export */   mapOutputValues: () => (/* binding */ mapOutputValues),\n/* harmony export */   readChannel: () => (/* binding */ readChannel),\n/* harmony export */   readChannels: () => (/* binding */ readChannels)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _hash_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../hash.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/hash.js\");\n\n\n\n\n//#region src/pregel/io.ts\nfunction readChannel(channels, chan, catchErrors = true, returnException = false) {\n\ttry {\n\t\treturn channels[chan].get();\n\t} catch (e) {\n\t\tif (e.name === _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError.unminifiable_name) {\n\t\t\tif (returnException) return e;\n\t\t\telse if (catchErrors) return null;\n\t\t}\n\t\tthrow e;\n\t}\n}\nfunction readChannels(channels, select, skipEmpty = true) {\n\tif (Array.isArray(select)) {\n\t\tconst values = {};\n\t\tfor (const k of select) try {\n\t\t\tvalues[k] = readChannel(channels, k, !skipEmpty);\n\t\t} catch (e) {\n\t\t\tif (e.name === _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError.unminifiable_name) continue;\n\t\t}\n\t\treturn values;\n\t} else return readChannel(channels, select);\n}\n/**\n* Map input chunk to a sequence of pending writes in the form (channel, value).\n*/\nfunction* mapCommand(cmd, pendingWrites) {\n\tif (cmd.graph === _constants_js__WEBPACK_IMPORTED_MODULE_1__.Command.PARENT) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(\"There is no parent graph.\");\n\tif (cmd.goto) {\n\t\tlet sends;\n\t\tif (Array.isArray(cmd.goto)) sends = cmd.goto;\n\t\telse sends = [cmd.goto];\n\t\tfor (const send of sends) if ((0,_constants_js__WEBPACK_IMPORTED_MODULE_1__._isSend)(send)) yield [\n\t\t\t_constants_js__WEBPACK_IMPORTED_MODULE_1__.NULL_TASK_ID,\n\t\t\t_constants_js__WEBPACK_IMPORTED_MODULE_1__.TASKS,\n\t\t\tsend\n\t\t];\n\t\telse if (typeof send === \"string\") yield [\n\t\t\t_constants_js__WEBPACK_IMPORTED_MODULE_1__.NULL_TASK_ID,\n\t\t\t`branch:to:${send}`,\n\t\t\t\"__start__\"\n\t\t];\n\t\telse throw new Error(`In Command.send, expected Send or string, got ${typeof send}`);\n\t}\n\tif (cmd.resume) if (typeof cmd.resume === \"object\" && Object.keys(cmd.resume).length && Object.keys(cmd.resume).every(_hash_js__WEBPACK_IMPORTED_MODULE_2__.isXXH3)) for (const [tid, resume] of Object.entries(cmd.resume)) {\n\t\tconst existing = pendingWrites.filter((w) => w[0] === tid && w[1] === _constants_js__WEBPACK_IMPORTED_MODULE_1__.RESUME).map((w) => w[2]).slice(0, 1) ?? [];\n\t\texisting.push(resume);\n\t\tyield [\n\t\t\ttid,\n\t\t\t_constants_js__WEBPACK_IMPORTED_MODULE_1__.RESUME,\n\t\t\texisting\n\t\t];\n\t}\n\telse yield [\n\t\t_constants_js__WEBPACK_IMPORTED_MODULE_1__.NULL_TASK_ID,\n\t\t_constants_js__WEBPACK_IMPORTED_MODULE_1__.RESUME,\n\t\tcmd.resume\n\t];\n\tif (cmd.update) {\n\t\tif (typeof cmd.update !== \"object\" || !cmd.update) throw new Error(\"Expected cmd.update to be a dict mapping channel names to update values\");\n\t\tif (Array.isArray(cmd.update)) for (const [k, v] of cmd.update) yield [\n\t\t\t_constants_js__WEBPACK_IMPORTED_MODULE_1__.NULL_TASK_ID,\n\t\t\tk,\n\t\t\tv\n\t\t];\n\t\telse for (const [k, v] of Object.entries(cmd.update)) yield [\n\t\t\t_constants_js__WEBPACK_IMPORTED_MODULE_1__.NULL_TASK_ID,\n\t\t\tk,\n\t\t\tv\n\t\t];\n\t}\n}\n/**\n* Map input chunk to a sequence of pending writes in the form [channel, value].\n*/\nfunction* mapInput(inputChannels, chunk) {\n\tif (chunk !== void 0 && chunk !== null) if (Array.isArray(inputChannels) && typeof chunk === \"object\" && !Array.isArray(chunk)) {\n\t\tfor (const k in chunk) if (inputChannels.includes(k)) yield [k, chunk[k]];\n\t} else if (Array.isArray(inputChannels)) throw new Error(`Input chunk must be an object when \"inputChannels\" is an array`);\n\telse yield [inputChannels, chunk];\n}\n/**\n* Map pending writes (a sequence of tuples (channel, value)) to output chunk.\n*/\nfunction* mapOutputValues(outputChannels, pendingWrites, channels) {\n\tif (Array.isArray(outputChannels)) {\n\t\tif (pendingWrites === true || pendingWrites.find(([chan, _]) => outputChannels.includes(chan))) yield readChannels(channels, outputChannels);\n\t} else if (pendingWrites === true || pendingWrites.some(([chan, _]) => chan === outputChannels)) yield readChannel(channels, outputChannels);\n}\n/**\n* Map pending writes (a sequence of tuples (channel, value)) to output chunk.\n* @internal\n*\n* @param outputChannels - The channels to output.\n* @param tasks - The tasks to output.\n* @param cached - Whether the output is cached.\n*\n* @returns A generator that yields the output chunk (if any).\n*/\nfunction* mapOutputUpdates(outputChannels, tasks, cached) {\n\tconst outputTasks = tasks.filter(([task, ww]) => {\n\t\treturn (task.config === void 0 || !task.config.tags?.includes(_constants_js__WEBPACK_IMPORTED_MODULE_1__.TAG_HIDDEN)) && ww[0][0] !== _constants_js__WEBPACK_IMPORTED_MODULE_1__.ERROR && ww[0][0] !== _constants_js__WEBPACK_IMPORTED_MODULE_1__.INTERRUPT;\n\t});\n\tif (!outputTasks.length) return;\n\tlet updated;\n\tif (outputTasks.some(([task]) => task.writes.some(([chan, _]) => chan === _constants_js__WEBPACK_IMPORTED_MODULE_1__.RETURN))) updated = outputTasks.flatMap(([task]) => task.writes.filter(([chan, _]) => chan === _constants_js__WEBPACK_IMPORTED_MODULE_1__.RETURN).map(([_, value]) => [task.name, value]));\n\telse if (!Array.isArray(outputChannels)) updated = outputTasks.flatMap(([task]) => task.writes.filter(([chan, _]) => chan === outputChannels).map(([_, value]) => [task.name, value]));\n\telse updated = outputTasks.flatMap(([task]) => {\n\t\tconst { writes } = task;\n\t\tconst counts = {};\n\t\tfor (const [chan] of writes) if (outputChannels.includes(chan)) counts[chan] = (counts[chan] || 0) + 1;\n\t\tif (Object.values(counts).some((count) => count > 1)) return writes.filter(([chan]) => outputChannels.includes(chan)).map(([chan, value]) => [task.name, { [chan]: value }]);\n\t\telse return [[task.name, Object.fromEntries(writes.filter(([chan]) => outputChannels.includes(chan)))]];\n\t});\n\tconst grouped = {};\n\tfor (const [node, value] of updated) {\n\t\tif (!(node in grouped)) grouped[node] = [];\n\t\tgrouped[node].push(value);\n\t}\n\tconst flattened = {};\n\tfor (const node in grouped) if (grouped[node].length === 1) {\n\t\tconst [write] = grouped[node];\n\t\tflattened[node] = write;\n\t} else flattened[node] = grouped[node];\n\tif (cached) flattened[\"__metadata__\"] = { cached };\n\tyield flattened;\n}\n\n//#endregion\n\n//# sourceMappingURL=io.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvaW8uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXFFO0FBQ2lEO0FBQ2xGOztBQUVwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxpQkFBaUIseURBQWlCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osa0JBQWtCLHlEQUFpQjtBQUNuQztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQU8sbUJBQW1CLDBEQUFrQjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxzREFBTztBQUN2QyxHQUFHLHVEQUFZO0FBQ2YsR0FBRyxnREFBSztBQUNSO0FBQ0E7QUFDQTtBQUNBLEdBQUcsdURBQVk7QUFDZixnQkFBZ0IsS0FBSztBQUNyQjtBQUNBO0FBQ0Esd0VBQXdFLFlBQVk7QUFDcEY7QUFDQSx1SEFBdUgsNENBQU07QUFDN0gsd0VBQXdFLGlEQUFNO0FBQzlFO0FBQ0E7QUFDQTtBQUNBLEdBQUcsaURBQU07QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsdURBQVk7QUFDZCxFQUFFLGlEQUFNO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsdURBQVk7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsdURBQVk7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UscURBQVUsbUJBQW1CLGdEQUFLLGlCQUFpQixvREFBUztBQUM1SCxFQUFFO0FBQ0Y7QUFDQTtBQUNBLDJFQUEyRSxpREFBTSx5RkFBeUYsaURBQU07QUFDaEw7QUFDQTtBQUNBLFVBQVUsU0FBUztBQUNuQjtBQUNBO0FBQ0EsNkpBQTZKLGVBQWU7QUFDNUs7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILDJDQUEyQztBQUMzQztBQUNBOztBQUVBO0FBQzhGO0FBQzlGIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvaW8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRW1wdHlDaGFubmVsRXJyb3IsIEludmFsaWRVcGRhdGVFcnJvciB9IGZyb20gXCIuLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IENvbW1hbmQsIEVSUk9SLCBJTlRFUlJVUFQsIE5VTExfVEFTS19JRCwgUkVTVU1FLCBSRVRVUk4sIFRBR19ISURERU4sIFRBU0tTLCBfaXNTZW5kIH0gZnJvbSBcIi4uL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgaXNYWEgzIH0gZnJvbSBcIi4uL2hhc2guanNcIjtcblxuLy8jcmVnaW9uIHNyYy9wcmVnZWwvaW8udHNcbmZ1bmN0aW9uIHJlYWRDaGFubmVsKGNoYW5uZWxzLCBjaGFuLCBjYXRjaEVycm9ycyA9IHRydWUsIHJldHVybkV4Y2VwdGlvbiA9IGZhbHNlKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIGNoYW5uZWxzW2NoYW5dLmdldCgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKGUubmFtZSA9PT0gRW1wdHlDaGFubmVsRXJyb3IudW5taW5pZmlhYmxlX25hbWUpIHtcblx0XHRcdGlmIChyZXR1cm5FeGNlcHRpb24pIHJldHVybiBlO1xuXHRcdFx0ZWxzZSBpZiAoY2F0Y2hFcnJvcnMpIHJldHVybiBudWxsO1xuXHRcdH1cblx0XHR0aHJvdyBlO1xuXHR9XG59XG5mdW5jdGlvbiByZWFkQ2hhbm5lbHMoY2hhbm5lbHMsIHNlbGVjdCwgc2tpcEVtcHR5ID0gdHJ1ZSkge1xuXHRpZiAoQXJyYXkuaXNBcnJheShzZWxlY3QpKSB7XG5cdFx0Y29uc3QgdmFsdWVzID0ge307XG5cdFx0Zm9yIChjb25zdCBrIG9mIHNlbGVjdCkgdHJ5IHtcblx0XHRcdHZhbHVlc1trXSA9IHJlYWRDaGFubmVsKGNoYW5uZWxzLCBrLCAhc2tpcEVtcHR5KTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRpZiAoZS5uYW1lID09PSBFbXB0eUNoYW5uZWxFcnJvci51bm1pbmlmaWFibGVfbmFtZSkgY29udGludWU7XG5cdFx0fVxuXHRcdHJldHVybiB2YWx1ZXM7XG5cdH0gZWxzZSByZXR1cm4gcmVhZENoYW5uZWwoY2hhbm5lbHMsIHNlbGVjdCk7XG59XG4vKipcbiogTWFwIGlucHV0IGNodW5rIHRvIGEgc2VxdWVuY2Ugb2YgcGVuZGluZyB3cml0ZXMgaW4gdGhlIGZvcm0gKGNoYW5uZWwsIHZhbHVlKS5cbiovXG5mdW5jdGlvbiogbWFwQ29tbWFuZChjbWQsIHBlbmRpbmdXcml0ZXMpIHtcblx0aWYgKGNtZC5ncmFwaCA9PT0gQ29tbWFuZC5QQVJFTlQpIHRocm93IG5ldyBJbnZhbGlkVXBkYXRlRXJyb3IoXCJUaGVyZSBpcyBubyBwYXJlbnQgZ3JhcGguXCIpO1xuXHRpZiAoY21kLmdvdG8pIHtcblx0XHRsZXQgc2VuZHM7XG5cdFx0aWYgKEFycmF5LmlzQXJyYXkoY21kLmdvdG8pKSBzZW5kcyA9IGNtZC5nb3RvO1xuXHRcdGVsc2Ugc2VuZHMgPSBbY21kLmdvdG9dO1xuXHRcdGZvciAoY29uc3Qgc2VuZCBvZiBzZW5kcykgaWYgKF9pc1NlbmQoc2VuZCkpIHlpZWxkIFtcblx0XHRcdE5VTExfVEFTS19JRCxcblx0XHRcdFRBU0tTLFxuXHRcdFx0c2VuZFxuXHRcdF07XG5cdFx0ZWxzZSBpZiAodHlwZW9mIHNlbmQgPT09IFwic3RyaW5nXCIpIHlpZWxkIFtcblx0XHRcdE5VTExfVEFTS19JRCxcblx0XHRcdGBicmFuY2g6dG86JHtzZW5kfWAsXG5cdFx0XHRcIl9fc3RhcnRfX1wiXG5cdFx0XTtcblx0XHRlbHNlIHRocm93IG5ldyBFcnJvcihgSW4gQ29tbWFuZC5zZW5kLCBleHBlY3RlZCBTZW5kIG9yIHN0cmluZywgZ290ICR7dHlwZW9mIHNlbmR9YCk7XG5cdH1cblx0aWYgKGNtZC5yZXN1bWUpIGlmICh0eXBlb2YgY21kLnJlc3VtZSA9PT0gXCJvYmplY3RcIiAmJiBPYmplY3Qua2V5cyhjbWQucmVzdW1lKS5sZW5ndGggJiYgT2JqZWN0LmtleXMoY21kLnJlc3VtZSkuZXZlcnkoaXNYWEgzKSkgZm9yIChjb25zdCBbdGlkLCByZXN1bWVdIG9mIE9iamVjdC5lbnRyaWVzKGNtZC5yZXN1bWUpKSB7XG5cdFx0Y29uc3QgZXhpc3RpbmcgPSBwZW5kaW5nV3JpdGVzLmZpbHRlcigodykgPT4gd1swXSA9PT0gdGlkICYmIHdbMV0gPT09IFJFU1VNRSkubWFwKCh3KSA9PiB3WzJdKS5zbGljZSgwLCAxKSA/PyBbXTtcblx0XHRleGlzdGluZy5wdXNoKHJlc3VtZSk7XG5cdFx0eWllbGQgW1xuXHRcdFx0dGlkLFxuXHRcdFx0UkVTVU1FLFxuXHRcdFx0ZXhpc3Rpbmdcblx0XHRdO1xuXHR9XG5cdGVsc2UgeWllbGQgW1xuXHRcdE5VTExfVEFTS19JRCxcblx0XHRSRVNVTUUsXG5cdFx0Y21kLnJlc3VtZVxuXHRdO1xuXHRpZiAoY21kLnVwZGF0ZSkge1xuXHRcdGlmICh0eXBlb2YgY21kLnVwZGF0ZSAhPT0gXCJvYmplY3RcIiB8fCAhY21kLnVwZGF0ZSkgdGhyb3cgbmV3IEVycm9yKFwiRXhwZWN0ZWQgY21kLnVwZGF0ZSB0byBiZSBhIGRpY3QgbWFwcGluZyBjaGFubmVsIG5hbWVzIHRvIHVwZGF0ZSB2YWx1ZXNcIik7XG5cdFx0aWYgKEFycmF5LmlzQXJyYXkoY21kLnVwZGF0ZSkpIGZvciAoY29uc3QgW2ssIHZdIG9mIGNtZC51cGRhdGUpIHlpZWxkIFtcblx0XHRcdE5VTExfVEFTS19JRCxcblx0XHRcdGssXG5cdFx0XHR2XG5cdFx0XTtcblx0XHRlbHNlIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGNtZC51cGRhdGUpKSB5aWVsZCBbXG5cdFx0XHROVUxMX1RBU0tfSUQsXG5cdFx0XHRrLFxuXHRcdFx0dlxuXHRcdF07XG5cdH1cbn1cbi8qKlxuKiBNYXAgaW5wdXQgY2h1bmsgdG8gYSBzZXF1ZW5jZSBvZiBwZW5kaW5nIHdyaXRlcyBpbiB0aGUgZm9ybSBbY2hhbm5lbCwgdmFsdWVdLlxuKi9cbmZ1bmN0aW9uKiBtYXBJbnB1dChpbnB1dENoYW5uZWxzLCBjaHVuaykge1xuXHRpZiAoY2h1bmsgIT09IHZvaWQgMCAmJiBjaHVuayAhPT0gbnVsbCkgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXRDaGFubmVscykgJiYgdHlwZW9mIGNodW5rID09PSBcIm9iamVjdFwiICYmICFBcnJheS5pc0FycmF5KGNodW5rKSkge1xuXHRcdGZvciAoY29uc3QgayBpbiBjaHVuaykgaWYgKGlucHV0Q2hhbm5lbHMuaW5jbHVkZXMoaykpIHlpZWxkIFtrLCBjaHVua1trXV07XG5cdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dENoYW5uZWxzKSkgdGhyb3cgbmV3IEVycm9yKGBJbnB1dCBjaHVuayBtdXN0IGJlIGFuIG9iamVjdCB3aGVuIFwiaW5wdXRDaGFubmVsc1wiIGlzIGFuIGFycmF5YCk7XG5cdGVsc2UgeWllbGQgW2lucHV0Q2hhbm5lbHMsIGNodW5rXTtcbn1cbi8qKlxuKiBNYXAgcGVuZGluZyB3cml0ZXMgKGEgc2VxdWVuY2Ugb2YgdHVwbGVzIChjaGFubmVsLCB2YWx1ZSkpIHRvIG91dHB1dCBjaHVuay5cbiovXG5mdW5jdGlvbiogbWFwT3V0cHV0VmFsdWVzKG91dHB1dENoYW5uZWxzLCBwZW5kaW5nV3JpdGVzLCBjaGFubmVscykge1xuXHRpZiAoQXJyYXkuaXNBcnJheShvdXRwdXRDaGFubmVscykpIHtcblx0XHRpZiAocGVuZGluZ1dyaXRlcyA9PT0gdHJ1ZSB8fCBwZW5kaW5nV3JpdGVzLmZpbmQoKFtjaGFuLCBfXSkgPT4gb3V0cHV0Q2hhbm5lbHMuaW5jbHVkZXMoY2hhbikpKSB5aWVsZCByZWFkQ2hhbm5lbHMoY2hhbm5lbHMsIG91dHB1dENoYW5uZWxzKTtcblx0fSBlbHNlIGlmIChwZW5kaW5nV3JpdGVzID09PSB0cnVlIHx8IHBlbmRpbmdXcml0ZXMuc29tZSgoW2NoYW4sIF9dKSA9PiBjaGFuID09PSBvdXRwdXRDaGFubmVscykpIHlpZWxkIHJlYWRDaGFubmVsKGNoYW5uZWxzLCBvdXRwdXRDaGFubmVscyk7XG59XG4vKipcbiogTWFwIHBlbmRpbmcgd3JpdGVzIChhIHNlcXVlbmNlIG9mIHR1cGxlcyAoY2hhbm5lbCwgdmFsdWUpKSB0byBvdXRwdXQgY2h1bmsuXG4qIEBpbnRlcm5hbFxuKlxuKiBAcGFyYW0gb3V0cHV0Q2hhbm5lbHMgLSBUaGUgY2hhbm5lbHMgdG8gb3V0cHV0LlxuKiBAcGFyYW0gdGFza3MgLSBUaGUgdGFza3MgdG8gb3V0cHV0LlxuKiBAcGFyYW0gY2FjaGVkIC0gV2hldGhlciB0aGUgb3V0cHV0IGlzIGNhY2hlZC5cbipcbiogQHJldHVybnMgQSBnZW5lcmF0b3IgdGhhdCB5aWVsZHMgdGhlIG91dHB1dCBjaHVuayAoaWYgYW55KS5cbiovXG5mdW5jdGlvbiogbWFwT3V0cHV0VXBkYXRlcyhvdXRwdXRDaGFubmVscywgdGFza3MsIGNhY2hlZCkge1xuXHRjb25zdCBvdXRwdXRUYXNrcyA9IHRhc2tzLmZpbHRlcigoW3Rhc2ssIHd3XSkgPT4ge1xuXHRcdHJldHVybiAodGFzay5jb25maWcgPT09IHZvaWQgMCB8fCAhdGFzay5jb25maWcudGFncz8uaW5jbHVkZXMoVEFHX0hJRERFTikpICYmIHd3WzBdWzBdICE9PSBFUlJPUiAmJiB3d1swXVswXSAhPT0gSU5URVJSVVBUO1xuXHR9KTtcblx0aWYgKCFvdXRwdXRUYXNrcy5sZW5ndGgpIHJldHVybjtcblx0bGV0IHVwZGF0ZWQ7XG5cdGlmIChvdXRwdXRUYXNrcy5zb21lKChbdGFza10pID0+IHRhc2sud3JpdGVzLnNvbWUoKFtjaGFuLCBfXSkgPT4gY2hhbiA9PT0gUkVUVVJOKSkpIHVwZGF0ZWQgPSBvdXRwdXRUYXNrcy5mbGF0TWFwKChbdGFza10pID0+IHRhc2sud3JpdGVzLmZpbHRlcigoW2NoYW4sIF9dKSA9PiBjaGFuID09PSBSRVRVUk4pLm1hcCgoW18sIHZhbHVlXSkgPT4gW3Rhc2submFtZSwgdmFsdWVdKSk7XG5cdGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KG91dHB1dENoYW5uZWxzKSkgdXBkYXRlZCA9IG91dHB1dFRhc2tzLmZsYXRNYXAoKFt0YXNrXSkgPT4gdGFzay53cml0ZXMuZmlsdGVyKChbY2hhbiwgX10pID0+IGNoYW4gPT09IG91dHB1dENoYW5uZWxzKS5tYXAoKFtfLCB2YWx1ZV0pID0+IFt0YXNrLm5hbWUsIHZhbHVlXSkpO1xuXHRlbHNlIHVwZGF0ZWQgPSBvdXRwdXRUYXNrcy5mbGF0TWFwKChbdGFza10pID0+IHtcblx0XHRjb25zdCB7IHdyaXRlcyB9ID0gdGFzaztcblx0XHRjb25zdCBjb3VudHMgPSB7fTtcblx0XHRmb3IgKGNvbnN0IFtjaGFuXSBvZiB3cml0ZXMpIGlmIChvdXRwdXRDaGFubmVscy5pbmNsdWRlcyhjaGFuKSkgY291bnRzW2NoYW5dID0gKGNvdW50c1tjaGFuXSB8fCAwKSArIDE7XG5cdFx0aWYgKE9iamVjdC52YWx1ZXMoY291bnRzKS5zb21lKChjb3VudCkgPT4gY291bnQgPiAxKSkgcmV0dXJuIHdyaXRlcy5maWx0ZXIoKFtjaGFuXSkgPT4gb3V0cHV0Q2hhbm5lbHMuaW5jbHVkZXMoY2hhbikpLm1hcCgoW2NoYW4sIHZhbHVlXSkgPT4gW3Rhc2submFtZSwgeyBbY2hhbl06IHZhbHVlIH1dKTtcblx0XHRlbHNlIHJldHVybiBbW3Rhc2submFtZSwgT2JqZWN0LmZyb21FbnRyaWVzKHdyaXRlcy5maWx0ZXIoKFtjaGFuXSkgPT4gb3V0cHV0Q2hhbm5lbHMuaW5jbHVkZXMoY2hhbikpKV1dO1xuXHR9KTtcblx0Y29uc3QgZ3JvdXBlZCA9IHt9O1xuXHRmb3IgKGNvbnN0IFtub2RlLCB2YWx1ZV0gb2YgdXBkYXRlZCkge1xuXHRcdGlmICghKG5vZGUgaW4gZ3JvdXBlZCkpIGdyb3VwZWRbbm9kZV0gPSBbXTtcblx0XHRncm91cGVkW25vZGVdLnB1c2godmFsdWUpO1xuXHR9XG5cdGNvbnN0IGZsYXR0ZW5lZCA9IHt9O1xuXHRmb3IgKGNvbnN0IG5vZGUgaW4gZ3JvdXBlZCkgaWYgKGdyb3VwZWRbbm9kZV0ubGVuZ3RoID09PSAxKSB7XG5cdFx0Y29uc3QgW3dyaXRlXSA9IGdyb3VwZWRbbm9kZV07XG5cdFx0ZmxhdHRlbmVkW25vZGVdID0gd3JpdGU7XG5cdH0gZWxzZSBmbGF0dGVuZWRbbm9kZV0gPSBncm91cGVkW25vZGVdO1xuXHRpZiAoY2FjaGVkKSBmbGF0dGVuZWRbXCJfX21ldGFkYXRhX19cIl0gPSB7IGNhY2hlZCB9O1xuXHR5aWVsZCBmbGF0dGVuZWQ7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgbWFwQ29tbWFuZCwgbWFwSW5wdXQsIG1hcE91dHB1dFVwZGF0ZXMsIG1hcE91dHB1dFZhbHVlcywgcmVhZENoYW5uZWwsIHJlYWRDaGFubmVscyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW8uanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/pregel/io.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/pregel/loop.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/pregel/loop.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PregelLoop: () => (/* binding */ PregelLoop)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _channels_base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../channels/base.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/base.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../constants.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/utils.js\");\n/* harmony import */ var _hash_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../hash.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/hash.js\");\n/* harmony import */ var _io_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./io.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/io.js\");\n/* harmony import */ var _utils_index_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils/index.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/utils/index.js\");\n/* harmony import */ var _algo_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./algo.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/algo.js\");\n/* harmony import */ var _debug_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./debug.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/debug.js\");\n/* harmony import */ var _stream_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./stream.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/stream.js\");\n/* harmony import */ var _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @langchain/langgraph-checkpoint */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/pregel/loop.ts\nconst INPUT_DONE = Symbol.for(\"INPUT_DONE\");\nconst INPUT_RESUMING = Symbol.for(\"INPUT_RESUMING\");\nconst DEFAULT_LOOP_LIMIT = 25;\nfunction createDuplexStream(...streams) {\n\treturn new _stream_js__WEBPACK_IMPORTED_MODULE_9__.IterableReadableWritableStream({\n\t\tpassthroughFn: (value) => {\n\t\t\tfor (const stream of streams) if (stream.modes.has(value[1])) stream.push(value);\n\t\t},\n\t\tmodes: new Set(streams.flatMap((s) => Array.from(s.modes)))\n\t});\n}\nvar AsyncBatchedCache = class extends _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_10__.BaseCache {\n\tcache;\n\tqueue = Promise.resolve();\n\tconstructor(cache) {\n\t\tsuper();\n\t\tthis.cache = cache;\n\t}\n\tasync get(keys) {\n\t\treturn this.enqueueOperation(\"get\", keys);\n\t}\n\tasync set(pairs) {\n\t\treturn this.enqueueOperation(\"set\", pairs);\n\t}\n\tasync clear(namespaces) {\n\t\treturn this.enqueueOperation(\"clear\", namespaces);\n\t}\n\tasync stop() {\n\t\tawait this.queue;\n\t}\n\tenqueueOperation(type, ...args) {\n\t\tconst newPromise = this.queue.then(() => {\n\t\t\treturn this.cache[type](...args);\n\t\t});\n\t\tthis.queue = newPromise.then(() => void 0, () => void 0);\n\t\treturn newPromise;\n\t}\n};\nvar PregelLoop = class PregelLoop {\n\tinput;\n\toutput;\n\tconfig;\n\tcheckpointer;\n\tcheckpointerGetNextVersion;\n\tchannels;\n\tcheckpoint;\n\tcheckpointIdSaved;\n\tcheckpointConfig;\n\tcheckpointMetadata;\n\tcheckpointNamespace;\n\tcheckpointPendingWrites = [];\n\tcheckpointPreviousVersions;\n\tstep;\n\tstop;\n\tdurability;\n\toutputKeys;\n\tstreamKeys;\n\tnodes;\n\tskipDoneTasks;\n\tprevCheckpointConfig;\n\tupdatedChannels;\n\tstatus = \"pending\";\n\ttasks = {};\n\tstream;\n\tcheckpointerPromises = [];\n\tisNested;\n\t_checkpointerChainedPromise = Promise.resolve();\n\tstore;\n\tcache;\n\tmanager;\n\tinterruptAfter;\n\tinterruptBefore;\n\ttoInterrupt = [];\n\tdebug = false;\n\ttriggerToNodes;\n\tget isResuming() {\n\t\tlet hasChannelVersions = false;\n\t\tif (_constants_js__WEBPACK_IMPORTED_MODULE_2__.START in this.checkpoint.channel_versions) hasChannelVersions = true;\n\t\telse for (const chan in this.checkpoint.channel_versions) if (Object.prototype.hasOwnProperty.call(this.checkpoint.channel_versions, chan)) {\n\t\t\thasChannelVersions = true;\n\t\t\tbreak;\n\t\t}\n\t\tconst configIsResuming = this.config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_RESUMING] !== void 0 && this.config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_RESUMING];\n\t\tconst inputIsNullOrUndefined = this.input === null || this.input === void 0;\n\t\tconst inputIsCommandResuming = (0,_constants_js__WEBPACK_IMPORTED_MODULE_2__.isCommand)(this.input) && this.input.resume != null;\n\t\tconst inputIsResuming = this.input === INPUT_RESUMING;\n\t\tconst runIdMatchesPrevious = !this.isNested && this.config.metadata?.run_id !== void 0 && this.checkpointMetadata?.run_id !== void 0 && this.config.metadata.run_id === this.checkpointMetadata?.run_id;\n\t\treturn hasChannelVersions && (configIsResuming || inputIsNullOrUndefined || inputIsCommandResuming || inputIsResuming || runIdMatchesPrevious);\n\t}\n\tconstructor(params) {\n\t\tthis.input = params.input;\n\t\tthis.checkpointer = params.checkpointer;\n\t\tif (this.checkpointer !== void 0) this.checkpointerGetNextVersion = this.checkpointer.getNextVersion.bind(this.checkpointer);\n\t\telse this.checkpointerGetNextVersion = _algo_js__WEBPACK_IMPORTED_MODULE_7__.increment;\n\t\tthis.checkpoint = params.checkpoint;\n\t\tthis.checkpointMetadata = params.checkpointMetadata;\n\t\tthis.checkpointPreviousVersions = params.checkpointPreviousVersions;\n\t\tthis.channels = params.channels;\n\t\tthis.checkpointPendingWrites = params.checkpointPendingWrites;\n\t\tthis.step = params.step;\n\t\tthis.stop = params.stop;\n\t\tthis.config = params.config;\n\t\tthis.checkpointConfig = params.checkpointConfig;\n\t\tthis.isNested = params.isNested;\n\t\tthis.manager = params.manager;\n\t\tthis.outputKeys = params.outputKeys;\n\t\tthis.streamKeys = params.streamKeys;\n\t\tthis.nodes = params.nodes;\n\t\tthis.skipDoneTasks = params.skipDoneTasks;\n\t\tthis.store = params.store;\n\t\tthis.cache = params.cache ? new AsyncBatchedCache(params.cache) : void 0;\n\t\tthis.stream = params.stream;\n\t\tthis.checkpointNamespace = params.checkpointNamespace;\n\t\tthis.prevCheckpointConfig = params.prevCheckpointConfig;\n\t\tthis.interruptAfter = params.interruptAfter;\n\t\tthis.interruptBefore = params.interruptBefore;\n\t\tthis.durability = params.durability;\n\t\tthis.debug = params.debug;\n\t\tthis.triggerToNodes = params.triggerToNodes;\n\t}\n\tstatic async initialize(params) {\n\t\tlet { config, stream } = params;\n\t\tif (stream !== void 0 && config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_STREAM] !== void 0) stream = createDuplexStream(stream, config.configurable[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_STREAM]);\n\t\tconst skipDoneTasks = config.configurable ? !(\"checkpoint_id\" in config.configurable) : true;\n\t\tconst scratchpad = config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_SCRATCHPAD];\n\t\tif (config.configurable && scratchpad) {\n\t\t\tif (scratchpad.subgraphCounter > 0) config = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_6__.patchConfigurable)(config, { [_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINT_NS]: [config.configurable[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINT_NS], scratchpad.subgraphCounter.toString()].join(_constants_js__WEBPACK_IMPORTED_MODULE_2__.CHECKPOINT_NAMESPACE_SEPARATOR) });\n\t\t\tscratchpad.subgraphCounter += 1;\n\t\t}\n\t\tconst isNested = _constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_READ in (config.configurable ?? {});\n\t\tif (!isNested && config.configurable?.checkpoint_ns !== void 0 && config.configurable?.checkpoint_ns !== \"\") config = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_6__.patchConfigurable)(config, {\n\t\t\tcheckpoint_ns: \"\",\n\t\t\tcheckpoint_id: void 0\n\t\t});\n\t\tlet checkpointConfig = config;\n\t\tif (config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINT_MAP] !== void 0 && config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINT_MAP]?.[config.configurable?.checkpoint_ns]) checkpointConfig = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_6__.patchConfigurable)(config, { checkpoint_id: config.configurable[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINT_MAP][config.configurable?.checkpoint_ns] });\n\t\tconst checkpointNamespace = config.configurable?.checkpoint_ns?.split(_constants_js__WEBPACK_IMPORTED_MODULE_2__.CHECKPOINT_NAMESPACE_SEPARATOR) ?? [];\n\t\tconst saved = await params.checkpointer?.getTuple(checkpointConfig) ?? {\n\t\t\tconfig,\n\t\t\tcheckpoint: (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_10__.emptyCheckpoint)(),\n\t\t\tmetadata: {\n\t\t\t\tsource: \"input\",\n\t\t\t\tstep: -2,\n\t\t\t\tparents: {}\n\t\t\t},\n\t\t\tpendingWrites: []\n\t\t};\n\t\tcheckpointConfig = {\n\t\t\t...config,\n\t\t\t...saved.config,\n\t\t\tconfigurable: {\n\t\t\t\tcheckpoint_ns: \"\",\n\t\t\t\t...config.configurable,\n\t\t\t\t...saved.config.configurable\n\t\t\t}\n\t\t};\n\t\tconst prevCheckpointConfig = saved.parentConfig;\n\t\tconst checkpoint = (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_10__.copyCheckpoint)(saved.checkpoint);\n\t\tconst checkpointMetadata = { ...saved.metadata };\n\t\tconst checkpointPendingWrites = saved.pendingWrites ?? [];\n\t\tconst channels = (0,_channels_base_js__WEBPACK_IMPORTED_MODULE_1__.emptyChannels)(params.channelSpecs, checkpoint);\n\t\tconst step = (checkpointMetadata.step ?? 0) + 1;\n\t\tconst stop = step + (config.recursionLimit ?? DEFAULT_LOOP_LIMIT) + 1;\n\t\tconst checkpointPreviousVersions = { ...checkpoint.channel_versions };\n\t\tconst store = params.store ? new _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_10__.AsyncBatchedStore(params.store) : void 0;\n\t\tif (store) await store.start();\n\t\treturn new PregelLoop({\n\t\t\tinput: params.input,\n\t\t\tconfig,\n\t\t\tcheckpointer: params.checkpointer,\n\t\t\tcheckpoint,\n\t\t\tcheckpointMetadata,\n\t\t\tcheckpointConfig,\n\t\t\tprevCheckpointConfig,\n\t\t\tcheckpointNamespace,\n\t\t\tchannels,\n\t\t\tisNested,\n\t\t\tmanager: params.manager,\n\t\t\tskipDoneTasks,\n\t\t\tstep,\n\t\t\tstop,\n\t\t\tcheckpointPreviousVersions,\n\t\t\tcheckpointPendingWrites,\n\t\t\toutputKeys: params.outputKeys ?? [],\n\t\t\tstreamKeys: params.streamKeys ?? [],\n\t\t\tnodes: params.nodes,\n\t\t\tstream,\n\t\t\tstore,\n\t\t\tcache: params.cache,\n\t\t\tinterruptAfter: params.interruptAfter,\n\t\t\tinterruptBefore: params.interruptBefore,\n\t\t\tdurability: params.durability,\n\t\t\tdebug: params.debug,\n\t\t\ttriggerToNodes: params.triggerToNodes\n\t\t});\n\t}\n\t_checkpointerPutAfterPrevious(input) {\n\t\tthis._checkpointerChainedPromise = this._checkpointerChainedPromise.then(() => {\n\t\t\treturn this.checkpointer?.put(input.config, input.checkpoint, input.metadata, input.newVersions);\n\t\t});\n\t\tthis.checkpointerPromises.push(this._checkpointerChainedPromise);\n\t}\n\t/**\n\t* Put writes for a task, to be read by the next tick.\n\t* @param taskId\n\t* @param writes\n\t*/\n\tputWrites(taskId, writes) {\n\t\tlet writesCopy = writes;\n\t\tif (writesCopy.length === 0) return;\n\t\tif (writesCopy.every(([key]) => key in _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_10__.WRITES_IDX_MAP)) writesCopy = Array.from(new Map(writesCopy.map((w) => [w[0], w])).values());\n\t\tthis.checkpointPendingWrites = this.checkpointPendingWrites.filter((w) => w[0] !== taskId);\n\t\tfor (const [c, v] of writesCopy) this.checkpointPendingWrites.push([\n\t\t\ttaskId,\n\t\t\tc,\n\t\t\tv\n\t\t]);\n\t\tconst config = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_6__.patchConfigurable)(this.checkpointConfig, {\n\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINT_NS]: this.config.configurable?.checkpoint_ns ?? \"\",\n\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINT_ID]: this.checkpoint.id\n\t\t});\n\t\tif (this.durability !== \"exit\" && this.checkpointer != null) this.checkpointerPromises.push(this.checkpointer.putWrites(config, writesCopy, taskId));\n\t\tif (this.tasks) this._outputWrites(taskId, writesCopy);\n\t\tif (!writes.length || !this.cache || !this.tasks) return;\n\t\tconst task = this.tasks[taskId];\n\t\tif (task == null || task.cache_key == null) return;\n\t\tif (writes[0][0] === _constants_js__WEBPACK_IMPORTED_MODULE_2__.ERROR || writes[0][0] === _constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT) return;\n\t\tthis.cache.set([{\n\t\t\tkey: [task.cache_key.ns, task.cache_key.key],\n\t\t\tvalue: task.writes,\n\t\t\tttl: task.cache_key.ttl\n\t\t}]);\n\t}\n\t_outputWrites(taskId, writes, cached = false) {\n\t\tconst task = this.tasks[taskId];\n\t\tif (task !== void 0) {\n\t\t\tif (task.config !== void 0 && (task.config.tags ?? []).includes(_constants_js__WEBPACK_IMPORTED_MODULE_2__.TAG_HIDDEN)) return;\n\t\t\tif (writes.length > 0) {\n\t\t\t\tif (writes[0][0] === _constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT) {\n\t\t\t\t\tif (task.path?.[0] === _constants_js__WEBPACK_IMPORTED_MODULE_2__.PUSH && task.path?.at(-1) === true) return;\n\t\t\t\t\tconst interruptWrites = writes.filter((w) => w[0] === _constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT).flatMap((w) => w[1]);\n\t\t\t\t\tthis._emit([[\"updates\", { [_constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT]: interruptWrites }], [\"values\", { [_constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT]: interruptWrites }]]);\n\t\t\t\t} else if (writes[0][0] !== _constants_js__WEBPACK_IMPORTED_MODULE_2__.ERROR) this._emit((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.gatherIteratorSync)((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.prefixGenerator)((0,_io_js__WEBPACK_IMPORTED_MODULE_5__.mapOutputUpdates)(this.outputKeys, [[task, writes]], cached), \"updates\")));\n\t\t\t}\n\t\t\tif (!cached) this._emit((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.gatherIteratorSync)((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.prefixGenerator)((0,_debug_js__WEBPACK_IMPORTED_MODULE_8__.mapDebugTaskResults)([[task, writes]], this.streamKeys), \"tasks\")));\n\t\t}\n\t}\n\tasync _matchCachedWrites() {\n\t\tif (!this.cache) return [];\n\t\tconst matched = [];\n\t\tconst serializeKey = ([ns, key]) => {\n\t\t\treturn `ns:${ns.join(\",\")}|key:${key}`;\n\t\t};\n\t\tconst keys = [];\n\t\tconst keyMap = {};\n\t\tfor (const task of Object.values(this.tasks)) if (task.cache_key != null && !task.writes.length) {\n\t\t\tkeys.push([task.cache_key.ns, task.cache_key.key]);\n\t\t\tkeyMap[serializeKey([task.cache_key.ns, task.cache_key.key])] = task;\n\t\t}\n\t\tif (keys.length === 0) return [];\n\t\tconst cache = await this.cache.get(keys);\n\t\tfor (const { key, value } of cache) {\n\t\t\tconst task = keyMap[serializeKey(key)];\n\t\t\tif (task != null) {\n\t\t\t\ttask.writes.push(...value);\n\t\t\t\tmatched.push({\n\t\t\t\t\ttask,\n\t\t\t\t\tresult: value\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn matched;\n\t}\n\t/**\n\t* Execute a single iteration of the Pregel loop.\n\t* Returns true if more iterations are needed.\n\t* @param params\n\t*/\n\tasync tick(params) {\n\t\tif (this.store && !this.store.isRunning) await this.store?.start();\n\t\tconst { inputKeys = [] } = params;\n\t\tif (this.status !== \"pending\") throw new Error(`Cannot tick when status is no longer \"pending\". Current status: \"${this.status}\"`);\n\t\tif (![INPUT_DONE, INPUT_RESUMING].includes(this.input)) await this._first(inputKeys);\n\t\telse if (this.toInterrupt.length > 0) {\n\t\t\tthis.status = \"interrupt_before\";\n\t\t\tthrow new _errors_js__WEBPACK_IMPORTED_MODULE_0__.GraphInterrupt();\n\t\t} else if (Object.values(this.tasks).every((task) => task.writes.length > 0)) {\n\t\t\tconst writes = Object.values(this.tasks).flatMap((t) => t.writes);\n\t\t\tthis.updatedChannels = (0,_algo_js__WEBPACK_IMPORTED_MODULE_7__._applyWrites)(this.checkpoint, this.channels, Object.values(this.tasks), this.checkpointerGetNextVersion, this.triggerToNodes);\n\t\t\tconst valuesOutput = await (0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.gatherIterator)((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.prefixGenerator)((0,_io_js__WEBPACK_IMPORTED_MODULE_5__.mapOutputValues)(this.outputKeys, writes, this.channels), \"values\"));\n\t\t\tthis._emit(valuesOutput);\n\t\t\tthis.checkpointPendingWrites = [];\n\t\t\tawait this._putCheckpoint({ source: \"loop\" });\n\t\t\tif ((0,_algo_js__WEBPACK_IMPORTED_MODULE_7__.shouldInterrupt)(this.checkpoint, this.interruptAfter, Object.values(this.tasks))) {\n\t\t\t\tthis.status = \"interrupt_after\";\n\t\t\t\tthrow new _errors_js__WEBPACK_IMPORTED_MODULE_0__.GraphInterrupt();\n\t\t\t}\n\t\t\tif (this.config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_RESUMING] !== void 0) delete this.config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_RESUMING];\n\t\t} else return false;\n\t\tif (this.step > this.stop) {\n\t\t\tthis.status = \"out_of_steps\";\n\t\t\treturn false;\n\t\t}\n\t\tthis.tasks = (0,_algo_js__WEBPACK_IMPORTED_MODULE_7__._prepareNextTasks)(this.checkpoint, this.checkpointPendingWrites, this.nodes, this.channels, this.config, true, {\n\t\t\tstep: this.step,\n\t\t\tcheckpointer: this.checkpointer,\n\t\t\tisResuming: this.isResuming,\n\t\t\tmanager: this.manager,\n\t\t\tstore: this.store,\n\t\t\tstream: this.stream,\n\t\t\ttriggerToNodes: this.triggerToNodes,\n\t\t\tupdatedChannels: this.updatedChannels\n\t\t});\n\t\tif (this.checkpointer) this._emit(await (0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.gatherIterator)((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.prefixGenerator)((0,_debug_js__WEBPACK_IMPORTED_MODULE_8__.mapDebugCheckpoint)(this.checkpointConfig, this.channels, this.streamKeys, this.checkpointMetadata, Object.values(this.tasks), this.checkpointPendingWrites, this.prevCheckpointConfig, this.outputKeys), \"checkpoints\")));\n\t\tif (Object.values(this.tasks).length === 0) {\n\t\t\tthis.status = \"done\";\n\t\t\treturn false;\n\t\t}\n\t\tif (this.skipDoneTasks && this.checkpointPendingWrites.length > 0) {\n\t\t\tfor (const [tid, k, v] of this.checkpointPendingWrites) {\n\t\t\t\tif (k === _constants_js__WEBPACK_IMPORTED_MODULE_2__.ERROR || k === _constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT || k === _constants_js__WEBPACK_IMPORTED_MODULE_2__.RESUME) continue;\n\t\t\t\tconst task = Object.values(this.tasks).find((t) => t.id === tid);\n\t\t\t\tif (task) task.writes.push([k, v]);\n\t\t\t}\n\t\t\tfor (const task of Object.values(this.tasks)) if (task.writes.length > 0) this._outputWrites(task.id, task.writes, true);\n\t\t}\n\t\tif (Object.values(this.tasks).every((task) => task.writes.length > 0)) return this.tick({ inputKeys });\n\t\tif ((0,_algo_js__WEBPACK_IMPORTED_MODULE_7__.shouldInterrupt)(this.checkpoint, this.interruptBefore, Object.values(this.tasks))) {\n\t\t\tthis.status = \"interrupt_before\";\n\t\t\tthrow new _errors_js__WEBPACK_IMPORTED_MODULE_0__.GraphInterrupt();\n\t\t}\n\t\tconst debugOutput = await (0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.gatherIterator)((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.prefixGenerator)((0,_debug_js__WEBPACK_IMPORTED_MODULE_8__.mapDebugTasks)(Object.values(this.tasks)), \"tasks\"));\n\t\tthis._emit(debugOutput);\n\t\treturn true;\n\t}\n\tasync finishAndHandleError(error) {\n\t\tif (this.durability === \"exit\" && (!this.isNested || typeof error !== \"undefined\" || this.checkpointNamespace.every((part) => !part.includes(_constants_js__WEBPACK_IMPORTED_MODULE_2__.CHECKPOINT_NAMESPACE_END)))) {\n\t\t\tthis._putCheckpoint(this.checkpointMetadata);\n\t\t\tthis._flushPendingWrites();\n\t\t}\n\t\tconst suppress = this._suppressInterrupt(error);\n\t\tif (suppress || error === void 0) this.output = (0,_io_js__WEBPACK_IMPORTED_MODULE_5__.readChannels)(this.channels, this.outputKeys);\n\t\tif (suppress) {\n\t\t\tif (this.tasks !== void 0 && this.checkpointPendingWrites.length > 0 && Object.values(this.tasks).some((task) => task.writes.length > 0)) {\n\t\t\t\tthis.updatedChannels = (0,_algo_js__WEBPACK_IMPORTED_MODULE_7__._applyWrites)(this.checkpoint, this.channels, Object.values(this.tasks), this.checkpointerGetNextVersion, this.triggerToNodes);\n\t\t\t\tthis._emit((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.gatherIteratorSync)((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.prefixGenerator)((0,_io_js__WEBPACK_IMPORTED_MODULE_5__.mapOutputValues)(this.outputKeys, Object.values(this.tasks).flatMap((t) => t.writes), this.channels), \"values\")));\n\t\t\t}\n\t\t\tif ((0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.isGraphInterrupt)(error) && !error.interrupts.length) this._emit([[\"updates\", { [_constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT]: [] }], [\"values\", { [_constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT]: [] }]]);\n\t\t}\n\t\treturn suppress;\n\t}\n\tasync acceptPush(task, writeIdx, call) {\n\t\tif (this.interruptAfter?.length > 0 && (0,_algo_js__WEBPACK_IMPORTED_MODULE_7__.shouldInterrupt)(this.checkpoint, this.interruptAfter, [task])) {\n\t\t\tthis.toInterrupt.push(task);\n\t\t\treturn;\n\t\t}\n\t\tconst pushed = (0,_algo_js__WEBPACK_IMPORTED_MODULE_7__._prepareSingleTask)([\n\t\t\t_constants_js__WEBPACK_IMPORTED_MODULE_2__.PUSH,\n\t\t\ttask.path ?? [],\n\t\t\twriteIdx,\n\t\t\ttask.id,\n\t\t\tcall\n\t\t], this.checkpoint, this.checkpointPendingWrites, this.nodes, this.channels, task.config ?? {}, true, {\n\t\t\tstep: this.step,\n\t\t\tcheckpointer: this.checkpointer,\n\t\t\tmanager: this.manager,\n\t\t\tstore: this.store,\n\t\t\tstream: this.stream\n\t\t});\n\t\tif (!pushed) return;\n\t\tif (this.interruptBefore?.length > 0 && (0,_algo_js__WEBPACK_IMPORTED_MODULE_7__.shouldInterrupt)(this.checkpoint, this.interruptBefore, [pushed])) {\n\t\t\tthis.toInterrupt.push(pushed);\n\t\t\treturn;\n\t\t}\n\t\tthis._emit((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.gatherIteratorSync)((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.prefixGenerator)((0,_debug_js__WEBPACK_IMPORTED_MODULE_8__.mapDebugTasks)([pushed]), \"tasks\")));\n\t\tif (this.debug) (0,_debug_js__WEBPACK_IMPORTED_MODULE_8__.printStepTasks)(this.step, [pushed]);\n\t\tthis.tasks[pushed.id] = pushed;\n\t\tif (this.skipDoneTasks) this._matchWrites({ [pushed.id]: pushed });\n\t\tconst tasks = await this._matchCachedWrites();\n\t\tfor (const { task: task$1 } of tasks) this._outputWrites(task$1.id, task$1.writes, true);\n\t\treturn pushed;\n\t}\n\t_suppressInterrupt(e) {\n\t\treturn (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.isGraphInterrupt)(e) && !this.isNested;\n\t}\n\tasync _first(inputKeys) {\n\t\tconst { configurable } = this.config;\n\t\tconst scratchpad = configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_SCRATCHPAD];\n\t\tif (scratchpad && scratchpad.nullResume !== void 0) this.putWrites(_constants_js__WEBPACK_IMPORTED_MODULE_2__.NULL_TASK_ID, [[_constants_js__WEBPACK_IMPORTED_MODULE_2__.RESUME, scratchpad.nullResume]]);\n\t\tif ((0,_constants_js__WEBPACK_IMPORTED_MODULE_2__.isCommand)(this.input)) {\n\t\t\tconst hasResume = this.input.resume != null;\n\t\t\tif (this.input.resume != null && typeof this.input.resume === \"object\" && Object.keys(this.input.resume).every(_hash_js__WEBPACK_IMPORTED_MODULE_4__.isXXH3)) {\n\t\t\t\tthis.config.configurable ??= {};\n\t\t\t\tthis.config.configurable[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_RESUME_MAP] = this.input.resume;\n\t\t\t}\n\t\t\tif (hasResume && this.checkpointer == null) throw new Error(\"Cannot use Command(resume=...) without checkpointer\");\n\t\t\tconst writes = {};\n\t\t\tfor (const [tid, key, value] of (0,_io_js__WEBPACK_IMPORTED_MODULE_5__.mapCommand)(this.input, this.checkpointPendingWrites)) {\n\t\t\t\twrites[tid] ??= [];\n\t\t\t\twrites[tid].push([key, value]);\n\t\t\t}\n\t\t\tif (Object.keys(writes).length === 0) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyInputError(\"Received empty Command input\");\n\t\t\tfor (const [tid, ws] of Object.entries(writes)) this.putWrites(tid, ws);\n\t\t}\n\t\tconst nullWrites = (this.checkpointPendingWrites ?? []).filter((w) => w[0] === _constants_js__WEBPACK_IMPORTED_MODULE_2__.NULL_TASK_ID).map((w) => w.slice(1));\n\t\tif (nullWrites.length > 0) (0,_algo_js__WEBPACK_IMPORTED_MODULE_7__._applyWrites)(this.checkpoint, this.channels, [{\n\t\t\tname: _constants_js__WEBPACK_IMPORTED_MODULE_2__.INPUT,\n\t\t\twrites: nullWrites,\n\t\t\ttriggers: []\n\t\t}], this.checkpointerGetNextVersion, this.triggerToNodes);\n\t\tconst isCommandUpdateOrGoto = (0,_constants_js__WEBPACK_IMPORTED_MODULE_2__.isCommand)(this.input) && nullWrites.length > 0;\n\t\tif (this.isResuming || isCommandUpdateOrGoto) {\n\t\t\tfor (const channelName in this.channels) {\n\t\t\t\tif (!Object.prototype.hasOwnProperty.call(this.channels, channelName)) continue;\n\t\t\t\tif (this.checkpoint.channel_versions[channelName] !== void 0) {\n\t\t\t\t\tconst version = this.checkpoint.channel_versions[channelName];\n\t\t\t\t\tthis.checkpoint.versions_seen[_constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT] = {\n\t\t\t\t\t\t...this.checkpoint.versions_seen[_constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT],\n\t\t\t\t\t\t[channelName]: version\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst valuesOutput = await (0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.gatherIterator)((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.prefixGenerator)((0,_io_js__WEBPACK_IMPORTED_MODULE_5__.mapOutputValues)(this.outputKeys, true, this.channels), \"values\"));\n\t\t\tthis._emit(valuesOutput);\n\t\t}\n\t\tif (this.isResuming) this.input = INPUT_RESUMING;\n\t\telse if (isCommandUpdateOrGoto) {\n\t\t\tawait this._putCheckpoint({ source: \"input\" });\n\t\t\tthis.input = INPUT_DONE;\n\t\t} else {\n\t\t\tconst inputWrites = await (0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.gatherIterator)((0,_io_js__WEBPACK_IMPORTED_MODULE_5__.mapInput)(inputKeys, this.input));\n\t\t\tif (inputWrites.length > 0) {\n\t\t\t\tconst discardTasks = (0,_algo_js__WEBPACK_IMPORTED_MODULE_7__._prepareNextTasks)(this.checkpoint, this.checkpointPendingWrites, this.nodes, this.channels, this.config, true, { step: this.step });\n\t\t\t\tthis.updatedChannels = (0,_algo_js__WEBPACK_IMPORTED_MODULE_7__._applyWrites)(this.checkpoint, this.channels, Object.values(discardTasks).concat([{\n\t\t\t\t\tname: _constants_js__WEBPACK_IMPORTED_MODULE_2__.INPUT,\n\t\t\t\t\twrites: inputWrites,\n\t\t\t\t\ttriggers: []\n\t\t\t\t}]), this.checkpointerGetNextVersion, this.triggerToNodes);\n\t\t\t\tawait this._putCheckpoint({ source: \"input\" });\n\t\t\t\tthis.input = INPUT_DONE;\n\t\t\t} else if (!(_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_RESUMING in (this.config.configurable ?? {}))) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyInputError(`Received no input writes for ${JSON.stringify(inputKeys, null, 2)}`);\n\t\t\telse this.input = INPUT_DONE;\n\t\t}\n\t\tif (!this.isNested) this.config = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_6__.patchConfigurable)(this.config, { [_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_RESUMING]: this.isResuming });\n\t}\n\t_emit(values) {\n\t\tfor (const [mode, payload] of values) {\n\t\t\tif (this.stream.modes.has(mode)) this.stream.push([\n\t\t\t\tthis.checkpointNamespace,\n\t\t\t\tmode,\n\t\t\t\tpayload\n\t\t\t]);\n\t\t\tif ((mode === \"checkpoints\" || mode === \"tasks\") && this.stream.modes.has(\"debug\")) {\n\t\t\t\tconst step = mode === \"checkpoints\" ? this.step - 1 : this.step;\n\t\t\t\tconst timestamp = (/* @__PURE__ */ new Date()).toISOString();\n\t\t\t\tconst type = (() => {\n\t\t\t\t\tif (mode === \"checkpoints\") return \"checkpoint\";\n\t\t\t\t\telse if (typeof payload === \"object\" && payload != null && \"result\" in payload) return \"task_result\";\n\t\t\t\t\telse return \"task\";\n\t\t\t\t})();\n\t\t\t\tthis.stream.push([\n\t\t\t\t\tthis.checkpointNamespace,\n\t\t\t\t\t\"debug\",\n\t\t\t\t\t{\n\t\t\t\t\t\tstep,\n\t\t\t\t\t\ttype,\n\t\t\t\t\t\ttimestamp,\n\t\t\t\t\t\tpayload\n\t\t\t\t\t}\n\t\t\t\t]);\n\t\t\t}\n\t\t}\n\t}\n\t_putCheckpoint(inputMetadata) {\n\t\tconst exiting = this.checkpointMetadata === inputMetadata;\n\t\tconst doCheckpoint = this.checkpointer != null && (this.durability !== \"exit\" || exiting);\n\t\tconst storeCheckpoint = (checkpoint) => {\n\t\t\tthis.prevCheckpointConfig = this.checkpointConfig?.configurable?.checkpoint_id ? this.checkpointConfig : void 0;\n\t\t\tthis.checkpointConfig = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_6__.patchConfigurable)(this.checkpointConfig, { [_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINT_NS]: this.config.configurable?.checkpoint_ns ?? \"\" });\n\t\t\tconst channelVersions = { ...this.checkpoint.channel_versions };\n\t\t\tconst newVersions = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_6__.getNewChannelVersions)(this.checkpointPreviousVersions, channelVersions);\n\t\t\tthis.checkpointPreviousVersions = channelVersions;\n\t\t\tthis._checkpointerPutAfterPrevious({\n\t\t\t\tconfig: { ...this.checkpointConfig },\n\t\t\t\tcheckpoint: (0,_langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_10__.copyCheckpoint)(checkpoint),\n\t\t\t\tmetadata: { ...this.checkpointMetadata },\n\t\t\t\tnewVersions\n\t\t\t});\n\t\t\tthis.checkpointConfig = {\n\t\t\t\t...this.checkpointConfig,\n\t\t\t\tconfigurable: {\n\t\t\t\t\t...this.checkpointConfig.configurable,\n\t\t\t\t\tcheckpoint_id: this.checkpoint.id\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t\tif (!exiting) this.checkpointMetadata = {\n\t\t\t...inputMetadata,\n\t\t\tstep: this.step,\n\t\t\tparents: this.config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINT_MAP] ?? {}\n\t\t};\n\t\tthis.checkpoint = (0,_channels_base_js__WEBPACK_IMPORTED_MODULE_1__.createCheckpoint)(this.checkpoint, doCheckpoint ? this.channels : void 0, this.step, exiting ? { id: this.checkpoint.id } : void 0);\n\t\tif (doCheckpoint) storeCheckpoint(this.checkpoint);\n\t\tif (!exiting) this.step += 1;\n\t}\n\t_flushPendingWrites() {\n\t\tif (this.checkpointer == null) return;\n\t\tif (this.checkpointPendingWrites.length === 0) return;\n\t\tconst config = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_6__.patchConfigurable)(this.checkpointConfig, {\n\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINT_NS]: this.config.configurable?.checkpoint_ns ?? \"\",\n\t\t\t[_constants_js__WEBPACK_IMPORTED_MODULE_2__.CONFIG_KEY_CHECKPOINT_ID]: this.checkpoint.id\n\t\t});\n\t\tconst byTask = {};\n\t\tfor (const [tid, key, value] of this.checkpointPendingWrites) {\n\t\t\tbyTask[tid] ??= [];\n\t\t\tbyTask[tid].push([key, value]);\n\t\t}\n\t\tfor (const [tid, ws] of Object.entries(byTask)) this.checkpointerPromises.push(this.checkpointer.putWrites(config, ws, tid));\n\t}\n\t_matchWrites(tasks) {\n\t\tfor (const [tid, k, v] of this.checkpointPendingWrites) {\n\t\t\tif (k === _constants_js__WEBPACK_IMPORTED_MODULE_2__.ERROR || k === _constants_js__WEBPACK_IMPORTED_MODULE_2__.INTERRUPT || k === _constants_js__WEBPACK_IMPORTED_MODULE_2__.RESUME) continue;\n\t\t\tconst task = Object.values(tasks).find((t) => t.id === tid);\n\t\t\tif (task) task.writes.push([k, v]);\n\t\t}\n\t\tfor (const task of Object.values(tasks)) if (task.writes.length > 0) this._outputWrites(task.id, task.writes, true);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=loop.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvbG9vcC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBaUY7QUFDWDtBQUM4UjtBQUNsUjtBQUM5QztBQUM0RDtBQUNwQjtBQUNnQztBQUNSO0FBQ3ZDO0FBQ21FOztBQUVoSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxzRUFBOEI7QUFDMUM7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEVBQUU7QUFDRjtBQUNBLHNDQUFzQyx1RUFBUztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLGdEQUFLO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsOERBQW1CLDJDQUEyQyw4REFBbUI7QUFDdkk7QUFDQSxpQ0FBaUMsd0RBQVM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QywrQ0FBUztBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlCQUFpQjtBQUN6QixpREFBaUQsNERBQWlCLHNFQUFzRSw0REFBaUI7QUFDeko7QUFDQSwyQ0FBMkMsZ0VBQXFCO0FBQ2hFO0FBQ0EsZ0RBQWdELGtFQUFpQixXQUFXLENBQUMsbUVBQXdCLHdCQUF3QixtRUFBd0IsK0NBQStDLHlFQUE4QixHQUFHO0FBQ3JPO0FBQ0E7QUFDQSxtQkFBbUIsMERBQWUsOEJBQThCO0FBQ2hFLHdIQUF3SCxrRUFBaUI7QUFDekk7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLDRCQUE0QixvRUFBeUIsc0NBQXNDLG9FQUF5Qiw0REFBNEQsa0VBQWlCLFdBQVcsbUNBQW1DLG9FQUF5Qix1Q0FBdUM7QUFDL1Msd0VBQXdFLHlFQUE4QjtBQUN0RztBQUNBO0FBQ0EsZUFBZSxpRkFBZTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsZ0ZBQWM7QUFDbkMsK0JBQStCO0FBQy9CO0FBQ0EsbUJBQW1CLGdFQUFhO0FBQ2hDO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkMsbUNBQW1DLCtFQUFpQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLDRFQUFjO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixrRUFBaUI7QUFDbEMsSUFBSSxtRUFBd0I7QUFDNUIsSUFBSSxtRUFBd0I7QUFDNUIsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsZ0RBQUsscUJBQXFCLG9EQUFTO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FLHFEQUFVO0FBQzdFO0FBQ0EseUJBQXlCLG9EQUFTO0FBQ2xDLDRCQUE0QiwrQ0FBSTtBQUNoQywyREFBMkQsb0RBQVM7QUFDcEUsK0JBQStCLENBQUMsb0RBQVMsb0JBQW9CLGdCQUFnQixDQUFDLG9EQUFTLG9CQUFvQjtBQUMzRyxNQUFNLDBCQUEwQixnREFBSyxhQUFhLDZEQUFrQixDQUFDLDBEQUFlLENBQUMsd0RBQWdCO0FBQ3JHO0FBQ0EsMkJBQTJCLDZEQUFrQixDQUFDLDBEQUFlLENBQUMsOERBQW1CO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixhQUFhLE9BQU8sSUFBSTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGFBQWE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLGlCQUFpQjtBQUMzQixxSEFBcUgsWUFBWTtBQUNqSTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHNEQUFjO0FBQzNCLElBQUk7QUFDSjtBQUNBLDBCQUEwQixzREFBWTtBQUN0Qyw4QkFBOEIseURBQWMsQ0FBQywwREFBZSxDQUFDLHVEQUFlO0FBQzVFO0FBQ0E7QUFDQSwrQkFBK0IsZ0JBQWdCO0FBQy9DLE9BQU8seURBQWU7QUFDdEI7QUFDQSxjQUFjLHNEQUFjO0FBQzVCO0FBQ0Esa0NBQWtDLDhEQUFtQixnREFBZ0QsOERBQW1CO0FBQ3hILElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMkRBQWlCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsMENBQTBDLHlEQUFjLENBQUMsMERBQWUsQ0FBQyw2REFBa0I7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxnREFBSyxVQUFVLG9EQUFTLFVBQVUsaURBQU07QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRGQUE0RixXQUFXO0FBQ3ZHLE1BQU0seURBQWU7QUFDckI7QUFDQSxhQUFhLHNEQUFjO0FBQzNCO0FBQ0EsNEJBQTRCLHlEQUFjLENBQUMsMERBQWUsQ0FBQyx3REFBYTtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtJQUErSSxtRUFBd0I7QUFDdks7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Qsb0RBQVk7QUFDOUQ7QUFDQTtBQUNBLDJCQUEyQixzREFBWTtBQUN2QyxlQUFlLDZEQUFrQixDQUFDLDBEQUFlLENBQUMsdURBQWU7QUFDakU7QUFDQSxPQUFPLDREQUFnQiwrREFBK0QsQ0FBQyxvREFBUyxPQUFPLGdCQUFnQixDQUFDLG9EQUFTLE9BQU87QUFDeEk7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMseURBQWU7QUFDeEQ7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDREQUFrQjtBQUNuQyxHQUFHLCtDQUFJO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnR0FBZ0c7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLDBDQUEwQyx5REFBZTtBQUN6RDtBQUNBO0FBQ0E7QUFDQSxhQUFhLDZEQUFrQixDQUFDLDBEQUFlLENBQUMsd0RBQWE7QUFDN0Qsa0JBQWtCLHlEQUFjO0FBQ2hDO0FBQ0EsOENBQThDLHFCQUFxQjtBQUNuRTtBQUNBLGVBQWUsZUFBZTtBQUM5QjtBQUNBO0FBQ0E7QUFDQSxTQUFTLDREQUFnQjtBQUN6QjtBQUNBO0FBQ0EsVUFBVSxlQUFlO0FBQ3pCLG9DQUFvQyxnRUFBcUI7QUFDekQscUVBQXFFLHVEQUFZLElBQUksaURBQU07QUFDM0YsTUFBTSx3REFBUztBQUNmO0FBQ0Esa0hBQWtILDRDQUFNO0FBQ3hIO0FBQ0EsNkJBQTZCLGdFQUFxQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsa0RBQVU7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELHVEQUFlO0FBQ2xFO0FBQ0E7QUFDQSxpRkFBaUYsdURBQVk7QUFDN0YsNkJBQTZCLHNEQUFZO0FBQ3pDLFNBQVMsZ0RBQUs7QUFDZDtBQUNBO0FBQ0EsR0FBRztBQUNILGdDQUFnQyx3REFBUztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLG9EQUFTO0FBQzVDLHVDQUF1QyxvREFBUztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qix5REFBYyxDQUFDLDBEQUFlLENBQUMsdURBQWU7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsaUJBQWlCO0FBQ2hEO0FBQ0EsSUFBSTtBQUNKLDZCQUE2Qix5REFBYyxDQUFDLGdEQUFRO0FBQ3BEO0FBQ0EseUJBQXlCLDJEQUFpQixnR0FBZ0csaUJBQWlCO0FBQzNKLDJCQUEyQixzREFBWTtBQUN2QyxXQUFXLGdEQUFLO0FBQ2hCO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsZ0NBQWdDLGlCQUFpQjtBQUNqRDtBQUNBLEtBQUssV0FBVyw4REFBbUIsbUNBQW1DLGNBQWMsdURBQWUsaUNBQWlDLG1DQUFtQztBQUN2SztBQUNBO0FBQ0Esb0NBQW9DLGtFQUFpQixnQkFBZ0IsQ0FBQyw4REFBbUIsb0JBQW9CO0FBQzdHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsa0VBQWlCLDBCQUEwQixDQUFDLG1FQUF3QixrREFBa0Q7QUFDakosNkJBQTZCO0FBQzdCLHVCQUF1QixzRUFBcUI7QUFDNUM7QUFDQTtBQUNBLGNBQWMsMEJBQTBCO0FBQ3hDLGdCQUFnQixnRkFBYztBQUM5QixnQkFBZ0IsNEJBQTRCO0FBQzVDO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsb0VBQXlCO0FBQ2hFO0FBQ0Esb0JBQW9CLG1FQUFnQixnRkFBZ0YseUJBQXlCO0FBQzdJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixrRUFBaUI7QUFDbEMsSUFBSSxtRUFBd0I7QUFDNUIsSUFBSSxtRUFBd0I7QUFDNUIsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsZ0RBQUssVUFBVSxvREFBUyxVQUFVLGlEQUFNO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNzQjtBQUN0QiIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvcHJlZ2VsL2xvb3AuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRW1wdHlJbnB1dEVycm9yLCBHcmFwaEludGVycnVwdCwgaXNHcmFwaEludGVycnVwdCB9IGZyb20gXCIuLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IGNyZWF0ZUNoZWNrcG9pbnQsIGVtcHR5Q2hhbm5lbHMgfSBmcm9tIFwiLi4vY2hhbm5lbHMvYmFzZS5qc1wiO1xuaW1wb3J0IHsgQ0hFQ0tQT0lOVF9OQU1FU1BBQ0VfRU5ELCBDSEVDS1BPSU5UX05BTUVTUEFDRV9TRVBBUkFUT1IsIENPTkZJR19LRVlfQ0hFQ0tQT0lOVF9JRCwgQ09ORklHX0tFWV9DSEVDS1BPSU5UX01BUCwgQ09ORklHX0tFWV9DSEVDS1BPSU5UX05TLCBDT05GSUdfS0VZX1JFQUQsIENPTkZJR19LRVlfUkVTVU1FX01BUCwgQ09ORklHX0tFWV9SRVNVTUlORywgQ09ORklHX0tFWV9TQ1JBVENIUEFELCBDT05GSUdfS0VZX1NUUkVBTSwgRVJST1IsIElOUFVULCBJTlRFUlJVUFQsIE5VTExfVEFTS19JRCwgUFVTSCwgUkVTVU1FLCBTVEFSVCwgVEFHX0hJRERFTiwgaXNDb21tYW5kIH0gZnJvbSBcIi4uL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgZ2F0aGVySXRlcmF0b3IsIGdhdGhlckl0ZXJhdG9yU3luYywgcHJlZml4R2VuZXJhdG9yIH0gZnJvbSBcIi4uL3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBpc1hYSDMgfSBmcm9tIFwiLi4vaGFzaC5qc1wiO1xuaW1wb3J0IHsgbWFwQ29tbWFuZCwgbWFwSW5wdXQsIG1hcE91dHB1dFVwZGF0ZXMsIG1hcE91dHB1dFZhbHVlcywgcmVhZENoYW5uZWxzIH0gZnJvbSBcIi4vaW8uanNcIjtcbmltcG9ydCB7IGdldE5ld0NoYW5uZWxWZXJzaW9ucywgcGF0Y2hDb25maWd1cmFibGUgfSBmcm9tIFwiLi91dGlscy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgX2FwcGx5V3JpdGVzLCBfcHJlcGFyZU5leHRUYXNrcywgX3ByZXBhcmVTaW5nbGVUYXNrLCBpbmNyZW1lbnQsIHNob3VsZEludGVycnVwdCB9IGZyb20gXCIuL2FsZ28uanNcIjtcbmltcG9ydCB7IG1hcERlYnVnQ2hlY2twb2ludCwgbWFwRGVidWdUYXNrUmVzdWx0cywgbWFwRGVidWdUYXNrcywgcHJpbnRTdGVwVGFza3MgfSBmcm9tIFwiLi9kZWJ1Zy5qc1wiO1xuaW1wb3J0IHsgSXRlcmFibGVSZWFkYWJsZVdyaXRhYmxlU3RyZWFtIH0gZnJvbSBcIi4vc3RyZWFtLmpzXCI7XG5pbXBvcnQgeyBBc3luY0JhdGNoZWRTdG9yZSwgQmFzZUNhY2hlLCBXUklURVNfSURYX01BUCwgY29weUNoZWNrcG9pbnQsIGVtcHR5Q2hlY2twb2ludCB9IGZyb20gXCJAbGFuZ2NoYWluL2xhbmdncmFwaC1jaGVja3BvaW50XCI7XG5cbi8vI3JlZ2lvbiBzcmMvcHJlZ2VsL2xvb3AudHNcbmNvbnN0IElOUFVUX0RPTkUgPSBTeW1ib2wuZm9yKFwiSU5QVVRfRE9ORVwiKTtcbmNvbnN0IElOUFVUX1JFU1VNSU5HID0gU3ltYm9sLmZvcihcIklOUFVUX1JFU1VNSU5HXCIpO1xuY29uc3QgREVGQVVMVF9MT09QX0xJTUlUID0gMjU7XG5mdW5jdGlvbiBjcmVhdGVEdXBsZXhTdHJlYW0oLi4uc3RyZWFtcykge1xuXHRyZXR1cm4gbmV3IEl0ZXJhYmxlUmVhZGFibGVXcml0YWJsZVN0cmVhbSh7XG5cdFx0cGFzc3Rocm91Z2hGbjogKHZhbHVlKSA9PiB7XG5cdFx0XHRmb3IgKGNvbnN0IHN0cmVhbSBvZiBzdHJlYW1zKSBpZiAoc3RyZWFtLm1vZGVzLmhhcyh2YWx1ZVsxXSkpIHN0cmVhbS5wdXNoKHZhbHVlKTtcblx0XHR9LFxuXHRcdG1vZGVzOiBuZXcgU2V0KHN0cmVhbXMuZmxhdE1hcCgocykgPT4gQXJyYXkuZnJvbShzLm1vZGVzKSkpXG5cdH0pO1xufVxudmFyIEFzeW5jQmF0Y2hlZENhY2hlID0gY2xhc3MgZXh0ZW5kcyBCYXNlQ2FjaGUge1xuXHRjYWNoZTtcblx0cXVldWUgPSBQcm9taXNlLnJlc29sdmUoKTtcblx0Y29uc3RydWN0b3IoY2FjaGUpIHtcblx0XHRzdXBlcigpO1xuXHRcdHRoaXMuY2FjaGUgPSBjYWNoZTtcblx0fVxuXHRhc3luYyBnZXQoa2V5cykge1xuXHRcdHJldHVybiB0aGlzLmVucXVldWVPcGVyYXRpb24oXCJnZXRcIiwga2V5cyk7XG5cdH1cblx0YXN5bmMgc2V0KHBhaXJzKSB7XG5cdFx0cmV0dXJuIHRoaXMuZW5xdWV1ZU9wZXJhdGlvbihcInNldFwiLCBwYWlycyk7XG5cdH1cblx0YXN5bmMgY2xlYXIobmFtZXNwYWNlcykge1xuXHRcdHJldHVybiB0aGlzLmVucXVldWVPcGVyYXRpb24oXCJjbGVhclwiLCBuYW1lc3BhY2VzKTtcblx0fVxuXHRhc3luYyBzdG9wKCkge1xuXHRcdGF3YWl0IHRoaXMucXVldWU7XG5cdH1cblx0ZW5xdWV1ZU9wZXJhdGlvbih0eXBlLCAuLi5hcmdzKSB7XG5cdFx0Y29uc3QgbmV3UHJvbWlzZSA9IHRoaXMucXVldWUudGhlbigoKSA9PiB7XG5cdFx0XHRyZXR1cm4gdGhpcy5jYWNoZVt0eXBlXSguLi5hcmdzKTtcblx0XHR9KTtcblx0XHR0aGlzLnF1ZXVlID0gbmV3UHJvbWlzZS50aGVuKCgpID0+IHZvaWQgMCwgKCkgPT4gdm9pZCAwKTtcblx0XHRyZXR1cm4gbmV3UHJvbWlzZTtcblx0fVxufTtcbnZhciBQcmVnZWxMb29wID0gY2xhc3MgUHJlZ2VsTG9vcCB7XG5cdGlucHV0O1xuXHRvdXRwdXQ7XG5cdGNvbmZpZztcblx0Y2hlY2twb2ludGVyO1xuXHRjaGVja3BvaW50ZXJHZXROZXh0VmVyc2lvbjtcblx0Y2hhbm5lbHM7XG5cdGNoZWNrcG9pbnQ7XG5cdGNoZWNrcG9pbnRJZFNhdmVkO1xuXHRjaGVja3BvaW50Q29uZmlnO1xuXHRjaGVja3BvaW50TWV0YWRhdGE7XG5cdGNoZWNrcG9pbnROYW1lc3BhY2U7XG5cdGNoZWNrcG9pbnRQZW5kaW5nV3JpdGVzID0gW107XG5cdGNoZWNrcG9pbnRQcmV2aW91c1ZlcnNpb25zO1xuXHRzdGVwO1xuXHRzdG9wO1xuXHRkdXJhYmlsaXR5O1xuXHRvdXRwdXRLZXlzO1xuXHRzdHJlYW1LZXlzO1xuXHRub2Rlcztcblx0c2tpcERvbmVUYXNrcztcblx0cHJldkNoZWNrcG9pbnRDb25maWc7XG5cdHVwZGF0ZWRDaGFubmVscztcblx0c3RhdHVzID0gXCJwZW5kaW5nXCI7XG5cdHRhc2tzID0ge307XG5cdHN0cmVhbTtcblx0Y2hlY2twb2ludGVyUHJvbWlzZXMgPSBbXTtcblx0aXNOZXN0ZWQ7XG5cdF9jaGVja3BvaW50ZXJDaGFpbmVkUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuXHRzdG9yZTtcblx0Y2FjaGU7XG5cdG1hbmFnZXI7XG5cdGludGVycnVwdEFmdGVyO1xuXHRpbnRlcnJ1cHRCZWZvcmU7XG5cdHRvSW50ZXJydXB0ID0gW107XG5cdGRlYnVnID0gZmFsc2U7XG5cdHRyaWdnZXJUb05vZGVzO1xuXHRnZXQgaXNSZXN1bWluZygpIHtcblx0XHRsZXQgaGFzQ2hhbm5lbFZlcnNpb25zID0gZmFsc2U7XG5cdFx0aWYgKFNUQVJUIGluIHRoaXMuY2hlY2twb2ludC5jaGFubmVsX3ZlcnNpb25zKSBoYXNDaGFubmVsVmVyc2lvbnMgPSB0cnVlO1xuXHRcdGVsc2UgZm9yIChjb25zdCBjaGFuIGluIHRoaXMuY2hlY2twb2ludC5jaGFubmVsX3ZlcnNpb25zKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuY2hlY2twb2ludC5jaGFubmVsX3ZlcnNpb25zLCBjaGFuKSkge1xuXHRcdFx0aGFzQ2hhbm5lbFZlcnNpb25zID0gdHJ1ZTtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0XHRjb25zdCBjb25maWdJc1Jlc3VtaW5nID0gdGhpcy5jb25maWcuY29uZmlndXJhYmxlPy5bQ09ORklHX0tFWV9SRVNVTUlOR10gIT09IHZvaWQgMCAmJiB0aGlzLmNvbmZpZy5jb25maWd1cmFibGU/LltDT05GSUdfS0VZX1JFU1VNSU5HXTtcblx0XHRjb25zdCBpbnB1dElzTnVsbE9yVW5kZWZpbmVkID0gdGhpcy5pbnB1dCA9PT0gbnVsbCB8fCB0aGlzLmlucHV0ID09PSB2b2lkIDA7XG5cdFx0Y29uc3QgaW5wdXRJc0NvbW1hbmRSZXN1bWluZyA9IGlzQ29tbWFuZCh0aGlzLmlucHV0KSAmJiB0aGlzLmlucHV0LnJlc3VtZSAhPSBudWxsO1xuXHRcdGNvbnN0IGlucHV0SXNSZXN1bWluZyA9IHRoaXMuaW5wdXQgPT09IElOUFVUX1JFU1VNSU5HO1xuXHRcdGNvbnN0IHJ1bklkTWF0Y2hlc1ByZXZpb3VzID0gIXRoaXMuaXNOZXN0ZWQgJiYgdGhpcy5jb25maWcubWV0YWRhdGE/LnJ1bl9pZCAhPT0gdm9pZCAwICYmIHRoaXMuY2hlY2twb2ludE1ldGFkYXRhPy5ydW5faWQgIT09IHZvaWQgMCAmJiB0aGlzLmNvbmZpZy5tZXRhZGF0YS5ydW5faWQgPT09IHRoaXMuY2hlY2twb2ludE1ldGFkYXRhPy5ydW5faWQ7XG5cdFx0cmV0dXJuIGhhc0NoYW5uZWxWZXJzaW9ucyAmJiAoY29uZmlnSXNSZXN1bWluZyB8fCBpbnB1dElzTnVsbE9yVW5kZWZpbmVkIHx8IGlucHV0SXNDb21tYW5kUmVzdW1pbmcgfHwgaW5wdXRJc1Jlc3VtaW5nIHx8IHJ1bklkTWF0Y2hlc1ByZXZpb3VzKTtcblx0fVxuXHRjb25zdHJ1Y3RvcihwYXJhbXMpIHtcblx0XHR0aGlzLmlucHV0ID0gcGFyYW1zLmlucHV0O1xuXHRcdHRoaXMuY2hlY2twb2ludGVyID0gcGFyYW1zLmNoZWNrcG9pbnRlcjtcblx0XHRpZiAodGhpcy5jaGVja3BvaW50ZXIgIT09IHZvaWQgMCkgdGhpcy5jaGVja3BvaW50ZXJHZXROZXh0VmVyc2lvbiA9IHRoaXMuY2hlY2twb2ludGVyLmdldE5leHRWZXJzaW9uLmJpbmQodGhpcy5jaGVja3BvaW50ZXIpO1xuXHRcdGVsc2UgdGhpcy5jaGVja3BvaW50ZXJHZXROZXh0VmVyc2lvbiA9IGluY3JlbWVudDtcblx0XHR0aGlzLmNoZWNrcG9pbnQgPSBwYXJhbXMuY2hlY2twb2ludDtcblx0XHR0aGlzLmNoZWNrcG9pbnRNZXRhZGF0YSA9IHBhcmFtcy5jaGVja3BvaW50TWV0YWRhdGE7XG5cdFx0dGhpcy5jaGVja3BvaW50UHJldmlvdXNWZXJzaW9ucyA9IHBhcmFtcy5jaGVja3BvaW50UHJldmlvdXNWZXJzaW9ucztcblx0XHR0aGlzLmNoYW5uZWxzID0gcGFyYW1zLmNoYW5uZWxzO1xuXHRcdHRoaXMuY2hlY2twb2ludFBlbmRpbmdXcml0ZXMgPSBwYXJhbXMuY2hlY2twb2ludFBlbmRpbmdXcml0ZXM7XG5cdFx0dGhpcy5zdGVwID0gcGFyYW1zLnN0ZXA7XG5cdFx0dGhpcy5zdG9wID0gcGFyYW1zLnN0b3A7XG5cdFx0dGhpcy5jb25maWcgPSBwYXJhbXMuY29uZmlnO1xuXHRcdHRoaXMuY2hlY2twb2ludENvbmZpZyA9IHBhcmFtcy5jaGVja3BvaW50Q29uZmlnO1xuXHRcdHRoaXMuaXNOZXN0ZWQgPSBwYXJhbXMuaXNOZXN0ZWQ7XG5cdFx0dGhpcy5tYW5hZ2VyID0gcGFyYW1zLm1hbmFnZXI7XG5cdFx0dGhpcy5vdXRwdXRLZXlzID0gcGFyYW1zLm91dHB1dEtleXM7XG5cdFx0dGhpcy5zdHJlYW1LZXlzID0gcGFyYW1zLnN0cmVhbUtleXM7XG5cdFx0dGhpcy5ub2RlcyA9IHBhcmFtcy5ub2Rlcztcblx0XHR0aGlzLnNraXBEb25lVGFza3MgPSBwYXJhbXMuc2tpcERvbmVUYXNrcztcblx0XHR0aGlzLnN0b3JlID0gcGFyYW1zLnN0b3JlO1xuXHRcdHRoaXMuY2FjaGUgPSBwYXJhbXMuY2FjaGUgPyBuZXcgQXN5bmNCYXRjaGVkQ2FjaGUocGFyYW1zLmNhY2hlKSA6IHZvaWQgMDtcblx0XHR0aGlzLnN0cmVhbSA9IHBhcmFtcy5zdHJlYW07XG5cdFx0dGhpcy5jaGVja3BvaW50TmFtZXNwYWNlID0gcGFyYW1zLmNoZWNrcG9pbnROYW1lc3BhY2U7XG5cdFx0dGhpcy5wcmV2Q2hlY2twb2ludENvbmZpZyA9IHBhcmFtcy5wcmV2Q2hlY2twb2ludENvbmZpZztcblx0XHR0aGlzLmludGVycnVwdEFmdGVyID0gcGFyYW1zLmludGVycnVwdEFmdGVyO1xuXHRcdHRoaXMuaW50ZXJydXB0QmVmb3JlID0gcGFyYW1zLmludGVycnVwdEJlZm9yZTtcblx0XHR0aGlzLmR1cmFiaWxpdHkgPSBwYXJhbXMuZHVyYWJpbGl0eTtcblx0XHR0aGlzLmRlYnVnID0gcGFyYW1zLmRlYnVnO1xuXHRcdHRoaXMudHJpZ2dlclRvTm9kZXMgPSBwYXJhbXMudHJpZ2dlclRvTm9kZXM7XG5cdH1cblx0c3RhdGljIGFzeW5jIGluaXRpYWxpemUocGFyYW1zKSB7XG5cdFx0bGV0IHsgY29uZmlnLCBzdHJlYW0gfSA9IHBhcmFtcztcblx0XHRpZiAoc3RyZWFtICE9PSB2b2lkIDAgJiYgY29uZmlnLmNvbmZpZ3VyYWJsZT8uW0NPTkZJR19LRVlfU1RSRUFNXSAhPT0gdm9pZCAwKSBzdHJlYW0gPSBjcmVhdGVEdXBsZXhTdHJlYW0oc3RyZWFtLCBjb25maWcuY29uZmlndXJhYmxlW0NPTkZJR19LRVlfU1RSRUFNXSk7XG5cdFx0Y29uc3Qgc2tpcERvbmVUYXNrcyA9IGNvbmZpZy5jb25maWd1cmFibGUgPyAhKFwiY2hlY2twb2ludF9pZFwiIGluIGNvbmZpZy5jb25maWd1cmFibGUpIDogdHJ1ZTtcblx0XHRjb25zdCBzY3JhdGNocGFkID0gY29uZmlnLmNvbmZpZ3VyYWJsZT8uW0NPTkZJR19LRVlfU0NSQVRDSFBBRF07XG5cdFx0aWYgKGNvbmZpZy5jb25maWd1cmFibGUgJiYgc2NyYXRjaHBhZCkge1xuXHRcdFx0aWYgKHNjcmF0Y2hwYWQuc3ViZ3JhcGhDb3VudGVyID4gMCkgY29uZmlnID0gcGF0Y2hDb25maWd1cmFibGUoY29uZmlnLCB7IFtDT05GSUdfS0VZX0NIRUNLUE9JTlRfTlNdOiBbY29uZmlnLmNvbmZpZ3VyYWJsZVtDT05GSUdfS0VZX0NIRUNLUE9JTlRfTlNdLCBzY3JhdGNocGFkLnN1YmdyYXBoQ291bnRlci50b1N0cmluZygpXS5qb2luKENIRUNLUE9JTlRfTkFNRVNQQUNFX1NFUEFSQVRPUikgfSk7XG5cdFx0XHRzY3JhdGNocGFkLnN1YmdyYXBoQ291bnRlciArPSAxO1xuXHRcdH1cblx0XHRjb25zdCBpc05lc3RlZCA9IENPTkZJR19LRVlfUkVBRCBpbiAoY29uZmlnLmNvbmZpZ3VyYWJsZSA/PyB7fSk7XG5cdFx0aWYgKCFpc05lc3RlZCAmJiBjb25maWcuY29uZmlndXJhYmxlPy5jaGVja3BvaW50X25zICE9PSB2b2lkIDAgJiYgY29uZmlnLmNvbmZpZ3VyYWJsZT8uY2hlY2twb2ludF9ucyAhPT0gXCJcIikgY29uZmlnID0gcGF0Y2hDb25maWd1cmFibGUoY29uZmlnLCB7XG5cdFx0XHRjaGVja3BvaW50X25zOiBcIlwiLFxuXHRcdFx0Y2hlY2twb2ludF9pZDogdm9pZCAwXG5cdFx0fSk7XG5cdFx0bGV0IGNoZWNrcG9pbnRDb25maWcgPSBjb25maWc7XG5cdFx0aWYgKGNvbmZpZy5jb25maWd1cmFibGU/LltDT05GSUdfS0VZX0NIRUNLUE9JTlRfTUFQXSAhPT0gdm9pZCAwICYmIGNvbmZpZy5jb25maWd1cmFibGU/LltDT05GSUdfS0VZX0NIRUNLUE9JTlRfTUFQXT8uW2NvbmZpZy5jb25maWd1cmFibGU/LmNoZWNrcG9pbnRfbnNdKSBjaGVja3BvaW50Q29uZmlnID0gcGF0Y2hDb25maWd1cmFibGUoY29uZmlnLCB7IGNoZWNrcG9pbnRfaWQ6IGNvbmZpZy5jb25maWd1cmFibGVbQ09ORklHX0tFWV9DSEVDS1BPSU5UX01BUF1bY29uZmlnLmNvbmZpZ3VyYWJsZT8uY2hlY2twb2ludF9uc10gfSk7XG5cdFx0Y29uc3QgY2hlY2twb2ludE5hbWVzcGFjZSA9IGNvbmZpZy5jb25maWd1cmFibGU/LmNoZWNrcG9pbnRfbnM/LnNwbGl0KENIRUNLUE9JTlRfTkFNRVNQQUNFX1NFUEFSQVRPUikgPz8gW107XG5cdFx0Y29uc3Qgc2F2ZWQgPSBhd2FpdCBwYXJhbXMuY2hlY2twb2ludGVyPy5nZXRUdXBsZShjaGVja3BvaW50Q29uZmlnKSA/PyB7XG5cdFx0XHRjb25maWcsXG5cdFx0XHRjaGVja3BvaW50OiBlbXB0eUNoZWNrcG9pbnQoKSxcblx0XHRcdG1ldGFkYXRhOiB7XG5cdFx0XHRcdHNvdXJjZTogXCJpbnB1dFwiLFxuXHRcdFx0XHRzdGVwOiAtMixcblx0XHRcdFx0cGFyZW50czoge31cblx0XHRcdH0sXG5cdFx0XHRwZW5kaW5nV3JpdGVzOiBbXVxuXHRcdH07XG5cdFx0Y2hlY2twb2ludENvbmZpZyA9IHtcblx0XHRcdC4uLmNvbmZpZyxcblx0XHRcdC4uLnNhdmVkLmNvbmZpZyxcblx0XHRcdGNvbmZpZ3VyYWJsZToge1xuXHRcdFx0XHRjaGVja3BvaW50X25zOiBcIlwiLFxuXHRcdFx0XHQuLi5jb25maWcuY29uZmlndXJhYmxlLFxuXHRcdFx0XHQuLi5zYXZlZC5jb25maWcuY29uZmlndXJhYmxlXG5cdFx0XHR9XG5cdFx0fTtcblx0XHRjb25zdCBwcmV2Q2hlY2twb2ludENvbmZpZyA9IHNhdmVkLnBhcmVudENvbmZpZztcblx0XHRjb25zdCBjaGVja3BvaW50ID0gY29weUNoZWNrcG9pbnQoc2F2ZWQuY2hlY2twb2ludCk7XG5cdFx0Y29uc3QgY2hlY2twb2ludE1ldGFkYXRhID0geyAuLi5zYXZlZC5tZXRhZGF0YSB9O1xuXHRcdGNvbnN0IGNoZWNrcG9pbnRQZW5kaW5nV3JpdGVzID0gc2F2ZWQucGVuZGluZ1dyaXRlcyA/PyBbXTtcblx0XHRjb25zdCBjaGFubmVscyA9IGVtcHR5Q2hhbm5lbHMocGFyYW1zLmNoYW5uZWxTcGVjcywgY2hlY2twb2ludCk7XG5cdFx0Y29uc3Qgc3RlcCA9IChjaGVja3BvaW50TWV0YWRhdGEuc3RlcCA/PyAwKSArIDE7XG5cdFx0Y29uc3Qgc3RvcCA9IHN0ZXAgKyAoY29uZmlnLnJlY3Vyc2lvbkxpbWl0ID8/IERFRkFVTFRfTE9PUF9MSU1JVCkgKyAxO1xuXHRcdGNvbnN0IGNoZWNrcG9pbnRQcmV2aW91c1ZlcnNpb25zID0geyAuLi5jaGVja3BvaW50LmNoYW5uZWxfdmVyc2lvbnMgfTtcblx0XHRjb25zdCBzdG9yZSA9IHBhcmFtcy5zdG9yZSA/IG5ldyBBc3luY0JhdGNoZWRTdG9yZShwYXJhbXMuc3RvcmUpIDogdm9pZCAwO1xuXHRcdGlmIChzdG9yZSkgYXdhaXQgc3RvcmUuc3RhcnQoKTtcblx0XHRyZXR1cm4gbmV3IFByZWdlbExvb3Aoe1xuXHRcdFx0aW5wdXQ6IHBhcmFtcy5pbnB1dCxcblx0XHRcdGNvbmZpZyxcblx0XHRcdGNoZWNrcG9pbnRlcjogcGFyYW1zLmNoZWNrcG9pbnRlcixcblx0XHRcdGNoZWNrcG9pbnQsXG5cdFx0XHRjaGVja3BvaW50TWV0YWRhdGEsXG5cdFx0XHRjaGVja3BvaW50Q29uZmlnLFxuXHRcdFx0cHJldkNoZWNrcG9pbnRDb25maWcsXG5cdFx0XHRjaGVja3BvaW50TmFtZXNwYWNlLFxuXHRcdFx0Y2hhbm5lbHMsXG5cdFx0XHRpc05lc3RlZCxcblx0XHRcdG1hbmFnZXI6IHBhcmFtcy5tYW5hZ2VyLFxuXHRcdFx0c2tpcERvbmVUYXNrcyxcblx0XHRcdHN0ZXAsXG5cdFx0XHRzdG9wLFxuXHRcdFx0Y2hlY2twb2ludFByZXZpb3VzVmVyc2lvbnMsXG5cdFx0XHRjaGVja3BvaW50UGVuZGluZ1dyaXRlcyxcblx0XHRcdG91dHB1dEtleXM6IHBhcmFtcy5vdXRwdXRLZXlzID8/IFtdLFxuXHRcdFx0c3RyZWFtS2V5czogcGFyYW1zLnN0cmVhbUtleXMgPz8gW10sXG5cdFx0XHRub2RlczogcGFyYW1zLm5vZGVzLFxuXHRcdFx0c3RyZWFtLFxuXHRcdFx0c3RvcmUsXG5cdFx0XHRjYWNoZTogcGFyYW1zLmNhY2hlLFxuXHRcdFx0aW50ZXJydXB0QWZ0ZXI6IHBhcmFtcy5pbnRlcnJ1cHRBZnRlcixcblx0XHRcdGludGVycnVwdEJlZm9yZTogcGFyYW1zLmludGVycnVwdEJlZm9yZSxcblx0XHRcdGR1cmFiaWxpdHk6IHBhcmFtcy5kdXJhYmlsaXR5LFxuXHRcdFx0ZGVidWc6IHBhcmFtcy5kZWJ1Zyxcblx0XHRcdHRyaWdnZXJUb05vZGVzOiBwYXJhbXMudHJpZ2dlclRvTm9kZXNcblx0XHR9KTtcblx0fVxuXHRfY2hlY2twb2ludGVyUHV0QWZ0ZXJQcmV2aW91cyhpbnB1dCkge1xuXHRcdHRoaXMuX2NoZWNrcG9pbnRlckNoYWluZWRQcm9taXNlID0gdGhpcy5fY2hlY2twb2ludGVyQ2hhaW5lZFByb21pc2UudGhlbigoKSA9PiB7XG5cdFx0XHRyZXR1cm4gdGhpcy5jaGVja3BvaW50ZXI/LnB1dChpbnB1dC5jb25maWcsIGlucHV0LmNoZWNrcG9pbnQsIGlucHV0Lm1ldGFkYXRhLCBpbnB1dC5uZXdWZXJzaW9ucyk7XG5cdFx0fSk7XG5cdFx0dGhpcy5jaGVja3BvaW50ZXJQcm9taXNlcy5wdXNoKHRoaXMuX2NoZWNrcG9pbnRlckNoYWluZWRQcm9taXNlKTtcblx0fVxuXHQvKipcblx0KiBQdXQgd3JpdGVzIGZvciBhIHRhc2ssIHRvIGJlIHJlYWQgYnkgdGhlIG5leHQgdGljay5cblx0KiBAcGFyYW0gdGFza0lkXG5cdCogQHBhcmFtIHdyaXRlc1xuXHQqL1xuXHRwdXRXcml0ZXModGFza0lkLCB3cml0ZXMpIHtcblx0XHRsZXQgd3JpdGVzQ29weSA9IHdyaXRlcztcblx0XHRpZiAod3JpdGVzQ29weS5sZW5ndGggPT09IDApIHJldHVybjtcblx0XHRpZiAod3JpdGVzQ29weS5ldmVyeSgoW2tleV0pID0+IGtleSBpbiBXUklURVNfSURYX01BUCkpIHdyaXRlc0NvcHkgPSBBcnJheS5mcm9tKG5ldyBNYXAod3JpdGVzQ29weS5tYXAoKHcpID0+IFt3WzBdLCB3XSkpLnZhbHVlcygpKTtcblx0XHR0aGlzLmNoZWNrcG9pbnRQZW5kaW5nV3JpdGVzID0gdGhpcy5jaGVja3BvaW50UGVuZGluZ1dyaXRlcy5maWx0ZXIoKHcpID0+IHdbMF0gIT09IHRhc2tJZCk7XG5cdFx0Zm9yIChjb25zdCBbYywgdl0gb2Ygd3JpdGVzQ29weSkgdGhpcy5jaGVja3BvaW50UGVuZGluZ1dyaXRlcy5wdXNoKFtcblx0XHRcdHRhc2tJZCxcblx0XHRcdGMsXG5cdFx0XHR2XG5cdFx0XSk7XG5cdFx0Y29uc3QgY29uZmlnID0gcGF0Y2hDb25maWd1cmFibGUodGhpcy5jaGVja3BvaW50Q29uZmlnLCB7XG5cdFx0XHRbQ09ORklHX0tFWV9DSEVDS1BPSU5UX05TXTogdGhpcy5jb25maWcuY29uZmlndXJhYmxlPy5jaGVja3BvaW50X25zID8/IFwiXCIsXG5cdFx0XHRbQ09ORklHX0tFWV9DSEVDS1BPSU5UX0lEXTogdGhpcy5jaGVja3BvaW50LmlkXG5cdFx0fSk7XG5cdFx0aWYgKHRoaXMuZHVyYWJpbGl0eSAhPT0gXCJleGl0XCIgJiYgdGhpcy5jaGVja3BvaW50ZXIgIT0gbnVsbCkgdGhpcy5jaGVja3BvaW50ZXJQcm9taXNlcy5wdXNoKHRoaXMuY2hlY2twb2ludGVyLnB1dFdyaXRlcyhjb25maWcsIHdyaXRlc0NvcHksIHRhc2tJZCkpO1xuXHRcdGlmICh0aGlzLnRhc2tzKSB0aGlzLl9vdXRwdXRXcml0ZXModGFza0lkLCB3cml0ZXNDb3B5KTtcblx0XHRpZiAoIXdyaXRlcy5sZW5ndGggfHwgIXRoaXMuY2FjaGUgfHwgIXRoaXMudGFza3MpIHJldHVybjtcblx0XHRjb25zdCB0YXNrID0gdGhpcy50YXNrc1t0YXNrSWRdO1xuXHRcdGlmICh0YXNrID09IG51bGwgfHwgdGFzay5jYWNoZV9rZXkgPT0gbnVsbCkgcmV0dXJuO1xuXHRcdGlmICh3cml0ZXNbMF1bMF0gPT09IEVSUk9SIHx8IHdyaXRlc1swXVswXSA9PT0gSU5URVJSVVBUKSByZXR1cm47XG5cdFx0dGhpcy5jYWNoZS5zZXQoW3tcblx0XHRcdGtleTogW3Rhc2suY2FjaGVfa2V5Lm5zLCB0YXNrLmNhY2hlX2tleS5rZXldLFxuXHRcdFx0dmFsdWU6IHRhc2sud3JpdGVzLFxuXHRcdFx0dHRsOiB0YXNrLmNhY2hlX2tleS50dGxcblx0XHR9XSk7XG5cdH1cblx0X291dHB1dFdyaXRlcyh0YXNrSWQsIHdyaXRlcywgY2FjaGVkID0gZmFsc2UpIHtcblx0XHRjb25zdCB0YXNrID0gdGhpcy50YXNrc1t0YXNrSWRdO1xuXHRcdGlmICh0YXNrICE9PSB2b2lkIDApIHtcblx0XHRcdGlmICh0YXNrLmNvbmZpZyAhPT0gdm9pZCAwICYmICh0YXNrLmNvbmZpZy50YWdzID8/IFtdKS5pbmNsdWRlcyhUQUdfSElEREVOKSkgcmV0dXJuO1xuXHRcdFx0aWYgKHdyaXRlcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGlmICh3cml0ZXNbMF1bMF0gPT09IElOVEVSUlVQVCkge1xuXHRcdFx0XHRcdGlmICh0YXNrLnBhdGg/LlswXSA9PT0gUFVTSCAmJiB0YXNrLnBhdGg/LmF0KC0xKSA9PT0gdHJ1ZSkgcmV0dXJuO1xuXHRcdFx0XHRcdGNvbnN0IGludGVycnVwdFdyaXRlcyA9IHdyaXRlcy5maWx0ZXIoKHcpID0+IHdbMF0gPT09IElOVEVSUlVQVCkuZmxhdE1hcCgodykgPT4gd1sxXSk7XG5cdFx0XHRcdFx0dGhpcy5fZW1pdChbW1widXBkYXRlc1wiLCB7IFtJTlRFUlJVUFRdOiBpbnRlcnJ1cHRXcml0ZXMgfV0sIFtcInZhbHVlc1wiLCB7IFtJTlRFUlJVUFRdOiBpbnRlcnJ1cHRXcml0ZXMgfV1dKTtcblx0XHRcdFx0fSBlbHNlIGlmICh3cml0ZXNbMF1bMF0gIT09IEVSUk9SKSB0aGlzLl9lbWl0KGdhdGhlckl0ZXJhdG9yU3luYyhwcmVmaXhHZW5lcmF0b3IobWFwT3V0cHV0VXBkYXRlcyh0aGlzLm91dHB1dEtleXMsIFtbdGFzaywgd3JpdGVzXV0sIGNhY2hlZCksIFwidXBkYXRlc1wiKSkpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFjYWNoZWQpIHRoaXMuX2VtaXQoZ2F0aGVySXRlcmF0b3JTeW5jKHByZWZpeEdlbmVyYXRvcihtYXBEZWJ1Z1Rhc2tSZXN1bHRzKFtbdGFzaywgd3JpdGVzXV0sIHRoaXMuc3RyZWFtS2V5cyksIFwidGFza3NcIikpKTtcblx0XHR9XG5cdH1cblx0YXN5bmMgX21hdGNoQ2FjaGVkV3JpdGVzKCkge1xuXHRcdGlmICghdGhpcy5jYWNoZSkgcmV0dXJuIFtdO1xuXHRcdGNvbnN0IG1hdGNoZWQgPSBbXTtcblx0XHRjb25zdCBzZXJpYWxpemVLZXkgPSAoW25zLCBrZXldKSA9PiB7XG5cdFx0XHRyZXR1cm4gYG5zOiR7bnMuam9pbihcIixcIil9fGtleToke2tleX1gO1xuXHRcdH07XG5cdFx0Y29uc3Qga2V5cyA9IFtdO1xuXHRcdGNvbnN0IGtleU1hcCA9IHt9O1xuXHRcdGZvciAoY29uc3QgdGFzayBvZiBPYmplY3QudmFsdWVzKHRoaXMudGFza3MpKSBpZiAodGFzay5jYWNoZV9rZXkgIT0gbnVsbCAmJiAhdGFzay53cml0ZXMubGVuZ3RoKSB7XG5cdFx0XHRrZXlzLnB1c2goW3Rhc2suY2FjaGVfa2V5Lm5zLCB0YXNrLmNhY2hlX2tleS5rZXldKTtcblx0XHRcdGtleU1hcFtzZXJpYWxpemVLZXkoW3Rhc2suY2FjaGVfa2V5Lm5zLCB0YXNrLmNhY2hlX2tleS5rZXldKV0gPSB0YXNrO1xuXHRcdH1cblx0XHRpZiAoa2V5cy5sZW5ndGggPT09IDApIHJldHVybiBbXTtcblx0XHRjb25zdCBjYWNoZSA9IGF3YWl0IHRoaXMuY2FjaGUuZ2V0KGtleXMpO1xuXHRcdGZvciAoY29uc3QgeyBrZXksIHZhbHVlIH0gb2YgY2FjaGUpIHtcblx0XHRcdGNvbnN0IHRhc2sgPSBrZXlNYXBbc2VyaWFsaXplS2V5KGtleSldO1xuXHRcdFx0aWYgKHRhc2sgIT0gbnVsbCkge1xuXHRcdFx0XHR0YXNrLndyaXRlcy5wdXNoKC4uLnZhbHVlKTtcblx0XHRcdFx0bWF0Y2hlZC5wdXNoKHtcblx0XHRcdFx0XHR0YXNrLFxuXHRcdFx0XHRcdHJlc3VsdDogdmFsdWVcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBtYXRjaGVkO1xuXHR9XG5cdC8qKlxuXHQqIEV4ZWN1dGUgYSBzaW5nbGUgaXRlcmF0aW9uIG9mIHRoZSBQcmVnZWwgbG9vcC5cblx0KiBSZXR1cm5zIHRydWUgaWYgbW9yZSBpdGVyYXRpb25zIGFyZSBuZWVkZWQuXG5cdCogQHBhcmFtIHBhcmFtc1xuXHQqL1xuXHRhc3luYyB0aWNrKHBhcmFtcykge1xuXHRcdGlmICh0aGlzLnN0b3JlICYmICF0aGlzLnN0b3JlLmlzUnVubmluZykgYXdhaXQgdGhpcy5zdG9yZT8uc3RhcnQoKTtcblx0XHRjb25zdCB7IGlucHV0S2V5cyA9IFtdIH0gPSBwYXJhbXM7XG5cdFx0aWYgKHRoaXMuc3RhdHVzICE9PSBcInBlbmRpbmdcIikgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgdGljayB3aGVuIHN0YXR1cyBpcyBubyBsb25nZXIgXCJwZW5kaW5nXCIuIEN1cnJlbnQgc3RhdHVzOiBcIiR7dGhpcy5zdGF0dXN9XCJgKTtcblx0XHRpZiAoIVtJTlBVVF9ET05FLCBJTlBVVF9SRVNVTUlOR10uaW5jbHVkZXModGhpcy5pbnB1dCkpIGF3YWl0IHRoaXMuX2ZpcnN0KGlucHV0S2V5cyk7XG5cdFx0ZWxzZSBpZiAodGhpcy50b0ludGVycnVwdC5sZW5ndGggPiAwKSB7XG5cdFx0XHR0aGlzLnN0YXR1cyA9IFwiaW50ZXJydXB0X2JlZm9yZVwiO1xuXHRcdFx0dGhyb3cgbmV3IEdyYXBoSW50ZXJydXB0KCk7XG5cdFx0fSBlbHNlIGlmIChPYmplY3QudmFsdWVzKHRoaXMudGFza3MpLmV2ZXJ5KCh0YXNrKSA9PiB0YXNrLndyaXRlcy5sZW5ndGggPiAwKSkge1xuXHRcdFx0Y29uc3Qgd3JpdGVzID0gT2JqZWN0LnZhbHVlcyh0aGlzLnRhc2tzKS5mbGF0TWFwKCh0KSA9PiB0LndyaXRlcyk7XG5cdFx0XHR0aGlzLnVwZGF0ZWRDaGFubmVscyA9IF9hcHBseVdyaXRlcyh0aGlzLmNoZWNrcG9pbnQsIHRoaXMuY2hhbm5lbHMsIE9iamVjdC52YWx1ZXModGhpcy50YXNrcyksIHRoaXMuY2hlY2twb2ludGVyR2V0TmV4dFZlcnNpb24sIHRoaXMudHJpZ2dlclRvTm9kZXMpO1xuXHRcdFx0Y29uc3QgdmFsdWVzT3V0cHV0ID0gYXdhaXQgZ2F0aGVySXRlcmF0b3IocHJlZml4R2VuZXJhdG9yKG1hcE91dHB1dFZhbHVlcyh0aGlzLm91dHB1dEtleXMsIHdyaXRlcywgdGhpcy5jaGFubmVscyksIFwidmFsdWVzXCIpKTtcblx0XHRcdHRoaXMuX2VtaXQodmFsdWVzT3V0cHV0KTtcblx0XHRcdHRoaXMuY2hlY2twb2ludFBlbmRpbmdXcml0ZXMgPSBbXTtcblx0XHRcdGF3YWl0IHRoaXMuX3B1dENoZWNrcG9pbnQoeyBzb3VyY2U6IFwibG9vcFwiIH0pO1xuXHRcdFx0aWYgKHNob3VsZEludGVycnVwdCh0aGlzLmNoZWNrcG9pbnQsIHRoaXMuaW50ZXJydXB0QWZ0ZXIsIE9iamVjdC52YWx1ZXModGhpcy50YXNrcykpKSB7XG5cdFx0XHRcdHRoaXMuc3RhdHVzID0gXCJpbnRlcnJ1cHRfYWZ0ZXJcIjtcblx0XHRcdFx0dGhyb3cgbmV3IEdyYXBoSW50ZXJydXB0KCk7XG5cdFx0XHR9XG5cdFx0XHRpZiAodGhpcy5jb25maWcuY29uZmlndXJhYmxlPy5bQ09ORklHX0tFWV9SRVNVTUlOR10gIT09IHZvaWQgMCkgZGVsZXRlIHRoaXMuY29uZmlnLmNvbmZpZ3VyYWJsZT8uW0NPTkZJR19LRVlfUkVTVU1JTkddO1xuXHRcdH0gZWxzZSByZXR1cm4gZmFsc2U7XG5cdFx0aWYgKHRoaXMuc3RlcCA+IHRoaXMuc3RvcCkge1xuXHRcdFx0dGhpcy5zdGF0dXMgPSBcIm91dF9vZl9zdGVwc1wiO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHR0aGlzLnRhc2tzID0gX3ByZXBhcmVOZXh0VGFza3ModGhpcy5jaGVja3BvaW50LCB0aGlzLmNoZWNrcG9pbnRQZW5kaW5nV3JpdGVzLCB0aGlzLm5vZGVzLCB0aGlzLmNoYW5uZWxzLCB0aGlzLmNvbmZpZywgdHJ1ZSwge1xuXHRcdFx0c3RlcDogdGhpcy5zdGVwLFxuXHRcdFx0Y2hlY2twb2ludGVyOiB0aGlzLmNoZWNrcG9pbnRlcixcblx0XHRcdGlzUmVzdW1pbmc6IHRoaXMuaXNSZXN1bWluZyxcblx0XHRcdG1hbmFnZXI6IHRoaXMubWFuYWdlcixcblx0XHRcdHN0b3JlOiB0aGlzLnN0b3JlLFxuXHRcdFx0c3RyZWFtOiB0aGlzLnN0cmVhbSxcblx0XHRcdHRyaWdnZXJUb05vZGVzOiB0aGlzLnRyaWdnZXJUb05vZGVzLFxuXHRcdFx0dXBkYXRlZENoYW5uZWxzOiB0aGlzLnVwZGF0ZWRDaGFubmVsc1xuXHRcdH0pO1xuXHRcdGlmICh0aGlzLmNoZWNrcG9pbnRlcikgdGhpcy5fZW1pdChhd2FpdCBnYXRoZXJJdGVyYXRvcihwcmVmaXhHZW5lcmF0b3IobWFwRGVidWdDaGVja3BvaW50KHRoaXMuY2hlY2twb2ludENvbmZpZywgdGhpcy5jaGFubmVscywgdGhpcy5zdHJlYW1LZXlzLCB0aGlzLmNoZWNrcG9pbnRNZXRhZGF0YSwgT2JqZWN0LnZhbHVlcyh0aGlzLnRhc2tzKSwgdGhpcy5jaGVja3BvaW50UGVuZGluZ1dyaXRlcywgdGhpcy5wcmV2Q2hlY2twb2ludENvbmZpZywgdGhpcy5vdXRwdXRLZXlzKSwgXCJjaGVja3BvaW50c1wiKSkpO1xuXHRcdGlmIChPYmplY3QudmFsdWVzKHRoaXMudGFza3MpLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0dGhpcy5zdGF0dXMgPSBcImRvbmVcIjtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0aWYgKHRoaXMuc2tpcERvbmVUYXNrcyAmJiB0aGlzLmNoZWNrcG9pbnRQZW5kaW5nV3JpdGVzLmxlbmd0aCA+IDApIHtcblx0XHRcdGZvciAoY29uc3QgW3RpZCwgaywgdl0gb2YgdGhpcy5jaGVja3BvaW50UGVuZGluZ1dyaXRlcykge1xuXHRcdFx0XHRpZiAoayA9PT0gRVJST1IgfHwgayA9PT0gSU5URVJSVVBUIHx8IGsgPT09IFJFU1VNRSkgY29udGludWU7XG5cdFx0XHRcdGNvbnN0IHRhc2sgPSBPYmplY3QudmFsdWVzKHRoaXMudGFza3MpLmZpbmQoKHQpID0+IHQuaWQgPT09IHRpZCk7XG5cdFx0XHRcdGlmICh0YXNrKSB0YXNrLndyaXRlcy5wdXNoKFtrLCB2XSk7XG5cdFx0XHR9XG5cdFx0XHRmb3IgKGNvbnN0IHRhc2sgb2YgT2JqZWN0LnZhbHVlcyh0aGlzLnRhc2tzKSkgaWYgKHRhc2sud3JpdGVzLmxlbmd0aCA+IDApIHRoaXMuX291dHB1dFdyaXRlcyh0YXNrLmlkLCB0YXNrLndyaXRlcywgdHJ1ZSk7XG5cdFx0fVxuXHRcdGlmIChPYmplY3QudmFsdWVzKHRoaXMudGFza3MpLmV2ZXJ5KCh0YXNrKSA9PiB0YXNrLndyaXRlcy5sZW5ndGggPiAwKSkgcmV0dXJuIHRoaXMudGljayh7IGlucHV0S2V5cyB9KTtcblx0XHRpZiAoc2hvdWxkSW50ZXJydXB0KHRoaXMuY2hlY2twb2ludCwgdGhpcy5pbnRlcnJ1cHRCZWZvcmUsIE9iamVjdC52YWx1ZXModGhpcy50YXNrcykpKSB7XG5cdFx0XHR0aGlzLnN0YXR1cyA9IFwiaW50ZXJydXB0X2JlZm9yZVwiO1xuXHRcdFx0dGhyb3cgbmV3IEdyYXBoSW50ZXJydXB0KCk7XG5cdFx0fVxuXHRcdGNvbnN0IGRlYnVnT3V0cHV0ID0gYXdhaXQgZ2F0aGVySXRlcmF0b3IocHJlZml4R2VuZXJhdG9yKG1hcERlYnVnVGFza3MoT2JqZWN0LnZhbHVlcyh0aGlzLnRhc2tzKSksIFwidGFza3NcIikpO1xuXHRcdHRoaXMuX2VtaXQoZGVidWdPdXRwdXQpO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdGFzeW5jIGZpbmlzaEFuZEhhbmRsZUVycm9yKGVycm9yKSB7XG5cdFx0aWYgKHRoaXMuZHVyYWJpbGl0eSA9PT0gXCJleGl0XCIgJiYgKCF0aGlzLmlzTmVzdGVkIHx8IHR5cGVvZiBlcnJvciAhPT0gXCJ1bmRlZmluZWRcIiB8fCB0aGlzLmNoZWNrcG9pbnROYW1lc3BhY2UuZXZlcnkoKHBhcnQpID0+ICFwYXJ0LmluY2x1ZGVzKENIRUNLUE9JTlRfTkFNRVNQQUNFX0VORCkpKSkge1xuXHRcdFx0dGhpcy5fcHV0Q2hlY2twb2ludCh0aGlzLmNoZWNrcG9pbnRNZXRhZGF0YSk7XG5cdFx0XHR0aGlzLl9mbHVzaFBlbmRpbmdXcml0ZXMoKTtcblx0XHR9XG5cdFx0Y29uc3Qgc3VwcHJlc3MgPSB0aGlzLl9zdXBwcmVzc0ludGVycnVwdChlcnJvcik7XG5cdFx0aWYgKHN1cHByZXNzIHx8IGVycm9yID09PSB2b2lkIDApIHRoaXMub3V0cHV0ID0gcmVhZENoYW5uZWxzKHRoaXMuY2hhbm5lbHMsIHRoaXMub3V0cHV0S2V5cyk7XG5cdFx0aWYgKHN1cHByZXNzKSB7XG5cdFx0XHRpZiAodGhpcy50YXNrcyAhPT0gdm9pZCAwICYmIHRoaXMuY2hlY2twb2ludFBlbmRpbmdXcml0ZXMubGVuZ3RoID4gMCAmJiBPYmplY3QudmFsdWVzKHRoaXMudGFza3MpLnNvbWUoKHRhc2spID0+IHRhc2sud3JpdGVzLmxlbmd0aCA+IDApKSB7XG5cdFx0XHRcdHRoaXMudXBkYXRlZENoYW5uZWxzID0gX2FwcGx5V3JpdGVzKHRoaXMuY2hlY2twb2ludCwgdGhpcy5jaGFubmVscywgT2JqZWN0LnZhbHVlcyh0aGlzLnRhc2tzKSwgdGhpcy5jaGVja3BvaW50ZXJHZXROZXh0VmVyc2lvbiwgdGhpcy50cmlnZ2VyVG9Ob2Rlcyk7XG5cdFx0XHRcdHRoaXMuX2VtaXQoZ2F0aGVySXRlcmF0b3JTeW5jKHByZWZpeEdlbmVyYXRvcihtYXBPdXRwdXRWYWx1ZXModGhpcy5vdXRwdXRLZXlzLCBPYmplY3QudmFsdWVzKHRoaXMudGFza3MpLmZsYXRNYXAoKHQpID0+IHQud3JpdGVzKSwgdGhpcy5jaGFubmVscyksIFwidmFsdWVzXCIpKSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoaXNHcmFwaEludGVycnVwdChlcnJvcikgJiYgIWVycm9yLmludGVycnVwdHMubGVuZ3RoKSB0aGlzLl9lbWl0KFtbXCJ1cGRhdGVzXCIsIHsgW0lOVEVSUlVQVF06IFtdIH1dLCBbXCJ2YWx1ZXNcIiwgeyBbSU5URVJSVVBUXTogW10gfV1dKTtcblx0XHR9XG5cdFx0cmV0dXJuIHN1cHByZXNzO1xuXHR9XG5cdGFzeW5jIGFjY2VwdFB1c2godGFzaywgd3JpdGVJZHgsIGNhbGwpIHtcblx0XHRpZiAodGhpcy5pbnRlcnJ1cHRBZnRlcj8ubGVuZ3RoID4gMCAmJiBzaG91bGRJbnRlcnJ1cHQodGhpcy5jaGVja3BvaW50LCB0aGlzLmludGVycnVwdEFmdGVyLCBbdGFza10pKSB7XG5cdFx0XHR0aGlzLnRvSW50ZXJydXB0LnB1c2godGFzayk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGNvbnN0IHB1c2hlZCA9IF9wcmVwYXJlU2luZ2xlVGFzayhbXG5cdFx0XHRQVVNILFxuXHRcdFx0dGFzay5wYXRoID8/IFtdLFxuXHRcdFx0d3JpdGVJZHgsXG5cdFx0XHR0YXNrLmlkLFxuXHRcdFx0Y2FsbFxuXHRcdF0sIHRoaXMuY2hlY2twb2ludCwgdGhpcy5jaGVja3BvaW50UGVuZGluZ1dyaXRlcywgdGhpcy5ub2RlcywgdGhpcy5jaGFubmVscywgdGFzay5jb25maWcgPz8ge30sIHRydWUsIHtcblx0XHRcdHN0ZXA6IHRoaXMuc3RlcCxcblx0XHRcdGNoZWNrcG9pbnRlcjogdGhpcy5jaGVja3BvaW50ZXIsXG5cdFx0XHRtYW5hZ2VyOiB0aGlzLm1hbmFnZXIsXG5cdFx0XHRzdG9yZTogdGhpcy5zdG9yZSxcblx0XHRcdHN0cmVhbTogdGhpcy5zdHJlYW1cblx0XHR9KTtcblx0XHRpZiAoIXB1c2hlZCkgcmV0dXJuO1xuXHRcdGlmICh0aGlzLmludGVycnVwdEJlZm9yZT8ubGVuZ3RoID4gMCAmJiBzaG91bGRJbnRlcnJ1cHQodGhpcy5jaGVja3BvaW50LCB0aGlzLmludGVycnVwdEJlZm9yZSwgW3B1c2hlZF0pKSB7XG5cdFx0XHR0aGlzLnRvSW50ZXJydXB0LnB1c2gocHVzaGVkKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5fZW1pdChnYXRoZXJJdGVyYXRvclN5bmMocHJlZml4R2VuZXJhdG9yKG1hcERlYnVnVGFza3MoW3B1c2hlZF0pLCBcInRhc2tzXCIpKSk7XG5cdFx0aWYgKHRoaXMuZGVidWcpIHByaW50U3RlcFRhc2tzKHRoaXMuc3RlcCwgW3B1c2hlZF0pO1xuXHRcdHRoaXMudGFza3NbcHVzaGVkLmlkXSA9IHB1c2hlZDtcblx0XHRpZiAodGhpcy5za2lwRG9uZVRhc2tzKSB0aGlzLl9tYXRjaFdyaXRlcyh7IFtwdXNoZWQuaWRdOiBwdXNoZWQgfSk7XG5cdFx0Y29uc3QgdGFza3MgPSBhd2FpdCB0aGlzLl9tYXRjaENhY2hlZFdyaXRlcygpO1xuXHRcdGZvciAoY29uc3QgeyB0YXNrOiB0YXNrJDEgfSBvZiB0YXNrcykgdGhpcy5fb3V0cHV0V3JpdGVzKHRhc2skMS5pZCwgdGFzayQxLndyaXRlcywgdHJ1ZSk7XG5cdFx0cmV0dXJuIHB1c2hlZDtcblx0fVxuXHRfc3VwcHJlc3NJbnRlcnJ1cHQoZSkge1xuXHRcdHJldHVybiBpc0dyYXBoSW50ZXJydXB0KGUpICYmICF0aGlzLmlzTmVzdGVkO1xuXHR9XG5cdGFzeW5jIF9maXJzdChpbnB1dEtleXMpIHtcblx0XHRjb25zdCB7IGNvbmZpZ3VyYWJsZSB9ID0gdGhpcy5jb25maWc7XG5cdFx0Y29uc3Qgc2NyYXRjaHBhZCA9IGNvbmZpZ3VyYWJsZT8uW0NPTkZJR19LRVlfU0NSQVRDSFBBRF07XG5cdFx0aWYgKHNjcmF0Y2hwYWQgJiYgc2NyYXRjaHBhZC5udWxsUmVzdW1lICE9PSB2b2lkIDApIHRoaXMucHV0V3JpdGVzKE5VTExfVEFTS19JRCwgW1tSRVNVTUUsIHNjcmF0Y2hwYWQubnVsbFJlc3VtZV1dKTtcblx0XHRpZiAoaXNDb21tYW5kKHRoaXMuaW5wdXQpKSB7XG5cdFx0XHRjb25zdCBoYXNSZXN1bWUgPSB0aGlzLmlucHV0LnJlc3VtZSAhPSBudWxsO1xuXHRcdFx0aWYgKHRoaXMuaW5wdXQucmVzdW1lICE9IG51bGwgJiYgdHlwZW9mIHRoaXMuaW5wdXQucmVzdW1lID09PSBcIm9iamVjdFwiICYmIE9iamVjdC5rZXlzKHRoaXMuaW5wdXQucmVzdW1lKS5ldmVyeShpc1hYSDMpKSB7XG5cdFx0XHRcdHRoaXMuY29uZmlnLmNvbmZpZ3VyYWJsZSA/Pz0ge307XG5cdFx0XHRcdHRoaXMuY29uZmlnLmNvbmZpZ3VyYWJsZVtDT05GSUdfS0VZX1JFU1VNRV9NQVBdID0gdGhpcy5pbnB1dC5yZXN1bWU7XG5cdFx0XHR9XG5cdFx0XHRpZiAoaGFzUmVzdW1lICYmIHRoaXMuY2hlY2twb2ludGVyID09IG51bGwpIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCB1c2UgQ29tbWFuZChyZXN1bWU9Li4uKSB3aXRob3V0IGNoZWNrcG9pbnRlclwiKTtcblx0XHRcdGNvbnN0IHdyaXRlcyA9IHt9O1xuXHRcdFx0Zm9yIChjb25zdCBbdGlkLCBrZXksIHZhbHVlXSBvZiBtYXBDb21tYW5kKHRoaXMuaW5wdXQsIHRoaXMuY2hlY2twb2ludFBlbmRpbmdXcml0ZXMpKSB7XG5cdFx0XHRcdHdyaXRlc1t0aWRdID8/PSBbXTtcblx0XHRcdFx0d3JpdGVzW3RpZF0ucHVzaChba2V5LCB2YWx1ZV0pO1xuXHRcdFx0fVxuXHRcdFx0aWYgKE9iamVjdC5rZXlzKHdyaXRlcykubGVuZ3RoID09PSAwKSB0aHJvdyBuZXcgRW1wdHlJbnB1dEVycm9yKFwiUmVjZWl2ZWQgZW1wdHkgQ29tbWFuZCBpbnB1dFwiKTtcblx0XHRcdGZvciAoY29uc3QgW3RpZCwgd3NdIG9mIE9iamVjdC5lbnRyaWVzKHdyaXRlcykpIHRoaXMucHV0V3JpdGVzKHRpZCwgd3MpO1xuXHRcdH1cblx0XHRjb25zdCBudWxsV3JpdGVzID0gKHRoaXMuY2hlY2twb2ludFBlbmRpbmdXcml0ZXMgPz8gW10pLmZpbHRlcigodykgPT4gd1swXSA9PT0gTlVMTF9UQVNLX0lEKS5tYXAoKHcpID0+IHcuc2xpY2UoMSkpO1xuXHRcdGlmIChudWxsV3JpdGVzLmxlbmd0aCA+IDApIF9hcHBseVdyaXRlcyh0aGlzLmNoZWNrcG9pbnQsIHRoaXMuY2hhbm5lbHMsIFt7XG5cdFx0XHRuYW1lOiBJTlBVVCxcblx0XHRcdHdyaXRlczogbnVsbFdyaXRlcyxcblx0XHRcdHRyaWdnZXJzOiBbXVxuXHRcdH1dLCB0aGlzLmNoZWNrcG9pbnRlckdldE5leHRWZXJzaW9uLCB0aGlzLnRyaWdnZXJUb05vZGVzKTtcblx0XHRjb25zdCBpc0NvbW1hbmRVcGRhdGVPckdvdG8gPSBpc0NvbW1hbmQodGhpcy5pbnB1dCkgJiYgbnVsbFdyaXRlcy5sZW5ndGggPiAwO1xuXHRcdGlmICh0aGlzLmlzUmVzdW1pbmcgfHwgaXNDb21tYW5kVXBkYXRlT3JHb3RvKSB7XG5cdFx0XHRmb3IgKGNvbnN0IGNoYW5uZWxOYW1lIGluIHRoaXMuY2hhbm5lbHMpIHtcblx0XHRcdFx0aWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5jaGFubmVscywgY2hhbm5lbE5hbWUpKSBjb250aW51ZTtcblx0XHRcdFx0aWYgKHRoaXMuY2hlY2twb2ludC5jaGFubmVsX3ZlcnNpb25zW2NoYW5uZWxOYW1lXSAhPT0gdm9pZCAwKSB7XG5cdFx0XHRcdFx0Y29uc3QgdmVyc2lvbiA9IHRoaXMuY2hlY2twb2ludC5jaGFubmVsX3ZlcnNpb25zW2NoYW5uZWxOYW1lXTtcblx0XHRcdFx0XHR0aGlzLmNoZWNrcG9pbnQudmVyc2lvbnNfc2VlbltJTlRFUlJVUFRdID0ge1xuXHRcdFx0XHRcdFx0Li4udGhpcy5jaGVja3BvaW50LnZlcnNpb25zX3NlZW5bSU5URVJSVVBUXSxcblx0XHRcdFx0XHRcdFtjaGFubmVsTmFtZV06IHZlcnNpb25cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRjb25zdCB2YWx1ZXNPdXRwdXQgPSBhd2FpdCBnYXRoZXJJdGVyYXRvcihwcmVmaXhHZW5lcmF0b3IobWFwT3V0cHV0VmFsdWVzKHRoaXMub3V0cHV0S2V5cywgdHJ1ZSwgdGhpcy5jaGFubmVscyksIFwidmFsdWVzXCIpKTtcblx0XHRcdHRoaXMuX2VtaXQodmFsdWVzT3V0cHV0KTtcblx0XHR9XG5cdFx0aWYgKHRoaXMuaXNSZXN1bWluZykgdGhpcy5pbnB1dCA9IElOUFVUX1JFU1VNSU5HO1xuXHRcdGVsc2UgaWYgKGlzQ29tbWFuZFVwZGF0ZU9yR290bykge1xuXHRcdFx0YXdhaXQgdGhpcy5fcHV0Q2hlY2twb2ludCh7IHNvdXJjZTogXCJpbnB1dFwiIH0pO1xuXHRcdFx0dGhpcy5pbnB1dCA9IElOUFVUX0RPTkU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IGlucHV0V3JpdGVzID0gYXdhaXQgZ2F0aGVySXRlcmF0b3IobWFwSW5wdXQoaW5wdXRLZXlzLCB0aGlzLmlucHV0KSk7XG5cdFx0XHRpZiAoaW5wdXRXcml0ZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRjb25zdCBkaXNjYXJkVGFza3MgPSBfcHJlcGFyZU5leHRUYXNrcyh0aGlzLmNoZWNrcG9pbnQsIHRoaXMuY2hlY2twb2ludFBlbmRpbmdXcml0ZXMsIHRoaXMubm9kZXMsIHRoaXMuY2hhbm5lbHMsIHRoaXMuY29uZmlnLCB0cnVlLCB7IHN0ZXA6IHRoaXMuc3RlcCB9KTtcblx0XHRcdFx0dGhpcy51cGRhdGVkQ2hhbm5lbHMgPSBfYXBwbHlXcml0ZXModGhpcy5jaGVja3BvaW50LCB0aGlzLmNoYW5uZWxzLCBPYmplY3QudmFsdWVzKGRpc2NhcmRUYXNrcykuY29uY2F0KFt7XG5cdFx0XHRcdFx0bmFtZTogSU5QVVQsXG5cdFx0XHRcdFx0d3JpdGVzOiBpbnB1dFdyaXRlcyxcblx0XHRcdFx0XHR0cmlnZ2VyczogW11cblx0XHRcdFx0fV0pLCB0aGlzLmNoZWNrcG9pbnRlckdldE5leHRWZXJzaW9uLCB0aGlzLnRyaWdnZXJUb05vZGVzKTtcblx0XHRcdFx0YXdhaXQgdGhpcy5fcHV0Q2hlY2twb2ludCh7IHNvdXJjZTogXCJpbnB1dFwiIH0pO1xuXHRcdFx0XHR0aGlzLmlucHV0ID0gSU5QVVRfRE9ORTtcblx0XHRcdH0gZWxzZSBpZiAoIShDT05GSUdfS0VZX1JFU1VNSU5HIGluICh0aGlzLmNvbmZpZy5jb25maWd1cmFibGUgPz8ge30pKSkgdGhyb3cgbmV3IEVtcHR5SW5wdXRFcnJvcihgUmVjZWl2ZWQgbm8gaW5wdXQgd3JpdGVzIGZvciAke0pTT04uc3RyaW5naWZ5KGlucHV0S2V5cywgbnVsbCwgMil9YCk7XG5cdFx0XHRlbHNlIHRoaXMuaW5wdXQgPSBJTlBVVF9ET05FO1xuXHRcdH1cblx0XHRpZiAoIXRoaXMuaXNOZXN0ZWQpIHRoaXMuY29uZmlnID0gcGF0Y2hDb25maWd1cmFibGUodGhpcy5jb25maWcsIHsgW0NPTkZJR19LRVlfUkVTVU1JTkddOiB0aGlzLmlzUmVzdW1pbmcgfSk7XG5cdH1cblx0X2VtaXQodmFsdWVzKSB7XG5cdFx0Zm9yIChjb25zdCBbbW9kZSwgcGF5bG9hZF0gb2YgdmFsdWVzKSB7XG5cdFx0XHRpZiAodGhpcy5zdHJlYW0ubW9kZXMuaGFzKG1vZGUpKSB0aGlzLnN0cmVhbS5wdXNoKFtcblx0XHRcdFx0dGhpcy5jaGVja3BvaW50TmFtZXNwYWNlLFxuXHRcdFx0XHRtb2RlLFxuXHRcdFx0XHRwYXlsb2FkXG5cdFx0XHRdKTtcblx0XHRcdGlmICgobW9kZSA9PT0gXCJjaGVja3BvaW50c1wiIHx8IG1vZGUgPT09IFwidGFza3NcIikgJiYgdGhpcy5zdHJlYW0ubW9kZXMuaGFzKFwiZGVidWdcIikpIHtcblx0XHRcdFx0Y29uc3Qgc3RlcCA9IG1vZGUgPT09IFwiY2hlY2twb2ludHNcIiA/IHRoaXMuc3RlcCAtIDEgOiB0aGlzLnN0ZXA7XG5cdFx0XHRcdGNvbnN0IHRpbWVzdGFtcCA9ICgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkudG9JU09TdHJpbmcoKTtcblx0XHRcdFx0Y29uc3QgdHlwZSA9ICgoKSA9PiB7XG5cdFx0XHRcdFx0aWYgKG1vZGUgPT09IFwiY2hlY2twb2ludHNcIikgcmV0dXJuIFwiY2hlY2twb2ludFwiO1xuXHRcdFx0XHRcdGVsc2UgaWYgKHR5cGVvZiBwYXlsb2FkID09PSBcIm9iamVjdFwiICYmIHBheWxvYWQgIT0gbnVsbCAmJiBcInJlc3VsdFwiIGluIHBheWxvYWQpIHJldHVybiBcInRhc2tfcmVzdWx0XCI7XG5cdFx0XHRcdFx0ZWxzZSByZXR1cm4gXCJ0YXNrXCI7XG5cdFx0XHRcdH0pKCk7XG5cdFx0XHRcdHRoaXMuc3RyZWFtLnB1c2goW1xuXHRcdFx0XHRcdHRoaXMuY2hlY2twb2ludE5hbWVzcGFjZSxcblx0XHRcdFx0XHRcImRlYnVnXCIsXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0c3RlcCxcblx0XHRcdFx0XHRcdHR5cGUsXG5cdFx0XHRcdFx0XHR0aW1lc3RhbXAsXG5cdFx0XHRcdFx0XHRwYXlsb2FkXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRdKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0X3B1dENoZWNrcG9pbnQoaW5wdXRNZXRhZGF0YSkge1xuXHRcdGNvbnN0IGV4aXRpbmcgPSB0aGlzLmNoZWNrcG9pbnRNZXRhZGF0YSA9PT0gaW5wdXRNZXRhZGF0YTtcblx0XHRjb25zdCBkb0NoZWNrcG9pbnQgPSB0aGlzLmNoZWNrcG9pbnRlciAhPSBudWxsICYmICh0aGlzLmR1cmFiaWxpdHkgIT09IFwiZXhpdFwiIHx8IGV4aXRpbmcpO1xuXHRcdGNvbnN0IHN0b3JlQ2hlY2twb2ludCA9IChjaGVja3BvaW50KSA9PiB7XG5cdFx0XHR0aGlzLnByZXZDaGVja3BvaW50Q29uZmlnID0gdGhpcy5jaGVja3BvaW50Q29uZmlnPy5jb25maWd1cmFibGU/LmNoZWNrcG9pbnRfaWQgPyB0aGlzLmNoZWNrcG9pbnRDb25maWcgOiB2b2lkIDA7XG5cdFx0XHR0aGlzLmNoZWNrcG9pbnRDb25maWcgPSBwYXRjaENvbmZpZ3VyYWJsZSh0aGlzLmNoZWNrcG9pbnRDb25maWcsIHsgW0NPTkZJR19LRVlfQ0hFQ0tQT0lOVF9OU106IHRoaXMuY29uZmlnLmNvbmZpZ3VyYWJsZT8uY2hlY2twb2ludF9ucyA/PyBcIlwiIH0pO1xuXHRcdFx0Y29uc3QgY2hhbm5lbFZlcnNpb25zID0geyAuLi50aGlzLmNoZWNrcG9pbnQuY2hhbm5lbF92ZXJzaW9ucyB9O1xuXHRcdFx0Y29uc3QgbmV3VmVyc2lvbnMgPSBnZXROZXdDaGFubmVsVmVyc2lvbnModGhpcy5jaGVja3BvaW50UHJldmlvdXNWZXJzaW9ucywgY2hhbm5lbFZlcnNpb25zKTtcblx0XHRcdHRoaXMuY2hlY2twb2ludFByZXZpb3VzVmVyc2lvbnMgPSBjaGFubmVsVmVyc2lvbnM7XG5cdFx0XHR0aGlzLl9jaGVja3BvaW50ZXJQdXRBZnRlclByZXZpb3VzKHtcblx0XHRcdFx0Y29uZmlnOiB7IC4uLnRoaXMuY2hlY2twb2ludENvbmZpZyB9LFxuXHRcdFx0XHRjaGVja3BvaW50OiBjb3B5Q2hlY2twb2ludChjaGVja3BvaW50KSxcblx0XHRcdFx0bWV0YWRhdGE6IHsgLi4udGhpcy5jaGVja3BvaW50TWV0YWRhdGEgfSxcblx0XHRcdFx0bmV3VmVyc2lvbnNcblx0XHRcdH0pO1xuXHRcdFx0dGhpcy5jaGVja3BvaW50Q29uZmlnID0ge1xuXHRcdFx0XHQuLi50aGlzLmNoZWNrcG9pbnRDb25maWcsXG5cdFx0XHRcdGNvbmZpZ3VyYWJsZToge1xuXHRcdFx0XHRcdC4uLnRoaXMuY2hlY2twb2ludENvbmZpZy5jb25maWd1cmFibGUsXG5cdFx0XHRcdFx0Y2hlY2twb2ludF9pZDogdGhpcy5jaGVja3BvaW50LmlkXG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fTtcblx0XHRpZiAoIWV4aXRpbmcpIHRoaXMuY2hlY2twb2ludE1ldGFkYXRhID0ge1xuXHRcdFx0Li4uaW5wdXRNZXRhZGF0YSxcblx0XHRcdHN0ZXA6IHRoaXMuc3RlcCxcblx0XHRcdHBhcmVudHM6IHRoaXMuY29uZmlnLmNvbmZpZ3VyYWJsZT8uW0NPTkZJR19LRVlfQ0hFQ0tQT0lOVF9NQVBdID8/IHt9XG5cdFx0fTtcblx0XHR0aGlzLmNoZWNrcG9pbnQgPSBjcmVhdGVDaGVja3BvaW50KHRoaXMuY2hlY2twb2ludCwgZG9DaGVja3BvaW50ID8gdGhpcy5jaGFubmVscyA6IHZvaWQgMCwgdGhpcy5zdGVwLCBleGl0aW5nID8geyBpZDogdGhpcy5jaGVja3BvaW50LmlkIH0gOiB2b2lkIDApO1xuXHRcdGlmIChkb0NoZWNrcG9pbnQpIHN0b3JlQ2hlY2twb2ludCh0aGlzLmNoZWNrcG9pbnQpO1xuXHRcdGlmICghZXhpdGluZykgdGhpcy5zdGVwICs9IDE7XG5cdH1cblx0X2ZsdXNoUGVuZGluZ1dyaXRlcygpIHtcblx0XHRpZiAodGhpcy5jaGVja3BvaW50ZXIgPT0gbnVsbCkgcmV0dXJuO1xuXHRcdGlmICh0aGlzLmNoZWNrcG9pbnRQZW5kaW5nV3JpdGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXHRcdGNvbnN0IGNvbmZpZyA9IHBhdGNoQ29uZmlndXJhYmxlKHRoaXMuY2hlY2twb2ludENvbmZpZywge1xuXHRcdFx0W0NPTkZJR19LRVlfQ0hFQ0tQT0lOVF9OU106IHRoaXMuY29uZmlnLmNvbmZpZ3VyYWJsZT8uY2hlY2twb2ludF9ucyA/PyBcIlwiLFxuXHRcdFx0W0NPTkZJR19LRVlfQ0hFQ0tQT0lOVF9JRF06IHRoaXMuY2hlY2twb2ludC5pZFxuXHRcdH0pO1xuXHRcdGNvbnN0IGJ5VGFzayA9IHt9O1xuXHRcdGZvciAoY29uc3QgW3RpZCwga2V5LCB2YWx1ZV0gb2YgdGhpcy5jaGVja3BvaW50UGVuZGluZ1dyaXRlcykge1xuXHRcdFx0YnlUYXNrW3RpZF0gPz89IFtdO1xuXHRcdFx0YnlUYXNrW3RpZF0ucHVzaChba2V5LCB2YWx1ZV0pO1xuXHRcdH1cblx0XHRmb3IgKGNvbnN0IFt0aWQsIHdzXSBvZiBPYmplY3QuZW50cmllcyhieVRhc2spKSB0aGlzLmNoZWNrcG9pbnRlclByb21pc2VzLnB1c2godGhpcy5jaGVja3BvaW50ZXIucHV0V3JpdGVzKGNvbmZpZywgd3MsIHRpZCkpO1xuXHR9XG5cdF9tYXRjaFdyaXRlcyh0YXNrcykge1xuXHRcdGZvciAoY29uc3QgW3RpZCwgaywgdl0gb2YgdGhpcy5jaGVja3BvaW50UGVuZGluZ1dyaXRlcykge1xuXHRcdFx0aWYgKGsgPT09IEVSUk9SIHx8IGsgPT09IElOVEVSUlVQVCB8fCBrID09PSBSRVNVTUUpIGNvbnRpbnVlO1xuXHRcdFx0Y29uc3QgdGFzayA9IE9iamVjdC52YWx1ZXModGFza3MpLmZpbmQoKHQpID0+IHQuaWQgPT09IHRpZCk7XG5cdFx0XHRpZiAodGFzaykgdGFzay53cml0ZXMucHVzaChbaywgdl0pO1xuXHRcdH1cblx0XHRmb3IgKGNvbnN0IHRhc2sgb2YgT2JqZWN0LnZhbHVlcyh0YXNrcykpIGlmICh0YXNrLndyaXRlcy5sZW5ndGggPiAwKSB0aGlzLl9vdXRwdXRXcml0ZXModGFzay5pZCwgdGFzay53cml0ZXMsIHRydWUpO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IFByZWdlbExvb3AgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxvb3AuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/pregel/loop.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/pregel/messages.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/pregel/messages.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StreamMessagesHandler: () => (/* binding */ StreamMessagesHandler)\n/* harmony export */ });\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _langchain_core_callbacks_base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/callbacks/base */ \"(ssr)/./node_modules/@langchain/core/dist/callbacks/base.js\");\n/* harmony import */ var _langchain_core_messages__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @langchain/core/messages */ \"(ssr)/./node_modules/@langchain/core/dist/messages/index.js\");\n\n\n\n\n//#region src/pregel/messages.ts\nfunction isChatGenerationChunk(x) {\n\treturn (0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_2__.isBaseMessage)(x?.message);\n}\n/**\n* A callback handler that implements stream_mode=messages.\n* Collects messages from (1) chat model stream events and (2) node outputs.\n*/\nvar StreamMessagesHandler = class extends _langchain_core_callbacks_base__WEBPACK_IMPORTED_MODULE_1__.BaseCallbackHandler {\n\tname = \"StreamMessagesHandler\";\n\tstreamFn;\n\tmetadatas = {};\n\tseen = {};\n\temittedChatModelRunIds = {};\n\tstableMessageIdMap = {};\n\tlc_prefer_streaming = true;\n\tconstructor(streamFn) {\n\t\tsuper();\n\t\tthis.streamFn = streamFn;\n\t}\n\t_emit(meta, message, runId, dedupe = false) {\n\t\tif (dedupe && message.id !== void 0 && this.seen[message.id] !== void 0) return;\n\t\tlet messageId = message.id;\n\t\tif (runId != null) if ((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_2__.isToolMessage)(message)) messageId ??= `run-${runId}-tool-${message.tool_call_id}`;\n\t\telse {\n\t\t\tif (messageId == null || messageId === `run-${runId}`) messageId = this.stableMessageIdMap[runId] ?? messageId ?? `run-${runId}`;\n\t\t\tthis.stableMessageIdMap[runId] ??= messageId;\n\t\t}\n\t\tif (messageId !== message.id) {\n\t\t\tmessage.id = messageId;\n\t\t\tmessage.lc_kwargs.id = messageId;\n\t\t}\n\t\tif (message.id != null) this.seen[message.id] = message;\n\t\tthis.streamFn([\n\t\t\tmeta[0],\n\t\t\t\"messages\",\n\t\t\t[message, meta[1]]\n\t\t]);\n\t}\n\thandleChatModelStart(_llm, _messages, runId, _parentRunId, _extraParams, tags, metadata, name) {\n\t\tif (metadata && (!tags || !tags.includes(_constants_js__WEBPACK_IMPORTED_MODULE_0__.TAG_NOSTREAM) && !tags.includes(\"nostream\"))) this.metadatas[runId] = [metadata.langgraph_checkpoint_ns.split(\"|\"), {\n\t\t\ttags,\n\t\t\tname,\n\t\t\t...metadata\n\t\t}];\n\t}\n\thandleLLMNewToken(token, _idx, runId, _parentRunId, _tags, fields) {\n\t\tconst chunk = fields?.chunk;\n\t\tthis.emittedChatModelRunIds[runId] = true;\n\t\tif (this.metadatas[runId] !== void 0) if (isChatGenerationChunk(chunk)) this._emit(this.metadatas[runId], chunk.message, runId);\n\t\telse this._emit(this.metadatas[runId], new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_2__.AIMessageChunk({ content: token }), runId);\n\t}\n\thandleLLMEnd(output, runId) {\n\t\tif (this.metadatas[runId] === void 0) return;\n\t\tif (!this.emittedChatModelRunIds[runId]) {\n\t\t\tconst chatGeneration = output.generations?.[0]?.[0];\n\t\t\tif ((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_2__.isBaseMessage)(chatGeneration?.message)) this._emit(this.metadatas[runId], chatGeneration?.message, runId, true);\n\t\t\tdelete this.emittedChatModelRunIds[runId];\n\t\t}\n\t\tdelete this.metadatas[runId];\n\t\tdelete this.stableMessageIdMap[runId];\n\t}\n\thandleLLMError(_err, runId) {\n\t\tdelete this.metadatas[runId];\n\t}\n\thandleChainStart(_chain, inputs, runId, _parentRunId, tags, metadata, _runType, name) {\n\t\tif (metadata !== void 0 && name === metadata.langgraph_node && (tags === void 0 || !tags.includes(_constants_js__WEBPACK_IMPORTED_MODULE_0__.TAG_HIDDEN))) {\n\t\t\tthis.metadatas[runId] = [metadata.langgraph_checkpoint_ns.split(\"|\"), {\n\t\t\t\ttags,\n\t\t\t\tname,\n\t\t\t\t...metadata\n\t\t\t}];\n\t\t\tif (typeof inputs === \"object\") {\n\t\t\t\tfor (const value of Object.values(inputs)) if (((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_2__.isBaseMessage)(value) || (0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_2__.isBaseMessageChunk)(value)) && value.id !== void 0) this.seen[value.id] = value;\n\t\t\t\telse if (Array.isArray(value)) {\n\t\t\t\t\tfor (const item of value) if (((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_2__.isBaseMessage)(item) || (0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_2__.isBaseMessageChunk)(item)) && item.id !== void 0) this.seen[item.id] = item;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\thandleChainEnd(outputs, runId) {\n\t\tconst metadata = this.metadatas[runId];\n\t\tdelete this.metadatas[runId];\n\t\tif (metadata !== void 0) {\n\t\t\tif ((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_2__.isBaseMessage)(outputs)) this._emit(metadata, outputs, runId, true);\n\t\t\telse if (Array.isArray(outputs)) {\n\t\t\t\tfor (const value of outputs) if ((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_2__.isBaseMessage)(value)) this._emit(metadata, value, runId, true);\n\t\t\t} else if (outputs != null && typeof outputs === \"object\") {\n\t\t\t\tfor (const value of Object.values(outputs)) if ((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_2__.isBaseMessage)(value)) this._emit(metadata, value, runId, true);\n\t\t\t\telse if (Array.isArray(value)) {\n\t\t\t\t\tfor (const item of value) if ((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_2__.isBaseMessage)(item)) this._emit(metadata, item, runId, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\thandleChainError(_err, runId) {\n\t\tdelete this.metadatas[runId];\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=messages.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvbWVzc2FnZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUEyRDtBQUNVO0FBQ3VDOztBQUU1RztBQUNBO0FBQ0EsUUFBUSx1RUFBYTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLCtFQUFtQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVFQUFhLGdDQUFnQyxNQUFNLFFBQVEscUJBQXFCO0FBQ3pHO0FBQ0EsaURBQWlELE1BQU0scUVBQXFFLE1BQU07QUFDbEk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyx1REFBWTtBQUN2RDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxvRUFBYyxHQUFHLGdCQUFnQjtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyx1RUFBYTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvR0FBb0cscURBQVU7QUFDOUc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxvREFBb0QsdUVBQWEsV0FBVyw0RUFBa0I7QUFDOUY7QUFDQSxvQ0FBb0MsdUVBQWEsVUFBVSw0RUFBa0I7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sdUVBQWE7QUFDcEI7QUFDQSxxQ0FBcUMsdUVBQWE7QUFDbEQsS0FBSztBQUNMLG9EQUFvRCx1RUFBYTtBQUNqRTtBQUNBLG1DQUFtQyx1RUFBYTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ2lDO0FBQ2pDIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvbWVzc2FnZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVEFHX0hJRERFTiwgVEFHX05PU1RSRUFNIH0gZnJvbSBcIi4uL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgQmFzZUNhbGxiYWNrSGFuZGxlciB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvY2FsbGJhY2tzL2Jhc2VcIjtcbmltcG9ydCB7IEFJTWVzc2FnZUNodW5rLCBpc0Jhc2VNZXNzYWdlLCBpc0Jhc2VNZXNzYWdlQ2h1bmssIGlzVG9vbE1lc3NhZ2UgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL21lc3NhZ2VzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcHJlZ2VsL21lc3NhZ2VzLnRzXG5mdW5jdGlvbiBpc0NoYXRHZW5lcmF0aW9uQ2h1bmsoeCkge1xuXHRyZXR1cm4gaXNCYXNlTWVzc2FnZSh4Py5tZXNzYWdlKTtcbn1cbi8qKlxuKiBBIGNhbGxiYWNrIGhhbmRsZXIgdGhhdCBpbXBsZW1lbnRzIHN0cmVhbV9tb2RlPW1lc3NhZ2VzLlxuKiBDb2xsZWN0cyBtZXNzYWdlcyBmcm9tICgxKSBjaGF0IG1vZGVsIHN0cmVhbSBldmVudHMgYW5kICgyKSBub2RlIG91dHB1dHMuXG4qL1xudmFyIFN0cmVhbU1lc3NhZ2VzSGFuZGxlciA9IGNsYXNzIGV4dGVuZHMgQmFzZUNhbGxiYWNrSGFuZGxlciB7XG5cdG5hbWUgPSBcIlN0cmVhbU1lc3NhZ2VzSGFuZGxlclwiO1xuXHRzdHJlYW1Gbjtcblx0bWV0YWRhdGFzID0ge307XG5cdHNlZW4gPSB7fTtcblx0ZW1pdHRlZENoYXRNb2RlbFJ1bklkcyA9IHt9O1xuXHRzdGFibGVNZXNzYWdlSWRNYXAgPSB7fTtcblx0bGNfcHJlZmVyX3N0cmVhbWluZyA9IHRydWU7XG5cdGNvbnN0cnVjdG9yKHN0cmVhbUZuKSB7XG5cdFx0c3VwZXIoKTtcblx0XHR0aGlzLnN0cmVhbUZuID0gc3RyZWFtRm47XG5cdH1cblx0X2VtaXQobWV0YSwgbWVzc2FnZSwgcnVuSWQsIGRlZHVwZSA9IGZhbHNlKSB7XG5cdFx0aWYgKGRlZHVwZSAmJiBtZXNzYWdlLmlkICE9PSB2b2lkIDAgJiYgdGhpcy5zZWVuW21lc3NhZ2UuaWRdICE9PSB2b2lkIDApIHJldHVybjtcblx0XHRsZXQgbWVzc2FnZUlkID0gbWVzc2FnZS5pZDtcblx0XHRpZiAocnVuSWQgIT0gbnVsbCkgaWYgKGlzVG9vbE1lc3NhZ2UobWVzc2FnZSkpIG1lc3NhZ2VJZCA/Pz0gYHJ1bi0ke3J1bklkfS10b29sLSR7bWVzc2FnZS50b29sX2NhbGxfaWR9YDtcblx0XHRlbHNlIHtcblx0XHRcdGlmIChtZXNzYWdlSWQgPT0gbnVsbCB8fCBtZXNzYWdlSWQgPT09IGBydW4tJHtydW5JZH1gKSBtZXNzYWdlSWQgPSB0aGlzLnN0YWJsZU1lc3NhZ2VJZE1hcFtydW5JZF0gPz8gbWVzc2FnZUlkID8/IGBydW4tJHtydW5JZH1gO1xuXHRcdFx0dGhpcy5zdGFibGVNZXNzYWdlSWRNYXBbcnVuSWRdID8/PSBtZXNzYWdlSWQ7XG5cdFx0fVxuXHRcdGlmIChtZXNzYWdlSWQgIT09IG1lc3NhZ2UuaWQpIHtcblx0XHRcdG1lc3NhZ2UuaWQgPSBtZXNzYWdlSWQ7XG5cdFx0XHRtZXNzYWdlLmxjX2t3YXJncy5pZCA9IG1lc3NhZ2VJZDtcblx0XHR9XG5cdFx0aWYgKG1lc3NhZ2UuaWQgIT0gbnVsbCkgdGhpcy5zZWVuW21lc3NhZ2UuaWRdID0gbWVzc2FnZTtcblx0XHR0aGlzLnN0cmVhbUZuKFtcblx0XHRcdG1ldGFbMF0sXG5cdFx0XHRcIm1lc3NhZ2VzXCIsXG5cdFx0XHRbbWVzc2FnZSwgbWV0YVsxXV1cblx0XHRdKTtcblx0fVxuXHRoYW5kbGVDaGF0TW9kZWxTdGFydChfbGxtLCBfbWVzc2FnZXMsIHJ1bklkLCBfcGFyZW50UnVuSWQsIF9leHRyYVBhcmFtcywgdGFncywgbWV0YWRhdGEsIG5hbWUpIHtcblx0XHRpZiAobWV0YWRhdGEgJiYgKCF0YWdzIHx8ICF0YWdzLmluY2x1ZGVzKFRBR19OT1NUUkVBTSkgJiYgIXRhZ3MuaW5jbHVkZXMoXCJub3N0cmVhbVwiKSkpIHRoaXMubWV0YWRhdGFzW3J1bklkXSA9IFttZXRhZGF0YS5sYW5nZ3JhcGhfY2hlY2twb2ludF9ucy5zcGxpdChcInxcIiksIHtcblx0XHRcdHRhZ3MsXG5cdFx0XHRuYW1lLFxuXHRcdFx0Li4ubWV0YWRhdGFcblx0XHR9XTtcblx0fVxuXHRoYW5kbGVMTE1OZXdUb2tlbih0b2tlbiwgX2lkeCwgcnVuSWQsIF9wYXJlbnRSdW5JZCwgX3RhZ3MsIGZpZWxkcykge1xuXHRcdGNvbnN0IGNodW5rID0gZmllbGRzPy5jaHVuaztcblx0XHR0aGlzLmVtaXR0ZWRDaGF0TW9kZWxSdW5JZHNbcnVuSWRdID0gdHJ1ZTtcblx0XHRpZiAodGhpcy5tZXRhZGF0YXNbcnVuSWRdICE9PSB2b2lkIDApIGlmIChpc0NoYXRHZW5lcmF0aW9uQ2h1bmsoY2h1bmspKSB0aGlzLl9lbWl0KHRoaXMubWV0YWRhdGFzW3J1bklkXSwgY2h1bmsubWVzc2FnZSwgcnVuSWQpO1xuXHRcdGVsc2UgdGhpcy5fZW1pdCh0aGlzLm1ldGFkYXRhc1tydW5JZF0sIG5ldyBBSU1lc3NhZ2VDaHVuayh7IGNvbnRlbnQ6IHRva2VuIH0pLCBydW5JZCk7XG5cdH1cblx0aGFuZGxlTExNRW5kKG91dHB1dCwgcnVuSWQpIHtcblx0XHRpZiAodGhpcy5tZXRhZGF0YXNbcnVuSWRdID09PSB2b2lkIDApIHJldHVybjtcblx0XHRpZiAoIXRoaXMuZW1pdHRlZENoYXRNb2RlbFJ1bklkc1tydW5JZF0pIHtcblx0XHRcdGNvbnN0IGNoYXRHZW5lcmF0aW9uID0gb3V0cHV0LmdlbmVyYXRpb25zPy5bMF0/LlswXTtcblx0XHRcdGlmIChpc0Jhc2VNZXNzYWdlKGNoYXRHZW5lcmF0aW9uPy5tZXNzYWdlKSkgdGhpcy5fZW1pdCh0aGlzLm1ldGFkYXRhc1tydW5JZF0sIGNoYXRHZW5lcmF0aW9uPy5tZXNzYWdlLCBydW5JZCwgdHJ1ZSk7XG5cdFx0XHRkZWxldGUgdGhpcy5lbWl0dGVkQ2hhdE1vZGVsUnVuSWRzW3J1bklkXTtcblx0XHR9XG5cdFx0ZGVsZXRlIHRoaXMubWV0YWRhdGFzW3J1bklkXTtcblx0XHRkZWxldGUgdGhpcy5zdGFibGVNZXNzYWdlSWRNYXBbcnVuSWRdO1xuXHR9XG5cdGhhbmRsZUxMTUVycm9yKF9lcnIsIHJ1bklkKSB7XG5cdFx0ZGVsZXRlIHRoaXMubWV0YWRhdGFzW3J1bklkXTtcblx0fVxuXHRoYW5kbGVDaGFpblN0YXJ0KF9jaGFpbiwgaW5wdXRzLCBydW5JZCwgX3BhcmVudFJ1bklkLCB0YWdzLCBtZXRhZGF0YSwgX3J1blR5cGUsIG5hbWUpIHtcblx0XHRpZiAobWV0YWRhdGEgIT09IHZvaWQgMCAmJiBuYW1lID09PSBtZXRhZGF0YS5sYW5nZ3JhcGhfbm9kZSAmJiAodGFncyA9PT0gdm9pZCAwIHx8ICF0YWdzLmluY2x1ZGVzKFRBR19ISURERU4pKSkge1xuXHRcdFx0dGhpcy5tZXRhZGF0YXNbcnVuSWRdID0gW21ldGFkYXRhLmxhbmdncmFwaF9jaGVja3BvaW50X25zLnNwbGl0KFwifFwiKSwge1xuXHRcdFx0XHR0YWdzLFxuXHRcdFx0XHRuYW1lLFxuXHRcdFx0XHQuLi5tZXRhZGF0YVxuXHRcdFx0fV07XG5cdFx0XHRpZiAodHlwZW9mIGlucHV0cyA9PT0gXCJvYmplY3RcIikge1xuXHRcdFx0XHRmb3IgKGNvbnN0IHZhbHVlIG9mIE9iamVjdC52YWx1ZXMoaW5wdXRzKSkgaWYgKChpc0Jhc2VNZXNzYWdlKHZhbHVlKSB8fCBpc0Jhc2VNZXNzYWdlQ2h1bmsodmFsdWUpKSAmJiB2YWx1ZS5pZCAhPT0gdm9pZCAwKSB0aGlzLnNlZW5bdmFsdWUuaWRdID0gdmFsdWU7XG5cdFx0XHRcdGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBpdGVtIG9mIHZhbHVlKSBpZiAoKGlzQmFzZU1lc3NhZ2UoaXRlbSkgfHwgaXNCYXNlTWVzc2FnZUNodW5rKGl0ZW0pKSAmJiBpdGVtLmlkICE9PSB2b2lkIDApIHRoaXMuc2VlbltpdGVtLmlkXSA9IGl0ZW07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblx0aGFuZGxlQ2hhaW5FbmQob3V0cHV0cywgcnVuSWQpIHtcblx0XHRjb25zdCBtZXRhZGF0YSA9IHRoaXMubWV0YWRhdGFzW3J1bklkXTtcblx0XHRkZWxldGUgdGhpcy5tZXRhZGF0YXNbcnVuSWRdO1xuXHRcdGlmIChtZXRhZGF0YSAhPT0gdm9pZCAwKSB7XG5cdFx0XHRpZiAoaXNCYXNlTWVzc2FnZShvdXRwdXRzKSkgdGhpcy5fZW1pdChtZXRhZGF0YSwgb3V0cHV0cywgcnVuSWQsIHRydWUpO1xuXHRcdFx0ZWxzZSBpZiAoQXJyYXkuaXNBcnJheShvdXRwdXRzKSkge1xuXHRcdFx0XHRmb3IgKGNvbnN0IHZhbHVlIG9mIG91dHB1dHMpIGlmIChpc0Jhc2VNZXNzYWdlKHZhbHVlKSkgdGhpcy5fZW1pdChtZXRhZGF0YSwgdmFsdWUsIHJ1bklkLCB0cnVlKTtcblx0XHRcdH0gZWxzZSBpZiAob3V0cHV0cyAhPSBudWxsICYmIHR5cGVvZiBvdXRwdXRzID09PSBcIm9iamVjdFwiKSB7XG5cdFx0XHRcdGZvciAoY29uc3QgdmFsdWUgb2YgT2JqZWN0LnZhbHVlcyhvdXRwdXRzKSkgaWYgKGlzQmFzZU1lc3NhZ2UodmFsdWUpKSB0aGlzLl9lbWl0KG1ldGFkYXRhLCB2YWx1ZSwgcnVuSWQsIHRydWUpO1xuXHRcdFx0XHRlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuXHRcdFx0XHRcdGZvciAoY29uc3QgaXRlbSBvZiB2YWx1ZSkgaWYgKGlzQmFzZU1lc3NhZ2UoaXRlbSkpIHRoaXMuX2VtaXQobWV0YWRhdGEsIGl0ZW0sIHJ1bklkLCB0cnVlKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRoYW5kbGVDaGFpbkVycm9yKF9lcnIsIHJ1bklkKSB7XG5cdFx0ZGVsZXRlIHRoaXMubWV0YWRhdGFzW3J1bklkXTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBTdHJlYW1NZXNzYWdlc0hhbmRsZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lc3NhZ2VzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/pregel/messages.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/pregel/read.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/pregel/read.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChannelRead: () => (/* binding */ ChannelRead),\n/* harmony export */   PregelNode: () => (/* binding */ PregelNode)\n/* harmony export */ });\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/utils.js\");\n/* harmony import */ var _write_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./write.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/write.js\");\n/* harmony import */ var _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @langchain/core/runnables */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/index.js\");\n\n\n\n\n\n//#region src/pregel/read.ts\nvar ChannelRead = class ChannelRead extends _utils_js__WEBPACK_IMPORTED_MODULE_1__.RunnableCallable {\n\tlc_graph_name = \"ChannelRead\";\n\tchannel;\n\tfresh = false;\n\tmapper;\n\tconstructor(channel, mapper, fresh = false) {\n\t\tsuper({ func: (_, config) => ChannelRead.doRead(config, this.channel, this.fresh, this.mapper) });\n\t\tthis.fresh = fresh;\n\t\tthis.mapper = mapper;\n\t\tthis.channel = channel;\n\t\tthis.name = Array.isArray(channel) ? `ChannelRead<${channel.join(\",\")}>` : `ChannelRead<${channel}>`;\n\t}\n\tstatic doRead(config, channel, fresh, mapper) {\n\t\tconst read = config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_0__.CONFIG_KEY_READ];\n\t\tif (!read) throw new Error(\"Runnable is not configured with a read function. Make sure to call in the context of a Pregel process\");\n\t\tif (mapper) return mapper(read(channel, fresh));\n\t\telse return read(channel, fresh);\n\t}\n};\nconst defaultRunnableBound = /* @__PURE__ */ new _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_3__.RunnablePassthrough();\nvar PregelNode = class PregelNode extends _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_3__.RunnableBinding {\n\tlc_graph_name = \"PregelNode\";\n\tchannels;\n\ttriggers = [];\n\tmapper;\n\twriters = [];\n\tbound = defaultRunnableBound;\n\tkwargs = {};\n\tmetadata = {};\n\ttags = [];\n\tretryPolicy;\n\tcachePolicy;\n\tsubgraphs;\n\tends;\n\tconstructor(fields) {\n\t\tconst { channels, triggers, mapper, writers, bound, kwargs, metadata, retryPolicy, cachePolicy, tags, subgraphs, ends } = fields;\n\t\tconst mergedTags = [...fields.config?.tags ? fields.config.tags : [], ...tags ?? []];\n\t\tsuper({\n\t\t\t...fields,\n\t\t\tbound: fields.bound ?? defaultRunnableBound,\n\t\t\tconfig: {\n\t\t\t\t...fields.config ? fields.config : {},\n\t\t\t\ttags: mergedTags\n\t\t\t}\n\t\t});\n\t\tthis.channels = channels;\n\t\tthis.triggers = triggers;\n\t\tthis.mapper = mapper;\n\t\tthis.writers = writers ?? this.writers;\n\t\tthis.bound = bound ?? this.bound;\n\t\tthis.kwargs = kwargs ?? this.kwargs;\n\t\tthis.metadata = metadata ?? this.metadata;\n\t\tthis.tags = mergedTags;\n\t\tthis.retryPolicy = retryPolicy;\n\t\tthis.cachePolicy = cachePolicy;\n\t\tthis.subgraphs = subgraphs;\n\t\tthis.ends = ends;\n\t}\n\tgetWriters() {\n\t\tconst newWriters = [...this.writers];\n\t\twhile (newWriters.length > 1 && newWriters[newWriters.length - 1] instanceof _write_js__WEBPACK_IMPORTED_MODULE_2__.ChannelWrite && newWriters[newWriters.length - 2] instanceof _write_js__WEBPACK_IMPORTED_MODULE_2__.ChannelWrite) {\n\t\t\tconst endWriters = newWriters.slice(-2);\n\t\t\tconst combinedWrites = endWriters[0].writes.concat(endWriters[1].writes);\n\t\t\tnewWriters[newWriters.length - 2] = new _write_js__WEBPACK_IMPORTED_MODULE_2__.ChannelWrite(combinedWrites, endWriters[0].config?.tags);\n\t\t\tnewWriters.pop();\n\t\t}\n\t\treturn newWriters;\n\t}\n\tgetNode() {\n\t\tconst writers = this.getWriters();\n\t\tif (this.bound === defaultRunnableBound && writers.length === 0) return;\n\t\telse if (this.bound === defaultRunnableBound && writers.length === 1) return writers[0];\n\t\telse if (this.bound === defaultRunnableBound) return new _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_3__.RunnableSequence({\n\t\t\tfirst: writers[0],\n\t\t\tmiddle: writers.slice(1, writers.length - 1),\n\t\t\tlast: writers[writers.length - 1],\n\t\t\tomitSequenceTags: true\n\t\t});\n\t\telse if (writers.length > 0) return new _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_3__.RunnableSequence({\n\t\t\tfirst: this.bound,\n\t\t\tmiddle: writers.slice(0, writers.length - 1),\n\t\t\tlast: writers[writers.length - 1],\n\t\t\tomitSequenceTags: true\n\t\t});\n\t\telse return this.bound;\n\t}\n\tjoin(channels) {\n\t\tif (!Array.isArray(channels)) throw new Error(\"channels must be a list\");\n\t\tif (typeof this.channels !== \"object\") throw new Error(\"all channels must be named when using .join()\");\n\t\treturn new PregelNode({\n\t\t\tchannels: {\n\t\t\t\t...this.channels,\n\t\t\t\t...Object.fromEntries(channels.map((chan) => [chan, chan]))\n\t\t\t},\n\t\t\ttriggers: this.triggers,\n\t\t\tmapper: this.mapper,\n\t\t\twriters: this.writers,\n\t\t\tbound: this.bound,\n\t\t\tkwargs: this.kwargs,\n\t\t\tconfig: this.config,\n\t\t\tretryPolicy: this.retryPolicy,\n\t\t\tcachePolicy: this.cachePolicy\n\t\t});\n\t}\n\tpipe(coerceable) {\n\t\tif (_write_js__WEBPACK_IMPORTED_MODULE_2__.ChannelWrite.isWriter(coerceable)) return new PregelNode({\n\t\t\tchannels: this.channels,\n\t\t\ttriggers: this.triggers,\n\t\t\tmapper: this.mapper,\n\t\t\twriters: [...this.writers, coerceable],\n\t\t\tbound: this.bound,\n\t\t\tconfig: this.config,\n\t\t\tkwargs: this.kwargs,\n\t\t\tretryPolicy: this.retryPolicy,\n\t\t\tcachePolicy: this.cachePolicy\n\t\t});\n\t\telse if (this.bound === defaultRunnableBound) return new PregelNode({\n\t\t\tchannels: this.channels,\n\t\t\ttriggers: this.triggers,\n\t\t\tmapper: this.mapper,\n\t\t\twriters: this.writers,\n\t\t\tbound: (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_3__._coerceToRunnable)(coerceable),\n\t\t\tconfig: this.config,\n\t\t\tkwargs: this.kwargs,\n\t\t\tretryPolicy: this.retryPolicy,\n\t\t\tcachePolicy: this.cachePolicy\n\t\t});\n\t\telse return new PregelNode({\n\t\t\tchannels: this.channels,\n\t\t\ttriggers: this.triggers,\n\t\t\tmapper: this.mapper,\n\t\t\twriters: this.writers,\n\t\t\tbound: this.bound.pipe(coerceable),\n\t\t\tconfig: this.config,\n\t\t\tkwargs: this.kwargs,\n\t\t\tretryPolicy: this.retryPolicy,\n\t\t\tcachePolicy: this.cachePolicy\n\t\t});\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=read.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvcmVhZC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBa0Q7QUFDSDtBQUNMO0FBQzRFOztBQUV0SDtBQUNBLDRDQUE0Qyx1REFBZ0I7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsd0ZBQXdGO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxrQkFBa0Isb0JBQW9CLFFBQVE7QUFDcEc7QUFDQTtBQUNBLHFDQUFxQywwREFBZTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELDBFQUFtQjtBQUNwRSwwQ0FBMEMsc0VBQWU7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsZ0hBQWdIO0FBQzFIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRUFBK0UsbURBQVksaURBQWlELG1EQUFZO0FBQ3hKO0FBQ0E7QUFDQSwyQ0FBMkMsbURBQVk7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCx1RUFBZ0I7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsMENBQTBDLHVFQUFnQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsTUFBTSxtREFBWTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsNEVBQWlCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDbUM7QUFDbkMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC9yZWFkLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENPTkZJR19LRVlfUkVBRCB9IGZyb20gXCIuLi9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7IFJ1bm5hYmxlQ2FsbGFibGUgfSBmcm9tIFwiLi4vdXRpbHMuanNcIjtcbmltcG9ydCB7IENoYW5uZWxXcml0ZSB9IGZyb20gXCIuL3dyaXRlLmpzXCI7XG5pbXBvcnQgeyBSdW5uYWJsZUJpbmRpbmcsIFJ1bm5hYmxlUGFzc3Rocm91Z2gsIFJ1bm5hYmxlU2VxdWVuY2UsIF9jb2VyY2VUb1J1bm5hYmxlIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9ydW5uYWJsZXNcIjtcblxuLy8jcmVnaW9uIHNyYy9wcmVnZWwvcmVhZC50c1xudmFyIENoYW5uZWxSZWFkID0gY2xhc3MgQ2hhbm5lbFJlYWQgZXh0ZW5kcyBSdW5uYWJsZUNhbGxhYmxlIHtcblx0bGNfZ3JhcGhfbmFtZSA9IFwiQ2hhbm5lbFJlYWRcIjtcblx0Y2hhbm5lbDtcblx0ZnJlc2ggPSBmYWxzZTtcblx0bWFwcGVyO1xuXHRjb25zdHJ1Y3RvcihjaGFubmVsLCBtYXBwZXIsIGZyZXNoID0gZmFsc2UpIHtcblx0XHRzdXBlcih7IGZ1bmM6IChfLCBjb25maWcpID0+IENoYW5uZWxSZWFkLmRvUmVhZChjb25maWcsIHRoaXMuY2hhbm5lbCwgdGhpcy5mcmVzaCwgdGhpcy5tYXBwZXIpIH0pO1xuXHRcdHRoaXMuZnJlc2ggPSBmcmVzaDtcblx0XHR0aGlzLm1hcHBlciA9IG1hcHBlcjtcblx0XHR0aGlzLmNoYW5uZWwgPSBjaGFubmVsO1xuXHRcdHRoaXMubmFtZSA9IEFycmF5LmlzQXJyYXkoY2hhbm5lbCkgPyBgQ2hhbm5lbFJlYWQ8JHtjaGFubmVsLmpvaW4oXCIsXCIpfT5gIDogYENoYW5uZWxSZWFkPCR7Y2hhbm5lbH0+YDtcblx0fVxuXHRzdGF0aWMgZG9SZWFkKGNvbmZpZywgY2hhbm5lbCwgZnJlc2gsIG1hcHBlcikge1xuXHRcdGNvbnN0IHJlYWQgPSBjb25maWcuY29uZmlndXJhYmxlPy5bQ09ORklHX0tFWV9SRUFEXTtcblx0XHRpZiAoIXJlYWQpIHRocm93IG5ldyBFcnJvcihcIlJ1bm5hYmxlIGlzIG5vdCBjb25maWd1cmVkIHdpdGggYSByZWFkIGZ1bmN0aW9uLiBNYWtlIHN1cmUgdG8gY2FsbCBpbiB0aGUgY29udGV4dCBvZiBhIFByZWdlbCBwcm9jZXNzXCIpO1xuXHRcdGlmIChtYXBwZXIpIHJldHVybiBtYXBwZXIocmVhZChjaGFubmVsLCBmcmVzaCkpO1xuXHRcdGVsc2UgcmV0dXJuIHJlYWQoY2hhbm5lbCwgZnJlc2gpO1xuXHR9XG59O1xuY29uc3QgZGVmYXVsdFJ1bm5hYmxlQm91bmQgPSAvKiBAX19QVVJFX18gKi8gbmV3IFJ1bm5hYmxlUGFzc3Rocm91Z2goKTtcbnZhciBQcmVnZWxOb2RlID0gY2xhc3MgUHJlZ2VsTm9kZSBleHRlbmRzIFJ1bm5hYmxlQmluZGluZyB7XG5cdGxjX2dyYXBoX25hbWUgPSBcIlByZWdlbE5vZGVcIjtcblx0Y2hhbm5lbHM7XG5cdHRyaWdnZXJzID0gW107XG5cdG1hcHBlcjtcblx0d3JpdGVycyA9IFtdO1xuXHRib3VuZCA9IGRlZmF1bHRSdW5uYWJsZUJvdW5kO1xuXHRrd2FyZ3MgPSB7fTtcblx0bWV0YWRhdGEgPSB7fTtcblx0dGFncyA9IFtdO1xuXHRyZXRyeVBvbGljeTtcblx0Y2FjaGVQb2xpY3k7XG5cdHN1YmdyYXBocztcblx0ZW5kcztcblx0Y29uc3RydWN0b3IoZmllbGRzKSB7XG5cdFx0Y29uc3QgeyBjaGFubmVscywgdHJpZ2dlcnMsIG1hcHBlciwgd3JpdGVycywgYm91bmQsIGt3YXJncywgbWV0YWRhdGEsIHJldHJ5UG9saWN5LCBjYWNoZVBvbGljeSwgdGFncywgc3ViZ3JhcGhzLCBlbmRzIH0gPSBmaWVsZHM7XG5cdFx0Y29uc3QgbWVyZ2VkVGFncyA9IFsuLi5maWVsZHMuY29uZmlnPy50YWdzID8gZmllbGRzLmNvbmZpZy50YWdzIDogW10sIC4uLnRhZ3MgPz8gW11dO1xuXHRcdHN1cGVyKHtcblx0XHRcdC4uLmZpZWxkcyxcblx0XHRcdGJvdW5kOiBmaWVsZHMuYm91bmQgPz8gZGVmYXVsdFJ1bm5hYmxlQm91bmQsXG5cdFx0XHRjb25maWc6IHtcblx0XHRcdFx0Li4uZmllbGRzLmNvbmZpZyA/IGZpZWxkcy5jb25maWcgOiB7fSxcblx0XHRcdFx0dGFnczogbWVyZ2VkVGFnc1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHRoaXMuY2hhbm5lbHMgPSBjaGFubmVscztcblx0XHR0aGlzLnRyaWdnZXJzID0gdHJpZ2dlcnM7XG5cdFx0dGhpcy5tYXBwZXIgPSBtYXBwZXI7XG5cdFx0dGhpcy53cml0ZXJzID0gd3JpdGVycyA/PyB0aGlzLndyaXRlcnM7XG5cdFx0dGhpcy5ib3VuZCA9IGJvdW5kID8/IHRoaXMuYm91bmQ7XG5cdFx0dGhpcy5rd2FyZ3MgPSBrd2FyZ3MgPz8gdGhpcy5rd2FyZ3M7XG5cdFx0dGhpcy5tZXRhZGF0YSA9IG1ldGFkYXRhID8/IHRoaXMubWV0YWRhdGE7XG5cdFx0dGhpcy50YWdzID0gbWVyZ2VkVGFncztcblx0XHR0aGlzLnJldHJ5UG9saWN5ID0gcmV0cnlQb2xpY3k7XG5cdFx0dGhpcy5jYWNoZVBvbGljeSA9IGNhY2hlUG9saWN5O1xuXHRcdHRoaXMuc3ViZ3JhcGhzID0gc3ViZ3JhcGhzO1xuXHRcdHRoaXMuZW5kcyA9IGVuZHM7XG5cdH1cblx0Z2V0V3JpdGVycygpIHtcblx0XHRjb25zdCBuZXdXcml0ZXJzID0gWy4uLnRoaXMud3JpdGVyc107XG5cdFx0d2hpbGUgKG5ld1dyaXRlcnMubGVuZ3RoID4gMSAmJiBuZXdXcml0ZXJzW25ld1dyaXRlcnMubGVuZ3RoIC0gMV0gaW5zdGFuY2VvZiBDaGFubmVsV3JpdGUgJiYgbmV3V3JpdGVyc1tuZXdXcml0ZXJzLmxlbmd0aCAtIDJdIGluc3RhbmNlb2YgQ2hhbm5lbFdyaXRlKSB7XG5cdFx0XHRjb25zdCBlbmRXcml0ZXJzID0gbmV3V3JpdGVycy5zbGljZSgtMik7XG5cdFx0XHRjb25zdCBjb21iaW5lZFdyaXRlcyA9IGVuZFdyaXRlcnNbMF0ud3JpdGVzLmNvbmNhdChlbmRXcml0ZXJzWzFdLndyaXRlcyk7XG5cdFx0XHRuZXdXcml0ZXJzW25ld1dyaXRlcnMubGVuZ3RoIC0gMl0gPSBuZXcgQ2hhbm5lbFdyaXRlKGNvbWJpbmVkV3JpdGVzLCBlbmRXcml0ZXJzWzBdLmNvbmZpZz8udGFncyk7XG5cdFx0XHRuZXdXcml0ZXJzLnBvcCgpO1xuXHRcdH1cblx0XHRyZXR1cm4gbmV3V3JpdGVycztcblx0fVxuXHRnZXROb2RlKCkge1xuXHRcdGNvbnN0IHdyaXRlcnMgPSB0aGlzLmdldFdyaXRlcnMoKTtcblx0XHRpZiAodGhpcy5ib3VuZCA9PT0gZGVmYXVsdFJ1bm5hYmxlQm91bmQgJiYgd3JpdGVycy5sZW5ndGggPT09IDApIHJldHVybjtcblx0XHRlbHNlIGlmICh0aGlzLmJvdW5kID09PSBkZWZhdWx0UnVubmFibGVCb3VuZCAmJiB3cml0ZXJzLmxlbmd0aCA9PT0gMSkgcmV0dXJuIHdyaXRlcnNbMF07XG5cdFx0ZWxzZSBpZiAodGhpcy5ib3VuZCA9PT0gZGVmYXVsdFJ1bm5hYmxlQm91bmQpIHJldHVybiBuZXcgUnVubmFibGVTZXF1ZW5jZSh7XG5cdFx0XHRmaXJzdDogd3JpdGVyc1swXSxcblx0XHRcdG1pZGRsZTogd3JpdGVycy5zbGljZSgxLCB3cml0ZXJzLmxlbmd0aCAtIDEpLFxuXHRcdFx0bGFzdDogd3JpdGVyc1t3cml0ZXJzLmxlbmd0aCAtIDFdLFxuXHRcdFx0b21pdFNlcXVlbmNlVGFnczogdHJ1ZVxuXHRcdH0pO1xuXHRcdGVsc2UgaWYgKHdyaXRlcnMubGVuZ3RoID4gMCkgcmV0dXJuIG5ldyBSdW5uYWJsZVNlcXVlbmNlKHtcblx0XHRcdGZpcnN0OiB0aGlzLmJvdW5kLFxuXHRcdFx0bWlkZGxlOiB3cml0ZXJzLnNsaWNlKDAsIHdyaXRlcnMubGVuZ3RoIC0gMSksXG5cdFx0XHRsYXN0OiB3cml0ZXJzW3dyaXRlcnMubGVuZ3RoIC0gMV0sXG5cdFx0XHRvbWl0U2VxdWVuY2VUYWdzOiB0cnVlXG5cdFx0fSk7XG5cdFx0ZWxzZSByZXR1cm4gdGhpcy5ib3VuZDtcblx0fVxuXHRqb2luKGNoYW5uZWxzKSB7XG5cdFx0aWYgKCFBcnJheS5pc0FycmF5KGNoYW5uZWxzKSkgdGhyb3cgbmV3IEVycm9yKFwiY2hhbm5lbHMgbXVzdCBiZSBhIGxpc3RcIik7XG5cdFx0aWYgKHR5cGVvZiB0aGlzLmNoYW5uZWxzICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJhbGwgY2hhbm5lbHMgbXVzdCBiZSBuYW1lZCB3aGVuIHVzaW5nIC5qb2luKClcIik7XG5cdFx0cmV0dXJuIG5ldyBQcmVnZWxOb2RlKHtcblx0XHRcdGNoYW5uZWxzOiB7XG5cdFx0XHRcdC4uLnRoaXMuY2hhbm5lbHMsXG5cdFx0XHRcdC4uLk9iamVjdC5mcm9tRW50cmllcyhjaGFubmVscy5tYXAoKGNoYW4pID0+IFtjaGFuLCBjaGFuXSkpXG5cdFx0XHR9LFxuXHRcdFx0dHJpZ2dlcnM6IHRoaXMudHJpZ2dlcnMsXG5cdFx0XHRtYXBwZXI6IHRoaXMubWFwcGVyLFxuXHRcdFx0d3JpdGVyczogdGhpcy53cml0ZXJzLFxuXHRcdFx0Ym91bmQ6IHRoaXMuYm91bmQsXG5cdFx0XHRrd2FyZ3M6IHRoaXMua3dhcmdzLFxuXHRcdFx0Y29uZmlnOiB0aGlzLmNvbmZpZyxcblx0XHRcdHJldHJ5UG9saWN5OiB0aGlzLnJldHJ5UG9saWN5LFxuXHRcdFx0Y2FjaGVQb2xpY3k6IHRoaXMuY2FjaGVQb2xpY3lcblx0XHR9KTtcblx0fVxuXHRwaXBlKGNvZXJjZWFibGUpIHtcblx0XHRpZiAoQ2hhbm5lbFdyaXRlLmlzV3JpdGVyKGNvZXJjZWFibGUpKSByZXR1cm4gbmV3IFByZWdlbE5vZGUoe1xuXHRcdFx0Y2hhbm5lbHM6IHRoaXMuY2hhbm5lbHMsXG5cdFx0XHR0cmlnZ2VyczogdGhpcy50cmlnZ2Vycyxcblx0XHRcdG1hcHBlcjogdGhpcy5tYXBwZXIsXG5cdFx0XHR3cml0ZXJzOiBbLi4udGhpcy53cml0ZXJzLCBjb2VyY2VhYmxlXSxcblx0XHRcdGJvdW5kOiB0aGlzLmJvdW5kLFxuXHRcdFx0Y29uZmlnOiB0aGlzLmNvbmZpZyxcblx0XHRcdGt3YXJnczogdGhpcy5rd2FyZ3MsXG5cdFx0XHRyZXRyeVBvbGljeTogdGhpcy5yZXRyeVBvbGljeSxcblx0XHRcdGNhY2hlUG9saWN5OiB0aGlzLmNhY2hlUG9saWN5XG5cdFx0fSk7XG5cdFx0ZWxzZSBpZiAodGhpcy5ib3VuZCA9PT0gZGVmYXVsdFJ1bm5hYmxlQm91bmQpIHJldHVybiBuZXcgUHJlZ2VsTm9kZSh7XG5cdFx0XHRjaGFubmVsczogdGhpcy5jaGFubmVscyxcblx0XHRcdHRyaWdnZXJzOiB0aGlzLnRyaWdnZXJzLFxuXHRcdFx0bWFwcGVyOiB0aGlzLm1hcHBlcixcblx0XHRcdHdyaXRlcnM6IHRoaXMud3JpdGVycyxcblx0XHRcdGJvdW5kOiBfY29lcmNlVG9SdW5uYWJsZShjb2VyY2VhYmxlKSxcblx0XHRcdGNvbmZpZzogdGhpcy5jb25maWcsXG5cdFx0XHRrd2FyZ3M6IHRoaXMua3dhcmdzLFxuXHRcdFx0cmV0cnlQb2xpY3k6IHRoaXMucmV0cnlQb2xpY3ksXG5cdFx0XHRjYWNoZVBvbGljeTogdGhpcy5jYWNoZVBvbGljeVxuXHRcdH0pO1xuXHRcdGVsc2UgcmV0dXJuIG5ldyBQcmVnZWxOb2RlKHtcblx0XHRcdGNoYW5uZWxzOiB0aGlzLmNoYW5uZWxzLFxuXHRcdFx0dHJpZ2dlcnM6IHRoaXMudHJpZ2dlcnMsXG5cdFx0XHRtYXBwZXI6IHRoaXMubWFwcGVyLFxuXHRcdFx0d3JpdGVyczogdGhpcy53cml0ZXJzLFxuXHRcdFx0Ym91bmQ6IHRoaXMuYm91bmQucGlwZShjb2VyY2VhYmxlKSxcblx0XHRcdGNvbmZpZzogdGhpcy5jb25maWcsXG5cdFx0XHRrd2FyZ3M6IHRoaXMua3dhcmdzLFxuXHRcdFx0cmV0cnlQb2xpY3k6IHRoaXMucmV0cnlQb2xpY3ksXG5cdFx0XHRjYWNoZVBvbGljeTogdGhpcy5jYWNoZVBvbGljeVxuXHRcdH0pO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IENoYW5uZWxSZWFkLCBQcmVnZWxOb2RlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWFkLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/pregel/read.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/pregel/retry.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/pregel/retry.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _runWithRetry: () => (/* binding */ _runWithRetry)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _utils_config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/config.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/utils/config.js\");\n/* harmony import */ var _utils_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/index.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/utils/index.js\");\n\n\n\n\n\n//#region src/pregel/retry.ts\nconst DEFAULT_INITIAL_INTERVAL = 500;\nconst DEFAULT_BACKOFF_FACTOR = 2;\nconst DEFAULT_MAX_INTERVAL = 128e3;\nconst DEFAULT_MAX_RETRIES = 3;\nconst DEFAULT_STATUS_NO_RETRY = [\n\t400,\n\t401,\n\t402,\n\t403,\n\t404,\n\t405,\n\t406,\n\t407,\n\t409\n];\nconst DEFAULT_RETRY_ON_HANDLER = (error) => {\n\tif (error.message.startsWith(\"Cancel\") || error.message.startsWith(\"AbortError\") || error.name === \"AbortError\") return false;\n\tif (error.name === \"GraphValueError\") return false;\n\tif (error?.code === \"ECONNABORTED\") return false;\n\tconst status = error?.response?.status ?? error?.status;\n\tif (status && DEFAULT_STATUS_NO_RETRY.includes(+status)) return false;\n\tif (error?.error?.code === \"insufficient_quota\") return false;\n\treturn true;\n};\nasync function _runWithRetry(pregelTask, retryPolicy, configurable, signal) {\n\tconst resolvedRetryPolicy = pregelTask.retry_policy ?? retryPolicy;\n\tlet interval = resolvedRetryPolicy !== void 0 ? resolvedRetryPolicy.initialInterval ?? DEFAULT_INITIAL_INTERVAL : 0;\n\tlet attempts = 0;\n\tlet error;\n\tlet result;\n\tlet { config } = pregelTask;\n\tif (configurable) config = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.patchConfigurable)(config, configurable);\n\tconfig = {\n\t\t...config,\n\t\tsignal\n\t};\n\twhile (true) {\n\t\tif (signal?.aborted) break;\n\t\tpregelTask.writes.splice(0, pregelTask.writes.length);\n\t\terror = void 0;\n\t\ttry {\n\t\t\tresult = await pregelTask.proc.invoke(pregelTask.input, config);\n\t\t\tbreak;\n\t\t} catch (e) {\n\t\t\terror = e;\n\t\t\terror.pregelTaskId = pregelTask.id;\n\t\t\tif ((0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.isParentCommand)(error)) {\n\t\t\t\tconst ns = config?.configurable?.checkpoint_ns;\n\t\t\t\tconst cmd = error.command;\n\t\t\t\tif (cmd.graph === ns) {\n\t\t\t\t\tfor (const writer of pregelTask.writers) await writer.invoke(cmd, config);\n\t\t\t\t\terror = void 0;\n\t\t\t\t\tbreak;\n\t\t\t\t} else if (cmd.graph === _constants_js__WEBPACK_IMPORTED_MODULE_1__.Command.PARENT) {\n\t\t\t\t\tconst parentNs = (0,_utils_config_js__WEBPACK_IMPORTED_MODULE_2__.getParentCheckpointNamespace)(ns);\n\t\t\t\t\terror.command = new _constants_js__WEBPACK_IMPORTED_MODULE_1__.Command({\n\t\t\t\t\t\t...error.command,\n\t\t\t\t\t\tgraph: parentNs\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ((0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.isGraphBubbleUp)(error)) break;\n\t\t\tif (resolvedRetryPolicy === void 0) break;\n\t\t\tattempts += 1;\n\t\t\tif (attempts >= (resolvedRetryPolicy.maxAttempts ?? DEFAULT_MAX_RETRIES)) break;\n\t\t\tif (!(resolvedRetryPolicy.retryOn ?? DEFAULT_RETRY_ON_HANDLER)(error)) break;\n\t\t\tinterval = Math.min(resolvedRetryPolicy.maxInterval ?? DEFAULT_MAX_INTERVAL, interval * (resolvedRetryPolicy.backoffFactor ?? DEFAULT_BACKOFF_FACTOR));\n\t\t\tconst intervalWithJitter = resolvedRetryPolicy.jitter ? Math.floor(interval + Math.random() * 1e3) : interval;\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, intervalWithJitter));\n\t\t\tconst errorName = error.name ?? error.constructor.unminifiable_name ?? error.constructor.name;\n\t\t\tif (resolvedRetryPolicy?.logWarning ?? true) console.log(`Retrying task \"${String(pregelTask.name)}\" after ${interval.toFixed(2)}ms (attempt ${attempts}) after ${errorName}: ${error}`);\n\t\t\tconfig = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.patchConfigurable)(config, { [_constants_js__WEBPACK_IMPORTED_MODULE_1__.CONFIG_KEY_RESUMING]: true });\n\t\t}\n\t}\n\treturn {\n\t\ttask: pregelTask,\n\t\tresult,\n\t\terror,\n\t\tsignalAborted: signal?.aborted\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=retry.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvcmV0cnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBZ0U7QUFDRDtBQUNFO0FBQ1o7O0FBRXJEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxTQUFTO0FBQ2hCLDRCQUE0QixrRUFBaUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsT0FBTywyREFBZTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHVCQUF1QixrREFBTztBQUNwQyxzQkFBc0IsOEVBQTRCO0FBQ2xELHlCQUF5QixrREFBTztBQUNoQztBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxPQUFPLDJEQUFlO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RUFBOEUsd0JBQXdCLFVBQVUsb0JBQW9CLGNBQWMsU0FBUyxVQUFVLFVBQVUsSUFBSSxNQUFNO0FBQ3pMLFlBQVksa0VBQWlCLFdBQVcsQ0FBQyw4REFBbUIsU0FBUztBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDeUI7QUFDekIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC9yZXRyeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc0dyYXBoQnViYmxlVXAsIGlzUGFyZW50Q29tbWFuZCB9IGZyb20gXCIuLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IENPTkZJR19LRVlfUkVTVU1JTkcsIENvbW1hbmQgfSBmcm9tIFwiLi4vY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBnZXRQYXJlbnRDaGVja3BvaW50TmFtZXNwYWNlIH0gZnJvbSBcIi4vdXRpbHMvY29uZmlnLmpzXCI7XG5pbXBvcnQgeyBwYXRjaENvbmZpZ3VyYWJsZSB9IGZyb20gXCIuL3V0aWxzL2luZGV4LmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcHJlZ2VsL3JldHJ5LnRzXG5jb25zdCBERUZBVUxUX0lOSVRJQUxfSU5URVJWQUwgPSA1MDA7XG5jb25zdCBERUZBVUxUX0JBQ0tPRkZfRkFDVE9SID0gMjtcbmNvbnN0IERFRkFVTFRfTUFYX0lOVEVSVkFMID0gMTI4ZTM7XG5jb25zdCBERUZBVUxUX01BWF9SRVRSSUVTID0gMztcbmNvbnN0IERFRkFVTFRfU1RBVFVTX05PX1JFVFJZID0gW1xuXHQ0MDAsXG5cdDQwMSxcblx0NDAyLFxuXHQ0MDMsXG5cdDQwNCxcblx0NDA1LFxuXHQ0MDYsXG5cdDQwNyxcblx0NDA5XG5dO1xuY29uc3QgREVGQVVMVF9SRVRSWV9PTl9IQU5ETEVSID0gKGVycm9yKSA9PiB7XG5cdGlmIChlcnJvci5tZXNzYWdlLnN0YXJ0c1dpdGgoXCJDYW5jZWxcIikgfHwgZXJyb3IubWVzc2FnZS5zdGFydHNXaXRoKFwiQWJvcnRFcnJvclwiKSB8fCBlcnJvci5uYW1lID09PSBcIkFib3J0RXJyb3JcIikgcmV0dXJuIGZhbHNlO1xuXHRpZiAoZXJyb3IubmFtZSA9PT0gXCJHcmFwaFZhbHVlRXJyb3JcIikgcmV0dXJuIGZhbHNlO1xuXHRpZiAoZXJyb3I/LmNvZGUgPT09IFwiRUNPTk5BQk9SVEVEXCIpIHJldHVybiBmYWxzZTtcblx0Y29uc3Qgc3RhdHVzID0gZXJyb3I/LnJlc3BvbnNlPy5zdGF0dXMgPz8gZXJyb3I/LnN0YXR1cztcblx0aWYgKHN0YXR1cyAmJiBERUZBVUxUX1NUQVRVU19OT19SRVRSWS5pbmNsdWRlcygrc3RhdHVzKSkgcmV0dXJuIGZhbHNlO1xuXHRpZiAoZXJyb3I/LmVycm9yPy5jb2RlID09PSBcImluc3VmZmljaWVudF9xdW90YVwiKSByZXR1cm4gZmFsc2U7XG5cdHJldHVybiB0cnVlO1xufTtcbmFzeW5jIGZ1bmN0aW9uIF9ydW5XaXRoUmV0cnkocHJlZ2VsVGFzaywgcmV0cnlQb2xpY3ksIGNvbmZpZ3VyYWJsZSwgc2lnbmFsKSB7XG5cdGNvbnN0IHJlc29sdmVkUmV0cnlQb2xpY3kgPSBwcmVnZWxUYXNrLnJldHJ5X3BvbGljeSA/PyByZXRyeVBvbGljeTtcblx0bGV0IGludGVydmFsID0gcmVzb2x2ZWRSZXRyeVBvbGljeSAhPT0gdm9pZCAwID8gcmVzb2x2ZWRSZXRyeVBvbGljeS5pbml0aWFsSW50ZXJ2YWwgPz8gREVGQVVMVF9JTklUSUFMX0lOVEVSVkFMIDogMDtcblx0bGV0IGF0dGVtcHRzID0gMDtcblx0bGV0IGVycm9yO1xuXHRsZXQgcmVzdWx0O1xuXHRsZXQgeyBjb25maWcgfSA9IHByZWdlbFRhc2s7XG5cdGlmIChjb25maWd1cmFibGUpIGNvbmZpZyA9IHBhdGNoQ29uZmlndXJhYmxlKGNvbmZpZywgY29uZmlndXJhYmxlKTtcblx0Y29uZmlnID0ge1xuXHRcdC4uLmNvbmZpZyxcblx0XHRzaWduYWxcblx0fTtcblx0d2hpbGUgKHRydWUpIHtcblx0XHRpZiAoc2lnbmFsPy5hYm9ydGVkKSBicmVhaztcblx0XHRwcmVnZWxUYXNrLndyaXRlcy5zcGxpY2UoMCwgcHJlZ2VsVGFzay53cml0ZXMubGVuZ3RoKTtcblx0XHRlcnJvciA9IHZvaWQgMDtcblx0XHR0cnkge1xuXHRcdFx0cmVzdWx0ID0gYXdhaXQgcHJlZ2VsVGFzay5wcm9jLmludm9rZShwcmVnZWxUYXNrLmlucHV0LCBjb25maWcpO1xuXHRcdFx0YnJlYWs7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0ZXJyb3IgPSBlO1xuXHRcdFx0ZXJyb3IucHJlZ2VsVGFza0lkID0gcHJlZ2VsVGFzay5pZDtcblx0XHRcdGlmIChpc1BhcmVudENvbW1hbmQoZXJyb3IpKSB7XG5cdFx0XHRcdGNvbnN0IG5zID0gY29uZmlnPy5jb25maWd1cmFibGU/LmNoZWNrcG9pbnRfbnM7XG5cdFx0XHRcdGNvbnN0IGNtZCA9IGVycm9yLmNvbW1hbmQ7XG5cdFx0XHRcdGlmIChjbWQuZ3JhcGggPT09IG5zKSB7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCB3cml0ZXIgb2YgcHJlZ2VsVGFzay53cml0ZXJzKSBhd2FpdCB3cml0ZXIuaW52b2tlKGNtZCwgY29uZmlnKTtcblx0XHRcdFx0XHRlcnJvciA9IHZvaWQgMDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fSBlbHNlIGlmIChjbWQuZ3JhcGggPT09IENvbW1hbmQuUEFSRU5UKSB7XG5cdFx0XHRcdFx0Y29uc3QgcGFyZW50TnMgPSBnZXRQYXJlbnRDaGVja3BvaW50TmFtZXNwYWNlKG5zKTtcblx0XHRcdFx0XHRlcnJvci5jb21tYW5kID0gbmV3IENvbW1hbmQoe1xuXHRcdFx0XHRcdFx0Li4uZXJyb3IuY29tbWFuZCxcblx0XHRcdFx0XHRcdGdyYXBoOiBwYXJlbnROc1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAoaXNHcmFwaEJ1YmJsZVVwKGVycm9yKSkgYnJlYWs7XG5cdFx0XHRpZiAocmVzb2x2ZWRSZXRyeVBvbGljeSA9PT0gdm9pZCAwKSBicmVhaztcblx0XHRcdGF0dGVtcHRzICs9IDE7XG5cdFx0XHRpZiAoYXR0ZW1wdHMgPj0gKHJlc29sdmVkUmV0cnlQb2xpY3kubWF4QXR0ZW1wdHMgPz8gREVGQVVMVF9NQVhfUkVUUklFUykpIGJyZWFrO1xuXHRcdFx0aWYgKCEocmVzb2x2ZWRSZXRyeVBvbGljeS5yZXRyeU9uID8/IERFRkFVTFRfUkVUUllfT05fSEFORExFUikoZXJyb3IpKSBicmVhaztcblx0XHRcdGludGVydmFsID0gTWF0aC5taW4ocmVzb2x2ZWRSZXRyeVBvbGljeS5tYXhJbnRlcnZhbCA/PyBERUZBVUxUX01BWF9JTlRFUlZBTCwgaW50ZXJ2YWwgKiAocmVzb2x2ZWRSZXRyeVBvbGljeS5iYWNrb2ZmRmFjdG9yID8/IERFRkFVTFRfQkFDS09GRl9GQUNUT1IpKTtcblx0XHRcdGNvbnN0IGludGVydmFsV2l0aEppdHRlciA9IHJlc29sdmVkUmV0cnlQb2xpY3kuaml0dGVyID8gTWF0aC5mbG9vcihpbnRlcnZhbCArIE1hdGgucmFuZG9tKCkgKiAxZTMpIDogaW50ZXJ2YWw7XG5cdFx0XHRhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBpbnRlcnZhbFdpdGhKaXR0ZXIpKTtcblx0XHRcdGNvbnN0IGVycm9yTmFtZSA9IGVycm9yLm5hbWUgPz8gZXJyb3IuY29uc3RydWN0b3IudW5taW5pZmlhYmxlX25hbWUgPz8gZXJyb3IuY29uc3RydWN0b3IubmFtZTtcblx0XHRcdGlmIChyZXNvbHZlZFJldHJ5UG9saWN5Py5sb2dXYXJuaW5nID8/IHRydWUpIGNvbnNvbGUubG9nKGBSZXRyeWluZyB0YXNrIFwiJHtTdHJpbmcocHJlZ2VsVGFzay5uYW1lKX1cIiBhZnRlciAke2ludGVydmFsLnRvRml4ZWQoMil9bXMgKGF0dGVtcHQgJHthdHRlbXB0c30pIGFmdGVyICR7ZXJyb3JOYW1lfTogJHtlcnJvcn1gKTtcblx0XHRcdGNvbmZpZyA9IHBhdGNoQ29uZmlndXJhYmxlKGNvbmZpZywgeyBbQ09ORklHX0tFWV9SRVNVTUlOR106IHRydWUgfSk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiB7XG5cdFx0dGFzazogcHJlZ2VsVGFzayxcblx0XHRyZXN1bHQsXG5cdFx0ZXJyb3IsXG5cdFx0c2lnbmFsQWJvcnRlZDogc2lnbmFsPy5hYm9ydGVkXG5cdH07XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgX3J1bldpdGhSZXRyeSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmV0cnkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/pregel/retry.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/pregel/runner.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/pregel/runner.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PregelRunner: () => (/* binding */ PregelRunner)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./types.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/types.js\");\n/* harmony import */ var _utils_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/index.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/utils/index.js\");\n/* harmony import */ var _retry_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./retry.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/retry.js\");\n\n\n\n\n\n\n//#region src/pregel/runner.ts\nconst PROMISE_ADDED_SYMBOL = Symbol.for(\"promiseAdded\");\nfunction createPromiseBarrier() {\n\tconst barrier = {\n\t\tnext: () => void 0,\n\t\twait: Promise.resolve(PROMISE_ADDED_SYMBOL)\n\t};\n\tfunction waitHandler(resolve) {\n\t\tbarrier.next = () => {\n\t\t\tbarrier.wait = new Promise(waitHandler);\n\t\t\tresolve(PROMISE_ADDED_SYMBOL);\n\t\t};\n\t}\n\tbarrier.wait = new Promise(waitHandler);\n\treturn barrier;\n}\n/**\n* Responsible for handling task execution on each tick of the {@link PregelLoop}.\n*/\nvar PregelRunner = class {\n\tnodeFinished;\n\tloop;\n\t/**\n\t* Construct a new PregelRunner, which executes tasks from the provided PregelLoop.\n\t* @param loop - The PregelLoop that produces tasks for this runner to execute.\n\t*/\n\tconstructor({ loop, nodeFinished }) {\n\t\tthis.loop = loop;\n\t\tthis.nodeFinished = nodeFinished;\n\t}\n\t/**\n\t* Execute tasks from the current step of the PregelLoop.\n\t*\n\t* Note: this method does NOT call {@link PregelLoop}#tick. That must be handled externally.\n\t* @param options - Options for the execution.\n\t*/\n\tasync tick(options = {}) {\n\t\tconst { timeout, retryPolicy, onStepWrite, maxConcurrency } = options;\n\t\tconst nodeErrors = /* @__PURE__ */ new Set();\n\t\tlet graphBubbleUp;\n\t\tconst exceptionSignalController = new AbortController();\n\t\tconst exceptionSignal = exceptionSignalController.signal;\n\t\tconst stepTimeoutSignal = timeout ? AbortSignal.timeout(timeout) : void 0;\n\t\tconst pendingTasks = Object.values(this.loop.tasks).filter((t) => t.writes.length === 0);\n\t\tconst { signals, disposeCombinedSignal } = this._initializeAbortSignals({\n\t\t\texceptionSignal,\n\t\t\tstepTimeoutSignal,\n\t\t\tsignal: options.signal\n\t\t});\n\t\tconst taskStream = this._executeTasksWithRetry(pendingTasks, {\n\t\t\tsignals,\n\t\t\tretryPolicy,\n\t\t\tmaxConcurrency\n\t\t});\n\t\tfor await (const { task, error, signalAborted } of taskStream) {\n\t\t\tthis._commit(task, error);\n\t\t\tif ((0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.isGraphInterrupt)(error)) graphBubbleUp = error;\n\t\t\telse if ((0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.isGraphBubbleUp)(error) && !(0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.isGraphInterrupt)(graphBubbleUp)) graphBubbleUp = error;\n\t\t\telse if (error && (nodeErrors.size === 0 || !signalAborted)) {\n\t\t\t\texceptionSignalController.abort();\n\t\t\t\tnodeErrors.add(error);\n\t\t\t}\n\t\t}\n\t\tdisposeCombinedSignal?.();\n\t\tonStepWrite?.(this.loop.step, Object.values(this.loop.tasks).map((task) => task.writes).flat());\n\t\tif (nodeErrors.size === 1) throw Array.from(nodeErrors)[0];\n\t\telse if (nodeErrors.size > 1) throw new AggregateError(Array.from(nodeErrors), `Multiple errors occurred during superstep ${this.loop.step}. See the \"errors\" field of this exception for more details.`);\n\t\tif ((0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.isGraphInterrupt)(graphBubbleUp)) throw graphBubbleUp;\n\t\tif ((0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.isGraphBubbleUp)(graphBubbleUp) && this.loop.isNested) throw graphBubbleUp;\n\t}\n\t/**\n\t* Initializes the current AbortSignals for the PregelRunner, handling the various ways that\n\t* AbortSignals must be chained together so that the PregelLoop can be interrupted if necessary\n\t* while still allowing nodes to gracefully exit.\n\t*\n\t* This method must only be called once per PregelRunner#tick. It has the side effect of updating\n\t* the PregelLoop#config with the new AbortSignals so they may be propagated correctly to future\n\t* ticks and subgraph calls.\n\t*\n\t* @param options - Options for the initialization.\n\t* @returns The current abort signals.\n\t* @internal\n\t*/\n\t_initializeAbortSignals({ exceptionSignal, stepTimeoutSignal, signal }) {\n\t\tconst previousSignals = this.loop.config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_1__.CONFIG_KEY_ABORT_SIGNALS] ?? {};\n\t\tconst externalAbortSignal = previousSignals.externalAbortSignal ?? signal;\n\t\tconst timeoutAbortSignal = stepTimeoutSignal ?? previousSignals.timeoutAbortSignal;\n\t\tconst { signal: composedAbortSignal, dispose: disposeCombinedSignal } = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.combineAbortSignals)(externalAbortSignal, timeoutAbortSignal, exceptionSignal);\n\t\tconst signals = {\n\t\t\texternalAbortSignal,\n\t\t\ttimeoutAbortSignal,\n\t\t\tcomposedAbortSignal\n\t\t};\n\t\tthis.loop.config = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.patchConfigurable)(this.loop.config, { [_constants_js__WEBPACK_IMPORTED_MODULE_1__.CONFIG_KEY_ABORT_SIGNALS]: signals });\n\t\treturn {\n\t\t\tsignals,\n\t\t\tdisposeCombinedSignal\n\t\t};\n\t}\n\t/**\n\t* Concurrently executes tasks with the requested retry policy, yielding a {@link SettledPregelTask} for each task as it completes.\n\t* @param tasks - The tasks to execute.\n\t* @param options - Options for the execution.\n\t*/\n\tasync *_executeTasksWithRetry(tasks, options) {\n\t\tconst { retryPolicy, maxConcurrency, signals } = options ?? {};\n\t\tconst barrier = createPromiseBarrier();\n\t\tconst executingTasksMap = {};\n\t\tconst thisCall = {\n\t\t\texecutingTasksMap,\n\t\t\tbarrier,\n\t\t\tretryPolicy,\n\t\t\tscheduleTask: async (task, writeIdx, call$1) => this.loop.acceptPush(task, writeIdx, call$1)\n\t\t};\n\t\tif (signals?.composedAbortSignal?.aborted) throw new Error(\"Abort\");\n\t\tlet startedTasksCount = 0;\n\t\tlet listener;\n\t\tconst timeoutOrCancelSignal = (0,_utils_index_js__WEBPACK_IMPORTED_MODULE_3__.combineAbortSignals)(signals?.externalAbortSignal, signals?.timeoutAbortSignal);\n\t\tconst abortPromise = timeoutOrCancelSignal.signal ? new Promise((_resolve, reject) => {\n\t\t\tlistener = () => reject(/* @__PURE__ */ new Error(\"Abort\"));\n\t\t\ttimeoutOrCancelSignal.signal?.addEventListener(\"abort\", listener, { once: true });\n\t\t}) : void 0;\n\t\twhile ((startedTasksCount === 0 || Object.keys(executingTasksMap).length > 0) && tasks.length) {\n\t\t\tfor (; Object.values(executingTasksMap).length < (maxConcurrency ?? tasks.length) && startedTasksCount < tasks.length; startedTasksCount += 1) {\n\t\t\t\tconst task = tasks[startedTasksCount];\n\t\t\t\texecutingTasksMap[task.id] = (0,_retry_js__WEBPACK_IMPORTED_MODULE_4__._runWithRetry)(task, retryPolicy, { [_constants_js__WEBPACK_IMPORTED_MODULE_1__.CONFIG_KEY_CALL]: call?.bind(thisCall, this, task) }, signals?.composedAbortSignal).catch((error) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttask,\n\t\t\t\t\t\terror,\n\t\t\t\t\t\tsignalAborted: signals?.composedAbortSignal?.aborted\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst settledTask = await Promise.race([\n\t\t\t\t...Object.values(executingTasksMap),\n\t\t\t\t...abortPromise ? [abortPromise] : [],\n\t\t\t\tbarrier.wait\n\t\t\t]);\n\t\t\tif (settledTask === PROMISE_ADDED_SYMBOL) continue;\n\t\t\tyield settledTask;\n\t\t\tif (listener != null) {\n\t\t\t\ttimeoutOrCancelSignal.signal?.removeEventListener(\"abort\", listener);\n\t\t\t\ttimeoutOrCancelSignal.dispose?.();\n\t\t\t}\n\t\t\tdelete executingTasksMap[settledTask.task.id];\n\t\t}\n\t}\n\t/**\n\t* Determines what writes to apply based on whether the task completed successfully, and what type of error occurred.\n\t*\n\t* Throws an error if the error is a {@link GraphBubbleUp} error and {@link PregelLoop}#isNested is true.\n\t*\n\t* @param task - The task to commit.\n\t* @param error - The error that occurred, if any.\n\t*/\n\t_commit(task, error) {\n\t\tif (error !== void 0) if ((0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.isGraphInterrupt)(error)) {\n\t\t\tif (error.interrupts.length) {\n\t\t\t\tconst interrupts = error.interrupts.map((interrupt) => [_constants_js__WEBPACK_IMPORTED_MODULE_1__.INTERRUPT, interrupt]);\n\t\t\t\tconst resumes = task.writes.filter((w) => w[0] === _constants_js__WEBPACK_IMPORTED_MODULE_1__.RESUME);\n\t\t\t\tif (resumes.length) interrupts.push(...resumes);\n\t\t\t\tthis.loop.putWrites(task.id, interrupts);\n\t\t\t}\n\t\t} else if ((0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.isGraphBubbleUp)(error) && task.writes.length) this.loop.putWrites(task.id, task.writes);\n\t\telse this.loop.putWrites(task.id, [[_constants_js__WEBPACK_IMPORTED_MODULE_1__.ERROR, {\n\t\t\tmessage: error.message,\n\t\t\tname: error.name\n\t\t}]]);\n\t\telse {\n\t\t\tif (this.nodeFinished && (task.config?.tags == null || !task.config.tags.includes(_constants_js__WEBPACK_IMPORTED_MODULE_1__.TAG_HIDDEN))) this.nodeFinished(String(task.name));\n\t\t\tif (task.writes.length === 0) task.writes.push([_constants_js__WEBPACK_IMPORTED_MODULE_1__.NO_WRITES, null]);\n\t\t\tthis.loop.putWrites(task.id, task.writes);\n\t\t}\n\t}\n};\nasync function call(runner, task, func, name, input, options = {}) {\n\tconst scratchpad = task.config?.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_1__.CONFIG_KEY_SCRATCHPAD];\n\tif (!scratchpad) throw new Error(`BUG: No scratchpad found on task ${task.name}__${task.id}`);\n\tconst cnt = scratchpad.callCounter;\n\tscratchpad.callCounter += 1;\n\tconst wcall = new _types_js__WEBPACK_IMPORTED_MODULE_2__.Call({\n\t\tfunc,\n\t\tname,\n\t\tinput,\n\t\tcache: options.cache,\n\t\tretry: options.retry,\n\t\tcallbacks: options.callbacks\n\t});\n\tconst nextTask = await this.scheduleTask(task, cnt, wcall);\n\tif (!nextTask) return void 0;\n\tconst existingPromise = this.executingTasksMap[nextTask.id];\n\tif (existingPromise !== void 0) return existingPromise;\n\tif (nextTask.writes.length > 0) {\n\t\tconst returns = nextTask.writes.filter(([c]) => c === _constants_js__WEBPACK_IMPORTED_MODULE_1__.RETURN);\n\t\tconst errors = nextTask.writes.filter(([c]) => c === _constants_js__WEBPACK_IMPORTED_MODULE_1__.ERROR);\n\t\tif (returns.length > 0) {\n\t\t\tif (returns.length === 1) return Promise.resolve(returns[0][1]);\n\t\t\tthrow new Error(`BUG: multiple returns found for task ${nextTask.name}__${nextTask.id}`);\n\t\t}\n\t\tif (errors.length > 0) {\n\t\t\tif (errors.length === 1) {\n\t\t\t\tconst errorValue = errors[0][1];\n\t\t\t\tconst error = errorValue instanceof Error ? errorValue : new Error(String(errorValue));\n\t\t\t\treturn Promise.reject(error);\n\t\t\t}\n\t\t\tthrow new Error(`BUG: multiple errors found for task ${nextTask.name}__${nextTask.id}`);\n\t\t}\n\t\treturn;\n\t} else {\n\t\tconst prom = (0,_retry_js__WEBPACK_IMPORTED_MODULE_4__._runWithRetry)(nextTask, options.retry, { [_constants_js__WEBPACK_IMPORTED_MODULE_1__.CONFIG_KEY_CALL]: call.bind(this, runner, nextTask) });\n\t\tthis.executingTasksMap[nextTask.id] = prom;\n\t\tthis.barrier.next();\n\t\treturn prom.then(({ result, error }) => {\n\t\t\tif (error) return Promise.reject(error);\n\t\t\treturn result;\n\t\t});\n\t}\n}\n\n//#endregion\n\n//# sourceMappingURL=runner.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvcnVubmVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFpRTtBQUMyRjtBQUMxSDtBQUN3QztBQUMvQjs7QUFFM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCxpQkFBaUI7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsb0JBQW9CO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxpQkFBaUI7QUFDckQ7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QixVQUFVLG9EQUFvRDtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLGlDQUFpQztBQUMzQztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gscUJBQXFCLDZCQUE2QjtBQUNsRDtBQUNBLE9BQU8sNERBQWdCO0FBQ3ZCLFlBQVksMkRBQWUsWUFBWSw0REFBZ0I7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhIQUE4SCxlQUFlO0FBQzdJLE1BQU0sNERBQWdCO0FBQ3RCLE1BQU0sMkRBQWU7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiw0Q0FBNEM7QUFDdkUsMERBQTBELG1FQUF3QjtBQUNsRjtBQUNBO0FBQ0EsVUFBVSw4REFBOEQsRUFBRSxvRUFBbUI7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixrRUFBaUIscUJBQXFCLENBQUMsbUVBQXdCLFlBQVk7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEVBQTRFLHlCQUF5QjtBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsdUNBQXVDO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msb0VBQW1CO0FBQ25EO0FBQ0E7QUFDQSx1RUFBdUUsWUFBWTtBQUNuRixHQUFHO0FBQ0g7QUFDQSxVQUFVLGdIQUFnSDtBQUMxSDtBQUNBLGlDQUFpQyx3REFBYSxzQkFBc0IsQ0FBQywwREFBZSxxQ0FBcUM7QUFDekg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MscUJBQXFCLFdBQVcsaUJBQWlCO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsNERBQWdCO0FBQzVDO0FBQ0EsNERBQTRELG9EQUFTO0FBQ3JFLHVEQUF1RCxpREFBTTtBQUM3RDtBQUNBO0FBQ0E7QUFDQSxJQUFJLFNBQVMsMkRBQWU7QUFDNUIsc0NBQXNDLGdEQUFLO0FBQzNDO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxxRkFBcUYscURBQVU7QUFDL0YsbURBQW1ELG9EQUFTO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFO0FBQ2pFLGdEQUFnRCxnRUFBcUI7QUFDckUsc0VBQXNFLFVBQVUsSUFBSSxRQUFRO0FBQzVGO0FBQ0E7QUFDQSxtQkFBbUIsMkNBQUk7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QsaURBQU07QUFDOUQsdURBQXVELGdEQUFLO0FBQzVEO0FBQ0E7QUFDQSwyREFBMkQsY0FBYyxJQUFJLFlBQVk7QUFDekY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsY0FBYyxJQUFJLFlBQVk7QUFDeEY7QUFDQTtBQUNBLEdBQUc7QUFDSCxlQUFlLHdEQUFhLDRCQUE0QixDQUFDLDBEQUFlLHNDQUFzQztBQUM5RztBQUNBO0FBQ0Esc0JBQXNCLGVBQWU7QUFDckM7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ3dCO0FBQ3hCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvcnVubmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzR3JhcGhCdWJibGVVcCwgaXNHcmFwaEludGVycnVwdCB9IGZyb20gXCIuLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IENPTkZJR19LRVlfQUJPUlRfU0lHTkFMUywgQ09ORklHX0tFWV9DQUxMLCBDT05GSUdfS0VZX1NDUkFUQ0hQQUQsIEVSUk9SLCBJTlRFUlJVUFQsIE5PX1dSSVRFUywgUkVTVU1FLCBSRVRVUk4sIFRBR19ISURERU4gfSBmcm9tIFwiLi4vY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBDYWxsIH0gZnJvbSBcIi4vdHlwZXMuanNcIjtcbmltcG9ydCB7IGNvbWJpbmVBYm9ydFNpZ25hbHMsIHBhdGNoQ29uZmlndXJhYmxlIH0gZnJvbSBcIi4vdXRpbHMvaW5kZXguanNcIjtcbmltcG9ydCB7IF9ydW5XaXRoUmV0cnkgfSBmcm9tIFwiLi9yZXRyeS5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3ByZWdlbC9ydW5uZXIudHNcbmNvbnN0IFBST01JU0VfQURERURfU1lNQk9MID0gU3ltYm9sLmZvcihcInByb21pc2VBZGRlZFwiKTtcbmZ1bmN0aW9uIGNyZWF0ZVByb21pc2VCYXJyaWVyKCkge1xuXHRjb25zdCBiYXJyaWVyID0ge1xuXHRcdG5leHQ6ICgpID0+IHZvaWQgMCxcblx0XHR3YWl0OiBQcm9taXNlLnJlc29sdmUoUFJPTUlTRV9BRERFRF9TWU1CT0wpXG5cdH07XG5cdGZ1bmN0aW9uIHdhaXRIYW5kbGVyKHJlc29sdmUpIHtcblx0XHRiYXJyaWVyLm5leHQgPSAoKSA9PiB7XG5cdFx0XHRiYXJyaWVyLndhaXQgPSBuZXcgUHJvbWlzZSh3YWl0SGFuZGxlcik7XG5cdFx0XHRyZXNvbHZlKFBST01JU0VfQURERURfU1lNQk9MKTtcblx0XHR9O1xuXHR9XG5cdGJhcnJpZXIud2FpdCA9IG5ldyBQcm9taXNlKHdhaXRIYW5kbGVyKTtcblx0cmV0dXJuIGJhcnJpZXI7XG59XG4vKipcbiogUmVzcG9uc2libGUgZm9yIGhhbmRsaW5nIHRhc2sgZXhlY3V0aW9uIG9uIGVhY2ggdGljayBvZiB0aGUge0BsaW5rIFByZWdlbExvb3B9LlxuKi9cbnZhciBQcmVnZWxSdW5uZXIgPSBjbGFzcyB7XG5cdG5vZGVGaW5pc2hlZDtcblx0bG9vcDtcblx0LyoqXG5cdCogQ29uc3RydWN0IGEgbmV3IFByZWdlbFJ1bm5lciwgd2hpY2ggZXhlY3V0ZXMgdGFza3MgZnJvbSB0aGUgcHJvdmlkZWQgUHJlZ2VsTG9vcC5cblx0KiBAcGFyYW0gbG9vcCAtIFRoZSBQcmVnZWxMb29wIHRoYXQgcHJvZHVjZXMgdGFza3MgZm9yIHRoaXMgcnVubmVyIHRvIGV4ZWN1dGUuXG5cdCovXG5cdGNvbnN0cnVjdG9yKHsgbG9vcCwgbm9kZUZpbmlzaGVkIH0pIHtcblx0XHR0aGlzLmxvb3AgPSBsb29wO1xuXHRcdHRoaXMubm9kZUZpbmlzaGVkID0gbm9kZUZpbmlzaGVkO1xuXHR9XG5cdC8qKlxuXHQqIEV4ZWN1dGUgdGFza3MgZnJvbSB0aGUgY3VycmVudCBzdGVwIG9mIHRoZSBQcmVnZWxMb29wLlxuXHQqXG5cdCogTm90ZTogdGhpcyBtZXRob2QgZG9lcyBOT1QgY2FsbCB7QGxpbmsgUHJlZ2VsTG9vcH0jdGljay4gVGhhdCBtdXN0IGJlIGhhbmRsZWQgZXh0ZXJuYWxseS5cblx0KiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSBleGVjdXRpb24uXG5cdCovXG5cdGFzeW5jIHRpY2sob3B0aW9ucyA9IHt9KSB7XG5cdFx0Y29uc3QgeyB0aW1lb3V0LCByZXRyeVBvbGljeSwgb25TdGVwV3JpdGUsIG1heENvbmN1cnJlbmN5IH0gPSBvcHRpb25zO1xuXHRcdGNvbnN0IG5vZGVFcnJvcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuXHRcdGxldCBncmFwaEJ1YmJsZVVwO1xuXHRcdGNvbnN0IGV4Y2VwdGlvblNpZ25hbENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cdFx0Y29uc3QgZXhjZXB0aW9uU2lnbmFsID0gZXhjZXB0aW9uU2lnbmFsQ29udHJvbGxlci5zaWduYWw7XG5cdFx0Y29uc3Qgc3RlcFRpbWVvdXRTaWduYWwgPSB0aW1lb3V0ID8gQWJvcnRTaWduYWwudGltZW91dCh0aW1lb3V0KSA6IHZvaWQgMDtcblx0XHRjb25zdCBwZW5kaW5nVGFza3MgPSBPYmplY3QudmFsdWVzKHRoaXMubG9vcC50YXNrcykuZmlsdGVyKCh0KSA9PiB0LndyaXRlcy5sZW5ndGggPT09IDApO1xuXHRcdGNvbnN0IHsgc2lnbmFscywgZGlzcG9zZUNvbWJpbmVkU2lnbmFsIH0gPSB0aGlzLl9pbml0aWFsaXplQWJvcnRTaWduYWxzKHtcblx0XHRcdGV4Y2VwdGlvblNpZ25hbCxcblx0XHRcdHN0ZXBUaW1lb3V0U2lnbmFsLFxuXHRcdFx0c2lnbmFsOiBvcHRpb25zLnNpZ25hbFxuXHRcdH0pO1xuXHRcdGNvbnN0IHRhc2tTdHJlYW0gPSB0aGlzLl9leGVjdXRlVGFza3NXaXRoUmV0cnkocGVuZGluZ1Rhc2tzLCB7XG5cdFx0XHRzaWduYWxzLFxuXHRcdFx0cmV0cnlQb2xpY3ksXG5cdFx0XHRtYXhDb25jdXJyZW5jeVxuXHRcdH0pO1xuXHRcdGZvciBhd2FpdCAoY29uc3QgeyB0YXNrLCBlcnJvciwgc2lnbmFsQWJvcnRlZCB9IG9mIHRhc2tTdHJlYW0pIHtcblx0XHRcdHRoaXMuX2NvbW1pdCh0YXNrLCBlcnJvcik7XG5cdFx0XHRpZiAoaXNHcmFwaEludGVycnVwdChlcnJvcikpIGdyYXBoQnViYmxlVXAgPSBlcnJvcjtcblx0XHRcdGVsc2UgaWYgKGlzR3JhcGhCdWJibGVVcChlcnJvcikgJiYgIWlzR3JhcGhJbnRlcnJ1cHQoZ3JhcGhCdWJibGVVcCkpIGdyYXBoQnViYmxlVXAgPSBlcnJvcjtcblx0XHRcdGVsc2UgaWYgKGVycm9yICYmIChub2RlRXJyb3JzLnNpemUgPT09IDAgfHwgIXNpZ25hbEFib3J0ZWQpKSB7XG5cdFx0XHRcdGV4Y2VwdGlvblNpZ25hbENvbnRyb2xsZXIuYWJvcnQoKTtcblx0XHRcdFx0bm9kZUVycm9ycy5hZGQoZXJyb3IpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRkaXNwb3NlQ29tYmluZWRTaWduYWw/LigpO1xuXHRcdG9uU3RlcFdyaXRlPy4odGhpcy5sb29wLnN0ZXAsIE9iamVjdC52YWx1ZXModGhpcy5sb29wLnRhc2tzKS5tYXAoKHRhc2spID0+IHRhc2sud3JpdGVzKS5mbGF0KCkpO1xuXHRcdGlmIChub2RlRXJyb3JzLnNpemUgPT09IDEpIHRocm93IEFycmF5LmZyb20obm9kZUVycm9ycylbMF07XG5cdFx0ZWxzZSBpZiAobm9kZUVycm9ycy5zaXplID4gMSkgdGhyb3cgbmV3IEFnZ3JlZ2F0ZUVycm9yKEFycmF5LmZyb20obm9kZUVycm9ycyksIGBNdWx0aXBsZSBlcnJvcnMgb2NjdXJyZWQgZHVyaW5nIHN1cGVyc3RlcCAke3RoaXMubG9vcC5zdGVwfS4gU2VlIHRoZSBcImVycm9yc1wiIGZpZWxkIG9mIHRoaXMgZXhjZXB0aW9uIGZvciBtb3JlIGRldGFpbHMuYCk7XG5cdFx0aWYgKGlzR3JhcGhJbnRlcnJ1cHQoZ3JhcGhCdWJibGVVcCkpIHRocm93IGdyYXBoQnViYmxlVXA7XG5cdFx0aWYgKGlzR3JhcGhCdWJibGVVcChncmFwaEJ1YmJsZVVwKSAmJiB0aGlzLmxvb3AuaXNOZXN0ZWQpIHRocm93IGdyYXBoQnViYmxlVXA7XG5cdH1cblx0LyoqXG5cdCogSW5pdGlhbGl6ZXMgdGhlIGN1cnJlbnQgQWJvcnRTaWduYWxzIGZvciB0aGUgUHJlZ2VsUnVubmVyLCBoYW5kbGluZyB0aGUgdmFyaW91cyB3YXlzIHRoYXRcblx0KiBBYm9ydFNpZ25hbHMgbXVzdCBiZSBjaGFpbmVkIHRvZ2V0aGVyIHNvIHRoYXQgdGhlIFByZWdlbExvb3AgY2FuIGJlIGludGVycnVwdGVkIGlmIG5lY2Vzc2FyeVxuXHQqIHdoaWxlIHN0aWxsIGFsbG93aW5nIG5vZGVzIHRvIGdyYWNlZnVsbHkgZXhpdC5cblx0KlxuXHQqIFRoaXMgbWV0aG9kIG11c3Qgb25seSBiZSBjYWxsZWQgb25jZSBwZXIgUHJlZ2VsUnVubmVyI3RpY2suIEl0IGhhcyB0aGUgc2lkZSBlZmZlY3Qgb2YgdXBkYXRpbmdcblx0KiB0aGUgUHJlZ2VsTG9vcCNjb25maWcgd2l0aCB0aGUgbmV3IEFib3J0U2lnbmFscyBzbyB0aGV5IG1heSBiZSBwcm9wYWdhdGVkIGNvcnJlY3RseSB0byBmdXR1cmVcblx0KiB0aWNrcyBhbmQgc3ViZ3JhcGggY2FsbHMuXG5cdCpcblx0KiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSBpbml0aWFsaXphdGlvbi5cblx0KiBAcmV0dXJucyBUaGUgY3VycmVudCBhYm9ydCBzaWduYWxzLlxuXHQqIEBpbnRlcm5hbFxuXHQqL1xuXHRfaW5pdGlhbGl6ZUFib3J0U2lnbmFscyh7IGV4Y2VwdGlvblNpZ25hbCwgc3RlcFRpbWVvdXRTaWduYWwsIHNpZ25hbCB9KSB7XG5cdFx0Y29uc3QgcHJldmlvdXNTaWduYWxzID0gdGhpcy5sb29wLmNvbmZpZy5jb25maWd1cmFibGU/LltDT05GSUdfS0VZX0FCT1JUX1NJR05BTFNdID8/IHt9O1xuXHRcdGNvbnN0IGV4dGVybmFsQWJvcnRTaWduYWwgPSBwcmV2aW91c1NpZ25hbHMuZXh0ZXJuYWxBYm9ydFNpZ25hbCA/PyBzaWduYWw7XG5cdFx0Y29uc3QgdGltZW91dEFib3J0U2lnbmFsID0gc3RlcFRpbWVvdXRTaWduYWwgPz8gcHJldmlvdXNTaWduYWxzLnRpbWVvdXRBYm9ydFNpZ25hbDtcblx0XHRjb25zdCB7IHNpZ25hbDogY29tcG9zZWRBYm9ydFNpZ25hbCwgZGlzcG9zZTogZGlzcG9zZUNvbWJpbmVkU2lnbmFsIH0gPSBjb21iaW5lQWJvcnRTaWduYWxzKGV4dGVybmFsQWJvcnRTaWduYWwsIHRpbWVvdXRBYm9ydFNpZ25hbCwgZXhjZXB0aW9uU2lnbmFsKTtcblx0XHRjb25zdCBzaWduYWxzID0ge1xuXHRcdFx0ZXh0ZXJuYWxBYm9ydFNpZ25hbCxcblx0XHRcdHRpbWVvdXRBYm9ydFNpZ25hbCxcblx0XHRcdGNvbXBvc2VkQWJvcnRTaWduYWxcblx0XHR9O1xuXHRcdHRoaXMubG9vcC5jb25maWcgPSBwYXRjaENvbmZpZ3VyYWJsZSh0aGlzLmxvb3AuY29uZmlnLCB7IFtDT05GSUdfS0VZX0FCT1JUX1NJR05BTFNdOiBzaWduYWxzIH0pO1xuXHRcdHJldHVybiB7XG5cdFx0XHRzaWduYWxzLFxuXHRcdFx0ZGlzcG9zZUNvbWJpbmVkU2lnbmFsXG5cdFx0fTtcblx0fVxuXHQvKipcblx0KiBDb25jdXJyZW50bHkgZXhlY3V0ZXMgdGFza3Mgd2l0aCB0aGUgcmVxdWVzdGVkIHJldHJ5IHBvbGljeSwgeWllbGRpbmcgYSB7QGxpbmsgU2V0dGxlZFByZWdlbFRhc2t9IGZvciBlYWNoIHRhc2sgYXMgaXQgY29tcGxldGVzLlxuXHQqIEBwYXJhbSB0YXNrcyAtIFRoZSB0YXNrcyB0byBleGVjdXRlLlxuXHQqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgdGhlIGV4ZWN1dGlvbi5cblx0Ki9cblx0YXN5bmMgKl9leGVjdXRlVGFza3NXaXRoUmV0cnkodGFza3MsIG9wdGlvbnMpIHtcblx0XHRjb25zdCB7IHJldHJ5UG9saWN5LCBtYXhDb25jdXJyZW5jeSwgc2lnbmFscyB9ID0gb3B0aW9ucyA/PyB7fTtcblx0XHRjb25zdCBiYXJyaWVyID0gY3JlYXRlUHJvbWlzZUJhcnJpZXIoKTtcblx0XHRjb25zdCBleGVjdXRpbmdUYXNrc01hcCA9IHt9O1xuXHRcdGNvbnN0IHRoaXNDYWxsID0ge1xuXHRcdFx0ZXhlY3V0aW5nVGFza3NNYXAsXG5cdFx0XHRiYXJyaWVyLFxuXHRcdFx0cmV0cnlQb2xpY3ksXG5cdFx0XHRzY2hlZHVsZVRhc2s6IGFzeW5jICh0YXNrLCB3cml0ZUlkeCwgY2FsbCQxKSA9PiB0aGlzLmxvb3AuYWNjZXB0UHVzaCh0YXNrLCB3cml0ZUlkeCwgY2FsbCQxKVxuXHRcdH07XG5cdFx0aWYgKHNpZ25hbHM/LmNvbXBvc2VkQWJvcnRTaWduYWw/LmFib3J0ZWQpIHRocm93IG5ldyBFcnJvcihcIkFib3J0XCIpO1xuXHRcdGxldCBzdGFydGVkVGFza3NDb3VudCA9IDA7XG5cdFx0bGV0IGxpc3RlbmVyO1xuXHRcdGNvbnN0IHRpbWVvdXRPckNhbmNlbFNpZ25hbCA9IGNvbWJpbmVBYm9ydFNpZ25hbHMoc2lnbmFscz8uZXh0ZXJuYWxBYm9ydFNpZ25hbCwgc2lnbmFscz8udGltZW91dEFib3J0U2lnbmFsKTtcblx0XHRjb25zdCBhYm9ydFByb21pc2UgPSB0aW1lb3V0T3JDYW5jZWxTaWduYWwuc2lnbmFsID8gbmV3IFByb21pc2UoKF9yZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdGxpc3RlbmVyID0gKCkgPT4gcmVqZWN0KC8qIEBfX1BVUkVfXyAqLyBuZXcgRXJyb3IoXCJBYm9ydFwiKSk7XG5cdFx0XHR0aW1lb3V0T3JDYW5jZWxTaWduYWwuc2lnbmFsPy5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgbGlzdGVuZXIsIHsgb25jZTogdHJ1ZSB9KTtcblx0XHR9KSA6IHZvaWQgMDtcblx0XHR3aGlsZSAoKHN0YXJ0ZWRUYXNrc0NvdW50ID09PSAwIHx8IE9iamVjdC5rZXlzKGV4ZWN1dGluZ1Rhc2tzTWFwKS5sZW5ndGggPiAwKSAmJiB0YXNrcy5sZW5ndGgpIHtcblx0XHRcdGZvciAoOyBPYmplY3QudmFsdWVzKGV4ZWN1dGluZ1Rhc2tzTWFwKS5sZW5ndGggPCAobWF4Q29uY3VycmVuY3kgPz8gdGFza3MubGVuZ3RoKSAmJiBzdGFydGVkVGFza3NDb3VudCA8IHRhc2tzLmxlbmd0aDsgc3RhcnRlZFRhc2tzQ291bnQgKz0gMSkge1xuXHRcdFx0XHRjb25zdCB0YXNrID0gdGFza3Nbc3RhcnRlZFRhc2tzQ291bnRdO1xuXHRcdFx0XHRleGVjdXRpbmdUYXNrc01hcFt0YXNrLmlkXSA9IF9ydW5XaXRoUmV0cnkodGFzaywgcmV0cnlQb2xpY3ksIHsgW0NPTkZJR19LRVlfQ0FMTF06IGNhbGw/LmJpbmQodGhpc0NhbGwsIHRoaXMsIHRhc2spIH0sIHNpZ25hbHM/LmNvbXBvc2VkQWJvcnRTaWduYWwpLmNhdGNoKChlcnJvcikgPT4ge1xuXHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHR0YXNrLFxuXHRcdFx0XHRcdFx0ZXJyb3IsXG5cdFx0XHRcdFx0XHRzaWduYWxBYm9ydGVkOiBzaWduYWxzPy5jb21wb3NlZEFib3J0U2lnbmFsPy5hYm9ydGVkXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBzZXR0bGVkVGFzayA9IGF3YWl0IFByb21pc2UucmFjZShbXG5cdFx0XHRcdC4uLk9iamVjdC52YWx1ZXMoZXhlY3V0aW5nVGFza3NNYXApLFxuXHRcdFx0XHQuLi5hYm9ydFByb21pc2UgPyBbYWJvcnRQcm9taXNlXSA6IFtdLFxuXHRcdFx0XHRiYXJyaWVyLndhaXRcblx0XHRcdF0pO1xuXHRcdFx0aWYgKHNldHRsZWRUYXNrID09PSBQUk9NSVNFX0FEREVEX1NZTUJPTCkgY29udGludWU7XG5cdFx0XHR5aWVsZCBzZXR0bGVkVGFzaztcblx0XHRcdGlmIChsaXN0ZW5lciAhPSBudWxsKSB7XG5cdFx0XHRcdHRpbWVvdXRPckNhbmNlbFNpZ25hbC5zaWduYWw/LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBsaXN0ZW5lcik7XG5cdFx0XHRcdHRpbWVvdXRPckNhbmNlbFNpZ25hbC5kaXNwb3NlPy4oKTtcblx0XHRcdH1cblx0XHRcdGRlbGV0ZSBleGVjdXRpbmdUYXNrc01hcFtzZXR0bGVkVGFzay50YXNrLmlkXTtcblx0XHR9XG5cdH1cblx0LyoqXG5cdCogRGV0ZXJtaW5lcyB3aGF0IHdyaXRlcyB0byBhcHBseSBiYXNlZCBvbiB3aGV0aGVyIHRoZSB0YXNrIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHksIGFuZCB3aGF0IHR5cGUgb2YgZXJyb3Igb2NjdXJyZWQuXG5cdCpcblx0KiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIGVycm9yIGlzIGEge0BsaW5rIEdyYXBoQnViYmxlVXB9IGVycm9yIGFuZCB7QGxpbmsgUHJlZ2VsTG9vcH0jaXNOZXN0ZWQgaXMgdHJ1ZS5cblx0KlxuXHQqIEBwYXJhbSB0YXNrIC0gVGhlIHRhc2sgdG8gY29tbWl0LlxuXHQqIEBwYXJhbSBlcnJvciAtIFRoZSBlcnJvciB0aGF0IG9jY3VycmVkLCBpZiBhbnkuXG5cdCovXG5cdF9jb21taXQodGFzaywgZXJyb3IpIHtcblx0XHRpZiAoZXJyb3IgIT09IHZvaWQgMCkgaWYgKGlzR3JhcGhJbnRlcnJ1cHQoZXJyb3IpKSB7XG5cdFx0XHRpZiAoZXJyb3IuaW50ZXJydXB0cy5sZW5ndGgpIHtcblx0XHRcdFx0Y29uc3QgaW50ZXJydXB0cyA9IGVycm9yLmludGVycnVwdHMubWFwKChpbnRlcnJ1cHQpID0+IFtJTlRFUlJVUFQsIGludGVycnVwdF0pO1xuXHRcdFx0XHRjb25zdCByZXN1bWVzID0gdGFzay53cml0ZXMuZmlsdGVyKCh3KSA9PiB3WzBdID09PSBSRVNVTUUpO1xuXHRcdFx0XHRpZiAocmVzdW1lcy5sZW5ndGgpIGludGVycnVwdHMucHVzaCguLi5yZXN1bWVzKTtcblx0XHRcdFx0dGhpcy5sb29wLnB1dFdyaXRlcyh0YXNrLmlkLCBpbnRlcnJ1cHRzKTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKGlzR3JhcGhCdWJibGVVcChlcnJvcikgJiYgdGFzay53cml0ZXMubGVuZ3RoKSB0aGlzLmxvb3AucHV0V3JpdGVzKHRhc2suaWQsIHRhc2sud3JpdGVzKTtcblx0XHRlbHNlIHRoaXMubG9vcC5wdXRXcml0ZXModGFzay5pZCwgW1tFUlJPUiwge1xuXHRcdFx0bWVzc2FnZTogZXJyb3IubWVzc2FnZSxcblx0XHRcdG5hbWU6IGVycm9yLm5hbWVcblx0XHR9XV0pO1xuXHRcdGVsc2Uge1xuXHRcdFx0aWYgKHRoaXMubm9kZUZpbmlzaGVkICYmICh0YXNrLmNvbmZpZz8udGFncyA9PSBudWxsIHx8ICF0YXNrLmNvbmZpZy50YWdzLmluY2x1ZGVzKFRBR19ISURERU4pKSkgdGhpcy5ub2RlRmluaXNoZWQoU3RyaW5nKHRhc2submFtZSkpO1xuXHRcdFx0aWYgKHRhc2sud3JpdGVzLmxlbmd0aCA9PT0gMCkgdGFzay53cml0ZXMucHVzaChbTk9fV1JJVEVTLCBudWxsXSk7XG5cdFx0XHR0aGlzLmxvb3AucHV0V3JpdGVzKHRhc2suaWQsIHRhc2sud3JpdGVzKTtcblx0XHR9XG5cdH1cbn07XG5hc3luYyBmdW5jdGlvbiBjYWxsKHJ1bm5lciwgdGFzaywgZnVuYywgbmFtZSwgaW5wdXQsIG9wdGlvbnMgPSB7fSkge1xuXHRjb25zdCBzY3JhdGNocGFkID0gdGFzay5jb25maWc/LmNvbmZpZ3VyYWJsZT8uW0NPTkZJR19LRVlfU0NSQVRDSFBBRF07XG5cdGlmICghc2NyYXRjaHBhZCkgdGhyb3cgbmV3IEVycm9yKGBCVUc6IE5vIHNjcmF0Y2hwYWQgZm91bmQgb24gdGFzayAke3Rhc2submFtZX1fXyR7dGFzay5pZH1gKTtcblx0Y29uc3QgY250ID0gc2NyYXRjaHBhZC5jYWxsQ291bnRlcjtcblx0c2NyYXRjaHBhZC5jYWxsQ291bnRlciArPSAxO1xuXHRjb25zdCB3Y2FsbCA9IG5ldyBDYWxsKHtcblx0XHRmdW5jLFxuXHRcdG5hbWUsXG5cdFx0aW5wdXQsXG5cdFx0Y2FjaGU6IG9wdGlvbnMuY2FjaGUsXG5cdFx0cmV0cnk6IG9wdGlvbnMucmV0cnksXG5cdFx0Y2FsbGJhY2tzOiBvcHRpb25zLmNhbGxiYWNrc1xuXHR9KTtcblx0Y29uc3QgbmV4dFRhc2sgPSBhd2FpdCB0aGlzLnNjaGVkdWxlVGFzayh0YXNrLCBjbnQsIHdjYWxsKTtcblx0aWYgKCFuZXh0VGFzaykgcmV0dXJuIHZvaWQgMDtcblx0Y29uc3QgZXhpc3RpbmdQcm9taXNlID0gdGhpcy5leGVjdXRpbmdUYXNrc01hcFtuZXh0VGFzay5pZF07XG5cdGlmIChleGlzdGluZ1Byb21pc2UgIT09IHZvaWQgMCkgcmV0dXJuIGV4aXN0aW5nUHJvbWlzZTtcblx0aWYgKG5leHRUYXNrLndyaXRlcy5sZW5ndGggPiAwKSB7XG5cdFx0Y29uc3QgcmV0dXJucyA9IG5leHRUYXNrLndyaXRlcy5maWx0ZXIoKFtjXSkgPT4gYyA9PT0gUkVUVVJOKTtcblx0XHRjb25zdCBlcnJvcnMgPSBuZXh0VGFzay53cml0ZXMuZmlsdGVyKChbY10pID0+IGMgPT09IEVSUk9SKTtcblx0XHRpZiAocmV0dXJucy5sZW5ndGggPiAwKSB7XG5cdFx0XHRpZiAocmV0dXJucy5sZW5ndGggPT09IDEpIHJldHVybiBQcm9taXNlLnJlc29sdmUocmV0dXJuc1swXVsxXSk7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYEJVRzogbXVsdGlwbGUgcmV0dXJucyBmb3VuZCBmb3IgdGFzayAke25leHRUYXNrLm5hbWV9X18ke25leHRUYXNrLmlkfWApO1xuXHRcdH1cblx0XHRpZiAoZXJyb3JzLmxlbmd0aCA+IDApIHtcblx0XHRcdGlmIChlcnJvcnMubGVuZ3RoID09PSAxKSB7XG5cdFx0XHRcdGNvbnN0IGVycm9yVmFsdWUgPSBlcnJvcnNbMF1bMV07XG5cdFx0XHRcdGNvbnN0IGVycm9yID0gZXJyb3JWYWx1ZSBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3JWYWx1ZSA6IG5ldyBFcnJvcihTdHJpbmcoZXJyb3JWYWx1ZSkpO1xuXHRcdFx0XHRyZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuXHRcdFx0fVxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBCVUc6IG11bHRpcGxlIGVycm9ycyBmb3VuZCBmb3IgdGFzayAke25leHRUYXNrLm5hbWV9X18ke25leHRUYXNrLmlkfWApO1xuXHRcdH1cblx0XHRyZXR1cm47XG5cdH0gZWxzZSB7XG5cdFx0Y29uc3QgcHJvbSA9IF9ydW5XaXRoUmV0cnkobmV4dFRhc2ssIG9wdGlvbnMucmV0cnksIHsgW0NPTkZJR19LRVlfQ0FMTF06IGNhbGwuYmluZCh0aGlzLCBydW5uZXIsIG5leHRUYXNrKSB9KTtcblx0XHR0aGlzLmV4ZWN1dGluZ1Rhc2tzTWFwW25leHRUYXNrLmlkXSA9IHByb207XG5cdFx0dGhpcy5iYXJyaWVyLm5leHQoKTtcblx0XHRyZXR1cm4gcHJvbS50aGVuKCh7IHJlc3VsdCwgZXJyb3IgfSkgPT4ge1xuXHRcdFx0aWYgKGVycm9yKSByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9KTtcblx0fVxufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IFByZWdlbFJ1bm5lciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnVubmVyLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/pregel/runner.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/pregel/stream.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/pregel/stream.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IterableReadableStreamWithAbortSignal: () => (/* binding */ IterableReadableStreamWithAbortSignal),\n/* harmony export */   IterableReadableWritableStream: () => (/* binding */ IterableReadableWritableStream),\n/* harmony export */   toEventStream: () => (/* binding */ toEventStream)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_utils_stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/utils/stream */ \"(ssr)/./node_modules/@langchain/core/dist/utils/stream.js\");\n\n\n//#region src/pregel/stream.ts\n/**\n* A wrapper around an IterableReadableStream that allows for aborting the stream when\n* {@link cancel} is called.\n*/\nvar IterableReadableStreamWithAbortSignal = class extends _langchain_core_utils_stream__WEBPACK_IMPORTED_MODULE_0__.IterableReadableStream {\n\t_abortController;\n\t_innerReader;\n\t/**\n\t* @param readableStream - The stream to wrap.\n\t* @param abortController - The abort controller to use. Optional. One will be created if not provided.\n\t*/\n\tconstructor(readableStream, abortController) {\n\t\tconst reader = readableStream.getReader();\n\t\tconst ac = abortController ?? new AbortController();\n\t\tsuper({ start(controller) {\n\t\t\treturn pump();\n\t\t\tfunction pump() {\n\t\t\t\treturn reader.read().then(({ done, value }) => {\n\t\t\t\t\tif (done) {\n\t\t\t\t\t\tcontroller.close();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tcontroller.enqueue(value);\n\t\t\t\t\treturn pump();\n\t\t\t\t});\n\t\t\t}\n\t\t} });\n\t\tthis._abortController = ac;\n\t\tthis._innerReader = reader;\n\t}\n\t/**\n\t* Aborts the stream, abandoning any pending operations in progress. Calling this triggers an\n\t* {@link AbortSignal} that is propagated to the tasks that are producing the data for this stream.\n\t* @param reason - The reason for aborting the stream. Optional.\n\t*/\n\tasync cancel(reason) {\n\t\tthis._abortController.abort(reason);\n\t\tthis._innerReader.releaseLock();\n\t}\n\t/**\n\t* The {@link AbortSignal} for the stream. Aborted when {@link cancel} is called.\n\t*/\n\tget signal() {\n\t\treturn this._abortController.signal;\n\t}\n};\nvar IterableReadableWritableStream = class extends _langchain_core_utils_stream__WEBPACK_IMPORTED_MODULE_0__.IterableReadableStream {\n\tmodes;\n\tcontroller;\n\tpassthroughFn;\n\t_closed = false;\n\tget closed() {\n\t\treturn this._closed;\n\t}\n\tconstructor(params) {\n\t\tlet streamControllerPromiseResolver;\n\t\tconst streamControllerPromise = new Promise((resolve) => {\n\t\t\tstreamControllerPromiseResolver = resolve;\n\t\t});\n\t\tsuper({ start: (controller) => {\n\t\t\tstreamControllerPromiseResolver(controller);\n\t\t} });\n\t\tstreamControllerPromise.then((controller) => {\n\t\t\tthis.controller = controller;\n\t\t});\n\t\tthis.passthroughFn = params.passthroughFn;\n\t\tthis.modes = params.modes;\n\t}\n\tpush(chunk) {\n\t\tthis.passthroughFn?.(chunk);\n\t\tthis.controller.enqueue(chunk);\n\t}\n\tclose() {\n\t\ttry {\n\t\t\tthis.controller.close();\n\t\t} catch (e) {} finally {\n\t\t\tthis._closed = true;\n\t\t}\n\t}\n\terror(e) {\n\t\tthis.controller.error(e);\n\t}\n};\nfunction _stringifyAsDict(obj) {\n\treturn JSON.stringify(obj, function(key, value) {\n\t\tconst rawValue = this[key];\n\t\tif (rawValue != null && typeof rawValue === \"object\" && \"toDict\" in rawValue && typeof rawValue.toDict === \"function\") {\n\t\t\tconst { type, data } = rawValue.toDict();\n\t\t\treturn {\n\t\t\t\t...data,\n\t\t\t\ttype\n\t\t\t};\n\t\t}\n\t\treturn value;\n\t});\n}\nfunction _serializeError(error) {\n\tif (error instanceof Error) return {\n\t\terror: error.name,\n\t\tmessage: error.message\n\t};\n\treturn {\n\t\terror: \"Error\",\n\t\tmessage: JSON.stringify(error)\n\t};\n}\nfunction _isRunnableConfig(config) {\n\tif (typeof config !== \"object\" || config == null) return false;\n\treturn \"configurable\" in config && typeof config.configurable === \"object\" && config.configurable != null;\n}\nfunction _extractCheckpointFromConfig(config) {\n\tif (!_isRunnableConfig(config) || !config.configurable.thread_id) return null;\n\treturn {\n\t\tthread_id: config.configurable.thread_id,\n\t\tcheckpoint_ns: config.configurable.checkpoint_ns || \"\",\n\t\tcheckpoint_id: config.configurable.checkpoint_id || null,\n\t\tcheckpoint_map: config.configurable.checkpoint_map || null\n\t};\n}\nfunction _serializeConfig(config) {\n\tif (_isRunnableConfig(config)) {\n\t\tconst configurable = Object.fromEntries(Object.entries(config.configurable).filter(([key]) => !key.startsWith(\"__\")));\n\t\tconst newConfig = {\n\t\t\t...config,\n\t\t\tconfigurable\n\t\t};\n\t\tdelete newConfig.callbacks;\n\t\treturn newConfig;\n\t}\n\treturn config;\n}\nfunction _serializeCheckpoint(payload) {\n\tconst result = {\n\t\t...payload,\n\t\tcheckpoint: _extractCheckpointFromConfig(payload.config),\n\t\tparent_checkpoint: _extractCheckpointFromConfig(payload.parentConfig),\n\t\tconfig: _serializeConfig(payload.config),\n\t\tparent_config: _serializeConfig(payload.parentConfig),\n\t\ttasks: payload.tasks.map((task) => {\n\t\t\tif (_isRunnableConfig(task.state)) {\n\t\t\t\tconst checkpoint = _extractCheckpointFromConfig(task.state);\n\t\t\t\tif (checkpoint != null) {\n\t\t\t\t\tconst cloneTask = {\n\t\t\t\t\t\t...task,\n\t\t\t\t\t\tcheckpoint\n\t\t\t\t\t};\n\t\t\t\t\tdelete cloneTask.state;\n\t\t\t\t\treturn cloneTask;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn task;\n\t\t})\n\t};\n\tdelete result.parentConfig;\n\treturn result;\n}\nfunction toEventStream(stream) {\n\tconst encoder = new TextEncoder();\n\treturn new ReadableStream({ async start(controller) {\n\t\tconst enqueueChunk = (sse) => {\n\t\t\tcontroller.enqueue(encoder.encode(`event: ${sse.event}\\ndata: ${_stringifyAsDict(sse.data)}\\n\\n`));\n\t\t};\n\t\ttry {\n\t\t\tfor await (const payload of stream) {\n\t\t\t\tconst [ns, mode, chunk] = payload;\n\t\t\t\tlet data = chunk;\n\t\t\t\tif (mode === \"debug\") {\n\t\t\t\t\tconst debugChunk = chunk;\n\t\t\t\t\tif (debugChunk.type === \"checkpoint\") data = {\n\t\t\t\t\t\t...debugChunk,\n\t\t\t\t\t\tpayload: _serializeCheckpoint(debugChunk.payload)\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (mode === \"checkpoints\") data = _serializeCheckpoint(chunk);\n\t\t\t\tenqueueChunk({\n\t\t\t\t\tevent: ns?.length ? `${mode}|${ns.join(\"|\")}` : mode,\n\t\t\t\t\tdata\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tenqueueChunk({\n\t\t\t\tevent: \"error\",\n\t\t\t\tdata: _serializeError(error)\n\t\t\t});\n\t\t}\n\t\tcontroller.close();\n\t} });\n}\n\n//#endregion\n\n//# sourceMappingURL=stream.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvc3RyZWFtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBc0U7O0FBRXRFO0FBQ0E7QUFDQTtBQUNBLEdBQUcsY0FBYztBQUNqQjtBQUNBLDBEQUEwRCxnRkFBc0I7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxpQ0FBaUMsYUFBYTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksbUJBQW1CO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxtQkFBbUIsOEJBQThCLGNBQWM7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxnRkFBc0I7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxVQUFVO0FBQ1Y7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksYUFBYTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxhQUFhO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBLCtDQUErQyxVQUFVLFVBQVUsMkJBQTJCO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsS0FBSyxHQUFHLGFBQWE7QUFDakQ7QUFDQSxLQUFLO0FBQ0w7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDZ0c7QUFDaEciLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC9zdHJlYW0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSXRlcmFibGVSZWFkYWJsZVN0cmVhbSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvdXRpbHMvc3RyZWFtXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcHJlZ2VsL3N0cmVhbS50c1xuLyoqXG4qIEEgd3JhcHBlciBhcm91bmQgYW4gSXRlcmFibGVSZWFkYWJsZVN0cmVhbSB0aGF0IGFsbG93cyBmb3IgYWJvcnRpbmcgdGhlIHN0cmVhbSB3aGVuXG4qIHtAbGluayBjYW5jZWx9IGlzIGNhbGxlZC5cbiovXG52YXIgSXRlcmFibGVSZWFkYWJsZVN0cmVhbVdpdGhBYm9ydFNpZ25hbCA9IGNsYXNzIGV4dGVuZHMgSXRlcmFibGVSZWFkYWJsZVN0cmVhbSB7XG5cdF9hYm9ydENvbnRyb2xsZXI7XG5cdF9pbm5lclJlYWRlcjtcblx0LyoqXG5cdCogQHBhcmFtIHJlYWRhYmxlU3RyZWFtIC0gVGhlIHN0cmVhbSB0byB3cmFwLlxuXHQqIEBwYXJhbSBhYm9ydENvbnRyb2xsZXIgLSBUaGUgYWJvcnQgY29udHJvbGxlciB0byB1c2UuIE9wdGlvbmFsLiBPbmUgd2lsbCBiZSBjcmVhdGVkIGlmIG5vdCBwcm92aWRlZC5cblx0Ki9cblx0Y29uc3RydWN0b3IocmVhZGFibGVTdHJlYW0sIGFib3J0Q29udHJvbGxlcikge1xuXHRcdGNvbnN0IHJlYWRlciA9IHJlYWRhYmxlU3RyZWFtLmdldFJlYWRlcigpO1xuXHRcdGNvbnN0IGFjID0gYWJvcnRDb250cm9sbGVyID8/IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcblx0XHRzdXBlcih7IHN0YXJ0KGNvbnRyb2xsZXIpIHtcblx0XHRcdHJldHVybiBwdW1wKCk7XG5cdFx0XHRmdW5jdGlvbiBwdW1wKCkge1xuXHRcdFx0XHRyZXR1cm4gcmVhZGVyLnJlYWQoKS50aGVuKCh7IGRvbmUsIHZhbHVlIH0pID0+IHtcblx0XHRcdFx0XHRpZiAoZG9uZSkge1xuXHRcdFx0XHRcdFx0Y29udHJvbGxlci5jbG9zZSgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb250cm9sbGVyLmVucXVldWUodmFsdWUpO1xuXHRcdFx0XHRcdHJldHVybiBwdW1wKCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0gfSk7XG5cdFx0dGhpcy5fYWJvcnRDb250cm9sbGVyID0gYWM7XG5cdFx0dGhpcy5faW5uZXJSZWFkZXIgPSByZWFkZXI7XG5cdH1cblx0LyoqXG5cdCogQWJvcnRzIHRoZSBzdHJlYW0sIGFiYW5kb25pbmcgYW55IHBlbmRpbmcgb3BlcmF0aW9ucyBpbiBwcm9ncmVzcy4gQ2FsbGluZyB0aGlzIHRyaWdnZXJzIGFuXG5cdCoge0BsaW5rIEFib3J0U2lnbmFsfSB0aGF0IGlzIHByb3BhZ2F0ZWQgdG8gdGhlIHRhc2tzIHRoYXQgYXJlIHByb2R1Y2luZyB0aGUgZGF0YSBmb3IgdGhpcyBzdHJlYW0uXG5cdCogQHBhcmFtIHJlYXNvbiAtIFRoZSByZWFzb24gZm9yIGFib3J0aW5nIHRoZSBzdHJlYW0uIE9wdGlvbmFsLlxuXHQqL1xuXHRhc3luYyBjYW5jZWwocmVhc29uKSB7XG5cdFx0dGhpcy5fYWJvcnRDb250cm9sbGVyLmFib3J0KHJlYXNvbik7XG5cdFx0dGhpcy5faW5uZXJSZWFkZXIucmVsZWFzZUxvY2soKTtcblx0fVxuXHQvKipcblx0KiBUaGUge0BsaW5rIEFib3J0U2lnbmFsfSBmb3IgdGhlIHN0cmVhbS4gQWJvcnRlZCB3aGVuIHtAbGluayBjYW5jZWx9IGlzIGNhbGxlZC5cblx0Ki9cblx0Z2V0IHNpZ25hbCgpIHtcblx0XHRyZXR1cm4gdGhpcy5fYWJvcnRDb250cm9sbGVyLnNpZ25hbDtcblx0fVxufTtcbnZhciBJdGVyYWJsZVJlYWRhYmxlV3JpdGFibGVTdHJlYW0gPSBjbGFzcyBleHRlbmRzIEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0ge1xuXHRtb2Rlcztcblx0Y29udHJvbGxlcjtcblx0cGFzc3Rocm91Z2hGbjtcblx0X2Nsb3NlZCA9IGZhbHNlO1xuXHRnZXQgY2xvc2VkKCkge1xuXHRcdHJldHVybiB0aGlzLl9jbG9zZWQ7XG5cdH1cblx0Y29uc3RydWN0b3IocGFyYW1zKSB7XG5cdFx0bGV0IHN0cmVhbUNvbnRyb2xsZXJQcm9taXNlUmVzb2x2ZXI7XG5cdFx0Y29uc3Qgc3RyZWFtQ29udHJvbGxlclByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuXHRcdFx0c3RyZWFtQ29udHJvbGxlclByb21pc2VSZXNvbHZlciA9IHJlc29sdmU7XG5cdFx0fSk7XG5cdFx0c3VwZXIoeyBzdGFydDogKGNvbnRyb2xsZXIpID0+IHtcblx0XHRcdHN0cmVhbUNvbnRyb2xsZXJQcm9taXNlUmVzb2x2ZXIoY29udHJvbGxlcik7XG5cdFx0fSB9KTtcblx0XHRzdHJlYW1Db250cm9sbGVyUHJvbWlzZS50aGVuKChjb250cm9sbGVyKSA9PiB7XG5cdFx0XHR0aGlzLmNvbnRyb2xsZXIgPSBjb250cm9sbGVyO1xuXHRcdH0pO1xuXHRcdHRoaXMucGFzc3Rocm91Z2hGbiA9IHBhcmFtcy5wYXNzdGhyb3VnaEZuO1xuXHRcdHRoaXMubW9kZXMgPSBwYXJhbXMubW9kZXM7XG5cdH1cblx0cHVzaChjaHVuaykge1xuXHRcdHRoaXMucGFzc3Rocm91Z2hGbj8uKGNodW5rKTtcblx0XHR0aGlzLmNvbnRyb2xsZXIuZW5xdWV1ZShjaHVuayk7XG5cdH1cblx0Y2xvc2UoKSB7XG5cdFx0dHJ5IHtcblx0XHRcdHRoaXMuY29udHJvbGxlci5jbG9zZSgpO1xuXHRcdH0gY2F0Y2ggKGUpIHt9IGZpbmFsbHkge1xuXHRcdFx0dGhpcy5fY2xvc2VkID0gdHJ1ZTtcblx0XHR9XG5cdH1cblx0ZXJyb3IoZSkge1xuXHRcdHRoaXMuY29udHJvbGxlci5lcnJvcihlKTtcblx0fVxufTtcbmZ1bmN0aW9uIF9zdHJpbmdpZnlBc0RpY3Qob2JqKSB7XG5cdHJldHVybiBKU09OLnN0cmluZ2lmeShvYmosIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcblx0XHRjb25zdCByYXdWYWx1ZSA9IHRoaXNba2V5XTtcblx0XHRpZiAocmF3VmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgcmF3VmFsdWUgPT09IFwib2JqZWN0XCIgJiYgXCJ0b0RpY3RcIiBpbiByYXdWYWx1ZSAmJiB0eXBlb2YgcmF3VmFsdWUudG9EaWN0ID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdGNvbnN0IHsgdHlwZSwgZGF0YSB9ID0gcmF3VmFsdWUudG9EaWN0KCk7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHQuLi5kYXRhLFxuXHRcdFx0XHR0eXBlXG5cdFx0XHR9O1xuXHRcdH1cblx0XHRyZXR1cm4gdmFsdWU7XG5cdH0pO1xufVxuZnVuY3Rpb24gX3NlcmlhbGl6ZUVycm9yKGVycm9yKSB7XG5cdGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSByZXR1cm4ge1xuXHRcdGVycm9yOiBlcnJvci5uYW1lLFxuXHRcdG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2Vcblx0fTtcblx0cmV0dXJuIHtcblx0XHRlcnJvcjogXCJFcnJvclwiLFxuXHRcdG1lc3NhZ2U6IEpTT04uc3RyaW5naWZ5KGVycm9yKVxuXHR9O1xufVxuZnVuY3Rpb24gX2lzUnVubmFibGVDb25maWcoY29uZmlnKSB7XG5cdGlmICh0eXBlb2YgY29uZmlnICE9PSBcIm9iamVjdFwiIHx8IGNvbmZpZyA9PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cdHJldHVybiBcImNvbmZpZ3VyYWJsZVwiIGluIGNvbmZpZyAmJiB0eXBlb2YgY29uZmlnLmNvbmZpZ3VyYWJsZSA9PT0gXCJvYmplY3RcIiAmJiBjb25maWcuY29uZmlndXJhYmxlICE9IG51bGw7XG59XG5mdW5jdGlvbiBfZXh0cmFjdENoZWNrcG9pbnRGcm9tQ29uZmlnKGNvbmZpZykge1xuXHRpZiAoIV9pc1J1bm5hYmxlQ29uZmlnKGNvbmZpZykgfHwgIWNvbmZpZy5jb25maWd1cmFibGUudGhyZWFkX2lkKSByZXR1cm4gbnVsbDtcblx0cmV0dXJuIHtcblx0XHR0aHJlYWRfaWQ6IGNvbmZpZy5jb25maWd1cmFibGUudGhyZWFkX2lkLFxuXHRcdGNoZWNrcG9pbnRfbnM6IGNvbmZpZy5jb25maWd1cmFibGUuY2hlY2twb2ludF9ucyB8fCBcIlwiLFxuXHRcdGNoZWNrcG9pbnRfaWQ6IGNvbmZpZy5jb25maWd1cmFibGUuY2hlY2twb2ludF9pZCB8fCBudWxsLFxuXHRcdGNoZWNrcG9pbnRfbWFwOiBjb25maWcuY29uZmlndXJhYmxlLmNoZWNrcG9pbnRfbWFwIHx8IG51bGxcblx0fTtcbn1cbmZ1bmN0aW9uIF9zZXJpYWxpemVDb25maWcoY29uZmlnKSB7XG5cdGlmIChfaXNSdW5uYWJsZUNvbmZpZyhjb25maWcpKSB7XG5cdFx0Y29uc3QgY29uZmlndXJhYmxlID0gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKGNvbmZpZy5jb25maWd1cmFibGUpLmZpbHRlcigoW2tleV0pID0+ICFrZXkuc3RhcnRzV2l0aChcIl9fXCIpKSk7XG5cdFx0Y29uc3QgbmV3Q29uZmlnID0ge1xuXHRcdFx0Li4uY29uZmlnLFxuXHRcdFx0Y29uZmlndXJhYmxlXG5cdFx0fTtcblx0XHRkZWxldGUgbmV3Q29uZmlnLmNhbGxiYWNrcztcblx0XHRyZXR1cm4gbmV3Q29uZmlnO1xuXHR9XG5cdHJldHVybiBjb25maWc7XG59XG5mdW5jdGlvbiBfc2VyaWFsaXplQ2hlY2twb2ludChwYXlsb2FkKSB7XG5cdGNvbnN0IHJlc3VsdCA9IHtcblx0XHQuLi5wYXlsb2FkLFxuXHRcdGNoZWNrcG9pbnQ6IF9leHRyYWN0Q2hlY2twb2ludEZyb21Db25maWcocGF5bG9hZC5jb25maWcpLFxuXHRcdHBhcmVudF9jaGVja3BvaW50OiBfZXh0cmFjdENoZWNrcG9pbnRGcm9tQ29uZmlnKHBheWxvYWQucGFyZW50Q29uZmlnKSxcblx0XHRjb25maWc6IF9zZXJpYWxpemVDb25maWcocGF5bG9hZC5jb25maWcpLFxuXHRcdHBhcmVudF9jb25maWc6IF9zZXJpYWxpemVDb25maWcocGF5bG9hZC5wYXJlbnRDb25maWcpLFxuXHRcdHRhc2tzOiBwYXlsb2FkLnRhc2tzLm1hcCgodGFzaykgPT4ge1xuXHRcdFx0aWYgKF9pc1J1bm5hYmxlQ29uZmlnKHRhc2suc3RhdGUpKSB7XG5cdFx0XHRcdGNvbnN0IGNoZWNrcG9pbnQgPSBfZXh0cmFjdENoZWNrcG9pbnRGcm9tQ29uZmlnKHRhc2suc3RhdGUpO1xuXHRcdFx0XHRpZiAoY2hlY2twb2ludCAhPSBudWxsKSB7XG5cdFx0XHRcdFx0Y29uc3QgY2xvbmVUYXNrID0ge1xuXHRcdFx0XHRcdFx0Li4udGFzayxcblx0XHRcdFx0XHRcdGNoZWNrcG9pbnRcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdGRlbGV0ZSBjbG9uZVRhc2suc3RhdGU7XG5cdFx0XHRcdFx0cmV0dXJuIGNsb25lVGFzaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRhc2s7XG5cdFx0fSlcblx0fTtcblx0ZGVsZXRlIHJlc3VsdC5wYXJlbnRDb25maWc7XG5cdHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiB0b0V2ZW50U3RyZWFtKHN0cmVhbSkge1xuXHRjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG5cdHJldHVybiBuZXcgUmVhZGFibGVTdHJlYW0oeyBhc3luYyBzdGFydChjb250cm9sbGVyKSB7XG5cdFx0Y29uc3QgZW5xdWV1ZUNodW5rID0gKHNzZSkgPT4ge1xuXHRcdFx0Y29udHJvbGxlci5lbnF1ZXVlKGVuY29kZXIuZW5jb2RlKGBldmVudDogJHtzc2UuZXZlbnR9XFxuZGF0YTogJHtfc3RyaW5naWZ5QXNEaWN0KHNzZS5kYXRhKX1cXG5cXG5gKSk7XG5cdFx0fTtcblx0XHR0cnkge1xuXHRcdFx0Zm9yIGF3YWl0IChjb25zdCBwYXlsb2FkIG9mIHN0cmVhbSkge1xuXHRcdFx0XHRjb25zdCBbbnMsIG1vZGUsIGNodW5rXSA9IHBheWxvYWQ7XG5cdFx0XHRcdGxldCBkYXRhID0gY2h1bms7XG5cdFx0XHRcdGlmIChtb2RlID09PSBcImRlYnVnXCIpIHtcblx0XHRcdFx0XHRjb25zdCBkZWJ1Z0NodW5rID0gY2h1bms7XG5cdFx0XHRcdFx0aWYgKGRlYnVnQ2h1bmsudHlwZSA9PT0gXCJjaGVja3BvaW50XCIpIGRhdGEgPSB7XG5cdFx0XHRcdFx0XHQuLi5kZWJ1Z0NodW5rLFxuXHRcdFx0XHRcdFx0cGF5bG9hZDogX3NlcmlhbGl6ZUNoZWNrcG9pbnQoZGVidWdDaHVuay5wYXlsb2FkKVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKG1vZGUgPT09IFwiY2hlY2twb2ludHNcIikgZGF0YSA9IF9zZXJpYWxpemVDaGVja3BvaW50KGNodW5rKTtcblx0XHRcdFx0ZW5xdWV1ZUNodW5rKHtcblx0XHRcdFx0XHRldmVudDogbnM/Lmxlbmd0aCA/IGAke21vZGV9fCR7bnMuam9pbihcInxcIil9YCA6IG1vZGUsXG5cdFx0XHRcdFx0ZGF0YVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0ZW5xdWV1ZUNodW5rKHtcblx0XHRcdFx0ZXZlbnQ6IFwiZXJyb3JcIixcblx0XHRcdFx0ZGF0YTogX3NlcmlhbGl6ZUVycm9yKGVycm9yKVxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGNvbnRyb2xsZXIuY2xvc2UoKTtcblx0fSB9KTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtV2l0aEFib3J0U2lnbmFsLCBJdGVyYWJsZVJlYWRhYmxlV3JpdGFibGVTdHJlYW0sIHRvRXZlbnRTdHJlYW0gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0cmVhbS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/pregel/stream.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/pregel/types.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/pregel/types.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Call: () => (/* binding */ Call),\n/* harmony export */   isCall: () => (/* binding */ isCall)\n/* harmony export */ });\n//#region src/pregel/types.ts\nvar Call = class {\n\tfunc;\n\tname;\n\tinput;\n\tretry;\n\tcache;\n\tcallbacks;\n\t__lg_type = \"call\";\n\tconstructor({ func, name, input, retry, cache, callbacks }) {\n\t\tthis.func = func;\n\t\tthis.name = name;\n\t\tthis.input = input;\n\t\tthis.retry = retry;\n\t\tthis.cache = cache;\n\t\tthis.callbacks = callbacks;\n\t}\n};\nfunction isCall(value) {\n\treturn typeof value === \"object\" && value !== null && \"__lg_type\" in value && value.__lg_type === \"call\";\n}\n\n//#endregion\n\n//# sourceMappingURL=types.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvdHlwZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDRDQUE0QztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3dCO0FBQ3hCIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvdHlwZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9wcmVnZWwvdHlwZXMudHNcbnZhciBDYWxsID0gY2xhc3Mge1xuXHRmdW5jO1xuXHRuYW1lO1xuXHRpbnB1dDtcblx0cmV0cnk7XG5cdGNhY2hlO1xuXHRjYWxsYmFja3M7XG5cdF9fbGdfdHlwZSA9IFwiY2FsbFwiO1xuXHRjb25zdHJ1Y3Rvcih7IGZ1bmMsIG5hbWUsIGlucHV0LCByZXRyeSwgY2FjaGUsIGNhbGxiYWNrcyB9KSB7XG5cdFx0dGhpcy5mdW5jID0gZnVuYztcblx0XHR0aGlzLm5hbWUgPSBuYW1lO1xuXHRcdHRoaXMuaW5wdXQgPSBpbnB1dDtcblx0XHR0aGlzLnJldHJ5ID0gcmV0cnk7XG5cdFx0dGhpcy5jYWNoZSA9IGNhY2hlO1xuXHRcdHRoaXMuY2FsbGJhY2tzID0gY2FsbGJhY2tzO1xuXHR9XG59O1xuZnVuY3Rpb24gaXNDYWxsKHZhbHVlKSB7XG5cdHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgIT09IG51bGwgJiYgXCJfX2xnX3R5cGVcIiBpbiB2YWx1ZSAmJiB2YWx1ZS5fX2xnX3R5cGUgPT09IFwiY2FsbFwiO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IENhbGwsIGlzQ2FsbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHlwZXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/pregel/types.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/pregel/utils/config.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/pregel/utils/config.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ensureLangGraphConfig: () => (/* binding */ ensureLangGraphConfig),\n/* harmony export */   getConfig: () => (/* binding */ getConfig),\n/* harmony export */   getCurrentTaskInput: () => (/* binding */ getCurrentTaskInput),\n/* harmony export */   getParentCheckpointNamespace: () => (/* binding */ getParentCheckpointNamespace),\n/* harmony export */   getStore: () => (/* binding */ getStore),\n/* harmony export */   getWriter: () => (/* binding */ getWriter),\n/* harmony export */   recastCheckpointNamespace: () => (/* binding */ recastCheckpointNamespace)\n/* harmony export */ });\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../constants.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/singletons */ \"(ssr)/./node_modules/@langchain/core/dist/singletons/index.js\");\n\n\n\n//#region src/pregel/utils/config.ts\nconst COPIABLE_KEYS = [\n\t\"tags\",\n\t\"metadata\",\n\t\"callbacks\",\n\t\"configurable\"\n];\nconst CONFIG_KEYS = [\n\t\"tags\",\n\t\"metadata\",\n\t\"callbacks\",\n\t\"runName\",\n\t\"maxConcurrency\",\n\t\"recursionLimit\",\n\t\"configurable\",\n\t\"runId\",\n\t\"outputKeys\",\n\t\"streamMode\",\n\t\"store\",\n\t\"writer\",\n\t\"interrupt\",\n\t\"context\",\n\t\"interruptBefore\",\n\t\"interruptAfter\",\n\t\"checkpointDuring\",\n\t\"durability\",\n\t\"signal\"\n];\nconst DEFAULT_RECURSION_LIMIT = 25;\nfunction ensureLangGraphConfig(...configs) {\n\tconst empty = {\n\t\ttags: [],\n\t\tmetadata: {},\n\t\tcallbacks: void 0,\n\t\trecursionLimit: DEFAULT_RECURSION_LIMIT,\n\t\tconfigurable: {}\n\t};\n\tconst implicitConfig = _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.getRunnableConfig();\n\tif (implicitConfig !== void 0) {\n\t\tfor (const [k, v] of Object.entries(implicitConfig)) if (v !== void 0) if (COPIABLE_KEYS.includes(k)) {\n\t\t\tlet copiedValue;\n\t\t\tif (Array.isArray(v)) copiedValue = [...v];\n\t\t\telse if (typeof v === \"object\") if (k === \"callbacks\" && \"copy\" in v && typeof v.copy === \"function\") copiedValue = v.copy();\n\t\t\telse copiedValue = { ...v };\n\t\t\telse copiedValue = v;\n\t\t\tempty[k] = copiedValue;\n\t\t} else empty[k] = v;\n\t}\n\tfor (const config of configs) {\n\t\tif (config === void 0) continue;\n\t\tfor (const [k, v] of Object.entries(config)) if (v !== void 0 && CONFIG_KEYS.includes(k)) empty[k] = v;\n\t}\n\tfor (const [key, value] of Object.entries(empty.configurable)) {\n\t\tempty.metadata = empty.metadata ?? {};\n\t\tif (!key.startsWith(\"__\") && (typeof value === \"string\" || typeof value === \"number\" || typeof value === \"boolean\") && !(key in empty.metadata)) empty.metadata[key] = value;\n\t}\n\treturn empty;\n}\n/**\n* A helper utility function that returns the {@link BaseStore} that was set when the graph was initialized\n*\n* @returns a reference to the {@link BaseStore} that was set when the graph was initialized\n*/\nfunction getStore(config) {\n\tconst runConfig = config ?? _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.getRunnableConfig();\n\tif (runConfig === void 0) throw new Error([\"Config not retrievable. This is likely because you are running in an environment without support for AsyncLocalStorage.\", \"If you're running `getStore` in such environment, pass the `config` from the node function directly.\"].join(\"\\n\"));\n\treturn runConfig?.store;\n}\n/**\n* A helper utility function that returns the {@link LangGraphRunnableConfig#writer} if \"custom\" stream mode is enabled, otherwise undefined.\n*\n* @returns a reference to the {@link LangGraphRunnableConfig#writer} if \"custom\" stream mode is enabled, otherwise undefined\n*/\nfunction getWriter(config) {\n\tconst runConfig = config ?? _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.getRunnableConfig();\n\tif (runConfig === void 0) throw new Error([\"Config not retrievable. This is likely because you are running in an environment without support for AsyncLocalStorage.\", \"If you're running `getWriter` in such environment, pass the `config` from the node function directly.\"].join(\"\\n\"));\n\treturn runConfig?.writer || runConfig?.configurable?.writer;\n}\n/**\n* A helper utility function that returns the {@link LangGraphRunnableConfig} that was set when the graph was initialized.\n*\n* Note: This only works when running in an environment that supports node:async_hooks and AsyncLocalStorage. If you're running this in a\n* web environment, access the LangGraphRunnableConfig from the node function directly.\n*\n* @returns the {@link LangGraphRunnableConfig} that was set when the graph was initialized\n*/\nfunction getConfig() {\n\treturn _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.getRunnableConfig();\n}\n/**\n* A helper utility function that returns the input for the currently executing task\n*\n* @returns the input for the currently executing task\n*/\nfunction getCurrentTaskInput(config) {\n\tconst runConfig = config ?? _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.getRunnableConfig();\n\tif (runConfig === void 0) throw new Error([\"Config not retrievable. This is likely because you are running in an environment without support for AsyncLocalStorage.\", \"If you're running `getCurrentTaskInput` in such environment, pass the `config` from the node function directly.\"].join(\"\\n\"));\n\tif (runConfig.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_0__.CONFIG_KEY_SCRATCHPAD]?.currentTaskInput === void 0) throw new Error(\"BUG: internal scratchpad not initialized.\");\n\treturn runConfig.configurable[_constants_js__WEBPACK_IMPORTED_MODULE_0__.CONFIG_KEY_SCRATCHPAD].currentTaskInput;\n}\nfunction recastCheckpointNamespace(namespace) {\n\treturn namespace.split(_constants_js__WEBPACK_IMPORTED_MODULE_0__.CHECKPOINT_NAMESPACE_SEPARATOR).filter((part) => !part.match(/^\\d+$/)).map((part) => part.split(_constants_js__WEBPACK_IMPORTED_MODULE_0__.CHECKPOINT_NAMESPACE_END)[0]).join(_constants_js__WEBPACK_IMPORTED_MODULE_0__.CHECKPOINT_NAMESPACE_SEPARATOR);\n}\nfunction getParentCheckpointNamespace(namespace) {\n\tconst parts = namespace.split(_constants_js__WEBPACK_IMPORTED_MODULE_0__.CHECKPOINT_NAMESPACE_SEPARATOR);\n\twhile (parts.length > 1 && parts[parts.length - 1].match(/^\\d+$/)) parts.pop();\n\treturn parts.slice(0, -1).join(_constants_js__WEBPACK_IMPORTED_MODULE_0__.CHECKPOINT_NAMESPACE_SEPARATOR);\n}\n\n//#endregion\n\n//# sourceMappingURL=config.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvdXRpbHMvY29uZmlnLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFxSDtBQUNyQzs7QUFFaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwwRkFBa0M7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxpQkFBaUI7QUFDL0Q7QUFDQSwrQkFBK0IsaUJBQWlCO0FBQ2hEO0FBQ0E7QUFDQSw2QkFBNkIsMEZBQWtDO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLHNDQUFzQztBQUNwRjtBQUNBLCtCQUErQixzQ0FBc0M7QUFDckU7QUFDQTtBQUNBLDZCQUE2QiwwRkFBa0M7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsK0JBQStCO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLCtCQUErQjtBQUMvQztBQUNBO0FBQ0EsUUFBUSwwRkFBa0M7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsMEZBQWtDO0FBQy9EO0FBQ0EsOEJBQThCLGdFQUFxQjtBQUNuRCwrQkFBK0IsZ0VBQXFCO0FBQ3BEO0FBQ0E7QUFDQSx3QkFBd0IseUVBQThCLGtFQUFrRSxtRUFBd0IsV0FBVyx5RUFBOEI7QUFDekw7QUFDQTtBQUNBLCtCQUErQix5RUFBOEI7QUFDN0Q7QUFDQSxnQ0FBZ0MseUVBQThCO0FBQzlEOztBQUVBO0FBQytJO0FBQy9JIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvdXRpbHMvY29uZmlnLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENIRUNLUE9JTlRfTkFNRVNQQUNFX0VORCwgQ0hFQ0tQT0lOVF9OQU1FU1BBQ0VfU0VQQVJBVE9SLCBDT05GSUdfS0VZX1NDUkFUQ0hQQUQgfSBmcm9tIFwiLi4vLi4vY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9zaW5nbGV0b25zXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcHJlZ2VsL3V0aWxzL2NvbmZpZy50c1xuY29uc3QgQ09QSUFCTEVfS0VZUyA9IFtcblx0XCJ0YWdzXCIsXG5cdFwibWV0YWRhdGFcIixcblx0XCJjYWxsYmFja3NcIixcblx0XCJjb25maWd1cmFibGVcIlxuXTtcbmNvbnN0IENPTkZJR19LRVlTID0gW1xuXHRcInRhZ3NcIixcblx0XCJtZXRhZGF0YVwiLFxuXHRcImNhbGxiYWNrc1wiLFxuXHRcInJ1bk5hbWVcIixcblx0XCJtYXhDb25jdXJyZW5jeVwiLFxuXHRcInJlY3Vyc2lvbkxpbWl0XCIsXG5cdFwiY29uZmlndXJhYmxlXCIsXG5cdFwicnVuSWRcIixcblx0XCJvdXRwdXRLZXlzXCIsXG5cdFwic3RyZWFtTW9kZVwiLFxuXHRcInN0b3JlXCIsXG5cdFwid3JpdGVyXCIsXG5cdFwiaW50ZXJydXB0XCIsXG5cdFwiY29udGV4dFwiLFxuXHRcImludGVycnVwdEJlZm9yZVwiLFxuXHRcImludGVycnVwdEFmdGVyXCIsXG5cdFwiY2hlY2twb2ludER1cmluZ1wiLFxuXHRcImR1cmFiaWxpdHlcIixcblx0XCJzaWduYWxcIlxuXTtcbmNvbnN0IERFRkFVTFRfUkVDVVJTSU9OX0xJTUlUID0gMjU7XG5mdW5jdGlvbiBlbnN1cmVMYW5nR3JhcGhDb25maWcoLi4uY29uZmlncykge1xuXHRjb25zdCBlbXB0eSA9IHtcblx0XHR0YWdzOiBbXSxcblx0XHRtZXRhZGF0YToge30sXG5cdFx0Y2FsbGJhY2tzOiB2b2lkIDAsXG5cdFx0cmVjdXJzaW9uTGltaXQ6IERFRkFVTFRfUkVDVVJTSU9OX0xJTUlULFxuXHRcdGNvbmZpZ3VyYWJsZToge31cblx0fTtcblx0Y29uc3QgaW1wbGljaXRDb25maWcgPSBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLmdldFJ1bm5hYmxlQ29uZmlnKCk7XG5cdGlmIChpbXBsaWNpdENvbmZpZyAhPT0gdm9pZCAwKSB7XG5cdFx0Zm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaW1wbGljaXRDb25maWcpKSBpZiAodiAhPT0gdm9pZCAwKSBpZiAoQ09QSUFCTEVfS0VZUy5pbmNsdWRlcyhrKSkge1xuXHRcdFx0bGV0IGNvcGllZFZhbHVlO1xuXHRcdFx0aWYgKEFycmF5LmlzQXJyYXkodikpIGNvcGllZFZhbHVlID0gWy4uLnZdO1xuXHRcdFx0ZWxzZSBpZiAodHlwZW9mIHYgPT09IFwib2JqZWN0XCIpIGlmIChrID09PSBcImNhbGxiYWNrc1wiICYmIFwiY29weVwiIGluIHYgJiYgdHlwZW9mIHYuY29weSA9PT0gXCJmdW5jdGlvblwiKSBjb3BpZWRWYWx1ZSA9IHYuY29weSgpO1xuXHRcdFx0ZWxzZSBjb3BpZWRWYWx1ZSA9IHsgLi4udiB9O1xuXHRcdFx0ZWxzZSBjb3BpZWRWYWx1ZSA9IHY7XG5cdFx0XHRlbXB0eVtrXSA9IGNvcGllZFZhbHVlO1xuXHRcdH0gZWxzZSBlbXB0eVtrXSA9IHY7XG5cdH1cblx0Zm9yIChjb25zdCBjb25maWcgb2YgY29uZmlncykge1xuXHRcdGlmIChjb25maWcgPT09IHZvaWQgMCkgY29udGludWU7XG5cdFx0Zm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoY29uZmlnKSkgaWYgKHYgIT09IHZvaWQgMCAmJiBDT05GSUdfS0VZUy5pbmNsdWRlcyhrKSkgZW1wdHlba10gPSB2O1xuXHR9XG5cdGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGVtcHR5LmNvbmZpZ3VyYWJsZSkpIHtcblx0XHRlbXB0eS5tZXRhZGF0YSA9IGVtcHR5Lm1ldGFkYXRhID8/IHt9O1xuXHRcdGlmICgha2V5LnN0YXJ0c1dpdGgoXCJfX1wiKSAmJiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIiB8fCB0eXBlb2YgdmFsdWUgPT09IFwiYm9vbGVhblwiKSAmJiAhKGtleSBpbiBlbXB0eS5tZXRhZGF0YSkpIGVtcHR5Lm1ldGFkYXRhW2tleV0gPSB2YWx1ZTtcblx0fVxuXHRyZXR1cm4gZW1wdHk7XG59XG4vKipcbiogQSBoZWxwZXIgdXRpbGl0eSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIHtAbGluayBCYXNlU3RvcmV9IHRoYXQgd2FzIHNldCB3aGVuIHRoZSBncmFwaCB3YXMgaW5pdGlhbGl6ZWRcbipcbiogQHJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIHtAbGluayBCYXNlU3RvcmV9IHRoYXQgd2FzIHNldCB3aGVuIHRoZSBncmFwaCB3YXMgaW5pdGlhbGl6ZWRcbiovXG5mdW5jdGlvbiBnZXRTdG9yZShjb25maWcpIHtcblx0Y29uc3QgcnVuQ29uZmlnID0gY29uZmlnID8/IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24uZ2V0UnVubmFibGVDb25maWcoKTtcblx0aWYgKHJ1bkNvbmZpZyA9PT0gdm9pZCAwKSB0aHJvdyBuZXcgRXJyb3IoW1wiQ29uZmlnIG5vdCByZXRyaWV2YWJsZS4gVGhpcyBpcyBsaWtlbHkgYmVjYXVzZSB5b3UgYXJlIHJ1bm5pbmcgaW4gYW4gZW52aXJvbm1lbnQgd2l0aG91dCBzdXBwb3J0IGZvciBBc3luY0xvY2FsU3RvcmFnZS5cIiwgXCJJZiB5b3UncmUgcnVubmluZyBgZ2V0U3RvcmVgIGluIHN1Y2ggZW52aXJvbm1lbnQsIHBhc3MgdGhlIGBjb25maWdgIGZyb20gdGhlIG5vZGUgZnVuY3Rpb24gZGlyZWN0bHkuXCJdLmpvaW4oXCJcXG5cIikpO1xuXHRyZXR1cm4gcnVuQ29uZmlnPy5zdG9yZTtcbn1cbi8qKlxuKiBBIGhlbHBlciB1dGlsaXR5IGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUge0BsaW5rIExhbmdHcmFwaFJ1bm5hYmxlQ29uZmlnI3dyaXRlcn0gaWYgXCJjdXN0b21cIiBzdHJlYW0gbW9kZSBpcyBlbmFibGVkLCBvdGhlcndpc2UgdW5kZWZpbmVkLlxuKlxuKiBAcmV0dXJucyBhIHJlZmVyZW5jZSB0byB0aGUge0BsaW5rIExhbmdHcmFwaFJ1bm5hYmxlQ29uZmlnI3dyaXRlcn0gaWYgXCJjdXN0b21cIiBzdHJlYW0gbW9kZSBpcyBlbmFibGVkLCBvdGhlcndpc2UgdW5kZWZpbmVkXG4qL1xuZnVuY3Rpb24gZ2V0V3JpdGVyKGNvbmZpZykge1xuXHRjb25zdCBydW5Db25maWcgPSBjb25maWcgPz8gQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbi5nZXRSdW5uYWJsZUNvbmZpZygpO1xuXHRpZiAocnVuQ29uZmlnID09PSB2b2lkIDApIHRocm93IG5ldyBFcnJvcihbXCJDb25maWcgbm90IHJldHJpZXZhYmxlLiBUaGlzIGlzIGxpa2VseSBiZWNhdXNlIHlvdSBhcmUgcnVubmluZyBpbiBhbiBlbnZpcm9ubWVudCB3aXRob3V0IHN1cHBvcnQgZm9yIEFzeW5jTG9jYWxTdG9yYWdlLlwiLCBcIklmIHlvdSdyZSBydW5uaW5nIGBnZXRXcml0ZXJgIGluIHN1Y2ggZW52aXJvbm1lbnQsIHBhc3MgdGhlIGBjb25maWdgIGZyb20gdGhlIG5vZGUgZnVuY3Rpb24gZGlyZWN0bHkuXCJdLmpvaW4oXCJcXG5cIikpO1xuXHRyZXR1cm4gcnVuQ29uZmlnPy53cml0ZXIgfHwgcnVuQ29uZmlnPy5jb25maWd1cmFibGU/LndyaXRlcjtcbn1cbi8qKlxuKiBBIGhlbHBlciB1dGlsaXR5IGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUge0BsaW5rIExhbmdHcmFwaFJ1bm5hYmxlQ29uZmlnfSB0aGF0IHdhcyBzZXQgd2hlbiB0aGUgZ3JhcGggd2FzIGluaXRpYWxpemVkLlxuKlxuKiBOb3RlOiBUaGlzIG9ubHkgd29ya3Mgd2hlbiBydW5uaW5nIGluIGFuIGVudmlyb25tZW50IHRoYXQgc3VwcG9ydHMgbm9kZTphc3luY19ob29rcyBhbmQgQXN5bmNMb2NhbFN0b3JhZ2UuIElmIHlvdSdyZSBydW5uaW5nIHRoaXMgaW4gYVxuKiB3ZWIgZW52aXJvbm1lbnQsIGFjY2VzcyB0aGUgTGFuZ0dyYXBoUnVubmFibGVDb25maWcgZnJvbSB0aGUgbm9kZSBmdW5jdGlvbiBkaXJlY3RseS5cbipcbiogQHJldHVybnMgdGhlIHtAbGluayBMYW5nR3JhcGhSdW5uYWJsZUNvbmZpZ30gdGhhdCB3YXMgc2V0IHdoZW4gdGhlIGdyYXBoIHdhcyBpbml0aWFsaXplZFxuKi9cbmZ1bmN0aW9uIGdldENvbmZpZygpIHtcblx0cmV0dXJuIEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24uZ2V0UnVubmFibGVDb25maWcoKTtcbn1cbi8qKlxuKiBBIGhlbHBlciB1dGlsaXR5IGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgaW5wdXQgZm9yIHRoZSBjdXJyZW50bHkgZXhlY3V0aW5nIHRhc2tcbipcbiogQHJldHVybnMgdGhlIGlucHV0IGZvciB0aGUgY3VycmVudGx5IGV4ZWN1dGluZyB0YXNrXG4qL1xuZnVuY3Rpb24gZ2V0Q3VycmVudFRhc2tJbnB1dChjb25maWcpIHtcblx0Y29uc3QgcnVuQ29uZmlnID0gY29uZmlnID8/IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24uZ2V0UnVubmFibGVDb25maWcoKTtcblx0aWYgKHJ1bkNvbmZpZyA9PT0gdm9pZCAwKSB0aHJvdyBuZXcgRXJyb3IoW1wiQ29uZmlnIG5vdCByZXRyaWV2YWJsZS4gVGhpcyBpcyBsaWtlbHkgYmVjYXVzZSB5b3UgYXJlIHJ1bm5pbmcgaW4gYW4gZW52aXJvbm1lbnQgd2l0aG91dCBzdXBwb3J0IGZvciBBc3luY0xvY2FsU3RvcmFnZS5cIiwgXCJJZiB5b3UncmUgcnVubmluZyBgZ2V0Q3VycmVudFRhc2tJbnB1dGAgaW4gc3VjaCBlbnZpcm9ubWVudCwgcGFzcyB0aGUgYGNvbmZpZ2AgZnJvbSB0aGUgbm9kZSBmdW5jdGlvbiBkaXJlY3RseS5cIl0uam9pbihcIlxcblwiKSk7XG5cdGlmIChydW5Db25maWcuY29uZmlndXJhYmxlPy5bQ09ORklHX0tFWV9TQ1JBVENIUEFEXT8uY3VycmVudFRhc2tJbnB1dCA9PT0gdm9pZCAwKSB0aHJvdyBuZXcgRXJyb3IoXCJCVUc6IGludGVybmFsIHNjcmF0Y2hwYWQgbm90IGluaXRpYWxpemVkLlwiKTtcblx0cmV0dXJuIHJ1bkNvbmZpZy5jb25maWd1cmFibGVbQ09ORklHX0tFWV9TQ1JBVENIUEFEXS5jdXJyZW50VGFza0lucHV0O1xufVxuZnVuY3Rpb24gcmVjYXN0Q2hlY2twb2ludE5hbWVzcGFjZShuYW1lc3BhY2UpIHtcblx0cmV0dXJuIG5hbWVzcGFjZS5zcGxpdChDSEVDS1BPSU5UX05BTUVTUEFDRV9TRVBBUkFUT1IpLmZpbHRlcigocGFydCkgPT4gIXBhcnQubWF0Y2goL15cXGQrJC8pKS5tYXAoKHBhcnQpID0+IHBhcnQuc3BsaXQoQ0hFQ0tQT0lOVF9OQU1FU1BBQ0VfRU5EKVswXSkuam9pbihDSEVDS1BPSU5UX05BTUVTUEFDRV9TRVBBUkFUT1IpO1xufVxuZnVuY3Rpb24gZ2V0UGFyZW50Q2hlY2twb2ludE5hbWVzcGFjZShuYW1lc3BhY2UpIHtcblx0Y29uc3QgcGFydHMgPSBuYW1lc3BhY2Uuc3BsaXQoQ0hFQ0tQT0lOVF9OQU1FU1BBQ0VfU0VQQVJBVE9SKTtcblx0d2hpbGUgKHBhcnRzLmxlbmd0aCA+IDEgJiYgcGFydHNbcGFydHMubGVuZ3RoIC0gMV0ubWF0Y2goL15cXGQrJC8pKSBwYXJ0cy5wb3AoKTtcblx0cmV0dXJuIHBhcnRzLnNsaWNlKDAsIC0xKS5qb2luKENIRUNLUE9JTlRfTkFNRVNQQUNFX1NFUEFSQVRPUik7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZW5zdXJlTGFuZ0dyYXBoQ29uZmlnLCBnZXRDb25maWcsIGdldEN1cnJlbnRUYXNrSW5wdXQsIGdldFBhcmVudENoZWNrcG9pbnROYW1lc3BhY2UsIGdldFN0b3JlLCBnZXRXcml0ZXIsIHJlY2FzdENoZWNrcG9pbnROYW1lc3BhY2UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmZpZy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/pregel/utils/config.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/pregel/utils/index.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/pregel/utils/index.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _coerceToDict: () => (/* binding */ _coerceToDict),\n/* harmony export */   combineAbortSignals: () => (/* binding */ combineAbortSignals),\n/* harmony export */   combineCallbacks: () => (/* binding */ combineCallbacks),\n/* harmony export */   getNewChannelVersions: () => (/* binding */ getNewChannelVersions),\n/* harmony export */   getNullChannelVersion: () => (/* binding */ getNullChannelVersion),\n/* harmony export */   patchCheckpointMap: () => (/* binding */ patchCheckpointMap),\n/* harmony export */   patchConfigurable: () => (/* binding */ patchConfigurable)\n/* harmony export */ });\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../constants.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/constants.js\");\n\n\n//#region src/pregel/utils/index.ts\nfunction getNullChannelVersion(currentVersions) {\n\tconst startVersion = typeof currentVersions[_constants_js__WEBPACK_IMPORTED_MODULE_0__.START];\n\tif (startVersion === \"number\") return 0;\n\tif (startVersion === \"string\") return \"\";\n\tfor (const key in currentVersions) {\n\t\tif (!Object.prototype.hasOwnProperty.call(currentVersions, key)) continue;\n\t\tconst versionType = typeof currentVersions[key];\n\t\tif (versionType === \"number\") return 0;\n\t\tif (versionType === \"string\") return \"\";\n\t\tbreak;\n\t}\n}\nfunction getNewChannelVersions(previousVersions, currentVersions) {\n\tif (Object.keys(previousVersions).length > 0) {\n\t\tconst nullVersion = getNullChannelVersion(currentVersions);\n\t\treturn Object.fromEntries(Object.entries(currentVersions).filter(([k, v]) => v > (previousVersions[k] ?? nullVersion)));\n\t} else return currentVersions;\n}\nfunction _coerceToDict(value, defaultKey) {\n\treturn value && !Array.isArray(value) && !(value instanceof Date) && typeof value === \"object\" ? value : { [defaultKey]: value };\n}\nfunction patchConfigurable(config, patch) {\n\tif (config === null) return { configurable: patch };\n\telse if (config?.configurable === void 0) return {\n\t\t...config,\n\t\tconfigurable: patch\n\t};\n\telse return {\n\t\t...config,\n\t\tconfigurable: {\n\t\t\t...config.configurable,\n\t\t\t...patch\n\t\t}\n\t};\n}\nfunction patchCheckpointMap(config, metadata) {\n\tconst parents = metadata?.parents ?? {};\n\tif (Object.keys(parents).length > 0) return patchConfigurable(config, { [_constants_js__WEBPACK_IMPORTED_MODULE_0__.CONFIG_KEY_CHECKPOINT_MAP]: {\n\t\t...parents,\n\t\t[config.configurable?.checkpoint_ns ?? \"\"]: config.configurable?.checkpoint_id\n\t} });\n\telse return config;\n}\n/**\n* Combine multiple abort signals into a single abort signal.\n* @param signals - The abort signals to combine.\n* @returns A combined abort signal and a dispose function to remove the abort listener if unused.\n*/\nfunction combineAbortSignals(...x) {\n\tconst signals = [...new Set(x.filter(Boolean))];\n\tif (signals.length === 0) return {\n\t\tsignal: void 0,\n\t\tdispose: void 0\n\t};\n\tif (signals.length === 1) return {\n\t\tsignal: signals[0],\n\t\tdispose: void 0\n\t};\n\tconst combinedController = new AbortController();\n\tconst listener = () => {\n\t\tconst reason = signals.find((s) => s.aborted)?.reason;\n\t\tcombinedController.abort(reason);\n\t\tsignals.forEach((s) => s.removeEventListener(\"abort\", listener));\n\t};\n\tsignals.forEach((s) => s.addEventListener(\"abort\", listener, { once: true }));\n\tconst hasAlreadyAbortedSignal = signals.find((s) => s.aborted);\n\tif (hasAlreadyAbortedSignal) combinedController.abort(hasAlreadyAbortedSignal.reason);\n\treturn {\n\t\tsignal: combinedController.signal,\n\t\tdispose: () => {\n\t\t\tsignals.forEach((s) => s.removeEventListener(\"abort\", listener));\n\t\t}\n\t};\n}\n/**\n* Combine multiple callbacks into a single callback.\n* @param callback1 - The first callback to combine.\n* @param callback2 - The second callback to combine.\n* @returns A single callback that is a combination of the input callbacks.\n*/\nconst combineCallbacks = (callback1, callback2) => {\n\tif (!callback1 && !callback2) return;\n\tif (!callback1) return callback2;\n\tif (!callback2) return callback1;\n\tif (Array.isArray(callback1) && Array.isArray(callback2)) return [...callback1, ...callback2];\n\tif (Array.isArray(callback1)) return [...callback1, callback2];\n\tif (Array.isArray(callback2)) return [callback1, ...callback2];\n\treturn [callback1, callback2];\n};\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvdXRpbHMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0U7O0FBRXRFO0FBQ0E7QUFDQSw2Q0FBNkMsZ0RBQUs7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsNEdBQTRHO0FBQzVHO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RSxDQUFDLG9FQUF5QjtBQUNuRztBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsWUFBWTtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDcUo7QUFDckoiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC91dGlscy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDT05GSUdfS0VZX0NIRUNLUE9JTlRfTUFQLCBTVEFSVCB9IGZyb20gXCIuLi8uLi9jb25zdGFudHMuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9wcmVnZWwvdXRpbHMvaW5kZXgudHNcbmZ1bmN0aW9uIGdldE51bGxDaGFubmVsVmVyc2lvbihjdXJyZW50VmVyc2lvbnMpIHtcblx0Y29uc3Qgc3RhcnRWZXJzaW9uID0gdHlwZW9mIGN1cnJlbnRWZXJzaW9uc1tTVEFSVF07XG5cdGlmIChzdGFydFZlcnNpb24gPT09IFwibnVtYmVyXCIpIHJldHVybiAwO1xuXHRpZiAoc3RhcnRWZXJzaW9uID09PSBcInN0cmluZ1wiKSByZXR1cm4gXCJcIjtcblx0Zm9yIChjb25zdCBrZXkgaW4gY3VycmVudFZlcnNpb25zKSB7XG5cdFx0aWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoY3VycmVudFZlcnNpb25zLCBrZXkpKSBjb250aW51ZTtcblx0XHRjb25zdCB2ZXJzaW9uVHlwZSA9IHR5cGVvZiBjdXJyZW50VmVyc2lvbnNba2V5XTtcblx0XHRpZiAodmVyc2lvblR5cGUgPT09IFwibnVtYmVyXCIpIHJldHVybiAwO1xuXHRcdGlmICh2ZXJzaW9uVHlwZSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIFwiXCI7XG5cdFx0YnJlYWs7XG5cdH1cbn1cbmZ1bmN0aW9uIGdldE5ld0NoYW5uZWxWZXJzaW9ucyhwcmV2aW91c1ZlcnNpb25zLCBjdXJyZW50VmVyc2lvbnMpIHtcblx0aWYgKE9iamVjdC5rZXlzKHByZXZpb3VzVmVyc2lvbnMpLmxlbmd0aCA+IDApIHtcblx0XHRjb25zdCBudWxsVmVyc2lvbiA9IGdldE51bGxDaGFubmVsVmVyc2lvbihjdXJyZW50VmVyc2lvbnMpO1xuXHRcdHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoY3VycmVudFZlcnNpb25zKS5maWx0ZXIoKFtrLCB2XSkgPT4gdiA+IChwcmV2aW91c1ZlcnNpb25zW2tdID8/IG51bGxWZXJzaW9uKSkpO1xuXHR9IGVsc2UgcmV0dXJuIGN1cnJlbnRWZXJzaW9ucztcbn1cbmZ1bmN0aW9uIF9jb2VyY2VUb0RpY3QodmFsdWUsIGRlZmF1bHRLZXkpIHtcblx0cmV0dXJuIHZhbHVlICYmICFBcnJheS5pc0FycmF5KHZhbHVlKSAmJiAhKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiID8gdmFsdWUgOiB7IFtkZWZhdWx0S2V5XTogdmFsdWUgfTtcbn1cbmZ1bmN0aW9uIHBhdGNoQ29uZmlndXJhYmxlKGNvbmZpZywgcGF0Y2gpIHtcblx0aWYgKGNvbmZpZyA9PT0gbnVsbCkgcmV0dXJuIHsgY29uZmlndXJhYmxlOiBwYXRjaCB9O1xuXHRlbHNlIGlmIChjb25maWc/LmNvbmZpZ3VyYWJsZSA9PT0gdm9pZCAwKSByZXR1cm4ge1xuXHRcdC4uLmNvbmZpZyxcblx0XHRjb25maWd1cmFibGU6IHBhdGNoXG5cdH07XG5cdGVsc2UgcmV0dXJuIHtcblx0XHQuLi5jb25maWcsXG5cdFx0Y29uZmlndXJhYmxlOiB7XG5cdFx0XHQuLi5jb25maWcuY29uZmlndXJhYmxlLFxuXHRcdFx0Li4ucGF0Y2hcblx0XHR9XG5cdH07XG59XG5mdW5jdGlvbiBwYXRjaENoZWNrcG9pbnRNYXAoY29uZmlnLCBtZXRhZGF0YSkge1xuXHRjb25zdCBwYXJlbnRzID0gbWV0YWRhdGE/LnBhcmVudHMgPz8ge307XG5cdGlmIChPYmplY3Qua2V5cyhwYXJlbnRzKS5sZW5ndGggPiAwKSByZXR1cm4gcGF0Y2hDb25maWd1cmFibGUoY29uZmlnLCB7IFtDT05GSUdfS0VZX0NIRUNLUE9JTlRfTUFQXToge1xuXHRcdC4uLnBhcmVudHMsXG5cdFx0W2NvbmZpZy5jb25maWd1cmFibGU/LmNoZWNrcG9pbnRfbnMgPz8gXCJcIl06IGNvbmZpZy5jb25maWd1cmFibGU/LmNoZWNrcG9pbnRfaWRcblx0fSB9KTtcblx0ZWxzZSByZXR1cm4gY29uZmlnO1xufVxuLyoqXG4qIENvbWJpbmUgbXVsdGlwbGUgYWJvcnQgc2lnbmFscyBpbnRvIGEgc2luZ2xlIGFib3J0IHNpZ25hbC5cbiogQHBhcmFtIHNpZ25hbHMgLSBUaGUgYWJvcnQgc2lnbmFscyB0byBjb21iaW5lLlxuKiBAcmV0dXJucyBBIGNvbWJpbmVkIGFib3J0IHNpZ25hbCBhbmQgYSBkaXNwb3NlIGZ1bmN0aW9uIHRvIHJlbW92ZSB0aGUgYWJvcnQgbGlzdGVuZXIgaWYgdW51c2VkLlxuKi9cbmZ1bmN0aW9uIGNvbWJpbmVBYm9ydFNpZ25hbHMoLi4ueCkge1xuXHRjb25zdCBzaWduYWxzID0gWy4uLm5ldyBTZXQoeC5maWx0ZXIoQm9vbGVhbikpXTtcblx0aWYgKHNpZ25hbHMubGVuZ3RoID09PSAwKSByZXR1cm4ge1xuXHRcdHNpZ25hbDogdm9pZCAwLFxuXHRcdGRpc3Bvc2U6IHZvaWQgMFxuXHR9O1xuXHRpZiAoc2lnbmFscy5sZW5ndGggPT09IDEpIHJldHVybiB7XG5cdFx0c2lnbmFsOiBzaWduYWxzWzBdLFxuXHRcdGRpc3Bvc2U6IHZvaWQgMFxuXHR9O1xuXHRjb25zdCBjb21iaW5lZENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cdGNvbnN0IGxpc3RlbmVyID0gKCkgPT4ge1xuXHRcdGNvbnN0IHJlYXNvbiA9IHNpZ25hbHMuZmluZCgocykgPT4gcy5hYm9ydGVkKT8ucmVhc29uO1xuXHRcdGNvbWJpbmVkQ29udHJvbGxlci5hYm9ydChyZWFzb24pO1xuXHRcdHNpZ25hbHMuZm9yRWFjaCgocykgPT4gcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgbGlzdGVuZXIpKTtcblx0fTtcblx0c2lnbmFscy5mb3JFYWNoKChzKSA9PiBzLmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBsaXN0ZW5lciwgeyBvbmNlOiB0cnVlIH0pKTtcblx0Y29uc3QgaGFzQWxyZWFkeUFib3J0ZWRTaWduYWwgPSBzaWduYWxzLmZpbmQoKHMpID0+IHMuYWJvcnRlZCk7XG5cdGlmIChoYXNBbHJlYWR5QWJvcnRlZFNpZ25hbCkgY29tYmluZWRDb250cm9sbGVyLmFib3J0KGhhc0FscmVhZHlBYm9ydGVkU2lnbmFsLnJlYXNvbik7XG5cdHJldHVybiB7XG5cdFx0c2lnbmFsOiBjb21iaW5lZENvbnRyb2xsZXIuc2lnbmFsLFxuXHRcdGRpc3Bvc2U6ICgpID0+IHtcblx0XHRcdHNpZ25hbHMuZm9yRWFjaCgocykgPT4gcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgbGlzdGVuZXIpKTtcblx0XHR9XG5cdH07XG59XG4vKipcbiogQ29tYmluZSBtdWx0aXBsZSBjYWxsYmFja3MgaW50byBhIHNpbmdsZSBjYWxsYmFjay5cbiogQHBhcmFtIGNhbGxiYWNrMSAtIFRoZSBmaXJzdCBjYWxsYmFjayB0byBjb21iaW5lLlxuKiBAcGFyYW0gY2FsbGJhY2syIC0gVGhlIHNlY29uZCBjYWxsYmFjayB0byBjb21iaW5lLlxuKiBAcmV0dXJucyBBIHNpbmdsZSBjYWxsYmFjayB0aGF0IGlzIGEgY29tYmluYXRpb24gb2YgdGhlIGlucHV0IGNhbGxiYWNrcy5cbiovXG5jb25zdCBjb21iaW5lQ2FsbGJhY2tzID0gKGNhbGxiYWNrMSwgY2FsbGJhY2syKSA9PiB7XG5cdGlmICghY2FsbGJhY2sxICYmICFjYWxsYmFjazIpIHJldHVybjtcblx0aWYgKCFjYWxsYmFjazEpIHJldHVybiBjYWxsYmFjazI7XG5cdGlmICghY2FsbGJhY2syKSByZXR1cm4gY2FsbGJhY2sxO1xuXHRpZiAoQXJyYXkuaXNBcnJheShjYWxsYmFjazEpICYmIEFycmF5LmlzQXJyYXkoY2FsbGJhY2syKSkgcmV0dXJuIFsuLi5jYWxsYmFjazEsIC4uLmNhbGxiYWNrMl07XG5cdGlmIChBcnJheS5pc0FycmF5KGNhbGxiYWNrMSkpIHJldHVybiBbLi4uY2FsbGJhY2sxLCBjYWxsYmFjazJdO1xuXHRpZiAoQXJyYXkuaXNBcnJheShjYWxsYmFjazIpKSByZXR1cm4gW2NhbGxiYWNrMSwgLi4uY2FsbGJhY2syXTtcblx0cmV0dXJuIFtjYWxsYmFjazEsIGNhbGxiYWNrMl07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IF9jb2VyY2VUb0RpY3QsIGNvbWJpbmVBYm9ydFNpZ25hbHMsIGNvbWJpbmVDYWxsYmFja3MsIGdldE5ld0NoYW5uZWxWZXJzaW9ucywgZ2V0TnVsbENoYW5uZWxWZXJzaW9uLCBwYXRjaENoZWNrcG9pbnRNYXAsIHBhdGNoQ29uZmlndXJhYmxlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/pregel/utils/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/pregel/utils/subgraph.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/pregel/utils/subgraph.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   findSubgraphPregel: () => (/* binding */ findSubgraphPregel),\n/* harmony export */   isPregelLike: () => (/* binding */ isPregelLike)\n/* harmony export */ });\n//#region src/pregel/utils/subgraph.ts\nfunction isRunnableSequence(x) {\n\treturn \"steps\" in x && Array.isArray(x.steps);\n}\nfunction isPregelLike(x) {\n\treturn \"lg_is_pregel\" in x && x.lg_is_pregel === true;\n}\nfunction findSubgraphPregel(candidate) {\n\tconst candidates = [candidate];\n\tfor (const candidate$1 of candidates) if (isPregelLike(candidate$1)) return candidate$1;\n\telse if (isRunnableSequence(candidate$1)) candidates.push(...candidate$1.steps);\n}\n\n//#endregion\n\n//# sourceMappingURL=subgraph.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvdXRpbHMvc3ViZ3JhcGguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDNEM7QUFDNUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3ByZWdlbC91dGlscy9zdWJncmFwaC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3ByZWdlbC91dGlscy9zdWJncmFwaC50c1xuZnVuY3Rpb24gaXNSdW5uYWJsZVNlcXVlbmNlKHgpIHtcblx0cmV0dXJuIFwic3RlcHNcIiBpbiB4ICYmIEFycmF5LmlzQXJyYXkoeC5zdGVwcyk7XG59XG5mdW5jdGlvbiBpc1ByZWdlbExpa2UoeCkge1xuXHRyZXR1cm4gXCJsZ19pc19wcmVnZWxcIiBpbiB4ICYmIHgubGdfaXNfcHJlZ2VsID09PSB0cnVlO1xufVxuZnVuY3Rpb24gZmluZFN1YmdyYXBoUHJlZ2VsKGNhbmRpZGF0ZSkge1xuXHRjb25zdCBjYW5kaWRhdGVzID0gW2NhbmRpZGF0ZV07XG5cdGZvciAoY29uc3QgY2FuZGlkYXRlJDEgb2YgY2FuZGlkYXRlcykgaWYgKGlzUHJlZ2VsTGlrZShjYW5kaWRhdGUkMSkpIHJldHVybiBjYW5kaWRhdGUkMTtcblx0ZWxzZSBpZiAoaXNSdW5uYWJsZVNlcXVlbmNlKGNhbmRpZGF0ZSQxKSkgY2FuZGlkYXRlcy5wdXNoKC4uLmNhbmRpZGF0ZSQxLnN0ZXBzKTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBmaW5kU3ViZ3JhcGhQcmVnZWwsIGlzUHJlZ2VsTGlrZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3ViZ3JhcGguanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/pregel/utils/subgraph.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/pregel/validate.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/pregel/validate.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   validateGraph: () => (/* binding */ validateGraph),\n/* harmony export */   validateKeys: () => (/* binding */ validateKeys)\n/* harmony export */ });\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _read_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./read.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/read.js\");\n\n\n\n//#region src/pregel/validate.ts\nvar GraphValidationError = class extends Error {\n\tconstructor(message) {\n\t\tsuper(message);\n\t\tthis.name = \"GraphValidationError\";\n\t}\n};\nfunction validateGraph({ nodes, channels, inputChannels, outputChannels, streamChannels, interruptAfterNodes, interruptBeforeNodes }) {\n\tif (!channels) throw new GraphValidationError(\"Channels not provided\");\n\tconst subscribedChannels = /* @__PURE__ */ new Set();\n\tconst allOutputChannels = /* @__PURE__ */ new Set();\n\tfor (const [name, node] of Object.entries(nodes)) {\n\t\tif (name === _constants_js__WEBPACK_IMPORTED_MODULE_0__.INTERRUPT) throw new GraphValidationError(`\"Node name ${_constants_js__WEBPACK_IMPORTED_MODULE_0__.INTERRUPT} is reserved\"`);\n\t\tif (node.constructor === _read_js__WEBPACK_IMPORTED_MODULE_1__.PregelNode) node.triggers.forEach((trigger) => subscribedChannels.add(trigger));\n\t\telse throw new GraphValidationError(`Invalid node type ${typeof node}, expected PregelNode`);\n\t}\n\tfor (const chan of subscribedChannels) if (!(chan in channels)) throw new GraphValidationError(`Subscribed channel '${String(chan)}' not in channels`);\n\tif (!Array.isArray(inputChannels)) {\n\t\tif (!subscribedChannels.has(inputChannels)) throw new GraphValidationError(`Input channel ${String(inputChannels)} is not subscribed to by any node`);\n\t} else if (inputChannels.every((channel) => !subscribedChannels.has(channel))) throw new GraphValidationError(`None of the input channels ${inputChannels} are subscribed to by any node`);\n\tif (!Array.isArray(outputChannels)) allOutputChannels.add(outputChannels);\n\telse outputChannels.forEach((chan) => allOutputChannels.add(chan));\n\tif (streamChannels && !Array.isArray(streamChannels)) allOutputChannels.add(streamChannels);\n\telse if (Array.isArray(streamChannels)) streamChannels.forEach((chan) => allOutputChannels.add(chan));\n\tfor (const chan of allOutputChannels) if (!(chan in channels)) throw new GraphValidationError(`Output channel '${String(chan)}' not in channels`);\n\tif (interruptAfterNodes && interruptAfterNodes !== \"*\") {\n\t\tfor (const node of interruptAfterNodes) if (!(node in nodes)) throw new GraphValidationError(`Node ${String(node)} not in nodes`);\n\t}\n\tif (interruptBeforeNodes && interruptBeforeNodes !== \"*\") {\n\t\tfor (const node of interruptBeforeNodes) if (!(node in nodes)) throw new GraphValidationError(`Node ${String(node)} not in nodes`);\n\t}\n}\nfunction validateKeys(keys, channels) {\n\tif (Array.isArray(keys)) {\n\t\tfor (const key of keys) if (!(key in channels)) throw new Error(`Key ${String(key)} not found in channels`);\n\t} else if (!(keys in channels)) throw new Error(`Key ${String(keys)} not found in channels`);\n}\n\n//#endregion\n\n//# sourceMappingURL=validate.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvdmFsaWRhdGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUE0QztBQUNMOztBQUV2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwyR0FBMkc7QUFDcEk7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG9EQUFTLCtDQUErQyxvREFBUyxFQUFFO0FBQ2xGLDJCQUEyQixnREFBVTtBQUNyQywyREFBMkQsWUFBWTtBQUN2RTtBQUNBLHVIQUF1SCxhQUFhO0FBQ3BJO0FBQ0EsOEZBQThGLHVCQUF1QjtBQUNySCxHQUFHLDBJQUEwSSxlQUFlO0FBQzVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0hBQWtILGFBQWE7QUFDL0g7QUFDQSx1R0FBdUcsY0FBYztBQUNySDtBQUNBO0FBQ0Esd0dBQXdHLGNBQWM7QUFDdEg7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RUFBeUUsYUFBYTtBQUN0RixHQUFHLHFEQUFxRCxjQUFjO0FBQ3RFOztBQUVBO0FBQ3VDO0FBQ3ZDIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvdmFsaWRhdGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSU5URVJSVVBUIH0gZnJvbSBcIi4uL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgUHJlZ2VsTm9kZSB9IGZyb20gXCIuL3JlYWQuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9wcmVnZWwvdmFsaWRhdGUudHNcbnZhciBHcmFwaFZhbGlkYXRpb25FcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuXHRjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG5cdFx0c3VwZXIobWVzc2FnZSk7XG5cdFx0dGhpcy5uYW1lID0gXCJHcmFwaFZhbGlkYXRpb25FcnJvclwiO1xuXHR9XG59O1xuZnVuY3Rpb24gdmFsaWRhdGVHcmFwaCh7IG5vZGVzLCBjaGFubmVscywgaW5wdXRDaGFubmVscywgb3V0cHV0Q2hhbm5lbHMsIHN0cmVhbUNoYW5uZWxzLCBpbnRlcnJ1cHRBZnRlck5vZGVzLCBpbnRlcnJ1cHRCZWZvcmVOb2RlcyB9KSB7XG5cdGlmICghY2hhbm5lbHMpIHRocm93IG5ldyBHcmFwaFZhbGlkYXRpb25FcnJvcihcIkNoYW5uZWxzIG5vdCBwcm92aWRlZFwiKTtcblx0Y29uc3Qgc3Vic2NyaWJlZENoYW5uZWxzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcblx0Y29uc3QgYWxsT3V0cHV0Q2hhbm5lbHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuXHRmb3IgKGNvbnN0IFtuYW1lLCBub2RlXSBvZiBPYmplY3QuZW50cmllcyhub2RlcykpIHtcblx0XHRpZiAobmFtZSA9PT0gSU5URVJSVVBUKSB0aHJvdyBuZXcgR3JhcGhWYWxpZGF0aW9uRXJyb3IoYFwiTm9kZSBuYW1lICR7SU5URVJSVVBUfSBpcyByZXNlcnZlZFwiYCk7XG5cdFx0aWYgKG5vZGUuY29uc3RydWN0b3IgPT09IFByZWdlbE5vZGUpIG5vZGUudHJpZ2dlcnMuZm9yRWFjaCgodHJpZ2dlcikgPT4gc3Vic2NyaWJlZENoYW5uZWxzLmFkZCh0cmlnZ2VyKSk7XG5cdFx0ZWxzZSB0aHJvdyBuZXcgR3JhcGhWYWxpZGF0aW9uRXJyb3IoYEludmFsaWQgbm9kZSB0eXBlICR7dHlwZW9mIG5vZGV9LCBleHBlY3RlZCBQcmVnZWxOb2RlYCk7XG5cdH1cblx0Zm9yIChjb25zdCBjaGFuIG9mIHN1YnNjcmliZWRDaGFubmVscykgaWYgKCEoY2hhbiBpbiBjaGFubmVscykpIHRocm93IG5ldyBHcmFwaFZhbGlkYXRpb25FcnJvcihgU3Vic2NyaWJlZCBjaGFubmVsICcke1N0cmluZyhjaGFuKX0nIG5vdCBpbiBjaGFubmVsc2ApO1xuXHRpZiAoIUFycmF5LmlzQXJyYXkoaW5wdXRDaGFubmVscykpIHtcblx0XHRpZiAoIXN1YnNjcmliZWRDaGFubmVscy5oYXMoaW5wdXRDaGFubmVscykpIHRocm93IG5ldyBHcmFwaFZhbGlkYXRpb25FcnJvcihgSW5wdXQgY2hhbm5lbCAke1N0cmluZyhpbnB1dENoYW5uZWxzKX0gaXMgbm90IHN1YnNjcmliZWQgdG8gYnkgYW55IG5vZGVgKTtcblx0fSBlbHNlIGlmIChpbnB1dENoYW5uZWxzLmV2ZXJ5KChjaGFubmVsKSA9PiAhc3Vic2NyaWJlZENoYW5uZWxzLmhhcyhjaGFubmVsKSkpIHRocm93IG5ldyBHcmFwaFZhbGlkYXRpb25FcnJvcihgTm9uZSBvZiB0aGUgaW5wdXQgY2hhbm5lbHMgJHtpbnB1dENoYW5uZWxzfSBhcmUgc3Vic2NyaWJlZCB0byBieSBhbnkgbm9kZWApO1xuXHRpZiAoIUFycmF5LmlzQXJyYXkob3V0cHV0Q2hhbm5lbHMpKSBhbGxPdXRwdXRDaGFubmVscy5hZGQob3V0cHV0Q2hhbm5lbHMpO1xuXHRlbHNlIG91dHB1dENoYW5uZWxzLmZvckVhY2goKGNoYW4pID0+IGFsbE91dHB1dENoYW5uZWxzLmFkZChjaGFuKSk7XG5cdGlmIChzdHJlYW1DaGFubmVscyAmJiAhQXJyYXkuaXNBcnJheShzdHJlYW1DaGFubmVscykpIGFsbE91dHB1dENoYW5uZWxzLmFkZChzdHJlYW1DaGFubmVscyk7XG5cdGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoc3RyZWFtQ2hhbm5lbHMpKSBzdHJlYW1DaGFubmVscy5mb3JFYWNoKChjaGFuKSA9PiBhbGxPdXRwdXRDaGFubmVscy5hZGQoY2hhbikpO1xuXHRmb3IgKGNvbnN0IGNoYW4gb2YgYWxsT3V0cHV0Q2hhbm5lbHMpIGlmICghKGNoYW4gaW4gY2hhbm5lbHMpKSB0aHJvdyBuZXcgR3JhcGhWYWxpZGF0aW9uRXJyb3IoYE91dHB1dCBjaGFubmVsICcke1N0cmluZyhjaGFuKX0nIG5vdCBpbiBjaGFubmVsc2ApO1xuXHRpZiAoaW50ZXJydXB0QWZ0ZXJOb2RlcyAmJiBpbnRlcnJ1cHRBZnRlck5vZGVzICE9PSBcIipcIikge1xuXHRcdGZvciAoY29uc3Qgbm9kZSBvZiBpbnRlcnJ1cHRBZnRlck5vZGVzKSBpZiAoIShub2RlIGluIG5vZGVzKSkgdGhyb3cgbmV3IEdyYXBoVmFsaWRhdGlvbkVycm9yKGBOb2RlICR7U3RyaW5nKG5vZGUpfSBub3QgaW4gbm9kZXNgKTtcblx0fVxuXHRpZiAoaW50ZXJydXB0QmVmb3JlTm9kZXMgJiYgaW50ZXJydXB0QmVmb3JlTm9kZXMgIT09IFwiKlwiKSB7XG5cdFx0Zm9yIChjb25zdCBub2RlIG9mIGludGVycnVwdEJlZm9yZU5vZGVzKSBpZiAoIShub2RlIGluIG5vZGVzKSkgdGhyb3cgbmV3IEdyYXBoVmFsaWRhdGlvbkVycm9yKGBOb2RlICR7U3RyaW5nKG5vZGUpfSBub3QgaW4gbm9kZXNgKTtcblx0fVxufVxuZnVuY3Rpb24gdmFsaWRhdGVLZXlzKGtleXMsIGNoYW5uZWxzKSB7XG5cdGlmIChBcnJheS5pc0FycmF5KGtleXMpKSB7XG5cdFx0Zm9yIChjb25zdCBrZXkgb2Yga2V5cykgaWYgKCEoa2V5IGluIGNoYW5uZWxzKSkgdGhyb3cgbmV3IEVycm9yKGBLZXkgJHtTdHJpbmcoa2V5KX0gbm90IGZvdW5kIGluIGNoYW5uZWxzYCk7XG5cdH0gZWxzZSBpZiAoIShrZXlzIGluIGNoYW5uZWxzKSkgdGhyb3cgbmV3IEVycm9yKGBLZXkgJHtTdHJpbmcoa2V5cyl9IG5vdCBmb3VuZCBpbiBjaGFubmVsc2ApO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHZhbGlkYXRlR3JhcGgsIHZhbGlkYXRlS2V5cyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dmFsaWRhdGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/pregel/validate.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/pregel/write.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/pregel/write.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChannelWrite: () => (/* binding */ ChannelWrite),\n/* harmony export */   PASSTHROUGH: () => (/* binding */ PASSTHROUGH)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/utils.js\");\n/* harmony import */ var _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @langchain/core/runnables */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/index.js\");\n\n\n\n\n\n//#region src/pregel/write.ts\nconst SKIP_WRITE = { [Symbol.for(\"LG_SKIP_WRITE\")]: true };\nfunction _isSkipWrite(x) {\n\treturn typeof x === \"object\" && x?.[Symbol.for(\"LG_SKIP_WRITE\")] !== void 0;\n}\nconst PASSTHROUGH = { [Symbol.for(\"LG_PASSTHROUGH\")]: true };\nfunction _isPassthrough(x) {\n\treturn typeof x === \"object\" && x?.[Symbol.for(\"LG_PASSTHROUGH\")] !== void 0;\n}\nconst IS_WRITER = Symbol(\"IS_WRITER\");\n/**\n* Mapping of write channels to Runnables that return the value to be written,\n* or None to skip writing.\n*/\nvar ChannelWrite = class ChannelWrite extends _utils_js__WEBPACK_IMPORTED_MODULE_2__.RunnableCallable {\n\twrites;\n\tconstructor(writes, tags) {\n\t\tconst name = `ChannelWrite<${writes.map((packet) => {\n\t\t\tif ((0,_constants_js__WEBPACK_IMPORTED_MODULE_1__._isSend)(packet)) return packet.node;\n\t\t\telse if (\"channel\" in packet) return packet.channel;\n\t\t\treturn \"...\";\n\t\t}).join(\",\")}>`;\n\t\tsuper({\n\t\t\twrites,\n\t\t\tname,\n\t\t\ttags,\n\t\t\tfunc: async (input, config) => {\n\t\t\t\treturn this._write(input, config ?? {});\n\t\t\t}\n\t\t});\n\t\tthis.writes = writes;\n\t}\n\tasync _write(input, config) {\n\t\tconst writes = this.writes.map((write) => {\n\t\t\tif (_isChannelWriteTupleEntry(write) && _isPassthrough(write.value)) return {\n\t\t\t\tmapper: write.mapper,\n\t\t\t\tvalue: input\n\t\t\t};\n\t\t\telse if (_isChannelWriteEntry(write) && _isPassthrough(write.value)) return {\n\t\t\t\tchannel: write.channel,\n\t\t\t\tvalue: input,\n\t\t\t\tskipNone: write.skipNone,\n\t\t\t\tmapper: write.mapper\n\t\t\t};\n\t\t\telse return write;\n\t\t});\n\t\tawait ChannelWrite.doWrite(config, writes);\n\t\treturn input;\n\t}\n\tstatic async doWrite(config, writes) {\n\t\tfor (const w of writes) {\n\t\t\tif (_isChannelWriteEntry(w)) {\n\t\t\t\tif (w.channel === _constants_js__WEBPACK_IMPORTED_MODULE_1__.TASKS) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(\"Cannot write to the reserved channel TASKS\");\n\t\t\t\tif (_isPassthrough(w.value)) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(\"PASSTHROUGH value must be replaced\");\n\t\t\t}\n\t\t\tif (_isChannelWriteTupleEntry(w)) {\n\t\t\t\tif (_isPassthrough(w.value)) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError(\"PASSTHROUGH value must be replaced\");\n\t\t\t}\n\t\t}\n\t\tconst writeEntries = [];\n\t\tfor (const w of writes) if ((0,_constants_js__WEBPACK_IMPORTED_MODULE_1__._isSend)(w)) writeEntries.push([_constants_js__WEBPACK_IMPORTED_MODULE_1__.TASKS, w]);\n\t\telse if (_isChannelWriteTupleEntry(w)) {\n\t\t\tconst mappedResult = await w.mapper.invoke(w.value, config);\n\t\t\tif (mappedResult != null && mappedResult.length > 0) writeEntries.push(...mappedResult);\n\t\t} else if (_isChannelWriteEntry(w)) {\n\t\t\tconst mappedValue = w.mapper !== void 0 ? await w.mapper.invoke(w.value, config) : w.value;\n\t\t\tif (_isSkipWrite(mappedValue)) continue;\n\t\t\tif (w.skipNone && mappedValue === void 0) continue;\n\t\t\twriteEntries.push([w.channel, mappedValue]);\n\t\t} else throw new Error(`Invalid write entry: ${JSON.stringify(w)}`);\n\t\tconst write = config.configurable?.[_constants_js__WEBPACK_IMPORTED_MODULE_1__.CONFIG_KEY_SEND];\n\t\twrite(writeEntries);\n\t}\n\tstatic isWriter(runnable) {\n\t\treturn runnable instanceof ChannelWrite || IS_WRITER in runnable && !!runnable[IS_WRITER];\n\t}\n\tstatic registerWriter(runnable) {\n\t\treturn Object.defineProperty(runnable, IS_WRITER, { value: true });\n\t}\n};\nfunction _isChannelWriteEntry(x) {\n\treturn x !== void 0 && typeof x.channel === \"string\";\n}\nfunction _isChannelWriteTupleEntry(x) {\n\treturn x !== void 0 && !_isChannelWriteEntry(x) && _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_3__.Runnable.isRunnable(x.mapper);\n}\n\n//#endregion\n\n//# sourceMappingURL=write.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC9wcmVnZWwvd3JpdGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQWtEO0FBQ2dCO0FBQ25CO0FBQ007O0FBRXJEO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLHVEQUFnQjtBQUM5RDtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CLE9BQU8sc0RBQU87QUFDZDtBQUNBO0FBQ0EsR0FBRyxZQUFZO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGdEQUFLLFlBQVksMERBQWtCO0FBQ3pELDJDQUEyQywwREFBa0I7QUFDN0Q7QUFDQTtBQUNBLDJDQUEyQywwREFBa0I7QUFDN0Q7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHNEQUFPLHdCQUF3QixnREFBSztBQUNsRTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDZDQUE2QyxrQkFBa0I7QUFDbkUsc0NBQXNDLDBEQUFlO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxhQUFhO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCwrREFBUTtBQUM1RDs7QUFFQTtBQUNxQztBQUNyQyIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL2Rpc3QvcHJlZ2VsL3dyaXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEludmFsaWRVcGRhdGVFcnJvciB9IGZyb20gXCIuLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IENPTkZJR19LRVlfU0VORCwgVEFTS1MsIF9pc1NlbmQgfSBmcm9tIFwiLi4vY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBSdW5uYWJsZUNhbGxhYmxlIH0gZnJvbSBcIi4uL3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBSdW5uYWJsZSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvcnVubmFibGVzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcHJlZ2VsL3dyaXRlLnRzXG5jb25zdCBTS0lQX1dSSVRFID0geyBbU3ltYm9sLmZvcihcIkxHX1NLSVBfV1JJVEVcIildOiB0cnVlIH07XG5mdW5jdGlvbiBfaXNTa2lwV3JpdGUoeCkge1xuXHRyZXR1cm4gdHlwZW9mIHggPT09IFwib2JqZWN0XCIgJiYgeD8uW1N5bWJvbC5mb3IoXCJMR19TS0lQX1dSSVRFXCIpXSAhPT0gdm9pZCAwO1xufVxuY29uc3QgUEFTU1RIUk9VR0ggPSB7IFtTeW1ib2wuZm9yKFwiTEdfUEFTU1RIUk9VR0hcIildOiB0cnVlIH07XG5mdW5jdGlvbiBfaXNQYXNzdGhyb3VnaCh4KSB7XG5cdHJldHVybiB0eXBlb2YgeCA9PT0gXCJvYmplY3RcIiAmJiB4Py5bU3ltYm9sLmZvcihcIkxHX1BBU1NUSFJPVUdIXCIpXSAhPT0gdm9pZCAwO1xufVxuY29uc3QgSVNfV1JJVEVSID0gU3ltYm9sKFwiSVNfV1JJVEVSXCIpO1xuLyoqXG4qIE1hcHBpbmcgb2Ygd3JpdGUgY2hhbm5lbHMgdG8gUnVubmFibGVzIHRoYXQgcmV0dXJuIHRoZSB2YWx1ZSB0byBiZSB3cml0dGVuLFxuKiBvciBOb25lIHRvIHNraXAgd3JpdGluZy5cbiovXG52YXIgQ2hhbm5lbFdyaXRlID0gY2xhc3MgQ2hhbm5lbFdyaXRlIGV4dGVuZHMgUnVubmFibGVDYWxsYWJsZSB7XG5cdHdyaXRlcztcblx0Y29uc3RydWN0b3Iod3JpdGVzLCB0YWdzKSB7XG5cdFx0Y29uc3QgbmFtZSA9IGBDaGFubmVsV3JpdGU8JHt3cml0ZXMubWFwKChwYWNrZXQpID0+IHtcblx0XHRcdGlmIChfaXNTZW5kKHBhY2tldCkpIHJldHVybiBwYWNrZXQubm9kZTtcblx0XHRcdGVsc2UgaWYgKFwiY2hhbm5lbFwiIGluIHBhY2tldCkgcmV0dXJuIHBhY2tldC5jaGFubmVsO1xuXHRcdFx0cmV0dXJuIFwiLi4uXCI7XG5cdFx0fSkuam9pbihcIixcIil9PmA7XG5cdFx0c3VwZXIoe1xuXHRcdFx0d3JpdGVzLFxuXHRcdFx0bmFtZSxcblx0XHRcdHRhZ3MsXG5cdFx0XHRmdW5jOiBhc3luYyAoaW5wdXQsIGNvbmZpZykgPT4ge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5fd3JpdGUoaW5wdXQsIGNvbmZpZyA/PyB7fSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0dGhpcy53cml0ZXMgPSB3cml0ZXM7XG5cdH1cblx0YXN5bmMgX3dyaXRlKGlucHV0LCBjb25maWcpIHtcblx0XHRjb25zdCB3cml0ZXMgPSB0aGlzLndyaXRlcy5tYXAoKHdyaXRlKSA9PiB7XG5cdFx0XHRpZiAoX2lzQ2hhbm5lbFdyaXRlVHVwbGVFbnRyeSh3cml0ZSkgJiYgX2lzUGFzc3Rocm91Z2god3JpdGUudmFsdWUpKSByZXR1cm4ge1xuXHRcdFx0XHRtYXBwZXI6IHdyaXRlLm1hcHBlcixcblx0XHRcdFx0dmFsdWU6IGlucHV0XG5cdFx0XHR9O1xuXHRcdFx0ZWxzZSBpZiAoX2lzQ2hhbm5lbFdyaXRlRW50cnkod3JpdGUpICYmIF9pc1Bhc3N0aHJvdWdoKHdyaXRlLnZhbHVlKSkgcmV0dXJuIHtcblx0XHRcdFx0Y2hhbm5lbDogd3JpdGUuY2hhbm5lbCxcblx0XHRcdFx0dmFsdWU6IGlucHV0LFxuXHRcdFx0XHRza2lwTm9uZTogd3JpdGUuc2tpcE5vbmUsXG5cdFx0XHRcdG1hcHBlcjogd3JpdGUubWFwcGVyXG5cdFx0XHR9O1xuXHRcdFx0ZWxzZSByZXR1cm4gd3JpdGU7XG5cdFx0fSk7XG5cdFx0YXdhaXQgQ2hhbm5lbFdyaXRlLmRvV3JpdGUoY29uZmlnLCB3cml0ZXMpO1xuXHRcdHJldHVybiBpbnB1dDtcblx0fVxuXHRzdGF0aWMgYXN5bmMgZG9Xcml0ZShjb25maWcsIHdyaXRlcykge1xuXHRcdGZvciAoY29uc3QgdyBvZiB3cml0ZXMpIHtcblx0XHRcdGlmIChfaXNDaGFubmVsV3JpdGVFbnRyeSh3KSkge1xuXHRcdFx0XHRpZiAody5jaGFubmVsID09PSBUQVNLUykgdGhyb3cgbmV3IEludmFsaWRVcGRhdGVFcnJvcihcIkNhbm5vdCB3cml0ZSB0byB0aGUgcmVzZXJ2ZWQgY2hhbm5lbCBUQVNLU1wiKTtcblx0XHRcdFx0aWYgKF9pc1Bhc3N0aHJvdWdoKHcudmFsdWUpKSB0aHJvdyBuZXcgSW52YWxpZFVwZGF0ZUVycm9yKFwiUEFTU1RIUk9VR0ggdmFsdWUgbXVzdCBiZSByZXBsYWNlZFwiKTtcblx0XHRcdH1cblx0XHRcdGlmIChfaXNDaGFubmVsV3JpdGVUdXBsZUVudHJ5KHcpKSB7XG5cdFx0XHRcdGlmIChfaXNQYXNzdGhyb3VnaCh3LnZhbHVlKSkgdGhyb3cgbmV3IEludmFsaWRVcGRhdGVFcnJvcihcIlBBU1NUSFJPVUdIIHZhbHVlIG11c3QgYmUgcmVwbGFjZWRcIik7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IHdyaXRlRW50cmllcyA9IFtdO1xuXHRcdGZvciAoY29uc3QgdyBvZiB3cml0ZXMpIGlmIChfaXNTZW5kKHcpKSB3cml0ZUVudHJpZXMucHVzaChbVEFTS1MsIHddKTtcblx0XHRlbHNlIGlmIChfaXNDaGFubmVsV3JpdGVUdXBsZUVudHJ5KHcpKSB7XG5cdFx0XHRjb25zdCBtYXBwZWRSZXN1bHQgPSBhd2FpdCB3Lm1hcHBlci5pbnZva2Uody52YWx1ZSwgY29uZmlnKTtcblx0XHRcdGlmIChtYXBwZWRSZXN1bHQgIT0gbnVsbCAmJiBtYXBwZWRSZXN1bHQubGVuZ3RoID4gMCkgd3JpdGVFbnRyaWVzLnB1c2goLi4ubWFwcGVkUmVzdWx0KTtcblx0XHR9IGVsc2UgaWYgKF9pc0NoYW5uZWxXcml0ZUVudHJ5KHcpKSB7XG5cdFx0XHRjb25zdCBtYXBwZWRWYWx1ZSA9IHcubWFwcGVyICE9PSB2b2lkIDAgPyBhd2FpdCB3Lm1hcHBlci5pbnZva2Uody52YWx1ZSwgY29uZmlnKSA6IHcudmFsdWU7XG5cdFx0XHRpZiAoX2lzU2tpcFdyaXRlKG1hcHBlZFZhbHVlKSkgY29udGludWU7XG5cdFx0XHRpZiAody5za2lwTm9uZSAmJiBtYXBwZWRWYWx1ZSA9PT0gdm9pZCAwKSBjb250aW51ZTtcblx0XHRcdHdyaXRlRW50cmllcy5wdXNoKFt3LmNoYW5uZWwsIG1hcHBlZFZhbHVlXSk7XG5cdFx0fSBlbHNlIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB3cml0ZSBlbnRyeTogJHtKU09OLnN0cmluZ2lmeSh3KX1gKTtcblx0XHRjb25zdCB3cml0ZSA9IGNvbmZpZy5jb25maWd1cmFibGU/LltDT05GSUdfS0VZX1NFTkRdO1xuXHRcdHdyaXRlKHdyaXRlRW50cmllcyk7XG5cdH1cblx0c3RhdGljIGlzV3JpdGVyKHJ1bm5hYmxlKSB7XG5cdFx0cmV0dXJuIHJ1bm5hYmxlIGluc3RhbmNlb2YgQ2hhbm5lbFdyaXRlIHx8IElTX1dSSVRFUiBpbiBydW5uYWJsZSAmJiAhIXJ1bm5hYmxlW0lTX1dSSVRFUl07XG5cdH1cblx0c3RhdGljIHJlZ2lzdGVyV3JpdGVyKHJ1bm5hYmxlKSB7XG5cdFx0cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShydW5uYWJsZSwgSVNfV1JJVEVSLCB7IHZhbHVlOiB0cnVlIH0pO1xuXHR9XG59O1xuZnVuY3Rpb24gX2lzQ2hhbm5lbFdyaXRlRW50cnkoeCkge1xuXHRyZXR1cm4geCAhPT0gdm9pZCAwICYmIHR5cGVvZiB4LmNoYW5uZWwgPT09IFwic3RyaW5nXCI7XG59XG5mdW5jdGlvbiBfaXNDaGFubmVsV3JpdGVUdXBsZUVudHJ5KHgpIHtcblx0cmV0dXJuIHggIT09IHZvaWQgMCAmJiAhX2lzQ2hhbm5lbFdyaXRlRW50cnkoeCkgJiYgUnVubmFibGUuaXNSdW5uYWJsZSh4Lm1hcHBlcik7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQ2hhbm5lbFdyaXRlLCBQQVNTVEhST1VHSCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d3JpdGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/pregel/write.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/utils.js":
/*!*********************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/utils.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RunnableCallable: () => (/* binding */ RunnableCallable),\n/* harmony export */   gatherIterator: () => (/* binding */ gatherIterator),\n/* harmony export */   gatherIteratorSync: () => (/* binding */ gatherIteratorSync),\n/* harmony export */   isAsyncGeneratorFunction: () => (/* binding */ isAsyncGeneratorFunction),\n/* harmony export */   isGeneratorFunction: () => (/* binding */ isGeneratorFunction),\n/* harmony export */   patchConfigurable: () => (/* binding */ patchConfigurable),\n/* harmony export */   prefixGenerator: () => (/* binding */ prefixGenerator)\n/* harmony export */ });\n/* harmony import */ var _pregel_utils_config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./pregel/utils/config.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/pregel/utils/config.js\");\n/* harmony import */ var _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/singletons */ \"(ssr)/./node_modules/@langchain/core/dist/singletons/index.js\");\n/* harmony import */ var _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @langchain/core/runnables */ \"(ssr)/./node_modules/@langchain/core/dist/runnables/index.js\");\n\n\n\n\n//#region src/utils.ts\nvar RunnableCallable = class extends _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_2__.Runnable {\n\tlc_namespace = [\"langgraph\"];\n\tfunc;\n\ttags;\n\tconfig;\n\ttrace = true;\n\trecurse = true;\n\tconstructor(fields) {\n\t\tsuper();\n\t\tthis.name = fields.name ?? fields.func.name;\n\t\tthis.func = fields.func;\n\t\tthis.config = fields.tags ? { tags: fields.tags } : void 0;\n\t\tthis.trace = fields.trace ?? this.trace;\n\t\tthis.recurse = fields.recurse ?? this.recurse;\n\t}\n\tasync _tracedInvoke(input, config, runManager) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst childConfig = (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_2__.patchConfig)(config, { callbacks: runManager?.getChild() });\n\t\t\t_langchain_core_singletons__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.runWithConfig(childConfig, async () => {\n\t\t\t\ttry {\n\t\t\t\t\tresolve(await this.func(input, childConfig));\n\t\t\t\t} catch (e) {\n\t\t\t\t\treject(e);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\tasync invoke(input, options) {\n\t\tlet returnValue;\n\t\tconst config = (0,_pregel_utils_config_js__WEBPACK_IMPORTED_MODULE_0__.ensureLangGraphConfig)(options);\n\t\tconst mergedConfig = (0,_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_2__.mergeConfigs)(this.config, config);\n\t\tif (this.trace) returnValue = await this._callWithConfig(this._tracedInvoke, input, mergedConfig);\n\t\telse returnValue = await _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.runWithConfig(mergedConfig, async () => this.func(input, mergedConfig));\n\t\tif (_langchain_core_runnables__WEBPACK_IMPORTED_MODULE_2__.Runnable.isRunnable(returnValue) && this.recurse) return await _langchain_core_singletons__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.runWithConfig(mergedConfig, async () => returnValue.invoke(input, mergedConfig));\n\t\treturn returnValue;\n\t}\n};\nfunction* prefixGenerator(generator, prefix) {\n\tif (prefix === void 0) yield* generator;\n\telse for (const value of generator) yield [prefix, value];\n}\nasync function gatherIterator(i) {\n\tconst out = [];\n\tfor await (const item of await i) out.push(item);\n\treturn out;\n}\nfunction gatherIteratorSync(i) {\n\tconst out = [];\n\tfor (const item of i) out.push(item);\n\treturn out;\n}\nfunction patchConfigurable(config, patch) {\n\tif (!config) return { configurable: patch };\n\telse if (!(\"configurable\" in config)) return {\n\t\t...config,\n\t\tconfigurable: patch\n\t};\n\telse return {\n\t\t...config,\n\t\tconfigurable: {\n\t\t\t...config.configurable,\n\t\t\t...patch\n\t\t}\n\t};\n}\nfunction isAsyncGeneratorFunction(val) {\n\treturn val != null && typeof val === \"function\" && val instanceof Object.getPrototypeOf(async function* () {}).constructor;\n}\nfunction isGeneratorFunction(val) {\n\treturn val != null && typeof val === \"function\" && val instanceof Object.getPrototypeOf(function* () {}).constructor;\n}\n\n//#endregion\n\n//# sourceMappingURL=utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC91dGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQWlFO0FBQ2U7QUFDQTs7QUFFaEY7QUFDQSxxQ0FBcUMsK0RBQVE7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msb0JBQW9CO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsc0VBQVcsV0FBVyxtQ0FBbUM7QUFDaEYsR0FBRywwRkFBa0M7QUFDckM7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsOEVBQXFCO0FBQ3RDLHVCQUF1Qix1RUFBWTtBQUNuQztBQUNBLDJCQUEyQiwwRkFBa0M7QUFDN0QsTUFBTSwrREFBUSx1REFBdUQsMEZBQWtDO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhHQUE4RztBQUM5RztBQUNBO0FBQ0Esd0dBQXdHO0FBQ3hHOztBQUVBO0FBQ21KO0FBQ25KIiwic291cmNlcyI6WyIvVXNlcnMvYXZlcnkvdGVzdDIvYWdlbnQtY2hhdC11aS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC91dGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBlbnN1cmVMYW5nR3JhcGhDb25maWcgfSBmcm9tIFwiLi9wcmVnZWwvdXRpbHMvY29uZmlnLmpzXCI7XG5pbXBvcnQgeyBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9zaW5nbGV0b25zXCI7XG5pbXBvcnQgeyBSdW5uYWJsZSwgbWVyZ2VDb25maWdzLCBwYXRjaENvbmZpZyB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvcnVubmFibGVzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMudHNcbnZhciBSdW5uYWJsZUNhbGxhYmxlID0gY2xhc3MgZXh0ZW5kcyBSdW5uYWJsZSB7XG5cdGxjX25hbWVzcGFjZSA9IFtcImxhbmdncmFwaFwiXTtcblx0ZnVuYztcblx0dGFncztcblx0Y29uZmlnO1xuXHR0cmFjZSA9IHRydWU7XG5cdHJlY3Vyc2UgPSB0cnVlO1xuXHRjb25zdHJ1Y3RvcihmaWVsZHMpIHtcblx0XHRzdXBlcigpO1xuXHRcdHRoaXMubmFtZSA9IGZpZWxkcy5uYW1lID8/IGZpZWxkcy5mdW5jLm5hbWU7XG5cdFx0dGhpcy5mdW5jID0gZmllbGRzLmZ1bmM7XG5cdFx0dGhpcy5jb25maWcgPSBmaWVsZHMudGFncyA/IHsgdGFnczogZmllbGRzLnRhZ3MgfSA6IHZvaWQgMDtcblx0XHR0aGlzLnRyYWNlID0gZmllbGRzLnRyYWNlID8/IHRoaXMudHJhY2U7XG5cdFx0dGhpcy5yZWN1cnNlID0gZmllbGRzLnJlY3Vyc2UgPz8gdGhpcy5yZWN1cnNlO1xuXHR9XG5cdGFzeW5jIF90cmFjZWRJbnZva2UoaW5wdXQsIGNvbmZpZywgcnVuTWFuYWdlcikge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRjb25zdCBjaGlsZENvbmZpZyA9IHBhdGNoQ29uZmlnKGNvbmZpZywgeyBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKCkgfSk7XG5cdFx0XHRBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLnJ1bldpdGhDb25maWcoY2hpbGRDb25maWcsIGFzeW5jICgpID0+IHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRyZXNvbHZlKGF3YWl0IHRoaXMuZnVuYyhpbnB1dCwgY2hpbGRDb25maWcpKTtcblx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdHJlamVjdChlKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblx0YXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG5cdFx0bGV0IHJldHVyblZhbHVlO1xuXHRcdGNvbnN0IGNvbmZpZyA9IGVuc3VyZUxhbmdHcmFwaENvbmZpZyhvcHRpb25zKTtcblx0XHRjb25zdCBtZXJnZWRDb25maWcgPSBtZXJnZUNvbmZpZ3ModGhpcy5jb25maWcsIGNvbmZpZyk7XG5cdFx0aWYgKHRoaXMudHJhY2UpIHJldHVyblZhbHVlID0gYXdhaXQgdGhpcy5fY2FsbFdpdGhDb25maWcodGhpcy5fdHJhY2VkSW52b2tlLCBpbnB1dCwgbWVyZ2VkQ29uZmlnKTtcblx0XHRlbHNlIHJldHVyblZhbHVlID0gYXdhaXQgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbi5ydW5XaXRoQ29uZmlnKG1lcmdlZENvbmZpZywgYXN5bmMgKCkgPT4gdGhpcy5mdW5jKGlucHV0LCBtZXJnZWRDb25maWcpKTtcblx0XHRpZiAoUnVubmFibGUuaXNSdW5uYWJsZShyZXR1cm5WYWx1ZSkgJiYgdGhpcy5yZWN1cnNlKSByZXR1cm4gYXdhaXQgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbi5ydW5XaXRoQ29uZmlnKG1lcmdlZENvbmZpZywgYXN5bmMgKCkgPT4gcmV0dXJuVmFsdWUuaW52b2tlKGlucHV0LCBtZXJnZWRDb25maWcpKTtcblx0XHRyZXR1cm4gcmV0dXJuVmFsdWU7XG5cdH1cbn07XG5mdW5jdGlvbiogcHJlZml4R2VuZXJhdG9yKGdlbmVyYXRvciwgcHJlZml4KSB7XG5cdGlmIChwcmVmaXggPT09IHZvaWQgMCkgeWllbGQqIGdlbmVyYXRvcjtcblx0ZWxzZSBmb3IgKGNvbnN0IHZhbHVlIG9mIGdlbmVyYXRvcikgeWllbGQgW3ByZWZpeCwgdmFsdWVdO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2F0aGVySXRlcmF0b3IoaSkge1xuXHRjb25zdCBvdXQgPSBbXTtcblx0Zm9yIGF3YWl0IChjb25zdCBpdGVtIG9mIGF3YWl0IGkpIG91dC5wdXNoKGl0ZW0pO1xuXHRyZXR1cm4gb3V0O1xufVxuZnVuY3Rpb24gZ2F0aGVySXRlcmF0b3JTeW5jKGkpIHtcblx0Y29uc3Qgb3V0ID0gW107XG5cdGZvciAoY29uc3QgaXRlbSBvZiBpKSBvdXQucHVzaChpdGVtKTtcblx0cmV0dXJuIG91dDtcbn1cbmZ1bmN0aW9uIHBhdGNoQ29uZmlndXJhYmxlKGNvbmZpZywgcGF0Y2gpIHtcblx0aWYgKCFjb25maWcpIHJldHVybiB7IGNvbmZpZ3VyYWJsZTogcGF0Y2ggfTtcblx0ZWxzZSBpZiAoIShcImNvbmZpZ3VyYWJsZVwiIGluIGNvbmZpZykpIHJldHVybiB7XG5cdFx0Li4uY29uZmlnLFxuXHRcdGNvbmZpZ3VyYWJsZTogcGF0Y2hcblx0fTtcblx0ZWxzZSByZXR1cm4ge1xuXHRcdC4uLmNvbmZpZyxcblx0XHRjb25maWd1cmFibGU6IHtcblx0XHRcdC4uLmNvbmZpZy5jb25maWd1cmFibGUsXG5cdFx0XHQuLi5wYXRjaFxuXHRcdH1cblx0fTtcbn1cbmZ1bmN0aW9uIGlzQXN5bmNHZW5lcmF0b3JGdW5jdGlvbih2YWwpIHtcblx0cmV0dXJuIHZhbCAhPSBudWxsICYmIHR5cGVvZiB2YWwgPT09IFwiZnVuY3Rpb25cIiAmJiB2YWwgaW5zdGFuY2VvZiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoYXN5bmMgZnVuY3Rpb24qICgpIHt9KS5jb25zdHJ1Y3Rvcjtcbn1cbmZ1bmN0aW9uIGlzR2VuZXJhdG9yRnVuY3Rpb24odmFsKSB7XG5cdHJldHVybiB2YWwgIT0gbnVsbCAmJiB0eXBlb2YgdmFsID09PSBcImZ1bmN0aW9uXCIgJiYgdmFsIGluc3RhbmNlb2YgT2JqZWN0LmdldFByb3RvdHlwZU9mKGZ1bmN0aW9uKiAoKSB7fSkuY29uc3RydWN0b3I7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgUnVubmFibGVDYWxsYWJsZSwgZ2F0aGVySXRlcmF0b3IsIGdhdGhlckl0ZXJhdG9yU3luYywgaXNBc3luY0dlbmVyYXRvckZ1bmN0aW9uLCBpc0dlbmVyYXRvckZ1bmN0aW9uLCBwYXRjaENvbmZpZ3VyYWJsZSwgcHJlZml4R2VuZXJhdG9yIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/utils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/dist/web.js":
/*!*******************************************************!*\
  !*** ./node_modules/@langchain/langgraph/dist/web.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Annotation: () => (/* reexport safe */ _graph_annotation_js__WEBPACK_IMPORTED_MODULE_3__.Annotation),\n/* harmony export */   AsyncBatchedStore: () => (/* reexport safe */ _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_12__.AsyncBatchedStore),\n/* harmony export */   BaseChannel: () => (/* reexport safe */ _channels_base_js__WEBPACK_IMPORTED_MODULE_1__.BaseChannel),\n/* harmony export */   BaseCheckpointSaver: () => (/* reexport safe */ _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_12__.BaseCheckpointSaver),\n/* harmony export */   BaseLangGraphError: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_0__.BaseLangGraphError),\n/* harmony export */   BaseStore: () => (/* reexport safe */ _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_12__.BaseStore),\n/* harmony export */   BinaryOperatorAggregate: () => (/* reexport safe */ _channels_binop_js__WEBPACK_IMPORTED_MODULE_2__.BinaryOperatorAggregate),\n/* harmony export */   Command: () => (/* reexport safe */ _constants_js__WEBPACK_IMPORTED_MODULE_4__.Command),\n/* harmony export */   CompiledStateGraph: () => (/* reexport safe */ _graph_state_js__WEBPACK_IMPORTED_MODULE_6__.CompiledStateGraph),\n/* harmony export */   END: () => (/* reexport safe */ _constants_js__WEBPACK_IMPORTED_MODULE_4__.END),\n/* harmony export */   EmptyChannelError: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyChannelError),\n/* harmony export */   EmptyInputError: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_0__.EmptyInputError),\n/* harmony export */   Graph: () => (/* reexport safe */ _graph_graph_js__WEBPACK_IMPORTED_MODULE_5__.Graph),\n/* harmony export */   GraphBubbleUp: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_0__.GraphBubbleUp),\n/* harmony export */   GraphInterrupt: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_0__.GraphInterrupt),\n/* harmony export */   GraphRecursionError: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_0__.GraphRecursionError),\n/* harmony export */   GraphValueError: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_0__.GraphValueError),\n/* harmony export */   INTERRUPT: () => (/* reexport safe */ _constants_js__WEBPACK_IMPORTED_MODULE_4__.INTERRUPT),\n/* harmony export */   InMemoryStore: () => (/* reexport safe */ _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_12__.InMemoryStore),\n/* harmony export */   InvalidUpdateError: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_0__.InvalidUpdateError),\n/* harmony export */   MemorySaver: () => (/* reexport safe */ _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_12__.MemorySaver),\n/* harmony export */   MessageGraph: () => (/* reexport safe */ _graph_message_js__WEBPACK_IMPORTED_MODULE_7__.MessageGraph),\n/* harmony export */   MessagesAnnotation: () => (/* reexport safe */ _graph_messages_annotation_js__WEBPACK_IMPORTED_MODULE_11__.MessagesAnnotation),\n/* harmony export */   MessagesZodMeta: () => (/* reexport safe */ _graph_messages_annotation_js__WEBPACK_IMPORTED_MODULE_11__.MessagesZodMeta),\n/* harmony export */   MessagesZodState: () => (/* reexport safe */ _graph_messages_annotation_js__WEBPACK_IMPORTED_MODULE_11__.MessagesZodState),\n/* harmony export */   MultipleSubgraphsError: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_0__.MultipleSubgraphsError),\n/* harmony export */   NodeInterrupt: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_0__.NodeInterrupt),\n/* harmony export */   ParentCommand: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_0__.ParentCommand),\n/* harmony export */   REMOVE_ALL_MESSAGES: () => (/* reexport safe */ _graph_message_js__WEBPACK_IMPORTED_MODULE_7__.REMOVE_ALL_MESSAGES),\n/* harmony export */   RemoteException: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_0__.RemoteException),\n/* harmony export */   START: () => (/* reexport safe */ _constants_js__WEBPACK_IMPORTED_MODULE_4__.START),\n/* harmony export */   Send: () => (/* reexport safe */ _constants_js__WEBPACK_IMPORTED_MODULE_4__.Send),\n/* harmony export */   StateGraph: () => (/* reexport safe */ _graph_state_js__WEBPACK_IMPORTED_MODULE_6__.StateGraph),\n/* harmony export */   UnreachableNodeError: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_0__.UnreachableNodeError),\n/* harmony export */   addMessages: () => (/* reexport safe */ _graph_message_js__WEBPACK_IMPORTED_MODULE_7__.messagesStateReducer),\n/* harmony export */   copyCheckpoint: () => (/* reexport safe */ _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_12__.copyCheckpoint),\n/* harmony export */   emptyCheckpoint: () => (/* reexport safe */ _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_12__.emptyCheckpoint),\n/* harmony export */   entrypoint: () => (/* reexport safe */ _func_index_js__WEBPACK_IMPORTED_MODULE_10__.entrypoint),\n/* harmony export */   getSubgraphsSeenSet: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_0__.getSubgraphsSeenSet),\n/* harmony export */   isCommand: () => (/* reexport safe */ _constants_js__WEBPACK_IMPORTED_MODULE_4__.isCommand),\n/* harmony export */   isGraphBubbleUp: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_0__.isGraphBubbleUp),\n/* harmony export */   isGraphInterrupt: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_0__.isGraphInterrupt),\n/* harmony export */   isInterrupted: () => (/* reexport safe */ _constants_js__WEBPACK_IMPORTED_MODULE_4__.isInterrupted),\n/* harmony export */   isParentCommand: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_0__.isParentCommand),\n/* harmony export */   messagesStateReducer: () => (/* reexport safe */ _graph_message_js__WEBPACK_IMPORTED_MODULE_7__.messagesStateReducer),\n/* harmony export */   task: () => (/* reexport safe */ _func_index_js__WEBPACK_IMPORTED_MODULE_10__.task)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/errors.js\");\n/* harmony import */ var _channels_base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./channels/base.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/base.js\");\n/* harmony import */ var _channels_binop_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./channels/binop.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/binop.js\");\n/* harmony import */ var _graph_annotation_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./graph/annotation.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/graph/annotation.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/constants.js\");\n/* harmony import */ var _graph_graph_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./graph/graph.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/graph/graph.js\");\n/* harmony import */ var _graph_state_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./graph/state.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/graph/state.js\");\n/* harmony import */ var _graph_message_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./graph/message.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/graph/message.js\");\n/* harmony import */ var _graph_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./graph/index.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/graph/index.js\");\n/* harmony import */ var _channels_index_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./channels/index.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/channels/index.js\");\n/* harmony import */ var _func_index_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./func/index.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/func/index.js\");\n/* harmony import */ var _graph_messages_annotation_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./graph/messages_annotation.js */ \"(ssr)/./node_modules/@langchain/langgraph/dist/graph/messages_annotation.js\");\n/* harmony import */ var _langchain_langgraph_checkpoint__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @langchain/langgraph-checkpoint */ \"(ssr)/./node_modules/@langchain/langgraph-checkpoint/dist/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvZGlzdC93ZWIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBb1Y7QUFDblM7QUFDYTtBQUNYO0FBQzZDO0FBQ3ZEO0FBQ3lCO0FBQzJCO0FBQ25FO0FBQ0c7QUFDc0I7QUFDb0Q7QUFDMEQiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9kaXN0L3dlYi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlTGFuZ0dyYXBoRXJyb3IsIEVtcHR5Q2hhbm5lbEVycm9yLCBFbXB0eUlucHV0RXJyb3IsIEdyYXBoQnViYmxlVXAsIEdyYXBoSW50ZXJydXB0LCBHcmFwaFJlY3Vyc2lvbkVycm9yLCBHcmFwaFZhbHVlRXJyb3IsIEludmFsaWRVcGRhdGVFcnJvciwgTXVsdGlwbGVTdWJncmFwaHNFcnJvciwgTm9kZUludGVycnVwdCwgUGFyZW50Q29tbWFuZCwgUmVtb3RlRXhjZXB0aW9uLCBVbnJlYWNoYWJsZU5vZGVFcnJvciwgZ2V0U3ViZ3JhcGhzU2VlblNldCwgaXNHcmFwaEJ1YmJsZVVwLCBpc0dyYXBoSW50ZXJydXB0LCBpc1BhcmVudENvbW1hbmQgfSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IEJhc2VDaGFubmVsIH0gZnJvbSBcIi4vY2hhbm5lbHMvYmFzZS5qc1wiO1xuaW1wb3J0IHsgQmluYXJ5T3BlcmF0b3JBZ2dyZWdhdGUgfSBmcm9tIFwiLi9jaGFubmVscy9iaW5vcC5qc1wiO1xuaW1wb3J0IHsgQW5ub3RhdGlvbiB9IGZyb20gXCIuL2dyYXBoL2Fubm90YXRpb24uanNcIjtcbmltcG9ydCB7IENvbW1hbmQsIEVORCwgSU5URVJSVVBULCBTVEFSVCwgU2VuZCwgaXNDb21tYW5kLCBpc0ludGVycnVwdGVkIH0gZnJvbSBcIi4vY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBHcmFwaCB9IGZyb20gXCIuL2dyYXBoL2dyYXBoLmpzXCI7XG5pbXBvcnQgeyBDb21waWxlZFN0YXRlR3JhcGgsIFN0YXRlR3JhcGggfSBmcm9tIFwiLi9ncmFwaC9zdGF0ZS5qc1wiO1xuaW1wb3J0IHsgTWVzc2FnZUdyYXBoLCBSRU1PVkVfQUxMX01FU1NBR0VTLCBtZXNzYWdlc1N0YXRlUmVkdWNlciB9IGZyb20gXCIuL2dyYXBoL21lc3NhZ2UuanNcIjtcbmltcG9ydCBcIi4vZ3JhcGgvaW5kZXguanNcIjtcbmltcG9ydCBcIi4vY2hhbm5lbHMvaW5kZXguanNcIjtcbmltcG9ydCB7IGVudHJ5cG9pbnQsIHRhc2sgfSBmcm9tIFwiLi9mdW5jL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBNZXNzYWdlc0Fubm90YXRpb24sIE1lc3NhZ2VzWm9kTWV0YSwgTWVzc2FnZXNab2RTdGF0ZSB9IGZyb20gXCIuL2dyYXBoL21lc3NhZ2VzX2Fubm90YXRpb24uanNcIjtcbmltcG9ydCB7IEFzeW5jQmF0Y2hlZFN0b3JlLCBCYXNlQ2hlY2twb2ludFNhdmVyLCBCYXNlU3RvcmUsIEluTWVtb3J5U3RvcmUsIE1lbW9yeVNhdmVyLCBjb3B5Q2hlY2twb2ludCwgZW1wdHlDaGVja3BvaW50IH0gZnJvbSBcIkBsYW5nY2hhaW4vbGFuZ2dyYXBoLWNoZWNrcG9pbnRcIjtcblxuZXhwb3J0IHsgQW5ub3RhdGlvbiwgQXN5bmNCYXRjaGVkU3RvcmUsIEJhc2VDaGFubmVsLCBCYXNlQ2hlY2twb2ludFNhdmVyLCBCYXNlTGFuZ0dyYXBoRXJyb3IsIEJhc2VTdG9yZSwgQmluYXJ5T3BlcmF0b3JBZ2dyZWdhdGUsIENvbW1hbmQsIENvbXBpbGVkU3RhdGVHcmFwaCwgRU5ELCBFbXB0eUNoYW5uZWxFcnJvciwgRW1wdHlJbnB1dEVycm9yLCBHcmFwaCwgR3JhcGhCdWJibGVVcCwgR3JhcGhJbnRlcnJ1cHQsIEdyYXBoUmVjdXJzaW9uRXJyb3IsIEdyYXBoVmFsdWVFcnJvciwgSU5URVJSVVBULCBJbk1lbW9yeVN0b3JlLCBJbnZhbGlkVXBkYXRlRXJyb3IsIE1lbW9yeVNhdmVyLCBNZXNzYWdlR3JhcGgsIE1lc3NhZ2VzQW5ub3RhdGlvbiwgTWVzc2FnZXNab2RNZXRhLCBNZXNzYWdlc1pvZFN0YXRlLCBNdWx0aXBsZVN1YmdyYXBoc0Vycm9yLCBOb2RlSW50ZXJydXB0LCBQYXJlbnRDb21tYW5kLCBSRU1PVkVfQUxMX01FU1NBR0VTLCBSZW1vdGVFeGNlcHRpb24sIFNUQVJULCBTZW5kLCBTdGF0ZUdyYXBoLCBVbnJlYWNoYWJsZU5vZGVFcnJvciwgbWVzc2FnZXNTdGF0ZVJlZHVjZXIgYXMgYWRkTWVzc2FnZXMsIGNvcHlDaGVja3BvaW50LCBlbXB0eUNoZWNrcG9pbnQsIGVudHJ5cG9pbnQsIGdldFN1YmdyYXBoc1NlZW5TZXQsIGlzQ29tbWFuZCwgaXNHcmFwaEJ1YmJsZVVwLCBpc0dyYXBoSW50ZXJydXB0LCBpc0ludGVycnVwdGVkLCBpc1BhcmVudENvbW1hbmQsIG1lc3NhZ2VzU3RhdGVSZWR1Y2VyLCB0YXNrIH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/dist/web.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/node_modules/uuid/dist/esm-node/native.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/node_modules/uuid/dist/esm-node/native.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_crypto__WEBPACK_IMPORTED_MODULE_0__);\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  randomUUID: (node_crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID)\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS9uYXRpdmUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWlDO0FBQ2pDLGlFQUFlO0FBQ2YsY0FBYywrREFBaUI7QUFDL0IsQ0FBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvbmF0aXZlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjcnlwdG8gZnJvbSAnbm9kZTpjcnlwdG8nO1xuZXhwb3J0IGRlZmF1bHQge1xuICByYW5kb21VVUlEOiBjcnlwdG8ucmFuZG9tVVVJRFxufTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/node_modules/uuid/dist/esm-node/native.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/node_modules/uuid/dist/esm-node/regex.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/node_modules/uuid/dist/esm-node/regex.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS9yZWdleC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUsY0FBYyxFQUFFLFVBQVUsRUFBRSxlQUFlLEVBQUUsZ0JBQWdCLEVBQUUsVUFBVSxHQUFHLDhFQUE4RSIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvcmVnZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgL14oPzpbMC05YS1mXXs4fS1bMC05YS1mXXs0fS1bMS04XVswLTlhLWZdezN9LVs4OWFiXVswLTlhLWZdezN9LVswLTlhLWZdezEyfXwwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDB8ZmZmZmZmZmYtZmZmZi1mZmZmLWZmZmYtZmZmZmZmZmZmZmZmKSQvaTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/node_modules/uuid/dist/esm-node/regex.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/node_modules/uuid/dist/esm-node/rng.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/node_modules/uuid/dist/esm-node/rng.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ rng)\n/* harmony export */ });\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_crypto__WEBPACK_IMPORTED_MODULE_0__);\n\nconst rnds8Pool = new Uint8Array(256); // # of random values to pre-allocate\nlet poolPtr = rnds8Pool.length;\nfunction rng() {\n  if (poolPtr > rnds8Pool.length - 16) {\n    node_crypto__WEBPACK_IMPORTED_MODULE_0___default().randomFillSync(rnds8Pool);\n    poolPtr = 0;\n  }\n  return rnds8Pool.slice(poolPtr, poolPtr += 16);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS9ybmcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWlDO0FBQ2pDLHVDQUF1QztBQUN2QztBQUNlO0FBQ2Y7QUFDQSxJQUFJLGlFQUFxQjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvcm5nLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjcnlwdG8gZnJvbSAnbm9kZTpjcnlwdG8nO1xuY29uc3Qgcm5kczhQb29sID0gbmV3IFVpbnQ4QXJyYXkoMjU2KTsgLy8gIyBvZiByYW5kb20gdmFsdWVzIHRvIHByZS1hbGxvY2F0ZVxubGV0IHBvb2xQdHIgPSBybmRzOFBvb2wubGVuZ3RoO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcm5nKCkge1xuICBpZiAocG9vbFB0ciA+IHJuZHM4UG9vbC5sZW5ndGggLSAxNikge1xuICAgIGNyeXB0by5yYW5kb21GaWxsU3luYyhybmRzOFBvb2wpO1xuICAgIHBvb2xQdHIgPSAwO1xuICB9XG4gIHJldHVybiBybmRzOFBvb2wuc2xpY2UocG9vbFB0ciwgcG9vbFB0ciArPSAxNik7XG59Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/node_modules/uuid/dist/esm-node/rng.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/node_modules/uuid/dist/esm-node/stringify.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/node_modules/uuid/dist/esm-node/stringify.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   unsafeStringify: () => (/* binding */ unsafeStringify)\n/* harmony export */ });\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validate.js */ \"(ssr)/./node_modules/@langchain/langgraph/node_modules/uuid/dist/esm-node/validate.js\");\n\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nfunction unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  //\n  // Note to future-self: No, you can't remove the `toLowerCase()` call.\n  // REF: https://github.com/uuidjs/uuid/pull/677#issuecomment-1757351351\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset);\n  // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n  if (!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n  return uuid;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (stringify);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS9zdHJpbmdpZnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXFDOztBQUVyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sd0RBQVE7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFlLFNBQVMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3N0cmluZ2lmeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdmFsaWRhdGUgZnJvbSAnLi92YWxpZGF0ZS5qcyc7XG5cbi8qKlxuICogQ29udmVydCBhcnJheSBvZiAxNiBieXRlIHZhbHVlcyB0byBVVUlEIHN0cmluZyBmb3JtYXQgb2YgdGhlIGZvcm06XG4gKiBYWFhYWFhYWC1YWFhYLVhYWFgtWFhYWC1YWFhYWFhYWFhYWFhcbiAqL1xuY29uc3QgYnl0ZVRvSGV4ID0gW107XG5mb3IgKGxldCBpID0gMDsgaSA8IDI1NjsgKytpKSB7XG4gIGJ5dGVUb0hleC5wdXNoKChpICsgMHgxMDApLnRvU3RyaW5nKDE2KS5zbGljZSgxKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gdW5zYWZlU3RyaW5naWZ5KGFyciwgb2Zmc2V0ID0gMCkge1xuICAvLyBOb3RlOiBCZSBjYXJlZnVsIGVkaXRpbmcgdGhpcyBjb2RlISAgSXQncyBiZWVuIHR1bmVkIGZvciBwZXJmb3JtYW5jZVxuICAvLyBhbmQgd29ya3MgaW4gd2F5cyB5b3UgbWF5IG5vdCBleHBlY3QuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQvcHVsbC80MzRcbiAgLy9cbiAgLy8gTm90ZSB0byBmdXR1cmUtc2VsZjogTm8sIHlvdSBjYW4ndCByZW1vdmUgdGhlIGB0b0xvd2VyQ2FzZSgpYCBjYWxsLlxuICAvLyBSRUY6IGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZC9wdWxsLzY3NyNpc3N1ZWNvbW1lbnQtMTc1NzM1MTM1MVxuICByZXR1cm4gKGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDJdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgM11dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA0XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDVdXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA3XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDhdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgOV1dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMV1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxM11dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxNF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxNV1dKS50b0xvd2VyQ2FzZSgpO1xufVxuZnVuY3Rpb24gc3RyaW5naWZ5KGFyciwgb2Zmc2V0ID0gMCkge1xuICBjb25zdCB1dWlkID0gdW5zYWZlU3RyaW5naWZ5KGFyciwgb2Zmc2V0KTtcbiAgLy8gQ29uc2lzdGVuY3kgY2hlY2sgZm9yIHZhbGlkIFVVSUQuICBJZiB0aGlzIHRocm93cywgaXQncyBsaWtlbHkgZHVlIHRvIG9uZVxuICAvLyBvZiB0aGUgZm9sbG93aW5nOlxuICAvLyAtIE9uZSBvciBtb3JlIGlucHV0IGFycmF5IHZhbHVlcyBkb24ndCBtYXAgdG8gYSBoZXggb2N0ZXQgKGxlYWRpbmcgdG9cbiAgLy8gXCJ1bmRlZmluZWRcIiBpbiB0aGUgdXVpZClcbiAgLy8gLSBJbnZhbGlkIGlucHV0IHZhbHVlcyBmb3IgdGhlIFJGQyBgdmVyc2lvbmAgb3IgYHZhcmlhbnRgIGZpZWxkc1xuICBpZiAoIXZhbGlkYXRlKHV1aWQpKSB7XG4gICAgdGhyb3cgVHlwZUVycm9yKCdTdHJpbmdpZmllZCBVVUlEIGlzIGludmFsaWQnKTtcbiAgfVxuICByZXR1cm4gdXVpZDtcbn1cbmV4cG9ydCBkZWZhdWx0IHN0cmluZ2lmeTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/node_modules/uuid/dist/esm-node/stringify.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/node_modules/uuid/dist/esm-node/v4.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/node_modules/uuid/dist/esm-node/v4.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _native_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./native.js */ \"(ssr)/./node_modules/@langchain/langgraph/node_modules/uuid/dist/esm-node/native.js\");\n/* harmony import */ var _rng_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rng.js */ \"(ssr)/./node_modules/@langchain/langgraph/node_modules/uuid/dist/esm-node/rng.js\");\n/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./stringify.js */ \"(ssr)/./node_modules/@langchain/langgraph/node_modules/uuid/dist/esm-node/stringify.js\");\n\n\n\nfunction v4(options, buf, offset) {\n  if (_native_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].randomUUID && !buf && !options) {\n    return _native_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].randomUUID();\n  }\n  options = options || {};\n  const rnds = options.random || (options.rng || _rng_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    offset = offset || 0;\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n    return buf;\n  }\n  return (0,_stringify_js__WEBPACK_IMPORTED_MODULE_2__.unsafeStringify)(rnds);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (v4);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS92NC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWlDO0FBQ047QUFDc0I7QUFDakQ7QUFDQSxNQUFNLGtEQUFNO0FBQ1osV0FBVyxrREFBTTtBQUNqQjtBQUNBO0FBQ0EsaURBQWlELCtDQUFHOztBQUVwRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFFBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDhEQUFlO0FBQ3hCO0FBQ0EsaUVBQWUsRUFBRSIsInNvdXJjZXMiOlsiL1VzZXJzL2F2ZXJ5L3Rlc3QyL2FnZW50LWNoYXQtdWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbGFuZ2dyYXBoL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvdjQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG5hdGl2ZSBmcm9tICcuL25hdGl2ZS5qcyc7XG5pbXBvcnQgcm5nIGZyb20gJy4vcm5nLmpzJztcbmltcG9ydCB7IHVuc2FmZVN0cmluZ2lmeSB9IGZyb20gJy4vc3RyaW5naWZ5LmpzJztcbmZ1bmN0aW9uIHY0KG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gIGlmIChuYXRpdmUucmFuZG9tVVVJRCAmJiAhYnVmICYmICFvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5hdGl2ZS5yYW5kb21VVUlEKCk7XG4gIH1cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIGNvbnN0IHJuZHMgPSBvcHRpb25zLnJhbmRvbSB8fCAob3B0aW9ucy5ybmcgfHwgcm5nKSgpO1xuXG4gIC8vIFBlciA0LjQsIHNldCBiaXRzIGZvciB2ZXJzaW9uIGFuZCBgY2xvY2tfc2VxX2hpX2FuZF9yZXNlcnZlZGBcbiAgcm5kc1s2XSA9IHJuZHNbNl0gJiAweDBmIHwgMHg0MDtcbiAgcm5kc1s4XSA9IHJuZHNbOF0gJiAweDNmIHwgMHg4MDtcblxuICAvLyBDb3B5IGJ5dGVzIHRvIGJ1ZmZlciwgaWYgcHJvdmlkZWRcbiAgaWYgKGJ1Zikge1xuICAgIG9mZnNldCA9IG9mZnNldCB8fCAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7ICsraSkge1xuICAgICAgYnVmW29mZnNldCArIGldID0gcm5kc1tpXTtcbiAgICB9XG4gICAgcmV0dXJuIGJ1ZjtcbiAgfVxuICByZXR1cm4gdW5zYWZlU3RyaW5naWZ5KHJuZHMpO1xufVxuZXhwb3J0IGRlZmF1bHQgdjQ7Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/node_modules/uuid/dist/esm-node/v4.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@langchain/langgraph/node_modules/uuid/dist/esm-node/validate.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@langchain/langgraph/node_modules/uuid/dist/esm-node/validate.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _regex_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./regex.js */ \"(ssr)/./node_modules/@langchain/langgraph/node_modules/uuid/dist/esm-node/regex.js\");\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && _regex_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].test(uuid);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (validate);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9sYW5nZ3JhcGgvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS92YWxpZGF0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUErQjtBQUMvQjtBQUNBLHFDQUFxQyxpREFBSztBQUMxQztBQUNBLGlFQUFlLFFBQVEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdmVyeS90ZXN0Mi9hZ2VudC1jaGF0LXVpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2xhbmdncmFwaC9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3ZhbGlkYXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSRUdFWCBmcm9tICcuL3JlZ2V4LmpzJztcbmZ1bmN0aW9uIHZhbGlkYXRlKHV1aWQpIHtcbiAgcmV0dXJuIHR5cGVvZiB1dWlkID09PSAnc3RyaW5nJyAmJiBSRUdFWC50ZXN0KHV1aWQpO1xufVxuZXhwb3J0IGRlZmF1bHQgdmFsaWRhdGU7Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@langchain/langgraph/node_modules/uuid/dist/esm-node/validate.js\n");

/***/ })

};
;